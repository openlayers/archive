(window.webpackJsonp=window.webpackJsonp||[]).push([[165],{229:function(t,i,e){"use strict";e.r(i);var a=e(3),r=e(2),s=e(5),n=e(75),o=e(6),h=e(0),c=e(155),u=e(22),g=e(9),p=e(12),l=e(1),_=e(14),m=e(70),d=e(110),v=function(t){var i=t||{};m.a.call(this,{attributions:i.attributions,projection:i.projection,resolutions:i.resolutions}),this.crossOrigin_=void 0!==i.crossOrigin?i.crossOrigin:null,this.hidpi_=void 0===i.hidpi||i.hidpi,this.url_=i.url,this.imageLoadFunction_=void 0!==i.imageLoadFunction?i.imageLoadFunction:m.b,this.params_=i.params||{},this.image_=null,this.imageSize_=[0,0],this.renderedRevision_=0,this.ratio_=void 0!==i.ratio?i.ratio:1.5};Object(h.c)(v,m.a),v.prototype.getParams=function(){return this.params_},v.prototype.getImageInternal=function(t,i,e,a){if(void 0===this.url_)return null;i=this.findNearestResolution(i),e=this.hidpi_?e:1;var r=this.image_;if(r&&this.renderedRevision_==this.getRevision()&&r.getResolution()==i&&r.getPixelRatio()==e&&Object(l.g)(r.getExtent(),t))return r;var s={F:"image",FORMAT:"PNG32",TRANSPARENT:!0};Object(_.a)(s,this.params_);var n=((t=t.slice())[0]+t[2])/2,o=(t[1]+t[3])/2;if(1!=this.ratio_){var h=this.ratio_*Object(l.E)(t)/2,u=this.ratio_*Object(l.A)(t)/2;t[0]=n-h,t[1]=o-u,t[2]=n+h,t[3]=o+u}var m=i/e,d=Math.ceil(Object(l.E)(t)/m),v=Math.ceil(Object(l.A)(t)/m);t[0]=n-m*d/2,t[2]=n+m*d/2,t[1]=o-m*v/2,t[3]=o+m*v/2,this.imageSize_[0]=d,this.imageSize_[1]=v;var O=this.getRequestUrl_(t,this.imageSize_,e,a,s);return this.image_=new c.a(t,i,e,O,this.crossOrigin_,this.imageLoadFunction_),this.renderedRevision_=this.getRevision(),Object(g.a)(this.image_,p.a.CHANGE,this.handleImageChange,this),this.image_},v.prototype.getImageLoadFunction=function(){return this.imageLoadFunction_},v.prototype.getRequestUrl_=function(t,i,e,a,r){var s=a.getCode().split(":").pop();r.SIZE=i[0]+","+i[1],r.BBOX=t.join(","),r.BBOXSR=s,r.IMAGESR=s,r.DPI=Math.round(90*e);var n=this.url_,o=n.replace(/MapServer\/?$/,"MapServer/export").replace(/ImageServer\/?$/,"ImageServer/exportImage");return o==n&&Object(u.a)(!1,50),Object(d.a)(o,r)},v.prototype.getUrl=function(){return this.url_},v.prototype.setImageLoadFunction=function(t){this.image_=null,this.imageLoadFunction_=t,this.changed()},v.prototype.setUrl=function(t){t!=this.url_&&(this.url_=t,this.image_=null,this.changed())},v.prototype.updateParams=function(t){Object(_.a)(this.params_,t),this.image_=null,this.changed()};var O=v,S=[new s.a({source:new o.b}),new n.a({source:new O({ratio:1,params:{},url:"https://sampleserver1.arcgisonline.com/ArcGIS/rest/services/Specialty/ESRI_StateCityHighway_USA/MapServer"})})];new a.a({layers:S,target:"map",view:new r.a({center:[-10997148,4569099],zoom:4})})}},[[229,0]]]);
//# sourceMappingURL=arcgis-image.js.map