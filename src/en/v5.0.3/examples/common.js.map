{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///../src/ol/util.js","webpack:///../src/ol/extent.js","webpack:///../src/ol/centerconstraint.js","webpack:///../src/ol/View.js","webpack:///../src/ol/resolutionconstraint.js","webpack:///../src/ol/geom/flat/textpath.js","webpack:///../src/ol/render/canvas/Instruction.js","webpack:///../src/ol/render/canvas/Replay.js","webpack:///../src/ol/render/canvas/ImageReplay.js","webpack:///../src/ol/render/canvas/LineStringReplay.js","webpack:///../src/ol/render/canvas/PolygonReplay.js","webpack:///../src/ol/geom/flat/straightchunk.js","webpack:///../src/ol/render/canvas/TextReplay.js","webpack:///../src/ol/render/canvas/ReplayGroup.js","webpack:///../src/ol/renderer/canvas/VectorLayer.js","webpack:///../src/ol/renderer/canvas/VectorTileLayer.js","webpack:///../src/ol/Map.js","webpack:///../src/ol/proj/epsg3857.js","webpack:///../src/ol/proj/epsg4326.js","webpack:///../src/ol/proj/projections.js","webpack:///../src/ol/proj.js","webpack:///../src/ol/layer/Tile.js","webpack:///../src/ol/source/OSM.js","webpack:///../src/ol/xml.js","webpack:///../src/ol/format/xsd.js","webpack:///../src/ol/events.js","webpack:///../src/ol/geom/GeometryType.js","webpack:///../src/ol/webgl.js","webpack:///../src/ol/events/EventType.js","webpack:///../src/ol/source/Vector.js","webpack:///../src/ol/obj.js","webpack:///../src/ol/array.js","webpack:///../src/ol/transform.js","webpack:///../src/ol/TileState.js","webpack:///../src/ol/math.js","webpack:///../src/ol/geom/GeometryLayout.js","webpack:///../src/ol/Feature.js","webpack:///../src/ol/render/canvas.js","webpack:///../src/ol/asserts.js","webpack:///../src/ol/functions.js","webpack:///../src/ol/geom/Point.js","webpack:///../src/ol/dom.js","webpack:///../src/ol/coordinate.js","webpack:///../src/ol/format/GeoJSON.js","webpack:///../src/ol/layer/Vector.js","webpack:///../src/ol/Object.js","webpack:///../src/ol/geom/LineString.js","webpack:///../src/ol/proj/Units.js","webpack:///../src/ol/ImageState.js","webpack:///../src/ol/events/Event.js","webpack:///../src/ol/events/condition.js","webpack:///../src/ol/geom/Polygon.js","webpack:///../src/ol/render/ReplayType.js","webpack:///../src/ol/interaction/Pointer.js","webpack:///../src/ol/MapBrowserEventType.js","webpack:///../src/ol/format/Feature.js","webpack:///../src/ol/ViewHint.js","webpack:///../src/ol/interaction/Interaction.js","webpack:///../src/ol/source/BingMaps.js","webpack:///../src/ol/css.js","webpack:///../src/ol/has.js","webpack:///../src/ol/source/State.js","webpack:///../src/ol/format/GMLBase.js","webpack:///../src/ol/Kinetic.js","webpack:///../src/ol/interaction/DoubleClickZoom.js","webpack:///../src/ol/interaction/DragPan.js","webpack:///../src/ol/interaction/DragRotate.js","webpack:///../src/ol/interaction/DragZoom.js","webpack:///../src/ol/events/KeyCode.js","webpack:///../src/ol/interaction/KeyboardPan.js","webpack:///../src/ol/interaction/KeyboardZoom.js","webpack:///../src/ol/interaction/PinchRotate.js","webpack:///../src/ol/interaction.js","webpack:///../src/ol/source/XYZ.js","webpack:///../src/ol/control/Control.js","webpack:///../src/ol/Collection.js","webpack:///../src/ol/geom/SimpleGeometry.js","webpack:///../src/ol/easing.js","webpack:///../src/ol/tilecoord.js","webpack:///../src/ol/size.js","webpack:///../src/ol/LayerType.js","webpack:///../src/ol/geom/flat/transform.js","webpack:///../src/ol/CollectionEventType.js","webpack:///../src/ol/source/TileJSON.js","webpack:///../src/ol/tilegrid.js","webpack:///../src/ol/proj/Projection.js","webpack:///../src/ol/reproj/Tile.js","webpack:///../src/ol/source/TileImage.js","webpack:///../src/ol/source/TileWMS.js","webpack:///../src/ol/geom/MultiPoint.js","webpack:///../src/ol/geom/MultiLineString.js","webpack:///../src/ol/source/Stamen.js","webpack:///../src/ol/reproj/Image.js","webpack:///../src/ol/source/Image.js","webpack:///../node_modules/proj4/lib/global.js","webpack:///../node_modules/proj4/lib/constants/values.js","webpack:///../node_modules/proj4/lib/constants/PrimeMeridian.js","webpack:///../node_modules/proj4/lib/constants/units.js","webpack:///../node_modules/proj4/lib/match.js","webpack:///../node_modules/proj4/lib/projString.js","webpack:///../node_modules/wkt-parser/parser.js","webpack:///../node_modules/wkt-parser/process.js","webpack:///../node_modules/wkt-parser/index.js","webpack:///../node_modules/proj4/lib/defs.js","webpack:///../node_modules/proj4/lib/parseCode.js","webpack:///../node_modules/proj4/lib/extend.js","webpack:///../node_modules/proj4/lib/common/msfnz.js","webpack:///../node_modules/proj4/lib/common/sign.js","webpack:///../node_modules/proj4/lib/common/adjust_lon.js","webpack:///../node_modules/proj4/lib/common/tsfnz.js","webpack:///../node_modules/proj4/lib/common/phi2z.js","webpack:///../node_modules/proj4/lib/projections/longlat.js","webpack:///../node_modules/proj4/lib/projections.js","webpack:///../node_modules/proj4/lib/projections/merc.js","webpack:///../node_modules/proj4/lib/constants/Ellipsoid.js","webpack:///../node_modules/proj4/lib/constants/Datum.js","webpack:///../node_modules/proj4/lib/datum.js","webpack:///../node_modules/proj4/lib/Proj.js","webpack:///../node_modules/proj4/lib/deriveConstants.js","webpack:///../node_modules/proj4/lib/datum_transform.js","webpack:///../node_modules/proj4/lib/datumUtils.js","webpack:///../node_modules/proj4/lib/adjust_axis.js","webpack:///../node_modules/proj4/lib/common/toPoint.js","webpack:///../node_modules/proj4/lib/checkSanity.js","webpack:///../node_modules/proj4/lib/transform.js","webpack:///../node_modules/proj4/lib/core.js","webpack:///../node_modules/mgrs/mgrs.js","webpack:///../node_modules/proj4/lib/Point.js","webpack:///../node_modules/proj4/lib/common/pj_enfn.js","webpack:///../node_modules/proj4/lib/common/pj_mlfn.js","webpack:///../node_modules/proj4/lib/common/pj_inv_mlfn.js","webpack:///../node_modules/proj4/lib/projections/tmerc.js","webpack:///../node_modules/proj4/lib/common/sinh.js","webpack:///../node_modules/proj4/lib/common/hypot.js","webpack:///../node_modules/proj4/lib/common/asinhy.js","webpack:///../node_modules/proj4/lib/common/log1py.js","webpack:///../node_modules/proj4/lib/common/gatg.js","webpack:///../node_modules/proj4/lib/common/clens.js","webpack:///../node_modules/proj4/lib/common/clens_cmplx.js","webpack:///../node_modules/proj4/lib/common/cosh.js","webpack:///../node_modules/proj4/lib/projections/etmerc.js","webpack:///../node_modules/proj4/lib/common/adjust_zone.js","webpack:///../node_modules/proj4/lib/projections/utm.js","webpack:///../node_modules/proj4/lib/common/srat.js","webpack:///../node_modules/proj4/lib/projections/gauss.js","webpack:///../node_modules/proj4/lib/projections/sterea.js","webpack:///../node_modules/proj4/lib/projections/stere.js","webpack:///../node_modules/proj4/lib/projections/somerc.js","webpack:///../node_modules/proj4/lib/projections/omerc.js","webpack:///../node_modules/proj4/lib/projections/lcc.js","webpack:///../node_modules/proj4/lib/projections/krovak.js","webpack:///../node_modules/proj4/lib/common/mlfn.js","webpack:///../node_modules/proj4/lib/common/e0fn.js","webpack:///../node_modules/proj4/lib/common/e1fn.js","webpack:///../node_modules/proj4/lib/common/e2fn.js","webpack:///../node_modules/proj4/lib/common/e3fn.js","webpack:///../node_modules/proj4/lib/common/gN.js","webpack:///../node_modules/proj4/lib/common/adjust_lat.js","webpack:///../node_modules/proj4/lib/common/imlfn.js","webpack:///../node_modules/proj4/lib/projections/cass.js","webpack:///../node_modules/proj4/lib/common/qsfnz.js","webpack:///../node_modules/proj4/lib/projections/laea.js","webpack:///../node_modules/proj4/lib/common/asinz.js","webpack:///../node_modules/proj4/lib/projections/aea.js","webpack:///../node_modules/proj4/lib/projections/gnom.js","webpack:///../node_modules/proj4/lib/common/iqsfnz.js","webpack:///../node_modules/proj4/lib/projections/cea.js","webpack:///../node_modules/proj4/lib/projections/eqc.js","webpack:///../node_modules/proj4/lib/projections/poly.js","webpack:///../node_modules/proj4/lib/projections/nzmg.js","webpack:///../node_modules/proj4/lib/projections/mill.js","webpack:///../node_modules/proj4/lib/projections/sinu.js","webpack:///../node_modules/proj4/lib/projections/moll.js","webpack:///../node_modules/proj4/lib/projections/eqdc.js","webpack:///../node_modules/proj4/lib/projections/vandg.js","webpack:///../node_modules/proj4/lib/projections/aeqd.js","webpack:///../node_modules/proj4/lib/projections/ortho.js","webpack:///../node_modules/proj4/lib/projections/qsc.js","webpack:///../node_modules/proj4/lib/index.js","webpack:///../node_modules/proj4/projs.js","webpack:///../src/ol/interaction/Draw.js","webpack:///../src/ol/style/Style.js","webpack:///../src/ol/layer/Layer.js","webpack:///../src/ol/layer/Image.js","webpack:///../src/ol/events/EventTarget.js","webpack:///../src/ol/Tile.js","webpack:///../src/ol/layer/Property.js","webpack:///../src/ol/color.js","webpack:///../src/ol/render/EventType.js","webpack:///../src/ol/render/replay.js","webpack:///../src/ol/style/IconOrigin.js","webpack:///../src/ol/ViewProperty.js","webpack:///../src/ol/tileurlfunction.js","webpack:///../src/ol/reproj/common.js","webpack:///../src/ol/extent/Relationship.js","webpack:///../src/ol/geom/MultiPolygon.js","webpack:///../src/ol/style/Text.js","webpack:///../src/ol/geom/flat/deflate.js","webpack:///../src/ol/geom/flat/inflate.js","webpack:///../src/ol/geom/Geometry.js","webpack:///../src/ol/geom/flat/reverse.js","webpack:///../src/ol/geom/flat/orient.js","webpack:///../src/ol/format/XMLFeature.js","webpack:///../src/ol/renderer/vector.js","webpack:///../src/ol/MapProperty.js","webpack:///../src/ol/Overlay.js","webpack:///../src/ol/colorlike.js","webpack:///../src/ol/style/IconAnchorUnits.js","webpack:///../src/ol/MapBrowserPointerEvent.js","webpack:///../src/ol/interaction/Select.js","webpack:///../src/ol/pointer/EventType.js","webpack:///../src/ol/OverlayPositioning.js","webpack:///../src/ol/source/WMTSRequestEncoding.js","webpack:///../src/ol/source/WMTS.js","webpack:///../src/ol/geom/flat/closest.js","webpack:///../src/ol/format/KML.js","webpack:///../src/ol/tilegrid/TileGrid.js","webpack:///../src/ol/format/FormatType.js","webpack:///../src/ol/geom/flat/contains.js","webpack:///../src/ol/source/VectorEventType.js","webpack:///../src/ol/uri.js","webpack:///../src/ol/string.js","webpack:///../src/ol/style/RegularShape.js","webpack:///../src/ol/VectorImageTile.js","webpack:///../src/ol/VectorTile.js","webpack:///../src/ol/source/VectorTile.js","webpack:///../src/ol/proj/proj4.js","webpack:///../src/ol/geom/flat/simplify.js","webpack:///../src/ol/style/Stroke.js","webpack:///../src/ol/ObjectEventType.js","webpack:///../src/ol/Observable.js","webpack:///../src/ol/source/Tile.js","webpack:///../src/ol/render/VectorContext.js","webpack:///../src/ol/pointer/EventSource.js","webpack:///../src/ol/rotationconstraint.js","webpack:///../src/ol/renderer/canvas/TileLayer.js","webpack:///../src/ol/layer/VectorTileRenderType.js","webpack:///../src/ol/source/ImageWMS.js","webpack:///../src/ol/layer/VectorTile.js","webpack:///../src/ol/structs/RBush.js","webpack:///../src/ol/style/Fill.js","webpack:///../src/ol/source/TileEventType.js","webpack:///../src/ol/source/UrlTile.js","webpack:///../src/ol/proj/transforms.js","webpack:///../src/ol/loadingstrategy.js","webpack:///../src/ol/reproj.js","webpack:///../src/ol/geom/LinearRing.js","webpack:///../src/ol/MapEventType.js","webpack:///../src/ol/Disposable.js","webpack:///../src/ol/ImageBase.js","webpack:///../src/ol/source/WMSServerType.js","webpack:///../src/ol/layer/TileProperty.js","webpack:///../src/ol/renderer/Map.js","webpack:///../src/ol/tilegrid/common.js","webpack:///../src/ol/format/XLink.js","webpack:///../src/ol/format/XML.js","webpack:///../src/ol/format/TextFeature.js","webpack:///../src/ol/geom/flat/interpolate.js","webpack:///../src/ol/geom/GeometryCollection.js","webpack:///../src/ol/format/JSONFeature.js","webpack:///../src/ol/source/Source.js","webpack:///../src/ol/TileRange.js","webpack:///../src/ol/structs/PriorityQueue.js","webpack:///../src/ol/MapEvent.js","webpack:///../src/ol/render/Feature.js","webpack:///../src/ol/format/MVT.js","webpack:///../src/ol/format/OWS.js","webpack:///../src/ol/format/WMTSCapabilities.js","webpack:///../src/ol/webgl/Shader.js","webpack:///../src/ol/webgl/Fragment.js","webpack:///../src/ol/webgl/Vertex.js","webpack:///../src/ol/render/webgl/circlereplay/defaultshader.js","webpack:///../src/ol/render/webgl/circlereplay/defaultshader/Locations.js","webpack:///../src/ol/vec/mat4.js","webpack:///../src/ol/render/webgl/Replay.js","webpack:///../src/ol/render/webgl.js","webpack:///../src/ol/webgl/Buffer.js","webpack:///../src/ol/render/webgl/CircleReplay.js","webpack:///../src/ol/render/webgl/texturereplay/defaultshader.js","webpack:///../src/ol/render/webgl/texturereplay/defaultshader/Locations.js","webpack:///../src/ol/webgl/ContextEventType.js","webpack:///../src/ol/webgl/Context.js","webpack:///../src/ol/render/webgl/TextureReplay.js","webpack:///../src/ol/render/webgl/ImageReplay.js","webpack:///../src/ol/geom/flat/topology.js","webpack:///../src/ol/render/webgl/linestringreplay/defaultshader.js","webpack:///../src/ol/render/webgl/linestringreplay/defaultshader/Locations.js","webpack:///../src/ol/render/webgl/LineStringReplay.js","webpack:///../src/ol/render/webgl/polygonreplay/defaultshader.js","webpack:///../src/ol/render/webgl/polygonreplay/defaultshader/Locations.js","webpack:///../src/ol/structs/LinkedList.js","webpack:///../src/ol/render/webgl/PolygonReplay.js","webpack:///../src/ol/render/webgl/TextReplay.js","webpack:///../src/ol/render/webgl/ReplayGroup.js","webpack:///../src/ol/render/webgl/Immediate.js","webpack:///../src/ol/renderer/webgl/defaultmapshader.js","webpack:///../src/ol/renderer/webgl/defaultmapshader/Locations.js","webpack:///../src/ol/renderer/webgl/Layer.js","webpack:///../src/ol/renderer/webgl/ImageLayer.js","webpack:///../src/ol/renderer/webgl/Map.js","webpack:///../src/ol/renderer/webgl/tilelayershader.js","webpack:///../src/ol/renderer/webgl/tilelayershader/Locations.js","webpack:///../src/ol/renderer/webgl/TileLayer.js","webpack:///../src/ol/renderer/webgl/VectorLayer.js","webpack:///../src/ol/WebGLMap.js","webpack:///../src/ol/tilegrid/WMTS.js","webpack:///../src/ol/Image.js","webpack:///../src/ol/render/Event.js","webpack:///../src/ol/geom/flat/intersectsextent.js","webpack:///../src/ol/geom/flat/area.js","webpack:///../src/ol/source/Raster.js","webpack:///../src/ol/pointer/MouseSource.js","webpack:///../src/ol/sphere.js","webpack:///../src/ol/style/IconImage.js","webpack:///../src/ol/style/Icon.js","webpack:///../src/ol/source/common.js","webpack:///../src/ol/renderer/canvas/Layer.js","webpack:///../src/ol/renderer/canvas/IntermediateCanvas.js","webpack:///../src/ol/net.js","webpack:///../src/ol/structs/LRUCache.js","webpack:///../src/ol/geom/flat/interiorpoint.js","webpack:///../src/ol/interaction/Property.js","webpack:///../src/ol/interaction/Modify.js","webpack:///../src/ol/extent/Corner.js","webpack:///../src/ol/render/Box.js","webpack:///../src/ol/interaction/DragBox.js","webpack:///../src/ol/GeolocationProperty.js","webpack:///../src/ol/Geolocation.js","webpack:///../node_modules/rbush/index.js","webpack:///../src/ol/ImageCanvas.js","webpack:///../src/ol/render/canvas/Immediate.js","webpack:///../src/ol/MapBrowserEventHandler.js","webpack:///../src/ol/PluggableMap.js","webpack:///../src/ol/format/TopoJSON.js","webpack:///../src/ol/style/Image.js","webpack:///../src/ol/ImageTile.js","webpack:///../src/ol/render/ReplayGroup.js","webpack:///../src/ol/renderer/Layer.js","webpack:///../src/ol/layer/Base.js","webpack:///../src/ol/interaction/MouseWheelZoom.js","webpack:///../src/ol/interaction/PinchZoom.js","webpack:///../src/ol/pointer/MsSource.js","webpack:///../src/ol/pointer/NativeSource.js","webpack:///../src/ol/pointer/PointerEvent.js","webpack:///../src/ol/pointer/TouchSource.js","webpack:///../src/ol/pointer/PointerEventHandler.js","webpack:///../src/ol/format/GML2.js","webpack:///../src/ol/interaction/Snap.js","webpack:///../src/ol/interaction/DragRotateAndZoom.js","webpack:///../src/ol/geom/Circle.js","webpack:///../src/ol/renderer/canvas/ImageLayer.js","webpack:///../src/ol/style/IconImageCache.js","webpack:///../src/ol/renderer/canvas/Map.js","webpack:///../src/ol/MapBrowserEvent.js","webpack:///../src/ol/layer/Group.js","webpack:///../src/ol/control/ScaleLine.js","webpack:///../src/ol/geom/flat/geodesic.js","webpack:///../src/ol/Graticule.js","webpack:///../src/ol/format/EsriJSON.js","webpack:///../src/ol/source/ImageStatic.js","webpack:///../src/ol/control/MousePosition.js","webpack:///../src/ol/format/WKT.js","webpack:///../src/ol/render.js","webpack:///../src/ol/interaction/DragAndDrop.js","webpack:///../src/ol/geom/flat/center.js","webpack:///../src/ol/featureloader.js","webpack:///../src/ol/reproj/Triangulation.js","webpack:///../src/ol/TileCache.js","webpack:///../src/ol/style/TextPlacement.js","webpack:///../src/ol/geom/flat/length.js","webpack:///../src/ol/layer/VectorRenderType.js","webpack:///../src/ol/TileQueue.js","webpack:///../src/ol/geom/flat/segments.js","webpack:///../src/ol/AssertionError.js","webpack:///../src/ol/format/IGC.js","webpack:///../src/ol/format/GPX.js","webpack:///../src/ol/style/Atlas.js","webpack:///../src/ol/style/AtlasManager.js","webpack:///../src/ol/control/Attribution.js","webpack:///../src/ol/control/FullScreen.js","webpack:///../node_modules/pbf/index.js","webpack:///../node_modules/pixelworks/lib/index.js","webpack:///../src/ol/control/OverviewMap.js","webpack:///../src/ol/source/Cluster.js","webpack:///../src/ol/control/Rotate.js","webpack:///../src/ol/control/Zoom.js","webpack:///../src/ol/control/util.js","webpack:///../node_modules/ieee754/index.js","webpack:///../node_modules/pixelworks/lib/util.js","webpack:///../node_modules/pixelworks/lib/processor.js","webpack:///../src/ol/style/Circle.js","webpack:///../node_modules/quickselect/quickselect.js"],"names":["webpackJsonpCallback","data","moduleId","chunkId","chunkIds","moreModules","executeModules","i","resolves","length","installedChunks","push","Object","prototype","hasOwnProperty","call","modules","parentJsonpFunction","shift","deferredModules","apply","checkDeferredModules","result","deferredModule","fulfilled","j","depId","splice","__webpack_require__","s","installedModules","0","exports","module","l","m","c","d","name","getter","o","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","p","jsonpArray","window","oldJsonpFunction","slice","inherits","childCtor","parentCtor","constructor","__webpack_exports__","VERSION","let","uidCounter_","getUid","obj","ol_uid","const","_extent_Relationship_js__WEBPACK_IMPORTED_MODULE_2__","boundingExtent","coordinates","extent","createEmpty","ii","extendCoordinate","buffer","opt_extent","clone","closestSquaredDistanceXY","x","y","dx","dy","containsCoordinate","coordinate","containsXY","containsExtent","extent1","extent2","coordinateRelationship","minX","minY","maxX","maxY","relationship","UNKNOWN","LEFT","RIGHT","BELOW","ABOVE","INTERSECTING","Infinity","createOrUpdate","createOrUpdateEmpty","createOrUpdateFromCoordinate","createOrUpdateFromCoordinates","extendCoordinates","createOrUpdateFromFlatCoordinates","flatCoordinates","offset","end","stride","extendFlatCoordinates","equals","extend","extendXY","Math","min","max","forEachCorner","callback","opt_this","val","getBottomLeft","getBottomRight","getTopRight","getTopLeft","getArea","area","isEmpty","getWidth","getHeight","getCenter","getCorner","corner","_extent_Corner_js__WEBPACK_IMPORTED_MODULE_1__","BOTTOM_LEFT","BOTTOM_RIGHT","TOP_LEFT","TOP_RIGHT","_asserts_js__WEBPACK_IMPORTED_MODULE_0__","getForViewAndSize","center","resolution","rotation","size","cosRotation","cos","sinRotation","sin","xCos","xSin","yCos","ySin","x0","x1","x2","x3","y0","y1","y2","y3","getIntersection","intersection","intersects","returnOrUpdate","scaleFromCenter","deltaX","deltaY","intersectsSegment","start","startRel","endRel","startX","startY","endX","endY","slope","applyTransform","transformFn","xs","ys","_boundingExtentXYs","none","DEFAULT_MIN_ZOOM","View","opt_options","ol_Object","this","options","hints_","animations_","updateAnimationKey_","updateAnimations_","projection_","proj","projection","applyOptions_","isNoopAnimation","animation","sourceCenter","targetCenter","sourceResolution","targetResolution","sourceRotation","targetRotation","util","properties","ViewProperty","CENTER","undefined","resolutionConstraintInfo","resolutionConstraint","maxResolution","minResolution","minZoom","maxZoom","zoomFactor","resolutions","delta","direction","z","array","math","index","floor","power","pow","createSnapToResolutions","getExtent","ol_extent","Units","DEGREES","getMetersPerUnit","defaultMaxResolution","common","defaultMinResolution","log","opt_maxLevel","oldLevel","newLevel","createSnapToPower","constraint","createResolutionConstraint","maxResolution_","minResolution_","zoomFactor_","resolutions_","minZoom_","centerConstraint","createExtent","createCenterConstraint","rotationConstraint","enableRotation","constrainRotation","rotationconstraint","createRotationConstraint","constraints_","RESOLUTION","zoom","constrainResolution","Number","getResolution","ROTATION","setProperties","options_","getUpdatedOptions_","newOptions","getZoom","getRotation","animate","var_args","animationCount","arguments","isDef","state","setCenter","setZoom","setRotation","setTimeout","Date","now","series","complete","anchor","duration","easing","PI","setHint","ViewHint","ANIMATING","getAnimating","getInteracting","INTERACTING","cancelAnimations","cancelAnimationFrame","more","seriesComplete","jj","elapsed","fraction","progress","set","calculateCenterZoom","calculateCenterRotate","filter","Boolean","requestAnimationFrame","currentCenter","currentResolution","getSizeFromViewport_","selector","element","document","querySelector","metrics","getComputedStyle","parseInt","width","height","constrainCenter","opt_delta","opt_direction","getConstraints","getHints","opt_hints","calculateExtent","opt_size","asserts","getMaxResolution","getMinResolution","getMaxZoom","getZoomForResolution","setMaxZoom","getMinZoom","setMinZoom","getProjection","getResolutions","getResolutionForExtent","xResolution","yResolution","getResolutionForValueFunction","opt_power","getValueForResolutionFunction","getState","nearest","getResolutionForZoom","fit","geometryOrExtent","geometry","SimpleGeometry","getType","GeometryType","CIRCLE","Polygon","rotate","Array","isArray","padding","coords","getFlatCoordinates","cosAngle","sinAngle","minRotX","minRotY","maxRotX","maxRotY","getStride","rotX","rotY","isNaN","constrainedResolution","centerRotX","centerRotY","functions","setResolution","centerOn","position","centerX","centerY","opt_anchor","hint","changed","drawTextOnPath","text","measure","startM","maxAngle","previousAngle","reverse","numChars","segmentM","segmentLength","sqrt","chunk","chunkLength","char","charAt","charLength","charM","segmentPos","angle","atan2","abs","interpolate","unshift","Instruction","BEGIN_GEOMETRY","BEGIN_PATH","CLOSE_PATH","CUSTOM","DRAW_CHARS","DRAW_IMAGE","END_GEOMETRY","FILL","MOVE_TO_LINE_TO","SET_FILL_STYLE","SET_STROKE_STYLE","STROKE","Instruction_fillInstruction","Instruction_strokeInstruction","beginPathInstruction","closePathInstruction","canvas_Instruction","CanvasReplay","tolerance","maxExtent","pixelRatio","overlaps","declutterTree","VectorContext","maxLineWidth","alignFill_","beginGeometryInstruction1_","beginGeometryInstruction2_","bufferedMaxExtent_","instructions","coordinateCache_","renderedTransform_","ol_transform","hitDetectionInstructions","pixelCoordinates_","viewRotation_","tmpExtent","tmpTransform","replayTextBackground_","context","p1","p2","p3","p4","fillInstruction","strokeInstruction","beginPath","moveTo","lineTo","fill_","setStrokeStyle_","stroke","replayImage_","image","anchorX","anchorY","declutterGroup","opacity","originX","originY","scale","snapToPixel","fillStroke","w","h","boxW","boxH","boxX","boxY","transform","canvas","strokePadding","round","declutterArgs","render_canvas","applyPixelRatio","dashArray","map","dash","appendFlatCoordinates","closed","skipFirst","myEnd","getBufferedMaxExtent","lastRel","nextRel","lastCoord","nextCoord","NaN","skipped","Relationship","drawCustomCoordinates_","ends","replayEnds","replayEnd","drawCustom","feature","renderer","beginGeometry","replayEndss","type","replayBegin","MULTI_POLYGON","getOrientedFlatCoordinates","endss","getEndss","myEnds","inflate","POLYGON","MULTI_LINE_STRING","getEnds","LINE_STRING","MULTI_POINT","POINT","endGeometry","origin","repeatSize","translate","fill","setTransform","instruction","strokeStyle","lineWidth","lineCap","lineJoin","miterLimit","has","lineDashOffset","setLineDash","renderDeclutter_","groupCount","box","collides","insert","declutterData","replay_","skippedFeaturesHash","featureCallback","opt_hitExtent","pixelCoordinates","flat_transform","dd","prevX","prevY","roundX","roundY","skipFeatures","pendingFill","pendingStroke","lastFillInstruction","lastStrokeInstruction","coordinateCache","viewRotation","batchSize","toString","getGeometry","arc","closePath","fn","rotateWithView","backgroundFill","backgroundStroke","begin","baseline","overflow","fillKey","offsetY","strokeKey","strokeWidth","textKey","textScale","pathLength","flat_length","textLength","textAlign","textStates","parts","render_replay","cc","chars","label","part","getImage","fillStyle","replay","replayHitDetection","opt_featureCallback","reverseHitDetectionInstructions","setFillStrokeStyle","fillStyleColor","getColor","colorlike","strokeStyleColor","strokeStyleLineCap","getLineCap","strokeStyleLineDash","getLineDash","lineDash","strokeStyleLineDashOffset","getLineDashOffset","strokeStyleLineJoin","getLineJoin","strokeStyleWidth","strokeStyleMiterLimit","getMiterLimit","createFill","applyStroke","createStroke","updateFillStyle","currentFillStyle","updateStrokeStyle","currentStrokeStyle","currentLineCap","currentLineDash","currentLineDashOffset","currentLineJoin","currentLineWidth","currentMiterLimit","endGeometryInstruction","finish","Replay","CanvasImageReplay","declutterGroup_","hitDetectionImage_","image_","anchorX_","anchorY_","height_","opacity_","originX_","originY_","rotateWithView_","rotation_","scale_","snapToPixel_","width_","drawCoordinates_","drawPoint","pointGeometry","myBegin","drawMultiPoint","multiPointGeometry","setImageStyle","imageStyle","getAnchor","getSize","hitDetectionImage","getHitDetectionImage","getOrigin","getOpacity","getRotateWithView","getScale","getSnapToPixel","ImageReplay","CanvasLineStringReplay","drawFlatCoordinates_","moveToLineToInstruction","drawLineString","lineStringGeometry","drawMultiLineString","multiLineStringGeometry","lastStroke","LineStringReplay","CanvasPolygonReplay","drawFlatCoordinatess_","numEnds","drawCircle","circleGeometry","setFillStrokeStyles_","color","circleInstruction","drawPolygon","polygonGeometry","drawMultiPolygon","multiPolygonGeometry","simplify","PolygonReplay","matchingChunk","m12","m23","x12","y12","x23","y23","chunkStart","chunkEnd","chunkM","acos","CanvasTextReplay","labels_","text_","textOffsetX_","textOffsetY_","textRotateWithView_","textRotation_","textFillState_","fillStates","textStrokeState_","strokeStates","textState_","textKey_","fillKey_","strokeKey_","widths_","prune","drawText","fillState","strokeState","textState","geometryType","placement","TextPlacement","LINE","flatEnd","flatOffset","oo","range","drawChars_","getFlatMidpoint","getFlatMidpoints","getFlatInteriorPoint","interiorPoints","getFlatInteriorPoints","drawTextImage_","containsKey","align","lines","split","numLines","widths","font","currentWidth","measureTextWidths","lineHeight","renderWidth","dom","ceil","textBaseline","leftRight","strokeText","fillText","setTextStyle","textStyle","textFillStyle","getFill","textStrokeStyle","getStroke","getFont","getOverflow","getMaxAngle","getPlacement","getTextAlign","getTextBaseline","getBackgroundFill","getBackgroundStroke","getPadding","textOffsetX","getOffsetX","textOffsetY","getOffsetY","textRotateWithView","textRotation","getText","join","BATCH_CONSTRUCTORS","Circle","Default","Image","LineString","Text","CanvasReplayGroup","opt_renderBuffer","ReplayGroup","declutterTree_","tolerance_","maxExtent_","overlaps_","pixelRatio_","resolution_","renderBuffer_","replaysByZIndex_","hitDetectionContext_","hitDetectionTransform_","circleArrayCache","fillCircleArrayRowToMiddle","radius","addDeclutter","group","declutter","clip","flatClipCoords","getClipCoords","hasReplays","replays","zIndex","candidates","zKey","replayKey","forEachFeatureAtCoordinate","hitTolerance","declutterReplays","hitExtent","contextSize","clearRect","declutteredFeatures","replayType","mask","arraySize","arr","error","getCircleArray","imageData","getImageData","ReplayType","IMAGE","TEXT","indexOf","all","entry","zs","keys","sort","zIndexKey","getReplay","Constructor","getReplays","opt_replayTypes","opt_declutterReplays","save","replayTypes","restore","canvas_ReplayGroup","CanvasVectorLayerRenderer","vectorLayer","Layer","getDeclutter","rbush_default","dirty_","renderedRevision_","renderedResolution_","renderedExtent_","renderedRenderOrder_","replayGroup_","replayGroupChanged","events","EventType","CLEAR","handleFontsChanged_","layer","LayerType","VECTOR","mapRenderer","disposeInternal","compose","frameState","layerState","skippedFeatureUids","managed","viewState","projectionExtent","vectorSource","getLayer","getSource","getTransform","clipExtent","clipped","replayGroup","clear","replayContext","drawOffsetX","drawOffsetY","transparentLayer","hasRenderListeners","hasListener","render_EventType","RENDER","drawWidth","drawHeight","drawSize","alpha","globalAlpha","getWrapX","canWrapX","offsetX","worldWidth","world","dispatchRenderEvent","mainContextAlpha","drawImage","composeFrame","preCompose","postCompose","thisArg","features","event","getVisible","handleStyleImageChange_","renderIfReadyAndVisible","prepareFrame","animating","viewHints","interacting","updateWhileAnimating","getUpdateWhileAnimating","updateWhileInteracting","getUpdateWhileInteracting","frameStateExtent","vectorLayerRevision","getRevision","vectorLayerRenderBuffer","getRenderBuffer","vectorLayerRenderOrder","getRenderOrder","vector","gutter","getOverlaps","loadFeatures","render","styles","styleFunction","getStyleFunction","dirty","renderFeature","forEachFeatureInExtent","loading","VectorLayer","IMAGE_REPLAYS","hybrid","VECTOR_REPLAYS","DEFAULT","CanvasVectorTileLayerRenderer","TileLayer","renderedLayerRevision_","tmpTransform_","zDirection","getRenderMode","VectorTileRenderType","VECTOR_TILE","getTile","tile","TileState","LOADED","createReplayGroup_","renderTileImage_","layerRevision","renderedTiles","renderMode","revision","renderOrder","replayState","getReplayState","renderedRevision","renderedRenderOrder","source","sourceTileGrid","getTileGrid","getTileGridForProjection","tileCoord","tileExtent","zIndexKeys","sourceTile","tileKeys","sourceTileCoord","sourceTileExtent","getTileCoordExtent","sharedExtent","bufferedExtent","tileProjection","reproject","setProjection","squaredTolerance","getFeatures","getUnits","TILE_PIXELS","setWorldExtent","setExtent","setReplayGroup","tt","loop","found","getReplayGroup","getReplayTransform_","tileGrid","tileResolution","renderResolution","tiles","clips","ABORT","worldOffset","currentZ","currentClip","zz","replayData","replayDeclutter","renderedTileRevision","wrappedTileCoord","getContext","getTilePixelSize","pixelScale","VectorTileLayer","Map_Map","controls","control_util","interactions","interaction","PluggableMap","createRenderer","Map","registerLayerRenderers","ImageLayer","RADIUS","HALF_SIZE","EXTENT","WORLD_EXTENT","EPSG3857Projection","code","Projection","units","METERS","global","worldExtent","getPointResolution","point","PROJECTIONS","fromEPSG4326","input","opt_output","opt_dimension","dimension","output","halfSize","tan","epsg3857_toEPSG4326","atan","exp","epsg4326_EXTENT","METERS_PER_UNIT","EPSG4326Projection","opt_axisOrientation","axisOrientation","metersPerUnit","epsg4326_PROJECTIONS","cache","cloneTransform","identityTransform","addProjection","add","getCode","transforms","proj_get","projectionLike","opt_units","pointResolution","getPointResolutionFunc","toEPSG4326","getTransformFromProjections","vertices","sphere","addEquivalentProjections","projections","forEach","addProjections","destination","createProjection","defaultCode","createTransformFromCoordinateTransform","coordTransform","addCoordinateTransforms","forward","inverse","sourceProj","destProj","fromLonLat","opt_projection","toLonLat","lonLat","lon","equivalent","projection1","projection2","equalUnits","sourceProjection","destinationProjection","sourceCode","destinationCode","transformFunc","transformExtent","projections1","projections2","forwardTransform","inverseTransform","addEquivalentTransforms","_obj_js__WEBPACK_IMPORTED_MODULE_4__","baseOptions","preload","useInterimTilesOnError","_layer_Layer_js__WEBPACK_IMPORTED_MODULE_2__","setPreload","setUseInterimTilesOnError","_LayerType_js__WEBPACK_IMPORTED_MODULE_1__","TILE","_util_js__WEBPACK_IMPORTED_MODULE_0__","getPreload","_layer_TileProperty_js__WEBPACK_IMPORTED_MODULE_3__","PRELOAD","getUseInterimTilesOnError","USE_INTERIM_TILES_ON_ERROR","_source_XYZ_js__WEBPACK_IMPORTED_MODULE_1__","ATTRIBUTION","OSM","attributions","crossOrigin","url","cacheSize","opaque","reprojectionErrorThreshold","tileLoadFunction","wrapX","_array_js__WEBPACK_IMPORTED_MODULE_0__","DOCUMENT","implementation","createDocument","XML_SCHEMA_INSTANCE_URI","createElementNS","namespaceURI","qualifiedName","getAllTextContent","node","normalizeWhitespace","getAllTextContent_","accumulator","nodeType","Node","CDATA_SECTION_NODE","TEXT_NODE","String","nodeValue","replace","firstChild","nextSibling","isDocument","Document","isNode","getAttributeNS","parse","xml","DOMParser","parseFromString","makeArrayExtender","valueReader","objectStack","makeArrayPusher","makeReplacer","makeObjectPropertyPusher","opt_property","localName","makeObjectPropertySetter","makeChildAppender","nodeWriter","appendChild","makeArraySerializer","serializersNS","nodeFactory","serializers","makeSimpleNodeFactory","serialize","opt_nodeName","opt_namespaceURI","fixedNodeName","nodeName","OBJECT_PROPERTY_NODE_FACTORY","makeSequence","orderedKeys","sequence","makeStructureNS","namespaceURIs","structure","opt_structureNS","structureNS","parseNode","parsersNS","firstElementChild","nextElementSibling","parsers","parser","pushParseAndPop","pop","values","opt_keys","pushSerializeAndPop","_string_js__WEBPACK_IMPORTED_MODULE_1__","readBoolean","readBooleanString","_xml_js__WEBPACK_IMPORTED_MODULE_0__","string","exec","readDateTime","dateTime","readDecimal","readDecimalString","parseFloat","readNonNegativeInteger","readNonNegativeIntegerString","readString","trim","writeBooleanTextNode","bool","writeStringTextNode","writeCDATASection","createCDATASection","writeDateTimeTextNode","date","getUTCFullYear","getUTCMonth","getUTCDate","getUTCHours","getUTCMinutes","getUTCSeconds","createTextNode","writeDecimalTextNode","decimal","toPrecision","writeNonNegativeIntegerTextNode","nonNegativeInteger","_obj_js__WEBPACK_IMPORTED_MODULE_0__","findListener","listeners","listener","opt_setDeleteIndex","listenerObj","bindTo","deleteIndex","getListeners","target","listenerMap","ol_lm","getListenerMap","removeListeners","removeEventListener","boundListener","listen","opt_once","callOnce","addEventListener","evt","unlistenByKey","bindListener","listenOnce","unlisten","unlistenAll","LINEAR_RING","GEOMETRY_COLLECTION","EXTENSIONS","ONE","SRC_ALPHA","COLOR_ATTACHMENT0","COLOR_BUFFER_BIT","TRIANGLES","TRIANGLE_STRIP","ONE_MINUS_SRC_ALPHA","ARRAY_BUFFER","ELEMENT_ARRAY_BUFFER","STREAM_DRAW","STATIC_DRAW","DYNAMIC_DRAW","CULL_FACE","BLEND","STENCIL_TEST","DEPTH_TEST","SCISSOR_TEST","UNSIGNED_BYTE","UNSIGNED_SHORT","UNSIGNED_INT","FLOAT","RGBA","FRAGMENT_SHADER","VERTEX_SHADER","LINEAR","TEXTURE_MAG_FILTER","TEXTURE_MIN_FILTER","TEXTURE_WRAP_S","TEXTURE_WRAP_T","TEXTURE_2D","TEXTURE0","CLAMP_TO_EDGE","FRAMEBUFFER","CONTEXT_IDS","opt_attributes","e","MAX_TEXTURE_SIZE","DEBUG","HAS","gl","createElement","failIfMajorPerformanceCaveat","getParameter","getSupportedExtensions","CHANGE","CONTEXTMENU","CLICK","DBLCLICK","DRAGENTER","DRAGOVER","DROP","ERROR","KEYDOWN","KEYPRESS","LOAD","MOUSEDOWN","MOUSEMOVE","MOUSEOUT","MOUSEUP","MOUSEWHEEL","MSPOINTERDOWN","RESIZE","TOUCHSTART","TOUCHMOVE","TOUCHEND","WHEEL","_structs_RBush_js__WEBPACK_IMPORTED_MODULE_17__","VectorSourceEvent","opt_feature","_events_Event_js__WEBPACK_IMPORTED_MODULE_7__","VectorSource","_source_Source_js__WEBPACK_IMPORTED_MODULE_14__","_source_State_js__WEBPACK_IMPORTED_MODULE_15__","READY","loader_","_functions_js__WEBPACK_IMPORTED_MODULE_11__","format_","format","url_","loader","_asserts_js__WEBPACK_IMPORTED_MODULE_5__","_featureloader_js__WEBPACK_IMPORTED_MODULE_10__","strategy_","strategy","_loadingstrategy_js__WEBPACK_IMPORTED_MODULE_12__","collection","useSpatialIndex","featuresRtree_","loadedExtentsRtree_","nullGeometryFeatures_","idIndex_","undefIdIndex_","featureChangeKeys_","featuresCollection_","_Collection_js__WEBPACK_IMPORTED_MODULE_1__","getArray","addFeaturesInternal","bindFeaturesCollection_","addFeature","addFeatureInternal","featureKey","addToIndex_","setupChangeEvents_","dispatchEvent","_source_VectorEventType_js__WEBPACK_IMPORTED_MODULE_16__","ADDFEATURE","_events_js__WEBPACK_IMPORTED_MODULE_6__","_events_EventType_js__WEBPACK_IMPORTED_MODULE_8__","handleFeatureChange_","_ObjectEventType_js__WEBPACK_IMPORTED_MODULE_3__","PROPERTYCHANGE","valid","id","getId","addFeatures","extents","newFeatures","geometryFeatures","load","modifyingCollection","REMOVEFEATURE","remove","_CollectionEventType_js__WEBPACK_IMPORTED_MODULE_2__","ADD","REMOVE","removeFeature","opt_fast","featureId","removeFeatureInternal","clearEvent","forEachFeature","forEachFeatureAtCoordinateDirect","intersectsCoordinate","forEachInExtent","forEachFeatureIntersectingExtent","intersectsExtent","getFeaturesCollection","getAll","_obj_js__WEBPACK_IMPORTED_MODULE_13__","_array_js__WEBPACK_IMPORTED_MODULE_4__","getFeaturesAtCoordinate","getFeaturesInExtent","getInExtent","getClosestFeatureToCoordinate","opt_filter","closestFeature","closestPoint","minSquaredDistance","previousMinSquaredDistance","closestPointXY","minDistance","getFeatureById","getFormat","getUrl","update","sid","removeFromIdIndex_","CHANGEFEATURE","hasFeature","loadedExtentsRtree","extentsToLoad","extentToLoad","_extent_js__WEBPACK_IMPORTED_MODULE_9__","removeLoadedExtent","removed","setLoader","assign","var_sources","TypeError","getValues","binarySearch","haystack","needle","opt_comparator","mid","cmp","comparator","numberSafeCompareFunction","low","high","a","b","includes","linearFindNearest","reverseSubArray","tmp","extension","find","func","arr1","arr2","len1","stableSort","compareFnc","findIndex","every","el","idx","isSorted","opt_func","opt_strict","compare","currentVal","res","tmp_","reset","multiply","transform1","transform2","a1","b1","c1","d1","e1","f1","a2","b2","c2","d2","e2","f2","f","setFromArray","dx1","dy1","sx","sy","dx2","dy2","invert","det","mat","determinant","IDLE","LOADING","EMPTY","clamp","cosh","roundUpToPowerOfTwo","LN2","squaredSegmentDistance","squaredDistance","solveLinearSystem","maxRow","maxEl","absValue","coef","k","toDegrees","angleInRadians","toRadians","angleInDegrees","modulo","lerp","XY","XYZ","XYM","XYZM","_style_Style_js__WEBPACK_IMPORTED_MODULE_6__","Feature","opt_geometryOrProperties","_Object_js__WEBPACK_IMPORTED_MODULE_4__","id_","geometryName_","style_","styleFunction_","geometryChangeKey_","_events_js__WEBPACK_IMPORTED_MODULE_1__","handleGeometryChanged_","_geom_Geometry_js__WEBPACK_IMPORTED_MODULE_5__","setGeometry","_util_js__WEBPACK_IMPORTED_MODULE_3__","getProperties","setGeometryName","getGeometryName","style","getStyle","setStyle","handleGeometryChange_","_events_EventType_js__WEBPACK_IMPORTED_MODULE_2__","createStyleFunction","setId","_transform_js__WEBPACK_IMPORTED_MODULE_4__","defaultFont","defaultFillStyle","defaultLineCap","defaultLineDash","defaultLineDashOffset","defaultLineJoin","defaultMiterLimit","defaultStrokeStyle","defaultTextAlign","defaultTextBaseline","defaultPadding","defaultLineWidth","labelCache","_structs_LRUCache_js__WEBPACK_IMPORTED_MODULE_3__","checkedFonts","measureContext","textHeights","checkFont","interval","referenceWidth","retries","checked","referenceFonts","len","isAvailable","getMeasureContext","available","referenceFont","measureText","check","done","_obj_js__WEBPACK_IMPORTED_MODULE_2__","clearInterval","fontSpec","fontFamilies","_css_js__WEBPACK_IMPORTED_MODULE_0__","fontFamily","setInterval","_dom_js__WEBPACK_IMPORTED_MODULE_1__","measureTextHeight","span","heights","textContent","margin","left","body","offsetHeight","removeChild","measureTextWidth","rotateAtOffset","resetTransform","_AssertionError_js__WEBPACK_IMPORTED_MODULE_0__","assert","assertion","errorCode","TRUE","FALSE","UNDEFINED","_math_js__WEBPACK_IMPORTED_MODULE_6__","Point","opt_layout","_geom_SimpleGeometry_js__WEBPACK_IMPORTED_MODULE_4__","setCoordinates","setFlatCoordinates","layout","getCoordinates","computeExtent","_extent_js__WEBPACK_IMPORTED_MODULE_1__","_geom_GeometryType_js__WEBPACK_IMPORTED_MODULE_3__","setLayout","_geom_flat_deflate_js__WEBPACK_IMPORTED_MODULE_5__","_geom_GeometryLayout_js__WEBPACK_IMPORTED_MODULE_2__","setFlatCoordinatesInternal","createCanvasContext2D","opt_width","opt_height","outerWidth","offsetWidth","marginLeft","marginRight","outerHeight","marginTop","marginBottom","replaceNode","newNode","oldNode","parent","parentNode","replaceChild","removeNode","removeChildren","lastChild","closestOnCircle","circle","getRadius","closestOnSegment","segment","along","createStringXY","opt_fractionDigits","template","toFixed","toStringXY","degreesToStringHDMS","hemispheres","degrees","normalizedDegrees","_math_js__WEBPACK_IMPORTED_MODULE_0__","dflPrecision","precision","deg","sec","coordinate1","coordinate2","coord1","coord2","distance","squaredDistanceToSegment","toStringHDMS","_proj_js__WEBPACK_IMPORTED_MODULE_13__","GeoJSON","_format_JSONFeature_js__WEBPACK_IMPORTED_MODULE_4__","dataProjection","featureProjection","defaultFeatureProjection","geometryName","extractGeometryName_","extractGeometryName","GEOMETRY_READERS","_geom_Point_js__WEBPACK_IMPORTED_MODULE_10__","_geom_LineString_js__WEBPACK_IMPORTED_MODULE_6__","_geom_Polygon_js__WEBPACK_IMPORTED_MODULE_11__","MultiPoint","_geom_MultiPoint_js__WEBPACK_IMPORTED_MODULE_8__","MultiLineString","_geom_MultiLineString_js__WEBPACK_IMPORTED_MODULE_7__","MultiPolygon","_geom_MultiPolygon_js__WEBPACK_IMPORTED_MODULE_9__","GeometryCollection","geometries","readGeometry","_geom_GeometryCollection_js__WEBPACK_IMPORTED_MODULE_5__","GEOMETRY_WRITERS","right","rightHanded","getGeometriesArray","_obj_js__WEBPACK_IMPORTED_MODULE_12__","writeGeometry","geometryReader","_format_Feature_js__WEBPACK_IMPORTED_MODULE_3__","geometryWriter","readFeature","readFeatures","readFeatureFromObject","geoJSONFeature","_Feature_js__WEBPACK_IMPORTED_MODULE_2__","geometry_name","readFeaturesFromObject","geoJSONFeatures","readGeometryFromObject","readProjection","readProjectionFromObject","crs","_asserts_js__WEBPACK_IMPORTED_MODULE_1__","writeFeature","writeFeatureObject","adaptOptions","writeFeatures","writeFeaturesObject","objects","writeGeometryObject","_style_Style_js__WEBPACK_IMPORTED_MODULE_5__","Property","renderBuffer","declutter_","updateWhileAnimating_","updateWhileInteracting_","renderMode_","_layer_VectorRenderType_js__WEBPACK_IMPORTED_MODULE_3__","setDeclutter","setRenderOrder","ObjectEvent","oldValue","_events_Event_js__WEBPACK_IMPORTED_MODULE_3__","BaseObject","opt_values","_Observable_js__WEBPACK_IMPORTED_MODULE_2__","values_","changeEventTypeCache","getChangeEventType","getKeys","notify","eventType","_ObjectEventType_js__WEBPACK_IMPORTED_MODULE_1__","opt_silent","unset","_geom_flat_simplify_js__WEBPACK_IMPORTED_MODULE_13__","_geom_SimpleGeometry_js__WEBPACK_IMPORTED_MODULE_5__","flatMidpoint_","flatMidpointRevision_","maxDelta_","maxDeltaRevision_","appendCoordinate","_array_js__WEBPACK_IMPORTED_MODULE_1__","lineString","_extent_js__WEBPACK_IMPORTED_MODULE_2__","_geom_flat_closest_js__WEBPACK_IMPORTED_MODULE_6__","forEachSegment","_geom_flat_segments_js__WEBPACK_IMPORTED_MODULE_12__","getCoordinateAtM","opt_extrapolate","_geom_GeometryLayout_js__WEBPACK_IMPORTED_MODULE_3__","extrapolate","_geom_flat_interpolate_js__WEBPACK_IMPORTED_MODULE_9__","_geom_flat_inflate_js__WEBPACK_IMPORTED_MODULE_8__","getCoordinateAt","opt_dest","getLength","_geom_flat_length_js__WEBPACK_IMPORTED_MODULE_11__","getSimplifiedGeometryInternal","simplifiedFlatCoordinates","simplifiedLineString","_geom_GeometryType_js__WEBPACK_IMPORTED_MODULE_4__","_geom_flat_intersectsextent_js__WEBPACK_IMPORTED_MODULE_10__","_geom_flat_deflate_js__WEBPACK_IMPORTED_MODULE_7__","FEET","PIXELS","USFEET","Event","propagationStopped","stopPropagation","preventDefault","_has_js__WEBPACK_IMPORTED_MODULE_3__","altKeyOnly","mapBrowserEvent","originalEvent","altKey","metaKey","ctrlKey","shiftKey","altShiftKeysOnly","focus","getTargetElement","activeElement","always","_functions_js__WEBPACK_IMPORTED_MODULE_2__","click","_MapBrowserEventType_js__WEBPACK_IMPORTED_MODULE_0__","mouseActionButton","button","never","pointerMove","singleClick","SINGLECLICK","noModifierKeys","platformModifierKeyOnly","shiftKeyOnly","targetNotEditable","tagName","mouseOnly","pointerEvent","pointerType","primaryAction","isPrimary","_math_js__WEBPACK_IMPORTED_MODULE_18__","_geom_SimpleGeometry_js__WEBPACK_IMPORTED_MODULE_7__","ends_","flatInteriorPointRevision_","flatInteriorPoint_","orientedRevision_","orientedFlatCoordinates_","circular","opt_n","opt_sphereRadius","_sphere_js__WEBPACK_IMPORTED_MODULE_8__","polygon","fromExtent","fromCircle","opt_sides","opt_angle","sides","getLayout","arrayLength","makeRegular","startAngle","appendLinearRing","linearRing","_geom_flat_closest_js__WEBPACK_IMPORTED_MODULE_10__","_geom_flat_contains_js__WEBPACK_IMPORTED_MODULE_11__","_geom_flat_area_js__WEBPACK_IMPORTED_MODULE_9__","opt_right","_geom_flat_orient_js__WEBPACK_IMPORTED_MODULE_16__","_geom_flat_inflate_js__WEBPACK_IMPORTED_MODULE_13__","flatCenter","_geom_flat_interiorpoint_js__WEBPACK_IMPORTED_MODULE_14__","getInteriorPoint","_geom_Point_js__WEBPACK_IMPORTED_MODULE_6__","getLinearRingCount","getLinearRing","_geom_LinearRing_js__WEBPACK_IMPORTED_MODULE_5__","getLinearRings","linearRings","simplifiedEnds","_geom_flat_simplify_js__WEBPACK_IMPORTED_MODULE_17__","simplifiedPolygon","_geom_flat_intersectsextent_js__WEBPACK_IMPORTED_MODULE_15__","_geom_flat_deflate_js__WEBPACK_IMPORTED_MODULE_12__","_obj_js__WEBPACK_IMPORTED_MODULE_5__","handleDragEvent","_functions_js__WEBPACK_IMPORTED_MODULE_1__","handleUpEvent","handleDownEvent","handleMoveEvent","PointerInteraction","_interaction_Interaction_js__WEBPACK_IMPORTED_MODULE_4__","handleEvent","handleDownEvent_","handleDragEvent_","handleMoveEvent_","handleUpEvent_","handlingDownUpSequence","trackedPointers_","targetPointers","centroid","pointerEvents","clientX","clientY","_MapBrowserPointerEvent_js__WEBPACK_IMPORTED_MODULE_3__","stopEvent","updateTrackedPointers_","_MapBrowserEventType_js__WEBPACK_IMPORTED_MODULE_2__","POINTERDRAG","POINTERUP","handledUp","POINTERDOWN","handled","shouldStopEvent","POINTERMOVE","isPointerDraggingEvent","pointerId","_events_EventType_js__WEBPACK_IMPORTED_MODULE_0__","POINTEROVER","POINTEROUT","POINTERENTER","POINTERLEAVE","POINTERCANCEL","_proj_js__WEBPACK_IMPORTED_MODULE_2__","FeatureFormat","transformWithOptions","write","transformed","_geom_Geometry_js__WEBPACK_IMPORTED_MODULE_0__","decimals","getReadOptions","_obj_js__WEBPACK_IMPORTED_MODULE_1__","getLastExtent","_math_js__WEBPACK_IMPORTED_MODULE_4__","Interaction","_Object_js__WEBPACK_IMPORTED_MODULE_1__","map_","setActive","pan","view","opt_duration","_easing_js__WEBPACK_IMPORTED_MODULE_2__","rotateWithoutConstraints","currentRotation","zoomWithoutConstraints","zoomByDelta","getActive","_interaction_Property_js__WEBPACK_IMPORTED_MODULE_3__","ACTIVE","getMap","active","setMap","_tilegrid_js__WEBPACK_IMPORTED_MODULE_8__","BingMaps","hidpi_","hidpi","_source_TileImage_js__WEBPACK_IMPORTED_MODULE_6__","_proj_js__WEBPACK_IMPORTED_MODULE_4__","_source_State_js__WEBPACK_IMPORTED_MODULE_5__","tilePixelRatio","transition","culture_","culture","maxZoom_","apiKey_","imagerySet_","imagerySet","_net_js__WEBPACK_IMPORTED_MODULE_3__","handleImageryMetadataResponse","getApiKey","getImagerySet","response","statusCode","statusDescription","authenticationResultCode","resourceSets","resources","resource","zoomMax","tileSize","imageWidth","imageHeight","zoomMin","tileUrlFunction","_tileurlfunction_js__WEBPACK_IMPORTED_MODULE_1__","imageUrlSubdomains","subdomain","quadKeyTileCoord","imageUrl","_tilecoord_js__WEBPACK_IMPORTED_MODULE_7__","imageryProviders","setAttributions","imageryProvider","intersecting","coverageAreas","coverageArea","bbox","epsg4326Extent","attribution","setState","getFontFamilies","CLASS_HIDDEN","CLASS_SELECTABLE","CLASS_UNSELECTABLE","CLASS_UNSUPPORTED","CLASS_CONTROL","CLASS_COLLAPSED","family","MSPOINTER","ua","navigator","userAgent","toLowerCase","FIREFOX","SAFARI","WEBKIT","MAC","DEVICE_PIXEL_RATIO","devicePixelRatio","CANVAS_LINE_DASH","GEOLOCATION","TOUCH","POINTER","_xml_js__WEBPACK_IMPORTED_MODULE_15__","GMLNS","GMLBase","featureType","featureNS","srsName","schemaLocation","FEATURE_COLLECTION_PARSERS","featureMember","readFeaturesInternal","featureMembers","_format_XMLFeature_js__WEBPACK_IMPORTED_MODULE_4__","ONLY_WHITESPACE_RE","childNodes","child","ft","count","uri","candidate","featureTypes","readFeatureElement","readGeometryElement","getAttribute","GEOMETRY_PARSERS_","fid","test","readPoint","readFlatCoordinatesFromNode_","_geom_Point_js__WEBPACK_IMPORTED_MODULE_11__","_geom_GeometryLayout_js__WEBPACK_IMPORTED_MODULE_5__","readMultiPoint","MULTIPOINT_PARSERS_","_geom_MultiPoint_js__WEBPACK_IMPORTED_MODULE_9__","readMultiLineString","lineStrings","MULTILINESTRING_PARSERS_","multiLineString","_geom_MultiLineString_js__WEBPACK_IMPORTED_MODULE_8__","setLineStrings","readMultiPolygon","polygons","MULTIPOLYGON_PARSERS_","multiPolygon","_geom_MultiPolygon_js__WEBPACK_IMPORTED_MODULE_10__","setPolygons","pointMemberParser_","POINTMEMBER_PARSERS_","lineStringMemberParser_","LINESTRINGMEMBER_PARSERS_","polygonMemberParser_","POLYGONMEMBER_PARSERS_","readLineString","readFlatLinearRing_","ring","GEOMETRY_FLAT_COORDINATES_PARSERS_","readLinearRing","_geom_LinearRing_js__WEBPACK_IMPORTED_MODULE_7__","readPolygon","flatLinearRings","FLAT_LINEAR_RINGS_PARSERS_","_geom_Polygon_js__WEBPACK_IMPORTED_MODULE_12__","http://www.opengis.net/gml","pointMember","pointMembers","lineStringMember","lineStringMembers","polygonMember","polygonMembers","RING_PARSERS","LinearRing","readGeometryFromNode","readFeaturesFromNode","readProjectionFromNode","_proj_js__WEBPACK_IMPORTED_MODULE_14__","Kinetic","decay","minVelocity","delay","decay_","minVelocity_","delay_","points_","angle_","initialVelocity_","lastIndex","firstIndex","getDistance","getAngle","ol_Kinetic","DoubleClickZoom","delta_","duration_","browserEvent","MapBrowserEventType","getView","interaction_DoubleClickZoom","DragPan","Pointer","kinetic_","kinetic","lastCentroid","lastPointersCount_","condition_","condition","events_condition","noKinetic_","centerpx","getPixelFromCoordinate","dest","getCoordinateFromPixel","interaction_DragPan","DragRotate","DragRotate_handleDownEvent","DragRotate_handleDragEvent","DragRotate_handleUpEvent","lastAngle_","pixel","theta","interaction_DragRotate","DragZoom","out_","out","DragBox","className","onBoxEnd","mapExtent","boxPixelExtent","factor","interaction_DragZoom","KeyCode","UP","DOWN","KeyboardPan","KeyboardPan_handleEvent","defaultCondition_","pixelDelta_","pixelDelta","keyCode","mapUnitsDelta","interaction_KeyboardPan","KeyboardZoom","KeyboardZoom_handleEvent","charCode","charCodeAt","interaction_KeyboardZoom","PinchRotate","PinchRotate_handleDownEvent","PinchRotate_handleDragEvent","PinchRotate_handleUpEvent","anchor_","rotating_","rotationDelta_","threshold_","threshold","rotationDelta","touch0","touch1","viewportPosition","getViewport","getBoundingClientRect","top","interaction_PinchRotate","defaults","Collection","altShiftDragRotate","doubleClickZoom","zoomDelta","zoomDuration","dragPan","pinchRotate","pinchZoom","PinchZoom","keyboard","mouseWheelZoom","MouseWheelZoom","shiftDragZoom","_tilegrid_js__WEBPACK_IMPORTED_MODULE_2__","_source_TileImage_js__WEBPACK_IMPORTED_MODULE_1__","urls","_events_js__WEBPACK_IMPORTED_MODULE_5__","Control","_Object_js__WEBPACK_IMPORTED_MODULE_3__","target_","listenerKeys","setTarget","_dom_js__WEBPACK_IMPORTED_MODULE_4__","getOverlayContainerStopEvent","_MapEventType_js__WEBPACK_IMPORTED_MODULE_2__","POSTRENDER","getElementById","_events_Event_js__WEBPACK_IMPORTED_MODULE_4__","CollectionEvent","opt_element","opt_array","unique_","unique","array_","assertUnique_","updateLength_","item","insertAt","elem","removeAt","prev","setAt","opt_except","_AssertionError_js__WEBPACK_IMPORTED_MODULE_1__","_obj_js__WEBPACK_IMPORTED_MODULE_6__","_geom_Geometry_js__WEBPACK_IMPORTED_MODULE_3__","_geom_GeometryLayout_js__WEBPACK_IMPORTED_MODULE_4__","getStrideForLayout","transformGeom2D","simpleGeometry","_geom_flat_transform_js__WEBPACK_IMPORTED_MODULE_5__","getFirstCoordinate","getLastCoordinate","getSimplifiedGeometry","simplifiedGeometryRevision","simplifiedGeometryCache","simplifiedGeometryMaxMinSquaredTolerance","simplifiedGeometry","nesting","getLayoutForStride","opt_sy","easeIn","easeOut","inAndOut","linear","opt_tileCoord","getKeyZXY","getKey","fromKey","hash","quadKey","digits","fromCharCode","withinExtentAndZ","tileRange","getTileRangeForExtentAndZ","getFullTileRange","num","hasArea","ratio","toSize","transform2D","TileJSON","tileJSON_","_source_TileImage_js__WEBPACK_IMPORTED_MODULE_7__","_proj_js__WEBPACK_IMPORTED_MODULE_5__","_source_State_js__WEBPACK_IMPORTED_MODULE_6__","jsonp","_net_js__WEBPACK_IMPORTED_MODULE_4__","handleTileJSONResponse","handleTileJSONError","client","XMLHttpRequest","onXHRLoad_","onXHRError_","open","send","tileJSON","_asserts_js__WEBPACK_IMPORTED_MODULE_2__","status","JSON","responseText","err","getTileJSON","epsg4326Projection","bounds","_extent_js__WEBPACK_IMPORTED_MODULE_3__","minzoom","maxzoom","getAttributions","attributionExtent","_tilegrid_TileGrid_js__WEBPACK_IMPORTED_MODULE_7__","getForProjection","getDefaultTileGrid","createForProjection","setDefaultTileGrid","getTileCoordCenter","extentFromProjection","worldsAway","getTileCoordForCoordAndZ","createXYZ","resolutionsFromExtent","opt_maxZoom","opt_tileSize","_tilegrid_common_js__WEBPACK_IMPORTED_MODULE_0__","_size_js__WEBPACK_IMPORTED_MODULE_1__","opt_corner","_extent_Corner_js__WEBPACK_IMPORTED_MODULE_3__","createForExtent","half","_proj_js__WEBPACK_IMPORTED_MODULE_6__","_proj_Units_js__WEBPACK_IMPORTED_MODULE_0__","code_","units_","extent_","worldExtent_","axisOrientation_","global_","canWrapX_","getPointResolutionFunc_","defaultTileGrid_","metersPerUnit_","getWorldExtent","getAxisOrientation","isGlobal","setGlobal","setGetPointResolution","ReprojTile","targetProj","targetTileGrid","getTileFunction","opt_errorThreshold","opt_renderEdges","Tile","renderEdges_","gutter_","canvas_","sourceTileGrid_","targetTileGrid_","wrappedTileCoord_","sourceTiles_","sourcesListenerKeys_","sourceZ_","targetExtent","maxTargetExtent","maxSourceExtent","limitedTargetExtent","sourceProjExtent","reproj","isFinite","errorThresholdInPixels","triangulation_","Triangulation","getTriangles","getZForResolution","sourceExtent","calculateSourceExtent","sourceRange","srcX","srcY","unlistenSources_","reproject_","sources","getTileSize","leftToLoad","sourceListenKey","reproj_Tile","TileImage","UrlTile","defaultTileLoadFunction","tileClass","ImageTile","tileCacheForProjection","tileGridForProjection","reprojectionErrorThreshold_","renderReprojectionEdges_","imageTile","src","canExpireCache","tileCache","expireCache","usedTiles","usedTileCache","getTileCacheForProjection","getGutter","ol_proj","getGutterInternal","getOpaque","thisProj","projKey","ol_tilegrid","TileCache","highWaterMark","createTile_","urlTileCoord","getTileCoordForTileUrlFunction","tileUrl","tileOptions","handleTileChange","tileCoordKey","tilecoord","newTile","getTilePixelRatio","getTileInternal","interimTile","refreshInterimChain","setRenderReprojectionEdges","setTileGridForProjection","tilegrid","_uri_js__WEBPACK_IMPORTED_MODULE_13__","TileWMS","params","transparent","_source_TileImage_js__WEBPACK_IMPORTED_MODULE_9__","params_","v13_","serverType_","tmpExtent_","updateV13_","setKey","getKeyForParams_","_util_js__WEBPACK_IMPORTED_MODULE_1__","getGetFeatureInfoUrl","projectionObj","sourceProjectionObj","getTileCoordForCoordAndResolution","_size_js__WEBPACK_IMPORTED_MODULE_8__","tmpSize","_reproj_js__WEBPACK_IMPORTED_MODULE_7__","baseParams","SERVICE","_common_js__WEBPACK_IMPORTED_MODULE_0__","REQUEST","FORMAT","TRANSPARENT","QUERY_LAYERS","getRequestUrl_","getParams","_source_WMSServerType_js__WEBPACK_IMPORTED_MODULE_10__","GEOSERVER","dpi","MAPSERVER","CARMENTA_SERVER","QGIS","substr","_math_js__WEBPACK_IMPORTED_MODULE_5__","_tilecoord_js__WEBPACK_IMPORTED_MODULE_11__","fixedTileUrlFunction","updateParams","version","_string_js__WEBPACK_IMPORTED_MODULE_12__","_math_js__WEBPACK_IMPORTED_MODULE_9__","_geom_SimpleGeometry_js__WEBPACK_IMPORTED_MODULE_6__","appendPoint","multiPoint","getPoint","_geom_Point_js__WEBPACK_IMPORTED_MODULE_5__","getPoints","points","_geom_flat_simplify_js__WEBPACK_IMPORTED_MODULE_12__","appendLineString","_geom_flat_closest_js__WEBPACK_IMPORTED_MODULE_7__","opt_interpolate","_geom_flat_interpolate_js__WEBPACK_IMPORTED_MODULE_10__","_geom_flat_inflate_js__WEBPACK_IMPORTED_MODULE_9__","getLineString","_geom_LineString_js__WEBPACK_IMPORTED_MODULE_5__","getLineStrings","midpoints","midpoint","simplifiedMultiLineString","_geom_flat_intersectsextent_js__WEBPACK_IMPORTED_MODULE_11__","_geom_flat_deflate_js__WEBPACK_IMPORTED_MODULE_8__","_source_XYZ_js__WEBPACK_IMPORTED_MODULE_2__","ATTRIBUTIONS","_source_OSM_js__WEBPACK_IMPORTED_MODULE_1__","LayerConfig","terrain","terrain-background","terrain-labels","terrain-lines","toner-background","toner","toner-hybrid","toner-labels","toner-lines","toner-lite","watercolor","ProviderConfig","Stamen","provider","providerConfig","layerConfig","ReprojImage","getImageFunction","targetProj_","maxSourceExtent_","targetResolution_","targetExtent_","sourceImage_","sourcePixelRatio_","getPixelRatio","sourceListenerKey_","ImageState","ImageBase","unlistenSource_","sourceState","defaultImageLoadFunction","ImageSourceEventType","ImageSourceEvent","ImageSource","Source","reprojectedImage_","reprojectedRevision_","findNearestResolution","dispose","getImageInternal","handleImageChange","PJD_3PARAM","PJD_7PARAM","PJD_WGS84","PJD_NODATUM","SEC_TO_RAD","HALF_PI","SIXTH","RA4","RA6","EPSLN","D2R","R2D","FORTPI","TWO_PI","SPI","PrimeMeridian_exports","greenwich","lisbon","paris","bogota","madrid","rome","bern","jakarta","ferro","brussels","stockholm","athens","oslo","to_meter","us-ft","ignoredChar","match","testkey","lkey","projString","defData","paramName","paramVal","paramOutname","self","paramObj","v","reduce","datum","rf","lat_0","lat0","lat_1","lat1","lat_2","lat2","lat_ts","lon_0","long0","lon_1","long1","lon_2","long2","lonc","longc","x_0","y_0","k_0","k0","r_a","R_A","zone","south","utmSouth","towgs84","datum_params","unit","from_greenwich","pm","nadgrids","datumCode","axis","txt","Parser","NEUTRAL","whitespace","latin","keyword","endThings","digets","Error","level","place","root","stack","currentObject","mapit","thing","newObj","sExpr","convert","readCharicter","neutral","quoted","afterquote","number","word","afterItem","newObjects","wkt_parser_D2R","d2r","wkt_parser","wkt","lisp","projName","local","PROJECTION","UNIT","DATUM","SPHEROID","geogcs","GEOGCS","toMeter","ellps","outName","inName","rename","cleanWKT","defs","that","def","EPSG","ESRI","IAU2000","console","WGS84","GOOGLE","lib_defs","codeWords","parseCode","testObj","testDef","some","testWKT","testProj","msfnz","eccent","sinphi","cosphi","con","sign","adjust_lon","tsfnz","phi","com","phi2z","ts","dphi","eccnth","identity","pt","projs","init","es","lat","names","projections_names","projStore","Ellipsoid_exports","MERIT","ellipseName","SGS85","GRS80","IAU76","airy","APL4","NWL9D","mod_airy","andrae","aust_SA","GRS67","bessel","bess_nam","clrk66","clrk80","clrk58","CPM","delmbr","engelis","evrst30","evrst48","evrst56","evrst69","evrstSS","fschr60","fschr60m","fschr68","helmert","hough","intl","kaula","lerch","mprts","new_intl","plessis","krass","SEasia","walbeck","WGS60","WGS66","WGS7","Datum_exports","wgs84","ellipse","datumName","ch1903","ggrs87","nad83","nad27","potsdam","carthage","hermannskogel","osni52","ire65","rassadiran","nzgd49","osgb36","s_jtsk","beduaram","gunung_segara","rnb72","lib_datum","ep2","datum_type","srsCode","json","ourProj","datumDef","sphere_","deriveConstants_sphere","ecc","eccentricity","datumObj","Proj","checkParams","compareDatums","Rn","Sin_Lat","Sin2_Lat","Cos_Lat","Longitude","Latitude","Height","geodeticToGeocentric","Dx_BF","Dy_BF","Dz_BF","Rx_BF","Ry_BF","Rz_BF","M_BF","geocentricToWgs84","x_tmp","y_tmp","z_tmp","geocentricFromWgs84","P","RR","CT","ST","RX","RK","RN","CPHI0","SPHI0","CPHI","SPHI","SDPHI","iter","X","Y","Z","geocentricToGeodetic","adjust_axis","denorm","xin","yin","zin","toPoint","checkSanity","checkCoord","checkNotWGS","datum_transform","core_wgs84","transformer","from","to","transformedArray","checkProj","oProj","core","fromProj","toProj","coord","single","NUM_100K_SETS","SET_ORIGIN_COLUMN_LETTERS","SET_ORIGIN_ROW_LETTERS","mgrs_A","I","O","mgrs_V","mgrs_Z","mgrs","mgrs_forward","UTMtoLL","decode","toUpperCase","bottom","mgrs_toPoint","ll","accuracy","utm","seasting","easting","snorthing","northing","zoneNumber","zoneLetter","setParm","get100kSetForZone","setColumn","setRow","column","row","parm","colOrigin","rowOrigin","colInt","rowInt","rollover","getLetter100kID","get100kID","encode","N","T","C","A","M","LongOriginRad","ZoneNumber","Lat","Long","LatRad","degToRad","LongRad","UTMEasting","UTMNorthing","LetterDesignator","getLetterDesignator","LLtoUTM","radToDeg","rad","N1","T1","C1","R1","D","LongOrigin","mu","phi1Rad","topRight","mgrsString","testChar","hunK","sb","substring","east100k","curCol","eastingValue","rewindMarker","getEastingFromChar","north100k","curRow","northingValue","getNorthingFromChar","getMinNorthing","remainder","accuracyBonus","sepEastingString","sepNorthingString","sep","sepEasting","sepNorthing","warn","fromMGRS","mgrsStr","toMGRS","lib_Point","C08","pj_enfn","en","pj_mlfn","sphi","cphi","pj_inv_mlfn","arg","tmerc","ml0","delta_lon","sin_phi","cos_phi","al","als","cs","tq","ml","tan_phi","ds","g","temp","asin","sinh","hypot","asinhy","log1py","gatg","pp","B","cos_2B","h1","h2","clens","arg_r","hr","hr1","hr2","clens_cmplx","arg_i","hi2","sin_arg_r","cos_arg_r","sinh_arg_i","cosh_arg_i","hi1","hi","etmerc","cgb","cbg","utg","gtu","np","Qn","Zb","Ce","Cn","sin_Cn","cos_Cn","sin_Ce","cos_Ce","adjust_zone","dependsOn","srat","esinp","gauss_MAX_ITER","gauss","rc","phic0","ratexp","K","sterea","sinc0","cosc0","R2","title","sinc","cosc","cosl","rho","stere","coslat0","sinlat0","cons","ms1","X0","ssfn_","cosX0","sinX0","sinX","cosX","rh","sinlat","coslat","dlon","ce","Chi","phit","eccen","somerc","phy0","lambda0","sinPhy0","semiMajorAxis","flattening","R","b0","k1","k2","k3","Sa1","Sa2","S","rotI","rotB","lambda","phy","prevPhy","iteration","omerc","no_off","no_rot","bl","fl","t0","dl","t1","t2","hl","jl","pl","dlon12","dlon10","gamma0","uc","us","vs","ql","sl","tl","vl","ul","POSITIVE_INFINITY","qp","sp","tp","vp","up","lcc","sin1","cos1","ts1","sin2","cos2","ms2","ts2","ts0","f0","rh1","krovak","s45","s90","fi0","alfa","uq","u0","n0","s0","ro0","ad","gfi","u","deltav","eps","ro","czech","fi1","ok","mlfn","e0","e3","e0fn","e1fn","e2fn","e3fn","gN","adjust_lat","imlfn","cass","lam","nl","asq","cl","ml1","phi1","nl1","rl1","tl1","dsq","qsfnz","P00","P01","P02","P10","P11","P20","laea","S_POLE","N_POLE","EQUIT","OBLIQ","mmf","apa","APA","authset","rq","xmf","ymf","sinb1","cosb1","sinph0","cosph0","coslam","sinlam","q","sinb","cosb","phi0","cCe","sCe","ab","cosz","sinz","beta","authlat","asinz","aea","sin_po","cos_po","qs1","qs2","t3","qs0","ns0","qs","phi1z","eccnts","gnom","sin_p14","cos_p14","infinity_dist","coslon","iqsfnz","cea","eqc","dlat","poly_MAX_ITER","poly","tanphi","mln","mlnp","ma","nzmg","B_re","B_im","C_re","C_im","delta_lat","d_phi","d_lambda","d_phi_n","d_psi","th_n_im1","th_re","th_im","th_n_re","th_n_im","z_re","z_im","z_n_im1","delta_x","z_n_re","z_n_im","iterations","num_re","num_im","den_re","den_im","den2","d_psi_n","mill","sinu_MAX_ITER","sinu","C_y","C_x","V","moll","delta_theta","eqdc","ml2","vandg","sinth","costh","gsq","msq","xx","yy","xys","c3","m1","th1","aeqd","sin_p12","cos_p12","Mlp","Ml","Nl1","Nl","psi","Az","G","H","GH","Hs","kp","cos_c","s2","s3","s4","cosAz","Ee","F","ortho","FACE_ENUM","FRONT","BACK","TOP","BOTTOM","AREA_ENUM","AREA_0","AREA_1","AREA_2","AREA_3","qsc_fwd_equat_face_theta","qsc_shift_lon_origin","slon","qsc","face","one_minus_f","one_minus_f_squared","xy","sinlon","nu","cosmu","tannu","tantheta","invert_sign","xa","lp","defaultDatum","proj4_package","proj4","proj4_projs","_style_Style_js__WEBPACK_IMPORTED_MODULE_25__","Mode","DrawEventType","DrawEvent","_events_Event_js__WEBPACK_IMPORTED_MODULE_8__","Draw","_interaction_Pointer_js__WEBPACK_IMPORTED_MODULE_21__","shouldHandle_","downPx_","downTimeout_","lastDragTime_","freehand_","source_","features_","snapTolerance_","snapTolerance","type_","mode_","_geom_GeometryType_js__WEBPACK_IMPORTED_MODULE_13__","getMode","stopClick_","stopClick","minPoints_","minPoints","maxPoints_","maxPoints","finishCondition_","finishCondition","geometryFunction","opt_geometry","_geom_Circle_js__WEBPACK_IMPORTED_MODULE_12__","squaredLength","_coordinate_js__WEBPACK_IMPORTED_MODULE_6__","setCenterAndRadius","_geom_Point_js__WEBPACK_IMPORTED_MODULE_19__","_geom_LineString_js__WEBPACK_IMPORTED_MODULE_14__","_geom_Polygon_js__WEBPACK_IMPORTED_MODULE_20__","concat","geometryFunction_","dragVertexDelay_","dragVertexDelay","finishCoordinate_","sketchFeature_","sketchPoint_","sketchCoords_","sketchLine_","sketchLineCoords_","squaredClickTolerance_","clickTolerance","overlay_","_layer_Vector_js__WEBPACK_IMPORTED_MODULE_23__","_source_Vector_js__WEBPACK_IMPORTED_MODULE_24__","getDefaultStyleFunction","_events_condition_js__WEBPACK_IMPORTED_MODULE_9__","freehandCondition_","freehand","freehandCondition","_events_js__WEBPACK_IMPORTED_MODULE_7__","_Object_js__WEBPACK_IMPORTED_MODULE_5__","_interaction_Property_js__WEBPACK_IMPORTED_MODULE_22__","updateState_","_events_EventType_js__WEBPACK_IMPORTED_MODULE_1__","move","_MapBrowserEventType_js__WEBPACK_IMPORTED_MODULE_3__","pass","clearTimeout","addToDrawing_","handlePointerMove_","_pointer_MouseSource_js__WEBPACK_IMPORTED_MODULE_18__","startDrawing_","_MapBrowserPointerEvent_js__WEBPACK_IMPORTED_MODULE_4__","circleMode","finishDrawing","atFinish_","abortDrawing_","createRegularPolygon","createBox","_extent_js__WEBPACK_IMPORTED_MODULE_10__","downPx","clickPx","modifyDrawing_","createOrUpdateSketchPoint_","at","potentiallyDone","potentiallyFinishCoordinates","finishCoordinate","finishPixel","updateSketchFeatures_","last","removeLastPoint","sketchFeature","_geom_MultiPoint_js__WEBPACK_IMPORTED_MODULE_16__","_geom_MultiLineString_js__WEBPACK_IMPORTED_MODULE_15__","_geom_MultiPolygon_js__WEBPACK_IMPORTED_MODULE_17__","sketchFeatures","overlaySource","_style_Stroke_js__WEBPACK_IMPORTED_MODULE_4__","Style","geometry_","defaultGeometryFunction","renderer_","stroke_","zIndex_","toFunction","getZIndex","getRenderer","setRenderer","getGeometryFunction","setFill","setImage","setStroke","setText","setZIndex","defaultStyles","createDefaultStyle","_style_Fill_js__WEBPACK_IMPORTED_MODULE_3__","_style_Circle_js__WEBPACK_IMPORTED_MODULE_2__","createEditingStyle","white","blue","_geom_GeometryType_js__WEBPACK_IMPORTED_MODULE_1__","_source_State_js__WEBPACK_IMPORTED_MODULE_8__","_layer_Base_js__WEBPACK_IMPORTED_MODULE_4__","mapPrecomposeKey_","mapRenderKey_","sourceChangeKey_","_events_js__WEBPACK_IMPORTED_MODULE_0__","_layer_Property_js__WEBPACK_IMPORTED_MODULE_5__","SOURCE","handleSourcePropertyChange_","setSource","visibleAtResolution","visible","_util_js__WEBPACK_IMPORTED_MODULE_2__","getLayersArray","getLayerStatesArray","opt_states","states","getLayerState","getSourceState","handleSourceChange_","_render_EventType_js__WEBPACK_IMPORTED_MODULE_7__","PRECOMPOSE","layerStatesArray","layerStates","EventTarget","_Disposable_js__WEBPACK_IMPORTED_MODULE_1__","pendingRemovals_","dispatching_","listeners_","propagate","pendingRemovals","_functions_js__WEBPACK_IMPORTED_MODULE_3__","_events_js__WEBPACK_IMPORTED_MODULE_2__","opt_type","_events_EventType_js__WEBPACK_IMPORTED_MODULE_4__","_events_EventTarget_js__WEBPACK_IMPORTED_MODULE_3__","transition_","transitionStarts_","getInterimTile","_TileState_js__WEBPACK_IMPORTED_MODULE_1__","getTileCoord","getAlpha","time","inTransition","endTransition","OPACITY","VISIBLE","Z_INDEX","MAX_RESOLUTION","MIN_RESOLUTION","_math_js__WEBPACK_IMPORTED_MODULE_1__","HEX_COLOR_RE_","NAMED_COLOR_RE_","asString","fromString","rgb","fromNamed","hasAlpha","normalize","fromStringInternal_","asArray","POSTCOMPOSE","_render_ReplayType_js__WEBPACK_IMPORTED_MODULE_0__","ORDER","TEXT_ALIGN","middle","hanging","alphabetic","ideographic","_tilecoord_js__WEBPACK_IMPORTED_MODULE_2__","createFromTemplate","zRegEx","xRegEx","yRegEx","dashYRegEx","createFromTemplates","templates","tileUrlFunctions","createFromTileUrlFunctions","nullTileUrlFunction","expandUrl","startCharCode","stopCharCode","stop","ENABLE_RASTER_REPROJECTION","ERROR_THRESHOLD","endss_","flatInteriorPointsRevision_","flatInteriorPoints_","appendPolygon","newEndss","_geom_flat_area_js__WEBPACK_IMPORTED_MODULE_8__","flatCenters","_geom_flat_center_js__WEBPACK_IMPORTED_MODULE_9__","getInteriorPoints","_geom_MultiPoint_js__WEBPACK_IMPORTED_MODULE_5__","simplifiedEndss","simplifiedMultiPolygon","getPolygon","prevEnds","_geom_Polygon_js__WEBPACK_IMPORTED_MODULE_6__","getPolygons","lastEnds","_style_TextPlacement_js__WEBPACK_IMPORTED_MODULE_1__","font_","textAlign_","textBaseline_","_style_Fill_js__WEBPACK_IMPORTED_MODULE_0__","maxAngle_","placement_","overflow_","offsetX_","offsetY_","backgroundFill_","backgroundStroke_","padding_","setOverflow","setFont","setMaxAngle","setOffsetX","setOffsetY","setPlacement","setScale","setTextAlign","setTextBaseline","setBackgroundFill","setBackgroundStroke","setPadding","deflateCoordinate","deflateCoordinates","deflateCoordinatesArray","coordinatess","opt_ends","deflateMultiCoordinatesArray","coordinatesss","opt_endss","inflateCoordinates","opt_coordinates","inflateCoordinatesArray","opt_coordinatess","inflateMultiCoordinatesArray","opt_coordinatesss","_transform_js__WEBPACK_IMPORTED_MODULE_7__","Geometry","extentRevision_","getClosestPoint","opt_closestPoint","_proj_Units_js__WEBPACK_IMPORTED_MODULE_6__","inCoordinates","outCoordinates","pixelExtent","projectedExtent","_geom_flat_transform_js__WEBPACK_IMPORTED_MODULE_4__","linearRingIsClockwise","edge","linearRingIsOriented","isClockwise","linearRingsAreOriented","orientLinearRings","orientLinearRingsArray","_xml_js__WEBPACK_IMPORTED_MODULE_4__","XMLFeature","xmlSerializer_","XMLSerializer","_format_Feature_js__WEBPACK_IMPORTED_MODULE_2__","_format_FormatType_js__WEBPACK_IMPORTED_MODULE_3__","XML","readFeatureFromDocument","readFeatureFromNode","doc","readFeaturesFromDocument","ELEMENT_NODE","readGeometryFromDocument","readProjectionFromDocument","writeFeatureNode","serializeToString","writeFeaturesNode","writeGeometryNode","_render_ReplayType_js__WEBPACK_IMPORTED_MODULE_3__","SIMPLIFY_TOLERANCE","GEOMETRY_RENDERERS","getImageState","_ImageState_js__WEBPACK_IMPORTED_MODULE_1__","imageReplay","textReplay","lineStringReplay","polygonReplay","geometryRenderer","circleReplay","defaultOrder","feature1","feature2","getSquaredTolerance","getTolerance","imageState","unlistenImageChange","listenImageChange","renderGeometry","_geom_GeometryType_js__WEBPACK_IMPORTED_MODULE_2__","getGeometries","renderFeatureInternal","LAYERGROUP","SIZE","TARGET","VIEW","_extent_js__WEBPACK_IMPORTED_MODULE_7__","Overlay","_Object_js__WEBPACK_IMPORTED_MODULE_2__","insertFirst","_css_js__WEBPACK_IMPORTED_MODULE_4__","autoPan","autoPanAnimation","autoPanMargin","rendered","bottom_","left_","right_","top_","mapPostrenderListenerKey","handleElementChanged","handleMapChanged","handleOffsetChanged","handlePositionChanged","handlePositioningChanged","setElement","setOffset","setPositioning","positioning","_OverlayPositioning_js__WEBPACK_IMPORTED_MODULE_3__","setPosition","getElement","getOffset","getPosition","getPositioning","_dom_js__WEBPACK_IMPORTED_MODULE_5__","_MapEventType_js__WEBPACK_IMPORTED_MODULE_1__","updatePixelPosition","container","getOverlayContainer","insertBefore","panIntoView","mapRect","getRect","overlayRect","offsetLeft","offsetRight","offsetTop","offsetBottom","centerPx","newCenterPx","pageXOffset","pageYOffset","setVisible","display","isRendered","mapSize","updateRenderedPosition","CENTER_RIGHT","BOTTOM_CENTER","CENTER_CENTER","TOP_CENTER","CENTER_LEFT","getOptions","_color_js__WEBPACK_IMPORTED_MODULE_0__","asColorLike","CanvasPattern","CanvasGradient","isColorLike","FRACTION","_MapBrowserEvent_js__WEBPACK_IMPORTED_MODULE_1__","MapBrowserPointerEvent","opt_dragging","opt_frameState","_style_Style_js__WEBPACK_IMPORTED_MODULE_12__","SelectEventType","SELECT","SelectEvent","selected","deselected","Select","_interaction_Interaction_js__WEBPACK_IMPORTED_MODULE_8__","_events_condition_js__WEBPACK_IMPORTED_MODULE_5__","addCondition_","addCondition","removeCondition_","removeCondition","toggleCondition_","toggleCondition","multi_","multi","filter_","_functions_js__WEBPACK_IMPORTED_MODULE_6__","hitTolerance_","layerFilter","featureOverlay","_layer_Vector_js__WEBPACK_IMPORTED_MODULE_9__","_source_Vector_js__WEBPACK_IMPORTED_MODULE_11__","_array_js__WEBPACK_IMPORTED_MODULE_2__","_geom_GeometryType_js__WEBPACK_IMPORTED_MODULE_7__","featureOverlay_","layers","layerFilter_","featureLayerAssociation_","_events_js__WEBPACK_IMPORTED_MODULE_3__","_CollectionEventType_js__WEBPACK_IMPORTED_MODULE_1__","addFeature_","removeFeature_","toggle","_obj_js__WEBPACK_IMPORTED_MODULE_10__","forEachFeatureAtPixel","addFeatureLayerAssociation_","removeFeatureLayerAssociation_","getHitTolerance","setHitTolerance","currentMap","selectedFeatures","unskipFeature","skipFeature","WMTSRequestEncoding","KVP","REST","optionsFromCapabilities","WMTS_WMTS","version_","dimensions_","dimensions","layer_","matrixSet_","matrixSet","tileurlfunction","requestEncoding_","requestEncoding","tilematrixset","Service","Request","Version","Format","createFromWMTSTemplate_","localContext","TileMatrix","getMatrixId","TileCol","TileRow","getKeyForDimensions_","wmtsCap","config","ol_array","elt","tileMatrixSets","supportedCRS","proj1","proj2","matrixLimits","matrixSets","matrixSetObj","projConfig","wgs84BoundingBox","wgs84ProjectionExtent","WMTS","gets","encodings","setUrls","setTileUrlFunction","getDimensions","getMatrixSet","getRequestEncoding","getVersion","updateDimensions","assignClosest","offset1","offset2","maxSquaredDelta","squaredDelta","arrayMaxSquaredDelta","multiArrayMaxSquaredDelta","assignClosestPoint","maxDelta","isRing","opt_tmpPoint","tmpPoint","assignClosestArrayPoint","assignClosestMultiArrayPoint","DEFAULT_COLOR","DEFAULT_IMAGE_STYLE_ANCHOR","DEFAULT_IMAGE_STYLE_ANCHOR_X_UNITS","DEFAULT_IMAGE_STYLE_ANCHOR_Y_UNITS","DEFAULT_IMAGE_STYLE_SIZE","DEFAULT_IMAGE_STYLE_SRC","DEFAULT_IMAGE_SCALE_MULTIPLIER","_xml_js__WEBPACK_IMPORTED_MODULE_26__","DEFAULT_FILL_STYLE","DEFAULT_NO_IMAGE_STYLE","DEFAULT_IMAGE_STYLE","DEFAULT_TEXT_STROKE_STYLE","DEFAULT_STROKE_STYLE","DEFAULT_TEXT_STYLE","DEFAULT_STYLE","DEFAULT_STYLE_ARRAY","KML","_format_XMLFeature_js__WEBPACK_IMPORTED_MODULE_6__","_style_Fill_js__WEBPACK_IMPORTED_MODULE_19__","_style_IconAnchorUnits_js__WEBPACK_IMPORTED_MODULE_21__","_style_Icon_js__WEBPACK_IMPORTED_MODULE_20__","anchorOrigin","_style_IconOrigin_js__WEBPACK_IMPORTED_MODULE_22__","anchorXUnits","anchorYUnits","_style_Stroke_js__WEBPACK_IMPORTED_MODULE_23__","_style_Text_js__WEBPACK_IMPORTED_MODULE_25__","_style_Style_js__WEBPACK_IMPORTED_MODULE_24__","_proj_js__WEBPACK_IMPORTED_MODULE_18__","defaultStyle_","defaultStyle","extractStyles_","extractStyles","writeStyles_","writeStyles","sharedStyles_","showPointNames_","showPointNames","GX_NAMESPACE_URIS","NAMESPACE_URIS","ICON_ANCHOR_UNITS_MAP","pixels","insetPixels","createNameStyleFunction","foundStyle","textOffset","imageSize","getImageSize","imageScale","foundText","createFeatureStyleFunction","styleUrl","sharedStyles","nameStyle","drawName","_geom_GeometryType_js__WEBPACK_IMPORTED_MODULE_10__","findStyle","styleValue","readColor","hexColor","readFlatCoordinates","re","readURI","baseURI","location","href","URL","readScale","_format_xsd_js__WEBPACK_IMPORTED_MODULE_7__","STYLE_MAP_PARSERS","Pair","pairObject","PAIR_PARSERS","readStyleMapValue","ICON_STYLE_PARSERS","Icon","iconObject","ICON_PARSERS","heading","hotSpot","xunits","yunits","LABEL_STYLE_PARSERS","LINE_STYLE_PARSERS","POLY_STYLE_PARSERS","outline","FLAT_LINEAR_RING_PARSERS","readFlatLinearRing","GX_MULTITRACK_GEOMETRY_PARSERS","Track","readGxTrack","GX_TRACK_PARSERS","when","whens","gxTrackObject","_geom_LineString_js__WEBPACK_IMPORTED_MODULE_11__","_geom_GeometryLayout_js__WEBPACK_IMPORTED_MODULE_9__","GEOMETRY_FLAT_COORDINATES_PARSERS","readFlatCoordinatesFromNode","EXTRUDE_AND_ALTITUDE_MODE_PARSERS","extrude","tessellate","altitudeMode","_geom_Polygon_js__WEBPACK_IMPORTED_MODULE_16__","MULTI_GEOMETRY_PARSERS","MultiGeometry","readMultiGeometry","multiGeometry","_geom_GeometryCollection_js__WEBPACK_IMPORTED_MODULE_8__","homogeneous","_geom_MultiPoint_js__WEBPACK_IMPORTED_MODULE_13__","setCommonGeometryProperties","_geom_MultiLineString_js__WEBPACK_IMPORTED_MODULE_12__","_geom_MultiPolygon_js__WEBPACK_IMPORTED_MODULE_14__","_asserts_js__WEBPACK_IMPORTED_MODULE_3__","_geom_Point_js__WEBPACK_IMPORTED_MODULE_15__","FLAT_LINEAR_RINGS_PARSERS","innerBoundaryIs","flatLinearRing","INNER_BOUNDARY_IS_PARSERS","outerBoundaryIs","OUTER_BOUNDARY_IS_PARSERS","STYLE_PARSERS","IconStyle","styleObject","IconObject","drawIcon","_math_js__WEBPACK_IMPORTED_MODULE_17__","offsetOrigin","LabelStyle","LineStyle","PolyStyle","readStyle","hasExtrude","hasTessellate","hasAltitudeMode","extrudes","tessellates","altitudeModes","DATA_PARSERS","displayName","EXTENDED_DATA_PARSERS","Data","featureObject","SchemaData","SCHEMA_DATA_PARSERS","extendedDataParser","REGION_PARSERS","LatLonAltBox","LAT_LON_ALT_BOX_PARSERS","regionObject","Lod","LOD_PARSERS","lodObject","regionParser","SimpleData","minAltitude","maxAltitude","north","east","west","minLodPixels","maxLodPixels","minFadeExtent","maxFadeExtent","NETWORK_LINK_PARSERS","ExtendedData","Region","Link","LINK_PARSERS","address","description","phoneNumber","visibility","PLACEMARK_PARSERS","StyleMap","styleMapValue","placemarkObject","MultiTrack","writeColorTextNode","rgba","_color_js__WEBPACK_IMPORTED_MODULE_4__","abgr","hex","readDocumentOrFolder_","Folder","Placemark","readPlacemark_","readSharedStyle_","readSharedStyleMap_","_Feature_js__WEBPACK_IMPORTED_MODULE_1__","_format_Feature_js__WEBPACK_IMPORTED_MODULE_5__","styleUri","fs","readName","readNameFromDocument","readNameFromNode","readNetworkLinks","networkLinks","readNetworkLinksFromDocument","readNetworkLinksFromNode","readRegion","regions","readRegionFromDocument","readRegionFromNode","EXTENDEDDATA_NODE_SERIALIZERS","pair","setAttribute","DOCUMENT_SERIALIZERS","writePlacemark","DOCUMENT_NODE_FACTORY","DATA_NODE_FACTORY","ICON_SEQUENCE","ICON_SERIALIZERS","GX_NODE_FACTORY","ICON_STYLE_SEQUENCE","ICON_STYLE_SERIALIZERS","icon","vec2","writeScaleTextNode","LABEL_STYLE_SEQUENCE","LABEL_STYLE_SERIALIZERS","LINE_STYLE_SEQUENCE","LINE_STYLE_SERIALIZERS","GEOMETRY_TYPE_TO_NODENAME","GEOMETRY_NODE_FACTORY","POINT_NODE_FACTORY","LINE_STRING_NODE_FACTORY","LINEAR_RING_NODE_FACTORY","POLYGON_NODE_FACTORY","MULTI_GEOMETRY_SERIALIZERS","writePrimitiveGeometry","writePolygon","writeMultiGeometry","factory","BOUNDARY_IS_SERIALIZERS","writeBoundaryIs","PLACEMARK_SERIALIZERS","namesAndValues","STYLE_SEQUENCE","STYLE_SERIALIZERS","PLACEMARK_SEQUENCE","EXTENDEDDATA_NODE_FACTORY","PRIMITIVE_GEOMETRY_SEQUENCE","PRIMITIVE_GEOMETRY_SERIALIZERS","POLYGON_SERIALIZERS","INNER_BOUNDARY_NODE_FACTORY","OUTER_BOUNDARY_NODE_FACTORY","outerRing","POLY_STYLE_SERIALIZERS","COLOR_NODE_FACTORY","getSrc","iconImageSize","iconProperties","KML_SEQUENCE","KML_SERIALIZERS","kml","xmlnsUri","setAttributeNS","TileGrid","_array_js__WEBPACK_IMPORTED_MODULE_3__","origins","origin_","origins_","_extent_js__WEBPACK_IMPORTED_MODULE_4__","tileSizes_","tileSizes","tileSize_","fullTileRanges_","tmpSize_","sizes","_TileRange_js__WEBPACK_IMPORTED_MODULE_2__","calculateTileRanges_","tmpTileCoord","forEachTileCoord","forEachTileCoordParentTileRange","opt_tileRange","tileCoordExtent","getTileCoordChildTileRange","getTileRangeExtent","_size_js__WEBPACK_IMPORTED_MODULE_6__","getTileCoordForXYAndZ_","getTileCoordForXYAndResolution_","reverseIntersectionPolicy","adjustX","adjustY","xFromOrigin","yFromOrigin","tileCoordX","tileCoordY","getTileCoordResolution","fullTileRanges","_extent_js__WEBPACK_IMPORTED_MODULE_0__","linearRingContainsExtent","linearRingContainsXY","wn","linearRingsContainsXY","linearRingssContainsXY","appendParams","keyParams","encodeURIComponent","padNumber","opt_precision","numberString","compareVersions","v1","v2","s1","n1","n2","_style_Image_js__WEBPACK_IMPORTED_MODULE_6__","RegularShape","checksums_","hitDetectionCanvas_","radius_","radius1","radius2_","radius2","size_","imageSize_","hitDetectionImageSize_","atlasManager_","atlasManager","render_","getRadius2","setOpacity","getHitDetectionImageSize","_ImageState_js__WEBPACK_IMPORTED_MODULE_4__","_render_canvas_js__WEBPACK_IMPORTED_MODULE_5__","_colorlike_js__WEBPACK_IMPORTED_MODULE_1__","renderOptions","_dom_js__WEBPACK_IMPORTED_MODULE_2__","draw_","createHitDetectionCanvas_","renderHitDetectionCallback","hasCustomHitDetectionImage","drawHitDetectionCanvas_","getChecksum","info","hitImage","angle0","radiusC","strokeChecksum","fillChecksum","checksum","VectorImageTile","sourceRevision","sourceTiles","context_","replayState_","sourceRevision_","loadListenerKeys_","sourceTileListenerKeys_","sourceZ","useLoadedOnly","loadCount","sourceTileKey","consumers","finishLoading_","tileKey","errorSourceTiles","uid","loaded","empty","defaultLoadFunction","featureloader","onLoad","onError","VectorTile","replayGroups_","tileLoadFunction_","DEFAULT_EXTENT","setFeatures","ol_VectorTile","VectorTile_VectorTile","tileGrids_","ol_VectorImageTile","_Projection_js__WEBPACK_IMPORTED_MODULE_2__","register","projCodes","_proj_js__WEBPACK_IMPORTED_MODULE_0__","code1","code2","_transforms_js__WEBPACK_IMPORTED_MODULE_1__","douglasPeucker","simplifiedOffset","markers","first","maxSquaredDistance","douglasPeuckerArray","snap","quantize","quantizeArray","quantizeMultiArray","Stroke","color_","lineCap_","lineDash_","lineDashOffset_","lineJoin_","miterLimit_","checksum_","setColor","setLineCap","setLineDashOffset","setLineJoin","setMiterLimit","setWidth","_events_EventType_js__WEBPACK_IMPORTED_MODULE_3__","Observable","_events_EventTarget_js__WEBPACK_IMPORTED_MODULE_2__","revision_","unByKey","on","once","un","_tilegrid_js__WEBPACK_IMPORTED_MODULE_9__","TileSource","_source_Source_js__WEBPACK_IMPORTED_MODULE_7__","opaque_","tilePixelRatio_","_TileCache_js__WEBPACK_IMPORTED_MODULE_2__","key_","forEachLoadedTile","covered","_tilecoord_js__WEBPACK_IMPORTED_MODULE_8__","_TileState_js__WEBPACK_IMPORTED_MODULE_3__","refresh","useTile","TileSourceEvent","drawGeometry","drawFeature","drawGeometryCollection","geometryCollectionGeometry","opt_declutterGroup","EventSource","dispatcher","mapping","mapping_","getEvents","getHandlerForEvent","disable","createSnapToN","createSnapToZero","opt_tolerance","_transform_js__WEBPACK_IMPORTED_MODULE_8__","CanvasTileLayerRenderer","tileLayer","_canvas_IntermediateCanvas_js__WEBPACK_IMPORTED_MODULE_7__","oversampling_","newTiles_","_extent_js__WEBPACK_IMPORTED_MODULE_6__","tmpTileRange_","imageTransform_","isDrawableTile_","tileState","viewResolution","viewCenter","tileSource","oversampling","imageExtent","tilesToDrawByZ","findLoadedTiles","createLoadedTileFinder","hints","animatingOrInteracting","_ViewHint_js__WEBPACK_IMPORTED_MODULE_4__","tmpTileRange","childTileRange","renderedResolution","tilePixelSize","currentScale","currentTilePixelSize","tileGutter","tilesToDraw","drawTileImage","coordinateToCanvasPixelTransform","updateUsedTiles","manageTilePyramid","scheduleExpireCache","alphaChanged","getImageTransform","HYBRID","ImageWMS","_source_Image_js__WEBPACK_IMPORTED_MODULE_10__","crossOrigin_","imageLoadFunction_","imageLoadFunction","ratio_","GETFEATUREINFO_IMAGE_SIZE","_proj_js__WEBPACK_IMPORTED_MODULE_8__","_reproj_js__WEBPACK_IMPORTED_MODULE_9__","_obj_js__WEBPACK_IMPORTED_MODULE_7__","imageResolution","viewWidth","viewHeight","viewExtent","requestWidth","requestHeight","requestExtent","_Image_js__WEBPACK_IMPORTED_MODULE_2__","_events_js__WEBPACK_IMPORTED_MODULE_4__","_events_EventType_js__WEBPACK_IMPORTED_MODULE_5__","getImageLoadFunction","_source_WMSServerType_js__WEBPACK_IMPORTED_MODULE_11__","setImageLoadFunction","setUrl","_layer_VectorTileRenderType_js__WEBPACK_IMPORTED_MODULE_5__","_layer_Vector_js__WEBPACK_IMPORTED_MODULE_4__","_obj_js__WEBPACK_IMPORTED_MODULE_3__","RBush","opt_maxEntries","rbush_","rbush__WEBPACK_IMPORTED_MODULE_1___default","items_","items","search","forEach_","rbush","_color_js__WEBPACK_IMPORTED_MODULE_1__","Fill","TileEventType","tileLoadingKeys_","getTileLoadFunction","getTileUrlFunction","getUrls","setTileLoadFunction","opt_key","pruneExceptNewestZ","_proj_js__WEBPACK_IMPORTED_MODULE_3__","calculateSourceResolution","targetMetersPerUnit","sourceMetersPerUnit","compensationFactor","enlargeClipPoint","centroidX","centroidY","dX","dY","triangulation","_dom_js__WEBPACK_IMPORTED_MODULE_0__","sourceDataExtent","canvasWidthInUnits","canvasHeightInUnits","stitchContext","stitchScale","xPos","yPos","srcWidth","srcHeight","targetTopLeft","triangle","v0","u1","u2","sourceNumericalShiftX","sourceNumericalShiftY","augmentedMatrix","affineCoefs","_math_js__WEBPACK_IMPORTED_MODULE_2__","p0","_geom_flat_simplify_js__WEBPACK_IMPORTED_MODULE_9__","_geom_flat_area_js__WEBPACK_IMPORTED_MODULE_5__","simplifiedLinearRing","MOVESTART","MOVEEND","_functions_js__WEBPACK_IMPORTED_MODULE_0__","Disposable","disposed_","_events_EventTarget_js__WEBPACK_IMPORTED_MODULE_1__","MapRenderer","layerRenderers_","layerRendererListeners_","layerRendererConstructors_","expireIconCache","_style_IconImageCache_js__WEBPACK_IMPORTED_MODULE_7__","expire","sortByZIndex","state1","state2","constructors","getLayerRendererConstructors","calculateMatrices2D","coordinateToPixelTransform","pixelToCoordinateTransform","removeLayerRenderers","removeLayerRendererByKey_","thisArg2","translatedCoordinate","_layer_Layer_js__WEBPACK_IMPORTED_MODULE_6__","layerRenderer","getLayerRenderer","forEachLayerAtPixel","hasFeatureAtCoordinate","_functions_js__WEBPACK_IMPORTED_MODULE_5__","layerKey","handleLayerRendererChange_","getLayerRendererByKey","getLayerRenderers","renderFrame","removeUnusedLayerRenderers_","scheduleExpireIconCache","postRenderFunctions","scheduleRemoveUnusedLayerRenderers","DEFAULT_TILE_SIZE","DEFAULT_MAX_ZOOM","readHref","NAMESPACE_URI","read","readFromDocument","readFromNode","_format_FormatType_js__WEBPACK_IMPORTED_MODULE_2__","TextFeature","_format_Feature_js__WEBPACK_IMPORTED_MODULE_1__","readFeatureFromText","readFeaturesFromText","readGeometryFromText","readProjectionFromText","writeFeatureText","writeFeaturesText","writeGeometryText","interpolatePoint","pointX","pointY","cumulativeLengths","lineStringCoordinateAtM","lo","m0","lineStringsCoordinateAtM","opt_geometries","_geom_Geometry_js__WEBPACK_IMPORTED_MODULE_4__","geometries_","listenGeometriesChange_","cloneGeometries","clonedGeometries","unlistenGeometriesChange_","geometryCollection","setGeometries","simplifiedGeometries","simplified","simplifiedGeometryCollection","setGeometriesArray","_geom_GeometryType_js__WEBPACK_IMPORTED_MODULE_5__","JSONFeature","getObject","stringify","_source_State_js__WEBPACK_IMPORTED_MODULE_4__","attributions_","adaptAttributions_","state_","wrapX_","attributionLike","TileRange","contains","containsTileRange","PriorityQueue","priorityFunction","keyFunction","priorityFunction_","keyFunction_","elements_","priorities_","queuedElements_","dequeue","elements","priorities","siftUp_","elementKey","enqueue","priority","siftDown_","getCount","getLeftChildIndex_","getRightChildIndex_","getParentIndex_","heapify_","isKeyQueued","isQueued","startIndex","lIndex","rIndex","smallerChildIndex","parentIndex","reprioritize","_events_Event_js__WEBPACK_IMPORTED_MODULE_1__","MapEvent","RenderFeature","flatCoordinates_","flatMidpoints_","properties_","interiorpoint","render_Feature","MVT","featureClass_","featureClass","layerName_","layerName","layers_","layersPBFReader","tag","pbf","readVarint","pos","readFields","layerPBFReader","readFloat","readDouble","readVarint64","readSVarint","featurePBFReader","readRawFeature","readRawGeometry_","cmd","coordsLen","currentEnd","cmdLen","createFeature_","rawFeature","getGeometryType","geom","prevEndIndex","orient","GeometryLayout","FormatType","pbf_default","pbfLayers","pbfLayer","setLayers","OWS","PARSERS","ServiceIdentification","SERVICE_IDENTIFICATION_PARSERS","ServiceProvider","SERVICE_PROVIDER_PARSERS","OperationsMetadata","OPERATIONS_METADATA_PARSERS","ADDRESS_PARSERS","DeliveryPoint","xsd","City","AdministrativeArea","PostalCode","Country","ElectronicMailAddress","ALLOWED_VALUES_PARSERS","Value","CONSTRAINT_PARSERS","AllowedValues","CONTACT_INFO_PARSERS","Phone","PHONE_PARSERS","Address","DCP_PARSERS","HTTP","HTTP_PARSERS","Get","XLink","REQUEST_METHOD_PARSERS","Post","OPERATION_PARSERS","DCP","Operation","Voice","Facsimile","Constraint","SERVICE_CONTACT_PARSERS","IndividualName","PositionName","ContactInfo","Abstract","AccessConstraints","Fees","Title","ServiceTypeVersion","ServiceType","ProviderName","ProviderSite","ServiceContact","owsObject","format_OWS","WMTSCapabilities","owsParser_","WMTSCapabilities_NAMESPACE_URIS","OWS_NAMESPACE_URIS","WMTSCapabilities_PARSERS","Contents","CONTENTS_PARSERS","LAYER_PARSERS","TileMatrixSet","TMS_PARSERS","isDefault","TileMatrixSetLink","TMS_LINKS_PARSERS","Dimension","DIMENSION_PARSERS","ResourceURL","resourceType","WGS84BoundingBox","WGS84_BBOX_READERS","Identifier","LegendURL","legend","TileMatrixSetLimits","TMS_LIMITS_LIST_PARSERS","TileMatrixLimits","TMS_LIMITS_PARSERS","MinTileRow","MaxTileRow","MinTileCol","MaxTileCol","LowerCorner","readCoordinates","UpperCorner","WellKnownScaleSet","TM_PARSERS","SupportedCRS","TopLeftCorner","ScaleDenominator","TileWidth","TileHeight","MatrixWidth","MatrixHeight","WMTSCapabilityObject","WebGLShader","isAnimated","Shader","WebGLFragment","webgl","Fragment","WebGLVertex","Vertex","fragment","vertex","defaultshader_Locations","program","u_projectionMatrix","getUniformLocation","u_offsetScaleMatrix","u_offsetRotateMatrix","u_lineWidth","u_pixelRatio","u_opacity","u_fillColor","u_strokeColor","u_size","a_position","getAttribLocation","a_instruction","a_radius","fromTransform","mat4","WebGLReplay","projectionMatrix_","offsetRotateMatrix_","offsetScaleMatrix_","tmpMat4_","indices","indicesBuffer","startIndices","startIndicesFeature","verticesBuffer","getDeleteResourcesFunction","setUpProgram","shutDownProgram","locations","drawReplay","hitDetection","drawHitDetectionReplayOneByOne","drawHitDetectionReplay","oneByOne","drawHitDetectionReplayAll","DEPTH_BUFFER_BIT","tmpStencil","tmpStencilFunc","tmpStencilMaskVal","tmpStencilRef","tmpStencilMask","tmpStencilOpFail","tmpStencilOpPass","tmpStencilOpZFail","getGL","isEnabled","STENCIL_FUNC","STENCIL_VALUE_MASK","STENCIL_REF","STENCIL_WRITEMASK","STENCIL_FAIL","STENCIL_PASS_DEPTH_PASS","STENCIL_PASS_DEPTH_FAIL","enable","STENCIL_BUFFER_BIT","stencilMask","stencilFunc","ALWAYS","stencilOp","KEEP","REPLACE","NOTEQUAL","bindBuffer","projectionMatrix","offsetScaleMatrix","offsetRotateMatrix","uniformMatrix4fv","uniform1f","drawElements","elementType","hasOESElementIndexUint","numItems","offsetInBytes","DEFAULT_FILLSTYLE","DEFAULT_LINEDASH","DEFAULT_STROKESTYLE","EPSILON","triangleIsCounterClockwise","BufferUsage","WebGLBuffer","opt_arr","opt_usage","arr_","usage_","getUsage","Buffer","WebGLCircleReplay","defaultLocations_","styles_","styleIndices_","fillColor","strokeColor","numVertices","numIndices","lastState","deleteBuffer","getProgram","useProgram","enableVertexAttribArray","vertexAttribPointer","uniform2fv","disableVertexAttribArray","nextStyle","setFillStyle_","drawReplaySkipping_","groupStart","featureIndex","featureStart","uniform4fv","CircleReplay","defaultshader_fragment","defaultshader_vertex","texturereplay_defaultshader_Locations","u_image","a_texCoord","a_offsets","a_opacity","a_rotateWithView","ContextEventType","WebGLContext","gl_","bufferCache_","shaderCache_","programCache_","currentProgram_","hitDetectionFramebuffer_","hitDetectionTexture_","hitDetectionRenderbuffer_","getExtension","handleWebGLContextLost","handleWebGLContextRestored","createTextureInternal","opt_wrapS","opt_wrapT","texture","createTexture","bindTexture","texParameteri","createEmptyTexture","texImage2D","buf","bufferKey","bufferCacheEntry","arrayBuffer","createBuffer","Float32Array","Uint32Array","Uint16Array","bufferData","isContextLost","deleteProgram","deleteShader","deleteFramebuffer","deleteRenderbuffer","deleteTexture","getCanvas","getHitDetectionFramebuffer","initHitDetectionFramebuffer_","getShader","shaderObject","shaderKey","shader","createShader","shaderSource","compileShader","fragmentShaderObject","vertexShaderObject","programKey","createProgram","attachShader","linkProgram","framebuffer","createFramebuffer","bindFramebuffer","renderbuffer","createRenderbuffer","bindRenderbuffer","RENDERBUFFER","renderbufferStorage","DEPTH_COMPONENT16","framebufferTexture2D","framebufferRenderbuffer","DEPTH_ATTACHMENT","Context","WebGLTextureReplay","groupIndices","hitDetectionGroupIndices","defaultLocations","textures","getTextures","drawCoordinates","createTextures","images","texturePerImage","getHitDetectionTextures","drawReplaySkipping","groupEnd","hitDetectionTextures","opt_all","TextureReplay","WebGLImageReplay","images_","hitDetectionImages_","textures_","hitDetectionTextures_","currentImage","lineStringIsClosed","flat_area","linestringreplay_defaultshader_fragment","linestringreplay_defaultshader_vertex","linestringreplay_defaultshader_Locations","u_miterLimit","u_color","a_lastPos","a_nextPos","a_direction","WebGLLineStringReplay","startCoords","lastSign","addVertices_","product","isValid_","firstP","lastP","indexCount","drawPolygonCoordinates","holeFlatCoordinates","setPolygonStyle","opt_index","getCurrentIndex","tmpDepthFunc","DEPTH_FUNC","tmpDepthMask","DEPTH_WRITEMASK","depthMask","depthFunc","polygonreplay_defaultshader_fragment","polygonreplay_defaultshader_vertex","polygonreplay_defaultshader_Locations","LinkedList","opt_circular","first_","last_","head_","circular_","length_","insertItem","next","head","removeItem","firstItem","lastItem","nextItem","getNextItem","prevItem","getPrevItem","getCurrItem","setFirstItem","list","structs_LinkedList","WebGLPolygonReplay","rtree","processFlatCoordinates_","maxCoords","getMaxCoords_","holeLists","holeList","classifyPoints_","currList","currItem","getIntersections_","bridgeHole_","triangulate_","clockwise","segments","createPoint_","insertItem_","seg","ccw","pointsReclassified","reflex","removeItem_","hole","holeMaxX","listMaxX","bestPoint","p5","minDist","intersectingSegments","currSeg","calculateIntersection_","dist","pointsInTriangle","getPointsInTriangle_","currPoint","currTheta","p0Bridge","p1Bridge","simple","isSimple_","clipEars_","resolveSelfIntersections_","splitPolygon_","isClockwise_","processedEars","variableCriterion","diagonalIsInside_","opt_touch","resolvedIntersections","breakCond","intersections","newPolygon","newRtree","opt_rtree","opt_reflex","segmentsInExtent","denom","ub","p1IsLeftOf","p1IsRightOf","p3IsLeftOf","p3IsRightOf","p1InCone","p3InCone","currIndex","currLineIndex","holes","holeFlatCoords","lineDeleter","nullStrokeStyle","WebGLTextReplay","measureCanvas_","atlases_","currAtlas_","currX","currY","charArr","charInfo","glyphAtlas","textSize","getTextSize_","atlas","getInfo","drawText_","textHeight","str","sum","curr","addCharToAtlas_","mCtx","ctx","textFillStyleColor","textStrokeStyleColor","getAtlas_","calculateHash_","AtlasManager","space","HIT_DETECTION_SIZE","WebGLReplayGroup","replayHitDetection_","Uint8Array","readPixels","webgl_ReplayGroup","WebGLImmediateRenderer","center_","imageStyle_","fillStyle_","strokeStyle_","textStyle_","Immediate","defaultmapshader_fragment","defaultmapshader_vertex","defaultmapshader_Locations","u_texCoordMatrix","u_texture","WebGLLayerRenderer","arrayBuffer_","framebufferDimension","texCoordMatrix","postRenderFunction","dispatchComposeEvent_","uniform1i","getTexCoordMatrix","getProjectionMatrix","getTexture","drawArrays","composeEvent","webgl_Layer","WebGLImageLayerRenderer","imageLayer","hitCanvasContext_","hitTransformationMatrix_","createTexture_","imageElement","imageSource","renderedExtent","loadImage","updateProjectionMatrix_","canvasWidth","canvasHeight","canvasExtentWidth","canvasExtentHeight","getHitTransformationMatrix_","pixelOnFrameBuffer","mapCoordTransform","projectionMatrixInv","WebGLMapRenderer","css","clipTileCanvasWidth_","clipTileCanvasHeight_","clipTileContext_","renderedVisible_","antialias","depth","preserveDrawingBuffer","stencil","textureCache_","LRUCache","focus_","tileTextureQueue_","tileCenter","loadNextTileTexture_","bindTileTexture","textureCacheFrameMarkerCount_","initializeGL_","magFilter","minFilter","textureCacheEntry","clipTileCanvas","clipTileContext","vectorContext","expireCache_","peekLast","peekLastKey","getTileTextureQueue","renderers","activeTexture","blendFuncSeparate","isTileTextureLoaded","layerStatesToDraw","layer_Layer","State","clearColor","viewport","webgl_Map","tilelayershader_fragment","tilelayershader_vertex","tilelayershader_Locations","u_tileOffset","WebGLTileLayerRenderer","fragmentShader_","vertexShader_","locations_","renderArrayBuffer_","renderedTileRange_","renderedFramebufferExtent_","framebufferExtent","ol_size","tilePixelResolution","tileRangeSize","maxDimension","framebufferExtentDimension","allTilesLoaded","tileTextureQueue","pixelOnMapScaled","pixelOnFrameBufferScaled","WebGLVectorLayerRenderer","layerState_","scissor","WebGLMap","_tilegrid_TileGrid_js__WEBPACK_IMPORTED_MODULE_3__","WMTSTileGrid","matrixIds_","matrixIds","createFromCapabilitiesMatrixSet","opt_matrixLimits","switchOriginXY","elt_ml","tileWidth","tileHeight","getMatrixIds","_extent_js__WEBPACK_IMPORTED_MODULE_5__","ImageWrapper","_ImageBase_js__WEBPACK_IMPORTED_MODULE_1__","_ImageState_js__WEBPACK_IMPORTED_MODULE_2__","src_","imageListenerKeys_","handleImageError_","unlistenImage_","handleImageLoad_","RenderEvent","opt_vectorContext","opt_context","opt_glContext","glContext","_flat_segments_js__WEBPACK_IMPORTED_MODULE_2__","intersectsLineString","coordinatesExtent","point1","point2","intersectsLineStringArray","intersectsLinearRingArray","_flat_contains_js__WEBPACK_IMPORTED_MODULE_1__","intersectsLinearRing","intersectsLinearRingMultiArray","twiceArea","linearRingss","_transform_js__WEBPACK_IMPORTED_MODULE_19__","RasterEventType","RasterOperationType","RasterSourceEvent","_events_Event_js__WEBPACK_IMPORTED_MODULE_5__","RasterSource","worker_","operationType_","operationType","threads_","threads","renderers_","createRenderers","rr","_events_EventType_js__WEBPACK_IMPORTED_MODULE_6__","tileQueue_","_TileQueue_js__WEBPACK_IMPORTED_MODULE_2__","requestedFrameState_","renderedImageCanvas_","frameState_","tileQueue","wantedTiles","_source_Image_js__WEBPACK_IMPORTED_MODULE_16__","operation","setOperation","lib","opt_lib","pixelworks_lib_index__WEBPACK_IMPORTED_MODULE_7__","imageOps","queue","updateFrameState_","_extent_js__WEBPACK_IMPORTED_MODULE_8__","allSourcesReady_","ready","_source_State_js__WEBPACK_IMPORTED_MODULE_17__","processSources_","loadMoreTiles","imageDatas","process","onWorkerComplete_","_dom_js__WEBPACK_IMPORTED_MODULE_3__","_ImageCanvas_js__WEBPACK_IMPORTED_MODULE_1__","putImageData","sharedContext","_source_Tile_js__WEBPACK_IMPORTED_MODULE_18__","_layer_Tile_js__WEBPACK_IMPORTED_MODULE_12__","_renderer_canvas_TileLayer_js__WEBPACK_IMPORTED_MODULE_15__","createTileRenderer","_layer_Image_js__WEBPACK_IMPORTED_MODULE_11__","_renderer_canvas_ImageLayer_js__WEBPACK_IMPORTED_MODULE_14__","createImageRenderer","_layer_Layer_js__WEBPACK_IMPORTED_MODULE_10__","_LayerType_js__WEBPACK_IMPORTED_MODULE_9__","_pointer_EventSource_js__WEBPACK_IMPORTED_MODULE_1__","MouseSource","mousedown","mousemove","mouseup","mouseover","mouseout","pointerMap","lastTouches","POINTER_ID","POINTER_TYPE","prepareEvent","inEvent","cloneEvent","pd","isEventSimulatedFromTouch_","lts","cancel","down","cleanupMouse","enterOver","leaveOut","DEFAULT_RADIUS","opt_radius","deltaLatBy2","deltaLonBy2","getLengthInternal","getAreaInternal","bearing","lon1","dByR","IconImage","imageState_","tainting_","determineTainting_","dispatchChangeEvent_","replaceColor_","fillRect","imgData","normalizedAnchor_","anchorOrigin_","IconOrigin","anchorXUnits_","IconAnchorUnits","anchorYUnits_","img","imgSize","ol_color","iconImage_","iconImage","IconImageCache","offset_","offsetOrigin_","style_Image","DEFAULT_WMS_VERSION","CanvasLayerRenderer","_Layer_js__WEBPACK_IMPORTED_MODULE_7__","transform_","topLeft","bottomRight","bottomLeft","opt_transform","_render_canvas_Immediate_js__WEBPACK_IMPORTED_MODULE_6__","_render_Event_js__WEBPACK_IMPORTED_MODULE_3__","forEachLayerAtCoordinate","_render_EventType_js__WEBPACK_IMPORTED_MODULE_4__","_transform_js__WEBPACK_IMPORTED_MODULE_6__","IntermediateCanvasRenderer","_canvas_Layer_js__WEBPACK_IMPORTED_MODULE_5__","imageTransform","dw","dh","_functions_js__WEBPACK_IMPORTED_MODULE_4__","_coordinate_js__WEBPACK_IMPORTED_MODULE_1__","opt_errback","opt_callbackParam","script","cleanup","async","timer","getElementsByTagName","opt_highWaterMark","count_","entries_","oldest_","newest_","value_","newer","older","peekFirstKey","setSize","getInteriorPointOfArray","flatCentersOffset","maxSegmentLength","getInteriorPointsOfMultiArray","_style_Style_js__WEBPACK_IMPORTED_MODULE_20__","ModifyEventType","MODIFYSTART","MODIFYEND","ModifyEvent","mapBrowserPointerEvent","_events_Event_js__WEBPACK_IMPORTED_MODULE_9__","Modify","_interaction_Pointer_js__WEBPACK_IMPORTED_MODULE_15__","_events_condition_js__WEBPACK_IMPORTED_MODULE_11__","defaultDeleteCondition_","deleteCondition_","deleteCondition","insertVertexCondition_","insertVertexCondition","vertexFeature_","vertexSegments_","lastPixel_","ignoreNextSingleClick_","modified_","rBush_","_structs_RBush_js__WEBPACK_IMPORTED_MODULE_19__","pixelTolerance_","pixelTolerance","snappedToVertex_","changingFeature_","dragSegments_","_layer_Vector_js__WEBPACK_IMPORTED_MODULE_16__","_source_Vector_js__WEBPACK_IMPORTED_MODULE_17__","SEGMENT_WRITERS_","writePointGeometry_","writeLineStringGeometry_","writePolygonGeometry_","writeMultiPointGeometry_","writeMultiLineStringGeometry_","writeMultiPolygonGeometry_","writeCircleGeometry_","writeGeometryCollectionGeometry_","_events_js__WEBPACK_IMPORTED_MODULE_8__","_source_VectorEventType_js__WEBPACK_IMPORTED_MODULE_18__","handleSourceAdd_","handleSourceRemove_","handleFeatureAdd_","handleFeatureRemove_","lastPointerEvent_","CIRCLE_CENTER_INDEX","CIRCLE_CIRCUMFERENCE_INDEX","compareIndexes","handlePointerAtPixel_","pixelCoordinate","vertexFeature","insertVertices","vertexExtent","_extent_js__WEBPACK_IMPORTED_MODULE_12__","segmentDataMatches","componentSegments","segmentDataMatch","closestVertex","closestOnSegmentData","_coordinate_js__WEBPACK_IMPORTED_MODULE_7__","willModifyFeatures_","insertVertex_","dragSegment","segmentData","setRadius","setGeometryCoordinates_","createOrUpdateVertexFeature_","centerSegmentData","featureSegments","circumferenceSegmentData","_MapBrowserPointerEvent_js__WEBPACK_IMPORTED_MODULE_5__","_MapBrowserEventType_js__WEBPACK_IMPORTED_MODULE_4__","removePoint","pointDistanceToSegmentDataSquared","pointCoordinates","distanceToCenterSquared","distanceToCircumference","_events_EventType_js__WEBPACK_IMPORTED_MODULE_10__","removeFeatureSegmentData_","rBush","nodesToRemove","rings","kk","_Feature_js__WEBPACK_IMPORTED_MODULE_3__","_geom_Point_js__WEBPACK_IMPORTED_MODULE_14__","nodes","closestSegment","vertexPixel","vertexSegments","pixel1","pixel2","squaredDist1","squaredDist2","rTree","updateSegmentIndices_","newSegmentData","newSegmentData2","removeVertex_","component","newIndex","dragSegments","segmentsByFeature","deleted","_array_js__WEBPACK_IMPORTED_MODULE_6__","RenderBox","element_","startPixel_","endPixel_","startPixel","endPixel","setPixels","createOrUpdateGeometry","Box","DragBoxEventType","BOXSTART","BOXDRAG","BOXEND","DragBoxEvent","box_","minArea_","minArea","boxEndCondition_","boxEndCondition","defaultBoxEndCondition","GeolocationProperty","Geolocation","position_","watchId_","handleProjectionChanged_","handleTrackingChanged_","trackingOptions","setTrackingOptions","setTracking","tracking","getTracking","geolocation","watchPosition","positionChange_","positionError_","getTrackingOptions","clearWatch","altitude","altitudeAccuracy","longitude","latitude","projectedPosition","speed","getAccuracy","getAccuracyGeometry","getAltitude","getAltitudeAccuracy","getHeading","getSpeed","default","quickselect","maxEntries","_maxEntries","_minEntries","_initFormat","findItem","equalsFn","calcBBox","toBBox","distBBox","children","destNode","createNode","leaf","compareNodeMinX","compareNodeMinY","bboxArea","bboxMargin","enlargedArea","intersectionArea","multiSelect","_all","childBBox","nodesToSearch","_build","_splitRoot","tmpNode","_insert","goingUp","path","indexes","_condense","compareMinX","compareMinY","toJSON","fromJSON","right2","right3","N2","_chooseSubtree","targetNode","enlargement","minEnlargement","insertPath","_split","_adjustParentBBoxes","_chooseSplitAxis","splitIndex","_chooseSplitIndex","bbox1","bbox2","overlap","minOverlap","_allDistMargin","leftBBox","rightBBox","siblings","compareArr","Function","ImageCanvas","opt_loader","error_","getError","handleLoad_","_transform_js__WEBPACK_IMPORTED_MODULE_10__","CanvasImmediateRenderer","_VectorContext_js__WEBPACK_IMPORTED_MODULE_8__","contextFillState_","contextStrokeState_","contextTextState_","fillState_","strokeState_","imageAnchorX_","imageAnchorY_","imageHeight_","imageOpacity_","imageOriginX_","imageOriginY_","imageRotateWithView_","imageRotation_","imageScale_","imageSnapToPixel_","imageWidth_","textScale_","tmpLocalTransform_","drawImages_","_geom_flat_transform_js__WEBPACK_IMPORTED_MODULE_6__","localTransform","setContextFillState_","setContextStrokeState_","setContextTextState_","moveToLineTo_","close","drawRings_","flatMidpoint","geometryExtent","flatMidpoints","flatInteriorPoint","flatInteriorPoints","contextFillState","contextStrokeState","_has_js__WEBPACK_IMPORTED_MODULE_7__","contextTextState","_canvas_js__WEBPACK_IMPORTED_MODULE_9__","_colorlike_js__WEBPACK_IMPORTED_MODULE_2__","imageAnchor","imageImage","imageOrigin","textStrokeStyleLineCap","textStrokeStyleLineDash","textStrokeStyleLineDashOffset","textStrokeStyleLineJoin","textStrokeStyleWidth","textStrokeStyleMiterLimit","textFont","textText","textTextAlign","textTextBaseline","MapBrowserEventHandler","moveTolerance","clickTimeoutId_","dragging_","dragListenerKeys_","moveTolerance_","down_","activePointers_","trackedTouches_","pointerEventHandler_","PointerEventHandler","documentPointerEventHandler_","pointerdownListenerKey_","handlePointerDown_","relayedListenerKey_","relayEvent_","emulateClick_","newEvent","updateActivePointers_","handlePointerUp_","isMouseActionButton_","isMoving_","dragging","ol_MapBrowserEventHandler","optionsInternal","keyboardEventTarget","overlays","layerGroup","Group","MapProperty","createOptionsInternal","maxTilesLoading_","maxTilesLoading","loadTilesWhileAnimating_","loadTilesWhileAnimating","loadTilesWhileInteracting_","loadTilesWhileInteracting","animationDelayKey_","animationDelay_","renderFrame_","coordinateToPixelTransform_","pixelToCoordinateTransform_","frameIndex_","previousExtent_","viewPropertyListenerKey_","viewChangeListenerKey_","layerGroupPropertyListenerKeys_","viewport_","msTouchAction","touchAction","overlayContainer_","overlayContainerStopEvent_","overlayEvents","events_EventType","mapBrowserEventHandler_","handleMapBrowserEvent","keyboardEventTarget_","keyHandlerKeys_","handleBrowserEvent","overlays_","overlayIdIndex_","handleResize_","postRenderFunctions_","TileQueue","getTilePriority","handleTileChange_","skippedFeatureUids_","handleLayerGroupChanged_","handleViewChanged_","handleSizeChanged_","handleTargetChanged_","control","CollectionEventType","addOverlayInternal_","addControl","getControls","addInteraction","getInteractions","addLayer","getLayerGroup","getLayers","addOverlay","overlay","getOverlays","getFeaturesAtPixel","hasFeatureAtPixel","getEventCoordinate","getEventPixel","eventPosition","changedTouches","getTarget","getOverlayById","tileSourceKey","MapBrowserEvent","interactionsArray","handlePostRender","maxTotalLoading","maxNewLoads","getTilesLoading","targetElement","updateSize","handleViewPropertyChanged_","ObjectEventType","renderSync","removeControl","removeInteraction","removeLayer","removeOverlay","previousFrameState","pixelResolution","MapEventType","setLayerGroup","setView","featureUid","computedStyle","_proj_js__WEBPACK_IMPORTED_MODULE_10__","TopoJSON","_format_JSONFeature_js__WEBPACK_IMPORTED_MODULE_3__","transformVertex","_geom_Point_js__WEBPACK_IMPORTED_MODULE_8__","arcs","concatenateArcs","_geom_LineString_js__WEBPACK_IMPORTED_MODULE_4__","_geom_Polygon_js__WEBPACK_IMPORTED_MODULE_9__","_geom_MultiPoint_js__WEBPACK_IMPORTED_MODULE_6__","_geom_MultiLineString_js__WEBPACK_IMPORTED_MODULE_5__","polyArray","ringCoords","_geom_MultiPolygon_js__WEBPACK_IMPORTED_MODULE_7__","readFeaturesFromGeometryCollection","readFeatureFromGeometry","transformArc","topoJSONTopology","transformArcs","topoJSONFeatures","objectName","ImageStyle","setRotateWithView","setSnapToPixel","_Tile_js__WEBPACK_IMPORTED_MODULE_1__","getBlankImage","_TileState_js__WEBPACK_IMPORTED_MODULE_2__","naturalWidth","naturalHeight","_source_State_js__WEBPACK_IMPORTED_MODULE_7__","LayerRenderer","handleImageChange_","opt_tileCallback","BaseLayer","_layer_Property_js__WEBPACK_IMPORTED_MODULE_2__","_math_js__WEBPACK_IMPORTED_MODULE_3__","setMaxResolution","setMinResolution","zindex","_math_js__WEBPACK_IMPORTED_MODULE_7__","TRACKPAD","_interaction_Interaction_js__WEBPACK_IMPORTED_MODULE_6__","timeout_","timeout","useAnchor_","useAnchor","constrainResolution_","_events_condition_js__WEBPACK_IMPORTED_MODULE_2__","lastAnchor_","startTime_","timeoutId_","trackpadEventGap_","trackpadTimeoutId_","trackpadDeltaPerZoom_","trackpadZoomBuffer_","wheelEvent","_has_js__WEBPACK_IMPORTED_MODULE_5__","deltaMode","WheelEvent","DOM_DELTA_PIXEL","DOM_DELTA_LINE","wheelDeltaY","_ViewHint_js__WEBPACK_IMPORTED_MODULE_1__","decrementInteractingHint_","rebound","_easing_js__WEBPACK_IMPORTED_MODULE_3__","timeLeft","handleWheelZoom_","setMouseAnchor","_interaction_Pointer_js__WEBPACK_IMPORTED_MODULE_4__","lastDistance_","lastScaleDelta_","scaleDelta","newResolution","_interaction_Interaction_js__WEBPACK_IMPORTED_MODULE_3__","MsSource","MSPointerDown","msPointerDown","MSPointerMove","msPointerMove","MSPointerUp","msPointerUp","MSPointerOut","msPointerOut","MSPointerOver","msPointerOver","MSPointerCancel","msPointerCancel","MSGotPointerCapture","msGotPointerCapture","MSLostPointerCapture","msLostPointerCapture","POINTER_TYPES","prepareEvent_","makeEvent","pointer_MsSource","NativeSource","pointerdown","pointerDown","pointermove","pointerup","pointerUp","pointerout","pointerOut","pointerover","pointerOver","pointercancel","pointerCancel","gotpointercapture","gotPointerCapture","lostpointercapture","lostPointerCapture","fireNativeEvent","pointer_NativeSource","PointerEvent","opt_eventDict","eventDict","buttons","getButtons_","pressure","getPressure_","bubbles","cancelable","detail","screenX","screenY","relatedTarget","tiltX","tiltY","hwTimestamp","HAS_BUTTONS","which","ev","MouseEvent","pointer_PointerEvent","TouchSource","mouseSource","touchstart","touchmove","touchend","touchcancel","firstTouchId_","clickCount_","resetId_","dedupTimeout_","isPrimaryTouch_","inTouch","identifier","setPrimaryTouch_","cancelResetClickCount_","removePrimaryPointer_","inPointer","resetClickCount_","resetClickCountHandler_","touchToPointer_","webkitRadiusX","radiusX","webkitRadiusY","radiusY","webkitForce","force","processTouches_","inFunction","touches","pointer","findTouch_","touchList","searchId","vacuumTouches_","cancelOut_","dedupSynthMouse_","overDown_","outTarget","over","enter","moveOverOut_","outEvent","upOut_","leave","cleanUpPointer_","lt","pointer_TouchSource","eventMap_","eventSourceList_","registerSources","CLONE_PROPS","registerSource","register_","newEvents","handler","eventSource","addEvents_","unregister_","removeEvents_","eventHandler_","eventName","ol_events","eventCopy","fireEvent","contains_","contained","inType","wrapMouseEvent","_xml_js__WEBPACK_IMPORTED_MODULE_8__","_format_GMLBase_js__WEBPACK_IMPORTED_MODULE_3__","GML2","readFlatCoordinates_","containerSrs","_proj_js__WEBPACK_IMPORTED_MODULE_7__","coordsGroups","readBox_","BOX_PARSERS_","innerBoundaryIsParser_","outerBoundaryIsParser_","GEOMETRY_NODE_FACTORY_","multiSurface","surface","multiCurve","writeFeatureElement","writeGeometryElement","_format_xsd_js__WEBPACK_IMPORTED_MODULE_4__","writeCurveOrLineString_","createCoordinatesNode_","writeCoordinates_","writeCurveSegments_","writeLineStringOrCurveMember_","line","writeMultiCurveOrLineString_","hasZ","curve","LINESTRINGORCURVEMEMBER_SERIALIZERS_","MULTIGEOMETRY_MEMBER_NODE_FACTORY_","GEOMETRY_SERIALIZERS_","getCoords_","writeSurfaceOrPolygon_","RING_SERIALIZERS_","RING_NODE_FACTORY_","patches","writeSurfacePatches_","exteriorWritten","writeRing_","writeLinearRing_","opt_srsName","opt_hasZ","writePoint_","writeMultiPoint_","POINTMEMBER_SERIALIZERS_","writePointMember_","writeMultiSurfaceOrPolygon_","SURFACEORPOLYGONMEMBER_SERIALIZERS_","writeSurfaceOrPolygonMember_","writeEnvelope","ENVELOPE_SERIALIZERS_","MULTIGEOMETRY_TO_MEMBER_NODENAME","MultiCurve","MultiSurface","Curve","Surface","Envelope","curveMember","surfaceMember","lowerCorner","upperCorner","_structs_RBush_js__WEBPACK_IMPORTED_MODULE_14__","Snap","_interaction_Pointer_js__WEBPACK_IMPORTED_MODULE_10__","_functions_js__WEBPACK_IMPORTED_MODULE_7__","vertex_","edge_","featuresListenerKeys_","featureChangeListenerKeys_","indexedFeaturesExtents_","pendingFeatures_","pixelCoordinate_","sortByDistance_","deltaA","_coordinate_js__WEBPACK_IMPORTED_MODULE_3__","deltaB","snapTo","snapped","featuresToUpdate","_obj_js__WEBPACK_IMPORTED_MODULE_11__","updateFeature_","opt_listen","feature_uid","segmentWriter","forEachFeatureAdd_","forEachFeatureRemove_","getFeatures_","_source_Vector_js__WEBPACK_IMPORTED_MODULE_12__","opt_unlisten","unregister","_source_VectorEventType_js__WEBPACK_IMPORTED_MODULE_13__","lowerLeft","upperRight","_geom_GeometryType_js__WEBPACK_IMPORTED_MODULE_8__","isCircle","_interaction_Pointer_js__WEBPACK_IMPORTED_MODULE_5__","DragRotateAndZoom","_events_condition_js__WEBPACK_IMPORTED_MODULE_3__","lastMagnitude_","magnitude","_rotationconstraint_js__WEBPACK_IMPORTED_MODULE_1__","angleDelta","_ViewHint_js__WEBPACK_IMPORTED_MODULE_2__","getRadiusSquared_","circleExtent","_transform_js__WEBPACK_IMPORTED_MODULE_11__","CanvasImageLayerRenderer","_canvas_IntermediateCanvas_js__WEBPACK_IMPORTED_MODULE_10__","skippedFeatures_","vectorRenderer_","_LayerType_js__WEBPACK_IMPORTED_MODULE_3__","_Map_js__WEBPACK_IMPORTED_MODULE_9__","ctor","_layer_VectorRenderType_js__WEBPACK_IMPORTED_MODULE_7__","vectorRenderer","_reproj_common_js__WEBPACK_IMPORTED_MODULE_0__","skippedFeatures","imageFrameState","_obj_js__WEBPACK_IMPORTED_MODULE_8__","newSkippedFeatures","_ImageCanvas_js__WEBPACK_IMPORTED_MODULE_2__","_array_js__WEBPACK_IMPORTED_MODULE_5__","imagePixelRatio","cache_","cacheSize_","maxCacheSize_","maxCacheSize","shared","_source_State_js__WEBPACK_IMPORTED_MODULE_11__","layerRendererConstructors","CanvasMapRenderer","_Map_js__WEBPACK_IMPORTED_MODULE_10__","_css_js__WEBPACK_IMPORTED_MODULE_3__","_transform_js__WEBPACK_IMPORTED_MODULE_0__","_render_canvas_Immediate_js__WEBPACK_IMPORTED_MODULE_9__","_render_Event_js__WEBPACK_IMPORTED_MODULE_6__","_render_canvas_js__WEBPACK_IMPORTED_MODULE_8__","_layer_Layer_js__WEBPACK_IMPORTED_MODULE_5__","numLayers","_MapEvent_js__WEBPACK_IMPORTED_MODULE_1__","LayerGroup","_layer_Base_js__WEBPACK_IMPORTED_MODULE_9__","layersListenerKeys_","listenerKeys_","handleLayersChanged_","handleLayerChange_","handleLayersAdd_","handleLayersRemove_","layersArray","_ObjectEventType_js__WEBPACK_IMPORTED_MODULE_4__","_events_EventType_js__WEBPACK_IMPORTED_MODULE_7__","collectionEvent","ownLayerState","LEADING_DIGITS","ScaleLine","innerElement_","viewState_","minWidth_","minWidth","renderedWidth_","renderedHTML_","_control_Control_js__WEBPACK_IMPORTED_MODULE_3__","handleUnitsChanged_","setUnits","mapEvent","updateElement_","pointResolutionUnits","nominalCount","suffix","metersPerDegree","html","innerHTML","geodesic_line","geoM","fracA","fracB","fracM","geoA","geoB","geoStack","fractionStack","fractions","maxIterations","INTERVALS","Graticule","postcomposeListenerKey_","maxLat_","maxLon_","minLat_","minLon_","maxLatP_","maxLonP_","minLatP_","minLonP_","targetSize_","targetSize","maxLines_","maxLines","meridians_","parallels_","fromLonLatTransform_","toLonLatTransform_","projectionCenterLonLat_","meridiansLabels_","parallelsLabels_","showLabels","lonLabelFormatter_","lonLabelFormatter","ol_coordinate","latLabelFormatter_","latLabelFormatter","lonLabelPosition_","lonLabelPosition","latLabelPosition_","latLabelPosition","lonLabelStyle_","lonLabelStyle","latLabelStyle_","latLabelStyle","addMeridian_","minLat","maxLat","getMeridian_","textPoint","getMeridianPoint_","clampedBottom","clampedTop","addParallel_","minLon","maxLon","getParallel_","getParallelPoint_","clampedLeft","clampedRight","createGraticule_","getInterval_","cnt","centerLonLat","centerLon","centerLat","validExtent","frac","meridian","getMeridians","lon2","parallel","getParallels","handlePostCompose_","labelData","updateProjectionInfo_","worldExtentP","_geom_Point_js__WEBPACK_IMPORTED_MODULE_13__","_geom_GeometryLayout_js__WEBPACK_IMPORTED_MODULE_6__","getGeometryLayout","_geom_LineString_js__WEBPACK_IMPORTED_MODULE_8__","paths","_geom_Polygon_js__WEBPACK_IMPORTED_MODULE_14__","_geom_MultiPoint_js__WEBPACK_IMPORTED_MODULE_11__","_geom_MultiLineString_js__WEBPACK_IMPORTED_MODULE_10__","_geom_MultiPolygon_js__WEBPACK_IMPORTED_MODULE_12__","esriJSON","hasZM","getHasZM","hasM","EsriJSON","_format_JSONFeature_js__WEBPACK_IMPORTED_MODULE_5__","flatRing","outerRings","_geom_flat_deflate_js__WEBPACK_IMPORTED_MODULE_15__","matched","containsHole","_geom_LinearRing_js__WEBPACK_IMPORTED_MODULE_9__","convertRings","_obj_js__WEBPACK_IMPORTED_MODULE_17__","_format_Feature_js__WEBPACK_IMPORTED_MODULE_4__","esriJSONFeature","idField","attributes","esriJSONFeatures","objectIdFieldName","esriJSONObject","spatialReference","wkid","_source_Image_js__WEBPACK_IMPORTED_MODULE_8__","Static","_Image_js__WEBPACK_IMPORTED_MODULE_1__","targetWidth","MousePosition","_control_Control_js__WEBPACK_IMPORTED_MODULE_4__","coordinateFormat","setCoordinateFormat","undefinedHTML_","undefinedHTML","renderOnMouseOut_","mapProjection_","lastMouseMovePixel_","updateHTML_","getCoordinateFormat","handleMouseMove","handleMouseOut","_geom_SimpleGeometry_js__WEBPACK_IMPORTED_MODULE_13__","TokenType","Lexer","index_","isAlpha_","isNumeric_","opt_decimal","isWhiteSpace_","nextChar_","nextToken","token","readNumber_","readText_","scientificNotation","lexer","lexer_","token_","layout_","consume_","isTokenType","isMatch","parseGeometry_","parseGeometryLayout_","dimToken","dimInfo","parseGeometryCollectionText_","isEmptyGeometry_","formatErrorMessage_","parsePointText_","parsePoint_","parseLineStringText_","parsePointList_","parsePolygonText_","parseLineStringTextList_","parseMultiPointText_","parsePointTextList_","parseMultiLineStringText_","parseMultiPolygonText_","parsePolygonTextList_","WKT","_format_TextFeature_js__WEBPACK_IMPORTED_MODULE_3__","splitCollection_","splitCollection","encodePointGeometry","encodeLineStringGeometry","encodePolygonGeometry","GeometryEncoder","components","geoms","enc","geometryEncoder","encodeGeometryLayout","parse_","GeometryConstructor","LINESTRING","_geom_LineString_js__WEBPACK_IMPORTED_MODULE_7__","MULTIPOINT","MULTILINESTRING","MULTIPOLYGON","GeometryParser","geomType","_geom_GeometryCollection_js__WEBPACK_IMPORTED_MODULE_4__","_render_canvas_Immediate_js__WEBPACK_IMPORTED_MODULE_2__","toContext","_has_js__WEBPACK_IMPORTED_MODULE_0__","_transform_js__WEBPACK_IMPORTED_MODULE_1__","DragAndDropEventType","DragAndDropEvent","file","opt_features","DragAndDrop","_interaction_Interaction_js__WEBPACK_IMPORTED_MODULE_5__","formatConstructors_","formatConstructors","dropListenKeys_","handleDrop","files","dataTransfer","reader","FileReader","handleResult_","readAsText","handleStop","dropEffect","formatConstructor","tryReadFeatures_","registerListeners_","dropArea","unregisterListeners_","_format_FormatType_js__WEBPACK_IMPORTED_MODULE_1__","loadFeaturesXhr","success","failure","xhr","responseType","onload","responseXML","onerror","errorThreshold","sourceProj_","transformInvCache","transformInv","transformInv_","errorThresholdSquared_","triangles_","wrapsXInSource_","canWrapXInSource_","sourceWorldWidth_","targetWorldWidth_","destinationTopLeft","destinationTopRight","destinationBottomRight","destinationBottomLeft","sourceTopLeft","sourceTopRight","sourceBottomRight","sourceBottomLeft","addQuad_","leftBound","newTriangle","addTriangle_","aSrc","bSrc","cSrc","dSrc","maxSubdivision","sourceQuadExtent","sourceCoverageX","sourceWorldWidth","wrapsX","needsSubdivision","targetQuadExtent","centerSrc","bc","bcSrc","da","daSrc","abSrc","cd","cdSrc","_structs_LRUCache_js__WEBPACK_IMPORTED_MODULE_1__","lineStringLength","_structs_PriorityQueue_js__WEBPACK_IMPORTED_MODULE_4__","tilePriorityFunction","tileChangeCallback","tileChangeCallback_","tilesLoading_","tilesLoadingKeys_","added","newLoads","abortedTiles","ret","AssertionError","message","IGCZ","IGC","altitudeMode_","B_RECORD_RE","H_RECORD_RE","HFDTE_RECORD_RE","NEWLINE_RE","year","month","day","lastDateTime","hour","minute","second","UTC","_xml_js__WEBPACK_IMPORTED_MODULE_11__","GPX","readExtensions_","readExtensions","FEATURE_READER","rte","readRte","trk","readTrk","wpt","readWpt","GPX_PARSERS","_format_xsd_js__WEBPACK_IMPORTED_MODULE_5__","RTE_PARSERS","cmt","desc","link","parseLink","extensions","parseExtensions","rtept","RTEPT_PARSERS","rteValues","layoutOptions","ele","TRK_PARSERS","trkseg","TRKSEG_PARSERS","trkpt","TRKPT_PARSERS","trkValues","WPT_PARSERS","magvar","geoidheight","sym","fix","sat","hdop","vdop","pdop","ageofdgpsdata","dgpsid","LINK_SEQUENCE","LINK_SERIALIZERS","RTE_SEQUENCE","RTE_SERIALIZERS","writeLink","writeWptType","RTEPT_TYPE_SEQUENCE","TRK_SEQUENCE","TRK_SERIALIZERS","geometryLayout","TRKSEG_SERIALIZERS","TRKSEG_NODE_FACTORY","WPT_TYPE_SEQUENCE","WPT_TYPE_SERIALIZERS","GPX_NODE_FACTORY","GPX_SERIALIZERS","applyLayoutOptions","_geom_Point_js__WEBPACK_IMPORTED_MODULE_9__","handleReadExtensions_","extensionsNode","featureReader","gpx","Atlas","space_","emptyBlocks_","renderCallback","block","split_","newBlock1","newBlock2","updateBlocks_","args","style_Atlas","currentSize_","initialSize","maxSize_","maxSize","currentHitSize_","hitAtlases_","getInfo_","hitInfo","mergeInfos_","atlases","opt_renderHitCallback","add_","renderHitCallback","isHitAtlas","_layer_Layer_js__WEBPACK_IMPORTED_MODULE_7__","Attribution","ulElement_","collapsed_","collapsed","collapsible_","collapsible","tipLabel","collapseLabel","collapseLabel_","label_","activeLabel","handleClick_","cssClasses","_control_Control_js__WEBPACK_IMPORTED_MODULE_2__","renderedAttributions_","getSourceAttributions_","lookup","visibleAttributions","attributionGetter","handleToggle_","classList","getCollapsible","setCollapsible","setCollapsed","getCollapsed","getChangeType","changeType","webkitRequestFullscreen","mozRequestFullScreen","msRequestFullscreen","requestFullscreen","FullScreen","cssClassName_","labelNode_","labelActive","labelActiveNode_","isFullScreen","_css_js__WEBPACK_IMPORTED_MODULE_2__","isFullScreenSupported","_control_Control_js__WEBPACK_IMPORTED_MODULE_1__","keys_","mozFullScreenEnabled","msFullscreenEnabled","fullscreenEnabled","webkitIsFullScreen","mozFullScreen","msFullscreenElement","fullscreenElement","requestFullScreen","handleFullScreen_","exitFullscreen","msExitFullscreen","mozCancelFullScreen","webkitExitFullscreen","mozRequestFullScreenWithKeys","Element","ALLOW_KEYBOARD_INPUT","requestFullScreenWithKeys","handleFullScreenChange_","Pbf","ieee754","ArrayBuffer","isView","Varint","Fixed64","Bytes","Fixed32","readPackedEnd","toNum","isSigned","makeRoomForExtraLength","startPos","extraLen","realloc","writePackedVarint","writeVarint","writePackedSVarint","writeSVarint","writePackedFloat","writeFloat","writePackedDouble","writeDouble","writePackedBoolean","writeBoolean","writePackedFixed32","writeFixed32","writePackedSFixed32","writeSFixed32","writePackedFixed64","writeFixed64","writePackedSFixed64","writeSFixed64","readUInt32","writeInt32","readInt32","destroy","readField","skip","readMessage","readFixed32","readSFixed32","readFixed64","readSFixed64","readVarintRemainder","b3","bytesPerSequence","readUtf8","readBytes","subarray","readPackedVarint","readPackedSVarint","readPackedBoolean","readPackedFloat","readPackedDouble","readPackedFixed32","readPackedSFixed32","readPackedFixed64","readPackedSFixed64","writeTag","writeBigVarintLow","lsb","writeBigVarintHigh","writeBigVarint","writeString","lead","writeUtf8","writeBytes","writeRawMessage","writeMessage","writeBytesField","writeFixed32Field","writeSFixed32Field","writeFixed64Field","writeSFixed64Field","writeVarintField","writeSVarintField","writeStringField","writeFloatField","writeDoubleField","writeBooleanField","Processor","_extent_js__WEBPACK_IMPORTED_MODULE_16__","OverviewMap","_events_js__WEBPACK_IMPORTED_MODULE_14__","_events_EventType_js__WEBPACK_IMPORTED_MODULE_15__","ovmapDiv_","ovmap_","_Map_js__WEBPACK_IMPORTED_MODULE_2__","ovmap","boxSizing","boxOverlay_","_Overlay_js__WEBPACK_IMPORTED_MODULE_7__","_OverlayPositioning_js__WEBPACK_IMPORTED_MODULE_8__","_css_js__WEBPACK_IMPORTED_MODULE_12__","_control_Control_js__WEBPACK_IMPORTED_MODULE_10__","scope","overlayBox","mousePosition","computeDesiredMousePosition","endMoving","validateExtent_","updateBox_","oldMap","oldView","unbindView_","_ObjectEventType_js__WEBPACK_IMPORTED_MODULE_6__","handleMapPropertyChange_","bindView_","resetExtent_","_MapProperty_js__WEBPACK_IMPORTED_MODULE_4__","newView","_ViewProperty_js__WEBPACK_IMPORTED_MODULE_9__","handleRotationChanged_","ovmapSize","ovextent","topLeftPixel","bottomRightPixel","boxWidth","boxHeight","ovmapWidth","ovmapHeight","recenter_","ovview","steps","MAX_RATIO","ovresolution","rotateBottomLeft","calculateCoordinateRotate_","coordinateRotate","_coordinate_js__WEBPACK_IMPORTED_MODULE_11__","_dom_js__WEBPACK_IMPORTED_MODULE_13__","_MapEventType_js__WEBPACK_IMPORTED_MODULE_3__","getOverviewMap","_source_Vector_js__WEBPACK_IMPORTED_MODULE_8__","Cluster","_geom_Point_js__WEBPACK_IMPORTED_MODULE_7__","cluster","setDistance","mapDistance","clustered","neighbors","neighbor","createCluster","Rotate","callResetNorth_","resetNorth","autoHide_","autoHide","msTransform","webkitTransform","resetNorth_","control_Rotate","Zoom","zoomInLabel","zoomOutLabel","zoomInTipLabel","zoomOutTipLabel","inElement","outElement","zoomByDelta_","control_Zoom","zoomOptions","rotateOptions","attributionOptions","isLE","mLen","nBytes","eLen","eMax","eBias","nBits","rt","hasImageData","ImageData","_","newImageData","createImageData","createMinion","workerHasImageData","newWorkerImageData","buffers","meta","numBuffers","numBytes","byteLength","Uint8ClampedArray","arrays","createWorker","onMessage","blob","Blob","createObjectURL","worker","Worker","_imageOps","workers","_onWorkerMessage","minion","postMessage","createFauxWorker","_workers","_queue","_maxQueueLength","_running","_dataLookup","_job","inputs","_enqueue","_dispatch","_destroyed","job","slices","_resolveJob","_style_RegularShape_js__WEBPACK_IMPORTED_MODULE_1__","CircleStyle","swap","defaultCompare","quickselectStep","sd","newLeft","newRight"],"mappings":"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","file":"common.js","sourcesContent":[" \t// install a JSONP callback for chunk loading\n \tfunction webpackJsonpCallback(data) {\n \t\tvar chunkIds = data[0];\n \t\tvar moreModules = data[1];\n \t\tvar executeModules = data[2];\n\n \t\t// add \"moreModules\" to the modules object,\n \t\t// then flag all \"chunkIds\" as loaded and fire callback\n \t\tvar moduleId, chunkId, i = 0, resolves = [];\n \t\tfor(;i < chunkIds.length; i++) {\n \t\t\tchunkId = chunkIds[i];\n \t\t\tif(installedChunks[chunkId]) {\n \t\t\t\tresolves.push(installedChunks[chunkId][0]);\n \t\t\t}\n \t\t\tinstalledChunks[chunkId] = 0;\n \t\t}\n \t\tfor(moduleId in moreModules) {\n \t\t\tif(Object.prototype.hasOwnProperty.call(moreModules, moduleId)) {\n \t\t\t\tmodules[moduleId] = moreModules[moduleId];\n \t\t\t}\n \t\t}\n \t\tif(parentJsonpFunction) parentJsonpFunction(data);\n\n \t\twhile(resolves.length) {\n \t\t\tresolves.shift()();\n \t\t}\n\n \t\t// add entry modules from loaded chunk to deferred list\n \t\tdeferredModules.push.apply(deferredModules, executeModules || []);\n\n \t\t// run deferred modules when all chunks ready\n \t\treturn checkDeferredModules();\n \t};\n \tfunction checkDeferredModules() {\n \t\tvar result;\n \t\tfor(var i = 0; i < deferredModules.length; i++) {\n \t\t\tvar deferredModule = deferredModules[i];\n \t\t\tvar fulfilled = true;\n \t\t\tfor(var j = 1; j < deferredModule.length; j++) {\n \t\t\t\tvar depId = deferredModule[j];\n \t\t\t\tif(installedChunks[depId] !== 0) fulfilled = false;\n \t\t\t}\n \t\t\tif(fulfilled) {\n \t\t\t\tdeferredModules.splice(i--, 1);\n \t\t\t\tresult = __webpack_require__(__webpack_require__.s = deferredModule[0]);\n \t\t\t}\n \t\t}\n \t\treturn result;\n \t}\n\n \t// The module cache\n \tvar installedModules = {};\n\n \t// object to store loaded and loading chunks\n \t// undefined = chunk not loaded, null = chunk preloaded/prefetched\n \t// Promise = chunk loading, 0 = chunk loaded\n \tvar installedChunks = {\n \t\t0: 0\n \t};\n\n \tvar deferredModules = [];\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \tvar jsonpArray = window[\"webpackJsonp\"] = window[\"webpackJsonp\"] || [];\n \tvar oldJsonpFunction = jsonpArray.push.bind(jsonpArray);\n \tjsonpArray.push = webpackJsonpCallback;\n \tjsonpArray = jsonpArray.slice();\n \tfor(var i = 0; i < jsonpArray.length; i++) webpackJsonpCallback(jsonpArray[i]);\n \tvar parentJsonpFunction = oldJsonpFunction;\n\n\n \t// run deferred modules from other chunks\n \tcheckDeferredModules();\n","/**\n * @module ol/util\n */\n\n/**\n * Inherit the prototype methods from one constructor into another.\n *\n * Usage:\n *\n *     function ParentClass(a, b) { }\n *     ParentClass.prototype.foo = function(a) { }\n *\n *     function ChildClass(a, b, c) {\n *       // Call parent constructor\n *       ParentClass.call(this, a, b);\n *     }\n *     inherits(ChildClass, ParentClass);\n *\n *     var child = new ChildClass('a', 'b', 'see');\n *     child.foo(); // This works.\n *\n * @param {!Function} childCtor Child constructor.\n * @param {!Function} parentCtor Parent constructor.\n * @function module:ol.inherits\n * @api\n */\nexport function inherits(childCtor, parentCtor) {\n  childCtor.prototype = Object.create(parentCtor.prototype);\n  childCtor.prototype.constructor = childCtor;\n}\n\n/**\n * Counter for getUid.\n * @type {number}\n * @private\n */\nlet uidCounter_ = 0;\n\n/**\n * Gets a unique ID for an object. This mutates the object so that further calls\n * with the same object as a parameter returns the same value. Unique IDs are generated\n * as a strictly increasing sequence. Adapted from goog.getUid.\n *\n * @param {Object} obj The object to get the unique ID for.\n * @return {number} The unique ID for the object.\n */\nexport function getUid(obj) {\n  return obj.ol_uid || (obj.ol_uid = ++uidCounter_);\n}\n\n/**\n * OpenLayers version.\n * @type {string}\n */\nexport const VERSION = '5.0.3';\n","/**\n * @module ol/extent\n */\nimport {assert} from './asserts.js';\nimport Corner from './extent/Corner.js';\nimport Relationship from './extent/Relationship.js';\n\n\n/**\n * An array of numbers representing an extent: `[minx, miny, maxx, maxy]`.\n * @typedef {Array.<number>} Extent\n * @api\n */\n\n/**\n * Build an extent that includes all given coordinates.\n *\n * @param {Array.<module:ol/coordinate~Coordinate>} coordinates Coordinates.\n * @return {module:ol/extent~Extent} Bounding extent.\n * @api\n */\nexport function boundingExtent(coordinates) {\n  const extent = createEmpty();\n  for (let i = 0, ii = coordinates.length; i < ii; ++i) {\n    extendCoordinate(extent, coordinates[i]);\n  }\n  return extent;\n}\n\n\n/**\n * @param {Array.<number>} xs Xs.\n * @param {Array.<number>} ys Ys.\n * @param {module:ol/extent~Extent=} opt_extent Destination extent.\n * @private\n * @return {module:ol/extent~Extent} Extent.\n */\nfunction _boundingExtentXYs(xs, ys, opt_extent) {\n  const minX = Math.min.apply(null, xs);\n  const minY = Math.min.apply(null, ys);\n  const maxX = Math.max.apply(null, xs);\n  const maxY = Math.max.apply(null, ys);\n  return createOrUpdate(minX, minY, maxX, maxY, opt_extent);\n}\n\n\n/**\n * Return extent increased by the provided value.\n * @param {module:ol/extent~Extent} extent Extent.\n * @param {number} value The amount by which the extent should be buffered.\n * @param {module:ol/extent~Extent=} opt_extent Extent.\n * @return {module:ol/extent~Extent} Extent.\n * @api\n */\nexport function buffer(extent, value, opt_extent) {\n  if (opt_extent) {\n    opt_extent[0] = extent[0] - value;\n    opt_extent[1] = extent[1] - value;\n    opt_extent[2] = extent[2] + value;\n    opt_extent[3] = extent[3] + value;\n    return opt_extent;\n  } else {\n    return [\n      extent[0] - value,\n      extent[1] - value,\n      extent[2] + value,\n      extent[3] + value\n    ];\n  }\n}\n\n\n/**\n * Creates a clone of an extent.\n *\n * @param {module:ol/extent~Extent} extent Extent to clone.\n * @param {module:ol/extent~Extent=} opt_extent Extent.\n * @return {module:ol/extent~Extent} The clone.\n */\nexport function clone(extent, opt_extent) {\n  if (opt_extent) {\n    opt_extent[0] = extent[0];\n    opt_extent[1] = extent[1];\n    opt_extent[2] = extent[2];\n    opt_extent[3] = extent[3];\n    return opt_extent;\n  } else {\n    return extent.slice();\n  }\n}\n\n\n/**\n * @param {module:ol/extent~Extent} extent Extent.\n * @param {number} x X.\n * @param {number} y Y.\n * @return {number} Closest squared distance.\n */\nexport function closestSquaredDistanceXY(extent, x, y) {\n  let dx, dy;\n  if (x < extent[0]) {\n    dx = extent[0] - x;\n  } else if (extent[2] < x) {\n    dx = x - extent[2];\n  } else {\n    dx = 0;\n  }\n  if (y < extent[1]) {\n    dy = extent[1] - y;\n  } else if (extent[3] < y) {\n    dy = y - extent[3];\n  } else {\n    dy = 0;\n  }\n  return dx * dx + dy * dy;\n}\n\n\n/**\n * Check if the passed coordinate is contained or on the edge of the extent.\n *\n * @param {module:ol/extent~Extent} extent Extent.\n * @param {module:ol/coordinate~Coordinate} coordinate Coordinate.\n * @return {boolean} The coordinate is contained in the extent.\n * @api\n */\nexport function containsCoordinate(extent, coordinate) {\n  return containsXY(extent, coordinate[0], coordinate[1]);\n}\n\n\n/**\n * Check if one extent contains another.\n *\n * An extent is deemed contained if it lies completely within the other extent,\n * including if they share one or more edges.\n *\n * @param {module:ol/extent~Extent} extent1 Extent 1.\n * @param {module:ol/extent~Extent} extent2 Extent 2.\n * @return {boolean} The second extent is contained by or on the edge of the\n *     first.\n * @api\n */\nexport function containsExtent(extent1, extent2) {\n  return extent1[0] <= extent2[0] && extent2[2] <= extent1[2] &&\n      extent1[1] <= extent2[1] && extent2[3] <= extent1[3];\n}\n\n\n/**\n * Check if the passed coordinate is contained or on the edge of the extent.\n *\n * @param {module:ol/extent~Extent} extent Extent.\n * @param {number} x X coordinate.\n * @param {number} y Y coordinate.\n * @return {boolean} The x, y values are contained in the extent.\n * @api\n */\nexport function containsXY(extent, x, y) {\n  return extent[0] <= x && x <= extent[2] && extent[1] <= y && y <= extent[3];\n}\n\n\n/**\n * Get the relationship between a coordinate and extent.\n * @param {module:ol/extent~Extent} extent The extent.\n * @param {module:ol/coordinate~Coordinate} coordinate The coordinate.\n * @return {module:ol/extent/Relationship} The relationship (bitwise compare with\n *     module:ol/extent/Relationship~Relationship).\n */\nexport function coordinateRelationship(extent, coordinate) {\n  const minX = extent[0];\n  const minY = extent[1];\n  const maxX = extent[2];\n  const maxY = extent[3];\n  const x = coordinate[0];\n  const y = coordinate[1];\n  let relationship = Relationship.UNKNOWN;\n  if (x < minX) {\n    relationship = relationship | Relationship.LEFT;\n  } else if (x > maxX) {\n    relationship = relationship | Relationship.RIGHT;\n  }\n  if (y < minY) {\n    relationship = relationship | Relationship.BELOW;\n  } else if (y > maxY) {\n    relationship = relationship | Relationship.ABOVE;\n  }\n  if (relationship === Relationship.UNKNOWN) {\n    relationship = Relationship.INTERSECTING;\n  }\n  return relationship;\n}\n\n\n/**\n * Create an empty extent.\n * @return {module:ol/extent~Extent} Empty extent.\n * @api\n */\nexport function createEmpty() {\n  return [Infinity, Infinity, -Infinity, -Infinity];\n}\n\n\n/**\n * Create a new extent or update the provided extent.\n * @param {number} minX Minimum X.\n * @param {number} minY Minimum Y.\n * @param {number} maxX Maximum X.\n * @param {number} maxY Maximum Y.\n * @param {module:ol/extent~Extent=} opt_extent Destination extent.\n * @return {module:ol/extent~Extent} Extent.\n */\nexport function createOrUpdate(minX, minY, maxX, maxY, opt_extent) {\n  if (opt_extent) {\n    opt_extent[0] = minX;\n    opt_extent[1] = minY;\n    opt_extent[2] = maxX;\n    opt_extent[3] = maxY;\n    return opt_extent;\n  } else {\n    return [minX, minY, maxX, maxY];\n  }\n}\n\n\n/**\n * Create a new empty extent or make the provided one empty.\n * @param {module:ol/extent~Extent=} opt_extent Extent.\n * @return {module:ol/extent~Extent} Extent.\n */\nexport function createOrUpdateEmpty(opt_extent) {\n  return createOrUpdate(\n    Infinity, Infinity, -Infinity, -Infinity, opt_extent);\n}\n\n\n/**\n * @param {module:ol/coordinate~Coordinate} coordinate Coordinate.\n * @param {module:ol/extent~Extent=} opt_extent Extent.\n * @return {module:ol/extent~Extent} Extent.\n */\nexport function createOrUpdateFromCoordinate(coordinate, opt_extent) {\n  const x = coordinate[0];\n  const y = coordinate[1];\n  return createOrUpdate(x, y, x, y, opt_extent);\n}\n\n\n/**\n * @param {Array.<module:ol/coordinate~Coordinate>} coordinates Coordinates.\n * @param {module:ol/extent~Extent=} opt_extent Extent.\n * @return {module:ol/extent~Extent} Extent.\n */\nexport function createOrUpdateFromCoordinates(coordinates, opt_extent) {\n  const extent = createOrUpdateEmpty(opt_extent);\n  return extendCoordinates(extent, coordinates);\n}\n\n\n/**\n * @param {Array.<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {number} end End.\n * @param {number} stride Stride.\n * @param {module:ol/extent~Extent=} opt_extent Extent.\n * @return {module:ol/extent~Extent} Extent.\n */\nexport function createOrUpdateFromFlatCoordinates(flatCoordinates, offset, end, stride, opt_extent) {\n  const extent = createOrUpdateEmpty(opt_extent);\n  return extendFlatCoordinates(extent, flatCoordinates, offset, end, stride);\n}\n\n/**\n * @param {Array.<Array.<module:ol/coordinate~Coordinate>>} rings Rings.\n * @param {module:ol/extent~Extent=} opt_extent Extent.\n * @return {module:ol/extent~Extent} Extent.\n */\nexport function createOrUpdateFromRings(rings, opt_extent) {\n  const extent = createOrUpdateEmpty(opt_extent);\n  return extendRings(extent, rings);\n}\n\n\n/**\n * Determine if two extents are equivalent.\n * @param {module:ol/extent~Extent} extent1 Extent 1.\n * @param {module:ol/extent~Extent} extent2 Extent 2.\n * @return {boolean} The two extents are equivalent.\n * @api\n */\nexport function equals(extent1, extent2) {\n  return extent1[0] == extent2[0] && extent1[2] == extent2[2] &&\n      extent1[1] == extent2[1] && extent1[3] == extent2[3];\n}\n\n\n/**\n * Modify an extent to include another extent.\n * @param {module:ol/extent~Extent} extent1 The extent to be modified.\n * @param {module:ol/extent~Extent} extent2 The extent that will be included in the first.\n * @return {module:ol/extent~Extent} A reference to the first (extended) extent.\n * @api\n */\nexport function extend(extent1, extent2) {\n  if (extent2[0] < extent1[0]) {\n    extent1[0] = extent2[0];\n  }\n  if (extent2[2] > extent1[2]) {\n    extent1[2] = extent2[2];\n  }\n  if (extent2[1] < extent1[1]) {\n    extent1[1] = extent2[1];\n  }\n  if (extent2[3] > extent1[3]) {\n    extent1[3] = extent2[3];\n  }\n  return extent1;\n}\n\n\n/**\n * @param {module:ol/extent~Extent} extent Extent.\n * @param {module:ol/coordinate~Coordinate} coordinate Coordinate.\n */\nexport function extendCoordinate(extent, coordinate) {\n  if (coordinate[0] < extent[0]) {\n    extent[0] = coordinate[0];\n  }\n  if (coordinate[0] > extent[2]) {\n    extent[2] = coordinate[0];\n  }\n  if (coordinate[1] < extent[1]) {\n    extent[1] = coordinate[1];\n  }\n  if (coordinate[1] > extent[3]) {\n    extent[3] = coordinate[1];\n  }\n}\n\n\n/**\n * @param {module:ol/extent~Extent} extent Extent.\n * @param {Array.<module:ol/coordinate~Coordinate>} coordinates Coordinates.\n * @return {module:ol/extent~Extent} Extent.\n */\nexport function extendCoordinates(extent, coordinates) {\n  for (let i = 0, ii = coordinates.length; i < ii; ++i) {\n    extendCoordinate(extent, coordinates[i]);\n  }\n  return extent;\n}\n\n\n/**\n * @param {module:ol/extent~Extent} extent Extent.\n * @param {Array.<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {number} end End.\n * @param {number} stride Stride.\n * @return {module:ol/extent~Extent} Extent.\n */\nexport function extendFlatCoordinates(extent, flatCoordinates, offset, end, stride) {\n  for (; offset < end; offset += stride) {\n    extendXY(extent, flatCoordinates[offset], flatCoordinates[offset + 1]);\n  }\n  return extent;\n}\n\n\n/**\n * @param {module:ol/extent~Extent} extent Extent.\n * @param {Array.<Array.<module:ol/coordinate~Coordinate>>} rings Rings.\n * @return {module:ol/extent~Extent} Extent.\n */\nexport function extendRings(extent, rings) {\n  for (let i = 0, ii = rings.length; i < ii; ++i) {\n    extendCoordinates(extent, rings[i]);\n  }\n  return extent;\n}\n\n\n/**\n * @param {module:ol/extent~Extent} extent Extent.\n * @param {number} x X.\n * @param {number} y Y.\n */\nexport function extendXY(extent, x, y) {\n  extent[0] = Math.min(extent[0], x);\n  extent[1] = Math.min(extent[1], y);\n  extent[2] = Math.max(extent[2], x);\n  extent[3] = Math.max(extent[3], y);\n}\n\n\n/**\n * This function calls `callback` for each corner of the extent. If the\n * callback returns a truthy value the function returns that value\n * immediately. Otherwise the function returns `false`.\n * @param {module:ol/extent~Extent} extent Extent.\n * @param {function(this:T, module:ol/coordinate~Coordinate): S} callback Callback.\n * @param {T=} opt_this Value to use as `this` when executing `callback`.\n * @return {S|boolean} Value.\n * @template S, T\n */\nexport function forEachCorner(extent, callback, opt_this) {\n  let val;\n  val = callback.call(opt_this, getBottomLeft(extent));\n  if (val) {\n    return val;\n  }\n  val = callback.call(opt_this, getBottomRight(extent));\n  if (val) {\n    return val;\n  }\n  val = callback.call(opt_this, getTopRight(extent));\n  if (val) {\n    return val;\n  }\n  val = callback.call(opt_this, getTopLeft(extent));\n  if (val) {\n    return val;\n  }\n  return false;\n}\n\n\n/**\n * Get the size of an extent.\n * @param {module:ol/extent~Extent} extent Extent.\n * @return {number} Area.\n * @api\n */\nexport function getArea(extent) {\n  let area = 0;\n  if (!isEmpty(extent)) {\n    area = getWidth(extent) * getHeight(extent);\n  }\n  return area;\n}\n\n\n/**\n * Get the bottom left coordinate of an extent.\n * @param {module:ol/extent~Extent} extent Extent.\n * @return {module:ol/coordinate~Coordinate} Bottom left coordinate.\n * @api\n */\nexport function getBottomLeft(extent) {\n  return [extent[0], extent[1]];\n}\n\n\n/**\n * Get the bottom right coordinate of an extent.\n * @param {module:ol/extent~Extent} extent Extent.\n * @return {module:ol/coordinate~Coordinate} Bottom right coordinate.\n * @api\n */\nexport function getBottomRight(extent) {\n  return [extent[2], extent[1]];\n}\n\n\n/**\n * Get the center coordinate of an extent.\n * @param {module:ol/extent~Extent} extent Extent.\n * @return {module:ol/coordinate~Coordinate} Center.\n * @api\n */\nexport function getCenter(extent) {\n  return [(extent[0] + extent[2]) / 2, (extent[1] + extent[3]) / 2];\n}\n\n\n/**\n * Get a corner coordinate of an extent.\n * @param {module:ol/extent~Extent} extent Extent.\n * @param {module:ol/extent/Corner} corner Corner.\n * @return {module:ol/coordinate~Coordinate} Corner coordinate.\n */\nexport function getCorner(extent, corner) {\n  let coordinate;\n  if (corner === Corner.BOTTOM_LEFT) {\n    coordinate = getBottomLeft(extent);\n  } else if (corner === Corner.BOTTOM_RIGHT) {\n    coordinate = getBottomRight(extent);\n  } else if (corner === Corner.TOP_LEFT) {\n    coordinate = getTopLeft(extent);\n  } else if (corner === Corner.TOP_RIGHT) {\n    coordinate = getTopRight(extent);\n  } else {\n    assert(false, 13); // Invalid corner\n  }\n  return (\n    /** @type {!module:ol/coordinate~Coordinate} */ (coordinate)\n  );\n}\n\n\n/**\n * @param {module:ol/extent~Extent} extent1 Extent 1.\n * @param {module:ol/extent~Extent} extent2 Extent 2.\n * @return {number} Enlarged area.\n */\nexport function getEnlargedArea(extent1, extent2) {\n  const minX = Math.min(extent1[0], extent2[0]);\n  const minY = Math.min(extent1[1], extent2[1]);\n  const maxX = Math.max(extent1[2], extent2[2]);\n  const maxY = Math.max(extent1[3], extent2[3]);\n  return (maxX - minX) * (maxY - minY);\n}\n\n\n/**\n * @param {module:ol/coordinate~Coordinate} center Center.\n * @param {number} resolution Resolution.\n * @param {number} rotation Rotation.\n * @param {module:ol/size~Size} size Size.\n * @param {module:ol/extent~Extent=} opt_extent Destination extent.\n * @return {module:ol/extent~Extent} Extent.\n */\nexport function getForViewAndSize(center, resolution, rotation, size, opt_extent) {\n  const dx = resolution * size[0] / 2;\n  const dy = resolution * size[1] / 2;\n  const cosRotation = Math.cos(rotation);\n  const sinRotation = Math.sin(rotation);\n  const xCos = dx * cosRotation;\n  const xSin = dx * sinRotation;\n  const yCos = dy * cosRotation;\n  const ySin = dy * sinRotation;\n  const x = center[0];\n  const y = center[1];\n  const x0 = x - xCos + ySin;\n  const x1 = x - xCos - ySin;\n  const x2 = x + xCos - ySin;\n  const x3 = x + xCos + ySin;\n  const y0 = y - xSin - yCos;\n  const y1 = y - xSin + yCos;\n  const y2 = y + xSin + yCos;\n  const y3 = y + xSin - yCos;\n  return createOrUpdate(\n    Math.min(x0, x1, x2, x3), Math.min(y0, y1, y2, y3),\n    Math.max(x0, x1, x2, x3), Math.max(y0, y1, y2, y3),\n    opt_extent);\n}\n\n\n/**\n * Get the height of an extent.\n * @param {module:ol/extent~Extent} extent Extent.\n * @return {number} Height.\n * @api\n */\nexport function getHeight(extent) {\n  return extent[3] - extent[1];\n}\n\n\n/**\n * @param {module:ol/extent~Extent} extent1 Extent 1.\n * @param {module:ol/extent~Extent} extent2 Extent 2.\n * @return {number} Intersection area.\n */\nexport function getIntersectionArea(extent1, extent2) {\n  const intersection = getIntersection(extent1, extent2);\n  return getArea(intersection);\n}\n\n\n/**\n * Get the intersection of two extents.\n * @param {module:ol/extent~Extent} extent1 Extent 1.\n * @param {module:ol/extent~Extent} extent2 Extent 2.\n * @param {module:ol/extent~Extent=} opt_extent Optional extent to populate with intersection.\n * @return {module:ol/extent~Extent} Intersecting extent.\n * @api\n */\nexport function getIntersection(extent1, extent2, opt_extent) {\n  const intersection = opt_extent ? opt_extent : createEmpty();\n  if (intersects(extent1, extent2)) {\n    if (extent1[0] > extent2[0]) {\n      intersection[0] = extent1[0];\n    } else {\n      intersection[0] = extent2[0];\n    }\n    if (extent1[1] > extent2[1]) {\n      intersection[1] = extent1[1];\n    } else {\n      intersection[1] = extent2[1];\n    }\n    if (extent1[2] < extent2[2]) {\n      intersection[2] = extent1[2];\n    } else {\n      intersection[2] = extent2[2];\n    }\n    if (extent1[3] < extent2[3]) {\n      intersection[3] = extent1[3];\n    } else {\n      intersection[3] = extent2[3];\n    }\n  } else {\n    createOrUpdateEmpty(intersection);\n  }\n  return intersection;\n}\n\n\n/**\n * @param {module:ol/extent~Extent} extent Extent.\n * @return {number} Margin.\n */\nexport function getMargin(extent) {\n  return getWidth(extent) + getHeight(extent);\n}\n\n\n/**\n * Get the size (width, height) of an extent.\n * @param {module:ol/extent~Extent} extent The extent.\n * @return {module:ol/size~Size} The extent size.\n * @api\n */\nexport function getSize(extent) {\n  return [extent[2] - extent[0], extent[3] - extent[1]];\n}\n\n\n/**\n * Get the top left coordinate of an extent.\n * @param {module:ol/extent~Extent} extent Extent.\n * @return {module:ol/coordinate~Coordinate} Top left coordinate.\n * @api\n */\nexport function getTopLeft(extent) {\n  return [extent[0], extent[3]];\n}\n\n\n/**\n * Get the top right coordinate of an extent.\n * @param {module:ol/extent~Extent} extent Extent.\n * @return {module:ol/coordinate~Coordinate} Top right coordinate.\n * @api\n */\nexport function getTopRight(extent) {\n  return [extent[2], extent[3]];\n}\n\n\n/**\n * Get the width of an extent.\n * @param {module:ol/extent~Extent} extent Extent.\n * @return {number} Width.\n * @api\n */\nexport function getWidth(extent) {\n  return extent[2] - extent[0];\n}\n\n\n/**\n * Determine if one extent intersects another.\n * @param {module:ol/extent~Extent} extent1 Extent 1.\n * @param {module:ol/extent~Extent} extent2 Extent.\n * @return {boolean} The two extents intersect.\n * @api\n */\nexport function intersects(extent1, extent2) {\n  return extent1[0] <= extent2[2] &&\n      extent1[2] >= extent2[0] &&\n      extent1[1] <= extent2[3] &&\n      extent1[3] >= extent2[1];\n}\n\n\n/**\n * Determine if an extent is empty.\n * @param {module:ol/extent~Extent} extent Extent.\n * @return {boolean} Is empty.\n * @api\n */\nexport function isEmpty(extent) {\n  return extent[2] < extent[0] || extent[3] < extent[1];\n}\n\n\n/**\n * @param {module:ol/extent~Extent} extent Extent.\n * @param {module:ol/extent~Extent=} opt_extent Extent.\n * @return {module:ol/extent~Extent} Extent.\n */\nexport function returnOrUpdate(extent, opt_extent) {\n  if (opt_extent) {\n    opt_extent[0] = extent[0];\n    opt_extent[1] = extent[1];\n    opt_extent[2] = extent[2];\n    opt_extent[3] = extent[3];\n    return opt_extent;\n  } else {\n    return extent;\n  }\n}\n\n\n/**\n * @param {module:ol/extent~Extent} extent Extent.\n * @param {number} value Value.\n */\nexport function scaleFromCenter(extent, value) {\n  const deltaX = ((extent[2] - extent[0]) / 2) * (value - 1);\n  const deltaY = ((extent[3] - extent[1]) / 2) * (value - 1);\n  extent[0] -= deltaX;\n  extent[2] += deltaX;\n  extent[1] -= deltaY;\n  extent[3] += deltaY;\n}\n\n\n/**\n * Determine if the segment between two coordinates intersects (crosses,\n * touches, or is contained by) the provided extent.\n * @param {module:ol/extent~Extent} extent The extent.\n * @param {module:ol/coordinate~Coordinate} start Segment start coordinate.\n * @param {module:ol/coordinate~Coordinate} end Segment end coordinate.\n * @return {boolean} The segment intersects the extent.\n */\nexport function intersectsSegment(extent, start, end) {\n  let intersects = false;\n  const startRel = coordinateRelationship(extent, start);\n  const endRel = coordinateRelationship(extent, end);\n  if (startRel === Relationship.INTERSECTING ||\n      endRel === Relationship.INTERSECTING) {\n    intersects = true;\n  } else {\n    const minX = extent[0];\n    const minY = extent[1];\n    const maxX = extent[2];\n    const maxY = extent[3];\n    const startX = start[0];\n    const startY = start[1];\n    const endX = end[0];\n    const endY = end[1];\n    const slope = (endY - startY) / (endX - startX);\n    let x, y;\n    if (!!(endRel & Relationship.ABOVE) &&\n        !(startRel & Relationship.ABOVE)) {\n      // potentially intersects top\n      x = endX - ((endY - maxY) / slope);\n      intersects = x >= minX && x <= maxX;\n    }\n    if (!intersects && !!(endRel & Relationship.RIGHT) &&\n        !(startRel & Relationship.RIGHT)) {\n      // potentially intersects right\n      y = endY - ((endX - maxX) * slope);\n      intersects = y >= minY && y <= maxY;\n    }\n    if (!intersects && !!(endRel & Relationship.BELOW) &&\n        !(startRel & Relationship.BELOW)) {\n      // potentially intersects bottom\n      x = endX - ((endY - minY) / slope);\n      intersects = x >= minX && x <= maxX;\n    }\n    if (!intersects && !!(endRel & Relationship.LEFT) &&\n        !(startRel & Relationship.LEFT)) {\n      // potentially intersects left\n      y = endY - ((endX - minX) * slope);\n      intersects = y >= minY && y <= maxY;\n    }\n\n  }\n  return intersects;\n}\n\n\n/**\n * Apply a transform function to the extent.\n * @param {module:ol/extent~Extent} extent Extent.\n * @param {module:ol/proj~TransformFunction} transformFn Transform function.\n * Called with `[minX, minY, maxX, maxY]` extent coordinates.\n * @param {module:ol/extent~Extent=} opt_extent Destination extent.\n * @return {module:ol/extent~Extent} Extent.\n * @api\n */\nexport function applyTransform(extent, transformFn, opt_extent) {\n  const coordinates = [\n    extent[0], extent[1],\n    extent[0], extent[3],\n    extent[2], extent[1],\n    extent[2], extent[3]\n  ];\n  transformFn(coordinates, coordinates, 2);\n  const xs = [coordinates[0], coordinates[2], coordinates[4], coordinates[6]];\n  const ys = [coordinates[1], coordinates[3], coordinates[5], coordinates[7]];\n  return _boundingExtentXYs(xs, ys, opt_extent);\n}\n","/**\n * @module ol/centerconstraint\n */\nimport {clamp} from './math.js';\n\n\n/**\n * @typedef {function((module:ol/coordinate~Coordinate|undefined)): (module:ol/coordinate~Coordinate|undefined)} Type\n */\n\n\n/**\n * @param {module:ol/extent~Extent} extent Extent.\n * @return {module:ol/centerconstraint~Type} The constraint.\n */\nexport function createExtent(extent) {\n  return (\n    /**\n     * @param {module:ol/coordinate~Coordinate=} center Center.\n     * @return {module:ol/coordinate~Coordinate|undefined} Center.\n     */\n    function(center) {\n      if (center) {\n        return [\n          clamp(center[0], extent[0], extent[2]),\n          clamp(center[1], extent[1], extent[3])\n        ];\n      } else {\n        return undefined;\n      }\n    }\n  );\n}\n\n\n/**\n * @param {module:ol/coordinate~Coordinate=} center Center.\n * @return {module:ol/coordinate~Coordinate|undefined} Center.\n */\nexport function none(center) {\n  return center;\n}\n","/**\n * @module ol/View\n */\nimport {DEFAULT_TILE_SIZE} from './tilegrid/common.js';\nimport {getUid, inherits} from './util.js';\nimport {UNDEFINED} from './functions.js';\nimport {createExtent, none as centerNone} from './centerconstraint.js';\nimport BaseObject from './Object.js';\nimport {createSnapToResolutions, createSnapToPower} from './resolutionconstraint.js';\nimport {createSnapToZero, createSnapToN, none as rotationNone, disable} from './rotationconstraint.js';\nimport ViewHint from './ViewHint.js';\nimport ViewProperty from './ViewProperty.js';\nimport {linearFindNearest} from './array.js';\nimport {assert} from './asserts.js';\nimport {add as addCoordinate, rotate as rotateCoordinate, equals as coordinatesEqual} from './coordinate.js';\nimport {inAndOut} from './easing.js';\nimport {getForViewAndSize, getCenter, getHeight, getWidth, isEmpty} from './extent.js';\nimport GeometryType from './geom/GeometryType.js';\nimport {fromExtent as polygonFromExtent} from './geom/Polygon.js';\nimport SimpleGeometry from './geom/SimpleGeometry.js';\nimport {clamp, modulo} from './math.js';\nimport {assign} from './obj.js';\nimport {createProjection, METERS_PER_UNIT} from './proj.js';\nimport Units from './proj/Units.js';\n\n\n/**\n * An animation configuration\n *\n * @typedef {Object} Animation\n * @property {module:ol/coordinate~Coordinate} [sourceCenter]\n * @property {module:ol/coordinate~Coordinate} [targetCenter]\n * @property {number} [sourceResolution]\n * @property {number} [targetResolution]\n * @property {number} [sourceRotation]\n * @property {number} [sourceRotation]\n * @property {module:ol/coordinate~Coordinate} [anchor]\n * @property {number} start\n * @property {number} duration\n * @property {boolean} complete\n * @property {function(number):number} easing\n * @property {function(boolean)} callback\n */\n\n\n/**\n * @typedef {Object} Constraints\n * @property {module:ol/centerconstraint~Type} center\n * @property {module:ol/resolutionconstraint~Type} resolution\n * @property {module:ol/rotationconstraint~Type} rotation\n */\n\n\n/**\n * @typedef {Object} FitOptions\n * @property {module:ol/size~Size} [size] The size in pixels of the box to fit\n * the extent into. Default is the current size of the first map in the DOM that\n * uses this view, or `[100, 100]` if no such map is found.\n * @property {!Array.<number>} [padding=[0, 0, 0, 0]] Padding (in pixels) to be\n * cleared inside the view. Values in the array are top, right, bottom and left\n * padding.\n * @property {boolean} [constrainResolution=true] Constrain the resolution.\n * @property {boolean} [nearest=false] If `constrainResolution` is `true`, get\n * the nearest extent instead of the closest that actually fits the view.\n * @property {number} [minResolution=0] Minimum resolution that we zoom to.\n * @property {number} [maxZoom] Maximum zoom level that we zoom to. If\n * `minResolution` is given, this property is ignored.\n * @property {number} [duration] The duration of the animation in milliseconds.\n * By default, there is no animation to the target extent.\n * @property {function(number):number} [easing] The easing function used during\n * the animation (defaults to {@link module:ol/easing~inAndOut}).\n * The function will be called for each frame with a number representing a\n * fraction of the animation's duration.  The function should return a number\n * between 0 and 1 representing the progress toward the destination state.\n * @property {function(boolean)} [callback] Function called when the view is in\n * its final position. The callback will be called with `true` if the animation\n * series completed on its own or `false` if it was cancelled.\n */\n\n\n/**\n * @typedef {Object} ViewOptions\n * @property {module:ol/coordinate~Coordinate} [center] The initial center for\n * the view. The coordinate system for the center is specified with the\n * `projection` option. Layer sources will not be fetched if this is not set,\n * but the center can be set later with {@link #setCenter}.\n * @property {boolean|number} [constrainRotation=true] Rotation constraint.\n * `false` means no constraint. `true` means no constraint, but snap to zero\n * near zero. A number constrains the rotation to that number of values. For\n * example, `4` will constrain the rotation to 0, 90, 180, and 270 degrees.\n * @property {boolean} [enableRotation=true] Enable rotation.\n * If `false`, a rotation constraint that always sets the rotation to zero is\n * used. The `constrainRotation` option has no effect if `enableRotation` is\n * `false`.\n * @property {module:ol/extent~Extent} [extent] The extent that constrains the\n * center, in other words, center cannot be set outside this extent.\n * @property {number} [maxResolution] The maximum resolution used to determine\n * the resolution constraint. It is used together with `minResolution` (or\n * `maxZoom`) and `zoomFactor`. If unspecified it is calculated in such a way\n * that the projection's validity extent fits in a 256x256 px tile. If the\n * projection is Spherical Mercator (the default) then `maxResolution` defaults\n * to `40075016.68557849 / 256 = 156543.03392804097`.\n * @property {number} [minResolution] The minimum resolution used to determine\n * the resolution constraint.  It is used together with `maxResolution` (or\n * `minZoom`) and `zoomFactor`.  If unspecified it is calculated assuming 29\n * zoom levels (with a factor of 2). If the projection is Spherical Mercator\n * (the default) then `minResolution` defaults to\n * `40075016.68557849 / 256 / Math.pow(2, 28) = 0.0005831682455839253`.\n * @property {number} [maxZoom=28] The maximum zoom level used to determine the\n * resolution constraint. It is used together with `minZoom` (or\n * `maxResolution`) and `zoomFactor`.  Note that if `minResolution` is also\n * provided, it is given precedence over `maxZoom`.\n * @property {number} [minZoom=0] The minimum zoom level used to determine the\n * resolution constraint. It is used together with `maxZoom` (or\n * `minResolution`) and `zoomFactor`.  Note that if `maxResolution` is also\n * provided, it is given precedence over `minZoom`.\n * @property {module:ol/proj~ProjectionLike} [projection='EPSG:3857'] The\n * projection. The default is Spherical Mercator.\n * @property {number} [resolution] The initial resolution for the view. The\n * units are `projection` units per pixel (e.g. meters per pixel). An\n * alternative to setting this is to set `zoom`. Layer sources will not be\n * fetched if neither this nor `zoom` are defined, but they can be set later\n * with {@link #setZoom} or {@link #setResolution}.\n * @property {Array.<number>} [resolutions] Resolutions to determine the\n * resolution constraint. If set the `maxResolution`, `minResolution`,\n * `minZoom`, `maxZoom`, and `zoomFactor` options are ignored.\n * @property {number} [rotation=0] The initial rotation for the view in radians\n * (positive rotation clockwise, 0 means North).\n * @property {number} [zoom] Only used if `resolution` is not defined. Zoom\n * level used to calculate the initial resolution for the view. The initial\n * resolution is determined using the {@link #constrainResolution} method.\n * @property {number} [zoomFactor=2] The zoom factor used to determine the\n * resolution constraint.\n */\n\n\n/**\n * @typedef {Object} AnimationOptions\n * @property {module:ol/coordinate~Coordinate|undefined} center The center of the view at the end of\n * the animation.\n * @property {number|undefined} zoom The zoom level of the view at the end of the\n * animation. This takes precedence over `resolution`.\n * @property {number|undefined} resolution The resolution of the view at the end\n * of the animation.  If `zoom` is also provided, this option will be ignored.\n * @property {number|undefined} rotation The rotation of the view at the end of\n * the animation.\n * @property {module:ol/coordinate~Coordinate|undefined} anchor Optional anchor to remained fixed\n * during a rotation or resolution animation.\n * @property {number} [duration=1000] The duration of the animation in milliseconds.\n * @property {function(number):number} [easing] The easing function used\n * during the animation (defaults to {@link module:ol/easing~inAndOut}).\n * The function will be called for each frame with a number representing a\n * fraction of the animation's duration.  The function should return a number\n * between 0 and 1 representing the progress toward the destination state.\n */\n\n\n/**\n * @typedef {Object} State\n * @property {module:ol/coordinate~Coordinate} center\n * @property {module:ol/proj/Projection} projection\n * @property {number} resolution\n * @property {number} rotation\n * @property {number} zoom\n */\n\n\n/**\n * Default min zoom level for the map view.\n * @type {number}\n */\nconst DEFAULT_MIN_ZOOM = 0;\n\n\n/**\n * @classdesc\n * A View object represents a simple 2D view of the map.\n *\n * This is the object to act upon to change the center, resolution,\n * and rotation of the map.\n *\n * ### The view states\n *\n * An View is determined by three states: `center`, `resolution`,\n * and `rotation`. Each state has a corresponding getter and setter, e.g.\n * `getCenter` and `setCenter` for the `center` state.\n *\n * An View has a `projection`. The projection determines the\n * coordinate system of the center, and its units determine the units of the\n * resolution (projection units per pixel). The default projection is\n * Spherical Mercator (EPSG:3857).\n *\n * ### The constraints\n *\n * `setCenter`, `setResolution` and `setRotation` can be used to change the\n * states of the view. Any value can be passed to the setters. And the value\n * that is passed to a setter will effectively be the value set in the view,\n * and returned by the corresponding getter.\n *\n * But a View object also has a *resolution constraint*, a\n * *rotation constraint* and a *center constraint*.\n *\n * As said above, no constraints are applied when the setters are used to set\n * new states for the view. Applying constraints is done explicitly through\n * the use of the `constrain*` functions (`constrainResolution` and\n * `constrainRotation` and `constrainCenter`).\n *\n * The main users of the constraints are the interactions and the\n * controls. For example, double-clicking on the map changes the view to\n * the \"next\" resolution. And releasing the fingers after pinch-zooming\n * snaps to the closest resolution (with an animation).\n *\n * The *resolution constraint* snaps to specific resolutions. It is\n * determined by the following options: `resolutions`, `maxResolution`,\n * `maxZoom`, and `zoomFactor`. If `resolutions` is set, the other three\n * options are ignored. See documentation for each option for more\n * information.\n *\n * The *rotation constraint* snaps to specific angles. It is determined\n * by the following options: `enableRotation` and `constrainRotation`.\n * By default the rotation value is snapped to zero when approaching the\n * horizontal.\n *\n * The *center constraint* is determined by the `extent` option. By\n * default the center is not constrained at all.\n *\n * @constructor\n * @extends {module:ol/Object}\n * @param {module:ol/View~ViewOptions=} opt_options View options.\n * @api\n */\nconst View = function(opt_options) {\n  BaseObject.call(this);\n\n  const options = assign({}, opt_options);\n\n  /**\n   * @private\n   * @type {Array.<number>}\n   */\n  this.hints_ = [0, 0];\n\n  /**\n   * @private\n   * @type {Array.<Array.<module:ol/View~Animation>>}\n   */\n  this.animations_ = [];\n\n  /**\n   * @private\n   * @type {number|undefined}\n   */\n  this.updateAnimationKey_;\n\n  this.updateAnimations_ = this.updateAnimations_.bind(this);\n\n  /**\n   * @private\n   * @const\n   * @type {module:ol/proj/Projection}\n   */\n  this.projection_ = createProjection(options.projection, 'EPSG:3857');\n\n  this.applyOptions_(options);\n};\n\ninherits(View, BaseObject);\n\n\n/**\n * Set up the view with the given options.\n * @param {module:ol/View~ViewOptions} options View options.\n */\nView.prototype.applyOptions_ = function(options) {\n\n  /**\n   * @type {Object.<string, *>}\n   */\n  const properties = {};\n  properties[ViewProperty.CENTER] = options.center !== undefined ?\n    options.center : null;\n\n  const resolutionConstraintInfo = createResolutionConstraint(options);\n\n  /**\n   * @private\n   * @type {number}\n   */\n  this.maxResolution_ = resolutionConstraintInfo.maxResolution;\n\n  /**\n   * @private\n   * @type {number}\n   */\n  this.minResolution_ = resolutionConstraintInfo.minResolution;\n\n  /**\n   * @private\n   * @type {number}\n   */\n  this.zoomFactor_ = resolutionConstraintInfo.zoomFactor;\n\n  /**\n   * @private\n   * @type {Array.<number>|undefined}\n   */\n  this.resolutions_ = options.resolutions;\n\n  /**\n   * @private\n   * @type {number}\n   */\n  this.minZoom_ = resolutionConstraintInfo.minZoom;\n\n  const centerConstraint = createCenterConstraint(options);\n  const resolutionConstraint = resolutionConstraintInfo.constraint;\n  const rotationConstraint = createRotationConstraint(options);\n\n  /**\n   * @private\n   * @type {module:ol/View~Constraints}\n   */\n  this.constraints_ = {\n    center: centerConstraint,\n    resolution: resolutionConstraint,\n    rotation: rotationConstraint\n  };\n\n  if (options.resolution !== undefined) {\n    properties[ViewProperty.RESOLUTION] = options.resolution;\n  } else if (options.zoom !== undefined) {\n    properties[ViewProperty.RESOLUTION] = this.constrainResolution(\n      this.maxResolution_, options.zoom - this.minZoom_);\n\n    if (this.resolutions_) { // in case map zoom is out of min/max zoom range\n      properties[ViewProperty.RESOLUTION] = clamp(\n        Number(this.getResolution() || properties[ViewProperty.RESOLUTION]),\n        this.minResolution_, this.maxResolution_);\n    }\n  }\n  properties[ViewProperty.ROTATION] = options.rotation !== undefined ? options.rotation : 0;\n  this.setProperties(properties);\n\n  /**\n   * @private\n   * @type {module:ol/View~ViewOptions}\n   */\n  this.options_ = options;\n\n};\n\n/**\n * Get an updated version of the view options used to construct the view.  The\n * current resolution (or zoom), center, and rotation are applied to any stored\n * options.  The provided options can be used to apply new min/max zoom or\n * resolution limits.\n * @param {module:ol/View~ViewOptions} newOptions New options to be applied.\n * @return {module:ol/View~ViewOptions} New options updated with the current view state.\n */\nView.prototype.getUpdatedOptions_ = function(newOptions) {\n  const options = assign({}, this.options_);\n\n  // preserve resolution (or zoom)\n  if (options.resolution !== undefined) {\n    options.resolution = this.getResolution();\n  } else {\n    options.zoom = this.getZoom();\n  }\n\n  // preserve center\n  options.center = this.getCenter();\n\n  // preserve rotation\n  options.rotation = this.getRotation();\n\n  return assign({}, options, newOptions);\n};\n\n\n/**\n * Animate the view.  The view's center, zoom (or resolution), and rotation\n * can be animated for smooth transitions between view states.  For example,\n * to animate the view to a new zoom level:\n *\n *     view.animate({zoom: view.getZoom() + 1});\n *\n * By default, the animation lasts one second and uses in-and-out easing.  You\n * can customize this behavior by including `duration` (in milliseconds) and\n * `easing` options (see {@link module:ol/easing}).\n *\n * To chain together multiple animations, call the method with multiple\n * animation objects.  For example, to first zoom and then pan:\n *\n *     view.animate({zoom: 10}, {center: [0, 0]});\n *\n * If you provide a function as the last argument to the animate method, it\n * will get called at the end of an animation series.  The callback will be\n * called with `true` if the animation series completed on its own or `false`\n * if it was cancelled.\n *\n * Animations are cancelled by user interactions (e.g. dragging the map) or by\n * calling `view.setCenter()`, `view.setResolution()`, or `view.setRotation()`\n * (or another method that calls one of these).\n *\n * @param {...(module:ol/View~AnimationOptions|function(boolean))} var_args Animation\n *     options.  Multiple animations can be run in series by passing multiple\n *     options objects.  To run multiple animations in parallel, call the method\n *     multiple times.  An optional callback can be provided as a final\n *     argument.  The callback will be called with a boolean indicating whether\n *     the animation completed without being cancelled.\n * @api\n */\nView.prototype.animate = function(var_args) {\n  let animationCount = arguments.length;\n  let callback;\n  if (animationCount > 1 && typeof arguments[animationCount - 1] === 'function') {\n    callback = arguments[animationCount - 1];\n    --animationCount;\n  }\n  if (!this.isDef()) {\n    // if view properties are not yet set, shortcut to the final state\n    const state = arguments[animationCount - 1];\n    if (state.center) {\n      this.setCenter(state.center);\n    }\n    if (state.zoom !== undefined) {\n      this.setZoom(state.zoom);\n    }\n    if (state.rotation !== undefined) {\n      this.setRotation(state.rotation);\n    }\n    if (callback) {\n      setTimeout(function() {\n        callback(true);\n      }, 0);\n    }\n    return;\n  }\n  let start = Date.now();\n  let center = this.getCenter().slice();\n  let resolution = this.getResolution();\n  let rotation = this.getRotation();\n  const series = [];\n  for (let i = 0; i < animationCount; ++i) {\n    const options = /** @type {module:ol/View~AnimationOptions} */ (arguments[i]);\n\n    const animation = /** @type {module:ol/View~Animation} */ ({\n      start: start,\n      complete: false,\n      anchor: options.anchor,\n      duration: options.duration !== undefined ? options.duration : 1000,\n      easing: options.easing || inAndOut\n    });\n\n    if (options.center) {\n      animation.sourceCenter = center;\n      animation.targetCenter = options.center;\n      center = animation.targetCenter;\n    }\n\n    if (options.zoom !== undefined) {\n      animation.sourceResolution = resolution;\n      animation.targetResolution = this.constrainResolution(\n        this.maxResolution_, options.zoom - this.minZoom_, 0);\n      resolution = animation.targetResolution;\n    } else if (options.resolution) {\n      animation.sourceResolution = resolution;\n      animation.targetResolution = options.resolution;\n      resolution = animation.targetResolution;\n    }\n\n    if (options.rotation !== undefined) {\n      animation.sourceRotation = rotation;\n      const delta = modulo(options.rotation - rotation + Math.PI, 2 * Math.PI) - Math.PI;\n      animation.targetRotation = rotation + delta;\n      rotation = animation.targetRotation;\n    }\n\n    animation.callback = callback;\n\n    // check if animation is a no-op\n    if (isNoopAnimation(animation)) {\n      animation.complete = true;\n      // we still push it onto the series for callback handling\n    } else {\n      start += animation.duration;\n    }\n    series.push(animation);\n  }\n  this.animations_.push(series);\n  this.setHint(ViewHint.ANIMATING, 1);\n  this.updateAnimations_();\n};\n\n\n/**\n * Determine if the view is being animated.\n * @return {boolean} The view is being animated.\n * @api\n */\nView.prototype.getAnimating = function() {\n  return this.hints_[ViewHint.ANIMATING] > 0;\n};\n\n\n/**\n * Determine if the user is interacting with the view, such as panning or zooming.\n * @return {boolean} The view is being interacted with.\n * @api\n */\nView.prototype.getInteracting = function() {\n  return this.hints_[ViewHint.INTERACTING] > 0;\n};\n\n\n/**\n * Cancel any ongoing animations.\n * @api\n */\nView.prototype.cancelAnimations = function() {\n  this.setHint(ViewHint.ANIMATING, -this.hints_[ViewHint.ANIMATING]);\n  for (let i = 0, ii = this.animations_.length; i < ii; ++i) {\n    const series = this.animations_[i];\n    if (series[0].callback) {\n      series[0].callback(false);\n    }\n  }\n  this.animations_.length = 0;\n};\n\n/**\n * Update all animations.\n */\nView.prototype.updateAnimations_ = function() {\n  if (this.updateAnimationKey_ !== undefined) {\n    cancelAnimationFrame(this.updateAnimationKey_);\n    this.updateAnimationKey_ = undefined;\n  }\n  if (!this.getAnimating()) {\n    return;\n  }\n  const now = Date.now();\n  let more = false;\n  for (let i = this.animations_.length - 1; i >= 0; --i) {\n    const series = this.animations_[i];\n    let seriesComplete = true;\n    for (let j = 0, jj = series.length; j < jj; ++j) {\n      const animation = series[j];\n      if (animation.complete) {\n        continue;\n      }\n      const elapsed = now - animation.start;\n      let fraction = animation.duration > 0 ? elapsed / animation.duration : 1;\n      if (fraction >= 1) {\n        animation.complete = true;\n        fraction = 1;\n      } else {\n        seriesComplete = false;\n      }\n      const progress = animation.easing(fraction);\n      if (animation.sourceCenter) {\n        const x0 = animation.sourceCenter[0];\n        const y0 = animation.sourceCenter[1];\n        const x1 = animation.targetCenter[0];\n        const y1 = animation.targetCenter[1];\n        const x = x0 + progress * (x1 - x0);\n        const y = y0 + progress * (y1 - y0);\n        this.set(ViewProperty.CENTER, [x, y]);\n      }\n      if (animation.sourceResolution && animation.targetResolution) {\n        const resolution = progress === 1 ?\n          animation.targetResolution :\n          animation.sourceResolution + progress * (animation.targetResolution - animation.sourceResolution);\n        if (animation.anchor) {\n          this.set(ViewProperty.CENTER,\n            this.calculateCenterZoom(resolution, animation.anchor));\n        }\n        this.set(ViewProperty.RESOLUTION, resolution);\n      }\n      if (animation.sourceRotation !== undefined && animation.targetRotation !== undefined) {\n        const rotation = progress === 1 ?\n          modulo(animation.targetRotation + Math.PI, 2 * Math.PI) - Math.PI :\n          animation.sourceRotation + progress * (animation.targetRotation - animation.sourceRotation);\n        if (animation.anchor) {\n          this.set(ViewProperty.CENTER,\n            this.calculateCenterRotate(rotation, animation.anchor));\n        }\n        this.set(ViewProperty.ROTATION, rotation);\n      }\n      more = true;\n      if (!animation.complete) {\n        break;\n      }\n    }\n    if (seriesComplete) {\n      this.animations_[i] = null;\n      this.setHint(ViewHint.ANIMATING, -1);\n      const callback = series[0].callback;\n      if (callback) {\n        setTimeout(function() {\n          callback(true);\n        }, 0);\n      }\n    }\n  }\n  // prune completed series\n  this.animations_ = this.animations_.filter(Boolean);\n  if (more && this.updateAnimationKey_ === undefined) {\n    this.updateAnimationKey_ = requestAnimationFrame(this.updateAnimations_);\n  }\n};\n\n/**\n * @param {number} rotation Target rotation.\n * @param {module:ol/coordinate~Coordinate} anchor Rotation anchor.\n * @return {module:ol/coordinate~Coordinate|undefined} Center for rotation and anchor.\n */\nView.prototype.calculateCenterRotate = function(rotation, anchor) {\n  let center;\n  const currentCenter = this.getCenter();\n  if (currentCenter !== undefined) {\n    center = [currentCenter[0] - anchor[0], currentCenter[1] - anchor[1]];\n    rotateCoordinate(center, rotation - this.getRotation());\n    addCoordinate(center, anchor);\n  }\n  return center;\n};\n\n\n/**\n * @param {number} resolution Target resolution.\n * @param {module:ol/coordinate~Coordinate} anchor Zoom anchor.\n * @return {module:ol/coordinate~Coordinate|undefined} Center for resolution and anchor.\n */\nView.prototype.calculateCenterZoom = function(resolution, anchor) {\n  let center;\n  const currentCenter = this.getCenter();\n  const currentResolution = this.getResolution();\n  if (currentCenter !== undefined && currentResolution !== undefined) {\n    const x = anchor[0] - resolution * (anchor[0] - currentCenter[0]) / currentResolution;\n    const y = anchor[1] - resolution * (anchor[1] - currentCenter[1]) / currentResolution;\n    center = [x, y];\n  }\n  return center;\n};\n\n\n/**\n * @private\n * @return {module:ol/size~Size} Viewport size or `[100, 100]` when no viewport is found.\n */\nView.prototype.getSizeFromViewport_ = function() {\n  const size = [100, 100];\n  const selector = '.ol-viewport[data-view=\"' + getUid(this) + '\"]';\n  const element = document.querySelector(selector);\n  if (element) {\n    const metrics = getComputedStyle(element);\n    size[0] = parseInt(metrics.width, 10);\n    size[1] = parseInt(metrics.height, 10);\n  }\n  return size;\n};\n\n\n/**\n * Get the constrained center of this view.\n * @param {module:ol/coordinate~Coordinate|undefined} center Center.\n * @return {module:ol/coordinate~Coordinate|undefined} Constrained center.\n * @api\n */\nView.prototype.constrainCenter = function(center) {\n  return this.constraints_.center(center);\n};\n\n\n/**\n * Get the constrained resolution of this view.\n * @param {number|undefined} resolution Resolution.\n * @param {number=} opt_delta Delta. Default is `0`.\n * @param {number=} opt_direction Direction. Default is `0`.\n * @return {number|undefined} Constrained resolution.\n * @api\n */\nView.prototype.constrainResolution = function(resolution, opt_delta, opt_direction) {\n  const delta = opt_delta || 0;\n  const direction = opt_direction || 0;\n  return this.constraints_.resolution(resolution, delta, direction);\n};\n\n\n/**\n * Get the constrained rotation of this view.\n * @param {number|undefined} rotation Rotation.\n * @param {number=} opt_delta Delta. Default is `0`.\n * @return {number|undefined} Constrained rotation.\n * @api\n */\nView.prototype.constrainRotation = function(rotation, opt_delta) {\n  const delta = opt_delta || 0;\n  return this.constraints_.rotation(rotation, delta);\n};\n\n\n/**\n * Get the view center.\n * @return {module:ol/coordinate~Coordinate|undefined} The center of the view.\n * @observable\n * @api\n */\nView.prototype.getCenter = function() {\n  return (\n    /** @type {module:ol/coordinate~Coordinate|undefined} */ (this.get(ViewProperty.CENTER))\n  );\n};\n\n\n/**\n * @return {module:ol/View~Constraints} Constraints.\n */\nView.prototype.getConstraints = function() {\n  return this.constraints_;\n};\n\n\n/**\n * @param {Array.<number>=} opt_hints Destination array.\n * @return {Array.<number>} Hint.\n */\nView.prototype.getHints = function(opt_hints) {\n  if (opt_hints !== undefined) {\n    opt_hints[0] = this.hints_[0];\n    opt_hints[1] = this.hints_[1];\n    return opt_hints;\n  } else {\n    return this.hints_.slice();\n  }\n};\n\n\n/**\n * Calculate the extent for the current view state and the passed size.\n * The size is the pixel dimensions of the box into which the calculated extent\n * should fit. In most cases you want to get the extent of the entire map,\n * that is `map.getSize()`.\n * @param {module:ol/size~Size=} opt_size Box pixel size. If not provided, the size of the\n * first map that uses this view will be used.\n * @return {module:ol/extent~Extent} Extent.\n * @api\n */\nView.prototype.calculateExtent = function(opt_size) {\n  const size = opt_size || this.getSizeFromViewport_();\n  const center = /** @type {!module:ol/coordinate~Coordinate} */ (this.getCenter());\n  assert(center, 1); // The view center is not defined\n  const resolution = /** @type {!number} */ (this.getResolution());\n  assert(resolution !== undefined, 2); // The view resolution is not defined\n  const rotation = /** @type {!number} */ (this.getRotation());\n  assert(rotation !== undefined, 3); // The view rotation is not defined\n\n  return getForViewAndSize(center, resolution, rotation, size);\n};\n\n\n/**\n * Get the maximum resolution of the view.\n * @return {number} The maximum resolution of the view.\n * @api\n */\nView.prototype.getMaxResolution = function() {\n  return this.maxResolution_;\n};\n\n\n/**\n * Get the minimum resolution of the view.\n * @return {number} The minimum resolution of the view.\n * @api\n */\nView.prototype.getMinResolution = function() {\n  return this.minResolution_;\n};\n\n\n/**\n * Get the maximum zoom level for the view.\n * @return {number} The maximum zoom level.\n * @api\n */\nView.prototype.getMaxZoom = function() {\n  return /** @type {number} */ (this.getZoomForResolution(this.minResolution_));\n};\n\n\n/**\n * Set a new maximum zoom level for the view.\n * @param {number} zoom The maximum zoom level.\n * @api\n */\nView.prototype.setMaxZoom = function(zoom) {\n  this.applyOptions_(this.getUpdatedOptions_({maxZoom: zoom}));\n};\n\n\n/**\n * Get the minimum zoom level for the view.\n * @return {number} The minimum zoom level.\n * @api\n */\nView.prototype.getMinZoom = function() {\n  return /** @type {number} */ (this.getZoomForResolution(this.maxResolution_));\n};\n\n\n/**\n * Set a new minimum zoom level for the view.\n * @param {number} zoom The minimum zoom level.\n * @api\n */\nView.prototype.setMinZoom = function(zoom) {\n  this.applyOptions_(this.getUpdatedOptions_({minZoom: zoom}));\n};\n\n\n/**\n * Get the view projection.\n * @return {module:ol/proj/Projection} The projection of the view.\n * @api\n */\nView.prototype.getProjection = function() {\n  return this.projection_;\n};\n\n\n/**\n * Get the view resolution.\n * @return {number|undefined} The resolution of the view.\n * @observable\n * @api\n */\nView.prototype.getResolution = function() {\n  return /** @type {number|undefined} */ (this.get(ViewProperty.RESOLUTION));\n};\n\n\n/**\n * Get the resolutions for the view. This returns the array of resolutions\n * passed to the constructor of the View, or undefined if none were given.\n * @return {Array.<number>|undefined} The resolutions of the view.\n * @api\n */\nView.prototype.getResolutions = function() {\n  return this.resolutions_;\n};\n\n\n/**\n * Get the resolution for a provided extent (in map units) and size (in pixels).\n * @param {module:ol/extent~Extent} extent Extent.\n * @param {module:ol/size~Size=} opt_size Box pixel size.\n * @return {number} The resolution at which the provided extent will render at\n *     the given size.\n * @api\n */\nView.prototype.getResolutionForExtent = function(extent, opt_size) {\n  const size = opt_size || this.getSizeFromViewport_();\n  const xResolution = getWidth(extent) / size[0];\n  const yResolution = getHeight(extent) / size[1];\n  return Math.max(xResolution, yResolution);\n};\n\n\n/**\n * Return a function that returns a value between 0 and 1 for a\n * resolution. Exponential scaling is assumed.\n * @param {number=} opt_power Power.\n * @return {function(number): number} Resolution for value function.\n */\nView.prototype.getResolutionForValueFunction = function(opt_power) {\n  const power = opt_power || 2;\n  const maxResolution = this.maxResolution_;\n  const minResolution = this.minResolution_;\n  const max = Math.log(maxResolution / minResolution) / Math.log(power);\n  return (\n    /**\n     * @param {number} value Value.\n     * @return {number} Resolution.\n     */\n    function(value) {\n      const resolution = maxResolution / Math.pow(power, value * max);\n      return resolution;\n    });\n};\n\n\n/**\n * Get the view rotation.\n * @return {number} The rotation of the view in radians.\n * @observable\n * @api\n */\nView.prototype.getRotation = function() {\n  return /** @type {number} */ (this.get(ViewProperty.ROTATION));\n};\n\n\n/**\n * Return a function that returns a resolution for a value between\n * 0 and 1. Exponential scaling is assumed.\n * @param {number=} opt_power Power.\n * @return {function(number): number} Value for resolution function.\n */\nView.prototype.getValueForResolutionFunction = function(opt_power) {\n  const power = opt_power || 2;\n  const maxResolution = this.maxResolution_;\n  const minResolution = this.minResolution_;\n  const max = Math.log(maxResolution / minResolution) / Math.log(power);\n  return (\n    /**\n     * @param {number} resolution Resolution.\n     * @return {number} Value.\n     */\n    function(resolution) {\n      const value = (Math.log(maxResolution / resolution) / Math.log(power)) / max;\n      return value;\n    });\n};\n\n\n/**\n * @return {module:ol/View~State} View state.\n */\nView.prototype.getState = function() {\n  const center = /** @type {module:ol/coordinate~Coordinate} */ (this.getCenter());\n  const projection = this.getProjection();\n  const resolution = /** @type {number} */ (this.getResolution());\n  const rotation = this.getRotation();\n  return (\n    /** @type {module:ol/View~State} */ ({\n      center: center.slice(),\n      projection: projection !== undefined ? projection : null,\n      resolution: resolution,\n      rotation: rotation,\n      zoom: this.getZoom()\n    })\n  );\n};\n\n\n/**\n * Get the current zoom level.  If you configured your view with a resolutions\n * array (this is rare), this method may return non-integer zoom levels (so\n * the zoom level is not safe to use as an index into a resolutions array).\n * @return {number|undefined} Zoom.\n * @api\n */\nView.prototype.getZoom = function() {\n  let zoom;\n  const resolution = this.getResolution();\n  if (resolution !== undefined) {\n    zoom = this.getZoomForResolution(resolution);\n  }\n  return zoom;\n};\n\n\n/**\n * Get the zoom level for a resolution.\n * @param {number} resolution The resolution.\n * @return {number|undefined} The zoom level for the provided resolution.\n * @api\n */\nView.prototype.getZoomForResolution = function(resolution) {\n  let offset = this.minZoom_ || 0;\n  let max, zoomFactor;\n  if (this.resolutions_) {\n    const nearest = linearFindNearest(this.resolutions_, resolution, 1);\n    offset = nearest;\n    max = this.resolutions_[nearest];\n    if (nearest == this.resolutions_.length - 1) {\n      zoomFactor = 2;\n    } else {\n      zoomFactor = max / this.resolutions_[nearest + 1];\n    }\n  } else {\n    max = this.maxResolution_;\n    zoomFactor = this.zoomFactor_;\n  }\n  return offset + Math.log(max / resolution) / Math.log(zoomFactor);\n};\n\n\n/**\n * Get the resolution for a zoom level.\n * @param {number} zoom Zoom level.\n * @return {number} The view resolution for the provided zoom level.\n * @api\n */\nView.prototype.getResolutionForZoom = function(zoom) {\n  return /** @type {number} */ (this.constrainResolution(\n    this.maxResolution_, zoom - this.minZoom_, 0));\n};\n\n\n/**\n * Fit the given geometry or extent based on the given map size and border.\n * The size is pixel dimensions of the box to fit the extent into.\n * In most cases you will want to use the map size, that is `map.getSize()`.\n * Takes care of the map angle.\n * @param {module:ol/geom/SimpleGeometry|module:ol/extent~Extent} geometryOrExtent The geometry or\n *     extent to fit the view to.\n * @param {module:ol/View~FitOptions=} opt_options Options.\n * @api\n */\nView.prototype.fit = function(geometryOrExtent, opt_options) {\n  const options = opt_options || {};\n  let size = options.size;\n  if (!size) {\n    size = this.getSizeFromViewport_();\n  }\n  /** @type {module:ol/geom/SimpleGeometry} */\n  let geometry;\n  if (!(geometryOrExtent instanceof SimpleGeometry)) {\n    assert(Array.isArray(geometryOrExtent),\n      24); // Invalid extent or geometry provided as `geometry`\n    assert(!isEmpty(geometryOrExtent),\n      25); // Cannot fit empty extent provided as `geometry`\n    geometry = polygonFromExtent(geometryOrExtent);\n  } else if (geometryOrExtent.getType() === GeometryType.CIRCLE) {\n    geometryOrExtent = geometryOrExtent.getExtent();\n    geometry = polygonFromExtent(geometryOrExtent);\n    geometry.rotate(this.getRotation(), getCenter(geometryOrExtent));\n  } else {\n    geometry = geometryOrExtent;\n  }\n\n  const padding = options.padding !== undefined ? options.padding : [0, 0, 0, 0];\n  const constrainResolution = options.constrainResolution !== undefined ?\n    options.constrainResolution : true;\n  const nearest = options.nearest !== undefined ? options.nearest : false;\n  let minResolution;\n  if (options.minResolution !== undefined) {\n    minResolution = options.minResolution;\n  } else if (options.maxZoom !== undefined) {\n    minResolution = this.constrainResolution(\n      this.maxResolution_, options.maxZoom - this.minZoom_, 0);\n  } else {\n    minResolution = 0;\n  }\n  const coords = geometry.getFlatCoordinates();\n\n  // calculate rotated extent\n  const rotation = this.getRotation();\n  const cosAngle = Math.cos(-rotation);\n  let sinAngle = Math.sin(-rotation);\n  let minRotX = +Infinity;\n  let minRotY = +Infinity;\n  let maxRotX = -Infinity;\n  let maxRotY = -Infinity;\n  const stride = geometry.getStride();\n  for (let i = 0, ii = coords.length; i < ii; i += stride) {\n    const rotX = coords[i] * cosAngle - coords[i + 1] * sinAngle;\n    const rotY = coords[i] * sinAngle + coords[i + 1] * cosAngle;\n    minRotX = Math.min(minRotX, rotX);\n    minRotY = Math.min(minRotY, rotY);\n    maxRotX = Math.max(maxRotX, rotX);\n    maxRotY = Math.max(maxRotY, rotY);\n  }\n\n  // calculate resolution\n  let resolution = this.getResolutionForExtent(\n    [minRotX, minRotY, maxRotX, maxRotY],\n    [size[0] - padding[1] - padding[3], size[1] - padding[0] - padding[2]]);\n  resolution = isNaN(resolution) ? minResolution :\n    Math.max(resolution, minResolution);\n  if (constrainResolution) {\n    let constrainedResolution = this.constrainResolution(resolution, 0, 0);\n    if (!nearest && constrainedResolution < resolution) {\n      constrainedResolution = this.constrainResolution(\n        constrainedResolution, -1, 0);\n    }\n    resolution = constrainedResolution;\n  }\n\n  // calculate center\n  sinAngle = -sinAngle; // go back to original rotation\n  let centerRotX = (minRotX + maxRotX) / 2;\n  let centerRotY = (minRotY + maxRotY) / 2;\n  centerRotX += (padding[1] - padding[3]) / 2 * resolution;\n  centerRotY += (padding[0] - padding[2]) / 2 * resolution;\n  const centerX = centerRotX * cosAngle - centerRotY * sinAngle;\n  const centerY = centerRotY * cosAngle + centerRotX * sinAngle;\n  const center = [centerX, centerY];\n  const callback = options.callback ? options.callback : UNDEFINED;\n\n  if (options.duration !== undefined) {\n    this.animate({\n      resolution: resolution,\n      center: center,\n      duration: options.duration,\n      easing: options.easing\n    }, callback);\n  } else {\n    this.setResolution(resolution);\n    this.setCenter(center);\n    setTimeout(callback.bind(undefined, true), 0);\n  }\n};\n\n\n/**\n * Center on coordinate and view position.\n * @param {module:ol/coordinate~Coordinate} coordinate Coordinate.\n * @param {module:ol/size~Size} size Box pixel size.\n * @param {module:ol~Pixel} position Position on the view to center on.\n * @api\n */\nView.prototype.centerOn = function(coordinate, size, position) {\n  // calculate rotated position\n  const rotation = this.getRotation();\n  const cosAngle = Math.cos(-rotation);\n  let sinAngle = Math.sin(-rotation);\n  let rotX = coordinate[0] * cosAngle - coordinate[1] * sinAngle;\n  let rotY = coordinate[1] * cosAngle + coordinate[0] * sinAngle;\n  const resolution = this.getResolution();\n  rotX += (size[0] / 2 - position[0]) * resolution;\n  rotY += (position[1] - size[1] / 2) * resolution;\n\n  // go back to original angle\n  sinAngle = -sinAngle; // go back to original rotation\n  const centerX = rotX * cosAngle - rotY * sinAngle;\n  const centerY = rotY * cosAngle + rotX * sinAngle;\n\n  this.setCenter([centerX, centerY]);\n};\n\n\n/**\n * @return {boolean} Is defined.\n */\nView.prototype.isDef = function() {\n  return !!this.getCenter() && this.getResolution() !== undefined;\n};\n\n\n/**\n * Rotate the view around a given coordinate.\n * @param {number} rotation New rotation value for the view.\n * @param {module:ol/coordinate~Coordinate=} opt_anchor The rotation center.\n * @api\n */\nView.prototype.rotate = function(rotation, opt_anchor) {\n  if (opt_anchor !== undefined) {\n    const center = this.calculateCenterRotate(rotation, opt_anchor);\n    this.setCenter(center);\n  }\n  this.setRotation(rotation);\n};\n\n\n/**\n * Set the center of the current view.\n * @param {module:ol/coordinate~Coordinate|undefined} center The center of the view.\n * @observable\n * @api\n */\nView.prototype.setCenter = function(center) {\n  this.set(ViewProperty.CENTER, center);\n  if (this.getAnimating()) {\n    this.cancelAnimations();\n  }\n};\n\n\n/**\n * @param {module:ol/ViewHint} hint Hint.\n * @param {number} delta Delta.\n * @return {number} New value.\n */\nView.prototype.setHint = function(hint, delta) {\n  this.hints_[hint] += delta;\n  this.changed();\n  return this.hints_[hint];\n};\n\n\n/**\n * Set the resolution for this view.\n * @param {number|undefined} resolution The resolution of the view.\n * @observable\n * @api\n */\nView.prototype.setResolution = function(resolution) {\n  this.set(ViewProperty.RESOLUTION, resolution);\n  if (this.getAnimating()) {\n    this.cancelAnimations();\n  }\n};\n\n\n/**\n * Set the rotation for this view.\n * @param {number} rotation The rotation of the view in radians.\n * @observable\n * @api\n */\nView.prototype.setRotation = function(rotation) {\n  this.set(ViewProperty.ROTATION, rotation);\n  if (this.getAnimating()) {\n    this.cancelAnimations();\n  }\n};\n\n\n/**\n * Zoom to a specific zoom level.\n * @param {number} zoom Zoom level.\n * @api\n */\nView.prototype.setZoom = function(zoom) {\n  this.setResolution(this.getResolutionForZoom(zoom));\n};\n\n\n/**\n * @param {module:ol/View~ViewOptions} options View options.\n * @return {module:ol/centerconstraint~Type} The constraint.\n */\nexport function createCenterConstraint(options) {\n  if (options.extent !== undefined) {\n    return createExtent(options.extent);\n  } else {\n    return centerNone;\n  }\n}\n\n\n/**\n * @param {module:ol/View~ViewOptions} options View options.\n * @return {{constraint: module:ol/resolutionconstraint~Type, maxResolution: number,\n *     minResolution: number, minZoom: number, zoomFactor: number}} The constraint.\n */\nexport function createResolutionConstraint(options) {\n  let resolutionConstraint;\n  let maxResolution;\n  let minResolution;\n\n  // TODO: move these to be ol constants\n  // see https://github.com/openlayers/openlayers/issues/2076\n  const defaultMaxZoom = 28;\n  const defaultZoomFactor = 2;\n\n  let minZoom = options.minZoom !== undefined ?\n    options.minZoom : DEFAULT_MIN_ZOOM;\n\n  let maxZoom = options.maxZoom !== undefined ?\n    options.maxZoom : defaultMaxZoom;\n\n  const zoomFactor = options.zoomFactor !== undefined ?\n    options.zoomFactor : defaultZoomFactor;\n\n  if (options.resolutions !== undefined) {\n    const resolutions = options.resolutions;\n    maxResolution = resolutions[minZoom];\n    minResolution = resolutions[maxZoom] !== undefined ?\n      resolutions[maxZoom] : resolutions[resolutions.length - 1];\n    resolutionConstraint = createSnapToResolutions(\n      resolutions);\n  } else {\n    // calculate the default min and max resolution\n    const projection = createProjection(options.projection, 'EPSG:3857');\n    const extent = projection.getExtent();\n    const size = !extent ?\n      // use an extent that can fit the whole world if need be\n      360 * METERS_PER_UNIT[Units.DEGREES] /\n            projection.getMetersPerUnit() :\n      Math.max(getWidth(extent), getHeight(extent));\n\n    const defaultMaxResolution = size / DEFAULT_TILE_SIZE / Math.pow(\n      defaultZoomFactor, DEFAULT_MIN_ZOOM);\n\n    const defaultMinResolution = defaultMaxResolution / Math.pow(\n      defaultZoomFactor, defaultMaxZoom - DEFAULT_MIN_ZOOM);\n\n    // user provided maxResolution takes precedence\n    maxResolution = options.maxResolution;\n    if (maxResolution !== undefined) {\n      minZoom = 0;\n    } else {\n      maxResolution = defaultMaxResolution / Math.pow(zoomFactor, minZoom);\n    }\n\n    // user provided minResolution takes precedence\n    minResolution = options.minResolution;\n    if (minResolution === undefined) {\n      if (options.maxZoom !== undefined) {\n        if (options.maxResolution !== undefined) {\n          minResolution = maxResolution / Math.pow(zoomFactor, maxZoom);\n        } else {\n          minResolution = defaultMaxResolution / Math.pow(zoomFactor, maxZoom);\n        }\n      } else {\n        minResolution = defaultMinResolution;\n      }\n    }\n\n    // given discrete zoom levels, minResolution may be different than provided\n    maxZoom = minZoom + Math.floor(\n      Math.log(maxResolution / minResolution) / Math.log(zoomFactor));\n    minResolution = maxResolution / Math.pow(zoomFactor, maxZoom - minZoom);\n\n    resolutionConstraint = createSnapToPower(\n      zoomFactor, maxResolution, maxZoom - minZoom);\n  }\n  return {constraint: resolutionConstraint, maxResolution: maxResolution,\n    minResolution: minResolution, minZoom: minZoom, zoomFactor: zoomFactor};\n}\n\n\n/**\n * @param {module:ol/View~ViewOptions} options View options.\n * @return {module:ol/rotationconstraint~Type} Rotation constraint.\n */\nexport function createRotationConstraint(options) {\n  const enableRotation = options.enableRotation !== undefined ?\n    options.enableRotation : true;\n  if (enableRotation) {\n    const constrainRotation = options.constrainRotation;\n    if (constrainRotation === undefined || constrainRotation === true) {\n      return createSnapToZero();\n    } else if (constrainRotation === false) {\n      return rotationNone;\n    } else if (typeof constrainRotation === 'number') {\n      return createSnapToN(constrainRotation);\n    } else {\n      return rotationNone;\n    }\n  } else {\n    return disable;\n  }\n}\n\n\n/**\n * Determine if an animation involves no view change.\n * @param {module:ol/View~Animation} animation The animation.\n * @return {boolean} The animation involves no view change.\n */\nexport function isNoopAnimation(animation) {\n  if (animation.sourceCenter && animation.targetCenter) {\n    if (!coordinatesEqual(animation.sourceCenter, animation.targetCenter)) {\n      return false;\n    }\n  }\n  if (animation.sourceResolution !== animation.targetResolution) {\n    return false;\n  }\n  if (animation.sourceRotation !== animation.targetRotation) {\n    return false;\n  }\n  return true;\n}\n\nexport default View;\n","/**\n * @module ol/resolutionconstraint\n */\nimport {linearFindNearest} from './array.js';\nimport {clamp} from './math.js';\n\n\n/**\n * @typedef {function((number|undefined), number, number): (number|undefined)} Type\n */\n\n\n/**\n * @param {Array.<number>} resolutions Resolutions.\n * @return {module:ol/resolutionconstraint~Type} Zoom function.\n */\nexport function createSnapToResolutions(resolutions) {\n  return (\n    /**\n     * @param {number|undefined} resolution Resolution.\n     * @param {number} delta Delta.\n     * @param {number} direction Direction.\n     * @return {number|undefined} Resolution.\n     */\n    function(resolution, delta, direction) {\n      if (resolution !== undefined) {\n        let z = linearFindNearest(resolutions, resolution, direction);\n        z = clamp(z + delta, 0, resolutions.length - 1);\n        const index = Math.floor(z);\n        if (z != index && index < resolutions.length - 1) {\n          const power = resolutions[index] / resolutions[index + 1];\n          return resolutions[index] / Math.pow(power, z - index);\n        } else {\n          return resolutions[index];\n        }\n      } else {\n        return undefined;\n      }\n    }\n  );\n}\n\n\n/**\n * @param {number} power Power.\n * @param {number} maxResolution Maximum resolution.\n * @param {number=} opt_maxLevel Maximum level.\n * @return {module:ol/resolutionconstraint~Type} Zoom function.\n */\nexport function createSnapToPower(power, maxResolution, opt_maxLevel) {\n  return (\n    /**\n     * @param {number|undefined} resolution Resolution.\n     * @param {number} delta Delta.\n     * @param {number} direction Direction.\n     * @return {number|undefined} Resolution.\n     */\n    function(resolution, delta, direction) {\n      if (resolution !== undefined) {\n        const offset = -direction / 2 + 0.5;\n        const oldLevel = Math.floor(\n          Math.log(maxResolution / resolution) / Math.log(power) + offset);\n        let newLevel = Math.max(oldLevel + delta, 0);\n        if (opt_maxLevel !== undefined) {\n          newLevel = Math.min(newLevel, opt_maxLevel);\n        }\n        return maxResolution / Math.pow(power, newLevel);\n      } else {\n        return undefined;\n      }\n    });\n}\n","/**\n * @module ol/geom/flat/textpath\n */\nimport {lerp} from '../../math.js';\n\n\n/**\n * @param {Array.<number>} flatCoordinates Path to put text on.\n * @param {number} offset Start offset of the `flatCoordinates`.\n * @param {number} end End offset of the `flatCoordinates`.\n * @param {number} stride Stride.\n * @param {string} text Text to place on the path.\n * @param {function(string):number} measure Measure function returning the\n * width of the character passed as 1st argument.\n * @param {number} startM m along the path where the text starts.\n * @param {number} maxAngle Max angle between adjacent chars in radians.\n * @return {Array.<Array.<*>>} The result array of null if `maxAngle` was\n * exceeded. Entries of the array are x, y, anchorX, angle, chunk.\n */\nexport function drawTextOnPath(\n  flatCoordinates, offset, end, stride, text, measure, startM, maxAngle) {\n  const result = [];\n\n  // Keep text upright\n  const reverse = flatCoordinates[offset] > flatCoordinates[end - stride];\n\n  const numChars = text.length;\n\n  let x1 = flatCoordinates[offset];\n  let y1 = flatCoordinates[offset + 1];\n  offset += stride;\n  let x2 = flatCoordinates[offset];\n  let y2 = flatCoordinates[offset + 1];\n  let segmentM = 0;\n  let segmentLength = Math.sqrt(Math.pow(x2 - x1, 2) + Math.pow(y2 - y1, 2));\n\n  let chunk = '';\n  let chunkLength = 0;\n  let data, index, previousAngle;\n  for (let i = 0; i < numChars; ++i) {\n    index = reverse ? numChars - i - 1 : i;\n    const char = text.charAt(index);\n    chunk = reverse ? char + chunk : chunk + char;\n    const charLength = measure(chunk) - chunkLength;\n    chunkLength += charLength;\n    const charM = startM + charLength / 2;\n    while (offset < end - stride && segmentM + segmentLength < charM) {\n      x1 = x2;\n      y1 = y2;\n      offset += stride;\n      x2 = flatCoordinates[offset];\n      y2 = flatCoordinates[offset + 1];\n      segmentM += segmentLength;\n      segmentLength = Math.sqrt(Math.pow(x2 - x1, 2) + Math.pow(y2 - y1, 2));\n    }\n    const segmentPos = charM - segmentM;\n    let angle = Math.atan2(y2 - y1, x2 - x1);\n    if (reverse) {\n      angle += angle > 0 ? -Math.PI : Math.PI;\n    }\n    if (previousAngle !== undefined) {\n      let delta = angle - previousAngle;\n      delta += (delta > Math.PI) ? -2 * Math.PI : (delta < -Math.PI) ? 2 * Math.PI : 0;\n      if (Math.abs(delta) > maxAngle) {\n        return null;\n      }\n    }\n    const interpolate = segmentPos / segmentLength;\n    const x = lerp(x1, x2, interpolate);\n    const y = lerp(y1, y2, interpolate);\n    if (previousAngle == angle) {\n      if (reverse) {\n        data[0] = x;\n        data[1] = y;\n        data[2] = charLength / 2;\n      }\n      data[4] = chunk;\n    } else {\n      chunk = char;\n      chunkLength = charLength;\n      data = [x, y, charLength / 2, angle, chunk];\n      if (reverse) {\n        result.unshift(data);\n      } else {\n        result.push(data);\n      }\n      previousAngle = angle;\n    }\n    startM += charLength;\n  }\n  return result;\n}\n","/**\n * @module ol/render/canvas/Instruction\n */\n\n/**\n * @enum {number}\n */\nconst Instruction = {\n  BEGIN_GEOMETRY: 0,\n  BEGIN_PATH: 1,\n  CIRCLE: 2,\n  CLOSE_PATH: 3,\n  CUSTOM: 4,\n  DRAW_CHARS: 5,\n  DRAW_IMAGE: 6,\n  END_GEOMETRY: 7,\n  FILL: 8,\n  MOVE_TO_LINE_TO: 9,\n  SET_FILL_STYLE: 10,\n  SET_STROKE_STYLE: 11,\n  STROKE: 12\n};\n\n\n/**\n * @type {Array.<Instruction>}\n */\nexport const fillInstruction = [Instruction.FILL];\n\n\n/**\n * @type {Array.<Instruction>}\n */\nexport const strokeInstruction = [Instruction.STROKE];\n\n\n/**\n * @type {Array.<Instruction>}\n */\nexport const beginPathInstruction = [Instruction.BEGIN_PATH];\n\n\n/**\n * @type {Array.<Instruction>}\n */\nexport const closePathInstruction = [Instruction.CLOSE_PATH];\n\n\nexport default Instruction;\n","/**\n * @module ol/render/canvas/Replay\n */\nimport {getUid, inherits} from '../../util.js';\nimport {UNDEFINED} from '../../functions.js';\nimport {equals, reverseSubArray} from '../../array.js';\nimport {asColorLike} from '../../colorlike.js';\nimport {buffer, clone, coordinateRelationship, createEmpty, createOrUpdate,\n  createOrUpdateEmpty, extend, extendCoordinate, intersects} from '../../extent.js';\nimport Relationship from '../../extent/Relationship.js';\nimport GeometryType from '../../geom/GeometryType.js';\nimport {inflateCoordinates, inflateCoordinatesArray, inflateMultiCoordinatesArray} from '../../geom/flat/inflate.js';\nimport {lineStringLength} from '../../geom/flat/length.js';\nimport {drawTextOnPath} from '../../geom/flat/textpath.js';\nimport {transform2D} from '../../geom/flat/transform.js';\nimport {CANVAS_LINE_DASH} from '../../has.js';\nimport {isEmpty} from '../../obj.js';\nimport VectorContext from '../VectorContext.js';\nimport {drawImage, resetTransform, defaultPadding, defaultFillStyle, defaultStrokeStyle,\n  defaultMiterLimit, defaultLineWidth, defaultLineJoin, defaultLineDashOffset,\n  defaultLineDash, defaultLineCap} from '../canvas.js';\nimport CanvasInstruction from '../canvas/Instruction.js';\nimport {TEXT_ALIGN} from '../replay.js';\nimport {\n  create as createTransform,\n  compose as composeTransform,\n  apply as applyTransform,\n  setFromArray as transformSetFromArray\n} from '../../transform.js';\n\n/**\n * @constructor\n * @extends {module:ol/render/VectorContext}\n * @param {number} tolerance Tolerance.\n * @param {module:ol/extent~Extent} maxExtent Maximum extent.\n * @param {number} resolution Resolution.\n * @param {number} pixelRatio Pixel ratio.\n * @param {boolean} overlaps The replay can have overlapping geometries.\n * @param {?} declutterTree Declutter tree.\n * @struct\n */\nconst CanvasReplay = function(tolerance, maxExtent, resolution, pixelRatio, overlaps, declutterTree) {\n  VectorContext.call(this);\n\n  /**\n   * @type {?}\n   */\n  this.declutterTree = declutterTree;\n\n  /**\n   * @protected\n   * @type {number}\n   */\n  this.tolerance = tolerance;\n\n  /**\n   * @protected\n   * @const\n   * @type {module:ol/extent~Extent}\n   */\n  this.maxExtent = maxExtent;\n\n  /**\n   * @protected\n   * @type {boolean}\n   */\n  this.overlaps = overlaps;\n\n  /**\n   * @protected\n   * @type {number}\n   */\n  this.pixelRatio = pixelRatio;\n\n  /**\n   * @protected\n   * @type {number}\n   */\n  this.maxLineWidth = 0;\n\n  /**\n   * @protected\n   * @const\n   * @type {number}\n   */\n  this.resolution = resolution;\n\n  /**\n   * @private\n   * @type {boolean}\n   */\n  this.alignFill_;\n\n  /**\n   * @private\n   * @type {Array.<*>}\n   */\n  this.beginGeometryInstruction1_ = null;\n\n  /**\n   * @private\n   * @type {Array.<*>}\n   */\n  this.beginGeometryInstruction2_ = null;\n\n  /**\n   * @private\n   * @type {module:ol/extent~Extent}\n   */\n  this.bufferedMaxExtent_ = null;\n\n  /**\n   * @protected\n   * @type {Array.<*>}\n   */\n  this.instructions = [];\n\n  /**\n   * @protected\n   * @type {Array.<number>}\n   */\n  this.coordinates = [];\n\n  /**\n   * @private\n   * @type {!Object.<number,module:ol/coordinate~Coordinate|Array.<module:ol/coordinate~Coordinate>|Array.<Array.<module:ol/coordinate~Coordinate>>>}\n   */\n  this.coordinateCache_ = {};\n\n  /**\n   * @private\n   * @type {!module:ol/transform~Transform}\n   */\n  this.renderedTransform_ = createTransform();\n\n  /**\n   * @protected\n   * @type {Array.<*>}\n   */\n  this.hitDetectionInstructions = [];\n\n  /**\n   * @private\n   * @type {Array.<number>}\n   */\n  this.pixelCoordinates_ = null;\n\n  /**\n   * @protected\n   * @type {module:ol/render/canvas~FillStrokeState}\n   */\n  this.state = /** @type {module:ol/render/canvas~FillStrokeState} */ ({});\n\n  /**\n   * @private\n   * @type {number}\n   */\n  this.viewRotation_ = 0;\n\n};\n\ninherits(CanvasReplay, VectorContext);\n\n\n/**\n * @type {module:ol/extent~Extent}\n */\nconst tmpExtent = createEmpty();\n\n\n/**\n * @type {!module:ol/transform~Transform}\n */\nconst tmpTransform = createTransform();\n\n/**\n * @param {CanvasRenderingContext2D} context Context.\n * @param {module:ol/coordinate~Coordinate} p1 1st point of the background box.\n * @param {module:ol/coordinate~Coordinate} p2 2nd point of the background box.\n * @param {module:ol/coordinate~Coordinate} p3 3rd point of the background box.\n * @param {module:ol/coordinate~Coordinate} p4 4th point of the background box.\n * @param {Array.<*>} fillInstruction Fill instruction.\n * @param {Array.<*>} strokeInstruction Stroke instruction.\n */\nCanvasReplay.prototype.replayTextBackground_ = function(context, p1, p2, p3, p4,\n  fillInstruction, strokeInstruction) {\n  context.beginPath();\n  context.moveTo.apply(context, p1);\n  context.lineTo.apply(context, p2);\n  context.lineTo.apply(context, p3);\n  context.lineTo.apply(context, p4);\n  context.lineTo.apply(context, p1);\n  if (fillInstruction) {\n    this.alignFill_ = /** @type {boolean} */ (fillInstruction[2]);\n    this.fill_(context);\n  }\n  if (strokeInstruction) {\n    this.setStrokeStyle_(context, /** @type {Array.<*>} */ (strokeInstruction));\n    context.stroke();\n  }\n};\n\n\n/**\n * @param {CanvasRenderingContext2D} context Context.\n * @param {number} x X.\n * @param {number} y Y.\n * @param {HTMLImageElement|HTMLCanvasElement|HTMLVideoElement} image Image.\n * @param {number} anchorX Anchor X.\n * @param {number} anchorY Anchor Y.\n * @param {module:ol/render/canvas~DeclutterGroup} declutterGroup Declutter group.\n * @param {number} height Height.\n * @param {number} opacity Opacity.\n * @param {number} originX Origin X.\n * @param {number} originY Origin Y.\n * @param {number} rotation Rotation.\n * @param {number} scale Scale.\n * @param {boolean} snapToPixel Snap to pixel.\n * @param {number} width Width.\n * @param {Array.<number>} padding Padding.\n * @param {Array.<*>} fillInstruction Fill instruction.\n * @param {Array.<*>} strokeInstruction Stroke instruction.\n */\nCanvasReplay.prototype.replayImage_ = function(context, x, y, image,\n  anchorX, anchorY, declutterGroup, height, opacity, originX, originY,\n  rotation, scale, snapToPixel, width, padding, fillInstruction, strokeInstruction) {\n  const fillStroke = fillInstruction || strokeInstruction;\n  anchorX *= scale;\n  anchorY *= scale;\n  x -= anchorX;\n  y -= anchorY;\n\n  const w = (width + originX > image.width) ? image.width - originX : width;\n  const h = (height + originY > image.height) ? image.height - originY : height;\n  const boxW = padding[3] + w * scale + padding[1];\n  const boxH = padding[0] + h * scale + padding[2];\n  const boxX = x - padding[3];\n  const boxY = y - padding[0];\n\n  /** @type {module:ol/coordinate~Coordinate} */\n  let p1;\n  /** @type {module:ol/coordinate~Coordinate} */\n  let p2;\n  /** @type {module:ol/coordinate~Coordinate} */\n  let p3;\n  /** @type {module:ol/coordinate~Coordinate} */\n  let p4;\n  if (fillStroke || rotation !== 0) {\n    p1 = [boxX, boxY];\n    p2 = [boxX + boxW, boxY];\n    p3 = [boxX + boxW, boxY + boxH];\n    p4 = [boxX, boxY + boxH];\n  }\n\n  let transform = null;\n  if (rotation !== 0) {\n    const centerX = x + anchorX;\n    const centerY = y + anchorY;\n    transform = composeTransform(tmpTransform, centerX, centerY, 1, 1, rotation, -centerX, -centerY);\n\n    createOrUpdateEmpty(tmpExtent);\n    extendCoordinate(tmpExtent, applyTransform(tmpTransform, p1));\n    extendCoordinate(tmpExtent, applyTransform(tmpTransform, p2));\n    extendCoordinate(tmpExtent, applyTransform(tmpTransform, p3));\n    extendCoordinate(tmpExtent, applyTransform(tmpTransform, p4));\n  } else {\n    createOrUpdate(boxX, boxY, boxX + boxW, boxY + boxH, tmpExtent);\n  }\n  const canvas = context.canvas;\n  const strokePadding = strokeInstruction ? (strokeInstruction[2] * scale / 2) : 0;\n  const intersects =\n      tmpExtent[0] - strokePadding <= canvas.width && tmpExtent[2] + strokePadding >= 0 &&\n      tmpExtent[1] - strokePadding <= canvas.height && tmpExtent[3] + strokePadding >= 0;\n\n  if (snapToPixel) {\n    x = Math.round(x);\n    y = Math.round(y);\n  }\n\n  if (declutterGroup) {\n    if (!intersects && declutterGroup[4] == 1) {\n      return;\n    }\n    extend(declutterGroup, tmpExtent);\n    const declutterArgs = intersects ?\n      [context, transform ? transform.slice(0) : null, opacity, image, originX, originY, w, h, x, y, scale] :\n      null;\n    if (declutterArgs && fillStroke) {\n      declutterArgs.push(fillInstruction, strokeInstruction, p1, p2, p3, p4);\n    }\n    declutterGroup.push(declutterArgs);\n  } else if (intersects) {\n    if (fillStroke) {\n      this.replayTextBackground_(context, p1, p2, p3, p4,\n        /** @type {Array.<*>} */ (fillInstruction),\n        /** @type {Array.<*>} */ (strokeInstruction));\n    }\n    drawImage(context, transform, opacity, image, originX, originY, w, h, x, y, scale);\n  }\n};\n\n\n/**\n * @protected\n * @param {Array.<number>} dashArray Dash array.\n * @return {Array.<number>} Dash array with pixel ratio applied\n */\nCanvasReplay.prototype.applyPixelRatio = function(dashArray) {\n  const pixelRatio = this.pixelRatio;\n  return pixelRatio == 1 ? dashArray : dashArray.map(function(dash) {\n    return dash * pixelRatio;\n  });\n};\n\n\n/**\n * @param {Array.<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {number} end End.\n * @param {number} stride Stride.\n * @param {boolean} closed Last input coordinate equals first.\n * @param {boolean} skipFirst Skip first coordinate.\n * @protected\n * @return {number} My end.\n */\nCanvasReplay.prototype.appendFlatCoordinates = function(flatCoordinates, offset, end, stride, closed, skipFirst) {\n\n  let myEnd = this.coordinates.length;\n  const extent = this.getBufferedMaxExtent();\n  if (skipFirst) {\n    offset += stride;\n  }\n  const lastCoord = [flatCoordinates[offset], flatCoordinates[offset + 1]];\n  const nextCoord = [NaN, NaN];\n  let skipped = true;\n\n  let i, lastRel, nextRel;\n  for (i = offset + stride; i < end; i += stride) {\n    nextCoord[0] = flatCoordinates[i];\n    nextCoord[1] = flatCoordinates[i + 1];\n    nextRel = coordinateRelationship(extent, nextCoord);\n    if (nextRel !== lastRel) {\n      if (skipped) {\n        this.coordinates[myEnd++] = lastCoord[0];\n        this.coordinates[myEnd++] = lastCoord[1];\n      }\n      this.coordinates[myEnd++] = nextCoord[0];\n      this.coordinates[myEnd++] = nextCoord[1];\n      skipped = false;\n    } else if (nextRel === Relationship.INTERSECTING) {\n      this.coordinates[myEnd++] = nextCoord[0];\n      this.coordinates[myEnd++] = nextCoord[1];\n      skipped = false;\n    } else {\n      skipped = true;\n    }\n    lastCoord[0] = nextCoord[0];\n    lastCoord[1] = nextCoord[1];\n    lastRel = nextRel;\n  }\n\n  // Last coordinate equals first or only one point to append:\n  if ((closed && skipped) || i === offset + stride) {\n    this.coordinates[myEnd++] = lastCoord[0];\n    this.coordinates[myEnd++] = lastCoord[1];\n  }\n  return myEnd;\n};\n\n\n/**\n * @param {Array.<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {Array.<number>} ends Ends.\n * @param {number} stride Stride.\n * @param {Array.<number>} replayEnds Replay ends.\n * @return {number} Offset.\n */\nCanvasReplay.prototype.drawCustomCoordinates_ = function(flatCoordinates, offset, ends, stride, replayEnds) {\n  for (let i = 0, ii = ends.length; i < ii; ++i) {\n    const end = ends[i];\n    const replayEnd = this.appendFlatCoordinates(flatCoordinates, offset, end, stride, false, false);\n    replayEnds.push(replayEnd);\n    offset = end;\n  }\n  return offset;\n};\n\n\n/**\n * @inheritDoc.\n */\nCanvasReplay.prototype.drawCustom = function(geometry, feature, renderer) {\n  this.beginGeometry(geometry, feature);\n  const type = geometry.getType();\n  const stride = geometry.getStride();\n  const replayBegin = this.coordinates.length;\n  let flatCoordinates, replayEnd, replayEnds, replayEndss;\n  let offset;\n  if (type == GeometryType.MULTI_POLYGON) {\n    geometry = /** @type {module:ol/geom/MultiPolygon} */ (geometry);\n    flatCoordinates = geometry.getOrientedFlatCoordinates();\n    replayEndss = [];\n    const endss = geometry.getEndss();\n    offset = 0;\n    for (let i = 0, ii = endss.length; i < ii; ++i) {\n      const myEnds = [];\n      offset = this.drawCustomCoordinates_(flatCoordinates, offset, endss[i], stride, myEnds);\n      replayEndss.push(myEnds);\n    }\n    this.instructions.push([CanvasInstruction.CUSTOM,\n      replayBegin, replayEndss, geometry, renderer, inflateMultiCoordinatesArray]);\n  } else if (type == GeometryType.POLYGON || type == GeometryType.MULTI_LINE_STRING) {\n    replayEnds = [];\n    flatCoordinates = (type == GeometryType.POLYGON) ?\n      /** @type {module:ol/geom/Polygon} */ (geometry).getOrientedFlatCoordinates() :\n      geometry.getFlatCoordinates();\n    offset = this.drawCustomCoordinates_(flatCoordinates, 0,\n      /** @type {module:ol/geom/Polygon|module:ol/geom/MultiLineString} */ (geometry).getEnds(),\n      stride, replayEnds);\n    this.instructions.push([CanvasInstruction.CUSTOM,\n      replayBegin, replayEnds, geometry, renderer, inflateCoordinatesArray]);\n  } else if (type == GeometryType.LINE_STRING || type == GeometryType.MULTI_POINT) {\n    flatCoordinates = geometry.getFlatCoordinates();\n    replayEnd = this.appendFlatCoordinates(\n      flatCoordinates, 0, flatCoordinates.length, stride, false, false);\n    this.instructions.push([CanvasInstruction.CUSTOM,\n      replayBegin, replayEnd, geometry, renderer, inflateCoordinates]);\n  } else if (type == GeometryType.POINT) {\n    flatCoordinates = geometry.getFlatCoordinates();\n    this.coordinates.push(flatCoordinates[0], flatCoordinates[1]);\n    replayEnd = this.coordinates.length;\n    this.instructions.push([CanvasInstruction.CUSTOM,\n      replayBegin, replayEnd, geometry, renderer]);\n  }\n  this.endGeometry(geometry, feature);\n};\n\n\n/**\n * @protected\n * @param {module:ol/geom/Geometry|module:ol/render/Feature} geometry Geometry.\n * @param {module:ol/Feature|module:ol/render/Feature} feature Feature.\n */\nCanvasReplay.prototype.beginGeometry = function(geometry, feature) {\n  this.beginGeometryInstruction1_ = [CanvasInstruction.BEGIN_GEOMETRY, feature, 0];\n  this.instructions.push(this.beginGeometryInstruction1_);\n  this.beginGeometryInstruction2_ = [CanvasInstruction.BEGIN_GEOMETRY, feature, 0];\n  this.hitDetectionInstructions.push(this.beginGeometryInstruction2_);\n};\n\n\n/**\n * @private\n * @param {CanvasRenderingContext2D} context Context.\n */\nCanvasReplay.prototype.fill_ = function(context) {\n  if (this.alignFill_) {\n    const origin = applyTransform(this.renderedTransform_, [0, 0]);\n    const repeatSize = 512 * this.pixelRatio;\n    context.translate(origin[0] % repeatSize, origin[1] % repeatSize);\n    context.rotate(this.viewRotation_);\n  }\n  context.fill();\n  if (this.alignFill_) {\n    context.setTransform.apply(context, resetTransform);\n  }\n};\n\n\n/**\n * @private\n * @param {CanvasRenderingContext2D} context Context.\n * @param {Array.<*>} instruction Instruction.\n */\nCanvasReplay.prototype.setStrokeStyle_ = function(context, instruction) {\n  context.strokeStyle = /** @type {module:ol/colorlike~ColorLike} */ (instruction[1]);\n  context.lineWidth = /** @type {number} */ (instruction[2]);\n  context.lineCap = /** @type {string} */ (instruction[3]);\n  context.lineJoin = /** @type {string} */ (instruction[4]);\n  context.miterLimit = /** @type {number} */ (instruction[5]);\n  if (CANVAS_LINE_DASH) {\n    context.lineDashOffset = /** @type {number} */ (instruction[7]);\n    context.setLineDash(/** @type {Array.<number>} */ (instruction[6]));\n  }\n};\n\n\n/**\n * @param {module:ol/render/canvas~DeclutterGroup} declutterGroup Declutter group.\n * @param {module:ol/Feature|module:ol/render/Feature} feature Feature.\n */\nCanvasReplay.prototype.renderDeclutter_ = function(declutterGroup, feature) {\n  if (declutterGroup && declutterGroup.length > 5) {\n    const groupCount = declutterGroup[4];\n    if (groupCount == 1 || groupCount == declutterGroup.length - 5) {\n      /** @type {module:ol/structs/RBush~Entry} */\n      const box = {\n        minX: /** @type {number} */ (declutterGroup[0]),\n        minY: /** @type {number} */ (declutterGroup[1]),\n        maxX: /** @type {number} */ (declutterGroup[2]),\n        maxY: /** @type {number} */ (declutterGroup[3]),\n        value: feature\n      };\n      if (!this.declutterTree.collides(box)) {\n        this.declutterTree.insert(box);\n        for (let j = 5, jj = declutterGroup.length; j < jj; ++j) {\n          const declutterData = /** @type {Array} */ (declutterGroup[j]);\n          if (declutterData) {\n            if (declutterData.length > 11) {\n              this.replayTextBackground_(declutterData[0],\n                declutterData[13], declutterData[14], declutterData[15], declutterData[16],\n                declutterData[11], declutterData[12]);\n            }\n            drawImage.apply(undefined, declutterData);\n          }\n        }\n      }\n      declutterGroup.length = 5;\n      createOrUpdateEmpty(declutterGroup);\n    }\n  }\n};\n\n\n/**\n * @private\n * @param {CanvasRenderingContext2D} context Context.\n * @param {module:ol/transform~Transform} transform Transform.\n * @param {Object.<string, boolean>} skippedFeaturesHash Ids of features\n *     to skip.\n * @param {Array.<*>} instructions Instructions array.\n * @param {function((module:ol/Feature|module:ol/render/Feature)): T|undefined}\n *     featureCallback Feature callback.\n * @param {module:ol/extent~Extent=} opt_hitExtent Only check features that intersect this\n *     extent.\n * @return {T|undefined} Callback result.\n * @template T\n */\nCanvasReplay.prototype.replay_ = function(\n  context, transform, skippedFeaturesHash,\n  instructions, featureCallback, opt_hitExtent) {\n  /** @type {Array.<number>} */\n  let pixelCoordinates;\n  if (this.pixelCoordinates_ && equals(transform, this.renderedTransform_)) {\n    pixelCoordinates = this.pixelCoordinates_;\n  } else {\n    if (!this.pixelCoordinates_) {\n      this.pixelCoordinates_ = [];\n    }\n    pixelCoordinates = transform2D(\n      this.coordinates, 0, this.coordinates.length, 2,\n      transform, this.pixelCoordinates_);\n    transformSetFromArray(this.renderedTransform_, transform);\n  }\n  const skipFeatures = !isEmpty(skippedFeaturesHash);\n  let i = 0; // instruction index\n  const ii = instructions.length; // end of instructions\n  let d = 0; // data index\n  let dd; // end of per-instruction data\n  let anchorX, anchorY, prevX, prevY, roundX, roundY, declutterGroup, image;\n  let pendingFill = 0;\n  let pendingStroke = 0;\n  let lastFillInstruction = null;\n  let lastStrokeInstruction = null;\n  const coordinateCache = this.coordinateCache_;\n  const viewRotation = this.viewRotation_;\n\n  const state = /** @type {module:ol/render~State} */ ({\n    context: context,\n    pixelRatio: this.pixelRatio,\n    resolution: this.resolution,\n    rotation: viewRotation\n  });\n\n  // When the batch size gets too big, performance decreases. 200 is a good\n  // balance between batch size and number of fill/stroke instructions.\n  const batchSize = this.instructions != instructions || this.overlaps ? 0 : 200;\n  let /** @type {module:ol/Feature|module:ol/render/Feature} */ feature;\n  let x, y;\n  while (i < ii) {\n    const instruction = instructions[i];\n    const type = /** @type {module:ol/render/canvas/Instruction} */ (instruction[0]);\n    switch (type) {\n      case CanvasInstruction.BEGIN_GEOMETRY:\n        feature = /** @type {module:ol/Feature|module:ol/render/Feature} */ (instruction[1]);\n        if ((skipFeatures &&\n            skippedFeaturesHash[getUid(feature).toString()]) ||\n            !feature.getGeometry()) {\n          i = /** @type {number} */ (instruction[2]);\n        } else if (opt_hitExtent !== undefined && !intersects(\n          opt_hitExtent, feature.getGeometry().getExtent())) {\n          i = /** @type {number} */ (instruction[2]) + 1;\n        } else {\n          ++i;\n        }\n        break;\n      case CanvasInstruction.BEGIN_PATH:\n        if (pendingFill > batchSize) {\n          this.fill_(context);\n          pendingFill = 0;\n        }\n        if (pendingStroke > batchSize) {\n          context.stroke();\n          pendingStroke = 0;\n        }\n        if (!pendingFill && !pendingStroke) {\n          context.beginPath();\n          prevX = prevY = NaN;\n        }\n        ++i;\n        break;\n      case CanvasInstruction.CIRCLE:\n        d = /** @type {number} */ (instruction[1]);\n        const x1 = pixelCoordinates[d];\n        const y1 = pixelCoordinates[d + 1];\n        const x2 = pixelCoordinates[d + 2];\n        const y2 = pixelCoordinates[d + 3];\n        const dx = x2 - x1;\n        const dy = y2 - y1;\n        const r = Math.sqrt(dx * dx + dy * dy);\n        context.moveTo(x1 + r, y1);\n        context.arc(x1, y1, r, 0, 2 * Math.PI, true);\n        ++i;\n        break;\n      case CanvasInstruction.CLOSE_PATH:\n        context.closePath();\n        ++i;\n        break;\n      case CanvasInstruction.CUSTOM:\n        d = /** @type {number} */ (instruction[1]);\n        dd = instruction[2];\n        const geometry = /** @type {module:ol/geom/SimpleGeometry} */ (instruction[3]);\n        const renderer = instruction[4];\n        const fn = instruction.length == 6 ? instruction[5] : undefined;\n        state.geometry = geometry;\n        state.feature = feature;\n        if (!(i in coordinateCache)) {\n          coordinateCache[i] = [];\n        }\n        const coords = coordinateCache[i];\n        if (fn) {\n          fn(pixelCoordinates, d, dd, 2, coords);\n        } else {\n          coords[0] = pixelCoordinates[d];\n          coords[1] = pixelCoordinates[d + 1];\n          coords.length = 2;\n        }\n        renderer(coords, state);\n        ++i;\n        break;\n      case CanvasInstruction.DRAW_IMAGE:\n        d = /** @type {number} */ (instruction[1]);\n        dd = /** @type {number} */ (instruction[2]);\n        image =  /** @type {HTMLCanvasElement|HTMLVideoElement|Image} */\n            (instruction[3]);\n        // Remaining arguments in DRAW_IMAGE are in alphabetical order\n        anchorX = /** @type {number} */ (instruction[4]);\n        anchorY = /** @type {number} */ (instruction[5]);\n        declutterGroup = featureCallback ? null : /** @type {module:ol/render/canvas~DeclutterGroup} */ (instruction[6]);\n        const height = /** @type {number} */ (instruction[7]);\n        const opacity = /** @type {number} */ (instruction[8]);\n        const originX = /** @type {number} */ (instruction[9]);\n        const originY = /** @type {number} */ (instruction[10]);\n        const rotateWithView = /** @type {boolean} */ (instruction[11]);\n        let rotation = /** @type {number} */ (instruction[12]);\n        const scale = /** @type {number} */ (instruction[13]);\n        const snapToPixel = /** @type {boolean} */ (instruction[14]);\n        const width = /** @type {number} */ (instruction[15]);\n\n        let padding, backgroundFill, backgroundStroke;\n        if (instruction.length > 16) {\n          padding = /** @type {Array.<number>} */ (instruction[16]);\n          backgroundFill = /** @type {boolean} */ (instruction[17]);\n          backgroundStroke = /** @type {boolean} */ (instruction[18]);\n        } else {\n          padding = defaultPadding;\n          backgroundFill = backgroundStroke = false;\n        }\n\n        if (rotateWithView) {\n          rotation += viewRotation;\n        }\n        for (; d < dd; d += 2) {\n          this.replayImage_(context,\n            pixelCoordinates[d], pixelCoordinates[d + 1], image, anchorX, anchorY,\n            declutterGroup, height, opacity, originX, originY, rotation, scale,\n            snapToPixel, width, padding,\n            backgroundFill ? /** @type {Array.<*>} */ (lastFillInstruction) : null,\n            backgroundStroke ? /** @type {Array.<*>} */ (lastStrokeInstruction) : null);\n        }\n        this.renderDeclutter_(declutterGroup, feature);\n        ++i;\n        break;\n      case CanvasInstruction.DRAW_CHARS:\n        const begin = /** @type {number} */ (instruction[1]);\n        const end = /** @type {number} */ (instruction[2]);\n        const baseline = /** @type {number} */ (instruction[3]);\n        declutterGroup = featureCallback ? null : /** @type {module:ol/render/canvas~DeclutterGroup} */ (instruction[4]);\n        const overflow = /** @type {number} */ (instruction[5]);\n        const fillKey = /** @type {string} */ (instruction[6]);\n        const maxAngle = /** @type {number} */ (instruction[7]);\n        const measure = /** @type {function(string):number} */ (instruction[8]);\n        const offsetY = /** @type {number} */ (instruction[9]);\n        const strokeKey = /** @type {string} */ (instruction[10]);\n        const strokeWidth =  /** @type {number} */ (instruction[11]);\n        const text = /** @type {string} */ (instruction[12]);\n        const textKey = /** @type {string} */ (instruction[13]);\n        const textScale = /** @type {number} */ (instruction[14]);\n\n        const pathLength = lineStringLength(pixelCoordinates, begin, end, 2);\n        const textLength = measure(text);\n        if (overflow || textLength <= pathLength) {\n          const textAlign = /** @type {module:ol~render} */ (this).textStates[textKey].textAlign;\n          const startM = (pathLength - textLength) * TEXT_ALIGN[textAlign];\n          const parts = drawTextOnPath(\n            pixelCoordinates, begin, end, 2, text, measure, startM, maxAngle);\n          if (parts) {\n            let c, cc, chars, label, part;\n            if (strokeKey) {\n              for (c = 0, cc = parts.length; c < cc; ++c) {\n                part = parts[c]; // x, y, anchorX, rotation, chunk\n                chars = /** @type {string} */ (part[4]);\n                label = /** @type {module:ol~render} */ (this).getImage(chars, textKey, '', strokeKey);\n                anchorX = /** @type {number} */ (part[2]) + strokeWidth;\n                anchorY = baseline * label.height + (0.5 - baseline) * 2 * strokeWidth - offsetY;\n                this.replayImage_(context,\n                  /** @type {number} */ (part[0]), /** @type {number} */ (part[1]), label,\n                  anchorX, anchorY, declutterGroup, label.height, 1, 0, 0,\n                  /** @type {number} */ (part[3]), textScale, false, label.width,\n                  defaultPadding, null, null);\n              }\n            }\n            if (fillKey) {\n              for (c = 0, cc = parts.length; c < cc; ++c) {\n                part = parts[c]; // x, y, anchorX, rotation, chunk\n                chars = /** @type {string} */ (part[4]);\n                label = /** @type {module:ol~render} */ (this).getImage(chars, textKey, fillKey, '');\n                anchorX = /** @type {number} */ (part[2]);\n                anchorY = baseline * label.height - offsetY;\n                this.replayImage_(context,\n                  /** @type {number} */ (part[0]), /** @type {number} */ (part[1]), label,\n                  anchorX, anchorY, declutterGroup, label.height, 1, 0, 0,\n                  /** @type {number} */ (part[3]), textScale, false, label.width,\n                  defaultPadding, null, null);\n              }\n            }\n          }\n        }\n        this.renderDeclutter_(declutterGroup, feature);\n        ++i;\n        break;\n      case CanvasInstruction.END_GEOMETRY:\n        if (featureCallback !== undefined) {\n          feature = /** @type {module:ol/Feature|module:ol/render/Feature} */ (instruction[1]);\n          const result = featureCallback(feature);\n          if (result) {\n            return result;\n          }\n        }\n        ++i;\n        break;\n      case CanvasInstruction.FILL:\n        if (batchSize) {\n          pendingFill++;\n        } else {\n          this.fill_(context);\n        }\n        ++i;\n        break;\n      case CanvasInstruction.MOVE_TO_LINE_TO:\n        d = /** @type {number} */ (instruction[1]);\n        dd = /** @type {number} */ (instruction[2]);\n        x = pixelCoordinates[d];\n        y = pixelCoordinates[d + 1];\n        roundX = (x + 0.5) | 0;\n        roundY = (y + 0.5) | 0;\n        if (roundX !== prevX || roundY !== prevY) {\n          context.moveTo(x, y);\n          prevX = roundX;\n          prevY = roundY;\n        }\n        for (d += 2; d < dd; d += 2) {\n          x = pixelCoordinates[d];\n          y = pixelCoordinates[d + 1];\n          roundX = (x + 0.5) | 0;\n          roundY = (y + 0.5) | 0;\n          if (d == dd - 2 || roundX !== prevX || roundY !== prevY) {\n            context.lineTo(x, y);\n            prevX = roundX;\n            prevY = roundY;\n          }\n        }\n        ++i;\n        break;\n      case CanvasInstruction.SET_FILL_STYLE:\n        lastFillInstruction = instruction;\n        this.alignFill_ = instruction[2];\n\n        if (pendingFill) {\n          this.fill_(context);\n          pendingFill = 0;\n          if (pendingStroke) {\n            context.stroke();\n            pendingStroke = 0;\n          }\n        }\n\n        context.fillStyle = /** @type {module:ol/colorlike~ColorLike} */ (instruction[1]);\n        ++i;\n        break;\n      case CanvasInstruction.SET_STROKE_STYLE:\n        lastStrokeInstruction = instruction;\n        if (pendingStroke) {\n          context.stroke();\n          pendingStroke = 0;\n        }\n        this.setStrokeStyle_(context, /** @type {Array.<*>} */ (instruction));\n        ++i;\n        break;\n      case CanvasInstruction.STROKE:\n        if (batchSize) {\n          pendingStroke++;\n        } else {\n          context.stroke();\n        }\n        ++i;\n        break;\n      default:\n        ++i; // consume the instruction anyway, to avoid an infinite loop\n        break;\n    }\n  }\n  if (pendingFill) {\n    this.fill_(context);\n  }\n  if (pendingStroke) {\n    context.stroke();\n  }\n  return undefined;\n};\n\n\n/**\n * @param {CanvasRenderingContext2D} context Context.\n * @param {module:ol/transform~Transform} transform Transform.\n * @param {number} viewRotation View rotation.\n * @param {Object.<string, boolean>} skippedFeaturesHash Ids of features\n *     to skip.\n */\nCanvasReplay.prototype.replay = function(\n  context, transform, viewRotation, skippedFeaturesHash) {\n  this.viewRotation_ = viewRotation;\n  this.replay_(context, transform,\n    skippedFeaturesHash, this.instructions, undefined, undefined);\n};\n\n\n/**\n * @param {CanvasRenderingContext2D} context Context.\n * @param {module:ol/transform~Transform} transform Transform.\n * @param {number} viewRotation View rotation.\n * @param {Object.<string, boolean>} skippedFeaturesHash Ids of features\n *     to skip.\n * @param {function((module:ol/Feature|module:ol/render/Feature)): T=} opt_featureCallback\n *     Feature callback.\n * @param {module:ol/extent~Extent=} opt_hitExtent Only check features that intersect this\n *     extent.\n * @return {T|undefined} Callback result.\n * @template T\n */\nCanvasReplay.prototype.replayHitDetection = function(\n  context, transform, viewRotation, skippedFeaturesHash,\n  opt_featureCallback, opt_hitExtent) {\n  this.viewRotation_ = viewRotation;\n  return this.replay_(context, transform, skippedFeaturesHash,\n    this.hitDetectionInstructions, opt_featureCallback, opt_hitExtent);\n};\n\n\n/**\n * Reverse the hit detection instructions.\n */\nCanvasReplay.prototype.reverseHitDetectionInstructions = function() {\n  const hitDetectionInstructions = this.hitDetectionInstructions;\n  // step 1 - reverse array\n  hitDetectionInstructions.reverse();\n  // step 2 - reverse instructions within geometry blocks\n  let i;\n  const n = hitDetectionInstructions.length;\n  let instruction;\n  let type;\n  let begin = -1;\n  for (i = 0; i < n; ++i) {\n    instruction = hitDetectionInstructions[i];\n    type = /** @type {module:ol/render/canvas/Instruction} */ (instruction[0]);\n    if (type == CanvasInstruction.END_GEOMETRY) {\n      begin = i;\n    } else if (type == CanvasInstruction.BEGIN_GEOMETRY) {\n      instruction[2] = i;\n      reverseSubArray(this.hitDetectionInstructions, begin, i);\n      begin = -1;\n    }\n  }\n};\n\n\n/**\n * @inheritDoc\n */\nCanvasReplay.prototype.setFillStrokeStyle = function(fillStyle, strokeStyle) {\n  const state = this.state;\n  if (fillStyle) {\n    const fillStyleColor = fillStyle.getColor();\n    state.fillStyle = asColorLike(fillStyleColor ?\n      fillStyleColor : defaultFillStyle);\n  } else {\n    state.fillStyle = undefined;\n  }\n  if (strokeStyle) {\n    const strokeStyleColor = strokeStyle.getColor();\n    state.strokeStyle = asColorLike(strokeStyleColor ?\n      strokeStyleColor : defaultStrokeStyle);\n    const strokeStyleLineCap = strokeStyle.getLineCap();\n    state.lineCap = strokeStyleLineCap !== undefined ?\n      strokeStyleLineCap : defaultLineCap;\n    const strokeStyleLineDash = strokeStyle.getLineDash();\n    state.lineDash = strokeStyleLineDash ?\n      strokeStyleLineDash.slice() : defaultLineDash;\n    const strokeStyleLineDashOffset = strokeStyle.getLineDashOffset();\n    state.lineDashOffset = strokeStyleLineDashOffset ?\n      strokeStyleLineDashOffset : defaultLineDashOffset;\n    const strokeStyleLineJoin = strokeStyle.getLineJoin();\n    state.lineJoin = strokeStyleLineJoin !== undefined ?\n      strokeStyleLineJoin : defaultLineJoin;\n    const strokeStyleWidth = strokeStyle.getWidth();\n    state.lineWidth = strokeStyleWidth !== undefined ?\n      strokeStyleWidth : defaultLineWidth;\n    const strokeStyleMiterLimit = strokeStyle.getMiterLimit();\n    state.miterLimit = strokeStyleMiterLimit !== undefined ?\n      strokeStyleMiterLimit : defaultMiterLimit;\n\n    if (state.lineWidth > this.maxLineWidth) {\n      this.maxLineWidth = state.lineWidth;\n      // invalidate the buffered max extent cache\n      this.bufferedMaxExtent_ = null;\n    }\n  } else {\n    state.strokeStyle = undefined;\n    state.lineCap = undefined;\n    state.lineDash = null;\n    state.lineDashOffset = undefined;\n    state.lineJoin = undefined;\n    state.lineWidth = undefined;\n    state.miterLimit = undefined;\n  }\n};\n\n\n/**\n * @param {module:ol/render/canvas~FillStrokeState} state State.\n * @param {module:ol/geom/Geometry|module:ol/render/Feature} geometry Geometry.\n * @return {Array.<*>} Fill instruction.\n */\nCanvasReplay.prototype.createFill = function(state, geometry) {\n  const fillStyle = state.fillStyle;\n  const fillInstruction = [CanvasInstruction.SET_FILL_STYLE, fillStyle];\n  if (typeof fillStyle !== 'string') {\n    // Fill is a pattern or gradient - align it!\n    fillInstruction.push(true);\n  }\n  return fillInstruction;\n};\n\n\n/**\n * @param {module:ol/render/canvas~FillStrokeState} state State.\n */\nCanvasReplay.prototype.applyStroke = function(state) {\n  this.instructions.push(this.createStroke(state));\n};\n\n\n/**\n * @param {module:ol/render/canvas~FillStrokeState} state State.\n * @return {Array.<*>} Stroke instruction.\n */\nCanvasReplay.prototype.createStroke = function(state) {\n  return [\n    CanvasInstruction.SET_STROKE_STYLE,\n    state.strokeStyle, state.lineWidth * this.pixelRatio, state.lineCap,\n    state.lineJoin, state.miterLimit,\n    this.applyPixelRatio(state.lineDash), state.lineDashOffset * this.pixelRatio\n  ];\n};\n\n\n/**\n * @param {module:ol/render/canvas~FillStrokeState} state State.\n * @param {function(this:module:ol/render/canvas/Replay, module:ol/render/canvas~FillStrokeState, (module:ol/geom/Geometry|module:ol/render/Feature)):Array.<*>} createFill Create fill.\n * @param {module:ol/geom/Geometry|module:ol/render/Feature} geometry Geometry.\n */\nCanvasReplay.prototype.updateFillStyle = function(state, createFill, geometry) {\n  const fillStyle = state.fillStyle;\n  if (typeof fillStyle !== 'string' || state.currentFillStyle != fillStyle) {\n    if (fillStyle !== undefined) {\n      this.instructions.push(createFill.call(this, state, geometry));\n    }\n    state.currentFillStyle = fillStyle;\n  }\n};\n\n\n/**\n * @param {module:ol/render/canvas~FillStrokeState} state State.\n * @param {function(this:module:ol/render/canvas/Replay, module:ol/render/canvas~FillStrokeState)} applyStroke Apply stroke.\n */\nCanvasReplay.prototype.updateStrokeStyle = function(state, applyStroke) {\n  const strokeStyle = state.strokeStyle;\n  const lineCap = state.lineCap;\n  const lineDash = state.lineDash;\n  const lineDashOffset = state.lineDashOffset;\n  const lineJoin = state.lineJoin;\n  const lineWidth = state.lineWidth;\n  const miterLimit = state.miterLimit;\n  if (state.currentStrokeStyle != strokeStyle ||\n      state.currentLineCap != lineCap ||\n      (lineDash != state.currentLineDash && !equals(state.currentLineDash, lineDash)) ||\n      state.currentLineDashOffset != lineDashOffset ||\n      state.currentLineJoin != lineJoin ||\n      state.currentLineWidth != lineWidth ||\n      state.currentMiterLimit != miterLimit) {\n    if (strokeStyle !== undefined) {\n      applyStroke.call(this, state);\n    }\n    state.currentStrokeStyle = strokeStyle;\n    state.currentLineCap = lineCap;\n    state.currentLineDash = lineDash;\n    state.currentLineDashOffset = lineDashOffset;\n    state.currentLineJoin = lineJoin;\n    state.currentLineWidth = lineWidth;\n    state.currentMiterLimit = miterLimit;\n  }\n};\n\n\n/**\n * @param {module:ol/geom/Geometry|module:ol/render/Feature} geometry Geometry.\n * @param {module:ol/Feature|module:ol/render/Feature} feature Feature.\n */\nCanvasReplay.prototype.endGeometry = function(geometry, feature) {\n  this.beginGeometryInstruction1_[2] = this.instructions.length;\n  this.beginGeometryInstruction1_ = null;\n  this.beginGeometryInstruction2_[2] = this.hitDetectionInstructions.length;\n  this.beginGeometryInstruction2_ = null;\n  const endGeometryInstruction = [CanvasInstruction.END_GEOMETRY, feature];\n  this.instructions.push(endGeometryInstruction);\n  this.hitDetectionInstructions.push(endGeometryInstruction);\n};\n\n\n/**\n * FIXME empty description for jsdoc\n */\nCanvasReplay.prototype.finish = UNDEFINED;\n\n\n/**\n * Get the buffered rendering extent.  Rendering will be clipped to the extent\n * provided to the constructor.  To account for symbolizers that may intersect\n * this extent, we calculate a buffered extent (e.g. based on stroke width).\n * @return {module:ol/extent~Extent} The buffered rendering extent.\n * @protected\n */\nCanvasReplay.prototype.getBufferedMaxExtent = function() {\n  if (!this.bufferedMaxExtent_) {\n    this.bufferedMaxExtent_ = clone(this.maxExtent);\n    if (this.maxLineWidth > 0) {\n      const width = this.resolution * (this.maxLineWidth + 1) / 2;\n      buffer(this.bufferedMaxExtent_, width, this.bufferedMaxExtent_);\n    }\n  }\n  return this.bufferedMaxExtent_;\n};\nexport default CanvasReplay;\n","/**\n * @module ol/render/canvas/ImageReplay\n */\nimport {inherits} from '../../util.js';\nimport CanvasInstruction from '../canvas/Instruction.js';\nimport CanvasReplay from '../canvas/Replay.js';\n\n/**\n * @constructor\n * @extends {module:ol/render/canvas/Replay}\n * @param {number} tolerance Tolerance.\n * @param {module:ol/extent~Extent} maxExtent Maximum extent.\n * @param {number} resolution Resolution.\n * @param {number} pixelRatio Pixel ratio.\n * @param {boolean} overlaps The replay can have overlapping geometries.\n * @param {?} declutterTree Declutter tree.\n * @struct\n */\nconst CanvasImageReplay = function(\n  tolerance, maxExtent, resolution, pixelRatio, overlaps, declutterTree) {\n  CanvasReplay.call(this,\n    tolerance, maxExtent, resolution, pixelRatio, overlaps, declutterTree);\n\n  /**\n   * @private\n   * @type {module:ol/render/canvas~DeclutterGroup}\n   */\n  this.declutterGroup_ = null;\n\n  /**\n   * @private\n   * @type {HTMLCanvasElement|HTMLVideoElement|Image}\n   */\n  this.hitDetectionImage_ = null;\n\n  /**\n   * @private\n   * @type {HTMLCanvasElement|HTMLVideoElement|Image}\n   */\n  this.image_ = null;\n\n  /**\n   * @private\n   * @type {number|undefined}\n   */\n  this.anchorX_ = undefined;\n\n  /**\n   * @private\n   * @type {number|undefined}\n   */\n  this.anchorY_ = undefined;\n\n  /**\n   * @private\n   * @type {number|undefined}\n   */\n  this.height_ = undefined;\n\n  /**\n   * @private\n   * @type {number|undefined}\n   */\n  this.opacity_ = undefined;\n\n  /**\n   * @private\n   * @type {number|undefined}\n   */\n  this.originX_ = undefined;\n\n  /**\n   * @private\n   * @type {number|undefined}\n   */\n  this.originY_ = undefined;\n\n  /**\n   * @private\n   * @type {boolean|undefined}\n   */\n  this.rotateWithView_ = undefined;\n\n  /**\n   * @private\n   * @type {number|undefined}\n   */\n  this.rotation_ = undefined;\n\n  /**\n   * @private\n   * @type {number|undefined}\n   */\n  this.scale_ = undefined;\n\n  /**\n   * @private\n   * @type {boolean|undefined}\n   */\n  this.snapToPixel_ = undefined;\n\n  /**\n   * @private\n   * @type {number|undefined}\n   */\n  this.width_ = undefined;\n\n};\n\ninherits(CanvasImageReplay, CanvasReplay);\n\n\n/**\n * @param {Array.<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {number} end End.\n * @param {number} stride Stride.\n * @private\n * @return {number} My end.\n */\nCanvasImageReplay.prototype.drawCoordinates_ = function(flatCoordinates, offset, end, stride) {\n  return this.appendFlatCoordinates(flatCoordinates, offset, end, stride, false, false);\n};\n\n\n/**\n * @inheritDoc\n */\nCanvasImageReplay.prototype.drawPoint = function(pointGeometry, feature) {\n  if (!this.image_) {\n    return;\n  }\n  this.beginGeometry(pointGeometry, feature);\n  const flatCoordinates = pointGeometry.getFlatCoordinates();\n  const stride = pointGeometry.getStride();\n  const myBegin = this.coordinates.length;\n  const myEnd = this.drawCoordinates_(flatCoordinates, 0, flatCoordinates.length, stride);\n  this.instructions.push([\n    CanvasInstruction.DRAW_IMAGE, myBegin, myEnd, this.image_,\n    // Remaining arguments to DRAW_IMAGE are in alphabetical order\n    this.anchorX_, this.anchorY_, this.declutterGroup_, this.height_, this.opacity_,\n    this.originX_, this.originY_, this.rotateWithView_, this.rotation_,\n    this.scale_ * this.pixelRatio, this.snapToPixel_, this.width_\n  ]);\n  this.hitDetectionInstructions.push([\n    CanvasInstruction.DRAW_IMAGE, myBegin, myEnd, this.hitDetectionImage_,\n    // Remaining arguments to DRAW_IMAGE are in alphabetical order\n    this.anchorX_, this.anchorY_, this.declutterGroup_, this.height_, this.opacity_,\n    this.originX_, this.originY_, this.rotateWithView_, this.rotation_,\n    this.scale_, this.snapToPixel_, this.width_\n  ]);\n  this.endGeometry(pointGeometry, feature);\n};\n\n\n/**\n * @inheritDoc\n */\nCanvasImageReplay.prototype.drawMultiPoint = function(multiPointGeometry, feature) {\n  if (!this.image_) {\n    return;\n  }\n  this.beginGeometry(multiPointGeometry, feature);\n  const flatCoordinates = multiPointGeometry.getFlatCoordinates();\n  const stride = multiPointGeometry.getStride();\n  const myBegin = this.coordinates.length;\n  const myEnd = this.drawCoordinates_(\n    flatCoordinates, 0, flatCoordinates.length, stride);\n  this.instructions.push([\n    CanvasInstruction.DRAW_IMAGE, myBegin, myEnd, this.image_,\n    // Remaining arguments to DRAW_IMAGE are in alphabetical order\n    this.anchorX_, this.anchorY_, this.declutterGroup_, this.height_, this.opacity_,\n    this.originX_, this.originY_, this.rotateWithView_, this.rotation_,\n    this.scale_ * this.pixelRatio, this.snapToPixel_, this.width_\n  ]);\n  this.hitDetectionInstructions.push([\n    CanvasInstruction.DRAW_IMAGE, myBegin, myEnd, this.hitDetectionImage_,\n    // Remaining arguments to DRAW_IMAGE are in alphabetical order\n    this.anchorX_, this.anchorY_, this.declutterGroup_, this.height_, this.opacity_,\n    this.originX_, this.originY_, this.rotateWithView_, this.rotation_,\n    this.scale_, this.snapToPixel_, this.width_\n  ]);\n  this.endGeometry(multiPointGeometry, feature);\n};\n\n\n/**\n * @inheritDoc\n */\nCanvasImageReplay.prototype.finish = function() {\n  this.reverseHitDetectionInstructions();\n  // FIXME this doesn't really protect us against further calls to draw*Geometry\n  this.anchorX_ = undefined;\n  this.anchorY_ = undefined;\n  this.hitDetectionImage_ = null;\n  this.image_ = null;\n  this.height_ = undefined;\n  this.scale_ = undefined;\n  this.opacity_ = undefined;\n  this.originX_ = undefined;\n  this.originY_ = undefined;\n  this.rotateWithView_ = undefined;\n  this.rotation_ = undefined;\n  this.snapToPixel_ = undefined;\n  this.width_ = undefined;\n};\n\n\n/**\n * @inheritDoc\n */\nCanvasImageReplay.prototype.setImageStyle = function(imageStyle, declutterGroup) {\n  const anchor = imageStyle.getAnchor();\n  const size = imageStyle.getSize();\n  const hitDetectionImage = imageStyle.getHitDetectionImage(1);\n  const image = imageStyle.getImage(1);\n  const origin = imageStyle.getOrigin();\n  this.anchorX_ = anchor[0];\n  this.anchorY_ = anchor[1];\n  this.declutterGroup_ = /** @type {module:ol/render/canvas~DeclutterGroup} */ (declutterGroup);\n  this.hitDetectionImage_ = hitDetectionImage;\n  this.image_ = image;\n  this.height_ = size[1];\n  this.opacity_ = imageStyle.getOpacity();\n  this.originX_ = origin[0];\n  this.originY_ = origin[1];\n  this.rotateWithView_ = imageStyle.getRotateWithView();\n  this.rotation_ = imageStyle.getRotation();\n  this.scale_ = imageStyle.getScale();\n  this.snapToPixel_ = imageStyle.getSnapToPixel();\n  this.width_ = size[0];\n};\nexport default CanvasImageReplay;\n","/**\n * @module ol/render/canvas/LineStringReplay\n */\nimport {inherits} from '../../util.js';\nimport CanvasInstruction, {strokeInstruction, beginPathInstruction} from '../canvas/Instruction.js';\nimport CanvasReplay from '../canvas/Replay.js';\n\n/**\n * @constructor\n * @extends {module:ol/render/canvas/Replay}\n * @param {number} tolerance Tolerance.\n * @param {module:ol/extent~Extent} maxExtent Maximum extent.\n * @param {number} resolution Resolution.\n * @param {number} pixelRatio Pixel ratio.\n * @param {boolean} overlaps The replay can have overlapping geometries.\n * @param {?} declutterTree Declutter tree.\n * @struct\n */\nconst CanvasLineStringReplay = function(\n  tolerance, maxExtent, resolution, pixelRatio, overlaps, declutterTree) {\n  CanvasReplay.call(this,\n    tolerance, maxExtent, resolution, pixelRatio, overlaps, declutterTree);\n};\n\ninherits(CanvasLineStringReplay, CanvasReplay);\n\n\n/**\n * @param {Array.<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {number} end End.\n * @param {number} stride Stride.\n * @private\n * @return {number} end.\n */\nCanvasLineStringReplay.prototype.drawFlatCoordinates_ = function(flatCoordinates, offset, end, stride) {\n  const myBegin = this.coordinates.length;\n  const myEnd = this.appendFlatCoordinates(\n    flatCoordinates, offset, end, stride, false, false);\n  const moveToLineToInstruction = [CanvasInstruction.MOVE_TO_LINE_TO, myBegin, myEnd];\n  this.instructions.push(moveToLineToInstruction);\n  this.hitDetectionInstructions.push(moveToLineToInstruction);\n  return end;\n};\n\n\n/**\n * @inheritDoc\n */\nCanvasLineStringReplay.prototype.drawLineString = function(lineStringGeometry, feature) {\n  const state = this.state;\n  const strokeStyle = state.strokeStyle;\n  const lineWidth = state.lineWidth;\n  if (strokeStyle === undefined || lineWidth === undefined) {\n    return;\n  }\n  this.updateStrokeStyle(state, this.applyStroke);\n  this.beginGeometry(lineStringGeometry, feature);\n  this.hitDetectionInstructions.push([\n    CanvasInstruction.SET_STROKE_STYLE,\n    state.strokeStyle, state.lineWidth, state.lineCap, state.lineJoin,\n    state.miterLimit, state.lineDash, state.lineDashOffset\n  ], beginPathInstruction);\n  const flatCoordinates = lineStringGeometry.getFlatCoordinates();\n  const stride = lineStringGeometry.getStride();\n  this.drawFlatCoordinates_(flatCoordinates, 0, flatCoordinates.length, stride);\n  this.hitDetectionInstructions.push(strokeInstruction);\n  this.endGeometry(lineStringGeometry, feature);\n};\n\n\n/**\n * @inheritDoc\n */\nCanvasLineStringReplay.prototype.drawMultiLineString = function(multiLineStringGeometry, feature) {\n  const state = this.state;\n  const strokeStyle = state.strokeStyle;\n  const lineWidth = state.lineWidth;\n  if (strokeStyle === undefined || lineWidth === undefined) {\n    return;\n  }\n  this.updateStrokeStyle(state, this.applyStroke);\n  this.beginGeometry(multiLineStringGeometry, feature);\n  this.hitDetectionInstructions.push([\n    CanvasInstruction.SET_STROKE_STYLE,\n    state.strokeStyle, state.lineWidth, state.lineCap, state.lineJoin,\n    state.miterLimit, state.lineDash, state.lineDashOffset\n  ], beginPathInstruction);\n  const ends = multiLineStringGeometry.getEnds();\n  const flatCoordinates = multiLineStringGeometry.getFlatCoordinates();\n  const stride = multiLineStringGeometry.getStride();\n  let offset = 0;\n  for (let i = 0, ii = ends.length; i < ii; ++i) {\n    offset = this.drawFlatCoordinates_(flatCoordinates, offset, ends[i], stride);\n  }\n  this.hitDetectionInstructions.push(strokeInstruction);\n  this.endGeometry(multiLineStringGeometry, feature);\n};\n\n\n/**\n * @inheritDoc\n */\nCanvasLineStringReplay.prototype.finish = function() {\n  const state = this.state;\n  if (state.lastStroke != undefined && state.lastStroke != this.coordinates.length) {\n    this.instructions.push(strokeInstruction);\n  }\n  this.reverseHitDetectionInstructions();\n  this.state = null;\n};\n\n\n/**\n * @inheritDoc.\n */\nCanvasLineStringReplay.prototype.applyStroke = function(state) {\n  if (state.lastStroke != undefined && state.lastStroke != this.coordinates.length) {\n    this.instructions.push(strokeInstruction);\n    state.lastStroke = this.coordinates.length;\n  }\n  state.lastStroke = 0;\n  CanvasReplay.prototype.applyStroke.call(this, state);\n  this.instructions.push(beginPathInstruction);\n};\nexport default CanvasLineStringReplay;\n","/**\n * @module ol/render/canvas/PolygonReplay\n */\nimport {inherits} from '../../util.js';\nimport {asString} from '../../color.js';\nimport {snap} from '../../geom/flat/simplify.js';\nimport {defaultFillStyle} from '../canvas.js';\nimport CanvasInstruction, {\n  fillInstruction, strokeInstruction, beginPathInstruction, closePathInstruction\n} from '../canvas/Instruction.js';\nimport CanvasReplay from '../canvas/Replay.js';\n\n\n/**\n * @constructor\n * @extends {module:ol/render/canvas/Replay}\n * @param {number} tolerance Tolerance.\n * @param {module:ol/extent~Extent} maxExtent Maximum extent.\n * @param {number} resolution Resolution.\n * @param {number} pixelRatio Pixel ratio.\n * @param {boolean} overlaps The replay can have overlapping geometries.\n * @param {?} declutterTree Declutter tree.\n * @struct\n */\nconst CanvasPolygonReplay = function(\n  tolerance, maxExtent, resolution, pixelRatio, overlaps, declutterTree) {\n  CanvasReplay.call(this,\n    tolerance, maxExtent, resolution, pixelRatio, overlaps, declutterTree);\n};\n\ninherits(CanvasPolygonReplay, CanvasReplay);\n\n\n/**\n * @param {Array.<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {Array.<number>} ends Ends.\n * @param {number} stride Stride.\n * @private\n * @return {number} End.\n */\nCanvasPolygonReplay.prototype.drawFlatCoordinatess_ = function(flatCoordinates, offset, ends, stride) {\n  const state = this.state;\n  const fill = state.fillStyle !== undefined;\n  const stroke = state.strokeStyle != undefined;\n  const numEnds = ends.length;\n  this.instructions.push(beginPathInstruction);\n  this.hitDetectionInstructions.push(beginPathInstruction);\n  for (let i = 0; i < numEnds; ++i) {\n    const end = ends[i];\n    const myBegin = this.coordinates.length;\n    const myEnd = this.appendFlatCoordinates(flatCoordinates, offset, end, stride, true, !stroke);\n    const moveToLineToInstruction = [CanvasInstruction.MOVE_TO_LINE_TO, myBegin, myEnd];\n    this.instructions.push(moveToLineToInstruction);\n    this.hitDetectionInstructions.push(moveToLineToInstruction);\n    if (stroke) {\n      // Performance optimization: only call closePath() when we have a stroke.\n      // Otherwise the ring is closed already (see appendFlatCoordinates above).\n      this.instructions.push(closePathInstruction);\n      this.hitDetectionInstructions.push(closePathInstruction);\n    }\n    offset = end;\n  }\n  if (fill) {\n    this.instructions.push(fillInstruction);\n    this.hitDetectionInstructions.push(fillInstruction);\n  }\n  if (stroke) {\n    this.instructions.push(strokeInstruction);\n    this.hitDetectionInstructions.push(strokeInstruction);\n  }\n  return offset;\n};\n\n\n/**\n * @inheritDoc\n */\nCanvasPolygonReplay.prototype.drawCircle = function(circleGeometry, feature) {\n  const state = this.state;\n  const fillStyle = state.fillStyle;\n  const strokeStyle = state.strokeStyle;\n  if (fillStyle === undefined && strokeStyle === undefined) {\n    return;\n  }\n  this.setFillStrokeStyles_(circleGeometry);\n  this.beginGeometry(circleGeometry, feature);\n  if (state.fillStyle !== undefined) {\n    this.hitDetectionInstructions.push([\n      CanvasInstruction.SET_FILL_STYLE,\n      asString(defaultFillStyle)\n    ]);\n  }\n  if (state.strokeStyle !== undefined) {\n    this.hitDetectionInstructions.push([\n      CanvasInstruction.SET_STROKE_STYLE,\n      state.strokeStyle, state.lineWidth, state.lineCap, state.lineJoin,\n      state.miterLimit, state.lineDash, state.lineDashOffset\n    ]);\n  }\n  const flatCoordinates = circleGeometry.getFlatCoordinates();\n  const stride = circleGeometry.getStride();\n  const myBegin = this.coordinates.length;\n  this.appendFlatCoordinates(\n    flatCoordinates, 0, flatCoordinates.length, stride, false, false);\n  const circleInstruction = [CanvasInstruction.CIRCLE, myBegin];\n  this.instructions.push(beginPathInstruction, circleInstruction);\n  this.hitDetectionInstructions.push(beginPathInstruction, circleInstruction);\n  this.hitDetectionInstructions.push(fillInstruction);\n  if (state.fillStyle !== undefined) {\n    this.instructions.push(fillInstruction);\n  }\n  if (state.strokeStyle !== undefined) {\n    this.instructions.push(strokeInstruction);\n    this.hitDetectionInstructions.push(strokeInstruction);\n  }\n  this.endGeometry(circleGeometry, feature);\n};\n\n\n/**\n * @inheritDoc\n */\nCanvasPolygonReplay.prototype.drawPolygon = function(polygonGeometry, feature) {\n  const state = this.state;\n  const fillStyle = state.fillStyle;\n  const strokeStyle = state.strokeStyle;\n  if (fillStyle === undefined && strokeStyle === undefined) {\n    return;\n  }\n  this.setFillStrokeStyles_(polygonGeometry);\n  this.beginGeometry(polygonGeometry, feature);\n  if (state.fillStyle !== undefined) {\n    this.hitDetectionInstructions.push([\n      CanvasInstruction.SET_FILL_STYLE,\n      asString(defaultFillStyle)\n    ]);\n  }\n  if (state.strokeStyle !== undefined) {\n    this.hitDetectionInstructions.push([\n      CanvasInstruction.SET_STROKE_STYLE,\n      state.strokeStyle, state.lineWidth, state.lineCap, state.lineJoin,\n      state.miterLimit, state.lineDash, state.lineDashOffset\n    ]);\n  }\n  const ends = polygonGeometry.getEnds();\n  const flatCoordinates = polygonGeometry.getOrientedFlatCoordinates();\n  const stride = polygonGeometry.getStride();\n  this.drawFlatCoordinatess_(flatCoordinates, 0, ends, stride);\n  this.endGeometry(polygonGeometry, feature);\n};\n\n\n/**\n * @inheritDoc\n */\nCanvasPolygonReplay.prototype.drawMultiPolygon = function(multiPolygonGeometry, feature) {\n  const state = this.state;\n  const fillStyle = state.fillStyle;\n  const strokeStyle = state.strokeStyle;\n  if (fillStyle === undefined && strokeStyle === undefined) {\n    return;\n  }\n  this.setFillStrokeStyles_(multiPolygonGeometry);\n  this.beginGeometry(multiPolygonGeometry, feature);\n  if (state.fillStyle !== undefined) {\n    this.hitDetectionInstructions.push([\n      CanvasInstruction.SET_FILL_STYLE,\n      asString(defaultFillStyle)\n    ]);\n  }\n  if (state.strokeStyle !== undefined) {\n    this.hitDetectionInstructions.push([\n      CanvasInstruction.SET_STROKE_STYLE,\n      state.strokeStyle, state.lineWidth, state.lineCap, state.lineJoin,\n      state.miterLimit, state.lineDash, state.lineDashOffset\n    ]);\n  }\n  const endss = multiPolygonGeometry.getEndss();\n  const flatCoordinates = multiPolygonGeometry.getOrientedFlatCoordinates();\n  const stride = multiPolygonGeometry.getStride();\n  let offset = 0;\n  for (let i = 0, ii = endss.length; i < ii; ++i) {\n    offset = this.drawFlatCoordinatess_(flatCoordinates, offset, endss[i], stride);\n  }\n  this.endGeometry(multiPolygonGeometry, feature);\n};\n\n\n/**\n * @inheritDoc\n */\nCanvasPolygonReplay.prototype.finish = function() {\n  this.reverseHitDetectionInstructions();\n  this.state = null;\n  // We want to preserve topology when drawing polygons.  Polygons are\n  // simplified using quantization and point elimination. However, we might\n  // have received a mix of quantized and non-quantized geometries, so ensure\n  // that all are quantized by quantizing all coordinates in the batch.\n  const tolerance = this.tolerance;\n  if (tolerance !== 0) {\n    const coordinates = this.coordinates;\n    for (let i = 0, ii = coordinates.length; i < ii; ++i) {\n      coordinates[i] = snap(coordinates[i], tolerance);\n    }\n  }\n};\n\n\n/**\n * @private\n * @param {module:ol/geom/Geometry|module:ol/render/Feature} geometry Geometry.\n */\nCanvasPolygonReplay.prototype.setFillStrokeStyles_ = function(geometry) {\n  const state = this.state;\n  const fillStyle = state.fillStyle;\n  if (fillStyle !== undefined) {\n    this.updateFillStyle(state, this.createFill, geometry);\n  }\n  if (state.strokeStyle !== undefined) {\n    this.updateStrokeStyle(state, this.applyStroke);\n  }\n};\nexport default CanvasPolygonReplay;\n","/**\n * @module ol/geom/flat/straightchunk\n */\n\n\n/**\n * @param {number} maxAngle Maximum acceptable angle delta between segments.\n * @param {Array.<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {number} end End.\n * @param {number} stride Stride.\n * @return {Array.<number>} Start and end of the first suitable chunk of the\n * given `flatCoordinates`.\n */\nexport function matchingChunk(maxAngle, flatCoordinates, offset, end, stride) {\n  let chunkStart = offset;\n  let chunkEnd = offset;\n  let chunkM = 0;\n  let m = 0;\n  let start = offset;\n  let acos, i, m12, m23, x1, y1, x12, y12, x23, y23;\n  for (i = offset; i < end; i += stride) {\n    const x2 = flatCoordinates[i];\n    const y2 = flatCoordinates[i + 1];\n    if (x1 !== undefined) {\n      x23 = x2 - x1;\n      y23 = y2 - y1;\n      m23 = Math.sqrt(x23 * x23 + y23 * y23);\n      if (x12 !== undefined) {\n        m += m12;\n        acos = Math.acos((x12 * x23 + y12 * y23) / (m12 * m23));\n        if (acos > maxAngle) {\n          if (m > chunkM) {\n            chunkM = m;\n            chunkStart = start;\n            chunkEnd = i;\n          }\n          m = 0;\n          start = i - stride;\n        }\n      }\n      m12 = m23;\n      x12 = x23;\n      y12 = y23;\n    }\n    x1 = x2;\n    y1 = y2;\n  }\n  m += m23;\n  return m > chunkM ? [start, i] : [chunkStart, chunkEnd];\n}\n","/**\n * @module ol/render/canvas/TextReplay\n */\nimport {getUid, inherits} from '../../util.js';\nimport {asColorLike} from '../../colorlike.js';\nimport {createCanvasContext2D} from '../../dom.js';\nimport {intersects} from '../../extent.js';\nimport {matchingChunk} from '../../geom/flat/straightchunk.js';\nimport GeometryType from '../../geom/GeometryType.js';\nimport {CANVAS_LINE_DASH} from '../../has.js';\nimport {labelCache, measureTextWidth, defaultTextAlign, measureTextHeight, defaultPadding, defaultLineCap, defaultLineDashOffset, defaultLineDash, defaultLineJoin, defaultFillStyle, checkFont, defaultFont, defaultLineWidth, defaultMiterLimit, defaultStrokeStyle, defaultTextBaseline} from '../canvas.js';\nimport CanvasInstruction from '../canvas/Instruction.js';\nimport CanvasReplay from '../canvas/Replay.js';\nimport {TEXT_ALIGN} from '../replay.js';\nimport TextPlacement from '../../style/TextPlacement.js';\n\n/**\n * @constructor\n * @extends {module:ol/render/canvas/Replay}\n * @param {number} tolerance Tolerance.\n * @param {module:ol/extent~Extent} maxExtent Maximum extent.\n * @param {number} resolution Resolution.\n * @param {number} pixelRatio Pixel ratio.\n * @param {boolean} overlaps The replay can have overlapping geometries.\n * @param {?} declutterTree Declutter tree.\n * @struct\n */\nconst CanvasTextReplay = function(\n  tolerance, maxExtent, resolution, pixelRatio, overlaps, declutterTree) {\n  CanvasReplay.call(this,\n    tolerance, maxExtent, resolution, pixelRatio, overlaps, declutterTree);\n\n  /**\n   * @private\n   * @type {module:ol/render/canvas~DeclutterGroup}\n   */\n  this.declutterGroup_;\n\n  /**\n   * @private\n   * @type {Array.<HTMLCanvasElement>}\n   */\n  this.labels_ = null;\n\n  /**\n   * @private\n   * @type {string}\n   */\n  this.text_ = '';\n\n  /**\n   * @private\n   * @type {number}\n   */\n  this.textOffsetX_ = 0;\n\n  /**\n   * @private\n   * @type {number}\n   */\n  this.textOffsetY_ = 0;\n\n  /**\n   * @private\n   * @type {boolean|undefined}\n   */\n  this.textRotateWithView_ = undefined;\n\n  /**\n   * @private\n   * @type {number}\n   */\n  this.textRotation_ = 0;\n\n  /**\n   * @private\n   * @type {?module:ol/render/canvas~FillState}\n   */\n  this.textFillState_ = null;\n\n  /**\n   * @type {!Object.<string, module:ol/render/canvas~FillState>}\n   */\n  this.fillStates = {};\n\n  /**\n   * @private\n   * @type {?module:ol/render/canvas~StrokeState}\n   */\n  this.textStrokeState_ = null;\n\n  /**\n   * @type {!Object.<string, module:ol/render/canvas~StrokeState>}\n   */\n  this.strokeStates = {};\n\n  /**\n   * @private\n   * @type {module:ol/render/canvas~TextState}\n   */\n  this.textState_ = /** @type {module:ol/render/canvas~TextState} */ ({});\n\n  /**\n   * @type {!Object.<string, module:ol/render/canvas~TextState>}\n   */\n  this.textStates = {};\n\n  /**\n   * @private\n   * @type {string}\n   */\n  this.textKey_ = '';\n\n  /**\n   * @private\n   * @type {string}\n   */\n  this.fillKey_ = '';\n\n  /**\n   * @private\n   * @type {string}\n   */\n  this.strokeKey_ = '';\n\n  /**\n   * @private\n   * @type {Object.<string, Object.<string, number>>}\n   */\n  this.widths_ = {};\n\n  labelCache.prune();\n\n};\n\ninherits(CanvasTextReplay, CanvasReplay);\n\n\n/**\n * @param {string} font Font to use for measuring.\n * @param {Array.<string>} lines Lines to measure.\n * @param {Array.<number>} widths Array will be populated with the widths of\n * each line.\n * @return {number} Width of the whole text.\n */\nexport function measureTextWidths(font, lines, widths) {\n  const numLines = lines.length;\n  let width = 0;\n  for (let i = 0; i < numLines; ++i) {\n    const currentWidth = measureTextWidth(font, lines[i]);\n    width = Math.max(width, currentWidth);\n    widths.push(currentWidth);\n  }\n  return width;\n}\n\n\n/**\n * @inheritDoc\n */\nCanvasTextReplay.prototype.drawText = function(geometry, feature) {\n  const fillState = this.textFillState_;\n  const strokeState = this.textStrokeState_;\n  const textState = this.textState_;\n  if (this.text_ === '' || !textState || (!fillState && !strokeState)) {\n    return;\n  }\n\n  let begin = this.coordinates.length;\n\n  const geometryType = geometry.getType();\n  let flatCoordinates = null;\n  let end = 2;\n  let stride = 2;\n  let i, ii;\n\n  if (textState.placement === TextPlacement.LINE) {\n    if (!intersects(this.getBufferedMaxExtent(), geometry.getExtent())) {\n      return;\n    }\n    let ends;\n    flatCoordinates = geometry.getFlatCoordinates();\n    stride = geometry.getStride();\n    if (geometryType == GeometryType.LINE_STRING) {\n      ends = [flatCoordinates.length];\n    } else if (geometryType == GeometryType.MULTI_LINE_STRING) {\n      ends = geometry.getEnds();\n    } else if (geometryType == GeometryType.POLYGON) {\n      ends = geometry.getEnds().slice(0, 1);\n    } else if (geometryType == GeometryType.MULTI_POLYGON) {\n      const endss = geometry.getEndss();\n      ends = [];\n      for (i = 0, ii = endss.length; i < ii; ++i) {\n        ends.push(endss[i][0]);\n      }\n    }\n    this.beginGeometry(geometry, feature);\n    const textAlign = textState.textAlign;\n    let flatOffset = 0;\n    let flatEnd;\n    for (let o = 0, oo = ends.length; o < oo; ++o) {\n      if (textAlign == undefined) {\n        const range = matchingChunk(textState.maxAngle, flatCoordinates, flatOffset, ends[o], stride);\n        flatOffset = range[0];\n        flatEnd = range[1];\n      } else {\n        flatEnd = ends[o];\n      }\n      for (i = flatOffset; i < flatEnd; i += stride) {\n        this.coordinates.push(flatCoordinates[i], flatCoordinates[i + 1]);\n      }\n      end = this.coordinates.length;\n      flatOffset = ends[o];\n      this.drawChars_(begin, end, this.declutterGroup_);\n      begin = end;\n    }\n    this.endGeometry(geometry, feature);\n\n  } else {\n    const label = this.getImage(this.text_, this.textKey_, this.fillKey_, this.strokeKey_);\n    const width = label.width / this.pixelRatio;\n    switch (geometryType) {\n      case GeometryType.POINT:\n      case GeometryType.MULTI_POINT:\n        flatCoordinates = geometry.getFlatCoordinates();\n        end = flatCoordinates.length;\n        break;\n      case GeometryType.LINE_STRING:\n        flatCoordinates = /** @type {module:ol/geom/LineString} */ (geometry).getFlatMidpoint();\n        break;\n      case GeometryType.CIRCLE:\n        flatCoordinates = /** @type {module:ol/geom/Circle} */ (geometry).getCenter();\n        break;\n      case GeometryType.MULTI_LINE_STRING:\n        flatCoordinates = /** @type {module:ol/geom/MultiLineString} */ (geometry).getFlatMidpoints();\n        end = flatCoordinates.length;\n        break;\n      case GeometryType.POLYGON:\n        flatCoordinates = /** @type {module:ol/geom/Polygon} */ (geometry).getFlatInteriorPoint();\n        if (!textState.overflow && flatCoordinates[2] / this.resolution < width) {\n          return;\n        }\n        stride = 3;\n        break;\n      case GeometryType.MULTI_POLYGON:\n        const interiorPoints = /** @type {module:ol/geom/MultiPolygon} */ (geometry).getFlatInteriorPoints();\n        flatCoordinates = [];\n        for (i = 0, ii = interiorPoints.length; i < ii; i += 3) {\n          if (textState.overflow || interiorPoints[i + 2] / this.resolution >= width) {\n            flatCoordinates.push(interiorPoints[i], interiorPoints[i + 1]);\n          }\n        }\n        end = flatCoordinates.length;\n        if (end == 0) {\n          return;\n        }\n        break;\n      default:\n    }\n    end = this.appendFlatCoordinates(flatCoordinates, 0, end, stride, false, false);\n    if (textState.backgroundFill || textState.backgroundStroke) {\n      this.setFillStrokeStyle(textState.backgroundFill, textState.backgroundStroke);\n      if (textState.backgroundFill) {\n        this.updateFillStyle(this.state, this.createFill, geometry);\n        this.hitDetectionInstructions.push(this.createFill(this.state, geometry));\n      }\n      if (textState.backgroundStroke) {\n        this.updateStrokeStyle(this.state, this.applyStroke);\n        this.hitDetectionInstructions.push(this.createStroke(this.state));\n      }\n    }\n    this.beginGeometry(geometry, feature);\n    this.drawTextImage_(label, begin, end);\n    this.endGeometry(geometry, feature);\n  }\n};\n\n\n/**\n * @param {string} text Text.\n * @param {string} textKey Text style key.\n * @param {string} fillKey Fill style key.\n * @param {string} strokeKey Stroke style key.\n * @return {HTMLCanvasElement} Image.\n */\nCanvasTextReplay.prototype.getImage = function(text, textKey, fillKey, strokeKey) {\n  let label;\n  const key = strokeKey + textKey + text + fillKey + this.pixelRatio;\n\n  if (!labelCache.containsKey(key)) {\n    const strokeState = strokeKey ? this.strokeStates[strokeKey] || this.textStrokeState_ : null;\n    const fillState = fillKey ? this.fillStates[fillKey] || this.textFillState_ : null;\n    const textState = this.textStates[textKey] || this.textState_;\n    const pixelRatio = this.pixelRatio;\n    const scale = textState.scale * pixelRatio;\n    const align =  TEXT_ALIGN[textState.textAlign || defaultTextAlign];\n    const strokeWidth = strokeKey && strokeState.lineWidth ? strokeState.lineWidth : 0;\n\n    const lines = text.split('\\n');\n    const numLines = lines.length;\n    const widths = [];\n    const width = measureTextWidths(textState.font, lines, widths);\n    const lineHeight = measureTextHeight(textState.font);\n    const height = lineHeight * numLines;\n    const renderWidth = (width + strokeWidth);\n    const context = createCanvasContext2D(\n      Math.ceil(renderWidth * scale),\n      Math.ceil((height + strokeWidth) * scale));\n    label = context.canvas;\n    labelCache.set(key, label);\n    if (scale != 1) {\n      context.scale(scale, scale);\n    }\n    context.font = textState.font;\n    if (strokeKey) {\n      context.strokeStyle = strokeState.strokeStyle;\n      context.lineWidth = strokeWidth;\n      context.lineCap = strokeState.lineCap;\n      context.lineJoin = strokeState.lineJoin;\n      context.miterLimit = strokeState.miterLimit;\n      if (CANVAS_LINE_DASH && strokeState.lineDash.length) {\n        context.setLineDash(strokeState.lineDash);\n        context.lineDashOffset = strokeState.lineDashOffset;\n      }\n    }\n    if (fillKey) {\n      context.fillStyle = fillState.fillStyle;\n    }\n    context.textBaseline = 'middle';\n    context.textAlign = 'center';\n    const leftRight = (0.5 - align);\n    const x = align * label.width / scale + leftRight * strokeWidth;\n    let i;\n    if (strokeKey) {\n      for (i = 0; i < numLines; ++i) {\n        context.strokeText(lines[i], x + leftRight * widths[i], 0.5 * (strokeWidth + lineHeight) + i * lineHeight);\n      }\n    }\n    if (fillKey) {\n      for (i = 0; i < numLines; ++i) {\n        context.fillText(lines[i], x + leftRight * widths[i], 0.5 * (strokeWidth + lineHeight) + i * lineHeight);\n      }\n    }\n  }\n  return labelCache.get(key);\n};\n\n\n/**\n * @private\n * @param {HTMLCanvasElement} label Label.\n * @param {number} begin Begin.\n * @param {number} end End.\n */\nCanvasTextReplay.prototype.drawTextImage_ = function(label, begin, end) {\n  const textState = this.textState_;\n  const strokeState = this.textStrokeState_;\n  const pixelRatio = this.pixelRatio;\n  const align = TEXT_ALIGN[textState.textAlign || defaultTextAlign];\n  const baseline = TEXT_ALIGN[textState.textBaseline];\n  const strokeWidth = strokeState && strokeState.lineWidth ? strokeState.lineWidth : 0;\n\n  const anchorX = align * label.width / pixelRatio + 2 * (0.5 - align) * strokeWidth;\n  const anchorY = baseline * label.height / pixelRatio + 2 * (0.5 - baseline) * strokeWidth;\n  this.instructions.push([CanvasInstruction.DRAW_IMAGE, begin, end,\n    label, (anchorX - this.textOffsetX_) * pixelRatio, (anchorY - this.textOffsetY_) * pixelRatio,\n    this.declutterGroup_, label.height, 1, 0, 0, this.textRotateWithView_, this.textRotation_,\n    1, true, label.width,\n    textState.padding == defaultPadding ?\n      defaultPadding : textState.padding.map(function(p) {\n        return p * pixelRatio;\n      }),\n    !!textState.backgroundFill, !!textState.backgroundStroke\n  ]);\n  this.hitDetectionInstructions.push([CanvasInstruction.DRAW_IMAGE, begin, end,\n    label, (anchorX - this.textOffsetX_) * pixelRatio, (anchorY - this.textOffsetY_) * pixelRatio,\n    this.declutterGroup_, label.height, 1, 0, 0, this.textRotateWithView_, this.textRotation_,\n    1 / pixelRatio, true, label.width, textState.padding,\n    !!textState.backgroundFill, !!textState.backgroundStroke\n  ]);\n};\n\n\n/**\n * @private\n * @param {number} begin Begin.\n * @param {number} end End.\n * @param {module:ol/render/canvas~DeclutterGroup} declutterGroup Declutter group.\n */\nCanvasTextReplay.prototype.drawChars_ = function(begin, end, declutterGroup) {\n  const strokeState = this.textStrokeState_;\n  const textState = this.textState_;\n  const fillState = this.textFillState_;\n\n  const strokeKey = this.strokeKey_;\n  if (strokeState) {\n    if (!(strokeKey in this.strokeStates)) {\n      this.strokeStates[strokeKey] = /** @type {module:ol/render/canvas~StrokeState} */ ({\n        strokeStyle: strokeState.strokeStyle,\n        lineCap: strokeState.lineCap,\n        lineDashOffset: strokeState.lineDashOffset,\n        lineWidth: strokeState.lineWidth,\n        lineJoin: strokeState.lineJoin,\n        miterLimit: strokeState.miterLimit,\n        lineDash: strokeState.lineDash\n      });\n    }\n  }\n  const textKey = this.textKey_;\n  if (!(this.textKey_ in this.textStates)) {\n    this.textStates[this.textKey_] = /** @type {module:ol/render/canvas~TextState} */ ({\n      font: textState.font,\n      textAlign: textState.textAlign || defaultTextAlign,\n      scale: textState.scale\n    });\n  }\n  const fillKey = this.fillKey_;\n  if (fillState) {\n    if (!(fillKey in this.fillStates)) {\n      this.fillStates[fillKey] = /** @type {module:ol/render/canvas~FillState} */ ({\n        fillStyle: fillState.fillStyle\n      });\n    }\n  }\n\n  const pixelRatio = this.pixelRatio;\n  const baseline = TEXT_ALIGN[textState.textBaseline];\n\n  const offsetY = this.textOffsetY_ * pixelRatio;\n  const text = this.text_;\n  const font = textState.font;\n  const textScale = textState.scale;\n  const strokeWidth = strokeState ? strokeState.lineWidth * textScale / 2 : 0;\n  let widths = this.widths_[font];\n  if (!widths) {\n    this.widths_[font] = widths = {};\n  }\n  this.instructions.push([CanvasInstruction.DRAW_CHARS,\n    begin, end, baseline, declutterGroup,\n    textState.overflow, fillKey, textState.maxAngle,\n    function(text) {\n      let width = widths[text];\n      if (!width) {\n        width = widths[text] = measureTextWidth(font, text);\n      }\n      return width * textScale * pixelRatio;\n    },\n    offsetY, strokeKey, strokeWidth * pixelRatio, text, textKey, 1\n  ]);\n  this.hitDetectionInstructions.push([CanvasInstruction.DRAW_CHARS,\n    begin, end, baseline, declutterGroup,\n    textState.overflow, fillKey, textState.maxAngle,\n    function(text) {\n      let width = widths[text];\n      if (!width) {\n        width = widths[text] = measureTextWidth(font, text);\n      }\n      return width * textScale;\n    },\n    offsetY, strokeKey, strokeWidth, text, textKey, 1 / pixelRatio\n  ]);\n};\n\n\n/**\n * @inheritDoc\n */\nCanvasTextReplay.prototype.setTextStyle = function(textStyle, declutterGroup) {\n  let textState, fillState, strokeState;\n  if (!textStyle) {\n    this.text_ = '';\n  } else {\n    this.declutterGroup_ = /** @type {module:ol/render/canvas~DeclutterGroup} */ (declutterGroup);\n\n    const textFillStyle = textStyle.getFill();\n    if (!textFillStyle) {\n      fillState = this.textFillState_ = null;\n    } else {\n      fillState = this.textFillState_;\n      if (!fillState) {\n        fillState = this.textFillState_ = /** @type {module:ol/render/canvas~FillState} */ ({});\n      }\n      fillState.fillStyle = asColorLike(\n        textFillStyle.getColor() || defaultFillStyle);\n    }\n\n    const textStrokeStyle = textStyle.getStroke();\n    if (!textStrokeStyle) {\n      strokeState = this.textStrokeState_ = null;\n    } else {\n      strokeState = this.textStrokeState_;\n      if (!strokeState) {\n        strokeState = this.textStrokeState_ = /** @type {module:ol/render/canvas~StrokeState} */ ({});\n      }\n      const lineDash = textStrokeStyle.getLineDash();\n      const lineDashOffset = textStrokeStyle.getLineDashOffset();\n      const lineWidth = textStrokeStyle.getWidth();\n      const miterLimit = textStrokeStyle.getMiterLimit();\n      strokeState.lineCap = textStrokeStyle.getLineCap() || defaultLineCap;\n      strokeState.lineDash = lineDash ? lineDash.slice() : defaultLineDash;\n      strokeState.lineDashOffset =\n          lineDashOffset === undefined ? defaultLineDashOffset : lineDashOffset;\n      strokeState.lineJoin = textStrokeStyle.getLineJoin() || defaultLineJoin;\n      strokeState.lineWidth =\n          lineWidth === undefined ? defaultLineWidth : lineWidth;\n      strokeState.miterLimit =\n          miterLimit === undefined ? defaultMiterLimit : miterLimit;\n      strokeState.strokeStyle = asColorLike(\n        textStrokeStyle.getColor() || defaultStrokeStyle);\n    }\n\n    textState = this.textState_;\n    const font = textStyle.getFont() || defaultFont;\n    checkFont(font);\n    const textScale = textStyle.getScale();\n    textState.overflow = textStyle.getOverflow();\n    textState.font = font;\n    textState.maxAngle = textStyle.getMaxAngle();\n    textState.placement = textStyle.getPlacement();\n    textState.textAlign = textStyle.getTextAlign();\n    textState.textBaseline = textStyle.getTextBaseline() || defaultTextBaseline;\n    textState.backgroundFill = textStyle.getBackgroundFill();\n    textState.backgroundStroke = textStyle.getBackgroundStroke();\n    textState.padding = textStyle.getPadding() || defaultPadding;\n    textState.scale = textScale === undefined ? 1 : textScale;\n\n    const textOffsetX = textStyle.getOffsetX();\n    const textOffsetY = textStyle.getOffsetY();\n    const textRotateWithView = textStyle.getRotateWithView();\n    const textRotation = textStyle.getRotation();\n    this.text_ = textStyle.getText() || '';\n    this.textOffsetX_ = textOffsetX === undefined ? 0 : textOffsetX;\n    this.textOffsetY_ = textOffsetY === undefined ? 0 : textOffsetY;\n    this.textRotateWithView_ = textRotateWithView === undefined ? false : textRotateWithView;\n    this.textRotation_ = textRotation === undefined ? 0 : textRotation;\n\n    this.strokeKey_ = strokeState ?\n      (typeof strokeState.strokeStyle == 'string' ? strokeState.strokeStyle : getUid(strokeState.strokeStyle)) +\n      strokeState.lineCap + strokeState.lineDashOffset + '|' + strokeState.lineWidth +\n      strokeState.lineJoin + strokeState.miterLimit + '[' + strokeState.lineDash.join() + ']' :\n      '';\n    this.textKey_ = textState.font + textState.scale + (textState.textAlign || '?');\n    this.fillKey_ = fillState ?\n      (typeof fillState.fillStyle == 'string' ? fillState.fillStyle : ('|' + getUid(fillState.fillStyle))) :\n      '';\n  }\n};\nexport default CanvasTextReplay;\n","/**\n * @module ol/render/canvas/ReplayGroup\n */\nimport {inherits} from '../../util.js';\nimport {numberSafeCompareFunction} from '../../array.js';\nimport {createCanvasContext2D} from '../../dom.js';\nimport {buffer, createEmpty, extendCoordinate} from '../../extent.js';\nimport {transform2D} from '../../geom/flat/transform.js';\nimport {isEmpty} from '../../obj.js';\nimport ReplayGroup from '../ReplayGroup.js';\nimport ReplayType from '../ReplayType.js';\nimport CanvasReplay from '../canvas/Replay.js';\nimport CanvasImageReplay from '../canvas/ImageReplay.js';\nimport CanvasLineStringReplay from '../canvas/LineStringReplay.js';\nimport CanvasPolygonReplay from '../canvas/PolygonReplay.js';\nimport CanvasTextReplay from '../canvas/TextReplay.js';\nimport {ORDER} from '../replay.js';\nimport {create as createTransform, compose as composeTransform} from '../../transform.js';\n\n\n/**\n * @type {Object.<module:ol/render/ReplayType,\n *                function(new: module:ol/render/canvas/Replay, number, module:ol/extent~Extent,\n *                number, number, boolean, Array.<module:ol/render/canvas~DeclutterGroup>)>}\n */\nconst BATCH_CONSTRUCTORS = {\n  'Circle': CanvasPolygonReplay,\n  'Default': CanvasReplay,\n  'Image': CanvasImageReplay,\n  'LineString': CanvasLineStringReplay,\n  'Polygon': CanvasPolygonReplay,\n  'Text': CanvasTextReplay\n};\n\n\n/**\n * @constructor\n * @extends {module:ol/render/ReplayGroup}\n * @param {number} tolerance Tolerance.\n * @param {module:ol/extent~Extent} maxExtent Max extent.\n * @param {number} resolution Resolution.\n * @param {number} pixelRatio Pixel ratio.\n * @param {boolean} overlaps The replay group can have overlapping geometries.\n * @param {?} declutterTree Declutter tree\n * for declutter processing in postrender.\n * @param {number=} opt_renderBuffer Optional rendering buffer.\n * @struct\n */\nconst CanvasReplayGroup = function(\n  tolerance, maxExtent, resolution, pixelRatio, overlaps, declutterTree, opt_renderBuffer) {\n  ReplayGroup.call(this);\n\n  /**\n   * Declutter tree.\n   * @private\n   */\n  this.declutterTree_ = declutterTree;\n\n  /**\n   * @type {module:ol/render/canvas~DeclutterGroup}\n   * @private\n   */\n  this.declutterGroup_ = null;\n\n  /**\n   * @private\n   * @type {number}\n   */\n  this.tolerance_ = tolerance;\n\n  /**\n   * @private\n   * @type {module:ol/extent~Extent}\n   */\n  this.maxExtent_ = maxExtent;\n\n  /**\n   * @private\n   * @type {boolean}\n   */\n  this.overlaps_ = overlaps;\n\n  /**\n   * @private\n   * @type {number}\n   */\n  this.pixelRatio_ = pixelRatio;\n\n  /**\n   * @private\n   * @type {number}\n   */\n  this.resolution_ = resolution;\n\n  /**\n   * @private\n   * @type {number|undefined}\n   */\n  this.renderBuffer_ = opt_renderBuffer;\n\n  /**\n   * @private\n   * @type {!Object.<string, !Object.<module:ol/render/ReplayType, module:ol/render/canvas/Replay>>}\n   */\n  this.replaysByZIndex_ = {};\n\n  /**\n   * @private\n   * @type {CanvasRenderingContext2D}\n   */\n  this.hitDetectionContext_ = createCanvasContext2D(1, 1);\n\n  /**\n   * @private\n   * @type {module:ol/transform~Transform}\n   */\n  this.hitDetectionTransform_ = createTransform();\n};\n\ninherits(CanvasReplayGroup, ReplayGroup);\n\n\n/**\n * This cache is used for storing calculated pixel circles for increasing performance.\n * It is a static property to allow each Replaygroup to access it.\n * @type {Object.<number, Array.<Array.<(boolean|undefined)>>>}\n */\nconst circleArrayCache = {\n  0: [[true]]\n};\n\n\n/**\n * This method fills a row in the array from the given coordinate to the\n * middle with `true`.\n * @param {Array.<Array.<(boolean|undefined)>>} array The array that will be altered.\n * @param {number} x X coordinate.\n * @param {number} y Y coordinate.\n */\nfunction fillCircleArrayRowToMiddle(array, x, y) {\n  let i;\n  const radius = Math.floor(array.length / 2);\n  if (x >= radius) {\n    for (i = radius; i < x; i++) {\n      array[i][y] = true;\n    }\n  } else if (x < radius) {\n    for (i = x + 1; i < radius; i++) {\n      array[i][y] = true;\n    }\n  }\n}\n\n\n/**\n * This methods creates a circle inside a fitting array. Points inside the\n * circle are marked by true, points on the outside are undefined.\n * It uses the midpoint circle algorithm.\n * A cache is used to increase performance.\n * @param {number} radius Radius.\n * @returns {Array.<Array.<(boolean|undefined)>>} An array with marked circle points.\n */\nexport function getCircleArray(radius) {\n  if (circleArrayCache[radius] !== undefined) {\n    return circleArrayCache[radius];\n  }\n\n  const arraySize = radius * 2 + 1;\n  const arr = new Array(arraySize);\n  for (let i = 0; i < arraySize; i++) {\n    arr[i] = new Array(arraySize);\n  }\n\n  let x = radius;\n  let y = 0;\n  let error = 0;\n\n  while (x >= y) {\n    fillCircleArrayRowToMiddle(arr, radius + x, radius + y);\n    fillCircleArrayRowToMiddle(arr, radius + y, radius + x);\n    fillCircleArrayRowToMiddle(arr, radius - y, radius + x);\n    fillCircleArrayRowToMiddle(arr, radius - x, radius + y);\n    fillCircleArrayRowToMiddle(arr, radius - x, radius - y);\n    fillCircleArrayRowToMiddle(arr, radius - y, radius - x);\n    fillCircleArrayRowToMiddle(arr, radius + y, radius - x);\n    fillCircleArrayRowToMiddle(arr, radius + x, radius - y);\n\n    y++;\n    error += 1 + 2 * y;\n    if (2 * (error - x) + 1 > 0) {\n      x -= 1;\n      error += 1 - 2 * x;\n    }\n  }\n\n  circleArrayCache[radius] = arr;\n  return arr;\n}\n\n\n/**\n * @param {!Object.<string, Array.<*>>} declutterReplays Declutter replays.\n * @param {CanvasRenderingContext2D} context Context.\n * @param {number} rotation Rotation.\n */\nexport function replayDeclutter(declutterReplays, context, rotation) {\n  const zs = Object.keys(declutterReplays).map(Number).sort(numberSafeCompareFunction);\n  const skippedFeatureUids = {};\n  for (let z = 0, zz = zs.length; z < zz; ++z) {\n    const replayData = declutterReplays[zs[z].toString()];\n    for (let i = 0, ii = replayData.length; i < ii;) {\n      const replay = replayData[i++];\n      const transform = replayData[i++];\n      replay.replay(context, transform, rotation, skippedFeatureUids);\n    }\n  }\n}\n\n\n/**\n * @param {boolean} group Group with previous replay.\n * @return {module:ol/render/canvas~DeclutterGroup} Declutter instruction group.\n */\nCanvasReplayGroup.prototype.addDeclutter = function(group) {\n  let declutter = null;\n  if (this.declutterTree_) {\n    if (group) {\n      declutter = this.declutterGroup_;\n      /** @type {number} */ (declutter[4])++;\n    } else {\n      declutter = this.declutterGroup_ = createEmpty();\n      declutter.push(1);\n    }\n  }\n  return declutter;\n};\n\n\n/**\n * @param {CanvasRenderingContext2D} context Context.\n * @param {module:ol/transform~Transform} transform Transform.\n */\nCanvasReplayGroup.prototype.clip = function(context, transform) {\n  const flatClipCoords = this.getClipCoords(transform);\n  context.beginPath();\n  context.moveTo(flatClipCoords[0], flatClipCoords[1]);\n  context.lineTo(flatClipCoords[2], flatClipCoords[3]);\n  context.lineTo(flatClipCoords[4], flatClipCoords[5]);\n  context.lineTo(flatClipCoords[6], flatClipCoords[7]);\n  context.clip();\n};\n\n\n/**\n * @param {Array.<module:ol/render/ReplayType>} replays Replays.\n * @return {boolean} Has replays of the provided types.\n */\nCanvasReplayGroup.prototype.hasReplays = function(replays) {\n  for (const zIndex in this.replaysByZIndex_) {\n    const candidates = this.replaysByZIndex_[zIndex];\n    for (let i = 0, ii = replays.length; i < ii; ++i) {\n      if (replays[i] in candidates) {\n        return true;\n      }\n    }\n  }\n  return false;\n};\n\n\n/**\n * FIXME empty description for jsdoc\n */\nCanvasReplayGroup.prototype.finish = function() {\n  for (const zKey in this.replaysByZIndex_) {\n    const replays = this.replaysByZIndex_[zKey];\n    for (const replayKey in replays) {\n      replays[replayKey].finish();\n    }\n  }\n};\n\n\n/**\n * @param {module:ol/coordinate~Coordinate} coordinate Coordinate.\n * @param {number} resolution Resolution.\n * @param {number} rotation Rotation.\n * @param {number} hitTolerance Hit tolerance in pixels.\n * @param {Object.<string, boolean>} skippedFeaturesHash Ids of features to skip.\n * @param {function((module:ol/Feature|module:ol/render/Feature)): T} callback Feature callback.\n * @param {Object.<string, module:ol/render/canvas~DeclutterGroup>} declutterReplays Declutter replays.\n * @return {T|undefined} Callback result.\n * @template T\n */\nCanvasReplayGroup.prototype.forEachFeatureAtCoordinate = function(\n  coordinate, resolution, rotation, hitTolerance, skippedFeaturesHash, callback, declutterReplays) {\n\n  hitTolerance = Math.round(hitTolerance);\n  const contextSize = hitTolerance * 2 + 1;\n  const transform = composeTransform(this.hitDetectionTransform_,\n    hitTolerance + 0.5, hitTolerance + 0.5,\n    1 / resolution, -1 / resolution,\n    -rotation,\n    -coordinate[0], -coordinate[1]);\n  const context = this.hitDetectionContext_;\n\n  if (context.canvas.width !== contextSize || context.canvas.height !== contextSize) {\n    context.canvas.width = contextSize;\n    context.canvas.height = contextSize;\n  } else {\n    context.clearRect(0, 0, contextSize, contextSize);\n  }\n\n  /**\n   * @type {module:ol/extent~Extent}\n   */\n  let hitExtent;\n  if (this.renderBuffer_ !== undefined) {\n    hitExtent = createEmpty();\n    extendCoordinate(hitExtent, coordinate);\n    buffer(hitExtent, resolution * (this.renderBuffer_ + hitTolerance), hitExtent);\n  }\n\n  const mask = getCircleArray(hitTolerance);\n  let declutteredFeatures;\n  if (this.declutterTree_) {\n    declutteredFeatures = this.declutterTree_.all().map(function(entry) {\n      return entry.value;\n    });\n  }\n\n  let replayType;\n\n  /**\n   * @param {module:ol/Feature|module:ol/render/Feature} feature Feature.\n   * @return {?} Callback result.\n   */\n  function featureCallback(feature) {\n    const imageData = context.getImageData(0, 0, contextSize, contextSize).data;\n    for (let i = 0; i < contextSize; i++) {\n      for (let j = 0; j < contextSize; j++) {\n        if (mask[i][j]) {\n          if (imageData[(j * contextSize + i) * 4 + 3] > 0) {\n            let result;\n            if (!(declutteredFeatures && (replayType == ReplayType.IMAGE || replayType == ReplayType.TEXT)) ||\n                declutteredFeatures.indexOf(feature) !== -1) {\n              result = callback(feature);\n            }\n            if (result) {\n              return result;\n            } else {\n              context.clearRect(0, 0, contextSize, contextSize);\n              return undefined;\n            }\n          }\n        }\n      }\n    }\n  }\n\n  /** @type {Array.<number>} */\n  const zs = Object.keys(this.replaysByZIndex_).map(Number);\n  zs.sort(numberSafeCompareFunction);\n\n  let i, j, replays, replay, result;\n  for (i = zs.length - 1; i >= 0; --i) {\n    const zIndexKey = zs[i].toString();\n    replays = this.replaysByZIndex_[zIndexKey];\n    for (j = ORDER.length - 1; j >= 0; --j) {\n      replayType = ORDER[j];\n      replay = replays[replayType];\n      if (replay !== undefined) {\n        if (declutterReplays &&\n            (replayType == ReplayType.IMAGE || replayType == ReplayType.TEXT)) {\n          const declutter = declutterReplays[zIndexKey];\n          if (!declutter) {\n            declutterReplays[zIndexKey] = [replay, transform.slice(0)];\n          } else {\n            declutter.push(replay, transform.slice(0));\n          }\n        } else {\n          result = replay.replayHitDetection(context, transform, rotation,\n            skippedFeaturesHash, featureCallback, hitExtent);\n          if (result) {\n            return result;\n          }\n        }\n      }\n    }\n  }\n  return undefined;\n};\n\n\n/**\n * @param {module:ol/transform~Transform} transform Transform.\n * @return {Array.<number>} Clip coordinates.\n */\nCanvasReplayGroup.prototype.getClipCoords = function(transform) {\n  const maxExtent = this.maxExtent_;\n  const minX = maxExtent[0];\n  const minY = maxExtent[1];\n  const maxX = maxExtent[2];\n  const maxY = maxExtent[3];\n  const flatClipCoords = [minX, minY, minX, maxY, maxX, maxY, maxX, minY];\n  transform2D(\n    flatClipCoords, 0, 8, 2, transform, flatClipCoords);\n  return flatClipCoords;\n};\n\n\n/**\n * @inheritDoc\n */\nCanvasReplayGroup.prototype.getReplay = function(zIndex, replayType) {\n  const zIndexKey = zIndex !== undefined ? zIndex.toString() : '0';\n  let replays = this.replaysByZIndex_[zIndexKey];\n  if (replays === undefined) {\n    replays = {};\n    this.replaysByZIndex_[zIndexKey] = replays;\n  }\n  let replay = replays[replayType];\n  if (replay === undefined) {\n    const Constructor = BATCH_CONSTRUCTORS[replayType];\n    replay = new Constructor(this.tolerance_, this.maxExtent_,\n      this.resolution_, this.pixelRatio_, this.overlaps_, this.declutterTree_);\n    replays[replayType] = replay;\n  }\n  return replay;\n};\n\n\n/**\n * @return {Object.<string, Object.<module:ol/render/ReplayType, module:ol/render/canvas/Replay>>} Replays.\n */\nCanvasReplayGroup.prototype.getReplays = function() {\n  return this.replaysByZIndex_;\n};\n\n\n/**\n * @inheritDoc\n */\nCanvasReplayGroup.prototype.isEmpty = function() {\n  return isEmpty(this.replaysByZIndex_);\n};\n\n\n/**\n * @param {CanvasRenderingContext2D} context Context.\n * @param {module:ol/transform~Transform} transform Transform.\n * @param {number} viewRotation View rotation.\n * @param {Object.<string, boolean>} skippedFeaturesHash Ids of features to skip.\n * @param {Array.<module:ol/render/ReplayType>=} opt_replayTypes Ordered replay types to replay.\n *     Default is {@link module:ol/render/replay~ORDER}\n * @param {Object.<string, module:ol/render/canvas~DeclutterGroup>=} opt_declutterReplays Declutter replays.\n */\nCanvasReplayGroup.prototype.replay = function(context,\n  transform, viewRotation, skippedFeaturesHash, opt_replayTypes, opt_declutterReplays) {\n\n  /** @type {Array.<number>} */\n  const zs = Object.keys(this.replaysByZIndex_).map(Number);\n  zs.sort(numberSafeCompareFunction);\n\n  // setup clipping so that the parts of over-simplified geometries are not\n  // visible outside the current extent when panning\n  context.save();\n  this.clip(context, transform);\n\n  const replayTypes = opt_replayTypes ? opt_replayTypes : ORDER;\n  let i, ii, j, jj, replays, replay;\n  for (i = 0, ii = zs.length; i < ii; ++i) {\n    const zIndexKey = zs[i].toString();\n    replays = this.replaysByZIndex_[zIndexKey];\n    for (j = 0, jj = replayTypes.length; j < jj; ++j) {\n      const replayType = replayTypes[j];\n      replay = replays[replayType];\n      if (replay !== undefined) {\n        if (opt_declutterReplays &&\n            (replayType == ReplayType.IMAGE || replayType == ReplayType.TEXT)) {\n          const declutter = opt_declutterReplays[zIndexKey];\n          if (!declutter) {\n            opt_declutterReplays[zIndexKey] = [replay, transform.slice(0)];\n          } else {\n            declutter.push(replay, transform.slice(0));\n          }\n        } else {\n          replay.replay(context, transform, viewRotation, skippedFeaturesHash);\n        }\n      }\n    }\n  }\n\n  context.restore();\n};\n\nexport default CanvasReplayGroup;\n","/**\n * @module ol/renderer/canvas/VectorLayer\n */\nimport {getUid, inherits} from '../../util.js';\nimport LayerType from '../../LayerType.js';\nimport ViewHint from '../../ViewHint.js';\nimport {createCanvasContext2D} from '../../dom.js';\nimport {listen, unlisten} from '../../events.js';\nimport EventType from '../../events/EventType.js';\nimport rbush from 'rbush';\nimport {buffer, createEmpty, containsExtent, getWidth} from '../../extent.js';\nimport RenderEventType from '../../render/EventType.js';\nimport {labelCache, rotateAtOffset} from '../../render/canvas.js';\nimport CanvasReplayGroup from '../../render/canvas/ReplayGroup.js';\nimport CanvasLayerRenderer from '../canvas/Layer.js';\nimport {defaultOrder as defaultRenderOrder, getTolerance as getRenderTolerance, getSquaredTolerance as getSquaredRenderTolerance, renderFeature} from '../vector.js';\n\n/**\n * @constructor\n * @extends {module:ol/renderer/canvas/Layer}\n * @param {module:ol/layer/Vector} vectorLayer Vector layer.\n * @api\n */\nconst CanvasVectorLayerRenderer = function(vectorLayer) {\n\n  CanvasLayerRenderer.call(this, vectorLayer);\n\n  /**\n   * Declutter tree.\n   * @private\n   */\n  this.declutterTree_ = vectorLayer.getDeclutter() ? rbush(9, undefined) : null;\n\n  /**\n   * @private\n   * @type {boolean}\n   */\n  this.dirty_ = false;\n\n  /**\n   * @private\n   * @type {number}\n   */\n  this.renderedRevision_ = -1;\n\n  /**\n   * @private\n   * @type {number}\n   */\n  this.renderedResolution_ = NaN;\n\n  /**\n   * @private\n   * @type {module:ol/extent~Extent}\n   */\n  this.renderedExtent_ = createEmpty();\n\n  /**\n   * @private\n   * @type {function(module:ol/Feature, module:ol/Feature): number|null}\n   */\n  this.renderedRenderOrder_ = null;\n\n  /**\n   * @private\n   * @type {module:ol/render/canvas/ReplayGroup}\n   */\n  this.replayGroup_ = null;\n\n  /**\n   * A new replay group had to be created by `prepareFrame()`\n   * @type {boolean}\n   */\n  this.replayGroupChanged = true;\n\n  /**\n   * @type {CanvasRenderingContext2D}\n   */\n  this.context = createCanvasContext2D();\n\n  listen(labelCache, EventType.CLEAR, this.handleFontsChanged_, this);\n\n};\n\ninherits(CanvasVectorLayerRenderer, CanvasLayerRenderer);\n\n\n/**\n * Determine if this renderer handles the provided layer.\n * @param {module:ol/layer/Layer} layer The candidate layer.\n * @return {boolean} The renderer can render the layer.\n */\nCanvasVectorLayerRenderer['handles'] = function(layer) {\n  return layer.getType() === LayerType.VECTOR;\n};\n\n\n/**\n * Create a layer renderer.\n * @param {module:ol/renderer/Map} mapRenderer The map renderer.\n * @param {module:ol/layer/Layer} layer The layer to be rendererd.\n * @return {module:ol/renderer/canvas/VectorLayer} The layer renderer.\n */\nCanvasVectorLayerRenderer['create'] = function(mapRenderer, layer) {\n  return new CanvasVectorLayerRenderer(/** @type {module:ol/layer/Vector} */ (layer));\n};\n\n\n/**\n * @inheritDoc\n */\nCanvasVectorLayerRenderer.prototype.disposeInternal = function() {\n  unlisten(labelCache, EventType.CLEAR, this.handleFontsChanged_, this);\n  CanvasLayerRenderer.prototype.disposeInternal.call(this);\n};\n\n\n/**\n * @param {CanvasRenderingContext2D} context Context.\n * @param {module:ol/PluggableMap~FrameState} frameState Frame state.\n * @param {module:ol/layer/Layer~State} layerState Layer state.\n */\nCanvasVectorLayerRenderer.prototype.compose = function(context, frameState, layerState) {\n  const extent = frameState.extent;\n  const pixelRatio = frameState.pixelRatio;\n  const skippedFeatureUids = layerState.managed ?\n    frameState.skippedFeatureUids : {};\n  const viewState = frameState.viewState;\n  const projection = viewState.projection;\n  const rotation = viewState.rotation;\n  const projectionExtent = projection.getExtent();\n  const vectorSource = /** @type {module:ol/source/Vector} */ (this.getLayer().getSource());\n\n  let transform = this.getTransform(frameState, 0);\n\n  // clipped rendering if layer extent is set\n  const clipExtent = layerState.extent;\n  const clipped = clipExtent !== undefined;\n  if (clipped) {\n    this.clip(context, frameState,  /** @type {module:ol/extent~Extent} */ (clipExtent));\n  }\n  const replayGroup = this.replayGroup_;\n  if (replayGroup && !replayGroup.isEmpty()) {\n    if (this.declutterTree_) {\n      this.declutterTree_.clear();\n    }\n    const layer = /** @type {module:ol/layer/Vector} */ (this.getLayer());\n    let drawOffsetX = 0;\n    let drawOffsetY = 0;\n    let replayContext;\n    const transparentLayer = layerState.opacity !== 1;\n    const hasRenderListeners = layer.hasListener(RenderEventType.RENDER);\n    if (transparentLayer || hasRenderListeners) {\n      let drawWidth = context.canvas.width;\n      let drawHeight = context.canvas.height;\n      if (rotation) {\n        const drawSize = Math.round(Math.sqrt(drawWidth * drawWidth + drawHeight * drawHeight));\n        drawOffsetX = (drawSize - drawWidth) / 2;\n        drawOffsetY = (drawSize - drawHeight) / 2;\n        drawWidth = drawHeight = drawSize;\n      }\n      // resize and clear\n      this.context.canvas.width = drawWidth;\n      this.context.canvas.height = drawHeight;\n      replayContext = this.context;\n    } else {\n      replayContext = context;\n    }\n\n    const alpha = replayContext.globalAlpha;\n    if (!transparentLayer) {\n      // for performance reasons, context.save / context.restore is not used\n      // to save and restore the transformation matrix and the opacity.\n      // see http://jsperf.com/context-save-restore-versus-variable\n      replayContext.globalAlpha = layerState.opacity;\n    }\n\n    if (replayContext != context) {\n      replayContext.translate(drawOffsetX, drawOffsetY);\n    }\n\n    const width = frameState.size[0] * pixelRatio;\n    const height = frameState.size[1] * pixelRatio;\n    rotateAtOffset(replayContext, -rotation,\n      width / 2, height / 2);\n    replayGroup.replay(replayContext, transform, rotation, skippedFeatureUids);\n    if (vectorSource.getWrapX() && projection.canWrapX() &&\n        !containsExtent(projectionExtent, extent)) {\n      let startX = extent[0];\n      const worldWidth = getWidth(projectionExtent);\n      let world = 0;\n      let offsetX;\n      while (startX < projectionExtent[0]) {\n        --world;\n        offsetX = worldWidth * world;\n        transform = this.getTransform(frameState, offsetX);\n        replayGroup.replay(replayContext, transform, rotation, skippedFeatureUids);\n        startX += worldWidth;\n      }\n      world = 0;\n      startX = extent[2];\n      while (startX > projectionExtent[2]) {\n        ++world;\n        offsetX = worldWidth * world;\n        transform = this.getTransform(frameState, offsetX);\n        replayGroup.replay(replayContext, transform, rotation, skippedFeatureUids);\n        startX -= worldWidth;\n      }\n    }\n    rotateAtOffset(replayContext, rotation,\n      width / 2, height / 2);\n\n    if (replayContext != context) {\n      if (hasRenderListeners) {\n        this.dispatchRenderEvent(replayContext, frameState, transform);\n      }\n      if (transparentLayer) {\n        const mainContextAlpha = context.globalAlpha;\n        context.globalAlpha = layerState.opacity;\n        context.drawImage(replayContext.canvas, -drawOffsetX, -drawOffsetY);\n        context.globalAlpha = mainContextAlpha;\n      } else {\n        context.drawImage(replayContext.canvas, -drawOffsetX, -drawOffsetY);\n      }\n      replayContext.translate(-drawOffsetX, -drawOffsetY);\n    }\n\n    if (!transparentLayer) {\n      replayContext.globalAlpha = alpha;\n    }\n  }\n\n  if (clipped) {\n    context.restore();\n  }\n};\n\n\n/**\n * @inheritDoc\n */\nCanvasVectorLayerRenderer.prototype.composeFrame = function(frameState, layerState, context) {\n  const transform = this.getTransform(frameState, 0);\n  this.preCompose(context, frameState, transform);\n  this.compose(context, frameState, layerState);\n  this.postCompose(context, frameState, layerState, transform);\n};\n\n\n/**\n * @inheritDoc\n */\nCanvasVectorLayerRenderer.prototype.forEachFeatureAtCoordinate = function(coordinate, frameState, hitTolerance, callback, thisArg) {\n  if (!this.replayGroup_) {\n    return undefined;\n  } else {\n    const resolution = frameState.viewState.resolution;\n    const rotation = frameState.viewState.rotation;\n    const layer = /** @type {module:ol/layer/Vector} */ (this.getLayer());\n    /** @type {!Object.<string, boolean>} */\n    const features = {};\n    const result = this.replayGroup_.forEachFeatureAtCoordinate(coordinate, resolution, rotation, hitTolerance, {},\n      /**\n       * @param {module:ol/Feature|module:ol/render/Feature} feature Feature.\n       * @return {?} Callback result.\n       */\n      function(feature) {\n        const key = getUid(feature).toString();\n        if (!(key in features)) {\n          features[key] = true;\n          return callback.call(thisArg, feature, layer);\n        }\n      }, null);\n    return result;\n  }\n};\n\n\n/**\n * @param {module:ol/events/Event} event Event.\n */\nCanvasVectorLayerRenderer.prototype.handleFontsChanged_ = function(event) {\n  const layer = this.getLayer();\n  if (layer.getVisible() && this.replayGroup_) {\n    layer.changed();\n  }\n};\n\n\n/**\n * Handle changes in image style state.\n * @param {module:ol/events/Event} event Image style change event.\n * @private\n */\nCanvasVectorLayerRenderer.prototype.handleStyleImageChange_ = function(event) {\n  this.renderIfReadyAndVisible();\n};\n\n\n/**\n * @inheritDoc\n */\nCanvasVectorLayerRenderer.prototype.prepareFrame = function(frameState, layerState) {\n  const vectorLayer = /** @type {module:ol/layer/Vector} */ (this.getLayer());\n  const vectorSource = vectorLayer.getSource();\n\n  const animating = frameState.viewHints[ViewHint.ANIMATING];\n  const interacting = frameState.viewHints[ViewHint.INTERACTING];\n  const updateWhileAnimating = vectorLayer.getUpdateWhileAnimating();\n  const updateWhileInteracting = vectorLayer.getUpdateWhileInteracting();\n\n  if (!this.dirty_ && (!updateWhileAnimating && animating) ||\n      (!updateWhileInteracting && interacting)) {\n    return true;\n  }\n\n  const frameStateExtent = frameState.extent;\n  const viewState = frameState.viewState;\n  const projection = viewState.projection;\n  const resolution = viewState.resolution;\n  const pixelRatio = frameState.pixelRatio;\n  const vectorLayerRevision = vectorLayer.getRevision();\n  const vectorLayerRenderBuffer = vectorLayer.getRenderBuffer();\n  let vectorLayerRenderOrder = vectorLayer.getRenderOrder();\n\n  if (vectorLayerRenderOrder === undefined) {\n    vectorLayerRenderOrder = defaultRenderOrder;\n  }\n\n  const extent = buffer(frameStateExtent,\n    vectorLayerRenderBuffer * resolution);\n  const projectionExtent = viewState.projection.getExtent();\n\n  if (vectorSource.getWrapX() && viewState.projection.canWrapX() &&\n      !containsExtent(projectionExtent, frameState.extent)) {\n    // For the replay group, we need an extent that intersects the real world\n    // (-180° to +180°). To support geometries in a coordinate range from -540°\n    // to +540°, we add at least 1 world width on each side of the projection\n    // extent. If the viewport is wider than the world, we need to add half of\n    // the viewport width to make sure we cover the whole viewport.\n    const worldWidth = getWidth(projectionExtent);\n    const gutter = Math.max(getWidth(extent) / 2, worldWidth);\n    extent[0] = projectionExtent[0] - gutter;\n    extent[2] = projectionExtent[2] + gutter;\n  }\n\n  if (!this.dirty_ &&\n      this.renderedResolution_ == resolution &&\n      this.renderedRevision_ == vectorLayerRevision &&\n      this.renderedRenderOrder_ == vectorLayerRenderOrder &&\n      containsExtent(this.renderedExtent_, extent)) {\n    this.replayGroupChanged = false;\n    return true;\n  }\n\n  this.replayGroup_ = null;\n\n  this.dirty_ = false;\n\n  const replayGroup = new CanvasReplayGroup(\n    getRenderTolerance(resolution, pixelRatio), extent, resolution,\n    pixelRatio, vectorSource.getOverlaps(), this.declutterTree_, vectorLayer.getRenderBuffer());\n  vectorSource.loadFeatures(extent, resolution, projection);\n  /**\n   * @param {module:ol/Feature} feature Feature.\n   * @this {module:ol/renderer/canvas/VectorLayer}\n   */\n  const render = function(feature) {\n    let styles;\n    const styleFunction = feature.getStyleFunction() || vectorLayer.getStyleFunction();\n    if (styleFunction) {\n      styles = styleFunction(feature, resolution);\n    }\n    if (styles) {\n      const dirty = this.renderFeature(\n        feature, resolution, pixelRatio, styles, replayGroup);\n      this.dirty_ = this.dirty_ || dirty;\n    }\n  }.bind(this);\n  if (vectorLayerRenderOrder) {\n    /** @type {Array.<module:ol/Feature>} */\n    const features = [];\n    vectorSource.forEachFeatureInExtent(extent,\n      /**\n       * @param {module:ol/Feature} feature Feature.\n       */\n      function(feature) {\n        features.push(feature);\n      }, this);\n    features.sort(vectorLayerRenderOrder);\n    for (let i = 0, ii = features.length; i < ii; ++i) {\n      render(features[i]);\n    }\n  } else {\n    vectorSource.forEachFeatureInExtent(extent, render, this);\n  }\n  replayGroup.finish();\n\n  this.renderedResolution_ = resolution;\n  this.renderedRevision_ = vectorLayerRevision;\n  this.renderedRenderOrder_ = vectorLayerRenderOrder;\n  this.renderedExtent_ = extent;\n  this.replayGroup_ = replayGroup;\n\n  this.replayGroupChanged = true;\n  return true;\n};\n\n\n/**\n * @param {module:ol/Feature} feature Feature.\n * @param {number} resolution Resolution.\n * @param {number} pixelRatio Pixel ratio.\n * @param {(module:ol/style/Style|Array.<module:ol/style/Style>)} styles The style or array of styles.\n * @param {module:ol/render/canvas/ReplayGroup} replayGroup Replay group.\n * @return {boolean} `true` if an image is loading.\n */\nCanvasVectorLayerRenderer.prototype.renderFeature = function(feature, resolution, pixelRatio, styles, replayGroup) {\n  if (!styles) {\n    return false;\n  }\n  let loading = false;\n  if (Array.isArray(styles)) {\n    for (let i = 0, ii = styles.length; i < ii; ++i) {\n      loading = renderFeature(\n        replayGroup, feature, styles[i],\n        getSquaredRenderTolerance(resolution, pixelRatio),\n        this.handleStyleImageChange_, this) || loading;\n    }\n  } else {\n    loading = renderFeature(\n      replayGroup, feature, styles,\n      getSquaredRenderTolerance(resolution, pixelRatio),\n      this.handleStyleImageChange_, this);\n  }\n  return loading;\n};\nexport default CanvasVectorLayerRenderer;\n","/**\n * @module ol/renderer/canvas/VectorTileLayer\n */\nimport {getUid, inherits} from '../../util.js';\nimport LayerType from '../../LayerType.js';\nimport TileState from '../../TileState.js';\nimport {createCanvasContext2D} from '../../dom.js';\nimport {listen, unlisten} from '../../events.js';\nimport EventType from '../../events/EventType.js';\nimport rbush from 'rbush';\nimport {buffer, containsCoordinate, equals, getIntersection, getTopLeft, intersects} from '../../extent.js';\nimport VectorTileRenderType from '../../layer/VectorTileRenderType.js';\nimport {equivalent as equivalentProjection} from '../../proj.js';\nimport Units from '../../proj/Units.js';\nimport ReplayType from '../../render/ReplayType.js';\nimport {labelCache, rotateAtOffset} from '../../render/canvas.js';\nimport CanvasReplayGroup, {replayDeclutter} from '../../render/canvas/ReplayGroup.js';\nimport {ORDER} from '../../render/replay.js';\nimport CanvasTileLayerRenderer from '../canvas/TileLayer.js';\nimport {getSquaredTolerance as getSquaredRenderTolerance, renderFeature} from '../vector.js';\nimport {\n  create as createTransform,\n  compose as composeTransform,\n  reset as resetTransform,\n  scale as scaleTransform,\n  translate as translateTransform\n} from '../../transform.js';\n\n\n/**\n * @type {!Object.<string, Array.<module:ol/render/ReplayType>>}\n */\nconst IMAGE_REPLAYS = {\n  'image': [ReplayType.POLYGON, ReplayType.CIRCLE,\n    ReplayType.LINE_STRING, ReplayType.IMAGE, ReplayType.TEXT],\n  'hybrid': [ReplayType.POLYGON, ReplayType.LINE_STRING]\n};\n\n\n/**\n * @type {!Object.<string, Array.<module:ol/render/ReplayType>>}\n */\nconst VECTOR_REPLAYS = {\n  'image': [ReplayType.DEFAULT],\n  'hybrid': [ReplayType.IMAGE, ReplayType.TEXT, ReplayType.DEFAULT],\n  'vector': ORDER\n};\n\n\n/**\n * @constructor\n * @extends {module:ol/renderer/canvas/TileLayer}\n * @param {module:ol/layer/VectorTile} layer VectorTile layer.\n * @api\n */\nconst CanvasVectorTileLayerRenderer = function(layer) {\n\n  /**\n   * @type {CanvasRenderingContext2D}\n   */\n  this.context = null;\n\n  CanvasTileLayerRenderer.call(this, layer);\n\n  /**\n   * Declutter tree.\n   * @private\n   */\n  this.declutterTree_ = layer.getDeclutter() ? rbush(9, undefined) : null;\n\n  /**\n   * @private\n   * @type {boolean}\n   */\n  this.dirty_ = false;\n\n  /**\n   * @private\n   * @type {number}\n   */\n  this.renderedLayerRevision_;\n\n  /**\n   * @private\n   * @type {module:ol/transform~Transform}\n   */\n  this.tmpTransform_ = createTransform();\n\n  // Use lower resolution for pure vector rendering. Closest resolution otherwise.\n  this.zDirection = layer.getRenderMode() == VectorTileRenderType.VECTOR ? 1 : 0;\n\n  listen(labelCache, EventType.CLEAR, this.handleFontsChanged_, this);\n\n};\n\ninherits(CanvasVectorTileLayerRenderer, CanvasTileLayerRenderer);\n\n\n/**\n * Determine if this renderer handles the provided layer.\n * @param {module:ol/layer/Layer} layer The candidate layer.\n * @return {boolean} The renderer can render the layer.\n */\nCanvasVectorTileLayerRenderer['handles'] = function(layer) {\n  return layer.getType() === LayerType.VECTOR_TILE;\n};\n\n\n/**\n * Create a layer renderer.\n * @param {module:ol/renderer/Map} mapRenderer The map renderer.\n * @param {module:ol/layer/Layer} layer The layer to be rendererd.\n * @return {module:ol/renderer/canvas/VectorTileLayer} The layer renderer.\n */\nCanvasVectorTileLayerRenderer['create'] = function(mapRenderer, layer) {\n  return new CanvasVectorTileLayerRenderer(/** @type {module:ol/layer/VectorTile} */ (layer));\n};\n\n\n/**\n * @inheritDoc\n */\nCanvasVectorTileLayerRenderer.prototype.disposeInternal = function() {\n  unlisten(labelCache, EventType.CLEAR, this.handleFontsChanged_, this);\n  CanvasTileLayerRenderer.prototype.disposeInternal.call(this);\n};\n\n\n/**\n * @inheritDoc\n */\nCanvasVectorTileLayerRenderer.prototype.getTile = function(z, x, y, pixelRatio, projection) {\n  const tile = CanvasTileLayerRenderer.prototype.getTile.call(this, z, x, y, pixelRatio, projection);\n  if (tile.getState() === TileState.LOADED) {\n    this.createReplayGroup_(tile, pixelRatio, projection);\n    if (this.context) {\n      this.renderTileImage_(tile, pixelRatio, projection);\n    }\n  }\n  return tile;\n};\n\n\n/**\n * @inheritDoc\n */\nCanvasVectorTileLayerRenderer.prototype.prepareFrame = function(frameState, layerState) {\n  const layer = this.getLayer();\n  const layerRevision = layer.getRevision();\n  if (this.renderedLayerRevision_ != layerRevision) {\n    this.renderedTiles.length = 0;\n    const renderMode = layer.getRenderMode();\n    if (!this.context && renderMode != VectorTileRenderType.VECTOR) {\n      this.context = createCanvasContext2D();\n    }\n    if (this.context && renderMode == VectorTileRenderType.VECTOR) {\n      this.context = null;\n    }\n  }\n  this.renderedLayerRevision_ = layerRevision;\n  return CanvasTileLayerRenderer.prototype.prepareFrame.apply(this, arguments);\n};\n\n\n/**\n * @param {module:ol/VectorImageTile} tile Tile.\n * @param {number} pixelRatio Pixel ratio.\n * @param {module:ol/proj/Projection} projection Projection.\n * @private\n */\nCanvasVectorTileLayerRenderer.prototype.createReplayGroup_ = function(tile, pixelRatio, projection) {\n  const layer = this.getLayer();\n  const revision = layer.getRevision();\n  const renderOrder = /** @type {module:ol/render~OrderFunction} */ (layer.getRenderOrder()) || null;\n\n  const replayState = tile.getReplayState(layer);\n  if (!replayState.dirty && replayState.renderedRevision == revision &&\n      replayState.renderedRenderOrder == renderOrder) {\n    return;\n  }\n\n  const source = /** @type {module:ol/source/VectorTile} */ (layer.getSource());\n  const sourceTileGrid = source.getTileGrid();\n  const tileGrid = source.getTileGridForProjection(projection);\n  const resolution = tileGrid.getResolution(tile.tileCoord[0]);\n  const tileExtent = tile.extent;\n\n  const zIndexKeys = {};\n  for (let t = 0, tt = tile.tileKeys.length; t < tt; ++t) {\n    const sourceTile = tile.getTile(tile.tileKeys[t]);\n    if (sourceTile.getState() != TileState.LOADED) {\n      continue;\n    }\n\n    const sourceTileCoord = sourceTile.tileCoord;\n    const sourceTileExtent = sourceTileGrid.getTileCoordExtent(sourceTileCoord);\n    const sharedExtent = getIntersection(tileExtent, sourceTileExtent);\n    const bufferedExtent = equals(sourceTileExtent, sharedExtent) ? null :\n      buffer(sharedExtent, layer.getRenderBuffer() * resolution, this.tmpExtent);\n    const tileProjection = sourceTile.getProjection();\n    let reproject = false;\n    if (!equivalentProjection(projection, tileProjection)) {\n      reproject = true;\n      sourceTile.setProjection(projection);\n    }\n    replayState.dirty = false;\n    const replayGroup = new CanvasReplayGroup(0, sharedExtent, resolution,\n      pixelRatio, source.getOverlaps(), this.declutterTree_, layer.getRenderBuffer());\n    const squaredTolerance = getSquaredRenderTolerance(resolution, pixelRatio);\n\n    /**\n     * @param {module:ol/Feature|module:ol/render/Feature} feature Feature.\n     * @this {module:ol/renderer/canvas/VectorTileLayer}\n     */\n    const render = function(feature) {\n      let styles;\n      const styleFunction = feature.getStyleFunction() || layer.getStyleFunction();\n      if (styleFunction) {\n        styles = styleFunction(feature, resolution);\n      }\n      if (styles) {\n        const dirty = this.renderFeature(feature, squaredTolerance, styles, replayGroup);\n        this.dirty_ = this.dirty_ || dirty;\n        replayState.dirty = replayState.dirty || dirty;\n      }\n    };\n\n    const features = sourceTile.getFeatures();\n    if (renderOrder && renderOrder !== replayState.renderedRenderOrder) {\n      features.sort(renderOrder);\n    }\n    for (let i = 0, ii = features.length; i < ii; ++i) {\n      const feature = features[i];\n      if (reproject) {\n        if (tileProjection.getUnits() == Units.TILE_PIXELS) {\n          // projected tile extent\n          tileProjection.setWorldExtent(sourceTileExtent);\n          // tile extent in tile pixel space\n          tileProjection.setExtent(sourceTile.getExtent());\n        }\n        feature.getGeometry().transform(tileProjection, projection);\n      }\n      if (!bufferedExtent || intersects(bufferedExtent, feature.getGeometry().getExtent())) {\n        render.call(this, feature);\n      }\n    }\n    replayGroup.finish();\n    for (const r in replayGroup.getReplays()) {\n      zIndexKeys[r] = true;\n    }\n    sourceTile.setReplayGroup(layer, tile.tileCoord.toString(), replayGroup);\n  }\n  replayState.renderedRevision = revision;\n  replayState.renderedRenderOrder = renderOrder;\n};\n\n\n/**\n * @inheritDoc\n */\nCanvasVectorTileLayerRenderer.prototype.forEachFeatureAtCoordinate = function(coordinate, frameState, hitTolerance, callback, thisArg) {\n  const resolution = frameState.viewState.resolution;\n  const rotation = frameState.viewState.rotation;\n  hitTolerance = hitTolerance == undefined ? 0 : hitTolerance;\n  const layer = this.getLayer();\n  /** @type {!Object.<string, boolean>} */\n  const features = {};\n\n  /** @type {Array.<module:ol/VectorImageTile>} */\n  const renderedTiles = this.renderedTiles;\n\n  let bufferedExtent, found;\n  let i, ii, replayGroup;\n  for (i = 0, ii = renderedTiles.length; i < ii; ++i) {\n    const tile = renderedTiles[i];\n    bufferedExtent = buffer(tile.extent, hitTolerance * resolution, bufferedExtent);\n    if (!containsCoordinate(bufferedExtent, coordinate)) {\n      continue;\n    }\n    for (let t = 0, tt = tile.tileKeys.length; t < tt; ++t) {\n      const sourceTile = tile.getTile(tile.tileKeys[t]);\n      if (sourceTile.getState() != TileState.LOADED) {\n        continue;\n      }\n      replayGroup = sourceTile.getReplayGroup(layer, tile.tileCoord.toString());\n      found = found || replayGroup.forEachFeatureAtCoordinate(coordinate, resolution, rotation, hitTolerance, {},\n        /**\n         * @param {module:ol/Feature|module:ol/render/Feature} feature Feature.\n         * @return {?} Callback result.\n         */\n        function(feature) {\n          const key = getUid(feature).toString();\n          if (!(key in features)) {\n            features[key] = true;\n            return callback.call(thisArg, feature, layer);\n          }\n        }, null);\n    }\n  }\n  return found;\n};\n\n\n/**\n * @param {module:ol/VectorTile} tile Tile.\n * @param {module:ol/PluggableMap~FrameState} frameState Frame state.\n * @return {module:ol/transform~Transform} transform Transform.\n * @private\n */\nCanvasVectorTileLayerRenderer.prototype.getReplayTransform_ = function(tile, frameState) {\n  const layer = this.getLayer();\n  const source = /** @type {module:ol/source/VectorTile} */ (layer.getSource());\n  const tileGrid = source.getTileGrid();\n  const tileCoord = tile.tileCoord;\n  const tileResolution = tileGrid.getResolution(tileCoord[0]);\n  const viewState = frameState.viewState;\n  const pixelRatio = frameState.pixelRatio;\n  const renderResolution = viewState.resolution / pixelRatio;\n  const tileExtent = tileGrid.getTileCoordExtent(tileCoord, this.tmpExtent);\n  const center = viewState.center;\n  const origin = getTopLeft(tileExtent);\n  const size = frameState.size;\n  const offsetX = Math.round(pixelRatio * size[0] / 2);\n  const offsetY = Math.round(pixelRatio * size[1] / 2);\n  return composeTransform(this.tmpTransform_,\n    offsetX, offsetY,\n    tileResolution / renderResolution, tileResolution / renderResolution,\n    viewState.rotation,\n    (origin[0] - center[0]) / tileResolution,\n    (center[1] - origin[1]) / tileResolution);\n};\n\n\n/**\n * @param {module:ol/events/Event} event Event.\n */\nCanvasVectorTileLayerRenderer.prototype.handleFontsChanged_ = function(event) {\n  const layer = this.getLayer();\n  if (layer.getVisible() && this.renderedLayerRevision_ !== undefined) {\n    layer.changed();\n  }\n};\n\n\n/**\n * Handle changes in image style state.\n * @param {module:ol/events/Event} event Image style change event.\n * @private\n */\nCanvasVectorTileLayerRenderer.prototype.handleStyleImageChange_ = function(event) {\n  this.renderIfReadyAndVisible();\n};\n\n\n/**\n * @inheritDoc\n */\nCanvasVectorTileLayerRenderer.prototype.postCompose = function(context, frameState, layerState) {\n  const layer = this.getLayer();\n  const renderMode = layer.getRenderMode();\n  if (renderMode != VectorTileRenderType.IMAGE) {\n    const declutterReplays = layer.getDeclutter() ? {} : null;\n    const source = /** @type {module:ol/source/VectorTile} */ (layer.getSource());\n    const replayTypes = VECTOR_REPLAYS[renderMode];\n    const pixelRatio = frameState.pixelRatio;\n    const rotation = frameState.viewState.rotation;\n    const size = frameState.size;\n    let offsetX, offsetY;\n    if (rotation) {\n      offsetX = Math.round(pixelRatio * size[0] / 2);\n      offsetY = Math.round(pixelRatio * size[1] / 2);\n      rotateAtOffset(context, -rotation, offsetX, offsetY);\n    }\n    if (declutterReplays) {\n      this.declutterTree_.clear();\n    }\n    const tiles = this.renderedTiles;\n    const tileGrid = source.getTileGridForProjection(frameState.viewState.projection);\n    const clips = [];\n    const zs = [];\n    for (let i = tiles.length - 1; i >= 0; --i) {\n      const tile = /** @type {module:ol/VectorImageTile} */ (tiles[i]);\n      if (tile.getState() == TileState.ABORT) {\n        continue;\n      }\n      const tileCoord = tile.tileCoord;\n      const worldOffset = tileGrid.getTileCoordExtent(tileCoord, this.tmpExtent)[0] - tile.extent[0];\n      let transform = undefined;\n      for (let t = 0, tt = tile.tileKeys.length; t < tt; ++t) {\n        const sourceTile = tile.getTile(tile.tileKeys[t]);\n        if (sourceTile.getState() != TileState.LOADED) {\n          continue;\n        }\n        const replayGroup = sourceTile.getReplayGroup(layer, tileCoord.toString());\n        if (!replayGroup || !replayGroup.hasReplays(replayTypes)) {\n          // sourceTile was not yet loaded when this.createReplayGroup_() was\n          // called, or it has no replays of the types we want to render\n          continue;\n        }\n        if (!transform) {\n          transform = this.getTransform(frameState, worldOffset);\n        }\n        const currentZ = sourceTile.tileCoord[0];\n        const currentClip = replayGroup.getClipCoords(transform);\n        context.save();\n        context.globalAlpha = layerState.opacity;\n        // Create a clip mask for regions in this low resolution tile that are\n        // already filled by a higher resolution tile\n        for (let j = 0, jj = clips.length; j < jj; ++j) {\n          const clip = clips[j];\n          if (currentZ < zs[j]) {\n            context.beginPath();\n            // counter-clockwise (outer ring) for current tile\n            context.moveTo(currentClip[0], currentClip[1]);\n            context.lineTo(currentClip[2], currentClip[3]);\n            context.lineTo(currentClip[4], currentClip[5]);\n            context.lineTo(currentClip[6], currentClip[7]);\n            // clockwise (inner ring) for higher resolution tile\n            context.moveTo(clip[6], clip[7]);\n            context.lineTo(clip[4], clip[5]);\n            context.lineTo(clip[2], clip[3]);\n            context.lineTo(clip[0], clip[1]);\n            context.clip();\n          }\n        }\n        replayGroup.replay(context, transform, rotation, {}, replayTypes, declutterReplays);\n        context.restore();\n        clips.push(currentClip);\n        zs.push(currentZ);\n      }\n    }\n    if (declutterReplays) {\n      replayDeclutter(declutterReplays, context, rotation);\n    }\n    if (rotation) {\n      rotateAtOffset(context, rotation,\n        /** @type {number} */ (offsetX), /** @type {number} */ (offsetY));\n    }\n  }\n  CanvasTileLayerRenderer.prototype.postCompose.apply(this, arguments);\n};\n\n\n/**\n * @param {module:ol/Feature|module:ol/render/Feature} feature Feature.\n * @param {number} squaredTolerance Squared tolerance.\n * @param {(module:ol/style/Style|Array.<module:ol/style/Style>)} styles The style or array of styles.\n * @param {module:ol/render/canvas/ReplayGroup} replayGroup Replay group.\n * @return {boolean} `true` if an image is loading.\n */\nCanvasVectorTileLayerRenderer.prototype.renderFeature = function(feature, squaredTolerance, styles, replayGroup) {\n  if (!styles) {\n    return false;\n  }\n  let loading = false;\n  if (Array.isArray(styles)) {\n    for (let i = 0, ii = styles.length; i < ii; ++i) {\n      loading = renderFeature(\n        replayGroup, feature, styles[i], squaredTolerance,\n        this.handleStyleImageChange_, this) || loading;\n    }\n  } else {\n    loading = renderFeature(\n      replayGroup, feature, styles, squaredTolerance,\n      this.handleStyleImageChange_, this);\n  }\n  return loading;\n};\n\n\n/**\n * @param {module:ol/VectorImageTile} tile Tile.\n * @param {number} pixelRatio Pixel ratio.\n * @param {module:ol/proj/Projection} projection Projection.\n * @private\n */\nCanvasVectorTileLayerRenderer.prototype.renderTileImage_ = function(\n  tile, pixelRatio, projection) {\n  const layer = this.getLayer();\n  const replayState = tile.getReplayState(layer);\n  const revision = layer.getRevision();\n  const replays = IMAGE_REPLAYS[layer.getRenderMode()];\n  if (replays && replayState.renderedTileRevision !== revision) {\n    replayState.renderedTileRevision = revision;\n    const tileCoord = tile.wrappedTileCoord;\n    const z = tileCoord[0];\n    const source = /** @type {module:ol/source/VectorTile} */ (layer.getSource());\n    const tileGrid = source.getTileGridForProjection(projection);\n    const resolution = tileGrid.getResolution(z);\n    const context = tile.getContext(layer);\n    const size = source.getTilePixelSize(z, pixelRatio, projection);\n    context.canvas.width = size[0];\n    context.canvas.height = size[1];\n    const tileExtent = tileGrid.getTileCoordExtent(tileCoord, this.tmpExtent);\n    for (let i = 0, ii = tile.tileKeys.length; i < ii; ++i) {\n      const sourceTile = tile.getTile(tile.tileKeys[i]);\n      if (sourceTile.getState() != TileState.LOADED) {\n        continue;\n      }\n      const pixelScale = pixelRatio / resolution;\n      const transform = resetTransform(this.tmpTransform_);\n      scaleTransform(transform, pixelScale, -pixelScale);\n      translateTransform(transform, -tileExtent[0], -tileExtent[3]);\n      const replayGroup = sourceTile.getReplayGroup(layer, tile.tileCoord.toString());\n      replayGroup.replay(context, transform, 0, {}, replays);\n    }\n  }\n};\n\nexport default CanvasVectorTileLayerRenderer;\n","/**\n * @module ol/Map\n */\nimport {inherits} from './util.js';\nimport PluggableMap from './PluggableMap.js';\nimport {defaults as defaultControls} from './control/util.js';\nimport {defaults as defaultInteractions} from './interaction.js';\nimport {assign} from './obj.js';\nimport CanvasImageLayerRenderer from './renderer/canvas/ImageLayer.js';\nimport CanvasMapRenderer from './renderer/canvas/Map.js';\nimport CanvasTileLayerRenderer from './renderer/canvas/TileLayer.js';\nimport CanvasVectorLayerRenderer from './renderer/canvas/VectorLayer.js';\nimport CanvasVectorTileLayerRenderer from './renderer/canvas/VectorTileLayer.js';\n\n/**\n * @classdesc\n * The map is the core component of OpenLayers. For a map to render, a view,\n * one or more layers, and a target container are needed:\n *\n *     import Map from 'ol/Map';\n *     import View from 'ol/View';\n *     import TileLayer from 'ol/layer/Tile';\n *     import OSM from 'ol/source/OSM';\n *\n *     var map = new Map({\n *       view: new View({\n *         center: [0, 0],\n *         zoom: 1\n *       }),\n *       layers: [\n *         new TileLayer({\n *           source: new OSM()\n *         })\n *       ],\n *       target: 'map'\n *     });\n *\n * The above snippet creates a map using a {@link module:ol/layer/Tile} to\n * display {@link module:ol/source/OSM~OSM} OSM data and render it to a DOM\n * element with the id `map`.\n *\n * The constructor places a viewport container (with CSS class name\n * `ol-viewport`) in the target element (see `getViewport()`), and then two\n * further elements within the viewport: one with CSS class name\n * `ol-overlaycontainer-stopevent` for controls and some overlays, and one with\n * CSS class name `ol-overlaycontainer` for other overlays (see the `stopEvent`\n * option of {@link module:ol/Overlay~Overlay} for the difference). The map\n * itself is placed in a further element within the viewport.\n *\n * Layers are stored as a {@link module:ol/Collection~Collection} in\n * layerGroups. A top-level group is provided by the library. This is what is\n * accessed by `getLayerGroup` and `setLayerGroup`. Layers entered in the\n * options are added to this group, and `addLayer` and `removeLayer` change the\n * layer collection in the group. `getLayers` is a convenience function for\n * `getLayerGroup().getLayers()`. Note that {@link module:ol/layer/Group~Group}\n * is a subclass of {@link module:ol/layer/Base}, so layers entered in the\n * options or added with `addLayer` can be groups, which can contain further\n * groups, and so on.\n *\n * @constructor\n * @extends {module:ol/PluggableMap}\n * @param {module:ol/PluggableMap~MapOptions} options Map options.\n * @fires module:ol/MapBrowserEvent~MapBrowserEvent\n * @fires module:ol/MapEvent~MapEvent\n * @fires module:ol/render/Event~RenderEvent#postcompose\n * @fires module:ol/render/Event~RenderEvent#precompose\n * @api\n */\nconst Map = function(options) {\n  options = assign({}, options);\n  if (!options.controls) {\n    options.controls = defaultControls();\n  }\n  if (!options.interactions) {\n    options.interactions = defaultInteractions();\n  }\n\n  PluggableMap.call(this, options);\n};\n\ninherits(Map, PluggableMap);\n\nMap.prototype.createRenderer = function() {\n  const renderer = new CanvasMapRenderer(this);\n  renderer.registerLayerRenderers([\n    CanvasImageLayerRenderer,\n    CanvasTileLayerRenderer,\n    CanvasVectorLayerRenderer,\n    CanvasVectorTileLayerRenderer\n  ]);\n  return renderer;\n};\n\nexport default Map;\n","/**\n * @module ol/proj/epsg3857\n */\nimport {inherits} from '../util.js';\nimport {cosh} from '../math.js';\nimport Projection from '../proj/Projection.js';\nimport Units from '../proj/Units.js';\n\n\n/**\n * Radius of WGS84 sphere\n *\n * @const\n * @type {number}\n */\nexport const RADIUS = 6378137;\n\n\n/**\n * @const\n * @type {number}\n */\nexport const HALF_SIZE = Math.PI * RADIUS;\n\n\n/**\n * @const\n * @type {module:ol/extent~Extent}\n */\nexport const EXTENT = [\n  -HALF_SIZE, -HALF_SIZE,\n  HALF_SIZE, HALF_SIZE\n];\n\n\n/**\n * @const\n * @type {module:ol/extent~Extent}\n */\nexport const WORLD_EXTENT = [-180, -85, 180, 85];\n\n\n/**\n * @classdesc\n * Projection object for web/spherical Mercator (EPSG:3857).\n *\n * @constructor\n * @extends {module:ol/proj/Projection}\n * @param {string} code Code.\n */\nfunction EPSG3857Projection(code) {\n  Projection.call(this, {\n    code: code,\n    units: Units.METERS,\n    extent: EXTENT,\n    global: true,\n    worldExtent: WORLD_EXTENT,\n    getPointResolution: function(resolution, point) {\n      return resolution / cosh(point[1] / RADIUS);\n    }\n  });\n}\ninherits(EPSG3857Projection, Projection);\n\n\n/**\n * Projections equal to EPSG:3857.\n *\n * @const\n * @type {Array.<module:ol/proj/Projection>}\n */\nexport const PROJECTIONS = [\n  new EPSG3857Projection('EPSG:3857'),\n  new EPSG3857Projection('EPSG:102100'),\n  new EPSG3857Projection('EPSG:102113'),\n  new EPSG3857Projection('EPSG:900913'),\n  new EPSG3857Projection('urn:ogc:def:crs:EPSG:6.18:3:3857'),\n  new EPSG3857Projection('urn:ogc:def:crs:EPSG::3857'),\n  new EPSG3857Projection('http://www.opengis.net/gml/srs/epsg.xml#3857')\n];\n\n\n/**\n * Transformation from EPSG:4326 to EPSG:3857.\n *\n * @param {Array.<number>} input Input array of coordinate values.\n * @param {Array.<number>=} opt_output Output array of coordinate values.\n * @param {number=} opt_dimension Dimension (default is `2`).\n * @return {Array.<number>} Output array of coordinate values.\n */\nexport function fromEPSG4326(input, opt_output, opt_dimension) {\n  const length = input.length;\n  const dimension = opt_dimension > 1 ? opt_dimension : 2;\n  let output = opt_output;\n  if (output === undefined) {\n    if (dimension > 2) {\n      // preserve values beyond second dimension\n      output = input.slice();\n    } else {\n      output = new Array(length);\n    }\n  }\n  const halfSize = HALF_SIZE;\n  for (let i = 0; i < length; i += dimension) {\n    output[i] = halfSize * input[i] / 180;\n    let y = RADIUS *\n        Math.log(Math.tan(Math.PI * (input[i + 1] + 90) / 360));\n    if (y > halfSize) {\n      y = halfSize;\n    } else if (y < -halfSize) {\n      y = -halfSize;\n    }\n    output[i + 1] = y;\n  }\n  return output;\n}\n\n\n/**\n * Transformation from EPSG:3857 to EPSG:4326.\n *\n * @param {Array.<number>} input Input array of coordinate values.\n * @param {Array.<number>=} opt_output Output array of coordinate values.\n * @param {number=} opt_dimension Dimension (default is `2`).\n * @return {Array.<number>} Output array of coordinate values.\n */\nexport function toEPSG4326(input, opt_output, opt_dimension) {\n  const length = input.length;\n  const dimension = opt_dimension > 1 ? opt_dimension : 2;\n  let output = opt_output;\n  if (output === undefined) {\n    if (dimension > 2) {\n      // preserve values beyond second dimension\n      output = input.slice();\n    } else {\n      output = new Array(length);\n    }\n  }\n  for (let i = 0; i < length; i += dimension) {\n    output[i] = 180 * input[i] / HALF_SIZE;\n    output[i + 1] = 360 * Math.atan(\n      Math.exp(input[i + 1] / RADIUS)) / Math.PI - 90;\n  }\n  return output;\n}\n","/**\n * @module ol/proj/epsg4326\n */\nimport {inherits} from '../util.js';\nimport Projection from '../proj/Projection.js';\nimport Units from '../proj/Units.js';\n\n\n/**\n * Semi-major radius of the WGS84 ellipsoid.\n *\n * @const\n * @type {number}\n */\nexport const RADIUS = 6378137;\n\n\n/**\n * Extent of the EPSG:4326 projection which is the whole world.\n *\n * @const\n * @type {module:ol/extent~Extent}\n */\nexport const EXTENT = [-180, -90, 180, 90];\n\n\n/**\n * @const\n * @type {number}\n */\nexport const METERS_PER_UNIT = Math.PI * RADIUS / 180;\n\n\n/**\n * @classdesc\n * Projection object for WGS84 geographic coordinates (EPSG:4326).\n *\n * Note that OpenLayers does not strictly comply with the EPSG definition.\n * The EPSG registry defines 4326 as a CRS for Latitude,Longitude (y,x).\n * OpenLayers treats EPSG:4326 as a pseudo-projection, with x,y coordinates.\n *\n * @constructor\n * @extends {module:ol/proj/Projection}\n * @param {string} code Code.\n * @param {string=} opt_axisOrientation Axis orientation.\n */\nfunction EPSG4326Projection(code, opt_axisOrientation) {\n  Projection.call(this, {\n    code: code,\n    units: Units.DEGREES,\n    extent: EXTENT,\n    axisOrientation: opt_axisOrientation,\n    global: true,\n    metersPerUnit: METERS_PER_UNIT,\n    worldExtent: EXTENT\n  });\n}\ninherits(EPSG4326Projection, Projection);\n\n\n/**\n * Projections equal to EPSG:4326.\n *\n * @const\n * @type {Array.<module:ol/proj/Projection>}\n */\nexport const PROJECTIONS = [\n  new EPSG4326Projection('CRS:84'),\n  new EPSG4326Projection('EPSG:4326', 'neu'),\n  new EPSG4326Projection('urn:ogc:def:crs:EPSG::4326', 'neu'),\n  new EPSG4326Projection('urn:ogc:def:crs:EPSG:6.6:4326', 'neu'),\n  new EPSG4326Projection('urn:ogc:def:crs:OGC:1.3:CRS84'),\n  new EPSG4326Projection('urn:ogc:def:crs:OGC:2:84'),\n  new EPSG4326Projection('http://www.opengis.net/gml/srs/epsg.xml#4326', 'neu'),\n  new EPSG4326Projection('urn:x-ogc:def:crs:EPSG:4326', 'neu')\n];\n","/**\n * @module ol/proj/projections\n */\n\n\n/**\n * @type {Object.<string, module:ol/proj/Projection>}\n */\nlet cache = {};\n\n\n/**\n * Clear the projections cache.\n */\nexport function clear() {\n  cache = {};\n}\n\n\n/**\n * Get a cached projection by code.\n * @param {string} code The code for the projection.\n * @return {module:ol/proj/Projection} The projection (if cached).\n */\nexport function get(code) {\n  return cache[code] || null;\n}\n\n\n/**\n * Add a projection to the cache.\n * @param {string} code The projection code.\n * @param {module:ol/proj/Projection} projection The projection to cache.\n */\nexport function add(code, projection) {\n  cache[code] = projection;\n}\n","/**\n * @module ol/proj\n */\n\n/**\n * The ol/proj module stores:\n * * a list of {@link module:ol/proj/Projection}\n * objects, one for each projection supported by the application\n * * a list of transform functions needed to convert coordinates in one projection\n * into another.\n *\n * The static functions are the methods used to maintain these.\n * Each transform function can handle not only simple coordinate pairs, but also\n * large arrays of coordinates such as vector geometries.\n *\n * When loaded, the library adds projection objects for EPSG:4326 (WGS84\n * geographic coordinates) and EPSG:3857 (Web or Spherical Mercator, as used\n * for example by Bing Maps or OpenStreetMap), together with the relevant\n * transform functions.\n *\n * Additional transforms may be added by using the {@link http://proj4js.org/}\n * library (version 2.2 or later). You can use the full build supplied by\n * Proj4js, or create a custom build to support those projections you need; see\n * the Proj4js website for how to do this. You also need the Proj4js definitions\n * for the required projections. These definitions can be obtained from\n * {@link https://epsg.io/}, and are a JS function, so can be loaded in a script\n * tag (as in the examples) or pasted into your application.\n *\n * After all required projection definitions are added to proj4's registry (by\n * using `proj4.defs()`), simply call `register(proj4)` from the `ol/proj/proj4`\n * package. Existing transforms are not changed by this function. See\n * examples/wms-image-custom-proj for an example of this.\n *\n * Additional projection definitions can be registered with `proj4.defs()` any\n * time. Just make sure to call `register(proj4)` again; for example, with user-supplied data where you don't\n * know in advance what projections are needed, you can initially load minimal\n * support and then load whichever are requested.\n *\n * Note that Proj4js does not support projection extents. If you want to add\n * one for creating default tile grids, you can add it after the Projection\n * object has been created with `setExtent`, for example,\n * `get('EPSG:1234').setExtent(extent)`.\n *\n * In addition to Proj4js support, any transform functions can be added with\n * {@link module:ol/proj~addCoordinateTransforms}. To use this, you must first create\n * a {@link module:ol/proj/Projection} object for the new projection and add it with\n * {@link module:ol/proj~addProjection}. You can then add the forward and inverse\n * functions with {@link module:ol/proj~addCoordinateTransforms}. See\n * examples/wms-custom-proj for an example of this.\n *\n * Note that if no transforms are needed and you only need to define the\n * projection, just add a {@link module:ol/proj/Projection} with\n * {@link module:ol/proj~addProjection}. See examples/wms-no-proj for an example of\n * this.\n */\nimport {getDistance} from './sphere.js';\nimport {applyTransform} from './extent.js';\nimport {modulo} from './math.js';\nimport {toEPSG4326, fromEPSG4326, PROJECTIONS as EPSG3857_PROJECTIONS} from './proj/epsg3857.js';\nimport {PROJECTIONS as EPSG4326_PROJECTIONS} from './proj/epsg4326.js';\nimport Projection from './proj/Projection.js';\nimport Units, {METERS_PER_UNIT} from './proj/Units.js';\nimport * as projections from './proj/projections.js';\nimport {add as addTransformFunc, clear as clearTransformFuncs, get as getTransformFunc} from './proj/transforms.js';\n\n\n/**\n * A projection as {@link module:ol/proj/Projection}, SRS identifier\n * string or undefined.\n * @typedef {module:ol/proj/Projection|string|undefined} ProjectionLike\n * @api\n */\n\n\n/**\n * A transform function accepts an array of input coordinate values, an optional\n * output array, and an optional dimension (default should be 2).  The function\n * transforms the input coordinate values, populates the output array, and\n * returns the output array.\n *\n * @typedef {function(Array.<number>, Array.<number>=, number=): Array.<number>} TransformFunction\n * @api\n */\n\n\nexport {METERS_PER_UNIT};\n\n\n/**\n * @param {Array.<number>} input Input coordinate array.\n * @param {Array.<number>=} opt_output Output array of coordinate values.\n * @param {number=} opt_dimension Dimension.\n * @return {Array.<number>} Output coordinate array (new array, same coordinate\n *     values).\n */\nexport function cloneTransform(input, opt_output, opt_dimension) {\n  let output;\n  if (opt_output !== undefined) {\n    for (let i = 0, ii = input.length; i < ii; ++i) {\n      opt_output[i] = input[i];\n    }\n    output = opt_output;\n  } else {\n    output = input.slice();\n  }\n  return output;\n}\n\n\n/**\n * @param {Array.<number>} input Input coordinate array.\n * @param {Array.<number>=} opt_output Output array of coordinate values.\n * @param {number=} opt_dimension Dimension.\n * @return {Array.<number>} Input coordinate array (same array as input).\n */\nexport function identityTransform(input, opt_output, opt_dimension) {\n  if (opt_output !== undefined && input !== opt_output) {\n    for (let i = 0, ii = input.length; i < ii; ++i) {\n      opt_output[i] = input[i];\n    }\n    input = opt_output;\n  }\n  return input;\n}\n\n\n/**\n * Add a Projection object to the list of supported projections that can be\n * looked up by their code.\n *\n * @param {module:ol/proj/Projection} projection Projection instance.\n * @api\n */\nexport function addProjection(projection) {\n  projections.add(projection.getCode(), projection);\n  addTransformFunc(projection, projection, cloneTransform);\n}\n\n\n/**\n * @param {Array.<module:ol/proj/Projection>} projections Projections.\n */\nexport function addProjections(projections) {\n  projections.forEach(addProjection);\n}\n\n\n/**\n * Fetches a Projection object for the code specified.\n *\n * @param {module:ol/proj~ProjectionLike} projectionLike Either a code string which is\n *     a combination of authority and identifier such as \"EPSG:4326\", or an\n *     existing projection object, or undefined.\n * @return {module:ol/proj/Projection} Projection object, or null if not in list.\n * @api\n */\nexport function get(projectionLike) {\n  let projection = null;\n  if (projectionLike instanceof Projection) {\n    projection = projectionLike;\n  } else if (typeof projectionLike === 'string') {\n    const code = projectionLike;\n    projection = projections.get(code);\n  }\n  return projection;\n}\n\n\n/**\n * Get the resolution of the point in degrees or distance units.\n * For projections with degrees as the unit this will simply return the\n * provided resolution. For other projections the point resolution is\n * by default estimated by transforming the 'point' pixel to EPSG:4326,\n * measuring its width and height on the normal sphere,\n * and taking the average of the width and height.\n * A custom function can be provided for a specific projection, either\n * by setting the `getPointResolution` option in the\n * {@link module:ol/proj/Projection~Projection} constructor or by using\n * {@link module:ol/proj/Projection~Projection#setGetPointResolution} to change an existing\n * projection object.\n * @param {module:ol/proj~ProjectionLike} projection The projection.\n * @param {number} resolution Nominal resolution in projection units.\n * @param {module:ol/coordinate~Coordinate} point Point to find adjusted resolution at.\n * @param {module:ol/proj/Units=} opt_units Units to get the point resolution in.\n * Default is the projection's units.\n * @return {number} Point resolution.\n * @api\n */\nexport function getPointResolution(projection, resolution, point, opt_units) {\n  projection = get(projection);\n  let pointResolution;\n  const getter = projection.getPointResolutionFunc();\n  if (getter) {\n    pointResolution = getter(resolution, point);\n  } else {\n    const units = projection.getUnits();\n    if (units == Units.DEGREES && !opt_units || opt_units == Units.DEGREES) {\n      pointResolution = resolution;\n    } else {\n      // Estimate point resolution by transforming the center pixel to EPSG:4326,\n      // measuring its width and height on the normal sphere, and taking the\n      // average of the width and height.\n      const toEPSG4326 = getTransformFromProjections(projection, get('EPSG:4326'));\n      let vertices = [\n        point[0] - resolution / 2, point[1],\n        point[0] + resolution / 2, point[1],\n        point[0], point[1] - resolution / 2,\n        point[0], point[1] + resolution / 2\n      ];\n      vertices = toEPSG4326(vertices, vertices, 2);\n      const width = getDistance(vertices.slice(0, 2), vertices.slice(2, 4));\n      const height = getDistance(vertices.slice(4, 6), vertices.slice(6, 8));\n      pointResolution = (width + height) / 2;\n      const metersPerUnit = opt_units ?\n        METERS_PER_UNIT[opt_units] :\n        projection.getMetersPerUnit();\n      if (metersPerUnit !== undefined) {\n        pointResolution /= metersPerUnit;\n      }\n    }\n  }\n  return pointResolution;\n}\n\n\n/**\n * Registers transformation functions that don't alter coordinates. Those allow\n * to transform between projections with equal meaning.\n *\n * @param {Array.<module:ol/proj/Projection>} projections Projections.\n * @api\n */\nexport function addEquivalentProjections(projections) {\n  addProjections(projections);\n  projections.forEach(function(source) {\n    projections.forEach(function(destination) {\n      if (source !== destination) {\n        addTransformFunc(source, destination, cloneTransform);\n      }\n    });\n  });\n}\n\n\n/**\n * Registers transformation functions to convert coordinates in any projection\n * in projection1 to any projection in projection2.\n *\n * @param {Array.<module:ol/proj/Projection>} projections1 Projections with equal\n *     meaning.\n * @param {Array.<module:ol/proj/Projection>} projections2 Projections with equal\n *     meaning.\n * @param {module:ol/proj~TransformFunction} forwardTransform Transformation from any\n *   projection in projection1 to any projection in projection2.\n * @param {module:ol/proj~TransformFunction} inverseTransform Transform from any projection\n *   in projection2 to any projection in projection1..\n */\nexport function addEquivalentTransforms(projections1, projections2, forwardTransform, inverseTransform) {\n  projections1.forEach(function(projection1) {\n    projections2.forEach(function(projection2) {\n      addTransformFunc(projection1, projection2, forwardTransform);\n      addTransformFunc(projection2, projection1, inverseTransform);\n    });\n  });\n}\n\n\n/**\n * Clear all cached projections and transforms.\n */\nexport function clearAllProjections() {\n  projections.clear();\n  clearTransformFuncs();\n}\n\n\n/**\n * @param {module:ol/proj/Projection|string|undefined} projection Projection.\n * @param {string} defaultCode Default code.\n * @return {module:ol/proj/Projection} Projection.\n */\nexport function createProjection(projection, defaultCode) {\n  if (!projection) {\n    return get(defaultCode);\n  } else if (typeof projection === 'string') {\n    return get(projection);\n  } else {\n    return (\n      /** @type {module:ol/proj/Projection} */ (projection)\n    );\n  }\n}\n\n\n/**\n * Creates a {@link module:ol/proj~TransformFunction} from a simple 2D coordinate transform\n * function.\n * @param {function(module:ol/coordinate~Coordinate): module:ol/coordinate~Coordinate} coordTransform Coordinate\n *     transform.\n * @return {module:ol/proj~TransformFunction} Transform function.\n */\nexport function createTransformFromCoordinateTransform(coordTransform) {\n  return (\n    /**\n     * @param {Array.<number>} input Input.\n     * @param {Array.<number>=} opt_output Output.\n     * @param {number=} opt_dimension Dimension.\n     * @return {Array.<number>} Output.\n     */\n    function(input, opt_output, opt_dimension) {\n      const length = input.length;\n      const dimension = opt_dimension !== undefined ? opt_dimension : 2;\n      const output = opt_output !== undefined ? opt_output : new Array(length);\n      for (let i = 0; i < length; i += dimension) {\n        const point = coordTransform([input[i], input[i + 1]]);\n        output[i] = point[0];\n        output[i + 1] = point[1];\n        for (let j = dimension - 1; j >= 2; --j) {\n          output[i + j] = input[i + j];\n        }\n      }\n      return output;\n    });\n}\n\n\n/**\n * Registers coordinate transform functions to convert coordinates between the\n * source projection and the destination projection.\n * The forward and inverse functions convert coordinate pairs; this function\n * converts these into the functions used internally which also handle\n * extents and coordinate arrays.\n *\n * @param {module:ol/proj~ProjectionLike} source Source projection.\n * @param {module:ol/proj~ProjectionLike} destination Destination projection.\n * @param {function(module:ol/coordinate~Coordinate): module:ol/coordinate~Coordinate} forward The forward transform\n *     function (that is, from the source projection to the destination\n *     projection) that takes a {@link module:ol/coordinate~Coordinate} as argument and returns\n *     the transformed {@link module:ol/coordinate~Coordinate}.\n * @param {function(module:ol/coordinate~Coordinate): module:ol/coordinate~Coordinate} inverse The inverse transform\n *     function (that is, from the destination projection to the source\n *     projection) that takes a {@link module:ol/coordinate~Coordinate} as argument and returns\n *     the transformed {@link module:ol/coordinate~Coordinate}.\n * @api\n */\nexport function addCoordinateTransforms(source, destination, forward, inverse) {\n  const sourceProj = get(source);\n  const destProj = get(destination);\n  addTransformFunc(sourceProj, destProj, createTransformFromCoordinateTransform(forward));\n  addTransformFunc(destProj, sourceProj, createTransformFromCoordinateTransform(inverse));\n}\n\n\n/**\n * Transforms a coordinate from longitude/latitude to a different projection.\n * @param {module:ol/coordinate~Coordinate} coordinate Coordinate as longitude and latitude, i.e.\n *     an array with longitude as 1st and latitude as 2nd element.\n * @param {module:ol/proj~ProjectionLike=} opt_projection Target projection. The\n *     default is Web Mercator, i.e. 'EPSG:3857'.\n * @return {module:ol/coordinate~Coordinate} Coordinate projected to the target projection.\n * @api\n */\nexport function fromLonLat(coordinate, opt_projection) {\n  return transform(coordinate, 'EPSG:4326',\n    opt_projection !== undefined ? opt_projection : 'EPSG:3857');\n}\n\n\n/**\n * Transforms a coordinate to longitude/latitude.\n * @param {module:ol/coordinate~Coordinate} coordinate Projected coordinate.\n * @param {module:ol/proj~ProjectionLike=} opt_projection Projection of the coordinate.\n *     The default is Web Mercator, i.e. 'EPSG:3857'.\n * @return {module:ol/coordinate~Coordinate} Coordinate as longitude and latitude, i.e. an array\n *     with longitude as 1st and latitude as 2nd element.\n * @api\n */\nexport function toLonLat(coordinate, opt_projection) {\n  const lonLat = transform(coordinate,\n    opt_projection !== undefined ? opt_projection : 'EPSG:3857', 'EPSG:4326');\n  const lon = lonLat[0];\n  if (lon < -180 || lon > 180) {\n    lonLat[0] = modulo(lon + 180, 360) - 180;\n  }\n  return lonLat;\n}\n\n\n/**\n * Checks if two projections are the same, that is every coordinate in one\n * projection does represent the same geographic point as the same coordinate in\n * the other projection.\n *\n * @param {module:ol/proj/Projection} projection1 Projection 1.\n * @param {module:ol/proj/Projection} projection2 Projection 2.\n * @return {boolean} Equivalent.\n * @api\n */\nexport function equivalent(projection1, projection2) {\n  if (projection1 === projection2) {\n    return true;\n  }\n  const equalUnits = projection1.getUnits() === projection2.getUnits();\n  if (projection1.getCode() === projection2.getCode()) {\n    return equalUnits;\n  } else {\n    const transformFunc = getTransformFromProjections(projection1, projection2);\n    return transformFunc === cloneTransform && equalUnits;\n  }\n}\n\n\n/**\n * Searches in the list of transform functions for the function for converting\n * coordinates from the source projection to the destination projection.\n *\n * @param {module:ol/proj/Projection} sourceProjection Source Projection object.\n * @param {module:ol/proj/Projection} destinationProjection Destination Projection\n *     object.\n * @return {module:ol/proj~TransformFunction} Transform function.\n */\nexport function getTransformFromProjections(sourceProjection, destinationProjection) {\n  const sourceCode = sourceProjection.getCode();\n  const destinationCode = destinationProjection.getCode();\n  let transformFunc = getTransformFunc(sourceCode, destinationCode);\n  if (!transformFunc) {\n    transformFunc = identityTransform;\n  }\n  return transformFunc;\n}\n\n\n/**\n * Given the projection-like objects, searches for a transformation\n * function to convert a coordinates array from the source projection to the\n * destination projection.\n *\n * @param {module:ol/proj~ProjectionLike} source Source.\n * @param {module:ol/proj~ProjectionLike} destination Destination.\n * @return {module:ol/proj~TransformFunction} Transform function.\n * @api\n */\nexport function getTransform(source, destination) {\n  const sourceProjection = get(source);\n  const destinationProjection = get(destination);\n  return getTransformFromProjections(sourceProjection, destinationProjection);\n}\n\n\n/**\n * Transforms a coordinate from source projection to destination projection.\n * This returns a new coordinate (and does not modify the original).\n *\n * See {@link module:ol/proj~transformExtent} for extent transformation.\n * See the transform method of {@link module:ol/geom/Geometry~Geometry} and its\n * subclasses for geometry transforms.\n *\n * @param {module:ol/coordinate~Coordinate} coordinate Coordinate.\n * @param {module:ol/proj~ProjectionLike} source Source projection-like.\n * @param {module:ol/proj~ProjectionLike} destination Destination projection-like.\n * @return {module:ol/coordinate~Coordinate} Coordinate.\n * @api\n */\nexport function transform(coordinate, source, destination) {\n  const transformFunc = getTransform(source, destination);\n  return transformFunc(coordinate, undefined, coordinate.length);\n}\n\n\n/**\n * Transforms an extent from source projection to destination projection.  This\n * returns a new extent (and does not modify the original).\n *\n * @param {module:ol/extent~Extent} extent The extent to transform.\n * @param {module:ol/proj~ProjectionLike} source Source projection-like.\n * @param {module:ol/proj~ProjectionLike} destination Destination projection-like.\n * @return {module:ol/extent~Extent} The transformed extent.\n * @api\n */\nexport function transformExtent(extent, source, destination) {\n  const transformFunc = getTransform(source, destination);\n  return applyTransform(extent, transformFunc);\n}\n\n\n/**\n * Transforms the given point to the destination projection.\n *\n * @param {module:ol/coordinate~Coordinate} point Point.\n * @param {module:ol/proj/Projection} sourceProjection Source projection.\n * @param {module:ol/proj/Projection} destinationProjection Destination projection.\n * @return {module:ol/coordinate~Coordinate} Point.\n */\nexport function transformWithProjections(point, sourceProjection, destinationProjection) {\n  const transformFunc = getTransformFromProjections(sourceProjection, destinationProjection);\n  return transformFunc(point);\n}\n\n/**\n * Add transforms to and from EPSG:4326 and EPSG:3857.  This function is called\n * by when this module is executed and should only need to be called again after\n * `clearAllProjections()` is called (e.g. in tests).\n */\nexport function addCommon() {\n  // Add transformations that don't alter coordinates to convert within set of\n  // projections with equal meaning.\n  addEquivalentProjections(EPSG3857_PROJECTIONS);\n  addEquivalentProjections(EPSG4326_PROJECTIONS);\n  // Add transformations to convert EPSG:4326 like coordinates to EPSG:3857 like\n  // coordinates and back.\n  addEquivalentTransforms(EPSG4326_PROJECTIONS, EPSG3857_PROJECTIONS, fromEPSG4326, toEPSG4326);\n}\n\naddCommon();\n","/**\n * @module ol/layer/Tile\n */\nimport {inherits} from '../util.js';\nimport LayerType from '../LayerType.js';\nimport Layer from '../layer/Layer.js';\nimport TileProperty from '../layer/TileProperty.js';\nimport {assign} from '../obj.js';\n\n\n/**\n * @typedef {Object} Options\n * @property {number} [opacity=1] Opacity (0, 1).\n * @property {boolean} [visible=true] Visibility.\n * @property {module:ol/extent~Extent} [extent] The bounding extent for layer rendering.  The layer will not be\n * rendered outside of this extent.\n * @property {number} [zIndex=0] The z-index for layer rendering.  At rendering time, the layers\n * will be ordered, first by Z-index and then by position.\n * @property {number} [minResolution] The minimum resolution (inclusive) at which this layer will be\n * visible.\n * @property {number} [maxResolution] The maximum resolution (exclusive) below which this layer will\n * be visible.\n * @property {number} [preload=0] Preload. Load low-resolution tiles up to `preload` levels. `0`\n * means no preloading.\n * @property {module:ol/source/Tile} [source] Source for this layer.\n * @property {module:ol/PluggableMap} [map] Sets the layer as overlay on a map. The map will not manage\n * this layer in its layers collection, and the layer will be rendered on top. This is useful for\n * temporary layers. The standard way to add a layer to a map and have it managed by the map is to\n * use {@link module:ol/Map#addLayer}.\n * @property {boolean} [useInterimTilesOnError=true] Use interim tiles on error.\n */\n\n\n/**\n * @classdesc\n * For layer sources that provide pre-rendered, tiled images in grids that are\n * organized by zoom levels for specific resolutions.\n * Note that any property set in the options is set as a {@link module:ol/Object~BaseObject}\n * property on the layer object; for example, setting `title: 'My Title'` in the\n * options means that `title` is observable, and has get/set accessors.\n *\n * @constructor\n * @extends {module:ol/layer/Layer}\n * @fires module:ol/render/Event~RenderEvent\n * @param {module:ol/layer/Tile~Options=} opt_options Tile layer options.\n * @api\n */\nconst TileLayer = function(opt_options) {\n  const options = opt_options ? opt_options : {};\n\n  const baseOptions = assign({}, options);\n\n  delete baseOptions.preload;\n  delete baseOptions.useInterimTilesOnError;\n  Layer.call(this,  /** @type {module:ol/layer/Layer~Options} */ (baseOptions));\n\n  this.setPreload(options.preload !== undefined ? options.preload : 0);\n  this.setUseInterimTilesOnError(options.useInterimTilesOnError !== undefined ?\n    options.useInterimTilesOnError : true);\n\n  /**\n   * The layer type.\n   * @protected\n   * @type {module:ol/LayerType}\n   */\n  this.type = LayerType.TILE;\n\n};\n\ninherits(TileLayer, Layer);\n\n\n/**\n * Return the level as number to which we will preload tiles up to.\n * @return {number} The level to preload tiles up to.\n * @observable\n * @api\n */\nTileLayer.prototype.getPreload = function() {\n  return /** @type {number} */ (this.get(TileProperty.PRELOAD));\n};\n\n\n/**\n * Return the associated {@link module:ol/source/Tile tilesource} of the layer.\n * @function\n * @return {module:ol/source/Tile} Source.\n * @api\n */\nTileLayer.prototype.getSource;\n\n\n/**\n * Set the level as number to which we will preload tiles up to.\n * @param {number} preload The level to preload tiles up to.\n * @observable\n * @api\n */\nTileLayer.prototype.setPreload = function(preload) {\n  this.set(TileProperty.PRELOAD, preload);\n};\n\n\n/**\n * Whether we use interim tiles on error.\n * @return {boolean} Use interim tiles on error.\n * @observable\n * @api\n */\nTileLayer.prototype.getUseInterimTilesOnError = function() {\n  return /** @type {boolean} */ (this.get(TileProperty.USE_INTERIM_TILES_ON_ERROR));\n};\n\n\n/**\n * Set whether we use interim tiles on error.\n * @param {boolean} useInterimTilesOnError Use interim tiles on error.\n * @observable\n * @api\n */\nTileLayer.prototype.setUseInterimTilesOnError = function(useInterimTilesOnError) {\n  this.set(TileProperty.USE_INTERIM_TILES_ON_ERROR, useInterimTilesOnError);\n};\nexport default TileLayer;\n","/**\n * @module ol/source/OSM\n */\nimport {inherits} from '../util.js';\nimport XYZ from '../source/XYZ.js';\n\n\n/**\n * The attribution containing a link to the OpenStreetMap Copyright and License\n * page.\n * @const\n * @type {string}\n * @api\n */\nexport const ATTRIBUTION = '&copy; ' +\n      '<a href=\"https://www.openstreetmap.org/copyright\">OpenStreetMap</a> ' +\n      'contributors.';\n\n\n/**\n * @typedef {Object} Options\n * @property {module:ol/source/Source~AttributionLike} [attributions] Attributions.\n * @property {number} [cacheSize=2048] Cache size.\n * @property {null|string} [crossOrigin] The `crossOrigin` attribute for loaded images.  Note that\n * you must provide a `crossOrigin` value if you are using the WebGL renderer or if you want to\n * access pixel data with the Canvas renderer.  See\n * {@link https://developer.mozilla.org/en-US/docs/Web/HTML/CORS_enabled_image} for more detail.\n * @property {number} [maxZoom=19] Max zoom.\n * @property {boolean} [opaque=true] Whether the layer is opaque.\n * @property {number} [reprojectionErrorThreshold=1.5] Maximum allowed reprojection error (in pixels).\n * Higher values can increase reprojection performance, but decrease precision.\n * @property {module:ol/Tile~LoadFunction} [tileLoadFunction] Optional function to load a tile given a URL. The default is\n * ```js\n * function(imageTile, src) {\n *   imageTile.getImage().src = src;\n * };\n * ```\n * @property {string} [url='https://{a-c}.tile.openstreetmap.org/{z}/{x}/{y}.png'] URL template.\n * Must include `{x}`, `{y}` or `{-y}`, and `{z}` placeholders.\n * @property {boolean} [wrapX=true] Whether to wrap the world horizontally.\n */\n\n\n/**\n * @classdesc\n * Layer source for the OpenStreetMap tile server.\n *\n * @constructor\n * @extends {module:ol/source/XYZ}\n * @param {module:ol/source/OSM~Options=} [opt_options] Open Street Map options.\n * @api\n */\nconst OSM = function(opt_options) {\n\n  const options = opt_options || {};\n\n  let attributions;\n  if (options.attributions !== undefined) {\n    attributions = options.attributions;\n  } else {\n    attributions = [ATTRIBUTION];\n  }\n\n  const crossOrigin = options.crossOrigin !== undefined ?\n    options.crossOrigin : 'anonymous';\n\n  const url = options.url !== undefined ?\n    options.url : 'https://{a-c}.tile.openstreetmap.org/{z}/{x}/{y}.png';\n\n  XYZ.call(this, {\n    attributions: attributions,\n    cacheSize: options.cacheSize,\n    crossOrigin: crossOrigin,\n    opaque: options.opaque !== undefined ? options.opaque : true,\n    maxZoom: options.maxZoom !== undefined ? options.maxZoom : 19,\n    reprojectionErrorThreshold: options.reprojectionErrorThreshold,\n    tileLoadFunction: options.tileLoadFunction,\n    url: url,\n    wrapX: options.wrapX\n  });\n\n};\n\ninherits(OSM, XYZ);\n\nexport default OSM;\n","/**\n * @module ol/xml\n */\nimport {extend} from './array.js';\n\n\n/**\n * When using {@link module:ol/xml~makeChildAppender} or\n * {@link module:ol/xml~makeSimpleNodeFactory}, the top `objectStack` item needs\n * to have this structure.\n * @typedef {Object} NodeStackItem\n * @property {Node} node\n */\n\n\n/**\n * @typedef {function(Node, Array.<*>)} Parser\n */\n\n\n/**\n * @typedef {function(Node, *, Array.<*>)} Serializer\n */\n\n\n/**\n * This document should be used when creating nodes for XML serializations. This\n * document is also used by {@link module:ol/xml~createElementNS}\n * @const\n * @type {Document}\n */\nexport const DOCUMENT = document.implementation.createDocument('', '', null);\n\n\n/**\n * @type {string}\n */\nexport const XML_SCHEMA_INSTANCE_URI = 'http://www.w3.org/2001/XMLSchema-instance';\n\n\n/**\n * @param {string} namespaceURI Namespace URI.\n * @param {string} qualifiedName Qualified name.\n * @return {Node} Node.\n */\nexport function createElementNS(namespaceURI, qualifiedName) {\n  return DOCUMENT.createElementNS(namespaceURI, qualifiedName);\n}\n\n\n/**\n * Recursively grab all text content of child nodes into a single string.\n * @param {Node} node Node.\n * @param {boolean} normalizeWhitespace Normalize whitespace: remove all line\n * breaks.\n * @return {string} All text content.\n * @api\n */\nexport function getAllTextContent(node, normalizeWhitespace) {\n  return getAllTextContent_(node, normalizeWhitespace, []).join('');\n}\n\n\n/**\n * Recursively grab all text content of child nodes into a single string.\n * @param {Node} node Node.\n * @param {boolean} normalizeWhitespace Normalize whitespace: remove all line\n * breaks.\n * @param {Array.<string>} accumulator Accumulator.\n * @private\n * @return {Array.<string>} Accumulator.\n */\nexport function getAllTextContent_(node, normalizeWhitespace, accumulator) {\n  if (node.nodeType == Node.CDATA_SECTION_NODE ||\n      node.nodeType == Node.TEXT_NODE) {\n    if (normalizeWhitespace) {\n      accumulator.push(String(node.nodeValue).replace(/(\\r\\n|\\r|\\n)/g, ''));\n    } else {\n      accumulator.push(node.nodeValue);\n    }\n  } else {\n    let n;\n    for (n = node.firstChild; n; n = n.nextSibling) {\n      getAllTextContent_(n, normalizeWhitespace, accumulator);\n    }\n  }\n  return accumulator;\n}\n\n\n/**\n * @param {?} value Value.\n * @return {boolean} Is document.\n */\nexport function isDocument(value) {\n  return value instanceof Document;\n}\n\n\n/**\n * @param {?} value Value.\n * @return {boolean} Is node.\n */\nexport function isNode(value) {\n  return value instanceof Node;\n}\n\n\n/**\n * @param {Node} node Node.\n * @param {?string} namespaceURI Namespace URI.\n * @param {string} name Attribute name.\n * @return {string} Value\n */\nexport function getAttributeNS(node, namespaceURI, name) {\n  return node.getAttributeNS(namespaceURI, name) || '';\n}\n\n\n/**\n * Parse an XML string to an XML Document.\n * @param {string} xml XML.\n * @return {Document} Document.\n * @api\n */\nexport function parse(xml) {\n  return new DOMParser().parseFromString(xml, 'application/xml');\n}\n\n\n/**\n * Make an array extender function for extending the array at the top of the\n * object stack.\n * @param {function(this: T, Node, Array.<*>): (Array.<*>|undefined)}\n *     valueReader Value reader.\n * @param {T=} opt_this The object to use as `this` in `valueReader`.\n * @return {module:ol/xml~Parser} Parser.\n * @template T\n */\nexport function makeArrayExtender(valueReader, opt_this) {\n  return (\n    /**\n     * @param {Node} node Node.\n     * @param {Array.<*>} objectStack Object stack.\n     */\n    function(node, objectStack) {\n      const value = valueReader.call(opt_this !== undefined ? opt_this : this, node, objectStack);\n      if (value !== undefined) {\n        const array = /** @type {Array.<*>} */ (objectStack[objectStack.length - 1]);\n        extend(array, value);\n      }\n    }\n  );\n}\n\n\n/**\n * Make an array pusher function for pushing to the array at the top of the\n * object stack.\n * @param {function(this: T, Node, Array.<*>): *} valueReader Value reader.\n * @param {T=} opt_this The object to use as `this` in `valueReader`.\n * @return {module:ol/xml~Parser} Parser.\n * @template T\n */\nexport function makeArrayPusher(valueReader, opt_this) {\n  return (\n    /**\n     * @param {Node} node Node.\n     * @param {Array.<*>} objectStack Object stack.\n     */\n    function(node, objectStack) {\n      const value = valueReader.call(opt_this !== undefined ? opt_this : this, node, objectStack);\n      if (value !== undefined) {\n        const array = /** @type {Array.<*>} */ (objectStack[objectStack.length - 1]);\n        array.push(value);\n      }\n    });\n}\n\n\n/**\n * Make an object stack replacer function for replacing the object at the\n * top of the stack.\n * @param {function(this: T, Node, Array.<*>): *} valueReader Value reader.\n * @param {T=} opt_this The object to use as `this` in `valueReader`.\n * @return {module:ol/xml~Parser} Parser.\n * @template T\n */\nexport function makeReplacer(valueReader, opt_this) {\n  return (\n    /**\n     * @param {Node} node Node.\n     * @param {Array.<*>} objectStack Object stack.\n     */\n    function(node, objectStack) {\n      const value = valueReader.call(opt_this !== undefined ? opt_this : this, node, objectStack);\n      if (value !== undefined) {\n        objectStack[objectStack.length - 1] = value;\n      }\n    });\n}\n\n\n/**\n * Make an object property pusher function for adding a property to the\n * object at the top of the stack.\n * @param {function(this: T, Node, Array.<*>): *} valueReader Value reader.\n * @param {string=} opt_property Property.\n * @param {T=} opt_this The object to use as `this` in `valueReader`.\n * @return {module:ol/xml~Parser} Parser.\n * @template T\n */\nexport function makeObjectPropertyPusher(valueReader, opt_property, opt_this) {\n  return (\n    /**\n     * @param {Node} node Node.\n     * @param {Array.<*>} objectStack Object stack.\n     */\n    function(node, objectStack) {\n      const value = valueReader.call(opt_this !== undefined ? opt_this : this, node, objectStack);\n      if (value !== undefined) {\n        const object = /** @type {!Object} */ (objectStack[objectStack.length - 1]);\n        const property = opt_property !== undefined ? opt_property : node.localName;\n        let array;\n        if (property in object) {\n          array = object[property];\n        } else {\n          array = object[property] = [];\n        }\n        array.push(value);\n      }\n    });\n}\n\n\n/**\n * Make an object property setter function.\n * @param {function(this: T, Node, Array.<*>): *} valueReader Value reader.\n * @param {string=} opt_property Property.\n * @param {T=} opt_this The object to use as `this` in `valueReader`.\n * @return {module:ol/xml~Parser} Parser.\n * @template T\n */\nexport function makeObjectPropertySetter(valueReader, opt_property, opt_this) {\n  return (\n    /**\n     * @param {Node} node Node.\n     * @param {Array.<*>} objectStack Object stack.\n     */\n    function(node, objectStack) {\n      const value = valueReader.call(opt_this !== undefined ? opt_this : this, node, objectStack);\n      if (value !== undefined) {\n        const object = /** @type {!Object} */ (objectStack[objectStack.length - 1]);\n        const property = opt_property !== undefined ? opt_property : node.localName;\n        object[property] = value;\n      }\n    });\n}\n\n\n/**\n * Create a serializer that appends nodes written by its `nodeWriter` to its\n * designated parent. The parent is the `node` of the\n * {@link module:ol/xml~NodeStackItem} at the top of the `objectStack`.\n * @param {function(this: T, Node, V, Array.<*>)}\n *     nodeWriter Node writer.\n * @param {T=} opt_this The object to use as `this` in `nodeWriter`.\n * @return {module:ol/xml~Serializer} Serializer.\n * @template T, V\n */\nexport function makeChildAppender(nodeWriter, opt_this) {\n  return function(node, value, objectStack) {\n    nodeWriter.call(opt_this !== undefined ? opt_this : this, node, value, objectStack);\n    const parent = /** @type {module:ol/xml~NodeStackItem} */ (objectStack[objectStack.length - 1]);\n    const parentNode = parent.node;\n    parentNode.appendChild(node);\n  };\n}\n\n\n/**\n * Create a serializer that calls the provided `nodeWriter` from\n * {@link module:ol/xml~serialize}. This can be used by the parent writer to have the\n * 'nodeWriter' called with an array of values when the `nodeWriter` was\n * designed to serialize a single item. An example would be a LineString\n * geometry writer, which could be reused for writing MultiLineString\n * geometries.\n * @param {function(this: T, Node, V, Array.<*>)}\n *     nodeWriter Node writer.\n * @param {T=} opt_this The object to use as `this` in `nodeWriter`.\n * @return {module:ol/xml~Serializer} Serializer.\n * @template T, V\n */\nexport function makeArraySerializer(nodeWriter, opt_this) {\n  let serializersNS, nodeFactory;\n  return function(node, value, objectStack) {\n    if (serializersNS === undefined) {\n      serializersNS = {};\n      const serializers = {};\n      serializers[node.localName] = nodeWriter;\n      serializersNS[node.namespaceURI] = serializers;\n      nodeFactory = makeSimpleNodeFactory(node.localName);\n    }\n    serialize(serializersNS, nodeFactory, value, objectStack);\n  };\n}\n\n\n/**\n * Create a node factory which can use the `opt_keys` passed to\n * {@link module:ol/xml~serialize} or {@link module:ol/xml~pushSerializeAndPop} as node names,\n * or a fixed node name. The namespace of the created nodes can either be fixed,\n * or the parent namespace will be used.\n * @param {string=} opt_nodeName Fixed node name which will be used for all\n *     created nodes. If not provided, the 3rd argument to the resulting node\n *     factory needs to be provided and will be the nodeName.\n * @param {string=} opt_namespaceURI Fixed namespace URI which will be used for\n *     all created nodes. If not provided, the namespace of the parent node will\n *     be used.\n * @return {function(*, Array.<*>, string=): (Node|undefined)} Node factory.\n */\nexport function makeSimpleNodeFactory(opt_nodeName, opt_namespaceURI) {\n  const fixedNodeName = opt_nodeName;\n  return (\n    /**\n     * @param {*} value Value.\n     * @param {Array.<*>} objectStack Object stack.\n     * @param {string=} opt_nodeName Node name.\n     * @return {Node} Node.\n     */\n    function(value, objectStack, opt_nodeName) {\n      const context = /** @type {module:ol/xml~NodeStackItem} */ (objectStack[objectStack.length - 1]);\n      const node = context.node;\n      let nodeName = fixedNodeName;\n      if (nodeName === undefined) {\n        nodeName = opt_nodeName;\n      }\n\n      const namespaceURI = opt_namespaceURI !== undefined ? opt_namespaceURI : node.namespaceURI;\n      return createElementNS(namespaceURI, /** @type {string} */ (nodeName));\n    }\n  );\n}\n\n\n/**\n * A node factory that creates a node using the parent's `namespaceURI` and the\n * `nodeName` passed by {@link module:ol/xml~serialize} or\n * {@link module:ol/xml~pushSerializeAndPop} to the node factory.\n * @const\n * @type {function(*, Array.<*>, string=): (Node|undefined)}\n */\nexport const OBJECT_PROPERTY_NODE_FACTORY = makeSimpleNodeFactory();\n\n\n/**\n * Create an array of `values` to be used with {@link module:ol/xml~serialize} or\n * {@link module:ol/xml~pushSerializeAndPop}, where `orderedKeys` has to be provided as\n * `opt_key` argument.\n * @param {Object.<string, V>} object Key-value pairs for the sequence. Keys can\n *     be a subset of the `orderedKeys`.\n * @param {Array.<string>} orderedKeys Keys in the order of the sequence.\n * @return {Array.<V>} Values in the order of the sequence. The resulting array\n *     has the same length as the `orderedKeys` array. Values that are not\n *     present in `object` will be `undefined` in the resulting array.\n * @template V\n */\nexport function makeSequence(object, orderedKeys) {\n  const length = orderedKeys.length;\n  const sequence = new Array(length);\n  for (let i = 0; i < length; ++i) {\n    sequence[i] = object[orderedKeys[i]];\n  }\n  return sequence;\n}\n\n\n/**\n * Create a namespaced structure, using the same values for each namespace.\n * This can be used as a starting point for versioned parsers, when only a few\n * values are version specific.\n * @param {Array.<string>} namespaceURIs Namespace URIs.\n * @param {T} structure Structure.\n * @param {Object.<string, T>=} opt_structureNS Namespaced structure to add to.\n * @return {Object.<string, T>} Namespaced structure.\n * @template T\n */\nexport function makeStructureNS(namespaceURIs, structure, opt_structureNS) {\n  /**\n   * @type {Object.<string, T>}\n   */\n  const structureNS = opt_structureNS !== undefined ? opt_structureNS : {};\n  let i, ii;\n  for (i = 0, ii = namespaceURIs.length; i < ii; ++i) {\n    structureNS[namespaceURIs[i]] = structure;\n  }\n  return structureNS;\n}\n\n\n/**\n * Parse a node using the parsers and object stack.\n * @param {Object.<string, Object.<string, module:ol/xml~Parser>>} parsersNS\n *     Parsers by namespace.\n * @param {Node} node Node.\n * @param {Array.<*>} objectStack Object stack.\n * @param {*=} opt_this The object to use as `this`.\n */\nexport function parseNode(parsersNS, node, objectStack, opt_this) {\n  let n;\n  for (n = node.firstElementChild; n; n = n.nextElementSibling) {\n    const parsers = parsersNS[n.namespaceURI];\n    if (parsers !== undefined) {\n      const parser = parsers[n.localName];\n      if (parser !== undefined) {\n        parser.call(opt_this, n, objectStack);\n      }\n    }\n  }\n}\n\n\n/**\n * Push an object on top of the stack, parse and return the popped object.\n * @param {T} object Object.\n * @param {Object.<string, Object.<string, module:ol/xml~Parser>>} parsersNS\n *     Parsers by namespace.\n * @param {Node} node Node.\n * @param {Array.<*>} objectStack Object stack.\n * @param {*=} opt_this The object to use as `this`.\n * @return {T} Object.\n * @template T\n */\nexport function pushParseAndPop(object, parsersNS, node, objectStack, opt_this) {\n  objectStack.push(object);\n  parseNode(parsersNS, node, objectStack, opt_this);\n  return /** @type {T} */ (objectStack.pop());\n}\n\n\n/**\n * Walk through an array of `values` and call a serializer for each value.\n * @param {Object.<string, Object.<string, module:ol/xml~Serializer>>} serializersNS\n *     Namespaced serializers.\n * @param {function(this: T, *, Array.<*>, (string|undefined)): (Node|undefined)} nodeFactory\n *     Node factory. The `nodeFactory` creates the node whose namespace and name\n *     will be used to choose a node writer from `serializersNS`. This\n *     separation allows us to decide what kind of node to create, depending on\n *     the value we want to serialize. An example for this would be different\n *     geometry writers based on the geometry type.\n * @param {Array.<*>} values Values to serialize. An example would be an array\n *     of {@link module:ol/Feature~Feature} instances.\n * @param {Array.<*>} objectStack Node stack.\n * @param {Array.<string>=} opt_keys Keys of the `values`. Will be passed to the\n *     `nodeFactory`. This is used for serializing object literals where the\n *     node name relates to the property key. The array length of `opt_keys` has\n *     to match the length of `values`. For serializing a sequence, `opt_keys`\n *     determines the order of the sequence.\n * @param {T=} opt_this The object to use as `this` for the node factory and\n *     serializers.\n * @template T\n */\nexport function serialize(\n  serializersNS, nodeFactory, values, objectStack, opt_keys, opt_this) {\n  const length = (opt_keys !== undefined ? opt_keys : values).length;\n  let value, node;\n  for (let i = 0; i < length; ++i) {\n    value = values[i];\n    if (value !== undefined) {\n      node = nodeFactory.call(opt_this !== undefined ? opt_this : this, value, objectStack,\n        opt_keys !== undefined ? opt_keys[i] : undefined);\n      if (node !== undefined) {\n        serializersNS[node.namespaceURI][node.localName]\n          .call(opt_this, node, value, objectStack);\n      }\n    }\n  }\n}\n\n\n/**\n * @param {O} object Object.\n * @param {Object.<string, Object.<string, module:ol/xml~Serializer>>} serializersNS\n *     Namespaced serializers.\n * @param {function(this: T, *, Array.<*>, (string|undefined)): (Node|undefined)} nodeFactory\n *     Node factory. The `nodeFactory` creates the node whose namespace and name\n *     will be used to choose a node writer from `serializersNS`. This\n *     separation allows us to decide what kind of node to create, depending on\n *     the value we want to serialize. An example for this would be different\n *     geometry writers based on the geometry type.\n * @param {Array.<*>} values Values to serialize. An example would be an array\n *     of {@link module:ol/Feature~Feature} instances.\n * @param {Array.<*>} objectStack Node stack.\n * @param {Array.<string>=} opt_keys Keys of the `values`. Will be passed to the\n *     `nodeFactory`. This is used for serializing object literals where the\n *     node name relates to the property key. The array length of `opt_keys` has\n *     to match the length of `values`. For serializing a sequence, `opt_keys`\n *     determines the order of the sequence.\n * @param {T=} opt_this The object to use as `this` for the node factory and\n *     serializers.\n * @return {O|undefined} Object.\n * @template O, T\n */\nexport function pushSerializeAndPop(object, serializersNS, nodeFactory, values, objectStack, opt_keys, opt_this) {\n  objectStack.push(object);\n  serialize(serializersNS, nodeFactory, values, objectStack, opt_keys, opt_this);\n  return /** @type {O|undefined} */ (objectStack.pop());\n}\n","/**\n * @module ol/format/xsd\n */\nimport {getAllTextContent, DOCUMENT} from '../xml.js';\nimport {padNumber} from '../string.js';\n\n\n/**\n * @param {Node} node Node.\n * @return {boolean|undefined} Boolean.\n */\nexport function readBoolean(node) {\n  const s = getAllTextContent(node, false);\n  return readBooleanString(s);\n}\n\n\n/**\n * @param {string} string String.\n * @return {boolean|undefined} Boolean.\n */\nexport function readBooleanString(string) {\n  const m = /^\\s*(true|1)|(false|0)\\s*$/.exec(string);\n  if (m) {\n    return m[1] !== undefined || false;\n  } else {\n    return undefined;\n  }\n}\n\n\n/**\n * @param {Node} node Node.\n * @return {number|undefined} DateTime in seconds.\n */\nexport function readDateTime(node) {\n  const s = getAllTextContent(node, false);\n  const dateTime = Date.parse(s);\n  return isNaN(dateTime) ? undefined : dateTime / 1000;\n}\n\n\n/**\n * @param {Node} node Node.\n * @return {number|undefined} Decimal.\n */\nexport function readDecimal(node) {\n  const s = getAllTextContent(node, false);\n  return readDecimalString(s);\n}\n\n\n/**\n * @param {string} string String.\n * @return {number|undefined} Decimal.\n */\nexport function readDecimalString(string) {\n  // FIXME check spec\n  const m = /^\\s*([+\\-]?\\d*\\.?\\d+(?:e[+\\-]?\\d+)?)\\s*$/i.exec(string);\n  if (m) {\n    return parseFloat(m[1]);\n  } else {\n    return undefined;\n  }\n}\n\n\n/**\n * @param {Node} node Node.\n * @return {number|undefined} Non negative integer.\n */\nexport function readNonNegativeInteger(node) {\n  const s = getAllTextContent(node, false);\n  return readNonNegativeIntegerString(s);\n}\n\n\n/**\n * @param {string} string String.\n * @return {number|undefined} Non negative integer.\n */\nexport function readNonNegativeIntegerString(string) {\n  const m = /^\\s*(\\d+)\\s*$/.exec(string);\n  if (m) {\n    return parseInt(m[1], 10);\n  } else {\n    return undefined;\n  }\n}\n\n\n/**\n * @param {Node} node Node.\n * @return {string|undefined} String.\n */\nexport function readString(node) {\n  return getAllTextContent(node, false).trim();\n}\n\n\n/**\n * @param {Node} node Node to append a TextNode with the boolean to.\n * @param {boolean} bool Boolean.\n */\nexport function writeBooleanTextNode(node, bool) {\n  writeStringTextNode(node, (bool) ? '1' : '0');\n}\n\n\n/**\n * @param {Node} node Node to append a CDATA Section with the string to.\n * @param {string} string String.\n */\nexport function writeCDATASection(node, string) {\n  node.appendChild(DOCUMENT.createCDATASection(string));\n}\n\n\n/**\n * @param {Node} node Node to append a TextNode with the dateTime to.\n * @param {number} dateTime DateTime in seconds.\n */\nexport function writeDateTimeTextNode(node, dateTime) {\n  const date = new Date(dateTime * 1000);\n  const string = date.getUTCFullYear() + '-' +\n      padNumber(date.getUTCMonth() + 1, 2) + '-' +\n      padNumber(date.getUTCDate(), 2) + 'T' +\n      padNumber(date.getUTCHours(), 2) + ':' +\n      padNumber(date.getUTCMinutes(), 2) + ':' +\n      padNumber(date.getUTCSeconds(), 2) + 'Z';\n  node.appendChild(DOCUMENT.createTextNode(string));\n}\n\n\n/**\n * @param {Node} node Node to append a TextNode with the decimal to.\n * @param {number} decimal Decimal.\n */\nexport function writeDecimalTextNode(node, decimal) {\n  const string = decimal.toPrecision();\n  node.appendChild(DOCUMENT.createTextNode(string));\n}\n\n\n/**\n * @param {Node} node Node to append a TextNode with the decimal to.\n * @param {number} nonNegativeInteger Non negative integer.\n */\nexport function writeNonNegativeIntegerTextNode(node, nonNegativeInteger) {\n  const string = nonNegativeInteger.toString();\n  node.appendChild(DOCUMENT.createTextNode(string));\n}\n\n\n/**\n * @param {Node} node Node to append a TextNode with the string to.\n * @param {string} string String.\n */\nexport function writeStringTextNode(node, string) {\n  node.appendChild(DOCUMENT.createTextNode(string));\n}\n","/**\n * @module ol/events\n */\nimport {clear} from './obj.js';\n\n\n/**\n * Key to use with {@link module:ol/Observable~Observable#unByKey}.\n * @typedef {Object} EventsKey\n * @property {Object} [bindTo]\n * @property {module:ol/events~ListenerFunction} [boundListener]\n * @property {boolean} callOnce\n * @property {number} [deleteIndex]\n * @property {module:ol/events~ListenerFunction} listener\n * @property {EventTarget|module:ol/events/EventTarget} target\n * @property {string} type\n * @api\n */\n\n\n/**\n * Listener function. This function is called with an event object as argument.\n * When the function returns `false`, event propagation will stop.\n *\n * @typedef {function(module:ol/events/Event)|function(module:ol/events/Event): boolean} ListenerFunction\n * @api\n */\n\n\n/**\n * @param {module:ol/events~EventsKey} listenerObj Listener object.\n * @return {module:ol/events~ListenerFunction} Bound listener.\n */\nexport function bindListener(listenerObj) {\n  const boundListener = function(evt) {\n    const listener = listenerObj.listener;\n    const bindTo = listenerObj.bindTo || listenerObj.target;\n    if (listenerObj.callOnce) {\n      unlistenByKey(listenerObj);\n    }\n    return listener.call(bindTo, evt);\n  };\n  listenerObj.boundListener = boundListener;\n  return boundListener;\n}\n\n\n/**\n * Finds the matching {@link module:ol/events~EventsKey} in the given listener\n * array.\n *\n * @param {!Array<!module:ol/events~EventsKey>} listeners Array of listeners.\n * @param {!Function} listener The listener function.\n * @param {Object=} opt_this The `this` value inside the listener.\n * @param {boolean=} opt_setDeleteIndex Set the deleteIndex on the matching\n *     listener, for {@link module:ol/events~unlistenByKey}.\n * @return {module:ol/events~EventsKey|undefined} The matching listener object.\n */\nexport function findListener(listeners, listener, opt_this, opt_setDeleteIndex) {\n  let listenerObj;\n  for (let i = 0, ii = listeners.length; i < ii; ++i) {\n    listenerObj = listeners[i];\n    if (listenerObj.listener === listener &&\n        listenerObj.bindTo === opt_this) {\n      if (opt_setDeleteIndex) {\n        listenerObj.deleteIndex = i;\n      }\n      return listenerObj;\n    }\n  }\n  return undefined;\n}\n\n\n/**\n * @param {module:ol/events/EventTarget~EventTargetLike} target Target.\n * @param {string} type Type.\n * @return {Array.<module:ol/events~EventsKey>|undefined} Listeners.\n */\nexport function getListeners(target, type) {\n  const listenerMap = target.ol_lm;\n  return listenerMap ? listenerMap[type] : undefined;\n}\n\n\n/**\n * Get the lookup of listeners.  If one does not exist on the target, it is\n * created.\n * @param {module:ol/events/EventTarget~EventTargetLike} target Target.\n * @return {!Object.<string, Array.<module:ol/events~EventsKey>>} Map of\n *     listeners by event type.\n */\nfunction getListenerMap(target) {\n  let listenerMap = target.ol_lm;\n  if (!listenerMap) {\n    listenerMap = target.ol_lm = {};\n  }\n  return listenerMap;\n}\n\n\n/**\n * Clean up all listener objects of the given type.  All properties on the\n * listener objects will be removed, and if no listeners remain in the listener\n * map, it will be removed from the target.\n * @param {module:ol/events/EventTarget~EventTargetLike} target Target.\n * @param {string} type Type.\n */\nfunction removeListeners(target, type) {\n  const listeners = getListeners(target, type);\n  if (listeners) {\n    for (let i = 0, ii = listeners.length; i < ii; ++i) {\n      target.removeEventListener(type, listeners[i].boundListener);\n      clear(listeners[i]);\n    }\n    listeners.length = 0;\n    const listenerMap = target.ol_lm;\n    if (listenerMap) {\n      delete listenerMap[type];\n      if (Object.keys(listenerMap).length === 0) {\n        delete target.ol_lm;\n      }\n    }\n  }\n}\n\n\n/**\n * Registers an event listener on an event target. Inspired by\n * {@link https://google.github.io/closure-library/api/source/closure/goog/events/events.js.src.html}\n *\n * This function efficiently binds a `listener` to a `this` object, and returns\n * a key for use with {@link module:ol/events~unlistenByKey}.\n *\n * @param {module:ol/events/EventTarget~EventTargetLike} target Event target.\n * @param {string} type Event type.\n * @param {module:ol/events~ListenerFunction} listener Listener.\n * @param {Object=} opt_this Object referenced by the `this` keyword in the\n *     listener. Default is the `target`.\n * @param {boolean=} opt_once If true, add the listener as one-off listener.\n * @return {module:ol/events~EventsKey} Unique key for the listener.\n */\nexport function listen(target, type, listener, opt_this, opt_once) {\n  const listenerMap = getListenerMap(target);\n  let listeners = listenerMap[type];\n  if (!listeners) {\n    listeners = listenerMap[type] = [];\n  }\n  let listenerObj = findListener(listeners, listener, opt_this, false);\n  if (listenerObj) {\n    if (!opt_once) {\n      // Turn one-off listener into a permanent one.\n      listenerObj.callOnce = false;\n    }\n  } else {\n    listenerObj = /** @type {module:ol/events~EventsKey} */ ({\n      bindTo: opt_this,\n      callOnce: !!opt_once,\n      listener: listener,\n      target: target,\n      type: type\n    });\n    target.addEventListener(type, bindListener(listenerObj));\n    listeners.push(listenerObj);\n  }\n\n  return listenerObj;\n}\n\n\n/**\n * Registers a one-off event listener on an event target. Inspired by\n * {@link https://google.github.io/closure-library/api/source/closure/goog/events/events.js.src.html}\n *\n * This function efficiently binds a `listener` as self-unregistering listener\n * to a `this` object, and returns a key for use with\n * {@link module:ol/events~unlistenByKey} in case the listener needs to be\n * unregistered before it is called.\n *\n * When {@link module:ol/events~listen} is called with the same arguments after this\n * function, the self-unregistering listener will be turned into a permanent\n * listener.\n *\n * @param {module:ol/events/EventTarget~EventTargetLike} target Event target.\n * @param {string} type Event type.\n * @param {module:ol/events~ListenerFunction} listener Listener.\n * @param {Object=} opt_this Object referenced by the `this` keyword in the\n *     listener. Default is the `target`.\n * @return {module:ol/events~EventsKey} Key for unlistenByKey.\n */\nexport function listenOnce(target, type, listener, opt_this) {\n  return listen(target, type, listener, opt_this, true);\n}\n\n\n/**\n * Unregisters an event listener on an event target. Inspired by\n * {@link https://google.github.io/closure-library/api/source/closure/goog/events/events.js.src.html}\n *\n * To return a listener, this function needs to be called with the exact same\n * arguments that were used for a previous {@link module:ol/events~listen} call.\n *\n * @param {module:ol/events/EventTarget~EventTargetLike} target Event target.\n * @param {string} type Event type.\n * @param {module:ol/events~ListenerFunction} listener Listener.\n * @param {Object=} opt_this Object referenced by the `this` keyword in the\n *     listener. Default is the `target`.\n */\nexport function unlisten(target, type, listener, opt_this) {\n  const listeners = getListeners(target, type);\n  if (listeners) {\n    const listenerObj = findListener(listeners, listener, opt_this, true);\n    if (listenerObj) {\n      unlistenByKey(listenerObj);\n    }\n  }\n}\n\n\n/**\n * Unregisters event listeners on an event target. Inspired by\n * {@link https://google.github.io/closure-library/api/source/closure/goog/events/events.js.src.html}\n *\n * The argument passed to this function is the key returned from\n * {@link module:ol/events~listen} or {@link module:ol/events~listenOnce}.\n *\n * @param {module:ol/events~EventsKey} key The key.\n */\nexport function unlistenByKey(key) {\n  if (key && key.target) {\n    key.target.removeEventListener(key.type, key.boundListener);\n    const listeners = getListeners(key.target, key.type);\n    if (listeners) {\n      const i = 'deleteIndex' in key ? key.deleteIndex : listeners.indexOf(key);\n      if (i !== -1) {\n        listeners.splice(i, 1);\n      }\n      if (listeners.length === 0) {\n        removeListeners(key.target, key.type);\n      }\n    }\n    clear(key);\n  }\n}\n\n\n/**\n * Unregisters all event listeners on an event target. Inspired by\n * {@link https://google.github.io/closure-library/api/source/closure/goog/events/events.js.src.html}\n *\n * @param {module:ol/events/EventTarget~EventTargetLike} target Target.\n */\nexport function unlistenAll(target) {\n  const listenerMap = getListenerMap(target);\n  for (const type in listenerMap) {\n    removeListeners(target, type);\n  }\n}\n","/**\n * @module ol/geom/GeometryType\n */\n\n/**\n * The geometry type. One of `'Point'`, `'LineString'`, `'LinearRing'`,\n * `'Polygon'`, `'MultiPoint'`, `'MultiLineString'`, `'MultiPolygon'`,\n * `'GeometryCollection'`, `'Circle'`.\n * @enum {string}\n */\nexport default {\n  POINT: 'Point',\n  LINE_STRING: 'LineString',\n  LINEAR_RING: 'LinearRing',\n  POLYGON: 'Polygon',\n  MULTI_POINT: 'MultiPoint',\n  MULTI_LINE_STRING: 'MultiLineString',\n  MULTI_POLYGON: 'MultiPolygon',\n  GEOMETRY_COLLECTION: 'GeometryCollection',\n  CIRCLE: 'Circle'\n};\n","/**\n * @module ol/webgl\n */\n\n\n/**\n * Constants taken from goog.webgl\n */\n\n\n/**\n * @const\n * @type {number}\n */\nexport const ONE = 1;\n\n\n/**\n * @const\n * @type {number}\n */\nexport const SRC_ALPHA = 0x0302;\n\n\n/**\n * @const\n * @type {number}\n */\nexport const COLOR_ATTACHMENT0 = 0x8CE0;\n\n\n/**\n * @const\n * @type {number}\n */\nexport const COLOR_BUFFER_BIT = 0x00004000;\n\n\n/**\n * @const\n * @type {number}\n */\nexport const TRIANGLES = 0x0004;\n\n\n/**\n * @const\n * @type {number}\n */\nexport const TRIANGLE_STRIP = 0x0005;\n\n\n/**\n * @const\n * @type {number}\n */\nexport const ONE_MINUS_SRC_ALPHA = 0x0303;\n\n\n/**\n * @const\n * @type {number}\n */\nexport const ARRAY_BUFFER = 0x8892;\n\n\n/**\n * @const\n * @type {number}\n */\nexport const ELEMENT_ARRAY_BUFFER = 0x8893;\n\n\n/**\n * @const\n * @type {number}\n */\nexport const STREAM_DRAW = 0x88E0;\n\n\n/**\n * @const\n * @type {number}\n */\nexport const STATIC_DRAW = 0x88E4;\n\n\n/**\n * @const\n * @type {number}\n */\nexport const DYNAMIC_DRAW = 0x88E8;\n\n\n/**\n * @const\n * @type {number}\n */\nexport const CULL_FACE = 0x0B44;\n\n\n/**\n * @const\n * @type {number}\n */\nexport const BLEND = 0x0BE2;\n\n\n/**\n * @const\n * @type {number}\n */\nexport const STENCIL_TEST = 0x0B90;\n\n\n/**\n * @const\n * @type {number}\n */\nexport const DEPTH_TEST = 0x0B71;\n\n\n/**\n * @const\n * @type {number}\n */\nexport const SCISSOR_TEST = 0x0C11;\n\n\n/**\n * @const\n * @type {number}\n */\nexport const UNSIGNED_BYTE = 0x1401;\n\n\n/**\n * @const\n * @type {number}\n */\nexport const UNSIGNED_SHORT = 0x1403;\n\n\n/**\n * @const\n * @type {number}\n */\nexport const UNSIGNED_INT = 0x1405;\n\n\n/**\n * @const\n * @type {number}\n */\nexport const FLOAT = 0x1406;\n\n\n/**\n * @const\n * @type {number}\n */\nexport const RGBA = 0x1908;\n\n\n/**\n * @const\n * @type {number}\n */\nexport const FRAGMENT_SHADER = 0x8B30;\n\n\n/**\n * @const\n * @type {number}\n */\nexport const VERTEX_SHADER = 0x8B31;\n\n\n/**\n * @const\n * @type {number}\n */\nexport const LINK_STATUS = 0x8B82;\n\n\n/**\n * @const\n * @type {number}\n */\nexport const LINEAR = 0x2601;\n\n\n/**\n * @const\n * @type {number}\n */\nexport const TEXTURE_MAG_FILTER = 0x2800;\n\n\n/**\n * @const\n * @type {number}\n */\nexport const TEXTURE_MIN_FILTER = 0x2801;\n\n\n/**\n * @const\n * @type {number}\n */\nexport const TEXTURE_WRAP_S = 0x2802;\n\n\n/**\n * @const\n * @type {number}\n */\nexport const TEXTURE_WRAP_T = 0x2803;\n\n\n/**\n * @const\n * @type {number}\n */\nexport const TEXTURE_2D = 0x0DE1;\n\n\n/**\n * @const\n * @type {number}\n */\nexport const TEXTURE0 = 0x84C0;\n\n\n/**\n * @const\n * @type {number}\n */\nexport const CLAMP_TO_EDGE = 0x812F;\n\n\n/**\n * @const\n * @type {number}\n */\nexport const COMPILE_STATUS = 0x8B81;\n\n\n/**\n * @const\n * @type {number}\n */\nexport const FRAMEBUFFER = 0x8D40;\n\n\n/** end of goog.webgl constants\n */\n\n\n/**\n * @const\n * @type {Array.<string>}\n */\nconst CONTEXT_IDS = [\n  'experimental-webgl',\n  'webgl',\n  'webkit-3d',\n  'moz-webgl'\n];\n\n\n/**\n * @param {HTMLCanvasElement} canvas Canvas.\n * @param {Object=} opt_attributes Attributes.\n * @return {WebGLRenderingContext} WebGL rendering context.\n */\nexport function getContext(canvas, opt_attributes) {\n  const ii = CONTEXT_IDS.length;\n  for (let i = 0; i < ii; ++i) {\n    try {\n      const context = canvas.getContext(CONTEXT_IDS[i], opt_attributes);\n      if (context) {\n        return /** @type {!WebGLRenderingContext} */ (context);\n      }\n    } catch (e) {\n      // pass\n    }\n  }\n  return null;\n}\n\n\n/**\n * Include debuggable shader sources.  Default is `true`. This should be set to\n * `false` for production builds.\n * @type {boolean}\n */\nexport const DEBUG = true;\n\n\n/**\n * The maximum supported WebGL texture size in pixels. If WebGL is not\n * supported, the value is set to `undefined`.\n * @type {number|undefined}\n */\nlet MAX_TEXTURE_SIZE; // value is set below\n\n\n/**\n * List of supported WebGL extensions.\n * @type {Array.<string>}\n */\nlet EXTENSIONS; // value is set below\n\n\n/**\n * True if both OpenLayers and browser support WebGL.\n * @const ol/has.WEBGL\n * @type {boolean}\n * @api\n */\nlet HAS = false;\n\n//TODO Remove side effects\nif (typeof window !== 'undefined' && 'WebGLRenderingContext' in window) {\n  try {\n    const canvas = /** @type {HTMLCanvasElement} */ (document.createElement('CANVAS'));\n    const gl = getContext(canvas, {failIfMajorPerformanceCaveat: true});\n    if (gl) {\n      HAS = true;\n      MAX_TEXTURE_SIZE = /** @type {number} */ (gl.getParameter(gl.MAX_TEXTURE_SIZE));\n      EXTENSIONS = gl.getSupportedExtensions();\n    }\n  } catch (e) {\n    // pass\n  }\n}\n\nexport {HAS, MAX_TEXTURE_SIZE, EXTENSIONS};\n","/**\n * @module ol/events/EventType\n */\n\n/**\n * @enum {string}\n * @const\n */\nexport default {\n  /**\n   * Generic change event. Triggered when the revision counter is increased.\n   * @event module:ol/events/Event~Event#change\n   * @api\n   */\n  CHANGE: 'change',\n\n  CLEAR: 'clear',\n  CONTEXTMENU: 'contextmenu',\n  CLICK: 'click',\n  DBLCLICK: 'dblclick',\n  DRAGENTER: 'dragenter',\n  DRAGOVER: 'dragover',\n  DROP: 'drop',\n  ERROR: 'error',\n  KEYDOWN: 'keydown',\n  KEYPRESS: 'keypress',\n  LOAD: 'load',\n  MOUSEDOWN: 'mousedown',\n  MOUSEMOVE: 'mousemove',\n  MOUSEOUT: 'mouseout',\n  MOUSEUP: 'mouseup',\n  MOUSEWHEEL: 'mousewheel',\n  MSPOINTERDOWN: 'MSPointerDown',\n  RESIZE: 'resize',\n  TOUCHSTART: 'touchstart',\n  TOUCHMOVE: 'touchmove',\n  TOUCHEND: 'touchend',\n  WHEEL: 'wheel'\n};\n","/**\n * @module ol/source/Vector\n */\n\nimport {getUid, inherits} from '../util.js';\nimport Collection from '../Collection.js';\nimport CollectionEventType from '../CollectionEventType.js';\nimport ObjectEventType from '../ObjectEventType.js';\nimport {extend} from '../array.js';\nimport {assert} from '../asserts.js';\nimport {listen, unlistenByKey} from '../events.js';\nimport Event from '../events/Event.js';\nimport EventType from '../events/EventType.js';\nimport {containsExtent, equals} from '../extent.js';\nimport {xhr} from '../featureloader.js';\nimport {TRUE, UNDEFINED} from '../functions.js';\nimport {all as allStrategy} from '../loadingstrategy.js';\nimport {isEmpty, getValues} from '../obj.js';\nimport Source from '../source/Source.js';\nimport SourceState from '../source/State.js';\nimport VectorEventType from '../source/VectorEventType.js';\nimport RBush from '../structs/RBush.js';\n\n/**\n * A function that takes an {@link module:ol/extent~Extent} and a resolution as arguments, and\n * returns an array of {@link module:ol/extent~Extent} with the extents to load. Usually this\n * is one of the standard {@link module:ol/loadingstrategy} strategies.\n *\n * @typedef {function(module:ol/extent~Extent, number): Array.<module:ol/extent~Extent>} LoadingStrategy\n * @api\n */\n\n\n/**\n * @classdesc\n * Events emitted by {@link module:ol/source/Vector} instances are instances of this\n * type.\n *\n * @constructor\n * @extends {module:ol/events/Event}\n * @param {string} type Type.\n * @param {module:ol/Feature=} opt_feature Feature.\n */\nexport const VectorSourceEvent = function(type, opt_feature) {\n\n  Event.call(this, type);\n\n  /**\n   * The feature being added or removed.\n   * @type {module:ol/Feature|undefined}\n   * @api\n   */\n  this.feature = opt_feature;\n\n};\ninherits(VectorSourceEvent, Event);\n\n\n/**\n * @typedef {Object} Options\n * @property {module:ol/source/Source~AttributionLike} [attributions] Attributions.\n * @property {Array.<module:ol/Feature>|module:ol/Collection.<module:ol/Feature>} [features]\n * Features. If provided as {@link module:ol/Collection}, the features in the source\n * and the collection will stay in sync.\n * @property {module:ol/format/Feature} [format] The feature format used by the XHR\n * feature loader when `url` is set. Required if `url` is set, otherwise ignored.\n * @property {module:ol/featureloader~FeatureLoader} [loader]\n * The loader function used to load features, from a remote source for example.\n * If this is not set and `url` is set, the source will create and use an XHR\n * feature loader.\n *\n * Example:\n *\n * ```js\n * import {Vector} from 'ol/source';\n * import {GeoJSON} from 'ol/format';\n * import {bbox} from 'ol/loadingstrategy';\n *\n * var vectorSource = new Vector({\n *   format: new GeoJSON(),\n *   loader: function(extent, resolution, projection) {\n *      var proj = projection.getCode();\n *      var url = 'https://ahocevar.com/geoserver/wfs?service=WFS&' +\n *          'version=1.1.0&request=GetFeature&typename=osm:water_areas&' +\n *          'outputFormat=application/json&srsname=' + proj + '&' +\n *          'bbox=' + extent.join(',') + ',' + proj;\n *      var xhr = new XMLHttpRequest();\n *      xhr.open('GET', url);\n *      var onError = function() {\n *        vectorSource.removeLoadedExtent(extent);\n *      }\n *      xhr.onerror = onError;\n *      xhr.onload = function() {\n *        if (xhr.status == 200) {\n *          vectorSource.addFeatures(\n *              vectorSource.getFormat().readFeatures(xhr.responseText));\n *        } else {\n *          onError();\n *        }\n *      }\n *      xhr.send();\n *    },\n *    strategy: bbox\n *  });\n * ```\n * @property {boolean} [overlaps=true] This source may have overlapping geometries.\n * Setting this to `false` (e.g. for sources with polygons that represent administrative\n * boundaries or TopoJSON sources) allows the renderer to optimise fill and\n * stroke operations.\n * @property {module:ol/source/Vector~LoadingStrategy} [strategy] The loading strategy to use.\n * By default an {@link module:ol/loadingstrategy~all}\n * strategy is used, a one-off strategy which loads all features at once.\n * @property {string|module:ol/featureloader~FeatureUrlfunction} [url]\n * Setting this option instructs the source to load features using an XHR loader\n * (see {@link module:ol/featureloader~xhr}). Use a `string` and an\n * {@link module:ol/loadingstrategy~all} for a one-off download of all features from\n * the given URL. Use a {@link module:ol/featureloader~FeatureUrlfunction} to generate the url with\n * other loading strategies.\n * Requires `format` to be set as well.\n * When default XHR feature loader is provided, the features will\n * be transformed from the data projection to the view projection\n * during parsing. If your remote data source does not advertise its projection\n * properly, this transformation will be incorrect. For some formats, the\n * default projection (usually EPSG:4326) can be overridden by setting the\n * dataProjection constructor option on the format.\n * Note that if a source contains non-feature data, such as a GeoJSON geometry\n * or a KML NetworkLink, these will be ignored. Use a custom loader to load these.\n * @property {boolean} [useSpatialIndex=true]\n * By default, an RTree is used as spatial index. When features are removed and\n * added frequently, and the total number of features is low, setting this to\n * `false` may improve performance.\n *\n * Note that\n * {@link module:ol/source/Vector~VectorSource#getFeaturesInExtent},\n * {@link module:ol/source/Vector~VectorSource#getClosestFeatureToCoordinate} and\n * {@link module:ol/source/Vector~VectorSource#getExtent} cannot be used when `useSpatialIndex` is\n * set to `false`, and {@link module:ol/source/Vector~VectorSource#forEachFeatureInExtent} will loop\n * through all features.\n *\n * When set to `false`, the features will be maintained in an\n * {@link module:ol/Collection}, which can be retrieved through\n * {@link module:ol/source/Vector~VectorSource#getFeaturesCollection}.\n * @property {boolean} [wrapX=true] Wrap the world horizontally. For vector editing across the\n * -180° and 180° meridians to work properly, this should be set to `false`. The\n * resulting geometry coordinates will then exceed the world bounds.\n */\n\n\n/**\n * @classdesc\n * Provides a source of features for vector layers. Vector features provided\n * by this source are suitable for editing. See {@link module:ol/source/VectorTile~VectorTile} for\n * vector data that is optimized for rendering.\n *\n * @constructor\n * @extends {module:ol/source/Source}\n * @fires ol/source/Vector~VectorSourceEvent\n * @param {module:ol/source/Vector~Options=} opt_options Vector source options.\n * @api\n */\nconst VectorSource = function(opt_options) {\n\n  const options = opt_options || {};\n\n  Source.call(this, {\n    attributions: options.attributions,\n    projection: undefined,\n    state: SourceState.READY,\n    wrapX: options.wrapX !== undefined ? options.wrapX : true\n  });\n\n  /**\n   * @private\n   * @type {module:ol/featureloader~FeatureLoader}\n   */\n  this.loader_ = UNDEFINED;\n\n  /**\n   * @private\n   * @type {module:ol/format/Feature|undefined}\n   */\n  this.format_ = options.format;\n\n  /**\n   * @private\n   * @type {boolean}\n   */\n  this.overlaps_ = options.overlaps == undefined ? true : options.overlaps;\n\n  /**\n   * @private\n   * @type {string|module:ol/featureloader~FeatureUrlFunction|undefined}\n   */\n  this.url_ = options.url;\n\n  if (options.loader !== undefined) {\n    this.loader_ = options.loader;\n  } else if (this.url_ !== undefined) {\n    assert(this.format_, 7); // `format` must be set when `url` is set\n    // create a XHR feature loader for \"url\" and \"format\"\n    this.loader_ = xhr(this.url_, /** @type {module:ol/format/Feature} */ (this.format_));\n  }\n\n  /**\n   * @private\n   * @type {module:ol/source/Vector~LoadingStrategy}\n   */\n  this.strategy_ = options.strategy !== undefined ? options.strategy : allStrategy;\n\n  const useSpatialIndex =\n      options.useSpatialIndex !== undefined ? options.useSpatialIndex : true;\n\n  /**\n   * @private\n   * @type {module:ol/structs/RBush.<module:ol/Feature>}\n   */\n  this.featuresRtree_ = useSpatialIndex ? new RBush() : null;\n\n  /**\n   * @private\n   * @type {module:ol/structs/RBush.<{extent: module:ol/extent~Extent}>}\n   */\n  this.loadedExtentsRtree_ = new RBush();\n\n  /**\n   * @private\n   * @type {!Object.<string, module:ol/Feature>}\n   */\n  this.nullGeometryFeatures_ = {};\n\n  /**\n   * A lookup of features by id (the return from feature.getId()).\n   * @private\n   * @type {!Object.<string, module:ol/Feature>}\n   */\n  this.idIndex_ = {};\n\n  /**\n   * A lookup of features without id (keyed by getUid(feature)).\n   * @private\n   * @type {!Object.<string, module:ol/Feature>}\n   */\n  this.undefIdIndex_ = {};\n\n  /**\n   * @private\n   * @type {Object.<string, Array.<module:ol/events~EventsKey>>}\n   */\n  this.featureChangeKeys_ = {};\n\n  /**\n   * @private\n   * @type {module:ol/Collection.<module:ol/Feature>}\n   */\n  this.featuresCollection_ = null;\n\n  let collection, features;\n  if (options.features instanceof Collection) {\n    collection = options.features;\n    features = collection.getArray();\n  } else if (Array.isArray(options.features)) {\n    features = options.features;\n  }\n  if (!useSpatialIndex && collection === undefined) {\n    collection = new Collection(features);\n  }\n  if (features !== undefined) {\n    this.addFeaturesInternal(features);\n  }\n  if (collection !== undefined) {\n    this.bindFeaturesCollection_(collection);\n  }\n\n};\n\ninherits(VectorSource, Source);\n\n\n/**\n * Add a single feature to the source.  If you want to add a batch of features\n * at once, call {@link module:ol/source/Vector~VectorSource#addFeatures #addFeatures()}\n * instead. A feature will not be added to the source if feature with\n * the same id is already there. The reason for this behavior is to avoid\n * feature duplication when using bbox or tile loading strategies.\n * @param {module:ol/Feature} feature Feature to add.\n * @api\n */\nVectorSource.prototype.addFeature = function(feature) {\n  this.addFeatureInternal(feature);\n  this.changed();\n};\n\n\n/**\n * Add a feature without firing a `change` event.\n * @param {module:ol/Feature} feature Feature.\n * @protected\n */\nVectorSource.prototype.addFeatureInternal = function(feature) {\n  const featureKey = getUid(feature).toString();\n\n  if (!this.addToIndex_(featureKey, feature)) {\n    return;\n  }\n\n  this.setupChangeEvents_(featureKey, feature);\n\n  const geometry = feature.getGeometry();\n  if (geometry) {\n    const extent = geometry.getExtent();\n    if (this.featuresRtree_) {\n      this.featuresRtree_.insert(extent, feature);\n    }\n  } else {\n    this.nullGeometryFeatures_[featureKey] = feature;\n  }\n\n  this.dispatchEvent(\n    new VectorSourceEvent(VectorEventType.ADDFEATURE, feature));\n};\n\n\n/**\n * @param {string} featureKey Unique identifier for the feature.\n * @param {module:ol/Feature} feature The feature.\n * @private\n */\nVectorSource.prototype.setupChangeEvents_ = function(featureKey, feature) {\n  this.featureChangeKeys_[featureKey] = [\n    listen(feature, EventType.CHANGE,\n      this.handleFeatureChange_, this),\n    listen(feature, ObjectEventType.PROPERTYCHANGE,\n      this.handleFeatureChange_, this)\n  ];\n};\n\n\n/**\n * @param {string} featureKey Unique identifier for the feature.\n * @param {module:ol/Feature} feature The feature.\n * @return {boolean} The feature is \"valid\", in the sense that it is also a\n *     candidate for insertion into the Rtree.\n * @private\n */\nVectorSource.prototype.addToIndex_ = function(featureKey, feature) {\n  let valid = true;\n  const id = feature.getId();\n  if (id !== undefined) {\n    if (!(id.toString() in this.idIndex_)) {\n      this.idIndex_[id.toString()] = feature;\n    } else {\n      valid = false;\n    }\n  } else {\n    assert(!(featureKey in this.undefIdIndex_),\n      30); // The passed `feature` was already added to the source\n    this.undefIdIndex_[featureKey] = feature;\n  }\n  return valid;\n};\n\n\n/**\n * Add a batch of features to the source.\n * @param {Array.<module:ol/Feature>} features Features to add.\n * @api\n */\nVectorSource.prototype.addFeatures = function(features) {\n  this.addFeaturesInternal(features);\n  this.changed();\n};\n\n\n/**\n * Add features without firing a `change` event.\n * @param {Array.<module:ol/Feature>} features Features.\n * @protected\n */\nVectorSource.prototype.addFeaturesInternal = function(features) {\n  const extents = [];\n  const newFeatures = [];\n  const geometryFeatures = [];\n\n  for (let i = 0, length = features.length; i < length; i++) {\n    const feature = features[i];\n    const featureKey = getUid(feature).toString();\n    if (this.addToIndex_(featureKey, feature)) {\n      newFeatures.push(feature);\n    }\n  }\n\n  for (let i = 0, length = newFeatures.length; i < length; i++) {\n    const feature = newFeatures[i];\n    const featureKey = getUid(feature).toString();\n    this.setupChangeEvents_(featureKey, feature);\n\n    const geometry = feature.getGeometry();\n    if (geometry) {\n      const extent = geometry.getExtent();\n      extents.push(extent);\n      geometryFeatures.push(feature);\n    } else {\n      this.nullGeometryFeatures_[featureKey] = feature;\n    }\n  }\n  if (this.featuresRtree_) {\n    this.featuresRtree_.load(extents, geometryFeatures);\n  }\n\n  for (let i = 0, length = newFeatures.length; i < length; i++) {\n    this.dispatchEvent(new VectorSourceEvent(VectorEventType.ADDFEATURE, newFeatures[i]));\n  }\n};\n\n\n/**\n * @param {!module:ol/Collection.<module:ol/Feature>} collection Collection.\n * @private\n */\nVectorSource.prototype.bindFeaturesCollection_ = function(collection) {\n  let modifyingCollection = false;\n  listen(this, VectorEventType.ADDFEATURE,\n    function(evt) {\n      if (!modifyingCollection) {\n        modifyingCollection = true;\n        collection.push(evt.feature);\n        modifyingCollection = false;\n      }\n    });\n  listen(this, VectorEventType.REMOVEFEATURE,\n    function(evt) {\n      if (!modifyingCollection) {\n        modifyingCollection = true;\n        collection.remove(evt.feature);\n        modifyingCollection = false;\n      }\n    });\n  listen(collection, CollectionEventType.ADD,\n    function(evt) {\n      if (!modifyingCollection) {\n        modifyingCollection = true;\n        this.addFeature(/** @type {module:ol/Feature} */ (evt.element));\n        modifyingCollection = false;\n      }\n    }, this);\n  listen(collection, CollectionEventType.REMOVE,\n    function(evt) {\n      if (!modifyingCollection) {\n        modifyingCollection = true;\n        this.removeFeature(/** @type {module:ol/Feature} */ (evt.element));\n        modifyingCollection = false;\n      }\n    }, this);\n  this.featuresCollection_ = collection;\n};\n\n\n/**\n * Remove all features from the source.\n * @param {boolean=} opt_fast Skip dispatching of {@link module:ol/source/Vector~VectorSourceEvent#removefeature} events.\n * @api\n */\nVectorSource.prototype.clear = function(opt_fast) {\n  if (opt_fast) {\n    for (const featureId in this.featureChangeKeys_) {\n      const keys = this.featureChangeKeys_[featureId];\n      keys.forEach(unlistenByKey);\n    }\n    if (!this.featuresCollection_) {\n      this.featureChangeKeys_ = {};\n      this.idIndex_ = {};\n      this.undefIdIndex_ = {};\n    }\n  } else {\n    if (this.featuresRtree_) {\n      this.featuresRtree_.forEach(this.removeFeatureInternal, this);\n      for (const id in this.nullGeometryFeatures_) {\n        this.removeFeatureInternal(this.nullGeometryFeatures_[id]);\n      }\n    }\n  }\n  if (this.featuresCollection_) {\n    this.featuresCollection_.clear();\n  }\n\n  if (this.featuresRtree_) {\n    this.featuresRtree_.clear();\n  }\n  this.loadedExtentsRtree_.clear();\n  this.nullGeometryFeatures_ = {};\n\n  const clearEvent = new VectorSourceEvent(VectorEventType.CLEAR);\n  this.dispatchEvent(clearEvent);\n  this.changed();\n};\n\n\n/**\n * Iterate through all features on the source, calling the provided callback\n * with each one.  If the callback returns any \"truthy\" value, iteration will\n * stop and the function will return the same value.\n * Note: this function only iterate through the feature that have a defined geometry.\n *\n * @param {function(module:ol/Feature): T} callback Called with each feature\n *     on the source.  Return a truthy value to stop iteration.\n * @return {T|undefined} The return value from the last call to the callback.\n * @template T\n * @api\n */\nVectorSource.prototype.forEachFeature = function(callback) {\n  if (this.featuresRtree_) {\n    return this.featuresRtree_.forEach(callback);\n  } else if (this.featuresCollection_) {\n    return this.featuresCollection_.forEach(callback);\n  }\n};\n\n\n/**\n * Iterate through all features whose geometries contain the provided\n * coordinate, calling the callback with each feature.  If the callback returns\n * a \"truthy\" value, iteration will stop and the function will return the same\n * value.\n *\n * @param {module:ol/coordinate~Coordinate} coordinate Coordinate.\n * @param {function(module:ol/Feature): T} callback Called with each feature\n *     whose goemetry contains the provided coordinate.\n * @return {T|undefined} The return value from the last call to the callback.\n * @template T\n */\nVectorSource.prototype.forEachFeatureAtCoordinateDirect = function(coordinate, callback) {\n  const extent = [coordinate[0], coordinate[1], coordinate[0], coordinate[1]];\n  return this.forEachFeatureInExtent(extent, function(feature) {\n    const geometry = feature.getGeometry();\n    if (geometry.intersectsCoordinate(coordinate)) {\n      return callback(feature);\n    } else {\n      return undefined;\n    }\n  });\n};\n\n\n/**\n * Iterate through all features whose bounding box intersects the provided\n * extent (note that the feature's geometry may not intersect the extent),\n * calling the callback with each feature.  If the callback returns a \"truthy\"\n * value, iteration will stop and the function will return the same value.\n *\n * If you are interested in features whose geometry intersects an extent, call\n * the {@link module:ol/source/Vector~VectorSource#forEachFeatureIntersectingExtent #forEachFeatureIntersectingExtent()} method instead.\n *\n * When `useSpatialIndex` is set to false, this method will loop through all\n * features, equivalent to {@link module:ol/source/Vector~VectorSource#forEachFeature #forEachFeature()}.\n *\n * @param {module:ol/extent~Extent} extent Extent.\n * @param {function(module:ol/Feature): T} callback Called with each feature\n *     whose bounding box intersects the provided extent.\n * @return {T|undefined} The return value from the last call to the callback.\n * @template T\n * @api\n */\nVectorSource.prototype.forEachFeatureInExtent = function(extent, callback) {\n  if (this.featuresRtree_) {\n    return this.featuresRtree_.forEachInExtent(extent, callback);\n  } else if (this.featuresCollection_) {\n    return this.featuresCollection_.forEach(callback);\n  }\n};\n\n\n/**\n * Iterate through all features whose geometry intersects the provided extent,\n * calling the callback with each feature.  If the callback returns a \"truthy\"\n * value, iteration will stop and the function will return the same value.\n *\n * If you only want to test for bounding box intersection, call the\n * {@link module:ol/source/Vector~VectorSource#forEachFeatureInExtent #forEachFeatureInExtent()} method instead.\n *\n * @param {module:ol/extent~Extent} extent Extent.\n * @param {function(module:ol/Feature): T} callback Called with each feature\n *     whose geometry intersects the provided extent.\n * @return {T|undefined} The return value from the last call to the callback.\n * @template T\n * @api\n */\nVectorSource.prototype.forEachFeatureIntersectingExtent = function(extent, callback) {\n  return this.forEachFeatureInExtent(extent,\n    /**\n     * @param {module:ol/Feature} feature Feature.\n     * @return {T|undefined} The return value from the last call to the callback.\n     * @template T\n     */\n    function(feature) {\n      const geometry = feature.getGeometry();\n      if (geometry.intersectsExtent(extent)) {\n        const result = callback(feature);\n        if (result) {\n          return result;\n        }\n      }\n    });\n};\n\n\n/**\n * Get the features collection associated with this source. Will be `null`\n * unless the source was configured with `useSpatialIndex` set to `false`, or\n * with an {@link module:ol/Collection} as `features`.\n * @return {module:ol/Collection.<module:ol/Feature>} The collection of features.\n * @api\n */\nVectorSource.prototype.getFeaturesCollection = function() {\n  return this.featuresCollection_;\n};\n\n\n/**\n * Get all features on the source in random order.\n * @return {Array.<module:ol/Feature>} Features.\n * @api\n */\nVectorSource.prototype.getFeatures = function() {\n  let features;\n  if (this.featuresCollection_) {\n    features = this.featuresCollection_.getArray();\n  } else if (this.featuresRtree_) {\n    features = this.featuresRtree_.getAll();\n    if (!isEmpty(this.nullGeometryFeatures_)) {\n      extend(features, getValues(this.nullGeometryFeatures_));\n    }\n  }\n  return (\n    /** @type {Array.<module:ol/Feature>} */ (features)\n  );\n};\n\n\n/**\n * Get all features whose geometry intersects the provided coordinate.\n * @param {module:ol/coordinate~Coordinate} coordinate Coordinate.\n * @return {Array.<module:ol/Feature>} Features.\n * @api\n */\nVectorSource.prototype.getFeaturesAtCoordinate = function(coordinate) {\n  const features = [];\n  this.forEachFeatureAtCoordinateDirect(coordinate, function(feature) {\n    features.push(feature);\n  });\n  return features;\n};\n\n\n/**\n * Get all features in the provided extent.  Note that this returns an array of\n * all features intersecting the given extent in random order (so it may include\n * features whose geometries do not intersect the extent).\n *\n * This method is not available when the source is configured with\n * `useSpatialIndex` set to `false`.\n * @param {module:ol/extent~Extent} extent Extent.\n * @return {Array.<module:ol/Feature>} Features.\n * @api\n */\nVectorSource.prototype.getFeaturesInExtent = function(extent) {\n  return this.featuresRtree_.getInExtent(extent);\n};\n\n\n/**\n * Get the closest feature to the provided coordinate.\n *\n * This method is not available when the source is configured with\n * `useSpatialIndex` set to `false`.\n * @param {module:ol/coordinate~Coordinate} coordinate Coordinate.\n * @param {function(module:ol/Feature):boolean=} opt_filter Feature filter function.\n *     The filter function will receive one argument, the {@link module:ol/Feature feature}\n *     and it should return a boolean value. By default, no filtering is made.\n * @return {module:ol/Feature} Closest feature.\n * @api\n */\nVectorSource.prototype.getClosestFeatureToCoordinate = function(coordinate, opt_filter) {\n  // Find the closest feature using branch and bound.  We start searching an\n  // infinite extent, and find the distance from the first feature found.  This\n  // becomes the closest feature.  We then compute a smaller extent which any\n  // closer feature must intersect.  We continue searching with this smaller\n  // extent, trying to find a closer feature.  Every time we find a closer\n  // feature, we update the extent being searched so that any even closer\n  // feature must intersect it.  We continue until we run out of features.\n  const x = coordinate[0];\n  const y = coordinate[1];\n  let closestFeature = null;\n  const closestPoint = [NaN, NaN];\n  let minSquaredDistance = Infinity;\n  const extent = [-Infinity, -Infinity, Infinity, Infinity];\n  const filter = opt_filter ? opt_filter : TRUE;\n  this.featuresRtree_.forEachInExtent(extent,\n    /**\n     * @param {module:ol/Feature} feature Feature.\n     */\n    function(feature) {\n      if (filter(feature)) {\n        const geometry = feature.getGeometry();\n        const previousMinSquaredDistance = minSquaredDistance;\n        minSquaredDistance = geometry.closestPointXY(\n          x, y, closestPoint, minSquaredDistance);\n        if (minSquaredDistance < previousMinSquaredDistance) {\n          closestFeature = feature;\n          // This is sneaky.  Reduce the extent that it is currently being\n          // searched while the R-Tree traversal using this same extent object\n          // is still in progress.  This is safe because the new extent is\n          // strictly contained by the old extent.\n          const minDistance = Math.sqrt(minSquaredDistance);\n          extent[0] = x - minDistance;\n          extent[1] = y - minDistance;\n          extent[2] = x + minDistance;\n          extent[3] = y + minDistance;\n        }\n      }\n    });\n  return closestFeature;\n};\n\n\n/**\n * Get the extent of the features currently in the source.\n *\n * This method is not available when the source is configured with\n * `useSpatialIndex` set to `false`.\n * @param {module:ol/extent~Extent=} opt_extent Destination extent. If provided, no new extent\n *     will be created. Instead, that extent's coordinates will be overwritten.\n * @return {module:ol/extent~Extent} Extent.\n * @api\n */\nVectorSource.prototype.getExtent = function(opt_extent) {\n  return this.featuresRtree_.getExtent(opt_extent);\n};\n\n\n/**\n * Get a feature by its identifier (the value returned by feature.getId()).\n * Note that the index treats string and numeric identifiers as the same.  So\n * `source.getFeatureById(2)` will return a feature with id `'2'` or `2`.\n *\n * @param {string|number} id Feature identifier.\n * @return {module:ol/Feature} The feature (or `null` if not found).\n * @api\n */\nVectorSource.prototype.getFeatureById = function(id) {\n  const feature = this.idIndex_[id.toString()];\n  return feature !== undefined ? feature : null;\n};\n\n\n/**\n * Get the format associated with this source.\n *\n * @return {module:ol/format/Feature|undefined} The feature format.\n * @api\n */\nVectorSource.prototype.getFormat = function() {\n  return this.format_;\n};\n\n\n/**\n * @return {boolean} The source can have overlapping geometries.\n */\nVectorSource.prototype.getOverlaps = function() {\n  return this.overlaps_;\n};\n\n\n/**\n * @override\n */\nVectorSource.prototype.getResolutions = function() {};\n\n\n/**\n * Get the url associated with this source.\n *\n * @return {string|module:ol/featureloader~FeatureUrlFunction|undefined} The url.\n * @api\n */\nVectorSource.prototype.getUrl = function() {\n  return this.url_;\n};\n\n\n/**\n * @param {module:ol/events/Event} event Event.\n * @private\n */\nVectorSource.prototype.handleFeatureChange_ = function(event) {\n  const feature = /** @type {module:ol/Feature} */ (event.target);\n  const featureKey = getUid(feature).toString();\n  const geometry = feature.getGeometry();\n  if (!geometry) {\n    if (!(featureKey in this.nullGeometryFeatures_)) {\n      if (this.featuresRtree_) {\n        this.featuresRtree_.remove(feature);\n      }\n      this.nullGeometryFeatures_[featureKey] = feature;\n    }\n  } else {\n    const extent = geometry.getExtent();\n    if (featureKey in this.nullGeometryFeatures_) {\n      delete this.nullGeometryFeatures_[featureKey];\n      if (this.featuresRtree_) {\n        this.featuresRtree_.insert(extent, feature);\n      }\n    } else {\n      if (this.featuresRtree_) {\n        this.featuresRtree_.update(extent, feature);\n      }\n    }\n  }\n  const id = feature.getId();\n  if (id !== undefined) {\n    const sid = id.toString();\n    if (featureKey in this.undefIdIndex_) {\n      delete this.undefIdIndex_[featureKey];\n      this.idIndex_[sid] = feature;\n    } else {\n      if (this.idIndex_[sid] !== feature) {\n        this.removeFromIdIndex_(feature);\n        this.idIndex_[sid] = feature;\n      }\n    }\n  } else {\n    if (!(featureKey in this.undefIdIndex_)) {\n      this.removeFromIdIndex_(feature);\n      this.undefIdIndex_[featureKey] = feature;\n    }\n  }\n  this.changed();\n  this.dispatchEvent(new VectorSourceEvent(\n    VectorEventType.CHANGEFEATURE, feature));\n};\n\n/**\n * Returns true if the feature is contained within the source.\n * @param {module:ol/Feature} feature Feature.\n * @return {boolean} Has feature.\n * @api\n */\nVectorSource.prototype.hasFeature = function(feature) {\n  const id = feature.getId();\n  if (id !== undefined) {\n    return id in this.idIndex_;\n  } else {\n    const featureKey = getUid(feature).toString();\n    return featureKey in this.undefIdIndex_;\n  }\n};\n\n/**\n * @return {boolean} Is empty.\n */\nVectorSource.prototype.isEmpty = function() {\n  return this.featuresRtree_.isEmpty() && isEmpty(this.nullGeometryFeatures_);\n};\n\n\n/**\n * @param {module:ol/extent~Extent} extent Extent.\n * @param {number} resolution Resolution.\n * @param {module:ol/proj/Projection} projection Projection.\n */\nVectorSource.prototype.loadFeatures = function(extent, resolution, projection) {\n  const loadedExtentsRtree = this.loadedExtentsRtree_;\n  const extentsToLoad = this.strategy_(extent, resolution);\n  for (let i = 0, ii = extentsToLoad.length; i < ii; ++i) {\n    const extentToLoad = extentsToLoad[i];\n    const alreadyLoaded = loadedExtentsRtree.forEachInExtent(extentToLoad,\n      /**\n       * @param {{extent: module:ol/extent~Extent}} object Object.\n       * @return {boolean} Contains.\n       */\n      function(object) {\n        return containsExtent(object.extent, extentToLoad);\n      });\n    if (!alreadyLoaded) {\n      this.loader_.call(this, extentToLoad, resolution, projection);\n      loadedExtentsRtree.insert(extentToLoad, {extent: extentToLoad.slice()});\n    }\n  }\n};\n\n\n/**\n * Remove an extent from the list of loaded extents.\n * @param {module:ol/extent~Extent} extent Extent.\n * @api\n */\nVectorSource.prototype.removeLoadedExtent = function(extent) {\n  const loadedExtentsRtree = this.loadedExtentsRtree_;\n  let obj;\n  loadedExtentsRtree.forEachInExtent(extent, function(object) {\n    if (equals(object.extent, extent)) {\n      obj = object;\n      return true;\n    }\n  });\n  if (obj) {\n    loadedExtentsRtree.remove(obj);\n  }\n};\n\n\n/**\n * Remove a single feature from the source.  If you want to remove all features\n * at once, use the {@link module:ol/source/Vector~VectorSource#clear #clear()} method\n * instead.\n * @param {module:ol/Feature} feature Feature to remove.\n * @api\n */\nVectorSource.prototype.removeFeature = function(feature) {\n  const featureKey = getUid(feature).toString();\n  if (featureKey in this.nullGeometryFeatures_) {\n    delete this.nullGeometryFeatures_[featureKey];\n  } else {\n    if (this.featuresRtree_) {\n      this.featuresRtree_.remove(feature);\n    }\n  }\n  this.removeFeatureInternal(feature);\n  this.changed();\n};\n\n\n/**\n * Remove feature without firing a `change` event.\n * @param {module:ol/Feature} feature Feature.\n * @protected\n */\nVectorSource.prototype.removeFeatureInternal = function(feature) {\n  const featureKey = getUid(feature).toString();\n  this.featureChangeKeys_[featureKey].forEach(unlistenByKey);\n  delete this.featureChangeKeys_[featureKey];\n  const id = feature.getId();\n  if (id !== undefined) {\n    delete this.idIndex_[id.toString()];\n  } else {\n    delete this.undefIdIndex_[featureKey];\n  }\n  this.dispatchEvent(new VectorSourceEvent(\n    VectorEventType.REMOVEFEATURE, feature));\n};\n\n\n/**\n * Remove a feature from the id index.  Called internally when the feature id\n * may have changed.\n * @param {module:ol/Feature} feature The feature.\n * @return {boolean} Removed the feature from the index.\n * @private\n */\nVectorSource.prototype.removeFromIdIndex_ = function(feature) {\n  let removed = false;\n  for (const id in this.idIndex_) {\n    if (this.idIndex_[id] === feature) {\n      delete this.idIndex_[id];\n      removed = true;\n      break;\n    }\n  }\n  return removed;\n};\n\n\n/**\n * Set the new loader of the source. The next loadFeatures call will use the\n * new loader.\n * @param {module:ol/featureloader~FeatureLoader} loader The loader to set.\n * @api\n */\nVectorSource.prototype.setLoader = function(loader) {\n  this.loader_ = loader;\n};\n\nexport default VectorSource;\n","/**\n * @module ol/obj\n */\n\n\n/**\n * Polyfill for Object.assign().  Assigns enumerable and own properties from\n * one or more source objects to a target object.\n *\n * @see https://developer.mozilla.org/en/docs/Web/JavaScript/Reference/Global_Objects/Object/assign\n * @param {!Object} target The target object.\n * @param {...Object} var_sources The source object(s).\n * @return {!Object} The modified target object.\n */\nexport const assign = (typeof Object.assign === 'function') ? Object.assign : function(target, var_sources) {\n  if (target === undefined || target === null) {\n    throw new TypeError('Cannot convert undefined or null to object');\n  }\n\n  const output = Object(target);\n  for (let i = 1, ii = arguments.length; i < ii; ++i) {\n    const source = arguments[i];\n    if (source !== undefined && source !== null) {\n      for (const key in source) {\n        if (source.hasOwnProperty(key)) {\n          output[key] = source[key];\n        }\n      }\n    }\n  }\n  return output;\n};\n\n\n/**\n * Removes all properties from an object.\n * @param {Object} object The object to clear.\n */\nexport function clear(object) {\n  for (const property in object) {\n    delete object[property];\n  }\n}\n\n\n/**\n * Get an array of property values from an object.\n * @param {Object<K,V>} object The object from which to get the values.\n * @return {!Array<V>} The property values.\n * @template K,V\n */\nexport function getValues(object) {\n  const values = [];\n  for (const property in object) {\n    values.push(object[property]);\n  }\n  return values;\n}\n\n\n/**\n * Determine if an object has any properties.\n * @param {Object} object The object to check.\n * @return {boolean} The object is empty.\n */\nexport function isEmpty(object) {\n  let property;\n  for (property in object) {\n    return false;\n  }\n  return !property;\n}\n","/**\n * @module ol/array\n */\n\n\n/**\n * Performs a binary search on the provided sorted list and returns the index of the item if found. If it can't be found it'll return -1.\n * https://github.com/darkskyapp/binary-search\n *\n * @param {Array.<*>} haystack Items to search through.\n * @param {*} needle The item to look for.\n * @param {Function=} opt_comparator Comparator function.\n * @return {number} The index of the item if found, -1 if not.\n */\nexport function binarySearch(haystack, needle, opt_comparator) {\n  let mid, cmp;\n  const comparator = opt_comparator || numberSafeCompareFunction;\n  let low = 0;\n  let high = haystack.length;\n  let found = false;\n\n  while (low < high) {\n    /* Note that \"(low + high) >>> 1\" may overflow, and results in a typecast\n     * to double (which gives the wrong results). */\n    mid = low + (high - low >> 1);\n    cmp = +comparator(haystack[mid], needle);\n\n    if (cmp < 0.0) { /* Too low. */\n      low  = mid + 1;\n\n    } else { /* Key found or too high */\n      high = mid;\n      found = !cmp;\n    }\n  }\n\n  /* Key not found. */\n  return found ? low : ~low;\n}\n\n\n/**\n * Compare function for array sort that is safe for numbers.\n * @param {*} a The first object to be compared.\n * @param {*} b The second object to be compared.\n * @return {number} A negative number, zero, or a positive number as the first\n *     argument is less than, equal to, or greater than the second.\n */\nexport function numberSafeCompareFunction(a, b) {\n  return a > b ? 1 : a < b ? -1 : 0;\n}\n\n\n/**\n * Whether the array contains the given object.\n * @param {Array.<*>} arr The array to test for the presence of the element.\n * @param {*} obj The object for which to test.\n * @return {boolean} The object is in the array.\n */\nexport function includes(arr, obj) {\n  return arr.indexOf(obj) >= 0;\n}\n\n\n/**\n * @param {Array.<number>} arr Array.\n * @param {number} target Target.\n * @param {number} direction 0 means return the nearest, > 0\n *    means return the largest nearest, < 0 means return the\n *    smallest nearest.\n * @return {number} Index.\n */\nexport function linearFindNearest(arr, target, direction) {\n  const n = arr.length;\n  if (arr[0] <= target) {\n    return 0;\n  } else if (target <= arr[n - 1]) {\n    return n - 1;\n  } else {\n    let i;\n    if (direction > 0) {\n      for (i = 1; i < n; ++i) {\n        if (arr[i] < target) {\n          return i - 1;\n        }\n      }\n    } else if (direction < 0) {\n      for (i = 1; i < n; ++i) {\n        if (arr[i] <= target) {\n          return i;\n        }\n      }\n    } else {\n      for (i = 1; i < n; ++i) {\n        if (arr[i] == target) {\n          return i;\n        } else if (arr[i] < target) {\n          if (arr[i - 1] - target < target - arr[i]) {\n            return i - 1;\n          } else {\n            return i;\n          }\n        }\n      }\n    }\n    return n - 1;\n  }\n}\n\n\n/**\n * @param {Array.<*>} arr Array.\n * @param {number} begin Begin index.\n * @param {number} end End index.\n */\nexport function reverseSubArray(arr, begin, end) {\n  while (begin < end) {\n    const tmp = arr[begin];\n    arr[begin] = arr[end];\n    arr[end] = tmp;\n    ++begin;\n    --end;\n  }\n}\n\n\n/**\n * @param {Array.<VALUE>} arr The array to modify.\n * @param {!Array.<VALUE>|VALUE} data The elements or arrays of elements to add to arr.\n * @template VALUE\n */\nexport function extend(arr, data) {\n  const extension = Array.isArray(data) ? data : [data];\n  const length = extension.length;\n  for (let i = 0; i < length; i++) {\n    arr[arr.length] = extension[i];\n  }\n}\n\n\n/**\n * @param {Array.<VALUE>} arr The array to modify.\n * @param {VALUE} obj The element to remove.\n * @template VALUE\n * @return {boolean} If the element was removed.\n */\nexport function remove(arr, obj) {\n  const i = arr.indexOf(obj);\n  const found = i > -1;\n  if (found) {\n    arr.splice(i, 1);\n  }\n  return found;\n}\n\n\n/**\n * @param {Array.<VALUE>} arr The array to search in.\n * @param {function(VALUE, number, ?) : boolean} func The function to compare.\n * @template VALUE\n * @return {VALUE|null} The element found or null.\n */\nexport function find(arr, func) {\n  const length = arr.length >>> 0;\n  let value;\n\n  for (let i = 0; i < length; i++) {\n    value = arr[i];\n    if (func(value, i, arr)) {\n      return value;\n    }\n  }\n  return null;\n}\n\n\n/**\n * @param {Array|Uint8ClampedArray} arr1 The first array to compare.\n * @param {Array|Uint8ClampedArray} arr2 The second array to compare.\n * @return {boolean} Whether the two arrays are equal.\n */\nexport function equals(arr1, arr2) {\n  const len1 = arr1.length;\n  if (len1 !== arr2.length) {\n    return false;\n  }\n  for (let i = 0; i < len1; i++) {\n    if (arr1[i] !== arr2[i]) {\n      return false;\n    }\n  }\n  return true;\n}\n\n\n/**\n * @param {Array.<*>} arr The array to sort (modifies original).\n * @param {Function} compareFnc Comparison function.\n */\nexport function stableSort(arr, compareFnc) {\n  const length = arr.length;\n  const tmp = Array(arr.length);\n  let i;\n  for (i = 0; i < length; i++) {\n    tmp[i] = {index: i, value: arr[i]};\n  }\n  tmp.sort(function(a, b) {\n    return compareFnc(a.value, b.value) || a.index - b.index;\n  });\n  for (i = 0; i < arr.length; i++) {\n    arr[i] = tmp[i].value;\n  }\n}\n\n\n/**\n * @param {Array.<*>} arr The array to search in.\n * @param {Function} func Comparison function.\n * @return {number} Return index.\n */\nexport function findIndex(arr, func) {\n  let index;\n  const found = !arr.every(function(el, idx) {\n    index = idx;\n    return !func(el, idx, arr);\n  });\n  return found ? index : -1;\n}\n\n\n/**\n * @param {Array.<*>} arr The array to test.\n * @param {Function=} opt_func Comparison function.\n * @param {boolean=} opt_strict Strictly sorted (default false).\n * @return {boolean} Return index.\n */\nexport function isSorted(arr, opt_func, opt_strict) {\n  const compare = opt_func || numberSafeCompareFunction;\n  return arr.every(function(currentVal, index) {\n    if (index === 0) {\n      return true;\n    }\n    const res = compare(arr[index - 1], currentVal);\n    return !(res > 0 || opt_strict && res === 0);\n  });\n}\n","/**\n * @module ol/transform\n */\nimport {assert} from './asserts.js';\n\n\n/**\n * An array representing an affine 2d transformation for use with\n * {@link module:ol/transform} functions. The array has 6 elements.\n * @typedef {!Array.<number>} Transform\n */\n\n\n/**\n * Collection of affine 2d transformation functions. The functions work on an\n * array of 6 elements. The element order is compatible with the [SVGMatrix\n * interface](https://developer.mozilla.org/en-US/docs/Web/API/SVGMatrix) and is\n * a subset (elements a to f) of a 3×3 matrix:\n * ```\n * [ a c e ]\n * [ b d f ]\n * [ 0 0 1 ]\n * ```\n */\n\n\n/**\n * @private\n * @type {module:ol/transform~Transform}\n */\nconst tmp_ = new Array(6);\n\n\n/**\n * Create an identity transform.\n * @return {!module:ol/transform~Transform} Identity transform.\n */\nexport function create() {\n  return [1, 0, 0, 1, 0, 0];\n}\n\n\n/**\n * Resets the given transform to an identity transform.\n * @param {!module:ol/transform~Transform} transform Transform.\n * @return {!module:ol/transform~Transform} Transform.\n */\nexport function reset(transform) {\n  return set(transform, 1, 0, 0, 1, 0, 0);\n}\n\n\n/**\n * Multiply the underlying matrices of two transforms and return the result in\n * the first transform.\n * @param {!module:ol/transform~Transform} transform1 Transform parameters of matrix 1.\n * @param {!module:ol/transform~Transform} transform2 Transform parameters of matrix 2.\n * @return {!module:ol/transform~Transform} transform1 multiplied with transform2.\n */\nexport function multiply(transform1, transform2) {\n  const a1 = transform1[0];\n  const b1 = transform1[1];\n  const c1 = transform1[2];\n  const d1 = transform1[3];\n  const e1 = transform1[4];\n  const f1 = transform1[5];\n  const a2 = transform2[0];\n  const b2 = transform2[1];\n  const c2 = transform2[2];\n  const d2 = transform2[3];\n  const e2 = transform2[4];\n  const f2 = transform2[5];\n\n  transform1[0] = a1 * a2 + c1 * b2;\n  transform1[1] = b1 * a2 + d1 * b2;\n  transform1[2] = a1 * c2 + c1 * d2;\n  transform1[3] = b1 * c2 + d1 * d2;\n  transform1[4] = a1 * e2 + c1 * f2 + e1;\n  transform1[5] = b1 * e2 + d1 * f2 + f1;\n\n  return transform1;\n}\n\n/**\n * Set the transform components a-f on a given transform.\n * @param {!module:ol/transform~Transform} transform Transform.\n * @param {number} a The a component of the transform.\n * @param {number} b The b component of the transform.\n * @param {number} c The c component of the transform.\n * @param {number} d The d component of the transform.\n * @param {number} e The e component of the transform.\n * @param {number} f The f component of the transform.\n * @return {!module:ol/transform~Transform} Matrix with transform applied.\n */\nexport function set(transform, a, b, c, d, e, f) {\n  transform[0] = a;\n  transform[1] = b;\n  transform[2] = c;\n  transform[3] = d;\n  transform[4] = e;\n  transform[5] = f;\n  return transform;\n}\n\n\n/**\n * Set transform on one matrix from another matrix.\n * @param {!module:ol/transform~Transform} transform1 Matrix to set transform to.\n * @param {!module:ol/transform~Transform} transform2 Matrix to set transform from.\n * @return {!module:ol/transform~Transform} transform1 with transform from transform2 applied.\n */\nexport function setFromArray(transform1, transform2) {\n  transform1[0] = transform2[0];\n  transform1[1] = transform2[1];\n  transform1[2] = transform2[2];\n  transform1[3] = transform2[3];\n  transform1[4] = transform2[4];\n  transform1[5] = transform2[5];\n  return transform1;\n}\n\n\n/**\n * Transforms the given coordinate with the given transform returning the\n * resulting, transformed coordinate. The coordinate will be modified in-place.\n *\n * @param {module:ol/transform~Transform} transform The transformation.\n * @param {module:ol/coordinate~Coordinate|module:ol~Pixel} coordinate The coordinate to transform.\n * @return {module:ol/coordinate~Coordinate|module:ol~Pixel} return coordinate so that operations can be\n *     chained together.\n */\nexport function apply(transform, coordinate) {\n  const x = coordinate[0];\n  const y = coordinate[1];\n  coordinate[0] = transform[0] * x + transform[2] * y + transform[4];\n  coordinate[1] = transform[1] * x + transform[3] * y + transform[5];\n  return coordinate;\n}\n\n\n/**\n * Applies rotation to the given transform.\n * @param {!module:ol/transform~Transform} transform Transform.\n * @param {number} angle Angle in radians.\n * @return {!module:ol/transform~Transform} The rotated transform.\n */\nexport function rotate(transform, angle) {\n  const cos = Math.cos(angle);\n  const sin = Math.sin(angle);\n  return multiply(transform, set(tmp_, cos, sin, -sin, cos, 0, 0));\n}\n\n\n/**\n * Applies scale to a given transform.\n * @param {!module:ol/transform~Transform} transform Transform.\n * @param {number} x Scale factor x.\n * @param {number} y Scale factor y.\n * @return {!module:ol/transform~Transform} The scaled transform.\n */\nexport function scale(transform, x, y) {\n  return multiply(transform, set(tmp_, x, 0, 0, y, 0, 0));\n}\n\n\n/**\n * Applies translation to the given transform.\n * @param {!module:ol/transform~Transform} transform Transform.\n * @param {number} dx Translation x.\n * @param {number} dy Translation y.\n * @return {!module:ol/transform~Transform} The translated transform.\n */\nexport function translate(transform, dx, dy) {\n  return multiply(transform, set(tmp_, 1, 0, 0, 1, dx, dy));\n}\n\n\n/**\n * Creates a composite transform given an initial translation, scale, rotation, and\n * final translation (in that order only, not commutative).\n * @param {!module:ol/transform~Transform} transform The transform (will be modified in place).\n * @param {number} dx1 Initial translation x.\n * @param {number} dy1 Initial translation y.\n * @param {number} sx Scale factor x.\n * @param {number} sy Scale factor y.\n * @param {number} angle Rotation (in counter-clockwise radians).\n * @param {number} dx2 Final translation x.\n * @param {number} dy2 Final translation y.\n * @return {!module:ol/transform~Transform} The composite transform.\n */\nexport function compose(transform, dx1, dy1, sx, sy, angle, dx2, dy2) {\n  const sin = Math.sin(angle);\n  const cos = Math.cos(angle);\n  transform[0] = sx * cos;\n  transform[1] = sy * sin;\n  transform[2] = -sx * sin;\n  transform[3] = sy * cos;\n  transform[4] = dx2 * sx * cos - dy2 * sx * sin + dx1;\n  transform[5] = dx2 * sy * sin + dy2 * sy * cos + dy1;\n  return transform;\n}\n\n\n/**\n * Invert the given transform.\n * @param {!module:ol/transform~Transform} transform Transform.\n * @return {!module:ol/transform~Transform} Inverse of the transform.\n */\nexport function invert(transform) {\n  const det = determinant(transform);\n  assert(det !== 0, 32); // Transformation matrix cannot be inverted\n\n  const a = transform[0];\n  const b = transform[1];\n  const c = transform[2];\n  const d = transform[3];\n  const e = transform[4];\n  const f = transform[5];\n\n  transform[0] = d / det;\n  transform[1] = -b / det;\n  transform[2] = -c / det;\n  transform[3] = a / det;\n  transform[4] = (c * f - d * e) / det;\n  transform[5] = -(a * f - b * e) / det;\n\n  return transform;\n}\n\n\n/**\n * Returns the determinant of the given matrix.\n * @param {!module:ol/transform~Transform} mat Matrix.\n * @return {number} Determinant.\n */\nexport function determinant(mat) {\n  return mat[0] * mat[3] - mat[1] * mat[2];\n}\n","/**\n * @module ol/TileState\n */\n\n/**\n * @enum {number}\n */\nexport default {\n  IDLE: 0,\n  LOADING: 1,\n  LOADED: 2,\n  ERROR: 3,\n  EMPTY: 4,\n  ABORT: 5\n};\n","/**\n * @module ol/math\n */\nimport {assert} from './asserts.js';\n\n/**\n * Takes a number and clamps it to within the provided bounds.\n * @param {number} value The input number.\n * @param {number} min The minimum value to return.\n * @param {number} max The maximum value to return.\n * @return {number} The input number if it is within bounds, or the nearest\n *     number within the bounds.\n */\nexport function clamp(value, min, max) {\n  return Math.min(Math.max(value, min), max);\n}\n\n\n/**\n * Return the hyperbolic cosine of a given number. The method will use the\n * native `Math.cosh` function if it is available, otherwise the hyperbolic\n * cosine will be calculated via the reference implementation of the Mozilla\n * developer network.\n *\n * @param {number} x X.\n * @return {number} Hyperbolic cosine of x.\n */\nexport const cosh  = (function() {\n  // Wrapped in a iife, to save the overhead of checking for the native\n  // implementation on every invocation.\n  let cosh;\n  if ('cosh' in Math) {\n    // The environment supports the native Math.cosh function, use it…\n    cosh = Math.cosh;\n  } else {\n    // … else, use the reference implementation of MDN:\n    cosh = function(x) {\n      const y = Math.exp(x);\n      return (y + 1 / y) / 2;\n    };\n  }\n  return cosh;\n}());\n\n\n/**\n * @param {number} x X.\n * @return {number} The smallest power of two greater than or equal to x.\n */\nexport function roundUpToPowerOfTwo(x) {\n  assert(0 < x, 29); // `x` must be greater than `0`\n  return Math.pow(2, Math.ceil(Math.log(x) / Math.LN2));\n}\n\n\n/**\n * Returns the square of the closest distance between the point (x, y) and the\n * line segment (x1, y1) to (x2, y2).\n * @param {number} x X.\n * @param {number} y Y.\n * @param {number} x1 X1.\n * @param {number} y1 Y1.\n * @param {number} x2 X2.\n * @param {number} y2 Y2.\n * @return {number} Squared distance.\n */\nexport function squaredSegmentDistance(x, y, x1, y1, x2, y2) {\n  const dx = x2 - x1;\n  const dy = y2 - y1;\n  if (dx !== 0 || dy !== 0) {\n    const t = ((x - x1) * dx + (y - y1) * dy) / (dx * dx + dy * dy);\n    if (t > 1) {\n      x1 = x2;\n      y1 = y2;\n    } else if (t > 0) {\n      x1 += dx * t;\n      y1 += dy * t;\n    }\n  }\n  return squaredDistance(x, y, x1, y1);\n}\n\n\n/**\n * Returns the square of the distance between the points (x1, y1) and (x2, y2).\n * @param {number} x1 X1.\n * @param {number} y1 Y1.\n * @param {number} x2 X2.\n * @param {number} y2 Y2.\n * @return {number} Squared distance.\n */\nexport function squaredDistance(x1, y1, x2, y2) {\n  const dx = x2 - x1;\n  const dy = y2 - y1;\n  return dx * dx + dy * dy;\n}\n\n\n/**\n * Solves system of linear equations using Gaussian elimination method.\n *\n * @param {Array.<Array.<number>>} mat Augmented matrix (n x n + 1 column)\n *                                     in row-major order.\n * @return {Array.<number>} The resulting vector.\n */\nexport function solveLinearSystem(mat) {\n  const n = mat.length;\n\n  for (let i = 0; i < n; i++) {\n    // Find max in the i-th column (ignoring i - 1 first rows)\n    let maxRow = i;\n    let maxEl = Math.abs(mat[i][i]);\n    for (let r = i + 1; r < n; r++) {\n      const absValue = Math.abs(mat[r][i]);\n      if (absValue > maxEl) {\n        maxEl = absValue;\n        maxRow = r;\n      }\n    }\n\n    if (maxEl === 0) {\n      return null; // matrix is singular\n    }\n\n    // Swap max row with i-th (current) row\n    const tmp = mat[maxRow];\n    mat[maxRow] = mat[i];\n    mat[i] = tmp;\n\n    // Subtract the i-th row to make all the remaining rows 0 in the i-th column\n    for (let j = i + 1; j < n; j++) {\n      const coef = -mat[j][i] / mat[i][i];\n      for (let k = i; k < n + 1; k++) {\n        if (i == k) {\n          mat[j][k] = 0;\n        } else {\n          mat[j][k] += coef * mat[i][k];\n        }\n      }\n    }\n  }\n\n  // Solve Ax=b for upper triangular matrix A (mat)\n  const x = new Array(n);\n  for (let l = n - 1; l >= 0; l--) {\n    x[l] = mat[l][n] / mat[l][l];\n    for (let m = l - 1; m >= 0; m--) {\n      mat[m][n] -= mat[m][l] * x[l];\n    }\n  }\n  return x;\n}\n\n\n/**\n * Converts radians to to degrees.\n *\n * @param {number} angleInRadians Angle in radians.\n * @return {number} Angle in degrees.\n */\nexport function toDegrees(angleInRadians) {\n  return angleInRadians * 180 / Math.PI;\n}\n\n\n/**\n * Converts degrees to radians.\n *\n * @param {number} angleInDegrees Angle in degrees.\n * @return {number} Angle in radians.\n */\nexport function toRadians(angleInDegrees) {\n  return angleInDegrees * Math.PI / 180;\n}\n\n/**\n * Returns the modulo of a / b, depending on the sign of b.\n *\n * @param {number} a Dividend.\n * @param {number} b Divisor.\n * @return {number} Modulo.\n */\nexport function modulo(a, b) {\n  const r = a % b;\n  return r * b < 0 ? r + b : r;\n}\n\n/**\n * Calculates the linearly interpolated value of x between a and b.\n *\n * @param {number} a Number\n * @param {number} b Number\n * @param {number} x Value to be interpolated.\n * @return {number} Interpolated value.\n */\nexport function lerp(a, b, x) {\n  return a + x * (b - a);\n}\n","/**\n * @module ol/geom/GeometryLayout\n */\n\n/**\n * The coordinate layout for geometries, indicating whether a 3rd or 4th z ('Z')\n * or measure ('M') coordinate is available. Supported values are `'XY'`,\n * `'XYZ'`, `'XYM'`, `'XYZM'`.\n * @enum {string}\n */\nexport default {\n  XY: 'XY',\n  XYZ: 'XYZ',\n  XYM: 'XYM',\n  XYZM: 'XYZM'\n};\n","/**\n * @module ol/Feature\n */\nimport {assert} from './asserts.js';\nimport {listen, unlisten, unlistenByKey} from './events.js';\nimport EventType from './events/EventType.js';\nimport {inherits} from './util.js';\nimport BaseObject, {getChangeEventType} from './Object.js';\nimport Geometry from './geom/Geometry.js';\nimport Style from './style/Style.js';\n\n/**\n * @classdesc\n * A vector object for geographic features with a geometry and other\n * attribute properties, similar to the features in vector file formats like\n * GeoJSON.\n *\n * Features can be styled individually with `setStyle`; otherwise they use the\n * style of their vector layer.\n *\n * Note that attribute properties are set as {@link module:ol/Object} properties on\n * the feature object, so they are observable, and have get/set accessors.\n *\n * Typically, a feature has a single geometry property. You can set the\n * geometry using the `setGeometry` method and get it with `getGeometry`.\n * It is possible to store more than one geometry on a feature using attribute\n * properties. By default, the geometry used for rendering is identified by\n * the property name `geometry`. If you want to use another geometry property\n * for rendering, use the `setGeometryName` method to change the attribute\n * property associated with the geometry for the feature.  For example:\n *\n * ```js\n *\n * import Feature from 'ol/Feature';\n * import Polygon from 'ol/geom/Polygon';\n * import Point from 'ol/geom/Point';\n *\n * var feature = new Feature({\n *   geometry: new Polygon(polyCoords),\n *   labelPoint: new Point(labelCoords),\n *   name: 'My Polygon'\n * });\n *\n * // get the polygon geometry\n * var poly = feature.getGeometry();\n *\n * // Render the feature as a point using the coordinates from labelPoint\n * feature.setGeometryName('labelPoint');\n *\n * // get the point geometry\n * var point = feature.getGeometry();\n * ```\n *\n * @constructor\n * @extends {module:ol/Object}\n * @param {module:ol/geom/Geometry|Object.<string, *>=} opt_geometryOrProperties\n * You may pass a Geometry object directly, or an object literal containing\n * properties. If you pass an object literal, you may include a Geometry\n * associated with a `geometry` key.\n * @api\n */\nconst Feature = function(opt_geometryOrProperties) {\n\n  BaseObject.call(this);\n\n  /**\n   * @private\n   * @type {number|string|undefined}\n   */\n  this.id_ = undefined;\n\n  /**\n   * @type {string}\n   * @private\n   */\n  this.geometryName_ = 'geometry';\n\n  /**\n   * User provided style.\n   * @private\n   * @type {module:ol/style/Style|Array.<module:ol/style/Style>|module:ol/style/Style~StyleFunction}\n   */\n  this.style_ = null;\n\n  /**\n   * @private\n   * @type {module:ol/style/Style~StyleFunction|undefined}\n   */\n  this.styleFunction_ = undefined;\n\n  /**\n   * @private\n   * @type {?module:ol/events~EventsKey}\n   */\n  this.geometryChangeKey_ = null;\n\n  listen(\n    this, getChangeEventType(this.geometryName_),\n    this.handleGeometryChanged_, this);\n\n  if (opt_geometryOrProperties !== undefined) {\n    if (opt_geometryOrProperties instanceof Geometry ||\n        !opt_geometryOrProperties) {\n      const geometry = opt_geometryOrProperties;\n      this.setGeometry(geometry);\n    } else {\n      /** @type {Object.<string, *>} */\n      const properties = opt_geometryOrProperties;\n      this.setProperties(properties);\n    }\n  }\n};\n\ninherits(Feature, BaseObject);\n\n\n/**\n * Clone this feature. If the original feature has a geometry it\n * is also cloned. The feature id is not set in the clone.\n * @return {module:ol/Feature} The clone.\n * @api\n */\nFeature.prototype.clone = function() {\n  const clone = new Feature(this.getProperties());\n  clone.setGeometryName(this.getGeometryName());\n  const geometry = this.getGeometry();\n  if (geometry) {\n    clone.setGeometry(geometry.clone());\n  }\n  const style = this.getStyle();\n  if (style) {\n    clone.setStyle(style);\n  }\n  return clone;\n};\n\n\n/**\n * Get the feature's default geometry.  A feature may have any number of named\n * geometries.  The \"default\" geometry (the one that is rendered by default) is\n * set when calling {@link module:ol/Feature~Feature#setGeometry}.\n * @return {module:ol/geom/Geometry|undefined} The default geometry for the feature.\n * @api\n * @observable\n */\nFeature.prototype.getGeometry = function() {\n  return (\n    /** @type {module:ol/geom/Geometry|undefined} */ (this.get(this.geometryName_))\n  );\n};\n\n\n/**\n * Get the feature identifier.  This is a stable identifier for the feature and\n * is either set when reading data from a remote source or set explicitly by\n * calling {@link module:ol/Feature~Feature#setId}.\n * @return {number|string|undefined} Id.\n * @api\n */\nFeature.prototype.getId = function() {\n  return this.id_;\n};\n\n\n/**\n * Get the name of the feature's default geometry.  By default, the default\n * geometry is named `geometry`.\n * @return {string} Get the property name associated with the default geometry\n *     for this feature.\n * @api\n */\nFeature.prototype.getGeometryName = function() {\n  return this.geometryName_;\n};\n\n\n/**\n * Get the feature's style. Will return what was provided to the\n * {@link module:ol/Feature~Feature#setStyle} method.\n * @return {module:ol/style/Style|Array.<module:ol/style/Style>|module:ol/style/Style~StyleFunction} The feature style.\n * @api\n */\nFeature.prototype.getStyle = function() {\n  return this.style_;\n};\n\n\n/**\n * Get the feature's style function.\n * @return {module:ol/style/Style~StyleFunction|undefined} Return a function\n * representing the current style of this feature.\n * @api\n */\nFeature.prototype.getStyleFunction = function() {\n  return this.styleFunction_;\n};\n\n\n/**\n * @private\n */\nFeature.prototype.handleGeometryChange_ = function() {\n  this.changed();\n};\n\n\n/**\n * @private\n */\nFeature.prototype.handleGeometryChanged_ = function() {\n  if (this.geometryChangeKey_) {\n    unlistenByKey(this.geometryChangeKey_);\n    this.geometryChangeKey_ = null;\n  }\n  const geometry = this.getGeometry();\n  if (geometry) {\n    this.geometryChangeKey_ = listen(geometry,\n      EventType.CHANGE, this.handleGeometryChange_, this);\n  }\n  this.changed();\n};\n\n\n/**\n * Set the default geometry for the feature.  This will update the property\n * with the name returned by {@link module:ol/Feature~Feature#getGeometryName}.\n * @param {module:ol/geom/Geometry|undefined} geometry The new geometry.\n * @api\n * @observable\n */\nFeature.prototype.setGeometry = function(geometry) {\n  this.set(this.geometryName_, geometry);\n};\n\n\n/**\n * Set the style for the feature.  This can be a single style object, an array\n * of styles, or a function that takes a resolution and returns an array of\n * styles. If it is `null` the feature has no style (a `null` style).\n * @param {module:ol/style/Style|Array.<module:ol/style/Style>|module:ol/style/Style~StyleFunction} style Style for this feature.\n * @api\n * @fires module:ol/events/Event~Event#event:change\n */\nFeature.prototype.setStyle = function(style) {\n  this.style_ = style;\n  this.styleFunction_ = !style ? undefined : createStyleFunction(style);\n  this.changed();\n};\n\n\n/**\n * Set the feature id.  The feature id is considered stable and may be used when\n * requesting features or comparing identifiers returned from a remote source.\n * The feature id can be used with the\n * {@link module:ol/source/Vector~VectorSource#getFeatureById} method.\n * @param {number|string|undefined} id The feature id.\n * @api\n * @fires module:ol/events/Event~Event#event:change\n */\nFeature.prototype.setId = function(id) {\n  this.id_ = id;\n  this.changed();\n};\n\n\n/**\n * Set the property name to be used when getting the feature's default geometry.\n * When calling {@link module:ol/Feature~Feature#getGeometry}, the value of the property with\n * this name will be returned.\n * @param {string} name The property name of the default geometry.\n * @api\n */\nFeature.prototype.setGeometryName = function(name) {\n  unlisten(\n    this, getChangeEventType(this.geometryName_),\n    this.handleGeometryChanged_, this);\n  this.geometryName_ = name;\n  listen(\n    this, getChangeEventType(this.geometryName_),\n    this.handleGeometryChanged_, this);\n  this.handleGeometryChanged_();\n};\n\n\n/**\n * Convert the provided object into a feature style function.  Functions passed\n * through unchanged.  Arrays of module:ol/style/Style or single style objects wrapped\n * in a new feature style function.\n * @param {module:ol/style/Style~StyleFunction|!Array.<module:ol/style/Style>|!module:ol/style/Style} obj\n *     A feature style function, a single style, or an array of styles.\n * @return {module:ol/style/Style~StyleFunction} A style function.\n */\nexport function createStyleFunction(obj) {\n  if (typeof obj === 'function') {\n    return obj;\n  } else {\n    /**\n     * @type {Array.<module:ol/style/Style>}\n     */\n    let styles;\n    if (Array.isArray(obj)) {\n      styles = obj;\n    } else {\n      assert(obj instanceof Style,\n        41); // Expected an `module:ol/style/Style~Style` or an array of `module:ol/style/Style~Style`\n      styles = [obj];\n    }\n    return function() {\n      return styles;\n    };\n  }\n}\nexport default Feature;\n","/**\n * @module ol/render/canvas\n */\nimport {getFontFamilies} from '../css.js';\nimport {createCanvasContext2D} from '../dom.js';\nimport {clear} from '../obj.js';\nimport LRUCache from '../structs/LRUCache.js';\nimport {create as createTransform} from '../transform.js';\n\n\n/**\n * @typedef {Object} FillState\n * @property {module:ol/colorlike~ColorLike} fillStyle\n */\n\n\n/**\n * @typedef {Object} FillStrokeState\n * @property {module:ol/colorlike~ColorLike} [currentFillStyle]\n * @property {module:ol/colorlike~ColorLike} [currentStrokeStyle]\n * @property {string} [currentLineCap]\n * @property {Array.<number>} currentLineDash\n * @property {number} [currentLineDashOffset]\n * @property {string} [currentLineJoin]\n * @property {number} [currentLineWidth]\n * @property {number} [currentMiterLimit]\n * @property {number} [lastStroke]\n * @property {module:ol/colorlike~ColorLike} [fillStyle]\n * @property {module:ol/colorlike~ColorLike} [strokeStyle]\n * @property {string} [lineCap]\n * @property {Array.<number>} lineDash\n * @property {number} [lineDashOffset]\n * @property {string} [lineJoin]\n * @property {number} [lineWidth]\n * @property {number} [miterLimit]\n */\n\n\n/**\n * @typedef {Object} StrokeState\n * @property {string} lineCap\n * @property {Array.<number>} lineDash\n * @property {number} lineDashOffset\n * @property {string} lineJoin\n * @property {number} lineWidth\n * @property {number} miterLimit\n * @property {module:ol/colorlike~ColorLike} strokeStyle\n */\n\n\n/**\n * @typedef {Object} TextState\n * @property {string} font\n * @property {string} [textAlign]\n * @property {string} textBaseline\n */\n\n\n/**\n * Container for decluttered replay instructions that need to be rendered or\n * omitted together, i.e. when styles render both an image and text, or for the\n * characters that form text along lines. The basic elements of this array are\n * `[minX, minY, maxX, maxY, count]`, where the first four entries are the\n * rendered extent of the group in pixel space. `count` is the number of styles\n * in the group, i.e. 2 when an image and a text are grouped, or 1 otherwise.\n * In addition to these four elements, declutter instruction arrays (i.e. the\n * arguments to {@link module:ol/render/canvas~drawImage} are appended to the array.\n * @typedef {Array.<*>} DeclutterGroup\n */\n\n\n/**\n * @const\n * @type {string}\n */\nexport const defaultFont = '10px sans-serif';\n\n\n/**\n * @const\n * @type {module:ol/color~Color}\n */\nexport const defaultFillStyle = [0, 0, 0, 1];\n\n\n/**\n * @const\n * @type {string}\n */\nexport const defaultLineCap = 'round';\n\n\n/**\n * @const\n * @type {Array.<number>}\n */\nexport const defaultLineDash = [];\n\n\n/**\n * @const\n * @type {number}\n */\nexport const defaultLineDashOffset = 0;\n\n\n/**\n * @const\n * @type {string}\n */\nexport const defaultLineJoin = 'round';\n\n\n/**\n * @const\n * @type {number}\n */\nexport const defaultMiterLimit = 10;\n\n\n/**\n * @const\n * @type {module:ol/color~Color}\n */\nexport const defaultStrokeStyle = [0, 0, 0, 1];\n\n\n/**\n * @const\n * @type {string}\n */\nexport const defaultTextAlign = 'center';\n\n\n/**\n * @const\n * @type {string}\n */\nexport const defaultTextBaseline = 'middle';\n\n\n/**\n * @const\n * @type {Array.<number>}\n */\nexport const defaultPadding = [0, 0, 0, 0];\n\n\n/**\n * @const\n * @type {number}\n */\nexport const defaultLineWidth = 1;\n\n\n/**\n * The label cache for text rendering. To change the default cache size of 2048\n * entries, use {@link module:ol/structs/LRUCache#setSize}.\n * @type {module:ol/structs/LRUCache.<HTMLCanvasElement>}\n * @api\n */\nexport const labelCache = new LRUCache();\n\n\n/**\n * @type {!Object.<string, number>}\n */\nexport const checkedFonts = {};\n\n\n/**\n * @type {CanvasRenderingContext2D}\n */\nlet measureContext = null;\n\n\n/**\n * @type {!Object.<string, number>}\n */\nexport const textHeights = {};\n\n\n/**\n * Clears the label cache when a font becomes available.\n * @param {string} fontSpec CSS font spec.\n */\nexport const checkFont = (function() {\n  const retries = 60;\n  const checked = checkedFonts;\n  const size = '32px ';\n  const referenceFonts = ['monospace', 'serif'];\n  const len = referenceFonts.length;\n  const text = 'wmytzilWMYTZIL@#/&?$%10\\uF013';\n  let interval, referenceWidth;\n\n  function isAvailable(font) {\n    const context = getMeasureContext();\n    let available = true;\n    for (let i = 0; i < len; ++i) {\n      const referenceFont = referenceFonts[i];\n      context.font = size + referenceFont;\n      referenceWidth = context.measureText(text).width;\n      if (font != referenceFont) {\n        context.font = size + font + ',' + referenceFont;\n        const width = context.measureText(text).width;\n        // If width and referenceWidth are the same, then the fallback was used\n        // instead of the font we wanted, so the font is not available.\n        available = available && width != referenceWidth;\n      }\n    }\n    return available;\n  }\n\n  function check() {\n    let done = true;\n    for (const font in checked) {\n      if (checked[font] < retries) {\n        if (isAvailable(font)) {\n          checked[font] = retries;\n          clear(textHeights);\n          // Make sure that loaded fonts are picked up by Safari\n          measureContext = null;\n          labelCache.clear();\n        } else {\n          ++checked[font];\n          done = false;\n        }\n      }\n    }\n    if (done) {\n      clearInterval(interval);\n      interval = undefined;\n    }\n  }\n\n  return function(fontSpec) {\n    const fontFamilies = getFontFamilies(fontSpec);\n    if (!fontFamilies) {\n      return;\n    }\n    for (let i = 0, ii = fontFamilies.length; i < ii; ++i) {\n      const fontFamily = fontFamilies[i];\n      if (!(fontFamily in checked)) {\n        checked[fontFamily] = retries;\n        if (!isAvailable(fontFamily)) {\n          checked[fontFamily] = 0;\n          if (interval === undefined) {\n            interval = setInterval(check, 32);\n          }\n        }\n      }\n    }\n  };\n})();\n\n\n/**\n * @return {CanvasRenderingContext2D} Measure context.\n */\nfunction getMeasureContext() {\n  if (!measureContext) {\n    measureContext = createCanvasContext2D(1, 1);\n  }\n  return measureContext;\n}\n\n\n/**\n * @param {string} font Font to use for measuring.\n * @return {module:ol/size~Size} Measurement.\n */\nexport const measureTextHeight = (function() {\n  let span;\n  const heights = textHeights;\n  return function(font) {\n    let height = heights[font];\n    if (height == undefined) {\n      if (!span) {\n        span = document.createElement('span');\n        span.textContent = 'M';\n        span.style.margin = span.style.padding = '0 !important';\n        span.style.position = 'absolute !important';\n        span.style.left = '-99999px !important';\n      }\n      span.style.font = font;\n      document.body.appendChild(span);\n      height = heights[font] = span.offsetHeight;\n      document.body.removeChild(span);\n    }\n    return height;\n  };\n})();\n\n\n/**\n * @param {string} font Font.\n * @param {string} text Text.\n * @return {number} Width.\n */\nexport function measureTextWidth(font, text) {\n  const measureContext = getMeasureContext();\n  if (font != measureContext.font) {\n    measureContext.font = font;\n  }\n  return measureContext.measureText(text).width;\n}\n\n\n/**\n * @param {CanvasRenderingContext2D} context Context.\n * @param {number} rotation Rotation.\n * @param {number} offsetX X offset.\n * @param {number} offsetY Y offset.\n */\nexport function rotateAtOffset(context, rotation, offsetX, offsetY) {\n  if (rotation !== 0) {\n    context.translate(offsetX, offsetY);\n    context.rotate(rotation);\n    context.translate(-offsetX, -offsetY);\n  }\n}\n\n\nexport const resetTransform = createTransform();\n\n\n/**\n * @param {CanvasRenderingContext2D} context Context.\n * @param {module:ol/transform~Transform|null} transform Transform.\n * @param {number} opacity Opacity.\n * @param {HTMLImageElement|HTMLCanvasElement|HTMLVideoElement} image Image.\n * @param {number} originX Origin X.\n * @param {number} originY Origin Y.\n * @param {number} w Width.\n * @param {number} h Height.\n * @param {number} x X.\n * @param {number} y Y.\n * @param {number} scale Scale.\n */\nexport function drawImage(context,\n  transform, opacity, image, originX, originY, w, h, x, y, scale) {\n  let alpha;\n  if (opacity != 1) {\n    alpha = context.globalAlpha;\n    context.globalAlpha = alpha * opacity;\n  }\n  if (transform) {\n    context.setTransform.apply(context, transform);\n  }\n\n  context.drawImage(image, originX, originY, w, h, x, y, w * scale, h * scale);\n\n  if (alpha) {\n    context.globalAlpha = alpha;\n  }\n  if (transform) {\n    context.setTransform.apply(context, resetTransform);\n  }\n}\n","/**\n * @module ol/asserts\n */\nimport AssertionError from './AssertionError.js';\n\n/**\n * @param {*} assertion Assertion we expected to be truthy.\n * @param {number} errorCode Error code.\n */\nexport function assert(assertion, errorCode) {\n  if (!assertion) {\n    throw new AssertionError(errorCode);\n  }\n}\n","/**\n * @module ol/functions\n */\n\n/**\n * Always returns true.\n * @returns {boolean} true.\n */\nexport function TRUE() {\n  return true;\n}\n\n/**\n * Always returns false.\n * @returns {boolean} false.\n */\nexport function FALSE() {\n  return false;\n}\n\n/**\n * A reusable function, used e.g. as a default for callbacks.\n *\n * @return {undefined} Nothing.\n */\nexport function UNDEFINED() {}\n","/**\n * @module ol/geom/Point\n */\nimport {inherits} from '../util.js';\nimport {createOrUpdateFromCoordinate, containsXY} from '../extent.js';\nimport GeometryLayout from '../geom/GeometryLayout.js';\nimport GeometryType from '../geom/GeometryType.js';\nimport SimpleGeometry from '../geom/SimpleGeometry.js';\nimport {deflateCoordinate} from '../geom/flat/deflate.js';\nimport {squaredDistance as squaredDx} from '../math.js';\n\n/**\n * @classdesc\n * Point geometry.\n *\n * @constructor\n * @extends {module:ol/geom/SimpleGeometry}\n * @param {module:ol/coordinate~Coordinate} coordinates Coordinates.\n * @param {module:ol/geom/GeometryLayout=} opt_layout Layout.\n * @api\n */\nconst Point = function(coordinates, opt_layout) {\n  SimpleGeometry.call(this);\n  this.setCoordinates(coordinates, opt_layout);\n};\n\ninherits(Point, SimpleGeometry);\n\n\n/**\n * Make a complete copy of the geometry.\n * @return {!module:ol/geom/Point} Clone.\n * @override\n * @api\n */\nPoint.prototype.clone = function() {\n  const point = new Point(null);\n  point.setFlatCoordinates(this.layout, this.flatCoordinates.slice());\n  return point;\n};\n\n\n/**\n * @inheritDoc\n */\nPoint.prototype.closestPointXY = function(x, y, closestPoint, minSquaredDistance) {\n  const flatCoordinates = this.flatCoordinates;\n  const squaredDistance = squaredDx(x, y, flatCoordinates[0], flatCoordinates[1]);\n  if (squaredDistance < minSquaredDistance) {\n    const stride = this.stride;\n    for (let i = 0; i < stride; ++i) {\n      closestPoint[i] = flatCoordinates[i];\n    }\n    closestPoint.length = stride;\n    return squaredDistance;\n  } else {\n    return minSquaredDistance;\n  }\n};\n\n\n/**\n * Return the coordinate of the point.\n * @return {module:ol/coordinate~Coordinate} Coordinates.\n * @override\n * @api\n */\nPoint.prototype.getCoordinates = function() {\n  return !this.flatCoordinates ? [] : this.flatCoordinates.slice();\n};\n\n\n/**\n * @inheritDoc\n */\nPoint.prototype.computeExtent = function(extent) {\n  return createOrUpdateFromCoordinate(this.flatCoordinates, extent);\n};\n\n\n/**\n * @inheritDoc\n * @api\n */\nPoint.prototype.getType = function() {\n  return GeometryType.POINT;\n};\n\n\n/**\n * @inheritDoc\n * @api\n */\nPoint.prototype.intersectsExtent = function(extent) {\n  return containsXY(extent, this.flatCoordinates[0], this.flatCoordinates[1]);\n};\n\n\n/**\n * @inheritDoc\n * @api\n */\nPoint.prototype.setCoordinates = function(coordinates, opt_layout) {\n  if (!coordinates) {\n    this.setFlatCoordinates(GeometryLayout.XY, null);\n  } else {\n    this.setLayout(opt_layout, coordinates, 0);\n    if (!this.flatCoordinates) {\n      this.flatCoordinates = [];\n    }\n    this.flatCoordinates.length = deflateCoordinate(\n      this.flatCoordinates, 0, coordinates, this.stride);\n    this.changed();\n  }\n};\n\n\n/**\n * @param {module:ol/geom/GeometryLayout} layout Layout.\n * @param {Array.<number>} flatCoordinates Flat coordinates.\n */\nPoint.prototype.setFlatCoordinates = function(layout, flatCoordinates) {\n  this.setFlatCoordinatesInternal(layout, flatCoordinates);\n  this.changed();\n};\nexport default Point;\n","/**\n * @module ol/dom\n */\n\n\n/**\n * Create an html canvas element and returns its 2d context.\n * @param {number=} opt_width Canvas width.\n * @param {number=} opt_height Canvas height.\n * @return {CanvasRenderingContext2D} The context.\n */\nexport function createCanvasContext2D(opt_width, opt_height) {\n  const canvas = /** @type {HTMLCanvasElement} */ (document.createElement('CANVAS'));\n  if (opt_width) {\n    canvas.width = opt_width;\n  }\n  if (opt_height) {\n    canvas.height = opt_height;\n  }\n  return /** @type {CanvasRenderingContext2D} */ (canvas.getContext('2d'));\n}\n\n\n/**\n * Get the current computed width for the given element including margin,\n * padding and border.\n * Equivalent to jQuery's `$(el).outerWidth(true)`.\n * @param {!Element} element Element.\n * @return {number} The width.\n */\nexport function outerWidth(element) {\n  let width = element.offsetWidth;\n  const style = getComputedStyle(element);\n  width += parseInt(style.marginLeft, 10) + parseInt(style.marginRight, 10);\n\n  return width;\n}\n\n\n/**\n * Get the current computed height for the given element including margin,\n * padding and border.\n * Equivalent to jQuery's `$(el).outerHeight(true)`.\n * @param {!Element} element Element.\n * @return {number} The height.\n */\nexport function outerHeight(element) {\n  let height = element.offsetHeight;\n  const style = getComputedStyle(element);\n  height += parseInt(style.marginTop, 10) + parseInt(style.marginBottom, 10);\n\n  return height;\n}\n\n/**\n * @param {Node} newNode Node to replace old node\n * @param {Node} oldNode The node to be replaced\n */\nexport function replaceNode(newNode, oldNode) {\n  const parent = oldNode.parentNode;\n  if (parent) {\n    parent.replaceChild(newNode, oldNode);\n  }\n}\n\n/**\n * @param {Node} node The node to remove.\n * @returns {Node} The node that was removed or null.\n */\nexport function removeNode(node) {\n  return node && node.parentNode ? node.parentNode.removeChild(node) : null;\n}\n\n/**\n * @param {Node} node The node to remove the children from.\n */\nexport function removeChildren(node) {\n  while (node.lastChild) {\n    node.removeChild(node.lastChild);\n  }\n}\n","/**\n * @module ol/coordinate\n */\nimport {modulo} from './math.js';\nimport {padNumber} from './string.js';\n\n\n/**\n * An array of numbers representing an xy coordinate. Example: `[16, 48]`.\n * @typedef {Array.<number>} Coordinate\n * @api\n */\n\n\n/**\n * A function that takes a {@link module:ol/coordinate~Coordinate} and\n * transforms it into a `{string}`.\n *\n * @typedef {function((module:ol/coordinate~Coordinate|undefined)): string} CoordinateFormat\n * @api\n */\n\n\n/**\n * Add `delta` to `coordinate`. `coordinate` is modified in place and returned\n * by the function.\n *\n * Example:\n *\n *     import {add} from 'ol/coordinate';\n *\n *     var coord = [7.85, 47.983333];\n *     add(coord, [-2, 4]);\n *     // coord is now [5.85, 51.983333]\n *\n * @param {module:ol/coordinate~Coordinate} coordinate Coordinate.\n * @param {module:ol/coordinate~Coordinate} delta Delta.\n * @return {module:ol/coordinate~Coordinate} The input coordinate adjusted by\n * the given delta.\n * @api\n */\nexport function add(coordinate, delta) {\n  coordinate[0] += delta[0];\n  coordinate[1] += delta[1];\n  return coordinate;\n}\n\n\n/**\n * Calculates the point closest to the passed coordinate on the passed circle.\n *\n * @param {module:ol/coordinate~Coordinate} coordinate The coordinate.\n * @param {module:ol/geom/Circle} circle The circle.\n * @return {module:ol/coordinate~Coordinate} Closest point on the circumference.\n */\nexport function closestOnCircle(coordinate, circle) {\n  const r = circle.getRadius();\n  const center = circle.getCenter();\n  const x0 = center[0];\n  const y0 = center[1];\n  const x1 = coordinate[0];\n  const y1 = coordinate[1];\n\n  let dx = x1 - x0;\n  const dy = y1 - y0;\n  if (dx === 0 && dy === 0) {\n    dx = 1;\n  }\n  const d = Math.sqrt(dx * dx + dy * dy);\n\n  const x = x0 + r * dx / d;\n  const y = y0 + r * dy / d;\n\n  return [x, y];\n}\n\n\n/**\n * Calculates the point closest to the passed coordinate on the passed segment.\n * This is the foot of the perpendicular of the coordinate to the segment when\n * the foot is on the segment, or the closest segment coordinate when the foot\n * is outside the segment.\n *\n * @param {module:ol/coordinate~Coordinate} coordinate The coordinate.\n * @param {Array.<module:ol/coordinate~Coordinate>} segment The two coordinates\n * of the segment.\n * @return {module:ol/coordinate~Coordinate} The foot of the perpendicular of\n * the coordinate to the segment.\n */\nexport function closestOnSegment(coordinate, segment) {\n  const x0 = coordinate[0];\n  const y0 = coordinate[1];\n  const start = segment[0];\n  const end = segment[1];\n  const x1 = start[0];\n  const y1 = start[1];\n  const x2 = end[0];\n  const y2 = end[1];\n  const dx = x2 - x1;\n  const dy = y2 - y1;\n  const along = (dx === 0 && dy === 0) ? 0 :\n    ((dx * (x0 - x1)) + (dy * (y0 - y1))) / ((dx * dx + dy * dy) || 0);\n  let x, y;\n  if (along <= 0) {\n    x = x1;\n    y = y1;\n  } else if (along >= 1) {\n    x = x2;\n    y = y2;\n  } else {\n    x = x1 + along * dx;\n    y = y1 + along * dy;\n  }\n  return [x, y];\n}\n\n\n/**\n * Returns a {@link module:ol/coordinate~CoordinateFormat} function that can be\n * used to format\n * a {module:ol/coordinate~Coordinate} to a string.\n *\n * Example without specifying the fractional digits:\n *\n *     import {createStringXY} from 'ol/coordinate';\n *\n *     var coord = [7.85, 47.983333];\n *     var stringifyFunc = createStringXY();\n *     var out = stringifyFunc(coord);\n *     // out is now '8, 48'\n *\n * Example with explicitly specifying 2 fractional digits:\n *\n *     import {createStringXY} from 'ol/coordinate';\n *\n *     var coord = [7.85, 47.983333];\n *     var stringifyFunc = createStringXY(2);\n *     var out = stringifyFunc(coord);\n *     // out is now '7.85, 47.98'\n *\n * @param {number=} opt_fractionDigits The number of digits to include\n *    after the decimal point. Default is `0`.\n * @return {module:ol/coordinate~CoordinateFormat} Coordinate format.\n * @api\n */\nexport function createStringXY(opt_fractionDigits) {\n  return (\n    /**\n     * @param {module:ol/coordinate~Coordinate} coordinate Coordinate.\n     * @return {string} String XY.\n     */\n    function(coordinate) {\n      return toStringXY(coordinate, opt_fractionDigits);\n    }\n  );\n}\n\n\n/**\n * @param {string} hemispheres Hemispheres.\n * @param {number} degrees Degrees.\n * @param {number=} opt_fractionDigits The number of digits to include\n *    after the decimal point. Default is `0`.\n * @return {string} String.\n */\nexport function degreesToStringHDMS(hemispheres, degrees, opt_fractionDigits) {\n  const normalizedDegrees = modulo(degrees + 180, 360) - 180;\n  const x = Math.abs(3600 * normalizedDegrees);\n  const dflPrecision = opt_fractionDigits || 0;\n  const precision = Math.pow(10, dflPrecision);\n\n  let deg = Math.floor(x / 3600);\n  let min = Math.floor((x - deg * 3600) / 60);\n  let sec = x - (deg * 3600) - (min * 60);\n  sec = Math.ceil(sec * precision) / precision;\n\n  if (sec >= 60) {\n    sec = 0;\n    min += 1;\n  }\n\n  if (min >= 60) {\n    min = 0;\n    deg += 1;\n  }\n\n  return deg + '\\u00b0 ' + padNumber(min, 2) + '\\u2032 ' +\n    padNumber(sec, 2, dflPrecision) + '\\u2033' +\n    (normalizedDegrees == 0 ? '' : ' ' + hemispheres.charAt(normalizedDegrees < 0 ? 1 : 0));\n}\n\n\n/**\n * Transforms the given {@link module:ol/coordinate~Coordinate} to a string\n * using the given string template. The strings `{x}` and `{y}` in the template\n * will be replaced with the first and second coordinate values respectively.\n *\n * Example without specifying the fractional digits:\n *\n *     import {format} from 'ol/coordinate';\n *\n *     var coord = [7.85, 47.983333];\n *     var template = 'Coordinate is ({x}|{y}).';\n *     var out = format(coord, template);\n *     // out is now 'Coordinate is (8|48).'\n *\n * Example explicitly specifying the fractional digits:\n *\n *     import {format} from 'ol/coordinate';\n *\n *     var coord = [7.85, 47.983333];\n *     var template = 'Coordinate is ({x}|{y}).';\n *     var out = format(coord, template, 2);\n *     // out is now 'Coordinate is (7.85|47.98).'\n *\n * @param {module:ol/coordinate~Coordinate} coordinate Coordinate.\n * @param {string} template A template string with `{x}` and `{y}` placeholders\n *     that will be replaced by first and second coordinate values.\n * @param {number=} opt_fractionDigits The number of digits to include\n *    after the decimal point. Default is `0`.\n * @return {string} Formatted coordinate.\n * @api\n */\nexport function format(coordinate, template, opt_fractionDigits) {\n  if (coordinate) {\n    return template\n      .replace('{x}', coordinate[0].toFixed(opt_fractionDigits))\n      .replace('{y}', coordinate[1].toFixed(opt_fractionDigits));\n  } else {\n    return '';\n  }\n}\n\n\n/**\n * @param {module:ol/coordinate~Coordinate} coordinate1 First coordinate.\n * @param {module:ol/coordinate~Coordinate} coordinate2 Second coordinate.\n * @return {boolean} The two coordinates are equal.\n */\nexport function equals(coordinate1, coordinate2) {\n  let equals = true;\n  for (let i = coordinate1.length - 1; i >= 0; --i) {\n    if (coordinate1[i] != coordinate2[i]) {\n      equals = false;\n      break;\n    }\n  }\n  return equals;\n}\n\n\n/**\n * Rotate `coordinate` by `angle`. `coordinate` is modified in place and\n * returned by the function.\n *\n * Example:\n *\n *     import {rotate} from 'ol/coordinate';\n *\n *     var coord = [7.85, 47.983333];\n *     var rotateRadians = Math.PI / 2; // 90 degrees\n *     rotate(coord, rotateRadians);\n *     // coord is now [-47.983333, 7.85]\n *\n * @param {module:ol/coordinate~Coordinate} coordinate Coordinate.\n * @param {number} angle Angle in radian.\n * @return {module:ol/coordinate~Coordinate} Coordinate.\n * @api\n */\nexport function rotate(coordinate, angle) {\n  const cosAngle = Math.cos(angle);\n  const sinAngle = Math.sin(angle);\n  const x = coordinate[0] * cosAngle - coordinate[1] * sinAngle;\n  const y = coordinate[1] * cosAngle + coordinate[0] * sinAngle;\n  coordinate[0] = x;\n  coordinate[1] = y;\n  return coordinate;\n}\n\n\n/**\n * Scale `coordinate` by `scale`. `coordinate` is modified in place and returned\n * by the function.\n *\n * Example:\n *\n *     import {scale as scaleCoordinate} from 'ol/coordinate';\n *\n *     var coord = [7.85, 47.983333];\n *     var scale = 1.2;\n *     scaleCoordinate(coord, scale);\n *     // coord is now [9.42, 57.5799996]\n *\n * @param {module:ol/coordinate~Coordinate} coordinate Coordinate.\n * @param {number} scale Scale factor.\n * @return {module:ol/coordinate~Coordinate} Coordinate.\n */\nexport function scale(coordinate, scale) {\n  coordinate[0] *= scale;\n  coordinate[1] *= scale;\n  return coordinate;\n}\n\n\n/**\n * @param {module:ol/coordinate~Coordinate} coord1 First coordinate.\n * @param {module:ol/coordinate~Coordinate} coord2 Second coordinate.\n * @return {number} Squared distance between coord1 and coord2.\n */\nexport function squaredDistance(coord1, coord2) {\n  const dx = coord1[0] - coord2[0];\n  const dy = coord1[1] - coord2[1];\n  return dx * dx + dy * dy;\n}\n\n\n/**\n * @param {module:ol/coordinate~Coordinate} coord1 First coordinate.\n * @param {module:ol/coordinate~Coordinate} coord2 Second coordinate.\n * @return {number} Distance between coord1 and coord2.\n */\nexport function distance(coord1, coord2) {\n  return Math.sqrt(squaredDistance(coord1, coord2));\n}\n\n\n/**\n * Calculate the squared distance from a coordinate to a line segment.\n *\n * @param {module:ol/coordinate~Coordinate} coordinate Coordinate of the point.\n * @param {Array.<module:ol/coordinate~Coordinate>} segment Line segment (2\n * coordinates).\n * @return {number} Squared distance from the point to the line segment.\n */\nexport function squaredDistanceToSegment(coordinate, segment) {\n  return squaredDistance(coordinate,\n    closestOnSegment(coordinate, segment));\n}\n\n\n/**\n * Format a geographic coordinate with the hemisphere, degrees, minutes, and\n * seconds.\n *\n * Example without specifying fractional digits:\n *\n *     import {toStringHDMS} from 'ol/coordinate';\n *\n *     var coord = [7.85, 47.983333];\n *     var out = toStringHDMS(coord);\n *     // out is now '47° 58′ 60″ N 7° 50′ 60″ E'\n *\n * Example explicitly specifying 1 fractional digit:\n *\n *     import {toStringHDMS} from 'ol/coordinate';\n *\n *     var coord = [7.85, 47.983333];\n *     var out = toStringHDMS(coord, 1);\n *     // out is now '47° 58′ 60.0″ N 7° 50′ 60.0″ E'\n *\n * @param {module:ol/coordinate~Coordinate} coordinate Coordinate.\n * @param {number=} opt_fractionDigits The number of digits to include\n *    after the decimal point. Default is `0`.\n * @return {string} Hemisphere, degrees, minutes and seconds.\n * @api\n */\nexport function toStringHDMS(coordinate, opt_fractionDigits) {\n  if (coordinate) {\n    return degreesToStringHDMS('NS', coordinate[1], opt_fractionDigits) + ' ' +\n        degreesToStringHDMS('EW', coordinate[0], opt_fractionDigits);\n  } else {\n    return '';\n  }\n}\n\n\n/**\n * Format a coordinate as a comma delimited string.\n *\n * Example without specifying fractional digits:\n *\n *     import {toStringXY} from 'ol/coordinate';\n *\n *     var coord = [7.85, 47.983333];\n *     var out = toStringXY(coord);\n *     // out is now '8, 48'\n *\n * Example explicitly specifying 1 fractional digit:\n *\n *     import {toStringXY} from 'ol/coordinate';\n *\n *     var coord = [7.85, 47.983333];\n *     var out = toStringXY(coord, 1);\n *     // out is now '7.8, 48.0'\n *\n * @param {module:ol/coordinate~Coordinate} coordinate Coordinate.\n * @param {number=} opt_fractionDigits The number of digits to include\n *    after the decimal point. Default is `0`.\n * @return {string} XY.\n * @api\n */\nexport function toStringXY(coordinate, opt_fractionDigits) {\n  return format(coordinate, '{x}, {y}', opt_fractionDigits);\n}\n","/**\n * @module ol/format/GeoJSON\n */\n// TODO: serialize dataProjection as crs member when writing\n// see https://github.com/openlayers/openlayers/issues/2078\n\nimport {inherits} from '../util.js';\nimport {assert} from '../asserts.js';\nimport Feature from '../Feature.js';\nimport {transformWithOptions} from '../format/Feature.js';\nimport JSONFeature from '../format/JSONFeature.js';\nimport GeometryCollection from '../geom/GeometryCollection.js';\nimport LineString from '../geom/LineString.js';\nimport MultiLineString from '../geom/MultiLineString.js';\nimport MultiPoint from '../geom/MultiPoint.js';\nimport MultiPolygon from '../geom/MultiPolygon.js';\nimport Point from '../geom/Point.js';\nimport Polygon from '../geom/Polygon.js';\nimport {assign, isEmpty} from '../obj.js';\nimport {get as getProjection} from '../proj.js';\n\n\n/**\n * @typedef {Object} Options\n * @property {module:ol/proj~ProjectionLike} [dataProjection='EPSG:4326'] Default data projection.\n * @property {module:ol/proj~ProjectionLike} [featureProjection] Projection for features read or\n * written by the format.  Options passed to read or write methods will take precedence.\n * @property {string} [geometryName] Geometry name to use when creating features.\n * @property {boolean} [extractGeometryName=false] Certain GeoJSON providers include\n * the geometry_name field in the feature GeoJSON. If set to `true` the GeoJSON reader\n * will look for that field to set the geometry name. If both this field is set to `true`\n * and a `geometryName` is provided, the `geometryName` will take precedence.\n */\n\n\n/**\n * @classdesc\n * Feature format for reading and writing data in the GeoJSON format.\n *\n * @constructor\n * @extends {module:ol/format/JSONFeature}\n * @param {module:ol/format/GeoJSON~Options=} opt_options Options.\n * @api\n */\nconst GeoJSON = function(opt_options) {\n\n  const options = opt_options ? opt_options : {};\n\n  JSONFeature.call(this);\n\n  /**\n   * @inheritDoc\n   */\n  this.dataProjection = getProjection(\n    options.dataProjection ?\n      options.dataProjection : 'EPSG:4326');\n\n  if (options.featureProjection) {\n    this.defaultFeatureProjection = getProjection(options.featureProjection);\n  }\n\n  /**\n   * Name of the geometry attribute for features.\n   * @type {string|undefined}\n   * @private\n   */\n  this.geometryName_ = options.geometryName;\n\n  /**\n   * Look for the geometry name in the feature GeoJSON\n   * @type {boolean|undefined}\n   * @private\n   */\n  this.extractGeometryName_ = options.extractGeometryName;\n\n};\n\ninherits(GeoJSON, JSONFeature);\n\n\n/**\n * @const\n * @type {Object.<string, function(GeoJSONObject): module:ol/geom/Geometry>}\n */\nconst GEOMETRY_READERS = {\n  'Point': readPointGeometry,\n  'LineString': readLineStringGeometry,\n  'Polygon': readPolygonGeometry,\n  'MultiPoint': readMultiPointGeometry,\n  'MultiLineString': readMultiLineStringGeometry,\n  'MultiPolygon': readMultiPolygonGeometry,\n  'GeometryCollection': readGeometryCollectionGeometry\n};\n\n\n/**\n * @const\n * @type {Object.<string, function(module:ol/geom/Geometry, module:ol/format/Feature~WriteOptions=): (GeoJSONGeometry|GeoJSONGeometryCollection)>}\n */\nconst GEOMETRY_WRITERS = {\n  'Point': writePointGeometry,\n  'LineString': writeLineStringGeometry,\n  'Polygon': writePolygonGeometry,\n  'MultiPoint': writeMultiPointGeometry,\n  'MultiLineString': writeMultiLineStringGeometry,\n  'MultiPolygon': writeMultiPolygonGeometry,\n  'GeometryCollection': writeGeometryCollectionGeometry,\n  'Circle': writeEmptyGeometryCollectionGeometry\n};\n\n\n/**\n * @param {GeoJSONGeometry|GeoJSONGeometryCollection} object Object.\n * @param {module:ol/format/Feature~ReadOptions=} opt_options Read options.\n * @return {module:ol/geom/Geometry} Geometry.\n */\nfunction readGeometry(object, opt_options) {\n  if (!object) {\n    return null;\n  }\n  const geometryReader = GEOMETRY_READERS[object.type];\n  return (\n    /** @type {module:ol/geom/Geometry} */ (transformWithOptions(geometryReader(object), false, opt_options))\n  );\n}\n\n\n/**\n * @param {GeoJSONGeometryCollection} object Object.\n * @param {module:ol/format/Feature~ReadOptions=} opt_options Read options.\n * @return {module:ol/geom/GeometryCollection} Geometry collection.\n */\nfunction readGeometryCollectionGeometry(object, opt_options) {\n  const geometries = object.geometries.map(\n    /**\n     * @param {GeoJSONGeometry} geometry Geometry.\n     * @return {module:ol/geom/Geometry} geometry Geometry.\n     */\n    function(geometry) {\n      return readGeometry(geometry, opt_options);\n    });\n  return new GeometryCollection(geometries);\n}\n\n\n/**\n * @param {GeoJSONGeometry} object Object.\n * @return {module:ol/geom/Point} Point.\n */\nfunction readPointGeometry(object) {\n  return new Point(object.coordinates);\n}\n\n\n/**\n * @param {GeoJSONGeometry} object Object.\n * @return {module:ol/geom/LineString} LineString.\n */\nfunction readLineStringGeometry(object) {\n  return new LineString(object.coordinates);\n}\n\n\n/**\n * @param {GeoJSONGeometry} object Object.\n * @return {module:ol/geom/MultiLineString} MultiLineString.\n */\nfunction readMultiLineStringGeometry(object) {\n  return new MultiLineString(object.coordinates);\n}\n\n\n/**\n * @param {GeoJSONGeometry} object Object.\n * @return {module:ol/geom/MultiPoint} MultiPoint.\n */\nfunction readMultiPointGeometry(object) {\n  return new MultiPoint(object.coordinates);\n}\n\n\n/**\n * @param {GeoJSONGeometry} object Object.\n * @return {module:ol/geom/MultiPolygon} MultiPolygon.\n */\nfunction readMultiPolygonGeometry(object) {\n  return new MultiPolygon(object.coordinates);\n}\n\n\n/**\n * @param {GeoJSONGeometry} object Object.\n * @return {module:ol/geom/Polygon} Polygon.\n */\nfunction readPolygonGeometry(object) {\n  return new Polygon(object.coordinates);\n}\n\n\n/**\n * @param {module:ol/geom/Geometry} geometry Geometry.\n * @param {module:ol/format/Feature~WriteOptions=} opt_options Write options.\n * @return {GeoJSONGeometry|GeoJSONGeometryCollection} GeoJSON geometry.\n */\nfunction writeGeometry(geometry, opt_options) {\n  const geometryWriter = GEOMETRY_WRITERS[geometry.getType()];\n  return geometryWriter(/** @type {module:ol/geom/Geometry} */ (\n    transformWithOptions(geometry, true, opt_options)), opt_options);\n}\n\n\n/**\n * @param {module:ol/geom/Geometry} geometry Geometry.\n * @return {GeoJSONGeometryCollection} Empty GeoJSON geometry collection.\n */\nfunction writeEmptyGeometryCollectionGeometry(geometry) {\n  return /** @type {GeoJSONGeometryCollection} */ ({\n    type: 'GeometryCollection',\n    geometries: []\n  });\n}\n\n\n/**\n * @param {module:ol/geom/GeometryCollection} geometry Geometry.\n * @param {module:ol/format/Feature~WriteOptions=} opt_options Write options.\n * @return {GeoJSONGeometryCollection} GeoJSON geometry collection.\n */\nfunction writeGeometryCollectionGeometry(geometry, opt_options) {\n  const geometries = geometry.getGeometriesArray().map(function(geometry) {\n    const options = assign({}, opt_options);\n    delete options.featureProjection;\n    return writeGeometry(geometry, options);\n  });\n  return /** @type {GeoJSONGeometryCollection} */ ({\n    type: 'GeometryCollection',\n    geometries: geometries\n  });\n}\n\n\n/**\n * @param {module:ol/geom/LineString} geometry Geometry.\n * @param {module:ol/format/Feature~WriteOptions=} opt_options Write options.\n * @return {GeoJSONGeometry} GeoJSON geometry.\n */\nfunction writeLineStringGeometry(geometry, opt_options) {\n  return /** @type {GeoJSONGeometry} */ ({\n    type: 'LineString',\n    coordinates: geometry.getCoordinates()\n  });\n}\n\n\n/**\n * @param {module:ol/geom/MultiLineString} geometry Geometry.\n * @param {module:ol/format/Feature~WriteOptions=} opt_options Write options.\n * @return {GeoJSONGeometry} GeoJSON geometry.\n */\nfunction writeMultiLineStringGeometry(geometry, opt_options) {\n  return /** @type {GeoJSONGeometry} */ ({\n    type: 'MultiLineString',\n    coordinates: geometry.getCoordinates()\n  });\n}\n\n\n/**\n * @param {module:ol/geom/MultiPoint} geometry Geometry.\n * @param {module:ol/format/Feature~WriteOptions=} opt_options Write options.\n * @return {GeoJSONGeometry} GeoJSON geometry.\n */\nfunction writeMultiPointGeometry(geometry, opt_options) {\n  return /** @type {GeoJSONGeometry} */ ({\n    type: 'MultiPoint',\n    coordinates: geometry.getCoordinates()\n  });\n}\n\n\n/**\n * @param {module:ol/geom/MultiPolygon} geometry Geometry.\n * @param {module:ol/format/Feature~WriteOptions=} opt_options Write options.\n * @return {GeoJSONGeometry} GeoJSON geometry.\n */\nfunction writeMultiPolygonGeometry(geometry, opt_options) {\n  let right;\n  if (opt_options) {\n    right = opt_options.rightHanded;\n  }\n  return /** @type {GeoJSONGeometry} */ ({\n    type: 'MultiPolygon',\n    coordinates: geometry.getCoordinates(right)\n  });\n}\n\n\n/**\n * @param {module:ol/geom/Point} geometry Geometry.\n * @param {module:ol/format/Feature~WriteOptions=} opt_options Write options.\n * @return {GeoJSONGeometry} GeoJSON geometry.\n */\nfunction writePointGeometry(geometry, opt_options) {\n  return /** @type {GeoJSONGeometry} */ ({\n    type: 'Point',\n    coordinates: geometry.getCoordinates()\n  });\n}\n\n\n/**\n * @param {module:ol/geom/Polygon} geometry Geometry.\n * @param {module:ol/format/Feature~WriteOptions=} opt_options Write options.\n * @return {GeoJSONGeometry} GeoJSON geometry.\n */\nfunction writePolygonGeometry(geometry, opt_options) {\n  let right;\n  if (opt_options) {\n    right = opt_options.rightHanded;\n  }\n  return /** @type {GeoJSONGeometry} */ ({\n    type: 'Polygon',\n    coordinates: geometry.getCoordinates(right)\n  });\n}\n\n\n/**\n * Read a feature from a GeoJSON Feature source.  Only works for Feature or\n * geometry types.  Use {@link module:ol/format/GeoJSON#readFeatures} to read\n * FeatureCollection source. If feature at source has an id, it will be used\n * as Feature id by calling {@link module:ol/Feature#setId} internally.\n *\n * @function\n * @param {Document|Node|Object|string} source Source.\n * @param {module:ol/format/Feature~ReadOptions=} opt_options Read options.\n * @return {module:ol/Feature} Feature.\n * @api\n */\nGeoJSON.prototype.readFeature;\n\n\n/**\n * Read all features from a GeoJSON source.  Works for all GeoJSON types.\n * If the source includes only geometries, features will be created with those\n * geometries.\n *\n * @function\n * @param {Document|Node|Object|string} source Source.\n * @param {module:ol/format/Feature~ReadOptions=} opt_options Read options.\n * @return {Array.<module:ol/Feature>} Features.\n * @api\n */\nGeoJSON.prototype.readFeatures;\n\n\n/**\n * @inheritDoc\n */\nGeoJSON.prototype.readFeatureFromObject = function(object, opt_options) {\n  /**\n   * @type {GeoJSONFeature}\n   */\n  let geoJSONFeature = null;\n  if (object.type === 'Feature') {\n    geoJSONFeature = /** @type {GeoJSONFeature} */ (object);\n  } else {\n    geoJSONFeature = /** @type {GeoJSONFeature} */ ({\n      type: 'Feature',\n      geometry: /** @type {GeoJSONGeometry|GeoJSONGeometryCollection} */ (object)\n    });\n  }\n\n  const geometry = readGeometry(geoJSONFeature.geometry, opt_options);\n  const feature = new Feature();\n  if (this.geometryName_) {\n    feature.setGeometryName(this.geometryName_);\n  } else if (this.extractGeometryName_ && geoJSONFeature.geometry_name !== undefined) {\n    feature.setGeometryName(geoJSONFeature.geometry_name);\n  }\n  feature.setGeometry(geometry);\n  if (geoJSONFeature.id !== undefined) {\n    feature.setId(geoJSONFeature.id);\n  }\n  if (geoJSONFeature.properties) {\n    feature.setProperties(geoJSONFeature.properties);\n  }\n  return feature;\n};\n\n\n/**\n * @inheritDoc\n */\nGeoJSON.prototype.readFeaturesFromObject = function(object, opt_options) {\n  const geoJSONObject = /** @type {GeoJSONObject} */ (object);\n  /** @type {Array.<module:ol/Feature>} */\n  let features = null;\n  if (geoJSONObject.type === 'FeatureCollection') {\n    const geoJSONFeatureCollection = /** @type {GeoJSONFeatureCollection} */ (object);\n    features = [];\n    const geoJSONFeatures = geoJSONFeatureCollection.features;\n    for (let i = 0, ii = geoJSONFeatures.length; i < ii; ++i) {\n      features.push(this.readFeatureFromObject(geoJSONFeatures[i], opt_options));\n    }\n  } else {\n    features = [this.readFeatureFromObject(object, opt_options)];\n  }\n  return features;\n};\n\n\n/**\n * Read a geometry from a GeoJSON source.\n *\n * @function\n * @param {Document|Node|Object|string} source Source.\n * @param {module:ol/format/Feature~ReadOptions=} opt_options Read options.\n * @return {module:ol/geom/Geometry} Geometry.\n * @api\n */\nGeoJSON.prototype.readGeometry;\n\n\n/**\n * @inheritDoc\n */\nGeoJSON.prototype.readGeometryFromObject = function(object, opt_options) {\n  return readGeometry(/** @type {GeoJSONGeometry} */ (object), opt_options);\n};\n\n\n/**\n * Read the projection from a GeoJSON source.\n *\n * @function\n * @param {Document|Node|Object|string} source Source.\n * @return {module:ol/proj/Projection} Projection.\n * @api\n */\nGeoJSON.prototype.readProjection;\n\n\n/**\n * @inheritDoc\n */\nGeoJSON.prototype.readProjectionFromObject = function(object) {\n  const geoJSONObject = /** @type {GeoJSONObject} */ (object);\n  const crs = geoJSONObject.crs;\n  let projection;\n  if (crs) {\n    if (crs.type == 'name') {\n      projection = getProjection(crs.properties.name);\n    } else {\n      assert(false, 36); // Unknown SRS type\n    }\n  } else {\n    projection = this.dataProjection;\n  }\n  return (\n    /** @type {module:ol/proj/Projection} */ (projection)\n  );\n};\n\n\n/**\n * Encode a feature as a GeoJSON Feature string.\n *\n * @function\n * @param {module:ol/Feature} feature Feature.\n * @param {module:ol/format/Feature~WriteOptions=} opt_options Write options.\n * @return {string} GeoJSON.\n * @override\n * @api\n */\nGeoJSON.prototype.writeFeature;\n\n\n/**\n * Encode a feature as a GeoJSON Feature object.\n *\n * @param {module:ol/Feature} feature Feature.\n * @param {module:ol/format/Feature~WriteOptions=} opt_options Write options.\n * @return {GeoJSONFeature} Object.\n * @override\n * @api\n */\nGeoJSON.prototype.writeFeatureObject = function(feature, opt_options) {\n  opt_options = this.adaptOptions(opt_options);\n\n  const object = /** @type {GeoJSONFeature} */ ({\n    'type': 'Feature'\n  });\n  const id = feature.getId();\n  if (id !== undefined) {\n    object.id = id;\n  }\n  const geometry = feature.getGeometry();\n  if (geometry) {\n    object.geometry = writeGeometry(geometry, opt_options);\n  } else {\n    object.geometry = null;\n  }\n  const properties = feature.getProperties();\n  delete properties[feature.getGeometryName()];\n  if (!isEmpty(properties)) {\n    object.properties = properties;\n  } else {\n    object.properties = null;\n  }\n  return object;\n};\n\n\n/**\n * Encode an array of features as GeoJSON.\n *\n * @function\n * @param {Array.<module:ol/Feature>} features Features.\n * @param {module:ol/format/Feature~WriteOptions=} opt_options Write options.\n * @return {string} GeoJSON.\n * @api\n */\nGeoJSON.prototype.writeFeatures;\n\n\n/**\n * Encode an array of features as a GeoJSON object.\n *\n * @param {Array.<module:ol/Feature>} features Features.\n * @param {module:ol/format/Feature~WriteOptions=} opt_options Write options.\n * @return {GeoJSONFeatureCollection} GeoJSON Object.\n * @override\n * @api\n */\nGeoJSON.prototype.writeFeaturesObject = function(features, opt_options) {\n  opt_options = this.adaptOptions(opt_options);\n  const objects = [];\n  for (let i = 0, ii = features.length; i < ii; ++i) {\n    objects.push(this.writeFeatureObject(features[i], opt_options));\n  }\n  return /** @type {GeoJSONFeatureCollection} */ ({\n    type: 'FeatureCollection',\n    features: objects\n  });\n};\n\n\n/**\n * Encode a geometry as a GeoJSON string.\n *\n * @function\n * @param {module:ol/geom/Geometry} geometry Geometry.\n * @param {module:ol/format/Feature~WriteOptions=} opt_options Write options.\n * @return {string} GeoJSON.\n * @api\n */\nGeoJSON.prototype.writeGeometry;\n\n\n/**\n * Encode a geometry as a GeoJSON object.\n *\n * @param {module:ol/geom/Geometry} geometry Geometry.\n * @param {module:ol/format/Feature~WriteOptions=} opt_options Write options.\n * @return {GeoJSONGeometry|GeoJSONGeometryCollection} Object.\n * @override\n * @api\n */\nGeoJSON.prototype.writeGeometryObject = function(geometry, opt_options) {\n  return writeGeometry(geometry, this.adaptOptions(opt_options));\n};\nexport default GeoJSON;\n","/**\n * @module ol/layer/Vector\n */\nimport {inherits} from '../util.js';\nimport LayerType from '../LayerType.js';\nimport Layer from '../layer/Layer.js';\nimport VectorRenderType from '../layer/VectorRenderType.js';\nimport {assign} from '../obj.js';\nimport {createDefaultStyle, toFunction as toStyleFunction} from '../style/Style.js';\n\n\n/**\n * @typedef {Object} Options\n * @property {number} [opacity=1] Opacity (0, 1).\n * @property {boolean} [visible=true] Visibility.\n * @property {module:ol/extent~Extent} [extent] The bounding extent for layer rendering.  The layer will not be\n * rendered outside of this extent.\n * @property {number} [zIndex=0] The z-index for layer rendering.  At rendering time, the layers\n * will be ordered, first by Z-index and then by position.\n * @property {number} [minResolution] The minimum resolution (inclusive) at which this layer will be\n * visible.\n * @property {number} [maxResolution] The maximum resolution (exclusive) below which this layer will\n * be visible.\n * @property {module:ol/render~OrderFunction} [renderOrder] Render order. Function to be used when sorting\n * features before rendering. By default features are drawn in the order that they are created. Use\n * `null` to avoid the sort, but get an undefined draw order.\n * @property {number} [renderBuffer=100] The buffer in pixels around the viewport extent used by the\n * renderer when getting features from the vector source for the rendering or hit-detection.\n * Recommended value: the size of the largest symbol, line width or label.\n * @property {module:ol/layer/VectorRenderType|string} [renderMode='vector'] Render mode for vector layers:\n *  * `'image'`: Vector layers are rendered as images. Great performance, but point symbols and\n *    texts are always rotated with the view and pixels are scaled during zoom animations.\n *  * `'vector'`: Vector layers are rendered as vectors. Most accurate rendering even during\n *    animations, but slower performance.\n * @property {module:ol/source/Vector} [source] Source.\n * @property {module:ol/PluggableMap} [map] Sets the layer as overlay on a map. The map will not manage\n * this layer in its layers collection, and the layer will be rendered on top. This is useful for\n * temporary layers. The standard way to add a layer to a map and have it managed by the map is to\n * use {@link module:ol/Map#addLayer}.\n * @property {boolean} [declutter=false] Declutter images and text. Decluttering is applied to all\n * image and text styles, and the priority is defined by the z-index of the style. Lower z-index\n * means higher priority.\n * @property {module:ol/style/Style|Array.<module:ol/style/Style>|module:ol/style/Style~StyleFunction} [style] Layer style. See\n * {@link module:ol/style} for default style which will be used if this is not defined.\n * @property {boolean} [updateWhileAnimating=false] When set to `true` and `renderMode`\n * is `vector`, feature batches will be recreated during animations. This means that no\n * vectors will be shown clipped, but the setting will have a performance impact for large\n * amounts of vector data. When set to `false`, batches will be recreated when no animation\n * is active.\n * @property {boolean} [updateWhileInteracting=false] When set to `true` and `renderMode`\n * is `vector`, feature batches will be recreated during interactions. See also\n * `updateWhileAnimating`.\n */\n\n\n/**\n * @enum {string}\n * Render mode for vector layers:\n *  * `'image'`: Vector layers are rendered as images. Great performance, but\n *    point symbols and texts are always rotated with the view and pixels are\n *    scaled during zoom animations.\n *  * `'vector'`: Vector layers are rendered as vectors. Most accurate rendering\n *    even during animations, but slower performance.\n * @api\n */\nexport const RenderType = {\n  IMAGE: 'image',\n  VECTOR: 'vector'\n};\n\n\n/**\n * @enum {string}\n * @private\n */\nconst Property = {\n  RENDER_ORDER: 'renderOrder'\n};\n\n\n/**\n * @classdesc\n * Vector data that is rendered client-side.\n * Note that any property set in the options is set as a {@link module:ol/Object~BaseObject}\n * property on the layer object; for example, setting `title: 'My Title'` in the\n * options means that `title` is observable, and has get/set accessors.\n *\n * @constructor\n * @extends {module:ol/layer/Layer}\n * @fires module:ol/render/Event~RenderEvent\n * @param {module:ol/layer/Vector~Options=} opt_options Options.\n * @api\n */\nconst VectorLayer = function(opt_options) {\n  const options = opt_options ?\n    opt_options : /** @type {module:ol/layer/Vector~Options} */ ({});\n\n  const baseOptions = assign({}, options);\n\n  delete baseOptions.style;\n  delete baseOptions.renderBuffer;\n  delete baseOptions.updateWhileAnimating;\n  delete baseOptions.updateWhileInteracting;\n  Layer.call(this, /** @type {module:ol/layer/Layer~Options} */ (baseOptions));\n\n  /**\n   * @private\n   * @type {boolean}\n   */\n  this.declutter_ = options.declutter !== undefined ? options.declutter : false;\n\n  /**\n   * @type {number}\n   * @private\n   */\n  this.renderBuffer_ = options.renderBuffer !== undefined ?\n    options.renderBuffer : 100;\n\n  /**\n   * User provided style.\n   * @type {module:ol/style/Style|Array.<module:ol/style/Style>|module:ol/style/Style~StyleFunction}\n   * @private\n   */\n  this.style_ = null;\n\n  /**\n   * Style function for use within the library.\n   * @type {module:ol/style/Style~StyleFunction|undefined}\n   * @private\n   */\n  this.styleFunction_ = undefined;\n\n  this.setStyle(options.style);\n\n  /**\n   * @type {boolean}\n   * @private\n   */\n  this.updateWhileAnimating_ = options.updateWhileAnimating !== undefined ?\n    options.updateWhileAnimating : false;\n\n  /**\n   * @type {boolean}\n   * @private\n   */\n  this.updateWhileInteracting_ = options.updateWhileInteracting !== undefined ?\n    options.updateWhileInteracting : false;\n\n  /**\n   * @private\n   * @type {module:ol/layer/VectorTileRenderType|string}\n   */\n  this.renderMode_ = options.renderMode || VectorRenderType.VECTOR;\n\n  /**\n   * The layer type.\n   * @protected\n   * @type {module:ol/LayerType}\n   */\n  this.type = LayerType.VECTOR;\n\n};\n\ninherits(VectorLayer, Layer);\n\n\n/**\n * @return {boolean} Declutter.\n */\nVectorLayer.prototype.getDeclutter = function() {\n  return this.declutter_;\n};\n\n\n/**\n * @param {boolean} declutter Declutter.\n */\nVectorLayer.prototype.setDeclutter = function(declutter) {\n  this.declutter_ = declutter;\n};\n\n\n/**\n * @return {number|undefined} Render buffer.\n */\nVectorLayer.prototype.getRenderBuffer = function() {\n  return this.renderBuffer_;\n};\n\n\n/**\n * @return {function(module:ol/Feature, module:ol/Feature): number|null|undefined} Render\n *     order.\n */\nVectorLayer.prototype.getRenderOrder = function() {\n  return (\n    /** @type {module:ol/render~OrderFunction|null|undefined} */ (this.get(Property.RENDER_ORDER))\n  );\n};\n\n\n/**\n * Return the associated {@link module:ol/source/Vector vectorsource} of the layer.\n * @function\n * @return {module:ol/source/Vector} Source.\n * @api\n */\nVectorLayer.prototype.getSource;\n\n\n/**\n * Get the style for features.  This returns whatever was passed to the `style`\n * option at construction or to the `setStyle` method.\n * @return {module:ol/style/Style|Array.<module:ol/style/Style>|module:ol/style/Style~StyleFunction}\n *     Layer style.\n * @api\n */\nVectorLayer.prototype.getStyle = function() {\n  return this.style_;\n};\n\n\n/**\n * Get the style function.\n * @return {module:ol/style/Style~StyleFunction|undefined} Layer style function.\n * @api\n */\nVectorLayer.prototype.getStyleFunction = function() {\n  return this.styleFunction_;\n};\n\n\n/**\n * @return {boolean} Whether the rendered layer should be updated while\n *     animating.\n */\nVectorLayer.prototype.getUpdateWhileAnimating = function() {\n  return this.updateWhileAnimating_;\n};\n\n\n/**\n * @return {boolean} Whether the rendered layer should be updated while\n *     interacting.\n */\nVectorLayer.prototype.getUpdateWhileInteracting = function() {\n  return this.updateWhileInteracting_;\n};\n\n\n/**\n * @param {module:ol/render~OrderFunction|null|undefined} renderOrder\n *     Render order.\n */\nVectorLayer.prototype.setRenderOrder = function(renderOrder) {\n  this.set(Property.RENDER_ORDER, renderOrder);\n};\n\n\n/**\n * Set the style for features.  This can be a single style object, an array\n * of styles, or a function that takes a feature and resolution and returns\n * an array of styles. If it is `undefined` the default style is used. If\n * it is `null` the layer has no style (a `null` style), so only features\n * that have their own styles will be rendered in the layer. See\n * {@link module:ol/style} for information on the default style.\n * @param {module:ol/style/Style|Array.<module:ol/style/Style>|module:ol/style/Style~StyleFunction|null|undefined}\n *     style Layer style.\n * @api\n */\nVectorLayer.prototype.setStyle = function(style) {\n  this.style_ = style !== undefined ? style : createDefaultStyle;\n  this.styleFunction_ = style === null ?\n    undefined : toStyleFunction(this.style_);\n  this.changed();\n};\n\n\n/**\n * @return {module:ol/layer/VectorRenderType|string} The render mode.\n */\nVectorLayer.prototype.getRenderMode = function() {\n  return this.renderMode_;\n};\n\n\nexport default VectorLayer;\n","/**\n * @module ol/Object\n */\nimport {getUid, inherits} from './util.js';\nimport ObjectEventType from './ObjectEventType.js';\nimport Observable from './Observable.js';\nimport Event from './events/Event.js';\nimport {assign} from './obj.js';\n\n\n/**\n * @classdesc\n * Events emitted by {@link module:ol/Object~BaseObject} instances are instances of\n * this type.\n *\n * @param {string} type The event type.\n * @param {string} key The property name.\n * @param {*} oldValue The old value for `key`.\n * @extends {module:ol/events/Event}\n * @constructor\n */\nconst ObjectEvent = function(type, key, oldValue) {\n  Event.call(this, type);\n\n  /**\n   * The name of the property whose value is changing.\n   * @type {string}\n   * @api\n   */\n  this.key = key;\n\n  /**\n   * The old value. To get the new value use `e.target.get(e.key)` where\n   * `e` is the event object.\n   * @type {*}\n   * @api\n   */\n  this.oldValue = oldValue;\n\n};\ninherits(ObjectEvent, Event);\n\n\n/**\n * @classdesc\n * Abstract base class; normally only used for creating subclasses and not\n * instantiated in apps.\n * Most non-trivial classes inherit from this.\n *\n * This extends {@link module:ol/Observable} with observable\n * properties, where each property is observable as well as the object as a\n * whole.\n *\n * Classes that inherit from this have pre-defined properties, to which you can\n * add your owns. The pre-defined properties are listed in this documentation as\n * 'Observable Properties', and have their own accessors; for example,\n * {@link module:ol/Map~Map} has a `target` property, accessed with\n * `getTarget()` and changed with `setTarget()`. Not all properties are however\n * settable. There are also general-purpose accessors `get()` and `set()`. For\n * example, `get('target')` is equivalent to `getTarget()`.\n *\n * The `set` accessors trigger a change event, and you can monitor this by\n * registering a listener. For example, {@link module:ol/View~View} has a\n * `center` property, so `view.on('change:center', function(evt) {...});` would\n * call the function whenever the value of the center property changes. Within\n * the function, `evt.target` would be the view, so `evt.target.getCenter()`\n * would return the new center.\n *\n * You can add your own observable properties with\n * `object.set('prop', 'value')`, and retrieve that with `object.get('prop')`.\n * You can listen for changes on that property value with\n * `object.on('change:prop', listener)`. You can get a list of all\n * properties with {@link module:ol/Object~BaseObject#getProperties}.\n *\n * Note that the observable properties are separate from standard JS properties.\n * You can, for example, give your map object a title with\n * `map.title='New title'` and with `map.set('title', 'Another title')`. The\n * first will be a `hasOwnProperty`; the second will appear in\n * `getProperties()`. Only the second is observable.\n *\n * Properties can be deleted by using the unset method. E.g.\n * object.unset('foo').\n *\n * @constructor\n * @extends {module:ol/Observable}\n * @param {Object.<string, *>=} opt_values An object with key-value pairs.\n * @fires module:ol/Object~ObjectEvent\n * @api\n */\nconst BaseObject = function(opt_values) {\n  Observable.call(this);\n\n  // Call {@link module:ol~getUid} to ensure that the order of objects' ids is\n  // the same as the order in which they were created.  This also helps to\n  // ensure that object properties are always added in the same order, which\n  // helps many JavaScript engines generate faster code.\n  getUid(this);\n\n  /**\n   * @private\n   * @type {!Object.<string, *>}\n   */\n  this.values_ = {};\n\n  if (opt_values !== undefined) {\n    this.setProperties(opt_values);\n  }\n};\n\ninherits(BaseObject, Observable);\n\n\n/**\n * @type {Object.<string, string>}\n */\nconst changeEventTypeCache = {};\n\n\n/**\n * @param {string} key Key name.\n * @return {string} Change name.\n */\nexport function getChangeEventType(key) {\n  return changeEventTypeCache.hasOwnProperty(key) ?\n    changeEventTypeCache[key] :\n    (changeEventTypeCache[key] = 'change:' + key);\n}\n\n\n/**\n * Gets a value.\n * @param {string} key Key name.\n * @return {*} Value.\n * @api\n */\nBaseObject.prototype.get = function(key) {\n  let value;\n  if (this.values_.hasOwnProperty(key)) {\n    value = this.values_[key];\n  }\n  return value;\n};\n\n\n/**\n * Get a list of object property names.\n * @return {Array.<string>} List of property names.\n * @api\n */\nBaseObject.prototype.getKeys = function() {\n  return Object.keys(this.values_);\n};\n\n\n/**\n * Get an object of all property names and values.\n * @return {Object.<string, *>} Object.\n * @api\n */\nBaseObject.prototype.getProperties = function() {\n  return assign({}, this.values_);\n};\n\n\n/**\n * @param {string} key Key name.\n * @param {*} oldValue Old value.\n */\nBaseObject.prototype.notify = function(key, oldValue) {\n  let eventType;\n  eventType = getChangeEventType(key);\n  this.dispatchEvent(new ObjectEvent(eventType, key, oldValue));\n  eventType = ObjectEventType.PROPERTYCHANGE;\n  this.dispatchEvent(new ObjectEvent(eventType, key, oldValue));\n};\n\n\n/**\n * Sets a value.\n * @param {string} key Key name.\n * @param {*} value Value.\n * @param {boolean=} opt_silent Update without triggering an event.\n * @api\n */\nBaseObject.prototype.set = function(key, value, opt_silent) {\n  if (opt_silent) {\n    this.values_[key] = value;\n  } else {\n    const oldValue = this.values_[key];\n    this.values_[key] = value;\n    if (oldValue !== value) {\n      this.notify(key, oldValue);\n    }\n  }\n};\n\n\n/**\n * Sets a collection of key-value pairs.  Note that this changes any existing\n * properties and adds new ones (it does not remove any existing properties).\n * @param {Object.<string, *>} values Values.\n * @param {boolean=} opt_silent Update without triggering an event.\n * @api\n */\nBaseObject.prototype.setProperties = function(values, opt_silent) {\n  for (const key in values) {\n    this.set(key, values[key], opt_silent);\n  }\n};\n\n\n/**\n * Unsets a property.\n * @param {string} key Key name.\n * @param {boolean=} opt_silent Unset without triggering an event.\n * @api\n */\nBaseObject.prototype.unset = function(key, opt_silent) {\n  if (key in this.values_) {\n    const oldValue = this.values_[key];\n    delete this.values_[key];\n    if (!opt_silent) {\n      this.notify(key, oldValue);\n    }\n  }\n};\n\n\nexport default BaseObject;\n","/**\n * @module ol/geom/LineString\n */\nimport {inherits} from '../util.js';\nimport {extend} from '../array.js';\nimport {closestSquaredDistanceXY} from '../extent.js';\nimport GeometryLayout from '../geom/GeometryLayout.js';\nimport GeometryType from '../geom/GeometryType.js';\nimport SimpleGeometry from '../geom/SimpleGeometry.js';\nimport {assignClosestPoint, maxSquaredDelta} from '../geom/flat/closest.js';\nimport {deflateCoordinates} from '../geom/flat/deflate.js';\nimport {inflateCoordinates} from '../geom/flat/inflate.js';\nimport {interpolatePoint, lineStringCoordinateAtM} from '../geom/flat/interpolate.js';\nimport {intersectsLineString} from '../geom/flat/intersectsextent.js';\nimport {lineStringLength} from '../geom/flat/length.js';\nimport {forEach as forEachSegment} from '../geom/flat/segments.js';\nimport {douglasPeucker} from '../geom/flat/simplify.js';\n\n/**\n * @classdesc\n * Linestring geometry.\n *\n * @constructor\n * @extends {module:ol/geom/SimpleGeometry}\n * @param {Array.<module:ol/coordinate~Coordinate>} coordinates Coordinates.\n * @param {module:ol/geom/GeometryLayout=} opt_layout Layout.\n * @api\n */\nconst LineString = function(coordinates, opt_layout) {\n\n  SimpleGeometry.call(this);\n\n  /**\n   * @private\n   * @type {module:ol/coordinate~Coordinate}\n   */\n  this.flatMidpoint_ = null;\n\n  /**\n   * @private\n   * @type {number}\n   */\n  this.flatMidpointRevision_ = -1;\n\n  /**\n   * @private\n   * @type {number}\n   */\n  this.maxDelta_ = -1;\n\n  /**\n   * @private\n   * @type {number}\n   */\n  this.maxDeltaRevision_ = -1;\n\n  this.setCoordinates(coordinates, opt_layout);\n\n};\n\ninherits(LineString, SimpleGeometry);\n\n\n/**\n * Append the passed coordinate to the coordinates of the linestring.\n * @param {module:ol/coordinate~Coordinate} coordinate Coordinate.\n * @api\n */\nLineString.prototype.appendCoordinate = function(coordinate) {\n  if (!this.flatCoordinates) {\n    this.flatCoordinates = coordinate.slice();\n  } else {\n    extend(this.flatCoordinates, coordinate);\n  }\n  this.changed();\n};\n\n\n/**\n * Make a complete copy of the geometry.\n * @return {!module:ol/geom/LineString} Clone.\n * @override\n * @api\n */\nLineString.prototype.clone = function() {\n  const lineString = new LineString(null);\n  lineString.setFlatCoordinates(this.layout, this.flatCoordinates.slice());\n  return lineString;\n};\n\n\n/**\n * @inheritDoc\n */\nLineString.prototype.closestPointXY = function(x, y, closestPoint, minSquaredDistance) {\n  if (minSquaredDistance < closestSquaredDistanceXY(this.getExtent(), x, y)) {\n    return minSquaredDistance;\n  }\n  if (this.maxDeltaRevision_ != this.getRevision()) {\n    this.maxDelta_ = Math.sqrt(maxSquaredDelta(\n      this.flatCoordinates, 0, this.flatCoordinates.length, this.stride, 0));\n    this.maxDeltaRevision_ = this.getRevision();\n  }\n  return assignClosestPoint(\n    this.flatCoordinates, 0, this.flatCoordinates.length, this.stride,\n    this.maxDelta_, false, x, y, closestPoint, minSquaredDistance);\n};\n\n\n/**\n * Iterate over each segment, calling the provided callback.\n * If the callback returns a truthy value the function returns that\n * value immediately. Otherwise the function returns `false`.\n *\n * @param {function(this: S, module:ol/coordinate~Coordinate, module:ol/coordinate~Coordinate): T} callback Function\n *     called for each segment.\n * @return {T|boolean} Value.\n * @template T,S\n * @api\n */\nLineString.prototype.forEachSegment = function(callback) {\n  return forEachSegment(this.flatCoordinates, 0, this.flatCoordinates.length, this.stride, callback);\n};\n\n\n/**\n * Returns the coordinate at `m` using linear interpolation, or `null` if no\n * such coordinate exists.\n *\n * `opt_extrapolate` controls extrapolation beyond the range of Ms in the\n * MultiLineString. If `opt_extrapolate` is `true` then Ms less than the first\n * M will return the first coordinate and Ms greater than the last M will\n * return the last coordinate.\n *\n * @param {number} m M.\n * @param {boolean=} opt_extrapolate Extrapolate. Default is `false`.\n * @return {module:ol/coordinate~Coordinate} Coordinate.\n * @api\n */\nLineString.prototype.getCoordinateAtM = function(m, opt_extrapolate) {\n  if (this.layout != GeometryLayout.XYM &&\n      this.layout != GeometryLayout.XYZM) {\n    return null;\n  }\n  const extrapolate = opt_extrapolate !== undefined ? opt_extrapolate : false;\n  return lineStringCoordinateAtM(this.flatCoordinates, 0,\n    this.flatCoordinates.length, this.stride, m, extrapolate);\n};\n\n\n/**\n * Return the coordinates of the linestring.\n * @return {Array.<module:ol/coordinate~Coordinate>} Coordinates.\n * @override\n * @api\n */\nLineString.prototype.getCoordinates = function() {\n  return inflateCoordinates(\n    this.flatCoordinates, 0, this.flatCoordinates.length, this.stride);\n};\n\n\n/**\n * Return the coordinate at the provided fraction along the linestring.\n * The `fraction` is a number between 0 and 1, where 0 is the start of the\n * linestring and 1 is the end.\n * @param {number} fraction Fraction.\n * @param {module:ol/coordinate~Coordinate=} opt_dest Optional coordinate whose values will\n *     be modified. If not provided, a new coordinate will be returned.\n * @return {module:ol/coordinate~Coordinate} Coordinate of the interpolated point.\n * @api\n */\nLineString.prototype.getCoordinateAt = function(fraction, opt_dest) {\n  return interpolatePoint(\n    this.flatCoordinates, 0, this.flatCoordinates.length, this.stride,\n    fraction, opt_dest);\n};\n\n\n/**\n * Return the length of the linestring on projected plane.\n * @return {number} Length (on projected plane).\n * @api\n */\nLineString.prototype.getLength = function() {\n  return lineStringLength(\n    this.flatCoordinates, 0, this.flatCoordinates.length, this.stride);\n};\n\n\n/**\n * @return {Array.<number>} Flat midpoint.\n */\nLineString.prototype.getFlatMidpoint = function() {\n  if (this.flatMidpointRevision_ != this.getRevision()) {\n    this.flatMidpoint_ = this.getCoordinateAt(0.5, this.flatMidpoint_);\n    this.flatMidpointRevision_ = this.getRevision();\n  }\n  return this.flatMidpoint_;\n};\n\n\n/**\n * @inheritDoc\n */\nLineString.prototype.getSimplifiedGeometryInternal = function(squaredTolerance) {\n  const simplifiedFlatCoordinates = [];\n  simplifiedFlatCoordinates.length = douglasPeucker(\n    this.flatCoordinates, 0, this.flatCoordinates.length, this.stride,\n    squaredTolerance, simplifiedFlatCoordinates, 0);\n  const simplifiedLineString = new LineString(null);\n  simplifiedLineString.setFlatCoordinates(\n    GeometryLayout.XY, simplifiedFlatCoordinates);\n  return simplifiedLineString;\n};\n\n\n/**\n * @inheritDoc\n * @api\n */\nLineString.prototype.getType = function() {\n  return GeometryType.LINE_STRING;\n};\n\n\n/**\n * @inheritDoc\n * @api\n */\nLineString.prototype.intersectsExtent = function(extent) {\n  return intersectsLineString(\n    this.flatCoordinates, 0, this.flatCoordinates.length, this.stride,\n    extent);\n};\n\n\n/**\n * Set the coordinates of the linestring.\n * @param {Array.<module:ol/coordinate~Coordinate>} coordinates Coordinates.\n * @param {module:ol/geom/GeometryLayout=} opt_layout Layout.\n * @override\n * @api\n */\nLineString.prototype.setCoordinates = function(coordinates, opt_layout) {\n  if (!coordinates) {\n    this.setFlatCoordinates(GeometryLayout.XY, null);\n  } else {\n    this.setLayout(opt_layout, coordinates, 1);\n    if (!this.flatCoordinates) {\n      this.flatCoordinates = [];\n    }\n    this.flatCoordinates.length = deflateCoordinates(\n      this.flatCoordinates, 0, coordinates, this.stride);\n    this.changed();\n  }\n};\n\n\n/**\n * @param {module:ol/geom/GeometryLayout} layout Layout.\n * @param {Array.<number>} flatCoordinates Flat coordinates.\n */\nLineString.prototype.setFlatCoordinates = function(layout, flatCoordinates) {\n  this.setFlatCoordinatesInternal(layout, flatCoordinates);\n  this.changed();\n};\nexport default LineString;\n","/**\n * @module ol/proj/Units\n */\n\n/**\n * Projection units: `'degrees'`, `'ft'`, `'m'`, `'pixels'`, `'tile-pixels'` or\n * `'us-ft'`.\n * @enum {string}\n */\nconst Units = {\n  DEGREES: 'degrees',\n  FEET: 'ft',\n  METERS: 'm',\n  PIXELS: 'pixels',\n  TILE_PIXELS: 'tile-pixels',\n  USFEET: 'us-ft'\n};\n\n\n/**\n * Meters per unit lookup table.\n * @const\n * @type {Object.<module:ol/proj/Units, number>}\n * @api\n */\nexport const METERS_PER_UNIT = {};\n// use the radius of the Normal sphere\nMETERS_PER_UNIT[Units.DEGREES] = 2 * Math.PI * 6370997 / 360;\nMETERS_PER_UNIT[Units.FEET] = 0.3048;\nMETERS_PER_UNIT[Units.METERS] = 1;\nMETERS_PER_UNIT[Units.USFEET] = 1200 / 3937;\n\nexport default Units;\n","/**\n * @module ol/ImageState\n */\n\n/**\n * @enum {number}\n */\nexport default {\n  IDLE: 0,\n  LOADING: 1,\n  LOADED: 2,\n  ERROR: 3\n};\n","/**\n * @module ol/events/Event\n */\n/**\n * @classdesc\n * Stripped down implementation of the W3C DOM Level 2 Event interface.\n * @see {@link https://www.w3.org/TR/DOM-Level-2-Events/events.html#Events-interface}\n *\n * This implementation only provides `type` and `target` properties, and\n * `stopPropagation` and `preventDefault` methods. It is meant as base class\n * for higher level events defined in the library, and works with\n * {@link module:ol/events/EventTarget~EventTarget}.\n *\n * @constructor\n * @param {string} type Type.\n */\nconst Event = function(type) {\n\n  /**\n   * @type {boolean}\n   */\n  this.propagationStopped;\n\n  /**\n   * The event type.\n   * @type {string}\n   * @api\n   */\n  this.type = type;\n\n  /**\n   * The event target.\n   * @type {Object}\n   * @api\n   */\n  this.target = null;\n\n};\n\n\n/**\n * Stop event propagation.\n * @function\n * @api\n */\nEvent.prototype.preventDefault =\n\n  /**\n   * Stop event propagation.\n   * @function\n   * @api\n   */\n  Event.prototype.stopPropagation = function() {\n    this.propagationStopped = true;\n  };\n\n\n/**\n * @param {Event|module:ol/events/Event} evt Event\n */\nexport function stopPropagation(evt) {\n  evt.stopPropagation();\n}\n\n\n/**\n * @param {Event|module:ol/events/Event} evt Event\n */\nexport function preventDefault(evt) {\n  evt.preventDefault();\n}\n\nexport default Event;\n","/**\n * @module ol/events/condition\n */\nimport MapBrowserEventType from '../MapBrowserEventType.js';\nimport {assert} from '../asserts.js';\nimport {TRUE, FALSE} from '../functions.js';\nimport {WEBKIT, MAC} from '../has.js';\n\n\n/**\n * A function that takes an {@link module:ol/MapBrowserEvent} and returns a\n * `{boolean}`. If the condition is met, true should be returned.\n *\n * @typedef {function(this: ?, module:ol/MapBrowserEvent): boolean} Condition\n */\n\n\n/**\n * Return `true` if only the alt-key is pressed, `false` otherwise (e.g. when\n * additionally the shift-key is pressed).\n *\n * @param {module:ol/MapBrowserEvent} mapBrowserEvent Map browser event.\n * @return {boolean} True if only the alt key is pressed.\n * @api\n */\nexport const altKeyOnly = function(mapBrowserEvent) {\n  const originalEvent = mapBrowserEvent.originalEvent;\n  return (\n    originalEvent.altKey &&\n      !(originalEvent.metaKey || originalEvent.ctrlKey) &&\n      !originalEvent.shiftKey);\n};\n\n\n/**\n * Return `true` if only the alt-key and shift-key is pressed, `false` otherwise\n * (e.g. when additionally the platform-modifier-key is pressed).\n *\n * @param {module:ol/MapBrowserEvent} mapBrowserEvent Map browser event.\n * @return {boolean} True if only the alt and shift keys are pressed.\n * @api\n */\nexport const altShiftKeysOnly = function(mapBrowserEvent) {\n  const originalEvent = mapBrowserEvent.originalEvent;\n  return (\n    originalEvent.altKey &&\n      !(originalEvent.metaKey || originalEvent.ctrlKey) &&\n      originalEvent.shiftKey);\n};\n\n\n/**\n * Return `true` if the map has the focus. This condition requires a map target\n * element with a `tabindex` attribute, e.g. `<div id=\"map\" tabindex=\"1\">`.\n *\n * @param {module:ol/MapBrowserEvent} event Map browser event.\n * @return {boolean} The map has the focus.\n * @api\n */\nexport const focus = function(event) {\n  return event.target.getTargetElement() === document.activeElement;\n};\n\n\n/**\n * Return always true.\n *\n * @param {module:ol/MapBrowserEvent} mapBrowserEvent Map browser event.\n * @return {boolean} True.\n * @function\n * @api\n */\nexport const always = TRUE;\n\n\n/**\n * Return `true` if the event is a `click` event, `false` otherwise.\n *\n * @param {module:ol/MapBrowserEvent} mapBrowserEvent Map browser event.\n * @return {boolean} True if the event is a map `click` event.\n * @api\n */\nexport const click = function(mapBrowserEvent) {\n  return mapBrowserEvent.type == MapBrowserEventType.CLICK;\n};\n\n\n/**\n * Return `true` if the event has an \"action\"-producing mouse button.\n *\n * By definition, this includes left-click on windows/linux, and left-click\n * without the ctrl key on Macs.\n *\n * @param {module:ol/MapBrowserEvent} mapBrowserEvent Map browser event.\n * @return {boolean} The result.\n */\nexport const mouseActionButton = function(mapBrowserEvent) {\n  const originalEvent = mapBrowserEvent.originalEvent;\n  return originalEvent.button == 0 &&\n      !(WEBKIT && MAC && originalEvent.ctrlKey);\n};\n\n\n/**\n * Return always false.\n *\n * @param {module:ol/MapBrowserEvent} mapBrowserEvent Map browser event.\n * @return {boolean} False.\n * @function\n * @api\n */\nexport const never = FALSE;\n\n\n/**\n * Return `true` if the browser event is a `pointermove` event, `false`\n * otherwise.\n *\n * @param {module:ol/MapBrowserEvent} mapBrowserEvent Map browser event.\n * @return {boolean} True if the browser event is a `pointermove` event.\n * @api\n */\nexport const pointerMove = function(mapBrowserEvent) {\n  return mapBrowserEvent.type == 'pointermove';\n};\n\n\n/**\n * Return `true` if the event is a map `singleclick` event, `false` otherwise.\n *\n * @param {module:ol/MapBrowserEvent} mapBrowserEvent Map browser event.\n * @return {boolean} True if the event is a map `singleclick` event.\n * @api\n */\nexport const singleClick = function(mapBrowserEvent) {\n  return mapBrowserEvent.type == MapBrowserEventType.SINGLECLICK;\n};\n\n\n/**\n * Return `true` if the event is a map `dblclick` event, `false` otherwise.\n *\n * @param {module:ol/MapBrowserEvent} mapBrowserEvent Map browser event.\n * @return {boolean} True if the event is a map `dblclick` event.\n * @api\n */\nexport const doubleClick = function(mapBrowserEvent) {\n  return mapBrowserEvent.type == MapBrowserEventType.DBLCLICK;\n};\n\n\n/**\n * Return `true` if no modifier key (alt-, shift- or platform-modifier-key) is\n * pressed.\n *\n * @param {module:ol/MapBrowserEvent} mapBrowserEvent Map browser event.\n * @return {boolean} True only if there no modifier keys are pressed.\n * @api\n */\nexport const noModifierKeys = function(mapBrowserEvent) {\n  const originalEvent = mapBrowserEvent.originalEvent;\n  return (\n    !originalEvent.altKey &&\n      !(originalEvent.metaKey || originalEvent.ctrlKey) &&\n      !originalEvent.shiftKey);\n};\n\n\n/**\n * Return `true` if only the platform-modifier-key (the meta-key on Mac,\n * ctrl-key otherwise) is pressed, `false` otherwise (e.g. when additionally\n * the shift-key is pressed).\n *\n * @param {module:ol/MapBrowserEvent} mapBrowserEvent Map browser event.\n * @return {boolean} True if only the platform modifier key is pressed.\n * @api\n */\nexport const platformModifierKeyOnly = function(mapBrowserEvent) {\n  const originalEvent = mapBrowserEvent.originalEvent;\n  return !originalEvent.altKey &&\n    (MAC ? originalEvent.metaKey : originalEvent.ctrlKey) &&\n    !originalEvent.shiftKey;\n};\n\n\n/**\n * Return `true` if only the shift-key is pressed, `false` otherwise (e.g. when\n * additionally the alt-key is pressed).\n *\n * @param {module:ol/MapBrowserEvent} mapBrowserEvent Map browser event.\n * @return {boolean} True if only the shift key is pressed.\n * @api\n */\nexport const shiftKeyOnly = function(mapBrowserEvent) {\n  const originalEvent = mapBrowserEvent.originalEvent;\n  return (\n    !originalEvent.altKey &&\n      !(originalEvent.metaKey || originalEvent.ctrlKey) &&\n      originalEvent.shiftKey);\n};\n\n\n/**\n * Return `true` if the target element is not editable, i.e. not a `<input>`-,\n * `<select>`- or `<textarea>`-element, `false` otherwise.\n *\n * @param {module:ol/MapBrowserEvent} mapBrowserEvent Map browser event.\n * @return {boolean} True only if the target element is not editable.\n * @api\n */\nexport const targetNotEditable = function(mapBrowserEvent) {\n  const target = mapBrowserEvent.originalEvent.target;\n  const tagName = target.tagName;\n  return (\n    tagName !== 'INPUT' &&\n      tagName !== 'SELECT' &&\n      tagName !== 'TEXTAREA');\n};\n\n\n/**\n * Return `true` if the event originates from a mouse device.\n *\n * @param {module:ol/MapBrowserEvent} mapBrowserEvent Map browser event.\n * @return {boolean} True if the event originates from a mouse device.\n * @api\n */\nexport const mouseOnly = function(mapBrowserEvent) {\n  assert(mapBrowserEvent.pointerEvent, 56); // mapBrowserEvent must originate from a pointer event\n  // see http://www.w3.org/TR/pointerevents/#widl-PointerEvent-pointerType\n  return (\n    /** @type {module:ol/MapBrowserEvent} */ (mapBrowserEvent).pointerEvent.pointerType == 'mouse'\n  );\n};\n\n\n/**\n * Return `true` if the event originates from a primary pointer in\n * contact with the surface or if the left mouse button is pressed.\n * @see http://www.w3.org/TR/pointerevents/#button-states\n *\n * @param {module:ol/MapBrowserEvent} mapBrowserEvent Map browser event.\n * @return {boolean} True if the event originates from a primary pointer.\n * @api\n */\nexport const primaryAction = function(mapBrowserEvent) {\n  const pointerEvent = mapBrowserEvent.pointerEvent;\n  return pointerEvent.isPrimary && pointerEvent.button === 0;\n};\n","/**\n * @module ol/geom/Polygon\n */\nimport {inherits} from '../util.js';\nimport {extend} from '../array.js';\nimport {closestSquaredDistanceXY, getCenter} from '../extent.js';\nimport GeometryLayout from '../geom/GeometryLayout.js';\nimport GeometryType from '../geom/GeometryType.js';\nimport LinearRing from '../geom/LinearRing.js';\nimport Point from '../geom/Point.js';\nimport SimpleGeometry from '../geom/SimpleGeometry.js';\nimport {offset as sphereOffset} from '../sphere.js';\nimport {linearRings as linearRingsArea} from '../geom/flat/area.js';\nimport {assignClosestArrayPoint, arrayMaxSquaredDelta} from '../geom/flat/closest.js';\nimport {linearRingsContainsXY} from '../geom/flat/contains.js';\nimport {deflateCoordinatesArray} from '../geom/flat/deflate.js';\nimport {inflateCoordinatesArray} from '../geom/flat/inflate.js';\nimport {getInteriorPointOfArray} from '../geom/flat/interiorpoint.js';\nimport {intersectsLinearRingArray} from '../geom/flat/intersectsextent.js';\nimport {linearRingIsOriented, orientLinearRings} from '../geom/flat/orient.js';\nimport {quantizeArray} from '../geom/flat/simplify.js';\nimport {modulo} from '../math.js';\n\n/**\n * @classdesc\n * Polygon geometry.\n *\n * @constructor\n * @extends {module:ol/geom/SimpleGeometry}\n * @param {Array.<Array.<module:ol/coordinate~Coordinate>>} coordinates Array of linear\n *     rings that define the polygon. The first linear ring of the array\n *     defines the outer-boundary or surface of the polygon. Each subsequent\n *     linear ring defines a hole in the surface of the polygon. A linear ring\n *     is an array of vertices' coordinates where the first coordinate and the\n *     last are equivalent.\n * @param {module:ol/geom/GeometryLayout=} opt_layout Layout.\n * @api\n */\nconst Polygon = function(coordinates, opt_layout) {\n\n  SimpleGeometry.call(this);\n\n  /**\n   * @type {Array.<number>}\n   * @private\n   */\n  this.ends_ = [];\n\n  /**\n   * @private\n   * @type {number}\n   */\n  this.flatInteriorPointRevision_ = -1;\n\n  /**\n   * @private\n   * @type {module:ol/coordinate~Coordinate}\n   */\n  this.flatInteriorPoint_ = null;\n\n  /**\n   * @private\n   * @type {number}\n   */\n  this.maxDelta_ = -1;\n\n  /**\n   * @private\n   * @type {number}\n   */\n  this.maxDeltaRevision_ = -1;\n\n  /**\n   * @private\n   * @type {number}\n   */\n  this.orientedRevision_ = -1;\n\n  /**\n   * @private\n   * @type {Array.<number>}\n   */\n  this.orientedFlatCoordinates_ = null;\n\n  this.setCoordinates(coordinates, opt_layout);\n\n};\n\ninherits(Polygon, SimpleGeometry);\n\n\n/**\n * Append the passed linear ring to this polygon.\n * @param {module:ol/geom/LinearRing} linearRing Linear ring.\n * @api\n */\nPolygon.prototype.appendLinearRing = function(linearRing) {\n  if (!this.flatCoordinates) {\n    this.flatCoordinates = linearRing.getFlatCoordinates().slice();\n  } else {\n    extend(this.flatCoordinates, linearRing.getFlatCoordinates());\n  }\n  this.ends_.push(this.flatCoordinates.length);\n  this.changed();\n};\n\n\n/**\n * Make a complete copy of the geometry.\n * @return {!module:ol/geom/Polygon} Clone.\n * @override\n * @api\n */\nPolygon.prototype.clone = function() {\n  const polygon = new Polygon(null);\n  polygon.setFlatCoordinates(\n    this.layout, this.flatCoordinates.slice(), this.ends_.slice());\n  return polygon;\n};\n\n\n/**\n * @inheritDoc\n */\nPolygon.prototype.closestPointXY = function(x, y, closestPoint, minSquaredDistance) {\n  if (minSquaredDistance < closestSquaredDistanceXY(this.getExtent(), x, y)) {\n    return minSquaredDistance;\n  }\n  if (this.maxDeltaRevision_ != this.getRevision()) {\n    this.maxDelta_ = Math.sqrt(arrayMaxSquaredDelta(\n      this.flatCoordinates, 0, this.ends_, this.stride, 0));\n    this.maxDeltaRevision_ = this.getRevision();\n  }\n  return assignClosestArrayPoint(\n    this.flatCoordinates, 0, this.ends_, this.stride,\n    this.maxDelta_, true, x, y, closestPoint, minSquaredDistance);\n};\n\n\n/**\n * @inheritDoc\n */\nPolygon.prototype.containsXY = function(x, y) {\n  return linearRingsContainsXY(this.getOrientedFlatCoordinates(), 0, this.ends_, this.stride, x, y);\n};\n\n\n/**\n * Return the area of the polygon on projected plane.\n * @return {number} Area (on projected plane).\n * @api\n */\nPolygon.prototype.getArea = function() {\n  return linearRingsArea(this.getOrientedFlatCoordinates(), 0, this.ends_, this.stride);\n};\n\n\n/**\n * Get the coordinate array for this geometry.  This array has the structure\n * of a GeoJSON coordinate array for polygons.\n *\n * @param {boolean=} opt_right Orient coordinates according to the right-hand\n *     rule (counter-clockwise for exterior and clockwise for interior rings).\n *     If `false`, coordinates will be oriented according to the left-hand rule\n *     (clockwise for exterior and counter-clockwise for interior rings).\n *     By default, coordinate orientation will depend on how the geometry was\n *     constructed.\n * @return {Array.<Array.<module:ol/coordinate~Coordinate>>} Coordinates.\n * @override\n * @api\n */\nPolygon.prototype.getCoordinates = function(opt_right) {\n  let flatCoordinates;\n  if (opt_right !== undefined) {\n    flatCoordinates = this.getOrientedFlatCoordinates().slice();\n    orientLinearRings(\n      flatCoordinates, 0, this.ends_, this.stride, opt_right);\n  } else {\n    flatCoordinates = this.flatCoordinates;\n  }\n\n  return inflateCoordinatesArray(\n    flatCoordinates, 0, this.ends_, this.stride);\n};\n\n\n/**\n * @return {Array.<number>} Ends.\n */\nPolygon.prototype.getEnds = function() {\n  return this.ends_;\n};\n\n\n/**\n * @return {Array.<number>} Interior point.\n */\nPolygon.prototype.getFlatInteriorPoint = function() {\n  if (this.flatInteriorPointRevision_ != this.getRevision()) {\n    const flatCenter = getCenter(this.getExtent());\n    this.flatInteriorPoint_ = getInteriorPointOfArray(\n      this.getOrientedFlatCoordinates(), 0, this.ends_, this.stride,\n      flatCenter, 0);\n    this.flatInteriorPointRevision_ = this.getRevision();\n  }\n  return this.flatInteriorPoint_;\n};\n\n\n/**\n * Return an interior point of the polygon.\n * @return {module:ol/geom/Point} Interior point as XYM coordinate, where M is the\n * length of the horizontal intersection that the point belongs to.\n * @api\n */\nPolygon.prototype.getInteriorPoint = function() {\n  return new Point(this.getFlatInteriorPoint(), GeometryLayout.XYM);\n};\n\n\n/**\n * Return the number of rings of the polygon,  this includes the exterior\n * ring and any interior rings.\n *\n * @return {number} Number of rings.\n * @api\n */\nPolygon.prototype.getLinearRingCount = function() {\n  return this.ends_.length;\n};\n\n\n/**\n * Return the Nth linear ring of the polygon geometry. Return `null` if the\n * given index is out of range.\n * The exterior linear ring is available at index `0` and the interior rings\n * at index `1` and beyond.\n *\n * @param {number} index Index.\n * @return {module:ol/geom/LinearRing} Linear ring.\n * @api\n */\nPolygon.prototype.getLinearRing = function(index) {\n  if (index < 0 || this.ends_.length <= index) {\n    return null;\n  }\n  const linearRing = new LinearRing(null);\n  linearRing.setFlatCoordinates(this.layout, this.flatCoordinates.slice(\n    index === 0 ? 0 : this.ends_[index - 1], this.ends_[index]));\n  return linearRing;\n};\n\n\n/**\n * Return the linear rings of the polygon.\n * @return {Array.<module:ol/geom/LinearRing>} Linear rings.\n * @api\n */\nPolygon.prototype.getLinearRings = function() {\n  const layout = this.layout;\n  const flatCoordinates = this.flatCoordinates;\n  const ends = this.ends_;\n  const linearRings = [];\n  let offset = 0;\n  for (let i = 0, ii = ends.length; i < ii; ++i) {\n    const end = ends[i];\n    const linearRing = new LinearRing(null);\n    linearRing.setFlatCoordinates(layout, flatCoordinates.slice(offset, end));\n    linearRings.push(linearRing);\n    offset = end;\n  }\n  return linearRings;\n};\n\n\n/**\n * @return {Array.<number>} Oriented flat coordinates.\n */\nPolygon.prototype.getOrientedFlatCoordinates = function() {\n  if (this.orientedRevision_ != this.getRevision()) {\n    const flatCoordinates = this.flatCoordinates;\n    if (linearRingIsOriented(\n      flatCoordinates, 0, this.ends_, this.stride)) {\n      this.orientedFlatCoordinates_ = flatCoordinates;\n    } else {\n      this.orientedFlatCoordinates_ = flatCoordinates.slice();\n      this.orientedFlatCoordinates_.length =\n          orientLinearRings(\n            this.orientedFlatCoordinates_, 0, this.ends_, this.stride);\n    }\n    this.orientedRevision_ = this.getRevision();\n  }\n  return this.orientedFlatCoordinates_;\n};\n\n\n/**\n * @inheritDoc\n */\nPolygon.prototype.getSimplifiedGeometryInternal = function(squaredTolerance) {\n  const simplifiedFlatCoordinates = [];\n  const simplifiedEnds = [];\n  simplifiedFlatCoordinates.length = quantizeArray(\n    this.flatCoordinates, 0, this.ends_, this.stride,\n    Math.sqrt(squaredTolerance),\n    simplifiedFlatCoordinates, 0, simplifiedEnds);\n  const simplifiedPolygon = new Polygon(null);\n  simplifiedPolygon.setFlatCoordinates(\n    GeometryLayout.XY, simplifiedFlatCoordinates, simplifiedEnds);\n  return simplifiedPolygon;\n};\n\n\n/**\n * @inheritDoc\n * @api\n */\nPolygon.prototype.getType = function() {\n  return GeometryType.POLYGON;\n};\n\n\n/**\n * @inheritDoc\n * @api\n */\nPolygon.prototype.intersectsExtent = function(extent) {\n  return intersectsLinearRingArray(\n    this.getOrientedFlatCoordinates(), 0, this.ends_, this.stride, extent);\n};\n\n\n/**\n * Set the coordinates of the polygon.\n * @param {Array.<Array.<module:ol/coordinate~Coordinate>>} coordinates Coordinates.\n * @param {module:ol/geom/GeometryLayout=} opt_layout Layout.\n * @override\n * @api\n */\nPolygon.prototype.setCoordinates = function(coordinates, opt_layout) {\n  if (!coordinates) {\n    this.setFlatCoordinates(GeometryLayout.XY, null, this.ends_);\n  } else {\n    this.setLayout(opt_layout, coordinates, 2);\n    if (!this.flatCoordinates) {\n      this.flatCoordinates = [];\n    }\n    const ends = deflateCoordinatesArray(\n      this.flatCoordinates, 0, coordinates, this.stride, this.ends_);\n    this.flatCoordinates.length = ends.length === 0 ? 0 : ends[ends.length - 1];\n    this.changed();\n  }\n};\n\n\n/**\n * @param {module:ol/geom/GeometryLayout} layout Layout.\n * @param {Array.<number>} flatCoordinates Flat coordinates.\n * @param {Array.<number>} ends Ends.\n */\nPolygon.prototype.setFlatCoordinates = function(layout, flatCoordinates, ends) {\n  this.setFlatCoordinatesInternal(layout, flatCoordinates);\n  this.ends_ = ends;\n  this.changed();\n};\n\nexport default Polygon;\n\n\n/**\n * Create an approximation of a circle on the surface of a sphere.\n * @param {module:ol/coordinate~Coordinate} center Center (`[lon, lat]` in degrees).\n * @param {number} radius The great-circle distance from the center to\n *     the polygon vertices.\n * @param {number=} opt_n Optional number of vertices for the resulting\n *     polygon. Default is `32`.\n * @param {number=} opt_sphereRadius Optional radius for the sphere (defaults to\n *     the Earth's mean radius using the WGS84 ellipsoid).\n * @return {module:ol/geom/Polygon} The \"circular\" polygon.\n * @api\n */\nexport function circular(center, radius, opt_n, opt_sphereRadius) {\n  const n = opt_n ? opt_n : 32;\n  /** @type {Array.<number>} */\n  const flatCoordinates = [];\n  for (let i = 0; i < n; ++i) {\n    extend(flatCoordinates, sphereOffset(center, radius, 2 * Math.PI * i / n, opt_sphereRadius));\n  }\n  flatCoordinates.push(flatCoordinates[0], flatCoordinates[1]);\n  const polygon = new Polygon(null);\n  polygon.setFlatCoordinates(GeometryLayout.XY, flatCoordinates, [flatCoordinates.length]);\n  return polygon;\n}\n\n\n/**\n * Create a polygon from an extent. The layout used is `XY`.\n * @param {module:ol/extent~Extent} extent The extent.\n * @return {module:ol/geom/Polygon} The polygon.\n * @api\n */\nexport function fromExtent(extent) {\n  const minX = extent[0];\n  const minY = extent[1];\n  const maxX = extent[2];\n  const maxY = extent[3];\n  const flatCoordinates =\n      [minX, minY, minX, maxY, maxX, maxY, maxX, minY, minX, minY];\n  const polygon = new Polygon(null);\n  polygon.setFlatCoordinates(\n    GeometryLayout.XY, flatCoordinates, [flatCoordinates.length]);\n  return polygon;\n}\n\n\n/**\n * Create a regular polygon from a circle.\n * @param {module:ol/geom/Circle} circle Circle geometry.\n * @param {number=} opt_sides Number of sides of the polygon. Default is 32.\n * @param {number=} opt_angle Start angle for the first vertex of the polygon in\n *     radians. Default is 0.\n * @return {module:ol/geom/Polygon} Polygon geometry.\n * @api\n */\nexport function fromCircle(circle, opt_sides, opt_angle) {\n  const sides = opt_sides ? opt_sides : 32;\n  const stride = circle.getStride();\n  const layout = circle.getLayout();\n  const polygon = new Polygon(null, layout);\n  const arrayLength = stride * (sides + 1);\n  const flatCoordinates = new Array(arrayLength);\n  for (let i = 0; i < arrayLength; i++) {\n    flatCoordinates[i] = 0;\n  }\n  const ends = [flatCoordinates.length];\n  polygon.setFlatCoordinates(layout, flatCoordinates, ends);\n  makeRegular(polygon, circle.getCenter(), circle.getRadius(), opt_angle);\n  return polygon;\n}\n\n\n/**\n * Modify the coordinates of a polygon to make it a regular polygon.\n * @param {module:ol/geom/Polygon} polygon Polygon geometry.\n * @param {module:ol/coordinate~Coordinate} center Center of the regular polygon.\n * @param {number} radius Radius of the regular polygon.\n * @param {number=} opt_angle Start angle for the first vertex of the polygon in\n *     radians. Default is 0.\n */\nexport function makeRegular(polygon, center, radius, opt_angle) {\n  const flatCoordinates = polygon.getFlatCoordinates();\n  const layout = polygon.getLayout();\n  const stride = polygon.getStride();\n  const ends = polygon.getEnds();\n  const sides = flatCoordinates.length / stride - 1;\n  const startAngle = opt_angle ? opt_angle : 0;\n  for (let i = 0; i <= sides; ++i) {\n    const offset = i * stride;\n    const angle = startAngle + (modulo(i, sides) * 2 * Math.PI / sides);\n    flatCoordinates[offset] = center[0] + (radius * Math.cos(angle));\n    flatCoordinates[offset + 1] = center[1] + (radius * Math.sin(angle));\n  }\n  polygon.setFlatCoordinates(layout, flatCoordinates, ends);\n}\n","/**\n * @module ol/render/ReplayType\n */\n\n/**\n * @enum {string}\n */\nexport default {\n  CIRCLE: 'Circle',\n  DEFAULT: 'Default',\n  IMAGE: 'Image',\n  LINE_STRING: 'LineString',\n  POLYGON: 'Polygon',\n  TEXT: 'Text'\n};\n","/**\n * @module ol/interaction/Pointer\n */\nimport {inherits} from '../util.js';\nimport {FALSE, UNDEFINED} from '../functions.js';\nimport MapBrowserEventType from '../MapBrowserEventType.js';\nimport MapBrowserPointerEvent from '../MapBrowserPointerEvent.js';\nimport Interaction from '../interaction/Interaction.js';\nimport {getValues} from '../obj.js';\n\n\n/**\n * @param {module:ol/MapBrowserPointerEvent} mapBrowserEvent Event.\n * @this {module:ol/interaction/Pointer}\n */\nconst handleDragEvent = UNDEFINED;\n\n\n/**\n * @param {module:ol/MapBrowserPointerEvent} mapBrowserEvent Event.\n * @return {boolean} Capture dragging.\n * @this {module:ol/interaction/Pointer}\n */\nconst handleUpEvent = FALSE;\n\n\n/**\n * @param {module:ol/MapBrowserPointerEvent} mapBrowserEvent Event.\n * @return {boolean} Capture dragging.\n * @this {module:ol/interaction/Pointer}\n */\nconst handleDownEvent = FALSE;\n\n\n/**\n * @param {module:ol/MapBrowserPointerEvent} mapBrowserEvent Event.\n * @this {module:ol/interaction/Pointer}\n */\nconst handleMoveEvent = UNDEFINED;\n\n\n/**\n * @typedef {Object} Options\n * @property {(function(module:ol/MapBrowserPointerEvent):boolean)} [handleDownEvent]\n * Function handling \"down\" events. If the function returns `true` then a drag\n * sequence is started.\n * @property {(function(module:ol/MapBrowserPointerEvent))} [handleDragEvent]\n * Function handling \"drag\" events. This function is called on \"move\" events\n * during a drag sequence.\n * @property {(function(module:ol/MapBrowserEvent):boolean)} [handleEvent]\n * Method called by the map to notify the interaction that a browser event was\n * dispatched to the map. The function may return `false` to prevent the\n * propagation of the event to other interactions in the map's interactions\n * chain.\n * @property {(function(module:ol/MapBrowserPointerEvent))} [handleMoveEvent]\n * Function handling \"move\" events. This function is called on \"move\" events,\n * also during a drag sequence (so during a drag sequence both the\n * `handleDragEvent` function and this function are called).\n * @property {(function(module:ol/MapBrowserPointerEvent):boolean)} [handleUpEvent]\n *  Function handling \"up\" events. If the function returns `false` then the\n * current drag sequence is stopped.\n */\n\n\n/**\n * @classdesc\n * Base class that calls user-defined functions on `down`, `move` and `up`\n * events. This class also manages \"drag sequences\".\n *\n * When the `handleDownEvent` user function returns `true` a drag sequence is\n * started. During a drag sequence the `handleDragEvent` user function is\n * called on `move` events. The drag sequence ends when the `handleUpEvent`\n * user function is called and returns `false`.\n *\n * @constructor\n * @param {module:ol/interaction/Pointer~Options=} opt_options Options.\n * @extends {module:ol/interaction/Interaction}\n * @api\n */\nconst PointerInteraction = function(opt_options) {\n\n  const options = opt_options ? opt_options : {};\n\n  Interaction.call(this, {\n    handleEvent: options.handleEvent || handleEvent\n  });\n\n  /**\n   * @type {function(module:ol/MapBrowserPointerEvent):boolean}\n   * @private\n   */\n  this.handleDownEvent_ = options.handleDownEvent ?\n    options.handleDownEvent : handleDownEvent;\n\n  /**\n   * @type {function(module:ol/MapBrowserPointerEvent)}\n   * @private\n   */\n  this.handleDragEvent_ = options.handleDragEvent ?\n    options.handleDragEvent : handleDragEvent;\n\n  /**\n   * @type {function(module:ol/MapBrowserPointerEvent)}\n   * @private\n   */\n  this.handleMoveEvent_ = options.handleMoveEvent ?\n    options.handleMoveEvent : handleMoveEvent;\n\n  /**\n   * @type {function(module:ol/MapBrowserPointerEvent):boolean}\n   * @private\n   */\n  this.handleUpEvent_ = options.handleUpEvent ?\n    options.handleUpEvent : handleUpEvent;\n\n  /**\n   * @type {boolean}\n   * @protected\n   */\n  this.handlingDownUpSequence = false;\n\n  /**\n   * @type {!Object.<string, module:ol/pointer/PointerEvent>}\n   * @private\n   */\n  this.trackedPointers_ = {};\n\n  /**\n   * @type {Array.<module:ol/pointer/PointerEvent>}\n   * @protected\n   */\n  this.targetPointers = [];\n\n};\n\ninherits(PointerInteraction, Interaction);\n\n\n/**\n * @param {Array.<module:ol/pointer/PointerEvent>} pointerEvents List of events.\n * @return {module:ol~Pixel} Centroid pixel.\n */\nexport function centroid(pointerEvents) {\n  const length = pointerEvents.length;\n  let clientX = 0;\n  let clientY = 0;\n  for (let i = 0; i < length; i++) {\n    clientX += pointerEvents[i].clientX;\n    clientY += pointerEvents[i].clientY;\n  }\n  return [clientX / length, clientY / length];\n}\n\n\n/**\n * @param {module:ol/MapBrowserPointerEvent} mapBrowserEvent Event.\n * @return {boolean} Whether the event is a pointerdown, pointerdrag\n *     or pointerup event.\n */\nfunction isPointerDraggingEvent(mapBrowserEvent) {\n  const type = mapBrowserEvent.type;\n  return type === MapBrowserEventType.POINTERDOWN ||\n    type === MapBrowserEventType.POINTERDRAG ||\n    type === MapBrowserEventType.POINTERUP;\n}\n\n\n/**\n * @param {module:ol/MapBrowserPointerEvent} mapBrowserEvent Event.\n * @private\n */\nPointerInteraction.prototype.updateTrackedPointers_ = function(mapBrowserEvent) {\n  if (isPointerDraggingEvent(mapBrowserEvent)) {\n    const event = mapBrowserEvent.pointerEvent;\n\n    const id = event.pointerId.toString();\n    if (mapBrowserEvent.type == MapBrowserEventType.POINTERUP) {\n      delete this.trackedPointers_[id];\n    } else if (mapBrowserEvent.type ==\n        MapBrowserEventType.POINTERDOWN) {\n      this.trackedPointers_[id] = event;\n    } else if (id in this.trackedPointers_) {\n      // update only when there was a pointerdown event for this pointer\n      this.trackedPointers_[id] = event;\n    }\n    this.targetPointers = getValues(this.trackedPointers_);\n  }\n};\n\n\n/**\n * Handles the {@link module:ol/MapBrowserEvent map browser event} and may call into\n * other functions, if event sequences like e.g. 'drag' or 'down-up' etc. are\n * detected.\n * @param {module:ol/MapBrowserEvent} mapBrowserEvent Map browser event.\n * @return {boolean} `false` to stop event propagation.\n * @this {module:ol/interaction/Pointer}\n * @api\n */\nexport function handleEvent(mapBrowserEvent) {\n  if (!(mapBrowserEvent instanceof MapBrowserPointerEvent)) {\n    return true;\n  }\n\n  let stopEvent = false;\n  this.updateTrackedPointers_(mapBrowserEvent);\n  if (this.handlingDownUpSequence) {\n    if (mapBrowserEvent.type == MapBrowserEventType.POINTERDRAG) {\n      this.handleDragEvent_(mapBrowserEvent);\n    } else if (mapBrowserEvent.type == MapBrowserEventType.POINTERUP) {\n      const handledUp = this.handleUpEvent_(mapBrowserEvent);\n      this.handlingDownUpSequence = handledUp && this.targetPointers.length > 0;\n    }\n  } else {\n    if (mapBrowserEvent.type == MapBrowserEventType.POINTERDOWN) {\n      const handled = this.handleDownEvent_(mapBrowserEvent);\n      this.handlingDownUpSequence = handled;\n      stopEvent = this.shouldStopEvent(handled);\n    } else if (mapBrowserEvent.type == MapBrowserEventType.POINTERMOVE) {\n      this.handleMoveEvent_(mapBrowserEvent);\n    }\n  }\n  return !stopEvent;\n}\n\n\n/**\n * This method is used to determine if \"down\" events should be propagated to\n * other interactions or should be stopped.\n *\n * The method receives the return code of the \"handleDownEvent\" function.\n *\n * By default this function is the \"identity\" function. It's overridden in\n * child classes.\n *\n * @param {boolean} handled Was the event handled by the interaction?\n * @return {boolean} Should the event be stopped?\n * @protected\n */\nPointerInteraction.prototype.shouldStopEvent = function(handled) {\n  return handled;\n};\n\nexport default PointerInteraction;\n","/**\n * @module ol/MapBrowserEventType\n */\nimport EventType from './events/EventType.js';\n\n/**\n * Constants for event names.\n * @enum {string}\n */\nexport default {\n\n  /**\n   * A true single click with no dragging and no double click. Note that this\n   * event is delayed by 250 ms to ensure that it is not a double click.\n   * @event module:ol/MapBrowserEvent~MapBrowserEvent#singleclick\n   * @api\n   */\n  SINGLECLICK: 'singleclick',\n\n  /**\n   * A click with no dragging. A double click will fire two of this.\n   * @event module:ol/MapBrowserEvent~MapBrowserEvent#click\n   * @api\n   */\n  CLICK: EventType.CLICK,\n\n  /**\n   * A true double click, with no dragging.\n   * @event module:ol/MapBrowserEvent~MapBrowserEvent#dblclick\n   * @api\n   */\n  DBLCLICK: EventType.DBLCLICK,\n\n  /**\n   * Triggered when a pointer is dragged.\n   * @event module:ol/MapBrowserEvent~MapBrowserEvent#pointerdrag\n   * @api\n   */\n  POINTERDRAG: 'pointerdrag',\n\n  /**\n   * Triggered when a pointer is moved. Note that on touch devices this is\n   * triggered when the map is panned, so is not the same as mousemove.\n   * @event module:ol/MapBrowserEvent~MapBrowserEvent#pointermove\n   * @api\n   */\n  POINTERMOVE: 'pointermove',\n\n  POINTERDOWN: 'pointerdown',\n  POINTERUP: 'pointerup',\n  POINTEROVER: 'pointerover',\n  POINTEROUT: 'pointerout',\n  POINTERENTER: 'pointerenter',\n  POINTERLEAVE: 'pointerleave',\n  POINTERCANCEL: 'pointercancel'\n};\n","/**\n * @module ol/format/Feature\n */\nimport Geometry from '../geom/Geometry.js';\nimport {assign} from '../obj.js';\nimport {get as getProjection, equivalent as equivalentProjection, transformExtent} from '../proj.js';\n\n\n/**\n * @typedef {Object} ReadOptions\n * @property {module:ol/proj~ProjectionLike} dataProjection Projection of the data we are reading.\n * If not provided, the projection will be derived from the data (where possible) or\n * the `dataProjection` of the format is assigned (where set). If the projection\n * can not be derived from the data and if no `dataProjection` is set for a format,\n * the features will not be reprojected.\n * @property {module:ol/extent~Extent} extent Tile extent of the tile being read. This is only used and\n * required for {@link module:ol/format/MVT}.\n * @property {module:ol/proj~ProjectionLike} featureProjection Projection of the feature geometries\n * created by the format reader. If not provided, features will be returned in the\n * `dataProjection`.\n */\n\n\n/**\n * @typedef {Object} WriteOptions\n * @property {module:ol/proj~ProjectionLike} dataProjection Projection of the data we are writing.\n * If not provided, the `dataProjection` of the format is assigned (where set).\n * If no `dataProjection` is set for a format, the features will be returned\n * in the `featureProjection`.\n * @property {module:ol/proj~ProjectionLike} featureProjection Projection of the feature geometries\n * that will be serialized by the format writer. If not provided, geometries are assumed\n * to be in the `dataProjection` if that is set; in other words, they are not transformed.\n * @property {boolean} [rightHanded] When writing geometries, follow the right-hand\n * rule for linear ring orientation.  This means that polygons will have counter-clockwise\n * exterior rings and clockwise interior rings.  By default, coordinates are serialized\n * as they are provided at construction.  If `true`, the right-hand rule will\n * be applied.  If `false`, the left-hand rule will be applied (clockwise for\n * exterior and counter-clockwise for interior rings).  Note that not all\n * formats support this.  The GeoJSON format does use this property when writing\n * geometries.\n * @property {number} [decimals] Maximum number of decimal places for coordinates.\n * Coordinates are stored internally as floats, but floating-point arithmetic can create\n * coordinates with a large number of decimal places, not generally wanted on output.\n * Set a number here to round coordinates. Can also be used to ensure that\n * coordinates read in can be written back out with the same number of decimals.\n * Default is no rounding.\n */\n\n\n/**\n * @classdesc\n * Abstract base class; normally only used for creating subclasses and not\n * instantiated in apps.\n * Base class for feature formats.\n * {module:ol/format/Feature~FeatureFormat} subclasses provide the ability to decode and encode\n * {@link module:ol/Feature~Feature} objects from a variety of commonly used geospatial\n * file formats.  See the documentation for each format for more details.\n *\n * @constructor\n * @abstract\n * @api\n */\nconst FeatureFormat = function() {\n\n  /**\n   * @protected\n   * @type {module:ol/proj/Projection}\n   */\n  this.dataProjection = null;\n\n  /**\n   * @protected\n   * @type {module:ol/proj/Projection}\n   */\n  this.defaultFeatureProjection = null;\n\n};\n\n\n/**\n * Adds the data projection to the read options.\n * @param {Document|Node|Object|string} source Source.\n * @param {module:ol/format/Feature~ReadOptions=} opt_options Options.\n * @return {module:ol/format/Feature~ReadOptions|undefined} Options.\n * @protected\n */\nFeatureFormat.prototype.getReadOptions = function(source, opt_options) {\n  let options;\n  if (opt_options) {\n    options = {\n      dataProjection: opt_options.dataProjection ?\n        opt_options.dataProjection : this.readProjection(source),\n      featureProjection: opt_options.featureProjection\n    };\n  }\n  return this.adaptOptions(options);\n};\n\n\n/**\n * Sets the `dataProjection` on the options, if no `dataProjection`\n * is set.\n * @param {module:ol/format/Feature~WriteOptions|module:ol/format/Feature~ReadOptions|undefined} options\n *     Options.\n * @protected\n * @return {module:ol/format/Feature~WriteOptions|module:ol/format/Feature~ReadOptions|undefined}\n *     Updated options.\n */\nFeatureFormat.prototype.adaptOptions = function(options) {\n  return assign({\n    dataProjection: this.dataProjection,\n    featureProjection: this.defaultFeatureProjection\n  }, options);\n};\n\n\n/**\n * Get the extent from the source of the last {@link readFeatures} call.\n * @return {module:ol/extent~Extent} Tile extent.\n */\nFeatureFormat.prototype.getLastExtent = function() {\n  return null;\n};\n\n\n/**\n * @abstract\n * @return {module:ol/format/FormatType} Format.\n */\nFeatureFormat.prototype.getType = function() {};\n\n\n/**\n * Read a single feature from a source.\n *\n * @abstract\n * @param {Document|Node|Object|string} source Source.\n * @param {module:ol/format/Feature~ReadOptions=} opt_options Read options.\n * @return {module:ol/Feature} Feature.\n */\nFeatureFormat.prototype.readFeature = function(source, opt_options) {};\n\n\n/**\n * Read all features from a source.\n *\n * @abstract\n * @param {Document|Node|ArrayBuffer|Object|string} source Source.\n * @param {module:ol/format/Feature~ReadOptions=} opt_options Read options.\n * @return {Array.<module:ol/Feature>} Features.\n */\nFeatureFormat.prototype.readFeatures = function(source, opt_options) {};\n\n\n/**\n * Read a single geometry from a source.\n *\n * @abstract\n * @param {Document|Node|Object|string} source Source.\n * @param {module:ol/format/Feature~ReadOptions=} opt_options Read options.\n * @return {module:ol/geom/Geometry} Geometry.\n */\nFeatureFormat.prototype.readGeometry = function(source, opt_options) {};\n\n\n/**\n * Read the projection from a source.\n *\n * @abstract\n * @param {Document|Node|Object|string} source Source.\n * @return {module:ol/proj/Projection} Projection.\n */\nFeatureFormat.prototype.readProjection = function(source) {};\n\n\n/**\n * Encode a feature in this format.\n *\n * @abstract\n * @param {module:ol/Feature} feature Feature.\n * @param {module:ol/format/Feature~WriteOptions=} opt_options Write options.\n * @return {string} Result.\n */\nFeatureFormat.prototype.writeFeature = function(feature, opt_options) {};\n\n\n/**\n * Encode an array of features in this format.\n *\n * @abstract\n * @param {Array.<module:ol/Feature>} features Features.\n * @param {module:ol/format/Feature~WriteOptions=} opt_options Write options.\n * @return {string} Result.\n */\nFeatureFormat.prototype.writeFeatures = function(features, opt_options) {};\n\n\n/**\n * Write a single geometry in this format.\n *\n * @abstract\n * @param {module:ol/geom/Geometry} geometry Geometry.\n * @param {module:ol/format/Feature~WriteOptions=} opt_options Write options.\n * @return {string} Result.\n */\nFeatureFormat.prototype.writeGeometry = function(geometry, opt_options) {};\n\nexport default FeatureFormat;\n\n/**\n * @param {module:ol/geom/Geometry|module:ol/extent~Extent} geometry Geometry.\n * @param {boolean} write Set to true for writing, false for reading.\n * @param {(module:ol/format/Feature~WriteOptions|module:ol/format/Feature~ReadOptions)=} opt_options\n *     Options.\n * @return {module:ol/geom/Geometry|module:ol/extent~Extent} Transformed geometry.\n */\nexport function transformWithOptions(geometry, write, opt_options) {\n  const featureProjection = opt_options ?\n    getProjection(opt_options.featureProjection) : null;\n  const dataProjection = opt_options ?\n    getProjection(opt_options.dataProjection) : null;\n  /**\n   * @type {module:ol/geom/Geometry|module:ol/extent~Extent}\n   */\n  let transformed;\n  if (featureProjection && dataProjection &&\n      !equivalentProjection(featureProjection, dataProjection)) {\n    if (geometry instanceof Geometry) {\n      transformed = (write ? geometry.clone() : geometry).transform(\n        write ? featureProjection : dataProjection,\n        write ? dataProjection : featureProjection);\n    } else {\n      // FIXME this is necessary because GML treats extents\n      // as geometries\n      transformed = transformExtent(\n        geometry,\n        dataProjection,\n        featureProjection);\n    }\n  } else {\n    transformed = geometry;\n  }\n  if (write && opt_options && opt_options.decimals !== undefined) {\n    const power = Math.pow(10, opt_options.decimals);\n    // if decimals option on write, round each coordinate appropriately\n    /**\n     * @param {Array.<number>} coordinates Coordinates.\n     * @return {Array.<number>} Transformed coordinates.\n     */\n    const transform = function(coordinates) {\n      for (let i = 0, ii = coordinates.length; i < ii; ++i) {\n        coordinates[i] = Math.round(coordinates[i] * power) / power;\n      }\n      return coordinates;\n    };\n    if (transformed === geometry) {\n      transformed = transformed.clone();\n    }\n    transformed.applyTransform(transform);\n  }\n  return transformed;\n}\n","/**\n * @module ol/ViewHint\n */\n\n/**\n * @enum {number}\n */\nexport default {\n  ANIMATING: 0,\n  INTERACTING: 1\n};\n","/**\n * @module ol/interaction/Interaction\n */\nimport {inherits} from '../util.js';\nimport BaseObject from '../Object.js';\nimport {easeOut, linear} from '../easing.js';\nimport InteractionProperty from '../interaction/Property.js';\nimport {clamp} from '../math.js';\n\n\n/**\n * Object literal with config options for interactions.\n * @typedef {Object} InteractionOptions\n * @property {function(module:ol/MapBrowserEvent):boolean} handleEvent\n * Method called by the map to notify the interaction that a browser event was\n * dispatched to the map. If the function returns a falsy value, propagation of\n * the event to other interactions in the map's interactions chain will be\n * prevented (this includes functions with no explicit return).\n */\n\n\n/**\n * @classdesc\n * Abstract base class; normally only used for creating subclasses and not\n * instantiated in apps.\n * User actions that change the state of the map. Some are similar to controls,\n * but are not associated with a DOM element.\n * For example, {@link module:ol/interaction/KeyboardZoom~KeyboardZoom} is\n * functionally the same as {@link module:ol/control/Zoom~Zoom}, but triggered\n * by a keyboard event not a button element event.\n * Although interactions do not have a DOM element, some of them do render\n * vectors and so are visible on the screen.\n *\n * @constructor\n * @param {module:ol/interaction/Interaction~InteractionOptions} options Options.\n * @extends {module:ol/Object}\n * @api\n */\nconst Interaction = function(options) {\n\n  BaseObject.call(this);\n\n  /**\n   * @private\n   * @type {module:ol/PluggableMap}\n   */\n  this.map_ = null;\n\n  this.setActive(true);\n\n  /**\n   * @type {function(module:ol/MapBrowserEvent):boolean}\n   */\n  this.handleEvent = options.handleEvent;\n\n};\n\ninherits(Interaction, BaseObject);\n\n\n/**\n * Return whether the interaction is currently active.\n * @return {boolean} `true` if the interaction is active, `false` otherwise.\n * @observable\n * @api\n */\nInteraction.prototype.getActive = function() {\n  return /** @type {boolean} */ (this.get(InteractionProperty.ACTIVE));\n};\n\n\n/**\n * Get the map associated with this interaction.\n * @return {module:ol/PluggableMap} Map.\n * @api\n */\nInteraction.prototype.getMap = function() {\n  return this.map_;\n};\n\n\n/**\n * Activate or deactivate the interaction.\n * @param {boolean} active Active.\n * @observable\n * @api\n */\nInteraction.prototype.setActive = function(active) {\n  this.set(InteractionProperty.ACTIVE, active);\n};\n\n\n/**\n * Remove the interaction from its current map and attach it to the new map.\n * Subclasses may set up event handlers to get notified about changes to\n * the map here.\n * @param {module:ol/PluggableMap} map Map.\n */\nInteraction.prototype.setMap = function(map) {\n  this.map_ = map;\n};\n\n\n/**\n * @param {module:ol/View} view View.\n * @param {module:ol/coordinate~Coordinate} delta Delta.\n * @param {number=} opt_duration Duration.\n */\nexport function pan(view, delta, opt_duration) {\n  const currentCenter = view.getCenter();\n  if (currentCenter) {\n    const center = view.constrainCenter(\n      [currentCenter[0] + delta[0], currentCenter[1] + delta[1]]);\n    if (opt_duration) {\n      view.animate({\n        duration: opt_duration,\n        easing: linear,\n        center: center\n      });\n    } else {\n      view.setCenter(center);\n    }\n  }\n}\n\n\n/**\n * @param {module:ol/View} view View.\n * @param {number|undefined} rotation Rotation.\n * @param {module:ol/coordinate~Coordinate=} opt_anchor Anchor coordinate.\n * @param {number=} opt_duration Duration.\n */\nexport function rotate(view, rotation, opt_anchor, opt_duration) {\n  rotation = view.constrainRotation(rotation, 0);\n  rotateWithoutConstraints(view, rotation, opt_anchor, opt_duration);\n}\n\n\n/**\n * @param {module:ol/View} view View.\n * @param {number|undefined} rotation Rotation.\n * @param {module:ol/coordinate~Coordinate=} opt_anchor Anchor coordinate.\n * @param {number=} opt_duration Duration.\n */\nexport function rotateWithoutConstraints(view, rotation, opt_anchor, opt_duration) {\n  if (rotation !== undefined) {\n    const currentRotation = view.getRotation();\n    const currentCenter = view.getCenter();\n    if (currentRotation !== undefined && currentCenter && opt_duration > 0) {\n      view.animate({\n        rotation: rotation,\n        anchor: opt_anchor,\n        duration: opt_duration,\n        easing: easeOut\n      });\n    } else {\n      view.rotate(rotation, opt_anchor);\n    }\n  }\n}\n\n\n/**\n * @param {module:ol/View} view View.\n * @param {number|undefined} resolution Resolution to go to.\n * @param {module:ol/coordinate~Coordinate=} opt_anchor Anchor coordinate.\n * @param {number=} opt_duration Duration.\n * @param {number=} opt_direction Zooming direction; > 0 indicates\n *     zooming out, in which case the constraints system will select\n *     the largest nearest resolution; < 0 indicates zooming in, in\n *     which case the constraints system will select the smallest\n *     nearest resolution; == 0 indicates that the zooming direction\n *     is unknown/not relevant, in which case the constraints system\n *     will select the nearest resolution. If not defined 0 is\n *     assumed.\n */\nexport function zoom(view, resolution, opt_anchor, opt_duration, opt_direction) {\n  resolution = view.constrainResolution(resolution, 0, opt_direction);\n  zoomWithoutConstraints(view, resolution, opt_anchor, opt_duration);\n}\n\n\n/**\n * @param {module:ol/View} view View.\n * @param {number} delta Delta from previous zoom level.\n * @param {module:ol/coordinate~Coordinate=} opt_anchor Anchor coordinate.\n * @param {number=} opt_duration Duration.\n */\nexport function zoomByDelta(view, delta, opt_anchor, opt_duration) {\n  const currentResolution = view.getResolution();\n  let resolution = view.constrainResolution(currentResolution, delta, 0);\n\n  if (resolution !== undefined) {\n    const resolutions = view.getResolutions();\n    resolution = clamp(\n      resolution,\n      view.getMinResolution() || resolutions[resolutions.length - 1],\n      view.getMaxResolution() || resolutions[0]);\n  }\n\n  // If we have a constraint on center, we need to change the anchor so that the\n  // new center is within the extent. We first calculate the new center, apply\n  // the constraint to it, and then calculate back the anchor\n  if (opt_anchor && resolution !== undefined && resolution !== currentResolution) {\n    const currentCenter = view.getCenter();\n    let center = view.calculateCenterZoom(resolution, opt_anchor);\n    center = view.constrainCenter(center);\n\n    opt_anchor = [\n      (resolution * currentCenter[0] - currentResolution * center[0]) /\n          (resolution - currentResolution),\n      (resolution * currentCenter[1] - currentResolution * center[1]) /\n          (resolution - currentResolution)\n    ];\n  }\n\n  zoomWithoutConstraints(view, resolution, opt_anchor, opt_duration);\n}\n\n\n/**\n * @param {module:ol/View} view View.\n * @param {number|undefined} resolution Resolution to go to.\n * @param {module:ol/coordinate~Coordinate=} opt_anchor Anchor coordinate.\n * @param {number=} opt_duration Duration.\n */\nexport function zoomWithoutConstraints(view, resolution, opt_anchor, opt_duration) {\n  if (resolution) {\n    const currentResolution = view.getResolution();\n    const currentCenter = view.getCenter();\n    if (currentResolution !== undefined && currentCenter &&\n        resolution !== currentResolution && opt_duration) {\n      view.animate({\n        resolution: resolution,\n        anchor: opt_anchor,\n        duration: opt_duration,\n        easing: easeOut\n      });\n    } else {\n      if (opt_anchor) {\n        const center = view.calculateCenterZoom(resolution, opt_anchor);\n        view.setCenter(center);\n      }\n      view.setResolution(resolution);\n    }\n  }\n}\n\nexport default Interaction;\n","/**\n * @module ol/source/BingMaps\n */\nimport {inherits} from '../util.js';\nimport {createFromTileUrlFunctions} from '../tileurlfunction.js';\nimport {applyTransform, intersects} from '../extent.js';\nimport {jsonp as requestJSONP} from '../net.js';\nimport {get as getProjection, getTransformFromProjections} from '../proj.js';\nimport SourceState from '../source/State.js';\nimport TileImage from '../source/TileImage.js';\nimport {createOrUpdate, quadKey} from '../tilecoord.js';\nimport {createXYZ, extentFromProjection} from '../tilegrid.js';\n\n/**\n * @typedef {Object} Options\n * @property {number} [cacheSize=2048] Cache size.\n * @property {boolean} [hidpi=false] If `true` hidpi tiles will be requested.\n * @property {string} [culture='en-us'] Culture code.\n * @property {string} key Bing Maps API key. Get yours at http://www.bingmapsportal.com/.\n * @property {string} imagerySet Type of imagery.\n * @property {number} [maxZoom=21] Max zoom. Default is what's advertized by the BingMaps service.\n * @property {number} [reprojectionErrorThreshold=0.5] Maximum allowed reprojection error (in pixels).\n * Higher values can increase reprojection performance, but decrease precision.\n * @property {module:ol/Tile~LoadFunction} [tileLoadFunction] Optional function to load a tile given a URL. The default is\n * ```js\n * function(imageTile, src) {\n *   imageTile.getImage().src = src;\n * };\n * ```\n * @property {boolean} [wrapX=true] Whether to wrap the world horizontally.\n * @property {number} [transition] Duration of the opacity transition for rendering.\n * To disable the opacity transition, pass `transition: 0`.\n */\n\n/**\n * @classdesc\n * Layer source for Bing Maps tile data.\n *\n * @constructor\n * @extends {module:ol/source/TileImage}\n * @param {module:ol/source/BingMaps~Options=} options Bing Maps options.\n * @api\n */\nconst BingMaps = function(options) {\n\n  /**\n   * @private\n   * @type {boolean}\n   */\n  this.hidpi_ = options.hidpi !== undefined ? options.hidpi : false;\n\n  TileImage.call(this, {\n    cacheSize: options.cacheSize,\n    crossOrigin: 'anonymous',\n    opaque: true,\n    projection: getProjection('EPSG:3857'),\n    reprojectionErrorThreshold: options.reprojectionErrorThreshold,\n    state: SourceState.LOADING,\n    tileLoadFunction: options.tileLoadFunction,\n    tilePixelRatio: this.hidpi_ ? 2 : 1,\n    wrapX: options.wrapX !== undefined ? options.wrapX : true,\n    transition: options.transition\n  });\n\n  /**\n   * @private\n   * @type {string}\n   */\n  this.culture_ = options.culture !== undefined ? options.culture : 'en-us';\n\n  /**\n   * @private\n   * @type {number}\n   */\n  this.maxZoom_ = options.maxZoom !== undefined ? options.maxZoom : -1;\n\n  /**\n   * @private\n   * @type {string}\n   */\n  this.apiKey_ = options.key;\n\n  /**\n   * @private\n   * @type {string}\n   */\n  this.imagerySet_ = options.imagerySet;\n\n  const url = 'https://dev.virtualearth.net/REST/v1/Imagery/Metadata/' +\n      this.imagerySet_ +\n      '?uriScheme=https&include=ImageryProviders&key=' + this.apiKey_ +\n      '&c=' + this.culture_;\n\n  requestJSONP(url, this.handleImageryMetadataResponse.bind(this), undefined,\n    'jsonp');\n\n};\n\ninherits(BingMaps, TileImage);\n\n\n/**\n * The attribution containing a link to the Microsoft® Bing™ Maps Platform APIs’\n * Terms Of Use.\n * @const\n * @type {string}\n */\nconst TOS_ATTRIBUTION = '<a class=\"ol-attribution-bing-tos\" ' +\n      'href=\"https://www.microsoft.com/maps/product/terms.html\">' +\n      'Terms of Use</a>';\n\n\n/**\n * Get the api key used for this source.\n *\n * @return {string} The api key.\n * @api\n */\nBingMaps.prototype.getApiKey = function() {\n  return this.apiKey_;\n};\n\n\n/**\n * Get the imagery set associated with this source.\n *\n * @return {string} The imagery set.\n * @api\n */\nBingMaps.prototype.getImagerySet = function() {\n  return this.imagerySet_;\n};\n\n\n/**\n * @param {BingMapsImageryMetadataResponse} response Response.\n */\nBingMaps.prototype.handleImageryMetadataResponse = function(response) {\n  if (response.statusCode != 200 ||\n      response.statusDescription != 'OK' ||\n      response.authenticationResultCode != 'ValidCredentials' ||\n      response.resourceSets.length != 1 ||\n      response.resourceSets[0].resources.length != 1) {\n    this.setState(SourceState.ERROR);\n    return;\n  }\n\n  const resource = response.resourceSets[0].resources[0];\n  const maxZoom = this.maxZoom_ == -1 ? resource.zoomMax : this.maxZoom_;\n\n  const sourceProjection = this.getProjection();\n  const extent = extentFromProjection(sourceProjection);\n  const tileSize = resource.imageWidth == resource.imageHeight ?\n    resource.imageWidth : [resource.imageWidth, resource.imageHeight];\n  const tileGrid = createXYZ({\n    extent: extent,\n    minZoom: resource.zoomMin,\n    maxZoom: maxZoom,\n    tileSize: tileSize / (this.hidpi_ ? 2 : 1)\n  });\n  this.tileGrid = tileGrid;\n\n  const culture = this.culture_;\n  const hidpi = this.hidpi_;\n  this.tileUrlFunction = createFromTileUrlFunctions(\n    resource.imageUrlSubdomains.map(function(subdomain) {\n      const quadKeyTileCoord = [0, 0, 0];\n      const imageUrl = resource.imageUrl\n        .replace('{subdomain}', subdomain)\n        .replace('{culture}', culture);\n      return (\n        /**\n         * @param {module:ol/tilecoord~TileCoord} tileCoord Tile coordinate.\n         * @param {number} pixelRatio Pixel ratio.\n         * @param {module:ol/proj/Projection} projection Projection.\n         * @return {string|undefined} Tile URL.\n         */\n        function(tileCoord, pixelRatio, projection) {\n          if (!tileCoord) {\n            return undefined;\n          } else {\n            createOrUpdate(tileCoord[0], tileCoord[1], -tileCoord[2] - 1, quadKeyTileCoord);\n            let url = imageUrl;\n            if (hidpi) {\n              url += '&dpi=d1&device=mobile';\n            }\n            return url.replace('{quadkey}', quadKey(quadKeyTileCoord));\n          }\n        }\n      );\n    }));\n\n  if (resource.imageryProviders) {\n    const transform = getTransformFromProjections(\n      getProjection('EPSG:4326'), this.getProjection());\n\n    this.setAttributions(function(frameState) {\n      const attributions = [];\n      const zoom = frameState.viewState.zoom;\n      resource.imageryProviders.map(function(imageryProvider) {\n        let intersecting = false;\n        const coverageAreas = imageryProvider.coverageAreas;\n        for (let i = 0, ii = coverageAreas.length; i < ii; ++i) {\n          const coverageArea = coverageAreas[i];\n          if (zoom >= coverageArea.zoomMin && zoom <= coverageArea.zoomMax) {\n            const bbox = coverageArea.bbox;\n            const epsg4326Extent = [bbox[1], bbox[0], bbox[3], bbox[2]];\n            const extent = applyTransform(epsg4326Extent, transform);\n            if (intersects(extent, frameState.extent)) {\n              intersecting = true;\n              break;\n            }\n          }\n        }\n        if (intersecting) {\n          attributions.push(imageryProvider.attribution);\n        }\n      });\n\n      attributions.push(TOS_ATTRIBUTION);\n      return attributions;\n    });\n  }\n\n  this.setState(SourceState.READY);\n};\nexport default BingMaps;\n","/**\n * @module ol/css\n */\n\n\n/**\n * The CSS class for hidden feature.\n *\n * @const\n * @type {string}\n */\nexport const CLASS_HIDDEN = 'ol-hidden';\n\n\n/**\n * The CSS class that we'll give the DOM elements to have them selectable.\n *\n * @const\n * @type {string}\n */\nexport const CLASS_SELECTABLE = 'ol-selectable';\n\n\n/**\n * The CSS class that we'll give the DOM elements to have them unselectable.\n *\n * @const\n * @type {string}\n */\nexport const CLASS_UNSELECTABLE = 'ol-unselectable';\n\n\n/**\n * The CSS class for unsupported feature.\n *\n * @const\n * @type {string}\n */\nexport const CLASS_UNSUPPORTED = 'ol-unsupported';\n\n\n/**\n * The CSS class for controls.\n *\n * @const\n * @type {string}\n */\nexport const CLASS_CONTROL = 'ol-control';\n\n\n/**\n * The CSS class that we'll give the DOM elements that are collapsed, i.e.\n * to those elements which usually can be expanded.\n *\n * @const\n * @type {string}\n */\nexport const CLASS_COLLAPSED = 'ol-collapsed';\n\n\n/**\n * Get the list of font families from a font spec.  Note that this doesn't work\n * for font families that have commas in them.\n * @param {string} The CSS font property.\n * @return {Object.<string>} The font families (or null if the input spec is invalid).\n */\nexport const getFontFamilies = (function() {\n  let style;\n  const cache = {};\n  return function(font) {\n    if (!style) {\n      style = document.createElement('div').style;\n    }\n    if (!(font in cache)) {\n      style.font = font;\n      const family = style.fontFamily;\n      style.font = '';\n      if (!family) {\n        return null;\n      }\n      cache[font] = family.split(/,\\s?/);\n    }\n    return cache[font];\n  };\n})();\n","/**\n * @module ol/has\n */\n\nconst ua = typeof navigator !== 'undefined' ?\n  navigator.userAgent.toLowerCase() : '';\n\n/**\n * User agent string says we are dealing with Firefox as browser.\n * @type {boolean}\n */\nexport const FIREFOX = ua.indexOf('firefox') !== -1;\n\n/**\n * User agent string says we are dealing with Safari as browser.\n * @type {boolean}\n */\nexport const SAFARI = ua.indexOf('safari') !== -1 && ua.indexOf('chrom') == -1;\n\n/**\n * User agent string says we are dealing with a WebKit engine.\n * @type {boolean}\n */\nexport const WEBKIT = ua.indexOf('webkit') !== -1 && ua.indexOf('edge') == -1;\n\n/**\n * User agent string says we are dealing with a Mac as platform.\n * @type {boolean}\n */\nexport const MAC = ua.indexOf('macintosh') !== -1;\n\n\n/**\n * The ratio between physical pixels and device-independent pixels\n * (dips) on the device (`window.devicePixelRatio`).\n * @const\n * @type {number}\n * @api\n */\nexport const DEVICE_PIXEL_RATIO = window.devicePixelRatio || 1;\n\n\n/**\n * True if the browser's Canvas implementation implements {get,set}LineDash.\n * @type {boolean}\n */\nexport const CANVAS_LINE_DASH = function() {\n  let has = false;\n  try {\n    has = !!document.createElement('CANVAS').getContext('2d').setLineDash;\n  } catch (e) {\n    // pass\n  }\n  return has;\n}();\n\n\n/**\n * Is HTML5 geolocation supported in the current browser?\n * @const\n * @type {boolean}\n * @api\n */\nexport const GEOLOCATION = 'geolocation' in navigator;\n\n\n/**\n * True if browser supports touch events.\n * @const\n * @type {boolean}\n * @api\n */\nexport const TOUCH = 'ontouchstart' in window;\n\n\n/**\n * True if browser supports pointer events.\n * @const\n * @type {boolean}\n */\nexport const POINTER = 'PointerEvent' in window;\n\n\n/**\n * True if browser supports ms pointer events (IE 10).\n * @const\n * @type {boolean}\n */\nexport const MSPOINTER = !!(navigator.msPointerEnabled);\n\n\nexport {HAS as WEBGL} from './webgl.js';\n","/**\n * @module ol/source/State\n */\n\n/**\n * State of the source, one of 'undefined', 'loading', 'ready' or 'error'.\n * @enum {string}\n */\nexport default {\n  UNDEFINED: 'undefined',\n  LOADING: 'loading',\n  READY: 'ready',\n  ERROR: 'error'\n};\n","/**\n * @module ol/format/GMLBase\n */\n// FIXME Envelopes should not be treated as geometries! readEnvelope_ is part\n// of GEOMETRY_PARSERS_ and methods using GEOMETRY_PARSERS_ do not expect\n// envelopes/extents, only geometries!\nimport {inherits} from '../util.js';\nimport {extend} from '../array.js';\nimport Feature from '../Feature.js';\nimport {transformWithOptions} from '../format/Feature.js';\nimport XMLFeature from '../format/XMLFeature.js';\nimport GeometryLayout from '../geom/GeometryLayout.js';\nimport LineString from '../geom/LineString.js';\nimport LinearRing from '../geom/LinearRing.js';\nimport MultiLineString from '../geom/MultiLineString.js';\nimport MultiPoint from '../geom/MultiPoint.js';\nimport MultiPolygon from '../geom/MultiPolygon.js';\nimport Point from '../geom/Point.js';\nimport Polygon from '../geom/Polygon.js';\nimport {assign} from '../obj.js';\nimport {get as getProjection} from '../proj.js';\nimport {getAllTextContent, getAttributeNS, makeArrayPusher, makeReplacer, parseNode, pushParseAndPop} from '../xml.js';\n\n\n/**\n * @const\n * @type {string}\n */\nexport const GMLNS = 'http://www.opengis.net/gml';\n\n\n/**\n * @typedef {Object} Options\n * @property {Object.<string, string>|string} [featureNS] Feature\n * namespace. If not defined will be derived from GML. If multiple\n * feature types have been configured which come from different feature\n * namespaces, this will be an object with the keys being the prefixes used\n * in the entries of featureType array. The values of the object will be the\n * feature namespaces themselves. So for instance there might be a featureType\n * item `topp:states` in the `featureType` array and then there will be a key\n * `topp` in the featureNS object with value `http://www.openplans.org/topp`.\n * @property {Array.<string>|string} [featureType] Feature type(s) to parse.\n * If multiple feature types need to be configured\n * which come from different feature namespaces, `featureNS` will be an object\n * with the keys being the prefixes used in the entries of featureType array.\n * The values of the object will be the feature namespaces themselves.\n * So for instance there might be a featureType item `topp:states` and then\n * there will be a key named `topp` in the featureNS object with value\n * `http://www.openplans.org/topp`.\n * @property {string} srsName srsName to use when writing geometries.\n * @property {boolean} [surface=false] Write gml:Surface instead of gml:Polygon\n * elements. This also affects the elements in multi-part geometries.\n * @property {boolean} [curve=false] Write gml:Curve instead of gml:LineString\n * elements. This also affects the elements in multi-part geometries.\n * @property {boolean} [multiCurve=true] Write gml:MultiCurve instead of gml:MultiLineString.\n * Since the latter is deprecated in GML 3.\n * @property {boolean} [multiSurface=true] Write gml:multiSurface instead of\n * gml:MultiPolygon. Since the latter is deprecated in GML 3.\n * @property {string} [schemaLocation] Optional schemaLocation to use when\n * writing out the GML, this will override the default provided.\n */\n\n\n/**\n * @classdesc\n * Abstract base class; normally only used for creating subclasses and not\n * instantiated in apps.\n * Feature base format for reading and writing data in the GML format.\n * This class cannot be instantiated, it contains only base content that\n * is shared with versioned format classes GML2 and GML3.\n *\n * @constructor\n * @abstract\n * @param {module:ol/format/GMLBase~Options=} opt_options\n *     Optional configuration object.\n * @extends {module:ol/format/XMLFeature}\n */\nconst GMLBase = function(opt_options) {\n  const options = /** @type {module:ol/format/GMLBase~Options} */ (opt_options ? opt_options : {});\n\n  /**\n   * @protected\n   * @type {Array.<string>|string|undefined}\n   */\n  this.featureType = options.featureType;\n\n  /**\n   * @protected\n   * @type {Object.<string, string>|string|undefined}\n   */\n  this.featureNS = options.featureNS;\n\n  /**\n   * @protected\n   * @type {string}\n   */\n  this.srsName = options.srsName;\n\n  /**\n   * @protected\n   * @type {string}\n   */\n  this.schemaLocation = '';\n\n  /**\n   * @type {Object.<string, Object.<string, Object>>}\n   */\n  this.FEATURE_COLLECTION_PARSERS = {};\n  this.FEATURE_COLLECTION_PARSERS[GMLNS] = {\n    'featureMember': makeReplacer(GMLBase.prototype.readFeaturesInternal),\n    'featureMembers': makeReplacer(GMLBase.prototype.readFeaturesInternal)\n  };\n\n  XMLFeature.call(this);\n};\n\ninherits(GMLBase, XMLFeature);\n\n\n/**\n * A regular expression that matches if a string only contains whitespace\n * characters. It will e.g. match `''`, `' '`, `'\\n'` etc. The non-breaking\n * space (0xa0) is explicitly included as IE doesn't include it in its\n * definition of `\\s`.\n *\n * Information from `goog.string.isEmptyOrWhitespace`: https://github.com/google/closure-library/blob/e877b1e/closure/goog/string/string.js#L156-L160\n *\n * @const\n * @type {RegExp}\n */\nconst ONLY_WHITESPACE_RE = /^[\\s\\xa0]*$/;\n\n\n/**\n * @param {Node} node Node.\n * @param {Array.<*>} objectStack Object stack.\n * @return {Array.<module:ol/Feature> | undefined} Features.\n */\nGMLBase.prototype.readFeaturesInternal = function(node, objectStack) {\n  const localName = node.localName;\n  let features = null;\n  if (localName == 'FeatureCollection') {\n    if (node.namespaceURI === 'http://www.opengis.net/wfs') {\n      features = pushParseAndPop([],\n        this.FEATURE_COLLECTION_PARSERS, node,\n        objectStack, this);\n    } else {\n      features = pushParseAndPop(null,\n        this.FEATURE_COLLECTION_PARSERS, node,\n        objectStack, this);\n    }\n  } else if (localName == 'featureMembers' || localName == 'featureMember') {\n    const context = objectStack[0];\n    let featureType = context['featureType'];\n    let featureNS = context['featureNS'];\n    const prefix = 'p';\n    const defaultPrefix = 'p0';\n    if (!featureType && node.childNodes) {\n      featureType = [], featureNS = {};\n      for (let i = 0, ii = node.childNodes.length; i < ii; ++i) {\n        const child = node.childNodes[i];\n        if (child.nodeType === 1) {\n          const ft = child.nodeName.split(':').pop();\n          if (featureType.indexOf(ft) === -1) {\n            let key = '';\n            let count = 0;\n            const uri = child.namespaceURI;\n            for (const candidate in featureNS) {\n              if (featureNS[candidate] === uri) {\n                key = candidate;\n                break;\n              }\n              ++count;\n            }\n            if (!key) {\n              key = prefix + count;\n              featureNS[key] = uri;\n            }\n            featureType.push(key + ':' + ft);\n          }\n        }\n      }\n      if (localName != 'featureMember') {\n        // recheck featureType for each featureMember\n        context['featureType'] = featureType;\n        context['featureNS'] = featureNS;\n      }\n    }\n    if (typeof featureNS === 'string') {\n      const ns = featureNS;\n      featureNS = {};\n      featureNS[defaultPrefix] = ns;\n    }\n    const parsersNS = {};\n    const featureTypes = Array.isArray(featureType) ? featureType : [featureType];\n    for (const p in featureNS) {\n      const parsers = {};\n      for (let i = 0, ii = featureTypes.length; i < ii; ++i) {\n        const featurePrefix = featureTypes[i].indexOf(':') === -1 ?\n          defaultPrefix : featureTypes[i].split(':')[0];\n        if (featurePrefix === p) {\n          parsers[featureTypes[i].split(':').pop()] =\n              (localName == 'featureMembers') ?\n                makeArrayPusher(this.readFeatureElement, this) :\n                makeReplacer(this.readFeatureElement, this);\n        }\n      }\n      parsersNS[featureNS[p]] = parsers;\n    }\n    if (localName == 'featureMember') {\n      features = pushParseAndPop(undefined, parsersNS, node, objectStack);\n    } else {\n      features = pushParseAndPop([], parsersNS, node, objectStack);\n    }\n  }\n  if (features === null) {\n    features = [];\n  }\n  return features;\n};\n\n\n/**\n * @param {Node} node Node.\n * @param {Array.<*>} objectStack Object stack.\n * @return {module:ol/geom/Geometry|undefined} Geometry.\n */\nGMLBase.prototype.readGeometryElement = function(node, objectStack) {\n  const context = /** @type {Object} */ (objectStack[0]);\n  context['srsName'] = node.firstElementChild.getAttribute('srsName');\n  context['srsDimension'] = node.firstElementChild.getAttribute('srsDimension');\n  /** @type {module:ol/geom/Geometry} */\n  const geometry = pushParseAndPop(null, this.GEOMETRY_PARSERS_, node, objectStack, this);\n  if (geometry) {\n    return (\n      /** @type {module:ol/geom/Geometry} */ (transformWithOptions(geometry, false, context))\n    );\n  } else {\n    return undefined;\n  }\n};\n\n\n/**\n * @param {Node} node Node.\n * @param {Array.<*>} objectStack Object stack.\n * @return {module:ol/Feature} Feature.\n */\nGMLBase.prototype.readFeatureElement = function(node, objectStack) {\n  let n;\n  const fid = node.getAttribute('fid') || getAttributeNS(node, GMLNS, 'id');\n  const values = {};\n  let geometryName;\n  for (n = node.firstElementChild; n; n = n.nextElementSibling) {\n    const localName = n.localName;\n    // Assume attribute elements have one child node and that the child\n    // is a text or CDATA node (to be treated as text).\n    // Otherwise assume it is a geometry node.\n    if (n.childNodes.length === 0 ||\n        (n.childNodes.length === 1 &&\n        (n.firstChild.nodeType === 3 || n.firstChild.nodeType === 4))) {\n      let value = getAllTextContent(n, false);\n      if (ONLY_WHITESPACE_RE.test(value)) {\n        value = undefined;\n      }\n      values[localName] = value;\n    } else {\n      // boundedBy is an extent and must not be considered as a geometry\n      if (localName !== 'boundedBy') {\n        geometryName = localName;\n      }\n      values[localName] = this.readGeometryElement(n, objectStack);\n    }\n  }\n  const feature = new Feature(values);\n  if (geometryName) {\n    feature.setGeometryName(geometryName);\n  }\n  if (fid) {\n    feature.setId(fid);\n  }\n  return feature;\n};\n\n\n/**\n * @param {Node} node Node.\n * @param {Array.<*>} objectStack Object stack.\n * @return {module:ol/geom/Point|undefined} Point.\n */\nGMLBase.prototype.readPoint = function(node, objectStack) {\n  const flatCoordinates = this.readFlatCoordinatesFromNode_(node, objectStack);\n  if (flatCoordinates) {\n    const point = new Point(null);\n    point.setFlatCoordinates(GeometryLayout.XYZ, flatCoordinates);\n    return point;\n  }\n};\n\n\n/**\n * @param {Node} node Node.\n * @param {Array.<*>} objectStack Object stack.\n * @return {module:ol/geom/MultiPoint|undefined} MultiPoint.\n */\nGMLBase.prototype.readMultiPoint = function(node, objectStack) {\n  /** @type {Array.<Array.<number>>} */\n  const coordinates = pushParseAndPop([],\n    this.MULTIPOINT_PARSERS_, node, objectStack, this);\n  if (coordinates) {\n    return new MultiPoint(coordinates);\n  } else {\n    return undefined;\n  }\n};\n\n\n/**\n * @param {Node} node Node.\n * @param {Array.<*>} objectStack Object stack.\n * @return {module:ol/geom/MultiLineString|undefined} MultiLineString.\n */\nGMLBase.prototype.readMultiLineString = function(node, objectStack) {\n  /** @type {Array.<module:ol/geom/LineString>} */\n  const lineStrings = pushParseAndPop([],\n    this.MULTILINESTRING_PARSERS_, node, objectStack, this);\n  if (lineStrings) {\n    const multiLineString = new MultiLineString(null);\n    multiLineString.setLineStrings(lineStrings);\n    return multiLineString;\n  } else {\n    return undefined;\n  }\n};\n\n\n/**\n * @param {Node} node Node.\n * @param {Array.<*>} objectStack Object stack.\n * @return {module:ol/geom/MultiPolygon|undefined} MultiPolygon.\n */\nGMLBase.prototype.readMultiPolygon = function(node, objectStack) {\n  /** @type {Array.<module:ol/geom/Polygon>} */\n  const polygons = pushParseAndPop([], this.MULTIPOLYGON_PARSERS_, node, objectStack, this);\n  if (polygons) {\n    const multiPolygon = new MultiPolygon(null);\n    multiPolygon.setPolygons(polygons);\n    return multiPolygon;\n  } else {\n    return undefined;\n  }\n};\n\n\n/**\n * @param {Node} node Node.\n * @param {Array.<*>} objectStack Object stack.\n * @private\n */\nGMLBase.prototype.pointMemberParser_ = function(node, objectStack) {\n  parseNode(this.POINTMEMBER_PARSERS_, node, objectStack, this);\n};\n\n\n/**\n * @param {Node} node Node.\n * @param {Array.<*>} objectStack Object stack.\n * @private\n */\nGMLBase.prototype.lineStringMemberParser_ = function(node, objectStack) {\n  parseNode(this.LINESTRINGMEMBER_PARSERS_, node, objectStack, this);\n};\n\n\n/**\n * @param {Node} node Node.\n * @param {Array.<*>} objectStack Object stack.\n * @private\n */\nGMLBase.prototype.polygonMemberParser_ = function(node, objectStack) {\n  parseNode(this.POLYGONMEMBER_PARSERS_, node, objectStack, this);\n};\n\n\n/**\n * @param {Node} node Node.\n * @param {Array.<*>} objectStack Object stack.\n * @return {module:ol/geom/LineString|undefined} LineString.\n */\nGMLBase.prototype.readLineString = function(node, objectStack) {\n  const flatCoordinates = this.readFlatCoordinatesFromNode_(node, objectStack);\n  if (flatCoordinates) {\n    const lineString = new LineString(null);\n    lineString.setFlatCoordinates(GeometryLayout.XYZ, flatCoordinates);\n    return lineString;\n  } else {\n    return undefined;\n  }\n};\n\n\n/**\n * @param {Node} node Node.\n * @param {Array.<*>} objectStack Object stack.\n * @private\n * @return {Array.<number>|undefined} LinearRing flat coordinates.\n */\nGMLBase.prototype.readFlatLinearRing_ = function(node, objectStack) {\n  const ring = pushParseAndPop(null,\n    this.GEOMETRY_FLAT_COORDINATES_PARSERS_, node,\n    objectStack, this);\n  if (ring) {\n    return ring;\n  } else {\n    return undefined;\n  }\n};\n\n\n/**\n * @param {Node} node Node.\n * @param {Array.<*>} objectStack Object stack.\n * @return {module:ol/geom/LinearRing|undefined} LinearRing.\n */\nGMLBase.prototype.readLinearRing = function(node, objectStack) {\n  const flatCoordinates = this.readFlatCoordinatesFromNode_(node, objectStack);\n  if (flatCoordinates) {\n    const ring = new LinearRing(null);\n    ring.setFlatCoordinates(GeometryLayout.XYZ, flatCoordinates);\n    return ring;\n  } else {\n    return undefined;\n  }\n};\n\n\n/**\n * @param {Node} node Node.\n * @param {Array.<*>} objectStack Object stack.\n * @return {module:ol/geom/Polygon|undefined} Polygon.\n */\nGMLBase.prototype.readPolygon = function(node, objectStack) {\n  /** @type {Array.<Array.<number>>} */\n  const flatLinearRings = pushParseAndPop([null],\n    this.FLAT_LINEAR_RINGS_PARSERS_, node, objectStack, this);\n  if (flatLinearRings && flatLinearRings[0]) {\n    const polygon = new Polygon(null);\n    const flatCoordinates = flatLinearRings[0];\n    const ends = [flatCoordinates.length];\n    let i, ii;\n    for (i = 1, ii = flatLinearRings.length; i < ii; ++i) {\n      extend(flatCoordinates, flatLinearRings[i]);\n      ends.push(flatCoordinates.length);\n    }\n    polygon.setFlatCoordinates(GeometryLayout.XYZ, flatCoordinates, ends);\n    return polygon;\n  } else {\n    return undefined;\n  }\n};\n\n\n/**\n * @param {Node} node Node.\n * @param {Array.<*>} objectStack Object stack.\n * @private\n * @return {Array.<number>} Flat coordinates.\n */\nGMLBase.prototype.readFlatCoordinatesFromNode_ = function(node, objectStack) {\n  return pushParseAndPop(null, this.GEOMETRY_FLAT_COORDINATES_PARSERS_, node, objectStack, this);\n};\n\n\n/**\n * @const\n * @type {Object.<string, Object.<string, module:ol/xml~Parser>>}\n * @private\n */\nGMLBase.prototype.MULTIPOINT_PARSERS_ = {\n  'http://www.opengis.net/gml': {\n    'pointMember': makeArrayPusher(GMLBase.prototype.pointMemberParser_),\n    'pointMembers': makeArrayPusher(GMLBase.prototype.pointMemberParser_)\n  }\n};\n\n\n/**\n * @const\n * @type {Object.<string, Object.<string, module:ol/xml~Parser>>}\n * @private\n */\nGMLBase.prototype.MULTILINESTRING_PARSERS_ = {\n  'http://www.opengis.net/gml': {\n    'lineStringMember': makeArrayPusher(GMLBase.prototype.lineStringMemberParser_),\n    'lineStringMembers': makeArrayPusher(GMLBase.prototype.lineStringMemberParser_)\n  }\n};\n\n\n/**\n * @const\n * @type {Object.<string, Object.<string, module:ol/xml~Parser>>}\n * @private\n */\nGMLBase.prototype.MULTIPOLYGON_PARSERS_ = {\n  'http://www.opengis.net/gml': {\n    'polygonMember': makeArrayPusher(GMLBase.prototype.polygonMemberParser_),\n    'polygonMembers': makeArrayPusher(GMLBase.prototype.polygonMemberParser_)\n  }\n};\n\n\n/**\n * @const\n * @type {Object.<string, Object.<string, module:ol/xml~Parser>>}\n * @private\n */\nGMLBase.prototype.POINTMEMBER_PARSERS_ = {\n  'http://www.opengis.net/gml': {\n    'Point': makeArrayPusher(GMLBase.prototype.readFlatCoordinatesFromNode_)\n  }\n};\n\n\n/**\n * @const\n * @type {Object.<string, Object.<string, module:ol/xml~Parser>>}\n * @private\n */\nGMLBase.prototype.LINESTRINGMEMBER_PARSERS_ = {\n  'http://www.opengis.net/gml': {\n    'LineString': makeArrayPusher(GMLBase.prototype.readLineString)\n  }\n};\n\n\n/**\n * @const\n * @type {Object.<string, Object.<string, module:ol/xml~Parser>>}\n * @private\n */\nGMLBase.prototype.POLYGONMEMBER_PARSERS_ = {\n  'http://www.opengis.net/gml': {\n    'Polygon': makeArrayPusher(GMLBase.prototype.readPolygon)\n  }\n};\n\n\n/**\n * @const\n * @type {Object.<string, Object.<string, module:ol/xml~Parser>>}\n * @protected\n */\nGMLBase.prototype.RING_PARSERS = {\n  'http://www.opengis.net/gml': {\n    'LinearRing': makeReplacer(GMLBase.prototype.readFlatLinearRing_)\n  }\n};\n\n\n/**\n * @inheritDoc\n */\nGMLBase.prototype.readGeometryFromNode = function(node, opt_options) {\n  const geometry = this.readGeometryElement(node,\n    [this.getReadOptions(node, opt_options ? opt_options : {})]);\n  return geometry ? geometry : null;\n};\n\n\n/**\n * Read all features from a GML FeatureCollection.\n *\n * @function\n * @param {Document|Node|Object|string} source Source.\n * @param {module:ol/format/Feature~ReadOptions=} opt_options Options.\n * @return {Array.<module:ol/Feature>} Features.\n * @api\n */\nGMLBase.prototype.readFeatures;\n\n\n/**\n * @inheritDoc\n */\nGMLBase.prototype.readFeaturesFromNode = function(node, opt_options) {\n  const options = {\n    featureType: this.featureType,\n    featureNS: this.featureNS\n  };\n  if (opt_options) {\n    assign(options, this.getReadOptions(node, opt_options));\n  }\n  const features = this.readFeaturesInternal(node, [options]);\n  return features || [];\n};\n\n\n/**\n * @inheritDoc\n */\nGMLBase.prototype.readProjectionFromNode = function(node) {\n  return getProjection(this.srsName ? this.srsName : node.firstElementChild.getAttribute('srsName'));\n};\nexport default GMLBase;\n","/**\n * @module ol/Kinetic\n */\n\n/**\n * @classdesc\n * Implementation of inertial deceleration for map movement.\n *\n * @constructor\n * @param {number} decay Rate of decay (must be negative).\n * @param {number} minVelocity Minimum velocity (pixels/millisecond).\n * @param {number} delay Delay to consider to calculate the kinetic\n *     initial values (milliseconds).\n * @struct\n * @api\n */\nconst Kinetic = function(decay, minVelocity, delay) {\n\n  /**\n   * @private\n   * @type {number}\n   */\n  this.decay_ = decay;\n\n  /**\n   * @private\n   * @type {number}\n   */\n  this.minVelocity_ = minVelocity;\n\n  /**\n   * @private\n   * @type {number}\n   */\n  this.delay_ = delay;\n\n  /**\n   * @private\n   * @type {Array.<number>}\n   */\n  this.points_ = [];\n\n  /**\n   * @private\n   * @type {number}\n   */\n  this.angle_ = 0;\n\n  /**\n   * @private\n   * @type {number}\n   */\n  this.initialVelocity_ = 0;\n};\n\n\n/**\n * FIXME empty description for jsdoc\n */\nKinetic.prototype.begin = function() {\n  this.points_.length = 0;\n  this.angle_ = 0;\n  this.initialVelocity_ = 0;\n};\n\n\n/**\n * @param {number} x X.\n * @param {number} y Y.\n */\nKinetic.prototype.update = function(x, y) {\n  this.points_.push(x, y, Date.now());\n};\n\n\n/**\n * @return {boolean} Whether we should do kinetic animation.\n */\nKinetic.prototype.end = function() {\n  if (this.points_.length < 6) {\n    // at least 2 points are required (i.e. there must be at least 6 elements\n    // in the array)\n    return false;\n  }\n  const delay = Date.now() - this.delay_;\n  const lastIndex = this.points_.length - 3;\n  if (this.points_[lastIndex + 2] < delay) {\n    // the last tracked point is too old, which means that the user stopped\n    // panning before releasing the map\n    return false;\n  }\n\n  // get the first point which still falls into the delay time\n  let firstIndex = lastIndex - 3;\n  while (firstIndex > 0 && this.points_[firstIndex + 2] > delay) {\n    firstIndex -= 3;\n  }\n\n  const duration = this.points_[lastIndex + 2] - this.points_[firstIndex + 2];\n  // we don't want a duration of 0 (divide by zero)\n  // we also make sure the user panned for a duration of at least one frame\n  // (1/60s) to compute sane displacement values\n  if (duration < 1000 / 60) {\n    return false;\n  }\n\n  const dx = this.points_[lastIndex] - this.points_[firstIndex];\n  const dy = this.points_[lastIndex + 1] - this.points_[firstIndex + 1];\n  this.angle_ = Math.atan2(dy, dx);\n  this.initialVelocity_ = Math.sqrt(dx * dx + dy * dy) / duration;\n  return this.initialVelocity_ > this.minVelocity_;\n};\n\n\n/**\n * @return {number} Total distance travelled (pixels).\n */\nKinetic.prototype.getDistance = function() {\n  return (this.minVelocity_ - this.initialVelocity_) / this.decay_;\n};\n\n\n/**\n * @return {number} Angle of the kinetic panning animation (radians).\n */\nKinetic.prototype.getAngle = function() {\n  return this.angle_;\n};\nexport default Kinetic;\n","/**\n * @module ol/interaction/DoubleClickZoom\n */\nimport {inherits} from '../util.js';\nimport MapBrowserEventType from '../MapBrowserEventType.js';\nimport Interaction, {zoomByDelta} from '../interaction/Interaction.js';\n\n\n/**\n * @typedef {Object} Options\n * @property {number} [duration=250] Animation duration in milliseconds.\n * @property {number} [delta=1] The zoom delta applied on each double click.\n */\n\n\n/**\n * @classdesc\n * Allows the user to zoom by double-clicking on the map.\n *\n * @constructor\n * @extends {module:ol/interaction/Interaction}\n * @param {module:ol/interaction/DoubleClickZoom~Options=} opt_options Options.\n * @api\n */\nconst DoubleClickZoom = function(opt_options) {\n\n  const options = opt_options ? opt_options : {};\n\n  /**\n   * @private\n   * @type {number}\n   */\n  this.delta_ = options.delta ? options.delta : 1;\n\n  Interaction.call(this, {\n    handleEvent: handleEvent\n  });\n\n  /**\n   * @private\n   * @type {number}\n   */\n  this.duration_ = options.duration !== undefined ? options.duration : 250;\n\n};\n\ninherits(DoubleClickZoom, Interaction);\n\n\n/**\n * Handles the {@link module:ol/MapBrowserEvent map browser event} (if it was a\n * doubleclick) and eventually zooms the map.\n * @param {module:ol/MapBrowserEvent} mapBrowserEvent Map browser event.\n * @return {boolean} `false` to stop event propagation.\n * @this {module:ol/interaction/DoubleClickZoom}\n */\nfunction handleEvent(mapBrowserEvent) {\n  let stopEvent = false;\n  const browserEvent = mapBrowserEvent.originalEvent;\n  if (mapBrowserEvent.type == MapBrowserEventType.DBLCLICK) {\n    const map = mapBrowserEvent.map;\n    const anchor = mapBrowserEvent.coordinate;\n    const delta = browserEvent.shiftKey ? -this.delta_ : this.delta_;\n    const view = map.getView();\n    zoomByDelta(view, delta, anchor, this.duration_);\n    mapBrowserEvent.preventDefault();\n    stopEvent = true;\n  }\n  return !stopEvent;\n}\n\nexport default DoubleClickZoom;\n","/**\n * @module ol/interaction/DragPan\n */\nimport {inherits} from '../util.js';\nimport ViewHint from '../ViewHint.js';\nimport {scale as scaleCoordinate, rotate as rotateCoordinate, add as addCoordinate} from '../coordinate.js';\nimport {easeOut} from '../easing.js';\nimport {noModifierKeys} from '../events/condition.js';\nimport {FALSE} from '../functions.js';\nimport PointerInteraction, {centroid as centroidFromPointers} from '../interaction/Pointer.js';\n\n\n/**\n * @typedef {Object} Options\n * @property {module:ol/events/condition~Condition} [condition] A function that takes an {@link module:ol/MapBrowserEvent~MapBrowserEvent} and returns a boolean\n * to indicate whether that event should be handled.\n * Default is {@link module:ol/events/condition~noModifierKeys}.\n * @property {module:ol/Kinetic} [kinetic] Kinetic inertia to apply to the pan.\n */\n\n\n/**\n * @classdesc\n * Allows the user to pan the map by dragging the map.\n *\n * @constructor\n * @extends {module:ol/interaction/Pointer}\n * @param {module:ol/interaction/DragPan~Options=} opt_options Options.\n * @api\n */\nconst DragPan = function(opt_options) {\n\n  PointerInteraction.call(this, {\n    handleDownEvent: handleDownEvent,\n    handleDragEvent: handleDragEvent,\n    handleUpEvent: handleUpEvent\n  });\n\n  const options = opt_options ? opt_options : {};\n\n  /**\n   * @private\n   * @type {module:ol/Kinetic|undefined}\n   */\n  this.kinetic_ = options.kinetic;\n\n  /**\n   * @type {module:ol~Pixel}\n   */\n  this.lastCentroid = null;\n\n  /**\n   * @type {number}\n   */\n  this.lastPointersCount_;\n\n  /**\n   * @private\n   * @type {module:ol/events/condition~Condition}\n   */\n  this.condition_ = options.condition ? options.condition : noModifierKeys;\n\n  /**\n   * @private\n   * @type {boolean}\n   */\n  this.noKinetic_ = false;\n\n};\n\ninherits(DragPan, PointerInteraction);\n\n\n/**\n * @param {module:ol/MapBrowserPointerEvent} mapBrowserEvent Event.\n * @this {module:ol/interaction/DragPan}\n */\nfunction handleDragEvent(mapBrowserEvent) {\n  const targetPointers = this.targetPointers;\n  const centroid = centroidFromPointers(targetPointers);\n  if (targetPointers.length == this.lastPointersCount_) {\n    if (this.kinetic_) {\n      this.kinetic_.update(centroid[0], centroid[1]);\n    }\n    if (this.lastCentroid) {\n      const deltaX = this.lastCentroid[0] - centroid[0];\n      const deltaY = centroid[1] - this.lastCentroid[1];\n      const map = mapBrowserEvent.map;\n      const view = map.getView();\n      let center = [deltaX, deltaY];\n      scaleCoordinate(center, view.getResolution());\n      rotateCoordinate(center, view.getRotation());\n      addCoordinate(center, view.getCenter());\n      center = view.constrainCenter(center);\n      view.setCenter(center);\n    }\n  } else if (this.kinetic_) {\n    // reset so we don't overestimate the kinetic energy after\n    // after one finger down, tiny drag, second finger down\n    this.kinetic_.begin();\n  }\n  this.lastCentroid = centroid;\n  this.lastPointersCount_ = targetPointers.length;\n}\n\n\n/**\n * @param {module:ol/MapBrowserPointerEvent} mapBrowserEvent Event.\n * @return {boolean} Stop drag sequence?\n * @this {module:ol/interaction/DragPan}\n */\nfunction handleUpEvent(mapBrowserEvent) {\n  const map = mapBrowserEvent.map;\n  const view = map.getView();\n  if (this.targetPointers.length === 0) {\n    if (!this.noKinetic_ && this.kinetic_ && this.kinetic_.end()) {\n      const distance = this.kinetic_.getDistance();\n      const angle = this.kinetic_.getAngle();\n      const center = /** @type {!module:ol/coordinate~Coordinate} */ (view.getCenter());\n      const centerpx = map.getPixelFromCoordinate(center);\n      const dest = map.getCoordinateFromPixel([\n        centerpx[0] - distance * Math.cos(angle),\n        centerpx[1] - distance * Math.sin(angle)\n      ]);\n      view.animate({\n        center: view.constrainCenter(dest),\n        duration: 500,\n        easing: easeOut\n      });\n    }\n    view.setHint(ViewHint.INTERACTING, -1);\n    return false;\n  } else {\n    if (this.kinetic_) {\n      // reset so we don't overestimate the kinetic energy after\n      // after one finger up, tiny drag, second finger up\n      this.kinetic_.begin();\n    }\n    this.lastCentroid = null;\n    return true;\n  }\n}\n\n\n/**\n * @param {module:ol/MapBrowserPointerEvent} mapBrowserEvent Event.\n * @return {boolean} Start drag sequence?\n * @this {module:ol/interaction/DragPan}\n */\nfunction handleDownEvent(mapBrowserEvent) {\n  if (this.targetPointers.length > 0 && this.condition_(mapBrowserEvent)) {\n    const map = mapBrowserEvent.map;\n    const view = map.getView();\n    this.lastCentroid = null;\n    if (!this.handlingDownUpSequence) {\n      view.setHint(ViewHint.INTERACTING, 1);\n    }\n    // stop any current animation\n    if (view.getAnimating()) {\n      view.setCenter(mapBrowserEvent.frameState.viewState.center);\n    }\n    if (this.kinetic_) {\n      this.kinetic_.begin();\n    }\n    // No kinetic as soon as more than one pointer on the screen is\n    // detected. This is to prevent nasty pans after pinch.\n    this.noKinetic_ = this.targetPointers.length > 1;\n    return true;\n  } else {\n    return false;\n  }\n}\n\n\n/**\n * @inheritDoc\n */\nDragPan.prototype.shouldStopEvent = FALSE;\nexport default DragPan;\n","/**\n * @module ol/interaction/DragRotate\n */\nimport {inherits} from '../util.js';\nimport {disable} from '../rotationconstraint.js';\nimport ViewHint from '../ViewHint.js';\nimport {altShiftKeysOnly, mouseOnly, mouseActionButton} from '../events/condition.js';\nimport {FALSE} from '../functions.js';\nimport {rotate, rotateWithoutConstraints} from '../interaction/Interaction.js';\nimport PointerInteraction from '../interaction/Pointer.js';\n\n\n/**\n * @typedef {Object} Options\n * @property {module:ol/events/condition~Condition} [condition] A function that takes an\n * {@link module:ol/MapBrowserEvent~MapBrowserEvent} and returns a boolean\n * to indicate whether that event should be handled.\n * Default is {@link module:ol/events/condition~altShiftKeysOnly}.\n * @property {number} [duration=250] Animation duration in milliseconds.\n */\n\n\n/**\n * @classdesc\n * Allows the user to rotate the map by clicking and dragging on the map,\n * normally combined with an {@link module:ol/events/condition} that limits\n * it to when the alt and shift keys are held down.\n *\n * This interaction is only supported for mouse devices.\n *\n * @constructor\n * @extends {module:ol/interaction/Pointer}\n * @param {module:ol/interaction/DragRotate~Options=} opt_options Options.\n * @api\n */\nconst DragRotate = function(opt_options) {\n\n  const options = opt_options ? opt_options : {};\n\n  PointerInteraction.call(this, {\n    handleDownEvent: handleDownEvent,\n    handleDragEvent: handleDragEvent,\n    handleUpEvent: handleUpEvent\n  });\n\n  /**\n   * @private\n   * @type {module:ol/events/condition~Condition}\n   */\n  this.condition_ = options.condition ? options.condition : altShiftKeysOnly;\n\n  /**\n   * @private\n   * @type {number|undefined}\n   */\n  this.lastAngle_ = undefined;\n\n  /**\n   * @private\n   * @type {number}\n   */\n  this.duration_ = options.duration !== undefined ? options.duration : 250;\n};\n\ninherits(DragRotate, PointerInteraction);\n\n\n/**\n * @param {module:ol/MapBrowserPointerEvent} mapBrowserEvent Event.\n * @this {module:ol/interaction/DragRotate}\n */\nfunction handleDragEvent(mapBrowserEvent) {\n  if (!mouseOnly(mapBrowserEvent)) {\n    return;\n  }\n\n  const map = mapBrowserEvent.map;\n  const view = map.getView();\n  if (view.getConstraints().rotation === disable) {\n    return;\n  }\n  const size = map.getSize();\n  const offset = mapBrowserEvent.pixel;\n  const theta =\n      Math.atan2(size[1] / 2 - offset[1], offset[0] - size[0] / 2);\n  if (this.lastAngle_ !== undefined) {\n    const delta = theta - this.lastAngle_;\n    const rotation = view.getRotation();\n    rotateWithoutConstraints(view, rotation - delta);\n  }\n  this.lastAngle_ = theta;\n}\n\n\n/**\n * @param {module:ol/MapBrowserPointerEvent} mapBrowserEvent Event.\n * @return {boolean} Stop drag sequence?\n * @this {module:ol/interaction/DragRotate}\n */\nfunction handleUpEvent(mapBrowserEvent) {\n  if (!mouseOnly(mapBrowserEvent)) {\n    return true;\n  }\n\n  const map = mapBrowserEvent.map;\n  const view = map.getView();\n  view.setHint(ViewHint.INTERACTING, -1);\n  const rotation = view.getRotation();\n  rotate(view, rotation, undefined, this.duration_);\n  return false;\n}\n\n\n/**\n * @param {module:ol/MapBrowserPointerEvent} mapBrowserEvent Event.\n * @return {boolean} Start drag sequence?\n * @this {module:ol/interaction/DragRotate}\n */\nfunction handleDownEvent(mapBrowserEvent) {\n  if (!mouseOnly(mapBrowserEvent)) {\n    return false;\n  }\n\n  if (mouseActionButton(mapBrowserEvent) && this.condition_(mapBrowserEvent)) {\n    const map = mapBrowserEvent.map;\n    map.getView().setHint(ViewHint.INTERACTING, 1);\n    this.lastAngle_ = undefined;\n    return true;\n  } else {\n    return false;\n  }\n}\n\n\n/**\n * @inheritDoc\n */\nDragRotate.prototype.shouldStopEvent = FALSE;\nexport default DragRotate;\n","/**\n * @module ol/interaction/DragZoom\n */\nimport {inherits} from '../util.js';\nimport {easeOut} from '../easing.js';\nimport {shiftKeyOnly} from '../events/condition.js';\nimport {createOrUpdateFromCoordinates, getBottomLeft, getCenter, getTopRight, scaleFromCenter} from '../extent.js';\nimport DragBox from '../interaction/DragBox.js';\n\n\n/**\n * @typedef {Object} Options\n * @property {string} [className='ol-dragzoom'] CSS class name for styling the\n * box.\n * @property {module:ol/events/condition~Condition} [condition] A function that\n * takes an {@link module:ol/MapBrowserEvent~MapBrowserEvent} and returns a\n * boolean to indicate whether that event should be handled.\n * Default is {@link module:ol/events/condition~shiftKeyOnly}.\n * @property {number} [duration=200] Animation duration in milliseconds.\n * @property {boolean} [out=false] Use interaction for zooming out.\n */\n\n\n/**\n * @classdesc\n * Allows the user to zoom the map by clicking and dragging on the map,\n * normally combined with an {@link module:ol/events/condition} that limits\n * it to when a key, shift by default, is held down.\n *\n * To change the style of the box, use CSS and the `.ol-dragzoom` selector, or\n * your custom one configured with `className`.\n *\n * @constructor\n * @extends {module:ol/interaction/DragBox}\n * @param {module:ol/interaction/DragZoom~Options=} opt_options Options.\n * @api\n */\nconst DragZoom = function(opt_options) {\n  const options = opt_options ? opt_options : {};\n\n  const condition = options.condition ? options.condition : shiftKeyOnly;\n\n  /**\n   * @private\n   * @type {number}\n   */\n  this.duration_ = options.duration !== undefined ? options.duration : 200;\n\n  /**\n   * @private\n   * @type {boolean}\n   */\n  this.out_ = options.out !== undefined ? options.out : false;\n\n  DragBox.call(this, {\n    condition: condition,\n    className: options.className || 'ol-dragzoom'\n  });\n\n};\n\ninherits(DragZoom, DragBox);\n\n\n/**\n * @inheritDoc\n */\nDragZoom.prototype.onBoxEnd = function() {\n  const map = this.getMap();\n\n  const view = /** @type {!module:ol/View} */ (map.getView());\n\n  const size = /** @type {!module:ol/size~Size} */ (map.getSize());\n\n  let extent = this.getGeometry().getExtent();\n\n  if (this.out_) {\n    const mapExtent = view.calculateExtent(size);\n    const boxPixelExtent = createOrUpdateFromCoordinates([\n      map.getPixelFromCoordinate(getBottomLeft(extent)),\n      map.getPixelFromCoordinate(getTopRight(extent))]);\n    const factor = view.getResolutionForExtent(boxPixelExtent, size);\n\n    scaleFromCenter(mapExtent, 1 / factor);\n    extent = mapExtent;\n  }\n\n  const resolution = view.constrainResolution(\n    view.getResolutionForExtent(extent, size));\n\n  let center = getCenter(extent);\n  center = view.constrainCenter(center);\n\n  view.animate({\n    resolution: resolution,\n    center: center,\n    duration: this.duration_,\n    easing: easeOut\n  });\n\n};\nexport default DragZoom;\n","/**\n * @module ol/events/KeyCode\n */\n\n/**\n * @enum {number}\n * @const\n */\nexport default {\n  LEFT: 37,\n  UP: 38,\n  RIGHT: 39,\n  DOWN: 40\n};\n","/**\n * @module ol/interaction/KeyboardPan\n */\nimport {inherits} from '../util.js';\nimport {rotate as rotateCoordinate} from '../coordinate.js';\nimport EventType from '../events/EventType.js';\nimport KeyCode from '../events/KeyCode.js';\nimport {noModifierKeys, targetNotEditable} from '../events/condition.js';\nimport Interaction, {pan} from '../interaction/Interaction.js';\n\n\n/**\n * @typedef {Object} Options\n * @property {module:ol/events/condition~Condition} [condition] A function that\n * takes an {@link module:ol/MapBrowserEvent~MapBrowserEvent} and returns a\n * boolean to indicate whether that event should be handled. Default is\n * {@link module:ol/events/condition~noModifierKeys} and\n * {@link module:ol/events/condition~targetNotEditable}.\n * @property {number} [duration=100] Animation duration in milliseconds.\n * @property {number} [pixelDelta=128] The amount of pixels to pan on each key\n * press.\n */\n\n\n/**\n * @classdesc\n * Allows the user to pan the map using keyboard arrows.\n * Note that, although this interaction is by default included in maps,\n * the keys can only be used when browser focus is on the element to which\n * the keyboard events are attached. By default, this is the map div,\n * though you can change this with the `keyboardEventTarget` in\n * {@link module:ol/Map~Map}. `document` never loses focus but, for any other\n * element, focus will have to be on, and returned to, this element if the keys\n * are to function.\n * See also {@link module:ol/interaction/KeyboardZoom~KeyboardZoom}.\n *\n * @constructor\n * @extends {module:ol/interaction/Interaction}\n * @param {module:ol/interaction/KeyboardPan~Options=} opt_options Options.\n * @api\n */\nconst KeyboardPan = function(opt_options) {\n\n  Interaction.call(this, {\n    handleEvent: handleEvent\n  });\n\n  const options = opt_options || {};\n\n  /**\n   * @private\n   * @param {module:ol/MapBrowserEvent} mapBrowserEvent Browser event.\n   * @return {boolean} Combined condition result.\n   */\n  this.defaultCondition_ = function(mapBrowserEvent) {\n    return noModifierKeys(mapBrowserEvent) &&\n      targetNotEditable(mapBrowserEvent);\n  };\n\n  /**\n   * @private\n   * @type {module:ol/events/condition~Condition}\n   */\n  this.condition_ = options.condition !== undefined ?\n    options.condition : this.defaultCondition_;\n\n  /**\n   * @private\n   * @type {number}\n   */\n  this.duration_ = options.duration !== undefined ? options.duration : 100;\n\n  /**\n   * @private\n   * @type {number}\n   */\n  this.pixelDelta_ = options.pixelDelta !== undefined ?\n    options.pixelDelta : 128;\n\n};\n\ninherits(KeyboardPan, Interaction);\n\n/**\n * Handles the {@link module:ol/MapBrowserEvent map browser event} if it was a\n * `KeyEvent`, and decides the direction to pan to (if an arrow key was\n * pressed).\n * @param {module:ol/MapBrowserEvent} mapBrowserEvent Map browser event.\n * @return {boolean} `false` to stop event propagation.\n * @this {module:ol/interaction/KeyboardPan}\n */\nfunction handleEvent(mapBrowserEvent) {\n  let stopEvent = false;\n  if (mapBrowserEvent.type == EventType.KEYDOWN) {\n    const keyEvent = mapBrowserEvent.originalEvent;\n    const keyCode = keyEvent.keyCode;\n    if (this.condition_(mapBrowserEvent) &&\n        (keyCode == KeyCode.DOWN ||\n        keyCode == KeyCode.LEFT ||\n        keyCode == KeyCode.RIGHT ||\n        keyCode == KeyCode.UP)) {\n      const map = mapBrowserEvent.map;\n      const view = map.getView();\n      const mapUnitsDelta = view.getResolution() * this.pixelDelta_;\n      let deltaX = 0, deltaY = 0;\n      if (keyCode == KeyCode.DOWN) {\n        deltaY = -mapUnitsDelta;\n      } else if (keyCode == KeyCode.LEFT) {\n        deltaX = -mapUnitsDelta;\n      } else if (keyCode == KeyCode.RIGHT) {\n        deltaX = mapUnitsDelta;\n      } else {\n        deltaY = mapUnitsDelta;\n      }\n      const delta = [deltaX, deltaY];\n      rotateCoordinate(delta, view.getRotation());\n      pan(view, delta, this.duration_);\n      mapBrowserEvent.preventDefault();\n      stopEvent = true;\n    }\n  }\n  return !stopEvent;\n}\n\nexport default KeyboardPan;\n","/**\n * @module ol/interaction/KeyboardZoom\n */\nimport {inherits} from '../util.js';\nimport EventType from '../events/EventType.js';\nimport {targetNotEditable} from '../events/condition.js';\nimport Interaction, {zoomByDelta} from '../interaction/Interaction.js';\n\n\n/**\n * @typedef {Object} Options\n * @property {number} [duration=100] Animation duration in milliseconds.\n * @property {module:ol/events/condition~Condition} [condition] A function that\n * takes an {@link module:ol/MapBrowserEvent~MapBrowserEvent} and returns a\n * boolean to indicate whether that event should be handled. Default is\n * {@link module:ol/events/condition~targetNotEditable}.\n * @property {number} [delta=1] The zoom level delta on each key press.\n */\n\n\n/**\n * @classdesc\n * Allows the user to zoom the map using keyboard + and -.\n * Note that, although this interaction is by default included in maps,\n * the keys can only be used when browser focus is on the element to which\n * the keyboard events are attached. By default, this is the map div,\n * though you can change this with the `keyboardEventTarget` in\n * {@link module:ol/Map~Map}. `document` never loses focus but, for any other\n * element, focus will have to be on, and returned to, this element if the keys\n * are to function.\n * See also {@link moudle:ol/interaction/KeyboardPan~KeyboardPan}.\n *\n * @constructor\n * @param {module:ol/interaction/KeyboardZoom~Options=} opt_options Options.\n * @extends {module:ol/interaction/Interaction}\n * @api\n */\nconst KeyboardZoom = function(opt_options) {\n\n  Interaction.call(this, {\n    handleEvent: handleEvent\n  });\n\n  const options = opt_options ? opt_options : {};\n\n  /**\n   * @private\n   * @type {module:ol/events/condition~Condition}\n   */\n  this.condition_ = options.condition ? options.condition : targetNotEditable;\n\n  /**\n   * @private\n   * @type {number}\n   */\n  this.delta_ = options.delta ? options.delta : 1;\n\n  /**\n   * @private\n   * @type {number}\n   */\n  this.duration_ = options.duration !== undefined ? options.duration : 100;\n\n};\n\ninherits(KeyboardZoom, Interaction);\n\n\n/**\n * Handles the {@link module:ol/MapBrowserEvent map browser event} if it was a\n * `KeyEvent`, and decides whether to zoom in or out (depending on whether the\n * key pressed was '+' or '-').\n * @param {module:ol/MapBrowserEvent} mapBrowserEvent Map browser event.\n * @return {boolean} `false` to stop event propagation.\n * @this {module:ol/interaction/KeyboardZoom}\n */\nfunction handleEvent(mapBrowserEvent) {\n  let stopEvent = false;\n  if (mapBrowserEvent.type == EventType.KEYDOWN ||\n      mapBrowserEvent.type == EventType.KEYPRESS) {\n    const keyEvent = mapBrowserEvent.originalEvent;\n    const charCode = keyEvent.charCode;\n    if (this.condition_(mapBrowserEvent) &&\n        (charCode == '+'.charCodeAt(0) || charCode == '-'.charCodeAt(0))) {\n      const map = mapBrowserEvent.map;\n      const delta = (charCode == '+'.charCodeAt(0)) ? this.delta_ : -this.delta_;\n      const view = map.getView();\n      zoomByDelta(view, delta, undefined, this.duration_);\n      mapBrowserEvent.preventDefault();\n      stopEvent = true;\n    }\n  }\n  return !stopEvent;\n}\n\nexport default KeyboardZoom;\n","/**\n * @module ol/interaction/PinchRotate\n */\nimport {inherits} from '../util.js';\nimport ViewHint from '../ViewHint.js';\nimport {FALSE} from '../functions.js';\nimport {rotate, rotateWithoutConstraints} from '../interaction/Interaction.js';\nimport PointerInteraction, {centroid as centroidFromPointers} from '../interaction/Pointer.js';\nimport {disable} from '../rotationconstraint.js';\n\n\n/**\n * @typedef {Object} Options\n * @property {number} [duration=250] The duration of the animation in\n * milliseconds.\n * @property {number} [threshold=0.3] Minimal angle in radians to start a rotation.\n */\n\n\n/**\n * @classdesc\n * Allows the user to rotate the map by twisting with two fingers\n * on a touch screen.\n *\n * @constructor\n * @extends {module:ol/interaction/Pointer}\n * @param {module:ol/interaction/PinchRotate~Options=} opt_options Options.\n * @api\n */\nconst PinchRotate = function(opt_options) {\n\n  PointerInteraction.call(this, {\n    handleDownEvent: handleDownEvent,\n    handleDragEvent: handleDragEvent,\n    handleUpEvent: handleUpEvent\n  });\n\n  const options = opt_options || {};\n\n  /**\n   * @private\n   * @type {module:ol/coordinate~Coordinate}\n   */\n  this.anchor_ = null;\n\n  /**\n   * @private\n   * @type {number|undefined}\n   */\n  this.lastAngle_ = undefined;\n\n  /**\n   * @private\n   * @type {boolean}\n   */\n  this.rotating_ = false;\n\n  /**\n   * @private\n   * @type {number}\n   */\n  this.rotationDelta_ = 0.0;\n\n  /**\n   * @private\n   * @type {number}\n   */\n  this.threshold_ = options.threshold !== undefined ? options.threshold : 0.3;\n\n  /**\n   * @private\n   * @type {number}\n   */\n  this.duration_ = options.duration !== undefined ? options.duration : 250;\n\n};\n\ninherits(PinchRotate, PointerInteraction);\n\n\n/**\n * @param {module:ol/MapBrowserPointerEvent} mapBrowserEvent Event.\n * @this {module:ol/interaction/PinchRotate}\n */\nfunction handleDragEvent(mapBrowserEvent) {\n  let rotationDelta = 0.0;\n\n  const touch0 = this.targetPointers[0];\n  const touch1 = this.targetPointers[1];\n\n  // angle between touches\n  const angle = Math.atan2(\n    touch1.clientY - touch0.clientY,\n    touch1.clientX - touch0.clientX);\n\n  if (this.lastAngle_ !== undefined) {\n    const delta = angle - this.lastAngle_;\n    this.rotationDelta_ += delta;\n    if (!this.rotating_ &&\n        Math.abs(this.rotationDelta_) > this.threshold_) {\n      this.rotating_ = true;\n    }\n    rotationDelta = delta;\n  }\n  this.lastAngle_ = angle;\n\n  const map = mapBrowserEvent.map;\n  const view = map.getView();\n  if (view.getConstraints().rotation === disable) {\n    return;\n  }\n\n  // rotate anchor point.\n  // FIXME: should be the intersection point between the lines:\n  //     touch0,touch1 and previousTouch0,previousTouch1\n  const viewportPosition = map.getViewport().getBoundingClientRect();\n  const centroid = centroidFromPointers(this.targetPointers);\n  centroid[0] -= viewportPosition.left;\n  centroid[1] -= viewportPosition.top;\n  this.anchor_ = map.getCoordinateFromPixel(centroid);\n\n  // rotate\n  if (this.rotating_) {\n    const rotation = view.getRotation();\n    map.render();\n    rotateWithoutConstraints(view, rotation + rotationDelta, this.anchor_);\n  }\n}\n\n\n/**\n * @param {module:ol/MapBrowserPointerEvent} mapBrowserEvent Event.\n * @return {boolean} Stop drag sequence?\n * @this {module:ol/interaction/PinchRotate}\n */\nfunction handleUpEvent(mapBrowserEvent) {\n  if (this.targetPointers.length < 2) {\n    const map = mapBrowserEvent.map;\n    const view = map.getView();\n    view.setHint(ViewHint.INTERACTING, -1);\n    if (this.rotating_) {\n      const rotation = view.getRotation();\n      rotate(view, rotation, this.anchor_, this.duration_);\n    }\n    return false;\n  } else {\n    return true;\n  }\n}\n\n\n/**\n * @param {module:ol/MapBrowserPointerEvent} mapBrowserEvent Event.\n * @return {boolean} Start drag sequence?\n * @this {module:ol/interaction/PinchRotate}\n */\nfunction handleDownEvent(mapBrowserEvent) {\n  if (this.targetPointers.length >= 2) {\n    const map = mapBrowserEvent.map;\n    this.anchor_ = null;\n    this.lastAngle_ = undefined;\n    this.rotating_ = false;\n    this.rotationDelta_ = 0.0;\n    if (!this.handlingDownUpSequence) {\n      map.getView().setHint(ViewHint.INTERACTING, 1);\n    }\n    return true;\n  } else {\n    return false;\n  }\n}\n\n\n/**\n * @inheritDoc\n */\nPinchRotate.prototype.shouldStopEvent = FALSE;\n\nexport default PinchRotate;\n","/**\n * @module ol/interaction\n */\nimport Collection from './Collection.js';\nimport Kinetic from './Kinetic.js';\nimport DoubleClickZoom from './interaction/DoubleClickZoom.js';\nimport DragPan from './interaction/DragPan.js';\nimport DragRotate from './interaction/DragRotate.js';\nimport DragZoom from './interaction/DragZoom.js';\nimport KeyboardPan from './interaction/KeyboardPan.js';\nimport KeyboardZoom from './interaction/KeyboardZoom.js';\nimport MouseWheelZoom from './interaction/MouseWheelZoom.js';\nimport PinchRotate from './interaction/PinchRotate.js';\nimport PinchZoom from './interaction/PinchZoom.js';\n\nexport {default as DoubleClickZoom} from './interaction/DoubleClickZoom.js';\nexport {default as DragAndDrop} from './interaction/DragAndDrop.js';\nexport {default as DragBox} from './interaction/DragBox.js';\nexport {default as DragPan} from './interaction/DragPan.js';\nexport {default as DragRotate} from './interaction/DragRotate.js';\nexport {default as DragRotateAndZoom} from './interaction/DragRotateAndZoom.js';\nexport {default as DragZoom} from './interaction/DragZoom.js';\nexport {default as Draw} from './interaction/Draw.js';\nexport {default as Extent} from './interaction/Extent.js';\nexport {default as Interaction} from './interaction/Interaction.js';\nexport {default as KeyboardPan} from './interaction/KeyboardPan.js';\nexport {default as KeyboardZoom} from './interaction/KeyboardZoom.js';\nexport {default as Modify} from './interaction/Modify.js';\nexport {default as MouseWheelZoom} from './interaction/MouseWheelZoom.js';\nexport {default as PinchRotate} from './interaction/PinchRotate.js';\nexport {default as PinchZoom} from './interaction/PinchZoom.js';\nexport {default as Pointer} from './interaction/Pointer.js';\nexport {default as Select} from './interaction/Select.js';\nexport {default as Snap} from './interaction/Snap.js';\nexport {default as Translate} from './interaction/Translate.js';\n\n\n/**\n * @typedef {Object} DefaultsOptions\n * @property {boolean} [altShiftDragRotate=true] Whether Alt-Shift-drag rotate is\n * desired.\n * @property {boolean} [constrainResolution=false] Zoom to the closest integer\n * zoom level after the wheel/trackpad or pinch gesture ends.\n * @property {boolean} [doubleClickZoom=true] Whether double click zoom is\n * desired.\n * @property {boolean} [keyboard=true] Whether keyboard interaction is desired.\n * @property {boolean} [mouseWheelZoom=true] Whether mousewheel zoom is desired.\n * @property {boolean} [shiftDragZoom=true] Whether Shift-drag zoom is desired.\n * @property {boolean} [dragPan=true] Whether drag pan is desired.\n * @property {boolean} [pinchRotate=true] Whether pinch rotate is desired.\n * @property {boolean} [pinchZoom=true] Whether pinch zoom is desired.\n * @property {number} [zoomDelta] Zoom level delta when using keyboard or\n * mousewheel zoom.\n * @property {number} [zoomDuration] Duration of the zoom animation in\n * milliseconds.\n */\n\n\n/**\n * Set of interactions included in maps by default. Specific interactions can be\n * excluded by setting the appropriate option to false in the constructor\n * options, but the order of the interactions is fixed.  If you want to specify\n * a different order for interactions, you will need to create your own\n * {@link module:ol/interaction/Interaction} instances and insert\n * them into a {@link module:ol/Collection} in the order you want\n * before creating your {@link module:ol/Map~Map} instance. The default set of\n * interactions, in sequence, is:\n * * {@link module:ol/interaction/DragRotate~DragRotate}\n * * {@link module:ol/interaction/DoubleClickZoom~DoubleClickZoom}\n * * {@link module:ol/interaction/DragPan~DragPan}\n * * {@link module:ol/interaction/PinchRotate~PinchRotate}\n * * {@link module:ol/interaction/PinchZoom~PinchZoom}\n * * {@link module:ol/interaction/KeyboardPan~KeyboardPan}\n * * {@link module:ol/interaction/KeyboardZoom~KeyboardZoom}\n * * {@link module:ol/interaction/MouseWheelZoom~MouseWheelZoom}\n * * {@link module:ol/interaction/DragZoom~DragZoom}\n *\n * @param {module:ol/interaction/Interaction~DefaultsOptions=} opt_options\n * Defaults options.\n * @return {module:ol/Collection.<module:ol/interaction/Interaction>}\n * A collection of interactions to be used with the {@link module:ol/Map~Map}\n * constructor's `interactions` option.\n * @api\n */\nexport function defaults(opt_options) {\n\n  const options = opt_options ? opt_options : {};\n\n  const interactions = new Collection();\n\n  const kinetic = new Kinetic(-0.005, 0.05, 100);\n\n  const altShiftDragRotate = options.altShiftDragRotate !== undefined ?\n    options.altShiftDragRotate : true;\n  if (altShiftDragRotate) {\n    interactions.push(new DragRotate());\n  }\n\n  const doubleClickZoom = options.doubleClickZoom !== undefined ?\n    options.doubleClickZoom : true;\n  if (doubleClickZoom) {\n    interactions.push(new DoubleClickZoom({\n      delta: options.zoomDelta,\n      duration: options.zoomDuration\n    }));\n  }\n\n  const dragPan = options.dragPan !== undefined ? options.dragPan : true;\n  if (dragPan) {\n    interactions.push(new DragPan({\n      kinetic: kinetic\n    }));\n  }\n\n  const pinchRotate = options.pinchRotate !== undefined ? options.pinchRotate :\n    true;\n  if (pinchRotate) {\n    interactions.push(new PinchRotate());\n  }\n\n  const pinchZoom = options.pinchZoom !== undefined ? options.pinchZoom : true;\n  if (pinchZoom) {\n    interactions.push(new PinchZoom({\n      constrainResolution: options.constrainResolution,\n      duration: options.zoomDuration\n    }));\n  }\n\n  const keyboard = options.keyboard !== undefined ? options.keyboard : true;\n  if (keyboard) {\n    interactions.push(new KeyboardPan());\n    interactions.push(new KeyboardZoom({\n      delta: options.zoomDelta,\n      duration: options.zoomDuration\n    }));\n  }\n\n  const mouseWheelZoom = options.mouseWheelZoom !== undefined ?\n    options.mouseWheelZoom : true;\n  if (mouseWheelZoom) {\n    interactions.push(new MouseWheelZoom({\n      constrainResolution: options.constrainResolution,\n      duration: options.zoomDuration\n    }));\n  }\n\n  const shiftDragZoom = options.shiftDragZoom !== undefined ?\n    options.shiftDragZoom : true;\n  if (shiftDragZoom) {\n    interactions.push(new DragZoom({\n      duration: options.zoomDuration\n    }));\n  }\n\n  return interactions;\n\n}\n","/**\n * @module ol/source/XYZ\n */\nimport {inherits} from '../util.js';\nimport TileImage from '../source/TileImage.js';\nimport {createXYZ, extentFromProjection} from '../tilegrid.js';\n\n/**\n * @typedef {Object} Options\n * @property {module:ol/source/Source~AttributionLike} [attributions] Attributions.\n * @property {number} [cacheSize=2048] Cache size.\n * @property {null|string} [crossOrigin] The `crossOrigin` attribute for loaded images.  Note that\n * you must provide a `crossOrigin` value if you are using the WebGL renderer or if you want to\n * access pixel data with the Canvas renderer.  See\n * {@link https://developer.mozilla.org/en-US/docs/Web/HTML/CORS_enabled_image} for more detail.\n * @property {boolean} [opaque=true] Whether the layer is opaque.\n * @property {module:ol/proj~ProjectionLike} [projection='EPSG:3857'] Projection.\n * @property {boolean} [reprojectionErrorThreshold=0.5] Maximum allowed reprojection error (in pixels).\n * Higher values can increase reprojection performance, but decrease precision.\n * @property {number} [maxZoom=18] Optional max zoom level.\n * @property {number} [minZoom=0] Optional min zoom level.\n * @property {module:ol/tilegrid/TileGrid} [tileGrid] Tile grid.\n * @property {module:ol/Tile~LoadFunction} [tileLoadFunction] Optional function to load a tile given a URL. The default is\n * ```js\n * function(imageTile, src) {\n *   imageTile.getImage().src = src;\n * };\n * ```\n * @property {number} [tilePixelRatio=1] The pixel ratio used by the tile service.\n * For example, if the tile service advertizes 256px by 256px tiles but actually sends 512px\n * by 512px images (for retina/hidpi devices) then `tilePixelRatio`\n * should be set to `2`.\n * @property {number|module:ol/size~Size} [tileSize=[256, 256]] The tile size used by the tile service.\n * @property {module:ol/Tile~UrlFunction} [tileUrlFunction] Optional function to get\n * tile URL given a tile coordinate and the projection.\n * Required if url or urls are not provided.\n * @property {string} [url] URL template. Must include `{x}`, `{y}` or `{-y}`,\n * and `{z}` placeholders. A `{?-?}` template pattern, for example `subdomain{a-f}.domain.com`,\n * may be used instead of defining each one separately in the `urls` option.\n * @property {Array.<string>} [urls] An array of URL templates.\n * @property {boolean} [wrapX=true] Whether to wrap the world horizontally.\n * @property {number} [transition] Duration of the opacity transition for rendering.\n * To disable the opacity transition, pass `transition: 0`.\n */\n\n\n/**\n * @classdesc\n * Layer source for tile data with URLs in a set XYZ format that are\n * defined in a URL template. By default, this follows the widely-used\n * Google grid where `x` 0 and `y` 0 are in the top left. Grids like\n * TMS where `x` 0 and `y` 0 are in the bottom left can be used by\n * using the `{-y}` placeholder in the URL template, so long as the\n * source does not have a custom tile grid. In this case,\n * {@link module:ol/source/TileImage} can be used with a `tileUrlFunction`\n * such as:\n *\n *  tileUrlFunction: function(coordinate) {\n *    return 'http://mapserver.com/' + coordinate[0] + '/' +\n *        coordinate[1] + '/' + coordinate[2] + '.png';\n *    }\n *\n *\n * @constructor\n * @extends {module:ol/source/TileImage}\n * @param {module:ol/source/XYZ~Options=} opt_options XYZ options.\n * @api\n */\nconst XYZ = function(opt_options) {\n  const options = opt_options || {};\n  const projection = options.projection !== undefined ?\n    options.projection : 'EPSG:3857';\n\n  const tileGrid = options.tileGrid !== undefined ? options.tileGrid :\n    createXYZ({\n      extent: extentFromProjection(projection),\n      maxZoom: options.maxZoom,\n      minZoom: options.minZoom,\n      tileSize: options.tileSize\n    });\n\n  TileImage.call(this, {\n    attributions: options.attributions,\n    cacheSize: options.cacheSize,\n    crossOrigin: options.crossOrigin,\n    opaque: options.opaque,\n    projection: projection,\n    reprojectionErrorThreshold: options.reprojectionErrorThreshold,\n    tileGrid: tileGrid,\n    tileLoadFunction: options.tileLoadFunction,\n    tilePixelRatio: options.tilePixelRatio,\n    tileUrlFunction: options.tileUrlFunction,\n    url: options.url,\n    urls: options.urls,\n    wrapX: options.wrapX !== undefined ? options.wrapX : true,\n    transition: options.transition\n  });\n\n};\n\ninherits(XYZ, TileImage);\nexport default XYZ;\n","/**\n * @module ol/control/Control\n */\nimport {inherits} from '../util.js';\nimport {UNDEFINED} from '../functions.js';\nimport MapEventType from '../MapEventType.js';\nimport BaseObject from '../Object.js';\nimport {removeNode} from '../dom.js';\nimport {listen, unlistenByKey} from '../events.js';\n\n\n/**\n * @typedef {Object} Options\n * @property {Element} [element] The element is the control's\n * container element. This only needs to be specified if you're developing\n * a custom control.\n * @property {function(module:ol/MapEvent)} [render] Function called when\n * the control should be re-rendered. This is called in a `requestAnimationFrame`\n * callback.\n * @property {Element|string} [target] Specify a target if you want\n * the control to be rendered outside of the map's viewport.\n */\n\n\n/**\n * @classdesc\n * A control is a visible widget with a DOM element in a fixed position on the\n * screen. They can involve user input (buttons), or be informational only;\n * the position is determined using CSS. By default these are placed in the\n * container with CSS class name `ol-overlaycontainer-stopevent`, but can use\n * any outside DOM element.\n *\n * This is the base class for controls. You can use it for simple custom\n * controls by creating the element with listeners, creating an instance:\n * ```js\n * var myControl = new Control({element: myElement});\n * ```\n * and then adding this to the map.\n *\n * The main advantage of having this as a control rather than a simple separate\n * DOM element is that preventing propagation is handled for you. Controls\n * will also be objects in a {@link module:ol/Collection~Collection}, so you can use their methods.\n *\n * You can also extend this base for your own control class. See\n * examples/custom-controls for an example of how to do this.\n *\n * @constructor\n * @extends {module:ol/Object}\n * @param {module:ol/control/Control~Options} options Control options.\n * @api\n */\nconst Control = function(options) {\n\n  BaseObject.call(this);\n\n  /**\n   * @protected\n   * @type {Element}\n   */\n  this.element = options.element ? options.element : null;\n\n  /**\n   * @private\n   * @type {Element}\n   */\n  this.target_ = null;\n\n  /**\n   * @private\n   * @type {module:ol/PluggableMap}\n   */\n  this.map_ = null;\n\n  /**\n   * @protected\n   * @type {!Array.<module:ol/events~EventsKey>}\n   */\n  this.listenerKeys = [];\n\n  /**\n   * @type {function(module:ol/MapEvent)}\n   */\n  this.render = options.render ? options.render : UNDEFINED;\n\n  if (options.target) {\n    this.setTarget(options.target);\n  }\n\n};\n\ninherits(Control, BaseObject);\n\n\n/**\n * @inheritDoc\n */\nControl.prototype.disposeInternal = function() {\n  removeNode(this.element);\n  BaseObject.prototype.disposeInternal.call(this);\n};\n\n\n/**\n * Get the map associated with this control.\n * @return {module:ol/PluggableMap} Map.\n * @api\n */\nControl.prototype.getMap = function() {\n  return this.map_;\n};\n\n\n/**\n * Remove the control from its current map and attach it to the new map.\n * Subclasses may set up event handlers to get notified about changes to\n * the map here.\n * @param {module:ol/PluggableMap} map Map.\n * @api\n */\nControl.prototype.setMap = function(map) {\n  if (this.map_) {\n    removeNode(this.element);\n  }\n  for (let i = 0, ii = this.listenerKeys.length; i < ii; ++i) {\n    unlistenByKey(this.listenerKeys[i]);\n  }\n  this.listenerKeys.length = 0;\n  this.map_ = map;\n  if (this.map_) {\n    const target = this.target_ ?\n      this.target_ : map.getOverlayContainerStopEvent();\n    target.appendChild(this.element);\n    if (this.render !== UNDEFINED) {\n      this.listenerKeys.push(listen(map,\n        MapEventType.POSTRENDER, this.render, this));\n    }\n    map.render();\n  }\n};\n\n\n/**\n * This function is used to set a target element for the control. It has no\n * effect if it is called after the control has been added to the map (i.e.\n * after `setMap` is called on the control). If no `target` is set in the\n * options passed to the control constructor and if `setTarget` is not called\n * then the control is added to the map's overlay container.\n * @param {Element|string} target Target.\n * @api\n */\nControl.prototype.setTarget = function(target) {\n  this.target_ = typeof target === 'string' ?\n    document.getElementById(target) :\n    target;\n};\nexport default Control;\n","/**\n * @module ol/Collection\n */\nimport {inherits} from './util.js';\nimport AssertionError from './AssertionError.js';\nimport CollectionEventType from './CollectionEventType.js';\nimport BaseObject from './Object.js';\nimport Event from './events/Event.js';\n\n\n/**\n * @enum {string}\n * @private\n */\nconst Property = {\n  LENGTH: 'length'\n};\n\n\n/**\n * @classdesc\n * Events emitted by {@link module:ol/Collection~Collection} instances are instances of this\n * type.\n *\n * @constructor\n * @extends {module:ol/events/Event}\n * @param {module:ol/CollectionEventType} type Type.\n * @param {*=} opt_element Element.\n */\nexport const CollectionEvent = function(type, opt_element) {\n\n  Event.call(this, type);\n\n  /**\n   * The element that is added to or removed from the collection.\n   * @type {*}\n   * @api\n   */\n  this.element = opt_element;\n\n};\n\ninherits(CollectionEvent, Event);\n\n\n/**\n * @typedef {Object} Options\n * @property {boolean} [unique=false] Disallow the same item from being added to\n * the collection twice.\n */\n\n/**\n * @classdesc\n * An expanded version of standard JS Array, adding convenience methods for\n * manipulation. Add and remove changes to the Collection trigger a Collection\n * event. Note that this does not cover changes to the objects _within_ the\n * Collection; they trigger events on the appropriate object, not on the\n * Collection as a whole.\n *\n * @constructor\n * @extends {module:ol/Object}\n * @fires module:ol/Collection~CollectionEvent\n * @param {Array.<T>=} opt_array Array.\n * @param {module:ol/Collection~Options=} opt_options Collection options.\n * @template T\n * @api\n */\nconst Collection = function(opt_array, opt_options) {\n\n  BaseObject.call(this);\n\n  const options = opt_options || {};\n\n  /**\n   * @private\n   * @type {boolean}\n   */\n  this.unique_ = !!options.unique;\n\n  /**\n   * @private\n   * @type {!Array.<T>}\n   */\n  this.array_ = opt_array ? opt_array : [];\n\n  if (this.unique_) {\n    for (let i = 0, ii = this.array_.length; i < ii; ++i) {\n      this.assertUnique_(this.array_[i], i);\n    }\n  }\n\n  this.updateLength_();\n\n};\n\ninherits(Collection, BaseObject);\n\n\n/**\n * Remove all elements from the collection.\n * @api\n */\nCollection.prototype.clear = function() {\n  while (this.getLength() > 0) {\n    this.pop();\n  }\n};\n\n\n/**\n * Add elements to the collection.  This pushes each item in the provided array\n * to the end of the collection.\n * @param {!Array.<T>} arr Array.\n * @return {module:ol/Collection.<T>} This collection.\n * @api\n */\nCollection.prototype.extend = function(arr) {\n  for (let i = 0, ii = arr.length; i < ii; ++i) {\n    this.push(arr[i]);\n  }\n  return this;\n};\n\n\n/**\n * Iterate over each element, calling the provided callback.\n * @param {function(T, number, Array.<T>): *} f The function to call\n *     for every element. This function takes 3 arguments (the element, the\n *     index and the array). The return value is ignored.\n * @api\n */\nCollection.prototype.forEach = function(f) {\n  const array = this.array_;\n  for (let i = 0, ii = array.length; i < ii; ++i) {\n    f(array[i], i, array);\n  }\n};\n\n\n/**\n * Get a reference to the underlying Array object. Warning: if the array\n * is mutated, no events will be dispatched by the collection, and the\n * collection's \"length\" property won't be in sync with the actual length\n * of the array.\n * @return {!Array.<T>} Array.\n * @api\n */\nCollection.prototype.getArray = function() {\n  return this.array_;\n};\n\n\n/**\n * Get the element at the provided index.\n * @param {number} index Index.\n * @return {T} Element.\n * @api\n */\nCollection.prototype.item = function(index) {\n  return this.array_[index];\n};\n\n\n/**\n * Get the length of this collection.\n * @return {number} The length of the array.\n * @observable\n * @api\n */\nCollection.prototype.getLength = function() {\n  return /** @type {number} */ (this.get(Property.LENGTH));\n};\n\n\n/**\n * Insert an element at the provided index.\n * @param {number} index Index.\n * @param {T} elem Element.\n * @api\n */\nCollection.prototype.insertAt = function(index, elem) {\n  if (this.unique_) {\n    this.assertUnique_(elem);\n  }\n  this.array_.splice(index, 0, elem);\n  this.updateLength_();\n  this.dispatchEvent(\n    new CollectionEvent(CollectionEventType.ADD, elem));\n};\n\n\n/**\n * Remove the last element of the collection and return it.\n * Return `undefined` if the collection is empty.\n * @return {T|undefined} Element.\n * @api\n */\nCollection.prototype.pop = function() {\n  return this.removeAt(this.getLength() - 1);\n};\n\n\n/**\n * Insert the provided element at the end of the collection.\n * @param {T} elem Element.\n * @return {number} New length of the collection.\n * @api\n */\nCollection.prototype.push = function(elem) {\n  if (this.unique_) {\n    this.assertUnique_(elem);\n  }\n  const n = this.getLength();\n  this.insertAt(n, elem);\n  return this.getLength();\n};\n\n\n/**\n * Remove the first occurrence of an element from the collection.\n * @param {T} elem Element.\n * @return {T|undefined} The removed element or undefined if none found.\n * @api\n */\nCollection.prototype.remove = function(elem) {\n  const arr = this.array_;\n  for (let i = 0, ii = arr.length; i < ii; ++i) {\n    if (arr[i] === elem) {\n      return this.removeAt(i);\n    }\n  }\n  return undefined;\n};\n\n\n/**\n * Remove the element at the provided index and return it.\n * Return `undefined` if the collection does not contain this index.\n * @param {number} index Index.\n * @return {T|undefined} Value.\n * @api\n */\nCollection.prototype.removeAt = function(index) {\n  const prev = this.array_[index];\n  this.array_.splice(index, 1);\n  this.updateLength_();\n  this.dispatchEvent(new CollectionEvent(CollectionEventType.REMOVE, prev));\n  return prev;\n};\n\n\n/**\n * Set the element at the provided index.\n * @param {number} index Index.\n * @param {T} elem Element.\n * @api\n */\nCollection.prototype.setAt = function(index, elem) {\n  const n = this.getLength();\n  if (index < n) {\n    if (this.unique_) {\n      this.assertUnique_(elem, index);\n    }\n    const prev = this.array_[index];\n    this.array_[index] = elem;\n    this.dispatchEvent(\n      new CollectionEvent(CollectionEventType.REMOVE, prev));\n    this.dispatchEvent(\n      new CollectionEvent(CollectionEventType.ADD, elem));\n  } else {\n    for (let j = n; j < index; ++j) {\n      this.insertAt(j, undefined);\n    }\n    this.insertAt(index, elem);\n  }\n};\n\n\n/**\n * @private\n */\nCollection.prototype.updateLength_ = function() {\n  this.set(Property.LENGTH, this.array_.length);\n};\n\n\n/**\n * @private\n * @param {T} elem Element.\n * @param {number=} opt_except Optional index to ignore.\n */\nCollection.prototype.assertUnique_ = function(elem, opt_except) {\n  for (let i = 0, ii = this.array_.length; i < ii; ++i) {\n    if (this.array_[i] === elem && i !== opt_except) {\n      throw new AssertionError(58);\n    }\n  }\n};\n\nexport default Collection;\n","/**\n * @module ol/geom/SimpleGeometry\n */\nimport {inherits} from '../util.js';\nimport {FALSE} from '../functions.js';\nimport {createOrUpdateFromFlatCoordinates, getCenter} from '../extent.js';\nimport Geometry from '../geom/Geometry.js';\nimport GeometryLayout from '../geom/GeometryLayout.js';\nimport {rotate, scale, translate, transform2D} from '../geom/flat/transform.js';\nimport {clear} from '../obj.js';\n\n/**\n * @classdesc\n * Abstract base class; only used for creating subclasses; do not instantiate\n * in apps, as cannot be rendered.\n *\n * @constructor\n * @abstract\n * @extends {module:ol/geom/Geometry}\n * @api\n */\nconst SimpleGeometry = function() {\n\n  Geometry.call(this);\n\n  /**\n   * @protected\n   * @type {module:ol/geom/GeometryLayout}\n   */\n  this.layout = GeometryLayout.XY;\n\n  /**\n   * @protected\n   * @type {number}\n   */\n  this.stride = 2;\n\n  /**\n   * @protected\n   * @type {Array.<number>}\n   */\n  this.flatCoordinates = null;\n\n};\n\ninherits(SimpleGeometry, Geometry);\n\n\n/**\n * @param {number} stride Stride.\n * @return {module:ol/geom/GeometryLayout} layout Layout.\n */\nfunction getLayoutForStride(stride) {\n  let layout;\n  if (stride == 2) {\n    layout = GeometryLayout.XY;\n  } else if (stride == 3) {\n    layout = GeometryLayout.XYZ;\n  } else if (stride == 4) {\n    layout = GeometryLayout.XYZM;\n  }\n  return (\n    /** @type {module:ol/geom/GeometryLayout} */ (layout)\n  );\n}\n\n\n/**\n * @param {module:ol/geom/GeometryLayout} layout Layout.\n * @return {number} Stride.\n */\nexport function getStrideForLayout(layout) {\n  let stride;\n  if (layout == GeometryLayout.XY) {\n    stride = 2;\n  } else if (layout == GeometryLayout.XYZ || layout == GeometryLayout.XYM) {\n    stride = 3;\n  } else if (layout == GeometryLayout.XYZM) {\n    stride = 4;\n  }\n  return /** @type {number} */ (stride);\n}\n\n\n/**\n * @inheritDoc\n */\nSimpleGeometry.prototype.containsXY = FALSE;\n\n\n/**\n * @inheritDoc\n */\nSimpleGeometry.prototype.computeExtent = function(extent) {\n  return createOrUpdateFromFlatCoordinates(this.flatCoordinates,\n    0, this.flatCoordinates.length, this.stride, extent);\n};\n\n\n/**\n * @abstract\n * @return {Array} Coordinates.\n */\nSimpleGeometry.prototype.getCoordinates = function() {};\n\n\n/**\n * Return the first coordinate of the geometry.\n * @return {module:ol/coordinate~Coordinate} First coordinate.\n * @api\n */\nSimpleGeometry.prototype.getFirstCoordinate = function() {\n  return this.flatCoordinates.slice(0, this.stride);\n};\n\n\n/**\n * @return {Array.<number>} Flat coordinates.\n */\nSimpleGeometry.prototype.getFlatCoordinates = function() {\n  return this.flatCoordinates;\n};\n\n\n/**\n * Return the last coordinate of the geometry.\n * @return {module:ol/coordinate~Coordinate} Last point.\n * @api\n */\nSimpleGeometry.prototype.getLastCoordinate = function() {\n  return this.flatCoordinates.slice(this.flatCoordinates.length - this.stride);\n};\n\n\n/**\n * Return the {@link module:ol/geom/GeometryLayout~GeometryLayout layout} of the geometry.\n * @return {module:ol/geom/GeometryLayout} Layout.\n * @api\n */\nSimpleGeometry.prototype.getLayout = function() {\n  return this.layout;\n};\n\n\n/**\n * @inheritDoc\n */\nSimpleGeometry.prototype.getSimplifiedGeometry = function(squaredTolerance) {\n  if (this.simplifiedGeometryRevision != this.getRevision()) {\n    clear(this.simplifiedGeometryCache);\n    this.simplifiedGeometryMaxMinSquaredTolerance = 0;\n    this.simplifiedGeometryRevision = this.getRevision();\n  }\n  // If squaredTolerance is negative or if we know that simplification will not\n  // have any effect then just return this.\n  if (squaredTolerance < 0 ||\n      (this.simplifiedGeometryMaxMinSquaredTolerance !== 0 &&\n       squaredTolerance <= this.simplifiedGeometryMaxMinSquaredTolerance)) {\n    return this;\n  }\n  const key = squaredTolerance.toString();\n  if (this.simplifiedGeometryCache.hasOwnProperty(key)) {\n    return this.simplifiedGeometryCache[key];\n  } else {\n    const simplifiedGeometry =\n        this.getSimplifiedGeometryInternal(squaredTolerance);\n    const simplifiedFlatCoordinates = simplifiedGeometry.getFlatCoordinates();\n    if (simplifiedFlatCoordinates.length < this.flatCoordinates.length) {\n      this.simplifiedGeometryCache[key] = simplifiedGeometry;\n      return simplifiedGeometry;\n    } else {\n      // Simplification did not actually remove any coordinates.  We now know\n      // that any calls to getSimplifiedGeometry with a squaredTolerance less\n      // than or equal to the current squaredTolerance will also not have any\n      // effect.  This allows us to short circuit simplification (saving CPU\n      // cycles) and prevents the cache of simplified geometries from filling\n      // up with useless identical copies of this geometry (saving memory).\n      this.simplifiedGeometryMaxMinSquaredTolerance = squaredTolerance;\n      return this;\n    }\n  }\n};\n\n\n/**\n * @param {number} squaredTolerance Squared tolerance.\n * @return {module:ol/geom/SimpleGeometry} Simplified geometry.\n * @protected\n */\nSimpleGeometry.prototype.getSimplifiedGeometryInternal = function(squaredTolerance) {\n  return this;\n};\n\n\n/**\n * @return {number} Stride.\n */\nSimpleGeometry.prototype.getStride = function() {\n  return this.stride;\n};\n\n\n/**\n * @param {module:ol/geom/GeometryLayout} layout Layout.\n * @param {Array.<number>} flatCoordinates Flat coordinates.\n * @protected\n */\nSimpleGeometry.prototype.setFlatCoordinatesInternal = function(layout, flatCoordinates) {\n  this.stride = getStrideForLayout(layout);\n  this.layout = layout;\n  this.flatCoordinates = flatCoordinates;\n};\n\n\n/**\n * @abstract\n * @param {Array} coordinates Coordinates.\n * @param {module:ol/geom/GeometryLayout=} opt_layout Layout.\n */\nSimpleGeometry.prototype.setCoordinates = function(coordinates, opt_layout) {};\n\n\n/**\n * @param {module:ol/geom/GeometryLayout|undefined} layout Layout.\n * @param {Array} coordinates Coordinates.\n * @param {number} nesting Nesting.\n * @protected\n */\nSimpleGeometry.prototype.setLayout = function(layout, coordinates, nesting) {\n  /** @type {number} */\n  let stride;\n  if (layout) {\n    stride = getStrideForLayout(layout);\n  } else {\n    for (let i = 0; i < nesting; ++i) {\n      if (coordinates.length === 0) {\n        this.layout = GeometryLayout.XY;\n        this.stride = 2;\n        return;\n      } else {\n        coordinates = /** @type {Array} */ (coordinates[0]);\n      }\n    }\n    stride = coordinates.length;\n    layout = getLayoutForStride(stride);\n  }\n  this.layout = layout;\n  this.stride = stride;\n};\n\n\n/**\n * @inheritDoc\n * @api\n */\nSimpleGeometry.prototype.applyTransform = function(transformFn) {\n  if (this.flatCoordinates) {\n    transformFn(this.flatCoordinates, this.flatCoordinates, this.stride);\n    this.changed();\n  }\n};\n\n\n/**\n * @inheritDoc\n * @api\n */\nSimpleGeometry.prototype.rotate = function(angle, anchor) {\n  const flatCoordinates = this.getFlatCoordinates();\n  if (flatCoordinates) {\n    const stride = this.getStride();\n    rotate(\n      flatCoordinates, 0, flatCoordinates.length,\n      stride, angle, anchor, flatCoordinates);\n    this.changed();\n  }\n};\n\n\n/**\n * @inheritDoc\n * @api\n */\nSimpleGeometry.prototype.scale = function(sx, opt_sy, opt_anchor) {\n  let sy = opt_sy;\n  if (sy === undefined) {\n    sy = sx;\n  }\n  let anchor = opt_anchor;\n  if (!anchor) {\n    anchor = getCenter(this.getExtent());\n  }\n  const flatCoordinates = this.getFlatCoordinates();\n  if (flatCoordinates) {\n    const stride = this.getStride();\n    scale(\n      flatCoordinates, 0, flatCoordinates.length,\n      stride, sx, sy, anchor, flatCoordinates);\n    this.changed();\n  }\n};\n\n\n/**\n * @inheritDoc\n * @api\n */\nSimpleGeometry.prototype.translate = function(deltaX, deltaY) {\n  const flatCoordinates = this.getFlatCoordinates();\n  if (flatCoordinates) {\n    const stride = this.getStride();\n    translate(\n      flatCoordinates, 0, flatCoordinates.length, stride,\n      deltaX, deltaY, flatCoordinates);\n    this.changed();\n  }\n};\n\n\n/**\n * @param {module:ol/geom/SimpleGeometry} simpleGeometry Simple geometry.\n * @param {module:ol/transform~Transform} transform Transform.\n * @param {Array.<number>=} opt_dest Destination.\n * @return {Array.<number>} Transformed flat coordinates.\n */\nexport function transformGeom2D(simpleGeometry, transform, opt_dest) {\n  const flatCoordinates = simpleGeometry.getFlatCoordinates();\n  if (!flatCoordinates) {\n    return null;\n  } else {\n    const stride = simpleGeometry.getStride();\n    return transform2D(\n      flatCoordinates, 0, flatCoordinates.length, stride,\n      transform, opt_dest);\n  }\n}\n\nexport default SimpleGeometry;\n","/**\n * @module ol/easing\n */\n\n\n/**\n * Start slow and speed up.\n * @param {number} t Input between 0 and 1.\n * @return {number} Output between 0 and 1.\n * @api\n */\nexport function easeIn(t) {\n  return Math.pow(t, 3);\n}\n\n\n/**\n * Start fast and slow down.\n * @param {number} t Input between 0 and 1.\n * @return {number} Output between 0 and 1.\n * @api\n */\nexport function easeOut(t) {\n  return 1 - easeIn(1 - t);\n}\n\n\n/**\n * Start slow, speed up, and then slow down again.\n * @param {number} t Input between 0 and 1.\n * @return {number} Output between 0 and 1.\n * @api\n */\nexport function inAndOut(t) {\n  return 3 * t * t - 2 * t * t * t;\n}\n\n\n/**\n * Maintain a constant speed over time.\n * @param {number} t Input between 0 and 1.\n * @return {number} Output between 0 and 1.\n * @api\n */\nexport function linear(t) {\n  return t;\n}\n\n\n/**\n * Start slow, speed up, and at the very end slow down again.  This has the\n * same general behavior as {@link module:ol/easing~inAndOut}, but the final\n * slowdown is delayed.\n * @param {number} t Input between 0 and 1.\n * @return {number} Output between 0 and 1.\n * @api\n */\nexport function upAndDown(t) {\n  if (t < 0.5) {\n    return inAndOut(2 * t);\n  } else {\n    return 1 - inAndOut(2 * (t - 0.5));\n  }\n}\n","/**\n * @module ol/tilecoord\n */\n\n\n/**\n * An array of three numbers representing the location of a tile in a tile\n * grid. The order is `z`, `x`, and `y`. `z` is the zoom level.\n * @typedef {Array.<number>} TileCoord\n * @api\n */\n\n\n/**\n * @param {number} z Z.\n * @param {number} x X.\n * @param {number} y Y.\n * @param {module:ol/tilecoord~TileCoord=} opt_tileCoord Tile coordinate.\n * @return {module:ol/tilecoord~TileCoord} Tile coordinate.\n */\nexport function createOrUpdate(z, x, y, opt_tileCoord) {\n  if (opt_tileCoord !== undefined) {\n    opt_tileCoord[0] = z;\n    opt_tileCoord[1] = x;\n    opt_tileCoord[2] = y;\n    return opt_tileCoord;\n  } else {\n    return [z, x, y];\n  }\n}\n\n\n/**\n * @param {number} z Z.\n * @param {number} x X.\n * @param {number} y Y.\n * @return {string} Key.\n */\nexport function getKeyZXY(z, x, y) {\n  return z + '/' + x + '/' + y;\n}\n\n\n/**\n * Get the key for a tile coord.\n * @param {module:ol/tilecoord~TileCoord} tileCoord The tile coord.\n * @return {string} Key.\n */\nexport function getKey(tileCoord) {\n  return getKeyZXY(tileCoord[0], tileCoord[1], tileCoord[2]);\n}\n\n\n/**\n * Get a tile coord given a key.\n * @param {string} key The tile coord key.\n * @return {module:ol/tilecoord~TileCoord} The tile coord.\n */\nexport function fromKey(key) {\n  return key.split('/').map(Number);\n}\n\n\n/**\n * @param {module:ol/tilecoord~TileCoord} tileCoord Tile coord.\n * @return {number} Hash.\n */\nexport function hash(tileCoord) {\n  return (tileCoord[1] << tileCoord[0]) + tileCoord[2];\n}\n\n\n/**\n * @param {module:ol/tilecoord~TileCoord} tileCoord Tile coord.\n * @return {string} Quad key.\n */\nexport function quadKey(tileCoord) {\n  const z = tileCoord[0];\n  const digits = new Array(z);\n  let mask = 1 << (z - 1);\n  let i, charCode;\n  for (i = 0; i < z; ++i) {\n    // 48 is charCode for 0 - '0'.charCodeAt(0)\n    charCode = 48;\n    if (tileCoord[1] & mask) {\n      charCode += 1;\n    }\n    if (tileCoord[2] & mask) {\n      charCode += 2;\n    }\n    digits[i] = String.fromCharCode(charCode);\n    mask >>= 1;\n  }\n  return digits.join('');\n}\n\n\n/**\n * @param {module:ol/tilecoord~TileCoord} tileCoord Tile coordinate.\n * @param {!module:ol/tilegrid/TileGrid} tileGrid Tile grid.\n * @return {boolean} Tile coordinate is within extent and zoom level range.\n */\nexport function withinExtentAndZ(tileCoord, tileGrid) {\n  const z = tileCoord[0];\n  const x = tileCoord[1];\n  const y = tileCoord[2];\n\n  if (tileGrid.getMinZoom() > z || z > tileGrid.getMaxZoom()) {\n    return false;\n  }\n  const extent = tileGrid.getExtent();\n  let tileRange;\n  if (!extent) {\n    tileRange = tileGrid.getFullTileRange(z);\n  } else {\n    tileRange = tileGrid.getTileRangeForExtentAndZ(extent, z);\n  }\n  if (!tileRange) {\n    return true;\n  } else {\n    return tileRange.containsXY(x, y);\n  }\n}\n","/**\n * @module ol/size\n */\n\n\n/**\n * An array of numbers representing a size: `[width, height]`.\n * @typedef {Array.<number>} Size\n * @api\n */\n\n\n/**\n * Returns a buffered size.\n * @param {module:ol/size~Size} size Size.\n * @param {number} num The amount by which to buffer.\n * @param {module:ol/size~Size=} opt_size Optional reusable size array.\n * @return {module:ol/size~Size} The buffered size.\n */\nexport function buffer(size, num, opt_size) {\n  if (opt_size === undefined) {\n    opt_size = [0, 0];\n  }\n  opt_size[0] = size[0] + 2 * num;\n  opt_size[1] = size[1] + 2 * num;\n  return opt_size;\n}\n\n\n/**\n * Determines if a size has a positive area.\n * @param {module:ol/size~Size} size The size to test.\n * @return {boolean} The size has a positive area.\n */\nexport function hasArea(size) {\n  return size[0] > 0 && size[1] > 0;\n}\n\n\n/**\n * Returns a size scaled by a ratio. The result will be an array of integers.\n * @param {module:ol/size~Size} size Size.\n * @param {number} ratio Ratio.\n * @param {module:ol/size~Size=} opt_size Optional reusable size array.\n * @return {module:ol/size~Size} The scaled size.\n */\nexport function scale(size, ratio, opt_size) {\n  if (opt_size === undefined) {\n    opt_size = [0, 0];\n  }\n  opt_size[0] = (size[0] * ratio + 0.5) | 0;\n  opt_size[1] = (size[1] * ratio + 0.5) | 0;\n  return opt_size;\n}\n\n\n/**\n * Returns an `module:ol/size~Size` array for the passed in number (meaning: square) or\n * `module:ol/size~Size` array.\n * (meaning: non-square),\n * @param {number|module:ol/size~Size} size Width and height.\n * @param {module:ol/size~Size=} opt_size Optional reusable size array.\n * @return {module:ol/size~Size} Size.\n * @api\n */\nexport function toSize(size, opt_size) {\n  if (Array.isArray(size)) {\n    return size;\n  } else {\n    if (opt_size === undefined) {\n      opt_size = [size, size];\n    } else {\n      opt_size[0] = opt_size[1] = /** @type {number} */ (size);\n    }\n    return opt_size;\n  }\n}\n","/**\n * @module ol/LayerType\n */\n\n/**\n * A layer type used when creating layer renderers.\n * @enum {string}\n */\nexport default {\n  IMAGE: 'IMAGE',\n  TILE: 'TILE',\n  VECTOR_TILE: 'VECTOR_TILE',\n  VECTOR: 'VECTOR'\n};\n","/**\n * @module ol/geom/flat/transform\n */\n\n\n/**\n * @param {Array.<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {number} end End.\n * @param {number} stride Stride.\n * @param {module:ol/transform~Transform} transform Transform.\n * @param {Array.<number>=} opt_dest Destination.\n * @return {Array.<number>} Transformed coordinates.\n */\nexport function transform2D(flatCoordinates, offset, end, stride, transform, opt_dest) {\n  const dest = opt_dest ? opt_dest : [];\n  let i = 0;\n  for (let j = offset; j < end; j += stride) {\n    const x = flatCoordinates[j];\n    const y = flatCoordinates[j + 1];\n    dest[i++] = transform[0] * x + transform[2] * y + transform[4];\n    dest[i++] = transform[1] * x + transform[3] * y + transform[5];\n  }\n  if (opt_dest && dest.length != i) {\n    dest.length = i;\n  }\n  return dest;\n}\n\n\n/**\n * @param {Array.<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {number} end End.\n * @param {number} stride Stride.\n * @param {number} angle Angle.\n * @param {Array.<number>} anchor Rotation anchor point.\n * @param {Array.<number>=} opt_dest Destination.\n * @return {Array.<number>} Transformed coordinates.\n */\nexport function rotate(flatCoordinates, offset, end, stride, angle, anchor, opt_dest) {\n  const dest = opt_dest ? opt_dest : [];\n  const cos = Math.cos(angle);\n  const sin = Math.sin(angle);\n  const anchorX = anchor[0];\n  const anchorY = anchor[1];\n  let i = 0;\n  for (let j = offset; j < end; j += stride) {\n    const deltaX = flatCoordinates[j] - anchorX;\n    const deltaY = flatCoordinates[j + 1] - anchorY;\n    dest[i++] = anchorX + deltaX * cos - deltaY * sin;\n    dest[i++] = anchorY + deltaX * sin + deltaY * cos;\n    for (let k = j + 2; k < j + stride; ++k) {\n      dest[i++] = flatCoordinates[k];\n    }\n  }\n  if (opt_dest && dest.length != i) {\n    dest.length = i;\n  }\n  return dest;\n}\n\n\n/**\n * Scale the coordinates.\n * @param {Array.<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {number} end End.\n * @param {number} stride Stride.\n * @param {number} sx Scale factor in the x-direction.\n * @param {number} sy Scale factor in the y-direction.\n * @param {Array.<number>} anchor Scale anchor point.\n * @param {Array.<number>=} opt_dest Destination.\n * @return {Array.<number>} Transformed coordinates.\n */\nexport function scale(flatCoordinates, offset, end, stride, sx, sy, anchor, opt_dest) {\n  const dest = opt_dest ? opt_dest : [];\n  const anchorX = anchor[0];\n  const anchorY = anchor[1];\n  let i = 0;\n  for (let j = offset; j < end; j += stride) {\n    const deltaX = flatCoordinates[j] - anchorX;\n    const deltaY = flatCoordinates[j + 1] - anchorY;\n    dest[i++] = anchorX + sx * deltaX;\n    dest[i++] = anchorY + sy * deltaY;\n    for (let k = j + 2; k < j + stride; ++k) {\n      dest[i++] = flatCoordinates[k];\n    }\n  }\n  if (opt_dest && dest.length != i) {\n    dest.length = i;\n  }\n  return dest;\n}\n\n\n/**\n * @param {Array.<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {number} end End.\n * @param {number} stride Stride.\n * @param {number} deltaX Delta X.\n * @param {number} deltaY Delta Y.\n * @param {Array.<number>=} opt_dest Destination.\n * @return {Array.<number>} Transformed coordinates.\n */\nexport function translate(flatCoordinates, offset, end, stride, deltaX, deltaY, opt_dest) {\n  const dest = opt_dest ? opt_dest : [];\n  let i = 0;\n  for (let j = offset; j < end; j += stride) {\n    dest[i++] = flatCoordinates[j] + deltaX;\n    dest[i++] = flatCoordinates[j + 1] + deltaY;\n    for (let k = j + 2; k < j + stride; ++k) {\n      dest[i++] = flatCoordinates[k];\n    }\n  }\n  if (opt_dest && dest.length != i) {\n    dest.length = i;\n  }\n  return dest;\n}\n","/**\n * @module ol/CollectionEventType\n */\n\n/**\n * @enum {string}\n */\nexport default {\n  /**\n   * Triggered when an item is added to the collection.\n   * @event module:ol/Collection~CollectionEvent#add\n   * @api\n   */\n  ADD: 'add',\n  /**\n   * Triggered when an item is removed from the collection.\n   * @event module:ol/Collection~CollectionEvent#remove\n   * @api\n   */\n  REMOVE: 'remove'\n};\n","/**\n * @module ol/source/TileJSON\n */\n// FIXME check order of async callbacks\n\n/**\n * @see http://mapbox.com/developers/api/\n */\n\nimport {inherits} from '../util.js';\nimport {createFromTemplates} from '../tileurlfunction.js';\nimport {assert} from '../asserts.js';\nimport {applyTransform, intersects} from '../extent.js';\nimport {jsonp as requestJSONP} from '../net.js';\nimport {get as getProjection, getTransformFromProjections} from '../proj.js';\nimport SourceState from '../source/State.js';\nimport TileImage from '../source/TileImage.js';\nimport {createXYZ, extentFromProjection} from '../tilegrid.js';\n\n/**\n * @typedef {Object} Options\n * @property {module:ol/source/Source~AttributionLike} [attributions] Attributions.\n * @property {number} [cacheSize=2048] Cache size.\n * @property {null|string} [crossOrigin] The `crossOrigin` attribute for loaded images.  Note that\n * you must provide a `crossOrigin` value if you are using the WebGL renderer or if you want to\n * access pixel data with the Canvas renderer.  See\n * {@link https://developer.mozilla.org/en-US/docs/Web/HTML/CORS_enabled_image} for more detail.\n * @property {boolean} [jsonp=false] Use JSONP with callback to load the TileJSON.\n * Useful when the server does not support CORS..\n * @property {boolean} [reprojectionErrorThreshold=0.5] Maximum allowed reprojection error (in pixels).\n * Higher values can increase reprojection performance, but decrease precision.\n * @property {tileJSON} [tileJSON] TileJSON configuration for this source.\n * If not provided, `url` must be configured.\n * @property {module:ol/Tile~LoadFunction} [tileLoadFunction] Optional function to load a tile given a URL. The default is\n * ```js\n * function(imageTile, src) {\n *   imageTile.getImage().src = src;\n * };\n * ```\n * @property {string} [url] URL to the TileJSON file. If not provided, `tileJSON` must be configured.\n * @property {boolean} [wrapX=true] Whether to wrap the world horizontally.\n * @property {number} [transition] Duration of the opacity transition for rendering.\n * To disable the opacity transition, pass `transition: 0`.\n */\n\n\n/**\n * @classdesc\n * Layer source for tile data in TileJSON format.\n *\n * @constructor\n * @extends {module:ol/source/TileImage}\n * @param {module:ol/source/TileJSON~Options=} options TileJSON options.\n * @api\n */\nconst TileJSON = function(options) {\n\n  /**\n   * @type {TileJSON}\n   * @private\n   */\n  this.tileJSON_ = null;\n\n  TileImage.call(this, {\n    attributions: options.attributions,\n    cacheSize: options.cacheSize,\n    crossOrigin: options.crossOrigin,\n    projection: getProjection('EPSG:3857'),\n    reprojectionErrorThreshold: options.reprojectionErrorThreshold,\n    state: SourceState.LOADING,\n    tileLoadFunction: options.tileLoadFunction,\n    wrapX: options.wrapX !== undefined ? options.wrapX : true,\n    transition: options.transition\n  });\n\n  if (options.url) {\n    if (options.jsonp) {\n      requestJSONP(options.url, this.handleTileJSONResponse.bind(this),\n        this.handleTileJSONError.bind(this));\n    } else {\n      const client = new XMLHttpRequest();\n      client.addEventListener('load', this.onXHRLoad_.bind(this));\n      client.addEventListener('error', this.onXHRError_.bind(this));\n      client.open('GET', options.url);\n      client.send();\n    }\n  } else if (options.tileJSON) {\n    this.handleTileJSONResponse(options.tileJSON);\n  } else {\n    assert(false, 51); // Either `url` or `tileJSON` options must be provided\n  }\n\n};\n\ninherits(TileJSON, TileImage);\n\n\n/**\n * @private\n * @param {Event} event The load event.\n */\nTileJSON.prototype.onXHRLoad_ = function(event) {\n  const client = /** @type {XMLHttpRequest} */ (event.target);\n  // status will be 0 for file:// urls\n  if (!client.status || client.status >= 200 && client.status < 300) {\n    let response;\n    try {\n      response = /** @type {TileJSON} */(JSON.parse(client.responseText));\n    } catch (err) {\n      this.handleTileJSONError();\n      return;\n    }\n    this.handleTileJSONResponse(response);\n  } else {\n    this.handleTileJSONError();\n  }\n};\n\n\n/**\n * @private\n * @param {Event} event The error event.\n */\nTileJSON.prototype.onXHRError_ = function(event) {\n  this.handleTileJSONError();\n};\n\n\n/**\n * @return {TileJSON} The tilejson object.\n * @api\n */\nTileJSON.prototype.getTileJSON = function() {\n  return this.tileJSON_;\n};\n\n\n/**\n * @protected\n * @param {TileJSON} tileJSON Tile JSON.\n */\nTileJSON.prototype.handleTileJSONResponse = function(tileJSON) {\n\n  const epsg4326Projection = getProjection('EPSG:4326');\n\n  const sourceProjection = this.getProjection();\n  let extent;\n  if (tileJSON.bounds !== undefined) {\n    const transform = getTransformFromProjections(\n      epsg4326Projection, sourceProjection);\n    extent = applyTransform(tileJSON.bounds, transform);\n  }\n\n  const minZoom = tileJSON.minzoom || 0;\n  const maxZoom = tileJSON.maxzoom || 22;\n  const tileGrid = createXYZ({\n    extent: extentFromProjection(sourceProjection),\n    maxZoom: maxZoom,\n    minZoom: minZoom\n  });\n  this.tileGrid = tileGrid;\n\n  this.tileUrlFunction = createFromTemplates(tileJSON.tiles, tileGrid);\n\n  if (tileJSON.attribution !== undefined && !this.getAttributions()) {\n    const attributionExtent = extent !== undefined ?\n      extent : epsg4326Projection.getExtent();\n\n    this.setAttributions(function(frameState) {\n      if (intersects(attributionExtent, frameState.extent)) {\n        return [tileJSON.attribution];\n      }\n      return null;\n    });\n\n  }\n  this.tileJSON_ = tileJSON;\n  this.setState(SourceState.READY);\n\n};\n\n\n/**\n * @protected\n */\nTileJSON.prototype.handleTileJSONError = function() {\n  this.setState(SourceState.ERROR);\n};\nexport default TileJSON;\n","/**\n * @module ol/tilegrid\n */\nimport {DEFAULT_MAX_ZOOM, DEFAULT_TILE_SIZE} from './tilegrid/common.js';\nimport {toSize} from './size.js';\nimport {containsCoordinate, createOrUpdate, getCorner, getHeight, getWidth} from './extent.js';\nimport Corner from './extent/Corner.js';\nimport {assign} from './obj.js';\nimport {get as getProjection, METERS_PER_UNIT} from './proj.js';\nimport Units from './proj/Units.js';\nimport TileGrid from './tilegrid/TileGrid.js';\n\n\n/**\n * @param {module:ol/proj/Projection} projection Projection.\n * @return {!module:ol/tilegrid/TileGrid} Default tile grid for the\n * passed projection.\n */\nexport function getForProjection(projection) {\n  let tileGrid = projection.getDefaultTileGrid();\n  if (!tileGrid) {\n    tileGrid = createForProjection(projection);\n    projection.setDefaultTileGrid(tileGrid);\n  }\n  return tileGrid;\n}\n\n\n/**\n * @param {module:ol/tilegrid/TileGrid} tileGrid Tile grid.\n * @param {module:ol/tilecoord~TileCoord} tileCoord Tile coordinate.\n * @param {module:ol/proj/Projection} projection Projection.\n * @return {module:ol/tilecoord~TileCoord} Tile coordinate.\n */\nexport function wrapX(tileGrid, tileCoord, projection) {\n  const z = tileCoord[0];\n  const center = tileGrid.getTileCoordCenter(tileCoord);\n  const projectionExtent = extentFromProjection(projection);\n  if (!containsCoordinate(projectionExtent, center)) {\n    const worldWidth = getWidth(projectionExtent);\n    const worldsAway = Math.ceil((projectionExtent[0] - center[0]) / worldWidth);\n    center[0] += worldWidth * worldsAway;\n    return tileGrid.getTileCoordForCoordAndZ(center, z);\n  } else {\n    return tileCoord;\n  }\n}\n\n\n/**\n * @param {module:ol/extent~Extent} extent Extent.\n * @param {number=} opt_maxZoom Maximum zoom level (default is\n *     DEFAULT_MAX_ZOOM).\n * @param {number|module:ol/size~Size=} opt_tileSize Tile size (default uses\n *     DEFAULT_TILE_SIZE).\n * @param {module:ol/extent/Corner=} opt_corner Extent corner (default is `'top-left'`).\n * @return {!module:ol/tilegrid/TileGrid} TileGrid instance.\n */\nexport function createForExtent(extent, opt_maxZoom, opt_tileSize, opt_corner) {\n  const corner = opt_corner !== undefined ? opt_corner : Corner.TOP_LEFT;\n\n  const resolutions = resolutionsFromExtent(extent, opt_maxZoom, opt_tileSize);\n\n  return new TileGrid({\n    extent: extent,\n    origin: getCorner(extent, corner),\n    resolutions: resolutions,\n    tileSize: opt_tileSize\n  });\n}\n\n\n/**\n * @typedef {Object} XYZOptions\n * @property {module:ol/extent~Extent} [extent] Extent for the tile grid. The origin for an XYZ tile grid is the\n * top-left corner of the extent. The zero level of the grid is defined by the resolution at which one tile fits in the\n * provided extent. If not provided, the extent of the EPSG:3857 projection is used.\n * @property {number} [maxZoom] Maximum zoom. The default is `42`. This determines the number of levels\n * in the grid set. For example, a `maxZoom` of 21 means there are 22 levels in the grid set.\n * @property {number} [minZoom=0] Minimum zoom.\n * @property {number|module:ol/size~Size} [tileSize=[256, 256]] Tile size in pixels.\n */\n\n\n/**\n * Creates a tile grid with a standard XYZ tiling scheme.\n * @param {module:ol/tilegrid~XYZOptions=} opt_options Tile grid options.\n * @return {!module:ol/tilegrid/TileGrid} Tile grid instance.\n * @api\n */\nexport function createXYZ(opt_options) {\n  const options = /** @type {module:ol/tilegrid/TileGrid~Options} */ ({});\n  assign(options, opt_options !== undefined ?\n    opt_options : /** @type {module:ol/tilegrid~XYZOptions} */ ({}));\n  if (options.extent === undefined) {\n    options.extent = getProjection('EPSG:3857').getExtent();\n  }\n  options.resolutions = resolutionsFromExtent(\n    options.extent, options.maxZoom, options.tileSize);\n  delete options.maxZoom;\n\n  return new TileGrid(options);\n}\n\n\n/**\n * Create a resolutions array from an extent.  A zoom factor of 2 is assumed.\n * @param {module:ol/extent~Extent} extent Extent.\n * @param {number=} opt_maxZoom Maximum zoom level (default is\n *     DEFAULT_MAX_ZOOM).\n * @param {number|module:ol/size~Size=} opt_tileSize Tile size (default uses\n *     DEFAULT_TILE_SIZE).\n * @return {!Array.<number>} Resolutions array.\n */\nfunction resolutionsFromExtent(extent, opt_maxZoom, opt_tileSize) {\n  const maxZoom = opt_maxZoom !== undefined ?\n    opt_maxZoom : DEFAULT_MAX_ZOOM;\n\n  const height = getHeight(extent);\n  const width = getWidth(extent);\n\n  const tileSize = toSize(opt_tileSize !== undefined ?\n    opt_tileSize : DEFAULT_TILE_SIZE);\n  const maxResolution = Math.max(\n    width / tileSize[0], height / tileSize[1]);\n\n  const length = maxZoom + 1;\n  const resolutions = new Array(length);\n  for (let z = 0; z < length; ++z) {\n    resolutions[z] = maxResolution / Math.pow(2, z);\n  }\n  return resolutions;\n}\n\n\n/**\n * @param {module:ol/proj~ProjectionLike} projection Projection.\n * @param {number=} opt_maxZoom Maximum zoom level (default is\n *     DEFAULT_MAX_ZOOM).\n * @param {number|module:ol/size~Size=} opt_tileSize Tile size (default uses\n *     DEFAULT_TILE_SIZE).\n * @param {module:ol/extent/Corner=} opt_corner Extent corner (default is `'top-left'`).\n * @return {!module:ol/tilegrid/TileGrid} TileGrid instance.\n */\nexport function createForProjection(projection, opt_maxZoom, opt_tileSize, opt_corner) {\n  const extent = extentFromProjection(projection);\n  return createForExtent(extent, opt_maxZoom, opt_tileSize, opt_corner);\n}\n\n\n/**\n * Generate a tile grid extent from a projection.  If the projection has an\n * extent, it is used.  If not, a global extent is assumed.\n * @param {module:ol/proj~ProjectionLike} projection Projection.\n * @return {module:ol/extent~Extent} Extent.\n */\nexport function extentFromProjection(projection) {\n  projection = getProjection(projection);\n  let extent = projection.getExtent();\n  if (!extent) {\n    const half = 180 * METERS_PER_UNIT[Units.DEGREES] / projection.getMetersPerUnit();\n    extent = createOrUpdate(-half, -half, half, half);\n  }\n  return extent;\n}\n","/**\n * @module ol/proj/Projection\n */\nimport {METERS_PER_UNIT} from '../proj/Units.js';\n\n\n/**\n * @typedef {Object} Options\n * @property {string} code The SRS identifier code, e.g. `EPSG:4326`.\n * @property {module:ol/proj/Units|string} [units] Units. Required unless a\n * proj4 projection is defined for `code`.\n * @property {module:ol/extent~Extent} [extent] The validity extent for the SRS.\n * @property {string} [axisOrientation='enu'] The axis orientation as specified in Proj4.\n * @property {boolean} [global=false] Whether the projection is valid for the whole globe.\n * @property {number} [metersPerUnit] The meters per unit for the SRS.\n * If not provided, the `units` are used to get the meters per unit from the {@link module:ol/proj/Units~METERS_PER_UNIT}\n * lookup table.\n * @property {module:ol/extent~Extent} [worldExtent] The world extent for the SRS.\n * @property {function(number, module:ol/coordinate~Coordinate):number} [getPointResolution]\n * Function to determine resolution at a point. The function is called with a\n * `{number}` view resolution and an `{module:ol/coordinate~Coordinate}` as arguments, and returns\n * the `{number}` resolution at the passed coordinate. If this is `undefined`,\n * the default {@link module:ol/proj#getPointResolution} function will be used.\n */\n\n\n/**\n * @classdesc\n * Projection definition class. One of these is created for each projection\n * supported in the application and stored in the {@link module:ol/proj} namespace.\n * You can use these in applications, but this is not required, as API params\n * and options use {@link module:ol/proj~ProjectionLike} which means the simple string\n * code will suffice.\n *\n * You can use {@link module:ol/proj~get} to retrieve the object for a particular\n * projection.\n *\n * The library includes definitions for `EPSG:4326` and `EPSG:3857`, together\n * with the following aliases:\n * * `EPSG:4326`: CRS:84, urn:ogc:def:crs:EPSG:6.6:4326,\n *     urn:ogc:def:crs:OGC:1.3:CRS84, urn:ogc:def:crs:OGC:2:84,\n *     http://www.opengis.net/gml/srs/epsg.xml#4326,\n *     urn:x-ogc:def:crs:EPSG:4326\n * * `EPSG:3857`: EPSG:102100, EPSG:102113, EPSG:900913,\n *     urn:ogc:def:crs:EPSG:6.18:3:3857,\n *     http://www.opengis.net/gml/srs/epsg.xml#3857\n *\n * If you use proj4js, aliases can be added using `proj4.defs()`; see\n * [documentation](https://github.com/proj4js/proj4js). To set an alternative\n * namespace for proj4, use {@link module:ol/proj~setProj4}.\n *\n * @constructor\n * @param {module:ol/proj/Projection~Options} options Projection options.\n * @struct\n * @api\n */\nconst Projection = function(options) {\n  /**\n   * @private\n   * @type {string}\n   */\n  this.code_ = options.code;\n\n  /**\n   * Units of projected coordinates. When set to `TILE_PIXELS`, a\n   * `this.extent_` and `this.worldExtent_` must be configured properly for each\n   * tile.\n   * @private\n   * @type {module:ol/proj/Units}\n   */\n  this.units_ = /** @type {module:ol/proj/Units} */ (options.units);\n\n  /**\n   * Validity extent of the projection in projected coordinates. For projections\n   * with `TILE_PIXELS` units, this is the extent of the tile in\n   * tile pixel space.\n   * @private\n   * @type {module:ol/extent~Extent}\n   */\n  this.extent_ = options.extent !== undefined ? options.extent : null;\n\n  /**\n   * Extent of the world in EPSG:4326. For projections with\n   * `TILE_PIXELS` units, this is the extent of the tile in\n   * projected coordinate space.\n   * @private\n   * @type {module:ol/extent~Extent}\n   */\n  this.worldExtent_ = options.worldExtent !== undefined ?\n    options.worldExtent : null;\n\n  /**\n   * @private\n   * @type {string}\n   */\n  this.axisOrientation_ = options.axisOrientation !== undefined ?\n    options.axisOrientation : 'enu';\n\n  /**\n   * @private\n   * @type {boolean}\n   */\n  this.global_ = options.global !== undefined ? options.global : false;\n\n  /**\n   * @private\n   * @type {boolean}\n   */\n  this.canWrapX_ = !!(this.global_ && this.extent_);\n\n  /**\n   * @private\n   * @type {function(number, module:ol/coordinate~Coordinate):number|undefined}\n   */\n  this.getPointResolutionFunc_ = options.getPointResolution;\n\n  /**\n   * @private\n   * @type {module:ol/tilegrid/TileGrid}\n   */\n  this.defaultTileGrid_ = null;\n\n  /**\n   * @private\n   * @type {number|undefined}\n   */\n  this.metersPerUnit_ = options.metersPerUnit;\n};\n\n\n/**\n * @return {boolean} The projection is suitable for wrapping the x-axis\n */\nProjection.prototype.canWrapX = function() {\n  return this.canWrapX_;\n};\n\n\n/**\n * Get the code for this projection, e.g. 'EPSG:4326'.\n * @return {string} Code.\n * @api\n */\nProjection.prototype.getCode = function() {\n  return this.code_;\n};\n\n\n/**\n * Get the validity extent for this projection.\n * @return {module:ol/extent~Extent} Extent.\n * @api\n */\nProjection.prototype.getExtent = function() {\n  return this.extent_;\n};\n\n\n/**\n * Get the units of this projection.\n * @return {module:ol/proj/Units} Units.\n * @api\n */\nProjection.prototype.getUnits = function() {\n  return this.units_;\n};\n\n\n/**\n * Get the amount of meters per unit of this projection.  If the projection is\n * not configured with `metersPerUnit` or a units identifier, the return is\n * `undefined`.\n * @return {number|undefined} Meters.\n * @api\n */\nProjection.prototype.getMetersPerUnit = function() {\n  return this.metersPerUnit_ || METERS_PER_UNIT[this.units_];\n};\n\n\n/**\n * Get the world extent for this projection.\n * @return {module:ol/extent~Extent} Extent.\n * @api\n */\nProjection.prototype.getWorldExtent = function() {\n  return this.worldExtent_;\n};\n\n\n/**\n * Get the axis orientation of this projection.\n * Example values are:\n * enu - the default easting, northing, elevation.\n * neu - northing, easting, up - useful for \"lat/long\" geographic coordinates,\n *     or south orientated transverse mercator.\n * wnu - westing, northing, up - some planetary coordinate systems have\n *     \"west positive\" coordinate systems\n * @return {string} Axis orientation.\n * @api\n */\nProjection.prototype.getAxisOrientation = function() {\n  return this.axisOrientation_;\n};\n\n\n/**\n * Is this projection a global projection which spans the whole world?\n * @return {boolean} Whether the projection is global.\n * @api\n */\nProjection.prototype.isGlobal = function() {\n  return this.global_;\n};\n\n\n/**\n* Set if the projection is a global projection which spans the whole world\n* @param {boolean} global Whether the projection is global.\n* @api\n*/\nProjection.prototype.setGlobal = function(global) {\n  this.global_ = global;\n  this.canWrapX_ = !!(global && this.extent_);\n};\n\n\n/**\n * @return {module:ol/tilegrid/TileGrid} The default tile grid.\n */\nProjection.prototype.getDefaultTileGrid = function() {\n  return this.defaultTileGrid_;\n};\n\n\n/**\n * @param {module:ol/tilegrid/TileGrid} tileGrid The default tile grid.\n */\nProjection.prototype.setDefaultTileGrid = function(tileGrid) {\n  this.defaultTileGrid_ = tileGrid;\n};\n\n\n/**\n * Set the validity extent for this projection.\n * @param {module:ol/extent~Extent} extent Extent.\n * @api\n */\nProjection.prototype.setExtent = function(extent) {\n  this.extent_ = extent;\n  this.canWrapX_ = !!(this.global_ && extent);\n};\n\n\n/**\n * Set the world extent for this projection.\n * @param {module:ol/extent~Extent} worldExtent World extent\n *     [minlon, minlat, maxlon, maxlat].\n * @api\n */\nProjection.prototype.setWorldExtent = function(worldExtent) {\n  this.worldExtent_ = worldExtent;\n};\n\n\n/**\n * Set the getPointResolution function (see {@link module:ol/proj~getPointResolution}\n * for this projection.\n * @param {function(number, module:ol/coordinate~Coordinate):number} func Function\n * @api\n */\nProjection.prototype.setGetPointResolution = function(func) {\n  this.getPointResolutionFunc_ = func;\n};\n\n\n/**\n * Get the custom point resolution function for this projection (if set).\n * @return {function(number, module:ol/coordinate~Coordinate):number|undefined} The custom point\n * resolution function (if set).\n */\nProjection.prototype.getPointResolutionFunc = function() {\n  return this.getPointResolutionFunc_;\n};\nexport default Projection;\n","/**\n * @module ol/reproj/Tile\n */\nimport {ERROR_THRESHOLD} from './common.js';\nimport {inherits} from '../util.js';\nimport Tile from '../Tile.js';\nimport TileState from '../TileState.js';\nimport {listen, unlistenByKey} from '../events.js';\nimport EventType from '../events/EventType.js';\nimport {getArea, getCenter, getIntersection} from '../extent.js';\nimport {clamp} from '../math.js';\nimport {calculateSourceResolution, render as renderReprojected} from '../reproj.js';\nimport Triangulation from '../reproj/Triangulation.js';\n\n\n/**\n * @typedef {function(number, number, number, number) : module:ol/Tile} FunctionType\n */\n\n\n/**\n * @classdesc\n * Class encapsulating single reprojected tile.\n * See {@link module:ol/source/TileImage~TileImage}.\n *\n * @constructor\n * @extends {module:ol/Tile}\n * @param {module:ol/proj/Projection} sourceProj Source projection.\n * @param {module:ol/tilegrid/TileGrid} sourceTileGrid Source tile grid.\n * @param {module:ol/proj/Projection} targetProj Target projection.\n * @param {module:ol/tilegrid/TileGrid} targetTileGrid Target tile grid.\n * @param {module:ol/tilecoord~TileCoord} tileCoord Coordinate of the tile.\n * @param {module:ol/tilecoord~TileCoord} wrappedTileCoord Coordinate of the tile wrapped in X.\n * @param {number} pixelRatio Pixel ratio.\n * @param {number} gutter Gutter of the source tiles.\n * @param {module:ol/reproj/Tile~FunctionType} getTileFunction\n *     Function returning source tiles (z, x, y, pixelRatio).\n * @param {number=} opt_errorThreshold Acceptable reprojection error (in px).\n * @param {boolean=} opt_renderEdges Render reprojection edges.\n */\nconst ReprojTile = function(sourceProj, sourceTileGrid,\n  targetProj, targetTileGrid, tileCoord, wrappedTileCoord,\n  pixelRatio, gutter, getTileFunction,\n  opt_errorThreshold, opt_renderEdges) {\n  Tile.call(this, tileCoord, TileState.IDLE);\n\n  /**\n   * @private\n   * @type {boolean}\n   */\n  this.renderEdges_ = opt_renderEdges !== undefined ? opt_renderEdges : false;\n\n  /**\n   * @private\n   * @type {number}\n   */\n  this.pixelRatio_ = pixelRatio;\n\n  /**\n   * @private\n   * @type {number}\n   */\n  this.gutter_ = gutter;\n\n  /**\n   * @private\n   * @type {HTMLCanvasElement}\n   */\n  this.canvas_ = null;\n\n  /**\n   * @private\n   * @type {module:ol/tilegrid/TileGrid}\n   */\n  this.sourceTileGrid_ = sourceTileGrid;\n\n  /**\n   * @private\n   * @type {module:ol/tilegrid/TileGrid}\n   */\n  this.targetTileGrid_ = targetTileGrid;\n\n  /**\n   * @private\n   * @type {module:ol/tilecoord~TileCoord}\n   */\n  this.wrappedTileCoord_ = wrappedTileCoord ? wrappedTileCoord : tileCoord;\n\n  /**\n   * @private\n   * @type {!Array.<module:ol/Tile>}\n   */\n  this.sourceTiles_ = [];\n\n  /**\n   * @private\n   * @type {Array.<module:ol/events~EventsKey>}\n   */\n  this.sourcesListenerKeys_ = null;\n\n  /**\n   * @private\n   * @type {number}\n   */\n  this.sourceZ_ = 0;\n\n  const targetExtent = targetTileGrid.getTileCoordExtent(this.wrappedTileCoord_);\n  const maxTargetExtent = this.targetTileGrid_.getExtent();\n  let maxSourceExtent = this.sourceTileGrid_.getExtent();\n\n  const limitedTargetExtent = maxTargetExtent ?\n    getIntersection(targetExtent, maxTargetExtent) : targetExtent;\n\n  if (getArea(limitedTargetExtent) === 0) {\n    // Tile is completely outside range -> EMPTY\n    // TODO: is it actually correct that the source even creates the tile ?\n    this.state = TileState.EMPTY;\n    return;\n  }\n\n  const sourceProjExtent = sourceProj.getExtent();\n  if (sourceProjExtent) {\n    if (!maxSourceExtent) {\n      maxSourceExtent = sourceProjExtent;\n    } else {\n      maxSourceExtent = getIntersection(maxSourceExtent, sourceProjExtent);\n    }\n  }\n\n  const targetResolution = targetTileGrid.getResolution(\n    this.wrappedTileCoord_[0]);\n\n  const targetCenter = getCenter(limitedTargetExtent);\n  const sourceResolution = calculateSourceResolution(\n    sourceProj, targetProj, targetCenter, targetResolution);\n\n  if (!isFinite(sourceResolution) || sourceResolution <= 0) {\n    // invalid sourceResolution -> EMPTY\n    // probably edges of the projections when no extent is defined\n    this.state = TileState.EMPTY;\n    return;\n  }\n\n  const errorThresholdInPixels = opt_errorThreshold !== undefined ?\n    opt_errorThreshold : ERROR_THRESHOLD;\n\n  /**\n   * @private\n   * @type {!module:ol/reproj/Triangulation}\n   */\n  this.triangulation_ = new Triangulation(\n    sourceProj, targetProj, limitedTargetExtent, maxSourceExtent,\n    sourceResolution * errorThresholdInPixels);\n\n  if (this.triangulation_.getTriangles().length === 0) {\n    // no valid triangles -> EMPTY\n    this.state = TileState.EMPTY;\n    return;\n  }\n\n  this.sourceZ_ = sourceTileGrid.getZForResolution(sourceResolution);\n  let sourceExtent = this.triangulation_.calculateSourceExtent();\n\n  if (maxSourceExtent) {\n    if (sourceProj.canWrapX()) {\n      sourceExtent[1] = clamp(\n        sourceExtent[1], maxSourceExtent[1], maxSourceExtent[3]);\n      sourceExtent[3] = clamp(\n        sourceExtent[3], maxSourceExtent[1], maxSourceExtent[3]);\n    } else {\n      sourceExtent = getIntersection(sourceExtent, maxSourceExtent);\n    }\n  }\n\n  if (!getArea(sourceExtent)) {\n    this.state = TileState.EMPTY;\n  } else {\n    const sourceRange = sourceTileGrid.getTileRangeForExtentAndZ(\n      sourceExtent, this.sourceZ_);\n\n    for (let srcX = sourceRange.minX; srcX <= sourceRange.maxX; srcX++) {\n      for (let srcY = sourceRange.minY; srcY <= sourceRange.maxY; srcY++) {\n        const tile = getTileFunction(this.sourceZ_, srcX, srcY, pixelRatio);\n        if (tile) {\n          this.sourceTiles_.push(tile);\n        }\n      }\n    }\n\n    if (this.sourceTiles_.length === 0) {\n      this.state = TileState.EMPTY;\n    }\n  }\n};\n\ninherits(ReprojTile, Tile);\n\n\n/**\n * @inheritDoc\n */\nReprojTile.prototype.disposeInternal = function() {\n  if (this.state == TileState.LOADING) {\n    this.unlistenSources_();\n  }\n  Tile.prototype.disposeInternal.call(this);\n};\n\n\n/**\n * Get the HTML Canvas element for this tile.\n * @return {HTMLCanvasElement} Canvas.\n */\nReprojTile.prototype.getImage = function() {\n  return this.canvas_;\n};\n\n\n/**\n * @private\n */\nReprojTile.prototype.reproject_ = function() {\n  const sources = [];\n  this.sourceTiles_.forEach(function(tile, i, arr) {\n    if (tile && tile.getState() == TileState.LOADED) {\n      sources.push({\n        extent: this.sourceTileGrid_.getTileCoordExtent(tile.tileCoord),\n        image: tile.getImage()\n      });\n    }\n  }.bind(this));\n  this.sourceTiles_.length = 0;\n\n  if (sources.length === 0) {\n    this.state = TileState.ERROR;\n  } else {\n    const z = this.wrappedTileCoord_[0];\n    const size = this.targetTileGrid_.getTileSize(z);\n    const width = typeof size === 'number' ? size : size[0];\n    const height = typeof size === 'number' ? size : size[1];\n    const targetResolution = this.targetTileGrid_.getResolution(z);\n    const sourceResolution = this.sourceTileGrid_.getResolution(this.sourceZ_);\n\n    const targetExtent = this.targetTileGrid_.getTileCoordExtent(\n      this.wrappedTileCoord_);\n    this.canvas_ = renderReprojected(width, height, this.pixelRatio_,\n      sourceResolution, this.sourceTileGrid_.getExtent(),\n      targetResolution, targetExtent, this.triangulation_, sources,\n      this.gutter_, this.renderEdges_);\n\n    this.state = TileState.LOADED;\n  }\n  this.changed();\n};\n\n\n/**\n * @inheritDoc\n */\nReprojTile.prototype.load = function() {\n  if (this.state == TileState.IDLE) {\n    this.state = TileState.LOADING;\n    this.changed();\n\n    let leftToLoad = 0;\n\n    this.sourcesListenerKeys_ = [];\n    this.sourceTiles_.forEach(function(tile, i, arr) {\n      const state = tile.getState();\n      if (state == TileState.IDLE || state == TileState.LOADING) {\n        leftToLoad++;\n\n        const sourceListenKey = listen(tile, EventType.CHANGE,\n          function(e) {\n            const state = tile.getState();\n            if (state == TileState.LOADED ||\n                  state == TileState.ERROR ||\n                  state == TileState.EMPTY) {\n              unlistenByKey(sourceListenKey);\n              leftToLoad--;\n              if (leftToLoad === 0) {\n                this.unlistenSources_();\n                this.reproject_();\n              }\n            }\n          }, this);\n        this.sourcesListenerKeys_.push(sourceListenKey);\n      }\n    }.bind(this));\n\n    this.sourceTiles_.forEach(function(tile, i, arr) {\n      const state = tile.getState();\n      if (state == TileState.IDLE) {\n        tile.load();\n      }\n    });\n\n    if (leftToLoad === 0) {\n      setTimeout(this.reproject_.bind(this), 0);\n    }\n  }\n};\n\n\n/**\n * @private\n */\nReprojTile.prototype.unlistenSources_ = function() {\n  this.sourcesListenerKeys_.forEach(unlistenByKey);\n  this.sourcesListenerKeys_ = null;\n};\nexport default ReprojTile;\n","/**\n * @module ol/source/TileImage\n */\nimport {ENABLE_RASTER_REPROJECTION} from '../reproj/common.js';\nimport {getUid, inherits} from '../util.js';\nimport ImageTile from '../ImageTile.js';\nimport TileCache from '../TileCache.js';\nimport TileState from '../TileState.js';\nimport {listen} from '../events.js';\nimport EventType from '../events/EventType.js';\nimport {equivalent, get as getProjection} from '../proj.js';\nimport ReprojTile from '../reproj/Tile.js';\nimport UrlTile from '../source/UrlTile.js';\nimport {getKey, getKeyZXY} from '../tilecoord.js';\nimport {getForProjection as getTileGridForProjection} from '../tilegrid.js';\n\n/**\n * @typedef {Object} Options\n * @property {module:ol/source/Source~AttributionLike} [attributions] Attributions.\n * @property {number} [cacheSize=2048] Cache size.\n * @property {null|string} [crossOrigin] The `crossOrigin` attribute for loaded images.  Note that\n * you must provide a `crossOrigin` value if you are using the WebGL renderer or if you want to\n * access pixel data with the Canvas renderer.  See\n * {@link https://developer.mozilla.org/en-US/docs/Web/HTML/CORS_enabled_image} for more detail.\n * @property {boolean} [opaque=true] Whether the layer is opaque.\n * @property {module:ol/proj~ProjectionLike} projection Projection.\n * @property {boolean} [reprojectionErrorThreshold=0.5] Maximum allowed reprojection error (in pixels).\n * Higher values can increase reprojection performance, but decrease precision.\n * @property {module:ol/source/State} [state] Source state.\n * @property {module:ol/ImageTile~TileClass} [tileClass] Class used to instantiate image tiles.\n * Default is {@link module:ol/ImageTile~ImageTile}.\n * @property {module:ol/tilegrid/TileGrid} [tileGrid] Tile grid.\n * @property {module:ol/Tile~LoadFunction} [tileLoadFunction] Optional function to load a tile given a URL. The default is\n * ```js\n * function(imageTile, src) {\n *   imageTile.getImage().src = src;\n * };\n * ```\n * @property {number} [tilePixelRatio=1] The pixel ratio used by the tile service. For example, if the tile\n * service advertizes 256px by 256px tiles but actually sends 512px\n * by 512px images (for retina/hidpi devices) then `tilePixelRatio`\n * should be set to `2`.\n * @property {module:ol/Tile~UrlFunction} [tileUrlFunction] Optional function to get tile URL given a tile coordinate and the projection.\n * @property {string} [url] URL template. Must include `{x}`, `{y}` or `{-y}`, and `{z}` placeholders.\n * A `{?-?}` template pattern, for example `subdomain{a-f}.domain.com`, may be\n * used instead of defining each one separately in the `urls` option.\n * @property {Array.<string>} [urls] An array of URL templates.\n * @property {boolean} [wrapX] Whether to wrap the world horizontally. The default, is to\n * request out-of-bounds tiles from the server. When set to `false`, only one\n * world will be rendered. When set to `true`, tiles will be requested for one\n * world only, but they will be wrapped horizontally to render multiple worlds.\n * @property {number} [transition] Duration of the opacity transition for rendering.\n * To disable the opacity transition, pass `transition: 0`.\n */\n\n\n/**\n * @classdesc\n * Base class for sources providing images divided into a tile grid.\n *\n * @constructor\n * @fires module:ol/source/Tile~TileSourceEvent\n * @extends {module:ol/source/UrlTile}\n * @param {module:ol/source/TileImage~Options=} options Image tile options.\n * @api\n */\nconst TileImage = function(options) {\n\n  UrlTile.call(this, {\n    attributions: options.attributions,\n    cacheSize: options.cacheSize,\n    extent: options.extent,\n    opaque: options.opaque,\n    projection: options.projection,\n    state: options.state,\n    tileGrid: options.tileGrid,\n    tileLoadFunction: options.tileLoadFunction ?\n      options.tileLoadFunction : defaultTileLoadFunction,\n    tilePixelRatio: options.tilePixelRatio,\n    tileUrlFunction: options.tileUrlFunction,\n    url: options.url,\n    urls: options.urls,\n    wrapX: options.wrapX,\n    transition: options.transition\n  });\n\n  /**\n   * @protected\n   * @type {?string}\n   */\n  this.crossOrigin =\n      options.crossOrigin !== undefined ? options.crossOrigin : null;\n\n  /**\n   * @protected\n   * @type {function(new: module:ol/ImageTile, module:ol/tilecoord~TileCoord, module:ol/TileState, string,\n   *        ?string, module:ol/Tile~LoadFunction, module:ol/Tile~Options=)}\n   */\n  this.tileClass = options.tileClass !== undefined ?\n    options.tileClass : ImageTile;\n\n  /**\n   * @protected\n   * @type {!Object.<string, module:ol/TileCache>}\n   */\n  this.tileCacheForProjection = {};\n\n  /**\n   * @protected\n   * @type {!Object.<string, module:ol/tilegrid/TileGrid>}\n   */\n  this.tileGridForProjection = {};\n\n  /**\n   * @private\n   * @type {number|undefined}\n   */\n  this.reprojectionErrorThreshold_ = options.reprojectionErrorThreshold;\n\n  /**\n   * @private\n   * @type {boolean}\n   */\n  this.renderReprojectionEdges_ = false;\n};\n\ninherits(TileImage, UrlTile);\n\n\n/**\n * @inheritDoc\n */\nTileImage.prototype.canExpireCache = function() {\n  if (!ENABLE_RASTER_REPROJECTION) {\n    return UrlTile.prototype.canExpireCache.call(this);\n  }\n  if (this.tileCache.canExpireCache()) {\n    return true;\n  } else {\n    for (const key in this.tileCacheForProjection) {\n      if (this.tileCacheForProjection[key].canExpireCache()) {\n        return true;\n      }\n    }\n  }\n  return false;\n};\n\n\n/**\n * @inheritDoc\n */\nTileImage.prototype.expireCache = function(projection, usedTiles) {\n  if (!ENABLE_RASTER_REPROJECTION) {\n    UrlTile.prototype.expireCache.call(this, projection, usedTiles);\n    return;\n  }\n  const usedTileCache = this.getTileCacheForProjection(projection);\n\n  this.tileCache.expireCache(this.tileCache == usedTileCache ? usedTiles : {});\n  for (const id in this.tileCacheForProjection) {\n    const tileCache = this.tileCacheForProjection[id];\n    tileCache.expireCache(tileCache == usedTileCache ? usedTiles : {});\n  }\n};\n\n\n/**\n * @inheritDoc\n */\nTileImage.prototype.getGutter = function(projection) {\n  if (ENABLE_RASTER_REPROJECTION &&\n      this.getProjection() && projection && !equivalent(this.getProjection(), projection)) {\n    return 0;\n  } else {\n    return this.getGutterInternal();\n  }\n};\n\n\n/**\n * @protected\n * @return {number} Gutter.\n */\nTileImage.prototype.getGutterInternal = function() {\n  return 0;\n};\n\n\n/**\n * @inheritDoc\n */\nTileImage.prototype.getOpaque = function(projection) {\n  if (ENABLE_RASTER_REPROJECTION &&\n      this.getProjection() && projection && !equivalent(this.getProjection(), projection)) {\n    return false;\n  } else {\n    return UrlTile.prototype.getOpaque.call(this, projection);\n  }\n};\n\n\n/**\n * @inheritDoc\n */\nTileImage.prototype.getTileGridForProjection = function(projection) {\n  if (!ENABLE_RASTER_REPROJECTION) {\n    return UrlTile.prototype.getTileGridForProjection.call(this, projection);\n  }\n  const thisProj = this.getProjection();\n  if (this.tileGrid && (!thisProj || equivalent(thisProj, projection))) {\n    return this.tileGrid;\n  } else {\n    const projKey = getUid(projection).toString();\n    if (!(projKey in this.tileGridForProjection)) {\n      this.tileGridForProjection[projKey] = getTileGridForProjection(projection);\n    }\n    return (\n      /** @type {!module:ol/tilegrid/TileGrid} */ (this.tileGridForProjection[projKey])\n    );\n  }\n};\n\n\n/**\n * @inheritDoc\n */\nTileImage.prototype.getTileCacheForProjection = function(projection) {\n  if (!ENABLE_RASTER_REPROJECTION) {\n    return UrlTile.prototype.getTileCacheForProjection.call(this, projection);\n  }\n  const thisProj = this.getProjection(); if (!thisProj || equivalent(thisProj, projection)) {\n    return this.tileCache;\n  } else {\n    const projKey = getUid(projection).toString();\n    if (!(projKey in this.tileCacheForProjection)) {\n      this.tileCacheForProjection[projKey] = new TileCache(this.tileCache.highWaterMark);\n    }\n    return this.tileCacheForProjection[projKey];\n  }\n};\n\n\n/**\n * @param {number} z Tile coordinate z.\n * @param {number} x Tile coordinate x.\n * @param {number} y Tile coordinate y.\n * @param {number} pixelRatio Pixel ratio.\n * @param {module:ol/proj/Projection} projection Projection.\n * @param {string} key The key set on the tile.\n * @return {!module:ol/Tile} Tile.\n * @private\n */\nTileImage.prototype.createTile_ = function(z, x, y, pixelRatio, projection, key) {\n  const tileCoord = [z, x, y];\n  const urlTileCoord = this.getTileCoordForTileUrlFunction(\n    tileCoord, projection);\n  const tileUrl = urlTileCoord ?\n    this.tileUrlFunction(urlTileCoord, pixelRatio, projection) : undefined;\n  const tile = new this.tileClass(\n    tileCoord,\n    tileUrl !== undefined ? TileState.IDLE : TileState.EMPTY,\n    tileUrl !== undefined ? tileUrl : '',\n    this.crossOrigin,\n    this.tileLoadFunction,\n    this.tileOptions);\n  tile.key = key;\n  listen(tile, EventType.CHANGE,\n    this.handleTileChange, this);\n  return tile;\n};\n\n\n/**\n * @inheritDoc\n */\nTileImage.prototype.getTile = function(z, x, y, pixelRatio, projection) {\n  const sourceProjection = /** @type {!module:ol/proj/Projection} */ (this.getProjection());\n  if (!ENABLE_RASTER_REPROJECTION ||\n      !sourceProjection || !projection || equivalent(sourceProjection, projection)) {\n    return this.getTileInternal(z, x, y, pixelRatio, sourceProjection || projection);\n  } else {\n    const cache = this.getTileCacheForProjection(projection);\n    const tileCoord = [z, x, y];\n    let tile;\n    const tileCoordKey = getKey(tileCoord);\n    if (cache.containsKey(tileCoordKey)) {\n      tile = /** @type {!module:ol/Tile} */ (cache.get(tileCoordKey));\n    }\n    const key = this.getKey();\n    if (tile && tile.key == key) {\n      return tile;\n    } else {\n      const sourceTileGrid = this.getTileGridForProjection(sourceProjection);\n      const targetTileGrid = this.getTileGridForProjection(projection);\n      const wrappedTileCoord =\n          this.getTileCoordForTileUrlFunction(tileCoord, projection);\n      const newTile = new ReprojTile(\n        sourceProjection, sourceTileGrid,\n        projection, targetTileGrid,\n        tileCoord, wrappedTileCoord, this.getTilePixelRatio(pixelRatio),\n        this.getGutterInternal(),\n        function(z, x, y, pixelRatio) {\n          return this.getTileInternal(z, x, y, pixelRatio, sourceProjection);\n        }.bind(this), this.reprojectionErrorThreshold_,\n        this.renderReprojectionEdges_);\n      newTile.key = key;\n\n      if (tile) {\n        newTile.interimTile = tile;\n        newTile.refreshInterimChain();\n        cache.replace(tileCoordKey, newTile);\n      } else {\n        cache.set(tileCoordKey, newTile);\n      }\n      return newTile;\n    }\n  }\n};\n\n\n/**\n * @param {number} z Tile coordinate z.\n * @param {number} x Tile coordinate x.\n * @param {number} y Tile coordinate y.\n * @param {number} pixelRatio Pixel ratio.\n * @param {!module:ol/proj/Projection} projection Projection.\n * @return {!module:ol/Tile} Tile.\n * @protected\n */\nTileImage.prototype.getTileInternal = function(z, x, y, pixelRatio, projection) {\n  let tile = null;\n  const tileCoordKey = getKeyZXY(z, x, y);\n  const key = this.getKey();\n  if (!this.tileCache.containsKey(tileCoordKey)) {\n    tile = this.createTile_(z, x, y, pixelRatio, projection, key);\n    this.tileCache.set(tileCoordKey, tile);\n  } else {\n    tile = this.tileCache.get(tileCoordKey);\n    if (tile.key != key) {\n      // The source's params changed. If the tile has an interim tile and if we\n      // can use it then we use it. Otherwise we create a new tile.  In both\n      // cases we attempt to assign an interim tile to the new tile.\n      const interimTile = tile;\n      tile = this.createTile_(z, x, y, pixelRatio, projection, key);\n\n      //make the new tile the head of the list,\n      if (interimTile.getState() == TileState.IDLE) {\n        //the old tile hasn't begun loading yet, and is now outdated, so we can simply discard it\n        tile.interimTile = interimTile.interimTile;\n      } else {\n        tile.interimTile = interimTile;\n      }\n      tile.refreshInterimChain();\n      this.tileCache.replace(tileCoordKey, tile);\n    }\n  }\n  return tile;\n};\n\n\n/**\n * Sets whether to render reprojection edges or not (usually for debugging).\n * @param {boolean} render Render the edges.\n * @api\n */\nTileImage.prototype.setRenderReprojectionEdges = function(render) {\n  if (!ENABLE_RASTER_REPROJECTION ||\n      this.renderReprojectionEdges_ == render) {\n    return;\n  }\n  this.renderReprojectionEdges_ = render;\n  for (const id in this.tileCacheForProjection) {\n    this.tileCacheForProjection[id].clear();\n  }\n  this.changed();\n};\n\n\n/**\n * Sets the tile grid to use when reprojecting the tiles to the given\n * projection instead of the default tile grid for the projection.\n *\n * This can be useful when the default tile grid cannot be created\n * (e.g. projection has no extent defined) or\n * for optimization reasons (custom tile size, resolutions, ...).\n *\n * @param {module:ol/proj~ProjectionLike} projection Projection.\n * @param {module:ol/tilegrid/TileGrid} tilegrid Tile grid to use for the projection.\n * @api\n */\nTileImage.prototype.setTileGridForProjection = function(projection, tilegrid) {\n  if (ENABLE_RASTER_REPROJECTION) {\n    const proj = getProjection(projection);\n    if (proj) {\n      const projKey = getUid(proj).toString();\n      if (!(projKey in this.tileGridForProjection)) {\n        this.tileGridForProjection[projKey] = tilegrid;\n      }\n    }\n  }\n};\n\n\n/**\n * @param {module:ol/ImageTile} imageTile Image tile.\n * @param {string} src Source.\n */\nfunction defaultTileLoadFunction(imageTile, src) {\n  imageTile.getImage().src = src;\n}\n\nexport default TileImage;\n","/**\n * @module ol/source/TileWMS\n */\n\nimport {DEFAULT_WMS_VERSION} from './common.js';\nimport {inherits} from '../util.js';\nimport {assert} from '../asserts.js';\nimport {buffer, createEmpty} from '../extent.js';\nimport {assign} from '../obj.js';\nimport {modulo} from '../math.js';\nimport {get as getProjection, transform, transformExtent} from '../proj.js';\nimport {calculateSourceResolution} from '../reproj.js';\nimport {toSize, buffer as bufferSize, scale as scaleSize} from '../size.js';\nimport TileImage from '../source/TileImage.js';\nimport WMSServerType from '../source/WMSServerType.js';\nimport {hash as tileCoordHash} from '../tilecoord.js';\nimport {compareVersions} from '../string.js';\nimport {appendParams} from '../uri.js';\n\n/**\n * @typedef {Object} Options\n * @property {module:ol/source/Source~AttributionLike} [attributions] Attributions.\n * @property {number} [cacheSize=2048] Cache size.\n * @property {null|string} [crossOrigin] The `crossOrigin` attribute for loaded images.  Note that\n * you must provide a `crossOrigin` value if you are using the WebGL renderer or if you want to\n * access pixel data with the Canvas renderer.  See\n * {@link https://developer.mozilla.org/en-US/docs/Web/HTML/CORS_enabled_image} for more detail.\n * @property {Object.<string,*>} params WMS request parameters.\n * At least a `LAYERS` param is required. `STYLES` is\n * `''` by default. `VERSION` is `1.3.0` by default. `WIDTH`, `HEIGHT`, `BBOX`\n * and `CRS` (`SRS` for WMS version < 1.3.0) will be set dynamically.\n * @property {number} [gutter=0]\n * The size in pixels of the gutter around image tiles to ignore. By setting\n * this property to a non-zero value, images will be requested that are wider\n * and taller than the tile size by a value of `2 x gutter`.\n * Using a non-zero value allows artifacts of rendering at tile edges to be\n * ignored. If you control the WMS service it is recommended to address\n * \"artifacts at tile edges\" issues by properly configuring the WMS service. For\n * example, MapServer has a `tile_map_edge_buffer` configuration parameter for\n * this. See http://mapserver.org/output/tile_mode.html.\n * @property {boolean} [hidpi=true] Use the `ol/Map#pixelRatio` value when requesting\n * the image from the remote server.\n * @property {module:ol/proj~ProjectionLike} projection Projection.\n * @property {boolean} [reprojectionErrorThreshold=0.5] Maximum allowed reprojection error (in pixels).\n * Higher values can increase reprojection performance, but decrease precision.\n * @property {module:ol/ImageTile~TileClass} [tileClass] Class used to instantiate image tiles.\n * Default is {@link module:ol/ImageTile~TileClass}.\n * @property {module:ol/tilegrid/TileGrid} [tileGrid] Tile grid. Base this on the resolutions,\n * tilesize and extent supported by the server.\n * If this is not defined, a default grid will be used: if there is a projection\n * extent, the grid will be based on that; if not, a grid based on a global\n * extent with origin at 0,0 will be used..\n * @property {module:ol/source/WMSServerType|string} [serverType]\n * The type of the remote WMS server. Currently only used when `hidpi` is\n * `true`.\n * @property {module:ol/Tile~LoadFunction} [tileLoadFunction] Optional function to load a tile given a URL. The default is\n * ```js\n * function(imageTile, src) {\n *   imageTile.getImage().src = src;\n * };\n * ```\n * @property {string} [url] WMS service URL.\n * @property {Array.<string>} [urls] WMS service urls.\n * Use this instead of `url` when the WMS supports multiple urls for GetMap requests.\n * @property {boolean} [wrapX=true] Whether to wrap the world horizontally.\n * When set to `false`, only one world\n * will be rendered. When `true`, tiles will be requested for one world only,\n * but they will be wrapped horizontally to render multiple worlds.\n * @property {number} [transition] Duration of the opacity transition for rendering.\n * To disable the opacity transition, pass `transition: 0`.\n */\n\n\n/**\n * @classdesc\n * Layer source for tile data from WMS servers.\n *\n * @constructor\n * @extends {module:ol/source/TileImage}\n * @param {module:ol/source/TileWMS~Options=} [opt_options] Tile WMS options.\n * @api\n */\nconst TileWMS = function(opt_options) {\n\n  const options = opt_options || {};\n\n  const params = options.params || {};\n\n  const transparent = 'TRANSPARENT' in params ? params['TRANSPARENT'] : true;\n\n  TileImage.call(this, {\n    attributions: options.attributions,\n    cacheSize: options.cacheSize,\n    crossOrigin: options.crossOrigin,\n    opaque: !transparent,\n    projection: options.projection,\n    reprojectionErrorThreshold: options.reprojectionErrorThreshold,\n    tileClass: options.tileClass,\n    tileGrid: options.tileGrid,\n    tileLoadFunction: options.tileLoadFunction,\n    url: options.url,\n    urls: options.urls,\n    wrapX: options.wrapX !== undefined ? options.wrapX : true,\n    transition: options.transition\n  });\n\n  /**\n   * @private\n   * @type {number}\n   */\n  this.gutter_ = options.gutter !== undefined ? options.gutter : 0;\n\n  /**\n   * @private\n   * @type {!Object}\n   */\n  this.params_ = params;\n\n  /**\n   * @private\n   * @type {boolean}\n   */\n  this.v13_ = true;\n\n  /**\n   * @private\n   * @type {module:ol/source/WMSServerType|undefined}\n   */\n  this.serverType_ = /** @type {module:ol/source/WMSServerType|undefined} */ (options.serverType);\n\n  /**\n   * @private\n   * @type {boolean}\n   */\n  this.hidpi_ = options.hidpi !== undefined ? options.hidpi : true;\n\n  /**\n   * @private\n   * @type {module:ol/extent~Extent}\n   */\n  this.tmpExtent_ = createEmpty();\n\n  this.updateV13_();\n  this.setKey(this.getKeyForParams_());\n\n};\n\ninherits(TileWMS, TileImage);\n\n\n/**\n * Return the GetFeatureInfo URL for the passed coordinate, resolution, and\n * projection. Return `undefined` if the GetFeatureInfo URL cannot be\n * constructed.\n * @param {module:ol/coordinate~Coordinate} coordinate Coordinate.\n * @param {number} resolution Resolution.\n * @param {module:ol/proj~ProjectionLike} projection Projection.\n * @param {!Object} params GetFeatureInfo params. `INFO_FORMAT` at least should\n *     be provided. If `QUERY_LAYERS` is not provided then the layers specified\n *     in the `LAYERS` parameter will be used. `VERSION` should not be\n *     specified here.\n * @return {string|undefined} GetFeatureInfo URL.\n * @api\n */\nTileWMS.prototype.getGetFeatureInfoUrl = function(coordinate, resolution, projection, params) {\n  const projectionObj = getProjection(projection);\n  const sourceProjectionObj = this.getProjection();\n\n  let tileGrid = this.getTileGrid();\n  if (!tileGrid) {\n    tileGrid = this.getTileGridForProjection(projectionObj);\n  }\n\n  const tileCoord = tileGrid.getTileCoordForCoordAndResolution(coordinate, resolution);\n\n  if (tileGrid.getResolutions().length <= tileCoord[0]) {\n    return undefined;\n  }\n\n  let tileResolution = tileGrid.getResolution(tileCoord[0]);\n  let tileExtent = tileGrid.getTileCoordExtent(tileCoord, this.tmpExtent_);\n  let tileSize = toSize(tileGrid.getTileSize(tileCoord[0]), this.tmpSize);\n\n\n  const gutter = this.gutter_;\n  if (gutter !== 0) {\n    tileSize = bufferSize(tileSize, gutter, this.tmpSize);\n    tileExtent = buffer(tileExtent, tileResolution * gutter, tileExtent);\n  }\n\n  if (sourceProjectionObj && sourceProjectionObj !== projectionObj) {\n    tileResolution = calculateSourceResolution(sourceProjectionObj, projectionObj, coordinate, tileResolution);\n    tileExtent = transformExtent(tileExtent, projectionObj, sourceProjectionObj);\n    coordinate = transform(coordinate, projectionObj, sourceProjectionObj);\n  }\n\n  const baseParams = {\n    'SERVICE': 'WMS',\n    'VERSION': DEFAULT_WMS_VERSION,\n    'REQUEST': 'GetFeatureInfo',\n    'FORMAT': 'image/png',\n    'TRANSPARENT': true,\n    'QUERY_LAYERS': this.params_['LAYERS']\n  };\n  assign(baseParams, this.params_, params);\n\n  const x = Math.floor((coordinate[0] - tileExtent[0]) / tileResolution);\n  const y = Math.floor((tileExtent[3] - coordinate[1]) / tileResolution);\n\n  baseParams[this.v13_ ? 'I' : 'X'] = x;\n  baseParams[this.v13_ ? 'J' : 'Y'] = y;\n\n  return this.getRequestUrl_(tileCoord, tileSize, tileExtent,\n    1, sourceProjectionObj || projectionObj, baseParams);\n};\n\n\n/**\n * @inheritDoc\n */\nTileWMS.prototype.getGutterInternal = function() {\n  return this.gutter_;\n};\n\n\n/**\n * Get the user-provided params, i.e. those passed to the constructor through\n * the \"params\" option, and possibly updated using the updateParams method.\n * @return {Object} Params.\n * @api\n */\nTileWMS.prototype.getParams = function() {\n  return this.params_;\n};\n\n\n/**\n * @param {module:ol/tilecoord~TileCoord} tileCoord Tile coordinate.\n * @param {module:ol/size~Size} tileSize Tile size.\n * @param {module:ol/extent~Extent} tileExtent Tile extent.\n * @param {number} pixelRatio Pixel ratio.\n * @param {module:ol/proj/Projection} projection Projection.\n * @param {Object} params Params.\n * @return {string|undefined} Request URL.\n * @private\n */\nTileWMS.prototype.getRequestUrl_ = function(tileCoord, tileSize, tileExtent,\n  pixelRatio, projection, params) {\n\n  const urls = this.urls;\n  if (!urls) {\n    return undefined;\n  }\n\n  params['WIDTH'] = tileSize[0];\n  params['HEIGHT'] = tileSize[1];\n\n  params[this.v13_ ? 'CRS' : 'SRS'] = projection.getCode();\n\n  if (!('STYLES' in this.params_)) {\n    params['STYLES'] = '';\n  }\n\n  if (pixelRatio != 1) {\n    switch (this.serverType_) {\n      case WMSServerType.GEOSERVER:\n        const dpi = (90 * pixelRatio + 0.5) | 0;\n        if ('FORMAT_OPTIONS' in params) {\n          params['FORMAT_OPTIONS'] += ';dpi:' + dpi;\n        } else {\n          params['FORMAT_OPTIONS'] = 'dpi:' + dpi;\n        }\n        break;\n      case WMSServerType.MAPSERVER:\n        params['MAP_RESOLUTION'] = 90 * pixelRatio;\n        break;\n      case WMSServerType.CARMENTA_SERVER:\n      case WMSServerType.QGIS:\n        params['DPI'] = 90 * pixelRatio;\n        break;\n      default:\n        assert(false, 52); // Unknown `serverType` configured\n        break;\n    }\n  }\n\n  const axisOrientation = projection.getAxisOrientation();\n  const bbox = tileExtent;\n  if (this.v13_ && axisOrientation.substr(0, 2) == 'ne') {\n    let tmp;\n    tmp = tileExtent[0];\n    bbox[0] = tileExtent[1];\n    bbox[1] = tmp;\n    tmp = tileExtent[2];\n    bbox[2] = tileExtent[3];\n    bbox[3] = tmp;\n  }\n  params['BBOX'] = bbox.join(',');\n\n  let url;\n  if (urls.length == 1) {\n    url = urls[0];\n  } else {\n    const index = modulo(tileCoordHash(tileCoord), urls.length);\n    url = urls[index];\n  }\n  return appendParams(url, params);\n};\n\n\n/**\n * @inheritDoc\n */\nTileWMS.prototype.getTilePixelRatio = function(pixelRatio) {\n  return (!this.hidpi_ || this.serverType_ === undefined) ? 1 :\n  /** @type {number} */ (pixelRatio);\n};\n\n\n/**\n * @private\n * @return {string} The key for the current params.\n */\nTileWMS.prototype.getKeyForParams_ = function() {\n  let i = 0;\n  const res = [];\n  for (const key in this.params_) {\n    res[i++] = key + '-' + this.params_[key];\n  }\n  return res.join('/');\n};\n\n\n/**\n * @inheritDoc\n */\nTileWMS.prototype.fixedTileUrlFunction = function(tileCoord, pixelRatio, projection) {\n\n  let tileGrid = this.getTileGrid();\n  if (!tileGrid) {\n    tileGrid = this.getTileGridForProjection(projection);\n  }\n\n  if (tileGrid.getResolutions().length <= tileCoord[0]) {\n    return undefined;\n  }\n\n  if (pixelRatio != 1 && (!this.hidpi_ || this.serverType_ === undefined)) {\n    pixelRatio = 1;\n  }\n\n  const tileResolution = tileGrid.getResolution(tileCoord[0]);\n  let tileExtent = tileGrid.getTileCoordExtent(tileCoord, this.tmpExtent_);\n  let tileSize = toSize(\n    tileGrid.getTileSize(tileCoord[0]), this.tmpSize);\n\n  const gutter = this.gutter_;\n  if (gutter !== 0) {\n    tileSize = bufferSize(tileSize, gutter, this.tmpSize);\n    tileExtent = buffer(tileExtent, tileResolution * gutter, tileExtent);\n  }\n\n  if (pixelRatio != 1) {\n    tileSize = scaleSize(tileSize, pixelRatio, this.tmpSize);\n  }\n\n  const baseParams = {\n    'SERVICE': 'WMS',\n    'VERSION': DEFAULT_WMS_VERSION,\n    'REQUEST': 'GetMap',\n    'FORMAT': 'image/png',\n    'TRANSPARENT': true\n  };\n  assign(baseParams, this.params_);\n\n  return this.getRequestUrl_(tileCoord, tileSize, tileExtent,\n    pixelRatio, projection, baseParams);\n};\n\n/**\n * Update the user-provided params.\n * @param {Object} params Params.\n * @api\n */\nTileWMS.prototype.updateParams = function(params) {\n  assign(this.params_, params);\n  this.updateV13_();\n  this.setKey(this.getKeyForParams_());\n};\n\n\n/**\n * @private\n */\nTileWMS.prototype.updateV13_ = function() {\n  const version = this.params_['VERSION'] || DEFAULT_WMS_VERSION;\n  this.v13_ = compareVersions(version, '1.3') >= 0;\n};\nexport default TileWMS;\n","/**\n * @module ol/geom/MultiPoint\n */\nimport {inherits} from '../util.js';\nimport {extend} from '../array.js';\nimport {closestSquaredDistanceXY, containsXY} from '../extent.js';\nimport GeometryLayout from '../geom/GeometryLayout.js';\nimport GeometryType from '../geom/GeometryType.js';\nimport Point from '../geom/Point.js';\nimport SimpleGeometry from '../geom/SimpleGeometry.js';\nimport {deflateCoordinates} from '../geom/flat/deflate.js';\nimport {inflateCoordinates} from '../geom/flat/inflate.js';\nimport {squaredDistance as squaredDx} from '../math.js';\n\n/**\n * @classdesc\n * Multi-point geometry.\n *\n * @constructor\n * @extends {module:ol/geom/SimpleGeometry}\n * @param {Array.<module:ol/coordinate~Coordinate>} coordinates Coordinates.\n * @param {module:ol/geom/GeometryLayout=} opt_layout Layout.\n * @api\n */\nconst MultiPoint = function(coordinates, opt_layout) {\n  SimpleGeometry.call(this);\n  this.setCoordinates(coordinates, opt_layout);\n};\n\ninherits(MultiPoint, SimpleGeometry);\n\n\n/**\n * Append the passed point to this multipoint.\n * @param {module:ol/geom/Point} point Point.\n * @api\n */\nMultiPoint.prototype.appendPoint = function(point) {\n  if (!this.flatCoordinates) {\n    this.flatCoordinates = point.getFlatCoordinates().slice();\n  } else {\n    extend(this.flatCoordinates, point.getFlatCoordinates());\n  }\n  this.changed();\n};\n\n\n/**\n * Make a complete copy of the geometry.\n * @return {!module:ol/geom/MultiPoint} Clone.\n * @override\n * @api\n */\nMultiPoint.prototype.clone = function() {\n  const multiPoint = new MultiPoint(null);\n  multiPoint.setFlatCoordinates(this.layout, this.flatCoordinates.slice());\n  return multiPoint;\n};\n\n\n/**\n * @inheritDoc\n */\nMultiPoint.prototype.closestPointXY = function(x, y, closestPoint, minSquaredDistance) {\n  if (minSquaredDistance < closestSquaredDistanceXY(this.getExtent(), x, y)) {\n    return minSquaredDistance;\n  }\n  const flatCoordinates = this.flatCoordinates;\n  const stride = this.stride;\n  for (let i = 0, ii = flatCoordinates.length; i < ii; i += stride) {\n    const squaredDistance = squaredDx(\n      x, y, flatCoordinates[i], flatCoordinates[i + 1]);\n    if (squaredDistance < minSquaredDistance) {\n      minSquaredDistance = squaredDistance;\n      for (let j = 0; j < stride; ++j) {\n        closestPoint[j] = flatCoordinates[i + j];\n      }\n      closestPoint.length = stride;\n    }\n  }\n  return minSquaredDistance;\n};\n\n\n/**\n * Return the coordinates of the multipoint.\n * @return {Array.<module:ol/coordinate~Coordinate>} Coordinates.\n * @override\n * @api\n */\nMultiPoint.prototype.getCoordinates = function() {\n  return inflateCoordinates(\n    this.flatCoordinates, 0, this.flatCoordinates.length, this.stride);\n};\n\n\n/**\n * Return the point at the specified index.\n * @param {number} index Index.\n * @return {module:ol/geom/Point} Point.\n * @api\n */\nMultiPoint.prototype.getPoint = function(index) {\n  const n = !this.flatCoordinates ? 0 : this.flatCoordinates.length / this.stride;\n  if (index < 0 || n <= index) {\n    return null;\n  }\n  const point = new Point(null);\n  point.setFlatCoordinates(this.layout, this.flatCoordinates.slice(\n    index * this.stride, (index + 1) * this.stride));\n  return point;\n};\n\n\n/**\n * Return the points of this multipoint.\n * @return {Array.<module:ol/geom/Point>} Points.\n * @api\n */\nMultiPoint.prototype.getPoints = function() {\n  const flatCoordinates = this.flatCoordinates;\n  const layout = this.layout;\n  const stride = this.stride;\n  /** @type {Array.<module:ol/geom/Point>} */\n  const points = [];\n  for (let i = 0, ii = flatCoordinates.length; i < ii; i += stride) {\n    const point = new Point(null);\n    point.setFlatCoordinates(layout, flatCoordinates.slice(i, i + stride));\n    points.push(point);\n  }\n  return points;\n};\n\n\n/**\n * @inheritDoc\n * @api\n */\nMultiPoint.prototype.getType = function() {\n  return GeometryType.MULTI_POINT;\n};\n\n\n/**\n * @inheritDoc\n * @api\n */\nMultiPoint.prototype.intersectsExtent = function(extent) {\n  const flatCoordinates = this.flatCoordinates;\n  const stride = this.stride;\n  for (let i = 0, ii = flatCoordinates.length; i < ii; i += stride) {\n    const x = flatCoordinates[i];\n    const y = flatCoordinates[i + 1];\n    if (containsXY(extent, x, y)) {\n      return true;\n    }\n  }\n  return false;\n};\n\n\n/**\n * Set the coordinates of the multipoint.\n * @param {Array.<module:ol/coordinate~Coordinate>} coordinates Coordinates.\n * @param {module:ol/geom/GeometryLayout=} opt_layout Layout.\n * @override\n * @api\n */\nMultiPoint.prototype.setCoordinates = function(coordinates, opt_layout) {\n  if (!coordinates) {\n    this.setFlatCoordinates(GeometryLayout.XY, null);\n  } else {\n    this.setLayout(opt_layout, coordinates, 1);\n    if (!this.flatCoordinates) {\n      this.flatCoordinates = [];\n    }\n    this.flatCoordinates.length = deflateCoordinates(\n      this.flatCoordinates, 0, coordinates, this.stride);\n    this.changed();\n  }\n};\n\n\n/**\n * @param {module:ol/geom/GeometryLayout} layout Layout.\n * @param {Array.<number>} flatCoordinates Flat coordinates.\n */\nMultiPoint.prototype.setFlatCoordinates = function(layout, flatCoordinates) {\n  this.setFlatCoordinatesInternal(layout, flatCoordinates);\n  this.changed();\n};\nexport default MultiPoint;\n","/**\n * @module ol/geom/MultiLineString\n */\nimport {inherits} from '../util.js';\nimport {extend} from '../array.js';\nimport {closestSquaredDistanceXY} from '../extent.js';\nimport GeometryLayout from '../geom/GeometryLayout.js';\nimport GeometryType from '../geom/GeometryType.js';\nimport LineString from '../geom/LineString.js';\nimport SimpleGeometry from '../geom/SimpleGeometry.js';\nimport {assignClosestArrayPoint, arrayMaxSquaredDelta} from '../geom/flat/closest.js';\nimport {deflateCoordinatesArray} from '../geom/flat/deflate.js';\nimport {inflateCoordinatesArray} from '../geom/flat/inflate.js';\nimport {interpolatePoint, lineStringsCoordinateAtM} from '../geom/flat/interpolate.js';\nimport {intersectsLineStringArray} from '../geom/flat/intersectsextent.js';\nimport {douglasPeuckerArray} from '../geom/flat/simplify.js';\n\n/**\n * @classdesc\n * Multi-linestring geometry.\n *\n * @constructor\n * @extends {module:ol/geom/SimpleGeometry}\n * @param {Array.<Array.<module:ol/coordinate~Coordinate>>} coordinates Coordinates.\n * @param {module:ol/geom/GeometryLayout=} opt_layout Layout.\n * @api\n */\nconst MultiLineString = function(coordinates, opt_layout) {\n\n  SimpleGeometry.call(this);\n\n  /**\n   * @type {Array.<number>}\n   * @private\n   */\n  this.ends_ = [];\n\n  /**\n   * @private\n   * @type {number}\n   */\n  this.maxDelta_ = -1;\n\n  /**\n   * @private\n   * @type {number}\n   */\n  this.maxDeltaRevision_ = -1;\n\n  this.setCoordinates(coordinates, opt_layout);\n\n};\n\ninherits(MultiLineString, SimpleGeometry);\n\n\n/**\n * Append the passed linestring to the multilinestring.\n * @param {module:ol/geom/LineString} lineString LineString.\n * @api\n */\nMultiLineString.prototype.appendLineString = function(lineString) {\n  if (!this.flatCoordinates) {\n    this.flatCoordinates = lineString.getFlatCoordinates().slice();\n  } else {\n    extend(this.flatCoordinates, lineString.getFlatCoordinates().slice());\n  }\n  this.ends_.push(this.flatCoordinates.length);\n  this.changed();\n};\n\n\n/**\n * Make a complete copy of the geometry.\n * @return {!module:ol/geom/MultiLineString} Clone.\n * @override\n * @api\n */\nMultiLineString.prototype.clone = function() {\n  const multiLineString = new MultiLineString(null);\n  multiLineString.setFlatCoordinates(\n    this.layout, this.flatCoordinates.slice(), this.ends_.slice());\n  return multiLineString;\n};\n\n\n/**\n * @inheritDoc\n */\nMultiLineString.prototype.closestPointXY = function(x, y, closestPoint, minSquaredDistance) {\n  if (minSquaredDistance < closestSquaredDistanceXY(this.getExtent(), x, y)) {\n    return minSquaredDistance;\n  }\n  if (this.maxDeltaRevision_ != this.getRevision()) {\n    this.maxDelta_ = Math.sqrt(arrayMaxSquaredDelta(\n      this.flatCoordinates, 0, this.ends_, this.stride, 0));\n    this.maxDeltaRevision_ = this.getRevision();\n  }\n  return assignClosestArrayPoint(\n    this.flatCoordinates, 0, this.ends_, this.stride,\n    this.maxDelta_, false, x, y, closestPoint, minSquaredDistance);\n};\n\n\n/**\n * Returns the coordinate at `m` using linear interpolation, or `null` if no\n * such coordinate exists.\n *\n * `opt_extrapolate` controls extrapolation beyond the range of Ms in the\n * MultiLineString. If `opt_extrapolate` is `true` then Ms less than the first\n * M will return the first coordinate and Ms greater than the last M will\n * return the last coordinate.\n *\n * `opt_interpolate` controls interpolation between consecutive LineStrings\n * within the MultiLineString. If `opt_interpolate` is `true` the coordinates\n * will be linearly interpolated between the last coordinate of one LineString\n * and the first coordinate of the next LineString.  If `opt_interpolate` is\n * `false` then the function will return `null` for Ms falling between\n * LineStrings.\n *\n * @param {number} m M.\n * @param {boolean=} opt_extrapolate Extrapolate. Default is `false`.\n * @param {boolean=} opt_interpolate Interpolate. Default is `false`.\n * @return {module:ol/coordinate~Coordinate} Coordinate.\n * @api\n */\nMultiLineString.prototype.getCoordinateAtM = function(m, opt_extrapolate, opt_interpolate) {\n  if ((this.layout != GeometryLayout.XYM &&\n       this.layout != GeometryLayout.XYZM) ||\n      this.flatCoordinates.length === 0) {\n    return null;\n  }\n  const extrapolate = opt_extrapolate !== undefined ? opt_extrapolate : false;\n  const interpolate = opt_interpolate !== undefined ? opt_interpolate : false;\n  return lineStringsCoordinateAtM(this.flatCoordinates, 0,\n    this.ends_, this.stride, m, extrapolate, interpolate);\n};\n\n\n/**\n * Return the coordinates of the multilinestring.\n * @return {Array.<Array.<module:ol/coordinate~Coordinate>>} Coordinates.\n * @override\n * @api\n */\nMultiLineString.prototype.getCoordinates = function() {\n  return inflateCoordinatesArray(\n    this.flatCoordinates, 0, this.ends_, this.stride);\n};\n\n\n/**\n * @return {Array.<number>} Ends.\n */\nMultiLineString.prototype.getEnds = function() {\n  return this.ends_;\n};\n\n\n/**\n * Return the linestring at the specified index.\n * @param {number} index Index.\n * @return {module:ol/geom/LineString} LineString.\n * @api\n */\nMultiLineString.prototype.getLineString = function(index) {\n  if (index < 0 || this.ends_.length <= index) {\n    return null;\n  }\n  const lineString = new LineString(null);\n  lineString.setFlatCoordinates(this.layout, this.flatCoordinates.slice(\n    index === 0 ? 0 : this.ends_[index - 1], this.ends_[index]));\n  return lineString;\n};\n\n\n/**\n * Return the linestrings of this multilinestring.\n * @return {Array.<module:ol/geom/LineString>} LineStrings.\n * @api\n */\nMultiLineString.prototype.getLineStrings = function() {\n  const flatCoordinates = this.flatCoordinates;\n  const ends = this.ends_;\n  const layout = this.layout;\n  /** @type {Array.<module:ol/geom/LineString>} */\n  const lineStrings = [];\n  let offset = 0;\n  for (let i = 0, ii = ends.length; i < ii; ++i) {\n    const end = ends[i];\n    const lineString = new LineString(null);\n    lineString.setFlatCoordinates(layout, flatCoordinates.slice(offset, end));\n    lineStrings.push(lineString);\n    offset = end;\n  }\n  return lineStrings;\n};\n\n\n/**\n * @return {Array.<number>} Flat midpoints.\n */\nMultiLineString.prototype.getFlatMidpoints = function() {\n  const midpoints = [];\n  const flatCoordinates = this.flatCoordinates;\n  let offset = 0;\n  const ends = this.ends_;\n  const stride = this.stride;\n  for (let i = 0, ii = ends.length; i < ii; ++i) {\n    const end = ends[i];\n    const midpoint = interpolatePoint(\n      flatCoordinates, offset, end, stride, 0.5);\n    extend(midpoints, midpoint);\n    offset = end;\n  }\n  return midpoints;\n};\n\n\n/**\n * @inheritDoc\n */\nMultiLineString.prototype.getSimplifiedGeometryInternal = function(squaredTolerance) {\n  const simplifiedFlatCoordinates = [];\n  const simplifiedEnds = [];\n  simplifiedFlatCoordinates.length = douglasPeuckerArray(\n    this.flatCoordinates, 0, this.ends_, this.stride, squaredTolerance,\n    simplifiedFlatCoordinates, 0, simplifiedEnds);\n  const simplifiedMultiLineString = new MultiLineString(null);\n  simplifiedMultiLineString.setFlatCoordinates(\n    GeometryLayout.XY, simplifiedFlatCoordinates, simplifiedEnds);\n  return simplifiedMultiLineString;\n};\n\n\n/**\n * @inheritDoc\n * @api\n */\nMultiLineString.prototype.getType = function() {\n  return GeometryType.MULTI_LINE_STRING;\n};\n\n\n/**\n * @inheritDoc\n * @api\n */\nMultiLineString.prototype.intersectsExtent = function(extent) {\n  return intersectsLineStringArray(\n    this.flatCoordinates, 0, this.ends_, this.stride, extent);\n};\n\n\n/**\n * Set the coordinates of the multilinestring.\n * @param {Array.<Array.<module:ol/coordinate~Coordinate>>} coordinates Coordinates.\n * @param {module:ol/geom/GeometryLayout=} opt_layout Layout.\n * @override\n * @api\n */\nMultiLineString.prototype.setCoordinates = function(coordinates, opt_layout) {\n  if (!coordinates) {\n    this.setFlatCoordinates(GeometryLayout.XY, null, this.ends_);\n  } else {\n    this.setLayout(opt_layout, coordinates, 2);\n    if (!this.flatCoordinates) {\n      this.flatCoordinates = [];\n    }\n    const ends = deflateCoordinatesArray(\n      this.flatCoordinates, 0, coordinates, this.stride, this.ends_);\n    this.flatCoordinates.length = ends.length === 0 ? 0 : ends[ends.length - 1];\n    this.changed();\n  }\n};\n\n\n/**\n * @param {module:ol/geom/GeometryLayout} layout Layout.\n * @param {Array.<number>} flatCoordinates Flat coordinates.\n * @param {Array.<number>} ends Ends.\n */\nMultiLineString.prototype.setFlatCoordinates = function(layout, flatCoordinates, ends) {\n  this.setFlatCoordinatesInternal(layout, flatCoordinates);\n  this.ends_ = ends;\n  this.changed();\n};\n\n\n/**\n * @param {Array.<module:ol/geom/LineString>} lineStrings LineStrings.\n */\nMultiLineString.prototype.setLineStrings = function(lineStrings) {\n  let layout = this.getLayout();\n  const flatCoordinates = [];\n  const ends = [];\n  for (let i = 0, ii = lineStrings.length; i < ii; ++i) {\n    const lineString = lineStrings[i];\n    if (i === 0) {\n      layout = lineString.getLayout();\n    }\n    extend(flatCoordinates, lineString.getFlatCoordinates());\n    ends.push(flatCoordinates.length);\n  }\n  this.setFlatCoordinates(layout, flatCoordinates, ends);\n};\nexport default MultiLineString;\n","/**\n * @module ol/source/Stamen\n */\nimport {inherits} from '../util.js';\nimport {ATTRIBUTION as OSM_ATTRIBUTION} from '../source/OSM.js';\nimport XYZ from '../source/XYZ.js';\n\n\n/**\n * @const\n * @type {Array.<string>}\n */\nconst ATTRIBUTIONS = [\n  'Map tiles by <a href=\"https://stamen.com/\">Stamen Design</a>, ' +\n        'under <a href=\"https://creativecommons.org/licenses/by/3.0/\">CC BY' +\n        ' 3.0</a>.',\n  OSM_ATTRIBUTION\n];\n\n\n/**\n * @type {Object.<string, {extension: string, opaque: boolean}>}\n */\nconst LayerConfig = {\n  'terrain': {\n    extension: 'jpg',\n    opaque: true\n  },\n  'terrain-background': {\n    extension: 'jpg',\n    opaque: true\n  },\n  'terrain-labels': {\n    extension: 'png',\n    opaque: false\n  },\n  'terrain-lines': {\n    extension: 'png',\n    opaque: false\n  },\n  'toner-background': {\n    extension: 'png',\n    opaque: true\n  },\n  'toner': {\n    extension: 'png',\n    opaque: true\n  },\n  'toner-hybrid': {\n    extension: 'png',\n    opaque: false\n  },\n  'toner-labels': {\n    extension: 'png',\n    opaque: false\n  },\n  'toner-lines': {\n    extension: 'png',\n    opaque: false\n  },\n  'toner-lite': {\n    extension: 'png',\n    opaque: true\n  },\n  'watercolor': {\n    extension: 'jpg',\n    opaque: true\n  }\n};\n\n\n/**\n * @type {Object.<string, {minZoom: number, maxZoom: number}>}\n */\nconst ProviderConfig = {\n  'terrain': {\n    minZoom: 4,\n    maxZoom: 18\n  },\n  'toner': {\n    minZoom: 0,\n    maxZoom: 20\n  },\n  'watercolor': {\n    minZoom: 1,\n    maxZoom: 16\n  }\n};\n\n\n/**\n * @typedef {Object} Options\n * @property {number} [cacheSize=2048] Cache size.\n * @property {string} [layer] Layer.\n * @property {number} [minZoom] Minimum zoom.\n * @property {number} [maxZoom] Maximum zoom.\n * @property {boolean} [opaque] Whether the layer is opaque.\n * @property {boolean} [reprojectionErrorThreshold=0.5] Maximum allowed reprojection error (in pixels).\n * Higher values can increase reprojection performance, but decrease precision.\n * @property {module:ol/Tile~LoadFunction} [tileLoadFunction]\n * Optional function to load a tile given a URL. The default is\n * ```js\n * function(imageTile, src) {\n *   imageTile.getImage().src = src;\n * };\n * ```\n * @property {string} [url] URL template. Must include `{x}`, `{y}` or `{-y}`, and `{z}` placeholders.\n * @property {boolean} [wrapX=true] Whether to wrap the world horizontally.\n */\n\n\n/**\n * @classdesc\n * Layer source for the Stamen tile server.\n *\n * @constructor\n * @extends {module:ol/source/XYZ}\n * @param {module:ol/source/Stamen~Options=} options Stamen options.\n * @api\n */\nconst Stamen = function(options) {\n  const i = options.layer.indexOf('-');\n  const provider = i == -1 ? options.layer : options.layer.slice(0, i);\n  const providerConfig = ProviderConfig[provider];\n\n  const layerConfig = LayerConfig[options.layer];\n\n  const url = options.url !== undefined ? options.url :\n    'https://stamen-tiles-{a-d}.a.ssl.fastly.net/' + options.layer +\n      '/{z}/{x}/{y}.' + layerConfig.extension;\n\n  XYZ.call(this, {\n    attributions: ATTRIBUTIONS,\n    cacheSize: options.cacheSize,\n    crossOrigin: 'anonymous',\n    maxZoom: options.maxZoom != undefined ? options.maxZoom : providerConfig.maxZoom,\n    minZoom: options.minZoom != undefined ? options.minZoom : providerConfig.minZoom,\n    opaque: layerConfig.opaque,\n    reprojectionErrorThreshold: options.reprojectionErrorThreshold,\n    tileLoadFunction: options.tileLoadFunction,\n    url: url,\n    wrapX: options.wrapX\n  });\n};\n\ninherits(Stamen, XYZ);\n\nexport default Stamen;\n","/**\n * @module ol/reproj/Image\n */\nimport {ERROR_THRESHOLD} from './common.js';\nimport {inherits} from '../util.js';\nimport ImageBase from '../ImageBase.js';\nimport ImageState from '../ImageState.js';\nimport {listen, unlistenByKey} from '../events.js';\nimport EventType from '../events/EventType.js';\nimport {getCenter, getIntersection, getHeight, getWidth} from '../extent.js';\nimport {calculateSourceResolution, render as renderReprojected} from '../reproj.js';\nimport Triangulation from '../reproj/Triangulation.js';\n\n\n/**\n * @typedef {function(module:ol/extent~Extent, number, number) : module:ol/ImageBase} FunctionType\n */\n\n\n/**\n * @classdesc\n * Class encapsulating single reprojected image.\n * See {@link module:ol/source/Image~ImageSource}.\n *\n * @constructor\n * @extends {module:ol/ImageBase}\n * @param {module:ol/proj/Projection} sourceProj Source projection (of the data).\n * @param {module:ol/proj/Projection} targetProj Target projection.\n * @param {module:ol/extent~Extent} targetExtent Target extent.\n * @param {number} targetResolution Target resolution.\n * @param {number} pixelRatio Pixel ratio.\n * @param {module:ol/reproj/Image~FunctionType} getImageFunction\n *     Function returning source images (extent, resolution, pixelRatio).\n */\nconst ReprojImage = function(sourceProj, targetProj,\n  targetExtent, targetResolution, pixelRatio, getImageFunction) {\n\n  /**\n   * @private\n   * @type {module:ol/proj/Projection}\n   */\n  this.targetProj_ = targetProj;\n\n  /**\n   * @private\n   * @type {module:ol/extent~Extent}\n   */\n  this.maxSourceExtent_ = sourceProj.getExtent();\n  const maxTargetExtent = targetProj.getExtent();\n\n  const limitedTargetExtent = maxTargetExtent ?\n    getIntersection(targetExtent, maxTargetExtent) : targetExtent;\n\n  const targetCenter = getCenter(limitedTargetExtent);\n  const sourceResolution = calculateSourceResolution(\n    sourceProj, targetProj, targetCenter, targetResolution);\n\n  const errorThresholdInPixels = ERROR_THRESHOLD;\n\n  /**\n   * @private\n   * @type {!module:ol/reproj/Triangulation}\n   */\n  this.triangulation_ = new Triangulation(\n    sourceProj, targetProj, limitedTargetExtent, this.maxSourceExtent_,\n    sourceResolution * errorThresholdInPixels);\n\n  /**\n   * @private\n   * @type {number}\n   */\n  this.targetResolution_ = targetResolution;\n\n  /**\n   * @private\n   * @type {module:ol/extent~Extent}\n   */\n  this.targetExtent_ = targetExtent;\n\n  const sourceExtent = this.triangulation_.calculateSourceExtent();\n\n  /**\n   * @private\n   * @type {module:ol/ImageBase}\n   */\n  this.sourceImage_ =\n      getImageFunction(sourceExtent, sourceResolution, pixelRatio);\n\n  /**\n   * @private\n   * @type {number}\n   */\n  this.sourcePixelRatio_ =\n      this.sourceImage_ ? this.sourceImage_.getPixelRatio() : 1;\n\n  /**\n   * @private\n   * @type {HTMLCanvasElement}\n   */\n  this.canvas_ = null;\n\n  /**\n   * @private\n   * @type {?module:ol/events~EventsKey}\n   */\n  this.sourceListenerKey_ = null;\n\n\n  let state = ImageState.LOADED;\n\n  if (this.sourceImage_) {\n    state = ImageState.IDLE;\n  }\n\n  ImageBase.call(this, targetExtent, targetResolution, this.sourcePixelRatio_, state);\n};\n\ninherits(ReprojImage, ImageBase);\n\n\n/**\n * @inheritDoc\n */\nReprojImage.prototype.disposeInternal = function() {\n  if (this.state == ImageState.LOADING) {\n    this.unlistenSource_();\n  }\n  ImageBase.prototype.disposeInternal.call(this);\n};\n\n\n/**\n * @inheritDoc\n */\nReprojImage.prototype.getImage = function() {\n  return this.canvas_;\n};\n\n\n/**\n * @return {module:ol/proj/Projection} Projection.\n */\nReprojImage.prototype.getProjection = function() {\n  return this.targetProj_;\n};\n\n\n/**\n * @private\n */\nReprojImage.prototype.reproject_ = function() {\n  const sourceState = this.sourceImage_.getState();\n  if (sourceState == ImageState.LOADED) {\n    const width = getWidth(this.targetExtent_) / this.targetResolution_;\n    const height = getHeight(this.targetExtent_) / this.targetResolution_;\n\n    this.canvas_ = renderReprojected(width, height, this.sourcePixelRatio_,\n      this.sourceImage_.getResolution(), this.maxSourceExtent_,\n      this.targetResolution_, this.targetExtent_, this.triangulation_, [{\n        extent: this.sourceImage_.getExtent(),\n        image: this.sourceImage_.getImage()\n      }], 0);\n  }\n  this.state = sourceState;\n  this.changed();\n};\n\n\n/**\n * @inheritDoc\n */\nReprojImage.prototype.load = function() {\n  if (this.state == ImageState.IDLE) {\n    this.state = ImageState.LOADING;\n    this.changed();\n\n    const sourceState = this.sourceImage_.getState();\n    if (sourceState == ImageState.LOADED || sourceState == ImageState.ERROR) {\n      this.reproject_();\n    } else {\n      this.sourceListenerKey_ = listen(this.sourceImage_,\n        EventType.CHANGE, function(e) {\n          const sourceState = this.sourceImage_.getState();\n          if (sourceState == ImageState.LOADED || sourceState == ImageState.ERROR) {\n            this.unlistenSource_();\n            this.reproject_();\n          }\n        }, this);\n      this.sourceImage_.load();\n    }\n  }\n};\n\n\n/**\n * @private\n */\nReprojImage.prototype.unlistenSource_ = function() {\n  unlistenByKey(/** @type {!module:ol/events~EventsKey} */ (this.sourceListenerKey_));\n  this.sourceListenerKey_ = null;\n};\nexport default ReprojImage;\n","/**\n * @module ol/source/Image\n */\nimport {ENABLE_RASTER_REPROJECTION} from '../reproj/common.js';\nimport {inherits} from '../util.js';\nimport ImageState from '../ImageState.js';\nimport {linearFindNearest} from '../array.js';\nimport Event from '../events/Event.js';\nimport {equals} from '../extent.js';\nimport {equivalent} from '../proj.js';\nimport ReprojImage from '../reproj/Image.js';\nimport Source from '../source/Source.js';\n\n\n/**\n * @enum {string}\n */\nconst ImageSourceEventType = {\n\n  /**\n   * Triggered when an image starts loading.\n   * @event ol/source/Image~ImageSourceEvent#imageloadstart\n   * @api\n   */\n  IMAGELOADSTART: 'imageloadstart',\n\n  /**\n   * Triggered when an image finishes loading.\n   * @event ol/source/Image~ImageSourceEvent#imageloadend\n   * @api\n   */\n  IMAGELOADEND: 'imageloadend',\n\n  /**\n   * Triggered if image loading results in an error.\n   * @event ol/source/Image~ImageSourceEvent#imageloaderror\n   * @api\n   */\n  IMAGELOADERROR: 'imageloaderror'\n\n};\n\n\n/**\n * @classdesc\n * Events emitted by {@link module:ol/source/Image~ImageSource} instances are instances of this\n * type.\n *\n * @constructor\n * @extends {module:ol/events/Event}\n * @param {string} type Type.\n * @param {module:ol/Image} image The image.\n */\nconst ImageSourceEvent = function(type, image) {\n\n  Event.call(this, type);\n\n  /**\n   * The image related to the event.\n   * @type {module:ol/Image}\n   * @api\n   */\n  this.image = image;\n\n};\ninherits(ImageSourceEvent, Event);\n\n\n/**\n * @typedef {Object} Options\n * @property {module:ol/source/Source~AttributionLike} [attributions]\n * @property {module:ol/extent~Extent} [extent]\n * @property {module:ol/proj~ProjectionLike} projection\n * @property {Array.<number>} [resolutions]\n * @property {module:ol/source/State} [state]\n */\n\n\n/**\n * @classdesc\n * Abstract base class; normally only used for creating subclasses and not\n * instantiated in apps.\n * Base class for sources providing a single image.\n *\n * @constructor\n * @abstract\n * @extends {module:ol/source/Source}\n * @param {module:ol/source/Image~Options} options Single image source options.\n * @api\n */\nconst ImageSource = function(options) {\n  Source.call(this, {\n    attributions: options.attributions,\n    extent: options.extent,\n    projection: options.projection,\n    state: options.state\n  });\n\n  /**\n   * @private\n   * @type {Array.<number>}\n   */\n  this.resolutions_ = options.resolutions !== undefined ?\n    options.resolutions : null;\n\n\n  /**\n   * @private\n   * @type {module:ol/reproj/Image}\n   */\n  this.reprojectedImage_ = null;\n\n\n  /**\n   * @private\n   * @type {number}\n   */\n  this.reprojectedRevision_ = 0;\n};\n\ninherits(ImageSource, Source);\n\n\n/**\n * @return {Array.<number>} Resolutions.\n * @override\n */\nImageSource.prototype.getResolutions = function() {\n  return this.resolutions_;\n};\n\n\n/**\n * @protected\n * @param {number} resolution Resolution.\n * @return {number} Resolution.\n */\nImageSource.prototype.findNearestResolution = function(resolution) {\n  if (this.resolutions_) {\n    const idx = linearFindNearest(this.resolutions_, resolution, 0);\n    resolution = this.resolutions_[idx];\n  }\n  return resolution;\n};\n\n\n/**\n * @param {module:ol/extent~Extent} extent Extent.\n * @param {number} resolution Resolution.\n * @param {number} pixelRatio Pixel ratio.\n * @param {module:ol/proj/Projection} projection Projection.\n * @return {module:ol/ImageBase} Single image.\n */\nImageSource.prototype.getImage = function(extent, resolution, pixelRatio, projection) {\n  const sourceProjection = this.getProjection();\n  if (!ENABLE_RASTER_REPROJECTION ||\n      !sourceProjection ||\n      !projection ||\n      equivalent(sourceProjection, projection)) {\n    if (sourceProjection) {\n      projection = sourceProjection;\n    }\n    return this.getImageInternal(extent, resolution, pixelRatio, projection);\n  } else {\n    if (this.reprojectedImage_) {\n      if (this.reprojectedRevision_ == this.getRevision() &&\n          equivalent(\n            this.reprojectedImage_.getProjection(), projection) &&\n          this.reprojectedImage_.getResolution() == resolution &&\n          equals(this.reprojectedImage_.getExtent(), extent)) {\n        return this.reprojectedImage_;\n      }\n      this.reprojectedImage_.dispose();\n      this.reprojectedImage_ = null;\n    }\n\n    this.reprojectedImage_ = new ReprojImage(\n      sourceProjection, projection, extent, resolution, pixelRatio,\n      function(extent, resolution, pixelRatio) {\n        return this.getImageInternal(extent, resolution,\n          pixelRatio, sourceProjection);\n      }.bind(this));\n    this.reprojectedRevision_ = this.getRevision();\n\n    return this.reprojectedImage_;\n  }\n};\n\n\n/**\n * @abstract\n * @param {module:ol/extent~Extent} extent Extent.\n * @param {number} resolution Resolution.\n * @param {number} pixelRatio Pixel ratio.\n * @param {module:ol/proj/Projection} projection Projection.\n * @return {module:ol/ImageBase} Single image.\n * @protected\n */\nImageSource.prototype.getImageInternal = function(extent, resolution, pixelRatio, projection) {};\n\n\n/**\n * Handle image change events.\n * @param {module:ol/events/Event} event Event.\n * @protected\n */\nImageSource.prototype.handleImageChange = function(event) {\n  const image = /** @type {module:ol/Image} */ (event.target);\n  switch (image.getState()) {\n    case ImageState.LOADING:\n      this.dispatchEvent(\n        new ImageSourceEvent(ImageSourceEventType.IMAGELOADSTART,\n          image));\n      break;\n    case ImageState.LOADED:\n      this.dispatchEvent(\n        new ImageSourceEvent(ImageSourceEventType.IMAGELOADEND,\n          image));\n      break;\n    case ImageState.ERROR:\n      this.dispatchEvent(\n        new ImageSourceEvent(ImageSourceEventType.IMAGELOADERROR,\n          image));\n      break;\n    default:\n      // pass\n  }\n};\n\n\n/**\n * Default image load function for image sources that use module:ol/Image~Image image\n * instances.\n * @param {module:ol/Image} image Image.\n * @param {string} src Source.\n */\nexport function defaultImageLoadFunction(image, src) {\n  image.getImage().src = src;\n}\n\n\nexport default ImageSource;\n","export default function(defs) {\n  defs('EPSG:4326', \"+title=WGS 84 (long/lat) +proj=longlat +ellps=WGS84 +datum=WGS84 +units=degrees\");\n  defs('EPSG:4269', \"+title=NAD83 (long/lat) +proj=longlat +a=6378137.0 +b=6356752.31414036 +ellps=GRS80 +datum=NAD83 +units=degrees\");\n  defs('EPSG:3857', \"+title=WGS 84 / Pseudo-Mercator +proj=merc +a=6378137 +b=6378137 +lat_ts=0.0 +lon_0=0.0 +x_0=0.0 +y_0=0 +k=1.0 +units=m +nadgrids=@null +no_defs\");\n\n  defs.WGS84 = defs['EPSG:4326'];\n  defs['EPSG:3785'] = defs['EPSG:3857']; // maintain backward compat, official code is 3857\n  defs.GOOGLE = defs['EPSG:3857'];\n  defs['EPSG:900913'] = defs['EPSG:3857'];\n  defs['EPSG:102113'] = defs['EPSG:3857'];\n}\n","export var PJD_3PARAM = 1;\nexport var PJD_7PARAM = 2;\nexport var PJD_WGS84 = 4; // WGS84 or equivalent\nexport var PJD_NODATUM = 5; // WGS84 or equivalent\nexport var SEC_TO_RAD = 4.84813681109535993589914102357e-6;\nexport var HALF_PI = Math.PI/2;\n// ellipoid pj_set_ell.c\nexport var SIXTH = 0.1666666666666666667;\n/* 1/6 */\nexport var RA4 = 0.04722222222222222222;\n/* 17/360 */\nexport var RA6 = 0.02215608465608465608;\nexport var EPSLN = 1.0e-10;\n// you'd think you could use Number.EPSILON above but that makes\n// Mollweide get into an infinate loop.\n\nexport var D2R = 0.01745329251994329577;\nexport var R2D = 57.29577951308232088;\nexport var FORTPI = Math.PI/4;\nexport var TWO_PI = Math.PI * 2;\n// SPI is slightly greater than Math.PI, so values that exceed the -180..180\n// degree range by a tiny amount don't get wrapped. This prevents points that\n// have drifted from their original location along the 180th meridian (due to\n// floating point error) from changing their sign.\nexport var SPI = 3.14159265359;\n","var exports = {};\nexport {exports as default};\n\nexports.greenwich = 0.0; //\"0dE\",\nexports.lisbon = -9.131906111111; //\"9d07'54.862\\\"W\",\nexports.paris = 2.337229166667; //\"2d20'14.025\\\"E\",\nexports.bogota = -74.080916666667; //\"74d04'51.3\\\"W\",\nexports.madrid = -3.687938888889; //\"3d41'16.58\\\"W\",\nexports.rome = 12.452333333333; //\"12d27'8.4\\\"E\",\nexports.bern = 7.439583333333; //\"7d26'22.5\\\"E\",\nexports.jakarta = 106.807719444444; //\"106d48'27.79\\\"E\",\nexports.ferro = -17.666666666667; //\"17d40'W\",\nexports.brussels = 4.367975; //\"4d22'4.71\\\"E\",\nexports.stockholm = 18.058277777778; //\"18d3'29.8\\\"E\",\nexports.athens = 23.7163375; //\"23d42'58.815\\\"E\",\nexports.oslo = 10.722916666667; //\"10d43'22.5\\\"E\"\n","export default {\n  ft: {to_meter: 0.3048},\n  'us-ft': {to_meter: 1200 / 3937}\n};\n","var ignoredChar = /[\\s_\\-\\/\\(\\)]/g;\nexport default function match(obj, key) {\n  if (obj[key]) {\n    return obj[key];\n  }\n  var keys = Object.keys(obj);\n  var lkey = key.toLowerCase().replace(ignoredChar, '');\n  var i = -1;\n  var testkey, processedKey;\n  while (++i < keys.length) {\n    testkey = keys[i];\n    processedKey = testkey.toLowerCase().replace(ignoredChar, '');\n    if (processedKey === lkey) {\n      return obj[testkey];\n    }\n  }\n}\n","import {D2R} from './constants/values';\nimport PrimeMeridian from './constants/PrimeMeridian';\nimport units from './constants/units';\nimport match from './match';\n\nexport default function(defData) {\n  var self = {};\n  var paramObj = defData.split('+').map(function(v) {\n    return v.trim();\n  }).filter(function(a) {\n    return a;\n  }).reduce(function(p, a) {\n    var split = a.split('=');\n    split.push(true);\n    p[split[0].toLowerCase()] = split[1];\n    return p;\n  }, {});\n  var paramName, paramVal, paramOutname;\n  var params = {\n    proj: 'projName',\n    datum: 'datumCode',\n    rf: function(v) {\n      self.rf = parseFloat(v);\n    },\n    lat_0: function(v) {\n      self.lat0 = v * D2R;\n    },\n    lat_1: function(v) {\n      self.lat1 = v * D2R;\n    },\n    lat_2: function(v) {\n      self.lat2 = v * D2R;\n    },\n    lat_ts: function(v) {\n      self.lat_ts = v * D2R;\n    },\n    lon_0: function(v) {\n      self.long0 = v * D2R;\n    },\n    lon_1: function(v) {\n      self.long1 = v * D2R;\n    },\n    lon_2: function(v) {\n      self.long2 = v * D2R;\n    },\n    alpha: function(v) {\n      self.alpha = parseFloat(v) * D2R;\n    },\n    lonc: function(v) {\n      self.longc = v * D2R;\n    },\n    x_0: function(v) {\n      self.x0 = parseFloat(v);\n    },\n    y_0: function(v) {\n      self.y0 = parseFloat(v);\n    },\n    k_0: function(v) {\n      self.k0 = parseFloat(v);\n    },\n    k: function(v) {\n      self.k0 = parseFloat(v);\n    },\n    a: function(v) {\n      self.a = parseFloat(v);\n    },\n    b: function(v) {\n      self.b = parseFloat(v);\n    },\n    r_a: function() {\n      self.R_A = true;\n    },\n    zone: function(v) {\n      self.zone = parseInt(v, 10);\n    },\n    south: function() {\n      self.utmSouth = true;\n    },\n    towgs84: function(v) {\n      self.datum_params = v.split(\",\").map(function(a) {\n        return parseFloat(a);\n      });\n    },\n    to_meter: function(v) {\n      self.to_meter = parseFloat(v);\n    },\n    units: function(v) {\n      self.units = v;\n      var unit = match(units, v);\n      if (unit) {\n        self.to_meter = unit.to_meter;\n      }\n    },\n    from_greenwich: function(v) {\n      self.from_greenwich = v * D2R;\n    },\n    pm: function(v) {\n      var pm = match(PrimeMeridian, v);\n      self.from_greenwich = (pm ? pm : parseFloat(v)) * D2R;\n    },\n    nadgrids: function(v) {\n      if (v === '@null') {\n        self.datumCode = 'none';\n      }\n      else {\n        self.nadgrids = v;\n      }\n    },\n    axis: function(v) {\n      var legalAxis = \"ewnsud\";\n      if (v.length === 3 && legalAxis.indexOf(v.substr(0, 1)) !== -1 && legalAxis.indexOf(v.substr(1, 1)) !== -1 && legalAxis.indexOf(v.substr(2, 1)) !== -1) {\n        self.axis = v;\n      }\n    }\n  };\n  for (paramName in paramObj) {\n    paramVal = paramObj[paramName];\n    if (paramName in params) {\n      paramOutname = params[paramName];\n      if (typeof paramOutname === 'function') {\n        paramOutname(paramVal);\n      }\n      else {\n        self[paramOutname] = paramVal;\n      }\n    }\n    else {\n      self[paramName] = paramVal;\n    }\n  }\n  if(typeof self.datumCode === 'string' && self.datumCode !== \"WGS84\"){\n    self.datumCode = self.datumCode.toLowerCase();\n  }\n  return self;\n}\n","export default parseString;\n\nvar NEUTRAL = 1;\nvar KEYWORD = 2;\nvar NUMBER = 3;\nvar QUOTED = 4;\nvar AFTERQUOTE = 5;\nvar ENDED = -1;\nvar whitespace = /\\s/;\nvar latin = /[A-Za-z]/;\nvar keyword = /[A-Za-z84]/;\nvar endThings = /[,\\]]/;\nvar digets = /[\\d\\.E\\-\\+]/;\n// const ignoredChar = /[\\s_\\-\\/\\(\\)]/g;\nfunction Parser(text) {\n  if (typeof text !== 'string') {\n    throw new Error('not a string');\n  }\n  this.text = text.trim();\n  this.level = 0;\n  this.place = 0;\n  this.root = null;\n  this.stack = [];\n  this.currentObject = null;\n  this.state = NEUTRAL;\n}\nParser.prototype.readCharicter = function() {\n  var char = this.text[this.place++];\n  if (this.state !== QUOTED) {\n    while (whitespace.test(char)) {\n      if (this.place >= this.text.length) {\n        return;\n      }\n      char = this.text[this.place++];\n    }\n  }\n  switch (this.state) {\n    case NEUTRAL:\n      return this.neutral(char);\n    case KEYWORD:\n      return this.keyword(char)\n    case QUOTED:\n      return this.quoted(char);\n    case AFTERQUOTE:\n      return this.afterquote(char);\n    case NUMBER:\n      return this.number(char);\n    case ENDED:\n      return;\n  }\n};\nParser.prototype.afterquote = function(char) {\n  if (char === '\"') {\n    this.word += '\"';\n    this.state = QUOTED;\n    return;\n  }\n  if (endThings.test(char)) {\n    this.word = this.word.trim();\n    this.afterItem(char);\n    return;\n  }\n  throw new Error('havn\\'t handled \"' +char + '\" in afterquote yet, index ' + this.place);\n};\nParser.prototype.afterItem = function(char) {\n  if (char === ',') {\n    if (this.word !== null) {\n      this.currentObject.push(this.word);\n    }\n    this.word = null;\n    this.state = NEUTRAL;\n    return;\n  }\n  if (char === ']') {\n    this.level--;\n    if (this.word !== null) {\n      this.currentObject.push(this.word);\n      this.word = null;\n    }\n    this.state = NEUTRAL;\n    this.currentObject = this.stack.pop();\n    if (!this.currentObject) {\n      this.state = ENDED;\n    }\n\n    return;\n  }\n};\nParser.prototype.number = function(char) {\n  if (digets.test(char)) {\n    this.word += char;\n    return;\n  }\n  if (endThings.test(char)) {\n    this.word = parseFloat(this.word);\n    this.afterItem(char);\n    return;\n  }\n  throw new Error('havn\\'t handled \"' +char + '\" in number yet, index ' + this.place);\n};\nParser.prototype.quoted = function(char) {\n  if (char === '\"') {\n    this.state = AFTERQUOTE;\n    return;\n  }\n  this.word += char;\n  return;\n};\nParser.prototype.keyword = function(char) {\n  if (keyword.test(char)) {\n    this.word += char;\n    return;\n  }\n  if (char === '[') {\n    var newObjects = [];\n    newObjects.push(this.word);\n    this.level++;\n    if (this.root === null) {\n      this.root = newObjects;\n    } else {\n      this.currentObject.push(newObjects);\n    }\n    this.stack.push(this.currentObject);\n    this.currentObject = newObjects;\n    this.state = NEUTRAL;\n    return;\n  }\n  if (endThings.test(char)) {\n    this.afterItem(char);\n    return;\n  }\n  throw new Error('havn\\'t handled \"' +char + '\" in keyword yet, index ' + this.place);\n};\nParser.prototype.neutral = function(char) {\n  if (latin.test(char)) {\n    this.word = char;\n    this.state = KEYWORD;\n    return;\n  }\n  if (char === '\"') {\n    this.word = '';\n    this.state = QUOTED;\n    return;\n  }\n  if (digets.test(char)) {\n    this.word = char;\n    this.state = NUMBER;\n    return;\n  }\n  if (endThings.test(char)) {\n    this.afterItem(char);\n    return;\n  }\n  throw new Error('havn\\'t handled \"' +char + '\" in neutral yet, index ' + this.place);\n};\nParser.prototype.output = function() {\n  while (this.place < this.text.length) {\n    this.readCharicter();\n  }\n  if (this.state === ENDED) {\n    return this.root;\n  }\n  throw new Error('unable to parse string \"' +this.text + '\". State is ' + this.state);\n};\n\nfunction parseString(txt) {\n  var parser = new Parser(txt);\n  return parser.output();\n}\n","\n\nfunction mapit(obj, key, value) {\n  if (Array.isArray(key)) {\n    value.unshift(key);\n    key = null;\n  }\n  var thing = key ? {} : obj;\n\n  var out = value.reduce(function(newObj, item) {\n    sExpr(item, newObj);\n    return newObj\n  }, thing);\n  if (key) {\n    obj[key] = out;\n  }\n}\n\nexport function sExpr(v, obj) {\n  if (!Array.isArray(v)) {\n    obj[v] = true;\n    return;\n  }\n  var key = v.shift();\n  if (key === 'PARAMETER') {\n    key = v.shift();\n  }\n  if (v.length === 1) {\n    if (Array.isArray(v[0])) {\n      obj[key] = {};\n      sExpr(v[0], obj[key]);\n      return;\n    }\n    obj[key] = v[0];\n    return;\n  }\n  if (!v.length) {\n    obj[key] = true;\n    return;\n  }\n  if (key === 'TOWGS84') {\n    obj[key] = v;\n    return;\n  }\n  if (!Array.isArray(key)) {\n    obj[key] = {};\n  }\n\n  var i;\n  switch (key) {\n    case 'UNIT':\n    case 'PRIMEM':\n    case 'VERT_DATUM':\n      obj[key] = {\n        name: v[0].toLowerCase(),\n        convert: v[1]\n      };\n      if (v.length === 3) {\n        sExpr(v[2], obj[key]);\n      }\n      return;\n    case 'SPHEROID':\n    case 'ELLIPSOID':\n      obj[key] = {\n        name: v[0],\n        a: v[1],\n        rf: v[2]\n      };\n      if (v.length === 4) {\n        sExpr(v[3], obj[key]);\n      }\n      return;\n    case 'PROJECTEDCRS':\n    case 'PROJCRS':\n    case 'GEOGCS':\n    case 'GEOCCS':\n    case 'PROJCS':\n    case 'LOCAL_CS':\n    case 'GEODCRS':\n    case 'GEODETICCRS':\n    case 'GEODETICDATUM':\n    case 'EDATUM':\n    case 'ENGINEERINGDATUM':\n    case 'VERT_CS':\n    case 'VERTCRS':\n    case 'VERTICALCRS':\n    case 'COMPD_CS':\n    case 'COMPOUNDCRS':\n    case 'ENGINEERINGCRS':\n    case 'ENGCRS':\n    case 'FITTED_CS':\n    case 'LOCAL_DATUM':\n    case 'DATUM':\n      v[0] = ['name', v[0]];\n      mapit(obj, key, v);\n      return;\n    default:\n      i = -1;\n      while (++i < v.length) {\n        if (!Array.isArray(v[i])) {\n          return sExpr(v, obj[key]);\n        }\n      }\n      return mapit(obj, key, v);\n  }\n}\n","var D2R = 0.01745329251994329577;\nimport parser from './parser';\nimport {sExpr} from './process';\n\n\n\nfunction rename(obj, params) {\n  var outName = params[0];\n  var inName = params[1];\n  if (!(outName in obj) && (inName in obj)) {\n    obj[outName] = obj[inName];\n    if (params.length === 3) {\n      obj[outName] = params[2](obj[outName]);\n    }\n  }\n}\n\nfunction d2r(input) {\n  return input * D2R;\n}\n\nfunction cleanWKT(wkt) {\n  if (wkt.type === 'GEOGCS') {\n    wkt.projName = 'longlat';\n  } else if (wkt.type === 'LOCAL_CS') {\n    wkt.projName = 'identity';\n    wkt.local = true;\n  } else {\n    if (typeof wkt.PROJECTION === 'object') {\n      wkt.projName = Object.keys(wkt.PROJECTION)[0];\n    } else {\n      wkt.projName = wkt.PROJECTION;\n    }\n  }\n  if (wkt.UNIT) {\n    wkt.units = wkt.UNIT.name.toLowerCase();\n    if (wkt.units === 'metre') {\n      wkt.units = 'meter';\n    }\n    if (wkt.UNIT.convert) {\n      if (wkt.type === 'GEOGCS') {\n        if (wkt.DATUM && wkt.DATUM.SPHEROID) {\n          wkt.to_meter = wkt.UNIT.convert*wkt.DATUM.SPHEROID.a;\n        }\n      } else {\n        wkt.to_meter = wkt.UNIT.convert, 10;\n      }\n    }\n  }\n  var geogcs = wkt.GEOGCS;\n  if (wkt.type === 'GEOGCS') {\n    geogcs = wkt;\n  }\n  if (geogcs) {\n    //if(wkt.GEOGCS.PRIMEM&&wkt.GEOGCS.PRIMEM.convert){\n    //  wkt.from_greenwich=wkt.GEOGCS.PRIMEM.convert*D2R;\n    //}\n    if (geogcs.DATUM) {\n      wkt.datumCode = geogcs.DATUM.name.toLowerCase();\n    } else {\n      wkt.datumCode = geogcs.name.toLowerCase();\n    }\n    if (wkt.datumCode.slice(0, 2) === 'd_') {\n      wkt.datumCode = wkt.datumCode.slice(2);\n    }\n    if (wkt.datumCode === 'new_zealand_geodetic_datum_1949' || wkt.datumCode === 'new_zealand_1949') {\n      wkt.datumCode = 'nzgd49';\n    }\n    if (wkt.datumCode === 'wgs_1984') {\n      if (wkt.PROJECTION === 'Mercator_Auxiliary_Sphere') {\n        wkt.sphere = true;\n      }\n      wkt.datumCode = 'wgs84';\n    }\n    if (wkt.datumCode.slice(-6) === '_ferro') {\n      wkt.datumCode = wkt.datumCode.slice(0, - 6);\n    }\n    if (wkt.datumCode.slice(-8) === '_jakarta') {\n      wkt.datumCode = wkt.datumCode.slice(0, - 8);\n    }\n    if (~wkt.datumCode.indexOf('belge')) {\n      wkt.datumCode = 'rnb72';\n    }\n    if (geogcs.DATUM && geogcs.DATUM.SPHEROID) {\n      wkt.ellps = geogcs.DATUM.SPHEROID.name.replace('_19', '').replace(/[Cc]larke\\_18/, 'clrk');\n      if (wkt.ellps.toLowerCase().slice(0, 13) === 'international') {\n        wkt.ellps = 'intl';\n      }\n\n      wkt.a = geogcs.DATUM.SPHEROID.a;\n      wkt.rf = parseFloat(geogcs.DATUM.SPHEROID.rf, 10);\n    }\n    if (~wkt.datumCode.indexOf('osgb_1936')) {\n      wkt.datumCode = 'osgb36';\n    }\n    if (~wkt.datumCode.indexOf('osni_1952')) {\n      wkt.datumCode = 'osni52';\n    }\n    if (~wkt.datumCode.indexOf('tm65')\n      || ~wkt.datumCode.indexOf('geodetic_datum_of_1965')) {\n      wkt.datumCode = 'ire65';\n    }\n    if (wkt.datumCode === 'ch1903+') {\n      wkt.datumCode = 'ch1903';\n    }\n  }\n  if (wkt.b && !isFinite(wkt.b)) {\n    wkt.b = wkt.a;\n  }\n\n  function toMeter(input) {\n    var ratio = wkt.to_meter || 1;\n    return input * ratio;\n  }\n  var renamer = function(a) {\n    return rename(wkt, a);\n  };\n  var list = [\n    ['standard_parallel_1', 'Standard_Parallel_1'],\n    ['standard_parallel_2', 'Standard_Parallel_2'],\n    ['false_easting', 'False_Easting'],\n    ['false_northing', 'False_Northing'],\n    ['central_meridian', 'Central_Meridian'],\n    ['latitude_of_origin', 'Latitude_Of_Origin'],\n    ['latitude_of_origin', 'Central_Parallel'],\n    ['scale_factor', 'Scale_Factor'],\n    ['k0', 'scale_factor'],\n    ['latitude_of_center', 'Latitude_Of_Center'],\n    ['latitude_of_center', 'Latitude_of_center'],\n    ['lat0', 'latitude_of_center', d2r],\n    ['longitude_of_center', 'Longitude_Of_Center'],\n    ['longitude_of_center', 'Longitude_of_center'],\n    ['longc', 'longitude_of_center', d2r],\n    ['x0', 'false_easting', toMeter],\n    ['y0', 'false_northing', toMeter],\n    ['long0', 'central_meridian', d2r],\n    ['lat0', 'latitude_of_origin', d2r],\n    ['lat0', 'standard_parallel_1', d2r],\n    ['lat1', 'standard_parallel_1', d2r],\n    ['lat2', 'standard_parallel_2', d2r],\n    ['azimuth', 'Azimuth'],\n    ['alpha', 'azimuth', d2r],\n    ['srsCode', 'name']\n  ];\n  list.forEach(renamer);\n  if (!wkt.long0 && wkt.longc && (wkt.projName === 'Albers_Conic_Equal_Area' || wkt.projName === 'Lambert_Azimuthal_Equal_Area')) {\n    wkt.long0 = wkt.longc;\n  }\n  if (!wkt.lat_ts && wkt.lat1 && (wkt.projName === 'Stereographic_South_Pole' || wkt.projName === 'Polar Stereographic (variant B)')) {\n    wkt.lat0 = d2r(wkt.lat1 > 0 ? 90 : -90);\n    wkt.lat_ts = wkt.lat1;\n  }\n}\nexport default function(wkt) {\n  var lisp = parser(wkt);\n  var type = lisp.shift();\n  var name = lisp.shift();\n  lisp.unshift(['name', name]);\n  lisp.unshift(['type', type]);\n  var obj = {};\n  sExpr(lisp, obj);\n  cleanWKT(obj);\n  return obj;\n}\n","import globals from './global';\nimport parseProj from './projString';\nimport wkt from 'wkt-parser';\n\nfunction defs(name) {\n  /*global console*/\n  var that = this;\n  if (arguments.length === 2) {\n    var def = arguments[1];\n    if (typeof def === 'string') {\n      if (def.charAt(0) === '+') {\n        defs[name] = parseProj(arguments[1]);\n      }\n      else {\n        defs[name] = wkt(arguments[1]);\n      }\n    } else {\n      defs[name] = def;\n    }\n  }\n  else if (arguments.length === 1) {\n    if (Array.isArray(name)) {\n      return name.map(function(v) {\n        if (Array.isArray(v)) {\n          defs.apply(that, v);\n        }\n        else {\n          defs(v);\n        }\n      });\n    }\n    else if (typeof name === 'string') {\n      if (name in defs) {\n        return defs[name];\n      }\n    }\n    else if ('EPSG' in name) {\n      defs['EPSG:' + name.EPSG] = name;\n    }\n    else if ('ESRI' in name) {\n      defs['ESRI:' + name.ESRI] = name;\n    }\n    else if ('IAU2000' in name) {\n      defs['IAU2000:' + name.IAU2000] = name;\n    }\n    else {\n      console.log(name);\n    }\n    return;\n  }\n\n\n}\nglobals(defs);\nexport default defs;\n","import defs from './defs';\nimport wkt from 'wkt-parser';\nimport projStr from './projString';\nfunction testObj(code){\n  return typeof code === 'string';\n}\nfunction testDef(code){\n  return code in defs;\n}\n var codeWords = ['PROJECTEDCRS', 'PROJCRS', 'GEOGCS','GEOCCS','PROJCS','LOCAL_CS', 'GEODCRS', 'GEODETICCRS', 'GEODETICDATUM', 'ENGCRS', 'ENGINEERINGCRS']; \nfunction testWKT(code){\n  return codeWords.some(function (word) {\n    return code.indexOf(word) > -1;\n  });\n}\nfunction testProj(code){\n  return code[0] === '+';\n}\nfunction parse(code){\n  if (testObj(code)) {\n    //check to see if this is a WKT string\n    if (testDef(code)) {\n      return defs[code];\n    }\n    if (testWKT(code)) {\n      return wkt(code);\n    }\n    if (testProj(code)) {\n      return projStr(code);\n    }\n  }else{\n    return code;\n  }\n}\n\nexport default parse;\n","export default function(destination, source) {\n  destination = destination || {};\n  var value, property;\n  if (!source) {\n    return destination;\n  }\n  for (property in source) {\n    value = source[property];\n    if (value !== undefined) {\n      destination[property] = value;\n    }\n  }\n  return destination;\n}\n","export default function(eccent, sinphi, cosphi) {\n  var con = eccent * sinphi;\n  return cosphi / (Math.sqrt(1 - con * con));\n}","export default function(x) {\n  return x<0 ? -1 : 1;\n}","\nimport {TWO_PI, SPI} from '../constants/values';\nimport sign from './sign';\n\nexport default function(x) {\n  return (Math.abs(x) <= SPI) ? x : (x - (sign(x) * TWO_PI));\n}\n","import {HALF_PI} from '../constants/values';\n\nexport default function(eccent, phi, sinphi) {\n  var con = eccent * sinphi;\n  var com = 0.5 * eccent;\n  con = Math.pow(((1 - con) / (1 + con)), com);\n  return (Math.tan(0.5 * (HALF_PI - phi)) / con);\n}\n","import {HALF_PI} from '../constants/values';\n\nexport default function(eccent, ts) {\n  var eccnth = 0.5 * eccent;\n  var con, dphi;\n  var phi = HALF_PI - 2 * Math.atan(ts);\n  for (var i = 0; i <= 15; i++) {\n    con = eccent * Math.sin(phi);\n    dphi = HALF_PI - 2 * Math.atan(ts * (Math.pow(((1 - con) / (1 + con)), eccnth))) - phi;\n    phi += dphi;\n    if (Math.abs(dphi) <= 0.0000000001) {\n      return phi;\n    }\n  }\n  //console.log(\"phi2z has NoConvergence\");\n  return -9999;\n}\n","export function init() {\n  //no-op for longlat\n}\n\nfunction identity(pt) {\n  return pt;\n}\nexport {identity as forward};\nexport {identity as inverse};\nexport var names = [\"longlat\", \"identity\"];\nexport default {\n  init: init,\n  forward: identity,\n  inverse: identity,\n  names: names\n};\n","import merc from \"./projections/merc\";\nimport longlat from \"./projections/longlat\";\nvar projs = [merc, longlat];\nvar names = {};\nvar projStore = [];\n\nfunction add(proj, i) {\n  var len = projStore.length;\n  if (!proj.names) {\n    console.log(i);\n    return true;\n  }\n  projStore[len] = proj;\n  proj.names.forEach(function(n) {\n    names[n.toLowerCase()] = len;\n  });\n  return this;\n}\n\nexport {add};\n\nexport function get(name) {\n  if (!name) {\n    return false;\n  }\n  var n = name.toLowerCase();\n  if (typeof names[n] !== 'undefined' && projStore[names[n]]) {\n    return projStore[names[n]];\n  }\n}\n\nexport function start() {\n  projs.forEach(add);\n}\nexport default {\n  start: start,\n  add: add,\n  get: get\n};\n","import msfnz from '../common/msfnz';\n\nimport adjust_lon from '../common/adjust_lon';\nimport tsfnz from '../common/tsfnz';\nimport phi2z from '../common/phi2z';\nimport {FORTPI, R2D, EPSLN, HALF_PI} from '../constants/values';\nexport function init() {\n  var con = this.b / this.a;\n  this.es = 1 - con * con;\n  if(!('x0' in this)){\n    this.x0 = 0;\n  }\n  if(!('y0' in this)){\n    this.y0 = 0;\n  }\n  this.e = Math.sqrt(this.es);\n  if (this.lat_ts) {\n    if (this.sphere) {\n      this.k0 = Math.cos(this.lat_ts);\n    }\n    else {\n      this.k0 = msfnz(this.e, Math.sin(this.lat_ts), Math.cos(this.lat_ts));\n    }\n  }\n  else {\n    if (!this.k0) {\n      if (this.k) {\n        this.k0 = this.k;\n      }\n      else {\n        this.k0 = 1;\n      }\n    }\n  }\n}\n\n/* Mercator forward equations--mapping lat,long to x,y\n  --------------------------------------------------*/\n\nexport function forward(p) {\n  var lon = p.x;\n  var lat = p.y;\n  // convert to radians\n  if (lat * R2D > 90 && lat * R2D < -90 && lon * R2D > 180 && lon * R2D < -180) {\n    return null;\n  }\n\n  var x, y;\n  if (Math.abs(Math.abs(lat) - HALF_PI) <= EPSLN) {\n    return null;\n  }\n  else {\n    if (this.sphere) {\n      x = this.x0 + this.a * this.k0 * adjust_lon(lon - this.long0);\n      y = this.y0 + this.a * this.k0 * Math.log(Math.tan(FORTPI + 0.5 * lat));\n    }\n    else {\n      var sinphi = Math.sin(lat);\n      var ts = tsfnz(this.e, lat, sinphi);\n      x = this.x0 + this.a * this.k0 * adjust_lon(lon - this.long0);\n      y = this.y0 - this.a * this.k0 * Math.log(ts);\n    }\n    p.x = x;\n    p.y = y;\n    return p;\n  }\n}\n\n/* Mercator inverse equations--mapping x,y to lat/long\n  --------------------------------------------------*/\nexport function inverse(p) {\n\n  var x = p.x - this.x0;\n  var y = p.y - this.y0;\n  var lon, lat;\n\n  if (this.sphere) {\n    lat = HALF_PI - 2 * Math.atan(Math.exp(-y / (this.a * this.k0)));\n  }\n  else {\n    var ts = Math.exp(-y / (this.a * this.k0));\n    lat = phi2z(this.e, ts);\n    if (lat === -9999) {\n      return null;\n    }\n  }\n  lon = adjust_lon(this.long0 + x / (this.a * this.k0));\n\n  p.x = lon;\n  p.y = lat;\n  return p;\n}\n\nexport var names = [\"Mercator\", \"Popular Visualisation Pseudo Mercator\", \"Mercator_1SP\", \"Mercator_Auxiliary_Sphere\", \"merc\"];\nexport default {\n  init: init,\n  forward: forward,\n  inverse: inverse,\n  names: names\n};\n","var exports = {};\nexport {exports as default};\nexports.MERIT = {\n  a: 6378137.0,\n  rf: 298.257,\n  ellipseName: \"MERIT 1983\"\n};\n\nexports.SGS85 = {\n  a: 6378136.0,\n  rf: 298.257,\n  ellipseName: \"Soviet Geodetic System 85\"\n};\n\nexports.GRS80 = {\n  a: 6378137.0,\n  rf: 298.257222101,\n  ellipseName: \"GRS 1980(IUGG, 1980)\"\n};\n\nexports.IAU76 = {\n  a: 6378140.0,\n  rf: 298.257,\n  ellipseName: \"IAU 1976\"\n};\n\nexports.airy = {\n  a: 6377563.396,\n  b: 6356256.910,\n  ellipseName: \"Airy 1830\"\n};\n\nexports.APL4 = {\n  a: 6378137,\n  rf: 298.25,\n  ellipseName: \"Appl. Physics. 1965\"\n};\n\nexports.NWL9D = {\n  a: 6378145.0,\n  rf: 298.25,\n  ellipseName: \"Naval Weapons Lab., 1965\"\n};\n\nexports.mod_airy = {\n  a: 6377340.189,\n  b: 6356034.446,\n  ellipseName: \"Modified Airy\"\n};\n\nexports.andrae = {\n  a: 6377104.43,\n  rf: 300.0,\n  ellipseName: \"Andrae 1876 (Den., Iclnd.)\"\n};\n\nexports.aust_SA = {\n  a: 6378160.0,\n  rf: 298.25,\n  ellipseName: \"Australian Natl & S. Amer. 1969\"\n};\n\nexports.GRS67 = {\n  a: 6378160.0,\n  rf: 298.2471674270,\n  ellipseName: \"GRS 67(IUGG 1967)\"\n};\n\nexports.bessel = {\n  a: 6377397.155,\n  rf: 299.1528128,\n  ellipseName: \"Bessel 1841\"\n};\n\nexports.bess_nam = {\n  a: 6377483.865,\n  rf: 299.1528128,\n  ellipseName: \"Bessel 1841 (Namibia)\"\n};\n\nexports.clrk66 = {\n  a: 6378206.4,\n  b: 6356583.8,\n  ellipseName: \"Clarke 1866\"\n};\n\nexports.clrk80 = {\n  a: 6378249.145,\n  rf: 293.4663,\n  ellipseName: \"Clarke 1880 mod.\"\n};\n\nexports.clrk58 = {\n  a: 6378293.645208759,\n  rf: 294.2606763692654,\n  ellipseName: \"Clarke 1858\"\n};\n\nexports.CPM = {\n  a: 6375738.7,\n  rf: 334.29,\n  ellipseName: \"Comm. des Poids et Mesures 1799\"\n};\n\nexports.delmbr = {\n  a: 6376428.0,\n  rf: 311.5,\n  ellipseName: \"Delambre 1810 (Belgium)\"\n};\n\nexports.engelis = {\n  a: 6378136.05,\n  rf: 298.2566,\n  ellipseName: \"Engelis 1985\"\n};\n\nexports.evrst30 = {\n  a: 6377276.345,\n  rf: 300.8017,\n  ellipseName: \"Everest 1830\"\n};\n\nexports.evrst48 = {\n  a: 6377304.063,\n  rf: 300.8017,\n  ellipseName: \"Everest 1948\"\n};\n\nexports.evrst56 = {\n  a: 6377301.243,\n  rf: 300.8017,\n  ellipseName: \"Everest 1956\"\n};\n\nexports.evrst69 = {\n  a: 6377295.664,\n  rf: 300.8017,\n  ellipseName: \"Everest 1969\"\n};\n\nexports.evrstSS = {\n  a: 6377298.556,\n  rf: 300.8017,\n  ellipseName: \"Everest (Sabah & Sarawak)\"\n};\n\nexports.fschr60 = {\n  a: 6378166.0,\n  rf: 298.3,\n  ellipseName: \"Fischer (Mercury Datum) 1960\"\n};\n\nexports.fschr60m = {\n  a: 6378155.0,\n  rf: 298.3,\n  ellipseName: \"Fischer 1960\"\n};\n\nexports.fschr68 = {\n  a: 6378150.0,\n  rf: 298.3,\n  ellipseName: \"Fischer 1968\"\n};\n\nexports.helmert = {\n  a: 6378200.0,\n  rf: 298.3,\n  ellipseName: \"Helmert 1906\"\n};\n\nexports.hough = {\n  a: 6378270.0,\n  rf: 297.0,\n  ellipseName: \"Hough\"\n};\n\nexports.intl = {\n  a: 6378388.0,\n  rf: 297.0,\n  ellipseName: \"International 1909 (Hayford)\"\n};\n\nexports.kaula = {\n  a: 6378163.0,\n  rf: 298.24,\n  ellipseName: \"Kaula 1961\"\n};\n\nexports.lerch = {\n  a: 6378139.0,\n  rf: 298.257,\n  ellipseName: \"Lerch 1979\"\n};\n\nexports.mprts = {\n  a: 6397300.0,\n  rf: 191.0,\n  ellipseName: \"Maupertius 1738\"\n};\n\nexports.new_intl = {\n  a: 6378157.5,\n  b: 6356772.2,\n  ellipseName: \"New International 1967\"\n};\n\nexports.plessis = {\n  a: 6376523.0,\n  rf: 6355863.0,\n  ellipseName: \"Plessis 1817 (France)\"\n};\n\nexports.krass = {\n  a: 6378245.0,\n  rf: 298.3,\n  ellipseName: \"Krassovsky, 1942\"\n};\n\nexports.SEasia = {\n  a: 6378155.0,\n  b: 6356773.3205,\n  ellipseName: \"Southeast Asia\"\n};\n\nexports.walbeck = {\n  a: 6376896.0,\n  b: 6355834.8467,\n  ellipseName: \"Walbeck\"\n};\n\nexports.WGS60 = {\n  a: 6378165.0,\n  rf: 298.3,\n  ellipseName: \"WGS 60\"\n};\n\nexports.WGS66 = {\n  a: 6378145.0,\n  rf: 298.25,\n  ellipseName: \"WGS 66\"\n};\n\nexports.WGS7 = {\n  a: 6378135.0,\n  rf: 298.26,\n  ellipseName: \"WGS 72\"\n};\n\nexport var WGS84 = exports.WGS84 = {\n  a: 6378137.0,\n  rf: 298.257223563,\n  ellipseName: \"WGS 84\"\n};\n\nexports.sphere = {\n  a: 6370997.0,\n  b: 6370997.0,\n  ellipseName: \"Normal Sphere (r=6370997)\"\n};\n","var exports = {};\nexport {exports as default};\nexports.wgs84 = {\n  towgs84: \"0,0,0\",\n  ellipse: \"WGS84\",\n  datumName: \"WGS84\"\n};\n\nexports.ch1903 = {\n  towgs84: \"674.374,15.056,405.346\",\n  ellipse: \"bessel\",\n  datumName: \"swiss\"\n};\n\nexports.ggrs87 = {\n  towgs84: \"-199.87,74.79,246.62\",\n  ellipse: \"GRS80\",\n  datumName: \"Greek_Geodetic_Reference_System_1987\"\n};\n\nexports.nad83 = {\n  towgs84: \"0,0,0\",\n  ellipse: \"GRS80\",\n  datumName: \"North_American_Datum_1983\"\n};\n\nexports.nad27 = {\n  nadgrids: \"@conus,@alaska,@ntv2_0.gsb,@ntv1_can.dat\",\n  ellipse: \"clrk66\",\n  datumName: \"North_American_Datum_1927\"\n};\n\nexports.potsdam = {\n  towgs84: \"606.0,23.0,413.0\",\n  ellipse: \"bessel\",\n  datumName: \"Potsdam Rauenberg 1950 DHDN\"\n};\n\nexports.carthage = {\n  towgs84: \"-263.0,6.0,431.0\",\n  ellipse: \"clark80\",\n  datumName: \"Carthage 1934 Tunisia\"\n};\n\nexports.hermannskogel = {\n  towgs84: \"653.0,-212.0,449.0\",\n  ellipse: \"bessel\",\n  datumName: \"Hermannskogel\"\n};\n\nexports.osni52 = {\n  towgs84: \"482.530,-130.596,564.557,-1.042,-0.214,-0.631,8.15\",\n  ellipse: \"airy\",\n  datumName: \"Irish National\"\n};\n\nexports.ire65 = {\n  towgs84: \"482.530,-130.596,564.557,-1.042,-0.214,-0.631,8.15\",\n  ellipse: \"mod_airy\",\n  datumName: \"Ireland 1965\"\n};\n\nexports.rassadiran = {\n  towgs84: \"-133.63,-157.5,-158.62\",\n  ellipse: \"intl\",\n  datumName: \"Rassadiran\"\n};\n\nexports.nzgd49 = {\n  towgs84: \"59.47,-5.04,187.44,0.47,-0.1,1.024,-4.5993\",\n  ellipse: \"intl\",\n  datumName: \"New Zealand Geodetic Datum 1949\"\n};\n\nexports.osgb36 = {\n  towgs84: \"446.448,-125.157,542.060,0.1502,0.2470,0.8421,-20.4894\",\n  ellipse: \"airy\",\n  datumName: \"Airy 1830\"\n};\n\nexports.s_jtsk = {\n  towgs84: \"589,76,480\",\n  ellipse: 'bessel',\n  datumName: 'S-JTSK (Ferro)'\n};\n\nexports.beduaram = {\n  towgs84: '-106,-87,188',\n  ellipse: 'clrk80',\n  datumName: 'Beduaram'\n};\n\nexports.gunung_segara = {\n  towgs84: '-403,684,41',\n  ellipse: 'bessel',\n  datumName: 'Gunung Segara Jakarta'\n};\n\nexports.rnb72 = {\n  towgs84: \"106.869,-52.2978,103.724,-0.33657,0.456955,-1.84218,1\",\n  ellipse: \"intl\",\n  datumName: \"Reseau National Belge 1972\"\n};\n","import {PJD_3PARAM, PJD_7PARAM, PJD_WGS84, PJD_NODATUM, SEC_TO_RAD} from './constants/values';\n\nfunction datum(datumCode, datum_params, a, b, es, ep2) {\n  var out = {};\n\n  if (datumCode === undefined || datumCode === 'none') {\n    out.datum_type = PJD_NODATUM;\n  } else {\n    out.datum_type = PJD_WGS84;\n  }\n\n  if (datum_params) {\n    out.datum_params = datum_params.map(parseFloat);\n    if (out.datum_params[0] !== 0 || out.datum_params[1] !== 0 || out.datum_params[2] !== 0) {\n      out.datum_type = PJD_3PARAM;\n    }\n    if (out.datum_params.length > 3) {\n      if (out.datum_params[3] !== 0 || out.datum_params[4] !== 0 || out.datum_params[5] !== 0 || out.datum_params[6] !== 0) {\n        out.datum_type = PJD_7PARAM;\n        out.datum_params[3] *= SEC_TO_RAD;\n        out.datum_params[4] *= SEC_TO_RAD;\n        out.datum_params[5] *= SEC_TO_RAD;\n        out.datum_params[6] = (out.datum_params[6] / 1000000.0) + 1.0;\n      }\n    }\n  }\n\n  out.a = a; //datum object also uses these values\n  out.b = b;\n  out.es = es;\n  out.ep2 = ep2;\n  return out;\n}\n\nexport default datum;\n","import parseCode from './parseCode';\nimport extend from './extend';\nimport projections from './projections';\nimport {sphere as dc_sphere, eccentricity as dc_eccentricity} from './deriveConstants';\nimport Datum from './constants/Datum';\nimport datum from './datum';\nimport match from './match';\n\nfunction Projection(srsCode,callback) {\n  if (!(this instanceof Projection)) {\n    return new Projection(srsCode);\n  }\n  callback = callback || function(error){\n    if(error){\n      throw error;\n    }\n  };\n  var json = parseCode(srsCode);\n  if(typeof json !== 'object'){\n    callback(srsCode);\n    return;\n  }\n  var ourProj = Projection.projections.get(json.projName);\n  if(!ourProj){\n    callback(srsCode);\n    return;\n  }\n  if (json.datumCode && json.datumCode !== 'none') {\n    var datumDef = match(Datum, json.datumCode);\n    if (datumDef) {\n      json.datum_params = datumDef.towgs84 ? datumDef.towgs84.split(',') : null;\n      json.ellps = datumDef.ellipse;\n      json.datumName = datumDef.datumName ? datumDef.datumName : json.datumCode;\n    }\n  }\n  json.k0 = json.k0 || 1.0;\n  json.axis = json.axis || 'enu';\n  json.ellps = json.ellps || 'wgs84';\n  var sphere_ = dc_sphere(json.a, json.b, json.rf, json.ellps, json.sphere);\n  var ecc = dc_eccentricity(sphere_.a, sphere_.b, sphere_.rf, json.R_A);\n  var datumObj = json.datum || datum(json.datumCode, json.datum_params, sphere_.a, sphere_.b, ecc.es, ecc.ep2);\n\n  extend(this, json); // transfer everything over from the projection because we don't know what we'll need\n  extend(this, ourProj); // transfer all the methods from the projection\n\n  // copy the 4 things over we calulated in deriveConstants.sphere\n  this.a = sphere_.a;\n  this.b = sphere_.b;\n  this.rf = sphere_.rf;\n  this.sphere = sphere_.sphere;\n\n  // copy the 3 things we calculated in deriveConstants.eccentricity\n  this.es = ecc.es;\n  this.e = ecc.e;\n  this.ep2 = ecc.ep2;\n\n  // add in the datum object\n  this.datum = datumObj;\n\n  // init the projection\n  this.init();\n\n  // legecy callback from back in the day when it went to spatialreference.org\n  callback(null, this);\n\n}\nProjection.projections = projections;\nProjection.projections.start();\nexport default Projection;\n","import {SIXTH, RA4, RA6, EPSLN} from './constants/values';\nimport {default as Ellipsoid, WGS84} from './constants/Ellipsoid';\nimport match from './match';\n\nexport function eccentricity(a, b, rf, R_A) {\n  var a2 = a * a; // used in geocentric\n  var b2 = b * b; // used in geocentric\n  var es = (a2 - b2) / a2; // e ^ 2\n  var e = 0;\n  if (R_A) {\n    a *= 1 - es * (SIXTH + es * (RA4 + es * RA6));\n    a2 = a * a;\n    es = 0;\n  } else {\n    e = Math.sqrt(es); // eccentricity\n  }\n  var ep2 = (a2 - b2) / b2; // used in geocentric\n  return {\n    es: es,\n    e: e,\n    ep2: ep2\n  };\n}\nexport function sphere(a, b, rf, ellps, sphere) {\n  if (!a) { // do we have an ellipsoid?\n    var ellipse = match(Ellipsoid, ellps);\n    if (!ellipse) {\n      ellipse = WGS84;\n    }\n    a = ellipse.a;\n    b = ellipse.b;\n    rf = ellipse.rf;\n  }\n\n  if (rf && !b) {\n    b = (1.0 - 1.0 / rf) * a;\n  }\n  if (rf === 0 || Math.abs(a - b) < EPSLN) {\n    sphere = true;\n    b = a;\n  }\n  return {\n    a: a,\n    b: b,\n    rf: rf,\n    sphere: sphere\n  };\n}\n","import {PJD_3PARAM, PJD_7PARAM, PJD_NODATUM} from './constants/values';\n\nimport {geodeticToGeocentric, geocentricToGeodetic, geocentricToWgs84, geocentricFromWgs84, compareDatums} from './datumUtils';\nfunction checkParams(type) {\n  return (type === PJD_3PARAM || type === PJD_7PARAM);\n}\n\nexport default function(source, dest, point) {\n  // Short cut if the datums are identical.\n  if (compareDatums(source, dest)) {\n    return point; // in this case, zero is sucess,\n    // whereas cs_compare_datums returns 1 to indicate TRUE\n    // confusing, should fix this\n  }\n\n  // Explicitly skip datum transform by setting 'datum=none' as parameter for either source or dest\n  if (source.datum_type === PJD_NODATUM || dest.datum_type === PJD_NODATUM) {\n    return point;\n  }\n\n  // If this datum requires grid shifts, then apply it to geodetic coordinates.\n\n  // Do we need to go through geocentric coordinates?\n  if (source.es === dest.es && source.a === dest.a && !checkParams(source.datum_type) &&  !checkParams(dest.datum_type)) {\n    return point;\n  }\n\n  // Convert to geocentric coordinates.\n  point = geodeticToGeocentric(point, source.es, source.a);\n  // Convert between datums\n  if (checkParams(source.datum_type)) {\n    point = geocentricToWgs84(point, source.datum_type, source.datum_params);\n  }\n  if (checkParams(dest.datum_type)) {\n    point = geocentricFromWgs84(point, dest.datum_type, dest.datum_params);\n  }\n  return geocentricToGeodetic(point, dest.es, dest.a, dest.b);\n\n}\n","'use strict';\nimport {PJD_3PARAM, PJD_7PARAM, HALF_PI} from './constants/values';\nexport function compareDatums(source, dest) {\n  if (source.datum_type !== dest.datum_type) {\n    return false; // false, datums are not equal\n  } else if (source.a !== dest.a || Math.abs(source.es - dest.es) > 0.000000000050) {\n    // the tolerance for es is to ensure that GRS80 and WGS84\n    // are considered identical\n    return false;\n  } else if (source.datum_type === PJD_3PARAM) {\n    return (source.datum_params[0] === dest.datum_params[0] && source.datum_params[1] === dest.datum_params[1] && source.datum_params[2] === dest.datum_params[2]);\n  } else if (source.datum_type === PJD_7PARAM) {\n    return (source.datum_params[0] === dest.datum_params[0] && source.datum_params[1] === dest.datum_params[1] && source.datum_params[2] === dest.datum_params[2] && source.datum_params[3] === dest.datum_params[3] && source.datum_params[4] === dest.datum_params[4] && source.datum_params[5] === dest.datum_params[5] && source.datum_params[6] === dest.datum_params[6]);\n  } else {\n    return true; // datums are equal\n  }\n} // cs_compare_datums()\n\n/*\n * The function Convert_Geodetic_To_Geocentric converts geodetic coordinates\n * (latitude, longitude, and height) to geocentric coordinates (X, Y, Z),\n * according to the current ellipsoid parameters.\n *\n *    Latitude  : Geodetic latitude in radians                     (input)\n *    Longitude : Geodetic longitude in radians                    (input)\n *    Height    : Geodetic height, in meters                       (input)\n *    X         : Calculated Geocentric X coordinate, in meters    (output)\n *    Y         : Calculated Geocentric Y coordinate, in meters    (output)\n *    Z         : Calculated Geocentric Z coordinate, in meters    (output)\n *\n */\nexport function geodeticToGeocentric(p, es, a) {\n  var Longitude = p.x;\n  var Latitude = p.y;\n  var Height = p.z ? p.z : 0; //Z value not always supplied\n\n  var Rn; /*  Earth radius at location  */\n  var Sin_Lat; /*  Math.sin(Latitude)  */\n  var Sin2_Lat; /*  Square of Math.sin(Latitude)  */\n  var Cos_Lat; /*  Math.cos(Latitude)  */\n\n  /*\n   ** Don't blow up if Latitude is just a little out of the value\n   ** range as it may just be a rounding issue.  Also removed longitude\n   ** test, it should be wrapped by Math.cos() and Math.sin().  NFW for PROJ.4, Sep/2001.\n   */\n  if (Latitude < -HALF_PI && Latitude > -1.001 * HALF_PI) {\n    Latitude = -HALF_PI;\n  } else if (Latitude > HALF_PI && Latitude < 1.001 * HALF_PI) {\n    Latitude = HALF_PI;\n  } else if ((Latitude < -HALF_PI) || (Latitude > HALF_PI)) {\n    /* Latitude out of range */\n    //..reportError('geocent:lat out of range:' + Latitude);\n    return null;\n  }\n\n  if (Longitude > Math.PI) {\n    Longitude -= (2 * Math.PI);\n  }\n  Sin_Lat = Math.sin(Latitude);\n  Cos_Lat = Math.cos(Latitude);\n  Sin2_Lat = Sin_Lat * Sin_Lat;\n  Rn = a / (Math.sqrt(1.0e0 - es * Sin2_Lat));\n  return {\n    x: (Rn + Height) * Cos_Lat * Math.cos(Longitude),\n    y: (Rn + Height) * Cos_Lat * Math.sin(Longitude),\n    z: ((Rn * (1 - es)) + Height) * Sin_Lat\n  };\n} // cs_geodetic_to_geocentric()\n\nexport function geocentricToGeodetic(p, es, a, b) {\n  /* local defintions and variables */\n  /* end-criterium of loop, accuracy of sin(Latitude) */\n  var genau = 1e-12;\n  var genau2 = (genau * genau);\n  var maxiter = 30;\n\n  var P; /* distance between semi-minor axis and location */\n  var RR; /* distance between center and location */\n  var CT; /* sin of geocentric latitude */\n  var ST; /* cos of geocentric latitude */\n  var RX;\n  var RK;\n  var RN; /* Earth radius at location */\n  var CPHI0; /* cos of start or old geodetic latitude in iterations */\n  var SPHI0; /* sin of start or old geodetic latitude in iterations */\n  var CPHI; /* cos of searched geodetic latitude */\n  var SPHI; /* sin of searched geodetic latitude */\n  var SDPHI; /* end-criterium: addition-theorem of sin(Latitude(iter)-Latitude(iter-1)) */\n  var iter; /* # of continous iteration, max. 30 is always enough (s.a.) */\n\n  var X = p.x;\n  var Y = p.y;\n  var Z = p.z ? p.z : 0.0; //Z value not always supplied\n  var Longitude;\n  var Latitude;\n  var Height;\n\n  P = Math.sqrt(X * X + Y * Y);\n  RR = Math.sqrt(X * X + Y * Y + Z * Z);\n\n  /*      special cases for latitude and longitude */\n  if (P / a < genau) {\n\n    /*  special case, if P=0. (X=0., Y=0.) */\n    Longitude = 0.0;\n\n    /*  if (X,Y,Z)=(0.,0.,0.) then Height becomes semi-minor axis\n     *  of ellipsoid (=center of mass), Latitude becomes PI/2 */\n    if (RR / a < genau) {\n      Latitude = HALF_PI;\n      Height = -b;\n      return {\n        x: p.x,\n        y: p.y,\n        z: p.z\n      };\n    }\n  } else {\n    /*  ellipsoidal (geodetic) longitude\n     *  interval: -PI < Longitude <= +PI */\n    Longitude = Math.atan2(Y, X);\n  }\n\n  /* --------------------------------------------------------------\n   * Following iterative algorithm was developped by\n   * \"Institut for Erdmessung\", University of Hannover, July 1988.\n   * Internet: www.ife.uni-hannover.de\n   * Iterative computation of CPHI,SPHI and Height.\n   * Iteration of CPHI and SPHI to 10**-12 radian resp.\n   * 2*10**-7 arcsec.\n   * --------------------------------------------------------------\n   */\n  CT = Z / RR;\n  ST = P / RR;\n  RX = 1.0 / Math.sqrt(1.0 - es * (2.0 - es) * ST * ST);\n  CPHI0 = ST * (1.0 - es) * RX;\n  SPHI0 = CT * RX;\n  iter = 0;\n\n  /* loop to find sin(Latitude) resp. Latitude\n   * until |sin(Latitude(iter)-Latitude(iter-1))| < genau */\n  do {\n    iter++;\n    RN = a / Math.sqrt(1.0 - es * SPHI0 * SPHI0);\n\n    /*  ellipsoidal (geodetic) height */\n    Height = P * CPHI0 + Z * SPHI0 - RN * (1.0 - es * SPHI0 * SPHI0);\n\n    RK = es * RN / (RN + Height);\n    RX = 1.0 / Math.sqrt(1.0 - RK * (2.0 - RK) * ST * ST);\n    CPHI = ST * (1.0 - RK) * RX;\n    SPHI = CT * RX;\n    SDPHI = SPHI * CPHI0 - CPHI * SPHI0;\n    CPHI0 = CPHI;\n    SPHI0 = SPHI;\n  }\n  while (SDPHI * SDPHI > genau2 && iter < maxiter);\n\n  /*      ellipsoidal (geodetic) latitude */\n  Latitude = Math.atan(SPHI / Math.abs(CPHI));\n  return {\n    x: Longitude,\n    y: Latitude,\n    z: Height\n  };\n} // cs_geocentric_to_geodetic()\n\n/****************************************************************/\n// pj_geocentic_to_wgs84( p )\n//  p = point to transform in geocentric coordinates (x,y,z)\n\n\n/** point object, nothing fancy, just allows values to be\n    passed back and forth by reference rather than by value.\n    Other point classes may be used as long as they have\n    x and y properties, which will get modified in the transform method.\n*/\nexport function geocentricToWgs84(p, datum_type, datum_params) {\n\n  if (datum_type === PJD_3PARAM) {\n    // if( x[io] === HUGE_VAL )\n    //    continue;\n    return {\n      x: p.x + datum_params[0],\n      y: p.y + datum_params[1],\n      z: p.z + datum_params[2],\n    };\n  } else if (datum_type === PJD_7PARAM) {\n    var Dx_BF = datum_params[0];\n    var Dy_BF = datum_params[1];\n    var Dz_BF = datum_params[2];\n    var Rx_BF = datum_params[3];\n    var Ry_BF = datum_params[4];\n    var Rz_BF = datum_params[5];\n    var M_BF = datum_params[6];\n    // if( x[io] === HUGE_VAL )\n    //    continue;\n    return {\n      x: M_BF * (p.x - Rz_BF * p.y + Ry_BF * p.z) + Dx_BF,\n      y: M_BF * (Rz_BF * p.x + p.y - Rx_BF * p.z) + Dy_BF,\n      z: M_BF * (-Ry_BF * p.x + Rx_BF * p.y + p.z) + Dz_BF\n    };\n  }\n} // cs_geocentric_to_wgs84\n\n/****************************************************************/\n// pj_geocentic_from_wgs84()\n//  coordinate system definition,\n//  point to transform in geocentric coordinates (x,y,z)\nexport function geocentricFromWgs84(p, datum_type, datum_params) {\n\n  if (datum_type === PJD_3PARAM) {\n    //if( x[io] === HUGE_VAL )\n    //    continue;\n    return {\n      x: p.x - datum_params[0],\n      y: p.y - datum_params[1],\n      z: p.z - datum_params[2],\n    };\n\n  } else if (datum_type === PJD_7PARAM) {\n    var Dx_BF = datum_params[0];\n    var Dy_BF = datum_params[1];\n    var Dz_BF = datum_params[2];\n    var Rx_BF = datum_params[3];\n    var Ry_BF = datum_params[4];\n    var Rz_BF = datum_params[5];\n    var M_BF = datum_params[6];\n    var x_tmp = (p.x - Dx_BF) / M_BF;\n    var y_tmp = (p.y - Dy_BF) / M_BF;\n    var z_tmp = (p.z - Dz_BF) / M_BF;\n    //if( x[io] === HUGE_VAL )\n    //    continue;\n\n    return {\n      x: x_tmp + Rz_BF * y_tmp - Ry_BF * z_tmp,\n      y: -Rz_BF * x_tmp + y_tmp + Rx_BF * z_tmp,\n      z: Ry_BF * x_tmp - Rx_BF * y_tmp + z_tmp\n    };\n  } //cs_geocentric_from_wgs84()\n}\n","export default function(crs, denorm, point) {\n  var xin = point.x,\n    yin = point.y,\n    zin = point.z || 0.0;\n  var v, t, i;\n  var out = {};\n  for (i = 0; i < 3; i++) {\n    if (denorm && i === 2 && point.z === undefined) {\n      continue;\n    }\n    if (i === 0) {\n      v = xin;\n      t = 'x';\n    }\n    else if (i === 1) {\n      v = yin;\n      t = 'y';\n    }\n    else {\n      v = zin;\n      t = 'z';\n    }\n    switch (crs.axis[i]) {\n    case 'e':\n      out[t] = v;\n      break;\n    case 'w':\n      out[t] = -v;\n      break;\n    case 'n':\n      out[t] = v;\n      break;\n    case 's':\n      out[t] = -v;\n      break;\n    case 'u':\n      if (point[t] !== undefined) {\n        out.z = v;\n      }\n      break;\n    case 'd':\n      if (point[t] !== undefined) {\n        out.z = -v;\n      }\n      break;\n    default:\n      //console.log(\"ERROR: unknow axis (\"+crs.axis[i]+\") - check definition of \"+crs.projName);\n      return null;\n    }\n  }\n  return out;\n}\n","export default function (array){\n  var out = {\n    x: array[0],\n    y: array[1]\n  };\n  if (array.length>2) {\n    out.z = array[2];\n  }\n  if (array.length>3) {\n    out.m = array[3];\n  }\n  return out;\n}","export default function (point) {\n  checkCoord(point.x);\n  checkCoord(point.y);\n}\nfunction checkCoord(num) {\n  if (typeof Number.isFinite === 'function') {\n    if (Number.isFinite(num)) {\n      return;\n    }\n    throw new TypeError('coordinates must be finite numbers');\n  }\n  if (typeof num !== 'number' || num !== num || !isFinite(num)) {\n    throw new TypeError('coordinates must be finite numbers');\n  }\n}\n","import {D2R, R2D, PJD_3PARAM, PJD_7PARAM} from './constants/values';\nimport datum_transform from './datum_transform';\nimport adjust_axis from './adjust_axis';\nimport proj from './Proj';\nimport toPoint from './common/toPoint';\nimport checkSanity from './checkSanity';\n\nfunction checkNotWGS(source, dest) {\n  return ((source.datum.datum_type === PJD_3PARAM || source.datum.datum_type === PJD_7PARAM) && dest.datumCode !== 'WGS84') || ((dest.datum.datum_type === PJD_3PARAM || dest.datum.datum_type === PJD_7PARAM) && source.datumCode !== 'WGS84');\n}\n\nexport default function transform(source, dest, point) {\n  var wgs84;\n  if (Array.isArray(point)) {\n    point = toPoint(point);\n  }\n  checkSanity(point);\n  // Workaround for datum shifts towgs84, if either source or destination projection is not wgs84\n  if (source.datum && dest.datum && checkNotWGS(source, dest)) {\n    wgs84 = new proj('WGS84');\n    point = transform(source, wgs84, point);\n    source = wgs84;\n  }\n  // DGR, 2010/11/12\n  if (source.axis !== 'enu') {\n    point = adjust_axis(source, false, point);\n  }\n  // Transform source points to long/lat, if they aren't already.\n  if (source.projName === 'longlat') {\n    point = {\n      x: point.x * D2R,\n      y: point.y * D2R\n    };\n  }\n  else {\n    if (source.to_meter) {\n      point = {\n        x: point.x * source.to_meter,\n        y: point.y * source.to_meter\n      };\n    }\n    point = source.inverse(point); // Convert Cartesian to longlat\n  }\n  // Adjust for the prime meridian if necessary\n  if (source.from_greenwich) {\n    point.x += source.from_greenwich;\n  }\n\n  // Convert datums if needed, and if possible.\n  point = datum_transform(source.datum, dest.datum, point);\n\n  // Adjust for the prime meridian if necessary\n  if (dest.from_greenwich) {\n    point = {\n      x: point.x - dest.from_greenwich,\n      y: point.y\n    };\n  }\n\n  if (dest.projName === 'longlat') {\n    // convert radians to decimal degrees\n    point = {\n      x: point.x * R2D,\n      y: point.y * R2D\n    };\n  } else { // else project\n    point = dest.forward(point);\n    if (dest.to_meter) {\n      point = {\n        x: point.x / dest.to_meter,\n        y: point.y / dest.to_meter\n      };\n    }\n  }\n\n  // DGR, 2010/11/12\n  if (dest.axis !== 'enu') {\n    return adjust_axis(dest, true, point);\n  }\n\n  return point;\n}\n","import proj from './Proj';\nimport transform from './transform';\nvar wgs84 = proj('WGS84');\n\nfunction transformer(from, to, coords) {\n  var transformedArray, out, keys;\n  if (Array.isArray(coords)) {\n    transformedArray = transform(from, to, coords);\n    if (coords.length === 3) {\n      return [transformedArray.x, transformedArray.y, transformedArray.z];\n    }\n    else {\n      return [transformedArray.x, transformedArray.y];\n    }\n  }\n  else {\n    out = transform(from, to, coords);\n    keys = Object.keys(coords);\n    if (keys.length === 2) {\n      return out;\n    }\n    keys.forEach(function (key) {\n      if (key === 'x' || key === 'y') {\n        return;\n      }\n      out[key] = coords[key];\n    });\n    return out;\n  }\n}\n\nfunction checkProj(item) {\n  if (item instanceof proj) {\n    return item;\n  }\n  if (item.oProj) {\n    return item.oProj;\n  }\n  return proj(item);\n}\nfunction proj4(fromProj, toProj, coord) {\n  fromProj = checkProj(fromProj);\n  var single = false;\n  var obj;\n  if (typeof toProj === 'undefined') {\n    toProj = fromProj;\n    fromProj = wgs84;\n    single = true;\n  }\n  else if (typeof toProj.x !== 'undefined' || Array.isArray(toProj)) {\n    coord = toProj;\n    toProj = fromProj;\n    fromProj = wgs84;\n    single = true;\n  }\n  toProj = checkProj(toProj);\n  if (coord) {\n    return transformer(fromProj, toProj, coord);\n  }\n  else {\n    obj = {\n      forward: function(coords) {\n        return transformer(fromProj, toProj, coords);\n      },\n      inverse: function(coords) {\n        return transformer(toProj, fromProj, coords);\n      }\n    };\n    if (single) {\n      obj.oProj = toProj;\n    }\n    return obj;\n  }\n}\nexport default proj4;\n","\n\n\n/**\n * UTM zones are grouped, and assigned to one of a group of 6\n * sets.\n *\n * {int} @private\n */\nvar NUM_100K_SETS = 6;\n\n/**\n * The column letters (for easting) of the lower left value, per\n * set.\n *\n * {string} @private\n */\nvar SET_ORIGIN_COLUMN_LETTERS = 'AJSAJS';\n\n/**\n * The row letters (for northing) of the lower left value, per\n * set.\n *\n * {string} @private\n */\nvar SET_ORIGIN_ROW_LETTERS = 'AFAFAF';\n\nvar A = 65; // A\nvar I = 73; // I\nvar O = 79; // O\nvar V = 86; // V\nvar Z = 90; // Z\nexport default {\n  forward: forward,\n  inverse: inverse,\n  toPoint: toPoint\n};\n/**\n * Conversion of lat/lon to MGRS.\n *\n * @param {object} ll Object literal with lat and lon properties on a\n *     WGS84 ellipsoid.\n * @param {int} accuracy Accuracy in digits (5 for 1 m, 4 for 10 m, 3 for\n *      100 m, 2 for 1000 m or 1 for 10000 m). Optional, default is 5.\n * @return {string} the MGRS string for the given location and accuracy.\n */\nexport function forward(ll, accuracy) {\n  accuracy = accuracy || 5; // default accuracy 1m\n  return encode(LLtoUTM({\n    lat: ll[1],\n    lon: ll[0]\n  }), accuracy);\n};\n\n/**\n * Conversion of MGRS to lat/lon.\n *\n * @param {string} mgrs MGRS string.\n * @return {array} An array with left (longitude), bottom (latitude), right\n *     (longitude) and top (latitude) values in WGS84, representing the\n *     bounding box for the provided MGRS reference.\n */\nexport function inverse(mgrs) {\n  var bbox = UTMtoLL(decode(mgrs.toUpperCase()));\n  if (bbox.lat && bbox.lon) {\n    return [bbox.lon, bbox.lat, bbox.lon, bbox.lat];\n  }\n  return [bbox.left, bbox.bottom, bbox.right, bbox.top];\n};\n\nexport function toPoint(mgrs) {\n  var bbox = UTMtoLL(decode(mgrs.toUpperCase()));\n  if (bbox.lat && bbox.lon) {\n    return [bbox.lon, bbox.lat];\n  }\n  return [(bbox.left + bbox.right) / 2, (bbox.top + bbox.bottom) / 2];\n};\n/**\n * Conversion from degrees to radians.\n *\n * @private\n * @param {number} deg the angle in degrees.\n * @return {number} the angle in radians.\n */\nfunction degToRad(deg) {\n  return (deg * (Math.PI / 180.0));\n}\n\n/**\n * Conversion from radians to degrees.\n *\n * @private\n * @param {number} rad the angle in radians.\n * @return {number} the angle in degrees.\n */\nfunction radToDeg(rad) {\n  return (180.0 * (rad / Math.PI));\n}\n\n/**\n * Converts a set of Longitude and Latitude co-ordinates to UTM\n * using the WGS84 ellipsoid.\n *\n * @private\n * @param {object} ll Object literal with lat and lon properties\n *     representing the WGS84 coordinate to be converted.\n * @return {object} Object literal containing the UTM value with easting,\n *     northing, zoneNumber and zoneLetter properties, and an optional\n *     accuracy property in digits. Returns null if the conversion failed.\n */\nfunction LLtoUTM(ll) {\n  var Lat = ll.lat;\n  var Long = ll.lon;\n  var a = 6378137.0; //ellip.radius;\n  var eccSquared = 0.00669438; //ellip.eccsq;\n  var k0 = 0.9996;\n  var LongOrigin;\n  var eccPrimeSquared;\n  var N, T, C, A, M;\n  var LatRad = degToRad(Lat);\n  var LongRad = degToRad(Long);\n  var LongOriginRad;\n  var ZoneNumber;\n  // (int)\n  ZoneNumber = Math.floor((Long + 180) / 6) + 1;\n\n  //Make sure the longitude 180.00 is in Zone 60\n  if (Long === 180) {\n    ZoneNumber = 60;\n  }\n\n  // Special zone for Norway\n  if (Lat >= 56.0 && Lat < 64.0 && Long >= 3.0 && Long < 12.0) {\n    ZoneNumber = 32;\n  }\n\n  // Special zones for Svalbard\n  if (Lat >= 72.0 && Lat < 84.0) {\n    if (Long >= 0.0 && Long < 9.0) {\n      ZoneNumber = 31;\n    }\n    else if (Long >= 9.0 && Long < 21.0) {\n      ZoneNumber = 33;\n    }\n    else if (Long >= 21.0 && Long < 33.0) {\n      ZoneNumber = 35;\n    }\n    else if (Long >= 33.0 && Long < 42.0) {\n      ZoneNumber = 37;\n    }\n  }\n\n  LongOrigin = (ZoneNumber - 1) * 6 - 180 + 3; //+3 puts origin\n  // in middle of\n  // zone\n  LongOriginRad = degToRad(LongOrigin);\n\n  eccPrimeSquared = (eccSquared) / (1 - eccSquared);\n\n  N = a / Math.sqrt(1 - eccSquared * Math.sin(LatRad) * Math.sin(LatRad));\n  T = Math.tan(LatRad) * Math.tan(LatRad);\n  C = eccPrimeSquared * Math.cos(LatRad) * Math.cos(LatRad);\n  A = Math.cos(LatRad) * (LongRad - LongOriginRad);\n\n  M = a * ((1 - eccSquared / 4 - 3 * eccSquared * eccSquared / 64 - 5 * eccSquared * eccSquared * eccSquared / 256) * LatRad - (3 * eccSquared / 8 + 3 * eccSquared * eccSquared / 32 + 45 * eccSquared * eccSquared * eccSquared / 1024) * Math.sin(2 * LatRad) + (15 * eccSquared * eccSquared / 256 + 45 * eccSquared * eccSquared * eccSquared / 1024) * Math.sin(4 * LatRad) - (35 * eccSquared * eccSquared * eccSquared / 3072) * Math.sin(6 * LatRad));\n\n  var UTMEasting = (k0 * N * (A + (1 - T + C) * A * A * A / 6.0 + (5 - 18 * T + T * T + 72 * C - 58 * eccPrimeSquared) * A * A * A * A * A / 120.0) + 500000.0);\n\n  var UTMNorthing = (k0 * (M + N * Math.tan(LatRad) * (A * A / 2 + (5 - T + 9 * C + 4 * C * C) * A * A * A * A / 24.0 + (61 - 58 * T + T * T + 600 * C - 330 * eccPrimeSquared) * A * A * A * A * A * A / 720.0)));\n  if (Lat < 0.0) {\n    UTMNorthing += 10000000.0; //10000000 meter offset for\n    // southern hemisphere\n  }\n\n  return {\n    northing: Math.round(UTMNorthing),\n    easting: Math.round(UTMEasting),\n    zoneNumber: ZoneNumber,\n    zoneLetter: getLetterDesignator(Lat)\n  };\n}\n\n/**\n * Converts UTM coords to lat/long, using the WGS84 ellipsoid. This is a convenience\n * class where the Zone can be specified as a single string eg.\"60N\" which\n * is then broken down into the ZoneNumber and ZoneLetter.\n *\n * @private\n * @param {object} utm An object literal with northing, easting, zoneNumber\n *     and zoneLetter properties. If an optional accuracy property is\n *     provided (in meters), a bounding box will be returned instead of\n *     latitude and longitude.\n * @return {object} An object literal containing either lat and lon values\n *     (if no accuracy was provided), or top, right, bottom and left values\n *     for the bounding box calculated according to the provided accuracy.\n *     Returns null if the conversion failed.\n */\nfunction UTMtoLL(utm) {\n\n  var UTMNorthing = utm.northing;\n  var UTMEasting = utm.easting;\n  var zoneLetter = utm.zoneLetter;\n  var zoneNumber = utm.zoneNumber;\n  // check the ZoneNummber is valid\n  if (zoneNumber < 0 || zoneNumber > 60) {\n    return null;\n  }\n\n  var k0 = 0.9996;\n  var a = 6378137.0; //ellip.radius;\n  var eccSquared = 0.00669438; //ellip.eccsq;\n  var eccPrimeSquared;\n  var e1 = (1 - Math.sqrt(1 - eccSquared)) / (1 + Math.sqrt(1 - eccSquared));\n  var N1, T1, C1, R1, D, M;\n  var LongOrigin;\n  var mu, phi1Rad;\n\n  // remove 500,000 meter offset for longitude\n  var x = UTMEasting - 500000.0;\n  var y = UTMNorthing;\n\n  // We must know somehow if we are in the Northern or Southern\n  // hemisphere, this is the only time we use the letter So even\n  // if the Zone letter isn't exactly correct it should indicate\n  // the hemisphere correctly\n  if (zoneLetter < 'N') {\n    y -= 10000000.0; // remove 10,000,000 meter offset used\n    // for southern hemisphere\n  }\n\n  // There are 60 zones with zone 1 being at West -180 to -174\n  LongOrigin = (zoneNumber - 1) * 6 - 180 + 3; // +3 puts origin\n  // in middle of\n  // zone\n\n  eccPrimeSquared = (eccSquared) / (1 - eccSquared);\n\n  M = y / k0;\n  mu = M / (a * (1 - eccSquared / 4 - 3 * eccSquared * eccSquared / 64 - 5 * eccSquared * eccSquared * eccSquared / 256));\n\n  phi1Rad = mu + (3 * e1 / 2 - 27 * e1 * e1 * e1 / 32) * Math.sin(2 * mu) + (21 * e1 * e1 / 16 - 55 * e1 * e1 * e1 * e1 / 32) * Math.sin(4 * mu) + (151 * e1 * e1 * e1 / 96) * Math.sin(6 * mu);\n  // double phi1 = ProjMath.radToDeg(phi1Rad);\n\n  N1 = a / Math.sqrt(1 - eccSquared * Math.sin(phi1Rad) * Math.sin(phi1Rad));\n  T1 = Math.tan(phi1Rad) * Math.tan(phi1Rad);\n  C1 = eccPrimeSquared * Math.cos(phi1Rad) * Math.cos(phi1Rad);\n  R1 = a * (1 - eccSquared) / Math.pow(1 - eccSquared * Math.sin(phi1Rad) * Math.sin(phi1Rad), 1.5);\n  D = x / (N1 * k0);\n\n  var lat = phi1Rad - (N1 * Math.tan(phi1Rad) / R1) * (D * D / 2 - (5 + 3 * T1 + 10 * C1 - 4 * C1 * C1 - 9 * eccPrimeSquared) * D * D * D * D / 24 + (61 + 90 * T1 + 298 * C1 + 45 * T1 * T1 - 252 * eccPrimeSquared - 3 * C1 * C1) * D * D * D * D * D * D / 720);\n  lat = radToDeg(lat);\n\n  var lon = (D - (1 + 2 * T1 + C1) * D * D * D / 6 + (5 - 2 * C1 + 28 * T1 - 3 * C1 * C1 + 8 * eccPrimeSquared + 24 * T1 * T1) * D * D * D * D * D / 120) / Math.cos(phi1Rad);\n  lon = LongOrigin + radToDeg(lon);\n\n  var result;\n  if (utm.accuracy) {\n    var topRight = UTMtoLL({\n      northing: utm.northing + utm.accuracy,\n      easting: utm.easting + utm.accuracy,\n      zoneLetter: utm.zoneLetter,\n      zoneNumber: utm.zoneNumber\n    });\n    result = {\n      top: topRight.lat,\n      right: topRight.lon,\n      bottom: lat,\n      left: lon\n    };\n  }\n  else {\n    result = {\n      lat: lat,\n      lon: lon\n    };\n  }\n  return result;\n}\n\n/**\n * Calculates the MGRS letter designator for the given latitude.\n *\n * @private\n * @param {number} lat The latitude in WGS84 to get the letter designator\n *     for.\n * @return {char} The letter designator.\n */\nfunction getLetterDesignator(lat) {\n  //This is here as an error flag to show that the Latitude is\n  //outside MGRS limits\n  var LetterDesignator = 'Z';\n\n  if ((84 >= lat) && (lat >= 72)) {\n    LetterDesignator = 'X';\n  }\n  else if ((72 > lat) && (lat >= 64)) {\n    LetterDesignator = 'W';\n  }\n  else if ((64 > lat) && (lat >= 56)) {\n    LetterDesignator = 'V';\n  }\n  else if ((56 > lat) && (lat >= 48)) {\n    LetterDesignator = 'U';\n  }\n  else if ((48 > lat) && (lat >= 40)) {\n    LetterDesignator = 'T';\n  }\n  else if ((40 > lat) && (lat >= 32)) {\n    LetterDesignator = 'S';\n  }\n  else if ((32 > lat) && (lat >= 24)) {\n    LetterDesignator = 'R';\n  }\n  else if ((24 > lat) && (lat >= 16)) {\n    LetterDesignator = 'Q';\n  }\n  else if ((16 > lat) && (lat >= 8)) {\n    LetterDesignator = 'P';\n  }\n  else if ((8 > lat) && (lat >= 0)) {\n    LetterDesignator = 'N';\n  }\n  else if ((0 > lat) && (lat >= -8)) {\n    LetterDesignator = 'M';\n  }\n  else if ((-8 > lat) && (lat >= -16)) {\n    LetterDesignator = 'L';\n  }\n  else if ((-16 > lat) && (lat >= -24)) {\n    LetterDesignator = 'K';\n  }\n  else if ((-24 > lat) && (lat >= -32)) {\n    LetterDesignator = 'J';\n  }\n  else if ((-32 > lat) && (lat >= -40)) {\n    LetterDesignator = 'H';\n  }\n  else if ((-40 > lat) && (lat >= -48)) {\n    LetterDesignator = 'G';\n  }\n  else if ((-48 > lat) && (lat >= -56)) {\n    LetterDesignator = 'F';\n  }\n  else if ((-56 > lat) && (lat >= -64)) {\n    LetterDesignator = 'E';\n  }\n  else if ((-64 > lat) && (lat >= -72)) {\n    LetterDesignator = 'D';\n  }\n  else if ((-72 > lat) && (lat >= -80)) {\n    LetterDesignator = 'C';\n  }\n  return LetterDesignator;\n}\n\n/**\n * Encodes a UTM location as MGRS string.\n *\n * @private\n * @param {object} utm An object literal with easting, northing,\n *     zoneLetter, zoneNumber\n * @param {number} accuracy Accuracy in digits (1-5).\n * @return {string} MGRS string for the given UTM location.\n */\nfunction encode(utm, accuracy) {\n  // prepend with leading zeroes\n  var seasting = \"00000\" + utm.easting,\n    snorthing = \"00000\" + utm.northing;\n\n  return utm.zoneNumber + utm.zoneLetter + get100kID(utm.easting, utm.northing, utm.zoneNumber) + seasting.substr(seasting.length - 5, accuracy) + snorthing.substr(snorthing.length - 5, accuracy);\n}\n\n/**\n * Get the two letter 100k designator for a given UTM easting,\n * northing and zone number value.\n *\n * @private\n * @param {number} easting\n * @param {number} northing\n * @param {number} zoneNumber\n * @return the two letter 100k designator for the given UTM location.\n */\nfunction get100kID(easting, northing, zoneNumber) {\n  var setParm = get100kSetForZone(zoneNumber);\n  var setColumn = Math.floor(easting / 100000);\n  var setRow = Math.floor(northing / 100000) % 20;\n  return getLetter100kID(setColumn, setRow, setParm);\n}\n\n/**\n * Given a UTM zone number, figure out the MGRS 100K set it is in.\n *\n * @private\n * @param {number} i An UTM zone number.\n * @return {number} the 100k set the UTM zone is in.\n */\nfunction get100kSetForZone(i) {\n  var setParm = i % NUM_100K_SETS;\n  if (setParm === 0) {\n    setParm = NUM_100K_SETS;\n  }\n\n  return setParm;\n}\n\n/**\n * Get the two-letter MGRS 100k designator given information\n * translated from the UTM northing, easting and zone number.\n *\n * @private\n * @param {number} column the column index as it relates to the MGRS\n *        100k set spreadsheet, created from the UTM easting.\n *        Values are 1-8.\n * @param {number} row the row index as it relates to the MGRS 100k set\n *        spreadsheet, created from the UTM northing value. Values\n *        are from 0-19.\n * @param {number} parm the set block, as it relates to the MGRS 100k set\n *        spreadsheet, created from the UTM zone. Values are from\n *        1-60.\n * @return two letter MGRS 100k code.\n */\nfunction getLetter100kID(column, row, parm) {\n  // colOrigin and rowOrigin are the letters at the origin of the set\n  var index = parm - 1;\n  var colOrigin = SET_ORIGIN_COLUMN_LETTERS.charCodeAt(index);\n  var rowOrigin = SET_ORIGIN_ROW_LETTERS.charCodeAt(index);\n\n  // colInt and rowInt are the letters to build to return\n  var colInt = colOrigin + column - 1;\n  var rowInt = rowOrigin + row;\n  var rollover = false;\n\n  if (colInt > Z) {\n    colInt = colInt - Z + A - 1;\n    rollover = true;\n  }\n\n  if (colInt === I || (colOrigin < I && colInt > I) || ((colInt > I || colOrigin < I) && rollover)) {\n    colInt++;\n  }\n\n  if (colInt === O || (colOrigin < O && colInt > O) || ((colInt > O || colOrigin < O) && rollover)) {\n    colInt++;\n\n    if (colInt === I) {\n      colInt++;\n    }\n  }\n\n  if (colInt > Z) {\n    colInt = colInt - Z + A - 1;\n  }\n\n  if (rowInt > V) {\n    rowInt = rowInt - V + A - 1;\n    rollover = true;\n  }\n  else {\n    rollover = false;\n  }\n\n  if (((rowInt === I) || ((rowOrigin < I) && (rowInt > I))) || (((rowInt > I) || (rowOrigin < I)) && rollover)) {\n    rowInt++;\n  }\n\n  if (((rowInt === O) || ((rowOrigin < O) && (rowInt > O))) || (((rowInt > O) || (rowOrigin < O)) && rollover)) {\n    rowInt++;\n\n    if (rowInt === I) {\n      rowInt++;\n    }\n  }\n\n  if (rowInt > V) {\n    rowInt = rowInt - V + A - 1;\n  }\n\n  var twoLetter = String.fromCharCode(colInt) + String.fromCharCode(rowInt);\n  return twoLetter;\n}\n\n/**\n * Decode the UTM parameters from a MGRS string.\n *\n * @private\n * @param {string} mgrsString an UPPERCASE coordinate string is expected.\n * @return {object} An object literal with easting, northing, zoneLetter,\n *     zoneNumber and accuracy (in meters) properties.\n */\nfunction decode(mgrsString) {\n\n  if (mgrsString && mgrsString.length === 0) {\n    throw (\"MGRSPoint coverting from nothing\");\n  }\n\n  var length = mgrsString.length;\n\n  var hunK = null;\n  var sb = \"\";\n  var testChar;\n  var i = 0;\n\n  // get Zone number\n  while (!(/[A-Z]/).test(testChar = mgrsString.charAt(i))) {\n    if (i >= 2) {\n      throw (\"MGRSPoint bad conversion from: \" + mgrsString);\n    }\n    sb += testChar;\n    i++;\n  }\n\n  var zoneNumber = parseInt(sb, 10);\n\n  if (i === 0 || i + 3 > length) {\n    // A good MGRS string has to be 4-5 digits long,\n    // ##AAA/#AAA at least.\n    throw (\"MGRSPoint bad conversion from: \" + mgrsString);\n  }\n\n  var zoneLetter = mgrsString.charAt(i++);\n\n  // Should we check the zone letter here? Why not.\n  if (zoneLetter <= 'A' || zoneLetter === 'B' || zoneLetter === 'Y' || zoneLetter >= 'Z' || zoneLetter === 'I' || zoneLetter === 'O') {\n    throw (\"MGRSPoint zone letter \" + zoneLetter + \" not handled: \" + mgrsString);\n  }\n\n  hunK = mgrsString.substring(i, i += 2);\n\n  var set = get100kSetForZone(zoneNumber);\n\n  var east100k = getEastingFromChar(hunK.charAt(0), set);\n  var north100k = getNorthingFromChar(hunK.charAt(1), set);\n\n  // We have a bug where the northing may be 2000000 too low.\n  // How\n  // do we know when to roll over?\n\n  while (north100k < getMinNorthing(zoneLetter)) {\n    north100k += 2000000;\n  }\n\n  // calculate the char index for easting/northing separator\n  var remainder = length - i;\n\n  if (remainder % 2 !== 0) {\n    throw (\"MGRSPoint has to have an even number \\nof digits after the zone letter and two 100km letters - front \\nhalf for easting meters, second half for \\nnorthing meters\" + mgrsString);\n  }\n\n  var sep = remainder / 2;\n\n  var sepEasting = 0.0;\n  var sepNorthing = 0.0;\n  var accuracyBonus, sepEastingString, sepNorthingString, easting, northing;\n  if (sep > 0) {\n    accuracyBonus = 100000.0 / Math.pow(10, sep);\n    sepEastingString = mgrsString.substring(i, i + sep);\n    sepEasting = parseFloat(sepEastingString) * accuracyBonus;\n    sepNorthingString = mgrsString.substring(i + sep);\n    sepNorthing = parseFloat(sepNorthingString) * accuracyBonus;\n  }\n\n  easting = sepEasting + east100k;\n  northing = sepNorthing + north100k;\n\n  return {\n    easting: easting,\n    northing: northing,\n    zoneLetter: zoneLetter,\n    zoneNumber: zoneNumber,\n    accuracy: accuracyBonus\n  };\n}\n\n/**\n * Given the first letter from a two-letter MGRS 100k zone, and given the\n * MGRS table set for the zone number, figure out the easting value that\n * should be added to the other, secondary easting value.\n *\n * @private\n * @param {char} e The first letter from a two-letter MGRS 100´k zone.\n * @param {number} set The MGRS table set for the zone number.\n * @return {number} The easting value for the given letter and set.\n */\nfunction getEastingFromChar(e, set) {\n  // colOrigin is the letter at the origin of the set for the\n  // column\n  var curCol = SET_ORIGIN_COLUMN_LETTERS.charCodeAt(set - 1);\n  var eastingValue = 100000.0;\n  var rewindMarker = false;\n\n  while (curCol !== e.charCodeAt(0)) {\n    curCol++;\n    if (curCol === I) {\n      curCol++;\n    }\n    if (curCol === O) {\n      curCol++;\n    }\n    if (curCol > Z) {\n      if (rewindMarker) {\n        throw (\"Bad character: \" + e);\n      }\n      curCol = A;\n      rewindMarker = true;\n    }\n    eastingValue += 100000.0;\n  }\n\n  return eastingValue;\n}\n\n/**\n * Given the second letter from a two-letter MGRS 100k zone, and given the\n * MGRS table set for the zone number, figure out the northing value that\n * should be added to the other, secondary northing value. You have to\n * remember that Northings are determined from the equator, and the vertical\n * cycle of letters mean a 2000000 additional northing meters. This happens\n * approx. every 18 degrees of latitude. This method does *NOT* count any\n * additional northings. You have to figure out how many 2000000 meters need\n * to be added for the zone letter of the MGRS coordinate.\n *\n * @private\n * @param {char} n Second letter of the MGRS 100k zone\n * @param {number} set The MGRS table set number, which is dependent on the\n *     UTM zone number.\n * @return {number} The northing value for the given letter and set.\n */\nfunction getNorthingFromChar(n, set) {\n\n  if (n > 'V') {\n    throw (\"MGRSPoint given invalid Northing \" + n);\n  }\n\n  // rowOrigin is the letter at the origin of the set for the\n  // column\n  var curRow = SET_ORIGIN_ROW_LETTERS.charCodeAt(set - 1);\n  var northingValue = 0.0;\n  var rewindMarker = false;\n\n  while (curRow !== n.charCodeAt(0)) {\n    curRow++;\n    if (curRow === I) {\n      curRow++;\n    }\n    if (curRow === O) {\n      curRow++;\n    }\n    // fixing a bug making whole application hang in this loop\n    // when 'n' is a wrong character\n    if (curRow > V) {\n      if (rewindMarker) { // making sure that this loop ends\n        throw (\"Bad character: \" + n);\n      }\n      curRow = A;\n      rewindMarker = true;\n    }\n    northingValue += 100000.0;\n  }\n\n  return northingValue;\n}\n\n/**\n * The function getMinNorthing returns the minimum northing value of a MGRS\n * zone.\n *\n * Ported from Geotrans' c Lattitude_Band_Value structure table.\n *\n * @private\n * @param {char} zoneLetter The MGRS zone to get the min northing for.\n * @return {number}\n */\nfunction getMinNorthing(zoneLetter) {\n  var northing;\n  switch (zoneLetter) {\n  case 'C':\n    northing = 1100000.0;\n    break;\n  case 'D':\n    northing = 2000000.0;\n    break;\n  case 'E':\n    northing = 2800000.0;\n    break;\n  case 'F':\n    northing = 3700000.0;\n    break;\n  case 'G':\n    northing = 4600000.0;\n    break;\n  case 'H':\n    northing = 5500000.0;\n    break;\n  case 'J':\n    northing = 6400000.0;\n    break;\n  case 'K':\n    northing = 7300000.0;\n    break;\n  case 'L':\n    northing = 8200000.0;\n    break;\n  case 'M':\n    northing = 9100000.0;\n    break;\n  case 'N':\n    northing = 0.0;\n    break;\n  case 'P':\n    northing = 800000.0;\n    break;\n  case 'Q':\n    northing = 1700000.0;\n    break;\n  case 'R':\n    northing = 2600000.0;\n    break;\n  case 'S':\n    northing = 3500000.0;\n    break;\n  case 'T':\n    northing = 4400000.0;\n    break;\n  case 'U':\n    northing = 5300000.0;\n    break;\n  case 'V':\n    northing = 6200000.0;\n    break;\n  case 'W':\n    northing = 7000000.0;\n    break;\n  case 'X':\n    northing = 7900000.0;\n    break;\n  default:\n    northing = -1.0;\n  }\n  if (northing >= 0.0) {\n    return northing;\n  }\n  else {\n    throw (\"Invalid zone letter: \" + zoneLetter);\n  }\n\n}\n","import {toPoint, forward} from 'mgrs';\n\nfunction Point(x, y, z) {\n  if (!(this instanceof Point)) {\n    return new Point(x, y, z);\n  }\n  if (Array.isArray(x)) {\n    this.x = x[0];\n    this.y = x[1];\n    this.z = x[2] || 0.0;\n  } else if(typeof x === 'object') {\n    this.x = x.x;\n    this.y = x.y;\n    this.z = x.z || 0.0;\n  } else if (typeof x === 'string' && typeof y === 'undefined') {\n    var coords = x.split(',');\n    this.x = parseFloat(coords[0], 10);\n    this.y = parseFloat(coords[1], 10);\n    this.z = parseFloat(coords[2], 10) || 0.0;\n  } else {\n    this.x = x;\n    this.y = y;\n    this.z = z || 0.0;\n  }\n  console.warn('proj4.Point will be removed in version 3, use proj4.toPoint');\n}\n\nPoint.fromMGRS = function(mgrsStr) {\n  return new Point(toPoint(mgrsStr));\n};\nPoint.prototype.toMGRS = function(accuracy) {\n  return forward([this.x, this.y], accuracy);\n};\nexport default Point;\n","var C00 = 1;\nvar C02 = 0.25;\nvar C04 = 0.046875;\nvar C06 = 0.01953125;\nvar C08 = 0.01068115234375;\nvar C22 = 0.75;\nvar C44 = 0.46875;\nvar C46 = 0.01302083333333333333;\nvar C48 = 0.00712076822916666666;\nvar C66 = 0.36458333333333333333;\nvar C68 = 0.00569661458333333333;\nvar C88 = 0.3076171875;\n\nexport default function(es) {\n  var en = [];\n  en[0] = C00 - es * (C02 + es * (C04 + es * (C06 + es * C08)));\n  en[1] = es * (C22 - es * (C04 + es * (C06 + es * C08)));\n  var t = es * es;\n  en[2] = t * (C44 - es * (C46 + es * C48));\n  t *= es;\n  en[3] = t * (C66 - es * C68);\n  en[4] = t * es * C88;\n  return en;\n}","export default function(phi, sphi, cphi, en) {\n  cphi *= sphi;\n  sphi *= sphi;\n  return (en[0] * phi - cphi * (en[1] + sphi * (en[2] + sphi * (en[3] + sphi * en[4]))));\n}","import pj_mlfn from \"./pj_mlfn\";\nimport {EPSLN} from '../constants/values';\n\nvar MAX_ITER = 20;\n\nexport default function(arg, es, en) {\n  var k = 1 / (1 - es);\n  var phi = arg;\n  for (var i = MAX_ITER; i; --i) { /* rarely goes over 2 iterations */\n    var s = Math.sin(phi);\n    var t = 1 - es * s * s;\n    //t = this.pj_mlfn(phi, s, Math.cos(phi), en) - arg;\n    //phi -= t * (t * Math.sqrt(t)) * k;\n    t = (pj_mlfn(phi, s, Math.cos(phi), en) - arg) * (t * Math.sqrt(t)) * k;\n    phi -= t;\n    if (Math.abs(t) < EPSLN) {\n      return phi;\n    }\n  }\n  //..reportError(\"cass:pj_inv_mlfn: Convergence error\");\n  return phi;\n}\n","// Heavily based on this tmerc projection implementation\n// https://github.com/mbloch/mapshaper-proj/blob/master/src/projections/tmerc.js\n\nimport pj_enfn from '../common/pj_enfn';\nimport pj_mlfn from '../common/pj_mlfn';\nimport pj_inv_mlfn from '../common/pj_inv_mlfn';\nimport adjust_lon from '../common/adjust_lon';\n\nimport {EPSLN, HALF_PI} from '../constants/values';\nimport sign from '../common/sign';\n\nexport function init() {\n  this.x0 = this.x0 !== undefined ? this.x0 : 0;\n  this.y0 = this.y0 !== undefined ? this.y0 : 0;\n  this.long0 = this.long0 !== undefined ? this.long0 : 0;\n  this.lat0 = this.lat0 !== undefined ? this.lat0 : 0;\n\n  if (this.es) {\n    this.en = pj_enfn(this.es);\n    this.ml0 = pj_mlfn(this.lat0, Math.sin(this.lat0), Math.cos(this.lat0), this.en);\n  }\n}\n\n/**\n    Transverse Mercator Forward  - long/lat to x/y\n    long/lat in radians\n  */\nexport function forward(p) {\n  var lon = p.x;\n  var lat = p.y;\n\n  var delta_lon = adjust_lon(lon - this.long0);\n  var con;\n  var x, y;\n  var sin_phi = Math.sin(lat);\n  var cos_phi = Math.cos(lat);\n\n  if (!this.es) {\n    var b = cos_phi * Math.sin(delta_lon);\n\n    if ((Math.abs(Math.abs(b) - 1)) < EPSLN) {\n      return (93);\n    }\n    else {\n      x = 0.5 * this.a * this.k0 * Math.log((1 + b) / (1 - b)) + this.x0;\n      y = cos_phi * Math.cos(delta_lon) / Math.sqrt(1 - Math.pow(b, 2));\n      b = Math.abs(y);\n\n      if (b >= 1) {\n        if ((b - 1) > EPSLN) {\n          return (93);\n        }\n        else {\n          y = 0;\n        }\n      }\n      else {\n        y = Math.acos(y);\n      }\n\n      if (lat < 0) {\n        y = -y;\n      }\n\n      y = this.a * this.k0 * (y - this.lat0) + this.y0;\n    }\n  }\n  else {\n    var al = cos_phi * delta_lon;\n    var als = Math.pow(al, 2);\n    var c = this.ep2 * Math.pow(cos_phi, 2);\n    var cs = Math.pow(c, 2);\n    var tq = Math.abs(cos_phi) > EPSLN ? Math.tan(lat) : 0;\n    var t = Math.pow(tq, 2);\n    var ts = Math.pow(t, 2);\n    con = 1 - this.es * Math.pow(sin_phi, 2);\n    al = al / Math.sqrt(con);\n    var ml = pj_mlfn(lat, sin_phi, cos_phi, this.en);\n\n    x = this.a * (this.k0 * al * (1 +\n      als / 6 * (1 - t + c +\n      als / 20 * (5 - 18 * t + ts + 14 * c - 58 * t * c +\n      als / 42 * (61 + 179 * ts - ts * t - 479 * t))))) +\n      this.x0;\n\n    y = this.a * (this.k0 * (ml - this.ml0 +\n      sin_phi * delta_lon * al / 2 * (1 +\n      als / 12 * (5 - t + 9 * c + 4 * cs +\n      als / 30 * (61 + ts - 58 * t + 270 * c - 330 * t * c +\n      als / 56 * (1385 + 543 * ts - ts * t - 3111 * t)))))) +\n      this.y0;\n  }\n\n  p.x = x;\n  p.y = y;\n\n  return p;\n}\n\n/**\n    Transverse Mercator Inverse  -  x/y to long/lat\n  */\nexport function inverse(p) {\n  var con, phi;\n  var lat, lon;\n  var x = (p.x - this.x0) * (1 / this.a);\n  var y = (p.y - this.y0) * (1 / this.a);\n\n  if (!this.es) {\n    var f = Math.exp(x / this.k0);\n    var g = 0.5 * (f - 1 / f);\n    var temp = this.lat0 + y / this.k0;\n    var h = Math.cos(temp);\n    con = Math.sqrt((1 - Math.pow(h, 2)) / (1 + Math.pow(g, 2)));\n    lat = Math.asin(con);\n\n    if (y < 0) {\n      lat = -lat;\n    }\n\n    if ((g === 0) && (h === 0)) {\n      lon = 0;\n    }\n    else {\n      lon = adjust_lon(Math.atan2(g, h) + this.long0);\n    }\n  }\n  else { // ellipsoidal form\n    con = this.ml0 + y / this.k0;\n    phi = pj_inv_mlfn(con, this.es, this.en);\n\n    if (Math.abs(phi) < HALF_PI) {\n      var sin_phi = Math.sin(phi);\n      var cos_phi = Math.cos(phi);\n      var tan_phi = Math.abs(cos_phi) > EPSLN ? Math.tan(phi) : 0;\n      var c = this.ep2 * Math.pow(cos_phi, 2);\n      var cs = Math.pow(c, 2);\n      var t = Math.pow(tan_phi, 2);\n      var ts = Math.pow(t, 2);\n      con = 1 - this.es * Math.pow(sin_phi, 2);\n      var d = x * Math.sqrt(con) / this.k0;\n      var ds = Math.pow(d, 2);\n      con = con * tan_phi;\n\n      lat = phi - (con * ds / (1 - this.es)) * 0.5 * (1 -\n        ds / 12 * (5 + 3 * t - 9 * c * t + c - 4 * cs -\n        ds / 30 * (61 + 90 * t - 252 * c * t + 45 * ts + 46 * c -\n        ds / 56 * (1385 + 3633 * t + 4095 * ts + 1574 * ts * t))));\n\n      lon = adjust_lon(this.long0 + (d * (1 -\n        ds / 6 * (1 + 2 * t + c -\n        ds / 20 * (5 + 28 * t + 24 * ts + 8 * c * t + 6 * c -\n        ds / 42 * (61 + 662 * t + 1320 * ts + 720 * ts * t)))) / cos_phi));\n    }\n    else {\n      lat = HALF_PI * sign(y);\n      lon = 0;\n    }\n  }\n\n  p.x = lon;\n  p.y = lat;\n\n  return p;\n}\n\nexport var names = [\"Transverse_Mercator\", \"Transverse Mercator\", \"tmerc\"];\nexport default {\n  init: init,\n  forward: forward,\n  inverse: inverse,\n  names: names\n};\n","export default function(x) {\n  var r = Math.exp(x);\n  r = (r - 1 / r) / 2;\n  return r;\n}","export default function(x, y) {\n  x = Math.abs(x);\n  y = Math.abs(y);\n  var a = Math.max(x, y);\n  var b = Math.min(x, y) / (a ? a : 1);\n\n  return a * Math.sqrt(1 + Math.pow(b, 2));\n}\n","import hypot from './hypot';\nimport log1py from './log1py';\n\nexport default function(x) {\n  var y = Math.abs(x);\n  y = log1py(y * (1 + y / (hypot(1, y) + 1)));\n\n  return x < 0 ? -y : y;\n}\n","export default function(x) {\n  var y = 1 + x;\n  var z = y - 1;\n\n  return z === 0 ? x : x * Math.log(y) / z;\n}\n","export default function(pp, B) {\n  var cos_2B = 2 * Math.cos(2 * B);\n  var i = pp.length - 1;\n  var h1 = pp[i];\n  var h2 = 0;\n  var h;\n\n  while (--i >= 0) {\n    h = -h2 + cos_2B * h1 + pp[i];\n    h2 = h1;\n    h1 = h;\n  }\n\n  return (B + h * Math.sin(2 * B));\n}\n","export default function(pp, arg_r) {\n  var r = 2 * Math.cos(arg_r);\n  var i = pp.length - 1;\n  var hr1 = pp[i];\n  var hr2 = 0;\n  var hr;\n\n  while (--i >= 0) {\n    hr = -hr2 + r * hr1 + pp[i];\n    hr2 = hr1;\n    hr1 = hr;\n  }\n\n  return Math.sin(arg_r) * hr;\n}\n","import sinh from './sinh';\nimport cosh from './cosh';\n\nexport default function(pp, arg_r, arg_i) {\n  var sin_arg_r = Math.sin(arg_r);\n  var cos_arg_r = Math.cos(arg_r);\n  var sinh_arg_i = sinh(arg_i);\n  var cosh_arg_i = cosh(arg_i);\n  var r = 2 * cos_arg_r * cosh_arg_i;\n  var i = -2 * sin_arg_r * sinh_arg_i;\n  var j = pp.length - 1;\n  var hr = pp[j];\n  var hi1 = 0;\n  var hr1 = 0;\n  var hi = 0;\n  var hr2;\n  var hi2;\n\n  while (--j >= 0) {\n    hr2 = hr1;\n    hi2 = hi1;\n    hr1 = hr;\n    hi1 = hi;\n    hr = -hr2 + r * hr1 - i * hi1 + pp[j];\n    hi = -hi2 + i * hr1 + r * hi1;\n  }\n\n  r = sin_arg_r * cosh_arg_i;\n  i = cos_arg_r * sinh_arg_i;\n\n  return [r * hr - i * hi, r * hi + i * hr];\n}\n","export default function(x) {\n  var r = Math.exp(x);\n  r = (r + 1 / r) / 2;\n  return r;\n}","// Heavily based on this etmerc projection implementation\n// https://github.com/mbloch/mapshaper-proj/blob/master/src/projections/etmerc.js\n\nimport sinh from '../common/sinh';\nimport hypot from '../common/hypot';\nimport asinhy from '../common/asinhy';\nimport gatg from '../common/gatg';\nimport clens from '../common/clens';\nimport clens_cmplx from '../common/clens_cmplx';\nimport adjust_lon from '../common/adjust_lon';\n\nexport function init() {\n  if (this.es === undefined || this.es <= 0) {\n    throw new Error('incorrect elliptical usage');\n  }\n\n  this.x0 = this.x0 !== undefined ? this.x0 : 0;\n  this.y0 = this.y0 !== undefined ? this.y0 : 0;\n  this.long0 = this.long0 !== undefined ? this.long0 : 0;\n  this.lat0 = this.lat0 !== undefined ? this.lat0 : 0;\n\n  this.cgb = [];\n  this.cbg = [];\n  this.utg = [];\n  this.gtu = [];\n\n  var f = this.es / (1 + Math.sqrt(1 - this.es));\n  var n = f / (2 - f);\n  var np = n;\n\n  this.cgb[0] = n * (2 + n * (-2 / 3 + n * (-2 + n * (116 / 45 + n * (26 / 45 + n * (-2854 / 675 ))))));\n  this.cbg[0] = n * (-2 + n * ( 2 / 3 + n * ( 4 / 3 + n * (-82 / 45 + n * (32 / 45 + n * (4642 / 4725))))));\n\n  np = np * n;\n  this.cgb[1] = np * (7 / 3 + n * (-8 / 5 + n * (-227 / 45 + n * (2704 / 315 + n * (2323 / 945)))));\n  this.cbg[1] = np * (5 / 3 + n * (-16 / 15 + n * ( -13 / 9 + n * (904 / 315 + n * (-1522 / 945)))));\n\n  np = np * n;\n  this.cgb[2] = np * (56 / 15 + n * (-136 / 35 + n * (-1262 / 105 + n * (73814 / 2835))));\n  this.cbg[2] = np * (-26 / 15 + n * (34 / 21 + n * (8 / 5 + n * (-12686 / 2835))));\n\n  np = np * n;\n  this.cgb[3] = np * (4279 / 630 + n * (-332 / 35 + n * (-399572 / 14175)));\n  this.cbg[3] = np * (1237 / 630 + n * (-12 / 5 + n * ( -24832 / 14175)));\n\n  np = np * n;\n  this.cgb[4] = np * (4174 / 315 + n * (-144838 / 6237));\n  this.cbg[4] = np * (-734 / 315 + n * (109598 / 31185));\n\n  np = np * n;\n  this.cgb[5] = np * (601676 / 22275);\n  this.cbg[5] = np * (444337 / 155925);\n\n  np = Math.pow(n, 2);\n  this.Qn = this.k0 / (1 + n) * (1 + np * (1 / 4 + np * (1 / 64 + np / 256)));\n\n  this.utg[0] = n * (-0.5 + n * ( 2 / 3 + n * (-37 / 96 + n * ( 1 / 360 + n * (81 / 512 + n * (-96199 / 604800))))));\n  this.gtu[0] = n * (0.5 + n * (-2 / 3 + n * (5 / 16 + n * (41 / 180 + n * (-127 / 288 + n * (7891 / 37800))))));\n\n  this.utg[1] = np * (-1 / 48 + n * (-1 / 15 + n * (437 / 1440 + n * (-46 / 105 + n * (1118711 / 3870720)))));\n  this.gtu[1] = np * (13 / 48 + n * (-3 / 5 + n * (557 / 1440 + n * (281 / 630 + n * (-1983433 / 1935360)))));\n\n  np = np * n;\n  this.utg[2] = np * (-17 / 480 + n * (37 / 840 + n * (209 / 4480 + n * (-5569 / 90720 ))));\n  this.gtu[2] = np * (61 / 240 + n * (-103 / 140 + n * (15061 / 26880 + n * (167603 / 181440))));\n\n  np = np * n;\n  this.utg[3] = np * (-4397 / 161280 + n * (11 / 504 + n * (830251 / 7257600)));\n  this.gtu[3] = np * (49561 / 161280 + n * (-179 / 168 + n * (6601661 / 7257600)));\n\n  np = np * n;\n  this.utg[4] = np * (-4583 / 161280 + n * (108847 / 3991680));\n  this.gtu[4] = np * (34729 / 80640 + n * (-3418889 / 1995840));\n\n  np = np * n;\n  this.utg[5] = np * (-20648693 / 638668800);\n  this.gtu[5] = np * (212378941 / 319334400);\n\n  var Z = gatg(this.cbg, this.lat0);\n  this.Zb = -this.Qn * (Z + clens(this.gtu, 2 * Z));\n}\n\nexport function forward(p) {\n  var Ce = adjust_lon(p.x - this.long0);\n  var Cn = p.y;\n\n  Cn = gatg(this.cbg, Cn);\n  var sin_Cn = Math.sin(Cn);\n  var cos_Cn = Math.cos(Cn);\n  var sin_Ce = Math.sin(Ce);\n  var cos_Ce = Math.cos(Ce);\n\n  Cn = Math.atan2(sin_Cn, cos_Ce * cos_Cn);\n  Ce = Math.atan2(sin_Ce * cos_Cn, hypot(sin_Cn, cos_Cn * cos_Ce));\n  Ce = asinhy(Math.tan(Ce));\n\n  var tmp = clens_cmplx(this.gtu, 2 * Cn, 2 * Ce);\n\n  Cn = Cn + tmp[0];\n  Ce = Ce + tmp[1];\n\n  var x;\n  var y;\n\n  if (Math.abs(Ce) <= 2.623395162778) {\n    x = this.a * (this.Qn * Ce) + this.x0;\n    y = this.a * (this.Qn * Cn + this.Zb) + this.y0;\n  }\n  else {\n    x = Infinity;\n    y = Infinity;\n  }\n\n  p.x = x;\n  p.y = y;\n\n  return p;\n}\n\nexport function inverse(p) {\n  var Ce = (p.x - this.x0) * (1 / this.a);\n  var Cn = (p.y - this.y0) * (1 / this.a);\n\n  Cn = (Cn - this.Zb) / this.Qn;\n  Ce = Ce / this.Qn;\n\n  var lon;\n  var lat;\n\n  if (Math.abs(Ce) <= 2.623395162778) {\n    var tmp = clens_cmplx(this.utg, 2 * Cn, 2 * Ce);\n\n    Cn = Cn + tmp[0];\n    Ce = Ce + tmp[1];\n    Ce = Math.atan(sinh(Ce));\n\n    var sin_Cn = Math.sin(Cn);\n    var cos_Cn = Math.cos(Cn);\n    var sin_Ce = Math.sin(Ce);\n    var cos_Ce = Math.cos(Ce);\n\n    Cn = Math.atan2(sin_Cn * cos_Ce, hypot(sin_Ce, cos_Ce * cos_Cn));\n    Ce = Math.atan2(sin_Ce, cos_Ce * cos_Cn);\n\n    lon = adjust_lon(Ce + this.long0);\n    lat = gatg(this.cgb, Cn);\n  }\n  else {\n    lon = Infinity;\n    lat = Infinity;\n  }\n\n  p.x = lon;\n  p.y = lat;\n\n  return p;\n}\n\nexport var names = [\"Extended_Transverse_Mercator\", \"Extended Transverse Mercator\", \"etmerc\"];\nexport default {\n  init: init,\n  forward: forward,\n  inverse: inverse,\n  names: names\n};\n","import adjust_lon from './adjust_lon';\n\nexport default function(zone, lon) {\n  if (zone === undefined) {\n    zone = Math.floor((adjust_lon(lon) + Math.PI) * 30 / Math.PI) + 1;\n\n    if (zone < 0) {\n      return 0;\n    } else if (zone > 60) {\n      return 60;\n    }\n  }\n  return zone;\n}\n","import adjust_zone from '../common/adjust_zone';\nimport etmerc from './etmerc';\nexport var dependsOn = 'etmerc';\nimport {D2R} from '../constants/values';\n\n\nexport function init() {\n  var zone = adjust_zone(this.zone, this.long0);\n  if (zone === undefined) {\n    throw new Error('unknown utm zone');\n  }\n  this.lat0 = 0;\n  this.long0 =  ((6 * Math.abs(zone)) - 183) * D2R;\n  this.x0 = 500000;\n  this.y0 = this.utmSouth ? 10000000 : 0;\n  this.k0 = 0.9996;\n\n  etmerc.init.apply(this);\n  this.forward = etmerc.forward;\n  this.inverse = etmerc.inverse;\n}\n\nexport var names = [\"Universal Transverse Mercator System\", \"utm\"];\nexport default {\n  init: init,\n  names: names,\n  dependsOn: dependsOn\n};\n","export default function(esinp, exp) {\n  return (Math.pow((1 - esinp) / (1 + esinp), exp));\n}","import srat from '../common/srat';\nvar MAX_ITER = 20;\nimport {HALF_PI, FORTPI} from '../constants/values';\n\nexport function init() {\n  var sphi = Math.sin(this.lat0);\n  var cphi = Math.cos(this.lat0);\n  cphi *= cphi;\n  this.rc = Math.sqrt(1 - this.es) / (1 - this.es * sphi * sphi);\n  this.C = Math.sqrt(1 + this.es * cphi * cphi / (1 - this.es));\n  this.phic0 = Math.asin(sphi / this.C);\n  this.ratexp = 0.5 * this.C * this.e;\n  this.K = Math.tan(0.5 * this.phic0 + FORTPI) / (Math.pow(Math.tan(0.5 * this.lat0 + FORTPI), this.C) * srat(this.e * sphi, this.ratexp));\n}\n\nexport function forward(p) {\n  var lon = p.x;\n  var lat = p.y;\n\n  p.y = 2 * Math.atan(this.K * Math.pow(Math.tan(0.5 * lat + FORTPI), this.C) * srat(this.e * Math.sin(lat), this.ratexp)) - HALF_PI;\n  p.x = this.C * lon;\n  return p;\n}\n\nexport function inverse(p) {\n  var DEL_TOL = 1e-14;\n  var lon = p.x / this.C;\n  var lat = p.y;\n  var num = Math.pow(Math.tan(0.5 * lat + FORTPI) / this.K, 1 / this.C);\n  for (var i = MAX_ITER; i > 0; --i) {\n    lat = 2 * Math.atan(num * srat(this.e * Math.sin(p.y), - 0.5 * this.e)) - HALF_PI;\n    if (Math.abs(lat - p.y) < DEL_TOL) {\n      break;\n    }\n    p.y = lat;\n  }\n  /* convergence failed */\n  if (!i) {\n    return null;\n  }\n  p.x = lon;\n  p.y = lat;\n  return p;\n}\n\nexport var names = [\"gauss\"];\nexport default {\n  init: init,\n  forward: forward,\n  inverse: inverse,\n  names: names\n};\n","import gauss from './gauss';\nimport adjust_lon from '../common/adjust_lon';\n\nexport function init() {\n  gauss.init.apply(this);\n  if (!this.rc) {\n    return;\n  }\n  this.sinc0 = Math.sin(this.phic0);\n  this.cosc0 = Math.cos(this.phic0);\n  this.R2 = 2 * this.rc;\n  if (!this.title) {\n    this.title = \"Oblique Stereographic Alternative\";\n  }\n}\n\nexport function forward(p) {\n  var sinc, cosc, cosl, k;\n  p.x = adjust_lon(p.x - this.long0);\n  gauss.forward.apply(this, [p]);\n  sinc = Math.sin(p.y);\n  cosc = Math.cos(p.y);\n  cosl = Math.cos(p.x);\n  k = this.k0 * this.R2 / (1 + this.sinc0 * sinc + this.cosc0 * cosc * cosl);\n  p.x = k * cosc * Math.sin(p.x);\n  p.y = k * (this.cosc0 * sinc - this.sinc0 * cosc * cosl);\n  p.x = this.a * p.x + this.x0;\n  p.y = this.a * p.y + this.y0;\n  return p;\n}\n\nexport function inverse(p) {\n  var sinc, cosc, lon, lat, rho;\n  p.x = (p.x - this.x0) / this.a;\n  p.y = (p.y - this.y0) / this.a;\n\n  p.x /= this.k0;\n  p.y /= this.k0;\n  if ((rho = Math.sqrt(p.x * p.x + p.y * p.y))) {\n    var c = 2 * Math.atan2(rho, this.R2);\n    sinc = Math.sin(c);\n    cosc = Math.cos(c);\n    lat = Math.asin(cosc * this.sinc0 + p.y * sinc * this.cosc0 / rho);\n    lon = Math.atan2(p.x * sinc, rho * this.cosc0 * cosc - p.y * this.sinc0 * sinc);\n  }\n  else {\n    lat = this.phic0;\n    lon = 0;\n  }\n\n  p.x = lon;\n  p.y = lat;\n  gauss.inverse.apply(this, [p]);\n  p.x = adjust_lon(p.x + this.long0);\n  return p;\n}\n\nexport var names = [\"Stereographic_North_Pole\", \"Oblique_Stereographic\", \"Polar_Stereographic\", \"sterea\",\"Oblique Stereographic Alternative\"];\nexport default {\n  init: init,\n  forward: forward,\n  inverse: inverse,\n  names: names\n};\n","import {EPSLN, HALF_PI} from '../constants/values';\n\nimport sign from '../common/sign';\nimport msfnz from '../common/msfnz';\nimport tsfnz from '../common/tsfnz';\nimport phi2z from '../common/phi2z';\nimport adjust_lon from '../common/adjust_lon';\n\nexport function ssfn_(phit, sinphi, eccen) {\n  sinphi *= eccen;\n  return (Math.tan(0.5 * (HALF_PI + phit)) * Math.pow((1 - sinphi) / (1 + sinphi), 0.5 * eccen));\n}\n\nexport function init() {\n  this.coslat0 = Math.cos(this.lat0);\n  this.sinlat0 = Math.sin(this.lat0);\n  if (this.sphere) {\n    if (this.k0 === 1 && !isNaN(this.lat_ts) && Math.abs(this.coslat0) <= EPSLN) {\n      this.k0 = 0.5 * (1 + sign(this.lat0) * Math.sin(this.lat_ts));\n    }\n  }\n  else {\n    if (Math.abs(this.coslat0) <= EPSLN) {\n      if (this.lat0 > 0) {\n        //North pole\n        //trace('stere:north pole');\n        this.con = 1;\n      }\n      else {\n        //South pole\n        //trace('stere:south pole');\n        this.con = -1;\n      }\n    }\n    this.cons = Math.sqrt(Math.pow(1 + this.e, 1 + this.e) * Math.pow(1 - this.e, 1 - this.e));\n    if (this.k0 === 1 && !isNaN(this.lat_ts) && Math.abs(this.coslat0) <= EPSLN) {\n      this.k0 = 0.5 * this.cons * msfnz(this.e, Math.sin(this.lat_ts), Math.cos(this.lat_ts)) / tsfnz(this.e, this.con * this.lat_ts, this.con * Math.sin(this.lat_ts));\n    }\n    this.ms1 = msfnz(this.e, this.sinlat0, this.coslat0);\n    this.X0 = 2 * Math.atan(this.ssfn_(this.lat0, this.sinlat0, this.e)) - HALF_PI;\n    this.cosX0 = Math.cos(this.X0);\n    this.sinX0 = Math.sin(this.X0);\n  }\n}\n\n// Stereographic forward equations--mapping lat,long to x,y\nexport function forward(p) {\n  var lon = p.x;\n  var lat = p.y;\n  var sinlat = Math.sin(lat);\n  var coslat = Math.cos(lat);\n  var A, X, sinX, cosX, ts, rh;\n  var dlon = adjust_lon(lon - this.long0);\n\n  if (Math.abs(Math.abs(lon - this.long0) - Math.PI) <= EPSLN && Math.abs(lat + this.lat0) <= EPSLN) {\n    //case of the origine point\n    //trace('stere:this is the origin point');\n    p.x = NaN;\n    p.y = NaN;\n    return p;\n  }\n  if (this.sphere) {\n    //trace('stere:sphere case');\n    A = 2 * this.k0 / (1 + this.sinlat0 * sinlat + this.coslat0 * coslat * Math.cos(dlon));\n    p.x = this.a * A * coslat * Math.sin(dlon) + this.x0;\n    p.y = this.a * A * (this.coslat0 * sinlat - this.sinlat0 * coslat * Math.cos(dlon)) + this.y0;\n    return p;\n  }\n  else {\n    X = 2 * Math.atan(this.ssfn_(lat, sinlat, this.e)) - HALF_PI;\n    cosX = Math.cos(X);\n    sinX = Math.sin(X);\n    if (Math.abs(this.coslat0) <= EPSLN) {\n      ts = tsfnz(this.e, lat * this.con, this.con * sinlat);\n      rh = 2 * this.a * this.k0 * ts / this.cons;\n      p.x = this.x0 + rh * Math.sin(lon - this.long0);\n      p.y = this.y0 - this.con * rh * Math.cos(lon - this.long0);\n      //trace(p.toString());\n      return p;\n    }\n    else if (Math.abs(this.sinlat0) < EPSLN) {\n      //Eq\n      //trace('stere:equateur');\n      A = 2 * this.a * this.k0 / (1 + cosX * Math.cos(dlon));\n      p.y = A * sinX;\n    }\n    else {\n      //other case\n      //trace('stere:normal case');\n      A = 2 * this.a * this.k0 * this.ms1 / (this.cosX0 * (1 + this.sinX0 * sinX + this.cosX0 * cosX * Math.cos(dlon)));\n      p.y = A * (this.cosX0 * sinX - this.sinX0 * cosX * Math.cos(dlon)) + this.y0;\n    }\n    p.x = A * cosX * Math.sin(dlon) + this.x0;\n  }\n  //trace(p.toString());\n  return p;\n}\n\n//* Stereographic inverse equations--mapping x,y to lat/long\nexport function inverse(p) {\n  p.x -= this.x0;\n  p.y -= this.y0;\n  var lon, lat, ts, ce, Chi;\n  var rh = Math.sqrt(p.x * p.x + p.y * p.y);\n  if (this.sphere) {\n    var c = 2 * Math.atan(rh / (0.5 * this.a * this.k0));\n    lon = this.long0;\n    lat = this.lat0;\n    if (rh <= EPSLN) {\n      p.x = lon;\n      p.y = lat;\n      return p;\n    }\n    lat = Math.asin(Math.cos(c) * this.sinlat0 + p.y * Math.sin(c) * this.coslat0 / rh);\n    if (Math.abs(this.coslat0) < EPSLN) {\n      if (this.lat0 > 0) {\n        lon = adjust_lon(this.long0 + Math.atan2(p.x, - 1 * p.y));\n      }\n      else {\n        lon = adjust_lon(this.long0 + Math.atan2(p.x, p.y));\n      }\n    }\n    else {\n      lon = adjust_lon(this.long0 + Math.atan2(p.x * Math.sin(c), rh * this.coslat0 * Math.cos(c) - p.y * this.sinlat0 * Math.sin(c)));\n    }\n    p.x = lon;\n    p.y = lat;\n    return p;\n  }\n  else {\n    if (Math.abs(this.coslat0) <= EPSLN) {\n      if (rh <= EPSLN) {\n        lat = this.lat0;\n        lon = this.long0;\n        p.x = lon;\n        p.y = lat;\n        //trace(p.toString());\n        return p;\n      }\n      p.x *= this.con;\n      p.y *= this.con;\n      ts = rh * this.cons / (2 * this.a * this.k0);\n      lat = this.con * phi2z(this.e, ts);\n      lon = this.con * adjust_lon(this.con * this.long0 + Math.atan2(p.x, - 1 * p.y));\n    }\n    else {\n      ce = 2 * Math.atan(rh * this.cosX0 / (2 * this.a * this.k0 * this.ms1));\n      lon = this.long0;\n      if (rh <= EPSLN) {\n        Chi = this.X0;\n      }\n      else {\n        Chi = Math.asin(Math.cos(ce) * this.sinX0 + p.y * Math.sin(ce) * this.cosX0 / rh);\n        lon = adjust_lon(this.long0 + Math.atan2(p.x * Math.sin(ce), rh * this.cosX0 * Math.cos(ce) - p.y * this.sinX0 * Math.sin(ce)));\n      }\n      lat = -1 * phi2z(this.e, Math.tan(0.5 * (HALF_PI + Chi)));\n    }\n  }\n  p.x = lon;\n  p.y = lat;\n\n  //trace(p.toString());\n  return p;\n\n}\n\nexport var names = [\"stere\", \"Stereographic_South_Pole\", \"Polar Stereographic (variant B)\"];\nexport default {\n  init: init,\n  forward: forward,\n  inverse: inverse,\n  names: names,\n  ssfn_: ssfn_\n};\n","/*\n  references:\n    Formules et constantes pour le Calcul pour la\n    projection cylindrique conforme à axe oblique et pour la transformation entre\n    des systèmes de référence.\n    http://www.swisstopo.admin.ch/internet/swisstopo/fr/home/topics/survey/sys/refsys/switzerland.parsysrelated1.31216.downloadList.77004.DownloadFile.tmp/swissprojectionfr.pdf\n  */\n\nexport function init() {\n  var phy0 = this.lat0;\n  this.lambda0 = this.long0;\n  var sinPhy0 = Math.sin(phy0);\n  var semiMajorAxis = this.a;\n  var invF = this.rf;\n  var flattening = 1 / invF;\n  var e2 = 2 * flattening - Math.pow(flattening, 2);\n  var e = this.e = Math.sqrt(e2);\n  this.R = this.k0 * semiMajorAxis * Math.sqrt(1 - e2) / (1 - e2 * Math.pow(sinPhy0, 2));\n  this.alpha = Math.sqrt(1 + e2 / (1 - e2) * Math.pow(Math.cos(phy0), 4));\n  this.b0 = Math.asin(sinPhy0 / this.alpha);\n  var k1 = Math.log(Math.tan(Math.PI / 4 + this.b0 / 2));\n  var k2 = Math.log(Math.tan(Math.PI / 4 + phy0 / 2));\n  var k3 = Math.log((1 + e * sinPhy0) / (1 - e * sinPhy0));\n  this.K = k1 - this.alpha * k2 + this.alpha * e / 2 * k3;\n}\n\nexport function forward(p) {\n  var Sa1 = Math.log(Math.tan(Math.PI / 4 - p.y / 2));\n  var Sa2 = this.e / 2 * Math.log((1 + this.e * Math.sin(p.y)) / (1 - this.e * Math.sin(p.y)));\n  var S = -this.alpha * (Sa1 + Sa2) + this.K;\n\n  // spheric latitude\n  var b = 2 * (Math.atan(Math.exp(S)) - Math.PI / 4);\n\n  // spheric longitude\n  var I = this.alpha * (p.x - this.lambda0);\n\n  // psoeudo equatorial rotation\n  var rotI = Math.atan(Math.sin(I) / (Math.sin(this.b0) * Math.tan(b) + Math.cos(this.b0) * Math.cos(I)));\n\n  var rotB = Math.asin(Math.cos(this.b0) * Math.sin(b) - Math.sin(this.b0) * Math.cos(b) * Math.cos(I));\n\n  p.y = this.R / 2 * Math.log((1 + Math.sin(rotB)) / (1 - Math.sin(rotB))) + this.y0;\n  p.x = this.R * rotI + this.x0;\n  return p;\n}\n\nexport function inverse(p) {\n  var Y = p.x - this.x0;\n  var X = p.y - this.y0;\n\n  var rotI = Y / this.R;\n  var rotB = 2 * (Math.atan(Math.exp(X / this.R)) - Math.PI / 4);\n\n  var b = Math.asin(Math.cos(this.b0) * Math.sin(rotB) + Math.sin(this.b0) * Math.cos(rotB) * Math.cos(rotI));\n  var I = Math.atan(Math.sin(rotI) / (Math.cos(this.b0) * Math.cos(rotI) - Math.sin(this.b0) * Math.tan(rotB)));\n\n  var lambda = this.lambda0 + I / this.alpha;\n\n  var S = 0;\n  var phy = b;\n  var prevPhy = -1000;\n  var iteration = 0;\n  while (Math.abs(phy - prevPhy) > 0.0000001) {\n    if (++iteration > 20) {\n      //...reportError(\"omercFwdInfinity\");\n      return;\n    }\n    //S = Math.log(Math.tan(Math.PI / 4 + phy / 2));\n    S = 1 / this.alpha * (Math.log(Math.tan(Math.PI / 4 + b / 2)) - this.K) + this.e * Math.log(Math.tan(Math.PI / 4 + Math.asin(this.e * Math.sin(phy)) / 2));\n    prevPhy = phy;\n    phy = 2 * Math.atan(Math.exp(S)) - Math.PI / 2;\n  }\n\n  p.x = lambda;\n  p.y = phy;\n  return p;\n}\n\nexport var names = [\"somerc\"];\nexport default {\n  init: init,\n  forward: forward,\n  inverse: inverse,\n  names: names\n};\n","import tsfnz from '../common/tsfnz';\nimport adjust_lon from '../common/adjust_lon';\nimport phi2z from '../common/phi2z';\nimport {EPSLN, HALF_PI, FORTPI} from '../constants/values';\n\n/* Initialize the Oblique Mercator  projection\n    ------------------------------------------*/\nexport function init() {\n  this.no_off = this.no_off || false;\n  this.no_rot = this.no_rot || false;\n\n  if (isNaN(this.k0)) {\n    this.k0 = 1;\n  }\n  var sinlat = Math.sin(this.lat0);\n  var coslat = Math.cos(this.lat0);\n  var con = this.e * sinlat;\n\n  this.bl = Math.sqrt(1 + this.es / (1 - this.es) * Math.pow(coslat, 4));\n  this.al = this.a * this.bl * this.k0 * Math.sqrt(1 - this.es) / (1 - con * con);\n  var t0 = tsfnz(this.e, this.lat0, sinlat);\n  var dl = this.bl / coslat * Math.sqrt((1 - this.es) / (1 - con * con));\n  if (dl * dl < 1) {\n    dl = 1;\n  }\n  var fl;\n  var gl;\n  if (!isNaN(this.longc)) {\n    //Central point and azimuth method\n\n    if (this.lat0 >= 0) {\n      fl = dl + Math.sqrt(dl * dl - 1);\n    }\n    else {\n      fl = dl - Math.sqrt(dl * dl - 1);\n    }\n    this.el = fl * Math.pow(t0, this.bl);\n    gl = 0.5 * (fl - 1 / fl);\n    this.gamma0 = Math.asin(Math.sin(this.alpha) / dl);\n    this.long0 = this.longc - Math.asin(gl * Math.tan(this.gamma0)) / this.bl;\n\n  }\n  else {\n    //2 points method\n    var t1 = tsfnz(this.e, this.lat1, Math.sin(this.lat1));\n    var t2 = tsfnz(this.e, this.lat2, Math.sin(this.lat2));\n    if (this.lat0 >= 0) {\n      this.el = (dl + Math.sqrt(dl * dl - 1)) * Math.pow(t0, this.bl);\n    }\n    else {\n      this.el = (dl - Math.sqrt(dl * dl - 1)) * Math.pow(t0, this.bl);\n    }\n    var hl = Math.pow(t1, this.bl);\n    var ll = Math.pow(t2, this.bl);\n    fl = this.el / hl;\n    gl = 0.5 * (fl - 1 / fl);\n    var jl = (this.el * this.el - ll * hl) / (this.el * this.el + ll * hl);\n    var pl = (ll - hl) / (ll + hl);\n    var dlon12 = adjust_lon(this.long1 - this.long2);\n    this.long0 = 0.5 * (this.long1 + this.long2) - Math.atan(jl * Math.tan(0.5 * this.bl * (dlon12)) / pl) / this.bl;\n    this.long0 = adjust_lon(this.long0);\n    var dlon10 = adjust_lon(this.long1 - this.long0);\n    this.gamma0 = Math.atan(Math.sin(this.bl * (dlon10)) / gl);\n    this.alpha = Math.asin(dl * Math.sin(this.gamma0));\n  }\n\n  if (this.no_off) {\n    this.uc = 0;\n  }\n  else {\n    if (this.lat0 >= 0) {\n      this.uc = this.al / this.bl * Math.atan2(Math.sqrt(dl * dl - 1), Math.cos(this.alpha));\n    }\n    else {\n      this.uc = -1 * this.al / this.bl * Math.atan2(Math.sqrt(dl * dl - 1), Math.cos(this.alpha));\n    }\n  }\n\n}\n\n/* Oblique Mercator forward equations--mapping lat,long to x,y\n    ----------------------------------------------------------*/\nexport function forward(p) {\n  var lon = p.x;\n  var lat = p.y;\n  var dlon = adjust_lon(lon - this.long0);\n  var us, vs;\n  var con;\n  if (Math.abs(Math.abs(lat) - HALF_PI) <= EPSLN) {\n    if (lat > 0) {\n      con = -1;\n    }\n    else {\n      con = 1;\n    }\n    vs = this.al / this.bl * Math.log(Math.tan(FORTPI + con * this.gamma0 * 0.5));\n    us = -1 * con * HALF_PI * this.al / this.bl;\n  }\n  else {\n    var t = tsfnz(this.e, lat, Math.sin(lat));\n    var ql = this.el / Math.pow(t, this.bl);\n    var sl = 0.5 * (ql - 1 / ql);\n    var tl = 0.5 * (ql + 1 / ql);\n    var vl = Math.sin(this.bl * (dlon));\n    var ul = (sl * Math.sin(this.gamma0) - vl * Math.cos(this.gamma0)) / tl;\n    if (Math.abs(Math.abs(ul) - 1) <= EPSLN) {\n      vs = Number.POSITIVE_INFINITY;\n    }\n    else {\n      vs = 0.5 * this.al * Math.log((1 - ul) / (1 + ul)) / this.bl;\n    }\n    if (Math.abs(Math.cos(this.bl * (dlon))) <= EPSLN) {\n      us = this.al * this.bl * (dlon);\n    }\n    else {\n      us = this.al * Math.atan2(sl * Math.cos(this.gamma0) + vl * Math.sin(this.gamma0), Math.cos(this.bl * dlon)) / this.bl;\n    }\n  }\n\n  if (this.no_rot) {\n    p.x = this.x0 + us;\n    p.y = this.y0 + vs;\n  }\n  else {\n\n    us -= this.uc;\n    p.x = this.x0 + vs * Math.cos(this.alpha) + us * Math.sin(this.alpha);\n    p.y = this.y0 + us * Math.cos(this.alpha) - vs * Math.sin(this.alpha);\n  }\n  return p;\n}\n\nexport function inverse(p) {\n  var us, vs;\n  if (this.no_rot) {\n    vs = p.y - this.y0;\n    us = p.x - this.x0;\n  }\n  else {\n    vs = (p.x - this.x0) * Math.cos(this.alpha) - (p.y - this.y0) * Math.sin(this.alpha);\n    us = (p.y - this.y0) * Math.cos(this.alpha) + (p.x - this.x0) * Math.sin(this.alpha);\n    us += this.uc;\n  }\n  var qp = Math.exp(-1 * this.bl * vs / this.al);\n  var sp = 0.5 * (qp - 1 / qp);\n  var tp = 0.5 * (qp + 1 / qp);\n  var vp = Math.sin(this.bl * us / this.al);\n  var up = (vp * Math.cos(this.gamma0) + sp * Math.sin(this.gamma0)) / tp;\n  var ts = Math.pow(this.el / Math.sqrt((1 + up) / (1 - up)), 1 / this.bl);\n  if (Math.abs(up - 1) < EPSLN) {\n    p.x = this.long0;\n    p.y = HALF_PI;\n  }\n  else if (Math.abs(up + 1) < EPSLN) {\n    p.x = this.long0;\n    p.y = -1 * HALF_PI;\n  }\n  else {\n    p.y = phi2z(this.e, ts);\n    p.x = adjust_lon(this.long0 - Math.atan2(sp * Math.cos(this.gamma0) - vp * Math.sin(this.gamma0), Math.cos(this.bl * us / this.al)) / this.bl);\n  }\n  return p;\n}\n\nexport var names = [\"Hotine_Oblique_Mercator\", \"Hotine Oblique Mercator\", \"Hotine_Oblique_Mercator_Azimuth_Natural_Origin\", \"Hotine_Oblique_Mercator_Azimuth_Center\", \"omerc\"];\nexport default {\n  init: init,\n  forward: forward,\n  inverse: inverse,\n  names: names\n};\n","import msfnz from '../common/msfnz';\nimport tsfnz from '../common/tsfnz';\nimport sign from '../common/sign';\nimport adjust_lon from '../common/adjust_lon';\nimport phi2z from '../common/phi2z';\nimport {HALF_PI, EPSLN} from '../constants/values';\nexport function init() {\n\n  // array of:  r_maj,r_min,lat1,lat2,c_lon,c_lat,false_east,false_north\n  //double c_lat;                   /* center latitude                      */\n  //double c_lon;                   /* center longitude                     */\n  //double lat1;                    /* first standard parallel              */\n  //double lat2;                    /* second standard parallel             */\n  //double r_maj;                   /* major axis                           */\n  //double r_min;                   /* minor axis                           */\n  //double false_east;              /* x offset in meters                   */\n  //double false_north;             /* y offset in meters                   */\n\n  if (!this.lat2) {\n    this.lat2 = this.lat1;\n  } //if lat2 is not defined\n  if (!this.k0) {\n    this.k0 = 1;\n  }\n  this.x0 = this.x0 || 0;\n  this.y0 = this.y0 || 0;\n  // Standard Parallels cannot be equal and on opposite sides of the equator\n  if (Math.abs(this.lat1 + this.lat2) < EPSLN) {\n    return;\n  }\n\n  var temp = this.b / this.a;\n  this.e = Math.sqrt(1 - temp * temp);\n\n  var sin1 = Math.sin(this.lat1);\n  var cos1 = Math.cos(this.lat1);\n  var ms1 = msfnz(this.e, sin1, cos1);\n  var ts1 = tsfnz(this.e, this.lat1, sin1);\n\n  var sin2 = Math.sin(this.lat2);\n  var cos2 = Math.cos(this.lat2);\n  var ms2 = msfnz(this.e, sin2, cos2);\n  var ts2 = tsfnz(this.e, this.lat2, sin2);\n\n  var ts0 = tsfnz(this.e, this.lat0, Math.sin(this.lat0));\n\n  if (Math.abs(this.lat1 - this.lat2) > EPSLN) {\n    this.ns = Math.log(ms1 / ms2) / Math.log(ts1 / ts2);\n  }\n  else {\n    this.ns = sin1;\n  }\n  if (isNaN(this.ns)) {\n    this.ns = sin1;\n  }\n  this.f0 = ms1 / (this.ns * Math.pow(ts1, this.ns));\n  this.rh = this.a * this.f0 * Math.pow(ts0, this.ns);\n  if (!this.title) {\n    this.title = \"Lambert Conformal Conic\";\n  }\n}\n\n// Lambert Conformal conic forward equations--mapping lat,long to x,y\n// -----------------------------------------------------------------\nexport function forward(p) {\n\n  var lon = p.x;\n  var lat = p.y;\n\n  // singular cases :\n  if (Math.abs(2 * Math.abs(lat) - Math.PI) <= EPSLN) {\n    lat = sign(lat) * (HALF_PI - 2 * EPSLN);\n  }\n\n  var con = Math.abs(Math.abs(lat) - HALF_PI);\n  var ts, rh1;\n  if (con > EPSLN) {\n    ts = tsfnz(this.e, lat, Math.sin(lat));\n    rh1 = this.a * this.f0 * Math.pow(ts, this.ns);\n  }\n  else {\n    con = lat * this.ns;\n    if (con <= 0) {\n      return null;\n    }\n    rh1 = 0;\n  }\n  var theta = this.ns * adjust_lon(lon - this.long0);\n  p.x = this.k0 * (rh1 * Math.sin(theta)) + this.x0;\n  p.y = this.k0 * (this.rh - rh1 * Math.cos(theta)) + this.y0;\n\n  return p;\n}\n\n// Lambert Conformal Conic inverse equations--mapping x,y to lat/long\n// -----------------------------------------------------------------\nexport function inverse(p) {\n\n  var rh1, con, ts;\n  var lat, lon;\n  var x = (p.x - this.x0) / this.k0;\n  var y = (this.rh - (p.y - this.y0) / this.k0);\n  if (this.ns > 0) {\n    rh1 = Math.sqrt(x * x + y * y);\n    con = 1;\n  }\n  else {\n    rh1 = -Math.sqrt(x * x + y * y);\n    con = -1;\n  }\n  var theta = 0;\n  if (rh1 !== 0) {\n    theta = Math.atan2((con * x), (con * y));\n  }\n  if ((rh1 !== 0) || (this.ns > 0)) {\n    con = 1 / this.ns;\n    ts = Math.pow((rh1 / (this.a * this.f0)), con);\n    lat = phi2z(this.e, ts);\n    if (lat === -9999) {\n      return null;\n    }\n  }\n  else {\n    lat = -HALF_PI;\n  }\n  lon = adjust_lon(theta / this.ns + this.long0);\n\n  p.x = lon;\n  p.y = lat;\n  return p;\n}\n\nexport var names = [\"Lambert Tangential Conformal Conic Projection\", \"Lambert_Conformal_Conic\", \"Lambert_Conformal_Conic_2SP\", \"lcc\"];\nexport default {\n  init: init,\n  forward: forward,\n  inverse: inverse,\n  names: names\n};\n","import adjust_lon from '../common/adjust_lon';\n\nexport function init() {\n  this.a = 6377397.155;\n  this.es = 0.006674372230614;\n  this.e = Math.sqrt(this.es);\n  if (!this.lat0) {\n    this.lat0 = 0.863937979737193;\n  }\n  if (!this.long0) {\n    this.long0 = 0.7417649320975901 - 0.308341501185665;\n  }\n  /* if scale not set default to 0.9999 */\n  if (!this.k0) {\n    this.k0 = 0.9999;\n  }\n  this.s45 = 0.785398163397448; /* 45 */\n  this.s90 = 2 * this.s45;\n  this.fi0 = this.lat0;\n  this.e2 = this.es;\n  this.e = Math.sqrt(this.e2);\n  this.alfa = Math.sqrt(1 + (this.e2 * Math.pow(Math.cos(this.fi0), 4)) / (1 - this.e2));\n  this.uq = 1.04216856380474;\n  this.u0 = Math.asin(Math.sin(this.fi0) / this.alfa);\n  this.g = Math.pow((1 + this.e * Math.sin(this.fi0)) / (1 - this.e * Math.sin(this.fi0)), this.alfa * this.e / 2);\n  this.k = Math.tan(this.u0 / 2 + this.s45) / Math.pow(Math.tan(this.fi0 / 2 + this.s45), this.alfa) * this.g;\n  this.k1 = this.k0;\n  this.n0 = this.a * Math.sqrt(1 - this.e2) / (1 - this.e2 * Math.pow(Math.sin(this.fi0), 2));\n  this.s0 = 1.37008346281555;\n  this.n = Math.sin(this.s0);\n  this.ro0 = this.k1 * this.n0 / Math.tan(this.s0);\n  this.ad = this.s90 - this.uq;\n}\n\n/* ellipsoid */\n/* calculate xy from lat/lon */\n/* Constants, identical to inverse transform function */\nexport function forward(p) {\n  var gfi, u, deltav, s, d, eps, ro;\n  var lon = p.x;\n  var lat = p.y;\n  var delta_lon = adjust_lon(lon - this.long0);\n  /* Transformation */\n  gfi = Math.pow(((1 + this.e * Math.sin(lat)) / (1 - this.e * Math.sin(lat))), (this.alfa * this.e / 2));\n  u = 2 * (Math.atan(this.k * Math.pow(Math.tan(lat / 2 + this.s45), this.alfa) / gfi) - this.s45);\n  deltav = -delta_lon * this.alfa;\n  s = Math.asin(Math.cos(this.ad) * Math.sin(u) + Math.sin(this.ad) * Math.cos(u) * Math.cos(deltav));\n  d = Math.asin(Math.cos(u) * Math.sin(deltav) / Math.cos(s));\n  eps = this.n * d;\n  ro = this.ro0 * Math.pow(Math.tan(this.s0 / 2 + this.s45), this.n) / Math.pow(Math.tan(s / 2 + this.s45), this.n);\n  p.y = ro * Math.cos(eps) / 1;\n  p.x = ro * Math.sin(eps) / 1;\n\n  if (!this.czech) {\n    p.y *= -1;\n    p.x *= -1;\n  }\n  return (p);\n}\n\n/* calculate lat/lon from xy */\nexport function inverse(p) {\n  var u, deltav, s, d, eps, ro, fi1;\n  var ok;\n\n  /* Transformation */\n  /* revert y, x*/\n  var tmp = p.x;\n  p.x = p.y;\n  p.y = tmp;\n  if (!this.czech) {\n    p.y *= -1;\n    p.x *= -1;\n  }\n  ro = Math.sqrt(p.x * p.x + p.y * p.y);\n  eps = Math.atan2(p.y, p.x);\n  d = eps / Math.sin(this.s0);\n  s = 2 * (Math.atan(Math.pow(this.ro0 / ro, 1 / this.n) * Math.tan(this.s0 / 2 + this.s45)) - this.s45);\n  u = Math.asin(Math.cos(this.ad) * Math.sin(s) - Math.sin(this.ad) * Math.cos(s) * Math.cos(d));\n  deltav = Math.asin(Math.cos(s) * Math.sin(d) / Math.cos(u));\n  p.x = this.long0 - deltav / this.alfa;\n  fi1 = u;\n  ok = 0;\n  var iter = 0;\n  do {\n    p.y = 2 * (Math.atan(Math.pow(this.k, - 1 / this.alfa) * Math.pow(Math.tan(u / 2 + this.s45), 1 / this.alfa) * Math.pow((1 + this.e * Math.sin(fi1)) / (1 - this.e * Math.sin(fi1)), this.e / 2)) - this.s45);\n    if (Math.abs(fi1 - p.y) < 0.0000000001) {\n      ok = 1;\n    }\n    fi1 = p.y;\n    iter += 1;\n  } while (ok === 0 && iter < 15);\n  if (iter >= 15) {\n    return null;\n  }\n\n  return (p);\n}\n\nexport var names = [\"Krovak\", \"krovak\"];\nexport default {\n  init: init,\n  forward: forward,\n  inverse: inverse,\n  names: names\n};\n","export default function(e0, e1, e2, e3, phi) {\n  return (e0 * phi - e1 * Math.sin(2 * phi) + e2 * Math.sin(4 * phi) - e3 * Math.sin(6 * phi));\n}","export default function(x) {\n  return (1 - 0.25 * x * (1 + x / 16 * (3 + 1.25 * x)));\n}","export default function(x) {\n  return (0.375 * x * (1 + 0.25 * x * (1 + 0.46875 * x)));\n}","export default function(x) {\n  return (0.05859375 * x * x * (1 + 0.75 * x));\n}","export default function(x) {\n  return (x * x * x * (35 / 3072));\n}","export default function(a, e, sinphi) {\n  var temp = e * sinphi;\n  return a / Math.sqrt(1 - temp * temp);\n}","import {HALF_PI} from '../constants/values';\nimport sign from './sign';\n\nexport default function(x) {\n  return (Math.abs(x) < HALF_PI) ? x : (x - (sign(x) * Math.PI));\n}\n","export default function(ml, e0, e1, e2, e3) {\n  var phi;\n  var dphi;\n\n  phi = ml / e0;\n  for (var i = 0; i < 15; i++) {\n    dphi = (ml - (e0 * phi - e1 * Math.sin(2 * phi) + e2 * Math.sin(4 * phi) - e3 * Math.sin(6 * phi))) / (e0 - 2 * e1 * Math.cos(2 * phi) + 4 * e2 * Math.cos(4 * phi) - 6 * e3 * Math.cos(6 * phi));\n    phi += dphi;\n    if (Math.abs(dphi) <= 0.0000000001) {\n      return phi;\n    }\n  }\n\n  //..reportError(\"IMLFN-CONV:Latitude failed to converge after 15 iterations\");\n  return NaN;\n}","import mlfn from '../common/mlfn';\nimport e0fn from '../common/e0fn';\nimport e1fn from '../common/e1fn';\nimport e2fn from '../common/e2fn';\nimport e3fn from '../common/e3fn';\nimport gN from '../common/gN';\nimport adjust_lon from '../common/adjust_lon';\nimport adjust_lat from '../common/adjust_lat';\nimport imlfn from '../common/imlfn';\nimport {HALF_PI, EPSLN} from '../constants/values';\n\nexport function init() {\n  if (!this.sphere) {\n    this.e0 = e0fn(this.es);\n    this.e1 = e1fn(this.es);\n    this.e2 = e2fn(this.es);\n    this.e3 = e3fn(this.es);\n    this.ml0 = this.a * mlfn(this.e0, this.e1, this.e2, this.e3, this.lat0);\n  }\n}\n\n/* Cassini forward equations--mapping lat,long to x,y\n  -----------------------------------------------------------------------*/\nexport function forward(p) {\n\n  /* Forward equations\n      -----------------*/\n  var x, y;\n  var lam = p.x;\n  var phi = p.y;\n  lam = adjust_lon(lam - this.long0);\n\n  if (this.sphere) {\n    x = this.a * Math.asin(Math.cos(phi) * Math.sin(lam));\n    y = this.a * (Math.atan2(Math.tan(phi), Math.cos(lam)) - this.lat0);\n  }\n  else {\n    //ellipsoid\n    var sinphi = Math.sin(phi);\n    var cosphi = Math.cos(phi);\n    var nl = gN(this.a, this.e, sinphi);\n    var tl = Math.tan(phi) * Math.tan(phi);\n    var al = lam * Math.cos(phi);\n    var asq = al * al;\n    var cl = this.es * cosphi * cosphi / (1 - this.es);\n    var ml = this.a * mlfn(this.e0, this.e1, this.e2, this.e3, phi);\n\n    x = nl * al * (1 - asq * tl * (1 / 6 - (8 - tl + 8 * cl) * asq / 120));\n    y = ml - this.ml0 + nl * sinphi / cosphi * asq * (0.5 + (5 - tl + 6 * cl) * asq / 24);\n\n\n  }\n\n  p.x = x + this.x0;\n  p.y = y + this.y0;\n  return p;\n}\n\n/* Inverse equations\n  -----------------*/\nexport function inverse(p) {\n  p.x -= this.x0;\n  p.y -= this.y0;\n  var x = p.x / this.a;\n  var y = p.y / this.a;\n  var phi, lam;\n\n  if (this.sphere) {\n    var dd = y + this.lat0;\n    phi = Math.asin(Math.sin(dd) * Math.cos(x));\n    lam = Math.atan2(Math.tan(x), Math.cos(dd));\n  }\n  else {\n    /* ellipsoid */\n    var ml1 = this.ml0 / this.a + y;\n    var phi1 = imlfn(ml1, this.e0, this.e1, this.e2, this.e3);\n    if (Math.abs(Math.abs(phi1) - HALF_PI) <= EPSLN) {\n      p.x = this.long0;\n      p.y = HALF_PI;\n      if (y < 0) {\n        p.y *= -1;\n      }\n      return p;\n    }\n    var nl1 = gN(this.a, this.e, Math.sin(phi1));\n\n    var rl1 = nl1 * nl1 * nl1 / this.a / this.a * (1 - this.es);\n    var tl1 = Math.pow(Math.tan(phi1), 2);\n    var dl = x * this.a / nl1;\n    var dsq = dl * dl;\n    phi = phi1 - nl1 * Math.tan(phi1) / rl1 * dl * dl * (0.5 - (1 + 3 * tl1) * dl * dl / 24);\n    lam = dl * (1 - dsq * (tl1 / 3 + (1 + 3 * tl1) * tl1 * dsq / 15)) / Math.cos(phi1);\n\n  }\n\n  p.x = adjust_lon(lam + this.long0);\n  p.y = adjust_lat(phi);\n  return p;\n\n}\n\nexport var names = [\"Cassini\", \"Cassini_Soldner\", \"cass\"];\nexport default {\n  init: init,\n  forward: forward,\n  inverse: inverse,\n  names: names\n};\n","export default function(eccent, sinphi) {\n  var con;\n  if (eccent > 1.0e-7) {\n    con = eccent * sinphi;\n    return ((1 - eccent * eccent) * (sinphi / (1 - con * con) - (0.5 / eccent) * Math.log((1 - con) / (1 + con))));\n  }\n  else {\n    return (2 * sinphi);\n  }\n}","\nimport {HALF_PI, EPSLN, FORTPI} from '../constants/values';\n\nimport qsfnz from '../common/qsfnz';\nimport adjust_lon from '../common/adjust_lon';\n\n/*\n  reference\n    \"New Equal-Area Map Projections for Noncircular Regions\", John P. Snyder,\n    The American Cartographer, Vol 15, No. 4, October 1988, pp. 341-355.\n  */\n\nexport var S_POLE = 1;\n\nexport var N_POLE = 2;\nexport var EQUIT = 3;\nexport var OBLIQ = 4;\n\n/* Initialize the Lambert Azimuthal Equal Area projection\n  ------------------------------------------------------*/\nexport function init() {\n  var t = Math.abs(this.lat0);\n  if (Math.abs(t - HALF_PI) < EPSLN) {\n    this.mode = this.lat0 < 0 ? this.S_POLE : this.N_POLE;\n  }\n  else if (Math.abs(t) < EPSLN) {\n    this.mode = this.EQUIT;\n  }\n  else {\n    this.mode = this.OBLIQ;\n  }\n  if (this.es > 0) {\n    var sinphi;\n\n    this.qp = qsfnz(this.e, 1);\n    this.mmf = 0.5 / (1 - this.es);\n    this.apa = authset(this.es);\n    switch (this.mode) {\n    case this.N_POLE:\n      this.dd = 1;\n      break;\n    case this.S_POLE:\n      this.dd = 1;\n      break;\n    case this.EQUIT:\n      this.rq = Math.sqrt(0.5 * this.qp);\n      this.dd = 1 / this.rq;\n      this.xmf = 1;\n      this.ymf = 0.5 * this.qp;\n      break;\n    case this.OBLIQ:\n      this.rq = Math.sqrt(0.5 * this.qp);\n      sinphi = Math.sin(this.lat0);\n      this.sinb1 = qsfnz(this.e, sinphi) / this.qp;\n      this.cosb1 = Math.sqrt(1 - this.sinb1 * this.sinb1);\n      this.dd = Math.cos(this.lat0) / (Math.sqrt(1 - this.es * sinphi * sinphi) * this.rq * this.cosb1);\n      this.ymf = (this.xmf = this.rq) / this.dd;\n      this.xmf *= this.dd;\n      break;\n    }\n  }\n  else {\n    if (this.mode === this.OBLIQ) {\n      this.sinph0 = Math.sin(this.lat0);\n      this.cosph0 = Math.cos(this.lat0);\n    }\n  }\n}\n\n/* Lambert Azimuthal Equal Area forward equations--mapping lat,long to x,y\n  -----------------------------------------------------------------------*/\nexport function forward(p) {\n\n  /* Forward equations\n      -----------------*/\n  var x, y, coslam, sinlam, sinphi, q, sinb, cosb, b, cosphi;\n  var lam = p.x;\n  var phi = p.y;\n\n  lam = adjust_lon(lam - this.long0);\n  if (this.sphere) {\n    sinphi = Math.sin(phi);\n    cosphi = Math.cos(phi);\n    coslam = Math.cos(lam);\n    if (this.mode === this.OBLIQ || this.mode === this.EQUIT) {\n      y = (this.mode === this.EQUIT) ? 1 + cosphi * coslam : 1 + this.sinph0 * sinphi + this.cosph0 * cosphi * coslam;\n      if (y <= EPSLN) {\n        return null;\n      }\n      y = Math.sqrt(2 / y);\n      x = y * cosphi * Math.sin(lam);\n      y *= (this.mode === this.EQUIT) ? sinphi : this.cosph0 * sinphi - this.sinph0 * cosphi * coslam;\n    }\n    else if (this.mode === this.N_POLE || this.mode === this.S_POLE) {\n      if (this.mode === this.N_POLE) {\n        coslam = -coslam;\n      }\n      if (Math.abs(phi + this.phi0) < EPSLN) {\n        return null;\n      }\n      y = FORTPI - phi * 0.5;\n      y = 2 * ((this.mode === this.S_POLE) ? Math.cos(y) : Math.sin(y));\n      x = y * Math.sin(lam);\n      y *= coslam;\n    }\n  }\n  else {\n    sinb = 0;\n    cosb = 0;\n    b = 0;\n    coslam = Math.cos(lam);\n    sinlam = Math.sin(lam);\n    sinphi = Math.sin(phi);\n    q = qsfnz(this.e, sinphi);\n    if (this.mode === this.OBLIQ || this.mode === this.EQUIT) {\n      sinb = q / this.qp;\n      cosb = Math.sqrt(1 - sinb * sinb);\n    }\n    switch (this.mode) {\n    case this.OBLIQ:\n      b = 1 + this.sinb1 * sinb + this.cosb1 * cosb * coslam;\n      break;\n    case this.EQUIT:\n      b = 1 + cosb * coslam;\n      break;\n    case this.N_POLE:\n      b = HALF_PI + phi;\n      q = this.qp - q;\n      break;\n    case this.S_POLE:\n      b = phi - HALF_PI;\n      q = this.qp + q;\n      break;\n    }\n    if (Math.abs(b) < EPSLN) {\n      return null;\n    }\n    switch (this.mode) {\n    case this.OBLIQ:\n    case this.EQUIT:\n      b = Math.sqrt(2 / b);\n      if (this.mode === this.OBLIQ) {\n        y = this.ymf * b * (this.cosb1 * sinb - this.sinb1 * cosb * coslam);\n      }\n      else {\n        y = (b = Math.sqrt(2 / (1 + cosb * coslam))) * sinb * this.ymf;\n      }\n      x = this.xmf * b * cosb * sinlam;\n      break;\n    case this.N_POLE:\n    case this.S_POLE:\n      if (q >= 0) {\n        x = (b = Math.sqrt(q)) * sinlam;\n        y = coslam * ((this.mode === this.S_POLE) ? b : -b);\n      }\n      else {\n        x = y = 0;\n      }\n      break;\n    }\n  }\n\n  p.x = this.a * x + this.x0;\n  p.y = this.a * y + this.y0;\n  return p;\n}\n\n/* Inverse equations\n  -----------------*/\nexport function inverse(p) {\n  p.x -= this.x0;\n  p.y -= this.y0;\n  var x = p.x / this.a;\n  var y = p.y / this.a;\n  var lam, phi, cCe, sCe, q, rho, ab;\n  if (this.sphere) {\n    var cosz = 0,\n      rh, sinz = 0;\n\n    rh = Math.sqrt(x * x + y * y);\n    phi = rh * 0.5;\n    if (phi > 1) {\n      return null;\n    }\n    phi = 2 * Math.asin(phi);\n    if (this.mode === this.OBLIQ || this.mode === this.EQUIT) {\n      sinz = Math.sin(phi);\n      cosz = Math.cos(phi);\n    }\n    switch (this.mode) {\n    case this.EQUIT:\n      phi = (Math.abs(rh) <= EPSLN) ? 0 : Math.asin(y * sinz / rh);\n      x *= sinz;\n      y = cosz * rh;\n      break;\n    case this.OBLIQ:\n      phi = (Math.abs(rh) <= EPSLN) ? this.phi0 : Math.asin(cosz * this.sinph0 + y * sinz * this.cosph0 / rh);\n      x *= sinz * this.cosph0;\n      y = (cosz - Math.sin(phi) * this.sinph0) * rh;\n      break;\n    case this.N_POLE:\n      y = -y;\n      phi = HALF_PI - phi;\n      break;\n    case this.S_POLE:\n      phi -= HALF_PI;\n      break;\n    }\n    lam = (y === 0 && (this.mode === this.EQUIT || this.mode === this.OBLIQ)) ? 0 : Math.atan2(x, y);\n  }\n  else {\n    ab = 0;\n    if (this.mode === this.OBLIQ || this.mode === this.EQUIT) {\n      x /= this.dd;\n      y *= this.dd;\n      rho = Math.sqrt(x * x + y * y);\n      if (rho < EPSLN) {\n        p.x = 0;\n        p.y = this.phi0;\n        return p;\n      }\n      sCe = 2 * Math.asin(0.5 * rho / this.rq);\n      cCe = Math.cos(sCe);\n      x *= (sCe = Math.sin(sCe));\n      if (this.mode === this.OBLIQ) {\n        ab = cCe * this.sinb1 + y * sCe * this.cosb1 / rho;\n        q = this.qp * ab;\n        y = rho * this.cosb1 * cCe - y * this.sinb1 * sCe;\n      }\n      else {\n        ab = y * sCe / rho;\n        q = this.qp * ab;\n        y = rho * cCe;\n      }\n    }\n    else if (this.mode === this.N_POLE || this.mode === this.S_POLE) {\n      if (this.mode === this.N_POLE) {\n        y = -y;\n      }\n      q = (x * x + y * y);\n      if (!q) {\n        p.x = 0;\n        p.y = this.phi0;\n        return p;\n      }\n      ab = 1 - q / this.qp;\n      if (this.mode === this.S_POLE) {\n        ab = -ab;\n      }\n    }\n    lam = Math.atan2(x, y);\n    phi = authlat(Math.asin(ab), this.apa);\n  }\n\n  p.x = adjust_lon(this.long0 + lam);\n  p.y = phi;\n  return p;\n}\n\n/* determine latitude from authalic latitude */\nvar P00 = 0.33333333333333333333;\n\nvar P01 = 0.17222222222222222222;\nvar P02 = 0.10257936507936507936;\nvar P10 = 0.06388888888888888888;\nvar P11 = 0.06640211640211640211;\nvar P20 = 0.01641501294219154443;\n\nfunction authset(es) {\n  var t;\n  var APA = [];\n  APA[0] = es * P00;\n  t = es * es;\n  APA[0] += t * P01;\n  APA[1] = t * P10;\n  t *= es;\n  APA[0] += t * P02;\n  APA[1] += t * P11;\n  APA[2] = t * P20;\n  return APA;\n}\n\nfunction authlat(beta, APA) {\n  var t = beta + beta;\n  return (beta + APA[0] * Math.sin(t) + APA[1] * Math.sin(t + t) + APA[2] * Math.sin(t + t + t));\n}\n\nexport var names = [\"Lambert Azimuthal Equal Area\", \"Lambert_Azimuthal_Equal_Area\", \"laea\"];\nexport default {\n  init: init,\n  forward: forward,\n  inverse: inverse,\n  names: names,\n  S_POLE: S_POLE,\n  N_POLE: N_POLE,\n  EQUIT: EQUIT,\n  OBLIQ: OBLIQ\n};\n","export default function(x) {\n  if (Math.abs(x) > 1) {\n    x = (x > 1) ? 1 : -1;\n  }\n  return Math.asin(x);\n}","import msfnz from '../common/msfnz';\nimport qsfnz from '../common/qsfnz';\nimport adjust_lon from '../common/adjust_lon';\nimport asinz from '../common/asinz';\nimport {EPSLN} from '../constants/values';\n\nexport function init() {\n\n  if (Math.abs(this.lat1 + this.lat2) < EPSLN) {\n    return;\n  }\n  this.temp = this.b / this.a;\n  this.es = 1 - Math.pow(this.temp, 2);\n  this.e3 = Math.sqrt(this.es);\n\n  this.sin_po = Math.sin(this.lat1);\n  this.cos_po = Math.cos(this.lat1);\n  this.t1 = this.sin_po;\n  this.con = this.sin_po;\n  this.ms1 = msfnz(this.e3, this.sin_po, this.cos_po);\n  this.qs1 = qsfnz(this.e3, this.sin_po, this.cos_po);\n\n  this.sin_po = Math.sin(this.lat2);\n  this.cos_po = Math.cos(this.lat2);\n  this.t2 = this.sin_po;\n  this.ms2 = msfnz(this.e3, this.sin_po, this.cos_po);\n  this.qs2 = qsfnz(this.e3, this.sin_po, this.cos_po);\n\n  this.sin_po = Math.sin(this.lat0);\n  this.cos_po = Math.cos(this.lat0);\n  this.t3 = this.sin_po;\n  this.qs0 = qsfnz(this.e3, this.sin_po, this.cos_po);\n\n  if (Math.abs(this.lat1 - this.lat2) > EPSLN) {\n    this.ns0 = (this.ms1 * this.ms1 - this.ms2 * this.ms2) / (this.qs2 - this.qs1);\n  }\n  else {\n    this.ns0 = this.con;\n  }\n  this.c = this.ms1 * this.ms1 + this.ns0 * this.qs1;\n  this.rh = this.a * Math.sqrt(this.c - this.ns0 * this.qs0) / this.ns0;\n}\n\n/* Albers Conical Equal Area forward equations--mapping lat,long to x,y\n  -------------------------------------------------------------------*/\nexport function forward(p) {\n\n  var lon = p.x;\n  var lat = p.y;\n\n  this.sin_phi = Math.sin(lat);\n  this.cos_phi = Math.cos(lat);\n\n  var qs = qsfnz(this.e3, this.sin_phi, this.cos_phi);\n  var rh1 = this.a * Math.sqrt(this.c - this.ns0 * qs) / this.ns0;\n  var theta = this.ns0 * adjust_lon(lon - this.long0);\n  var x = rh1 * Math.sin(theta) + this.x0;\n  var y = this.rh - rh1 * Math.cos(theta) + this.y0;\n\n  p.x = x;\n  p.y = y;\n  return p;\n}\n\nexport function inverse(p) {\n  var rh1, qs, con, theta, lon, lat;\n\n  p.x -= this.x0;\n  p.y = this.rh - p.y + this.y0;\n  if (this.ns0 >= 0) {\n    rh1 = Math.sqrt(p.x * p.x + p.y * p.y);\n    con = 1;\n  }\n  else {\n    rh1 = -Math.sqrt(p.x * p.x + p.y * p.y);\n    con = -1;\n  }\n  theta = 0;\n  if (rh1 !== 0) {\n    theta = Math.atan2(con * p.x, con * p.y);\n  }\n  con = rh1 * this.ns0 / this.a;\n  if (this.sphere) {\n    lat = Math.asin((this.c - con * con) / (2 * this.ns0));\n  }\n  else {\n    qs = (this.c - con * con) / this.ns0;\n    lat = this.phi1z(this.e3, qs);\n  }\n\n  lon = adjust_lon(theta / this.ns0 + this.long0);\n  p.x = lon;\n  p.y = lat;\n  return p;\n}\n\n/* Function to compute phi1, the latitude for the inverse of the\n   Albers Conical Equal-Area projection.\n-------------------------------------------*/\nexport function phi1z(eccent, qs) {\n  var sinphi, cosphi, con, com, dphi;\n  var phi = asinz(0.5 * qs);\n  if (eccent < EPSLN) {\n    return phi;\n  }\n\n  var eccnts = eccent * eccent;\n  for (var i = 1; i <= 25; i++) {\n    sinphi = Math.sin(phi);\n    cosphi = Math.cos(phi);\n    con = eccent * sinphi;\n    com = 1 - con * con;\n    dphi = 0.5 * com * com / cosphi * (qs / (1 - eccnts) - sinphi / com + 0.5 / eccent * Math.log((1 - con) / (1 + con)));\n    phi = phi + dphi;\n    if (Math.abs(dphi) <= 1e-7) {\n      return phi;\n    }\n  }\n  return null;\n}\n\nexport var names = [\"Albers_Conic_Equal_Area\", \"Albers\", \"aea\"];\nexport default {\n  init: init,\n  forward: forward,\n  inverse: inverse,\n  names: names,\n  phi1z: phi1z\n};\n","import adjust_lon from '../common/adjust_lon';\nimport asinz from '../common/asinz';\nimport {EPSLN} from '../constants/values';\n\n/*\n  reference:\n    Wolfram Mathworld \"Gnomonic Projection\"\n    http://mathworld.wolfram.com/GnomonicProjection.html\n    Accessed: 12th November 2009\n  */\nexport function init() {\n\n  /* Place parameters in static storage for common use\n      -------------------------------------------------*/\n  this.sin_p14 = Math.sin(this.lat0);\n  this.cos_p14 = Math.cos(this.lat0);\n  // Approximation for projecting points to the horizon (infinity)\n  this.infinity_dist = 1000 * this.a;\n  this.rc = 1;\n}\n\n/* Gnomonic forward equations--mapping lat,long to x,y\n    ---------------------------------------------------*/\nexport function forward(p) {\n  var sinphi, cosphi; /* sin and cos value        */\n  var dlon; /* delta longitude value      */\n  var coslon; /* cos of longitude        */\n  var ksp; /* scale factor          */\n  var g;\n  var x, y;\n  var lon = p.x;\n  var lat = p.y;\n  /* Forward equations\n      -----------------*/\n  dlon = adjust_lon(lon - this.long0);\n\n  sinphi = Math.sin(lat);\n  cosphi = Math.cos(lat);\n\n  coslon = Math.cos(dlon);\n  g = this.sin_p14 * sinphi + this.cos_p14 * cosphi * coslon;\n  ksp = 1;\n  if ((g > 0) || (Math.abs(g) <= EPSLN)) {\n    x = this.x0 + this.a * ksp * cosphi * Math.sin(dlon) / g;\n    y = this.y0 + this.a * ksp * (this.cos_p14 * sinphi - this.sin_p14 * cosphi * coslon) / g;\n  }\n  else {\n\n    // Point is in the opposing hemisphere and is unprojectable\n    // We still need to return a reasonable point, so we project\n    // to infinity, on a bearing\n    // equivalent to the northern hemisphere equivalent\n    // This is a reasonable approximation for short shapes and lines that\n    // straddle the horizon.\n\n    x = this.x0 + this.infinity_dist * cosphi * Math.sin(dlon);\n    y = this.y0 + this.infinity_dist * (this.cos_p14 * sinphi - this.sin_p14 * cosphi * coslon);\n\n  }\n  p.x = x;\n  p.y = y;\n  return p;\n}\n\nexport function inverse(p) {\n  var rh; /* Rho */\n  var sinc, cosc;\n  var c;\n  var lon, lat;\n\n  /* Inverse equations\n      -----------------*/\n  p.x = (p.x - this.x0) / this.a;\n  p.y = (p.y - this.y0) / this.a;\n\n  p.x /= this.k0;\n  p.y /= this.k0;\n\n  if ((rh = Math.sqrt(p.x * p.x + p.y * p.y))) {\n    c = Math.atan2(rh, this.rc);\n    sinc = Math.sin(c);\n    cosc = Math.cos(c);\n\n    lat = asinz(cosc * this.sin_p14 + (p.y * sinc * this.cos_p14) / rh);\n    lon = Math.atan2(p.x * sinc, rh * this.cos_p14 * cosc - p.y * this.sin_p14 * sinc);\n    lon = adjust_lon(this.long0 + lon);\n  }\n  else {\n    lat = this.phic0;\n    lon = 0;\n  }\n\n  p.x = lon;\n  p.y = lat;\n  return p;\n}\n\nexport var names = [\"gnom\"];\nexport default {\n  init: init,\n  forward: forward,\n  inverse: inverse,\n  names: names\n};\n","import {HALF_PI} from '../constants/values';\n\nexport default function(eccent, q) {\n  var temp = 1 - (1 - eccent * eccent) / (2 * eccent) * Math.log((1 - eccent) / (1 + eccent));\n  if (Math.abs(Math.abs(q) - temp) < 1.0E-6) {\n    if (q < 0) {\n      return (-1 * HALF_PI);\n    }\n    else {\n      return HALF_PI;\n    }\n  }\n  //var phi = 0.5* q/(1-eccent*eccent);\n  var phi = Math.asin(0.5 * q);\n  var dphi;\n  var sin_phi;\n  var cos_phi;\n  var con;\n  for (var i = 0; i < 30; i++) {\n    sin_phi = Math.sin(phi);\n    cos_phi = Math.cos(phi);\n    con = eccent * sin_phi;\n    dphi = Math.pow(1 - con * con, 2) / (2 * cos_phi) * (q / (1 - eccent * eccent) - sin_phi / (1 - con * con) + 0.5 / eccent * Math.log((1 - con) / (1 + con)));\n    phi += dphi;\n    if (Math.abs(dphi) <= 0.0000000001) {\n      return phi;\n    }\n  }\n\n  //console.log(\"IQSFN-CONV:Latitude failed to converge after 30 iterations\");\n  return NaN;\n}\n","import adjust_lon from '../common/adjust_lon';\nimport qsfnz from '../common/qsfnz';\nimport msfnz from '../common/msfnz';\nimport iqsfnz from '../common/iqsfnz';\n\n/*\n  reference:\n    \"Cartographic Projection Procedures for the UNIX Environment-\n    A User's Manual\" by Gerald I. Evenden,\n    USGS Open File Report 90-284and Release 4 Interim Reports (2003)\n*/\nexport function init() {\n  //no-op\n  if (!this.sphere) {\n    this.k0 = msfnz(this.e, Math.sin(this.lat_ts), Math.cos(this.lat_ts));\n  }\n}\n\n/* Cylindrical Equal Area forward equations--mapping lat,long to x,y\n    ------------------------------------------------------------*/\nexport function forward(p) {\n  var lon = p.x;\n  var lat = p.y;\n  var x, y;\n  /* Forward equations\n      -----------------*/\n  var dlon = adjust_lon(lon - this.long0);\n  if (this.sphere) {\n    x = this.x0 + this.a * dlon * Math.cos(this.lat_ts);\n    y = this.y0 + this.a * Math.sin(lat) / Math.cos(this.lat_ts);\n  }\n  else {\n    var qs = qsfnz(this.e, Math.sin(lat));\n    x = this.x0 + this.a * this.k0 * dlon;\n    y = this.y0 + this.a * qs * 0.5 / this.k0;\n  }\n\n  p.x = x;\n  p.y = y;\n  return p;\n}\n\n/* Cylindrical Equal Area inverse equations--mapping x,y to lat/long\n    ------------------------------------------------------------*/\nexport function inverse(p) {\n  p.x -= this.x0;\n  p.y -= this.y0;\n  var lon, lat;\n\n  if (this.sphere) {\n    lon = adjust_lon(this.long0 + (p.x / this.a) / Math.cos(this.lat_ts));\n    lat = Math.asin((p.y / this.a) * Math.cos(this.lat_ts));\n  }\n  else {\n    lat = iqsfnz(this.e, 2 * p.y * this.k0 / this.a);\n    lon = adjust_lon(this.long0 + p.x / (this.a * this.k0));\n  }\n\n  p.x = lon;\n  p.y = lat;\n  return p;\n}\n\nexport var names = [\"cea\"];\nexport default {\n  init: init,\n  forward: forward,\n  inverse: inverse,\n  names: names\n};\n","import adjust_lon from '../common/adjust_lon';\nimport adjust_lat from '../common/adjust_lat';\n\nexport function init() {\n\n  this.x0 = this.x0 || 0;\n  this.y0 = this.y0 || 0;\n  this.lat0 = this.lat0 || 0;\n  this.long0 = this.long0 || 0;\n  this.lat_ts = this.lat_ts || 0;\n  this.title = this.title || \"Equidistant Cylindrical (Plate Carre)\";\n\n  this.rc = Math.cos(this.lat_ts);\n}\n\n// forward equations--mapping lat,long to x,y\n// -----------------------------------------------------------------\nexport function forward(p) {\n\n  var lon = p.x;\n  var lat = p.y;\n\n  var dlon = adjust_lon(lon - this.long0);\n  var dlat = adjust_lat(lat - this.lat0);\n  p.x = this.x0 + (this.a * dlon * this.rc);\n  p.y = this.y0 + (this.a * dlat);\n  return p;\n}\n\n// inverse equations--mapping x,y to lat/long\n// -----------------------------------------------------------------\nexport function inverse(p) {\n\n  var x = p.x;\n  var y = p.y;\n\n  p.x = adjust_lon(this.long0 + ((x - this.x0) / (this.a * this.rc)));\n  p.y = adjust_lat(this.lat0 + ((y - this.y0) / (this.a)));\n  return p;\n}\n\nexport var names = [\"Equirectangular\", \"Equidistant_Cylindrical\", \"eqc\"];\nexport default {\n  init: init,\n  forward: forward,\n  inverse: inverse,\n  names: names\n};\n","import e0fn from '../common/e0fn';\nimport e1fn from '../common/e1fn';\nimport e2fn from '../common/e2fn';\nimport e3fn from '../common/e3fn';\nimport adjust_lon from '../common/adjust_lon';\nimport adjust_lat from '../common/adjust_lat';\nimport mlfn from '../common/mlfn';\nimport {EPSLN} from '../constants/values';\n\nimport gN from '../common/gN';\nvar MAX_ITER = 20;\n\nexport function init() {\n  /* Place parameters in static storage for common use\n      -------------------------------------------------*/\n  this.temp = this.b / this.a;\n  this.es = 1 - Math.pow(this.temp, 2); // devait etre dans tmerc.js mais n y est pas donc je commente sinon retour de valeurs nulles\n  this.e = Math.sqrt(this.es);\n  this.e0 = e0fn(this.es);\n  this.e1 = e1fn(this.es);\n  this.e2 = e2fn(this.es);\n  this.e3 = e3fn(this.es);\n  this.ml0 = this.a * mlfn(this.e0, this.e1, this.e2, this.e3, this.lat0); //si que des zeros le calcul ne se fait pas\n}\n\n/* Polyconic forward equations--mapping lat,long to x,y\n    ---------------------------------------------------*/\nexport function forward(p) {\n  var lon = p.x;\n  var lat = p.y;\n  var x, y, el;\n  var dlon = adjust_lon(lon - this.long0);\n  el = dlon * Math.sin(lat);\n  if (this.sphere) {\n    if (Math.abs(lat) <= EPSLN) {\n      x = this.a * dlon;\n      y = -1 * this.a * this.lat0;\n    }\n    else {\n      x = this.a * Math.sin(el) / Math.tan(lat);\n      y = this.a * (adjust_lat(lat - this.lat0) + (1 - Math.cos(el)) / Math.tan(lat));\n    }\n  }\n  else {\n    if (Math.abs(lat) <= EPSLN) {\n      x = this.a * dlon;\n      y = -1 * this.ml0;\n    }\n    else {\n      var nl = gN(this.a, this.e, Math.sin(lat)) / Math.tan(lat);\n      x = nl * Math.sin(el);\n      y = this.a * mlfn(this.e0, this.e1, this.e2, this.e3, lat) - this.ml0 + nl * (1 - Math.cos(el));\n    }\n\n  }\n  p.x = x + this.x0;\n  p.y = y + this.y0;\n  return p;\n}\n\n/* Inverse equations\n  -----------------*/\nexport function inverse(p) {\n  var lon, lat, x, y, i;\n  var al, bl;\n  var phi, dphi;\n  x = p.x - this.x0;\n  y = p.y - this.y0;\n\n  if (this.sphere) {\n    if (Math.abs(y + this.a * this.lat0) <= EPSLN) {\n      lon = adjust_lon(x / this.a + this.long0);\n      lat = 0;\n    }\n    else {\n      al = this.lat0 + y / this.a;\n      bl = x * x / this.a / this.a + al * al;\n      phi = al;\n      var tanphi;\n      for (i = MAX_ITER; i; --i) {\n        tanphi = Math.tan(phi);\n        dphi = -1 * (al * (phi * tanphi + 1) - phi - 0.5 * (phi * phi + bl) * tanphi) / ((phi - al) / tanphi - 1);\n        phi += dphi;\n        if (Math.abs(dphi) <= EPSLN) {\n          lat = phi;\n          break;\n        }\n      }\n      lon = adjust_lon(this.long0 + (Math.asin(x * Math.tan(phi) / this.a)) / Math.sin(lat));\n    }\n  }\n  else {\n    if (Math.abs(y + this.ml0) <= EPSLN) {\n      lat = 0;\n      lon = adjust_lon(this.long0 + x / this.a);\n    }\n    else {\n\n      al = (this.ml0 + y) / this.a;\n      bl = x * x / this.a / this.a + al * al;\n      phi = al;\n      var cl, mln, mlnp, ma;\n      var con;\n      for (i = MAX_ITER; i; --i) {\n        con = this.e * Math.sin(phi);\n        cl = Math.sqrt(1 - con * con) * Math.tan(phi);\n        mln = this.a * mlfn(this.e0, this.e1, this.e2, this.e3, phi);\n        mlnp = this.e0 - 2 * this.e1 * Math.cos(2 * phi) + 4 * this.e2 * Math.cos(4 * phi) - 6 * this.e3 * Math.cos(6 * phi);\n        ma = mln / this.a;\n        dphi = (al * (cl * ma + 1) - ma - 0.5 * cl * (ma * ma + bl)) / (this.es * Math.sin(2 * phi) * (ma * ma + bl - 2 * al * ma) / (4 * cl) + (al - ma) * (cl * mlnp - 2 / Math.sin(2 * phi)) - mlnp);\n        phi -= dphi;\n        if (Math.abs(dphi) <= EPSLN) {\n          lat = phi;\n          break;\n        }\n      }\n\n      //lat=phi4z(this.e,this.e0,this.e1,this.e2,this.e3,al,bl,0,0);\n      cl = Math.sqrt(1 - this.es * Math.pow(Math.sin(lat), 2)) * Math.tan(lat);\n      lon = adjust_lon(this.long0 + Math.asin(x * cl / this.a) / Math.sin(lat));\n    }\n  }\n\n  p.x = lon;\n  p.y = lat;\n  return p;\n}\n\nexport var names = [\"Polyconic\", \"poly\"];\nexport default {\n  init: init,\n  forward: forward,\n  inverse: inverse,\n  names: names\n};\n","import {SEC_TO_RAD} from '../constants/values';\n\n/*\n  reference\n    Department of Land and Survey Technical Circular 1973/32\n      http://www.linz.govt.nz/docs/miscellaneous/nz-map-definition.pdf\n    OSG Technical Report 4.1\n      http://www.linz.govt.nz/docs/miscellaneous/nzmg.pdf\n  */\n\n/**\n * iterations: Number of iterations to refine inverse transform.\n *     0 -> km accuracy\n *     1 -> m accuracy -- suitable for most mapping applications\n *     2 -> mm accuracy\n */\nexport var iterations = 1;\n\nexport function init() {\n  this.A = [];\n  this.A[1] = 0.6399175073;\n  this.A[2] = -0.1358797613;\n  this.A[3] = 0.063294409;\n  this.A[4] = -0.02526853;\n  this.A[5] = 0.0117879;\n  this.A[6] = -0.0055161;\n  this.A[7] = 0.0026906;\n  this.A[8] = -0.001333;\n  this.A[9] = 0.00067;\n  this.A[10] = -0.00034;\n\n  this.B_re = [];\n  this.B_im = [];\n  this.B_re[1] = 0.7557853228;\n  this.B_im[1] = 0;\n  this.B_re[2] = 0.249204646;\n  this.B_im[2] = 0.003371507;\n  this.B_re[3] = -0.001541739;\n  this.B_im[3] = 0.041058560;\n  this.B_re[4] = -0.10162907;\n  this.B_im[4] = 0.01727609;\n  this.B_re[5] = -0.26623489;\n  this.B_im[5] = -0.36249218;\n  this.B_re[6] = -0.6870983;\n  this.B_im[6] = -1.1651967;\n\n  this.C_re = [];\n  this.C_im = [];\n  this.C_re[1] = 1.3231270439;\n  this.C_im[1] = 0;\n  this.C_re[2] = -0.577245789;\n  this.C_im[2] = -0.007809598;\n  this.C_re[3] = 0.508307513;\n  this.C_im[3] = -0.112208952;\n  this.C_re[4] = -0.15094762;\n  this.C_im[4] = 0.18200602;\n  this.C_re[5] = 1.01418179;\n  this.C_im[5] = 1.64497696;\n  this.C_re[6] = 1.9660549;\n  this.C_im[6] = 2.5127645;\n\n  this.D = [];\n  this.D[1] = 1.5627014243;\n  this.D[2] = 0.5185406398;\n  this.D[3] = -0.03333098;\n  this.D[4] = -0.1052906;\n  this.D[5] = -0.0368594;\n  this.D[6] = 0.007317;\n  this.D[7] = 0.01220;\n  this.D[8] = 0.00394;\n  this.D[9] = -0.0013;\n}\n\n/**\n    New Zealand Map Grid Forward  - long/lat to x/y\n    long/lat in radians\n  */\nexport function forward(p) {\n  var n;\n  var lon = p.x;\n  var lat = p.y;\n\n  var delta_lat = lat - this.lat0;\n  var delta_lon = lon - this.long0;\n\n  // 1. Calculate d_phi and d_psi    ...                          // and d_lambda\n  // For this algorithm, delta_latitude is in seconds of arc x 10-5, so we need to scale to those units. Longitude is radians.\n  var d_phi = delta_lat / SEC_TO_RAD * 1E-5;\n  var d_lambda = delta_lon;\n  var d_phi_n = 1; // d_phi^0\n\n  var d_psi = 0;\n  for (n = 1; n <= 10; n++) {\n    d_phi_n = d_phi_n * d_phi;\n    d_psi = d_psi + this.A[n] * d_phi_n;\n  }\n\n  // 2. Calculate theta\n  var th_re = d_psi;\n  var th_im = d_lambda;\n\n  // 3. Calculate z\n  var th_n_re = 1;\n  var th_n_im = 0; // theta^0\n  var th_n_re1;\n  var th_n_im1;\n\n  var z_re = 0;\n  var z_im = 0;\n  for (n = 1; n <= 6; n++) {\n    th_n_re1 = th_n_re * th_re - th_n_im * th_im;\n    th_n_im1 = th_n_im * th_re + th_n_re * th_im;\n    th_n_re = th_n_re1;\n    th_n_im = th_n_im1;\n    z_re = z_re + this.B_re[n] * th_n_re - this.B_im[n] * th_n_im;\n    z_im = z_im + this.B_im[n] * th_n_re + this.B_re[n] * th_n_im;\n  }\n\n  // 4. Calculate easting and northing\n  p.x = (z_im * this.a) + this.x0;\n  p.y = (z_re * this.a) + this.y0;\n\n  return p;\n}\n\n/**\n    New Zealand Map Grid Inverse  -  x/y to long/lat\n  */\nexport function inverse(p) {\n  var n;\n  var x = p.x;\n  var y = p.y;\n\n  var delta_x = x - this.x0;\n  var delta_y = y - this.y0;\n\n  // 1. Calculate z\n  var z_re = delta_y / this.a;\n  var z_im = delta_x / this.a;\n\n  // 2a. Calculate theta - first approximation gives km accuracy\n  var z_n_re = 1;\n  var z_n_im = 0; // z^0\n  var z_n_re1;\n  var z_n_im1;\n\n  var th_re = 0;\n  var th_im = 0;\n  for (n = 1; n <= 6; n++) {\n    z_n_re1 = z_n_re * z_re - z_n_im * z_im;\n    z_n_im1 = z_n_im * z_re + z_n_re * z_im;\n    z_n_re = z_n_re1;\n    z_n_im = z_n_im1;\n    th_re = th_re + this.C_re[n] * z_n_re - this.C_im[n] * z_n_im;\n    th_im = th_im + this.C_im[n] * z_n_re + this.C_re[n] * z_n_im;\n  }\n\n  // 2b. Iterate to refine the accuracy of the calculation\n  //        0 iterations gives km accuracy\n  //        1 iteration gives m accuracy -- good enough for most mapping applications\n  //        2 iterations bives mm accuracy\n  for (var i = 0; i < this.iterations; i++) {\n    var th_n_re = th_re;\n    var th_n_im = th_im;\n    var th_n_re1;\n    var th_n_im1;\n\n    var num_re = z_re;\n    var num_im = z_im;\n    for (n = 2; n <= 6; n++) {\n      th_n_re1 = th_n_re * th_re - th_n_im * th_im;\n      th_n_im1 = th_n_im * th_re + th_n_re * th_im;\n      th_n_re = th_n_re1;\n      th_n_im = th_n_im1;\n      num_re = num_re + (n - 1) * (this.B_re[n] * th_n_re - this.B_im[n] * th_n_im);\n      num_im = num_im + (n - 1) * (this.B_im[n] * th_n_re + this.B_re[n] * th_n_im);\n    }\n\n    th_n_re = 1;\n    th_n_im = 0;\n    var den_re = this.B_re[1];\n    var den_im = this.B_im[1];\n    for (n = 2; n <= 6; n++) {\n      th_n_re1 = th_n_re * th_re - th_n_im * th_im;\n      th_n_im1 = th_n_im * th_re + th_n_re * th_im;\n      th_n_re = th_n_re1;\n      th_n_im = th_n_im1;\n      den_re = den_re + n * (this.B_re[n] * th_n_re - this.B_im[n] * th_n_im);\n      den_im = den_im + n * (this.B_im[n] * th_n_re + this.B_re[n] * th_n_im);\n    }\n\n    // Complex division\n    var den2 = den_re * den_re + den_im * den_im;\n    th_re = (num_re * den_re + num_im * den_im) / den2;\n    th_im = (num_im * den_re - num_re * den_im) / den2;\n  }\n\n  // 3. Calculate d_phi              ...                                    // and d_lambda\n  var d_psi = th_re;\n  var d_lambda = th_im;\n  var d_psi_n = 1; // d_psi^0\n\n  var d_phi = 0;\n  for (n = 1; n <= 9; n++) {\n    d_psi_n = d_psi_n * d_psi;\n    d_phi = d_phi + this.D[n] * d_psi_n;\n  }\n\n  // 4. Calculate latitude and longitude\n  // d_phi is calcuated in second of arc * 10^-5, so we need to scale back to radians. d_lambda is in radians.\n  var lat = this.lat0 + (d_phi * SEC_TO_RAD * 1E5);\n  var lon = this.long0 + d_lambda;\n\n  p.x = lon;\n  p.y = lat;\n\n  return p;\n}\n\nexport var names = [\"New_Zealand_Map_Grid\", \"nzmg\"];\nexport default {\n  init: init,\n  forward: forward,\n  inverse: inverse,\n  names: names\n};\n","import adjust_lon from '../common/adjust_lon';\n\n/*\n  reference\n    \"New Equal-Area Map Projections for Noncircular Regions\", John P. Snyder,\n    The American Cartographer, Vol 15, No. 4, October 1988, pp. 341-355.\n  */\n\n\n/* Initialize the Miller Cylindrical projection\n  -------------------------------------------*/\nexport function init() {\n  //no-op\n}\n\n/* Miller Cylindrical forward equations--mapping lat,long to x,y\n    ------------------------------------------------------------*/\nexport function forward(p) {\n  var lon = p.x;\n  var lat = p.y;\n  /* Forward equations\n      -----------------*/\n  var dlon = adjust_lon(lon - this.long0);\n  var x = this.x0 + this.a * dlon;\n  var y = this.y0 + this.a * Math.log(Math.tan((Math.PI / 4) + (lat / 2.5))) * 1.25;\n\n  p.x = x;\n  p.y = y;\n  return p;\n}\n\n/* Miller Cylindrical inverse equations--mapping x,y to lat/long\n    ------------------------------------------------------------*/\nexport function inverse(p) {\n  p.x -= this.x0;\n  p.y -= this.y0;\n\n  var lon = adjust_lon(this.long0 + p.x / this.a);\n  var lat = 2.5 * (Math.atan(Math.exp(0.8 * p.y / this.a)) - Math.PI / 4);\n\n  p.x = lon;\n  p.y = lat;\n  return p;\n}\n\nexport var names = [\"Miller_Cylindrical\", \"mill\"];\nexport default {\n  init: init,\n  forward: forward,\n  inverse: inverse,\n  names: names\n};\n","import adjust_lon from '../common/adjust_lon';\nimport adjust_lat from '../common/adjust_lat';\nimport pj_enfn from '../common/pj_enfn';\nvar MAX_ITER = 20;\nimport pj_mlfn from '../common/pj_mlfn';\nimport pj_inv_mlfn from '../common/pj_inv_mlfn';\nimport {EPSLN, HALF_PI} from '../constants/values';\n\nimport asinz from '../common/asinz';\n\n\nexport function init() {\n  /* Place parameters in static storage for common use\n    -------------------------------------------------*/\n\n\n  if (!this.sphere) {\n    this.en = pj_enfn(this.es);\n  }\n  else {\n    this.n = 1;\n    this.m = 0;\n    this.es = 0;\n    this.C_y = Math.sqrt((this.m + 1) / this.n);\n    this.C_x = this.C_y / (this.m + 1);\n  }\n\n}\n\n/* Sinusoidal forward equations--mapping lat,long to x,y\n  -----------------------------------------------------*/\nexport function forward(p) {\n  var x, y;\n  var lon = p.x;\n  var lat = p.y;\n  /* Forward equations\n    -----------------*/\n  lon = adjust_lon(lon - this.long0);\n\n  if (this.sphere) {\n    if (!this.m) {\n      lat = this.n !== 1 ? Math.asin(this.n * Math.sin(lat)) : lat;\n    }\n    else {\n      var k = this.n * Math.sin(lat);\n      for (var i = MAX_ITER; i; --i) {\n        var V = (this.m * lat + Math.sin(lat) - k) / (this.m + Math.cos(lat));\n        lat -= V;\n        if (Math.abs(V) < EPSLN) {\n          break;\n        }\n      }\n    }\n    x = this.a * this.C_x * lon * (this.m + Math.cos(lat));\n    y = this.a * this.C_y * lat;\n\n  }\n  else {\n\n    var s = Math.sin(lat);\n    var c = Math.cos(lat);\n    y = this.a * pj_mlfn(lat, s, c, this.en);\n    x = this.a * lon * c / Math.sqrt(1 - this.es * s * s);\n  }\n\n  p.x = x;\n  p.y = y;\n  return p;\n}\n\nexport function inverse(p) {\n  var lat, temp, lon, s;\n\n  p.x -= this.x0;\n  lon = p.x / this.a;\n  p.y -= this.y0;\n  lat = p.y / this.a;\n\n  if (this.sphere) {\n    lat /= this.C_y;\n    lon = lon / (this.C_x * (this.m + Math.cos(lat)));\n    if (this.m) {\n      lat = asinz((this.m * lat + Math.sin(lat)) / this.n);\n    }\n    else if (this.n !== 1) {\n      lat = asinz(Math.sin(lat) / this.n);\n    }\n    lon = adjust_lon(lon + this.long0);\n    lat = adjust_lat(lat);\n  }\n  else {\n    lat = pj_inv_mlfn(p.y / this.a, this.es, this.en);\n    s = Math.abs(lat);\n    if (s < HALF_PI) {\n      s = Math.sin(lat);\n      temp = this.long0 + p.x * Math.sqrt(1 - this.es * s * s) / (this.a * Math.cos(lat));\n      //temp = this.long0 + p.x / (this.a * Math.cos(lat));\n      lon = adjust_lon(temp);\n    }\n    else if ((s - EPSLN) < HALF_PI) {\n      lon = this.long0;\n    }\n  }\n  p.x = lon;\n  p.y = lat;\n  return p;\n}\n\nexport var names = [\"Sinusoidal\", \"sinu\"];\nexport default {\n  init: init,\n  forward: forward,\n  inverse: inverse,\n  names: names\n};\n","import adjust_lon from '../common/adjust_lon';\nexport function init() {}\nimport {EPSLN} from '../constants/values';\n/* Mollweide forward equations--mapping lat,long to x,y\n    ----------------------------------------------------*/\nexport function forward(p) {\n\n  /* Forward equations\n      -----------------*/\n  var lon = p.x;\n  var lat = p.y;\n\n  var delta_lon = adjust_lon(lon - this.long0);\n  var theta = lat;\n  var con = Math.PI * Math.sin(lat);\n\n  /* Iterate using the Newton-Raphson method to find theta\n      -----------------------------------------------------*/\n  while (true) {\n    var delta_theta = -(theta + Math.sin(theta) - con) / (1 + Math.cos(theta));\n    theta += delta_theta;\n    if (Math.abs(delta_theta) < EPSLN) {\n      break;\n    }\n  }\n  theta /= 2;\n\n  /* If the latitude is 90 deg, force the x coordinate to be \"0 + false easting\"\n       this is done here because of precision problems with \"cos(theta)\"\n       --------------------------------------------------------------------------*/\n  if (Math.PI / 2 - Math.abs(lat) < EPSLN) {\n    delta_lon = 0;\n  }\n  var x = 0.900316316158 * this.a * delta_lon * Math.cos(theta) + this.x0;\n  var y = 1.4142135623731 * this.a * Math.sin(theta) + this.y0;\n\n  p.x = x;\n  p.y = y;\n  return p;\n}\n\nexport function inverse(p) {\n  var theta;\n  var arg;\n\n  /* Inverse equations\n      -----------------*/\n  p.x -= this.x0;\n  p.y -= this.y0;\n  arg = p.y / (1.4142135623731 * this.a);\n\n  /* Because of division by zero problems, 'arg' can not be 1.  Therefore\n       a number very close to one is used instead.\n       -------------------------------------------------------------------*/\n  if (Math.abs(arg) > 0.999999999999) {\n    arg = 0.999999999999;\n  }\n  theta = Math.asin(arg);\n  var lon = adjust_lon(this.long0 + (p.x / (0.900316316158 * this.a * Math.cos(theta))));\n  if (lon < (-Math.PI)) {\n    lon = -Math.PI;\n  }\n  if (lon > Math.PI) {\n    lon = Math.PI;\n  }\n  arg = (2 * theta + Math.sin(2 * theta)) / Math.PI;\n  if (Math.abs(arg) > 1) {\n    arg = 1;\n  }\n  var lat = Math.asin(arg);\n\n  p.x = lon;\n  p.y = lat;\n  return p;\n}\n\nexport var names = [\"Mollweide\", \"moll\"];\nexport default {\n  init: init,\n  forward: forward,\n  inverse: inverse,\n  names: names\n};\n","import e0fn from '../common/e0fn';\nimport e1fn from '../common/e1fn';\nimport e2fn from '../common/e2fn';\nimport e3fn from '../common/e3fn';\nimport msfnz from '../common/msfnz';\nimport mlfn from '../common/mlfn';\nimport adjust_lon from '../common/adjust_lon';\nimport adjust_lat from '../common/adjust_lat';\nimport imlfn from '../common/imlfn';\nimport {EPSLN} from '../constants/values';\n\nexport function init() {\n\n  /* Place parameters in static storage for common use\n      -------------------------------------------------*/\n  // Standard Parallels cannot be equal and on opposite sides of the equator\n  if (Math.abs(this.lat1 + this.lat2) < EPSLN) {\n    return;\n  }\n  this.lat2 = this.lat2 || this.lat1;\n  this.temp = this.b / this.a;\n  this.es = 1 - Math.pow(this.temp, 2);\n  this.e = Math.sqrt(this.es);\n  this.e0 = e0fn(this.es);\n  this.e1 = e1fn(this.es);\n  this.e2 = e2fn(this.es);\n  this.e3 = e3fn(this.es);\n\n  this.sinphi = Math.sin(this.lat1);\n  this.cosphi = Math.cos(this.lat1);\n\n  this.ms1 = msfnz(this.e, this.sinphi, this.cosphi);\n  this.ml1 = mlfn(this.e0, this.e1, this.e2, this.e3, this.lat1);\n\n  if (Math.abs(this.lat1 - this.lat2) < EPSLN) {\n    this.ns = this.sinphi;\n  }\n  else {\n    this.sinphi = Math.sin(this.lat2);\n    this.cosphi = Math.cos(this.lat2);\n    this.ms2 = msfnz(this.e, this.sinphi, this.cosphi);\n    this.ml2 = mlfn(this.e0, this.e1, this.e2, this.e3, this.lat2);\n    this.ns = (this.ms1 - this.ms2) / (this.ml2 - this.ml1);\n  }\n  this.g = this.ml1 + this.ms1 / this.ns;\n  this.ml0 = mlfn(this.e0, this.e1, this.e2, this.e3, this.lat0);\n  this.rh = this.a * (this.g - this.ml0);\n}\n\n/* Equidistant Conic forward equations--mapping lat,long to x,y\n  -----------------------------------------------------------*/\nexport function forward(p) {\n  var lon = p.x;\n  var lat = p.y;\n  var rh1;\n\n  /* Forward equations\n      -----------------*/\n  if (this.sphere) {\n    rh1 = this.a * (this.g - lat);\n  }\n  else {\n    var ml = mlfn(this.e0, this.e1, this.e2, this.e3, lat);\n    rh1 = this.a * (this.g - ml);\n  }\n  var theta = this.ns * adjust_lon(lon - this.long0);\n  var x = this.x0 + rh1 * Math.sin(theta);\n  var y = this.y0 + this.rh - rh1 * Math.cos(theta);\n  p.x = x;\n  p.y = y;\n  return p;\n}\n\n/* Inverse equations\n  -----------------*/\nexport function inverse(p) {\n  p.x -= this.x0;\n  p.y = this.rh - p.y + this.y0;\n  var con, rh1, lat, lon;\n  if (this.ns >= 0) {\n    rh1 = Math.sqrt(p.x * p.x + p.y * p.y);\n    con = 1;\n  }\n  else {\n    rh1 = -Math.sqrt(p.x * p.x + p.y * p.y);\n    con = -1;\n  }\n  var theta = 0;\n  if (rh1 !== 0) {\n    theta = Math.atan2(con * p.x, con * p.y);\n  }\n\n  if (this.sphere) {\n    lon = adjust_lon(this.long0 + theta / this.ns);\n    lat = adjust_lat(this.g - rh1 / this.a);\n    p.x = lon;\n    p.y = lat;\n    return p;\n  }\n  else {\n    var ml = this.g - rh1 / this.a;\n    lat = imlfn(ml, this.e0, this.e1, this.e2, this.e3);\n    lon = adjust_lon(this.long0 + theta / this.ns);\n    p.x = lon;\n    p.y = lat;\n    return p;\n  }\n\n}\n\nexport var names = [\"Equidistant_Conic\", \"eqdc\"];\nexport default {\n  init: init,\n  forward: forward,\n  inverse: inverse,\n  names: names\n};\n","import adjust_lon from '../common/adjust_lon';\n\nimport {HALF_PI, EPSLN} from '../constants/values';\n\nimport asinz from '../common/asinz';\n\n/* Initialize the Van Der Grinten projection\n  ----------------------------------------*/\nexport function init() {\n  //this.R = 6370997; //Radius of earth\n  this.R = this.a;\n}\n\nexport function forward(p) {\n\n  var lon = p.x;\n  var lat = p.y;\n\n  /* Forward equations\n    -----------------*/\n  var dlon = adjust_lon(lon - this.long0);\n  var x, y;\n\n  if (Math.abs(lat) <= EPSLN) {\n    x = this.x0 + this.R * dlon;\n    y = this.y0;\n  }\n  var theta = asinz(2 * Math.abs(lat / Math.PI));\n  if ((Math.abs(dlon) <= EPSLN) || (Math.abs(Math.abs(lat) - HALF_PI) <= EPSLN)) {\n    x = this.x0;\n    if (lat >= 0) {\n      y = this.y0 + Math.PI * this.R * Math.tan(0.5 * theta);\n    }\n    else {\n      y = this.y0 + Math.PI * this.R * -Math.tan(0.5 * theta);\n    }\n    //  return(OK);\n  }\n  var al = 0.5 * Math.abs((Math.PI / dlon) - (dlon / Math.PI));\n  var asq = al * al;\n  var sinth = Math.sin(theta);\n  var costh = Math.cos(theta);\n\n  var g = costh / (sinth + costh - 1);\n  var gsq = g * g;\n  var m = g * (2 / sinth - 1);\n  var msq = m * m;\n  var con = Math.PI * this.R * (al * (g - msq) + Math.sqrt(asq * (g - msq) * (g - msq) - (msq + asq) * (gsq - msq))) / (msq + asq);\n  if (dlon < 0) {\n    con = -con;\n  }\n  x = this.x0 + con;\n  //con = Math.abs(con / (Math.PI * this.R));\n  var q = asq + g;\n  con = Math.PI * this.R * (m * q - al * Math.sqrt((msq + asq) * (asq + 1) - q * q)) / (msq + asq);\n  if (lat >= 0) {\n    //y = this.y0 + Math.PI * this.R * Math.sqrt(1 - con * con - 2 * al * con);\n    y = this.y0 + con;\n  }\n  else {\n    //y = this.y0 - Math.PI * this.R * Math.sqrt(1 - con * con - 2 * al * con);\n    y = this.y0 - con;\n  }\n  p.x = x;\n  p.y = y;\n  return p;\n}\n\n/* Van Der Grinten inverse equations--mapping x,y to lat/long\n  ---------------------------------------------------------*/\nexport function inverse(p) {\n  var lon, lat;\n  var xx, yy, xys, c1, c2, c3;\n  var a1;\n  var m1;\n  var con;\n  var th1;\n  var d;\n\n  /* inverse equations\n    -----------------*/\n  p.x -= this.x0;\n  p.y -= this.y0;\n  con = Math.PI * this.R;\n  xx = p.x / con;\n  yy = p.y / con;\n  xys = xx * xx + yy * yy;\n  c1 = -Math.abs(yy) * (1 + xys);\n  c2 = c1 - 2 * yy * yy + xx * xx;\n  c3 = -2 * c1 + 1 + 2 * yy * yy + xys * xys;\n  d = yy * yy / c3 + (2 * c2 * c2 * c2 / c3 / c3 / c3 - 9 * c1 * c2 / c3 / c3) / 27;\n  a1 = (c1 - c2 * c2 / 3 / c3) / c3;\n  m1 = 2 * Math.sqrt(-a1 / 3);\n  con = ((3 * d) / a1) / m1;\n  if (Math.abs(con) > 1) {\n    if (con >= 0) {\n      con = 1;\n    }\n    else {\n      con = -1;\n    }\n  }\n  th1 = Math.acos(con) / 3;\n  if (p.y >= 0) {\n    lat = (-m1 * Math.cos(th1 + Math.PI / 3) - c2 / 3 / c3) * Math.PI;\n  }\n  else {\n    lat = -(-m1 * Math.cos(th1 + Math.PI / 3) - c2 / 3 / c3) * Math.PI;\n  }\n\n  if (Math.abs(xx) < EPSLN) {\n    lon = this.long0;\n  }\n  else {\n    lon = adjust_lon(this.long0 + Math.PI * (xys - 1 + Math.sqrt(1 + 2 * (xx * xx - yy * yy) + xys * xys)) / 2 / xx);\n  }\n\n  p.x = lon;\n  p.y = lat;\n  return p;\n}\n\nexport var names = [\"Van_der_Grinten_I\", \"VanDerGrinten\", \"vandg\"];\nexport default {\n  init: init,\n  forward: forward,\n  inverse: inverse,\n  names: names\n};\n","import adjust_lon from '../common/adjust_lon';\nimport {HALF_PI, EPSLN} from '../constants/values';\n\nimport mlfn from '../common/mlfn';\nimport e0fn from '../common/e0fn';\nimport e1fn from '../common/e1fn';\nimport e2fn from '../common/e2fn';\nimport e3fn from '../common/e3fn';\nimport gN from '../common/gN';\nimport asinz from '../common/asinz';\nimport imlfn from '../common/imlfn';\n\n\n\nexport function init() {\n  this.sin_p12 = Math.sin(this.lat0);\n  this.cos_p12 = Math.cos(this.lat0);\n}\n\nexport function forward(p) {\n  var lon = p.x;\n  var lat = p.y;\n  var sinphi = Math.sin(p.y);\n  var cosphi = Math.cos(p.y);\n  var dlon = adjust_lon(lon - this.long0);\n  var e0, e1, e2, e3, Mlp, Ml, tanphi, Nl1, Nl, psi, Az, G, H, GH, Hs, c, kp, cos_c, s, s2, s3, s4, s5;\n  if (this.sphere) {\n    if (Math.abs(this.sin_p12 - 1) <= EPSLN) {\n      //North Pole case\n      p.x = this.x0 + this.a * (HALF_PI - lat) * Math.sin(dlon);\n      p.y = this.y0 - this.a * (HALF_PI - lat) * Math.cos(dlon);\n      return p;\n    }\n    else if (Math.abs(this.sin_p12 + 1) <= EPSLN) {\n      //South Pole case\n      p.x = this.x0 + this.a * (HALF_PI + lat) * Math.sin(dlon);\n      p.y = this.y0 + this.a * (HALF_PI + lat) * Math.cos(dlon);\n      return p;\n    }\n    else {\n      //default case\n      cos_c = this.sin_p12 * sinphi + this.cos_p12 * cosphi * Math.cos(dlon);\n      c = Math.acos(cos_c);\n      kp = c / Math.sin(c);\n      p.x = this.x0 + this.a * kp * cosphi * Math.sin(dlon);\n      p.y = this.y0 + this.a * kp * (this.cos_p12 * sinphi - this.sin_p12 * cosphi * Math.cos(dlon));\n      return p;\n    }\n  }\n  else {\n    e0 = e0fn(this.es);\n    e1 = e1fn(this.es);\n    e2 = e2fn(this.es);\n    e3 = e3fn(this.es);\n    if (Math.abs(this.sin_p12 - 1) <= EPSLN) {\n      //North Pole case\n      Mlp = this.a * mlfn(e0, e1, e2, e3, HALF_PI);\n      Ml = this.a * mlfn(e0, e1, e2, e3, lat);\n      p.x = this.x0 + (Mlp - Ml) * Math.sin(dlon);\n      p.y = this.y0 - (Mlp - Ml) * Math.cos(dlon);\n      return p;\n    }\n    else if (Math.abs(this.sin_p12 + 1) <= EPSLN) {\n      //South Pole case\n      Mlp = this.a * mlfn(e0, e1, e2, e3, HALF_PI);\n      Ml = this.a * mlfn(e0, e1, e2, e3, lat);\n      p.x = this.x0 + (Mlp + Ml) * Math.sin(dlon);\n      p.y = this.y0 + (Mlp + Ml) * Math.cos(dlon);\n      return p;\n    }\n    else {\n      //Default case\n      tanphi = sinphi / cosphi;\n      Nl1 = gN(this.a, this.e, this.sin_p12);\n      Nl = gN(this.a, this.e, sinphi);\n      psi = Math.atan((1 - this.es) * tanphi + this.es * Nl1 * this.sin_p12 / (Nl * cosphi));\n      Az = Math.atan2(Math.sin(dlon), this.cos_p12 * Math.tan(psi) - this.sin_p12 * Math.cos(dlon));\n      if (Az === 0) {\n        s = Math.asin(this.cos_p12 * Math.sin(psi) - this.sin_p12 * Math.cos(psi));\n      }\n      else if (Math.abs(Math.abs(Az) - Math.PI) <= EPSLN) {\n        s = -Math.asin(this.cos_p12 * Math.sin(psi) - this.sin_p12 * Math.cos(psi));\n      }\n      else {\n        s = Math.asin(Math.sin(dlon) * Math.cos(psi) / Math.sin(Az));\n      }\n      G = this.e * this.sin_p12 / Math.sqrt(1 - this.es);\n      H = this.e * this.cos_p12 * Math.cos(Az) / Math.sqrt(1 - this.es);\n      GH = G * H;\n      Hs = H * H;\n      s2 = s * s;\n      s3 = s2 * s;\n      s4 = s3 * s;\n      s5 = s4 * s;\n      c = Nl1 * s * (1 - s2 * Hs * (1 - Hs) / 6 + s3 / 8 * GH * (1 - 2 * Hs) + s4 / 120 * (Hs * (4 - 7 * Hs) - 3 * G * G * (1 - 7 * Hs)) - s5 / 48 * GH);\n      p.x = this.x0 + c * Math.sin(Az);\n      p.y = this.y0 + c * Math.cos(Az);\n      return p;\n    }\n  }\n\n\n}\n\nexport function inverse(p) {\n  p.x -= this.x0;\n  p.y -= this.y0;\n  var rh, z, sinz, cosz, lon, lat, con, e0, e1, e2, e3, Mlp, M, N1, psi, Az, cosAz, tmp, A, B, D, Ee, F;\n  if (this.sphere) {\n    rh = Math.sqrt(p.x * p.x + p.y * p.y);\n    if (rh > (2 * HALF_PI * this.a)) {\n      return;\n    }\n    z = rh / this.a;\n\n    sinz = Math.sin(z);\n    cosz = Math.cos(z);\n\n    lon = this.long0;\n    if (Math.abs(rh) <= EPSLN) {\n      lat = this.lat0;\n    }\n    else {\n      lat = asinz(cosz * this.sin_p12 + (p.y * sinz * this.cos_p12) / rh);\n      con = Math.abs(this.lat0) - HALF_PI;\n      if (Math.abs(con) <= EPSLN) {\n        if (this.lat0 >= 0) {\n          lon = adjust_lon(this.long0 + Math.atan2(p.x, - p.y));\n        }\n        else {\n          lon = adjust_lon(this.long0 - Math.atan2(-p.x, p.y));\n        }\n      }\n      else {\n        /*con = cosz - this.sin_p12 * Math.sin(lat);\n        if ((Math.abs(con) < EPSLN) && (Math.abs(p.x) < EPSLN)) {\n          //no-op, just keep the lon value as is\n        } else {\n          var temp = Math.atan2((p.x * sinz * this.cos_p12), (con * rh));\n          lon = adjust_lon(this.long0 + Math.atan2((p.x * sinz * this.cos_p12), (con * rh)));\n        }*/\n        lon = adjust_lon(this.long0 + Math.atan2(p.x * sinz, rh * this.cos_p12 * cosz - p.y * this.sin_p12 * sinz));\n      }\n    }\n\n    p.x = lon;\n    p.y = lat;\n    return p;\n  }\n  else {\n    e0 = e0fn(this.es);\n    e1 = e1fn(this.es);\n    e2 = e2fn(this.es);\n    e3 = e3fn(this.es);\n    if (Math.abs(this.sin_p12 - 1) <= EPSLN) {\n      //North pole case\n      Mlp = this.a * mlfn(e0, e1, e2, e3, HALF_PI);\n      rh = Math.sqrt(p.x * p.x + p.y * p.y);\n      M = Mlp - rh;\n      lat = imlfn(M / this.a, e0, e1, e2, e3);\n      lon = adjust_lon(this.long0 + Math.atan2(p.x, - 1 * p.y));\n      p.x = lon;\n      p.y = lat;\n      return p;\n    }\n    else if (Math.abs(this.sin_p12 + 1) <= EPSLN) {\n      //South pole case\n      Mlp = this.a * mlfn(e0, e1, e2, e3, HALF_PI);\n      rh = Math.sqrt(p.x * p.x + p.y * p.y);\n      M = rh - Mlp;\n\n      lat = imlfn(M / this.a, e0, e1, e2, e3);\n      lon = adjust_lon(this.long0 + Math.atan2(p.x, p.y));\n      p.x = lon;\n      p.y = lat;\n      return p;\n    }\n    else {\n      //default case\n      rh = Math.sqrt(p.x * p.x + p.y * p.y);\n      Az = Math.atan2(p.x, p.y);\n      N1 = gN(this.a, this.e, this.sin_p12);\n      cosAz = Math.cos(Az);\n      tmp = this.e * this.cos_p12 * cosAz;\n      A = -tmp * tmp / (1 - this.es);\n      B = 3 * this.es * (1 - A) * this.sin_p12 * this.cos_p12 * cosAz / (1 - this.es);\n      D = rh / N1;\n      Ee = D - A * (1 + A) * Math.pow(D, 3) / 6 - B * (1 + 3 * A) * Math.pow(D, 4) / 24;\n      F = 1 - A * Ee * Ee / 2 - D * Ee * Ee * Ee / 6;\n      psi = Math.asin(this.sin_p12 * Math.cos(Ee) + this.cos_p12 * Math.sin(Ee) * cosAz);\n      lon = adjust_lon(this.long0 + Math.asin(Math.sin(Az) * Math.sin(Ee) / Math.cos(psi)));\n      lat = Math.atan((1 - this.es * F * this.sin_p12 / Math.sin(psi)) * Math.tan(psi) / (1 - this.es));\n      p.x = lon;\n      p.y = lat;\n      return p;\n    }\n  }\n\n}\n\nexport var names = [\"Azimuthal_Equidistant\", \"aeqd\"];\nexport default {\n  init: init,\n  forward: forward,\n  inverse: inverse,\n  names: names\n};\n","import adjust_lon from '../common/adjust_lon';\nimport asinz from '../common/asinz';\nimport {EPSLN, HALF_PI} from '../constants/values';\n\nexport function init() {\n  //double temp;      /* temporary variable    */\n\n  /* Place parameters in static storage for common use\n      -------------------------------------------------*/\n  this.sin_p14 = Math.sin(this.lat0);\n  this.cos_p14 = Math.cos(this.lat0);\n}\n\n/* Orthographic forward equations--mapping lat,long to x,y\n    ---------------------------------------------------*/\nexport function forward(p) {\n  var sinphi, cosphi; /* sin and cos value        */\n  var dlon; /* delta longitude value      */\n  var coslon; /* cos of longitude        */\n  var ksp; /* scale factor          */\n  var g, x, y;\n  var lon = p.x;\n  var lat = p.y;\n  /* Forward equations\n      -----------------*/\n  dlon = adjust_lon(lon - this.long0);\n\n  sinphi = Math.sin(lat);\n  cosphi = Math.cos(lat);\n\n  coslon = Math.cos(dlon);\n  g = this.sin_p14 * sinphi + this.cos_p14 * cosphi * coslon;\n  ksp = 1;\n  if ((g > 0) || (Math.abs(g) <= EPSLN)) {\n    x = this.a * ksp * cosphi * Math.sin(dlon);\n    y = this.y0 + this.a * ksp * (this.cos_p14 * sinphi - this.sin_p14 * cosphi * coslon);\n  }\n  p.x = x;\n  p.y = y;\n  return p;\n}\n\nexport function inverse(p) {\n  var rh; /* height above ellipsoid      */\n  var z; /* angle          */\n  var sinz, cosz; /* sin of z and cos of z      */\n  var con;\n  var lon, lat;\n  /* Inverse equations\n      -----------------*/\n  p.x -= this.x0;\n  p.y -= this.y0;\n  rh = Math.sqrt(p.x * p.x + p.y * p.y);\n  z = asinz(rh / this.a);\n\n  sinz = Math.sin(z);\n  cosz = Math.cos(z);\n\n  lon = this.long0;\n  if (Math.abs(rh) <= EPSLN) {\n    lat = this.lat0;\n    p.x = lon;\n    p.y = lat;\n    return p;\n  }\n  lat = asinz(cosz * this.sin_p14 + (p.y * sinz * this.cos_p14) / rh);\n  con = Math.abs(this.lat0) - HALF_PI;\n  if (Math.abs(con) <= EPSLN) {\n    if (this.lat0 >= 0) {\n      lon = adjust_lon(this.long0 + Math.atan2(p.x, - p.y));\n    }\n    else {\n      lon = adjust_lon(this.long0 - Math.atan2(-p.x, p.y));\n    }\n    p.x = lon;\n    p.y = lat;\n    return p;\n  }\n  lon = adjust_lon(this.long0 + Math.atan2((p.x * sinz), rh * this.cos_p14 * cosz - p.y * this.sin_p14 * sinz));\n  p.x = lon;\n  p.y = lat;\n  return p;\n}\n\nexport var names = [\"ortho\"];\nexport default {\n  init: init,\n  forward: forward,\n  inverse: inverse,\n  names: names\n};\n","// QSC projection rewritten from the original PROJ4\n// https://github.com/OSGeo/proj.4/blob/master/src/PJ_qsc.c\n\nimport {EPSLN, TWO_PI, SPI, HALF_PI, FORTPI} from '../constants/values';\n\n/* constants */\nvar FACE_ENUM = {\n    FRONT: 1,\n    RIGHT: 2,\n    BACK: 3,\n    LEFT: 4,\n    TOP: 5,\n    BOTTOM: 6\n};\n\nvar AREA_ENUM = {\n    AREA_0: 1,\n    AREA_1: 2,\n    AREA_2: 3,\n    AREA_3: 4\n};\n\nexport function init() {\n\n  this.x0 = this.x0 || 0;\n  this.y0 = this.y0 || 0;\n  this.lat0 = this.lat0 || 0;\n  this.long0 = this.long0 || 0;\n  this.lat_ts = this.lat_ts || 0;\n  this.title = this.title || \"Quadrilateralized Spherical Cube\";\n\n  /* Determine the cube face from the center of projection. */\n  if (this.lat0 >= HALF_PI - FORTPI / 2.0) {\n    this.face = FACE_ENUM.TOP;\n  } else if (this.lat0 <= -(HALF_PI - FORTPI / 2.0)) {\n    this.face = FACE_ENUM.BOTTOM;\n  } else if (Math.abs(this.long0) <= FORTPI) {\n    this.face = FACE_ENUM.FRONT;\n  } else if (Math.abs(this.long0) <= HALF_PI + FORTPI) {\n    this.face = this.long0 > 0.0 ? FACE_ENUM.RIGHT : FACE_ENUM.LEFT;\n  } else {\n    this.face = FACE_ENUM.BACK;\n  }\n\n  /* Fill in useful values for the ellipsoid <-> sphere shift\n   * described in [LK12]. */\n  if (this.es !== 0) {\n    this.one_minus_f = 1 - (this.a - this.b) / this.a;\n    this.one_minus_f_squared = this.one_minus_f * this.one_minus_f;\n  }\n}\n\n// QSC forward equations--mapping lat,long to x,y\n// -----------------------------------------------------------------\nexport function forward(p) {\n  var xy = {x: 0, y: 0};\n  var lat, lon;\n  var theta, phi;\n  var t, mu;\n  /* nu; */\n  var area = {value: 0};\n\n  // move lon according to projection's lon\n  p.x -= this.long0;\n\n  /* Convert the geodetic latitude to a geocentric latitude.\n   * This corresponds to the shift from the ellipsoid to the sphere\n   * described in [LK12]. */\n  if (this.es !== 0) {//if (P->es != 0) {\n    lat = Math.atan(this.one_minus_f_squared * Math.tan(p.y));\n  } else {\n    lat = p.y;\n  }\n\n  /* Convert the input lat, lon into theta, phi as used by QSC.\n   * This depends on the cube face and the area on it.\n   * For the top and bottom face, we can compute theta and phi\n   * directly from phi, lam. For the other faces, we must use\n   * unit sphere cartesian coordinates as an intermediate step. */\n  lon = p.x; //lon = lp.lam;\n  if (this.face === FACE_ENUM.TOP) {\n    phi = HALF_PI - lat;\n    if (lon >= FORTPI && lon <= HALF_PI + FORTPI) {\n      area.value = AREA_ENUM.AREA_0;\n      theta = lon - HALF_PI;\n    } else if (lon > HALF_PI + FORTPI || lon <= -(HALF_PI + FORTPI)) {\n      area.value = AREA_ENUM.AREA_1;\n      theta = (lon > 0.0 ? lon - SPI : lon + SPI);\n    } else if (lon > -(HALF_PI + FORTPI) && lon <= -FORTPI) {\n      area.value = AREA_ENUM.AREA_2;\n      theta = lon + HALF_PI;\n    } else {\n      area.value = AREA_ENUM.AREA_3;\n      theta = lon;\n    }\n  } else if (this.face === FACE_ENUM.BOTTOM) {\n    phi = HALF_PI + lat;\n    if (lon >= FORTPI && lon <= HALF_PI + FORTPI) {\n      area.value = AREA_ENUM.AREA_0;\n      theta = -lon + HALF_PI;\n    } else if (lon < FORTPI && lon >= -FORTPI) {\n      area.value = AREA_ENUM.AREA_1;\n      theta = -lon;\n    } else if (lon < -FORTPI && lon >= -(HALF_PI + FORTPI)) {\n      area.value = AREA_ENUM.AREA_2;\n      theta = -lon - HALF_PI;\n    } else {\n      area.value = AREA_ENUM.AREA_3;\n      theta = (lon > 0.0 ? -lon + SPI : -lon - SPI);\n    }\n  } else {\n    var q, r, s;\n    var sinlat, coslat;\n    var sinlon, coslon;\n\n    if (this.face === FACE_ENUM.RIGHT) {\n      lon = qsc_shift_lon_origin(lon, +HALF_PI);\n    } else if (this.face === FACE_ENUM.BACK) {\n      lon = qsc_shift_lon_origin(lon, +SPI);\n    } else if (this.face === FACE_ENUM.LEFT) {\n      lon = qsc_shift_lon_origin(lon, -HALF_PI);\n    }\n    sinlat = Math.sin(lat);\n    coslat = Math.cos(lat);\n    sinlon = Math.sin(lon);\n    coslon = Math.cos(lon);\n    q = coslat * coslon;\n    r = coslat * sinlon;\n    s = sinlat;\n\n    if (this.face === FACE_ENUM.FRONT) {\n      phi = Math.acos(q);\n      theta = qsc_fwd_equat_face_theta(phi, s, r, area);\n    } else if (this.face === FACE_ENUM.RIGHT) {\n      phi = Math.acos(r);\n      theta = qsc_fwd_equat_face_theta(phi, s, -q, area);\n    } else if (this.face === FACE_ENUM.BACK) {\n      phi = Math.acos(-q);\n      theta = qsc_fwd_equat_face_theta(phi, s, -r, area);\n    } else if (this.face === FACE_ENUM.LEFT) {\n      phi = Math.acos(-r);\n      theta = qsc_fwd_equat_face_theta(phi, s, q, area);\n    } else {\n      /* Impossible */\n      phi = theta = 0;\n      area.value = AREA_ENUM.AREA_0;\n    }\n  }\n\n  /* Compute mu and nu for the area of definition.\n   * For mu, see Eq. (3-21) in [OL76], but note the typos:\n   * compare with Eq. (3-14). For nu, see Eq. (3-38). */\n  mu = Math.atan((12 / SPI) * (theta + Math.acos(Math.sin(theta) * Math.cos(FORTPI)) - HALF_PI));\n  t = Math.sqrt((1 - Math.cos(phi)) / (Math.cos(mu) * Math.cos(mu)) / (1 - Math.cos(Math.atan(1 / Math.cos(theta)))));\n\n  /* Apply the result to the real area. */\n  if (area.value === AREA_ENUM.AREA_1) {\n    mu += HALF_PI;\n  } else if (area.value === AREA_ENUM.AREA_2) {\n    mu += SPI;\n  } else if (area.value === AREA_ENUM.AREA_3) {\n    mu += 1.5 * SPI;\n  }\n\n  /* Now compute x, y from mu and nu */\n  xy.x = t * Math.cos(mu);\n  xy.y = t * Math.sin(mu);\n  xy.x = xy.x * this.a + this.x0;\n  xy.y = xy.y * this.a + this.y0;\n\n  p.x = xy.x;\n  p.y = xy.y;\n  return p;\n}\n\n// QSC inverse equations--mapping x,y to lat/long\n// -----------------------------------------------------------------\nexport function inverse(p) {\n  var lp = {lam: 0, phi: 0};\n  var mu, nu, cosmu, tannu;\n  var tantheta, theta, cosphi, phi;\n  var t;\n  var area = {value: 0};\n\n  /* de-offset */\n  p.x = (p.x - this.x0) / this.a;\n  p.y = (p.y - this.y0) / this.a;\n\n  /* Convert the input x, y to the mu and nu angles as used by QSC.\n   * This depends on the area of the cube face. */\n  nu = Math.atan(Math.sqrt(p.x * p.x + p.y * p.y));\n  mu = Math.atan2(p.y, p.x);\n  if (p.x >= 0.0 && p.x >= Math.abs(p.y)) {\n    area.value = AREA_ENUM.AREA_0;\n  } else if (p.y >= 0.0 && p.y >= Math.abs(p.x)) {\n    area.value = AREA_ENUM.AREA_1;\n    mu -= HALF_PI;\n  } else if (p.x < 0.0 && -p.x >= Math.abs(p.y)) {\n    area.value = AREA_ENUM.AREA_2;\n    mu = (mu < 0.0 ? mu + SPI : mu - SPI);\n  } else {\n    area.value = AREA_ENUM.AREA_3;\n    mu += HALF_PI;\n  }\n\n  /* Compute phi and theta for the area of definition.\n   * The inverse projection is not described in the original paper, but some\n   * good hints can be found here (as of 2011-12-14):\n   * http://fits.gsfc.nasa.gov/fitsbits/saf.93/saf.9302\n   * (search for \"Message-Id: <9302181759.AA25477 at fits.cv.nrao.edu>\") */\n  t = (SPI / 12) * Math.tan(mu);\n  tantheta = Math.sin(t) / (Math.cos(t) - (1 / Math.sqrt(2)));\n  theta = Math.atan(tantheta);\n  cosmu = Math.cos(mu);\n  tannu = Math.tan(nu);\n  cosphi = 1 - cosmu * cosmu * tannu * tannu * (1 - Math.cos(Math.atan(1 / Math.cos(theta))));\n  if (cosphi < -1) {\n    cosphi = -1;\n  } else if (cosphi > +1) {\n    cosphi = +1;\n  }\n\n  /* Apply the result to the real area on the cube face.\n   * For the top and bottom face, we can compute phi and lam directly.\n   * For the other faces, we must use unit sphere cartesian coordinates\n   * as an intermediate step. */\n  if (this.face === FACE_ENUM.TOP) {\n    phi = Math.acos(cosphi);\n    lp.phi = HALF_PI - phi;\n    if (area.value === AREA_ENUM.AREA_0) {\n      lp.lam = theta + HALF_PI;\n    } else if (area.value === AREA_ENUM.AREA_1) {\n      lp.lam = (theta < 0.0 ? theta + SPI : theta - SPI);\n    } else if (area.value === AREA_ENUM.AREA_2) {\n      lp.lam = theta - HALF_PI;\n    } else /* area.value == AREA_ENUM.AREA_3 */ {\n      lp.lam = theta;\n    }\n  } else if (this.face === FACE_ENUM.BOTTOM) {\n    phi = Math.acos(cosphi);\n    lp.phi = phi - HALF_PI;\n    if (area.value === AREA_ENUM.AREA_0) {\n      lp.lam = -theta + HALF_PI;\n    } else if (area.value === AREA_ENUM.AREA_1) {\n      lp.lam = -theta;\n    } else if (area.value === AREA_ENUM.AREA_2) {\n      lp.lam = -theta - HALF_PI;\n    } else /* area.value == AREA_ENUM.AREA_3 */ {\n      lp.lam = (theta < 0.0 ? -theta - SPI : -theta + SPI);\n    }\n  } else {\n    /* Compute phi and lam via cartesian unit sphere coordinates. */\n    var q, r, s;\n    q = cosphi;\n    t = q * q;\n    if (t >= 1) {\n      s = 0;\n    } else {\n      s = Math.sqrt(1 - t) * Math.sin(theta);\n    }\n    t += s * s;\n    if (t >= 1) {\n      r = 0;\n    } else {\n      r = Math.sqrt(1 - t);\n    }\n    /* Rotate q,r,s into the correct area. */\n    if (area.value === AREA_ENUM.AREA_1) {\n      t = r;\n      r = -s;\n      s = t;\n    } else if (area.value === AREA_ENUM.AREA_2) {\n      r = -r;\n      s = -s;\n    } else if (area.value === AREA_ENUM.AREA_3) {\n      t = r;\n      r = s;\n      s = -t;\n    }\n    /* Rotate q,r,s into the correct cube face. */\n    if (this.face === FACE_ENUM.RIGHT) {\n      t = q;\n      q = -r;\n      r = t;\n    } else if (this.face === FACE_ENUM.BACK) {\n      q = -q;\n      r = -r;\n    } else if (this.face === FACE_ENUM.LEFT) {\n      t = q;\n      q = r;\n      r = -t;\n    }\n    /* Now compute phi and lam from the unit sphere coordinates. */\n    lp.phi = Math.acos(-s) - HALF_PI;\n    lp.lam = Math.atan2(r, q);\n    if (this.face === FACE_ENUM.RIGHT) {\n      lp.lam = qsc_shift_lon_origin(lp.lam, -HALF_PI);\n    } else if (this.face === FACE_ENUM.BACK) {\n      lp.lam = qsc_shift_lon_origin(lp.lam, -SPI);\n    } else if (this.face === FACE_ENUM.LEFT) {\n      lp.lam = qsc_shift_lon_origin(lp.lam, +HALF_PI);\n    }\n  }\n\n  /* Apply the shift from the sphere to the ellipsoid as described\n   * in [LK12]. */\n  if (this.es !== 0) {\n    var invert_sign;\n    var tanphi, xa;\n    invert_sign = (lp.phi < 0 ? 1 : 0);\n    tanphi = Math.tan(lp.phi);\n    xa = this.b / Math.sqrt(tanphi * tanphi + this.one_minus_f_squared);\n    lp.phi = Math.atan(Math.sqrt(this.a * this.a - xa * xa) / (this.one_minus_f * xa));\n    if (invert_sign) {\n      lp.phi = -lp.phi;\n    }\n  }\n\n  lp.lam += this.long0;\n  p.x = lp.lam;\n  p.y = lp.phi;\n  return p;\n}\n\n/* Helper function for forward projection: compute the theta angle\n * and determine the area number. */\nfunction qsc_fwd_equat_face_theta(phi, y, x, area) {\n  var theta;\n  if (phi < EPSLN) {\n    area.value = AREA_ENUM.AREA_0;\n    theta = 0.0;\n  } else {\n    theta = Math.atan2(y, x);\n    if (Math.abs(theta) <= FORTPI) {\n      area.value = AREA_ENUM.AREA_0;\n    } else if (theta > FORTPI && theta <= HALF_PI + FORTPI) {\n      area.value = AREA_ENUM.AREA_1;\n      theta -= HALF_PI;\n    } else if (theta > HALF_PI + FORTPI || theta <= -(HALF_PI + FORTPI)) {\n      area.value = AREA_ENUM.AREA_2;\n      theta = (theta >= 0.0 ? theta - SPI : theta + SPI);\n    } else {\n      area.value = AREA_ENUM.AREA_3;\n      theta += HALF_PI;\n    }\n  }\n  return theta;\n}\n\n/* Helper function: shift the longitude. */\nfunction qsc_shift_lon_origin(lon, offset) {\n  var slon = lon + offset;\n  if (slon < -SPI) {\n    slon += TWO_PI;\n  } else if (slon > +SPI) {\n    slon -= TWO_PI;\n  }\n  return slon;\n}\n\nexport var names = [\"Quadrilateralized Spherical Cube\", \"Quadrilateralized_Spherical_Cube\", \"qsc\"];\nexport default {\n  init: init,\n  forward: forward,\n  inverse: inverse,\n  names: names\n};\n\n","import proj4 from './core';\nimport Proj from \"./Proj\";\nimport Point from \"./Point\";\nimport common from \"./common/toPoint\";\nimport defs from \"./defs\";\nimport transform from \"./transform\";\nimport mgrs from \"mgrs\";\nimport version from \"./version\";\nimport includedProjections from \"../projs\";\n\nproj4.defaultDatum = 'WGS84'; //default datum\nproj4.Proj = Proj;\nproj4.WGS84 = new proj4.Proj('WGS84');\nproj4.Point = Point;\nproj4.toPoint = common;\nproj4.defs = defs;\nproj4.transform = transform;\nproj4.mgrs = mgrs;\nproj4.version = version;\nincludedProjections(proj4);\nexport default proj4;\n","import tmerc from './lib/projections/tmerc';\nimport etmerc from './lib/projections/etmerc';\nimport utm from './lib/projections/utm';\nimport sterea from './lib/projections/sterea';\nimport stere from './lib/projections/stere';\nimport somerc from './lib/projections/somerc';\nimport omerc from './lib/projections/omerc';\nimport lcc from './lib/projections/lcc';\nimport krovak from './lib/projections/krovak';\nimport cass from './lib/projections/cass';\nimport laea from './lib/projections/laea';\nimport aea from './lib/projections/aea';\nimport gnom from './lib/projections/gnom';\nimport cea from './lib/projections/cea';\nimport eqc from './lib/projections/eqc';\nimport poly from './lib/projections/poly';\nimport nzmg from './lib/projections/nzmg';\nimport mill from './lib/projections/mill';\nimport sinu from './lib/projections/sinu';\nimport moll from './lib/projections/moll';\nimport eqdc from './lib/projections/eqdc';\nimport vandg from './lib/projections/vandg';\nimport aeqd from './lib/projections/aeqd';\nimport ortho from './lib/projections/ortho';\nimport qsc from './lib/projections/qsc';\nexport default function(proj4){\n  proj4.Proj.projections.add(tmerc);\n  proj4.Proj.projections.add(etmerc);\n  proj4.Proj.projections.add(utm);\n  proj4.Proj.projections.add(sterea);\n  proj4.Proj.projections.add(stere);\n  proj4.Proj.projections.add(somerc);\n  proj4.Proj.projections.add(omerc);\n  proj4.Proj.projections.add(lcc);\n  proj4.Proj.projections.add(krovak);\n  proj4.Proj.projections.add(cass);\n  proj4.Proj.projections.add(laea);\n  proj4.Proj.projections.add(aea);\n  proj4.Proj.projections.add(gnom);\n  proj4.Proj.projections.add(cea);\n  proj4.Proj.projections.add(eqc);\n  proj4.Proj.projections.add(poly);\n  proj4.Proj.projections.add(nzmg);\n  proj4.Proj.projections.add(mill);\n  proj4.Proj.projections.add(sinu);\n  proj4.Proj.projections.add(moll);\n  proj4.Proj.projections.add(eqdc);\n  proj4.Proj.projections.add(vandg);\n  proj4.Proj.projections.add(aeqd);\n  proj4.Proj.projections.add(ortho);\n  proj4.Proj.projections.add(qsc);\n}","/**\n * @module ol/interaction/Draw\n */\nimport {inherits} from '../util.js';\nimport EventType from '../events/EventType.js';\nimport Feature from '../Feature.js';\nimport MapBrowserEventType from '../MapBrowserEventType.js';\nimport MapBrowserPointerEvent from '../MapBrowserPointerEvent.js';\nimport {getChangeEventType} from '../Object.js';\nimport {squaredDistance as squaredCoordinateDistance} from '../coordinate.js';\nimport {listen} from '../events.js';\nimport Event from '../events/Event.js';\nimport {noModifierKeys, always, shiftKeyOnly} from '../events/condition.js';\nimport {boundingExtent, getBottomLeft, getBottomRight, getTopLeft, getTopRight} from '../extent.js';\nimport {TRUE, FALSE} from '../functions.js';\nimport Circle from '../geom/Circle.js';\nimport GeometryType from '../geom/GeometryType.js';\nimport LineString from '../geom/LineString.js';\nimport MultiLineString from '../geom/MultiLineString.js';\nimport MultiPoint from '../geom/MultiPoint.js';\nimport MultiPolygon from '../geom/MultiPolygon.js';\nimport {POINTER_TYPE} from '../pointer/MouseSource.js';\nimport Point from '../geom/Point.js';\nimport Polygon, {fromCircle, makeRegular} from '../geom/Polygon.js';\nimport PointerInteraction, {handleEvent as handlePointerEvent} from '../interaction/Pointer.js';\nimport InteractionProperty from '../interaction/Property.js';\nimport VectorLayer from '../layer/Vector.js';\nimport VectorSource from '../source/Vector.js';\nimport {createEditingStyle} from '../style/Style.js';\n\n\n/**\n * @typedef {Object} Options\n * @property {module:ol/geom/GeometryType} type Geometry type of\n * the geometries being drawn with this instance.\n * @property {number} [clickTolerance=6] The maximum distance in pixels between\n * \"down\" and \"up\" for a \"up\" event to be considered a \"click\" event and\n * actually add a point/vertex to the geometry being drawn.  The default of `6`\n * was chosen for the draw interaction to behave correctly on mouse as well as\n * on touch devices.\n * @property {module:ol/Collection.<module:ol/Feature>} [features]\n * Destination collection for the drawn features.\n * @property {module:ol/source/Vector} [source] Destination source for\n * the drawn features.\n * @property {number} [dragVertexDelay=500] Delay in milliseconds after pointerdown\n * before the current vertex can be dragged to its exact position.\n * @property {number} [snapTolerance=12] Pixel distance for snapping to the\n * drawing finish.\n * @property {boolean} [stopClick=false] Stop click, singleclick, and\n * doubleclick events from firing during drawing.\n * @property {number} [maxPoints] The number of points that can be drawn before\n * a polygon ring or line string is finished. By default there is no\n * restriction.\n * @property {number} [minPoints] The number of points that must be drawn\n * before a polygon ring or line string can be finished. Default is `3` for\n * polygon rings and `2` for line strings.\n * @property {module:ol/events/condition~Condition} [finishCondition] A function\n * that takes an {@link module:ol/MapBrowserEvent~MapBrowserEvent} and returns a\n * boolean to indicate whether the drawing can be finished.\n * @property {module:ol/style/Style|Array.<module:ol/style/Style>|module:ol/style/Style~StyleFunction} [style]\n * Style for sketch features.\n * @property {module:ol/interaction/Draw~GeometryFunction} [geometryFunction]\n * Function that is called when a geometry's coordinates are updated.\n * @property {string} [geometryName] Geometry name to use for features created\n * by the draw interaction.\n * @property {module:ol/events/condition~Condition} [condition] A function that\n * takes an {@link module:ol/MapBrowserEvent~MapBrowserEvent} and returns a\n * boolean to indicate whether that event should be handled.\n * By default {@link module:ol/events/condition~noModifierKeys}, i.e. a click,\n * adds a vertex or deactivates freehand drawing.\n * @property {boolean} [freehand=false] Operate in freehand mode for lines,\n * polygons, and circles.  This makes the interaction always operate in freehand\n * mode and takes precedence over any `freehandCondition` option.\n * @property {module:ol/events/condition~Condition} [freehandCondition]\n * Condition that activates freehand drawing for lines and polygons. This\n * function takes an {@link module:ol/MapBrowserEvent~MapBrowserEvent} and\n * returns a boolean to indicate whether that event should be handled. The\n * default is {@link module:ol/events/condition~shiftKeyOnly}, meaning that the\n * Shift key activates freehand drawing.\n * @property {boolean} [wrapX=false] Wrap the world horizontally on the sketch\n * overlay.\n */\n\n\n/**\n * Function that takes an array of coordinates and an optional existing geometry as\n * arguments, and returns a geometry. The optional existing geometry is the\n * geometry that is returned when the function is called without a second\n * argument.\n * @typedef {function(!Array.<module:ol/coordinate~Coordinate>, module:ol/geom/SimpleGeometry=):\n *     module:ol/geom/SimpleGeometry} GeometryFunction\n */\n\n\n/**\n * Draw mode.  This collapses multi-part geometry types with their single-part\n * cousins.\n * @enum {string}\n */\nconst Mode = {\n  POINT: 'Point',\n  LINE_STRING: 'LineString',\n  POLYGON: 'Polygon',\n  CIRCLE: 'Circle'\n};\n\n\n/**\n * @enum {string}\n */\nconst DrawEventType = {\n  /**\n   * Triggered upon feature draw start\n   * @event module:ol/interaction/Draw~DrawEvent#drawstart\n   * @api\n   */\n  DRAWSTART: 'drawstart',\n  /**\n   * Triggered upon feature draw end\n   * @event module:ol/interaction/Draw~DrawEvent#drawend\n   * @api\n   */\n  DRAWEND: 'drawend'\n};\n\n\n/**\n * @classdesc\n * Events emitted by {@link module:ol/interaction/Draw~Draw} instances are\n * instances of this type.\n *\n * @constructor\n * @extends {module:ol/events/Event}\n * @param {module:ol/interaction/Draw~DrawEventType} type Type.\n * @param {module:ol/Feature} feature The feature drawn.\n */\nconst DrawEvent = function(type, feature) {\n\n  Event.call(this, type);\n\n  /**\n   * The feature being drawn.\n   * @type {module:ol/Feature}\n   * @api\n   */\n  this.feature = feature;\n\n};\n\ninherits(DrawEvent, Event);\n\n\n/**\n * @classdesc\n * Interaction for drawing feature geometries.\n *\n * @constructor\n * @extends {module:ol/interaction/Pointer}\n * @fires module:ol/interaction/Draw~DrawEvent\n * @param {module:ol/interaction/Draw~Options} options Options.\n * @api\n */\nconst Draw = function(options) {\n\n  PointerInteraction.call(this, {\n    handleDownEvent: handleDownEvent,\n    handleEvent: handleEvent,\n    handleUpEvent: handleUpEvent\n  });\n\n  /**\n   * @type {boolean}\n   * @private\n   */\n  this.shouldHandle_ = false;\n\n  /**\n   * @type {module:ol~Pixel}\n   * @private\n   */\n  this.downPx_ = null;\n\n  /**\n   * @type {number|undefined}\n   * @private\n   */\n  this.downTimeout_;\n\n  /**\n   * @type {number|undefined}\n   * @private\n   */\n  this.lastDragTime_;\n\n  /**\n   * @type {boolean}\n   * @private\n   */\n  this.freehand_ = false;\n\n  /**\n   * Target source for drawn features.\n   * @type {module:ol/source/Vector}\n   * @private\n   */\n  this.source_ = options.source ? options.source : null;\n\n  /**\n   * Target collection for drawn features.\n   * @type {module:ol/Collection.<module:ol/Feature>}\n   * @private\n   */\n  this.features_ = options.features ? options.features : null;\n\n  /**\n   * Pixel distance for snapping.\n   * @type {number}\n   * @private\n   */\n  this.snapTolerance_ = options.snapTolerance ? options.snapTolerance : 12;\n\n  /**\n   * Geometry type.\n   * @type {module:ol/geom/GeometryType}\n   * @private\n   */\n  this.type_ = /** @type {module:ol/geom/GeometryType} */ (options.type);\n\n  /**\n   * Drawing mode (derived from geometry type.\n   * @type {module:ol/interaction/Draw~Mode}\n   * @private\n   */\n  this.mode_ = getMode(this.type_);\n\n  /**\n   * Stop click, singleclick, and doubleclick events from firing during drawing.\n   * Default is `false`.\n   * @type {boolean}\n   * @private\n   */\n  this.stopClick_ = !!options.stopClick;\n\n  /**\n   * The number of points that must be drawn before a polygon ring or line\n   * string can be finished.  The default is 3 for polygon rings and 2 for\n   * line strings.\n   * @type {number}\n   * @private\n   */\n  this.minPoints_ = options.minPoints ?\n    options.minPoints :\n    (this.mode_ === Mode.POLYGON ? 3 : 2);\n\n  /**\n   * The number of points that can be drawn before a polygon ring or line string\n   * is finished. The default is no restriction.\n   * @type {number}\n   * @private\n   */\n  this.maxPoints_ = options.maxPoints ? options.maxPoints : Infinity;\n\n  /**\n   * A function to decide if a potential finish coordinate is permissible\n   * @private\n   * @type {module:ol/events/condition~Condition}\n   */\n  this.finishCondition_ = options.finishCondition ? options.finishCondition : TRUE;\n\n  let geometryFunction = options.geometryFunction;\n  if (!geometryFunction) {\n    if (this.type_ === GeometryType.CIRCLE) {\n      /**\n       * @param {!Array.<module:ol/coordinate~Coordinate>} coordinates\n       *     The coordinates.\n       * @param {module:ol/geom/SimpleGeometry=} opt_geometry Optional geometry.\n       * @return {module:ol/geom/SimpleGeometry} A geometry.\n       */\n      geometryFunction = function(coordinates, opt_geometry) {\n        const circle = opt_geometry ? /** @type {module:ol/geom/Circle} */ (opt_geometry) :\n          new Circle([NaN, NaN]);\n        const squaredLength = squaredCoordinateDistance(\n          coordinates[0], coordinates[1]);\n        circle.setCenterAndRadius(coordinates[0], Math.sqrt(squaredLength));\n        return circle;\n      };\n    } else {\n      let Constructor;\n      const mode = this.mode_;\n      if (mode === Mode.POINT) {\n        Constructor = Point;\n      } else if (mode === Mode.LINE_STRING) {\n        Constructor = LineString;\n      } else if (mode === Mode.POLYGON) {\n        Constructor = Polygon;\n      }\n      /**\n       * @param {!Array.<module:ol/coordinate~Coordinate>} coordinates\n       *     The coordinates.\n       * @param {module:ol/geom/SimpleGeometry=} opt_geometry Optional geometry.\n       * @return {module:ol/geom/SimpleGeometry} A geometry.\n       */\n      geometryFunction = function(coordinates, opt_geometry) {\n        let geometry = opt_geometry;\n        if (geometry) {\n          if (mode === Mode.POLYGON) {\n            if (coordinates[0].length) {\n              // Add a closing coordinate to match the first\n              geometry.setCoordinates([coordinates[0].concat([coordinates[0][0]])]);\n            } else {\n              geometry.setCoordinates([]);\n            }\n          } else {\n            geometry.setCoordinates(coordinates);\n          }\n        } else {\n          geometry = new Constructor(coordinates);\n        }\n        return geometry;\n      };\n    }\n  }\n\n  /**\n   * @type {module:ol/interaction/Draw~GeometryFunction}\n   * @private\n   */\n  this.geometryFunction_ = geometryFunction;\n\n  /**\n   * @type {number}\n   * @private\n   */\n  this.dragVertexDelay_ = options.dragVertexDelay !== undefined ? options.dragVertexDelay : 500;\n\n  /**\n   * Finish coordinate for the feature (first point for polygons, last point for\n   * linestrings).\n   * @type {module:ol/coordinate~Coordinate}\n   * @private\n   */\n  this.finishCoordinate_ = null;\n\n  /**\n   * Sketch feature.\n   * @type {module:ol/Feature}\n   * @private\n   */\n  this.sketchFeature_ = null;\n\n  /**\n   * Sketch point.\n   * @type {module:ol/Feature}\n   * @private\n   */\n  this.sketchPoint_ = null;\n\n  /**\n   * Sketch coordinates. Used when drawing a line or polygon.\n   * @type {module:ol/coordinate~Coordinate|Array.<module:ol/coordinate~Coordinate>|Array.<Array.<module:ol/coordinate~Coordinate>>}\n   * @private\n   */\n  this.sketchCoords_ = null;\n\n  /**\n   * Sketch line. Used when drawing polygon.\n   * @type {module:ol/Feature}\n   * @private\n   */\n  this.sketchLine_ = null;\n\n  /**\n   * Sketch line coordinates. Used when drawing a polygon or circle.\n   * @type {Array.<module:ol/coordinate~Coordinate>}\n   * @private\n   */\n  this.sketchLineCoords_ = null;\n\n  /**\n   * Squared tolerance for handling up events.  If the squared distance\n   * between a down and up event is greater than this tolerance, up events\n   * will not be handled.\n   * @type {number}\n   * @private\n   */\n  this.squaredClickTolerance_ = options.clickTolerance ?\n    options.clickTolerance * options.clickTolerance : 36;\n\n  /**\n   * Draw overlay where our sketch features are drawn.\n   * @type {module:ol/layer/Vector}\n   * @private\n   */\n  this.overlay_ = new VectorLayer({\n    source: new VectorSource({\n      useSpatialIndex: false,\n      wrapX: options.wrapX ? options.wrapX : false\n    }),\n    style: options.style ? options.style :\n      getDefaultStyleFunction(),\n    updateWhileInteracting: true\n  });\n\n  /**\n   * Name of the geometry attribute for newly created features.\n   * @type {string|undefined}\n   * @private\n   */\n  this.geometryName_ = options.geometryName;\n\n  /**\n   * @private\n   * @type {module:ol/events/condition~Condition}\n   */\n  this.condition_ = options.condition ? options.condition : noModifierKeys;\n\n  /**\n   * @private\n   * @type {module:ol/events/condition~Condition}\n   */\n  this.freehandCondition_;\n  if (options.freehand) {\n    this.freehandCondition_ = always;\n  } else {\n    this.freehandCondition_ = options.freehandCondition ?\n      options.freehandCondition : shiftKeyOnly;\n  }\n\n  listen(this,\n    getChangeEventType(InteractionProperty.ACTIVE),\n    this.updateState_, this);\n\n};\n\ninherits(Draw, PointerInteraction);\n\n\n/**\n * @return {module:ol/style/Style~StyleFunction} Styles.\n */\nfunction getDefaultStyleFunction() {\n  const styles = createEditingStyle();\n  return function(feature, resolution) {\n    return styles[feature.getGeometry().getType()];\n  };\n}\n\n\n/**\n * @inheritDoc\n */\nDraw.prototype.setMap = function(map) {\n  PointerInteraction.prototype.setMap.call(this, map);\n  this.updateState_();\n};\n\n\n/**\n * Handles the {@link module:ol/MapBrowserEvent map browser event} and may actually\n * draw or finish the drawing.\n * @param {module:ol/MapBrowserEvent} event Map browser event.\n * @return {boolean} `false` to stop event propagation.\n * @this {module:ol/interaction/Draw}\n * @api\n */\nexport function handleEvent(event) {\n  if (event.originalEvent.type === EventType.CONTEXTMENU) {\n    // Avoid context menu for long taps when drawing on mobile\n    event.preventDefault();\n  }\n  this.freehand_ = this.mode_ !== Mode.POINT && this.freehandCondition_(event);\n  let move = event.type === MapBrowserEventType.POINTERMOVE;\n  let pass = true;\n  if (this.lastDragTime_ && event.type === MapBrowserEventType.POINTERDRAG) {\n    const now = Date.now();\n    if (now - this.lastDragTime_ >= this.dragVertexDelay_) {\n      this.downPx_ = event.pixel;\n      this.shouldHandle_ = !this.freehand_;\n      move = true;\n    } else {\n      this.lastDragTime_ = undefined;\n    }\n    if (this.shouldHandle_ && this.downTimeout_) {\n      clearTimeout(this.downTimeout_);\n      this.downTimeout_ = undefined;\n    }\n  }\n  if (this.freehand_ &&\n      event.type === MapBrowserEventType.POINTERDRAG &&\n      this.sketchFeature_ !== null) {\n    this.addToDrawing_(event);\n    pass = false;\n  } else if (this.freehand_ &&\n      event.type === MapBrowserEventType.POINTERDOWN) {\n    pass = false;\n  } else if (move) {\n    pass = event.type === MapBrowserEventType.POINTERMOVE;\n    if (pass && this.freehand_) {\n      pass = this.handlePointerMove_(event);\n    } else if (event.pointerEvent.pointerType == POINTER_TYPE ||\n        (event.type === MapBrowserEventType.POINTERDRAG && !this.downTimeout_)) {\n      this.handlePointerMove_(event);\n    }\n  } else if (event.type === MapBrowserEventType.DBLCLICK) {\n    pass = false;\n  }\n\n  return handlePointerEvent.call(this, event) && pass;\n}\n\n\n/**\n * @param {module:ol/MapBrowserPointerEvent} event Event.\n * @return {boolean} Start drag sequence?\n * @this {module:ol/interaction/Draw}\n */\nfunction handleDownEvent(event) {\n  this.shouldHandle_ = !this.freehand_;\n\n  if (this.freehand_) {\n    this.downPx_ = event.pixel;\n    if (!this.finishCoordinate_) {\n      this.startDrawing_(event);\n    }\n    return true;\n  } else if (this.condition_(event)) {\n    this.lastDragTime_ = Date.now();\n    this.downTimeout_ = setTimeout(function() {\n      this.handlePointerMove_(new MapBrowserPointerEvent(\n        MapBrowserEventType.POINTERMOVE, event.map, event.pointerEvent, event.frameState));\n    }.bind(this), this.dragVertexDelay_);\n    this.downPx_ = event.pixel;\n    return true;\n  } else {\n    return false;\n  }\n}\n\n\n/**\n * @param {module:ol/MapBrowserPointerEvent} event Event.\n * @return {boolean} Stop drag sequence?\n * @this {module:ol/interaction/Draw}\n */\nfunction handleUpEvent(event) {\n  let pass = true;\n\n  if (this.downTimeout_) {\n    clearTimeout(this.downTimeout_);\n    this.downTimeout_ = undefined;\n  }\n\n  this.handlePointerMove_(event);\n\n  const circleMode = this.mode_ === Mode.CIRCLE;\n\n  if (this.shouldHandle_) {\n    if (!this.finishCoordinate_) {\n      this.startDrawing_(event);\n      if (this.mode_ === Mode.POINT) {\n        this.finishDrawing();\n      }\n    } else if (this.freehand_ || circleMode) {\n      this.finishDrawing();\n    } else if (this.atFinish_(event)) {\n      if (this.finishCondition_(event)) {\n        this.finishDrawing();\n      }\n    } else {\n      this.addToDrawing_(event);\n    }\n    pass = false;\n  } else if (this.freehand_) {\n    this.finishCoordinate_ = null;\n    this.abortDrawing_();\n  }\n  if (!pass && this.stopClick_) {\n    event.stopPropagation();\n  }\n  return pass;\n}\n\n\n/**\n * Handle move events.\n * @param {module:ol/MapBrowserEvent} event A move event.\n * @return {boolean} Pass the event to other interactions.\n * @private\n */\nDraw.prototype.handlePointerMove_ = function(event) {\n  if (this.downPx_ &&\n      ((!this.freehand_ && this.shouldHandle_) ||\n      (this.freehand_ && !this.shouldHandle_))) {\n    const downPx = this.downPx_;\n    const clickPx = event.pixel;\n    const dx = downPx[0] - clickPx[0];\n    const dy = downPx[1] - clickPx[1];\n    const squaredDistance = dx * dx + dy * dy;\n    this.shouldHandle_ = this.freehand_ ?\n      squaredDistance > this.squaredClickTolerance_ :\n      squaredDistance <= this.squaredClickTolerance_;\n    if (!this.shouldHandle_) {\n      return true;\n    }\n  }\n\n  if (this.finishCoordinate_) {\n    this.modifyDrawing_(event);\n  } else {\n    this.createOrUpdateSketchPoint_(event);\n  }\n  return true;\n};\n\n\n/**\n * Determine if an event is within the snapping tolerance of the start coord.\n * @param {module:ol/MapBrowserEvent} event Event.\n * @return {boolean} The event is within the snapping tolerance of the start.\n * @private\n */\nDraw.prototype.atFinish_ = function(event) {\n  let at = false;\n  if (this.sketchFeature_) {\n    let potentiallyDone = false;\n    let potentiallyFinishCoordinates = [this.finishCoordinate_];\n    if (this.mode_ === Mode.LINE_STRING) {\n      potentiallyDone = this.sketchCoords_.length > this.minPoints_;\n    } else if (this.mode_ === Mode.POLYGON) {\n      potentiallyDone = this.sketchCoords_[0].length >\n          this.minPoints_;\n      potentiallyFinishCoordinates = [this.sketchCoords_[0][0],\n        this.sketchCoords_[0][this.sketchCoords_[0].length - 2]];\n    }\n    if (potentiallyDone) {\n      const map = event.map;\n      for (let i = 0, ii = potentiallyFinishCoordinates.length; i < ii; i++) {\n        const finishCoordinate = potentiallyFinishCoordinates[i];\n        const finishPixel = map.getPixelFromCoordinate(finishCoordinate);\n        const pixel = event.pixel;\n        const dx = pixel[0] - finishPixel[0];\n        const dy = pixel[1] - finishPixel[1];\n        const snapTolerance = this.freehand_ ? 1 : this.snapTolerance_;\n        at = Math.sqrt(dx * dx + dy * dy) <= snapTolerance;\n        if (at) {\n          this.finishCoordinate_ = finishCoordinate;\n          break;\n        }\n      }\n    }\n  }\n  return at;\n};\n\n\n/**\n * @param {module:ol/MapBrowserEvent} event Event.\n * @private\n */\nDraw.prototype.createOrUpdateSketchPoint_ = function(event) {\n  const coordinates = event.coordinate.slice();\n  if (!this.sketchPoint_) {\n    this.sketchPoint_ = new Feature(new Point(coordinates));\n    this.updateSketchFeatures_();\n  } else {\n    const sketchPointGeom = /** @type {module:ol/geom/Point} */ (this.sketchPoint_.getGeometry());\n    sketchPointGeom.setCoordinates(coordinates);\n  }\n};\n\n\n/**\n * Start the drawing.\n * @param {module:ol/MapBrowserEvent} event Event.\n * @private\n */\nDraw.prototype.startDrawing_ = function(event) {\n  const start = event.coordinate;\n  this.finishCoordinate_ = start;\n  if (this.mode_ === Mode.POINT) {\n    this.sketchCoords_ = start.slice();\n  } else if (this.mode_ === Mode.POLYGON) {\n    this.sketchCoords_ = [[start.slice(), start.slice()]];\n    this.sketchLineCoords_ = this.sketchCoords_[0];\n  } else {\n    this.sketchCoords_ = [start.slice(), start.slice()];\n  }\n  if (this.sketchLineCoords_) {\n    this.sketchLine_ = new Feature(\n      new LineString(this.sketchLineCoords_));\n  }\n  const geometry = this.geometryFunction_(this.sketchCoords_);\n  this.sketchFeature_ = new Feature();\n  if (this.geometryName_) {\n    this.sketchFeature_.setGeometryName(this.geometryName_);\n  }\n  this.sketchFeature_.setGeometry(geometry);\n  this.updateSketchFeatures_();\n  this.dispatchEvent(new DrawEvent(DrawEventType.DRAWSTART, this.sketchFeature_));\n};\n\n\n/**\n * Modify the drawing.\n * @param {module:ol/MapBrowserEvent} event Event.\n * @private\n */\nDraw.prototype.modifyDrawing_ = function(event) {\n  let coordinate = event.coordinate;\n  const geometry = /** @type {module:ol/geom/SimpleGeometry} */ (this.sketchFeature_.getGeometry());\n  let coordinates, last;\n  if (this.mode_ === Mode.POINT) {\n    last = this.sketchCoords_;\n  } else if (this.mode_ === Mode.POLYGON) {\n    coordinates = this.sketchCoords_[0];\n    last = coordinates[coordinates.length - 1];\n    if (this.atFinish_(event)) {\n      // snap to finish\n      coordinate = this.finishCoordinate_.slice();\n    }\n  } else {\n    coordinates = this.sketchCoords_;\n    last = coordinates[coordinates.length - 1];\n  }\n  last[0] = coordinate[0];\n  last[1] = coordinate[1];\n  this.geometryFunction_(/** @type {!Array.<module:ol/coordinate~Coordinate>} */ (this.sketchCoords_), geometry);\n  if (this.sketchPoint_) {\n    const sketchPointGeom = /** @type {module:ol/geom/Point} */ (this.sketchPoint_.getGeometry());\n    sketchPointGeom.setCoordinates(coordinate);\n  }\n  let sketchLineGeom;\n  if (geometry instanceof Polygon &&\n      this.mode_ !== Mode.POLYGON) {\n    if (!this.sketchLine_) {\n      this.sketchLine_ = new Feature(new LineString(null));\n    }\n    const ring = geometry.getLinearRing(0);\n    sketchLineGeom = /** @type {module:ol/geom/LineString} */ (this.sketchLine_.getGeometry());\n    sketchLineGeom.setFlatCoordinates(\n      ring.getLayout(), ring.getFlatCoordinates());\n  } else if (this.sketchLineCoords_) {\n    sketchLineGeom = /** @type {module:ol/geom/LineString} */ (this.sketchLine_.getGeometry());\n    sketchLineGeom.setCoordinates(this.sketchLineCoords_);\n  }\n  this.updateSketchFeatures_();\n};\n\n\n/**\n * Add a new coordinate to the drawing.\n * @param {module:ol/MapBrowserEvent} event Event.\n * @private\n */\nDraw.prototype.addToDrawing_ = function(event) {\n  const coordinate = event.coordinate;\n  const geometry = /** @type {module:ol/geom/SimpleGeometry} */ (this.sketchFeature_.getGeometry());\n  let done;\n  let coordinates;\n  if (this.mode_ === Mode.LINE_STRING) {\n    this.finishCoordinate_ = coordinate.slice();\n    coordinates = this.sketchCoords_;\n    if (coordinates.length >= this.maxPoints_) {\n      if (this.freehand_) {\n        coordinates.pop();\n      } else {\n        done = true;\n      }\n    }\n    coordinates.push(coordinate.slice());\n    this.geometryFunction_(coordinates, geometry);\n  } else if (this.mode_ === Mode.POLYGON) {\n    coordinates = this.sketchCoords_[0];\n    if (coordinates.length >= this.maxPoints_) {\n      if (this.freehand_) {\n        coordinates.pop();\n      } else {\n        done = true;\n      }\n    }\n    coordinates.push(coordinate.slice());\n    if (done) {\n      this.finishCoordinate_ = coordinates[0];\n    }\n    this.geometryFunction_(this.sketchCoords_, geometry);\n  }\n  this.updateSketchFeatures_();\n  if (done) {\n    this.finishDrawing();\n  }\n};\n\n\n/**\n * Remove last point of the feature currently being drawn.\n * @api\n */\nDraw.prototype.removeLastPoint = function() {\n  if (!this.sketchFeature_) {\n    return;\n  }\n  const geometry = /** @type {module:ol/geom/SimpleGeometry} */ (this.sketchFeature_.getGeometry());\n  let coordinates, sketchLineGeom;\n  if (this.mode_ === Mode.LINE_STRING) {\n    coordinates = this.sketchCoords_;\n    coordinates.splice(-2, 1);\n    this.geometryFunction_(coordinates, geometry);\n    if (coordinates.length >= 2) {\n      this.finishCoordinate_ = coordinates[coordinates.length - 2].slice();\n    }\n  } else if (this.mode_ === Mode.POLYGON) {\n    coordinates = this.sketchCoords_[0];\n    coordinates.splice(-2, 1);\n    sketchLineGeom = /** @type {module:ol/geom/LineString} */ (this.sketchLine_.getGeometry());\n    sketchLineGeom.setCoordinates(coordinates);\n    this.geometryFunction_(this.sketchCoords_, geometry);\n  }\n\n  if (coordinates.length === 0) {\n    this.finishCoordinate_ = null;\n  }\n\n  this.updateSketchFeatures_();\n};\n\n\n/**\n * Stop drawing and add the sketch feature to the target layer.\n * The {@link module:ol/interaction/Draw~DrawEventType.DRAWEND} event is\n * dispatched before inserting the feature.\n * @api\n */\nDraw.prototype.finishDrawing = function() {\n  const sketchFeature = this.abortDrawing_();\n  if (!sketchFeature) {\n    return;\n  }\n  let coordinates = this.sketchCoords_;\n  const geometry = /** @type {module:ol/geom/SimpleGeometry} */ (sketchFeature.getGeometry());\n  if (this.mode_ === Mode.LINE_STRING) {\n    // remove the redundant last point\n    coordinates.pop();\n    this.geometryFunction_(coordinates, geometry);\n  } else if (this.mode_ === Mode.POLYGON) {\n    // remove the redundant last point in ring\n    coordinates[0].pop();\n    this.geometryFunction_(coordinates, geometry);\n    coordinates = geometry.getCoordinates();\n  }\n\n  // cast multi-part geometries\n  if (this.type_ === GeometryType.MULTI_POINT) {\n    sketchFeature.setGeometry(new MultiPoint([coordinates]));\n  } else if (this.type_ === GeometryType.MULTI_LINE_STRING) {\n    sketchFeature.setGeometry(new MultiLineString([coordinates]));\n  } else if (this.type_ === GeometryType.MULTI_POLYGON) {\n    sketchFeature.setGeometry(new MultiPolygon([coordinates]));\n  }\n\n  // First dispatch event to allow full set up of feature\n  this.dispatchEvent(new DrawEvent(DrawEventType.DRAWEND, sketchFeature));\n\n  // Then insert feature\n  if (this.features_) {\n    this.features_.push(sketchFeature);\n  }\n  if (this.source_) {\n    this.source_.addFeature(sketchFeature);\n  }\n};\n\n\n/**\n * Stop drawing without adding the sketch feature to the target layer.\n * @return {module:ol/Feature} The sketch feature (or null if none).\n * @private\n */\nDraw.prototype.abortDrawing_ = function() {\n  this.finishCoordinate_ = null;\n  const sketchFeature = this.sketchFeature_;\n  if (sketchFeature) {\n    this.sketchFeature_ = null;\n    this.sketchPoint_ = null;\n    this.sketchLine_ = null;\n    this.overlay_.getSource().clear(true);\n  }\n  return sketchFeature;\n};\n\n\n/**\n * Extend an existing geometry by adding additional points. This only works\n * on features with `LineString` geometries, where the interaction will\n * extend lines by adding points to the end of the coordinates array.\n * @param {!module:ol/Feature} feature Feature to be extended.\n * @api\n */\nDraw.prototype.extend = function(feature) {\n  const geometry = feature.getGeometry();\n  const lineString = /** @type {module:ol/geom/LineString} */ (geometry);\n  this.sketchFeature_ = feature;\n  this.sketchCoords_ = lineString.getCoordinates();\n  const last = this.sketchCoords_[this.sketchCoords_.length - 1];\n  this.finishCoordinate_ = last.slice();\n  this.sketchCoords_.push(last.slice());\n  this.updateSketchFeatures_();\n  this.dispatchEvent(new DrawEvent(DrawEventType.DRAWSTART, this.sketchFeature_));\n};\n\n\n/**\n * @inheritDoc\n */\nDraw.prototype.shouldStopEvent = FALSE;\n\n\n/**\n * Redraw the sketch features.\n * @private\n */\nDraw.prototype.updateSketchFeatures_ = function() {\n  const sketchFeatures = [];\n  if (this.sketchFeature_) {\n    sketchFeatures.push(this.sketchFeature_);\n  }\n  if (this.sketchLine_) {\n    sketchFeatures.push(this.sketchLine_);\n  }\n  if (this.sketchPoint_) {\n    sketchFeatures.push(this.sketchPoint_);\n  }\n  const overlaySource = this.overlay_.getSource();\n  overlaySource.clear(true);\n  overlaySource.addFeatures(sketchFeatures);\n};\n\n\n/**\n * @private\n */\nDraw.prototype.updateState_ = function() {\n  const map = this.getMap();\n  const active = this.getActive();\n  if (!map || !active) {\n    this.abortDrawing_();\n  }\n  this.overlay_.setMap(active ? map : null);\n};\n\n\n/**\n * Create a `geometryFunction` for `type: 'Circle'` that will create a regular\n * polygon with a user specified number of sides and start angle instead of an\n * `module:ol/geom/Circle~Circle` geometry.\n * @param {number=} opt_sides Number of sides of the regular polygon. Default is\n *     32.\n * @param {number=} opt_angle Angle of the first point in radians. 0 means East.\n *     Default is the angle defined by the heading from the center of the\n *     regular polygon to the current pointer position.\n * @return {module:ol/interaction/Draw~GeometryFunction} Function that draws a\n *     polygon.\n * @api\n */\nexport function createRegularPolygon(opt_sides, opt_angle) {\n  return function(coordinates, opt_geometry) {\n    const center = coordinates[0];\n    const end = coordinates[1];\n    const radius = Math.sqrt(\n      squaredCoordinateDistance(center, end));\n    const geometry = opt_geometry ? /** @type {module:ol/geom/Polygon} */ (opt_geometry) :\n      fromCircle(new Circle(center), opt_sides);\n    const angle = opt_angle ? opt_angle :\n      Math.atan((end[1] - center[1]) / (end[0] - center[0]));\n    makeRegular(geometry, center, radius, angle);\n    return geometry;\n  };\n}\n\n\n/**\n * Create a `geometryFunction` that will create a box-shaped polygon (aligned\n * with the coordinate system axes).  Use this with the draw interaction and\n * `type: 'Circle'` to return a box instead of a circle geometry.\n * @return {module:ol/interaction/Draw~GeometryFunction} Function that draws a box-shaped polygon.\n * @api\n */\nexport function createBox() {\n  return (\n    function(coordinates, opt_geometry) {\n      const extent = boundingExtent(coordinates);\n      const geometry = opt_geometry || new Polygon(null);\n      geometry.setCoordinates([[\n        getBottomLeft(extent),\n        getBottomRight(extent),\n        getTopRight(extent),\n        getTopLeft(extent),\n        getBottomLeft(extent)\n      ]]);\n      return geometry;\n    }\n  );\n}\n\n\n/**\n * Get the drawing mode.  The mode for mult-part geometries is the same as for\n * their single-part cousins.\n * @param {module:ol/geom/GeometryType} type Geometry type.\n * @return {module:ol/interaction/Draw~Mode} Drawing mode.\n */\nfunction getMode(type) {\n  let mode;\n  if (type === GeometryType.POINT ||\n      type === GeometryType.MULTI_POINT) {\n    mode = Mode.POINT;\n  } else if (type === GeometryType.LINE_STRING ||\n      type === GeometryType.MULTI_LINE_STRING) {\n    mode = Mode.LINE_STRING;\n  } else if (type === GeometryType.POLYGON ||\n      type === GeometryType.MULTI_POLYGON) {\n    mode = Mode.POLYGON;\n  } else if (type === GeometryType.CIRCLE) {\n    mode = Mode.CIRCLE;\n  }\n  return (\n    /** @type {!module:ol/interaction/Draw~Mode} */ (mode)\n  );\n}\n\n\nexport default Draw;\n","/**\n * @module ol/style/Style\n */\n\n/**\n * Feature styles.\n *\n * If no style is defined, the following default style is used:\n * ```js\n *  import {Fill, Stroke, Circle, Style} from 'ol/style';\n *\n *  var fill = new Fill({\n *    color: 'rgba(255,255,255,0.4)'\n *  });\n *  var stroke = new Stroke({\n *    color: '#3399CC',\n *    width: 1.25\n *  });\n *  var styles = [\n *    new Style({\n *      image: new Circle({\n *        fill: fill,\n *        stroke: stroke,\n *        radius: 5\n *      }),\n *      fill: fill,\n *      stroke: stroke\n *    })\n *  ];\n * ```\n *\n * A separate editing style has the following defaults:\n * ```js\n *  import {Fill, Stroke, Circle, Style} from 'ol/style';\n *  import GeometryType from 'ol/geom/GeometryType';\n *\n *  var white = [255, 255, 255, 1];\n *  var blue = [0, 153, 255, 1];\n *  var width = 3;\n *  styles[GeometryType.POLYGON] = [\n *    new Style({\n *      fill: new Fill({\n *        color: [255, 255, 255, 0.5]\n *      })\n *    })\n *  ];\n *  styles[GeometryType.MULTI_POLYGON] =\n *      styles[GeometryType.POLYGON];\n *  styles[GeometryType.LINE_STRING] = [\n *    new Style({\n *      stroke: new Stroke({\n *        color: white,\n *        width: width + 2\n *      })\n *    }),\n *    new Style({\n *      stroke: new Stroke({\n *        color: blue,\n *        width: width\n *      })\n *    })\n *  ];\n *  styles[GeometryType.MULTI_LINE_STRING] =\n *      styles[GeometryType.LINE_STRING];\n *  styles[GeometryType.POINT] = [\n *    new Style({\n *      image: new Circle({\n *        radius: width * 2,\n *        fill: new Fill({\n *          color: blue\n *        }),\n *        stroke: new Stroke({\n *          color: white,\n *          width: width / 2\n *        })\n *      }),\n *      zIndex: Infinity\n *    })\n *  ];\n *  styles[GeometryType.MULTI_POINT] =\n *      styles[GeometryType.POINT];\n *  styles[GeometryType.GEOMETRY_COLLECTION] =\n *      styles[GeometryType.POLYGON].concat(\n *          styles[GeometryType.LINE_STRING],\n *          styles[GeometryType.POINT]\n *      );\n * ```\n */\nimport {assert} from '../asserts.js';\nimport GeometryType from '../geom/GeometryType.js';\nimport CircleStyle from '../style/Circle.js';\nimport Fill from '../style/Fill.js';\nimport Stroke from '../style/Stroke.js';\n\n\n/**\n * A function that takes an {@link module:ol/Feature} and a `{number}`\n * representing the view's resolution. The function should return a\n * {@link module:ol/style/Style} or an array of them. This way e.g. a\n * vector layer can be styled.\n *\n * @typedef {function((module:ol/Feature|module:ol/render/Feature), number):\n *     (module:ol/style/Style|Array.<module:ol/style/Style>)} StyleFunction\n */\n\n\n/**\n * A function that takes an {@link module:ol/Feature} as argument and returns an\n * {@link module:ol/geom/Geometry} that will be rendered and styled for the feature.\n *\n * @typedef {function((module:ol/Feature|module:ol/render/Feature)):\n *     (module:ol/geom/Geometry|module:ol/render/Feature|undefined)} GeometryFunction\n */\n\n\n/**\n * Custom renderer function. Takes two arguments:\n *\n * 1. The pixel coordinates of the geometry in GeoJSON notation.\n * 2. The {@link module:ol/render~State} of the layer renderer.\n *\n * @typedef {function((module:ol/coordinate~Coordinate|Array<module:ol/coordinate~Coordinate>|Array.<Array.<module:ol/coordinate~Coordinate>>),module:ol/render~State)}\n * RenderFunction\n */\n\n\n/**\n * @typedef {Object} Options\n * @property {string|module:ol/geom/Geometry|module:ol/style/Style~GeometryFunction} [geometry] Feature property or geometry\n * or function returning a geometry to render for this style.\n * @property {module:ol/style/Fill} [fill] Fill style.\n * @property {module:ol/style/Image} [image] Image style.\n * @property {module:ol/style/Style~RenderFunction} [renderer] Custom renderer. When configured, `fill`, `stroke` and `image` will be\n * ignored, and the provided function will be called with each render frame for each geometry.\n * @property {module:ol/style/Stroke} [stroke] Stroke style.\n * @property {module:ol/style/Text} [text] Text style.\n * @property {number} [zIndex] Z index.\n */\n\n\n/**\n * @classdesc\n * Container for vector feature rendering styles. Any changes made to the style\n * or its children through `set*()` methods will not take effect until the\n * feature or layer that uses the style is re-rendered.\n *\n * @constructor\n * @struct\n * @param {module:ol/style/Style~Options=} opt_options Style options.\n * @api\n */\nconst Style = function(opt_options) {\n\n  const options = opt_options || {};\n\n  /**\n   * @private\n   * @type {string|module:ol/geom/Geometry|module:ol/style/Style~GeometryFunction}\n   */\n  this.geometry_ = null;\n\n  /**\n   * @private\n   * @type {!module:ol/style/Style~GeometryFunction}\n   */\n  this.geometryFunction_ = defaultGeometryFunction;\n\n  if (options.geometry !== undefined) {\n    this.setGeometry(options.geometry);\n  }\n\n  /**\n   * @private\n   * @type {module:ol/style/Fill}\n   */\n  this.fill_ = options.fill !== undefined ? options.fill : null;\n\n  /**\n     * @private\n     * @type {module:ol/style/Image}\n     */\n  this.image_ = options.image !== undefined ? options.image : null;\n\n  /**\n   * @private\n   * @type {module:ol/style/Style~RenderFunction|null}\n   */\n  this.renderer_ = options.renderer !== undefined ? options.renderer : null;\n\n  /**\n   * @private\n   * @type {module:ol/style/Stroke}\n   */\n  this.stroke_ = options.stroke !== undefined ? options.stroke : null;\n\n  /**\n   * @private\n   * @type {module:ol/style/Text}\n   */\n  this.text_ = options.text !== undefined ? options.text : null;\n\n  /**\n   * @private\n   * @type {number|undefined}\n   */\n  this.zIndex_ = options.zIndex;\n\n};\n\n\n/**\n * Clones the style.\n * @return {module:ol/style/Style} The cloned style.\n * @api\n */\nStyle.prototype.clone = function() {\n  let geometry = this.getGeometry();\n  if (geometry && geometry.clone) {\n    geometry = geometry.clone();\n  }\n  return new Style({\n    geometry: geometry,\n    fill: this.getFill() ? this.getFill().clone() : undefined,\n    image: this.getImage() ? this.getImage().clone() : undefined,\n    stroke: this.getStroke() ? this.getStroke().clone() : undefined,\n    text: this.getText() ? this.getText().clone() : undefined,\n    zIndex: this.getZIndex()\n  });\n};\n\n\n/**\n * Get the custom renderer function that was configured with\n * {@link #setRenderer} or the `renderer` constructor option.\n * @return {module:ol/style/Style~RenderFunction|null} Custom renderer function.\n * @api\n */\nStyle.prototype.getRenderer = function() {\n  return this.renderer_;\n};\n\n\n/**\n * Sets a custom renderer function for this style. When set, `fill`, `stroke`\n * and `image` options of the style will be ignored.\n * @param {module:ol/style/Style~RenderFunction|null} renderer Custom renderer function.\n * @api\n */\nStyle.prototype.setRenderer = function(renderer) {\n  this.renderer_ = renderer;\n};\n\n\n/**\n * Get the geometry to be rendered.\n * @return {string|module:ol/geom/Geometry|module:ol/style/Style~GeometryFunction}\n * Feature property or geometry or function that returns the geometry that will\n * be rendered with this style.\n * @api\n */\nStyle.prototype.getGeometry = function() {\n  return this.geometry_;\n};\n\n\n/**\n * Get the function used to generate a geometry for rendering.\n * @return {!module:ol/style/Style~GeometryFunction} Function that is called with a feature\n * and returns the geometry to render instead of the feature's geometry.\n * @api\n */\nStyle.prototype.getGeometryFunction = function() {\n  return this.geometryFunction_;\n};\n\n\n/**\n * Get the fill style.\n * @return {module:ol/style/Fill} Fill style.\n * @api\n */\nStyle.prototype.getFill = function() {\n  return this.fill_;\n};\n\n\n/**\n * Set the fill style.\n * @param {module:ol/style/Fill} fill Fill style.\n * @api\n */\nStyle.prototype.setFill = function(fill) {\n  this.fill_ = fill;\n};\n\n\n/**\n * Get the image style.\n * @return {module:ol/style/Image} Image style.\n * @api\n */\nStyle.prototype.getImage = function() {\n  return this.image_;\n};\n\n\n/**\n * Set the image style.\n * @param {module:ol/style/Image} image Image style.\n * @api\n */\nStyle.prototype.setImage = function(image) {\n  this.image_ = image;\n};\n\n\n/**\n * Get the stroke style.\n * @return {module:ol/style/Stroke} Stroke style.\n * @api\n */\nStyle.prototype.getStroke = function() {\n  return this.stroke_;\n};\n\n\n/**\n * Set the stroke style.\n * @param {module:ol/style/Stroke} stroke Stroke style.\n * @api\n */\nStyle.prototype.setStroke = function(stroke) {\n  this.stroke_ = stroke;\n};\n\n\n/**\n * Get the text style.\n * @return {module:ol/style/Text} Text style.\n * @api\n */\nStyle.prototype.getText = function() {\n  return this.text_;\n};\n\n\n/**\n * Set the text style.\n * @param {module:ol/style/Text} text Text style.\n * @api\n */\nStyle.prototype.setText = function(text) {\n  this.text_ = text;\n};\n\n\n/**\n * Get the z-index for the style.\n * @return {number|undefined} ZIndex.\n * @api\n */\nStyle.prototype.getZIndex = function() {\n  return this.zIndex_;\n};\n\n\n/**\n * Set a geometry that is rendered instead of the feature's geometry.\n *\n * @param {string|module:ol/geom/Geometry|module:ol/style/Style~GeometryFunction} geometry\n *     Feature property or geometry or function returning a geometry to render\n *     for this style.\n * @api\n */\nStyle.prototype.setGeometry = function(geometry) {\n  if (typeof geometry === 'function') {\n    this.geometryFunction_ = geometry;\n  } else if (typeof geometry === 'string') {\n    this.geometryFunction_ = function(feature) {\n      return (\n        /** @type {module:ol/geom/Geometry} */ (feature.get(geometry))\n      );\n    };\n  } else if (!geometry) {\n    this.geometryFunction_ = defaultGeometryFunction;\n  } else if (geometry !== undefined) {\n    this.geometryFunction_ = function() {\n      return (\n        /** @type {module:ol/geom/Geometry} */ (geometry)\n      );\n    };\n  }\n  this.geometry_ = geometry;\n};\n\n\n/**\n * Set the z-index.\n *\n * @param {number|undefined} zIndex ZIndex.\n * @api\n */\nStyle.prototype.setZIndex = function(zIndex) {\n  this.zIndex_ = zIndex;\n};\n\n\n/**\n * Convert the provided object into a style function.  Functions passed through\n * unchanged.  Arrays of module:ol/style/Style or single style objects wrapped in a\n * new style function.\n * @param {module:ol/style/Style~StyleFunction|Array.<module:ol/style/Style>|module:ol/style/Style} obj\n *     A style function, a single style, or an array of styles.\n * @return {module:ol/style/Style~StyleFunction} A style function.\n */\nexport function toFunction(obj) {\n  let styleFunction;\n\n  if (typeof obj === 'function') {\n    styleFunction = obj;\n  } else {\n    /**\n     * @type {Array.<module:ol/style/Style>}\n     */\n    let styles;\n    if (Array.isArray(obj)) {\n      styles = obj;\n    } else {\n      assert(obj instanceof Style,\n        41); // Expected an `module:ol/style/Style~Style` or an array of `module:ol/style/Style~Style`\n      styles = [obj];\n    }\n    styleFunction = function() {\n      return styles;\n    };\n  }\n  return styleFunction;\n}\n\n\n/**\n * @type {Array.<module:ol/style/Style>}\n */\nlet defaultStyles = null;\n\n\n/**\n * @param {module:ol/Feature|module:ol/render/Feature} feature Feature.\n * @param {number} resolution Resolution.\n * @return {Array.<module:ol/style/Style>} Style.\n */\nexport function createDefaultStyle(feature, resolution) {\n  // We don't use an immediately-invoked function\n  // and a closure so we don't get an error at script evaluation time in\n  // browsers that do not support Canvas. (module:ol/style/Circle~CircleStyle does\n  // canvas.getContext('2d') at construction time, which will cause an.error\n  // in such browsers.)\n  if (!defaultStyles) {\n    const fill = new Fill({\n      color: 'rgba(255,255,255,0.4)'\n    });\n    const stroke = new Stroke({\n      color: '#3399CC',\n      width: 1.25\n    });\n    defaultStyles = [\n      new Style({\n        image: new CircleStyle({\n          fill: fill,\n          stroke: stroke,\n          radius: 5\n        }),\n        fill: fill,\n        stroke: stroke\n      })\n    ];\n  }\n  return defaultStyles;\n}\n\n\n/**\n * Default styles for editing features.\n * @return {Object.<module:ol/geom/GeometryType, Array.<module:ol/style/Style>>} Styles\n */\nexport function createEditingStyle() {\n  /** @type {Object.<module:ol/geom/GeometryType, Array.<module:ol/style/Style>>} */\n  const styles = {};\n  const white = [255, 255, 255, 1];\n  const blue = [0, 153, 255, 1];\n  const width = 3;\n  styles[GeometryType.POLYGON] = [\n    new Style({\n      fill: new Fill({\n        color: [255, 255, 255, 0.5]\n      })\n    })\n  ];\n  styles[GeometryType.MULTI_POLYGON] =\n      styles[GeometryType.POLYGON];\n\n  styles[GeometryType.LINE_STRING] = [\n    new Style({\n      stroke: new Stroke({\n        color: white,\n        width: width + 2\n      })\n    }),\n    new Style({\n      stroke: new Stroke({\n        color: blue,\n        width: width\n      })\n    })\n  ];\n  styles[GeometryType.MULTI_LINE_STRING] =\n      styles[GeometryType.LINE_STRING];\n\n  styles[GeometryType.CIRCLE] =\n      styles[GeometryType.POLYGON].concat(\n        styles[GeometryType.LINE_STRING]\n      );\n\n\n  styles[GeometryType.POINT] = [\n    new Style({\n      image: new CircleStyle({\n        radius: width * 2,\n        fill: new Fill({\n          color: blue\n        }),\n        stroke: new Stroke({\n          color: white,\n          width: width / 2\n        })\n      }),\n      zIndex: Infinity\n    })\n  ];\n  styles[GeometryType.MULTI_POINT] =\n      styles[GeometryType.POINT];\n\n  styles[GeometryType.GEOMETRY_COLLECTION] =\n      styles[GeometryType.POLYGON].concat(\n        styles[GeometryType.LINE_STRING],\n        styles[GeometryType.POINT]\n      );\n\n  return styles;\n}\n\n\n/**\n * Function that is called with a feature and returns its default geometry.\n * @param {module:ol/Feature|module:ol/render/Feature} feature Feature to get the geometry for.\n * @return {module:ol/geom/Geometry|module:ol/render/Feature|undefined} Geometry to render.\n */\nfunction defaultGeometryFunction(feature) {\n  return feature.getGeometry();\n}\n\nexport default Style;\n","/**\n * @module ol/layer/Layer\n */\nimport {listen, unlistenByKey} from '../events.js';\nimport EventType from '../events/EventType.js';\nimport {getUid, inherits} from '../util.js';\nimport {getChangeEventType} from '../Object.js';\nimport BaseLayer from '../layer/Base.js';\nimport LayerProperty from '../layer/Property.js';\nimport {assign} from '../obj.js';\nimport RenderEventType from '../render/EventType.js';\nimport SourceState from '../source/State.js';\n\n\n/**\n * @typedef {Object} Options\n * @property {number} [opacity=1] Opacity (0, 1).\n * @property {boolean} [visible=true] Visibility.\n * @property {module:ol/extent~Extent} [extent] The bounding extent for layer rendering.  The layer will not be\n * rendered outside of this extent.\n * @property {number} [zIndex=0] The z-index for layer rendering.  At rendering time, the layers\n * will be ordered, first by Z-index and then by position.\n * @property {number} [minResolution] The minimum resolution (inclusive) at which this layer will be\n * visible.\n * @property {number} [maxResolution] The maximum resolution (exclusive) below which this layer will\n * be visible.\n * @property {module:ol/source/Source} [source] Source for this layer.  If not provided to the constructor,\n * the source can be set by calling {@link module:ol/layer/Layer#setSource layer.setSource(source)} after\n * construction.\n */\n\n\n/**\n * @typedef {Object} State\n * @property {module:ol/layer/Layer} layer\n * @property {number} opacity\n * @property {module:ol/source/Source~State} sourceState\n * @property {boolean} visible\n * @property {boolean} managed\n * @property {module:ol/extent~Extent} [extent]\n * @property {number} zIndex\n * @property {number} maxResolution\n * @property {number} minResolution\n */\n\n\n/**\n * @classdesc\n * Abstract base class; normally only used for creating subclasses and not\n * instantiated in apps.\n * A visual representation of raster or vector map data.\n * Layers group together those properties that pertain to how the data is to be\n * displayed, irrespective of the source of that data.\n *\n * Layers are usually added to a map with {@link module:ol/Map#addLayer}. Components\n * like {@link module:ol/interaction/Select~Select} use unmanaged layers\n * internally. These unmanaged layers are associated with the map using\n * {@link module:ol/layer/Layer~Layer#setMap} instead.\n *\n * A generic `change` event is fired when the state of the source changes.\n *\n * @constructor\n * @abstract\n * @extends {module:ol/layer/Base}\n * @fires module:ol/render/Event~RenderEvent\n * @param {module:ol/layer/Layer~Options} options Layer options.\n * @api\n */\nconst Layer = function(options) {\n\n  const baseOptions = assign({}, options);\n  delete baseOptions.source;\n\n  BaseLayer.call(this, /** @type {module:ol/layer/Base~Options} */ (baseOptions));\n\n  /**\n   * @private\n   * @type {?module:ol/events~EventsKey}\n   */\n  this.mapPrecomposeKey_ = null;\n\n  /**\n   * @private\n   * @type {?module:ol/events~EventsKey}\n   */\n  this.mapRenderKey_ = null;\n\n  /**\n   * @private\n   * @type {?module:ol/events~EventsKey}\n   */\n  this.sourceChangeKey_ = null;\n\n  if (options.map) {\n    this.setMap(options.map);\n  }\n\n  listen(this,\n    getChangeEventType(LayerProperty.SOURCE),\n    this.handleSourcePropertyChange_, this);\n\n  const source = options.source ? options.source : null;\n  this.setSource(source);\n};\n\ninherits(Layer, BaseLayer);\n\n\n/**\n * Return `true` if the layer is visible, and if the passed resolution is\n * between the layer's minResolution and maxResolution. The comparison is\n * inclusive for `minResolution` and exclusive for `maxResolution`.\n * @param {module:ol/layer/Layer~State} layerState Layer state.\n * @param {number} resolution Resolution.\n * @return {boolean} The layer is visible at the given resolution.\n */\nexport function visibleAtResolution(layerState, resolution) {\n  return layerState.visible && resolution >= layerState.minResolution &&\n      resolution < layerState.maxResolution;\n}\n\n\n/**\n * @inheritDoc\n */\nLayer.prototype.getLayersArray = function(opt_array) {\n  const array = opt_array ? opt_array : [];\n  array.push(this);\n  return array;\n};\n\n\n/**\n * @inheritDoc\n */\nLayer.prototype.getLayerStatesArray = function(opt_states) {\n  const states = opt_states ? opt_states : [];\n  states.push(this.getLayerState());\n  return states;\n};\n\n\n/**\n * Get the layer source.\n * @return {module:ol/source/Source} The layer source (or `null` if not yet set).\n * @observable\n * @api\n */\nLayer.prototype.getSource = function() {\n  const source = this.get(LayerProperty.SOURCE);\n  return (\n    /** @type {module:ol/source/Source} */ (source) || null\n  );\n};\n\n\n/**\n  * @inheritDoc\n  */\nLayer.prototype.getSourceState = function() {\n  const source = this.getSource();\n  return !source ? SourceState.UNDEFINED : source.getState();\n};\n\n\n/**\n * @private\n */\nLayer.prototype.handleSourceChange_ = function() {\n  this.changed();\n};\n\n\n/**\n * @private\n */\nLayer.prototype.handleSourcePropertyChange_ = function() {\n  if (this.sourceChangeKey_) {\n    unlistenByKey(this.sourceChangeKey_);\n    this.sourceChangeKey_ = null;\n  }\n  const source = this.getSource();\n  if (source) {\n    this.sourceChangeKey_ = listen(source,\n      EventType.CHANGE, this.handleSourceChange_, this);\n  }\n  this.changed();\n};\n\n\n/**\n * Sets the layer to be rendered on top of other layers on a map. The map will\n * not manage this layer in its layers collection, and the callback in\n * {@link module:ol/Map#forEachLayerAtPixel} will receive `null` as layer. This\n * is useful for temporary layers. To remove an unmanaged layer from the map,\n * use `#setMap(null)`.\n *\n * To add the layer to a map and have it managed by the map, use\n * {@link module:ol/Map#addLayer} instead.\n * @param {module:ol/PluggableMap} map Map.\n * @api\n */\nLayer.prototype.setMap = function(map) {\n  if (this.mapPrecomposeKey_) {\n    unlistenByKey(this.mapPrecomposeKey_);\n    this.mapPrecomposeKey_ = null;\n  }\n  if (!map) {\n    this.changed();\n  }\n  if (this.mapRenderKey_) {\n    unlistenByKey(this.mapRenderKey_);\n    this.mapRenderKey_ = null;\n  }\n  if (map) {\n    this.mapPrecomposeKey_ = listen(map, RenderEventType.PRECOMPOSE, function(evt) {\n      const layerState = this.getLayerState();\n      layerState.managed = false;\n      layerState.zIndex = Infinity;\n      evt.frameState.layerStatesArray.push(layerState);\n      evt.frameState.layerStates[getUid(this)] = layerState;\n    }, this);\n    this.mapRenderKey_ = listen(this, EventType.CHANGE, map.render, map);\n    this.changed();\n  }\n};\n\n\n/**\n * Set the layer source.\n * @param {module:ol/source/Source} source The layer source.\n * @observable\n * @api\n */\nLayer.prototype.setSource = function(source) {\n  this.set(LayerProperty.SOURCE, source);\n};\nexport default Layer;\n","/**\n * @module ol/layer/Image\n */\nimport {inherits} from '../util.js';\nimport LayerType from '../LayerType.js';\nimport Layer from '../layer/Layer.js';\n\n\n/**\n * @typedef {Object} Options\n * @property {number} [opacity=1] Opacity (0, 1).\n * @property {boolean} [visible=true] Visibility.\n * @property {module:ol/extent~Extent} [extent] The bounding extent for layer rendering.  The layer will not be\n * rendered outside of this extent.\n * @property {number} [zIndex=0] The z-index for layer rendering.  At rendering time, the layers\n * will be ordered, first by Z-index and then by position.\n * @property {number} [minResolution] The minimum resolution (inclusive) at which this layer will be\n * visible.\n * @property {number} [maxResolution] The maximum resolution (exclusive) below which this layer will\n * be visible.\n * @property {module:ol/PluggableMap} [map] Sets the layer as overlay on a map. The map will not manage\n * this layer in its layers collection, and the layer will be rendered on top. This is useful for\n * temporary layers. The standard way to add a layer to a map and have it managed by the map is to\n * use {@link module:ol/Map#addLayer}.\n * @property {module:ol/source/Image} [source] Source for this layer.\n */\n\n\n/**\n * @classdesc\n * Server-rendered images that are available for arbitrary extents and\n * resolutions.\n * Note that any property set in the options is set as a {@link module:ol/Object~BaseObject}\n * property on the layer object; for example, setting `title: 'My Title'` in the\n * options means that `title` is observable, and has get/set accessors.\n *\n * @constructor\n * @extends {module:ol/layer/Layer}\n * @fires module:ol/render/Event~RenderEvent\n * @param {module:ol/layer/Image~Options=} opt_options Layer options.\n * @api\n */\nconst ImageLayer = function(opt_options) {\n  const options = opt_options ? opt_options : {};\n  Layer.call(this,  /** @type {module:ol/layer/Layer~Options} */ (options));\n\n  /**\n   * The layer type.\n   * @protected\n   * @type {module:ol/LayerType}\n   */\n  this.type = LayerType.IMAGE;\n\n};\n\ninherits(ImageLayer, Layer);\n\n\n/**\n * Return the associated {@link module:ol/source/Image source} of the image layer.\n * @function\n * @return {module:ol/source/Image} Source.\n * @api\n */\nImageLayer.prototype.getSource;\nexport default ImageLayer;\n","/**\n * @module ol/events/EventTarget\n */\nimport {inherits} from '../util.js';\nimport Disposable from '../Disposable.js';\nimport {unlistenAll} from '../events.js';\nimport {UNDEFINED} from '../functions.js';\nimport Event from '../events/Event.js';\n\n\n/**\n * @typedef {EventTarget|module:ol/events/EventTarget} EventTargetLike\n */\n\n\n/**\n * @classdesc\n * A simplified implementation of the W3C DOM Level 2 EventTarget interface.\n * @see {@link https://www.w3.org/TR/2000/REC-DOM-Level-2-Events-20001113/events.html#Events-EventTarget}\n *\n * There are two important simplifications compared to the specification:\n *\n * 1. The handling of `useCapture` in `addEventListener` and\n *    `removeEventListener`. There is no real capture model.\n * 2. The handling of `stopPropagation` and `preventDefault` on `dispatchEvent`.\n *    There is no event target hierarchy. When a listener calls\n *    `stopPropagation` or `preventDefault` on an event object, it means that no\n *    more listeners after this one will be called. Same as when the listener\n *    returns false.\n *\n * @constructor\n * @extends {module:ol/Disposable}\n */\nconst EventTarget = function() {\n\n  Disposable.call(this);\n\n  /**\n   * @private\n   * @type {!Object.<string, number>}\n   */\n  this.pendingRemovals_ = {};\n\n  /**\n   * @private\n   * @type {!Object.<string, number>}\n   */\n  this.dispatching_ = {};\n\n  /**\n   * @private\n   * @type {!Object.<string, Array.<module:ol/events~ListenerFunction>>}\n   */\n  this.listeners_ = {};\n\n};\n\ninherits(EventTarget, Disposable);\n\n\n/**\n * @param {string} type Type.\n * @param {module:ol/events~ListenerFunction} listener Listener.\n */\nEventTarget.prototype.addEventListener = function(type, listener) {\n  let listeners = this.listeners_[type];\n  if (!listeners) {\n    listeners = this.listeners_[type] = [];\n  }\n  if (listeners.indexOf(listener) === -1) {\n    listeners.push(listener);\n  }\n};\n\n\n/**\n * @param {{type: string,\n *     target: (EventTarget|module:ol/events/EventTarget|undefined)}|module:ol/events/Event|\n *     string} event Event or event type.\n * @return {boolean|undefined} `false` if anyone called preventDefault on the\n *     event object or if any of the listeners returned false.\n */\nEventTarget.prototype.dispatchEvent = function(event) {\n  const evt = typeof event === 'string' ? new Event(event) : event;\n  const type = evt.type;\n  evt.target = this;\n  const listeners = this.listeners_[type];\n  let propagate;\n  if (listeners) {\n    if (!(type in this.dispatching_)) {\n      this.dispatching_[type] = 0;\n      this.pendingRemovals_[type] = 0;\n    }\n    ++this.dispatching_[type];\n    for (let i = 0, ii = listeners.length; i < ii; ++i) {\n      if (listeners[i].call(this, evt) === false || evt.propagationStopped) {\n        propagate = false;\n        break;\n      }\n    }\n    --this.dispatching_[type];\n    if (this.dispatching_[type] === 0) {\n      let pendingRemovals = this.pendingRemovals_[type];\n      delete this.pendingRemovals_[type];\n      while (pendingRemovals--) {\n        this.removeEventListener(type, UNDEFINED);\n      }\n      delete this.dispatching_[type];\n    }\n    return propagate;\n  }\n};\n\n\n/**\n * @inheritDoc\n */\nEventTarget.prototype.disposeInternal = function() {\n  unlistenAll(this);\n};\n\n\n/**\n * Get the listeners for a specified event type. Listeners are returned in the\n * order that they will be called in.\n *\n * @param {string} type Type.\n * @return {Array.<module:ol/events~ListenerFunction>} Listeners.\n */\nEventTarget.prototype.getListeners = function(type) {\n  return this.listeners_[type];\n};\n\n\n/**\n * @param {string=} opt_type Type. If not provided,\n *     `true` will be returned if this EventTarget has any listeners.\n * @return {boolean} Has listeners.\n */\nEventTarget.prototype.hasListener = function(opt_type) {\n  return opt_type ?\n    opt_type in this.listeners_ :\n    Object.keys(this.listeners_).length > 0;\n};\n\n\n/**\n * @param {string} type Type.\n * @param {module:ol/events~ListenerFunction} listener Listener.\n */\nEventTarget.prototype.removeEventListener = function(type, listener) {\n  const listeners = this.listeners_[type];\n  if (listeners) {\n    const index = listeners.indexOf(listener);\n    if (type in this.pendingRemovals_) {\n      // make listener a no-op, and remove later in #dispatchEvent()\n      listeners[index] = UNDEFINED;\n      ++this.pendingRemovals_[type];\n    } else {\n      listeners.splice(index, 1);\n      if (listeners.length === 0) {\n        delete this.listeners_[type];\n      }\n    }\n  }\n};\nexport default EventTarget;\n","/**\n * @module ol/Tile\n */\nimport {inherits} from './util.js';\nimport TileState from './TileState.js';\nimport {easeIn} from './easing.js';\nimport EventTarget from './events/EventTarget.js';\nimport EventType from './events/EventType.js';\n\n\n/**\n * A function that takes an {@link module:ol/Tile} for the tile and a\n * `{string}` for the url as arguments.\n *\n * @typedef {function(module:ol/Tile, string)} LoadFunction\n * @api\n */\n\n/**\n * {@link module:ol/source/Tile~Tile} sources use a function of this type to get\n * the url that provides a tile for a given tile coordinate.\n *\n * This function takes an {@link module:ol/tilecoord~TileCoord} for the tile\n * coordinate, a `{number}` representing the pixel ratio and a\n * {@link module:ol/proj/Projection} for the projection  as arguments\n * and returns a `{string}` representing the tile URL, or undefined if no tile\n * should be requested for the passed tile coordinate.\n *\n * @typedef {function(module:ol/tilecoord~TileCoord, number,\n *           module:ol/proj/Projection): (string|undefined)} UrlFunction\n * @api\n */\n\n\n/**\n * @typedef {Object} Options\n * @property {number} [transition=250] A duration for tile opacity\n * transitions in milliseconds. A duration of 0 disables the opacity transition.\n * @api\n */\n\n\n/**\n * @classdesc\n * Base class for tiles.\n *\n * @constructor\n * @abstract\n * @extends {module:ol/events/EventTarget}\n * @param {module:ol/tilecoord~TileCoord} tileCoord Tile coordinate.\n * @param {module:ol/TileState} state State.\n * @param {module:ol/Tile~Options=} opt_options Tile options.\n */\nconst Tile = function(tileCoord, state, opt_options) {\n  EventTarget.call(this);\n\n  const options = opt_options ? opt_options : {};\n\n  /**\n   * @type {module:ol/tilecoord~TileCoord}\n   */\n  this.tileCoord = tileCoord;\n\n  /**\n   * @protected\n   * @type {module:ol/TileState}\n   */\n  this.state = state;\n\n  /**\n   * An \"interim\" tile for this tile. The interim tile may be used while this\n   * one is loading, for \"smooth\" transitions when changing params/dimensions\n   * on the source.\n   * @type {module:ol/Tile}\n   */\n  this.interimTile = null;\n\n  /**\n   * A key assigned to the tile. This is used by the tile source to determine\n   * if this tile can effectively be used, or if a new tile should be created\n   * and this one be used as an interim tile for this new tile.\n   * @type {string}\n   */\n  this.key = '';\n\n  /**\n   * The duration for the opacity transition.\n   * @type {number}\n   */\n  this.transition_ = options.transition === undefined ? 250 : options.transition;\n\n  /**\n   * Lookup of start times for rendering transitions.  If the start time is\n   * equal to -1, the transition is complete.\n   * @type {Object.<number, number>}\n   */\n  this.transitionStarts_ = {};\n\n};\n\ninherits(Tile, EventTarget);\n\n\n/**\n * @protected\n */\nTile.prototype.changed = function() {\n  this.dispatchEvent(EventType.CHANGE);\n};\n\n\n/**\n * @return {string} Key.\n */\nTile.prototype.getKey = function() {\n  return this.key + '/' + this.tileCoord;\n};\n\n/**\n * Get the interim tile most suitable for rendering using the chain of interim\n * tiles. This corresponds to the  most recent tile that has been loaded, if no\n * such tile exists, the original tile is returned.\n * @return {!module:ol/Tile} Best tile for rendering.\n */\nTile.prototype.getInterimTile = function() {\n  if (!this.interimTile) {\n    //empty chain\n    return this;\n  }\n  let tile = this.interimTile;\n\n  // find the first loaded tile and return it. Since the chain is sorted in\n  // decreasing order of creation time, there is no need to search the remainder\n  // of the list (all those tiles correspond to older requests and will be\n  // cleaned up by refreshInterimChain)\n  do {\n    if (tile.getState() == TileState.LOADED) {\n      return tile;\n    }\n    tile = tile.interimTile;\n  } while (tile);\n\n  // we can not find a better tile\n  return this;\n};\n\n/**\n * Goes through the chain of interim tiles and discards sections of the chain\n * that are no longer relevant.\n */\nTile.prototype.refreshInterimChain = function() {\n  if (!this.interimTile) {\n    return;\n  }\n\n  let tile = this.interimTile;\n  let prev = this;\n\n  do {\n    if (tile.getState() == TileState.LOADED) {\n      //we have a loaded tile, we can discard the rest of the list\n      //we would could abort any LOADING tile request\n      //older than this tile (i.e. any LOADING tile following this entry in the chain)\n      tile.interimTile = null;\n      break;\n    } else if (tile.getState() == TileState.LOADING) {\n      //keep this LOADING tile any loaded tiles later in the chain are\n      //older than this tile, so we're still interested in the request\n      prev = tile;\n    } else if (tile.getState() == TileState.IDLE) {\n      //the head of the list is the most current tile, we don't need\n      //to start any other requests for this chain\n      prev.interimTile = tile.interimTile;\n    } else {\n      prev = tile;\n    }\n    tile = prev.interimTile;\n  } while (tile);\n};\n\n/**\n * Get the tile coordinate for this tile.\n * @return {module:ol/tilecoord~TileCoord} The tile coordinate.\n * @api\n */\nTile.prototype.getTileCoord = function() {\n  return this.tileCoord;\n};\n\n\n/**\n * @return {module:ol/TileState} State.\n */\nTile.prototype.getState = function() {\n  return this.state;\n};\n\n/**\n * @param {module:ol/TileState} state State.\n */\nTile.prototype.setState = function(state) {\n  this.state = state;\n  this.changed();\n};\n\n/**\n * Load the image or retry if loading previously failed.\n * Loading is taken care of by the tile queue, and calling this method is\n * only needed for preloading or for reloading in case of an error.\n * @abstract\n * @api\n */\nTile.prototype.load = function() {};\n\n/**\n * Get the alpha value for rendering.\n * @param {number} id An id for the renderer.\n * @param {number} time The render frame time.\n * @return {number} A number between 0 and 1.\n */\nTile.prototype.getAlpha = function(id, time) {\n  if (!this.transition_) {\n    return 1;\n  }\n\n  let start = this.transitionStarts_[id];\n  if (!start) {\n    start = time;\n    this.transitionStarts_[id] = start;\n  } else if (start === -1) {\n    return 1;\n  }\n\n  const delta = time - start + (1000 / 60); // avoid rendering at 0\n  if (delta >= this.transition_) {\n    return 1;\n  }\n  return easeIn(delta / this.transition_);\n};\n\n/**\n * Determine if a tile is in an alpha transition.  A tile is considered in\n * transition if tile.getAlpha() has not yet been called or has been called\n * and returned 1.\n * @param {number} id An id for the renderer.\n * @return {boolean} The tile is in transition.\n */\nTile.prototype.inTransition = function(id) {\n  if (!this.transition_) {\n    return false;\n  }\n  return this.transitionStarts_[id] !== -1;\n};\n\n/**\n * Mark a transition as complete.\n * @param {number} id An id for the renderer.\n */\nTile.prototype.endTransition = function(id) {\n  if (this.transition_) {\n    this.transitionStarts_[id] = -1;\n  }\n};\nexport default Tile;\n","/**\n * @module ol/layer/Property\n */\n\n/**\n * @enum {string}\n */\nexport default {\n  OPACITY: 'opacity',\n  VISIBLE: 'visible',\n  EXTENT: 'extent',\n  Z_INDEX: 'zIndex',\n  MAX_RESOLUTION: 'maxResolution',\n  MIN_RESOLUTION: 'minResolution',\n  SOURCE: 'source'\n};\n","/**\n * @module ol/color\n */\nimport {assert} from './asserts.js';\nimport {clamp} from './math.js';\n\n\n/**\n * A color represented as a short array [red, green, blue, alpha].\n * red, green, and blue should be integers in the range 0..255 inclusive.\n * alpha should be a float in the range 0..1 inclusive. If no alpha value is\n * given then `1` will be used.\n * @typedef {Array.<number>} Color\n * @api\n */\n\n\n/**\n * This RegExp matches # followed by 3, 4, 6, or 8 hex digits.\n * @const\n * @type {RegExp}\n * @private\n */\nconst HEX_COLOR_RE_ = /^#([a-f0-9]{3}|[a-f0-9]{4}(?:[a-f0-9]{2}){0,2})$/i;\n\n\n/**\n * Regular expression for matching potential named color style strings.\n * @const\n * @type {RegExp}\n * @private\n */\nconst NAMED_COLOR_RE_ = /^([a-z]*)$/i;\n\n\n/**\n * Return the color as an rgba string.\n * @param {module:ol/color~Color|string} color Color.\n * @return {string} Rgba string.\n * @api\n */\nexport function asString(color) {\n  if (typeof color === 'string') {\n    return color;\n  } else {\n    return toString(color);\n  }\n}\n\n/**\n * Return named color as an rgba string.\n * @param {string} color Named color.\n * @return {string} Rgb string.\n */\nfunction fromNamed(color) {\n  const el = document.createElement('div');\n  el.style.color = color;\n  if (el.style.color !== '') {\n    document.body.appendChild(el);\n    const rgb = getComputedStyle(el).color;\n    document.body.removeChild(el);\n    return rgb;\n  } else {\n    return '';\n  }\n}\n\n\n/**\n * @param {string} s String.\n * @return {module:ol/color~Color} Color.\n */\nexport const fromString = (\n  function() {\n\n    // We maintain a small cache of parsed strings.  To provide cheap LRU-like\n    // semantics, whenever the cache grows too large we simply delete an\n    // arbitrary 25% of the entries.\n\n    /**\n     * @const\n     * @type {number}\n     */\n    const MAX_CACHE_SIZE = 1024;\n\n    /**\n     * @type {Object.<string, module:ol/color~Color>}\n     */\n    const cache = {};\n\n    /**\n     * @type {number}\n     */\n    let cacheSize = 0;\n\n    return (\n      /**\n       * @param {string} s String.\n       * @return {module:ol/color~Color} Color.\n       */\n      function(s) {\n        let color;\n        if (cache.hasOwnProperty(s)) {\n          color = cache[s];\n        } else {\n          if (cacheSize >= MAX_CACHE_SIZE) {\n            let i = 0;\n            for (const key in cache) {\n              if ((i++ & 3) === 0) {\n                delete cache[key];\n                --cacheSize;\n              }\n            }\n          }\n          color = fromStringInternal_(s);\n          cache[s] = color;\n          ++cacheSize;\n        }\n        return color;\n      }\n    );\n\n  })();\n\n/**\n * Return the color as an array. This function maintains a cache of calculated\n * arrays which means the result should not be modified.\n * @param {module:ol/color~Color|string} color Color.\n * @return {module:ol/color~Color} Color.\n * @api\n */\nexport function asArray(color) {\n  if (Array.isArray(color)) {\n    return color;\n  } else {\n    return fromString(/** @type {string} */ (color));\n  }\n}\n\n/**\n * @param {string} s String.\n * @private\n * @return {module:ol/color~Color} Color.\n */\nfunction fromStringInternal_(s) {\n  let r, g, b, a, color;\n\n  if (NAMED_COLOR_RE_.exec(s)) {\n    s = fromNamed(s);\n  }\n\n  if (HEX_COLOR_RE_.exec(s)) { // hex\n    const n = s.length - 1; // number of hex digits\n    let d; // number of digits per channel\n    if (n <= 4) {\n      d = 1;\n    } else {\n      d = 2;\n    }\n    const hasAlpha = n === 4 || n === 8;\n    r = parseInt(s.substr(1 + 0 * d, d), 16);\n    g = parseInt(s.substr(1 + 1 * d, d), 16);\n    b = parseInt(s.substr(1 + 2 * d, d), 16);\n    if (hasAlpha) {\n      a = parseInt(s.substr(1 + 3 * d, d), 16);\n    } else {\n      a = 255;\n    }\n    if (d == 1) {\n      r = (r << 4) + r;\n      g = (g << 4) + g;\n      b = (b << 4) + b;\n      if (hasAlpha) {\n        a = (a << 4) + a;\n      }\n    }\n    color = [r, g, b, a / 255];\n  } else if (s.indexOf('rgba(') == 0) { // rgba()\n    color = s.slice(5, -1).split(',').map(Number);\n    normalize(color);\n  } else if (s.indexOf('rgb(') == 0) { // rgb()\n    color = s.slice(4, -1).split(',').map(Number);\n    color.push(1);\n    normalize(color);\n  } else {\n    assert(false, 14); // Invalid color\n  }\n  return (\n    /** @type {module:ol/color~Color} */ (color)\n  );\n}\n\n\n/**\n * TODO this function is only used in the test, we probably shouldn't export it\n * @param {module:ol/color~Color} color Color.\n * @return {module:ol/color~Color} Clamped color.\n */\nexport function normalize(color) {\n  color[0] = clamp((color[0] + 0.5) | 0, 0, 255);\n  color[1] = clamp((color[1] + 0.5) | 0, 0, 255);\n  color[2] = clamp((color[2] + 0.5) | 0, 0, 255);\n  color[3] = clamp(color[3], 0, 1);\n  return color;\n}\n\n\n/**\n * @param {module:ol/color~Color} color Color.\n * @return {string} String.\n */\nexport function toString(color) {\n  let r = color[0];\n  if (r != (r | 0)) {\n    r = (r + 0.5) | 0;\n  }\n  let g = color[1];\n  if (g != (g | 0)) {\n    g = (g + 0.5) | 0;\n  }\n  let b = color[2];\n  if (b != (b | 0)) {\n    b = (b + 0.5) | 0;\n  }\n  const a = color[3] === undefined ? 1 : color[3];\n  return 'rgba(' + r + ',' + g + ',' + b + ',' + a + ')';\n}\n","/**\n * @module ol/render/EventType\n */\n\n/**\n * @enum {string}\n */\nexport default {\n  /**\n   * @event module:ol/render/Event~RenderEvent#postcompose\n   * @api\n   */\n  POSTCOMPOSE: 'postcompose',\n  /**\n   * @event module:ol/render/Event~RenderEvent#precompose\n   * @api\n   */\n  PRECOMPOSE: 'precompose',\n  /**\n   * @event module:ol/render/Event~RenderEvent#render\n   * @api\n   */\n  RENDER: 'render'\n};\n","/**\n * @module ol/render/replay\n */\nimport ReplayType from '../render/ReplayType.js';\n\n\n/**\n * @const\n * @type {Array.<module:ol/render/ReplayType>}\n */\nexport const ORDER = [\n  ReplayType.POLYGON,\n  ReplayType.CIRCLE,\n  ReplayType.LINE_STRING,\n  ReplayType.IMAGE,\n  ReplayType.TEXT,\n  ReplayType.DEFAULT\n];\n\n/**\n * @const\n * @enum {number}\n */\nexport const TEXT_ALIGN = {};\nTEXT_ALIGN['left'] = 0;\nTEXT_ALIGN['end'] = 0;\nTEXT_ALIGN['center'] = 0.5;\nTEXT_ALIGN['right'] = 1;\nTEXT_ALIGN['start'] = 1;\nTEXT_ALIGN['top'] = 0;\nTEXT_ALIGN['middle'] = 0.5;\nTEXT_ALIGN['hanging'] = 0.2;\nTEXT_ALIGN['alphabetic'] = 0.8;\nTEXT_ALIGN['ideographic'] = 0.8;\nTEXT_ALIGN['bottom'] = 1;\n","/**\n * @module ol/style/IconOrigin\n */\n\n/**\n * Icon origin. One of 'bottom-left', 'bottom-right', 'top-left', 'top-right'.\n * @enum {string}\n */\nexport default {\n  BOTTOM_LEFT: 'bottom-left',\n  BOTTOM_RIGHT: 'bottom-right',\n  TOP_LEFT: 'top-left',\n  TOP_RIGHT: 'top-right'\n};\n","/**\n * @module ol/ViewProperty\n */\n\n/**\n * @enum {string}\n */\nexport default {\n  CENTER: 'center',\n  RESOLUTION: 'resolution',\n  ROTATION: 'rotation'\n};\n","/**\n * @module ol/tileurlfunction\n */\nimport {assert} from './asserts.js';\nimport {modulo} from './math.js';\nimport {hash as tileCoordHash} from './tilecoord.js';\n\n\n/**\n * @param {string} template Template.\n * @param {module:ol/tilegrid/TileGrid} tileGrid Tile grid.\n * @return {module:ol/Tile~UrlFunction} Tile URL function.\n */\nexport function createFromTemplate(template, tileGrid) {\n  const zRegEx = /\\{z\\}/g;\n  const xRegEx = /\\{x\\}/g;\n  const yRegEx = /\\{y\\}/g;\n  const dashYRegEx = /\\{-y\\}/g;\n  return (\n    /**\n     * @param {module:ol/tilecoord~TileCoord} tileCoord Tile Coordinate.\n     * @param {number} pixelRatio Pixel ratio.\n     * @param {module:ol/proj/Projection} projection Projection.\n     * @return {string|undefined} Tile URL.\n     */\n    function(tileCoord, pixelRatio, projection) {\n      if (!tileCoord) {\n        return undefined;\n      } else {\n        return template.replace(zRegEx, tileCoord[0].toString())\n          .replace(xRegEx, tileCoord[1].toString())\n          .replace(yRegEx, function() {\n            const y = -tileCoord[2] - 1;\n            return y.toString();\n          })\n          .replace(dashYRegEx, function() {\n            const z = tileCoord[0];\n            const range = tileGrid.getFullTileRange(z);\n            assert(range, 55); // The {-y} placeholder requires a tile grid with extent\n            const y = range.getHeight() + tileCoord[2];\n            return y.toString();\n          });\n      }\n    }\n  );\n}\n\n\n/**\n * @param {Array.<string>} templates Templates.\n * @param {module:ol/tilegrid/TileGrid} tileGrid Tile grid.\n * @return {module:ol/Tile~UrlFunction} Tile URL function.\n */\nexport function createFromTemplates(templates, tileGrid) {\n  const len = templates.length;\n  const tileUrlFunctions = new Array(len);\n  for (let i = 0; i < len; ++i) {\n    tileUrlFunctions[i] = createFromTemplate(templates[i], tileGrid);\n  }\n  return createFromTileUrlFunctions(tileUrlFunctions);\n}\n\n\n/**\n * @param {Array.<module:ol/Tile~UrlFunction>} tileUrlFunctions Tile URL Functions.\n * @return {module:ol/Tile~UrlFunction} Tile URL function.\n */\nexport function createFromTileUrlFunctions(tileUrlFunctions) {\n  if (tileUrlFunctions.length === 1) {\n    return tileUrlFunctions[0];\n  }\n  return (\n    /**\n     * @param {module:ol/tilecoord~TileCoord} tileCoord Tile Coordinate.\n     * @param {number} pixelRatio Pixel ratio.\n     * @param {module:ol/proj/Projection} projection Projection.\n     * @return {string|undefined} Tile URL.\n     */\n    function(tileCoord, pixelRatio, projection) {\n      if (!tileCoord) {\n        return undefined;\n      } else {\n        const h = tileCoordHash(tileCoord);\n        const index = modulo(h, tileUrlFunctions.length);\n        return tileUrlFunctions[index](tileCoord, pixelRatio, projection);\n      }\n    }\n  );\n}\n\n\n/**\n * @param {module:ol/tilecoord~TileCoord} tileCoord Tile coordinate.\n * @param {number} pixelRatio Pixel ratio.\n * @param {module:ol/proj/Projection} projection Projection.\n * @return {string|undefined} Tile URL.\n */\nexport function nullTileUrlFunction(tileCoord, pixelRatio, projection) {\n  return undefined;\n}\n\n\n/**\n * @param {string} url URL.\n * @return {Array.<string>} Array of urls.\n */\nexport function expandUrl(url) {\n  const urls = [];\n  let match = /\\{([a-z])-([a-z])\\}/.exec(url);\n  if (match) {\n    // char range\n    const startCharCode = match[1].charCodeAt(0);\n    const stopCharCode = match[2].charCodeAt(0);\n    let charCode;\n    for (charCode = startCharCode; charCode <= stopCharCode; ++charCode) {\n      urls.push(url.replace(match[0], String.fromCharCode(charCode)));\n    }\n    return urls;\n  }\n  match = match = /\\{(\\d+)-(\\d+)\\}/.exec(url);\n  if (match) {\n    // number range\n    const stop = parseInt(match[2], 10);\n    for (let i = parseInt(match[1], 10); i <= stop; i++) {\n      urls.push(url.replace(match[0], i.toString()));\n    }\n    return urls;\n  }\n  urls.push(url);\n  return urls;\n}\n","/**\n * Default maximum allowed threshold  (in pixels) for reprojection\n * triangulation.\n * @type {number}\n */\nexport const ERROR_THRESHOLD = 0.5;\n\n/**\n * Enable automatic reprojection of raster sources. Default is `true`.\n * TODO: decide if we want to expose this as a build flag or remove it\n * @type {boolean}\n */\nexport const ENABLE_RASTER_REPROJECTION = true;\n","/**\n * @module ol/extent/Relationship\n */\n\n/**\n * Relationship to an extent.\n * @enum {number}\n */\nexport default {\n  UNKNOWN: 0,\n  INTERSECTING: 1,\n  ABOVE: 2,\n  RIGHT: 4,\n  BELOW: 8,\n  LEFT: 16\n};\n","/**\n * @module ol/geom/MultiPolygon\n */\nimport {inherits} from '../util.js';\nimport {extend} from '../array.js';\nimport {closestSquaredDistanceXY} from '../extent.js';\nimport GeometryLayout from '../geom/GeometryLayout.js';\nimport GeometryType from '../geom/GeometryType.js';\nimport MultiPoint from '../geom/MultiPoint.js';\nimport Polygon from '../geom/Polygon.js';\nimport SimpleGeometry from '../geom/SimpleGeometry.js';\nimport {linearRingss as linearRingssArea} from '../geom/flat/area.js';\nimport {linearRingss as linearRingssCenter} from '../geom/flat/center.js';\nimport {assignClosestMultiArrayPoint, multiArrayMaxSquaredDelta} from '../geom/flat/closest.js';\nimport {linearRingssContainsXY} from '../geom/flat/contains.js';\nimport {deflateMultiCoordinatesArray} from '../geom/flat/deflate.js';\nimport {inflateMultiCoordinatesArray} from '../geom/flat/inflate.js';\nimport {getInteriorPointsOfMultiArray} from '../geom/flat/interiorpoint.js';\nimport {intersectsLinearRingMultiArray} from '../geom/flat/intersectsextent.js';\nimport {linearRingsAreOriented, orientLinearRingsArray} from '../geom/flat/orient.js';\nimport {quantizeMultiArray} from '../geom/flat/simplify.js';\n\n/**\n * @classdesc\n * Multi-polygon geometry.\n *\n * @constructor\n * @extends {module:ol/geom/SimpleGeometry}\n * @param {Array.<Array.<Array.<module:ol/coordinate~Coordinate>>>} coordinates Coordinates.\n * @param {module:ol/geom/GeometryLayout=} opt_layout Layout.\n * @api\n */\nconst MultiPolygon = function(coordinates, opt_layout) {\n\n  SimpleGeometry.call(this);\n\n  /**\n   * @type {Array.<Array.<number>>}\n   * @private\n   */\n  this.endss_ = [];\n\n  /**\n   * @private\n   * @type {number}\n   */\n  this.flatInteriorPointsRevision_ = -1;\n\n  /**\n   * @private\n   * @type {Array.<number>}\n   */\n  this.flatInteriorPoints_ = null;\n\n  /**\n   * @private\n   * @type {number}\n   */\n  this.maxDelta_ = -1;\n\n  /**\n   * @private\n   * @type {number}\n   */\n  this.maxDeltaRevision_ = -1;\n\n  /**\n   * @private\n   * @type {number}\n   */\n  this.orientedRevision_ = -1;\n\n  /**\n   * @private\n   * @type {Array.<number>}\n   */\n  this.orientedFlatCoordinates_ = null;\n\n  this.setCoordinates(coordinates, opt_layout);\n\n};\n\ninherits(MultiPolygon, SimpleGeometry);\n\n\n/**\n * Append the passed polygon to this multipolygon.\n * @param {module:ol/geom/Polygon} polygon Polygon.\n * @api\n */\nMultiPolygon.prototype.appendPolygon = function(polygon) {\n  /** @type {Array.<number>} */\n  let ends;\n  if (!this.flatCoordinates) {\n    this.flatCoordinates = polygon.getFlatCoordinates().slice();\n    ends = polygon.getEnds().slice();\n    this.endss_.push();\n  } else {\n    const offset = this.flatCoordinates.length;\n    extend(this.flatCoordinates, polygon.getFlatCoordinates());\n    ends = polygon.getEnds().slice();\n    for (let i = 0, ii = ends.length; i < ii; ++i) {\n      ends[i] += offset;\n    }\n  }\n  this.endss_.push(ends);\n  this.changed();\n};\n\n\n/**\n * Make a complete copy of the geometry.\n * @return {!module:ol/geom/MultiPolygon} Clone.\n * @override\n * @api\n */\nMultiPolygon.prototype.clone = function() {\n  const multiPolygon = new MultiPolygon(null);\n\n  const len = this.endss_.length;\n  const newEndss = new Array(len);\n  for (let i = 0; i < len; ++i) {\n    newEndss[i] = this.endss_[i].slice();\n  }\n\n  multiPolygon.setFlatCoordinates(\n    this.layout, this.flatCoordinates.slice(), newEndss);\n  return multiPolygon;\n};\n\n\n/**\n * @inheritDoc\n */\nMultiPolygon.prototype.closestPointXY = function(x, y, closestPoint, minSquaredDistance) {\n  if (minSquaredDistance < closestSquaredDistanceXY(this.getExtent(), x, y)) {\n    return minSquaredDistance;\n  }\n  if (this.maxDeltaRevision_ != this.getRevision()) {\n    this.maxDelta_ = Math.sqrt(multiArrayMaxSquaredDelta(\n      this.flatCoordinates, 0, this.endss_, this.stride, 0));\n    this.maxDeltaRevision_ = this.getRevision();\n  }\n  return assignClosestMultiArrayPoint(\n    this.getOrientedFlatCoordinates(), 0, this.endss_, this.stride,\n    this.maxDelta_, true, x, y, closestPoint, minSquaredDistance);\n};\n\n\n/**\n * @inheritDoc\n */\nMultiPolygon.prototype.containsXY = function(x, y) {\n  return linearRingssContainsXY(this.getOrientedFlatCoordinates(), 0, this.endss_, this.stride, x, y);\n};\n\n\n/**\n * Return the area of the multipolygon on projected plane.\n * @return {number} Area (on projected plane).\n * @api\n */\nMultiPolygon.prototype.getArea = function() {\n  return linearRingssArea(this.getOrientedFlatCoordinates(), 0, this.endss_, this.stride);\n};\n\n\n/**\n * Get the coordinate array for this geometry.  This array has the structure\n * of a GeoJSON coordinate array for multi-polygons.\n *\n * @param {boolean=} opt_right Orient coordinates according to the right-hand\n *     rule (counter-clockwise for exterior and clockwise for interior rings).\n *     If `false`, coordinates will be oriented according to the left-hand rule\n *     (clockwise for exterior and counter-clockwise for interior rings).\n *     By default, coordinate orientation will depend on how the geometry was\n *     constructed.\n * @return {Array.<Array.<Array.<module:ol/coordinate~Coordinate>>>} Coordinates.\n * @override\n * @api\n */\nMultiPolygon.prototype.getCoordinates = function(opt_right) {\n  let flatCoordinates;\n  if (opt_right !== undefined) {\n    flatCoordinates = this.getOrientedFlatCoordinates().slice();\n    orientLinearRingsArray(\n      flatCoordinates, 0, this.endss_, this.stride, opt_right);\n  } else {\n    flatCoordinates = this.flatCoordinates;\n  }\n\n  return inflateMultiCoordinatesArray(\n    flatCoordinates, 0, this.endss_, this.stride);\n};\n\n\n/**\n * @return {Array.<Array.<number>>} Endss.\n */\nMultiPolygon.prototype.getEndss = function() {\n  return this.endss_;\n};\n\n\n/**\n * @return {Array.<number>} Flat interior points.\n */\nMultiPolygon.prototype.getFlatInteriorPoints = function() {\n  if (this.flatInteriorPointsRevision_ != this.getRevision()) {\n    const flatCenters = linearRingssCenter(\n      this.flatCoordinates, 0, this.endss_, this.stride);\n    this.flatInteriorPoints_ = getInteriorPointsOfMultiArray(\n      this.getOrientedFlatCoordinates(), 0, this.endss_, this.stride,\n      flatCenters);\n    this.flatInteriorPointsRevision_ = this.getRevision();\n  }\n  return this.flatInteriorPoints_;\n};\n\n\n/**\n * Return the interior points as {@link module:ol/geom/MultiPoint multipoint}.\n * @return {module:ol/geom/MultiPoint} Interior points as XYM coordinates, where M is\n * the length of the horizontal intersection that the point belongs to.\n * @api\n */\nMultiPolygon.prototype.getInteriorPoints = function() {\n  const interiorPoints = new MultiPoint(null);\n  interiorPoints.setFlatCoordinates(GeometryLayout.XYM,\n    this.getFlatInteriorPoints().slice());\n  return interiorPoints;\n};\n\n\n/**\n * @return {Array.<number>} Oriented flat coordinates.\n */\nMultiPolygon.prototype.getOrientedFlatCoordinates = function() {\n  if (this.orientedRevision_ != this.getRevision()) {\n    const flatCoordinates = this.flatCoordinates;\n    if (linearRingsAreOriented(\n      flatCoordinates, 0, this.endss_, this.stride)) {\n      this.orientedFlatCoordinates_ = flatCoordinates;\n    } else {\n      this.orientedFlatCoordinates_ = flatCoordinates.slice();\n      this.orientedFlatCoordinates_.length =\n          orientLinearRingsArray(\n            this.orientedFlatCoordinates_, 0, this.endss_, this.stride);\n    }\n    this.orientedRevision_ = this.getRevision();\n  }\n  return this.orientedFlatCoordinates_;\n};\n\n\n/**\n * @inheritDoc\n */\nMultiPolygon.prototype.getSimplifiedGeometryInternal = function(squaredTolerance) {\n  const simplifiedFlatCoordinates = [];\n  const simplifiedEndss = [];\n  simplifiedFlatCoordinates.length = quantizeMultiArray(\n    this.flatCoordinates, 0, this.endss_, this.stride,\n    Math.sqrt(squaredTolerance),\n    simplifiedFlatCoordinates, 0, simplifiedEndss);\n  const simplifiedMultiPolygon = new MultiPolygon(null);\n  simplifiedMultiPolygon.setFlatCoordinates(\n    GeometryLayout.XY, simplifiedFlatCoordinates, simplifiedEndss);\n  return simplifiedMultiPolygon;\n};\n\n\n/**\n * Return the polygon at the specified index.\n * @param {number} index Index.\n * @return {module:ol/geom/Polygon} Polygon.\n * @api\n */\nMultiPolygon.prototype.getPolygon = function(index) {\n  if (index < 0 || this.endss_.length <= index) {\n    return null;\n  }\n  let offset;\n  if (index === 0) {\n    offset = 0;\n  } else {\n    const prevEnds = this.endss_[index - 1];\n    offset = prevEnds[prevEnds.length - 1];\n  }\n  const ends = this.endss_[index].slice();\n  const end = ends[ends.length - 1];\n  if (offset !== 0) {\n    for (let i = 0, ii = ends.length; i < ii; ++i) {\n      ends[i] -= offset;\n    }\n  }\n  const polygon = new Polygon(null);\n  polygon.setFlatCoordinates(\n    this.layout, this.flatCoordinates.slice(offset, end), ends);\n  return polygon;\n};\n\n\n/**\n * Return the polygons of this multipolygon.\n * @return {Array.<module:ol/geom/Polygon>} Polygons.\n * @api\n */\nMultiPolygon.prototype.getPolygons = function() {\n  const layout = this.layout;\n  const flatCoordinates = this.flatCoordinates;\n  const endss = this.endss_;\n  const polygons = [];\n  let offset = 0;\n  for (let i = 0, ii = endss.length; i < ii; ++i) {\n    const ends = endss[i].slice();\n    const end = ends[ends.length - 1];\n    if (offset !== 0) {\n      for (let j = 0, jj = ends.length; j < jj; ++j) {\n        ends[j] -= offset;\n      }\n    }\n    const polygon = new Polygon(null);\n    polygon.setFlatCoordinates(\n      layout, flatCoordinates.slice(offset, end), ends);\n    polygons.push(polygon);\n    offset = end;\n  }\n  return polygons;\n};\n\n\n/**\n * @inheritDoc\n * @api\n */\nMultiPolygon.prototype.getType = function() {\n  return GeometryType.MULTI_POLYGON;\n};\n\n\n/**\n * @inheritDoc\n * @api\n */\nMultiPolygon.prototype.intersectsExtent = function(extent) {\n  return intersectsLinearRingMultiArray(\n    this.getOrientedFlatCoordinates(), 0, this.endss_, this.stride, extent);\n};\n\n\n/**\n * Set the coordinates of the multipolygon.\n * @param {Array.<Array.<Array.<module:ol/coordinate~Coordinate>>>} coordinates Coordinates.\n * @param {module:ol/geom/GeometryLayout=} opt_layout Layout.\n * @override\n * @api\n */\nMultiPolygon.prototype.setCoordinates = function(coordinates, opt_layout) {\n  if (!coordinates) {\n    this.setFlatCoordinates(GeometryLayout.XY, null, this.endss_);\n  } else {\n    this.setLayout(opt_layout, coordinates, 3);\n    if (!this.flatCoordinates) {\n      this.flatCoordinates = [];\n    }\n    const endss = deflateMultiCoordinatesArray(\n      this.flatCoordinates, 0, coordinates, this.stride, this.endss_);\n    if (endss.length === 0) {\n      this.flatCoordinates.length = 0;\n    } else {\n      const lastEnds = endss[endss.length - 1];\n      this.flatCoordinates.length = lastEnds.length === 0 ?\n        0 : lastEnds[lastEnds.length - 1];\n    }\n    this.changed();\n  }\n};\n\n\n/**\n * @param {module:ol/geom/GeometryLayout} layout Layout.\n * @param {Array.<number>} flatCoordinates Flat coordinates.\n * @param {Array.<Array.<number>>} endss Endss.\n */\nMultiPolygon.prototype.setFlatCoordinates = function(layout, flatCoordinates, endss) {\n  this.setFlatCoordinatesInternal(layout, flatCoordinates);\n  this.endss_ = endss;\n  this.changed();\n};\n\n\n/**\n * @param {Array.<module:ol/geom/Polygon>} polygons Polygons.\n */\nMultiPolygon.prototype.setPolygons = function(polygons) {\n  let layout = this.getLayout();\n  const flatCoordinates = [];\n  const endss = [];\n  for (let i = 0, ii = polygons.length; i < ii; ++i) {\n    const polygon = polygons[i];\n    if (i === 0) {\n      layout = polygon.getLayout();\n    }\n    const offset = flatCoordinates.length;\n    const ends = polygon.getEnds();\n    for (let j = 0, jj = ends.length; j < jj; ++j) {\n      ends[j] += offset;\n    }\n    extend(flatCoordinates, polygon.getFlatCoordinates());\n    endss.push(ends);\n  }\n  this.setFlatCoordinates(layout, flatCoordinates, endss);\n};\n\nexport default MultiPolygon;\n","/**\n * @module ol/style/Text\n */\nimport Fill from '../style/Fill.js';\nimport TextPlacement from '../style/TextPlacement.js';\n\n\n/**\n * The default fill color to use if no fill was set at construction time; a\n * blackish `#333`.\n *\n * @const {string}\n */\nconst DEFAULT_FILL_COLOR = '#333';\n\n\n/**\n * @typedef {Object} Options\n * @property {string} [font] Font style as CSS 'font' value, see:\n * {@link https://developer.mozilla.org/en-US/docs/Web/API/CanvasRenderingContext2D/font}. Default is '10px sans-serif'\n * @property {number} [maxAngle] When `placement` is set to `'line'`, allow a maximum angle between adjacent characters.\n * The expected value is in radians, and the default is 45° (`Math.PI / 4`).\n * @property {number} [offsetX=0] Horizontal text offset in pixels. A positive will shift the text right.\n * @property {number} [offsetY=0] Vertical text offset in pixels. A positive will shift the text down.\n * @property {boolean} [overflow=false] For polygon labels or when `placement` is set to `'line'`, allow text to exceed\n * the width of the polygon at the label position or the length of the path that it follows.\n * @property {module:ol/style/TextPlacement|string} [placement] Text placement.\n * @property {number} [scale] Scale.\n * @property {boolean} [rotateWithView=false] Whether to rotate the text with the view.\n * @property {number} [rotation=0] Rotation in radians (positive rotation clockwise).\n * @property {string} [text] Text content.\n * @property {string} [textAlign] Text alignment. Possible values: 'left', 'right', 'center', 'end' or 'start'.\n * Default is 'center' for `placement: 'point'`. For `placement: 'line'`, the default is to let the renderer choose a\n * placement where `maxAngle` is not exceeded.\n * @property {string} [textBaseline='middle'] Text base line. Possible values: 'bottom', 'top', 'middle', 'alphabetic',\n * 'hanging', 'ideographic'.\n * @property {module:ol/style/Fill} [fill] Fill style. If none is provided, we'll use a dark fill-style (#333).\n * @property {module:ol/style/Stroke} [stroke] Stroke style.\n * @property {module:ol/style/Fill} [backgroundFill] Fill style for the text background when `placement` is\n * `'point'`. Default is no fill.\n * @property {module:ol/style/Stroke} [backgroundStroke] Stroke style for the text background  when `placement`\n * is `'point'`. Default is no stroke.\n * @property {Array.<number>} [padding=[0, 0, 0, 0]] Padding in pixels around the text for decluttering and background. The order of\n * values in the array is `[top, right, bottom, left]`.\n */\n\n\n/**\n * @classdesc\n * Set text style for vector features.\n *\n * @constructor\n * @param {module:ol/style/Text~Options=} opt_options Options.\n * @api\n */\nconst Text = function(opt_options) {\n\n  const options = opt_options || {};\n\n  /**\n   * @private\n   * @type {string|undefined}\n   */\n  this.font_ = options.font;\n\n  /**\n   * @private\n   * @type {number|undefined}\n   */\n  this.rotation_ = options.rotation;\n\n  /**\n   * @private\n   * @type {boolean|undefined}\n   */\n  this.rotateWithView_ = options.rotateWithView;\n\n  /**\n   * @private\n   * @type {number|undefined}\n   */\n  this.scale_ = options.scale;\n\n  /**\n   * @private\n   * @type {string|undefined}\n   */\n  this.text_ = options.text;\n\n  /**\n   * @private\n   * @type {string|undefined}\n   */\n  this.textAlign_ = options.textAlign;\n\n  /**\n   * @private\n   * @type {string|undefined}\n   */\n  this.textBaseline_ = options.textBaseline;\n\n  /**\n   * @private\n   * @type {module:ol/style/Fill}\n   */\n  this.fill_ = options.fill !== undefined ? options.fill :\n    new Fill({color: DEFAULT_FILL_COLOR});\n\n  /**\n   * @private\n   * @type {number}\n   */\n  this.maxAngle_ = options.maxAngle !== undefined ? options.maxAngle : Math.PI / 4;\n\n  /**\n   * @private\n   * @type {module:ol/style/TextPlacement|string}\n   */\n  this.placement_ = options.placement !== undefined ? options.placement : TextPlacement.POINT;\n\n  /**\n   * @private\n   * @type {boolean}\n   */\n  this.overflow_ = !!options.overflow;\n\n  /**\n   * @private\n   * @type {module:ol/style/Stroke}\n   */\n  this.stroke_ = options.stroke !== undefined ? options.stroke : null;\n\n  /**\n   * @private\n   * @type {number}\n   */\n  this.offsetX_ = options.offsetX !== undefined ? options.offsetX : 0;\n\n  /**\n   * @private\n   * @type {number}\n   */\n  this.offsetY_ = options.offsetY !== undefined ? options.offsetY : 0;\n\n  /**\n   * @private\n   * @type {module:ol/style/Fill}\n   */\n  this.backgroundFill_ = options.backgroundFill ? options.backgroundFill : null;\n\n  /**\n   * @private\n   * @type {module:ol/style/Stroke}\n   */\n  this.backgroundStroke_ = options.backgroundStroke ? options.backgroundStroke : null;\n\n  /**\n   * @private\n   * @type {Array.<number>}\n   */\n  this.padding_ = options.padding === undefined ? null : options.padding;\n};\n\n\n/**\n * Clones the style.\n * @return {module:ol/style/Text} The cloned style.\n * @api\n */\nText.prototype.clone = function() {\n  return new Text({\n    font: this.getFont(),\n    placement: this.getPlacement(),\n    maxAngle: this.getMaxAngle(),\n    overflow: this.getOverflow(),\n    rotation: this.getRotation(),\n    rotateWithView: this.getRotateWithView(),\n    scale: this.getScale(),\n    text: this.getText(),\n    textAlign: this.getTextAlign(),\n    textBaseline: this.getTextBaseline(),\n    fill: this.getFill() ? this.getFill().clone() : undefined,\n    stroke: this.getStroke() ? this.getStroke().clone() : undefined,\n    offsetX: this.getOffsetX(),\n    offsetY: this.getOffsetY(),\n    backgroundFill: this.getBackgroundFill() ? this.getBackgroundFill().clone() : undefined,\n    backgroundStroke: this.getBackgroundStroke() ? this.getBackgroundStroke().clone() : undefined\n  });\n};\n\n\n/**\n * Get the `overflow` configuration.\n * @return {boolean} Let text overflow the length of the path they follow.\n * @api\n */\nText.prototype.getOverflow = function() {\n  return this.overflow_;\n};\n\n\n/**\n * Get the font name.\n * @return {string|undefined} Font.\n * @api\n */\nText.prototype.getFont = function() {\n  return this.font_;\n};\n\n\n/**\n * Get the maximum angle between adjacent characters.\n * @return {number} Angle in radians.\n * @api\n */\nText.prototype.getMaxAngle = function() {\n  return this.maxAngle_;\n};\n\n\n/**\n * Get the label placement.\n * @return {module:ol/style/TextPlacement|string} Text placement.\n * @api\n */\nText.prototype.getPlacement = function() {\n  return this.placement_;\n};\n\n\n/**\n * Get the x-offset for the text.\n * @return {number} Horizontal text offset.\n * @api\n */\nText.prototype.getOffsetX = function() {\n  return this.offsetX_;\n};\n\n\n/**\n * Get the y-offset for the text.\n * @return {number} Vertical text offset.\n * @api\n */\nText.prototype.getOffsetY = function() {\n  return this.offsetY_;\n};\n\n\n/**\n * Get the fill style for the text.\n * @return {module:ol/style/Fill} Fill style.\n * @api\n */\nText.prototype.getFill = function() {\n  return this.fill_;\n};\n\n\n/**\n * Determine whether the text rotates with the map.\n * @return {boolean|undefined} Rotate with map.\n * @api\n */\nText.prototype.getRotateWithView = function() {\n  return this.rotateWithView_;\n};\n\n\n/**\n * Get the text rotation.\n * @return {number|undefined} Rotation.\n * @api\n */\nText.prototype.getRotation = function() {\n  return this.rotation_;\n};\n\n\n/**\n * Get the text scale.\n * @return {number|undefined} Scale.\n * @api\n */\nText.prototype.getScale = function() {\n  return this.scale_;\n};\n\n\n/**\n * Get the stroke style for the text.\n * @return {module:ol/style/Stroke} Stroke style.\n * @api\n */\nText.prototype.getStroke = function() {\n  return this.stroke_;\n};\n\n\n/**\n * Get the text to be rendered.\n * @return {string|undefined} Text.\n * @api\n */\nText.prototype.getText = function() {\n  return this.text_;\n};\n\n\n/**\n * Get the text alignment.\n * @return {string|undefined} Text align.\n * @api\n */\nText.prototype.getTextAlign = function() {\n  return this.textAlign_;\n};\n\n\n/**\n * Get the text baseline.\n * @return {string|undefined} Text baseline.\n * @api\n */\nText.prototype.getTextBaseline = function() {\n  return this.textBaseline_;\n};\n\n\n/**\n * Get the background fill style for the text.\n * @return {module:ol/style/Fill} Fill style.\n * @api\n */\nText.prototype.getBackgroundFill = function() {\n  return this.backgroundFill_;\n};\n\n\n/**\n * Get the background stroke style for the text.\n * @return {module:ol/style/Stroke} Stroke style.\n * @api\n */\nText.prototype.getBackgroundStroke = function() {\n  return this.backgroundStroke_;\n};\n\n\n/**\n * Get the padding for the text.\n * @return {Array.<number>} Padding.\n * @api\n */\nText.prototype.getPadding = function() {\n  return this.padding_;\n};\n\n\n/**\n * Set the `overflow` property.\n *\n * @param {boolean} overflow Let text overflow the path that it follows.\n * @api\n */\nText.prototype.setOverflow = function(overflow) {\n  this.overflow_ = overflow;\n};\n\n\n/**\n * Set the font.\n *\n * @param {string|undefined} font Font.\n * @api\n */\nText.prototype.setFont = function(font) {\n  this.font_ = font;\n};\n\n\n/**\n * Set the maximum angle between adjacent characters.\n *\n * @param {number} maxAngle Angle in radians.\n * @api\n */\nText.prototype.setMaxAngle = function(maxAngle) {\n  this.maxAngle_ = maxAngle;\n};\n\n\n/**\n * Set the x offset.\n *\n * @param {number} offsetX Horizontal text offset.\n * @api\n */\nText.prototype.setOffsetX = function(offsetX) {\n  this.offsetX_ = offsetX;\n};\n\n\n/**\n * Set the y offset.\n *\n * @param {number} offsetY Vertical text offset.\n * @api\n */\nText.prototype.setOffsetY = function(offsetY) {\n  this.offsetY_ = offsetY;\n};\n\n\n/**\n * Set the text placement.\n *\n * @param {module:ol/style/TextPlacement|string} placement Placement.\n * @api\n */\nText.prototype.setPlacement = function(placement) {\n  this.placement_ = placement;\n};\n\n\n/**\n * Set the fill.\n *\n * @param {module:ol/style/Fill} fill Fill style.\n * @api\n */\nText.prototype.setFill = function(fill) {\n  this.fill_ = fill;\n};\n\n\n/**\n * Set the rotation.\n *\n * @param {number|undefined} rotation Rotation.\n * @api\n */\nText.prototype.setRotation = function(rotation) {\n  this.rotation_ = rotation;\n};\n\n\n/**\n * Set the scale.\n *\n * @param {number|undefined} scale Scale.\n * @api\n */\nText.prototype.setScale = function(scale) {\n  this.scale_ = scale;\n};\n\n\n/**\n * Set the stroke.\n *\n * @param {module:ol/style/Stroke} stroke Stroke style.\n * @api\n */\nText.prototype.setStroke = function(stroke) {\n  this.stroke_ = stroke;\n};\n\n\n/**\n * Set the text.\n *\n * @param {string|undefined} text Text.\n * @api\n */\nText.prototype.setText = function(text) {\n  this.text_ = text;\n};\n\n\n/**\n * Set the text alignment.\n *\n * @param {string|undefined} textAlign Text align.\n * @api\n */\nText.prototype.setTextAlign = function(textAlign) {\n  this.textAlign_ = textAlign;\n};\n\n\n/**\n * Set the text baseline.\n *\n * @param {string|undefined} textBaseline Text baseline.\n * @api\n */\nText.prototype.setTextBaseline = function(textBaseline) {\n  this.textBaseline_ = textBaseline;\n};\n\n\n/**\n * Set the background fill.\n *\n * @param {module:ol/style/Fill} fill Fill style.\n * @api\n */\nText.prototype.setBackgroundFill = function(fill) {\n  this.backgroundFill_ = fill;\n};\n\n\n/**\n * Set the background stroke.\n *\n * @param {module:ol/style/Stroke} stroke Stroke style.\n * @api\n */\nText.prototype.setBackgroundStroke = function(stroke) {\n  this.backgroundStroke_ = stroke;\n};\n\n\n/**\n * Set the padding (`[top, right, bottom, left]`).\n *\n * @param {!Array.<number>} padding Padding.\n * @api\n */\nText.prototype.setPadding = function(padding) {\n  this.padding_ = padding;\n};\nexport default Text;\n","/**\n * @module ol/geom/flat/deflate\n */\n\n\n/**\n * @param {Array.<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {module:ol/coordinate~Coordinate} coordinate Coordinate.\n * @param {number} stride Stride.\n * @return {number} offset Offset.\n */\nexport function deflateCoordinate(flatCoordinates, offset, coordinate, stride) {\n  for (let i = 0, ii = coordinate.length; i < ii; ++i) {\n    flatCoordinates[offset++] = coordinate[i];\n  }\n  return offset;\n}\n\n\n/**\n * @param {Array.<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {Array.<module:ol/coordinate~Coordinate>} coordinates Coordinates.\n * @param {number} stride Stride.\n * @return {number} offset Offset.\n */\nexport function deflateCoordinates(flatCoordinates, offset, coordinates, stride) {\n  for (let i = 0, ii = coordinates.length; i < ii; ++i) {\n    const coordinate = coordinates[i];\n    for (let j = 0; j < stride; ++j) {\n      flatCoordinates[offset++] = coordinate[j];\n    }\n  }\n  return offset;\n}\n\n\n/**\n * @param {Array.<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {Array.<Array.<module:ol/coordinate~Coordinate>>} coordinatess Coordinatess.\n * @param {number} stride Stride.\n * @param {Array.<number>=} opt_ends Ends.\n * @return {Array.<number>} Ends.\n */\nexport function deflateCoordinatesArray(flatCoordinates, offset, coordinatess, stride, opt_ends) {\n  const ends = opt_ends ? opt_ends : [];\n  let i = 0;\n  for (let j = 0, jj = coordinatess.length; j < jj; ++j) {\n    const end = deflateCoordinates(\n      flatCoordinates, offset, coordinatess[j], stride);\n    ends[i++] = end;\n    offset = end;\n  }\n  ends.length = i;\n  return ends;\n}\n\n\n/**\n * @param {Array.<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {Array.<Array.<Array.<module:ol/coordinate~Coordinate>>>} coordinatesss Coordinatesss.\n * @param {number} stride Stride.\n * @param {Array.<Array.<number>>=} opt_endss Endss.\n * @return {Array.<Array.<number>>} Endss.\n */\nexport function deflateMultiCoordinatesArray(flatCoordinates, offset, coordinatesss, stride, opt_endss) {\n  const endss = opt_endss ? opt_endss : [];\n  let i = 0;\n  for (let j = 0, jj = coordinatesss.length; j < jj; ++j) {\n    const ends = deflateCoordinatesArray(\n      flatCoordinates, offset, coordinatesss[j], stride, endss[i]);\n    endss[i++] = ends;\n    offset = ends[ends.length - 1];\n  }\n  endss.length = i;\n  return endss;\n}\n","/**\n * @module ol/geom/flat/inflate\n */\n\n\n/**\n * @param {Array.<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {number} end End.\n * @param {number} stride Stride.\n * @param {Array.<module:ol/coordinate~Coordinate>=} opt_coordinates Coordinates.\n * @return {Array.<module:ol/coordinate~Coordinate>} Coordinates.\n */\nexport function inflateCoordinates(flatCoordinates, offset, end, stride, opt_coordinates) {\n  const coordinates = opt_coordinates !== undefined ? opt_coordinates : [];\n  let i = 0;\n  for (let j = offset; j < end; j += stride) {\n    coordinates[i++] = flatCoordinates.slice(j, j + stride);\n  }\n  coordinates.length = i;\n  return coordinates;\n}\n\n\n/**\n * @param {Array.<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {Array.<number>} ends Ends.\n * @param {number} stride Stride.\n * @param {Array.<Array.<module:ol/coordinate~Coordinate>>=} opt_coordinatess Coordinatess.\n * @return {Array.<Array.<module:ol/coordinate~Coordinate>>} Coordinatess.\n */\nexport function inflateCoordinatesArray(flatCoordinates, offset, ends, stride, opt_coordinatess) {\n  const coordinatess = opt_coordinatess !== undefined ? opt_coordinatess : [];\n  let i = 0;\n  for (let j = 0, jj = ends.length; j < jj; ++j) {\n    const end = ends[j];\n    coordinatess[i++] = inflateCoordinates(\n      flatCoordinates, offset, end, stride, coordinatess[i]);\n    offset = end;\n  }\n  coordinatess.length = i;\n  return coordinatess;\n}\n\n\n/**\n * @param {Array.<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {Array.<Array.<number>>} endss Endss.\n * @param {number} stride Stride.\n * @param {Array.<Array.<Array.<module:ol/coordinate~Coordinate>>>=} opt_coordinatesss\n *     Coordinatesss.\n * @return {Array.<Array.<Array.<module:ol/coordinate~Coordinate>>>} Coordinatesss.\n */\nexport function inflateMultiCoordinatesArray(flatCoordinates, offset, endss, stride, opt_coordinatesss) {\n  const coordinatesss = opt_coordinatesss !== undefined ? opt_coordinatesss : [];\n  let i = 0;\n  for (let j = 0, jj = endss.length; j < jj; ++j) {\n    const ends = endss[j];\n    coordinatesss[i++] = inflateCoordinatesArray(\n      flatCoordinates, offset, ends, stride, coordinatesss[i]);\n    offset = ends[ends.length - 1];\n  }\n  coordinatesss.length = i;\n  return coordinatesss;\n}\n","/**\n * @module ol/geom/Geometry\n */\nimport {inherits} from '../util.js';\nimport BaseObject from '../Object.js';\nimport {createEmpty, getHeight, returnOrUpdate} from '../extent.js';\nimport {FALSE} from '../functions.js';\nimport {transform2D} from '../geom/flat/transform.js';\nimport {get as getProjection, getTransform} from '../proj.js';\nimport Units from '../proj/Units.js';\nimport {create as createTransform, compose as composeTransform} from '../transform.js';\n\n\n/**\n * @classdesc\n * Abstract base class; normally only used for creating subclasses and not\n * instantiated in apps.\n * Base class for vector geometries.\n *\n * To get notified of changes to the geometry, register a listener for the\n * generic `change` event on your geometry instance.\n *\n * @constructor\n * @abstract\n * @extends {module:ol/Object}\n * @api\n */\nconst Geometry = function() {\n\n  BaseObject.call(this);\n\n  /**\n   * @private\n   * @type {module:ol/extent~Extent}\n   */\n  this.extent_ = createEmpty();\n\n  /**\n   * @private\n   * @type {number}\n   */\n  this.extentRevision_ = -1;\n\n  /**\n   * @protected\n   * @type {Object.<string, module:ol/geom/Geometry>}\n   */\n  this.simplifiedGeometryCache = {};\n\n  /**\n   * @protected\n   * @type {number}\n   */\n  this.simplifiedGeometryMaxMinSquaredTolerance = 0;\n\n  /**\n   * @protected\n   * @type {number}\n   */\n  this.simplifiedGeometryRevision = 0;\n\n};\n\ninherits(Geometry, BaseObject);\n\n\n/**\n * @type {module:ol/transform~Transform}\n */\nconst tmpTransform = createTransform();\n\n\n/**\n * Make a complete copy of the geometry.\n * @abstract\n * @return {!module:ol/geom/Geometry} Clone.\n */\nGeometry.prototype.clone = function() {};\n\n\n/**\n * @abstract\n * @param {number} x X.\n * @param {number} y Y.\n * @param {module:ol/coordinate~Coordinate} closestPoint Closest point.\n * @param {number} minSquaredDistance Minimum squared distance.\n * @return {number} Minimum squared distance.\n */\nGeometry.prototype.closestPointXY = function(x, y, closestPoint, minSquaredDistance) {};\n\n\n/**\n * Return the closest point of the geometry to the passed point as\n * {@link module:ol/coordinate~Coordinate coordinate}.\n * @param {module:ol/coordinate~Coordinate} point Point.\n * @param {module:ol/coordinate~Coordinate=} opt_closestPoint Closest point.\n * @return {module:ol/coordinate~Coordinate} Closest point.\n * @api\n */\nGeometry.prototype.getClosestPoint = function(point, opt_closestPoint) {\n  const closestPoint = opt_closestPoint ? opt_closestPoint : [NaN, NaN];\n  this.closestPointXY(point[0], point[1], closestPoint, Infinity);\n  return closestPoint;\n};\n\n\n/**\n * Returns true if this geometry includes the specified coordinate. If the\n * coordinate is on the boundary of the geometry, returns false.\n * @param {module:ol/coordinate~Coordinate} coordinate Coordinate.\n * @return {boolean} Contains coordinate.\n * @api\n */\nGeometry.prototype.intersectsCoordinate = function(coordinate) {\n  return this.containsXY(coordinate[0], coordinate[1]);\n};\n\n\n/**\n * @abstract\n * @param {module:ol/extent~Extent} extent Extent.\n * @protected\n * @return {module:ol/extent~Extent} extent Extent.\n */\nGeometry.prototype.computeExtent = function(extent) {};\n\n\n/**\n * @param {number} x X.\n * @param {number} y Y.\n * @return {boolean} Contains (x, y).\n */\nGeometry.prototype.containsXY = FALSE;\n\n\n/**\n * Get the extent of the geometry.\n * @param {module:ol/extent~Extent=} opt_extent Extent.\n * @return {module:ol/extent~Extent} extent Extent.\n * @api\n */\nGeometry.prototype.getExtent = function(opt_extent) {\n  if (this.extentRevision_ != this.getRevision()) {\n    this.extent_ = this.computeExtent(this.extent_);\n    this.extentRevision_ = this.getRevision();\n  }\n  return returnOrUpdate(this.extent_, opt_extent);\n};\n\n\n/**\n * Rotate the geometry around a given coordinate. This modifies the geometry\n * coordinates in place.\n * @abstract\n * @param {number} angle Rotation angle in radians.\n * @param {module:ol/coordinate~Coordinate} anchor The rotation center.\n * @api\n */\nGeometry.prototype.rotate = function(angle, anchor) {};\n\n\n/**\n * Scale the geometry (with an optional origin).  This modifies the geometry\n * coordinates in place.\n * @abstract\n * @param {number} sx The scaling factor in the x-direction.\n * @param {number=} opt_sy The scaling factor in the y-direction (defaults to\n *     sx).\n * @param {module:ol/coordinate~Coordinate=} opt_anchor The scale origin (defaults to the center\n *     of the geometry extent).\n * @api\n */\nGeometry.prototype.scale = function(sx, opt_sy, opt_anchor) {};\n\n\n/**\n * Create a simplified version of this geometry.  For linestrings, this uses\n * the the {@link\n * https://en.wikipedia.org/wiki/Ramer-Douglas-Peucker_algorithm\n * Douglas Peucker} algorithm.  For polygons, a quantization-based\n * simplification is used to preserve topology.\n * @function\n * @param {number} tolerance The tolerance distance for simplification.\n * @return {module:ol/geom/Geometry} A new, simplified version of the original\n *     geometry.\n * @api\n */\nGeometry.prototype.simplify = function(tolerance) {\n  return this.getSimplifiedGeometry(tolerance * tolerance);\n};\n\n\n/**\n * Create a simplified version of this geometry using the Douglas Peucker\n * algorithm.\n * @see https://en.wikipedia.org/wiki/Ramer-Douglas-Peucker_algorithm\n * @abstract\n * @param {number} squaredTolerance Squared tolerance.\n * @return {module:ol/geom/Geometry} Simplified geometry.\n */\nGeometry.prototype.getSimplifiedGeometry = function(squaredTolerance) {};\n\n\n/**\n * Get the type of this geometry.\n * @abstract\n * @return {module:ol/geom/GeometryType} Geometry type.\n */\nGeometry.prototype.getType = function() {};\n\n\n/**\n * Apply a transform function to each coordinate of the geometry.\n * The geometry is modified in place.\n * If you do not want the geometry modified in place, first `clone()` it and\n * then use this function on the clone.\n * @abstract\n * @param {module:ol/proj~TransformFunction} transformFn Transform.\n */\nGeometry.prototype.applyTransform = function(transformFn) {};\n\n\n/**\n * Test if the geometry and the passed extent intersect.\n * @abstract\n * @param {module:ol/extent~Extent} extent Extent.\n * @return {boolean} `true` if the geometry and the extent intersect.\n */\nGeometry.prototype.intersectsExtent = function(extent) {};\n\n\n/**\n * Translate the geometry.  This modifies the geometry coordinates in place.  If\n * instead you want a new geometry, first `clone()` this geometry.\n * @abstract\n * @param {number} deltaX Delta X.\n * @param {number} deltaY Delta Y.\n */\nGeometry.prototype.translate = function(deltaX, deltaY) {};\n\n\n/**\n * Transform each coordinate of the geometry from one coordinate reference\n * system to another. The geometry is modified in place.\n * For example, a line will be transformed to a line and a circle to a circle.\n * If you do not want the geometry modified in place, first `clone()` it and\n * then use this function on the clone.\n *\n * @param {module:ol/proj~ProjectionLike} source The current projection.  Can be a\n *     string identifier or a {@link module:ol/proj/Projection~Projection} object.\n * @param {module:ol/proj~ProjectionLike} destination The desired projection.  Can be a\n *     string identifier or a {@link module:ol/proj/Projection~Projection} object.\n * @return {module:ol/geom/Geometry} This geometry.  Note that original geometry is\n *     modified in place.\n * @api\n */\nGeometry.prototype.transform = function(source, destination) {\n  source = getProjection(source);\n  const transformFn = source.getUnits() == Units.TILE_PIXELS ?\n    function(inCoordinates, outCoordinates, stride) {\n      const pixelExtent = source.getExtent();\n      const projectedExtent = source.getWorldExtent();\n      const scale = getHeight(projectedExtent) / getHeight(pixelExtent);\n      composeTransform(tmpTransform,\n        projectedExtent[0], projectedExtent[3],\n        scale, -scale, 0,\n        0, 0);\n      transform2D(inCoordinates, 0, inCoordinates.length, stride,\n        tmpTransform, outCoordinates);\n      return getTransform(source, destination)(inCoordinates, outCoordinates, stride);\n    } :\n    getTransform(source, destination);\n  this.applyTransform(transformFn);\n  return this;\n};\nexport default Geometry;\n","/**\n * @module ol/geom/flat/reverse\n */\n\n\n/**\n * @param {Array.<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {number} end End.\n * @param {number} stride Stride.\n */\nexport function coordinates(flatCoordinates, offset, end, stride) {\n  while (offset < end - stride) {\n    for (let i = 0; i < stride; ++i) {\n      const tmp = flatCoordinates[offset + i];\n      flatCoordinates[offset + i] = flatCoordinates[end - stride + i];\n      flatCoordinates[end - stride + i] = tmp;\n    }\n    offset += stride;\n    end -= stride;\n  }\n}\n","/**\n * @module ol/geom/flat/orient\n */\nimport {coordinates as reverseCoordinates} from '../flat/reverse.js';\n\n\n/**\n * @param {Array.<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {number} end End.\n * @param {number} stride Stride.\n * @return {boolean} Is clockwise.\n */\nexport function linearRingIsClockwise(flatCoordinates, offset, end, stride) {\n  // http://tinyurl.com/clockwise-method\n  // https://github.com/OSGeo/gdal/blob/trunk/gdal/ogr/ogrlinearring.cpp\n  let edge = 0;\n  let x1 = flatCoordinates[end - stride];\n  let y1 = flatCoordinates[end - stride + 1];\n  for (; offset < end; offset += stride) {\n    const x2 = flatCoordinates[offset];\n    const y2 = flatCoordinates[offset + 1];\n    edge += (x2 - x1) * (y2 + y1);\n    x1 = x2;\n    y1 = y2;\n  }\n  return edge > 0;\n}\n\n\n/**\n * Determines if linear rings are oriented.  By default, left-hand orientation\n * is tested (first ring must be clockwise, remaining rings counter-clockwise).\n * To test for right-hand orientation, use the `opt_right` argument.\n *\n * @param {Array.<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {Array.<number>} ends Array of end indexes.\n * @param {number} stride Stride.\n * @param {boolean=} opt_right Test for right-hand orientation\n *     (counter-clockwise exterior ring and clockwise interior rings).\n * @return {boolean} Rings are correctly oriented.\n */\nexport function linearRingIsOriented(flatCoordinates, offset, ends, stride, opt_right) {\n  const right = opt_right !== undefined ? opt_right : false;\n  for (let i = 0, ii = ends.length; i < ii; ++i) {\n    const end = ends[i];\n    const isClockwise = linearRingIsClockwise(\n      flatCoordinates, offset, end, stride);\n    if (i === 0) {\n      if ((right && isClockwise) || (!right && !isClockwise)) {\n        return false;\n      }\n    } else {\n      if ((right && !isClockwise) || (!right && isClockwise)) {\n        return false;\n      }\n    }\n    offset = end;\n  }\n  return true;\n}\n\n\n/**\n * Determines if linear rings are oriented.  By default, left-hand orientation\n * is tested (first ring must be clockwise, remaining rings counter-clockwise).\n * To test for right-hand orientation, use the `opt_right` argument.\n *\n * @param {Array.<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {Array.<Array.<number>>} endss Array of array of end indexes.\n * @param {number} stride Stride.\n * @param {boolean=} opt_right Test for right-hand orientation\n *     (counter-clockwise exterior ring and clockwise interior rings).\n * @return {boolean} Rings are correctly oriented.\n */\nexport function linearRingsAreOriented(flatCoordinates, offset, endss, stride, opt_right) {\n  for (let i = 0, ii = endss.length; i < ii; ++i) {\n    if (!linearRingIsOriented(\n      flatCoordinates, offset, endss[i], stride, opt_right)) {\n      return false;\n    }\n  }\n  return true;\n}\n\n\n/**\n * Orient coordinates in a flat array of linear rings.  By default, rings\n * are oriented following the left-hand rule (clockwise for exterior and\n * counter-clockwise for interior rings).  To orient according to the\n * right-hand rule, use the `opt_right` argument.\n *\n * @param {Array.<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {Array.<number>} ends Ends.\n * @param {number} stride Stride.\n * @param {boolean=} opt_right Follow the right-hand rule for orientation.\n * @return {number} End.\n */\nexport function orientLinearRings(flatCoordinates, offset, ends, stride, opt_right) {\n  const right = opt_right !== undefined ? opt_right : false;\n  for (let i = 0, ii = ends.length; i < ii; ++i) {\n    const end = ends[i];\n    const isClockwise = linearRingIsClockwise(\n      flatCoordinates, offset, end, stride);\n    const reverse = i === 0 ?\n      (right && isClockwise) || (!right && !isClockwise) :\n      (right && !isClockwise) || (!right && isClockwise);\n    if (reverse) {\n      reverseCoordinates(flatCoordinates, offset, end, stride);\n    }\n    offset = end;\n  }\n  return offset;\n}\n\n\n/**\n * Orient coordinates in a flat array of linear rings.  By default, rings\n * are oriented following the left-hand rule (clockwise for exterior and\n * counter-clockwise for interior rings).  To orient according to the\n * right-hand rule, use the `opt_right` argument.\n *\n * @param {Array.<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {Array.<Array.<number>>} endss Array of array of end indexes.\n * @param {number} stride Stride.\n * @param {boolean=} opt_right Follow the right-hand rule for orientation.\n * @return {number} End.\n */\nexport function orientLinearRingsArray(flatCoordinates, offset, endss, stride, opt_right) {\n  for (let i = 0, ii = endss.length; i < ii; ++i) {\n    offset = orientLinearRings(\n      flatCoordinates, offset, endss[i], stride, opt_right);\n  }\n  return offset;\n}\n","/**\n * @module ol/format/XMLFeature\n */\nimport {inherits} from '../util.js';\nimport {extend} from '../array.js';\nimport FeatureFormat from '../format/Feature.js';\nimport FormatType from '../format/FormatType.js';\nimport {isDocument, isNode, parse} from '../xml.js';\n\n/**\n * @classdesc\n * Abstract base class; normally only used for creating subclasses and not\n * instantiated in apps.\n * Base class for XML feature formats.\n *\n * @constructor\n * @abstract\n * @extends {module:ol/format/Feature}\n */\nconst XMLFeature = function() {\n\n  /**\n   * @type {XMLSerializer}\n   * @private\n   */\n  this.xmlSerializer_ = new XMLSerializer();\n\n  FeatureFormat.call(this);\n};\n\ninherits(XMLFeature, FeatureFormat);\n\n\n/**\n * @inheritDoc\n */\nXMLFeature.prototype.getType = function() {\n  return FormatType.XML;\n};\n\n\n/**\n * @inheritDoc\n */\nXMLFeature.prototype.readFeature = function(source, opt_options) {\n  if (isDocument(source)) {\n    return this.readFeatureFromDocument(/** @type {Document} */ (source), opt_options);\n  } else if (isNode(source)) {\n    return this.readFeatureFromNode(/** @type {Node} */ (source), opt_options);\n  } else if (typeof source === 'string') {\n    const doc = parse(source);\n    return this.readFeatureFromDocument(doc, opt_options);\n  } else {\n    return null;\n  }\n};\n\n\n/**\n * @param {Document} doc Document.\n * @param {module:ol/format/Feature~ReadOptions=} opt_options Options.\n * @return {module:ol/Feature} Feature.\n */\nXMLFeature.prototype.readFeatureFromDocument = function(doc, opt_options) {\n  const features = this.readFeaturesFromDocument(doc, opt_options);\n  if (features.length > 0) {\n    return features[0];\n  } else {\n    return null;\n  }\n};\n\n\n/**\n * @param {Node} node Node.\n * @param {module:ol/format/Feature~ReadOptions=} opt_options Options.\n * @return {module:ol/Feature} Feature.\n */\nXMLFeature.prototype.readFeatureFromNode = function(node, opt_options) {\n  return null; // not implemented\n};\n\n\n/**\n * @inheritDoc\n */\nXMLFeature.prototype.readFeatures = function(source, opt_options) {\n  if (isDocument(source)) {\n    return this.readFeaturesFromDocument(\n      /** @type {Document} */ (source), opt_options);\n  } else if (isNode(source)) {\n    return this.readFeaturesFromNode(/** @type {Node} */ (source), opt_options);\n  } else if (typeof source === 'string') {\n    const doc = parse(source);\n    return this.readFeaturesFromDocument(doc, opt_options);\n  } else {\n    return [];\n  }\n};\n\n\n/**\n * @param {Document} doc Document.\n * @param {module:ol/format/Feature~ReadOptions=} opt_options Options.\n * @protected\n * @return {Array.<module:ol/Feature>} Features.\n */\nXMLFeature.prototype.readFeaturesFromDocument = function(doc, opt_options) {\n  /** @type {Array.<module:ol/Feature>} */\n  const features = [];\n  for (let n = doc.firstChild; n; n = n.nextSibling) {\n    if (n.nodeType == Node.ELEMENT_NODE) {\n      extend(features, this.readFeaturesFromNode(n, opt_options));\n    }\n  }\n  return features;\n};\n\n\n/**\n * @abstract\n * @param {Node} node Node.\n * @param {module:ol/format/Feature~ReadOptions=} opt_options Options.\n * @protected\n * @return {Array.<module:ol/Feature>} Features.\n */\nXMLFeature.prototype.readFeaturesFromNode = function(node, opt_options) {};\n\n\n/**\n * @inheritDoc\n */\nXMLFeature.prototype.readGeometry = function(source, opt_options) {\n  if (isDocument(source)) {\n    return this.readGeometryFromDocument(\n      /** @type {Document} */ (source), opt_options);\n  } else if (isNode(source)) {\n    return this.readGeometryFromNode(/** @type {Node} */ (source), opt_options);\n  } else if (typeof source === 'string') {\n    const doc = parse(source);\n    return this.readGeometryFromDocument(doc, opt_options);\n  } else {\n    return null;\n  }\n};\n\n\n/**\n * @param {Document} doc Document.\n * @param {module:ol/format/Feature~ReadOptions=} opt_options Options.\n * @protected\n * @return {module:ol/geom/Geometry} Geometry.\n */\nXMLFeature.prototype.readGeometryFromDocument = function(doc, opt_options) {\n  return null; // not implemented\n};\n\n\n/**\n * @param {Node} node Node.\n * @param {module:ol/format/Feature~ReadOptions=} opt_options Options.\n * @protected\n * @return {module:ol/geom/Geometry} Geometry.\n */\nXMLFeature.prototype.readGeometryFromNode = function(node, opt_options) {\n  return null; // not implemented\n};\n\n\n/**\n * @inheritDoc\n */\nXMLFeature.prototype.readProjection = function(source) {\n  if (isDocument(source)) {\n    return this.readProjectionFromDocument(/** @type {Document} */ (source));\n  } else if (isNode(source)) {\n    return this.readProjectionFromNode(/** @type {Node} */ (source));\n  } else if (typeof source === 'string') {\n    const doc = parse(source);\n    return this.readProjectionFromDocument(doc);\n  } else {\n    return null;\n  }\n};\n\n\n/**\n * @param {Document} doc Document.\n * @protected\n * @return {module:ol/proj/Projection} Projection.\n */\nXMLFeature.prototype.readProjectionFromDocument = function(doc) {\n  return this.dataProjection;\n};\n\n\n/**\n * @param {Node} node Node.\n * @protected\n * @return {module:ol/proj/Projection} Projection.\n */\nXMLFeature.prototype.readProjectionFromNode = function(node) {\n  return this.dataProjection;\n};\n\n\n/**\n * @inheritDoc\n */\nXMLFeature.prototype.writeFeature = function(feature, opt_options) {\n  const node = this.writeFeatureNode(feature, opt_options);\n  return this.xmlSerializer_.serializeToString(node);\n};\n\n\n/**\n * @param {module:ol/Feature} feature Feature.\n * @param {module:ol/format/Feature~WriteOptions=} opt_options Options.\n * @protected\n * @return {Node} Node.\n */\nXMLFeature.prototype.writeFeatureNode = function(feature, opt_options) {\n  return null; // not implemented\n};\n\n\n/**\n * @inheritDoc\n */\nXMLFeature.prototype.writeFeatures = function(features, opt_options) {\n  const node = this.writeFeaturesNode(features, opt_options);\n  return this.xmlSerializer_.serializeToString(node);\n};\n\n\n/**\n * @param {Array.<module:ol/Feature>} features Features.\n * @param {module:ol/format/Feature~WriteOptions=} opt_options Options.\n * @return {Node} Node.\n */\nXMLFeature.prototype.writeFeaturesNode = function(features, opt_options) {\n  return null; // not implemented\n};\n\n\n/**\n * @inheritDoc\n */\nXMLFeature.prototype.writeGeometry = function(geometry, opt_options) {\n  const node = this.writeGeometryNode(geometry, opt_options);\n  return this.xmlSerializer_.serializeToString(node);\n};\n\n\n/**\n * @param {module:ol/geom/Geometry} geometry Geometry.\n * @param {module:ol/format/Feature~WriteOptions=} opt_options Options.\n * @return {Node} Node.\n */\nXMLFeature.prototype.writeGeometryNode = function(geometry, opt_options) {\n  return null; // not implemented\n};\nexport default XMLFeature;\n","/**\n * @module ol/renderer/vector\n */\nimport {getUid} from '../util.js';\nimport ImageState from '../ImageState.js';\nimport GeometryType from '../geom/GeometryType.js';\nimport ReplayType from '../render/ReplayType.js';\n\n\n/**\n * Tolerance for geometry simplification in device pixels.\n * @type {number}\n */\nconst SIMPLIFY_TOLERANCE = 0.5;\n\n\n/**\n * @const\n * @type {Object.<module:ol/geom/GeometryType,\n *                function(module:ol/render/ReplayGroup, module:ol/geom/Geometry,\n *                         module:ol/style/Style, Object)>}\n */\nconst GEOMETRY_RENDERERS = {\n  'Point': renderPointGeometry,\n  'LineString': renderLineStringGeometry,\n  'Polygon': renderPolygonGeometry,\n  'MultiPoint': renderMultiPointGeometry,\n  'MultiLineString': renderMultiLineStringGeometry,\n  'MultiPolygon': renderMultiPolygonGeometry,\n  'GeometryCollection': renderGeometryCollectionGeometry,\n  'Circle': renderCircleGeometry\n};\n\n\n/**\n * @param {module:ol/Feature|module:ol/render/Feature} feature1 Feature 1.\n * @param {module:ol/Feature|module:ol/render/Feature} feature2 Feature 2.\n * @return {number} Order.\n */\nexport function defaultOrder(feature1, feature2) {\n  return getUid(feature1) - getUid(feature2);\n}\n\n\n/**\n * @param {number} resolution Resolution.\n * @param {number} pixelRatio Pixel ratio.\n * @return {number} Squared pixel tolerance.\n */\nexport function getSquaredTolerance(resolution, pixelRatio) {\n  const tolerance = getTolerance(resolution, pixelRatio);\n  return tolerance * tolerance;\n}\n\n\n/**\n * @param {number} resolution Resolution.\n * @param {number} pixelRatio Pixel ratio.\n * @return {number} Pixel tolerance.\n */\nexport function getTolerance(resolution, pixelRatio) {\n  return SIMPLIFY_TOLERANCE * resolution / pixelRatio;\n}\n\n\n/**\n * @param {module:ol/render/ReplayGroup} replayGroup Replay group.\n * @param {module:ol/geom/Circle} geometry Geometry.\n * @param {module:ol/style/Style} style Style.\n * @param {module:ol/Feature} feature Feature.\n */\nfunction renderCircleGeometry(replayGroup, geometry, style, feature) {\n  const fillStyle = style.getFill();\n  const strokeStyle = style.getStroke();\n  if (fillStyle || strokeStyle) {\n    const circleReplay = replayGroup.getReplay(style.getZIndex(), ReplayType.CIRCLE);\n    circleReplay.setFillStrokeStyle(fillStyle, strokeStyle);\n    circleReplay.drawCircle(geometry, feature);\n  }\n  const textStyle = style.getText();\n  if (textStyle) {\n    const textReplay = replayGroup.getReplay(style.getZIndex(), ReplayType.TEXT);\n    textReplay.setTextStyle(textStyle, replayGroup.addDeclutter(false));\n    textReplay.drawText(geometry, feature);\n  }\n}\n\n\n/**\n * @param {module:ol/render/ReplayGroup} replayGroup Replay group.\n * @param {module:ol/Feature|module:ol/render/Feature} feature Feature.\n * @param {module:ol/style/Style} style Style.\n * @param {number} squaredTolerance Squared tolerance.\n * @param {function(this: T, module:ol/events/Event)} listener Listener function.\n * @param {T} thisArg Value to use as `this` when executing `listener`.\n * @return {boolean} `true` if style is loading.\n * @template T\n */\nexport function renderFeature(replayGroup, feature, style, squaredTolerance, listener, thisArg) {\n  let loading = false;\n  const imageStyle = style.getImage();\n  if (imageStyle) {\n    let imageState = imageStyle.getImageState();\n    if (imageState == ImageState.LOADED || imageState == ImageState.ERROR) {\n      imageStyle.unlistenImageChange(listener, thisArg);\n    } else {\n      if (imageState == ImageState.IDLE) {\n        imageStyle.load();\n      }\n      imageState = imageStyle.getImageState();\n      imageStyle.listenImageChange(listener, thisArg);\n      loading = true;\n    }\n  }\n  renderFeatureInternal(replayGroup, feature, style, squaredTolerance);\n\n  return loading;\n}\n\n\n/**\n * @param {module:ol/render/ReplayGroup} replayGroup Replay group.\n * @param {module:ol/Feature|module:ol/render/Feature} feature Feature.\n * @param {module:ol/style/Style} style Style.\n * @param {number} squaredTolerance Squared tolerance.\n */\nfunction renderFeatureInternal(replayGroup, feature, style, squaredTolerance) {\n  const geometry = style.getGeometryFunction()(feature);\n  if (!geometry) {\n    return;\n  }\n  const simplifiedGeometry = geometry.getSimplifiedGeometry(squaredTolerance);\n  const renderer = style.getRenderer();\n  if (renderer) {\n    renderGeometry(replayGroup, simplifiedGeometry, style, feature);\n  } else {\n    const geometryRenderer = GEOMETRY_RENDERERS[simplifiedGeometry.getType()];\n    geometryRenderer(replayGroup, simplifiedGeometry, style, feature);\n  }\n}\n\n\n/**\n * @param {module:ol/render/ReplayGroup} replayGroup Replay group.\n * @param {module:ol/geom/Geometry} geometry Geometry.\n * @param {module:ol/style/Style} style Style.\n * @param {module:ol/Feature|module:ol/render/Feature} feature Feature.\n */\nfunction renderGeometry(replayGroup, geometry, style, feature) {\n  if (geometry.getType() == GeometryType.GEOMETRY_COLLECTION) {\n    const geometries = /** @type {module:ol/geom/GeometryCollection} */ (geometry).getGeometries();\n    for (let i = 0, ii = geometries.length; i < ii; ++i) {\n      renderGeometry(replayGroup, geometries[i], style, feature);\n    }\n    return;\n  }\n  const replay = replayGroup.getReplay(style.getZIndex(), ReplayType.DEFAULT);\n  replay.drawCustom(/** @type {module:ol/geom/SimpleGeometry} */ (geometry), feature, style.getRenderer());\n}\n\n\n/**\n * @param {module:ol/render/ReplayGroup} replayGroup Replay group.\n * @param {module:ol/geom/GeometryCollection} geometry Geometry.\n * @param {module:ol/style/Style} style Style.\n * @param {module:ol/Feature} feature Feature.\n */\nfunction renderGeometryCollectionGeometry(replayGroup, geometry, style, feature) {\n  const geometries = geometry.getGeometriesArray();\n  let i, ii;\n  for (i = 0, ii = geometries.length; i < ii; ++i) {\n    const geometryRenderer =\n        GEOMETRY_RENDERERS[geometries[i].getType()];\n    geometryRenderer(replayGroup, geometries[i], style, feature);\n  }\n}\n\n\n/**\n * @param {module:ol/render/ReplayGroup} replayGroup Replay group.\n * @param {module:ol/geom/LineString|module:ol/render/Feature} geometry Geometry.\n * @param {module:ol/style/Style} style Style.\n * @param {module:ol/Feature|module:ol/render/Feature} feature Feature.\n */\nfunction renderLineStringGeometry(replayGroup, geometry, style, feature) {\n  const strokeStyle = style.getStroke();\n  if (strokeStyle) {\n    const lineStringReplay = replayGroup.getReplay(style.getZIndex(), ReplayType.LINE_STRING);\n    lineStringReplay.setFillStrokeStyle(null, strokeStyle);\n    lineStringReplay.drawLineString(geometry, feature);\n  }\n  const textStyle = style.getText();\n  if (textStyle) {\n    const textReplay = replayGroup.getReplay(style.getZIndex(), ReplayType.TEXT);\n    textReplay.setTextStyle(textStyle, replayGroup.addDeclutter(false));\n    textReplay.drawText(geometry, feature);\n  }\n}\n\n\n/**\n * @param {module:ol/render/ReplayGroup} replayGroup Replay group.\n * @param {module:ol/geom/MultiLineString|module:ol/render/Feature} geometry Geometry.\n * @param {module:ol/style/Style} style Style.\n * @param {module:ol/Feature|module:ol/render/Feature} feature Feature.\n */\nfunction renderMultiLineStringGeometry(replayGroup, geometry, style, feature) {\n  const strokeStyle = style.getStroke();\n  if (strokeStyle) {\n    const lineStringReplay = replayGroup.getReplay(style.getZIndex(), ReplayType.LINE_STRING);\n    lineStringReplay.setFillStrokeStyle(null, strokeStyle);\n    lineStringReplay.drawMultiLineString(geometry, feature);\n  }\n  const textStyle = style.getText();\n  if (textStyle) {\n    const textReplay = replayGroup.getReplay(style.getZIndex(), ReplayType.TEXT);\n    textReplay.setTextStyle(textStyle, replayGroup.addDeclutter(false));\n    textReplay.drawText(geometry, feature);\n  }\n}\n\n\n/**\n * @param {module:ol/render/ReplayGroup} replayGroup Replay group.\n * @param {module:ol/geom/MultiPolygon} geometry Geometry.\n * @param {module:ol/style/Style} style Style.\n * @param {module:ol/Feature} feature Feature.\n */\nfunction renderMultiPolygonGeometry(replayGroup, geometry, style, feature) {\n  const fillStyle = style.getFill();\n  const strokeStyle = style.getStroke();\n  if (strokeStyle || fillStyle) {\n    const polygonReplay = replayGroup.getReplay(style.getZIndex(), ReplayType.POLYGON);\n    polygonReplay.setFillStrokeStyle(fillStyle, strokeStyle);\n    polygonReplay.drawMultiPolygon(geometry, feature);\n  }\n  const textStyle = style.getText();\n  if (textStyle) {\n    const textReplay = replayGroup.getReplay(style.getZIndex(), ReplayType.TEXT);\n    textReplay.setTextStyle(textStyle, replayGroup.addDeclutter(false));\n    textReplay.drawText(geometry, feature);\n  }\n}\n\n\n/**\n * @param {module:ol/render/ReplayGroup} replayGroup Replay group.\n * @param {module:ol/geom/Point|module:ol/render/Feature} geometry Geometry.\n * @param {module:ol/style/Style} style Style.\n * @param {module:ol/Feature|module:ol/render/Feature} feature Feature.\n */\nfunction renderPointGeometry(replayGroup, geometry, style, feature) {\n  const imageStyle = style.getImage();\n  if (imageStyle) {\n    if (imageStyle.getImageState() != ImageState.LOADED) {\n      return;\n    }\n    const imageReplay = replayGroup.getReplay(style.getZIndex(), ReplayType.IMAGE);\n    imageReplay.setImageStyle(imageStyle, replayGroup.addDeclutter(false));\n    imageReplay.drawPoint(geometry, feature);\n  }\n  const textStyle = style.getText();\n  if (textStyle) {\n    const textReplay = replayGroup.getReplay(style.getZIndex(), ReplayType.TEXT);\n    textReplay.setTextStyle(textStyle, replayGroup.addDeclutter(!!imageStyle));\n    textReplay.drawText(geometry, feature);\n  }\n}\n\n\n/**\n * @param {module:ol/render/ReplayGroup} replayGroup Replay group.\n * @param {module:ol/geom/MultiPoint|module:ol/render/Feature} geometry Geometry.\n * @param {module:ol/style/Style} style Style.\n * @param {module:ol/Feature|module:ol/render/Feature} feature Feature.\n */\nfunction renderMultiPointGeometry(replayGroup, geometry, style, feature) {\n  const imageStyle = style.getImage();\n  if (imageStyle) {\n    if (imageStyle.getImageState() != ImageState.LOADED) {\n      return;\n    }\n    const imageReplay = replayGroup.getReplay(style.getZIndex(), ReplayType.IMAGE);\n    imageReplay.setImageStyle(imageStyle, replayGroup.addDeclutter(false));\n    imageReplay.drawMultiPoint(geometry, feature);\n  }\n  const textStyle = style.getText();\n  if (textStyle) {\n    const textReplay = replayGroup.getReplay(style.getZIndex(), ReplayType.TEXT);\n    textReplay.setTextStyle(textStyle, replayGroup.addDeclutter(!!imageStyle));\n    textReplay.drawText(geometry, feature);\n  }\n}\n\n\n/**\n * @param {module:ol/render/ReplayGroup} replayGroup Replay group.\n * @param {module:ol/geom/Polygon|module:ol/render/Feature} geometry Geometry.\n * @param {module:ol/style/Style} style Style.\n * @param {module:ol/Feature|module:ol/render/Feature} feature Feature.\n */\nfunction renderPolygonGeometry(replayGroup, geometry, style, feature) {\n  const fillStyle = style.getFill();\n  const strokeStyle = style.getStroke();\n  if (fillStyle || strokeStyle) {\n    const polygonReplay = replayGroup.getReplay(style.getZIndex(), ReplayType.POLYGON);\n    polygonReplay.setFillStrokeStyle(fillStyle, strokeStyle);\n    polygonReplay.drawPolygon(geometry, feature);\n  }\n  const textStyle = style.getText();\n  if (textStyle) {\n    const textReplay = replayGroup.getReplay(style.getZIndex(), ReplayType.TEXT);\n    textReplay.setTextStyle(textStyle, replayGroup.addDeclutter(false));\n    textReplay.drawText(geometry, feature);\n  }\n}\n","/**\n * @module ol/MapProperty\n */\n\n/**\n * @enum {string}\n */\nexport default {\n  LAYERGROUP: 'layergroup',\n  SIZE: 'size',\n  TARGET: 'target',\n  VIEW: 'view'\n};\n","/**\n * @module ol/Overlay\n */\nimport {inherits} from './util.js';\nimport MapEventType from './MapEventType.js';\nimport BaseObject, {getChangeEventType} from './Object.js';\nimport OverlayPositioning from './OverlayPositioning.js';\nimport {CLASS_SELECTABLE} from './css.js';\nimport {removeNode, removeChildren, outerWidth, outerHeight} from './dom.js';\nimport {listen, unlistenByKey} from './events.js';\nimport {containsExtent} from './extent.js';\n\n\n/**\n * @typedef {Object} Options\n * @property {number|string} [id] Set the overlay id. The overlay id can be used\n * with the {@link module:ol/Map~Map#getOverlayById} method.\n * @property {Element} [element] The overlay element.\n * @property {Array.<number>} [offset=[0, 0]] Offsets in pixels used when positioning\n * the overlay. The first element in the\n * array is the horizontal offset. A positive value shifts the overlay right.\n * The second element in the array is the vertical offset. A positive value\n * shifts the overlay down.\n * @property {module:ol/coordinate~Coordinate} [position] The overlay position\n * in map projection.\n * @property {module:ol/OverlayPositioning} [positioning='top-left'] Defines how\n * the overlay is actually positioned with respect to its `position` property.\n * Possible values are `'bottom-left'`, `'bottom-center'`, `'bottom-right'`,\n * `'center-left'`, `'center-center'`, `'center-right'`, `'top-left'`,\n * `'top-center'`, and `'top-right'`.\n * @property {boolean} [stopEvent=true] Whether event propagation to the map\n * viewport should be stopped. If `true` the overlay is placed in the same\n * container as that of the controls (CSS class name\n * `ol-overlaycontainer-stopevent`); if `false` it is placed in the container\n * with CSS class name specified by the `className` property.\n * @property {boolean} [insertFirst=true] Whether the overlay is inserted first\n * in the overlay container, or appended. If the overlay is placed in the same\n * container as that of the controls (see the `stopEvent` option) you will\n * probably set `insertFirst` to `true` so the overlay is displayed below the\n * controls.\n * @property {boolean} [autoPan=false] If set to `true` the map is panned when\n * calling `setPosition`, so that the overlay is entirely visible in the current\n * viewport.\n * @property {module:ol/Overlay~PanOptions} [autoPanAnimation] The\n * animation options used to pan the overlay into view. This animation is only\n * used when `autoPan` is enabled. A `duration` and `easing` may be provided to\n * customize the animation.\n * @property {number} [autoPanMargin=20] The margin (in pixels) between the\n * overlay and the borders of the map when autopanning.\n * @property {string} [className='ol-overlay-container ol-selectable'] CSS class\n * name.\n */\n\n\n/**\n * @typedef {Object} PanOptions\n * @property {number} [duration=1000] The duration of the animation in\n * milliseconds.\n * @property {function(number):number} [easing] The easing function to use. Can\n * be one from {@link module:ol/easing} or a custom function.\n * Default is {@link module:ol/easing~inAndOut}.\n */\n\n\n/**\n * @enum {string}\n * @protected\n */\nconst Property = {\n  ELEMENT: 'element',\n  MAP: 'map',\n  OFFSET: 'offset',\n  POSITION: 'position',\n  POSITIONING: 'positioning'\n};\n\n\n/**\n * @classdesc\n * An element to be displayed over the map and attached to a single map\n * location.  Like {@link module:ol/control/Control~Control}, Overlays are\n * visible widgets. Unlike Controls, they are not in a fixed position on the\n * screen, but are tied to a geographical coordinate, so panning the map will\n * move an Overlay but not a Control.\n *\n * Example:\n *\n *     import Overlay from 'ol/Overlay';\n *\n *     var popup = new Overlay({\n *       element: document.getElementById('popup')\n *     });\n *     popup.setPosition(coordinate);\n *     map.addOverlay(popup);\n *\n * @constructor\n * @extends {module:ol/Object}\n * @param {module:ol/Overlay~Options} options Overlay options.\n * @api\n */\nconst Overlay = function(options) {\n\n  BaseObject.call(this);\n\n  /**\n   * @protected\n   * @type {module:ol/Overlay~Options}\n   */\n  this.options = options;\n\n  /**\n   * @protected\n   * @type {number|string|undefined}\n   */\n  this.id = options.id;\n\n  /**\n   * @protected\n   * @type {boolean}\n   */\n  this.insertFirst = options.insertFirst !== undefined ?\n    options.insertFirst : true;\n\n  /**\n   * @protected\n   * @type {boolean}\n   */\n  this.stopEvent = options.stopEvent !== undefined ? options.stopEvent : true;\n\n  /**\n   * @protected\n   * @type {Element}\n   */\n  this.element = document.createElement('DIV');\n  this.element.className = options.className !== undefined ?\n    options.className : 'ol-overlay-container ' + CLASS_SELECTABLE;\n  this.element.style.position = 'absolute';\n\n  /**\n   * @protected\n   * @type {boolean}\n   */\n  this.autoPan = options.autoPan !== undefined ? options.autoPan : false;\n\n  /**\n   * @protected\n   * @type {module:ol/Overlay~PanOptions}\n   */\n  this.autoPanAnimation = options.autoPanAnimation || /** @type {module:ol/Overlay~PanOptions} */ ({});\n\n  /**\n   * @protected\n   * @type {number}\n   */\n  this.autoPanMargin = options.autoPanMargin !== undefined ?\n    options.autoPanMargin : 20;\n\n  /**\n   * @protected\n   * @type {{bottom_: string,\n   *         left_: string,\n   *         right_: string,\n   *         top_: string,\n   *         visible: boolean}}\n   */\n  this.rendered = {\n    bottom_: '',\n    left_: '',\n    right_: '',\n    top_: '',\n    visible: true\n  };\n\n  /**\n   * @protected\n   * @type {?module:ol/events~EventsKey}\n   */\n  this.mapPostrenderListenerKey = null;\n\n  listen(\n    this, getChangeEventType(Property.ELEMENT),\n    this.handleElementChanged, this);\n\n  listen(\n    this, getChangeEventType(Property.MAP),\n    this.handleMapChanged, this);\n\n  listen(\n    this, getChangeEventType(Property.OFFSET),\n    this.handleOffsetChanged, this);\n\n  listen(\n    this, getChangeEventType(Property.POSITION),\n    this.handlePositionChanged, this);\n\n  listen(\n    this, getChangeEventType(Property.POSITIONING),\n    this.handlePositioningChanged, this);\n\n  if (options.element !== undefined) {\n    this.setElement(options.element);\n  }\n\n  this.setOffset(options.offset !== undefined ? options.offset : [0, 0]);\n\n  this.setPositioning(options.positioning !== undefined ?\n    /** @type {module:ol/OverlayPositioning} */ (options.positioning) :\n    OverlayPositioning.TOP_LEFT);\n\n  if (options.position !== undefined) {\n    this.setPosition(options.position);\n  }\n\n};\n\ninherits(Overlay, BaseObject);\n\n\n/**\n * Get the DOM element of this overlay.\n * @return {Element|undefined} The Element containing the overlay.\n * @observable\n * @api\n */\nOverlay.prototype.getElement = function() {\n  return /** @type {Element|undefined} */ (this.get(Property.ELEMENT));\n};\n\n\n/**\n * Get the overlay identifier which is set on constructor.\n * @return {number|string|undefined} Id.\n * @api\n */\nOverlay.prototype.getId = function() {\n  return this.id;\n};\n\n\n/**\n * Get the map associated with this overlay.\n * @return {module:ol/PluggableMap|undefined} The map that the\n * overlay is part of.\n * @observable\n * @api\n */\nOverlay.prototype.getMap = function() {\n  return (\n    /** @type {module:ol/PluggableMap|undefined} */ (this.get(Property.MAP))\n  );\n};\n\n\n/**\n * Get the offset of this overlay.\n * @return {Array.<number>} The offset.\n * @observable\n * @api\n */\nOverlay.prototype.getOffset = function() {\n  return /** @type {Array.<number>} */ (this.get(Property.OFFSET));\n};\n\n\n/**\n * Get the current position of this overlay.\n * @return {module:ol/coordinate~Coordinate|undefined} The spatial point that the overlay is\n *     anchored at.\n * @observable\n * @api\n */\nOverlay.prototype.getPosition = function() {\n  return (\n    /** @type {module:ol/coordinate~Coordinate|undefined} */ (this.get(Property.POSITION))\n  );\n};\n\n\n/**\n * Get the current positioning of this overlay.\n * @return {module:ol/OverlayPositioning} How the overlay is positioned\n *     relative to its point on the map.\n * @observable\n * @api\n */\nOverlay.prototype.getPositioning = function() {\n  return (\n    /** @type {module:ol/OverlayPositioning} */ (this.get(Property.POSITIONING))\n  );\n};\n\n\n/**\n * @protected\n */\nOverlay.prototype.handleElementChanged = function() {\n  removeChildren(this.element);\n  const element = this.getElement();\n  if (element) {\n    this.element.appendChild(element);\n  }\n};\n\n\n/**\n * @protected\n */\nOverlay.prototype.handleMapChanged = function() {\n  if (this.mapPostrenderListenerKey) {\n    removeNode(this.element);\n    unlistenByKey(this.mapPostrenderListenerKey);\n    this.mapPostrenderListenerKey = null;\n  }\n  const map = this.getMap();\n  if (map) {\n    this.mapPostrenderListenerKey = listen(map,\n      MapEventType.POSTRENDER, this.render, this);\n    this.updatePixelPosition();\n    const container = this.stopEvent ?\n      map.getOverlayContainerStopEvent() : map.getOverlayContainer();\n    if (this.insertFirst) {\n      container.insertBefore(this.element, container.childNodes[0] || null);\n    } else {\n      container.appendChild(this.element);\n    }\n  }\n};\n\n\n/**\n * @protected\n */\nOverlay.prototype.render = function() {\n  this.updatePixelPosition();\n};\n\n\n/**\n * @protected\n */\nOverlay.prototype.handleOffsetChanged = function() {\n  this.updatePixelPosition();\n};\n\n\n/**\n * @protected\n */\nOverlay.prototype.handlePositionChanged = function() {\n  this.updatePixelPosition();\n  if (this.get(Property.POSITION) && this.autoPan) {\n    this.panIntoView();\n  }\n};\n\n\n/**\n * @protected\n */\nOverlay.prototype.handlePositioningChanged = function() {\n  this.updatePixelPosition();\n};\n\n\n/**\n * Set the DOM element to be associated with this overlay.\n * @param {Element|undefined} element The Element containing the overlay.\n * @observable\n * @api\n */\nOverlay.prototype.setElement = function(element) {\n  this.set(Property.ELEMENT, element);\n};\n\n\n/**\n * Set the map to be associated with this overlay.\n * @param {module:ol/PluggableMap|undefined} map The map that the\n * overlay is part of.\n * @observable\n * @api\n */\nOverlay.prototype.setMap = function(map) {\n  this.set(Property.MAP, map);\n};\n\n\n/**\n * Set the offset for this overlay.\n * @param {Array.<number>} offset Offset.\n * @observable\n * @api\n */\nOverlay.prototype.setOffset = function(offset) {\n  this.set(Property.OFFSET, offset);\n};\n\n\n/**\n * Set the position for this overlay. If the position is `undefined` the\n * overlay is hidden.\n * @param {module:ol/coordinate~Coordinate|undefined} position The spatial point that the overlay\n *     is anchored at.\n * @observable\n * @api\n */\nOverlay.prototype.setPosition = function(position) {\n  this.set(Property.POSITION, position);\n};\n\n\n/**\n * Pan the map so that the overlay is entirely visible in the current viewport\n * (if necessary).\n * @protected\n */\nOverlay.prototype.panIntoView = function() {\n  const map = this.getMap();\n\n  if (!map || !map.getTargetElement()) {\n    return;\n  }\n\n  const mapRect = this.getRect(map.getTargetElement(), map.getSize());\n  const element = /** @type {!Element} */ (this.getElement());\n  const overlayRect = this.getRect(element, [outerWidth(element), outerHeight(element)]);\n\n  const margin = this.autoPanMargin;\n  if (!containsExtent(mapRect, overlayRect)) {\n    // the overlay is not completely inside the viewport, so pan the map\n    const offsetLeft = overlayRect[0] - mapRect[0];\n    const offsetRight = mapRect[2] - overlayRect[2];\n    const offsetTop = overlayRect[1] - mapRect[1];\n    const offsetBottom = mapRect[3] - overlayRect[3];\n\n    const delta = [0, 0];\n    if (offsetLeft < 0) {\n      // move map to the left\n      delta[0] = offsetLeft - margin;\n    } else if (offsetRight < 0) {\n      // move map to the right\n      delta[0] = Math.abs(offsetRight) + margin;\n    }\n    if (offsetTop < 0) {\n      // move map up\n      delta[1] = offsetTop - margin;\n    } else if (offsetBottom < 0) {\n      // move map down\n      delta[1] = Math.abs(offsetBottom) + margin;\n    }\n\n    if (delta[0] !== 0 || delta[1] !== 0) {\n      const center = /** @type {module:ol/coordinate~Coordinate} */ (map.getView().getCenter());\n      const centerPx = map.getPixelFromCoordinate(center);\n      const newCenterPx = [\n        centerPx[0] + delta[0],\n        centerPx[1] + delta[1]\n      ];\n\n      map.getView().animate({\n        center: map.getCoordinateFromPixel(newCenterPx),\n        duration: this.autoPanAnimation.duration,\n        easing: this.autoPanAnimation.easing\n      });\n    }\n  }\n};\n\n\n/**\n * Get the extent of an element relative to the document\n * @param {Element|undefined} element The element.\n * @param {module:ol/size~Size|undefined} size The size of the element.\n * @return {module:ol/extent~Extent} The extent.\n * @protected\n */\nOverlay.prototype.getRect = function(element, size) {\n  const box = element.getBoundingClientRect();\n  const offsetX = box.left + window.pageXOffset;\n  const offsetY = box.top + window.pageYOffset;\n  return [\n    offsetX,\n    offsetY,\n    offsetX + size[0],\n    offsetY + size[1]\n  ];\n};\n\n\n/**\n * Set the positioning for this overlay.\n * @param {module:ol/OverlayPositioning} positioning how the overlay is\n *     positioned relative to its point on the map.\n * @observable\n * @api\n */\nOverlay.prototype.setPositioning = function(positioning) {\n  this.set(Property.POSITIONING, positioning);\n};\n\n\n/**\n * Modify the visibility of the element.\n * @param {boolean} visible Element visibility.\n * @protected\n */\nOverlay.prototype.setVisible = function(visible) {\n  if (this.rendered.visible !== visible) {\n    this.element.style.display = visible ? '' : 'none';\n    this.rendered.visible = visible;\n  }\n};\n\n\n/**\n * Update pixel position.\n * @protected\n */\nOverlay.prototype.updatePixelPosition = function() {\n  const map = this.getMap();\n  const position = this.getPosition();\n  if (!map || !map.isRendered() || !position) {\n    this.setVisible(false);\n    return;\n  }\n\n  const pixel = map.getPixelFromCoordinate(position);\n  const mapSize = map.getSize();\n  this.updateRenderedPosition(pixel, mapSize);\n};\n\n\n/**\n * @param {module:ol~Pixel} pixel The pixel location.\n * @param {module:ol/size~Size|undefined} mapSize The map size.\n * @protected\n */\nOverlay.prototype.updateRenderedPosition = function(pixel, mapSize) {\n  const style = this.element.style;\n  const offset = this.getOffset();\n\n  const positioning = this.getPositioning();\n\n  this.setVisible(true);\n\n  let offsetX = offset[0];\n  let offsetY = offset[1];\n  if (positioning == OverlayPositioning.BOTTOM_RIGHT ||\n      positioning == OverlayPositioning.CENTER_RIGHT ||\n      positioning == OverlayPositioning.TOP_RIGHT) {\n    if (this.rendered.left_ !== '') {\n      this.rendered.left_ = style.left = '';\n    }\n    const right = Math.round(mapSize[0] - pixel[0] - offsetX) + 'px';\n    if (this.rendered.right_ != right) {\n      this.rendered.right_ = style.right = right;\n    }\n  } else {\n    if (this.rendered.right_ !== '') {\n      this.rendered.right_ = style.right = '';\n    }\n    if (positioning == OverlayPositioning.BOTTOM_CENTER ||\n        positioning == OverlayPositioning.CENTER_CENTER ||\n        positioning == OverlayPositioning.TOP_CENTER) {\n      offsetX -= this.element.offsetWidth / 2;\n    }\n    const left = Math.round(pixel[0] + offsetX) + 'px';\n    if (this.rendered.left_ != left) {\n      this.rendered.left_ = style.left = left;\n    }\n  }\n  if (positioning == OverlayPositioning.BOTTOM_LEFT ||\n      positioning == OverlayPositioning.BOTTOM_CENTER ||\n      positioning == OverlayPositioning.BOTTOM_RIGHT) {\n    if (this.rendered.top_ !== '') {\n      this.rendered.top_ = style.top = '';\n    }\n    const bottom = Math.round(mapSize[1] - pixel[1] - offsetY) + 'px';\n    if (this.rendered.bottom_ != bottom) {\n      this.rendered.bottom_ = style.bottom = bottom;\n    }\n  } else {\n    if (this.rendered.bottom_ !== '') {\n      this.rendered.bottom_ = style.bottom = '';\n    }\n    if (positioning == OverlayPositioning.CENTER_LEFT ||\n        positioning == OverlayPositioning.CENTER_CENTER ||\n        positioning == OverlayPositioning.CENTER_RIGHT) {\n      offsetY -= this.element.offsetHeight / 2;\n    }\n    const top = Math.round(pixel[1] + offsetY) + 'px';\n    if (this.rendered.top_ != top) {\n      this.rendered.top_ = style.top = top;\n    }\n  }\n};\n\n\n/**\n * returns the options this Overlay has been created with\n * @return {module:ol/Overlay~Options} overlay options\n */\nOverlay.prototype.getOptions = function() {\n  return this.options;\n};\n\nexport default Overlay;\n","/**\n * @module ol/colorlike\n */\nimport {toString} from './color.js';\n\n\n/**\n * A type accepted by CanvasRenderingContext2D.fillStyle\n * or CanvasRenderingContext2D.strokeStyle.\n * Represents a color, pattern, or gradient. The origin for patterns and\n * gradients as fill style is an increment of 512 css pixels from map coordinate\n * `[0, 0]`. For seamless repeat patterns, width and height of the pattern image\n * must be a factor of two (2, 4, 8, ..., 512).\n *\n * @typedef {string|CanvasPattern|CanvasGradient} ColorLike\n * @api\n */\n\n\n/**\n * @param {module:ol/color~Color|module:ol/colorlike~ColorLike} color Color.\n * @return {module:ol/colorlike~ColorLike} The color as an {@link ol/colorlike~ColorLike}.\n * @api\n */\nexport function asColorLike(color) {\n  if (isColorLike(color)) {\n    return /** @type {string|CanvasPattern|CanvasGradient} */ (color);\n  } else {\n    return toString(/** @type {module:ol/color~Color} */ (color));\n  }\n}\n\n\n/**\n * @param {?} color The value that is potentially an {@link ol/colorlike~ColorLike}.\n * @return {boolean} The color is an {@link ol/colorlike~ColorLike}.\n */\nexport function isColorLike(color) {\n  return (\n    typeof color === 'string' ||\n    color instanceof CanvasPattern ||\n    color instanceof CanvasGradient\n  );\n}\n","/**\n * @module ol/style/IconAnchorUnits\n */\n\n/**\n * Icon anchor units. One of 'fraction', 'pixels'.\n * @enum {string}\n */\nexport default {\n  FRACTION: 'fraction',\n  PIXELS: 'pixels'\n};\n","/**\n * @module ol/MapBrowserPointerEvent\n */\nimport {inherits} from './util.js';\nimport MapBrowserEvent from './MapBrowserEvent.js';\n\n/**\n * @constructor\n * @extends {module:ol/MapBrowserEvent}\n * @param {string} type Event type.\n * @param {module:ol/PluggableMap} map Map.\n * @param {module:ol/pointer/PointerEvent} pointerEvent Pointer\n * event.\n * @param {boolean=} opt_dragging Is the map currently being dragged?\n * @param {?module:ol/PluggableMap~FrameState=} opt_frameState Frame state.\n */\nconst MapBrowserPointerEvent = function(type, map, pointerEvent, opt_dragging,\n  opt_frameState) {\n\n  MapBrowserEvent.call(this, type, map, pointerEvent.originalEvent, opt_dragging,\n    opt_frameState);\n\n  /**\n   * @const\n   * @type {module:ol/pointer/PointerEvent}\n   */\n  this.pointerEvent = pointerEvent;\n\n};\n\ninherits(MapBrowserPointerEvent, MapBrowserEvent);\nexport default MapBrowserPointerEvent;\n","/**\n * @module ol/interaction/Select\n */\nimport {getUid, inherits} from '../util.js';\nimport CollectionEventType from '../CollectionEventType.js';\nimport {extend, includes} from '../array.js';\nimport {listen} from '../events.js';\nimport Event from '../events/Event.js';\nimport {singleClick, never, shiftKeyOnly, pointerMove} from '../events/condition.js';\nimport {TRUE} from '../functions.js';\nimport GeometryType from '../geom/GeometryType.js';\nimport Interaction from '../interaction/Interaction.js';\nimport VectorLayer from '../layer/Vector.js';\nimport {clear} from '../obj.js';\nimport VectorSource from '../source/Vector.js';\nimport {createEditingStyle} from '../style/Style.js';\n\n\n/**\n * @enum {string}\n */\nconst SelectEventType = {\n  /**\n   * Triggered when feature(s) has been (de)selected.\n   * @event SelectEvent#select\n   * @api\n   */\n  SELECT: 'select'\n};\n\n\n/**\n * A function that takes an {@link module:ol/Feature} or\n * {@link module:ol/render/Feature} and an\n * {@link module:ol/layer/Layer} and returns `true` if the feature may be\n * selected or `false` otherwise.\n * @typedef {function((module:ol/Feature|module:ol/render/Feature), module:ol/layer/Layer):\n *     boolean} FilterFunction\n */\n\n\n/**\n * @typedef {Object} Options\n * @property {module:ol/events/condition~Condition} [addCondition] A function\n * that takes an {@link module:ol/MapBrowserEvent~MapBrowserEvent} and returns a\n * boolean to indicate whether that event should be handled.\n * By default, this is {@link module:ol/events/condition~never}. Use this if you\n * want to use different events for add and remove instead of `toggle`.\n * @property {module:ol/events/condition~Condition} [condition] A function that\n * takes an {@link module:ol/MapBrowserEvent~MapBrowserEvent} and returns a\n * boolean to indicate whether that event should be handled. This is the event\n * for the selected features as a whole. By default, this is\n * {@link module:ol/events/condition~singleClick}. Clicking on a feature selects that\n * feature and removes any that were in the selection. Clicking outside any\n * feature removes all from the selection.\n * See `toggle`, `add`, `remove` options for adding/removing extra features to/\n * from the selection.\n * @property {Array.<module:ol/layer/Layer>|function(module:ol/layer/Layer): boolean} [layers]\n * A list of layers from which features should be selected. Alternatively, a\n * filter function can be provided. The function will be called for each layer\n * in the map and should return `true` for layers that you want to be\n * selectable. If the option is absent, all visible layers will be considered\n * selectable.\n * @property {module:ol/style/Style|Array.<module:ol/style/Style>|module:ol/style/Style~StyleFunction} [style]\n * Style for the selected features. By default the default edit style is used\n * (see {@link module:ol/style}).\n * @property {module:ol/events/condition~Condition} [removeCondition] A function\n * that takes an {@link module:ol/MapBrowserEvent~MapBrowserEvent} and returns a\n * boolean to indicate whether that event should be handled.\n * By default, this is {@link module:ol/events/condition~never}. Use this if you\n * want to use different events for add and remove instead of `toggle`.\n * @property {module:ol/events/condition~Condition} [toggleCondition] A function\n * that takes an {@link module:ol/MapBrowserEvent~MapBrowserEvent} and returns a\n * boolean to indicate whether that event should be handled. This is in addition\n * to the `condition` event. By default,\n * {@link module:ol/events/condition~shiftKeyOnly}, i.e. pressing `shift` as\n * well as the `condition` event, adds that feature to the current selection if\n * it is not currently selected, and removes it if it is. See `add` and `remove`\n * if you want to use different events instead of a toggle.\n * @property {boolean} [multi=false] A boolean that determines if the default\n * behaviour should select only single features or all (overlapping) features at\n * the clicked map position. The default of `false` means single select.\n * @property {module:ol/Collection.<module:ol/Feature>} [features]\n * Collection where the interaction will place selected features. Optional. If\n * not set the interaction will create a collection. In any case the collection\n * used by the interaction is returned by\n * {@link module:ol/interaction/Select~Select#getFeatures}.\n * @property {module:ol/interaction/Select~FilterFunction} [filter] A function\n * that takes an {@link module:ol/Feature} and an\n * {@link module:ol/layer/Layer} and returns `true` if the feature may be\n * selected or `false` otherwise.\n * @property {boolean} [wrapX=true] Wrap the world horizontally on the selection\n * overlay.\n * @property {number} [hitTolerance=0] Hit-detection tolerance. Pixels inside\n * the radius around the given position will be checked for features. This only\n * works for the canvas renderer and not for WebGL.\n */\n\n\n/**\n * @classdesc\n * Events emitted by {@link module:ol/interaction/Select~Select} instances are instances of\n * this type.\n *\n * @param {SelectEventType} type The event type.\n * @param {Array.<module:ol/Feature>} selected Selected features.\n * @param {Array.<module:ol/Feature>} deselected Deselected features.\n * @param {module:ol/MapBrowserEvent} mapBrowserEvent Associated\n *     {@link module:ol/MapBrowserEvent}.\n * @extends {module:ol/events/Event}\n * @constructor\n */\nconst SelectEvent = function(type, selected, deselected, mapBrowserEvent) {\n  Event.call(this, type);\n\n  /**\n   * Selected features array.\n   * @type {Array.<module:ol/Feature>}\n   * @api\n   */\n  this.selected = selected;\n\n  /**\n   * Deselected features array.\n   * @type {Array.<module:ol/Feature>}\n   * @api\n   */\n  this.deselected = deselected;\n\n  /**\n   * Associated {@link module:ol/MapBrowserEvent}.\n   * @type {module:ol/MapBrowserEvent}\n   * @api\n   */\n  this.mapBrowserEvent = mapBrowserEvent;\n};\n\ninherits(SelectEvent, Event);\n\n\n/**\n * @classdesc\n * Interaction for selecting vector features. By default, selected features are\n * styled differently, so this interaction can be used for visual highlighting,\n * as well as selecting features for other actions, such as modification or\n * output. There are three ways of controlling which features are selected:\n * using the browser event as defined by the `condition` and optionally the\n * `toggle`, `add`/`remove`, and `multi` options; a `layers` filter; and a\n * further feature filter using the `filter` option.\n *\n * Selected features are added to an internal unmanaged layer.\n *\n * @constructor\n * @extends {module:ol/interaction/Interaction}\n * @param {module:ol/interaction/Select~Options=} opt_options Options.\n * @fires SelectEvent\n * @api\n */\nconst Select = function(opt_options) {\n\n  Interaction.call(this, {\n    handleEvent: handleEvent\n  });\n\n  const options = opt_options ? opt_options : {};\n\n  /**\n   * @private\n   * @type {module:ol/events/condition~Condition}\n   */\n  this.condition_ = options.condition ? options.condition : singleClick;\n\n  /**\n   * @private\n   * @type {module:ol/events/condition~Condition}\n   */\n  this.addCondition_ = options.addCondition ? options.addCondition : never;\n\n  /**\n   * @private\n   * @type {module:ol/events/condition~Condition}\n   */\n  this.removeCondition_ = options.removeCondition ? options.removeCondition : never;\n\n  /**\n   * @private\n   * @type {module:ol/events/condition~Condition}\n   */\n  this.toggleCondition_ = options.toggleCondition ? options.toggleCondition : shiftKeyOnly;\n\n  /**\n   * @private\n   * @type {boolean}\n   */\n  this.multi_ = options.multi ? options.multi : false;\n\n  /**\n   * @private\n   * @type {module:ol/interaction/Select~FilterFunction}\n   */\n  this.filter_ = options.filter ? options.filter : TRUE;\n\n  /**\n   * @private\n   * @type {number}\n   */\n  this.hitTolerance_ = options.hitTolerance ? options.hitTolerance : 0;\n\n  const featureOverlay = new VectorLayer({\n    source: new VectorSource({\n      useSpatialIndex: false,\n      features: options.features,\n      wrapX: options.wrapX\n    }),\n    style: options.style ? options.style :\n      getDefaultStyleFunction(),\n    updateWhileAnimating: true,\n    updateWhileInteracting: true\n  });\n\n  /**\n   * @private\n   * @type {module:ol/layer/Vector}\n   */\n  this.featureOverlay_ = featureOverlay;\n\n  /** @type {function(module:ol/layer/Layer): boolean} */\n  let layerFilter;\n  if (options.layers) {\n    if (typeof options.layers === 'function') {\n      layerFilter = options.layers;\n    } else {\n      const layers = options.layers;\n      layerFilter = function(layer) {\n        return includes(layers, layer);\n      };\n    }\n  } else {\n    layerFilter = TRUE;\n  }\n\n  /**\n   * @private\n   * @type {function(module:ol/layer/Layer): boolean}\n   */\n  this.layerFilter_ = layerFilter;\n\n  /**\n   * An association between selected feature (key)\n   * and layer (value)\n   * @private\n   * @type {Object.<number, module:ol/layer/Layer>}\n   */\n  this.featureLayerAssociation_ = {};\n\n  const features = this.featureOverlay_.getSource().getFeaturesCollection();\n  listen(features, CollectionEventType.ADD,\n    this.addFeature_, this);\n  listen(features, CollectionEventType.REMOVE,\n    this.removeFeature_, this);\n\n};\n\ninherits(Select, Interaction);\n\n\n/**\n * @param {module:ol/Feature|module:ol/render/Feature} feature Feature.\n * @param {module:ol/layer/Layer} layer Layer.\n * @private\n */\nSelect.prototype.addFeatureLayerAssociation_ = function(feature, layer) {\n  const key = getUid(feature);\n  this.featureLayerAssociation_[key] = layer;\n};\n\n\n/**\n * Get the selected features.\n * @return {module:ol/Collection.<module:ol/Feature>} Features collection.\n * @api\n */\nSelect.prototype.getFeatures = function() {\n  return this.featureOverlay_.getSource().getFeaturesCollection();\n};\n\n\n/**\n * Returns the Hit-detection tolerance.\n * @returns {number} Hit tolerance in pixels.\n * @api\n */\nSelect.prototype.getHitTolerance = function() {\n  return this.hitTolerance_;\n};\n\n\n/**\n * Returns the associated {@link module:ol/layer/Vector~Vector vectorlayer} of\n * the (last) selected feature. Note that this will not work with any\n * programmatic method like pushing features to\n * {@link module:ol/interaction/Select~Select#getFeatures collection}.\n * @param {module:ol/Feature|module:ol/render/Feature} feature Feature\n * @return {module:ol/layer/Vector} Layer.\n * @api\n */\nSelect.prototype.getLayer = function(feature) {\n  const key = getUid(feature);\n  return (\n    /** @type {module:ol/layer/Vector} */ (this.featureLayerAssociation_[key])\n  );\n};\n\n\n/**\n * Handles the {@link module:ol/MapBrowserEvent map browser event} and may change the\n * selected state of features.\n * @param {module:ol/MapBrowserEvent} mapBrowserEvent Map browser event.\n * @return {boolean} `false` to stop event propagation.\n * @this {module:ol/interaction/Select}\n */\nfunction handleEvent(mapBrowserEvent) {\n  if (!this.condition_(mapBrowserEvent)) {\n    return true;\n  }\n  const add = this.addCondition_(mapBrowserEvent);\n  const remove = this.removeCondition_(mapBrowserEvent);\n  const toggle = this.toggleCondition_(mapBrowserEvent);\n  const set = !add && !remove && !toggle;\n  const map = mapBrowserEvent.map;\n  const features = this.featureOverlay_.getSource().getFeaturesCollection();\n  const deselected = [];\n  const selected = [];\n  if (set) {\n    // Replace the currently selected feature(s) with the feature(s) at the\n    // pixel, or clear the selected feature(s) if there is no feature at\n    // the pixel.\n    clear(this.featureLayerAssociation_);\n    map.forEachFeatureAtPixel(mapBrowserEvent.pixel,\n      (\n        /**\n         * @param {module:ol/Feature|module:ol/render/Feature} feature Feature.\n         * @param {module:ol/layer/Layer} layer Layer.\n         * @return {boolean|undefined} Continue to iterate over the features.\n         */\n        function(feature, layer) {\n          if (this.filter_(feature, layer)) {\n            selected.push(feature);\n            this.addFeatureLayerAssociation_(feature, layer);\n            return !this.multi_;\n          }\n        }).bind(this), {\n        layerFilter: this.layerFilter_,\n        hitTolerance: this.hitTolerance_\n      });\n    for (let i = features.getLength() - 1; i >= 0; --i) {\n      const feature = features.item(i);\n      const index = selected.indexOf(feature);\n      if (index > -1) {\n        // feature is already selected\n        selected.splice(index, 1);\n      } else {\n        features.remove(feature);\n        deselected.push(feature);\n      }\n    }\n    if (selected.length !== 0) {\n      features.extend(selected);\n    }\n  } else {\n    // Modify the currently selected feature(s).\n    map.forEachFeatureAtPixel(mapBrowserEvent.pixel,\n      (\n        /**\n         * @param {module:ol/Feature|module:ol/render/Feature} feature Feature.\n         * @param {module:ol/layer/Layer} layer Layer.\n         * @return {boolean|undefined} Continue to iterate over the features.\n         */\n        function(feature, layer) {\n          if (this.filter_(feature, layer)) {\n            if ((add || toggle) && !includes(features.getArray(), feature)) {\n              selected.push(feature);\n              this.addFeatureLayerAssociation_(feature, layer);\n            } else if ((remove || toggle) && includes(features.getArray(), feature)) {\n              deselected.push(feature);\n              this.removeFeatureLayerAssociation_(feature);\n            }\n            return !this.multi_;\n          }\n        }).bind(this), {\n        layerFilter: this.layerFilter_,\n        hitTolerance: this.hitTolerance_\n      });\n    for (let j = deselected.length - 1; j >= 0; --j) {\n      features.remove(deselected[j]);\n    }\n    features.extend(selected);\n  }\n  if (selected.length > 0 || deselected.length > 0) {\n    this.dispatchEvent(\n      new SelectEvent(SelectEventType.SELECT,\n        selected, deselected, mapBrowserEvent));\n  }\n  return pointerMove(mapBrowserEvent);\n}\n\n\n/**\n * Hit-detection tolerance. Pixels inside the radius around the given position\n * will be checked for features. This only works for the canvas renderer and\n * not for WebGL.\n * @param {number} hitTolerance Hit tolerance in pixels.\n * @api\n */\nSelect.prototype.setHitTolerance = function(hitTolerance) {\n  this.hitTolerance_ = hitTolerance;\n};\n\n\n/**\n * Remove the interaction from its current map, if any,  and attach it to a new\n * map, if any. Pass `null` to just remove the interaction from the current map.\n * @param {module:ol/PluggableMap} map Map.\n * @override\n * @api\n */\nSelect.prototype.setMap = function(map) {\n  const currentMap = this.getMap();\n  const selectedFeatures =\n      this.featureOverlay_.getSource().getFeaturesCollection();\n  if (currentMap) {\n    selectedFeatures.forEach(currentMap.unskipFeature.bind(currentMap));\n  }\n  Interaction.prototype.setMap.call(this, map);\n  this.featureOverlay_.setMap(map);\n  if (map) {\n    selectedFeatures.forEach(map.skipFeature.bind(map));\n  }\n};\n\n\n/**\n * @return {module:ol/style/Style~StyleFunction} Styles.\n */\nfunction getDefaultStyleFunction() {\n  const styles = createEditingStyle();\n  extend(styles[GeometryType.POLYGON], styles[GeometryType.LINE_STRING]);\n  extend(styles[GeometryType.GEOMETRY_COLLECTION], styles[GeometryType.LINE_STRING]);\n\n  return function(feature, resolution) {\n    if (!feature.getGeometry()) {\n      return null;\n    }\n    return styles[feature.getGeometry().getType()];\n  };\n}\n\n\n/**\n * @param {module:ol/Collection~CollectionEvent} evt Event.\n * @private\n */\nSelect.prototype.addFeature_ = function(evt) {\n  const map = this.getMap();\n  if (map) {\n    map.skipFeature(/** @type {module:ol/Feature} */ (evt.element));\n  }\n};\n\n\n/**\n * @param {module:ol/Collection~CollectionEvent} evt Event.\n * @private\n */\nSelect.prototype.removeFeature_ = function(evt) {\n  const map = this.getMap();\n  if (map) {\n    map.unskipFeature(/** @type {module:ol/Feature} */ (evt.element));\n  }\n};\n\n\n/**\n * @param {module:ol/Feature|module:ol/render/Feature} feature Feature.\n * @private\n */\nSelect.prototype.removeFeatureLayerAssociation_ = function(feature) {\n  const key = getUid(feature);\n  delete this.featureLayerAssociation_[key];\n};\n\n\nexport default Select;\n","/**\n * @module ol/pointer/EventType\n */\n\n/**\n * Constants for event names.\n * @enum {string}\n */\nexport default {\n  POINTERMOVE: 'pointermove',\n  POINTERDOWN: 'pointerdown',\n  POINTERUP: 'pointerup',\n  POINTEROVER: 'pointerover',\n  POINTEROUT: 'pointerout',\n  POINTERENTER: 'pointerenter',\n  POINTERLEAVE: 'pointerleave',\n  POINTERCANCEL: 'pointercancel'\n};\n","/**\n * @module ol/OverlayPositioning\n */\n\n/**\n * Overlay position: `'bottom-left'`, `'bottom-center'`,  `'bottom-right'`,\n * `'center-left'`, `'center-center'`, `'center-right'`, `'top-left'`,\n * `'top-center'`, `'top-right'`\n * @enum {string}\n */\nexport default {\n  BOTTOM_LEFT: 'bottom-left',\n  BOTTOM_CENTER: 'bottom-center',\n  BOTTOM_RIGHT: 'bottom-right',\n  CENTER_LEFT: 'center-left',\n  CENTER_CENTER: 'center-center',\n  CENTER_RIGHT: 'center-right',\n  TOP_LEFT: 'top-left',\n  TOP_CENTER: 'top-center',\n  TOP_RIGHT: 'top-right'\n};\n","/**\n * @module ol/source/WMTSRequestEncoding\n */\n\n/**\n * Request encoding. One of 'KVP', 'REST'.\n * @enum {string}\n */\nexport default {\n  KVP: 'KVP',  // see spec §8\n  REST: 'REST' // see spec §10\n};\n","/**\n * @module ol/source/WMTS\n */\nimport {inherits} from '../util.js';\nimport {expandUrl, createFromTileUrlFunctions, nullTileUrlFunction} from '../tileurlfunction.js';\nimport {find, findIndex, includes} from '../array.js';\nimport {containsExtent} from '../extent.js';\nimport {assign} from '../obj.js';\nimport {get as getProjection, equivalent, transformExtent} from '../proj.js';\nimport TileImage from '../source/TileImage.js';\nimport WMTSRequestEncoding from '../source/WMTSRequestEncoding.js';\nimport {createFromCapabilitiesMatrixSet} from '../tilegrid/WMTS.js';\nimport {appendParams} from '../uri.js';\n\n/**\n * @typedef {Object} Options\n * @property {module:ol/source/Source~AttributionLike} [attributions] Attributions.\n * @property {number} [cacheSize=2048] Cache size.\n * @property {null|string} [crossOrigin] The `crossOrigin` attribute for loaded images.  Note that\n * you must provide a `crossOrigin` value if you are using the WebGL renderer or if you want to\n * access pixel data with the Canvas renderer.  See\n * {@link https://developer.mozilla.org/en-US/docs/Web/HTML/CORS_enabled_image} for more detail.\n * @property {module:ol/tilegrid/WMTS} tileGrid Tile grid.\n * @property {module:ol/proj~ProjectionLike} projection Projection.\n * @property {boolean} [reprojectionErrorThreshold=0.5] Maximum allowed reprojection error (in pixels).\n * Higher values can increase reprojection performance, but decrease precision.\n * @property {module:ol/source/WMTSRequestEncoding|string} [requestEncoding='KVP'] Request encoding.\n * @property {string} layer Layer name as advertised in the WMTS capabilities.\n * @property {string} style Style name as advertised in the WMTS capabilities.\n * @property {module:ol/ImageTile~TileClass} [tileClass]  Class used to instantiate image tiles. Default is {@link module:ol/ImageTile~ImageTile}.\n * @property {number} [tilePixelRatio=1] The pixel ratio used by the tile service.\n * For example, if the tile service advertizes 256px by 256px tiles but actually sends 512px\n * by 512px images (for retina/hidpi devices) then `tilePixelRatio`\n * should be set to `2`.\n * @property {string} [version='image/jpeg'] Image format.\n * @property {string} [format='1.0.0'] WMTS version.\n * @property {string} matrixSet Matrix set.\n * @property {!Object} [dimensions] Additional \"dimensions\" for tile requests.\n * This is an object with properties named like the advertised WMTS dimensions.\n * @property {string} [url]  A URL for the service.\n * For the RESTful request encoding, this is a URL\n * template.  For KVP encoding, it is normal URL. A `{?-?}` template pattern,\n * for example `subdomain{a-f}.domain.com`, may be used instead of defining\n * each one separately in the `urls` option.\n * @property {module:ol/Tile~LoadFunction} [tileLoadFunction] Optional function to load a tile given a URL. The default is\n * ```js\n * function(imageTile, src) {\n *   imageTile.getImage().src = src;\n * };\n * ```\n * @property {Array.<string>} [urls] An array of URLs.\n * Requests will be distributed among the URLs in this array.\n * @property {boolean} [wrapX=false] Whether to wrap the world horizontally.\n * @property {number} [transition] Duration of the opacity transition for rendering.\n * To disable the opacity transition, pass `transition: 0`.\n */\n\n\n/**\n * @classdesc\n * Layer source for tile data from WMTS servers.\n *\n * @constructor\n * @extends {module:ol/source/TileImage}\n * @param {module:ol/source/WMTS~Options=} options WMTS options.\n * @api\n */\nconst WMTS = function(options) {\n\n  // TODO: add support for TileMatrixLimits\n\n  /**\n   * @private\n   * @type {string}\n   */\n  this.version_ = options.version !== undefined ? options.version : '1.0.0';\n\n  /**\n   * @private\n   * @type {string}\n   */\n  this.format_ = options.format !== undefined ? options.format : 'image/jpeg';\n\n  /**\n   * @private\n   * @type {!Object}\n   */\n  this.dimensions_ = options.dimensions !== undefined ? options.dimensions : {};\n\n  /**\n   * @private\n   * @type {string}\n   */\n  this.layer_ = options.layer;\n\n  /**\n   * @private\n   * @type {string}\n   */\n  this.matrixSet_ = options.matrixSet;\n\n  /**\n   * @private\n   * @type {string}\n   */\n  this.style_ = options.style;\n\n  let urls = options.urls;\n  if (urls === undefined && options.url !== undefined) {\n    urls = expandUrl(options.url);\n  }\n\n  // FIXME: should we guess this requestEncoding from options.url(s)\n  //        structure? that would mean KVP only if a template is not provided.\n\n  /**\n   * @private\n   * @type {module:ol/source/WMTSRequestEncoding}\n   */\n  this.requestEncoding_ = options.requestEncoding !== undefined ?\n    /** @type {module:ol/source/WMTSRequestEncoding} */ (options.requestEncoding) :\n    WMTSRequestEncoding.KVP;\n\n  const requestEncoding = this.requestEncoding_;\n\n  // FIXME: should we create a default tileGrid?\n  // we could issue a getCapabilities xhr to retrieve missing configuration\n  const tileGrid = options.tileGrid;\n\n  // context property names are lower case to allow for a case insensitive\n  // replacement as some services use different naming conventions\n  const context = {\n    'layer': this.layer_,\n    'style': this.style_,\n    'tilematrixset': this.matrixSet_\n  };\n\n  if (requestEncoding == WMTSRequestEncoding.KVP) {\n    assign(context, {\n      'Service': 'WMTS',\n      'Request': 'GetTile',\n      'Version': this.version_,\n      'Format': this.format_\n    });\n  }\n\n  const dimensions = this.dimensions_;\n\n  /**\n   * @param {string} template Template.\n   * @return {module:ol/Tile~UrlFunction} Tile URL function.\n   * @private\n   */\n  this.createFromWMTSTemplate_ = function(template) {\n\n    // TODO: we may want to create our own appendParams function so that params\n    // order conforms to wmts spec guidance, and so that we can avoid to escape\n    // special template params\n\n    template = (requestEncoding == WMTSRequestEncoding.KVP) ?\n      appendParams(template, context) :\n      template.replace(/\\{(\\w+?)\\}/g, function(m, p) {\n        return (p.toLowerCase() in context) ? context[p.toLowerCase()] : m;\n      });\n\n    return (\n      /**\n       * @param {module:ol/tilecoord~TileCoord} tileCoord Tile coordinate.\n       * @param {number} pixelRatio Pixel ratio.\n       * @param {module:ol/proj/Projection} projection Projection.\n       * @return {string|undefined} Tile URL.\n       */\n      function(tileCoord, pixelRatio, projection) {\n        if (!tileCoord) {\n          return undefined;\n        } else {\n          const localContext = {\n            'TileMatrix': tileGrid.getMatrixId(tileCoord[0]),\n            'TileCol': tileCoord[1],\n            'TileRow': -tileCoord[2] - 1\n          };\n          assign(localContext, dimensions);\n          let url = template;\n          if (requestEncoding == WMTSRequestEncoding.KVP) {\n            url = appendParams(url, localContext);\n          } else {\n            url = url.replace(/\\{(\\w+?)\\}/g, function(m, p) {\n              return localContext[p];\n            });\n          }\n          return url;\n        }\n      }\n    );\n  };\n\n  const tileUrlFunction = (urls && urls.length > 0) ?\n    createFromTileUrlFunctions(urls.map(this.createFromWMTSTemplate_)) : nullTileUrlFunction;\n\n  TileImage.call(this, {\n    attributions: options.attributions,\n    cacheSize: options.cacheSize,\n    crossOrigin: options.crossOrigin,\n    projection: options.projection,\n    reprojectionErrorThreshold: options.reprojectionErrorThreshold,\n    tileClass: options.tileClass,\n    tileGrid: tileGrid,\n    tileLoadFunction: options.tileLoadFunction,\n    tilePixelRatio: options.tilePixelRatio,\n    tileUrlFunction: tileUrlFunction,\n    urls: urls,\n    wrapX: options.wrapX !== undefined ? options.wrapX : false,\n    transition: options.transition\n  });\n\n  this.setKey(this.getKeyForDimensions_());\n\n};\n\ninherits(WMTS, TileImage);\n\n/**\n * Set the URLs to use for requests.\n * URLs may contain OCG conform URL Template Variables: {TileMatrix}, {TileRow}, {TileCol}.\n * @override\n */\nWMTS.prototype.setUrls = function(urls) {\n  this.urls = urls;\n  const key = urls.join('\\n');\n  this.setTileUrlFunction(this.fixedTileUrlFunction ?\n    this.fixedTileUrlFunction.bind(this) :\n    createFromTileUrlFunctions(urls.map(this.createFromWMTSTemplate_.bind(this))), key);\n};\n\n/**\n * Get the dimensions, i.e. those passed to the constructor through the\n * \"dimensions\" option, and possibly updated using the updateDimensions\n * method.\n * @return {!Object} Dimensions.\n * @api\n */\nWMTS.prototype.getDimensions = function() {\n  return this.dimensions_;\n};\n\n\n/**\n * Return the image format of the WMTS source.\n * @return {string} Format.\n * @api\n */\nWMTS.prototype.getFormat = function() {\n  return this.format_;\n};\n\n\n/**\n * Return the layer of the WMTS source.\n * @return {string} Layer.\n * @api\n */\nWMTS.prototype.getLayer = function() {\n  return this.layer_;\n};\n\n\n/**\n * Return the matrix set of the WMTS source.\n * @return {string} MatrixSet.\n * @api\n */\nWMTS.prototype.getMatrixSet = function() {\n  return this.matrixSet_;\n};\n\n\n/**\n * Return the request encoding, either \"KVP\" or \"REST\".\n * @return {module:ol/source/WMTSRequestEncoding} Request encoding.\n * @api\n */\nWMTS.prototype.getRequestEncoding = function() {\n  return this.requestEncoding_;\n};\n\n\n/**\n * Return the style of the WMTS source.\n * @return {string} Style.\n * @api\n */\nWMTS.prototype.getStyle = function() {\n  return this.style_;\n};\n\n\n/**\n * Return the version of the WMTS source.\n * @return {string} Version.\n * @api\n */\nWMTS.prototype.getVersion = function() {\n  return this.version_;\n};\n\n\n/**\n * @private\n * @return {string} The key for the current dimensions.\n */\nWMTS.prototype.getKeyForDimensions_ = function() {\n  let i = 0;\n  const res = [];\n  for (const key in this.dimensions_) {\n    res[i++] = key + '-' + this.dimensions_[key];\n  }\n  return res.join('/');\n};\n\n\n/**\n * Update the dimensions.\n * @param {Object} dimensions Dimensions.\n * @api\n */\nWMTS.prototype.updateDimensions = function(dimensions) {\n  assign(this.dimensions_, dimensions);\n  this.setKey(this.getKeyForDimensions_());\n};\n\n\n/**\n * Generate source options from a capabilities object.\n * @param {Object} wmtsCap An object representing the capabilities document.\n * @param {!Object} config Configuration properties for the layer.  Defaults for\n *                  the layer will apply if not provided.\n *\n * Required config properties:\n *  - layer - {string} The layer identifier.\n *\n * Optional config properties:\n *  - matrixSet - {string} The matrix set identifier, required if there is\n *       more than one matrix set in the layer capabilities.\n *  - projection - {string} The desired CRS when no matrixSet is specified.\n *       eg: \"EPSG:3857\". If the desired projection is not available,\n *       an error is thrown.\n *  - requestEncoding - {string} url encoding format for the layer. Default is\n *       the first tile url format found in the GetCapabilities response.\n *  - style - {string} The name of the style\n *  - format - {string} Image format for the layer. Default is the first\n *       format returned in the GetCapabilities response.\n *  - crossOrigin - {string|null|undefined} Cross origin. Default is `undefined`.\n * @return {?module:ol/source/WMTS~Options} WMTS source options object or `null` if the layer was not found.\n * @api\n */\nexport function optionsFromCapabilities(wmtsCap, config) {\n  const layers = wmtsCap['Contents']['Layer'];\n  const l = find(layers, function(elt, index, array) {\n    return elt['Identifier'] == config['layer'];\n  });\n  if (l === null) {\n    return null;\n  }\n  const tileMatrixSets = wmtsCap['Contents']['TileMatrixSet'];\n  let idx;\n  if (l['TileMatrixSetLink'].length > 1) {\n    if ('projection' in config) {\n      idx = findIndex(l['TileMatrixSetLink'],\n        function(elt, index, array) {\n          const tileMatrixSet = find(tileMatrixSets, function(el) {\n            return el['Identifier'] == elt['TileMatrixSet'];\n          });\n          const supportedCRS = tileMatrixSet['SupportedCRS'];\n          const proj1 = getProjection(supportedCRS.replace(/urn:ogc:def:crs:(\\w+):(.*:)?(\\w+)$/, '$1:$3')) ||\n                getProjection(supportedCRS);\n          const proj2 = getProjection(config['projection']);\n          if (proj1 && proj2) {\n            return equivalent(proj1, proj2);\n          } else {\n            return supportedCRS == config['projection'];\n          }\n        });\n    } else {\n      idx = findIndex(l['TileMatrixSetLink'],\n        function(elt, index, array) {\n          return elt['TileMatrixSet'] == config['matrixSet'];\n        });\n    }\n  } else {\n    idx = 0;\n  }\n  if (idx < 0) {\n    idx = 0;\n  }\n  const matrixSet = /** @type {string} */\n    (l['TileMatrixSetLink'][idx]['TileMatrixSet']);\n  const matrixLimits = /** @type {Array.<Object>} */\n    (l['TileMatrixSetLink'][idx]['TileMatrixSetLimits']);\n\n  let format = /** @type {string} */ (l['Format'][0]);\n  if ('format' in config) {\n    format = config['format'];\n  }\n  idx = findIndex(l['Style'], function(elt, index, array) {\n    if ('style' in config) {\n      return elt['Title'] == config['style'];\n    } else {\n      return elt['isDefault'];\n    }\n  });\n  if (idx < 0) {\n    idx = 0;\n  }\n  const style = /** @type {string} */ (l['Style'][idx]['Identifier']);\n\n  const dimensions = {};\n  if ('Dimension' in l) {\n    l['Dimension'].forEach(function(elt, index, array) {\n      const key = elt['Identifier'];\n      let value = elt['Default'];\n      if (value === undefined) {\n        value = elt['Value'][0];\n      }\n      dimensions[key] = value;\n    });\n  }\n\n  const matrixSets = wmtsCap['Contents']['TileMatrixSet'];\n  const matrixSetObj = find(matrixSets, function(elt, index, array) {\n    return elt['Identifier'] == matrixSet;\n  });\n\n  let projection;\n  const code = matrixSetObj['SupportedCRS'];\n  if (code) {\n    projection = getProjection(code.replace(/urn:ogc:def:crs:(\\w+):(.*:)?(\\w+)$/, '$1:$3')) ||\n        getProjection(code);\n  }\n  if ('projection' in config) {\n    const projConfig = getProjection(config['projection']);\n    if (projConfig) {\n      if (!projection || equivalent(projConfig, projection)) {\n        projection = projConfig;\n      }\n    }\n  }\n\n  const wgs84BoundingBox = l['WGS84BoundingBox'];\n  let extent, wrapX;\n  if (wgs84BoundingBox !== undefined) {\n    const wgs84ProjectionExtent = getProjection('EPSG:4326').getExtent();\n    wrapX = (wgs84BoundingBox[0] == wgs84ProjectionExtent[0] &&\n        wgs84BoundingBox[2] == wgs84ProjectionExtent[2]);\n    extent = transformExtent(\n      wgs84BoundingBox, 'EPSG:4326', projection);\n    const projectionExtent = projection.getExtent();\n    if (projectionExtent) {\n      // If possible, do a sanity check on the extent - it should never be\n      // bigger than the validity extent of the projection of a matrix set.\n      if (!containsExtent(projectionExtent, extent)) {\n        extent = undefined;\n      }\n    }\n  }\n\n  const tileGrid = createFromCapabilitiesMatrixSet(matrixSetObj, extent, matrixLimits);\n\n  /** @type {!Array.<string>} */\n  const urls = [];\n  let requestEncoding = config['requestEncoding'];\n  requestEncoding = requestEncoding !== undefined ? requestEncoding : '';\n\n  if ('OperationsMetadata' in wmtsCap && 'GetTile' in wmtsCap['OperationsMetadata']) {\n    const gets = wmtsCap['OperationsMetadata']['GetTile']['DCP']['HTTP']['Get'];\n\n    for (let i = 0, ii = gets.length; i < ii; ++i) {\n      if (gets[i]['Constraint']) {\n        const constraint = find(gets[i]['Constraint'], function(element) {\n          return element['name'] == 'GetEncoding';\n        });\n        const encodings = constraint['AllowedValues']['Value'];\n\n        if (requestEncoding === '') {\n          // requestEncoding not provided, use the first encoding from the list\n          requestEncoding = encodings[0];\n        }\n        if (requestEncoding === WMTSRequestEncoding.KVP) {\n          if (includes(encodings, WMTSRequestEncoding.KVP)) {\n            urls.push(/** @type {string} */ (gets[i]['href']));\n          }\n        } else {\n          break;\n        }\n      } else if (gets[i]['href']) {\n        requestEncoding = WMTSRequestEncoding.KVP;\n        urls.push(/** @type {string} */ (gets[i]['href']));\n      }\n    }\n  }\n  if (urls.length === 0) {\n    requestEncoding = WMTSRequestEncoding.REST;\n    l['ResourceURL'].forEach(function(element) {\n      if (element['resourceType'] === 'tile') {\n        format = element['format'];\n        urls.push(/** @type {string} */ (element['template']));\n      }\n    });\n  }\n\n  return {\n    urls: urls,\n    layer: config['layer'],\n    matrixSet: matrixSet,\n    format: format,\n    projection: projection,\n    requestEncoding: requestEncoding,\n    tileGrid: tileGrid,\n    style: style,\n    dimensions: dimensions,\n    wrapX: wrapX,\n    crossOrigin: config['crossOrigin']\n  };\n}\n\nexport default WMTS;\n","/**\n * @module ol/geom/flat/closest\n */\nimport {lerp, squaredDistance as squaredDx} from '../../math.js';\n\n\n/**\n * Returns the point on the 2D line segment flatCoordinates[offset1] to\n * flatCoordinates[offset2] that is closest to the point (x, y).  Extra\n * dimensions are linearly interpolated.\n * @param {Array.<number>} flatCoordinates Flat coordinates.\n * @param {number} offset1 Offset 1.\n * @param {number} offset2 Offset 2.\n * @param {number} stride Stride.\n * @param {number} x X.\n * @param {number} y Y.\n * @param {Array.<number>} closestPoint Closest point.\n */\nfunction assignClosest(flatCoordinates, offset1, offset2, stride, x, y, closestPoint) {\n  const x1 = flatCoordinates[offset1];\n  const y1 = flatCoordinates[offset1 + 1];\n  const dx = flatCoordinates[offset2] - x1;\n  const dy = flatCoordinates[offset2 + 1] - y1;\n  let offset;\n  if (dx === 0 && dy === 0) {\n    offset = offset1;\n  } else {\n    const t = ((x - x1) * dx + (y - y1) * dy) / (dx * dx + dy * dy);\n    if (t > 1) {\n      offset = offset2;\n    } else if (t > 0) {\n      for (let i = 0; i < stride; ++i) {\n        closestPoint[i] = lerp(flatCoordinates[offset1 + i],\n          flatCoordinates[offset2 + i], t);\n      }\n      closestPoint.length = stride;\n      return;\n    } else {\n      offset = offset1;\n    }\n  }\n  for (let i = 0; i < stride; ++i) {\n    closestPoint[i] = flatCoordinates[offset + i];\n  }\n  closestPoint.length = stride;\n}\n\n\n/**\n * Return the squared of the largest distance between any pair of consecutive\n * coordinates.\n * @param {Array.<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {number} end End.\n * @param {number} stride Stride.\n * @param {number} max Max squared delta.\n * @return {number} Max squared delta.\n */\nexport function maxSquaredDelta(flatCoordinates, offset, end, stride, max) {\n  let x1 = flatCoordinates[offset];\n  let y1 = flatCoordinates[offset + 1];\n  for (offset += stride; offset < end; offset += stride) {\n    const x2 = flatCoordinates[offset];\n    const y2 = flatCoordinates[offset + 1];\n    const squaredDelta = squaredDx(x1, y1, x2, y2);\n    if (squaredDelta > max) {\n      max = squaredDelta;\n    }\n    x1 = x2;\n    y1 = y2;\n  }\n  return max;\n}\n\n\n/**\n * @param {Array.<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {Array.<number>} ends Ends.\n * @param {number} stride Stride.\n * @param {number} max Max squared delta.\n * @return {number} Max squared delta.\n */\nexport function arrayMaxSquaredDelta(flatCoordinates, offset, ends, stride, max) {\n  for (let i = 0, ii = ends.length; i < ii; ++i) {\n    const end = ends[i];\n    max = maxSquaredDelta(\n      flatCoordinates, offset, end, stride, max);\n    offset = end;\n  }\n  return max;\n}\n\n\n/**\n * @param {Array.<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {Array.<Array.<number>>} endss Endss.\n * @param {number} stride Stride.\n * @param {number} max Max squared delta.\n * @return {number} Max squared delta.\n */\nexport function multiArrayMaxSquaredDelta(flatCoordinates, offset, endss, stride, max) {\n  for (let i = 0, ii = endss.length; i < ii; ++i) {\n    const ends = endss[i];\n    max = arrayMaxSquaredDelta(\n      flatCoordinates, offset, ends, stride, max);\n    offset = ends[ends.length - 1];\n  }\n  return max;\n}\n\n\n/**\n * @param {Array.<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {number} end End.\n * @param {number} stride Stride.\n * @param {number} maxDelta Max delta.\n * @param {boolean} isRing Is ring.\n * @param {number} x X.\n * @param {number} y Y.\n * @param {Array.<number>} closestPoint Closest point.\n * @param {number} minSquaredDistance Minimum squared distance.\n * @param {Array.<number>=} opt_tmpPoint Temporary point object.\n * @return {number} Minimum squared distance.\n */\nexport function assignClosestPoint(flatCoordinates, offset, end,\n  stride, maxDelta, isRing, x, y, closestPoint, minSquaredDistance,\n  opt_tmpPoint) {\n  if (offset == end) {\n    return minSquaredDistance;\n  }\n  let i, squaredDistance;\n  if (maxDelta === 0) {\n    // All points are identical, so just test the first point.\n    squaredDistance = squaredDx(\n      x, y, flatCoordinates[offset], flatCoordinates[offset + 1]);\n    if (squaredDistance < minSquaredDistance) {\n      for (i = 0; i < stride; ++i) {\n        closestPoint[i] = flatCoordinates[offset + i];\n      }\n      closestPoint.length = stride;\n      return squaredDistance;\n    } else {\n      return minSquaredDistance;\n    }\n  }\n  const tmpPoint = opt_tmpPoint ? opt_tmpPoint : [NaN, NaN];\n  let index = offset + stride;\n  while (index < end) {\n    assignClosest(\n      flatCoordinates, index - stride, index, stride, x, y, tmpPoint);\n    squaredDistance = squaredDx(x, y, tmpPoint[0], tmpPoint[1]);\n    if (squaredDistance < minSquaredDistance) {\n      minSquaredDistance = squaredDistance;\n      for (i = 0; i < stride; ++i) {\n        closestPoint[i] = tmpPoint[i];\n      }\n      closestPoint.length = stride;\n      index += stride;\n    } else {\n      // Skip ahead multiple points, because we know that all the skipped\n      // points cannot be any closer than the closest point we have found so\n      // far.  We know this because we know how close the current point is, how\n      // close the closest point we have found so far is, and the maximum\n      // distance between consecutive points.  For example, if we're currently\n      // at distance 10, the best we've found so far is 3, and that the maximum\n      // distance between consecutive points is 2, then we'll need to skip at\n      // least (10 - 3) / 2 == 3 (rounded down) points to have any chance of\n      // finding a closer point.  We use Math.max(..., 1) to ensure that we\n      // always advance at least one point, to avoid an infinite loop.\n      index += stride * Math.max(\n        ((Math.sqrt(squaredDistance) -\n            Math.sqrt(minSquaredDistance)) / maxDelta) | 0, 1);\n    }\n  }\n  if (isRing) {\n    // Check the closing segment.\n    assignClosest(\n      flatCoordinates, end - stride, offset, stride, x, y, tmpPoint);\n    squaredDistance = squaredDx(x, y, tmpPoint[0], tmpPoint[1]);\n    if (squaredDistance < minSquaredDistance) {\n      minSquaredDistance = squaredDistance;\n      for (i = 0; i < stride; ++i) {\n        closestPoint[i] = tmpPoint[i];\n      }\n      closestPoint.length = stride;\n    }\n  }\n  return minSquaredDistance;\n}\n\n\n/**\n * @param {Array.<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {Array.<number>} ends Ends.\n * @param {number} stride Stride.\n * @param {number} maxDelta Max delta.\n * @param {boolean} isRing Is ring.\n * @param {number} x X.\n * @param {number} y Y.\n * @param {Array.<number>} closestPoint Closest point.\n * @param {number} minSquaredDistance Minimum squared distance.\n * @param {Array.<number>=} opt_tmpPoint Temporary point object.\n * @return {number} Minimum squared distance.\n */\nexport function assignClosestArrayPoint(flatCoordinates, offset, ends,\n  stride, maxDelta, isRing, x, y, closestPoint, minSquaredDistance,\n  opt_tmpPoint) {\n  const tmpPoint = opt_tmpPoint ? opt_tmpPoint : [NaN, NaN];\n  for (let i = 0, ii = ends.length; i < ii; ++i) {\n    const end = ends[i];\n    minSquaredDistance = assignClosestPoint(\n      flatCoordinates, offset, end, stride,\n      maxDelta, isRing, x, y, closestPoint, minSquaredDistance, tmpPoint);\n    offset = end;\n  }\n  return minSquaredDistance;\n}\n\n\n/**\n * @param {Array.<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {Array.<Array.<number>>} endss Endss.\n * @param {number} stride Stride.\n * @param {number} maxDelta Max delta.\n * @param {boolean} isRing Is ring.\n * @param {number} x X.\n * @param {number} y Y.\n * @param {Array.<number>} closestPoint Closest point.\n * @param {number} minSquaredDistance Minimum squared distance.\n * @param {Array.<number>=} opt_tmpPoint Temporary point object.\n * @return {number} Minimum squared distance.\n */\nexport function assignClosestMultiArrayPoint(flatCoordinates, offset,\n  endss, stride, maxDelta, isRing, x, y, closestPoint, minSquaredDistance,\n  opt_tmpPoint) {\n  const tmpPoint = opt_tmpPoint ? opt_tmpPoint : [NaN, NaN];\n  for (let i = 0, ii = endss.length; i < ii; ++i) {\n    const ends = endss[i];\n    minSquaredDistance = assignClosestArrayPoint(\n      flatCoordinates, offset, ends, stride,\n      maxDelta, isRing, x, y, closestPoint, minSquaredDistance, tmpPoint);\n    offset = ends[ends.length - 1];\n  }\n  return minSquaredDistance;\n}\n","/**\n * @module ol/format/KML\n */\nimport {inherits} from '../util.js';\nimport Feature from '../Feature.js';\nimport {extend, includes} from '../array.js';\nimport {assert} from '../asserts.js';\nimport {asArray} from '../color.js';\nimport {transformWithOptions} from '../format/Feature.js';\nimport XMLFeature from '../format/XMLFeature.js';\nimport {readDecimal, readBoolean, readString, writeStringTextNode, writeCDATASection, writeDecimalTextNode, writeBooleanTextNode} from '../format/xsd.js';\nimport GeometryCollection from '../geom/GeometryCollection.js';\nimport GeometryLayout from '../geom/GeometryLayout.js';\nimport GeometryType from '../geom/GeometryType.js';\nimport LineString from '../geom/LineString.js';\nimport MultiLineString from '../geom/MultiLineString.js';\nimport MultiPoint from '../geom/MultiPoint.js';\nimport MultiPolygon from '../geom/MultiPolygon.js';\nimport Point from '../geom/Point.js';\nimport Polygon from '../geom/Polygon.js';\nimport {toRadians} from '../math.js';\nimport {get as getProjection} from '../proj.js';\nimport Fill from '../style/Fill.js';\nimport Icon from '../style/Icon.js';\nimport IconAnchorUnits from '../style/IconAnchorUnits.js';\nimport IconOrigin from '../style/IconOrigin.js';\nimport Stroke from '../style/Stroke.js';\nimport Style from '../style/Style.js';\nimport Text from '../style/Text.js';\nimport {createElementNS, getAllTextContent, isDocument, isNode, makeArrayExtender,\n  makeArrayPusher, makeChildAppender, makeObjectPropertySetter,\n  makeReplacer, makeSequence, makeSimpleNodeFactory, makeStructureNS,\n  OBJECT_PROPERTY_NODE_FACTORY, parse, parseNode, pushParseAndPop,\n  pushSerializeAndPop, XML_SCHEMA_INSTANCE_URI} from '../xml.js';\n\n/**\n * @typedef {Object} Vec2\n * @property {number} x\n * @property {module:ol/style/IconAnchorUnits} xunits\n * @property {number} y\n * @property {module:ol/style/IconAnchorUnits} yunits\n * @property {module:ol/style/IconOrigin} origin\n */\n\n/**\n * @typedef {Object} GxTrackObject\n * @property {Array.<number>} flatCoordinates\n * @property {Array.<number>} whens\n */\n\n/**\n * @type {module:ol/color~Color}\n */\nlet DEFAULT_COLOR;\n\n/**\n * @type {module:ol/style/Fill}\n */\nlet DEFAULT_FILL_STYLE = null;\n\n/**\n * Get the default fill style (or null if not yet set).\n * @return {module:ol/style/Fill} The default fill style.\n */\nexport function getDefaultFillStyle() {\n  return DEFAULT_FILL_STYLE;\n}\n\n/**\n * @type {module:ol/size~Size}\n */\nlet DEFAULT_IMAGE_STYLE_ANCHOR;\n\n/**\n * @type {module:ol/style/IconAnchorUnits}\n */\nlet DEFAULT_IMAGE_STYLE_ANCHOR_X_UNITS;\n\n/**\n * @type {module:ol/style/IconAnchorUnits}\n */\nlet DEFAULT_IMAGE_STYLE_ANCHOR_Y_UNITS;\n\n/**\n * @type {module:ol/size~Size}\n */\nlet DEFAULT_IMAGE_STYLE_SIZE;\n\n/**\n * @type {string}\n */\nlet DEFAULT_IMAGE_STYLE_SRC;\n\n/**\n * @type {number}\n */\nlet DEFAULT_IMAGE_SCALE_MULTIPLIER;\n\n/**\n * @type {module:ol/style/Image}\n */\nlet DEFAULT_IMAGE_STYLE = null;\n\n/**\n * Get the default image style (or null if not yet set).\n * @return {module:ol/style/Image} The default image style.\n */\nexport function getDefaultImageStyle() {\n  return DEFAULT_IMAGE_STYLE;\n}\n\n/**\n * @type {string}\n */\nlet DEFAULT_NO_IMAGE_STYLE;\n\n/**\n * @type {module:ol/style/Stroke}\n */\nlet DEFAULT_STROKE_STYLE = null;\n\n/**\n * Get the default stroke style (or null if not yet set).\n * @return {module:ol/style/Stroke} The default stroke style.\n */\nexport function getDefaultStrokeStyle() {\n  return DEFAULT_STROKE_STYLE;\n}\n\n/**\n * @type {module:ol/style/Stroke}\n */\nlet DEFAULT_TEXT_STROKE_STYLE;\n\n/**\n * @type {module:ol/style/Text}\n */\nlet DEFAULT_TEXT_STYLE = null;\n\n/**\n * Get the default text style (or null if not yet set).\n * @return {module:ol/style/Text} The default text style.\n */\nexport function getDefaultTextStyle() {\n  return DEFAULT_TEXT_STYLE;\n}\n\n/**\n * @type {module:ol/style/Style}\n */\nlet DEFAULT_STYLE = null;\n\n/**\n * Get the default style (or null if not yet set).\n * @return {module:ol/style/Style} The default style.\n */\nexport function getDefaultStyle() {\n  return DEFAULT_STYLE;\n}\n\n/**\n * @type {Array.<module:ol/style/Style>}\n */\nlet DEFAULT_STYLE_ARRAY = null;\n\n/**\n * Get the default style array (or null if not yet set).\n * @return {Array.<module:ol/style/Style>} The default style.\n */\nexport function getDefaultStyleArray() {\n  return DEFAULT_STYLE_ARRAY;\n}\n\n\nfunction createStyleDefaults() {\n\n  DEFAULT_COLOR = [255, 255, 255, 1];\n\n  DEFAULT_FILL_STYLE = new Fill({\n    color: DEFAULT_COLOR\n  });\n\n  DEFAULT_IMAGE_STYLE_ANCHOR = [20, 2]; // FIXME maybe [8, 32] ?\n\n  DEFAULT_IMAGE_STYLE_ANCHOR_X_UNITS = IconAnchorUnits.PIXELS;\n\n  DEFAULT_IMAGE_STYLE_ANCHOR_Y_UNITS = IconAnchorUnits.PIXELS;\n\n  DEFAULT_IMAGE_STYLE_SIZE = [64, 64];\n\n  DEFAULT_IMAGE_STYLE_SRC =\n      'https://maps.google.com/mapfiles/kml/pushpin/ylw-pushpin.png';\n\n  DEFAULT_IMAGE_SCALE_MULTIPLIER = 0.5;\n\n  DEFAULT_IMAGE_STYLE = new Icon({\n    anchor: DEFAULT_IMAGE_STYLE_ANCHOR,\n    anchorOrigin: IconOrigin.BOTTOM_LEFT,\n    anchorXUnits: DEFAULT_IMAGE_STYLE_ANCHOR_X_UNITS,\n    anchorYUnits: DEFAULT_IMAGE_STYLE_ANCHOR_Y_UNITS,\n    crossOrigin: 'anonymous',\n    rotation: 0,\n    scale: DEFAULT_IMAGE_SCALE_MULTIPLIER,\n    size: DEFAULT_IMAGE_STYLE_SIZE,\n    src: DEFAULT_IMAGE_STYLE_SRC\n  });\n\n  DEFAULT_NO_IMAGE_STYLE = 'NO_IMAGE';\n\n  DEFAULT_STROKE_STYLE = new Stroke({\n    color: DEFAULT_COLOR,\n    width: 1\n  });\n\n  DEFAULT_TEXT_STROKE_STYLE = new Stroke({\n    color: [51, 51, 51, 1],\n    width: 2\n  });\n\n  DEFAULT_TEXT_STYLE = new Text({\n    font: 'bold 16px Helvetica',\n    fill: DEFAULT_FILL_STYLE,\n    stroke: DEFAULT_TEXT_STROKE_STYLE,\n    scale: 0.8\n  });\n\n  DEFAULT_STYLE = new Style({\n    fill: DEFAULT_FILL_STYLE,\n    image: DEFAULT_IMAGE_STYLE,\n    text: DEFAULT_TEXT_STYLE,\n    stroke: DEFAULT_STROKE_STYLE,\n    zIndex: 0\n  });\n\n  DEFAULT_STYLE_ARRAY = [DEFAULT_STYLE];\n\n}\n\n\n/**\n * @typedef {Object} Options\n * @property {boolean} [extractStyles=true] Extract styles from the KML.\n * @property {boolean} [showPointNames=true] Show names as labels for placemarks which contain points.\n * @property {Array.<module:ol/style/Style>} [defaultStyle] Default style. The\n * default default style is the same as Google Earth.\n * @property {boolean} [writeStyles=true] Write styles into KML.\n */\n\n\n/**\n * @classdesc\n * Feature format for reading and writing data in the KML format.\n *\n * Note that the KML format uses the URL() constructor. Older browsers such as IE\n * which do not support this will need a URL polyfill to be loaded before use.\n *\n * @constructor\n * @extends {module:ol/format/XMLFeature}\n * @param {module:ol/format/KML~Options=} opt_options Options.\n * @api\n */\nconst KML = function(opt_options) {\n\n  const options = opt_options ? opt_options : {};\n\n  XMLFeature.call(this);\n\n  if (!DEFAULT_STYLE_ARRAY) {\n    createStyleDefaults();\n  }\n\n  /**\n   * @inheritDoc\n   */\n  this.dataProjection = getProjection('EPSG:4326');\n\n  /**\n   * @private\n   * @type {Array.<module:ol/style/Style>}\n   */\n  this.defaultStyle_ = options.defaultStyle ?\n    options.defaultStyle : DEFAULT_STYLE_ARRAY;\n\n  /**\n   * @private\n   * @type {boolean}\n   */\n  this.extractStyles_ = options.extractStyles !== undefined ?\n    options.extractStyles : true;\n\n  /**\n   * @private\n   * @type {boolean}\n   */\n  this.writeStyles_ = options.writeStyles !== undefined ?\n    options.writeStyles : true;\n\n  /**\n   * @private\n   * @type {!Object.<string, (Array.<module:ol/style/Style>|string)>}\n   */\n  this.sharedStyles_ = {};\n\n  /**\n   * @private\n   * @type {boolean}\n   */\n  this.showPointNames_ = options.showPointNames !== undefined ?\n    options.showPointNames : true;\n\n};\n\ninherits(KML, XMLFeature);\n\n\n/**\n * @const\n * @type {Array.<string>}\n */\nconst GX_NAMESPACE_URIS = [\n  'http://www.google.com/kml/ext/2.2'\n];\n\n\n/**\n * @const\n * @type {Array.<null|string>}\n */\nconst NAMESPACE_URIS = [\n  null,\n  'http://earth.google.com/kml/2.0',\n  'http://earth.google.com/kml/2.1',\n  'http://earth.google.com/kml/2.2',\n  'http://www.opengis.net/kml/2.2'\n];\n\n\n/**\n * @const\n * @type {string}\n */\nconst SCHEMA_LOCATION = 'http://www.opengis.net/kml/2.2 ' +\n    'https://developers.google.com/kml/schema/kml22gx.xsd';\n\n\n/**\n * @type {Object.<string, module:ol/style/IconAnchorUnits>}\n */\nconst ICON_ANCHOR_UNITS_MAP = {\n  'fraction': IconAnchorUnits.FRACTION,\n  'pixels': IconAnchorUnits.PIXELS,\n  'insetPixels': IconAnchorUnits.PIXELS\n};\n\n\n/**\n * @param {module:ol/style/Style|undefined} foundStyle Style.\n * @param {string} name Name.\n * @return {module:ol/style/Style} style Style.\n */\nfunction createNameStyleFunction(foundStyle, name) {\n  let textStyle = null;\n  const textOffset = [0, 0];\n  let textAlign = 'start';\n  if (foundStyle.getImage()) {\n    let imageSize = foundStyle.getImage().getImageSize();\n    if (imageSize === null) {\n      imageSize = DEFAULT_IMAGE_STYLE_SIZE;\n    }\n    if (imageSize.length == 2) {\n      const imageScale = foundStyle.getImage().getScale();\n      // Offset the label to be centered to the right of the icon, if there is\n      // one.\n      textOffset[0] = imageScale * imageSize[0] / 2;\n      textOffset[1] = -imageScale * imageSize[1] / 2;\n      textAlign = 'left';\n    }\n  }\n  if (foundStyle.getText() !== null) {\n    // clone the text style, customizing it with name, alignments and offset.\n    // Note that kml does not support many text options that OpenLayers does (rotation, textBaseline).\n    const foundText = foundStyle.getText();\n    textStyle = foundText.clone();\n    textStyle.setFont(foundText.getFont() || DEFAULT_TEXT_STYLE.getFont());\n    textStyle.setScale(foundText.getScale() || DEFAULT_TEXT_STYLE.getScale());\n    textStyle.setFill(foundText.getFill() || DEFAULT_TEXT_STYLE.getFill());\n    textStyle.setStroke(foundText.getStroke() || DEFAULT_TEXT_STROKE_STYLE);\n  } else {\n    textStyle = DEFAULT_TEXT_STYLE.clone();\n  }\n  textStyle.setText(name);\n  textStyle.setOffsetX(textOffset[0]);\n  textStyle.setOffsetY(textOffset[1]);\n  textStyle.setTextAlign(textAlign);\n\n  const nameStyle = new Style({\n    text: textStyle\n  });\n  return nameStyle;\n}\n\n\n/**\n * @param {Array.<module:ol/style/Style>|undefined} style Style.\n * @param {string} styleUrl Style URL.\n * @param {Array.<module:ol/style/Style>} defaultStyle Default style.\n * @param {!Object.<string, (Array.<module:ol/style/Style>|string)>} sharedStyles Shared styles.\n * @param {boolean|undefined} showPointNames true to show names for point placemarks.\n * @return {module:ol/style/Style~StyleFunction} Feature style function.\n */\nfunction createFeatureStyleFunction(style, styleUrl, defaultStyle, sharedStyles, showPointNames) {\n\n  return (\n    /**\n     * @param {module:ol/Feature} feature feature.\n     * @param {number} resolution Resolution.\n     * @return {Array.<module:ol/style/Style>} Style.\n     */\n    function(feature, resolution) {\n      let drawName = showPointNames;\n      /** @type {module:ol/style/Style|undefined} */\n      let nameStyle;\n      let name = '';\n      if (drawName) {\n        const geometry = feature.getGeometry();\n        if (geometry) {\n          drawName = geometry.getType() === GeometryType.POINT;\n        }\n      }\n\n      if (drawName) {\n        name = /** @type {string} */ (feature.get('name'));\n        drawName = drawName && name;\n      }\n\n      if (style) {\n        if (drawName) {\n          nameStyle = createNameStyleFunction(style[0], name);\n          return style.concat(nameStyle);\n        }\n        return style;\n      }\n      if (styleUrl) {\n        const foundStyle = findStyle(styleUrl, defaultStyle, sharedStyles);\n        if (drawName) {\n          nameStyle = createNameStyleFunction(foundStyle[0], name);\n          return foundStyle.concat(nameStyle);\n        }\n        return foundStyle;\n      }\n      if (drawName) {\n        nameStyle = createNameStyleFunction(defaultStyle[0], name);\n        return defaultStyle.concat(nameStyle);\n      }\n      return defaultStyle;\n    }\n  );\n}\n\n\n/**\n * @param {Array.<module:ol/style/Style>|string|undefined} styleValue Style value.\n * @param {Array.<module:ol/style/Style>} defaultStyle Default style.\n * @param {!Object.<string, (Array.<module:ol/style/Style>|string)>} sharedStyles\n * Shared styles.\n * @return {Array.<module:ol/style/Style>} Style.\n */\nfunction findStyle(styleValue, defaultStyle, sharedStyles) {\n  if (Array.isArray(styleValue)) {\n    return styleValue;\n  } else if (typeof styleValue === 'string') {\n    // KML files in the wild occasionally forget the leading `#` on styleUrls\n    // defined in the same document.  Add a leading `#` if it enables to find\n    // a style.\n    if (!(styleValue in sharedStyles) && ('#' + styleValue in sharedStyles)) {\n      styleValue = '#' + styleValue;\n    }\n    return findStyle(sharedStyles[styleValue], defaultStyle, sharedStyles);\n  } else {\n    return defaultStyle;\n  }\n}\n\n\n/**\n * @param {Node} node Node.\n * @return {module:ol/color~Color|undefined} Color.\n */\nfunction readColor(node) {\n  const s = getAllTextContent(node, false);\n  // The KML specification states that colors should not include a leading `#`\n  // but we tolerate them.\n  const m = /^\\s*#?\\s*([0-9A-Fa-f]{8})\\s*$/.exec(s);\n  if (m) {\n    const hexColor = m[1];\n    return [\n      parseInt(hexColor.substr(6, 2), 16),\n      parseInt(hexColor.substr(4, 2), 16),\n      parseInt(hexColor.substr(2, 2), 16),\n      parseInt(hexColor.substr(0, 2), 16) / 255\n    ];\n\n  } else {\n    return undefined;\n  }\n}\n\n\n/**\n * @param {Node} node Node.\n * @return {Array.<number>|undefined} Flat coordinates.\n */\nexport function readFlatCoordinates(node) {\n  let s = getAllTextContent(node, false);\n  const flatCoordinates = [];\n  // The KML specification states that coordinate tuples should not include\n  // spaces, but we tolerate them.\n  const re =\n      /^\\s*([+\\-]?\\d*\\.?\\d+(?:e[+\\-]?\\d+)?)\\s*,\\s*([+\\-]?\\d*\\.?\\d+(?:e[+\\-]?\\d+)?)(?:\\s*,\\s*([+\\-]?\\d*\\.?\\d+(?:e[+\\-]?\\d+)?))?\\s*/i;\n  let m;\n  while ((m = re.exec(s))) {\n    const x = parseFloat(m[1]);\n    const y = parseFloat(m[2]);\n    const z = m[3] ? parseFloat(m[3]) : 0;\n    flatCoordinates.push(x, y, z);\n    s = s.substr(m[0].length);\n  }\n  if (s !== '') {\n    return undefined;\n  }\n  return flatCoordinates;\n}\n\n\n/**\n * @param {Node} node Node.\n * @return {string} URI.\n */\nfunction readURI(node) {\n  const s = getAllTextContent(node, false).trim();\n  let baseURI = node.baseURI;\n  if (!baseURI || baseURI == 'about:blank') {\n    baseURI = window.location.href;\n  }\n  if (baseURI) {\n    const url = new URL(s, baseURI);\n    return url.href;\n  } else {\n    return s;\n  }\n}\n\n\n/**\n * @param {Node} node Node.\n * @return {module:ol/format/KML~Vec2} Vec2.\n */\nfunction readVec2(node) {\n  const xunits = node.getAttribute('xunits');\n  const yunits = node.getAttribute('yunits');\n  let origin;\n  if (xunits !== 'insetPixels') {\n    if (yunits !== 'insetPixels') {\n      origin = IconOrigin.BOTTOM_LEFT;\n    } else {\n      origin = IconOrigin.TOP_LEFT;\n    }\n  } else {\n    if (yunits !== 'insetPixels') {\n      origin = IconOrigin.BOTTOM_RIGHT;\n    } else {\n      origin = IconOrigin.TOP_RIGHT;\n    }\n  }\n  return {\n    x: parseFloat(node.getAttribute('x')),\n    xunits: ICON_ANCHOR_UNITS_MAP[xunits],\n    y: parseFloat(node.getAttribute('y')),\n    yunits: ICON_ANCHOR_UNITS_MAP[yunits],\n    origin: origin\n  };\n}\n\n\n/**\n * @param {Node} node Node.\n * @return {number|undefined} Scale.\n */\nfunction readScale(node) {\n  return readDecimal(node);\n}\n\n\n/**\n * @const\n * @type {Object.<string, Object.<string, module:ol/xml~Parser>>}\n */\nconst STYLE_MAP_PARSERS = makeStructureNS(\n  NAMESPACE_URIS, {\n    'Pair': pairDataParser\n  });\n\n\n/**\n * @param {Node} node Node.\n * @param {Array.<*>} objectStack Object stack.\n * @return {Array.<module:ol/style/Style>|string|undefined} StyleMap.\n */\nfunction readStyleMapValue(node, objectStack) {\n  return pushParseAndPop(undefined,\n    STYLE_MAP_PARSERS, node, objectStack);\n}\n\n\n/**\n * @const\n * @type {Object.<string, Object.<string, module:ol/xml~Parser>>}\n */\nconst ICON_STYLE_PARSERS = makeStructureNS(\n  NAMESPACE_URIS, {\n    'Icon': makeObjectPropertySetter(readIcon),\n    'heading': makeObjectPropertySetter(readDecimal),\n    'hotSpot': makeObjectPropertySetter(readVec2),\n    'scale': makeObjectPropertySetter(readScale)\n  });\n\n\n/**\n * @param {Node} node Node.\n * @param {Array.<*>} objectStack Object stack.\n */\nfunction iconStyleParser(node, objectStack) {\n  // FIXME refreshMode\n  // FIXME refreshInterval\n  // FIXME viewRefreshTime\n  // FIXME viewBoundScale\n  // FIXME viewFormat\n  // FIXME httpQuery\n  const object = pushParseAndPop(\n    {}, ICON_STYLE_PARSERS, node, objectStack);\n  if (!object) {\n    return;\n  }\n  const styleObject = /** @type {Object} */ (objectStack[objectStack.length - 1]);\n  const IconObject = 'Icon' in object ? object['Icon'] : {};\n  const drawIcon = (!('Icon' in object) || Object.keys(IconObject).length > 0);\n  let src;\n  const href = /** @type {string|undefined} */\n      (IconObject['href']);\n  if (href) {\n    src = href;\n  } else if (drawIcon) {\n    src = DEFAULT_IMAGE_STYLE_SRC;\n  }\n  let anchor, anchorXUnits, anchorYUnits;\n  let anchorOrigin = IconOrigin.BOTTOM_LEFT;\n  const hotSpot = /** @type {module:ol/format/KML~Vec2|undefined} */\n      (object['hotSpot']);\n  if (hotSpot) {\n    anchor = [hotSpot.x, hotSpot.y];\n    anchorXUnits = hotSpot.xunits;\n    anchorYUnits = hotSpot.yunits;\n    anchorOrigin = hotSpot.origin;\n  } else if (src === DEFAULT_IMAGE_STYLE_SRC) {\n    anchor = DEFAULT_IMAGE_STYLE_ANCHOR;\n    anchorXUnits = DEFAULT_IMAGE_STYLE_ANCHOR_X_UNITS;\n    anchorYUnits = DEFAULT_IMAGE_STYLE_ANCHOR_Y_UNITS;\n  } else if (/^http:\\/\\/maps\\.(?:google|gstatic)\\.com\\//.test(src)) {\n    anchor = [0.5, 0];\n    anchorXUnits = IconAnchorUnits.FRACTION;\n    anchorYUnits = IconAnchorUnits.FRACTION;\n  }\n\n  let offset;\n  const x = /** @type {number|undefined} */\n      (IconObject['x']);\n  const y = /** @type {number|undefined} */\n      (IconObject['y']);\n  if (x !== undefined && y !== undefined) {\n    offset = [x, y];\n  }\n\n  let size;\n  const w = /** @type {number|undefined} */\n      (IconObject['w']);\n  const h = /** @type {number|undefined} */\n      (IconObject['h']);\n  if (w !== undefined && h !== undefined) {\n    size = [w, h];\n  }\n\n  let rotation;\n  const heading = /** @type {number} */\n      (object['heading']);\n  if (heading !== undefined) {\n    rotation = toRadians(heading);\n  }\n\n  let scale = /** @type {number|undefined} */\n      (object['scale']);\n\n  if (drawIcon) {\n    if (src == DEFAULT_IMAGE_STYLE_SRC) {\n      size = DEFAULT_IMAGE_STYLE_SIZE;\n      if (scale === undefined) {\n        scale = DEFAULT_IMAGE_SCALE_MULTIPLIER;\n      }\n    }\n\n    const imageStyle = new Icon({\n      anchor: anchor,\n      anchorOrigin: anchorOrigin,\n      anchorXUnits: anchorXUnits,\n      anchorYUnits: anchorYUnits,\n      crossOrigin: 'anonymous', // FIXME should this be configurable?\n      offset: offset,\n      offsetOrigin: IconOrigin.BOTTOM_LEFT,\n      rotation: rotation,\n      scale: scale,\n      size: size,\n      src: src\n    });\n    styleObject['imageStyle'] = imageStyle;\n  } else {\n    // handle the case when we explicitly want to draw no icon.\n    styleObject['imageStyle'] = DEFAULT_NO_IMAGE_STYLE;\n  }\n}\n\n\n/**\n * @const\n * @type {Object.<string, Object.<string, module:ol/xml~Parser>>}\n */\nconst LABEL_STYLE_PARSERS = makeStructureNS(\n  NAMESPACE_URIS, {\n    'color': makeObjectPropertySetter(readColor),\n    'scale': makeObjectPropertySetter(readScale)\n  });\n\n\n/**\n * @param {Node} node Node.\n * @param {Array.<*>} objectStack Object stack.\n */\nfunction labelStyleParser(node, objectStack) {\n  // FIXME colorMode\n  const object = pushParseAndPop(\n    {}, LABEL_STYLE_PARSERS, node, objectStack);\n  if (!object) {\n    return;\n  }\n  const styleObject = objectStack[objectStack.length - 1];\n  const textStyle = new Text({\n    fill: new Fill({\n      color: /** @type {module:ol/color~Color} */\n          ('color' in object ? object['color'] : DEFAULT_COLOR)\n    }),\n    scale: /** @type {number|undefined} */\n        (object['scale'])\n  });\n  styleObject['textStyle'] = textStyle;\n}\n\n\n/**\n * @const\n * @type {Object.<string, Object.<string, module:ol/xml~Parser>>}\n */\nconst LINE_STYLE_PARSERS = makeStructureNS(\n  NAMESPACE_URIS, {\n    'color': makeObjectPropertySetter(readColor),\n    'width': makeObjectPropertySetter(readDecimal)\n  });\n\n\n/**\n * @param {Node} node Node.\n * @param {Array.<*>} objectStack Object stack.\n */\nfunction lineStyleParser(node, objectStack) {\n  // FIXME colorMode\n  // FIXME gx:outerColor\n  // FIXME gx:outerWidth\n  // FIXME gx:physicalWidth\n  // FIXME gx:labelVisibility\n  const object = pushParseAndPop(\n    {}, LINE_STYLE_PARSERS, node, objectStack);\n  if (!object) {\n    return;\n  }\n  const styleObject = objectStack[objectStack.length - 1];\n  const strokeStyle = new Stroke({\n    color: /** @type {module:ol/color~Color} */\n        ('color' in object ? object['color'] : DEFAULT_COLOR),\n    width: /** @type {number} */ ('width' in object ? object['width'] : 1)\n  });\n  styleObject['strokeStyle'] = strokeStyle;\n}\n\n\n/**\n * @const\n * @type {Object.<string, Object.<string, module:ol/xml~Parser>>}\n */\nconst POLY_STYLE_PARSERS = makeStructureNS(\n  NAMESPACE_URIS, {\n    'color': makeObjectPropertySetter(readColor),\n    'fill': makeObjectPropertySetter(readBoolean),\n    'outline': makeObjectPropertySetter(readBoolean)\n  });\n\n\n/**\n * @param {Node} node Node.\n * @param {Array.<*>} objectStack Object stack.\n */\nfunction polyStyleParser(node, objectStack) {\n  // FIXME colorMode\n  const object = pushParseAndPop(\n    {}, POLY_STYLE_PARSERS, node, objectStack);\n  if (!object) {\n    return;\n  }\n  const styleObject = objectStack[objectStack.length - 1];\n  const fillStyle = new Fill({\n    color: /** @type {module:ol/color~Color} */\n        ('color' in object ? object['color'] : DEFAULT_COLOR)\n  });\n  styleObject['fillStyle'] = fillStyle;\n  const fill = /** @type {boolean|undefined} */ (object['fill']);\n  if (fill !== undefined) {\n    styleObject['fill'] = fill;\n  }\n  const outline = /** @type {boolean|undefined} */ (object['outline']);\n  if (outline !== undefined) {\n    styleObject['outline'] = outline;\n  }\n}\n\n\n/**\n * @const\n * @type {Object.<string, Object.<string, module:ol/xml~Parser>>}\n */\nconst FLAT_LINEAR_RING_PARSERS = makeStructureNS(\n  NAMESPACE_URIS, {\n    'coordinates': makeReplacer(readFlatCoordinates)\n  });\n\n\n/**\n * @param {Node} node Node.\n * @param {Array.<*>} objectStack Object stack.\n * @return {Array.<number>} LinearRing flat coordinates.\n */\nfunction readFlatLinearRing(node, objectStack) {\n  return pushParseAndPop(null,\n    FLAT_LINEAR_RING_PARSERS, node, objectStack);\n}\n\n\n/**\n * @param {Node} node Node.\n * @param {Array.<*>} objectStack Object stack.\n */\nfunction gxCoordParser(node, objectStack) {\n  const gxTrackObject = /** @type {module:ol/format/KML~GxTrackObject} */\n      (objectStack[objectStack.length - 1]);\n  const flatCoordinates = gxTrackObject.flatCoordinates;\n  const s = getAllTextContent(node, false);\n  const re =\n      /^\\s*([+\\-]?\\d+(?:\\.\\d*)?(?:e[+\\-]?\\d*)?)\\s+([+\\-]?\\d+(?:\\.\\d*)?(?:e[+\\-]?\\d*)?)\\s+([+\\-]?\\d+(?:\\.\\d*)?(?:e[+\\-]?\\d*)?)\\s*$/i;\n  const m = re.exec(s);\n  if (m) {\n    const x = parseFloat(m[1]);\n    const y = parseFloat(m[2]);\n    const z = parseFloat(m[3]);\n    flatCoordinates.push(x, y, z, 0);\n  } else {\n    flatCoordinates.push(0, 0, 0, 0);\n  }\n}\n\n\n/**\n * @const\n * @type {Object.<string, Object.<string, module:ol/xml~Parser>>}\n */\nconst GX_MULTITRACK_GEOMETRY_PARSERS = makeStructureNS(\n  GX_NAMESPACE_URIS, {\n    'Track': makeArrayPusher(readGxTrack)\n  });\n\n\n/**\n * @param {Node} node Node.\n * @param {Array.<*>} objectStack Object stack.\n * @return {module:ol/geom/MultiLineString|undefined} MultiLineString.\n */\nfunction readGxMultiTrack(node, objectStack) {\n  const lineStrings = pushParseAndPop([],\n    GX_MULTITRACK_GEOMETRY_PARSERS, node, objectStack);\n  if (!lineStrings) {\n    return undefined;\n  }\n  const multiLineString = new MultiLineString(null);\n  multiLineString.setLineStrings(lineStrings);\n  return multiLineString;\n}\n\n\n/**\n * @const\n * @type {Object.<string, Object.<string, module:ol/xml~Parser>>}\n */\nconst GX_TRACK_PARSERS = makeStructureNS(\n  NAMESPACE_URIS, {\n    'when': whenParser\n  }, makeStructureNS(\n    GX_NAMESPACE_URIS, {\n      'coord': gxCoordParser\n    }));\n\n\n/**\n * @param {Node} node Node.\n * @param {Array.<*>} objectStack Object stack.\n * @return {module:ol/geom/LineString|undefined} LineString.\n */\nfunction readGxTrack(node, objectStack) {\n  const gxTrackObject = pushParseAndPop(\n    /** @type {module:ol/format/KML~GxTrackObject} */ ({\n      flatCoordinates: [],\n      whens: []\n    }), GX_TRACK_PARSERS, node, objectStack);\n  if (!gxTrackObject) {\n    return undefined;\n  }\n  const flatCoordinates = gxTrackObject.flatCoordinates;\n  const whens = gxTrackObject.whens;\n  for (let i = 0, ii = Math.min(flatCoordinates.length, whens.length); i < ii; ++i) {\n    flatCoordinates[4 * i + 3] = whens[i];\n  }\n  const lineString = new LineString(null);\n  lineString.setFlatCoordinates(GeometryLayout.XYZM, flatCoordinates);\n  return lineString;\n}\n\n\n/**\n * @const\n * @type {Object.<string, Object.<string, module:ol/xml~Parser>>}\n */\nconst ICON_PARSERS = makeStructureNS(\n  NAMESPACE_URIS, {\n    'href': makeObjectPropertySetter(readURI)\n  }, makeStructureNS(\n    GX_NAMESPACE_URIS, {\n      'x': makeObjectPropertySetter(readDecimal),\n      'y': makeObjectPropertySetter(readDecimal),\n      'w': makeObjectPropertySetter(readDecimal),\n      'h': makeObjectPropertySetter(readDecimal)\n    }));\n\n\n/**\n * @param {Node} node Node.\n * @param {Array.<*>} objectStack Object stack.\n * @return {Object} Icon object.\n */\nfunction readIcon(node, objectStack) {\n  const iconObject = pushParseAndPop(\n    {}, ICON_PARSERS, node, objectStack);\n  if (iconObject) {\n    return iconObject;\n  } else {\n    return null;\n  }\n}\n\n\n/**\n * @const\n * @type {Object.<string, Object.<string, module:ol/xml~Parser>>}\n */\nconst GEOMETRY_FLAT_COORDINATES_PARSERS = makeStructureNS(\n  NAMESPACE_URIS, {\n    'coordinates': makeReplacer(readFlatCoordinates)\n  });\n\n\n/**\n * @param {Node} node Node.\n * @param {Array.<*>} objectStack Object stack.\n * @return {Array.<number>} Flat coordinates.\n */\nfunction readFlatCoordinatesFromNode(node, objectStack) {\n  return pushParseAndPop(null,\n    GEOMETRY_FLAT_COORDINATES_PARSERS, node, objectStack);\n}\n\n\n/**\n * @const\n * @type {Object.<string, Object.<string, module:ol/xml~Parser>>}\n */\nconst EXTRUDE_AND_ALTITUDE_MODE_PARSERS = makeStructureNS(\n  NAMESPACE_URIS, {\n    'extrude': makeObjectPropertySetter(readBoolean),\n    'tessellate': makeObjectPropertySetter(readBoolean),\n    'altitudeMode': makeObjectPropertySetter(readString)\n  });\n\n\n/**\n * @param {Node} node Node.\n * @param {Array.<*>} objectStack Object stack.\n * @return {module:ol/geom/LineString|undefined} LineString.\n */\nfunction readLineString(node, objectStack) {\n  const properties = pushParseAndPop({},\n    EXTRUDE_AND_ALTITUDE_MODE_PARSERS, node,\n    objectStack);\n  const flatCoordinates =\n      readFlatCoordinatesFromNode(node, objectStack);\n  if (flatCoordinates) {\n    const lineString = new LineString(null);\n    lineString.setFlatCoordinates(GeometryLayout.XYZ, flatCoordinates);\n    lineString.setProperties(properties);\n    return lineString;\n  } else {\n    return undefined;\n  }\n}\n\n\n/**\n * @param {Node} node Node.\n * @param {Array.<*>} objectStack Object stack.\n * @return {module:ol/geom/Polygon|undefined} Polygon.\n */\nfunction readLinearRing(node, objectStack) {\n  const properties = pushParseAndPop({},\n    EXTRUDE_AND_ALTITUDE_MODE_PARSERS, node,\n    objectStack);\n  const flatCoordinates =\n      readFlatCoordinatesFromNode(node, objectStack);\n  if (flatCoordinates) {\n    const polygon = new Polygon(null);\n    polygon.setFlatCoordinates(GeometryLayout.XYZ, flatCoordinates,\n      [flatCoordinates.length]);\n    polygon.setProperties(properties);\n    return polygon;\n  } else {\n    return undefined;\n  }\n}\n\n\n/**\n * @const\n * @type {Object.<string, Object.<string, module:ol/xml~Parser>>}\n */\nconst MULTI_GEOMETRY_PARSERS = makeStructureNS(\n  NAMESPACE_URIS, {\n    'LineString': makeArrayPusher(readLineString),\n    'LinearRing': makeArrayPusher(readLinearRing),\n    'MultiGeometry': makeArrayPusher(readMultiGeometry),\n    'Point': makeArrayPusher(readPoint),\n    'Polygon': makeArrayPusher(readPolygon)\n  });\n\n\n/**\n * @param {Node} node Node.\n * @param {Array.<*>} objectStack Object stack.\n * @return {module:ol/geom/Geometry} Geometry.\n */\nfunction readMultiGeometry(node, objectStack) {\n  const geometries = pushParseAndPop([],\n    MULTI_GEOMETRY_PARSERS, node, objectStack);\n  if (!geometries) {\n    return null;\n  }\n  if (geometries.length === 0) {\n    return new GeometryCollection(geometries);\n  }\n  /** @type {module:ol/geom/Geometry} */\n  let multiGeometry;\n  let homogeneous = true;\n  const type = geometries[0].getType();\n  let geometry;\n  for (let i = 1, ii = geometries.length; i < ii; ++i) {\n    geometry = geometries[i];\n    if (geometry.getType() != type) {\n      homogeneous = false;\n      break;\n    }\n  }\n  if (homogeneous) {\n    let layout;\n    let flatCoordinates;\n    if (type == GeometryType.POINT) {\n      const point = geometries[0];\n      layout = point.getLayout();\n      flatCoordinates = point.getFlatCoordinates();\n      for (let i = 1, ii = geometries.length; i < ii; ++i) {\n        geometry = geometries[i];\n        extend(flatCoordinates, geometry.getFlatCoordinates());\n      }\n      multiGeometry = new MultiPoint(null);\n      multiGeometry.setFlatCoordinates(layout, flatCoordinates);\n      setCommonGeometryProperties(multiGeometry, geometries);\n    } else if (type == GeometryType.LINE_STRING) {\n      multiGeometry = new MultiLineString(null);\n      multiGeometry.setLineStrings(geometries);\n      setCommonGeometryProperties(multiGeometry, geometries);\n    } else if (type == GeometryType.POLYGON) {\n      multiGeometry = new MultiPolygon(null);\n      multiGeometry.setPolygons(geometries);\n      setCommonGeometryProperties(multiGeometry, geometries);\n    } else if (type == GeometryType.GEOMETRY_COLLECTION) {\n      multiGeometry = new GeometryCollection(geometries);\n    } else {\n      assert(false, 37); // Unknown geometry type found\n    }\n  } else {\n    multiGeometry = new GeometryCollection(geometries);\n  }\n  return (\n    /** @type {module:ol/geom/Geometry} */ (multiGeometry)\n  );\n}\n\n\n/**\n * @param {Node} node Node.\n * @param {Array.<*>} objectStack Object stack.\n * @return {module:ol/geom/Point|undefined} Point.\n */\nfunction readPoint(node, objectStack) {\n  const properties = pushParseAndPop({},\n    EXTRUDE_AND_ALTITUDE_MODE_PARSERS, node,\n    objectStack);\n  const flatCoordinates =\n      readFlatCoordinatesFromNode(node, objectStack);\n  if (flatCoordinates) {\n    const point = new Point(null);\n    point.setFlatCoordinates(GeometryLayout.XYZ, flatCoordinates);\n    point.setProperties(properties);\n    return point;\n  } else {\n    return undefined;\n  }\n}\n\n\n/**\n * @const\n * @type {Object.<string, Object.<string, module:ol/xml~Parser>>}\n */\nconst FLAT_LINEAR_RINGS_PARSERS = makeStructureNS(\n  NAMESPACE_URIS, {\n    'innerBoundaryIs': innerBoundaryIsParser,\n    'outerBoundaryIs': outerBoundaryIsParser\n  });\n\n\n/**\n * @param {Node} node Node.\n * @param {Array.<*>} objectStack Object stack.\n * @return {module:ol/geom/Polygon|undefined} Polygon.\n */\nfunction readPolygon(node, objectStack) {\n  const properties = pushParseAndPop(/** @type {Object<string,*>} */ ({}),\n    EXTRUDE_AND_ALTITUDE_MODE_PARSERS, node,\n    objectStack);\n  const flatLinearRings = pushParseAndPop([null],\n    FLAT_LINEAR_RINGS_PARSERS, node, objectStack);\n  if (flatLinearRings && flatLinearRings[0]) {\n    const polygon = new Polygon(null);\n    const flatCoordinates = flatLinearRings[0];\n    const ends = [flatCoordinates.length];\n    for (let i = 1, ii = flatLinearRings.length; i < ii; ++i) {\n      extend(flatCoordinates, flatLinearRings[i]);\n      ends.push(flatCoordinates.length);\n    }\n    polygon.setFlatCoordinates(GeometryLayout.XYZ, flatCoordinates, ends);\n    polygon.setProperties(properties);\n    return polygon;\n  } else {\n    return undefined;\n  }\n}\n\n\n/**\n * @const\n * @type {Object.<string, Object.<string, module:ol/xml~Parser>>}\n */\nconst STYLE_PARSERS = makeStructureNS(\n  NAMESPACE_URIS, {\n    'IconStyle': iconStyleParser,\n    'LabelStyle': labelStyleParser,\n    'LineStyle': lineStyleParser,\n    'PolyStyle': polyStyleParser\n  });\n\n\n/**\n * @param {Node} node Node.\n * @param {Array.<*>} objectStack Object stack.\n * @return {Array.<module:ol/style/Style>} Style.\n */\nfunction readStyle(node, objectStack) {\n  const styleObject = pushParseAndPop(\n    {}, STYLE_PARSERS, node, objectStack);\n  if (!styleObject) {\n    return null;\n  }\n  let fillStyle = /** @type {module:ol/style/Fill} */\n      ('fillStyle' in styleObject ?\n        styleObject['fillStyle'] : DEFAULT_FILL_STYLE);\n  const fill = /** @type {boolean|undefined} */ (styleObject['fill']);\n  if (fill !== undefined && !fill) {\n    fillStyle = null;\n  }\n  let imageStyle = /** @type {module:ol/style/Image} */\n      ('imageStyle' in styleObject ?\n        styleObject['imageStyle'] : DEFAULT_IMAGE_STYLE);\n  if (imageStyle == DEFAULT_NO_IMAGE_STYLE) {\n    imageStyle = undefined;\n  }\n  const textStyle = /** @type {module:ol/style/Text} */\n      ('textStyle' in styleObject ?\n        styleObject['textStyle'] : DEFAULT_TEXT_STYLE);\n  let strokeStyle = /** @type {module:ol/style/Stroke} */\n      ('strokeStyle' in styleObject ?\n        styleObject['strokeStyle'] : DEFAULT_STROKE_STYLE);\n  const outline = /** @type {boolean|undefined} */\n      (styleObject['outline']);\n  if (outline !== undefined && !outline) {\n    strokeStyle = null;\n  }\n  return [new Style({\n    fill: fillStyle,\n    image: imageStyle,\n    stroke: strokeStyle,\n    text: textStyle,\n    zIndex: undefined // FIXME\n  })];\n}\n\n\n/**\n * Reads an array of geometries and creates arrays for common geometry\n * properties. Then sets them to the multi geometry.\n * @param {module:ol/geom/MultiPoint|module:ol/geom/MultiLineString|module:ol/geom/MultiPolygon}\n *     multiGeometry A multi-geometry.\n * @param {Array.<module:ol/geom/Geometry>} geometries List of geometries.\n */\nfunction setCommonGeometryProperties(multiGeometry, geometries) {\n  const ii = geometries.length;\n  const extrudes = new Array(geometries.length);\n  const tessellates = new Array(geometries.length);\n  const altitudeModes = new Array(geometries.length);\n  let hasExtrude, hasTessellate, hasAltitudeMode;\n  hasExtrude = hasTessellate = hasAltitudeMode = false;\n  for (let i = 0; i < ii; ++i) {\n    const geometry = geometries[i];\n    extrudes[i] = geometry.get('extrude');\n    tessellates[i] = geometry.get('tessellate');\n    altitudeModes[i] = geometry.get('altitudeMode');\n    hasExtrude = hasExtrude || extrudes[i] !== undefined;\n    hasTessellate = hasTessellate || tessellates[i] !== undefined;\n    hasAltitudeMode = hasAltitudeMode || altitudeModes[i];\n  }\n  if (hasExtrude) {\n    multiGeometry.set('extrude', extrudes);\n  }\n  if (hasTessellate) {\n    multiGeometry.set('tessellate', tessellates);\n  }\n  if (hasAltitudeMode) {\n    multiGeometry.set('altitudeMode', altitudeModes);\n  }\n}\n\n\n/**\n * @const\n * @type {Object.<string, Object.<string, module:ol/xml~Parser>>}\n */\nconst DATA_PARSERS = makeStructureNS(\n  NAMESPACE_URIS, {\n    'displayName': makeObjectPropertySetter(readString),\n    'value': makeObjectPropertySetter(readString)\n  });\n\n\n/**\n * @param {Node} node Node.\n * @param {Array.<*>} objectStack Object stack.\n */\nfunction dataParser(node, objectStack) {\n  const name = node.getAttribute('name');\n  parseNode(DATA_PARSERS, node, objectStack);\n  const featureObject = /** @type {Object} */ (objectStack[objectStack.length - 1]);\n  if (name !== null) {\n    featureObject[name] = featureObject.value;\n  } else if (featureObject.displayName !== null) {\n    featureObject[featureObject.displayName] = featureObject.value;\n  }\n  delete featureObject['value'];\n}\n\n\n/**\n * @const\n * @type {Object.<string, Object.<string, module:ol/xml~Parser>>}\n */\nconst EXTENDED_DATA_PARSERS = makeStructureNS(\n  NAMESPACE_URIS, {\n    'Data': dataParser,\n    'SchemaData': schemaDataParser\n  });\n\n\n/**\n * @param {Node} node Node.\n * @param {Array.<*>} objectStack Object stack.\n */\nfunction extendedDataParser(node, objectStack) {\n  parseNode(EXTENDED_DATA_PARSERS, node, objectStack);\n}\n\n/**\n * @const\n * @type {Object.<string, Object.<string, module:ol/xml~Parser>>}\n */\nconst REGION_PARSERS = makeStructureNS(\n  NAMESPACE_URIS, {\n    'LatLonAltBox': latLonAltBoxParser,\n    'Lod': lodParser\n  });\n\n\n/**\n * @param {Node} node Node.\n * @param {Array.<*>} objectStack Object stack.\n */\nfunction regionParser(node, objectStack) {\n  parseNode(REGION_PARSERS, node, objectStack);\n}\n\n/**\n * @const\n * @type {Object.<string, Object.<string, module:ol/xml~Parser>>}\n */\nconst PAIR_PARSERS = makeStructureNS(\n  NAMESPACE_URIS, {\n    'Style': makeObjectPropertySetter(readStyle),\n    'key': makeObjectPropertySetter(readString),\n    'styleUrl': makeObjectPropertySetter(readURI)\n  });\n\n\n/**\n * @param {Node} node Node.\n * @param {Array.<*>} objectStack Object stack.\n */\nfunction pairDataParser(node, objectStack) {\n  const pairObject = pushParseAndPop(\n    {}, PAIR_PARSERS, node, objectStack);\n  if (!pairObject) {\n    return;\n  }\n  const key = /** @type {string|undefined} */\n      (pairObject['key']);\n  if (key && key == 'normal') {\n    const styleUrl = /** @type {string|undefined} */\n        (pairObject['styleUrl']);\n    if (styleUrl) {\n      objectStack[objectStack.length - 1] = styleUrl;\n    }\n    const Style = /** @type {module:ol/style/Style} */\n        (pairObject['Style']);\n    if (Style) {\n      objectStack[objectStack.length - 1] = Style;\n    }\n  }\n}\n\n\n/**\n * @param {Node} node Node.\n * @param {Array.<*>} objectStack Object stack.\n */\nfunction placemarkStyleMapParser(node, objectStack) {\n  const styleMapValue = readStyleMapValue(node, objectStack);\n  if (!styleMapValue) {\n    return;\n  }\n  const placemarkObject = objectStack[objectStack.length - 1];\n  if (Array.isArray(styleMapValue)) {\n    placemarkObject['Style'] = styleMapValue;\n  } else if (typeof styleMapValue === 'string') {\n    placemarkObject['styleUrl'] = styleMapValue;\n  } else {\n    assert(false, 38); // `styleMapValue` has an unknown type\n  }\n}\n\n\n/**\n * @const\n * @type {Object.<string, Object.<string, module:ol/xml~Parser>>}\n */\nconst SCHEMA_DATA_PARSERS = makeStructureNS(\n  NAMESPACE_URIS, {\n    'SimpleData': simpleDataParser\n  });\n\n\n/**\n * @param {Node} node Node.\n * @param {Array.<*>} objectStack Object stack.\n */\nfunction schemaDataParser(node, objectStack) {\n  parseNode(SCHEMA_DATA_PARSERS, node, objectStack);\n}\n\n\n/**\n * @param {Node} node Node.\n * @param {Array.<*>} objectStack Object stack.\n */\nfunction simpleDataParser(node, objectStack) {\n  const name = node.getAttribute('name');\n  if (name !== null) {\n    const data = readString(node);\n    const featureObject = /** @type {Object} */ (objectStack[objectStack.length - 1]);\n    featureObject[name] = data;\n  }\n}\n\n\n/**\n * @const\n * @type {Object.<string, Object.<string, module:ol/xml~Parser>>}\n */\nconst LAT_LON_ALT_BOX_PARSERS = makeStructureNS(\n  NAMESPACE_URIS, {\n    'altitudeMode': makeObjectPropertySetter(readString),\n    'minAltitude': makeObjectPropertySetter(readDecimal),\n    'maxAltitude': makeObjectPropertySetter(readDecimal),\n    'north': makeObjectPropertySetter(readDecimal),\n    'south': makeObjectPropertySetter(readDecimal),\n    'east': makeObjectPropertySetter(readDecimal),\n    'west': makeObjectPropertySetter(readDecimal)\n  });\n\n\n/**\n * @param {Node} node Node.\n * @param {Array.<*>} objectStack Object stack.\n */\nfunction latLonAltBoxParser(node, objectStack) {\n  const object = pushParseAndPop({}, LAT_LON_ALT_BOX_PARSERS, node, objectStack);\n  if (!object) {\n    return;\n  }\n  const regionObject = /** @type {Object} */ (objectStack[objectStack.length - 1]);\n  const extent = [\n    parseFloat(object['west']),\n    parseFloat(object['south']),\n    parseFloat(object['east']),\n    parseFloat(object['north'])\n  ];\n  regionObject['extent'] = extent;\n  regionObject['altitudeMode'] = object['altitudeMode'];\n  regionObject['minAltitude'] = parseFloat(object['minAltitude']);\n  regionObject['maxAltitude'] = parseFloat(object['maxAltitude']);\n}\n\n\n/**\n * @const\n * @type {Object.<string, Object.<string, module:ol/xml~Parser>>}\n */\nconst LOD_PARSERS = makeStructureNS(\n  NAMESPACE_URIS, {\n    'minLodPixels': makeObjectPropertySetter(readDecimal),\n    'maxLodPixels': makeObjectPropertySetter(readDecimal),\n    'minFadeExtent': makeObjectPropertySetter(readDecimal),\n    'maxFadeExtent': makeObjectPropertySetter(readDecimal)\n  });\n\n\n/**\n * @param {Node} node Node.\n * @param {Array.<*>} objectStack Object stack.\n */\nfunction lodParser(node, objectStack) {\n  const object = pushParseAndPop({}, LOD_PARSERS, node, objectStack);\n  if (!object) {\n    return;\n  }\n  const lodObject = /** @type {Object} */ (objectStack[objectStack.length - 1]);\n  lodObject['minLodPixels'] = parseFloat(object['minLodPixels']);\n  lodObject['maxLodPixels'] = parseFloat(object['maxLodPixels']);\n  lodObject['minFadeExtent'] = parseFloat(object['minFadeExtent']);\n  lodObject['maxFadeExtent'] = parseFloat(object['maxFadeExtent']);\n}\n\n\n/**\n * @const\n * @type {Object.<string, Object.<string, module:ol/xml~Parser>>}\n */\nconst INNER_BOUNDARY_IS_PARSERS = makeStructureNS(\n  NAMESPACE_URIS, {\n    'LinearRing': makeReplacer(readFlatLinearRing)\n  });\n\n\n/**\n * @param {Node} node Node.\n * @param {Array.<*>} objectStack Object stack.\n */\nfunction innerBoundaryIsParser(node, objectStack) {\n  /** @type {Array.<number>|undefined} */\n  const flatLinearRing = pushParseAndPop(undefined,\n    INNER_BOUNDARY_IS_PARSERS, node, objectStack);\n  if (flatLinearRing) {\n    const flatLinearRings = /** @type {Array.<Array.<number>>} */\n        (objectStack[objectStack.length - 1]);\n    flatLinearRings.push(flatLinearRing);\n  }\n}\n\n\n/**\n * @const\n * @type {Object.<string, Object.<string, module:ol/xml~Parser>>}\n */\nconst OUTER_BOUNDARY_IS_PARSERS = makeStructureNS(\n  NAMESPACE_URIS, {\n    'LinearRing': makeReplacer(readFlatLinearRing)\n  });\n\n\n/**\n * @param {Node} node Node.\n * @param {Array.<*>} objectStack Object stack.\n */\nfunction outerBoundaryIsParser(node, objectStack) {\n  /** @type {Array.<number>|undefined} */\n  const flatLinearRing = pushParseAndPop(undefined,\n    OUTER_BOUNDARY_IS_PARSERS, node, objectStack);\n  if (flatLinearRing) {\n    const flatLinearRings = /** @type {Array.<Array.<number>>} */\n        (objectStack[objectStack.length - 1]);\n    flatLinearRings[0] = flatLinearRing;\n  }\n}\n\n\n/**\n * @const\n * @type {Object.<string, Object.<string, module:ol/xml~Parser>>}\n */\nconst NETWORK_LINK_PARSERS = makeStructureNS(\n  NAMESPACE_URIS, {\n    'ExtendedData': extendedDataParser,\n    'Region': regionParser,\n    'Link': linkParser,\n    'address': makeObjectPropertySetter(readString),\n    'description': makeObjectPropertySetter(readString),\n    'name': makeObjectPropertySetter(readString),\n    'open': makeObjectPropertySetter(readBoolean),\n    'phoneNumber': makeObjectPropertySetter(readString),\n    'visibility': makeObjectPropertySetter(readBoolean)\n  });\n\n\n/**\n * @const\n * @type {Object.<string, Object.<string, module:ol/xml~Parser>>}\n */\nconst LINK_PARSERS = makeStructureNS(\n  NAMESPACE_URIS, {\n    'href': makeObjectPropertySetter(readURI)\n  });\n\n\n/**\n * @param {Node} node Node.\n * @param {Array.<*>} objectStack Object stack.\n */\nfunction linkParser(node, objectStack) {\n  parseNode(LINK_PARSERS, node, objectStack);\n}\n\n\n/**\n * @param {Node} node Node.\n * @param {Array.<*>} objectStack Object stack.\n */\nfunction whenParser(node, objectStack) {\n  const gxTrackObject = /** @type {module:ol/format/KML~GxTrackObject} */\n      (objectStack[objectStack.length - 1]);\n  const whens = gxTrackObject.whens;\n  const s = getAllTextContent(node, false);\n  const when = Date.parse(s);\n  whens.push(isNaN(when) ? 0 : when);\n}\n\n\n/**\n * @const\n * @type {Object.<string, Object.<string, module:ol/xml~Parser>>}\n */\nconst PLACEMARK_PARSERS = makeStructureNS(\n  NAMESPACE_URIS, {\n    'ExtendedData': extendedDataParser,\n    'Region': regionParser,\n    'MultiGeometry': makeObjectPropertySetter(\n      readMultiGeometry, 'geometry'),\n    'LineString': makeObjectPropertySetter(\n      readLineString, 'geometry'),\n    'LinearRing': makeObjectPropertySetter(\n      readLinearRing, 'geometry'),\n    'Point': makeObjectPropertySetter(\n      readPoint, 'geometry'),\n    'Polygon': makeObjectPropertySetter(\n      readPolygon, 'geometry'),\n    'Style': makeObjectPropertySetter(readStyle),\n    'StyleMap': placemarkStyleMapParser,\n    'address': makeObjectPropertySetter(readString),\n    'description': makeObjectPropertySetter(readString),\n    'name': makeObjectPropertySetter(readString),\n    'open': makeObjectPropertySetter(readBoolean),\n    'phoneNumber': makeObjectPropertySetter(readString),\n    'styleUrl': makeObjectPropertySetter(readURI),\n    'visibility': makeObjectPropertySetter(readBoolean)\n  }, makeStructureNS(\n    GX_NAMESPACE_URIS, {\n      'MultiTrack': makeObjectPropertySetter(\n        readGxMultiTrack, 'geometry'),\n      'Track': makeObjectPropertySetter(\n        readGxTrack, 'geometry')\n    }\n  ));\n\n\n/**\n * @param {Node} node Node.\n * @param {Array.<*>} objectStack Object stack.\n * @private\n * @return {Array.<module:ol/Feature>|undefined} Features.\n */\nKML.prototype.readDocumentOrFolder_ = function(node, objectStack) {\n  // FIXME use scope somehow\n  const parsersNS = makeStructureNS(\n    NAMESPACE_URIS, {\n      'Document': makeArrayExtender(this.readDocumentOrFolder_, this),\n      'Folder': makeArrayExtender(this.readDocumentOrFolder_, this),\n      'Placemark': makeArrayPusher(this.readPlacemark_, this),\n      'Style': this.readSharedStyle_.bind(this),\n      'StyleMap': this.readSharedStyleMap_.bind(this)\n    });\n  /** @type {Array.<module:ol/Feature>} */\n  const features = pushParseAndPop([], parsersNS, node, objectStack, this);\n  if (features) {\n    return features;\n  } else {\n    return undefined;\n  }\n};\n\n\n/**\n * @param {Node} node Node.\n * @param {Array.<*>} objectStack Object stack.\n * @private\n * @return {module:ol/Feature|undefined} Feature.\n */\nKML.prototype.readPlacemark_ = function(node, objectStack) {\n  const object = pushParseAndPop({'geometry': null},\n    PLACEMARK_PARSERS, node, objectStack);\n  if (!object) {\n    return undefined;\n  }\n  const feature = new Feature();\n  const id = node.getAttribute('id');\n  if (id !== null) {\n    feature.setId(id);\n  }\n  const options = /** @type {module:ol/format/Feature~ReadOptions} */ (objectStack[0]);\n\n  const geometry = object['geometry'];\n  if (geometry) {\n    transformWithOptions(geometry, false, options);\n  }\n  feature.setGeometry(geometry);\n  delete object['geometry'];\n\n  if (this.extractStyles_) {\n    const style = object['Style'];\n    const styleUrl = object['styleUrl'];\n    const styleFunction = createFeatureStyleFunction(\n      style, styleUrl, this.defaultStyle_, this.sharedStyles_,\n      this.showPointNames_);\n    feature.setStyle(styleFunction);\n  }\n  delete object['Style'];\n  // we do not remove the styleUrl property from the object, so it\n  // gets stored on feature when setProperties is called\n\n  feature.setProperties(object);\n\n  return feature;\n};\n\n\n/**\n * @param {Node} node Node.\n * @param {Array.<*>} objectStack Object stack.\n * @private\n */\nKML.prototype.readSharedStyle_ = function(node, objectStack) {\n  const id = node.getAttribute('id');\n  if (id !== null) {\n    const style = readStyle(node, objectStack);\n    if (style) {\n      let styleUri;\n      let baseURI = node.baseURI;\n      if (!baseURI || baseURI == 'about:blank') {\n        baseURI = window.location.href;\n      }\n      if (baseURI) {\n        const url = new URL('#' + id, baseURI);\n        styleUri = url.href;\n      } else {\n        styleUri = '#' + id;\n      }\n      this.sharedStyles_[styleUri] = style;\n    }\n  }\n};\n\n\n/**\n * @param {Node} node Node.\n * @param {Array.<*>} objectStack Object stack.\n * @private\n */\nKML.prototype.readSharedStyleMap_ = function(node, objectStack) {\n  const id = node.getAttribute('id');\n  if (id === null) {\n    return;\n  }\n  const styleMapValue = readStyleMapValue(node, objectStack);\n  if (!styleMapValue) {\n    return;\n  }\n  let styleUri;\n  let baseURI = node.baseURI;\n  if (!baseURI || baseURI == 'about:blank') {\n    baseURI = window.location.href;\n  }\n  if (baseURI) {\n    const url = new URL('#' + id, baseURI);\n    styleUri = url.href;\n  } else {\n    styleUri = '#' + id;\n  }\n  this.sharedStyles_[styleUri] = styleMapValue;\n};\n\n\n/**\n * Read the first feature from a KML source. MultiGeometries are converted into\n * GeometryCollections if they are a mix of geometry types, and into MultiPoint/\n * MultiLineString/MultiPolygon if they are all of the same type.\n *\n * @function\n * @param {Document|Node|Object|string} source Source.\n * @param {module:ol/format/Feature~ReadOptions=} opt_options Read options.\n * @return {module:ol/Feature} Feature.\n * @api\n */\nKML.prototype.readFeature;\n\n\n/**\n * @inheritDoc\n */\nKML.prototype.readFeatureFromNode = function(node, opt_options) {\n  if (!includes(NAMESPACE_URIS, node.namespaceURI)) {\n    return null;\n  }\n  const feature = this.readPlacemark_(\n    node, [this.getReadOptions(node, opt_options)]);\n  if (feature) {\n    return feature;\n  } else {\n    return null;\n  }\n};\n\n\n/**\n * Read all features from a KML source. MultiGeometries are converted into\n * GeometryCollections if they are a mix of geometry types, and into MultiPoint/\n * MultiLineString/MultiPolygon if they are all of the same type.\n *\n * @function\n * @param {Document|Node|Object|string} source Source.\n * @param {module:ol/format/Feature~ReadOptions=} opt_options Read options.\n * @return {Array.<module:ol/Feature>} Features.\n * @api\n */\nKML.prototype.readFeatures;\n\n\n/**\n * @inheritDoc\n */\nKML.prototype.readFeaturesFromNode = function(node, opt_options) {\n  if (!includes(NAMESPACE_URIS, node.namespaceURI)) {\n    return [];\n  }\n  let features;\n  const localName = node.localName;\n  if (localName == 'Document' || localName == 'Folder') {\n    features = this.readDocumentOrFolder_(\n      node, [this.getReadOptions(node, opt_options)]);\n    if (features) {\n      return features;\n    } else {\n      return [];\n    }\n  } else if (localName == 'Placemark') {\n    const feature = this.readPlacemark_(\n      node, [this.getReadOptions(node, opt_options)]);\n    if (feature) {\n      return [feature];\n    } else {\n      return [];\n    }\n  } else if (localName == 'kml') {\n    features = [];\n    for (let n = node.firstElementChild; n; n = n.nextElementSibling) {\n      const fs = this.readFeaturesFromNode(n, opt_options);\n      if (fs) {\n        extend(features, fs);\n      }\n    }\n    return features;\n  } else {\n    return [];\n  }\n};\n\n\n/**\n * Read the name of the KML.\n *\n * @param {Document|Node|string} source Source.\n * @return {string|undefined} Name.\n * @api\n */\nKML.prototype.readName = function(source) {\n  if (isDocument(source)) {\n    return this.readNameFromDocument(/** @type {Document} */ (source));\n  } else if (isNode(source)) {\n    return this.readNameFromNode(/** @type {Node} */ (source));\n  } else if (typeof source === 'string') {\n    const doc = parse(source);\n    return this.readNameFromDocument(doc);\n  } else {\n    return undefined;\n  }\n};\n\n\n/**\n * @param {Document} doc Document.\n * @return {string|undefined} Name.\n */\nKML.prototype.readNameFromDocument = function(doc) {\n  for (let n = doc.firstChild; n; n = n.nextSibling) {\n    if (n.nodeType == Node.ELEMENT_NODE) {\n      const name = this.readNameFromNode(n);\n      if (name) {\n        return name;\n      }\n    }\n  }\n  return undefined;\n};\n\n\n/**\n * @param {Node} node Node.\n * @return {string|undefined} Name.\n */\nKML.prototype.readNameFromNode = function(node) {\n  for (let n = node.firstElementChild; n; n = n.nextElementSibling) {\n    if (includes(NAMESPACE_URIS, n.namespaceURI) &&\n        n.localName == 'name') {\n      return readString(n);\n    }\n  }\n  for (let n = node.firstElementChild; n; n = n.nextElementSibling) {\n    const localName = n.localName;\n    if (includes(NAMESPACE_URIS, n.namespaceURI) &&\n        (localName == 'Document' ||\n         localName == 'Folder' ||\n         localName == 'Placemark' ||\n         localName == 'kml')) {\n      const name = this.readNameFromNode(n);\n      if (name) {\n        return name;\n      }\n    }\n  }\n  return undefined;\n};\n\n\n/**\n * Read the network links of the KML.\n *\n * @param {Document|Node|string} source Source.\n * @return {Array.<Object>} Network links.\n * @api\n */\nKML.prototype.readNetworkLinks = function(source) {\n  const networkLinks = [];\n  if (isDocument(source)) {\n    extend(networkLinks, this.readNetworkLinksFromDocument(\n      /** @type {Document} */ (source)));\n  } else if (isNode(source)) {\n    extend(networkLinks, this.readNetworkLinksFromNode(\n      /** @type {Node} */ (source)));\n  } else if (typeof source === 'string') {\n    const doc = parse(source);\n    extend(networkLinks, this.readNetworkLinksFromDocument(doc));\n  }\n  return networkLinks;\n};\n\n\n/**\n * @param {Document} doc Document.\n * @return {Array.<Object>} Network links.\n */\nKML.prototype.readNetworkLinksFromDocument = function(doc) {\n  const networkLinks = [];\n  for (let n = doc.firstChild; n; n = n.nextSibling) {\n    if (n.nodeType == Node.ELEMENT_NODE) {\n      extend(networkLinks, this.readNetworkLinksFromNode(n));\n    }\n  }\n  return networkLinks;\n};\n\n\n/**\n * @param {Node} node Node.\n * @return {Array.<Object>} Network links.\n */\nKML.prototype.readNetworkLinksFromNode = function(node) {\n  const networkLinks = [];\n  for (let n = node.firstElementChild; n; n = n.nextElementSibling) {\n    if (includes(NAMESPACE_URIS, n.namespaceURI) &&\n        n.localName == 'NetworkLink') {\n      const obj = pushParseAndPop({}, NETWORK_LINK_PARSERS,\n        n, []);\n      networkLinks.push(obj);\n    }\n  }\n  for (let n = node.firstElementChild; n; n = n.nextElementSibling) {\n    const localName = n.localName;\n    if (includes(NAMESPACE_URIS, n.namespaceURI) &&\n        (localName == 'Document' ||\n         localName == 'Folder' ||\n         localName == 'kml')) {\n      extend(networkLinks, this.readNetworkLinksFromNode(n));\n    }\n  }\n  return networkLinks;\n};\n\n\n/**\n * Read the regions of the KML.\n *\n * @param {Document|Node|string} source Source.\n * @return {Array.<Object>} Regions.\n * @api\n */\nKML.prototype.readRegion = function(source) {\n  const regions = [];\n  if (isDocument(source)) {\n    extend(regions, this.readRegionFromDocument(\n      /** @type {Document} */ (source)));\n  } else if (isNode(source)) {\n    extend(regions, this.readRegionFromNode(\n      /** @type {Node} */ (source)));\n  } else if (typeof source === 'string') {\n    const doc = parse(source);\n    extend(regions, this.readRegionFromDocument(doc));\n  }\n  return regions;\n};\n\n\n/**\n * @param {Document} doc Document.\n * @return {Array.<Object>} Region.\n */\nKML.prototype.readRegionFromDocument = function(doc) {\n  const regions = [];\n  for (let n = doc.firstChild; n; n = n.nextSibling) {\n    if (n.nodeType == Node.ELEMENT_NODE) {\n      extend(regions, this.readRegionFromNode(n));\n    }\n  }\n  return regions;\n};\n\n\n/**\n * @param {Node} node Node.\n * @return {Array.<Object>} Region.\n * @api\n */\nKML.prototype.readRegionFromNode = function(node) {\n  const regions = [];\n  for (let n = node.firstElementChild; n; n = n.nextElementSibling) {\n    if (includes(NAMESPACE_URIS, n.namespaceURI) &&\n        n.localName == 'Region') {\n      const obj = pushParseAndPop({}, REGION_PARSERS,\n        n, []);\n      regions.push(obj);\n    }\n  }\n  for (let n = node.firstElementChild; n; n = n.nextElementSibling) {\n    const localName = n.localName;\n    if (includes(NAMESPACE_URIS, n.namespaceURI) &&\n        (localName == 'Document' ||\n         localName == 'Folder' ||\n         localName == 'kml')) {\n      extend(regions, this.readRegionFromNode(n));\n    }\n  }\n  return regions;\n};\n\n\n/**\n * Read the projection from a KML source.\n *\n * @function\n * @param {Document|Node|Object|string} source Source.\n * @return {module:ol/proj/Projection} Projection.\n * @api\n */\nKML.prototype.readProjection;\n\n\n/**\n * @param {Node} node Node to append a TextNode with the color to.\n * @param {module:ol/color~Color|string} color Color.\n */\nfunction writeColorTextNode(node, color) {\n  const rgba = asArray(color);\n  const opacity = (rgba.length == 4) ? rgba[3] : 1;\n  const abgr = [opacity * 255, rgba[2], rgba[1], rgba[0]];\n  for (let i = 0; i < 4; ++i) {\n    const hex = parseInt(abgr[i], 10).toString(16);\n    abgr[i] = (hex.length == 1) ? '0' + hex : hex;\n  }\n  writeStringTextNode(node, abgr.join(''));\n}\n\n\n/**\n * @param {Node} node Node to append a TextNode with the coordinates to.\n * @param {Array.<number>} coordinates Coordinates.\n * @param {Array.<*>} objectStack Object stack.\n */\nfunction writeCoordinatesTextNode(node, coordinates, objectStack) {\n  const context = objectStack[objectStack.length - 1];\n\n  const layout = context['layout'];\n  const stride = context['stride'];\n\n  let dimension;\n  if (layout == GeometryLayout.XY ||\n      layout == GeometryLayout.XYM) {\n    dimension = 2;\n  } else if (layout == GeometryLayout.XYZ ||\n      layout == GeometryLayout.XYZM) {\n    dimension = 3;\n  } else {\n    assert(false, 34); // Invalid geometry layout\n  }\n\n  const ii = coordinates.length;\n  let text = '';\n  if (ii > 0) {\n    text += coordinates[0];\n    for (let d = 1; d < dimension; ++d) {\n      text += ',' + coordinates[d];\n    }\n    for (let i = stride; i < ii; i += stride) {\n      text += ' ' + coordinates[i];\n      for (let d = 1; d < dimension; ++d) {\n        text += ',' + coordinates[i + d];\n      }\n    }\n  }\n  writeStringTextNode(node, text);\n}\n\n\n/**\n * @const\n * @type {Object.<string, Object.<string, module:ol/xml~Serializer>>}\n */\nconst EXTENDEDDATA_NODE_SERIALIZERS = makeStructureNS(\n  NAMESPACE_URIS, {\n    'Data': makeChildAppender(writeDataNode),\n    'value': makeChildAppender(writeDataNodeValue),\n    'displayName': makeChildAppender(writeDataNodeName)\n  });\n\n\n/**\n * @param {Node} node Node.\n * @param {{name: *, value: *}} pair Name value pair.\n * @param {Array.<*>} objectStack Object stack.\n */\nfunction writeDataNode(node, pair, objectStack) {\n  node.setAttribute('name', pair.name);\n  const /** @type {module:ol/xml~NodeStackItem} */ context = {node: node};\n  const value = pair.value;\n\n  if (typeof value == 'object') {\n    if (value !== null && value.displayName) {\n      pushSerializeAndPop(context, EXTENDEDDATA_NODE_SERIALIZERS,\n        OBJECT_PROPERTY_NODE_FACTORY, [value.displayName], objectStack, ['displayName']);\n    }\n\n    if (value !== null && value.value) {\n      pushSerializeAndPop(context, EXTENDEDDATA_NODE_SERIALIZERS,\n        OBJECT_PROPERTY_NODE_FACTORY, [value.value], objectStack, ['value']);\n    }\n  } else {\n    pushSerializeAndPop(context, EXTENDEDDATA_NODE_SERIALIZERS,\n      OBJECT_PROPERTY_NODE_FACTORY, [value], objectStack, ['value']);\n  }\n}\n\n\n/**\n * @param {Node} node Node to append a TextNode with the name to.\n * @param {string} name DisplayName.\n */\nfunction writeDataNodeName(node, name) {\n  writeCDATASection(node, name);\n}\n\n\n/**\n * @param {Node} node Node to append a CDATA Section with the value to.\n * @param {string} value Value.\n */\nfunction writeDataNodeValue(node, value) {\n  writeStringTextNode(node, value);\n}\n\n\n/**\n * @const\n * @type {Object.<string, Object.<string, module:ol/xml~Serializer>>}\n */\nconst DOCUMENT_SERIALIZERS = makeStructureNS(\n  NAMESPACE_URIS, {\n    'Placemark': makeChildAppender(writePlacemark)\n  });\n\n\n/**\n * @const\n * @param {*} value Value.\n * @param {Array.<*>} objectStack Object stack.\n * @param {string=} opt_nodeName Node name.\n * @return {Node|undefined} Node.\n */\nconst DOCUMENT_NODE_FACTORY = function(value, objectStack, opt_nodeName) {\n  const parentNode = objectStack[objectStack.length - 1].node;\n  return createElementNS(parentNode.namespaceURI, 'Placemark');\n};\n\n\n/**\n * @param {Node} node Node.\n * @param {Array.<module:ol/Feature>} features Features.\n * @param {Array.<*>} objectStack Object stack.\n * @this {module:ol/format/KML}\n */\nfunction writeDocument(node, features, objectStack) {\n  const /** @type {module:ol/xml~NodeStackItem} */ context = {node: node};\n  pushSerializeAndPop(context, DOCUMENT_SERIALIZERS,\n    DOCUMENT_NODE_FACTORY, features, objectStack, undefined,\n    this);\n}\n\n\n/**\n * A factory for creating Data nodes.\n * @const\n * @type {function(*, Array.<*>): (Node|undefined)}\n */\nconst DATA_NODE_FACTORY = makeSimpleNodeFactory('Data');\n\n\n/**\n * @param {Node} node Node.\n * @param {{names: Array<string>, values: (Array<*>)}} namesAndValues Names and values.\n * @param {Array.<*>} objectStack Object stack.\n */\nfunction writeExtendedData(node, namesAndValues, objectStack) {\n  const /** @type {module:ol/xml~NodeStackItem} */ context = {node: node};\n  const names = namesAndValues.names;\n  const values = namesAndValues.values;\n  const length = names.length;\n\n  for (let i = 0; i < length; i++) {\n    pushSerializeAndPop(context, EXTENDEDDATA_NODE_SERIALIZERS,\n      DATA_NODE_FACTORY, [{name: names[i], value: values[i]}], objectStack);\n  }\n}\n\n\n/**\n * @const\n * @type {Object.<string, Array.<string>>}\n */\nconst ICON_SEQUENCE = makeStructureNS(\n  NAMESPACE_URIS, [\n    'href'\n  ],\n  makeStructureNS(GX_NAMESPACE_URIS, [\n    'x', 'y', 'w', 'h'\n  ]));\n\n\n/**\n * @const\n * @type {Object.<string, Object.<string, module:ol/xml~Serializer>>}\n */\nconst ICON_SERIALIZERS = makeStructureNS(\n  NAMESPACE_URIS, {\n    'href': makeChildAppender(writeStringTextNode)\n  }, makeStructureNS(\n    GX_NAMESPACE_URIS, {\n      'x': makeChildAppender(writeDecimalTextNode),\n      'y': makeChildAppender(writeDecimalTextNode),\n      'w': makeChildAppender(writeDecimalTextNode),\n      'h': makeChildAppender(writeDecimalTextNode)\n    }));\n\n\n/**\n * @const\n * @param {*} value Value.\n * @param {Array.<*>} objectStack Object stack.\n * @param {string=} opt_nodeName Node name.\n * @return {Node|undefined} Node.\n */\nconst GX_NODE_FACTORY = function(value, objectStack, opt_nodeName) {\n  return createElementNS(GX_NAMESPACE_URIS[0],\n    'gx:' + opt_nodeName);\n};\n\n\n/**\n * @param {Node} node Node.\n * @param {Object} icon Icon object.\n * @param {Array.<*>} objectStack Object stack.\n */\nfunction writeIcon(node, icon, objectStack) {\n  const /** @type {module:ol/xml~NodeStackItem} */ context = {node: node};\n  const parentNode = objectStack[objectStack.length - 1].node;\n  let orderedKeys = ICON_SEQUENCE[parentNode.namespaceURI];\n  let values = makeSequence(icon, orderedKeys);\n  pushSerializeAndPop(context,\n    ICON_SERIALIZERS, OBJECT_PROPERTY_NODE_FACTORY,\n    values, objectStack, orderedKeys);\n  orderedKeys =\n      ICON_SEQUENCE[GX_NAMESPACE_URIS[0]];\n  values = makeSequence(icon, orderedKeys);\n  pushSerializeAndPop(context, ICON_SERIALIZERS,\n    GX_NODE_FACTORY, values, objectStack, orderedKeys);\n}\n\n\n/**\n * @const\n * @type {Object.<string, Array.<string>>}\n */\nconst ICON_STYLE_SEQUENCE = makeStructureNS(\n  NAMESPACE_URIS, [\n    'scale', 'heading', 'Icon', 'hotSpot'\n  ]);\n\n\n/**\n * @const\n * @type {Object.<string, Object.<string, module:ol/xml~Serializer>>}\n */\nconst ICON_STYLE_SERIALIZERS = makeStructureNS(\n  NAMESPACE_URIS, {\n    'Icon': makeChildAppender(writeIcon),\n    'heading': makeChildAppender(writeDecimalTextNode),\n    'hotSpot': makeChildAppender(writeVec2),\n    'scale': makeChildAppender(writeScaleTextNode)\n  });\n\n\n/**\n * @param {Node} node Node.\n * @param {module:ol/style/Icon} style Icon style.\n * @param {Array.<*>} objectStack Object stack.\n */\nfunction writeIconStyle(node, style, objectStack) {\n  const /** @type {module:ol/xml~NodeStackItem} */ context = {node: node};\n  const properties = {};\n  const src = style.getSrc();\n  const size = style.getSize();\n  const iconImageSize = style.getImageSize();\n  const iconProperties = {\n    'href': src\n  };\n\n  if (size) {\n    iconProperties['w'] = size[0];\n    iconProperties['h'] = size[1];\n    const anchor = style.getAnchor(); // top-left\n    const origin = style.getOrigin(); // top-left\n\n    if (origin && iconImageSize && origin[0] !== 0 && origin[1] !== size[1]) {\n      iconProperties['x'] = origin[0];\n      iconProperties['y'] = iconImageSize[1] - (origin[1] + size[1]);\n    }\n\n    if (anchor && (anchor[0] !== size[0] / 2 || anchor[1] !== size[1] / 2)) {\n      const /** @type {module:ol/format/KML~Vec2} */ hotSpot = {\n        x: anchor[0],\n        xunits: IconAnchorUnits.PIXELS,\n        y: size[1] - anchor[1],\n        yunits: IconAnchorUnits.PIXELS\n      };\n      properties['hotSpot'] = hotSpot;\n    }\n  }\n\n  properties['Icon'] = iconProperties;\n\n  const scale = style.getScale();\n  if (scale !== 1) {\n    properties['scale'] = scale;\n  }\n\n  const rotation = style.getRotation();\n  if (rotation !== 0) {\n    properties['heading'] = rotation; // 0-360\n  }\n\n  const parentNode = objectStack[objectStack.length - 1].node;\n  const orderedKeys = ICON_STYLE_SEQUENCE[parentNode.namespaceURI];\n  const values = makeSequence(properties, orderedKeys);\n  pushSerializeAndPop(context, ICON_STYLE_SERIALIZERS,\n    OBJECT_PROPERTY_NODE_FACTORY, values, objectStack, orderedKeys);\n}\n\n\n/**\n * @const\n * @type {Object.<string, Array.<string>>}\n */\nconst LABEL_STYLE_SEQUENCE = makeStructureNS(\n  NAMESPACE_URIS, [\n    'color', 'scale'\n  ]);\n\n\n/**\n * @const\n * @type {Object.<string, Object.<string, module:ol/xml~Serializer>>}\n */\nconst LABEL_STYLE_SERIALIZERS = makeStructureNS(\n  NAMESPACE_URIS, {\n    'color': makeChildAppender(writeColorTextNode),\n    'scale': makeChildAppender(writeScaleTextNode)\n  });\n\n\n/**\n * @param {Node} node Node.\n * @param {module:ol/style/Text} style style.\n * @param {Array.<*>} objectStack Object stack.\n */\nfunction writeLabelStyle(node, style, objectStack) {\n  const /** @type {module:ol/xml~NodeStackItem} */ context = {node: node};\n  const properties = {};\n  const fill = style.getFill();\n  if (fill) {\n    properties['color'] = fill.getColor();\n  }\n  const scale = style.getScale();\n  if (scale && scale !== 1) {\n    properties['scale'] = scale;\n  }\n  const parentNode = objectStack[objectStack.length - 1].node;\n  const orderedKeys =\n      LABEL_STYLE_SEQUENCE[parentNode.namespaceURI];\n  const values = makeSequence(properties, orderedKeys);\n  pushSerializeAndPop(context, LABEL_STYLE_SERIALIZERS,\n    OBJECT_PROPERTY_NODE_FACTORY, values, objectStack, orderedKeys);\n}\n\n\n/**\n * @const\n * @type {Object.<string, Array.<string>>}\n */\nconst LINE_STYLE_SEQUENCE = makeStructureNS(\n  NAMESPACE_URIS, [\n    'color', 'width'\n  ]);\n\n\n/**\n * @const\n * @type {Object.<string, Object.<string, module:ol/xml~Serializer>>}\n */\nconst LINE_STYLE_SERIALIZERS = makeStructureNS(\n  NAMESPACE_URIS, {\n    'color': makeChildAppender(writeColorTextNode),\n    'width': makeChildAppender(writeDecimalTextNode)\n  });\n\n\n/**\n * @param {Node} node Node.\n * @param {module:ol/style/Stroke} style style.\n * @param {Array.<*>} objectStack Object stack.\n */\nfunction writeLineStyle(node, style, objectStack) {\n  const /** @type {module:ol/xml~NodeStackItem} */ context = {node: node};\n  const properties = {\n    'color': style.getColor(),\n    'width': style.getWidth()\n  };\n  const parentNode = objectStack[objectStack.length - 1].node;\n  const orderedKeys = LINE_STYLE_SEQUENCE[parentNode.namespaceURI];\n  const values = makeSequence(properties, orderedKeys);\n  pushSerializeAndPop(context, LINE_STYLE_SERIALIZERS,\n    OBJECT_PROPERTY_NODE_FACTORY, values, objectStack, orderedKeys);\n}\n\n\n/**\n * @const\n * @type {Object.<string, string>}\n */\nconst GEOMETRY_TYPE_TO_NODENAME = {\n  'Point': 'Point',\n  'LineString': 'LineString',\n  'LinearRing': 'LinearRing',\n  'Polygon': 'Polygon',\n  'MultiPoint': 'MultiGeometry',\n  'MultiLineString': 'MultiGeometry',\n  'MultiPolygon': 'MultiGeometry',\n  'GeometryCollection': 'MultiGeometry'\n};\n\n\n/**\n * @const\n * @param {*} value Value.\n * @param {Array.<*>} objectStack Object stack.\n * @param {string=} opt_nodeName Node name.\n * @return {Node|undefined} Node.\n */\nconst GEOMETRY_NODE_FACTORY = function(value, objectStack, opt_nodeName) {\n  if (value) {\n    const parentNode = objectStack[objectStack.length - 1].node;\n    return createElementNS(parentNode.namespaceURI,\n      GEOMETRY_TYPE_TO_NODENAME[/** @type {module:ol/geom/Geometry} */ (value).getType()]);\n  }\n};\n\n\n/**\n * A factory for creating Point nodes.\n * @const\n * @type {function(*, Array.<*>, string=): (Node|undefined)}\n */\nconst POINT_NODE_FACTORY = makeSimpleNodeFactory('Point');\n\n\n/**\n * A factory for creating LineString nodes.\n * @const\n * @type {function(*, Array.<*>, string=): (Node|undefined)}\n */\nconst LINE_STRING_NODE_FACTORY = makeSimpleNodeFactory('LineString');\n\n\n/**\n * A factory for creating LinearRing nodes.\n * @const\n * @type {function(*, Array.<*>, string=): (Node|undefined)}\n */\nconst LINEAR_RING_NODE_FACTORY = makeSimpleNodeFactory('LinearRing');\n\n\n/**\n * A factory for creating Polygon nodes.\n * @const\n * @type {function(*, Array.<*>, string=): (Node|undefined)}\n */\nconst POLYGON_NODE_FACTORY = makeSimpleNodeFactory('Polygon');\n\n\n/**\n * @const\n * @type {Object.<string, Object.<string, module:ol/xml~Serializer>>}\n */\nconst MULTI_GEOMETRY_SERIALIZERS = makeStructureNS(\n  NAMESPACE_URIS, {\n    'LineString': makeChildAppender(\n      writePrimitiveGeometry),\n    'Point': makeChildAppender(\n      writePrimitiveGeometry),\n    'Polygon': makeChildAppender(writePolygon),\n    'GeometryCollection': makeChildAppender(\n      writeMultiGeometry)\n  });\n\n\n/**\n * @param {Node} node Node.\n * @param {module:ol/geom/Geometry} geometry Geometry.\n * @param {Array.<*>} objectStack Object stack.\n */\nfunction writeMultiGeometry(node, geometry, objectStack) {\n  /** @type {module:ol/xml~NodeStackItem} */\n  const context = {node: node};\n  const type = geometry.getType();\n  /** @type {Array.<module:ol/geom/Geometry>} */\n  let geometries;\n  /** @type {function(*, Array.<*>, string=): (Node|undefined)} */\n  let factory;\n  if (type == GeometryType.GEOMETRY_COLLECTION) {\n    geometries = /** @type {module:ol/geom/GeometryCollection} */ (geometry).getGeometries();\n    factory = GEOMETRY_NODE_FACTORY;\n  } else if (type == GeometryType.MULTI_POINT) {\n    geometries = /** @type {module:ol/geom/MultiPoint} */ (geometry).getPoints();\n    factory = POINT_NODE_FACTORY;\n  } else if (type == GeometryType.MULTI_LINE_STRING) {\n    geometries =\n        (/** @type {module:ol/geom/MultiLineString} */ (geometry)).getLineStrings();\n    factory = LINE_STRING_NODE_FACTORY;\n  } else if (type == GeometryType.MULTI_POLYGON) {\n    geometries =\n        (/** @type {module:ol/geom/MultiPolygon} */ (geometry)).getPolygons();\n    factory = POLYGON_NODE_FACTORY;\n  } else {\n    assert(false, 39); // Unknown geometry type\n  }\n  pushSerializeAndPop(context,\n    MULTI_GEOMETRY_SERIALIZERS, factory,\n    geometries, objectStack);\n}\n\n\n/**\n * @const\n * @type {Object.<string, Object.<string, module:ol/xml~Serializer>>}\n */\nconst BOUNDARY_IS_SERIALIZERS = makeStructureNS(\n  NAMESPACE_URIS, {\n    'LinearRing': makeChildAppender(\n      writePrimitiveGeometry)\n  });\n\n\n/**\n * @param {Node} node Node.\n * @param {module:ol/geom/LinearRing} linearRing Linear ring.\n * @param {Array.<*>} objectStack Object stack.\n */\nfunction writeBoundaryIs(node, linearRing, objectStack) {\n  const /** @type {module:ol/xml~NodeStackItem} */ context = {node: node};\n  pushSerializeAndPop(context,\n    BOUNDARY_IS_SERIALIZERS,\n    LINEAR_RING_NODE_FACTORY, [linearRing], objectStack);\n}\n\n\n/**\n * @const\n * @type {Object.<string, Object.<string, module:ol/xml~Serializer>>}\n */\nconst PLACEMARK_SERIALIZERS = makeStructureNS(\n  NAMESPACE_URIS, {\n    'ExtendedData': makeChildAppender(writeExtendedData),\n    'MultiGeometry': makeChildAppender(writeMultiGeometry),\n    'LineString': makeChildAppender(writePrimitiveGeometry),\n    'LinearRing': makeChildAppender(writePrimitiveGeometry),\n    'Point': makeChildAppender(writePrimitiveGeometry),\n    'Polygon': makeChildAppender(writePolygon),\n    'Style': makeChildAppender(writeStyle),\n    'address': makeChildAppender(writeStringTextNode),\n    'description': makeChildAppender(writeStringTextNode),\n    'name': makeChildAppender(writeStringTextNode),\n    'open': makeChildAppender(writeBooleanTextNode),\n    'phoneNumber': makeChildAppender(writeStringTextNode),\n    'styleUrl': makeChildAppender(writeStringTextNode),\n    'visibility': makeChildAppender(writeBooleanTextNode)\n  });\n\n\n/**\n * @const\n * @type {Object.<string, Array.<string>>}\n */\nconst PLACEMARK_SEQUENCE = makeStructureNS(\n  NAMESPACE_URIS, [\n    'name', 'open', 'visibility', 'address', 'phoneNumber', 'description',\n    'styleUrl', 'Style'\n  ]);\n\n\n/**\n * A factory for creating ExtendedData nodes.\n * @const\n * @type {function(*, Array.<*>): (Node|undefined)}\n */\nconst EXTENDEDDATA_NODE_FACTORY = makeSimpleNodeFactory('ExtendedData');\n\n\n/**\n * FIXME currently we do serialize arbitrary/custom feature properties\n * (ExtendedData).\n * @param {Node} node Node.\n * @param {module:ol/Feature} feature Feature.\n * @param {Array.<*>} objectStack Object stack.\n * @this {module:ol/format/KML}\n */\nfunction writePlacemark(node, feature, objectStack) {\n  const /** @type {module:ol/xml~NodeStackItem} */ context = {node: node};\n\n  // set id\n  if (feature.getId()) {\n    node.setAttribute('id', feature.getId());\n  }\n\n  // serialize properties (properties unknown to KML are not serialized)\n  const properties = feature.getProperties();\n\n  // don't export these to ExtendedData\n  const filter = {'address': 1, 'description': 1, 'name': 1, 'open': 1,\n    'phoneNumber': 1, 'styleUrl': 1, 'visibility': 1};\n  filter[feature.getGeometryName()] = 1;\n  const keys = Object.keys(properties || {}).sort().filter(function(v) {\n    return !filter[v];\n  });\n\n  if (keys.length > 0) {\n    const sequence = makeSequence(properties, keys);\n    const namesAndValues = {names: keys, values: sequence};\n    pushSerializeAndPop(context, PLACEMARK_SERIALIZERS,\n      EXTENDEDDATA_NODE_FACTORY, [namesAndValues], objectStack);\n  }\n\n  const styleFunction = feature.getStyleFunction();\n  if (styleFunction) {\n    // FIXME the styles returned by the style function are supposed to be\n    // resolution-independent here\n    const styles = styleFunction(feature, 0);\n    if (styles) {\n      const style = Array.isArray(styles) ? styles[0] : styles;\n      if (this.writeStyles_) {\n        properties['Style'] = style;\n      }\n      const textStyle = style.getText();\n      if (textStyle) {\n        properties['name'] = textStyle.getText();\n      }\n    }\n  }\n  const parentNode = objectStack[objectStack.length - 1].node;\n  const orderedKeys = PLACEMARK_SEQUENCE[parentNode.namespaceURI];\n  const values = makeSequence(properties, orderedKeys);\n  pushSerializeAndPop(context, PLACEMARK_SERIALIZERS,\n    OBJECT_PROPERTY_NODE_FACTORY, values, objectStack, orderedKeys);\n\n  // serialize geometry\n  const options = /** @type {module:ol/format/Feature~WriteOptions} */ (objectStack[0]);\n  let geometry = feature.getGeometry();\n  if (geometry) {\n    geometry = transformWithOptions(geometry, true, options);\n  }\n  pushSerializeAndPop(context, PLACEMARK_SERIALIZERS,\n    GEOMETRY_NODE_FACTORY, [geometry], objectStack);\n}\n\n\n/**\n * @const\n * @type {Object.<string, Array.<string>>}\n */\nconst PRIMITIVE_GEOMETRY_SEQUENCE = makeStructureNS(\n  NAMESPACE_URIS, [\n    'extrude', 'tessellate', 'altitudeMode', 'coordinates'\n  ]);\n\n\n/**\n * @const\n * @type {Object.<string, Object.<string, module:ol/xml~Serializer>>}\n */\nconst PRIMITIVE_GEOMETRY_SERIALIZERS = makeStructureNS(\n  NAMESPACE_URIS, {\n    'extrude': makeChildAppender(writeBooleanTextNode),\n    'tessellate': makeChildAppender(writeBooleanTextNode),\n    'altitudeMode': makeChildAppender(writeStringTextNode),\n    'coordinates': makeChildAppender(writeCoordinatesTextNode)\n  });\n\n\n/**\n * @param {Node} node Node.\n * @param {module:ol/geom/SimpleGeometry} geometry Geometry.\n * @param {Array.<*>} objectStack Object stack.\n */\nfunction writePrimitiveGeometry(node, geometry, objectStack) {\n  const flatCoordinates = geometry.getFlatCoordinates();\n  const /** @type {module:ol/xml~NodeStackItem} */ context = {node: node};\n  context['layout'] = geometry.getLayout();\n  context['stride'] = geometry.getStride();\n\n  // serialize properties (properties unknown to KML are not serialized)\n  const properties = geometry.getProperties();\n  properties.coordinates = flatCoordinates;\n\n  const parentNode = objectStack[objectStack.length - 1].node;\n  const orderedKeys = PRIMITIVE_GEOMETRY_SEQUENCE[parentNode.namespaceURI];\n  const values = makeSequence(properties, orderedKeys);\n  pushSerializeAndPop(context, PRIMITIVE_GEOMETRY_SERIALIZERS,\n    OBJECT_PROPERTY_NODE_FACTORY, values, objectStack, orderedKeys);\n}\n\n\n/**\n * @const\n * @type {Object.<string, Object.<string, module:ol/xml~Serializer>>}\n */\nconst POLYGON_SERIALIZERS = makeStructureNS(\n  NAMESPACE_URIS, {\n    'outerBoundaryIs': makeChildAppender(\n      writeBoundaryIs),\n    'innerBoundaryIs': makeChildAppender(\n      writeBoundaryIs)\n  });\n\n\n/**\n * A factory for creating innerBoundaryIs nodes.\n * @const\n * @type {function(*, Array.<*>, string=): (Node|undefined)}\n */\nconst INNER_BOUNDARY_NODE_FACTORY = makeSimpleNodeFactory('innerBoundaryIs');\n\n\n/**\n * A factory for creating outerBoundaryIs nodes.\n * @const\n * @type {function(*, Array.<*>, string=): (Node|undefined)}\n */\nconst OUTER_BOUNDARY_NODE_FACTORY = makeSimpleNodeFactory('outerBoundaryIs');\n\n\n/**\n * @param {Node} node Node.\n * @param {module:ol/geom/Polygon} polygon Polygon.\n * @param {Array.<*>} objectStack Object stack.\n */\nfunction writePolygon(node, polygon, objectStack) {\n  const linearRings = polygon.getLinearRings();\n  const outerRing = linearRings.shift();\n  const /** @type {module:ol/xml~NodeStackItem} */ context = {node: node};\n  // inner rings\n  pushSerializeAndPop(context,\n    POLYGON_SERIALIZERS,\n    INNER_BOUNDARY_NODE_FACTORY,\n    linearRings, objectStack);\n  // outer ring\n  pushSerializeAndPop(context,\n    POLYGON_SERIALIZERS,\n    OUTER_BOUNDARY_NODE_FACTORY,\n    [outerRing], objectStack);\n}\n\n\n/**\n * @const\n * @type {Object.<string, Object.<string, module:ol/xml~Serializer>>}\n */\nconst POLY_STYLE_SERIALIZERS = makeStructureNS(\n  NAMESPACE_URIS, {\n    'color': makeChildAppender(writeColorTextNode)\n  });\n\n\n/**\n * A factory for creating coordinates nodes.\n * @const\n * @type {function(*, Array.<*>, string=): (Node|undefined)}\n */\nconst COLOR_NODE_FACTORY = makeSimpleNodeFactory('color');\n\n\n/**\n * @param {Node} node Node.\n * @param {module:ol/style/Fill} style Style.\n * @param {Array.<*>} objectStack Object stack.\n */\nfunction writePolyStyle(node, style, objectStack) {\n  const /** @type {module:ol/xml~NodeStackItem} */ context = {node: node};\n  pushSerializeAndPop(context, POLY_STYLE_SERIALIZERS,\n    COLOR_NODE_FACTORY, [style.getColor()], objectStack);\n}\n\n\n/**\n * @param {Node} node Node to append a TextNode with the scale to.\n * @param {number|undefined} scale Scale.\n */\nfunction writeScaleTextNode(node, scale) {\n  // the Math is to remove any excess decimals created by float arithmetic\n  writeDecimalTextNode(node,\n    Math.round(scale * 1e6) / 1e6);\n}\n\n\n/**\n * @const\n * @type {Object.<string, Array.<string>>}\n */\nconst STYLE_SEQUENCE = makeStructureNS(\n  NAMESPACE_URIS, [\n    'IconStyle', 'LabelStyle', 'LineStyle', 'PolyStyle'\n  ]);\n\n\n/**\n * @const\n * @type {Object.<string, Object.<string, module:ol/xml~Serializer>>}\n */\nconst STYLE_SERIALIZERS = makeStructureNS(\n  NAMESPACE_URIS, {\n    'IconStyle': makeChildAppender(writeIconStyle),\n    'LabelStyle': makeChildAppender(writeLabelStyle),\n    'LineStyle': makeChildAppender(writeLineStyle),\n    'PolyStyle': makeChildAppender(writePolyStyle)\n  });\n\n\n/**\n * @param {Node} node Node.\n * @param {module:ol/style/Style} style Style.\n * @param {Array.<*>} objectStack Object stack.\n */\nfunction writeStyle(node, style, objectStack) {\n  const /** @type {module:ol/xml~NodeStackItem} */ context = {node: node};\n  const properties = {};\n  const fillStyle = style.getFill();\n  const strokeStyle = style.getStroke();\n  const imageStyle = style.getImage();\n  const textStyle = style.getText();\n  if (imageStyle instanceof Icon) {\n    properties['IconStyle'] = imageStyle;\n  }\n  if (textStyle) {\n    properties['LabelStyle'] = textStyle;\n  }\n  if (strokeStyle) {\n    properties['LineStyle'] = strokeStyle;\n  }\n  if (fillStyle) {\n    properties['PolyStyle'] = fillStyle;\n  }\n  const parentNode = objectStack[objectStack.length - 1].node;\n  const orderedKeys = STYLE_SEQUENCE[parentNode.namespaceURI];\n  const values = makeSequence(properties, orderedKeys);\n  pushSerializeAndPop(context, STYLE_SERIALIZERS,\n    OBJECT_PROPERTY_NODE_FACTORY, values, objectStack, orderedKeys);\n}\n\n\n/**\n * @param {Node} node Node to append a TextNode with the Vec2 to.\n * @param {module:ol/format/KML~Vec2} vec2 Vec2.\n */\nfunction writeVec2(node, vec2) {\n  node.setAttribute('x', vec2.x);\n  node.setAttribute('y', vec2.y);\n  node.setAttribute('xunits', vec2.xunits);\n  node.setAttribute('yunits', vec2.yunits);\n}\n\n\n/**\n * @const\n * @type {Object.<string, Array.<string>>}\n */\nconst KML_SEQUENCE = makeStructureNS(\n  NAMESPACE_URIS, [\n    'Document', 'Placemark'\n  ]);\n\n\n/**\n * @const\n * @type {Object.<string, Object.<string, module:ol/xml~Serializer>>}\n */\nconst KML_SERIALIZERS = makeStructureNS(\n  NAMESPACE_URIS, {\n    'Document': makeChildAppender(writeDocument),\n    'Placemark': makeChildAppender(writePlacemark)\n  });\n\n\n/**\n * Encode an array of features in the KML format. GeometryCollections, MultiPoints,\n * MultiLineStrings, and MultiPolygons are output as MultiGeometries.\n *\n * @function\n * @param {Array.<module:ol/Feature>} features Features.\n * @param {module:ol/format/Feature~WriteOptions=} opt_options Options.\n * @return {string} Result.\n * @api\n */\nKML.prototype.writeFeatures;\n\n\n/**\n * Encode an array of features in the KML format as an XML node. GeometryCollections,\n * MultiPoints, MultiLineStrings, and MultiPolygons are output as MultiGeometries.\n *\n * @param {Array.<module:ol/Feature>} features Features.\n * @param {module:ol/format/Feature~WriteOptions=} opt_options Options.\n * @return {Node} Node.\n * @override\n * @api\n */\nKML.prototype.writeFeaturesNode = function(features, opt_options) {\n  opt_options = this.adaptOptions(opt_options);\n  const kml = createElementNS(NAMESPACE_URIS[4], 'kml');\n  const xmlnsUri = 'http://www.w3.org/2000/xmlns/';\n  kml.setAttributeNS(xmlnsUri, 'xmlns:gx', GX_NAMESPACE_URIS[0]);\n  kml.setAttributeNS(xmlnsUri, 'xmlns:xsi', XML_SCHEMA_INSTANCE_URI);\n  kml.setAttributeNS(XML_SCHEMA_INSTANCE_URI, 'xsi:schemaLocation', SCHEMA_LOCATION);\n\n  const /** @type {module:ol/xml~NodeStackItem} */ context = {node: kml};\n  const properties = {};\n  if (features.length > 1) {\n    properties['Document'] = features;\n  } else if (features.length == 1) {\n    properties['Placemark'] = features[0];\n  }\n  const orderedKeys = KML_SEQUENCE[kml.namespaceURI];\n  const values = makeSequence(properties, orderedKeys);\n  pushSerializeAndPop(context, KML_SERIALIZERS,\n    OBJECT_PROPERTY_NODE_FACTORY, values, [opt_options], orderedKeys,\n    this);\n  return kml;\n};\n\nexport default KML;\n","/**\n * @module ol/tilegrid/TileGrid\n */\nimport {DEFAULT_TILE_SIZE} from './common.js';\nimport {assert} from '../asserts.js';\nimport TileRange, {createOrUpdate as createOrUpdateTileRange} from '../TileRange.js';\nimport {isSorted, linearFindNearest} from '../array.js';\nimport {createOrUpdate, getTopLeft} from '../extent.js';\nimport {clamp} from '../math.js';\nimport {toSize} from '../size.js';\nimport {createOrUpdate as createOrUpdateTileCoord} from '../tilecoord.js';\n\n\n/**\n * @typedef {Object} Options\n * @property {module:ol/extent~Extent} [extent] Extent for the tile grid. No tiles outside this\n * extent will be requested by {@link module:ol/source/Tile} sources. When no `origin` or\n * `origins` are configured, the `origin` will be set to the top-left corner of the extent.\n * @property {number} [minZoom=0] Minimum zoom.\n * @property {module:ol/coordinate~Coordinate} [origin] The tile grid origin, i.e. where the `x`\n * and `y` axes meet (`[z, 0, 0]`). Tile coordinates increase left to right and upwards. If not\n * specified, `extent` or `origins` must be provided.\n * @property {Array.<module:ol/coordinate~Coordinate>} [origins] Tile grid origins, i.e. where\n * the `x` and `y` axes meet (`[z, 0, 0]`), for each zoom level. If given, the array length\n * should match the length of the `resolutions` array, i.e. each resolution can have a different\n * origin. Tile coordinates increase left to right and upwards. If not specified, `extent` or\n * `origin` must be provided.\n * @property {!Array.<number>} resolutions Resolutions. The array index of each resolution needs\n * to match the zoom level. This means that even if a `minZoom` is configured, the resolutions\n * array will have a length of `maxZoom + 1`.\n * @property {Array.<module:ol/size~Size>} [sizes] Sizes.\n * @property {number|module:ol/size~Size} [tileSize] Tile size.\n * Default is `[256, 256]`.\n * @property {Array.<module:ol/size~Size>} [tileSizes] Tile sizes. If given, the array length\n * should match the length of the `resolutions` array, i.e. each resolution can have a different\n * tile size.\n */\n\n\n/**\n * @classdesc\n * Base class for setting the grid pattern for sources accessing tiled-image\n * servers.\n *\n * @constructor\n * @param {module:ol/tilegrid/TileGrid~Options} options Tile grid options.\n * @struct\n * @api\n */\nconst TileGrid = function(options) {\n\n  /**\n   * @protected\n   * @type {number}\n   */\n  this.minZoom = options.minZoom !== undefined ? options.minZoom : 0;\n\n  /**\n   * @private\n   * @type {!Array.<number>}\n   */\n  this.resolutions_ = options.resolutions;\n  assert(isSorted(this.resolutions_, function(a, b) {\n    return b - a;\n  }, true), 17); // `resolutions` must be sorted in descending order\n\n\n  // check if we've got a consistent zoom factor and origin\n  let zoomFactor;\n  if (!options.origins) {\n    for (let i = 0, ii = this.resolutions_.length - 1; i < ii; ++i) {\n      if (!zoomFactor) {\n        zoomFactor = this.resolutions_[i] / this.resolutions_[i + 1];\n      } else {\n        if (this.resolutions_[i] / this.resolutions_[i + 1] !== zoomFactor) {\n          zoomFactor = undefined;\n          break;\n        }\n      }\n    }\n  }\n\n\n  /**\n   * @private\n   * @type {number|undefined}\n   */\n  this.zoomFactor_ = zoomFactor;\n\n\n  /**\n   * @protected\n   * @type {number}\n   */\n  this.maxZoom = this.resolutions_.length - 1;\n\n  /**\n   * @private\n   * @type {module:ol/coordinate~Coordinate}\n   */\n  this.origin_ = options.origin !== undefined ? options.origin : null;\n\n  /**\n   * @private\n   * @type {Array.<module:ol/coordinate~Coordinate>}\n   */\n  this.origins_ = null;\n  if (options.origins !== undefined) {\n    this.origins_ = options.origins;\n    assert(this.origins_.length == this.resolutions_.length,\n      20); // Number of `origins` and `resolutions` must be equal\n  }\n\n  const extent = options.extent;\n\n  if (extent !== undefined &&\n      !this.origin_ && !this.origins_) {\n    this.origin_ = getTopLeft(extent);\n  }\n\n  assert(\n    (!this.origin_ && this.origins_) || (this.origin_ && !this.origins_),\n    18); // Either `origin` or `origins` must be configured, never both\n\n  /**\n   * @private\n   * @type {Array.<number|module:ol/size~Size>}\n   */\n  this.tileSizes_ = null;\n  if (options.tileSizes !== undefined) {\n    this.tileSizes_ = options.tileSizes;\n    assert(this.tileSizes_.length == this.resolutions_.length,\n      19); // Number of `tileSizes` and `resolutions` must be equal\n  }\n\n  /**\n   * @private\n   * @type {number|module:ol/size~Size}\n   */\n  this.tileSize_ = options.tileSize !== undefined ?\n    options.tileSize :\n    !this.tileSizes_ ? DEFAULT_TILE_SIZE : null;\n  assert(\n    (!this.tileSize_ && this.tileSizes_) ||\n      (this.tileSize_ && !this.tileSizes_),\n    22); // Either `tileSize` or `tileSizes` must be configured, never both\n\n  /**\n   * @private\n   * @type {module:ol/extent~Extent}\n   */\n  this.extent_ = extent !== undefined ? extent : null;\n\n\n  /**\n   * @private\n   * @type {Array.<module:ol/TileRange>}\n   */\n  this.fullTileRanges_ = null;\n\n  /**\n   * @private\n   * @type {module:ol/size~Size}\n   */\n  this.tmpSize_ = [0, 0];\n\n  if (options.sizes !== undefined) {\n    this.fullTileRanges_ = options.sizes.map(function(size, z) {\n      const tileRange = new TileRange(\n        Math.min(0, size[0]), Math.max(size[0] - 1, -1),\n        Math.min(0, size[1]), Math.max(size[1] - 1, -1));\n      return tileRange;\n    }, this);\n  } else if (extent) {\n    this.calculateTileRanges_(extent);\n  }\n\n};\n\n\n/**\n * @private\n * @type {module:ol/tilecoord~TileCoord}\n */\nconst tmpTileCoord = [0, 0, 0];\n\n\n/**\n * Call a function with each tile coordinate for a given extent and zoom level.\n *\n * @param {module:ol/extent~Extent} extent Extent.\n * @param {number} zoom Integer zoom level.\n * @param {function(module:ol/tilecoord~TileCoord)} callback Function called with each tile coordinate.\n * @api\n */\nTileGrid.prototype.forEachTileCoord = function(extent, zoom, callback) {\n  const tileRange = this.getTileRangeForExtentAndZ(extent, zoom);\n  for (let i = tileRange.minX, ii = tileRange.maxX; i <= ii; ++i) {\n    for (let j = tileRange.minY, jj = tileRange.maxY; j <= jj; ++j) {\n      callback([zoom, i, j]);\n    }\n  }\n};\n\n\n/**\n * @param {module:ol/tilecoord~TileCoord} tileCoord Tile coordinate.\n * @param {function(this: T, number, module:ol/TileRange): boolean} callback Callback.\n * @param {T=} opt_this The object to use as `this` in `callback`.\n * @param {module:ol/TileRange=} opt_tileRange Temporary module:ol/TileRange object.\n * @param {module:ol/extent~Extent=} opt_extent Temporary module:ol/extent~Extent object.\n * @return {boolean} Callback succeeded.\n * @template T\n */\nTileGrid.prototype.forEachTileCoordParentTileRange = function(tileCoord, callback, opt_this, opt_tileRange, opt_extent) {\n  let tileRange, x, y;\n  let tileCoordExtent = null;\n  let z = tileCoord[0] - 1;\n  if (this.zoomFactor_ === 2) {\n    x = tileCoord[1];\n    y = tileCoord[2];\n  } else {\n    tileCoordExtent = this.getTileCoordExtent(tileCoord, opt_extent);\n  }\n  while (z >= this.minZoom) {\n    if (this.zoomFactor_ === 2) {\n      x = Math.floor(x / 2);\n      y = Math.floor(y / 2);\n      tileRange = createOrUpdateTileRange(x, x, y, y, opt_tileRange);\n    } else {\n      tileRange = this.getTileRangeForExtentAndZ(tileCoordExtent, z, opt_tileRange);\n    }\n    if (callback.call(opt_this, z, tileRange)) {\n      return true;\n    }\n    --z;\n  }\n  return false;\n};\n\n\n/**\n * Get the extent for this tile grid, if it was configured.\n * @return {module:ol/extent~Extent} Extent.\n */\nTileGrid.prototype.getExtent = function() {\n  return this.extent_;\n};\n\n\n/**\n * Get the maximum zoom level for the grid.\n * @return {number} Max zoom.\n * @api\n */\nTileGrid.prototype.getMaxZoom = function() {\n  return this.maxZoom;\n};\n\n\n/**\n * Get the minimum zoom level for the grid.\n * @return {number} Min zoom.\n * @api\n */\nTileGrid.prototype.getMinZoom = function() {\n  return this.minZoom;\n};\n\n\n/**\n * Get the origin for the grid at the given zoom level.\n * @param {number} z Integer zoom level.\n * @return {module:ol/coordinate~Coordinate} Origin.\n * @api\n */\nTileGrid.prototype.getOrigin = function(z) {\n  if (this.origin_) {\n    return this.origin_;\n  } else {\n    return this.origins_[z];\n  }\n};\n\n\n/**\n * Get the resolution for the given zoom level.\n * @param {number} z Integer zoom level.\n * @return {number} Resolution.\n * @api\n */\nTileGrid.prototype.getResolution = function(z) {\n  return this.resolutions_[z];\n};\n\n\n/**\n * Get the list of resolutions for the tile grid.\n * @return {Array.<number>} Resolutions.\n * @api\n */\nTileGrid.prototype.getResolutions = function() {\n  return this.resolutions_;\n};\n\n\n/**\n * @param {module:ol/tilecoord~TileCoord} tileCoord Tile coordinate.\n * @param {module:ol/TileRange=} opt_tileRange Temporary module:ol/TileRange object.\n * @param {module:ol/extent~Extent=} opt_extent Temporary module:ol/extent~Extent object.\n * @return {module:ol/TileRange} Tile range.\n */\nTileGrid.prototype.getTileCoordChildTileRange = function(tileCoord, opt_tileRange, opt_extent) {\n  if (tileCoord[0] < this.maxZoom) {\n    if (this.zoomFactor_ === 2) {\n      const minX = tileCoord[1] * 2;\n      const minY = tileCoord[2] * 2;\n      return createOrUpdateTileRange(minX, minX + 1, minY, minY + 1, opt_tileRange);\n    }\n    const tileCoordExtent = this.getTileCoordExtent(tileCoord, opt_extent);\n    return this.getTileRangeForExtentAndZ(\n      tileCoordExtent, tileCoord[0] + 1, opt_tileRange);\n  }\n  return null;\n};\n\n\n/**\n * Get the extent for a tile range.\n * @param {number} z Integer zoom level.\n * @param {module:ol/TileRange} tileRange Tile range.\n * @param {module:ol/extent~Extent=} opt_extent Temporary module:ol/extent~Extent object.\n * @return {module:ol/extent~Extent} Extent.\n */\nTileGrid.prototype.getTileRangeExtent = function(z, tileRange, opt_extent) {\n  const origin = this.getOrigin(z);\n  const resolution = this.getResolution(z);\n  const tileSize = toSize(this.getTileSize(z), this.tmpSize_);\n  const minX = origin[0] + tileRange.minX * tileSize[0] * resolution;\n  const maxX = origin[0] + (tileRange.maxX + 1) * tileSize[0] * resolution;\n  const minY = origin[1] + tileRange.minY * tileSize[1] * resolution;\n  const maxY = origin[1] + (tileRange.maxY + 1) * tileSize[1] * resolution;\n  return createOrUpdate(minX, minY, maxX, maxY, opt_extent);\n};\n\n\n/**\n * Get a tile range for the given extent and integer zoom level.\n * @param {module:ol/extent~Extent} extent Extent.\n * @param {number} z Integer zoom level.\n * @param {module:ol/TileRange=} opt_tileRange Temporary tile range object.\n * @return {module:ol/TileRange} Tile range.\n */\nTileGrid.prototype.getTileRangeForExtentAndZ = function(extent, z, opt_tileRange) {\n  const tileCoord = tmpTileCoord;\n  this.getTileCoordForXYAndZ_(extent[0], extent[1], z, false, tileCoord);\n  const minX = tileCoord[1];\n  const minY = tileCoord[2];\n  this.getTileCoordForXYAndZ_(extent[2], extent[3], z, true, tileCoord);\n  return createOrUpdateTileRange(minX, tileCoord[1], minY, tileCoord[2], opt_tileRange);\n};\n\n\n/**\n * @param {module:ol/tilecoord~TileCoord} tileCoord Tile coordinate.\n * @return {module:ol/coordinate~Coordinate} Tile center.\n */\nTileGrid.prototype.getTileCoordCenter = function(tileCoord) {\n  const origin = this.getOrigin(tileCoord[0]);\n  const resolution = this.getResolution(tileCoord[0]);\n  const tileSize = toSize(this.getTileSize(tileCoord[0]), this.tmpSize_);\n  return [\n    origin[0] + (tileCoord[1] + 0.5) * tileSize[0] * resolution,\n    origin[1] + (tileCoord[2] + 0.5) * tileSize[1] * resolution\n  ];\n};\n\n\n/**\n * Get the extent of a tile coordinate.\n *\n * @param {module:ol/tilecoord~TileCoord} tileCoord Tile coordinate.\n * @param {module:ol/extent~Extent=} opt_extent Temporary extent object.\n * @return {module:ol/extent~Extent} Extent.\n * @api\n */\nTileGrid.prototype.getTileCoordExtent = function(tileCoord, opt_extent) {\n  const origin = this.getOrigin(tileCoord[0]);\n  const resolution = this.getResolution(tileCoord[0]);\n  const tileSize = toSize(this.getTileSize(tileCoord[0]), this.tmpSize_);\n  const minX = origin[0] + tileCoord[1] * tileSize[0] * resolution;\n  const minY = origin[1] + tileCoord[2] * tileSize[1] * resolution;\n  const maxX = minX + tileSize[0] * resolution;\n  const maxY = minY + tileSize[1] * resolution;\n  return createOrUpdate(minX, minY, maxX, maxY, opt_extent);\n};\n\n\n/**\n * Get the tile coordinate for the given map coordinate and resolution.  This\n * method considers that coordinates that intersect tile boundaries should be\n * assigned the higher tile coordinate.\n *\n * @param {module:ol/coordinate~Coordinate} coordinate Coordinate.\n * @param {number} resolution Resolution.\n * @param {module:ol/tilecoord~TileCoord=} opt_tileCoord Destination module:ol/tilecoord~TileCoord object.\n * @return {module:ol/tilecoord~TileCoord} Tile coordinate.\n * @api\n */\nTileGrid.prototype.getTileCoordForCoordAndResolution = function(coordinate, resolution, opt_tileCoord) {\n  return this.getTileCoordForXYAndResolution_(\n    coordinate[0], coordinate[1], resolution, false, opt_tileCoord);\n};\n\n\n/**\n * Note that this method should not be called for resolutions that correspond\n * to an integer zoom level.  Instead call the `getTileCoordForXYAndZ_` method.\n * @param {number} x X.\n * @param {number} y Y.\n * @param {number} resolution Resolution (for a non-integer zoom level).\n * @param {boolean} reverseIntersectionPolicy Instead of letting edge\n *     intersections go to the higher tile coordinate, let edge intersections\n *     go to the lower tile coordinate.\n * @param {module:ol/tilecoord~TileCoord=} opt_tileCoord Temporary module:ol/tilecoord~TileCoord object.\n * @return {module:ol/tilecoord~TileCoord} Tile coordinate.\n * @private\n */\nTileGrid.prototype.getTileCoordForXYAndResolution_ = function(\n  x, y, resolution, reverseIntersectionPolicy, opt_tileCoord) {\n  const z = this.getZForResolution(resolution);\n  const scale = resolution / this.getResolution(z);\n  const origin = this.getOrigin(z);\n  const tileSize = toSize(this.getTileSize(z), this.tmpSize_);\n\n  const adjustX = reverseIntersectionPolicy ? 0.5 : 0;\n  const adjustY = reverseIntersectionPolicy ? 0 : 0.5;\n  const xFromOrigin = Math.floor((x - origin[0]) / resolution + adjustX);\n  const yFromOrigin = Math.floor((y - origin[1]) / resolution + adjustY);\n  let tileCoordX = scale * xFromOrigin / tileSize[0];\n  let tileCoordY = scale * yFromOrigin / tileSize[1];\n\n  if (reverseIntersectionPolicy) {\n    tileCoordX = Math.ceil(tileCoordX) - 1;\n    tileCoordY = Math.ceil(tileCoordY) - 1;\n  } else {\n    tileCoordX = Math.floor(tileCoordX);\n    tileCoordY = Math.floor(tileCoordY);\n  }\n\n  return createOrUpdateTileCoord(z, tileCoordX, tileCoordY, opt_tileCoord);\n};\n\n\n/**\n * Although there is repetition between this method and `getTileCoordForXYAndResolution_`,\n * they should have separate implementations.  This method is for integer zoom\n * levels.  The other method should only be called for resolutions corresponding\n * to non-integer zoom levels.\n * @param {number} x Map x coordinate.\n * @param {number} y Map y coordinate.\n * @param {number} z Integer zoom level.\n * @param {boolean} reverseIntersectionPolicy Instead of letting edge\n *     intersections go to the higher tile coordinate, let edge intersections\n *     go to the lower tile coordinate.\n * @param {module:ol/tilecoord~TileCoord=} opt_tileCoord Temporary module:ol/tilecoord~TileCoord object.\n * @return {module:ol/tilecoord~TileCoord} Tile coordinate.\n * @private\n */\nTileGrid.prototype.getTileCoordForXYAndZ_ = function(x, y, z, reverseIntersectionPolicy, opt_tileCoord) {\n  const origin = this.getOrigin(z);\n  const resolution = this.getResolution(z);\n  const tileSize = toSize(this.getTileSize(z), this.tmpSize_);\n\n  const adjustX = reverseIntersectionPolicy ? 0.5 : 0;\n  const adjustY = reverseIntersectionPolicy ? 0 : 0.5;\n  const xFromOrigin = Math.floor((x - origin[0]) / resolution + adjustX);\n  const yFromOrigin = Math.floor((y - origin[1]) / resolution + adjustY);\n  let tileCoordX = xFromOrigin / tileSize[0];\n  let tileCoordY = yFromOrigin / tileSize[1];\n\n  if (reverseIntersectionPolicy) {\n    tileCoordX = Math.ceil(tileCoordX) - 1;\n    tileCoordY = Math.ceil(tileCoordY) - 1;\n  } else {\n    tileCoordX = Math.floor(tileCoordX);\n    tileCoordY = Math.floor(tileCoordY);\n  }\n\n  return createOrUpdateTileCoord(z, tileCoordX, tileCoordY, opt_tileCoord);\n};\n\n\n/**\n * Get a tile coordinate given a map coordinate and zoom level.\n * @param {module:ol/coordinate~Coordinate} coordinate Coordinate.\n * @param {number} z Zoom level.\n * @param {module:ol/tilecoord~TileCoord=} opt_tileCoord Destination module:ol/tilecoord~TileCoord object.\n * @return {module:ol/tilecoord~TileCoord} Tile coordinate.\n * @api\n */\nTileGrid.prototype.getTileCoordForCoordAndZ = function(coordinate, z, opt_tileCoord) {\n  return this.getTileCoordForXYAndZ_(\n    coordinate[0], coordinate[1], z, false, opt_tileCoord);\n};\n\n\n/**\n * @param {module:ol/tilecoord~TileCoord} tileCoord Tile coordinate.\n * @return {number} Tile resolution.\n */\nTileGrid.prototype.getTileCoordResolution = function(tileCoord) {\n  return this.resolutions_[tileCoord[0]];\n};\n\n\n/**\n * Get the tile size for a zoom level. The type of the return value matches the\n * `tileSize` or `tileSizes` that the tile grid was configured with. To always\n * get an `module:ol/size~Size`, run the result through `module:ol/size~Size.toSize()`.\n * @param {number} z Z.\n * @return {number|module:ol/size~Size} Tile size.\n * @api\n */\nTileGrid.prototype.getTileSize = function(z) {\n  if (this.tileSize_) {\n    return this.tileSize_;\n  } else {\n    return this.tileSizes_[z];\n  }\n};\n\n\n/**\n * @param {number} z Zoom level.\n * @return {module:ol/TileRange} Extent tile range for the specified zoom level.\n */\nTileGrid.prototype.getFullTileRange = function(z) {\n  if (!this.fullTileRanges_) {\n    return null;\n  } else {\n    return this.fullTileRanges_[z];\n  }\n};\n\n\n/**\n * @param {number} resolution Resolution.\n * @param {number=} opt_direction If 0, the nearest resolution will be used.\n *     If 1, the nearest lower resolution will be used. If -1, the nearest\n *     higher resolution will be used. Default is 0.\n * @return {number} Z.\n * @api\n */\nTileGrid.prototype.getZForResolution = function(resolution, opt_direction) {\n  const z = linearFindNearest(this.resolutions_, resolution, opt_direction || 0);\n  return clamp(z, this.minZoom, this.maxZoom);\n};\n\n\n/**\n * @param {!module:ol/extent~Extent} extent Extent for this tile grid.\n * @private\n */\nTileGrid.prototype.calculateTileRanges_ = function(extent) {\n  const length = this.resolutions_.length;\n  const fullTileRanges = new Array(length);\n  for (let z = this.minZoom; z < length; ++z) {\n    fullTileRanges[z] = this.getTileRangeForExtentAndZ(extent, z);\n  }\n  this.fullTileRanges_ = fullTileRanges;\n};\nexport default TileGrid;\n","/**\n * @module ol/format/FormatType\n */\n\n/**\n * @enum {string}\n */\nexport default {\n  ARRAY_BUFFER: 'arraybuffer',\n  JSON: 'json',\n  TEXT: 'text',\n  XML: 'xml'\n};\n","/**\n * @module ol/geom/flat/contains\n */\nimport {forEachCorner} from '../../extent.js';\n\n\n/**\n * @param {Array.<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {number} end End.\n * @param {number} stride Stride.\n * @param {module:ol/extent~Extent} extent Extent.\n * @return {boolean} Contains extent.\n */\nexport function linearRingContainsExtent(flatCoordinates, offset, end, stride, extent) {\n  const outside = forEachCorner(extent,\n    /**\n     * @param {module:ol/coordinate~Coordinate} coordinate Coordinate.\n     * @return {boolean} Contains (x, y).\n     */\n    function(coordinate) {\n      return !linearRingContainsXY(flatCoordinates, offset, end, stride, coordinate[0], coordinate[1]);\n    });\n  return !outside;\n}\n\n\n/**\n * @param {Array.<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {number} end End.\n * @param {number} stride Stride.\n * @param {number} x X.\n * @param {number} y Y.\n * @return {boolean} Contains (x, y).\n */\nexport function linearRingContainsXY(flatCoordinates, offset, end, stride, x, y) {\n  // http://geomalgorithms.com/a03-_inclusion.html\n  // Copyright 2000 softSurfer, 2012 Dan Sunday\n  // This code may be freely used and modified for any purpose\n  // providing that this copyright notice is included with it.\n  // SoftSurfer makes no warranty for this code, and cannot be held\n  // liable for any real or imagined damage resulting from its use.\n  // Users of this code must verify correctness for their application.\n  let wn = 0;\n  let x1 = flatCoordinates[end - stride];\n  let y1 = flatCoordinates[end - stride + 1];\n  for (; offset < end; offset += stride) {\n    const x2 = flatCoordinates[offset];\n    const y2 = flatCoordinates[offset + 1];\n    if (y1 <= y) {\n      if (y2 > y && ((x2 - x1) * (y - y1)) - ((x - x1) * (y2 - y1)) > 0) {\n        wn++;\n      }\n    } else if (y2 <= y && ((x2 - x1) * (y - y1)) - ((x - x1) * (y2 - y1)) < 0) {\n      wn--;\n    }\n    x1 = x2;\n    y1 = y2;\n  }\n  return wn !== 0;\n}\n\n\n/**\n * @param {Array.<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {Array.<number>} ends Ends.\n * @param {number} stride Stride.\n * @param {number} x X.\n * @param {number} y Y.\n * @return {boolean} Contains (x, y).\n */\nexport function linearRingsContainsXY(flatCoordinates, offset, ends, stride, x, y) {\n  if (ends.length === 0) {\n    return false;\n  }\n  if (!linearRingContainsXY(flatCoordinates, offset, ends[0], stride, x, y)) {\n    return false;\n  }\n  for (let i = 1, ii = ends.length; i < ii; ++i) {\n    if (linearRingContainsXY(flatCoordinates, ends[i - 1], ends[i], stride, x, y)) {\n      return false;\n    }\n  }\n  return true;\n}\n\n\n/**\n * @param {Array.<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {Array.<Array.<number>>} endss Endss.\n * @param {number} stride Stride.\n * @param {number} x X.\n * @param {number} y Y.\n * @return {boolean} Contains (x, y).\n */\nexport function linearRingssContainsXY(flatCoordinates, offset, endss, stride, x, y) {\n  if (endss.length === 0) {\n    return false;\n  }\n  for (let i = 0, ii = endss.length; i < ii; ++i) {\n    const ends = endss[i];\n    if (linearRingsContainsXY(flatCoordinates, offset, ends, stride, x, y)) {\n      return true;\n    }\n    offset = ends[ends.length - 1];\n  }\n  return false;\n}\n","/**\n * @module ol/source/VectorEventType\n */\n\n/**\n * @enum {string}\n */\nexport default {\n  /**\n   * Triggered when a feature is added to the source.\n   * @event ol/source/Vector~VectorSourceEvent#addfeature\n   * @api\n   */\n  ADDFEATURE: 'addfeature',\n\n  /**\n   * Triggered when a feature is updated.\n   * @event ol/source/Vector~VectorSourceEvent#changefeature\n   * @api\n   */\n  CHANGEFEATURE: 'changefeature',\n\n  /**\n   * Triggered when the clear method is called on the source.\n   * @event ol/source/Vector~VectorSourceEvent#clear\n   * @api\n   */\n  CLEAR: 'clear',\n\n  /**\n   * Triggered when a feature is removed from the source.\n   * See {@link module:ol/source/Vector#clear source.clear()} for exceptions.\n   * @event ol/source/Vector~VectorSourceEvent#removefeature\n   * @api\n   */\n  REMOVEFEATURE: 'removefeature'\n};\n","/**\n * @module ol/uri\n */\n\n\n/**\n * Appends query parameters to a URI.\n *\n * @param {string} uri The original URI, which may already have query data.\n * @param {!Object} params An object where keys are URI-encoded parameter keys,\n *     and the values are arbitrary types or arrays.\n * @return {string} The new URI.\n */\nexport function appendParams(uri, params) {\n  const keyParams = [];\n  // Skip any null or undefined parameter values\n  Object.keys(params).forEach(function(k) {\n    if (params[k] !== null && params[k] !== undefined) {\n      keyParams.push(k + '=' + encodeURIComponent(params[k]));\n    }\n  });\n  const qs = keyParams.join('&');\n  // remove any trailing ? or &\n  uri = uri.replace(/[?&]$/, '');\n  // append ? or & depending on whether uri has existing parameters\n  uri = uri.indexOf('?') === -1 ? uri + '?' : uri + '&';\n  return uri + qs;\n}\n","/**\n * @module ol/string\n */\n\n/**\n * @param {number} number Number to be formatted\n * @param {number} width The desired width\n * @param {number=} opt_precision Precision of the output string (i.e. number of decimal places)\n * @returns {string} Formatted string\n */\nexport function padNumber(number, width, opt_precision) {\n  const numberString = opt_precision !== undefined ? number.toFixed(opt_precision) : '' + number;\n  let decimal = numberString.indexOf('.');\n  decimal = decimal === -1 ? numberString.length : decimal;\n  return decimal > width ? numberString : new Array(1 + width - decimal).join('0') + numberString;\n}\n\n\n/**\n * Adapted from https://github.com/omichelsen/compare-versions/blob/master/index.js\n * @param {string|number} v1 First version\n * @param {string|number} v2 Second version\n * @returns {number} Value\n */\nexport function compareVersions(v1, v2) {\n  const s1 = ('' + v1).split('.');\n  const s2 = ('' + v2).split('.');\n\n  for (let i = 0; i < Math.max(s1.length, s2.length); i++) {\n    const n1 = parseInt(s1[i] || '0', 10);\n    const n2 = parseInt(s2[i] || '0', 10);\n\n    if (n1 > n2) {\n      return 1;\n    }\n    if (n2 > n1) {\n      return -1;\n    }\n  }\n\n  return 0;\n}\n","/**\n * @module ol/style/RegularShape\n */\nimport {inherits} from '../util.js';\nimport {asColorLike} from '../colorlike.js';\nimport {createCanvasContext2D} from '../dom.js';\nimport {CANVAS_LINE_DASH} from '../has.js';\nimport ImageState from '../ImageState.js';\nimport {defaultStrokeStyle, defaultFillStyle, defaultLineCap, defaultLineWidth, defaultLineJoin, defaultMiterLimit} from '../render/canvas.js';\nimport ImageStyle from '../style/Image.js';\n\n\n/**\n * Specify radius for regular polygons, or radius1 and radius2 for stars.\n * @typedef {Object} Options\n * @property {module:ol/style/Fill} [fill] Fill style.\n * @property {number} points Number of points for stars and regular polygons. In case of a polygon, the number of points\n * is the number of sides.\n * @property {number} [radius] Radius of a regular polygon.\n * @property {number} [radius1] Outer radius of a star.\n * @property {number} [radius2] Inner radius of a star.\n * @property {number} [angle=0] Shape's angle in radians. A value of 0 will have one of the shape's point facing up.\n * @property {boolean} [snapToPixel=true] If `true` integral numbers of pixels are used as the X and Y pixel coordinate\n * when drawing the shape in the output canvas. If `false` fractional numbers may be used. Using `true` allows for\n * \"sharp\" rendering (no blur), while using `false` allows for \"accurate\" rendering. Note that accuracy is important if\n * the shape's position is animated. Without it, the shape may jitter noticeably.\n * @property {module:ol/style/Stroke} [stroke] Stroke style.\n * @property {number} [rotation=0] Rotation in radians (positive rotation clockwise).\n * @property {boolean} [rotateWithView=false] Whether to rotate the shape with the view.\n * @property {module:ol/style/AtlasManager} [atlasManager] The atlas manager to use for this symbol. When\n * using WebGL it is recommended to use an atlas manager to avoid texture switching. If an atlas manager is given, the\n * symbol is added to an atlas. By default no atlas manager is used.\n */\n\n\n/**\n * @typedef {Object} RenderOptions\n * @property {module:ol/colorlike~ColorLike} [strokeStyle]\n * @property {number} strokeWidth\n * @property {number} size\n * @property {string} lineCap\n * @property {Array.<number>} lineDash\n * @property {number} lineDashOffset\n * @property {string} lineJoin\n * @property {number} miterLimit\n */\n\n\n/**\n * @classdesc\n * Set regular shape style for vector features. The resulting shape will be\n * a regular polygon when `radius` is provided, or a star when `radius1` and\n * `radius2` are provided.\n *\n * @constructor\n * @param {module:ol/style/RegularShape~Options} options Options.\n * @extends {module:ol/style/Image}\n * @api\n */\nconst RegularShape = function(options) {\n  /**\n   * @private\n   * @type {Array.<string>}\n   */\n  this.checksums_ = null;\n\n  /**\n   * @private\n   * @type {HTMLCanvasElement}\n   */\n  this.canvas_ = null;\n\n  /**\n   * @private\n   * @type {HTMLCanvasElement}\n   */\n  this.hitDetectionCanvas_ = null;\n\n  /**\n   * @private\n   * @type {module:ol/style/Fill}\n   */\n  this.fill_ = options.fill !== undefined ? options.fill : null;\n\n  /**\n   * @private\n   * @type {Array.<number>}\n   */\n  this.origin_ = [0, 0];\n\n  /**\n   * @private\n   * @type {number}\n   */\n  this.points_ = options.points;\n\n  /**\n   * @protected\n   * @type {number}\n   */\n  this.radius_ = /** @type {number} */ (options.radius !== undefined ?\n    options.radius : options.radius1);\n\n  /**\n   * @private\n   * @type {number|undefined}\n   */\n  this.radius2_ = options.radius2;\n\n  /**\n   * @private\n   * @type {number}\n   */\n  this.angle_ = options.angle !== undefined ? options.angle : 0;\n\n  /**\n   * @private\n   * @type {module:ol/style/Stroke}\n   */\n  this.stroke_ = options.stroke !== undefined ? options.stroke : null;\n\n  /**\n   * @private\n   * @type {Array.<number>}\n   */\n  this.anchor_ = null;\n\n  /**\n   * @private\n   * @type {module:ol/size~Size}\n   */\n  this.size_ = null;\n\n  /**\n   * @private\n   * @type {module:ol/size~Size}\n   */\n  this.imageSize_ = null;\n\n  /**\n   * @private\n   * @type {module:ol/size~Size}\n   */\n  this.hitDetectionImageSize_ = null;\n\n  /**\n   * @protected\n   * @type {module:ol/style/AtlasManager|undefined}\n   */\n  this.atlasManager_ = options.atlasManager;\n\n  this.render_(this.atlasManager_);\n\n  /**\n   * @type {boolean}\n   */\n  const snapToPixel = options.snapToPixel !== undefined ?\n    options.snapToPixel : true;\n\n  /**\n   * @type {boolean}\n   */\n  const rotateWithView = options.rotateWithView !== undefined ?\n    options.rotateWithView : false;\n\n  ImageStyle.call(this, {\n    opacity: 1,\n    rotateWithView: rotateWithView,\n    rotation: options.rotation !== undefined ? options.rotation : 0,\n    scale: 1,\n    snapToPixel: snapToPixel\n  });\n};\n\ninherits(RegularShape, ImageStyle);\n\n\n/**\n * Clones the style. If an atlasmanager was provided to the original style it will be used in the cloned style, too.\n * @return {module:ol/style/RegularShape} The cloned style.\n * @api\n */\nRegularShape.prototype.clone = function() {\n  const style = new RegularShape({\n    fill: this.getFill() ? this.getFill().clone() : undefined,\n    points: this.getPoints(),\n    radius: this.getRadius(),\n    radius2: this.getRadius2(),\n    angle: this.getAngle(),\n    snapToPixel: this.getSnapToPixel(),\n    stroke: this.getStroke() ?  this.getStroke().clone() : undefined,\n    rotation: this.getRotation(),\n    rotateWithView: this.getRotateWithView(),\n    atlasManager: this.atlasManager_\n  });\n  style.setOpacity(this.getOpacity());\n  style.setScale(this.getScale());\n  return style;\n};\n\n\n/**\n * @inheritDoc\n * @api\n */\nRegularShape.prototype.getAnchor = function() {\n  return this.anchor_;\n};\n\n\n/**\n * Get the angle used in generating the shape.\n * @return {number} Shape's rotation in radians.\n * @api\n */\nRegularShape.prototype.getAngle = function() {\n  return this.angle_;\n};\n\n\n/**\n * Get the fill style for the shape.\n * @return {module:ol/style/Fill} Fill style.\n * @api\n */\nRegularShape.prototype.getFill = function() {\n  return this.fill_;\n};\n\n\n/**\n * @inheritDoc\n */\nRegularShape.prototype.getHitDetectionImage = function(pixelRatio) {\n  return this.hitDetectionCanvas_;\n};\n\n\n/**\n * @inheritDoc\n * @api\n */\nRegularShape.prototype.getImage = function(pixelRatio) {\n  return this.canvas_;\n};\n\n\n/**\n * @inheritDoc\n */\nRegularShape.prototype.getImageSize = function() {\n  return this.imageSize_;\n};\n\n\n/**\n * @inheritDoc\n */\nRegularShape.prototype.getHitDetectionImageSize = function() {\n  return this.hitDetectionImageSize_;\n};\n\n\n/**\n * @inheritDoc\n */\nRegularShape.prototype.getImageState = function() {\n  return ImageState.LOADED;\n};\n\n\n/**\n * @inheritDoc\n * @api\n */\nRegularShape.prototype.getOrigin = function() {\n  return this.origin_;\n};\n\n\n/**\n * Get the number of points for generating the shape.\n * @return {number} Number of points for stars and regular polygons.\n * @api\n */\nRegularShape.prototype.getPoints = function() {\n  return this.points_;\n};\n\n\n/**\n * Get the (primary) radius for the shape.\n * @return {number} Radius.\n * @api\n */\nRegularShape.prototype.getRadius = function() {\n  return this.radius_;\n};\n\n\n/**\n * Get the secondary radius for the shape.\n * @return {number|undefined} Radius2.\n * @api\n */\nRegularShape.prototype.getRadius2 = function() {\n  return this.radius2_;\n};\n\n\n/**\n * @inheritDoc\n * @api\n */\nRegularShape.prototype.getSize = function() {\n  return this.size_;\n};\n\n\n/**\n * Get the stroke style for the shape.\n * @return {module:ol/style/Stroke} Stroke style.\n * @api\n */\nRegularShape.prototype.getStroke = function() {\n  return this.stroke_;\n};\n\n\n/**\n * @inheritDoc\n */\nRegularShape.prototype.listenImageChange = function(listener, thisArg) {};\n\n\n/**\n * @inheritDoc\n */\nRegularShape.prototype.load = function() {};\n\n\n/**\n * @inheritDoc\n */\nRegularShape.prototype.unlistenImageChange = function(listener, thisArg) {};\n\n\n/**\n * @protected\n * @param {module:ol/style/AtlasManager|undefined} atlasManager An atlas manager.\n */\nRegularShape.prototype.render_ = function(atlasManager) {\n  let imageSize;\n  let lineCap = '';\n  let lineJoin = '';\n  let miterLimit = 0;\n  let lineDash = null;\n  let lineDashOffset = 0;\n  let strokeStyle;\n  let strokeWidth = 0;\n\n  if (this.stroke_) {\n    strokeStyle = this.stroke_.getColor();\n    if (strokeStyle === null) {\n      strokeStyle = defaultStrokeStyle;\n    }\n    strokeStyle = asColorLike(strokeStyle);\n    strokeWidth = this.stroke_.getWidth();\n    if (strokeWidth === undefined) {\n      strokeWidth = defaultLineWidth;\n    }\n    lineDash = this.stroke_.getLineDash();\n    lineDashOffset = this.stroke_.getLineDashOffset();\n    if (!CANVAS_LINE_DASH) {\n      lineDash = null;\n      lineDashOffset = 0;\n    }\n    lineJoin = this.stroke_.getLineJoin();\n    if (lineJoin === undefined) {\n      lineJoin = defaultLineJoin;\n    }\n    lineCap = this.stroke_.getLineCap();\n    if (lineCap === undefined) {\n      lineCap = defaultLineCap;\n    }\n    miterLimit = this.stroke_.getMiterLimit();\n    if (miterLimit === undefined) {\n      miterLimit = defaultMiterLimit;\n    }\n  }\n\n  let size = 2 * (this.radius_ + strokeWidth) + 1;\n\n  /** @type {module:ol/style/RegularShape~RenderOptions} */\n  const renderOptions = {\n    strokeStyle: strokeStyle,\n    strokeWidth: strokeWidth,\n    size: size,\n    lineCap: lineCap,\n    lineDash: lineDash,\n    lineDashOffset: lineDashOffset,\n    lineJoin: lineJoin,\n    miterLimit: miterLimit\n  };\n\n  if (atlasManager === undefined) {\n    // no atlas manager is used, create a new canvas\n    const context = createCanvasContext2D(size, size);\n    this.canvas_ = context.canvas;\n\n    // canvas.width and height are rounded to the closest integer\n    size = this.canvas_.width;\n    imageSize = size;\n\n    this.draw_(renderOptions, context, 0, 0);\n\n    this.createHitDetectionCanvas_(renderOptions);\n  } else {\n    // an atlas manager is used, add the symbol to an atlas\n    size = Math.round(size);\n\n    const hasCustomHitDetectionImage = !this.fill_;\n    let renderHitDetectionCallback;\n    if (hasCustomHitDetectionImage) {\n      // render the hit-detection image into a separate atlas image\n      renderHitDetectionCallback =\n          this.drawHitDetectionCanvas_.bind(this, renderOptions);\n    }\n\n    const id = this.getChecksum();\n    const info = atlasManager.add(\n      id, size, size, this.draw_.bind(this, renderOptions),\n      renderHitDetectionCallback);\n\n    this.canvas_ = info.image;\n    this.origin_ = [info.offsetX, info.offsetY];\n    imageSize = info.image.width;\n\n    if (hasCustomHitDetectionImage) {\n      this.hitDetectionCanvas_ = info.hitImage;\n      this.hitDetectionImageSize_ =\n          [info.hitImage.width, info.hitImage.height];\n    } else {\n      this.hitDetectionCanvas_ = this.canvas_;\n      this.hitDetectionImageSize_ = [imageSize, imageSize];\n    }\n  }\n\n  this.anchor_ = [size / 2, size / 2];\n  this.size_ = [size, size];\n  this.imageSize_ = [imageSize, imageSize];\n};\n\n\n/**\n * @private\n * @param {module:ol/style/RegularShape~RenderOptions} renderOptions Render options.\n * @param {CanvasRenderingContext2D} context The rendering context.\n * @param {number} x The origin for the symbol (x).\n * @param {number} y The origin for the symbol (y).\n */\nRegularShape.prototype.draw_ = function(renderOptions, context, x, y) {\n  let i, angle0, radiusC;\n  // reset transform\n  context.setTransform(1, 0, 0, 1, 0, 0);\n\n  // then move to (x, y)\n  context.translate(x, y);\n\n  context.beginPath();\n\n  let points = this.points_;\n  if (points === Infinity) {\n    context.arc(\n      renderOptions.size / 2, renderOptions.size / 2,\n      this.radius_, 0, 2 * Math.PI, true);\n  } else {\n    const radius2 = (this.radius2_ !== undefined) ? this.radius2_\n      : this.radius_;\n    if (radius2 !== this.radius_) {\n      points = 2 * points;\n    }\n    for (i = 0; i <= points; i++) {\n      angle0 = i * 2 * Math.PI / points - Math.PI / 2 + this.angle_;\n      radiusC = i % 2 === 0 ? this.radius_ : radius2;\n      context.lineTo(renderOptions.size / 2 + radiusC * Math.cos(angle0),\n        renderOptions.size / 2 + radiusC * Math.sin(angle0));\n    }\n  }\n\n\n  if (this.fill_) {\n    let color = this.fill_.getColor();\n    if (color === null) {\n      color = defaultFillStyle;\n    }\n    context.fillStyle = asColorLike(color);\n    context.fill();\n  }\n  if (this.stroke_) {\n    context.strokeStyle = renderOptions.strokeStyle;\n    context.lineWidth = renderOptions.strokeWidth;\n    if (renderOptions.lineDash) {\n      context.setLineDash(renderOptions.lineDash);\n      context.lineDashOffset = renderOptions.lineDashOffset;\n    }\n    context.lineCap = renderOptions.lineCap;\n    context.lineJoin = renderOptions.lineJoin;\n    context.miterLimit = renderOptions.miterLimit;\n    context.stroke();\n  }\n  context.closePath();\n};\n\n\n/**\n * @private\n * @param {module:ol/style/RegularShape~RenderOptions} renderOptions Render options.\n */\nRegularShape.prototype.createHitDetectionCanvas_ = function(renderOptions) {\n  this.hitDetectionImageSize_ = [renderOptions.size, renderOptions.size];\n  if (this.fill_) {\n    this.hitDetectionCanvas_ = this.canvas_;\n    return;\n  }\n\n  // if no fill style is set, create an extra hit-detection image with a\n  // default fill style\n  const context = createCanvasContext2D(renderOptions.size, renderOptions.size);\n  this.hitDetectionCanvas_ = context.canvas;\n\n  this.drawHitDetectionCanvas_(renderOptions, context, 0, 0);\n};\n\n\n/**\n * @private\n * @param {module:ol/style/RegularShape~RenderOptions} renderOptions Render options.\n * @param {CanvasRenderingContext2D} context The context.\n * @param {number} x The origin for the symbol (x).\n * @param {number} y The origin for the symbol (y).\n */\nRegularShape.prototype.drawHitDetectionCanvas_ = function(renderOptions, context, x, y) {\n  // reset transform\n  context.setTransform(1, 0, 0, 1, 0, 0);\n\n  // then move to (x, y)\n  context.translate(x, y);\n\n  context.beginPath();\n\n  let points = this.points_;\n  if (points === Infinity) {\n    context.arc(\n      renderOptions.size / 2, renderOptions.size / 2,\n      this.radius_, 0, 2 * Math.PI, true);\n  } else {\n    const radius2 = (this.radius2_ !== undefined) ? this.radius2_\n      : this.radius_;\n    if (radius2 !== this.radius_) {\n      points = 2 * points;\n    }\n    let i, radiusC, angle0;\n    for (i = 0; i <= points; i++) {\n      angle0 = i * 2 * Math.PI / points - Math.PI / 2 + this.angle_;\n      radiusC = i % 2 === 0 ? this.radius_ : radius2;\n      context.lineTo(renderOptions.size / 2 + radiusC * Math.cos(angle0),\n        renderOptions.size / 2 + radiusC * Math.sin(angle0));\n    }\n  }\n\n  context.fillStyle = defaultFillStyle;\n  context.fill();\n  if (this.stroke_) {\n    context.strokeStyle = renderOptions.strokeStyle;\n    context.lineWidth = renderOptions.strokeWidth;\n    if (renderOptions.lineDash) {\n      context.setLineDash(renderOptions.lineDash);\n      context.lineDashOffset = renderOptions.lineDashOffset;\n    }\n    context.stroke();\n  }\n  context.closePath();\n};\n\n\n/**\n * @return {string} The checksum.\n */\nRegularShape.prototype.getChecksum = function() {\n  const strokeChecksum = this.stroke_ ?\n    this.stroke_.getChecksum() : '-';\n  const fillChecksum = this.fill_ ?\n    this.fill_.getChecksum() : '-';\n\n  const recalculate = !this.checksums_ ||\n      (strokeChecksum != this.checksums_[1] ||\n      fillChecksum != this.checksums_[2] ||\n      this.radius_ != this.checksums_[3] ||\n      this.radius2_ != this.checksums_[4] ||\n      this.angle_ != this.checksums_[5] ||\n      this.points_ != this.checksums_[6]);\n\n  if (recalculate) {\n    const checksum = 'r' + strokeChecksum + fillChecksum +\n        (this.radius_ !== undefined ? this.radius_.toString() : '-') +\n        (this.radius2_ !== undefined ? this.radius2_.toString() : '-') +\n        (this.angle_ !== undefined ? this.angle_.toString() : '-') +\n        (this.points_ !== undefined ? this.points_.toString() : '-');\n    this.checksums_ = [checksum, strokeChecksum, fillChecksum,\n      this.radius_, this.radius2_, this.angle_, this.points_];\n  }\n\n  return this.checksums_[0];\n};\nexport default RegularShape;\n","/**\n * @module ol/VectorImageTile\n */\nimport {getUid, inherits} from './util.js';\nimport Tile from './Tile.js';\nimport TileState from './TileState.js';\nimport {createCanvasContext2D} from './dom.js';\nimport {listen, unlistenByKey} from './events.js';\nimport {getHeight, getIntersection, getWidth} from './extent.js';\nimport EventType from './events/EventType.js';\nimport {loadFeaturesXhr} from './featureloader.js';\nimport {UNDEFINED} from './functions.js';\n\n\n/**\n * @typedef {Object} ReplayState\n * @property {boolean} dirty\n * @property {null|module:ol/render~OrderFunction} renderedRenderOrder\n * @property {number} renderedTileRevision\n * @property {number} renderedRevision\n */\n\n\n/**\n * @constructor\n * @extends {module:ol/Tile}\n * @param {module:ol/tilecoord~TileCoord} tileCoord Tile coordinate.\n * @param {module:ol/TileState} state State.\n * @param {number} sourceRevision Source revision.\n * @param {module:ol/format/Feature} format Feature format.\n * @param {module:ol/Tile~LoadFunction} tileLoadFunction Tile load function.\n * @param {module:ol/tilecoord~TileCoord} urlTileCoord Wrapped tile coordinate for source urls.\n * @param {module:ol/Tile~UrlFunction} tileUrlFunction Tile url function.\n * @param {module:ol/tilegrid/TileGrid} sourceTileGrid Tile grid of the source.\n * @param {module:ol/tilegrid/TileGrid} tileGrid Tile grid of the renderer.\n * @param {Object.<string, module:ol/VectorTile>} sourceTiles Source tiles.\n * @param {number} pixelRatio Pixel ratio.\n * @param {module:ol/proj/Projection} projection Projection.\n * @param {function(new: module:ol/VectorTile, module:ol/tilecoord~TileCoord, module:ol/TileState, string,\n *     module:ol/format/Feature, module:ol/Tile~LoadFunction)} tileClass Class to\n *     instantiate for source tiles.\n * @param {function(this: module:ol/source/VectorTile, module:ol/events/Event)} handleTileChange\n *     Function to call when a source tile's state changes.\n * @param {number} zoom Integer zoom to render the tile for.\n */\nconst VectorImageTile = function(tileCoord, state, sourceRevision, format,\n  tileLoadFunction, urlTileCoord, tileUrlFunction, sourceTileGrid, tileGrid,\n  sourceTiles, pixelRatio, projection, tileClass, handleTileChange, zoom) {\n\n  Tile.call(this, tileCoord, state, {transition: 0});\n\n  /**\n   * @private\n   * @type {!Object.<string, CanvasRenderingContext2D>}\n   */\n  this.context_ = {};\n\n  /**\n   * @private\n   * @type {module:ol/featureloader~FeatureLoader}\n   */\n  this.loader_;\n\n  /**\n   * @private\n   * @type {!Object.<string, module:ol/VectorImageTile~ReplayState>}\n   */\n  this.replayState_ = {};\n\n  /**\n   * @private\n   * @type {Object.<string, module:ol/VectorTile>}\n   */\n  this.sourceTiles_ = sourceTiles;\n\n  /**\n   * Keys of source tiles used by this tile. Use with {@link #getTile}.\n   * @type {Array.<string>}\n   */\n  this.tileKeys = [];\n\n  /**\n   * @type {module:ol/extent~Extent}\n   */\n  this.extent = null;\n\n  /**\n   * @type {number}\n   */\n  this.sourceRevision_ = sourceRevision;\n\n  /**\n   * @type {module:ol/tilecoord~TileCoord}\n   */\n  this.wrappedTileCoord = urlTileCoord;\n\n  /**\n   * @type {Array.<module:ol/events~EventsKey>}\n   */\n  this.loadListenerKeys_ = [];\n\n  /**\n   * @type {Array.<module:ol/events~EventsKey>}\n   */\n  this.sourceTileListenerKeys_ = [];\n\n  if (urlTileCoord) {\n    const extent = this.extent = tileGrid.getTileCoordExtent(urlTileCoord);\n    const resolution = tileGrid.getResolution(zoom);\n    const sourceZ = sourceTileGrid.getZForResolution(resolution);\n    const useLoadedOnly = zoom != tileCoord[0];\n    let loadCount = 0;\n    sourceTileGrid.forEachTileCoord(extent, sourceZ, function(sourceTileCoord) {\n      let sharedExtent = getIntersection(extent,\n        sourceTileGrid.getTileCoordExtent(sourceTileCoord));\n      const sourceExtent = sourceTileGrid.getExtent();\n      if (sourceExtent) {\n        sharedExtent = getIntersection(sharedExtent, sourceExtent, sharedExtent);\n      }\n      if (getWidth(sharedExtent) / resolution >= 0.5 &&\n          getHeight(sharedExtent) / resolution >= 0.5) {\n        // only include source tile if overlap is at least 1 pixel\n        ++loadCount;\n        const sourceTileKey = sourceTileCoord.toString();\n        let sourceTile = sourceTiles[sourceTileKey];\n        if (!sourceTile && !useLoadedOnly) {\n          const tileUrl = tileUrlFunction(sourceTileCoord, pixelRatio, projection);\n          sourceTile = sourceTiles[sourceTileKey] = new tileClass(sourceTileCoord,\n            tileUrl == undefined ? TileState.EMPTY : TileState.IDLE,\n            tileUrl == undefined ? '' : tileUrl,\n            format, tileLoadFunction);\n          this.sourceTileListenerKeys_.push(\n            listen(sourceTile, EventType.CHANGE, handleTileChange));\n        }\n        if (sourceTile && (!useLoadedOnly || sourceTile.getState() == TileState.LOADED)) {\n          sourceTile.consumers++;\n          this.tileKeys.push(sourceTileKey);\n        }\n      }\n    }.bind(this));\n\n    if (useLoadedOnly && loadCount == this.tileKeys.length) {\n      this.finishLoading_();\n    }\n\n    if (zoom <= tileCoord[0] && this.state != TileState.LOADED) {\n      while (zoom > tileGrid.getMinZoom()) {\n        const tile = new VectorImageTile(tileCoord, state, sourceRevision,\n          format, tileLoadFunction, urlTileCoord, tileUrlFunction,\n          sourceTileGrid, tileGrid, sourceTiles, pixelRatio, projection,\n          tileClass, UNDEFINED, --zoom);\n        if (tile.state == TileState.LOADED) {\n          this.interimTile = tile;\n          break;\n        }\n      }\n    }\n  }\n\n};\n\ninherits(VectorImageTile, Tile);\n\n\n/**\n * @inheritDoc\n */\nVectorImageTile.prototype.disposeInternal = function() {\n  this.state = TileState.ABORT;\n  this.changed();\n  if (this.interimTile) {\n    this.interimTile.dispose();\n  }\n\n  for (let i = 0, ii = this.tileKeys.length; i < ii; ++i) {\n    const sourceTileKey = this.tileKeys[i];\n    const sourceTile = this.getTile(sourceTileKey);\n    sourceTile.consumers--;\n    if (sourceTile.consumers == 0) {\n      delete this.sourceTiles_[sourceTileKey];\n      sourceTile.dispose();\n    }\n  }\n  this.tileKeys.length = 0;\n  this.sourceTiles_ = null;\n  this.loadListenerKeys_.forEach(unlistenByKey);\n  this.loadListenerKeys_.length = 0;\n  this.sourceTileListenerKeys_.forEach(unlistenByKey);\n  this.sourceTileListenerKeys_.length = 0;\n  Tile.prototype.disposeInternal.call(this);\n};\n\n\n/**\n * @param {module:ol/layer/Layer} layer Layer.\n * @return {CanvasRenderingContext2D} The rendering context.\n */\nVectorImageTile.prototype.getContext = function(layer) {\n  const key = getUid(layer).toString();\n  if (!(key in this.context_)) {\n    this.context_[key] = createCanvasContext2D();\n  }\n  return this.context_[key];\n};\n\n\n/**\n * Get the Canvas for this tile.\n * @param {module:ol/layer/Layer} layer Layer.\n * @return {HTMLCanvasElement} Canvas.\n */\nVectorImageTile.prototype.getImage = function(layer) {\n  return this.getReplayState(layer).renderedTileRevision == -1 ?\n    null : this.getContext(layer).canvas;\n};\n\n\n/**\n * @param {module:ol/layer/Layer} layer Layer.\n * @return {module:ol/VectorImageTile~ReplayState} The replay state.\n */\nVectorImageTile.prototype.getReplayState = function(layer) {\n  const key = getUid(layer).toString();\n  if (!(key in this.replayState_)) {\n    this.replayState_[key] = {\n      dirty: false,\n      renderedRenderOrder: null,\n      renderedRevision: -1,\n      renderedTileRevision: -1\n    };\n  }\n  return this.replayState_[key];\n};\n\n\n/**\n * @inheritDoc\n */\nVectorImageTile.prototype.getKey = function() {\n  return this.tileKeys.join('/') + '-' + this.sourceRevision_;\n};\n\n\n/**\n * @param {string} tileKey Key (tileCoord) of the source tile.\n * @return {module:ol/VectorTile} Source tile.\n */\nVectorImageTile.prototype.getTile = function(tileKey) {\n  return this.sourceTiles_[tileKey];\n};\n\n\n/**\n * @inheritDoc\n */\nVectorImageTile.prototype.load = function() {\n  // Source tiles with LOADED state - we just count them because once they are\n  // loaded, we're no longer listening to state changes.\n  let leftToLoad = 0;\n  // Source tiles with ERROR state - we track them because they can still have\n  // an ERROR state after another load attempt.\n  const errorSourceTiles = {};\n\n  if (this.state == TileState.IDLE) {\n    this.setState(TileState.LOADING);\n  }\n  if (this.state == TileState.LOADING) {\n    this.tileKeys.forEach(function(sourceTileKey) {\n      const sourceTile = this.getTile(sourceTileKey);\n      if (sourceTile.state == TileState.IDLE) {\n        sourceTile.setLoader(this.loader_);\n        sourceTile.load();\n      }\n      if (sourceTile.state == TileState.LOADING) {\n        const key = listen(sourceTile, EventType.CHANGE, function(e) {\n          const state = sourceTile.getState();\n          if (state == TileState.LOADED ||\n              state == TileState.ERROR) {\n            const uid = getUid(sourceTile);\n            if (state == TileState.ERROR) {\n              errorSourceTiles[uid] = true;\n            } else {\n              --leftToLoad;\n              delete errorSourceTiles[uid];\n            }\n            if (leftToLoad - Object.keys(errorSourceTiles).length == 0) {\n              this.finishLoading_();\n            }\n          }\n        }.bind(this));\n        this.loadListenerKeys_.push(key);\n        ++leftToLoad;\n      }\n    }.bind(this));\n  }\n  if (leftToLoad - Object.keys(errorSourceTiles).length == 0) {\n    setTimeout(this.finishLoading_.bind(this), 0);\n  }\n};\n\n\n/**\n * @private\n */\nVectorImageTile.prototype.finishLoading_ = function() {\n  let loaded = this.tileKeys.length;\n  let empty = 0;\n  for (let i = loaded - 1; i >= 0; --i) {\n    const state = this.getTile(this.tileKeys[i]).getState();\n    if (state != TileState.LOADED) {\n      --loaded;\n    }\n    if (state == TileState.EMPTY) {\n      ++empty;\n    }\n  }\n  if (loaded == this.tileKeys.length) {\n    this.loadListenerKeys_.forEach(unlistenByKey);\n    this.loadListenerKeys_.length = 0;\n    this.setState(TileState.LOADED);\n  } else {\n    this.setState(empty == this.tileKeys.length ? TileState.EMPTY : TileState.ERROR);\n  }\n};\n\nexport default VectorImageTile;\n\n/**\n * Sets the loader for a tile.\n * @param {module:ol/VectorTile} tile Vector tile.\n * @param {string} url URL.\n */\nexport function defaultLoadFunction(tile, url) {\n  const loader = loadFeaturesXhr(url, tile.getFormat(), tile.onLoad.bind(tile), tile.onError.bind(tile));\n  tile.setLoader(loader);\n}\n","/**\n * @module ol/VectorTile\n */\nimport {getUid, inherits} from './util.js';\nimport Tile from './Tile.js';\nimport TileState from './TileState.js';\n\n/**\n * @typedef {function(new: module:ol/VectorTile, module:ol/tilecoord~TileCoord,\n * module:ol/TileState, string, ?string, module:ol/Tile~LoadFunction)} TileClass\n * @api\n */\n\n/**\n * @constructor\n * @extends {module:ol/Tile}\n * @param {module:ol/tilecoord~TileCoord} tileCoord Tile coordinate.\n * @param {module:ol/TileState} state State.\n * @param {string} src Data source url.\n * @param {module:ol/format/Feature} format Feature format.\n * @param {module:ol/Tile~LoadFunction} tileLoadFunction Tile load function.\n * @param {module:ol/Tile~Options=} opt_options Tile options.\n */\nconst VectorTile = function(tileCoord, state, src, format, tileLoadFunction, opt_options) {\n\n  Tile.call(this, tileCoord, state, opt_options);\n\n  /**\n   * @type {number}\n   */\n  this.consumers = 0;\n\n  /**\n   * @private\n   * @type {module:ol/extent~Extent}\n   */\n  this.extent_ = null;\n\n  /**\n   * @private\n   * @type {module:ol/format/Feature}\n   */\n  this.format_ = format;\n\n  /**\n   * @private\n   * @type {Array.<module:ol/Feature>}\n   */\n  this.features_ = null;\n\n  /**\n   * @private\n   * @type {module:ol/featureloader~FeatureLoader}\n   */\n  this.loader_;\n\n  /**\n   * Data projection\n   * @private\n   * @type {module:ol/proj/Projection}\n   */\n  this.projection_ = null;\n\n  /**\n   * @private\n   * @type {Object.<string, module:ol/render/ReplayGroup>}\n   */\n  this.replayGroups_ = {};\n\n  /**\n   * @private\n   * @type {module:ol/Tile~LoadFunction}\n   */\n  this.tileLoadFunction_ = tileLoadFunction;\n\n  /**\n   * @private\n   * @type {string}\n   */\n  this.url_ = src;\n\n};\n\ninherits(VectorTile, Tile);\n\n/**\n * @const\n * @type {module:ol/extent~Extent}\n */\nconst DEFAULT_EXTENT = [0, 0, 4096, 4096];\n\n\n/**\n * @inheritDoc\n */\nVectorTile.prototype.disposeInternal = function() {\n  this.features_ = null;\n  this.replayGroups_ = {};\n  this.state = TileState.ABORT;\n  this.changed();\n  Tile.prototype.disposeInternal.call(this);\n};\n\n\n/**\n * Gets the extent of the vector tile.\n * @return {module:ol/extent~Extent} The extent.\n * @api\n */\nVectorTile.prototype.getExtent = function() {\n  return this.extent_ || DEFAULT_EXTENT;\n};\n\n\n/**\n * Get the feature format assigned for reading this tile's features.\n * @return {module:ol/format/Feature} Feature format.\n * @api\n */\nVectorTile.prototype.getFormat = function() {\n  return this.format_;\n};\n\n\n/**\n * Get the features for this tile. Geometries will be in the projection returned\n * by {@link module:ol/VectorTile~VectorTile#getProjection}.\n * @return {Array.<module:ol/Feature|module:ol/render/Feature>} Features.\n * @api\n */\nVectorTile.prototype.getFeatures = function() {\n  return this.features_;\n};\n\n\n/**\n * @inheritDoc\n */\nVectorTile.prototype.getKey = function() {\n  return this.url_;\n};\n\n\n/**\n * Get the feature projection of features returned by\n * {@link module:ol/VectorTile~VectorTile#getFeatures}.\n * @return {module:ol/proj/Projection} Feature projection.\n * @api\n */\nVectorTile.prototype.getProjection = function() {\n  return this.projection_;\n};\n\n\n/**\n * @param {module:ol/layer/Layer} layer Layer.\n * @param {string} key Key.\n * @return {module:ol/render/ReplayGroup} Replay group.\n */\nVectorTile.prototype.getReplayGroup = function(layer, key) {\n  return this.replayGroups_[getUid(layer) + ',' + key];\n};\n\n\n/**\n * @inheritDoc\n */\nVectorTile.prototype.load = function() {\n  if (this.state == TileState.IDLE) {\n    this.setState(TileState.LOADING);\n    this.tileLoadFunction_(this, this.url_);\n    this.loader_(null, NaN, null);\n  }\n};\n\n\n/**\n * Handler for successful tile load.\n * @param {Array.<module:ol/Feature>} features The loaded features.\n * @param {module:ol/proj/Projection} dataProjection Data projection.\n * @param {module:ol/extent~Extent} extent Extent.\n */\nVectorTile.prototype.onLoad = function(features, dataProjection, extent) {\n  this.setProjection(dataProjection);\n  this.setFeatures(features);\n  this.setExtent(extent);\n};\n\n\n/**\n * Handler for tile load errors.\n */\nVectorTile.prototype.onError = function() {\n  this.setState(TileState.ERROR);\n};\n\n\n/**\n * Function for use in an {@link module:ol/source/VectorTile~VectorTile}'s\n * `tileLoadFunction`. Sets the extent of the vector tile. This is only required\n * for tiles in projections with `tile-pixels` as units. The extent should be\n * set to `[0, 0, tilePixelSize, tilePixelSize]`, where `tilePixelSize` is\n * calculated by multiplying the tile size with the tile pixel ratio. For\n * sources using {@link module:ol/format/MVT~MVT} as feature format, the\n * {@link module:ol/format/MVT~MVT#getLastExtent} method will return the correct\n * extent. The default is `[0, 0, 4096, 4096]`.\n * @param {module:ol/extent~Extent} extent The extent.\n * @api\n */\nVectorTile.prototype.setExtent = function(extent) {\n  this.extent_ = extent;\n};\n\n\n/**\n * Function for use in an {@link module:ol/source/VectorTile~VectorTile}'s `tileLoadFunction`.\n * Sets the features for the tile.\n * @param {Array.<module:ol/Feature>} features Features.\n * @api\n */\nVectorTile.prototype.setFeatures = function(features) {\n  this.features_ = features;\n  this.setState(TileState.LOADED);\n};\n\n\n/**\n * Function for use in an {@link module:ol/source/VectorTile~VectorTile}'s `tileLoadFunction`.\n * Sets the projection of the features that were added with\n * {@link module:ol/VectorTile~VectorTile#setFeatures}.\n * @param {module:ol/proj/Projection} projection Feature projection.\n * @api\n */\nVectorTile.prototype.setProjection = function(projection) {\n  this.projection_ = projection;\n};\n\n\n/**\n * @param {module:ol/layer/Layer} layer Layer.\n * @param {string} key Key.\n * @param {module:ol/render/ReplayGroup} replayGroup Replay group.\n */\nVectorTile.prototype.setReplayGroup = function(layer, key, replayGroup) {\n  this.replayGroups_[getUid(layer) + ',' + key] = replayGroup;\n};\n\n\n/**\n * Set the feature loader for reading this tile's features.\n * @param {module:ol/featureloader~FeatureLoader} loader Feature loader.\n * @api\n */\nVectorTile.prototype.setLoader = function(loader) {\n  this.loader_ = loader;\n};\n\nexport default VectorTile;\n","/**\n * @module ol/source/VectorTile\n */\nimport {inherits} from '../util.js';\nimport TileState from '../TileState.js';\nimport VectorImageTile, {defaultLoadFunction} from '../VectorImageTile.js';\nimport Tile from '../VectorTile.js';\nimport {toSize} from '../size.js';\nimport UrlTile from '../source/UrlTile.js';\nimport {getKeyZXY} from '../tilecoord.js';\nimport {createXYZ, extentFromProjection, createForProjection} from '../tilegrid.js';\n\n/**\n * @typedef {Object} Options\n * @property {module:ol/source/Source~AttributionLike} [attributions] Attributions.\n * @property {number} [cacheSize=128] Cache size.\n * @property {module:ol/format/Feature} [format] Feature format for tiles. Used and required by the default.\n * @property {boolean} [overlaps=true] This source may have overlapping geometries. Setting this\n * to `false` (e.g. for sources with polygons that represent administrative\n * boundaries or TopoJSON sources) allows the renderer to optimise fill and\n * stroke operations.\n * @property {module:ol/proj~ProjectionLike} projection Projection.\n * @property {module:ol/source/State} [state] Source state.\n * @property {module:ol/VectorTile~TileClass} [tileClass] Class used to instantiate image tiles.\n * Default is {@link module:ol/VectorTile}.\n * @property {number} [maxZoom=22] Optional max zoom level.\n * @property {number} [minZoom] Optional min zoom level.\n * @property {number|module:ol/size~Size} [tileSize=512] Optional tile size.\n * @property {module:ol/tilegrid/TileGrid} [tileGrid] Tile grid.\n * @property {module:ol/Tile~LoadFunction} [tileLoadFunction]\n * Optional function to load a tile given a URL. Could look like this:\n * ```js\n * function(tile, url) {\n *   tile.setLoader(function() {\n *     var data = // ... fetch data\n *     var format = tile.getFormat();\n *     tile.setProjection(format.readProjection(data));\n *     tile.setFeatures(format.readFeatures(data, {\n *       // featureProjection is not required for ol/format/MVT\n *       featureProjection: map.getView().getProjection()\n *     }));\n *     // the line below is only required for ol/format/MVT\n *     tile.setExtent(format.getLastExtent());\n *   };\n * });\n * ```\n * @property {module:ol/Tile~UrlFunction} [tileUrlFunction] Optional function to get tile URL given a tile coordinate and the projection.\n * @property {string} [url] URL template. Must include `{x}`, `{y}` or `{-y}`, and `{z}` placeholders.\n * A `{?-?}` template pattern, for example `subdomain{a-f}.domain.com`, may be\n * used instead of defining each one separately in the `urls` option.\n * @property {number} [transition] A duration for tile opacity\n * transitions in milliseconds. A duration of 0 disables the opacity transition.\n * @property {Array.<string>} [urls] An array of URL templates.\n * @property {boolean} [wrapX=true] Whether to wrap the world horizontally.\n * When set to `false`, only one world\n * will be rendered. When set to `true`, tiles will be wrapped horizontally to\n * render multiple worlds.\n */\n\n\n/**\n * @classdesc\n * Class for layer sources providing vector data divided into a tile grid, to be\n * used with {@link module:ol/layer/VectorTile~VectorTile}. Although this source receives tiles\n * with vector features from the server, it is not meant for feature editing.\n * Features are optimized for rendering, their geometries are clipped at or near\n * tile boundaries and simplified for a view resolution. See\n * {@link module:ol/source/Vector} for vector sources that are suitable for feature\n * editing.\n *\n * @constructor\n * @fires module:ol/source/Tile~TileSourceEvent\n * @extends {module:ol/source/UrlTile}\n * @param {module:ol/source/VectorTile~Options=} options Vector tile options.\n * @api\n */\nconst VectorTile = function(options) {\n  const projection = options.projection || 'EPSG:3857';\n\n  const extent = options.extent || extentFromProjection(projection);\n\n  const tileGrid = options.tileGrid || createXYZ({\n    extent: extent,\n    maxZoom: options.maxZoom || 22,\n    minZoom: options.minZoom,\n    tileSize: options.tileSize || 512\n  });\n\n  UrlTile.call(this, {\n    attributions: options.attributions,\n    cacheSize: options.cacheSize !== undefined ? options.cacheSize : 128,\n    extent: extent,\n    opaque: false,\n    projection: projection,\n    state: options.state,\n    tileGrid: tileGrid,\n    tileLoadFunction: options.tileLoadFunction ? options.tileLoadFunction : defaultLoadFunction,\n    tileUrlFunction: options.tileUrlFunction,\n    url: options.url,\n    urls: options.urls,\n    wrapX: options.wrapX === undefined ? true : options.wrapX,\n    transition: options.transition\n  });\n\n  /**\n   * @private\n   * @type {module:ol/format/Feature}\n   */\n  this.format_ = options.format ? options.format : null;\n\n  /**\n     * @private\n     * @type {Object.<string, module:ol/VectorTile>}\n     */\n  this.sourceTiles_ = {};\n\n  /**\n   * @private\n   * @type {boolean}\n   */\n  this.overlaps_ = options.overlaps == undefined ? true : options.overlaps;\n\n  /**\n     * @protected\n     * @type {function(new: module:ol/VectorTile, module:ol/tilecoord~TileCoord, module:ol/TileState, string,\n     *        module:ol/format/Feature, module:ol/Tile~LoadFunction)}\n     */\n  this.tileClass = options.tileClass ? options.tileClass : Tile;\n\n  /**\n   * @private\n   * @type {Object.<string, module:ol/tilegrid/TileGrid>}\n   */\n  this.tileGrids_ = {};\n\n};\n\ninherits(VectorTile, UrlTile);\n\n\n/**\n * @return {boolean} The source can have overlapping geometries.\n */\nVectorTile.prototype.getOverlaps = function() {\n  return this.overlaps_;\n};\n\n/**\n * clear {@link module:ol/TileCache~TileCache} and delete all source tiles\n * @api\n */\nVectorTile.prototype.clear = function() {\n  this.tileCache.clear();\n  this.sourceTiles_ = {};\n};\n\n/**\n * @inheritDoc\n */\nVectorTile.prototype.getTile = function(z, x, y, pixelRatio, projection) {\n  const tileCoordKey = getKeyZXY(z, x, y);\n  if (this.tileCache.containsKey(tileCoordKey)) {\n    return (\n      /** @type {!module:ol/Tile} */ (this.tileCache.get(tileCoordKey))\n    );\n  } else {\n    const tileCoord = [z, x, y];\n    const urlTileCoord = this.getTileCoordForTileUrlFunction(\n      tileCoord, projection);\n    const tile = new VectorImageTile(\n      tileCoord,\n      urlTileCoord !== null ? TileState.IDLE : TileState.EMPTY,\n      this.getRevision(),\n      this.format_, this.tileLoadFunction, urlTileCoord, this.tileUrlFunction,\n      this.tileGrid, this.getTileGridForProjection(projection),\n      this.sourceTiles_, pixelRatio, projection, this.tileClass,\n      this.handleTileChange.bind(this), tileCoord[0]);\n\n    this.tileCache.set(tileCoordKey, tile);\n    return tile;\n  }\n};\n\n\n/**\n * @inheritDoc\n */\nVectorTile.prototype.getTileGridForProjection = function(projection) {\n  const code = projection.getCode();\n  let tileGrid = this.tileGrids_[code];\n  if (!tileGrid) {\n    // A tile grid that matches the tile size of the source tile grid is more\n    // likely to have 1:1 relationships between source tiles and rendered tiles.\n    const sourceTileGrid = this.tileGrid;\n    tileGrid = this.tileGrids_[code] = createForProjection(projection, undefined,\n      sourceTileGrid ? sourceTileGrid.getTileSize(sourceTileGrid.getMinZoom()) : undefined);\n  }\n  return tileGrid;\n};\n\n\n/**\n * @inheritDoc\n */\nVectorTile.prototype.getTilePixelRatio = function(pixelRatio) {\n  return pixelRatio;\n};\n\n\n/**\n * @inheritDoc\n */\nVectorTile.prototype.getTilePixelSize = function(z, pixelRatio, projection) {\n  const tileGrid = this.getTileGridForProjection(projection);\n  const tileSize = toSize(tileGrid.getTileSize(z), this.tmpSize);\n  return [Math.round(tileSize[0] * pixelRatio), Math.round(tileSize[1] * pixelRatio)];\n};\nexport default VectorTile;\n","/**\n * @module ol/proj/proj4\n */\nimport {addCoordinateTransforms, addProjection, addEquivalentProjections, get} from '../proj.js';\nimport {get as getTransform} from './transforms.js';\nimport Projection from './Projection.js';\n\n/**\n * Make projections defined in proj4 (with `proj4.defs()`) available in\n * OpenLayers.\n *\n * This function should be called whenever changes are made to the proj4\n * registry, e.g. after calling `proj4.defs()`. Existing transforms will not be\n * modified by this function.\n *\n * @param {?} proj4 Proj4.\n * @api\n */\nexport function register(proj4) {\n  const projCodes = Object.keys(proj4.defs);\n  const len = projCodes.length;\n  let i, j;\n  for (i = 0; i < len; ++i) {\n    const code = projCodes[i];\n    if (!get(code)) {\n      const def = proj4.defs(code);\n      addProjection(new Projection({\n        code: code,\n        axisOrientation: def.axis,\n        metersPerUnit: def.to_meter,\n        units: def.units\n      }));\n    }\n  }\n  for (i = 0; i < len; ++i) {\n    const code1 = projCodes[i];\n    const proj1 = get(code1);\n    for (j = 0; j < len; ++j) {\n      const code2 = projCodes[j];\n      const proj2 = get(code2);\n      if (!getTransform(code1, code2)) {\n        if (proj4.defs[code1] === proj4.defs[code2]) {\n          addEquivalentProjections([proj1, proj2]);\n        } else {\n          const transform = proj4(code1, code2);\n          addCoordinateTransforms(proj1, proj2, transform.forward, transform.inverse);\n        }\n      }\n    }\n  }\n}\n","/**\n * @module ol/geom/flat/simplify\n */\n// Based on simplify-js https://github.com/mourner/simplify-js\n// Copyright (c) 2012, Vladimir Agafonkin\n// All rights reserved.\n//\n// Redistribution and use in source and binary forms, with or without\n// modification, are permitted provided that the following conditions are met:\n//\n//    1. Redistributions of source code must retain the above copyright notice,\n//       this list of conditions and the following disclaimer.\n//\n//    2. Redistributions in binary form must reproduce the above copyright\n//       notice, this list of conditions and the following disclaimer in the\n//       documentation and/or other materials provided with the distribution.\n//\n// THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\"\n// AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE\n// IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE\n// ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE\n// LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR\n// CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF\n// SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS\n// INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN\n// CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)\n// ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE\n// POSSIBILITY OF SUCH DAMAGE.\n\nimport {squaredSegmentDistance, squaredDistance} from '../../math.js';\n\n\n/**\n * @param {Array.<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {number} end End.\n * @param {number} stride Stride.\n * @param {number} squaredTolerance Squared tolerance.\n * @param {boolean} highQuality Highest quality.\n * @param {Array.<number>=} opt_simplifiedFlatCoordinates Simplified flat\n *     coordinates.\n * @return {Array.<number>} Simplified line string.\n */\nexport function simplifyLineString(flatCoordinates, offset, end,\n  stride, squaredTolerance, highQuality, opt_simplifiedFlatCoordinates) {\n  const simplifiedFlatCoordinates = opt_simplifiedFlatCoordinates !== undefined ?\n    opt_simplifiedFlatCoordinates : [];\n  if (!highQuality) {\n    end = radialDistance(flatCoordinates, offset, end,\n      stride, squaredTolerance,\n      simplifiedFlatCoordinates, 0);\n    flatCoordinates = simplifiedFlatCoordinates;\n    offset = 0;\n    stride = 2;\n  }\n  simplifiedFlatCoordinates.length = douglasPeucker(\n    flatCoordinates, offset, end, stride, squaredTolerance,\n    simplifiedFlatCoordinates, 0);\n  return simplifiedFlatCoordinates;\n}\n\n\n/**\n * @param {Array.<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {number} end End.\n * @param {number} stride Stride.\n * @param {number} squaredTolerance Squared tolerance.\n * @param {Array.<number>} simplifiedFlatCoordinates Simplified flat\n *     coordinates.\n * @param {number} simplifiedOffset Simplified offset.\n * @return {number} Simplified offset.\n */\nexport function douglasPeucker(flatCoordinates, offset, end,\n  stride, squaredTolerance, simplifiedFlatCoordinates, simplifiedOffset) {\n  const n = (end - offset) / stride;\n  if (n < 3) {\n    for (; offset < end; offset += stride) {\n      simplifiedFlatCoordinates[simplifiedOffset++] =\n          flatCoordinates[offset];\n      simplifiedFlatCoordinates[simplifiedOffset++] =\n          flatCoordinates[offset + 1];\n    }\n    return simplifiedOffset;\n  }\n  /** @type {Array.<number>} */\n  const markers = new Array(n);\n  markers[0] = 1;\n  markers[n - 1] = 1;\n  /** @type {Array.<number>} */\n  const stack = [offset, end - stride];\n  let index = 0;\n  while (stack.length > 0) {\n    const last = stack.pop();\n    const first = stack.pop();\n    let maxSquaredDistance = 0;\n    const x1 = flatCoordinates[first];\n    const y1 = flatCoordinates[first + 1];\n    const x2 = flatCoordinates[last];\n    const y2 = flatCoordinates[last + 1];\n    for (let i = first + stride; i < last; i += stride) {\n      const x = flatCoordinates[i];\n      const y = flatCoordinates[i + 1];\n      const squaredDistance = squaredSegmentDistance(\n        x, y, x1, y1, x2, y2);\n      if (squaredDistance > maxSquaredDistance) {\n        index = i;\n        maxSquaredDistance = squaredDistance;\n      }\n    }\n    if (maxSquaredDistance > squaredTolerance) {\n      markers[(index - offset) / stride] = 1;\n      if (first + stride < index) {\n        stack.push(first, index);\n      }\n      if (index + stride < last) {\n        stack.push(index, last);\n      }\n    }\n  }\n  for (let i = 0; i < n; ++i) {\n    if (markers[i]) {\n      simplifiedFlatCoordinates[simplifiedOffset++] =\n          flatCoordinates[offset + i * stride];\n      simplifiedFlatCoordinates[simplifiedOffset++] =\n          flatCoordinates[offset + i * stride + 1];\n    }\n  }\n  return simplifiedOffset;\n}\n\n\n/**\n * @param {Array.<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {Array.<number>} ends Ends.\n * @param {number} stride Stride.\n * @param {number} squaredTolerance Squared tolerance.\n * @param {Array.<number>} simplifiedFlatCoordinates Simplified flat\n *     coordinates.\n * @param {number} simplifiedOffset Simplified offset.\n * @param {Array.<number>} simplifiedEnds Simplified ends.\n * @return {number} Simplified offset.\n */\nexport function douglasPeuckerArray(flatCoordinates, offset,\n  ends, stride, squaredTolerance, simplifiedFlatCoordinates,\n  simplifiedOffset, simplifiedEnds) {\n  for (let i = 0, ii = ends.length; i < ii; ++i) {\n    const end = ends[i];\n    simplifiedOffset = douglasPeucker(\n      flatCoordinates, offset, end, stride, squaredTolerance,\n      simplifiedFlatCoordinates, simplifiedOffset);\n    simplifiedEnds.push(simplifiedOffset);\n    offset = end;\n  }\n  return simplifiedOffset;\n}\n\n\n/**\n * @param {Array.<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {Array.<Array.<number>>} endss Endss.\n * @param {number} stride Stride.\n * @param {number} squaredTolerance Squared tolerance.\n * @param {Array.<number>} simplifiedFlatCoordinates Simplified flat\n *     coordinates.\n * @param {number} simplifiedOffset Simplified offset.\n * @param {Array.<Array.<number>>} simplifiedEndss Simplified endss.\n * @return {number} Simplified offset.\n */\nexport function douglasPeuckerMultiArray(\n  flatCoordinates, offset, endss, stride, squaredTolerance,\n  simplifiedFlatCoordinates, simplifiedOffset, simplifiedEndss) {\n  for (let i = 0, ii = endss.length; i < ii; ++i) {\n    const ends = endss[i];\n    const simplifiedEnds = [];\n    simplifiedOffset = douglasPeuckerArray(\n      flatCoordinates, offset, ends, stride, squaredTolerance,\n      simplifiedFlatCoordinates, simplifiedOffset, simplifiedEnds);\n    simplifiedEndss.push(simplifiedEnds);\n    offset = ends[ends.length - 1];\n  }\n  return simplifiedOffset;\n}\n\n\n/**\n * @param {Array.<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {number} end End.\n * @param {number} stride Stride.\n * @param {number} squaredTolerance Squared tolerance.\n * @param {Array.<number>} simplifiedFlatCoordinates Simplified flat\n *     coordinates.\n * @param {number} simplifiedOffset Simplified offset.\n * @return {number} Simplified offset.\n */\nexport function radialDistance(flatCoordinates, offset, end,\n  stride, squaredTolerance, simplifiedFlatCoordinates, simplifiedOffset) {\n  if (end <= offset + stride) {\n    // zero or one point, no simplification possible, so copy and return\n    for (; offset < end; offset += stride) {\n      simplifiedFlatCoordinates[simplifiedOffset++] = flatCoordinates[offset];\n      simplifiedFlatCoordinates[simplifiedOffset++] =\n          flatCoordinates[offset + 1];\n    }\n    return simplifiedOffset;\n  }\n  let x1 = flatCoordinates[offset];\n  let y1 = flatCoordinates[offset + 1];\n  // copy first point\n  simplifiedFlatCoordinates[simplifiedOffset++] = x1;\n  simplifiedFlatCoordinates[simplifiedOffset++] = y1;\n  let x2 = x1;\n  let y2 = y1;\n  for (offset += stride; offset < end; offset += stride) {\n    x2 = flatCoordinates[offset];\n    y2 = flatCoordinates[offset + 1];\n    if (squaredDistance(x1, y1, x2, y2) > squaredTolerance) {\n      // copy point at offset\n      simplifiedFlatCoordinates[simplifiedOffset++] = x2;\n      simplifiedFlatCoordinates[simplifiedOffset++] = y2;\n      x1 = x2;\n      y1 = y2;\n    }\n  }\n  if (x2 != x1 || y2 != y1) {\n    // copy last point\n    simplifiedFlatCoordinates[simplifiedOffset++] = x2;\n    simplifiedFlatCoordinates[simplifiedOffset++] = y2;\n  }\n  return simplifiedOffset;\n}\n\n\n/**\n * @param {number} value Value.\n * @param {number} tolerance Tolerance.\n * @return {number} Rounded value.\n */\nexport function snap(value, tolerance) {\n  return tolerance * Math.round(value / tolerance);\n}\n\n\n/**\n * Simplifies a line string using an algorithm designed by Tim Schaub.\n * Coordinates are snapped to the nearest value in a virtual grid and\n * consecutive duplicate coordinates are discarded.  This effectively preserves\n * topology as the simplification of any subsection of a line string is\n * independent of the rest of the line string.  This means that, for examples,\n * the common edge between two polygons will be simplified to the same line\n * string independently in both polygons.  This implementation uses a single\n * pass over the coordinates and eliminates intermediate collinear points.\n * @param {Array.<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {number} end End.\n * @param {number} stride Stride.\n * @param {number} tolerance Tolerance.\n * @param {Array.<number>} simplifiedFlatCoordinates Simplified flat\n *     coordinates.\n * @param {number} simplifiedOffset Simplified offset.\n * @return {number} Simplified offset.\n */\nexport function quantize(flatCoordinates, offset, end, stride,\n  tolerance, simplifiedFlatCoordinates, simplifiedOffset) {\n  // do nothing if the line is empty\n  if (offset == end) {\n    return simplifiedOffset;\n  }\n  // snap the first coordinate (P1)\n  let x1 = snap(flatCoordinates[offset], tolerance);\n  let y1 = snap(flatCoordinates[offset + 1], tolerance);\n  offset += stride;\n  // add the first coordinate to the output\n  simplifiedFlatCoordinates[simplifiedOffset++] = x1;\n  simplifiedFlatCoordinates[simplifiedOffset++] = y1;\n  // find the next coordinate that does not snap to the same value as the first\n  // coordinate (P2)\n  let x2, y2;\n  do {\n    x2 = snap(flatCoordinates[offset], tolerance);\n    y2 = snap(flatCoordinates[offset + 1], tolerance);\n    offset += stride;\n    if (offset == end) {\n      // all coordinates snap to the same value, the line collapses to a point\n      // push the last snapped value anyway to ensure that the output contains\n      // at least two points\n      // FIXME should we really return at least two points anyway?\n      simplifiedFlatCoordinates[simplifiedOffset++] = x2;\n      simplifiedFlatCoordinates[simplifiedOffset++] = y2;\n      return simplifiedOffset;\n    }\n  } while (x2 == x1 && y2 == y1);\n  while (offset < end) {\n    // snap the next coordinate (P3)\n    const x3 = snap(flatCoordinates[offset], tolerance);\n    const y3 = snap(flatCoordinates[offset + 1], tolerance);\n    offset += stride;\n    // skip P3 if it is equal to P2\n    if (x3 == x2 && y3 == y2) {\n      continue;\n    }\n    // calculate the delta between P1 and P2\n    const dx1 = x2 - x1;\n    const dy1 = y2 - y1;\n    // calculate the delta between P3 and P1\n    const dx2 = x3 - x1;\n    const dy2 = y3 - y1;\n    // if P1, P2, and P3 are colinear and P3 is further from P1 than P2 is from\n    // P1 in the same direction then P2 is on the straight line between P1 and\n    // P3\n    if ((dx1 * dy2 == dy1 * dx2) &&\n        ((dx1 < 0 && dx2 < dx1) || dx1 == dx2 || (dx1 > 0 && dx2 > dx1)) &&\n        ((dy1 < 0 && dy2 < dy1) || dy1 == dy2 || (dy1 > 0 && dy2 > dy1))) {\n      // discard P2 and set P2 = P3\n      x2 = x3;\n      y2 = y3;\n      continue;\n    }\n    // either P1, P2, and P3 are not colinear, or they are colinear but P3 is\n    // between P3 and P1 or on the opposite half of the line to P2.  add P2,\n    // and continue with P1 = P2 and P2 = P3\n    simplifiedFlatCoordinates[simplifiedOffset++] = x2;\n    simplifiedFlatCoordinates[simplifiedOffset++] = y2;\n    x1 = x2;\n    y1 = y2;\n    x2 = x3;\n    y2 = y3;\n  }\n  // add the last point (P2)\n  simplifiedFlatCoordinates[simplifiedOffset++] = x2;\n  simplifiedFlatCoordinates[simplifiedOffset++] = y2;\n  return simplifiedOffset;\n}\n\n\n/**\n * @param {Array.<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {Array.<number>} ends Ends.\n * @param {number} stride Stride.\n * @param {number} tolerance Tolerance.\n * @param {Array.<number>} simplifiedFlatCoordinates Simplified flat\n *     coordinates.\n * @param {number} simplifiedOffset Simplified offset.\n * @param {Array.<number>} simplifiedEnds Simplified ends.\n * @return {number} Simplified offset.\n */\nexport function quantizeArray(\n  flatCoordinates, offset, ends, stride,\n  tolerance,\n  simplifiedFlatCoordinates, simplifiedOffset, simplifiedEnds) {\n  for (let i = 0, ii = ends.length; i < ii; ++i) {\n    const end = ends[i];\n    simplifiedOffset = quantize(\n      flatCoordinates, offset, end, stride,\n      tolerance,\n      simplifiedFlatCoordinates, simplifiedOffset);\n    simplifiedEnds.push(simplifiedOffset);\n    offset = end;\n  }\n  return simplifiedOffset;\n}\n\n\n/**\n * @param {Array.<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {Array.<Array.<number>>} endss Endss.\n * @param {number} stride Stride.\n * @param {number} tolerance Tolerance.\n * @param {Array.<number>} simplifiedFlatCoordinates Simplified flat\n *     coordinates.\n * @param {number} simplifiedOffset Simplified offset.\n * @param {Array.<Array.<number>>} simplifiedEndss Simplified endss.\n * @return {number} Simplified offset.\n */\nexport function quantizeMultiArray(\n  flatCoordinates, offset, endss, stride,\n  tolerance,\n  simplifiedFlatCoordinates, simplifiedOffset, simplifiedEndss) {\n  for (let i = 0, ii = endss.length; i < ii; ++i) {\n    const ends = endss[i];\n    const simplifiedEnds = [];\n    simplifiedOffset = quantizeArray(\n      flatCoordinates, offset, ends, stride,\n      tolerance,\n      simplifiedFlatCoordinates, simplifiedOffset, simplifiedEnds);\n    simplifiedEndss.push(simplifiedEnds);\n    offset = ends[ends.length - 1];\n  }\n  return simplifiedOffset;\n}\n","/**\n * @module ol/style/Stroke\n */\nimport {getUid} from '../util.js';\n\n\n/**\n * @typedef {Object} Options\n * @property {module:ol/color~Color|module:ol/colorlike~ColorLike} [color] A color, gradient or pattern.\n * See {@link module:ol/color~Color} and {@link module:ol/colorlike~ColorLike} for possible formats.\n * Default null; if null, the Canvas/renderer default black will be used.\n * @property {string} [lineCap='round'] Line cap style: `butt`, `round`, or `square`.\n * @property {string} [lineJoin='round'] Line join style: `bevel`, `round`, or `miter`.\n * @property {Array.<number>} [lineDash] Line dash pattern. Default is `undefined` (no dash).\n * Please note that Internet Explorer 10 and lower do not support the `setLineDash` method on\n * the `CanvasRenderingContext2D` and therefore this option will have no visual effect in these browsers.\n * @property {number} [lineDashOffset=0] Line dash offset.\n * @property {number} [miterLimit=10] Miter limit.\n * @property {number} [width] Width.\n */\n\n\n/**\n * @classdesc\n * Set stroke style for vector features.\n * Note that the defaults given are the Canvas defaults, which will be used if\n * option is not defined. The `get` functions return whatever was entered in\n * the options; they will not return the default.\n *\n * @constructor\n * @param {module:ol/style/Stroke~Options=} opt_options Options.\n * @api\n */\nconst Stroke = function(opt_options) {\n\n  const options = opt_options || {};\n\n  /**\n   * @private\n   * @type {module:ol/color~Color|module:ol/colorlike~ColorLike}\n   */\n  this.color_ = options.color !== undefined ? options.color : null;\n\n  /**\n   * @private\n   * @type {string|undefined}\n   */\n  this.lineCap_ = options.lineCap;\n\n  /**\n   * @private\n   * @type {Array.<number>}\n   */\n  this.lineDash_ = options.lineDash !== undefined ? options.lineDash : null;\n\n  /**\n   * @private\n   * @type {number|undefined}\n   */\n  this.lineDashOffset_ = options.lineDashOffset;\n\n  /**\n   * @private\n   * @type {string|undefined}\n   */\n  this.lineJoin_ = options.lineJoin;\n\n  /**\n   * @private\n   * @type {number|undefined}\n   */\n  this.miterLimit_ = options.miterLimit;\n\n  /**\n   * @private\n   * @type {number|undefined}\n   */\n  this.width_ = options.width;\n\n  /**\n   * @private\n   * @type {string|undefined}\n   */\n  this.checksum_ = undefined;\n};\n\n\n/**\n * Clones the style.\n * @return {module:ol/style/Stroke} The cloned style.\n * @api\n */\nStroke.prototype.clone = function() {\n  const color = this.getColor();\n  return new Stroke({\n    color: (color && color.slice) ? color.slice() : color || undefined,\n    lineCap: this.getLineCap(),\n    lineDash: this.getLineDash() ? this.getLineDash().slice() : undefined,\n    lineDashOffset: this.getLineDashOffset(),\n    lineJoin: this.getLineJoin(),\n    miterLimit: this.getMiterLimit(),\n    width: this.getWidth()\n  });\n};\n\n\n/**\n * Get the stroke color.\n * @return {module:ol/color~Color|module:ol/colorlike~ColorLike} Color.\n * @api\n */\nStroke.prototype.getColor = function() {\n  return this.color_;\n};\n\n\n/**\n * Get the line cap type for the stroke.\n * @return {string|undefined} Line cap.\n * @api\n */\nStroke.prototype.getLineCap = function() {\n  return this.lineCap_;\n};\n\n\n/**\n * Get the line dash style for the stroke.\n * @return {Array.<number>} Line dash.\n * @api\n */\nStroke.prototype.getLineDash = function() {\n  return this.lineDash_;\n};\n\n\n/**\n * Get the line dash offset for the stroke.\n * @return {number|undefined} Line dash offset.\n * @api\n */\nStroke.prototype.getLineDashOffset = function() {\n  return this.lineDashOffset_;\n};\n\n\n/**\n * Get the line join type for the stroke.\n * @return {string|undefined} Line join.\n * @api\n */\nStroke.prototype.getLineJoin = function() {\n  return this.lineJoin_;\n};\n\n\n/**\n * Get the miter limit for the stroke.\n * @return {number|undefined} Miter limit.\n * @api\n */\nStroke.prototype.getMiterLimit = function() {\n  return this.miterLimit_;\n};\n\n\n/**\n * Get the stroke width.\n * @return {number|undefined} Width.\n * @api\n */\nStroke.prototype.getWidth = function() {\n  return this.width_;\n};\n\n\n/**\n * Set the color.\n *\n * @param {module:ol/color~Color|module:ol/colorlike~ColorLike} color Color.\n * @api\n */\nStroke.prototype.setColor = function(color) {\n  this.color_ = color;\n  this.checksum_ = undefined;\n};\n\n\n/**\n * Set the line cap.\n *\n * @param {string|undefined} lineCap Line cap.\n * @api\n */\nStroke.prototype.setLineCap = function(lineCap) {\n  this.lineCap_ = lineCap;\n  this.checksum_ = undefined;\n};\n\n\n/**\n * Set the line dash.\n *\n * Please note that Internet Explorer 10 and lower [do not support][mdn] the\n * `setLineDash` method on the `CanvasRenderingContext2D` and therefore this\n * property will have no visual effect in these browsers.\n *\n * [mdn]: https://developer.mozilla.org/en-US/docs/Web/API/CanvasRenderingContext2D/setLineDash#Browser_compatibility\n *\n * @param {Array.<number>} lineDash Line dash.\n * @api\n */\nStroke.prototype.setLineDash = function(lineDash) {\n  this.lineDash_ = lineDash;\n  this.checksum_ = undefined;\n};\n\n\n/**\n * Set the line dash offset.\n *\n * @param {number|undefined} lineDashOffset Line dash offset.\n * @api\n */\nStroke.prototype.setLineDashOffset = function(lineDashOffset) {\n  this.lineDashOffset_ = lineDashOffset;\n  this.checksum_ = undefined;\n};\n\n\n/**\n * Set the line join.\n *\n * @param {string|undefined} lineJoin Line join.\n * @api\n */\nStroke.prototype.setLineJoin = function(lineJoin) {\n  this.lineJoin_ = lineJoin;\n  this.checksum_ = undefined;\n};\n\n\n/**\n * Set the miter limit.\n *\n * @param {number|undefined} miterLimit Miter limit.\n * @api\n */\nStroke.prototype.setMiterLimit = function(miterLimit) {\n  this.miterLimit_ = miterLimit;\n  this.checksum_ = undefined;\n};\n\n\n/**\n * Set the width.\n *\n * @param {number|undefined} width Width.\n * @api\n */\nStroke.prototype.setWidth = function(width) {\n  this.width_ = width;\n  this.checksum_ = undefined;\n};\n\n\n/**\n * @return {string} The checksum.\n */\nStroke.prototype.getChecksum = function() {\n  if (this.checksum_ === undefined) {\n    this.checksum_ = 's';\n    if (this.color_) {\n      if (typeof this.color_ === 'string') {\n        this.checksum_ += this.color_;\n      } else {\n        this.checksum_ += getUid(this.color_).toString();\n      }\n    } else {\n      this.checksum_ += '-';\n    }\n    this.checksum_ += ',' +\n        (this.lineCap_ !== undefined ?\n          this.lineCap_.toString() : '-') + ',' +\n        (this.lineDash_ ?\n          this.lineDash_.toString() : '-') + ',' +\n        (this.lineDashOffset_ !== undefined ?\n          this.lineDashOffset_ : '-') + ',' +\n        (this.lineJoin_ !== undefined ?\n          this.lineJoin_ : '-') + ',' +\n        (this.miterLimit_ !== undefined ?\n          this.miterLimit_.toString() : '-') + ',' +\n        (this.width_ !== undefined ?\n          this.width_.toString() : '-');\n  }\n\n  return this.checksum_;\n};\nexport default Stroke;\n","/**\n * @module ol/ObjectEventType\n */\n\n/**\n * @enum {string}\n */\nexport default {\n  /**\n   * Triggered when a property is changed.\n   * @event module:ol/Object~ObjectEvent#propertychange\n   * @api\n   */\n  PROPERTYCHANGE: 'propertychange'\n};\n","/**\n * @module ol/Observable\n */\nimport {inherits} from './util.js';\nimport {listen, unlistenByKey, unlisten, listenOnce} from './events.js';\nimport EventTarget from './events/EventTarget.js';\nimport EventType from './events/EventType.js';\n\n/**\n * @classdesc\n * Abstract base class; normally only used for creating subclasses and not\n * instantiated in apps.\n * An event target providing convenient methods for listener registration\n * and unregistration. A generic `change` event is always available through\n * {@link module:ol/Observable~Observable#changed}.\n *\n * @constructor\n * @extends {module:ol/events/EventTarget}\n * @fires module:ol/events/Event~Event\n * @struct\n * @api\n */\nconst Observable = function() {\n\n  EventTarget.call(this);\n\n  /**\n   * @private\n   * @type {number}\n   */\n  this.revision_ = 0;\n\n};\n\ninherits(Observable, EventTarget);\n\n\n/**\n * Removes an event listener using the key returned by `on()` or `once()`.\n * @param {module:ol/events~EventsKey|Array.<module:ol/events~EventsKey>} key The key returned by `on()`\n *     or `once()` (or an array of keys).\n * @api\n */\nexport function unByKey(key) {\n  if (Array.isArray(key)) {\n    for (let i = 0, ii = key.length; i < ii; ++i) {\n      unlistenByKey(key[i]);\n    }\n  } else {\n    unlistenByKey(/** @type {module:ol/events~EventsKey} */ (key));\n  }\n}\n\n\n/**\n * Increases the revision counter and dispatches a 'change' event.\n * @api\n */\nObservable.prototype.changed = function() {\n  ++this.revision_;\n  this.dispatchEvent(EventType.CHANGE);\n};\n\n\n/**\n * Dispatches an event and calls all listeners listening for events\n * of this type. The event parameter can either be a string or an\n * Object with a `type` property.\n *\n * @param {{type: string,\n *     target: (EventTarget|module:ol/events/EventTarget|undefined)}|\n *     module:ol/events/Event|string} event Event object.\n * @function\n * @api\n */\nObservable.prototype.dispatchEvent;\n\n\n/**\n * Get the version number for this object.  Each time the object is modified,\n * its version number will be incremented.\n * @return {number} Revision.\n * @api\n */\nObservable.prototype.getRevision = function() {\n  return this.revision_;\n};\n\n\n/**\n * Listen for a certain type of event.\n * @param {string|Array.<string>} type The event type or array of event types.\n * @param {function(?): ?} listener The listener function.\n * @return {module:ol/events~EventsKey|Array.<module:ol/events~EventsKey>} Unique key for the listener. If\n *     called with an array of event types as the first argument, the return\n *     will be an array of keys.\n * @api\n */\nObservable.prototype.on = function(type, listener) {\n  if (Array.isArray(type)) {\n    const len = type.length;\n    const keys = new Array(len);\n    for (let i = 0; i < len; ++i) {\n      keys[i] = listen(this, type[i], listener);\n    }\n    return keys;\n  } else {\n    return listen(this, /** @type {string} */ (type), listener);\n  }\n};\n\n\n/**\n * Listen once for a certain type of event.\n * @param {string|Array.<string>} type The event type or array of event types.\n * @param {function(?): ?} listener The listener function.\n * @return {module:ol/events~EventsKey|Array.<module:ol/events~EventsKey>} Unique key for the listener. If\n *     called with an array of event types as the first argument, the return\n *     will be an array of keys.\n * @api\n */\nObservable.prototype.once = function(type, listener) {\n  if (Array.isArray(type)) {\n    const len = type.length;\n    const keys = new Array(len);\n    for (let i = 0; i < len; ++i) {\n      keys[i] = listenOnce(this, type[i], listener);\n    }\n    return keys;\n  } else {\n    return listenOnce(this, /** @type {string} */ (type), listener);\n  }\n};\n\n\n/**\n * Unlisten for a certain type of event.\n * @param {string|Array.<string>} type The event type or array of event types.\n * @param {function(?): ?} listener The listener function.\n * @api\n */\nObservable.prototype.un = function(type, listener) {\n  if (Array.isArray(type)) {\n    for (let i = 0, ii = type.length; i < ii; ++i) {\n      unlisten(this, type[i], listener);\n    }\n    return;\n  } else {\n    unlisten(this, /** @type {string} */ (type), listener);\n  }\n};\nexport default Observable;\n","/**\n * @module ol/source/Tile\n */\nimport {inherits} from '../util.js';\nimport {UNDEFINED} from '../functions.js';\nimport TileCache from '../TileCache.js';\nimport TileState from '../TileState.js';\nimport Event from '../events/Event.js';\nimport {equivalent} from '../proj.js';\nimport {toSize, scale as scaleSize} from '../size.js';\nimport Source from '../source/Source.js';\nimport {getKeyZXY, withinExtentAndZ} from '../tilecoord.js';\nimport {wrapX, getForProjection as getTileGridForProjection} from '../tilegrid.js';\n\n/**\n * @typedef {Object} Options\n * @property {module:ol/source/Source~AttributionLike} [attributions]\n * @property {number} [cacheSize]\n * @property {module:ol/extent~Extent} [extent]\n * @property {boolean} [opaque]\n * @property {number} [tilePixelRatio]\n * @property {module:ol/proj~ProjectionLike} [projection]\n * @property {module:ol/source/State} [state]\n * @property {module:ol/tilegrid/TileGrid} [tileGrid]\n * @property {boolean} [wrapX=true]\n * @property {number} [transition]\n */\n\n\n/**\n * @classdesc\n * Abstract base class; normally only used for creating subclasses and not\n * instantiated in apps.\n * Base class for sources providing images divided into a tile grid.\n *\n * @constructor\n * @abstract\n * @extends {module:ol/source/Source}\n * @param {module:ol/source/Tile~Options=} options SourceTile source options.\n * @api\n */\nconst TileSource = function(options) {\n\n  Source.call(this, {\n    attributions: options.attributions,\n    extent: options.extent,\n    projection: options.projection,\n    state: options.state,\n    wrapX: options.wrapX\n  });\n\n  /**\n   * @private\n   * @type {boolean}\n   */\n  this.opaque_ = options.opaque !== undefined ? options.opaque : false;\n\n  /**\n   * @private\n   * @type {number}\n   */\n  this.tilePixelRatio_ = options.tilePixelRatio !== undefined ?\n    options.tilePixelRatio : 1;\n\n  /**\n   * @protected\n   * @type {module:ol/tilegrid/TileGrid}\n   */\n  this.tileGrid = options.tileGrid !== undefined ? options.tileGrid : null;\n\n  /**\n   * @protected\n   * @type {module:ol/TileCache}\n   */\n  this.tileCache = new TileCache(options.cacheSize);\n\n  /**\n   * @protected\n   * @type {module:ol/size~Size}\n   */\n  this.tmpSize = [0, 0];\n\n  /**\n   * @private\n   * @type {string}\n   */\n  this.key_ = '';\n\n  /**\n   * @protected\n   * @type {module:ol/Tile~Options}\n   */\n  this.tileOptions = {transition: options.transition};\n\n};\n\ninherits(TileSource, Source);\n\n\n/**\n * @return {boolean} Can expire cache.\n */\nTileSource.prototype.canExpireCache = function() {\n  return this.tileCache.canExpireCache();\n};\n\n\n/**\n * @param {module:ol/proj/Projection} projection Projection.\n * @param {!Object.<string, module:ol/TileRange>} usedTiles Used tiles.\n */\nTileSource.prototype.expireCache = function(projection, usedTiles) {\n  const tileCache = this.getTileCacheForProjection(projection);\n  if (tileCache) {\n    tileCache.expireCache(usedTiles);\n  }\n};\n\n\n/**\n * @param {module:ol/proj/Projection} projection Projection.\n * @param {number} z Zoom level.\n * @param {module:ol/TileRange} tileRange Tile range.\n * @param {function(module:ol/Tile):(boolean|undefined)} callback Called with each\n *     loaded tile.  If the callback returns `false`, the tile will not be\n *     considered loaded.\n * @return {boolean} The tile range is fully covered with loaded tiles.\n */\nTileSource.prototype.forEachLoadedTile = function(projection, z, tileRange, callback) {\n  const tileCache = this.getTileCacheForProjection(projection);\n  if (!tileCache) {\n    return false;\n  }\n\n  let covered = true;\n  let tile, tileCoordKey, loaded;\n  for (let x = tileRange.minX; x <= tileRange.maxX; ++x) {\n    for (let y = tileRange.minY; y <= tileRange.maxY; ++y) {\n      tileCoordKey = getKeyZXY(z, x, y);\n      loaded = false;\n      if (tileCache.containsKey(tileCoordKey)) {\n        tile = /** @type {!module:ol/Tile} */ (tileCache.get(tileCoordKey));\n        loaded = tile.getState() === TileState.LOADED;\n        if (loaded) {\n          loaded = (callback(tile) !== false);\n        }\n      }\n      if (!loaded) {\n        covered = false;\n      }\n    }\n  }\n  return covered;\n};\n\n\n/**\n * @param {module:ol/proj/Projection} projection Projection.\n * @return {number} Gutter.\n */\nTileSource.prototype.getGutter = function(projection) {\n  return 0;\n};\n\n\n/**\n * Return the key to be used for all tiles in the source.\n * @return {string} The key for all tiles.\n * @protected\n */\nTileSource.prototype.getKey = function() {\n  return this.key_;\n};\n\n\n/**\n * Set the value to be used as the key for all tiles in the source.\n * @param {string} key The key for tiles.\n * @protected\n */\nTileSource.prototype.setKey = function(key) {\n  if (this.key_ !== key) {\n    this.key_ = key;\n    this.changed();\n  }\n};\n\n\n/**\n * @param {module:ol/proj/Projection} projection Projection.\n * @return {boolean} Opaque.\n */\nTileSource.prototype.getOpaque = function(projection) {\n  return this.opaque_;\n};\n\n\n/**\n * @inheritDoc\n */\nTileSource.prototype.getResolutions = function() {\n  return this.tileGrid.getResolutions();\n};\n\n\n/**\n * @abstract\n * @param {number} z Tile coordinate z.\n * @param {number} x Tile coordinate x.\n * @param {number} y Tile coordinate y.\n * @param {number} pixelRatio Pixel ratio.\n * @param {module:ol/proj/Projection} projection Projection.\n * @return {!module:ol/Tile} Tile.\n */\nTileSource.prototype.getTile = function(z, x, y, pixelRatio, projection) {};\n\n\n/**\n * Return the tile grid of the tile source.\n * @return {module:ol/tilegrid/TileGrid} Tile grid.\n * @api\n */\nTileSource.prototype.getTileGrid = function() {\n  return this.tileGrid;\n};\n\n\n/**\n * @param {module:ol/proj/Projection} projection Projection.\n * @return {!module:ol/tilegrid/TileGrid} Tile grid.\n */\nTileSource.prototype.getTileGridForProjection = function(projection) {\n  if (!this.tileGrid) {\n    return getTileGridForProjection(projection);\n  } else {\n    return this.tileGrid;\n  }\n};\n\n\n/**\n * @param {module:ol/proj/Projection} projection Projection.\n * @return {module:ol/TileCache} Tile cache.\n * @protected\n */\nTileSource.prototype.getTileCacheForProjection = function(projection) {\n  const thisProj = this.getProjection();\n  if (thisProj && !equivalent(thisProj, projection)) {\n    return null;\n  } else {\n    return this.tileCache;\n  }\n};\n\n\n/**\n * Get the tile pixel ratio for this source. Subclasses may override this\n * method, which is meant to return a supported pixel ratio that matches the\n * provided `pixelRatio` as close as possible.\n * @param {number} pixelRatio Pixel ratio.\n * @return {number} Tile pixel ratio.\n */\nTileSource.prototype.getTilePixelRatio = function(pixelRatio) {\n  return this.tilePixelRatio_;\n};\n\n\n/**\n * @param {number} z Z.\n * @param {number} pixelRatio Pixel ratio.\n * @param {module:ol/proj/Projection} projection Projection.\n * @return {module:ol/size~Size} Tile size.\n */\nTileSource.prototype.getTilePixelSize = function(z, pixelRatio, projection) {\n  const tileGrid = this.getTileGridForProjection(projection);\n  const tilePixelRatio = this.getTilePixelRatio(pixelRatio);\n  const tileSize = toSize(tileGrid.getTileSize(z), this.tmpSize);\n  if (tilePixelRatio == 1) {\n    return tileSize;\n  } else {\n    return scaleSize(tileSize, tilePixelRatio, this.tmpSize);\n  }\n};\n\n\n/**\n * Returns a tile coordinate wrapped around the x-axis. When the tile coordinate\n * is outside the resolution and extent range of the tile grid, `null` will be\n * returned.\n * @param {module:ol/tilecoord~TileCoord} tileCoord Tile coordinate.\n * @param {module:ol/proj/Projection=} opt_projection Projection.\n * @return {module:ol/tilecoord~TileCoord} Tile coordinate to be passed to the tileUrlFunction or\n *     null if no tile URL should be created for the passed `tileCoord`.\n */\nTileSource.prototype.getTileCoordForTileUrlFunction = function(tileCoord, opt_projection) {\n  const projection = opt_projection !== undefined ?\n    opt_projection : this.getProjection();\n  const tileGrid = this.getTileGridForProjection(projection);\n  if (this.getWrapX() && projection.isGlobal()) {\n    tileCoord = wrapX(tileGrid, tileCoord, projection);\n  }\n  return withinExtentAndZ(tileCoord, tileGrid) ? tileCoord : null;\n};\n\n\n/**\n * @inheritDoc\n */\nTileSource.prototype.refresh = function() {\n  this.tileCache.clear();\n  this.changed();\n};\n\n\n/**\n * Marks a tile coord as being used, without triggering a load.\n * @param {number} z Tile coordinate z.\n * @param {number} x Tile coordinate x.\n * @param {number} y Tile coordinate y.\n * @param {module:ol/proj/Projection} projection Projection.\n */\nTileSource.prototype.useTile = UNDEFINED;\n\n\n/**\n * @classdesc\n * Events emitted by {@link module:ol/source/Tile~TileSource} instances are instances of this\n * type.\n *\n * @constructor\n * @extends {module:ol/events/Event}\n * @param {string} type Type.\n * @param {module:ol/Tile} tile The tile.\n */\nexport const TileSourceEvent = function(type, tile) {\n\n  Event.call(this, type);\n\n  /**\n   * The tile related to the event.\n   * @type {module:ol/Tile}\n   * @api\n   */\n  this.tile = tile;\n\n};\ninherits(TileSourceEvent, Event);\n\nexport default TileSource;\n","/**\n * @module ol/render/VectorContext\n */\n/**\n * Context for drawing geometries.  A vector context is available on render\n * events and does not need to be constructed directly.\n * @constructor\n * @abstract\n * @struct\n * @api\n */\nconst VectorContext = function() {\n};\n\n\n/**\n * Render a geometry with a custom renderer.\n *\n * @param {module:ol/geom/SimpleGeometry} geometry Geometry.\n * @param {module:ol/Feature|module:ol/render/Feature} feature Feature.\n * @param {Function} renderer Renderer.\n */\nVectorContext.prototype.drawCustom = function(geometry, feature, renderer) {};\n\n\n/**\n * Render a geometry.\n *\n * @param {module:ol/geom/Geometry} geometry The geometry to render.\n */\nVectorContext.prototype.drawGeometry = function(geometry) {};\n\n\n/**\n * Set the rendering style.\n *\n * @param {module:ol/style/Style} style The rendering style.\n */\nVectorContext.prototype.setStyle = function(style) {};\n\n\n/**\n * @param {module:ol/geom/Circle} circleGeometry Circle geometry.\n * @param {module:ol/Feature} feature Feature.\n */\nVectorContext.prototype.drawCircle = function(circleGeometry, feature) {};\n\n\n/**\n * @param {module:ol/Feature} feature Feature.\n * @param {module:ol/style/Style} style Style.\n */\nVectorContext.prototype.drawFeature = function(feature, style) {};\n\n\n/**\n * @param {module:ol/geom/GeometryCollection} geometryCollectionGeometry Geometry\n *     collection.\n * @param {module:ol/Feature} feature Feature.\n */\nVectorContext.prototype.drawGeometryCollection = function(geometryCollectionGeometry, feature) {};\n\n\n/**\n * @param {module:ol/geom/LineString|module:ol/render/Feature} lineStringGeometry Line string geometry.\n * @param {module:ol/Feature|module:ol/render/Feature} feature Feature.\n */\nVectorContext.prototype.drawLineString = function(lineStringGeometry, feature) {};\n\n\n/**\n * @param {module:ol/geom/MultiLineString|module:ol/render/Feature} multiLineStringGeometry MultiLineString geometry.\n * @param {module:ol/Feature|module:ol/render/Feature} feature Feature.\n */\nVectorContext.prototype.drawMultiLineString = function(multiLineStringGeometry, feature) {};\n\n\n/**\n * @param {module:ol/geom/MultiPoint|module:ol/render/Feature} multiPointGeometry MultiPoint geometry.\n * @param {module:ol/Feature|module:ol/render/Feature} feature Feature.\n */\nVectorContext.prototype.drawMultiPoint = function(multiPointGeometry, feature) {};\n\n\n/**\n * @param {module:ol/geom/MultiPolygon} multiPolygonGeometry MultiPolygon geometry.\n * @param {module:ol/Feature|module:ol/render/Feature} feature Feature.\n */\nVectorContext.prototype.drawMultiPolygon = function(multiPolygonGeometry, feature) {};\n\n\n/**\n * @param {module:ol/geom/Point|module:ol/render/Feature} pointGeometry Point geometry.\n * @param {module:ol/Feature|module:ol/render/Feature} feature Feature.\n */\nVectorContext.prototype.drawPoint = function(pointGeometry, feature) {};\n\n\n/**\n * @param {module:ol/geom/Polygon|module:ol/render/Feature} polygonGeometry Polygon geometry.\n * @param {module:ol/Feature|module:ol/render/Feature} feature Feature.\n */\nVectorContext.prototype.drawPolygon = function(polygonGeometry, feature) {};\n\n\n/**\n * @param {module:ol/geom/Geometry|module:ol/render/Feature} geometry Geometry.\n * @param {module:ol/Feature|module:ol/render/Feature} feature Feature.\n */\nVectorContext.prototype.drawText = function(geometry, feature) {};\n\n\n/**\n * @param {module:ol/style/Fill} fillStyle Fill style.\n * @param {module:ol/style/Stroke} strokeStyle Stroke style.\n */\nVectorContext.prototype.setFillStrokeStyle = function(fillStyle, strokeStyle) {};\n\n\n/**\n * @param {module:ol/style/Image} imageStyle Image style.\n * @param {module:ol/render/canvas~DeclutterGroup=} opt_declutterGroup Declutter.\n */\nVectorContext.prototype.setImageStyle = function(imageStyle, opt_declutterGroup) {};\n\n\n/**\n * @param {module:ol/style/Text} textStyle Text style.\n * @param {module:ol/render/canvas~DeclutterGroup=} opt_declutterGroup Declutter.\n */\nVectorContext.prototype.setTextStyle = function(textStyle, opt_declutterGroup) {};\nexport default VectorContext;\n","/**\n * @module ol/pointer/EventSource\n */\n/**\n * @param {module:ol/pointer/PointerEventHandler} dispatcher Event handler.\n * @param {!Object.<string, function(Event)>} mapping Event mapping.\n * @constructor\n */\nconst EventSource = function(dispatcher, mapping) {\n  /**\n   * @type {module:ol/pointer/PointerEventHandler}\n   */\n  this.dispatcher = dispatcher;\n\n  /**\n   * @private\n   * @const\n   * @type {!Object.<string, function(Event)>}\n   */\n  this.mapping_ = mapping;\n};\n\n\n/**\n * List of events supported by this source.\n * @return {Array.<string>} Event names\n */\nEventSource.prototype.getEvents = function() {\n  return Object.keys(this.mapping_);\n};\n\n\n/**\n * Returns the handler that should handle a given event type.\n * @param {string} eventType The event type.\n * @return {function(Event)} Handler\n */\nEventSource.prototype.getHandlerForEvent = function(eventType) {\n  return this.mapping_[eventType];\n};\nexport default EventSource;\n","/**\n * @module ol/rotationconstraint\n */\nimport {toRadians} from './math.js';\n\n\n/**\n * @typedef {function((number|undefined), number): (number|undefined)} Type\n */\n\n\n/**\n * @param {number|undefined} rotation Rotation.\n * @param {number} delta Delta.\n * @return {number|undefined} Rotation.\n */\nexport function disable(rotation, delta) {\n  if (rotation !== undefined) {\n    return 0;\n  } else {\n    return undefined;\n  }\n}\n\n\n/**\n * @param {number|undefined} rotation Rotation.\n * @param {number} delta Delta.\n * @return {number|undefined} Rotation.\n */\nexport function none(rotation, delta) {\n  if (rotation !== undefined) {\n    return rotation + delta;\n  } else {\n    return undefined;\n  }\n}\n\n\n/**\n * @param {number} n N.\n * @return {module:ol/rotationconstraint~Type} Rotation constraint.\n */\nexport function createSnapToN(n) {\n  const theta = 2 * Math.PI / n;\n  return (\n    /**\n     * @param {number|undefined} rotation Rotation.\n     * @param {number} delta Delta.\n     * @return {number|undefined} Rotation.\n     */\n    function(rotation, delta) {\n      if (rotation !== undefined) {\n        rotation = Math.floor((rotation + delta) / theta + 0.5) * theta;\n        return rotation;\n      } else {\n        return undefined;\n      }\n    });\n}\n\n\n/**\n * @param {number=} opt_tolerance Tolerance.\n * @return {module:ol/rotationconstraint~Type} Rotation constraint.\n */\nexport function createSnapToZero(opt_tolerance) {\n  const tolerance = opt_tolerance || toRadians(5);\n  return (\n    /**\n     * @param {number|undefined} rotation Rotation.\n     * @param {number} delta Delta.\n     * @return {number|undefined} Rotation.\n     */\n    function(rotation, delta) {\n      if (rotation !== undefined) {\n        if (Math.abs(rotation + delta) <= tolerance) {\n          return 0;\n        } else {\n          return rotation + delta;\n        }\n      } else {\n        return undefined;\n      }\n    });\n}\n","/**\n * @module ol/renderer/canvas/TileLayer\n */\nimport {getUid, inherits} from '../../util.js';\nimport LayerType from '../../LayerType.js';\nimport TileRange from '../../TileRange.js';\nimport TileState from '../../TileState.js';\nimport ViewHint from '../../ViewHint.js';\nimport {createCanvasContext2D} from '../../dom.js';\nimport {containsExtent, createEmpty, equals, getIntersection, isEmpty} from '../../extent.js';\nimport IntermediateCanvasRenderer from '../canvas/IntermediateCanvas.js';\nimport {create as createTransform, compose as composeTransform} from '../../transform.js';\n\n/**\n * @constructor\n * @extends {module:ol/renderer/canvas/IntermediateCanvas}\n * @param {module:ol/layer/Tile|module:ol/layer/VectorTile} tileLayer Tile layer.\n * @api\n */\nconst CanvasTileLayerRenderer = function(tileLayer) {\n\n  IntermediateCanvasRenderer.call(this, tileLayer);\n\n  /**\n   * @protected\n   * @type {CanvasRenderingContext2D}\n   */\n  this.context = this.context === null ? null : createCanvasContext2D();\n\n  /**\n   * @private\n   * @type {number}\n   */\n  this.oversampling_;\n\n  /**\n   * @private\n   * @type {module:ol/extent~Extent}\n   */\n  this.renderedExtent_ = null;\n\n  /**\n   * @protected\n   * @type {number}\n   */\n  this.renderedRevision;\n\n  /**\n   * @protected\n   * @type {!Array.<module:ol/Tile>}\n   */\n  this.renderedTiles = [];\n\n  /**\n   * @private\n   * @type {boolean}\n   */\n  this.newTiles_ = false;\n\n  /**\n   * @protected\n   * @type {module:ol/extent~Extent}\n   */\n  this.tmpExtent = createEmpty();\n\n  /**\n   * @private\n   * @type {module:ol/TileRange}\n   */\n  this.tmpTileRange_ = new TileRange(0, 0, 0, 0);\n\n  /**\n   * @private\n   * @type {module:ol/transform~Transform}\n   */\n  this.imageTransform_ = createTransform();\n\n  /**\n   * @protected\n   * @type {number}\n   */\n  this.zDirection = 0;\n\n};\n\ninherits(CanvasTileLayerRenderer, IntermediateCanvasRenderer);\n\n\n/**\n * Determine if this renderer handles the provided layer.\n * @param {module:ol/layer/Layer} layer The candidate layer.\n * @return {boolean} The renderer can render the layer.\n */\nCanvasTileLayerRenderer['handles'] = function(layer) {\n  return layer.getType() === LayerType.TILE;\n};\n\n\n/**\n * Create a layer renderer.\n * @param {module:ol/renderer/Map} mapRenderer The map renderer.\n * @param {module:ol/layer/Layer} layer The layer to be rendererd.\n * @return {module:ol/renderer/canvas/TileLayer} The layer renderer.\n */\nCanvasTileLayerRenderer['create'] = function(mapRenderer, layer) {\n  return new CanvasTileLayerRenderer(/** @type {module:ol/layer/Tile} */ (layer));\n};\n\n\n/**\n * @private\n * @param {module:ol/Tile} tile Tile.\n * @return {boolean} Tile is drawable.\n */\nCanvasTileLayerRenderer.prototype.isDrawableTile_ = function(tile) {\n  const tileState = tile.getState();\n  const useInterimTilesOnError = this.getLayer().getUseInterimTilesOnError();\n  return tileState == TileState.LOADED ||\n      tileState == TileState.EMPTY ||\n      tileState == TileState.ERROR && !useInterimTilesOnError;\n};\n\n\n/**\n * @param {number} z Tile coordinate z.\n * @param {number} x Tile coordinate x.\n * @param {number} y Tile coordinate y.\n * @param {number} pixelRatio Pixel ratio.\n * @param {module:ol/proj/Projection} projection Projection.\n * @return {!module:ol/Tile} Tile.\n */\nCanvasTileLayerRenderer.prototype.getTile = function(z, x, y, pixelRatio, projection) {\n  const layer = this.getLayer();\n  const source = /** @type {module:ol/source/Tile} */ (layer.getSource());\n  let tile = source.getTile(z, x, y, pixelRatio, projection);\n  if (tile.getState() == TileState.ERROR) {\n    if (!layer.getUseInterimTilesOnError()) {\n      // When useInterimTilesOnError is false, we consider the error tile as loaded.\n      tile.setState(TileState.LOADED);\n    } else if (layer.getPreload() > 0) {\n      // Preloaded tiles for lower resolutions might have finished loading.\n      this.newTiles_ = true;\n    }\n  }\n  if (!this.isDrawableTile_(tile)) {\n    tile = tile.getInterimTile();\n  }\n  return tile;\n};\n\n/**\n * @inheritDoc\n */\nCanvasTileLayerRenderer.prototype.prepareFrame = function(frameState, layerState) {\n\n  const pixelRatio = frameState.pixelRatio;\n  const size = frameState.size;\n  const viewState = frameState.viewState;\n  const projection = viewState.projection;\n  const viewResolution = viewState.resolution;\n  const viewCenter = viewState.center;\n\n  const tileLayer = this.getLayer();\n  const tileSource = /** @type {module:ol/source/Tile} */ (tileLayer.getSource());\n  const sourceRevision = tileSource.getRevision();\n  const tileGrid = tileSource.getTileGridForProjection(projection);\n  const z = tileGrid.getZForResolution(viewResolution, this.zDirection);\n  const tileResolution = tileGrid.getResolution(z);\n  let oversampling = Math.round(viewResolution / tileResolution) || 1;\n  let extent = frameState.extent;\n\n  if (layerState.extent !== undefined) {\n    extent = getIntersection(extent, layerState.extent);\n  }\n  if (isEmpty(extent)) {\n    // Return false to prevent the rendering of the layer.\n    return false;\n  }\n\n  const tileRange = tileGrid.getTileRangeForExtentAndZ(extent, z);\n  const imageExtent = tileGrid.getTileRangeExtent(z, tileRange);\n\n  const tilePixelRatio = tileSource.getTilePixelRatio(pixelRatio);\n\n  /**\n   * @type {Object.<number, Object.<string, module:ol/Tile>>}\n   */\n  const tilesToDrawByZ = {};\n  tilesToDrawByZ[z] = {};\n\n  const findLoadedTiles = this.createLoadedTileFinder(\n    tileSource, projection, tilesToDrawByZ);\n\n  const hints = frameState.viewHints;\n  const animatingOrInteracting = hints[ViewHint.ANIMATING] || hints[ViewHint.INTERACTING];\n\n  const tmpExtent = this.tmpExtent;\n  const tmpTileRange = this.tmpTileRange_;\n  this.newTiles_ = false;\n  let tile, x, y;\n  for (x = tileRange.minX; x <= tileRange.maxX; ++x) {\n    for (y = tileRange.minY; y <= tileRange.maxY; ++y) {\n      if (Date.now() - frameState.time > 16 && animatingOrInteracting) {\n        continue;\n      }\n      tile = this.getTile(z, x, y, pixelRatio, projection);\n      if (this.isDrawableTile_(tile)) {\n        const uid = getUid(this);\n        if (tile.getState() == TileState.LOADED) {\n          tilesToDrawByZ[z][tile.tileCoord.toString()] = tile;\n          const inTransition = tile.inTransition(uid);\n          if (!this.newTiles_ && (inTransition || this.renderedTiles.indexOf(tile) === -1)) {\n            this.newTiles_ = true;\n          }\n        }\n        if (tile.getAlpha(uid, frameState.time) === 1) {\n          // don't look for alt tiles if alpha is 1\n          continue;\n        }\n      }\n\n      const childTileRange = tileGrid.getTileCoordChildTileRange(\n        tile.tileCoord, tmpTileRange, tmpExtent);\n      let covered = false;\n      if (childTileRange) {\n        covered = findLoadedTiles(z + 1, childTileRange);\n      }\n      if (!covered) {\n        tileGrid.forEachTileCoordParentTileRange(\n          tile.tileCoord, findLoadedTiles, null, tmpTileRange, tmpExtent);\n      }\n\n    }\n  }\n\n  const renderedResolution = tileResolution * pixelRatio / tilePixelRatio * oversampling;\n  if (!(this.renderedResolution && Date.now() - frameState.time > 16 && animatingOrInteracting) && (\n    this.newTiles_ ||\n        !(this.renderedExtent_ && containsExtent(this.renderedExtent_, extent)) ||\n        this.renderedRevision != sourceRevision ||\n        oversampling != this.oversampling_ ||\n        !animatingOrInteracting && renderedResolution != this.renderedResolution\n  )) {\n\n    const context = this.context;\n    if (context) {\n      const tilePixelSize = tileSource.getTilePixelSize(z, pixelRatio, projection);\n      const width = Math.round(tileRange.getWidth() * tilePixelSize[0] / oversampling);\n      const height = Math.round(tileRange.getHeight() * tilePixelSize[1] / oversampling);\n      const canvas = context.canvas;\n      if (canvas.width != width || canvas.height != height) {\n        this.oversampling_ = oversampling;\n        canvas.width = width;\n        canvas.height = height;\n      } else {\n        if (this.renderedExtent_ && !equals(imageExtent, this.renderedExtent_)) {\n          context.clearRect(0, 0, width, height);\n        }\n        oversampling = this.oversampling_;\n      }\n    }\n\n    this.renderedTiles.length = 0;\n    /** @type {Array.<number>} */\n    const zs = Object.keys(tilesToDrawByZ).map(Number);\n    zs.sort(function(a, b) {\n      if (a === z) {\n        return 1;\n      } else if (b === z) {\n        return -1;\n      } else {\n        return a > b ? 1 : a < b ? -1 : 0;\n      }\n    });\n    let currentResolution, currentScale, currentTilePixelSize, currentZ, i, ii;\n    let tileExtent, tileGutter, tilesToDraw, w, h;\n    for (i = 0, ii = zs.length; i < ii; ++i) {\n      currentZ = zs[i];\n      currentTilePixelSize = tileSource.getTilePixelSize(currentZ, pixelRatio, projection);\n      currentResolution = tileGrid.getResolution(currentZ);\n      currentScale = currentResolution / tileResolution;\n      tileGutter = tilePixelRatio * tileSource.getGutter(projection);\n      tilesToDraw = tilesToDrawByZ[currentZ];\n      for (const tileCoordKey in tilesToDraw) {\n        tile = tilesToDraw[tileCoordKey];\n        tileExtent = tileGrid.getTileCoordExtent(tile.getTileCoord(), tmpExtent);\n        x = (tileExtent[0] - imageExtent[0]) / tileResolution * tilePixelRatio / oversampling;\n        y = (imageExtent[3] - tileExtent[3]) / tileResolution * tilePixelRatio / oversampling;\n        w = currentTilePixelSize[0] * currentScale / oversampling;\n        h = currentTilePixelSize[1] * currentScale / oversampling;\n        this.drawTileImage(tile, frameState, layerState, x, y, w, h, tileGutter, z === currentZ);\n        this.renderedTiles.push(tile);\n      }\n    }\n\n    this.renderedRevision = sourceRevision;\n    this.renderedResolution = tileResolution * pixelRatio / tilePixelRatio * oversampling;\n    this.renderedExtent_ = imageExtent;\n  }\n\n  const scale = this.renderedResolution / viewResolution;\n  const transform = composeTransform(this.imageTransform_,\n    pixelRatio * size[0] / 2, pixelRatio * size[1] / 2,\n    scale, scale,\n    0,\n    (this.renderedExtent_[0] - viewCenter[0]) / this.renderedResolution * pixelRatio,\n    (viewCenter[1] - this.renderedExtent_[3]) / this.renderedResolution * pixelRatio);\n  composeTransform(this.coordinateToCanvasPixelTransform,\n    pixelRatio * size[0] / 2 - transform[4], pixelRatio * size[1] / 2 - transform[5],\n    pixelRatio / viewResolution, -pixelRatio / viewResolution,\n    0,\n    -viewCenter[0], -viewCenter[1]);\n\n\n  this.updateUsedTiles(frameState.usedTiles, tileSource, z, tileRange);\n  this.manageTilePyramid(frameState, tileSource, tileGrid, pixelRatio,\n    projection, extent, z, tileLayer.getPreload());\n  this.scheduleExpireCache(frameState, tileSource);\n\n  return this.renderedTiles.length > 0;\n};\n\n\n/**\n * @param {module:ol/Tile} tile Tile.\n * @param {module:ol/PluggableMap~FrameState} frameState Frame state.\n * @param {module:ol/layer/Layer~State} layerState Layer state.\n * @param {number} x Left of the tile.\n * @param {number} y Top of the tile.\n * @param {number} w Width of the tile.\n * @param {number} h Height of the tile.\n * @param {number} gutter Tile gutter.\n * @param {boolean} transition Apply an alpha transition.\n */\nCanvasTileLayerRenderer.prototype.drawTileImage = function(tile, frameState, layerState, x, y, w, h, gutter, transition) {\n  const image = tile.getImage(this.getLayer());\n  if (!image) {\n    return;\n  }\n  const uid = getUid(this);\n  const alpha = transition ? tile.getAlpha(uid, frameState.time) : 1;\n  if (alpha === 1 && !this.getLayer().getSource().getOpaque(frameState.viewState.projection)) {\n    this.context.clearRect(x, y, w, h);\n  }\n  const alphaChanged = alpha !== this.context.globalAlpha;\n  if (alphaChanged) {\n    this.context.save();\n    this.context.globalAlpha = alpha;\n  }\n  this.context.drawImage(image, gutter, gutter,\n    image.width - 2 * gutter, image.height - 2 * gutter, x, y, w, h);\n\n  if (alphaChanged) {\n    this.context.restore();\n  }\n  if (alpha !== 1) {\n    frameState.animate = true;\n  } else if (transition) {\n    tile.endTransition(uid);\n  }\n};\n\n\n/**\n * @inheritDoc\n */\nCanvasTileLayerRenderer.prototype.getImage = function() {\n  const context = this.context;\n  return context ? context.canvas : null;\n};\n\n\n/**\n * @function\n * @return {module:ol/layer/Tile|module:ol/layer/VectorTile}\n */\nCanvasTileLayerRenderer.prototype.getLayer;\n\n\n/**\n * @inheritDoc\n */\nCanvasTileLayerRenderer.prototype.getImageTransform = function() {\n  return this.imageTransform_;\n};\nexport default CanvasTileLayerRenderer;\n","/**\n * @module ol/layer/VectorTileRenderType\n */\n\n/**\n * @enum {string}\n * Render mode for vector tiles:\n *  * `'image'`: Vector tiles are rendered as images. Great performance, but\n *    point symbols and texts are always rotated with the view and pixels are\n *    scaled during zoom animations.\n *  * `'hybrid'`: Polygon and line elements are rendered as images, so pixels\n *    are scaled during zoom animations. Point symbols and texts are accurately\n *    rendered as vectors and can stay upright on rotated views.\n *  * `'vector'`: Vector tiles are rendered as vectors. Most accurate rendering\n *    even during animations, but slower performance than the other options.\n * @api\n */\nexport default {\n  IMAGE: 'image',\n  HYBRID: 'hybrid',\n  VECTOR: 'vector'\n};\n","/**\n * @module ol/source/ImageWMS\n */\n\nimport {DEFAULT_WMS_VERSION} from './common.js';\nimport {inherits} from '../util.js';\nimport ImageWrapper from '../Image.js';\nimport {assert} from '../asserts.js';\nimport {listen} from '../events.js';\nimport EventType from '../events/EventType.js';\nimport {containsExtent, getCenter, getForViewAndSize, getHeight, getWidth} from '../extent.js';\nimport {assign} from '../obj.js';\nimport {get as getProjection, transform} from '../proj.js';\nimport {calculateSourceResolution} from '../reproj.js';\nimport ImageSource, {defaultImageLoadFunction} from '../source/Image.js';\nimport WMSServerType from '../source/WMSServerType.js';\nimport {compareVersions} from '../string.js';\nimport {appendParams} from '../uri.js';\n\n/**\n * @typedef {Object} Options\n * @property {module:ol/source/Source~AttributionLike} [attributions] Attributions.\n * @property {null|string} [crossOrigin] The `crossOrigin` attribute for loaded images.  Note that\n * you must provide a `crossOrigin` value if you are using the WebGL renderer or if you want to\n * access pixel data with the Canvas renderer.  See\n * {@link https://developer.mozilla.org/en-US/docs/Web/HTML/CORS_enabled_image} for more detail.\n * @property {boolean} [hidpi=true] Use the `ol/Map#pixelRatio` value when requesting\n * the image from the remote server.\n * @property {module:ol/source/WMSServerType|string} [serverType] The type of\n * the remote WMS server: `mapserver`, `geoserver` or `qgis`. Only needed if `hidpi` is `true`.\n * @property {module:ol/Image~LoadFunction} [imageLoadFunction] Optional function to load an image given a URL.\n * @property {Object.<string,*>} params WMS request parameters.\n * At least a `LAYERS` param is required. `STYLES` is\n * `''` by default. `VERSION` is `1.3.0` by default. `WIDTH`, `HEIGHT`, `BBOX`\n * and `CRS` (`SRS` for WMS version < 1.3.0) will be set dynamically.\n * @property {module:ol/proj~ProjectionLike} projection Projection.\n * @property {number} [ratio=1.5] Ratio. `1` means image requests are the size of the map viewport, `2` means\n * twice the width and height of the map viewport, and so on. Must be `1` or\n * higher.\n * @property {Array.<number>} [resolutions] Resolutions.\n * If specified, requests will be made for these resolutions only.\n * @property {string} url WMS service URL.\n */\n\n\n/**\n * @classdesc\n * Source for WMS servers providing single, untiled images.\n *\n * @constructor\n * @fires ol/source/Image~ImageSourceEvent\n * @extends {module:ol/source/Image}\n * @param {module:ol/source/ImageWMS~Options=} [opt_options] ImageWMS options.\n * @api\n */\nconst ImageWMS = function(opt_options) {\n\n  const options = opt_options || {};\n\n  ImageSource.call(this, {\n    attributions: options.attributions,\n    projection: options.projection,\n    resolutions: options.resolutions\n  });\n\n  /**\n   * @private\n   * @type {?string}\n   */\n  this.crossOrigin_ =\n      options.crossOrigin !== undefined ? options.crossOrigin : null;\n\n  /**\n   * @private\n   * @type {string|undefined}\n   */\n  this.url_ = options.url;\n\n  /**\n   * @private\n   * @type {module:ol/Image~LoadFunction}\n   */\n  this.imageLoadFunction_ = options.imageLoadFunction !== undefined ?\n    options.imageLoadFunction : defaultImageLoadFunction;\n\n  /**\n   * @private\n   * @type {!Object}\n   */\n  this.params_ = options.params || {};\n\n  /**\n   * @private\n   * @type {boolean}\n   */\n  this.v13_ = true;\n  this.updateV13_();\n\n  /**\n   * @private\n   * @type {module:ol/source/WMSServerType|undefined}\n   */\n  this.serverType_ = /** @type {module:ol/source/WMSServerType|undefined} */ (options.serverType);\n\n  /**\n   * @private\n   * @type {boolean}\n   */\n  this.hidpi_ = options.hidpi !== undefined ? options.hidpi : true;\n\n  /**\n   * @private\n   * @type {module:ol/Image}\n   */\n  this.image_ = null;\n\n  /**\n   * @private\n   * @type {module:ol/size~Size}\n   */\n  this.imageSize_ = [0, 0];\n\n  /**\n   * @private\n   * @type {number}\n   */\n  this.renderedRevision_ = 0;\n\n  /**\n   * @private\n   * @type {number}\n   */\n  this.ratio_ = options.ratio !== undefined ? options.ratio : 1.5;\n\n};\n\ninherits(ImageWMS, ImageSource);\n\n\n/**\n * @const\n * @type {module:ol/size~Size}\n */\nconst GETFEATUREINFO_IMAGE_SIZE = [101, 101];\n\n\n/**\n * Return the GetFeatureInfo URL for the passed coordinate, resolution, and\n * projection. Return `undefined` if the GetFeatureInfo URL cannot be\n * constructed.\n * @param {module:ol/coordinate~Coordinate} coordinate Coordinate.\n * @param {number} resolution Resolution.\n * @param {module:ol/proj~ProjectionLike} projection Projection.\n * @param {!Object} params GetFeatureInfo params. `INFO_FORMAT` at least should\n *     be provided. If `QUERY_LAYERS` is not provided then the layers specified\n *     in the `LAYERS` parameter will be used. `VERSION` should not be\n *     specified here.\n * @return {string|undefined} GetFeatureInfo URL.\n * @api\n */\nImageWMS.prototype.getGetFeatureInfoUrl = function(coordinate, resolution, projection, params) {\n  if (this.url_ === undefined) {\n    return undefined;\n  }\n  const projectionObj = getProjection(projection);\n  const sourceProjectionObj = this.getProjection();\n\n  if (sourceProjectionObj && sourceProjectionObj !== projectionObj) {\n    resolution = calculateSourceResolution(sourceProjectionObj, projectionObj, coordinate, resolution);\n    coordinate = transform(coordinate, projectionObj, sourceProjectionObj);\n  }\n\n  const extent = getForViewAndSize(coordinate, resolution, 0,\n    GETFEATUREINFO_IMAGE_SIZE);\n\n  const baseParams = {\n    'SERVICE': 'WMS',\n    'VERSION': DEFAULT_WMS_VERSION,\n    'REQUEST': 'GetFeatureInfo',\n    'FORMAT': 'image/png',\n    'TRANSPARENT': true,\n    'QUERY_LAYERS': this.params_['LAYERS']\n  };\n  assign(baseParams, this.params_, params);\n\n  const x = Math.floor((coordinate[0] - extent[0]) / resolution);\n  const y = Math.floor((extent[3] - coordinate[1]) / resolution);\n  baseParams[this.v13_ ? 'I' : 'X'] = x;\n  baseParams[this.v13_ ? 'J' : 'Y'] = y;\n\n  return this.getRequestUrl_(\n    extent, GETFEATUREINFO_IMAGE_SIZE,\n    1, sourceProjectionObj || projectionObj, baseParams);\n};\n\n\n/**\n * Get the user-provided params, i.e. those passed to the constructor through\n * the \"params\" option, and possibly updated using the updateParams method.\n * @return {Object} Params.\n * @api\n */\nImageWMS.prototype.getParams = function() {\n  return this.params_;\n};\n\n\n/**\n * @inheritDoc\n */\nImageWMS.prototype.getImageInternal = function(extent, resolution, pixelRatio, projection) {\n\n  if (this.url_ === undefined) {\n    return null;\n  }\n\n  resolution = this.findNearestResolution(resolution);\n\n  if (pixelRatio != 1 && (!this.hidpi_ || this.serverType_ === undefined)) {\n    pixelRatio = 1;\n  }\n\n  const imageResolution = resolution / pixelRatio;\n\n  const center = getCenter(extent);\n  const viewWidth = Math.ceil(getWidth(extent) / imageResolution);\n  const viewHeight = Math.ceil(getHeight(extent) / imageResolution);\n  const viewExtent = getForViewAndSize(center, imageResolution, 0,\n    [viewWidth, viewHeight]);\n  const requestWidth = Math.ceil(this.ratio_ * getWidth(extent) / imageResolution);\n  const requestHeight = Math.ceil(this.ratio_ * getHeight(extent) / imageResolution);\n  const requestExtent = getForViewAndSize(center, imageResolution, 0,\n    [requestWidth, requestHeight]);\n\n  const image = this.image_;\n  if (image &&\n      this.renderedRevision_ == this.getRevision() &&\n      image.getResolution() == resolution &&\n      image.getPixelRatio() == pixelRatio &&\n      containsExtent(image.getExtent(), viewExtent)) {\n    return image;\n  }\n\n  const params = {\n    'SERVICE': 'WMS',\n    'VERSION': DEFAULT_WMS_VERSION,\n    'REQUEST': 'GetMap',\n    'FORMAT': 'image/png',\n    'TRANSPARENT': true\n  };\n  assign(params, this.params_);\n\n  this.imageSize_[0] = Math.round(getWidth(requestExtent) / imageResolution);\n  this.imageSize_[1] = Math.round(getHeight(requestExtent) / imageResolution);\n\n  const url = this.getRequestUrl_(requestExtent, this.imageSize_, pixelRatio,\n    projection, params);\n\n  this.image_ = new ImageWrapper(requestExtent, resolution, pixelRatio,\n    url, this.crossOrigin_, this.imageLoadFunction_);\n\n  this.renderedRevision_ = this.getRevision();\n\n  listen(this.image_, EventType.CHANGE,\n    this.handleImageChange, this);\n\n  return this.image_;\n\n};\n\n\n/**\n * Return the image load function of the source.\n * @return {module:ol/Image~LoadFunction} The image load function.\n * @api\n */\nImageWMS.prototype.getImageLoadFunction = function() {\n  return this.imageLoadFunction_;\n};\n\n\n/**\n * @param {module:ol/extent~Extent} extent Extent.\n * @param {module:ol/size~Size} size Size.\n * @param {number} pixelRatio Pixel ratio.\n * @param {module:ol/proj/Projection} projection Projection.\n * @param {Object} params Params.\n * @return {string} Request URL.\n * @private\n */\nImageWMS.prototype.getRequestUrl_ = function(extent, size, pixelRatio, projection, params) {\n\n  assert(this.url_ !== undefined, 9); // `url` must be configured or set using `#setUrl()`\n\n  params[this.v13_ ? 'CRS' : 'SRS'] = projection.getCode();\n\n  if (!('STYLES' in this.params_)) {\n    params['STYLES'] = '';\n  }\n\n  if (pixelRatio != 1) {\n    switch (this.serverType_) {\n      case WMSServerType.GEOSERVER:\n        const dpi = (90 * pixelRatio + 0.5) | 0;\n        if ('FORMAT_OPTIONS' in params) {\n          params['FORMAT_OPTIONS'] += ';dpi:' + dpi;\n        } else {\n          params['FORMAT_OPTIONS'] = 'dpi:' + dpi;\n        }\n        break;\n      case WMSServerType.MAPSERVER:\n        params['MAP_RESOLUTION'] = 90 * pixelRatio;\n        break;\n      case WMSServerType.CARMENTA_SERVER:\n      case WMSServerType.QGIS:\n        params['DPI'] = 90 * pixelRatio;\n        break;\n      default:\n        assert(false, 8); // Unknown `serverType` configured\n        break;\n    }\n  }\n\n  params['WIDTH'] = size[0];\n  params['HEIGHT'] = size[1];\n\n  const axisOrientation = projection.getAxisOrientation();\n  let bbox;\n  if (this.v13_ && axisOrientation.substr(0, 2) == 'ne') {\n    bbox = [extent[1], extent[0], extent[3], extent[2]];\n  } else {\n    bbox = extent;\n  }\n  params['BBOX'] = bbox.join(',');\n\n  return appendParams(/** @type {string} */ (this.url_), params);\n};\n\n\n/**\n * Return the URL used for this WMS source.\n * @return {string|undefined} URL.\n * @api\n */\nImageWMS.prototype.getUrl = function() {\n  return this.url_;\n};\n\n\n/**\n * Set the image load function of the source.\n * @param {module:ol/Image~LoadFunction} imageLoadFunction Image load function.\n * @api\n */\nImageWMS.prototype.setImageLoadFunction = function(imageLoadFunction) {\n  this.image_ = null;\n  this.imageLoadFunction_ = imageLoadFunction;\n  this.changed();\n};\n\n\n/**\n * Set the URL to use for requests.\n * @param {string|undefined} url URL.\n * @api\n */\nImageWMS.prototype.setUrl = function(url) {\n  if (url != this.url_) {\n    this.url_ = url;\n    this.image_ = null;\n    this.changed();\n  }\n};\n\n\n/**\n * Update the user-provided params.\n * @param {Object} params Params.\n * @api\n */\nImageWMS.prototype.updateParams = function(params) {\n  assign(this.params_, params);\n  this.updateV13_();\n  this.image_ = null;\n  this.changed();\n};\n\n\n/**\n * @private\n */\nImageWMS.prototype.updateV13_ = function() {\n  const version = this.params_['VERSION'] || DEFAULT_WMS_VERSION;\n  this.v13_ = compareVersions(version, '1.3') >= 0;\n};\nexport default ImageWMS;\n","/**\n * @module ol/layer/VectorTile\n */\nimport {inherits} from '../util.js';\nimport LayerType from '../LayerType.js';\nimport {assert} from '../asserts.js';\nimport TileProperty from '../layer/TileProperty.js';\nimport VectorLayer from '../layer/Vector.js';\nimport VectorTileRenderType from '../layer/VectorTileRenderType.js';\nimport {assign} from '../obj.js';\n\n\n/**\n * @enum {string}\n * Render mode for vector tiles:\n *  * `'image'`: Vector tiles are rendered as images. Great performance, but\n *    point symbols and texts are always rotated with the view and pixels are\n *    scaled during zoom animations.\n *  * `'hybrid'`: Polygon and line elements are rendered as images, so pixels\n *    are scaled during zoom animations. Point symbols and texts are accurately\n *    rendered as vectors and can stay upright on rotated views.\n *  * `'vector'`: Vector tiles are rendered as vectors. Most accurate rendering\n *    even during animations, but slower performance than the other options.\n * @api\n */\nexport const RenderType = {\n  IMAGE: 'image',\n  HYBRID: 'hybrid',\n  VECTOR: 'vector'\n};\n\n\n/**\n * @typedef {Object} Options\n * @property {number} [opacity=1] Opacity (0, 1).\n * @property {boolean} [visible=true] Visibility.\n * @property {module:ol/extent~Extent} [extent] The bounding extent for layer rendering.  The layer will not be\n * rendered outside of this extent.\n * @property {number} [zIndex=0] The z-index for layer rendering.  At rendering time, the layers\n * will be ordered, first by Z-index and then by position.\n * @property {number} [minResolution] The minimum resolution (inclusive) at which this layer will be\n * visible.\n * @property {number} [maxResolution] The maximum resolution (exclusive) below which this layer will\n * be visible.\n * @property {module:ol/render~OrderFunction} [renderOrder] Render order. Function to be used when sorting\n * features before rendering. By default features are drawn in the order that they are created. Use\n * `null` to avoid the sort, but get an undefined draw order.\n * @property {number} [renderBuffer=100] The buffer in pixels around the tile extent used by the\n * renderer when getting features from the vector tile for the rendering or hit-detection.\n * Recommended value: Vector tiles are usually generated with a buffer, so this value should match\n * the largest possible buffer of the used tiles. It should be at least the size of the largest\n * point symbol or line width.\n * @property {module:ol/layer/VectorTileRenderType|string} [renderMode='hybrid'] Render mode for vector tiles:\n *  * `'image'`: Vector tiles are rendered as images. Great performance, but point symbols and texts\n *    are always rotated with the view and pixels are scaled during zoom animations.\n *  * `'hybrid'`: Polygon and line elements are rendered as images, so pixels are scaled during zoom\n *    animations. Point symbols and texts are accurately rendered as vectors and can stay upright on\n *    rotated views.\n *  * `'vector'`: Vector tiles are rendered as vectors. Most accurate rendering even during\n *    animations, but slower performance than the other options.\n *\n * When `declutter` is set to `true`, `'hybrid'` will be used instead of `'image'`.\n * @property {module:ol/source/VectorTile} [source] Source.\n * @property {module:ol/PluggableMap} [map] Sets the layer as overlay on a map. The map will not manage\n * this layer in its layers collection, and the layer will be rendered on top. This is useful for\n * temporary layers. The standard way to add a layer to a map and have it managed by the map is to\n * use {@link module:ol/Map#addLayer}.\n * @property {boolean} [declutter=false] Declutter images and text. Decluttering is applied to all\n * image and text styles, and the priority is defined by the z-index of the style. Lower z-index\n * means higher priority. When set to `true`, a `renderMode` of `'image'` will be overridden with\n * `'hybrid'`.\n * @property {module:ol/style/Style|Array.<module:ol/style/Style>|module:ol/style/Style~StyleFunction} [style] Layer style. See\n * {@link module:ol/style} for default style which will be used if this is not defined.\n * @property {boolean} [updateWhileAnimating=false] When set to `true`, feature batches will be\n * recreated during animations. This means that no vectors will be shown clipped, but the setting\n * will have a performance impact for large amounts of vector data. When set to `false`, batches\n * will be recreated when no animation is active.\n * @property {boolean} [updateWhileInteracting=false] When set to `true`, feature batches will be\n * recreated during interactions. See also `updateWhileAnimating`.\n * @property {number} [preload=0] Preload. Load low-resolution tiles up to `preload` levels. `0`\n * means no preloading.\n * @property {module:ol/render~OrderFunction} [renderOrder] Render order. Function to be used when sorting\n * features before rendering. By default features are drawn in the order that they are created.\n * @property {(module:ol/style/Style|Array.<module:ol/style/Style>|module:ol/style/Style~StyleFunction)} [style] Layer style. See\n * {@link module:ol/style} for default style which will be used if this is not defined.\n * @property {boolean} [useInterimTilesOnError=true] Use interim tiles on error.\n */\n\n\n/**\n * @classdesc\n * Layer for vector tile data that is rendered client-side.\n * Note that any property set in the options is set as a {@link module:ol/Object~BaseObject}\n * property on the layer object; for example, setting `title: 'My Title'` in the\n * options means that `title` is observable, and has get/set accessors.\n *\n * @constructor\n * @extends {module:ol/layer/Vector}\n * @param {module:ol/layer/VectorTile~Options=} opt_options Options.\n * @api\n */\nconst VectorTileLayer = function(opt_options) {\n  const options = opt_options ? opt_options : {};\n\n  let renderMode = options.renderMode || VectorTileRenderType.HYBRID;\n  assert(renderMode == undefined ||\n      renderMode == VectorTileRenderType.IMAGE ||\n      renderMode == VectorTileRenderType.HYBRID ||\n      renderMode == VectorTileRenderType.VECTOR,\n  28); // `renderMode` must be `'image'`, `'hybrid'` or `'vector'`\n  if (options.declutter && renderMode == VectorTileRenderType.IMAGE) {\n    renderMode = VectorTileRenderType.HYBRID;\n  }\n  options.renderMode = renderMode;\n\n  const baseOptions = assign({}, options);\n\n  delete baseOptions.preload;\n  delete baseOptions.useInterimTilesOnError;\n  VectorLayer.call(this,  /** @type {module:ol/layer/Vector~Options} */ (baseOptions));\n\n  this.setPreload(options.preload ? options.preload : 0);\n  this.setUseInterimTilesOnError(options.useInterimTilesOnError !== undefined ?\n    options.useInterimTilesOnError : true);\n\n  /**\n   * The layer type.\n   * @protected\n   * @type {module:ol/LayerType}\n   */\n  this.type = LayerType.VECTOR_TILE;\n\n};\n\ninherits(VectorTileLayer, VectorLayer);\n\n\n/**\n * Return the level as number to which we will preload tiles up to.\n * @return {number} The level to preload tiles up to.\n * @observable\n * @api\n */\nVectorTileLayer.prototype.getPreload = function() {\n  return /** @type {number} */ (this.get(TileProperty.PRELOAD));\n};\n\n\n/**\n * Whether we use interim tiles on error.\n * @return {boolean} Use interim tiles on error.\n * @observable\n * @api\n */\nVectorTileLayer.prototype.getUseInterimTilesOnError = function() {\n  return /** @type {boolean} */ (this.get(TileProperty.USE_INTERIM_TILES_ON_ERROR));\n};\n\n\n/**\n * Set the level as number to which we will preload tiles up to.\n * @param {number} preload The level to preload tiles up to.\n * @observable\n * @api\n */\nVectorTileLayer.prototype.setPreload = function(preload) {\n  this.set(TileProperty.PRELOAD, preload);\n};\n\n\n/**\n * Set whether we use interim tiles on error.\n * @param {boolean} useInterimTilesOnError Use interim tiles on error.\n * @observable\n * @api\n */\nVectorTileLayer.prototype.setUseInterimTilesOnError = function(useInterimTilesOnError) {\n  this.set(TileProperty.USE_INTERIM_TILES_ON_ERROR, useInterimTilesOnError);\n};\n\n\n/**\n * Return the associated {@link module:ol/source/VectorTile vectortilesource} of the layer.\n * @function\n * @return {module:ol/source/VectorTile} Source.\n * @api\n */\nVectorTileLayer.prototype.getSource;\nexport default VectorTileLayer;\n","/**\n * @module ol/structs/RBush\n */\nimport {getUid} from '../util.js';\nimport rbush from 'rbush';\nimport {createOrUpdate, equals} from '../extent.js';\nimport {isEmpty} from '../obj.js';\n\n/**\n * @typedef {Object} Entry\n * @property {number} minX\n * @property {number} minY\n * @property {number} maxX\n * @property {number} maxY\n * @property {Object} [value]\n */\n\n/**\n * Wrapper around the RBush by Vladimir Agafonkin.\n *\n * @constructor\n * @param {number=} opt_maxEntries Max entries.\n * @see https://github.com/mourner/rbush\n * @struct\n * @template T\n */\nconst RBush = function(opt_maxEntries) {\n\n  /**\n   * @private\n   */\n  this.rbush_ = rbush(opt_maxEntries, undefined);\n\n  /**\n   * A mapping between the objects added to this rbush wrapper\n   * and the objects that are actually added to the internal rbush.\n   * @private\n   * @type {Object.<number, module:ol/structs/RBush~Entry>}\n   */\n  this.items_ = {};\n\n};\n\n\n/**\n * Insert a value into the RBush.\n * @param {module:ol/extent~Extent} extent Extent.\n * @param {T} value Value.\n */\nRBush.prototype.insert = function(extent, value) {\n  /** @type {module:ol/structs/RBush~Entry} */\n  const item = {\n    minX: extent[0],\n    minY: extent[1],\n    maxX: extent[2],\n    maxY: extent[3],\n    value: value\n  };\n\n  this.rbush_.insert(item);\n  this.items_[getUid(value)] = item;\n};\n\n\n/**\n * Bulk-insert values into the RBush.\n * @param {Array.<module:ol/extent~Extent>} extents Extents.\n * @param {Array.<T>} values Values.\n */\nRBush.prototype.load = function(extents, values) {\n  const items = new Array(values.length);\n  for (let i = 0, l = values.length; i < l; i++) {\n    const extent = extents[i];\n    const value = values[i];\n\n    /** @type {module:ol/structs/RBush~Entry} */\n    const item = {\n      minX: extent[0],\n      minY: extent[1],\n      maxX: extent[2],\n      maxY: extent[3],\n      value: value\n    };\n    items[i] = item;\n    this.items_[getUid(value)] = item;\n  }\n  this.rbush_.load(items);\n};\n\n\n/**\n * Remove a value from the RBush.\n * @param {T} value Value.\n * @return {boolean} Removed.\n */\nRBush.prototype.remove = function(value) {\n  const uid = getUid(value);\n\n  // get the object in which the value was wrapped when adding to the\n  // internal rbush. then use that object to do the removal.\n  const item = this.items_[uid];\n  delete this.items_[uid];\n  return this.rbush_.remove(item) !== null;\n};\n\n\n/**\n * Update the extent of a value in the RBush.\n * @param {module:ol/extent~Extent} extent Extent.\n * @param {T} value Value.\n */\nRBush.prototype.update = function(extent, value) {\n  const item = this.items_[getUid(value)];\n  const bbox = [item.minX, item.minY, item.maxX, item.maxY];\n  if (!equals(bbox, extent)) {\n    this.remove(value);\n    this.insert(extent, value);\n  }\n};\n\n\n/**\n * Return all values in the RBush.\n * @return {Array.<T>} All.\n */\nRBush.prototype.getAll = function() {\n  const items = this.rbush_.all();\n  return items.map(function(item) {\n    return item.value;\n  });\n};\n\n\n/**\n * Return all values in the given extent.\n * @param {module:ol/extent~Extent} extent Extent.\n * @return {Array.<T>} All in extent.\n */\nRBush.prototype.getInExtent = function(extent) {\n  /** @type {module:ol/structs/RBush~Entry} */\n  const bbox = {\n    minX: extent[0],\n    minY: extent[1],\n    maxX: extent[2],\n    maxY: extent[3]\n  };\n  const items = this.rbush_.search(bbox);\n  return items.map(function(item) {\n    return item.value;\n  });\n};\n\n\n/**\n * Calls a callback function with each value in the tree.\n * If the callback returns a truthy value, this value is returned without\n * checking the rest of the tree.\n * @param {function(this: S, T): *} callback Callback.\n * @param {S=} opt_this The object to use as `this` in `callback`.\n * @return {*} Callback return value.\n * @template S\n */\nRBush.prototype.forEach = function(callback, opt_this) {\n  return this.forEach_(this.getAll(), callback, opt_this);\n};\n\n\n/**\n * Calls a callback function with each value in the provided extent.\n * @param {module:ol/extent~Extent} extent Extent.\n * @param {function(this: S, T): *} callback Callback.\n * @param {S=} opt_this The object to use as `this` in `callback`.\n * @return {*} Callback return value.\n * @template S\n */\nRBush.prototype.forEachInExtent = function(extent, callback, opt_this) {\n  return this.forEach_(this.getInExtent(extent), callback, opt_this);\n};\n\n\n/**\n * @param {Array.<T>} values Values.\n * @param {function(this: S, T): *} callback Callback.\n * @param {S=} opt_this The object to use as `this` in `callback`.\n * @private\n * @return {*} Callback return value.\n * @template S\n */\nRBush.prototype.forEach_ = function(values, callback, opt_this) {\n  let result;\n  for (let i = 0, l = values.length; i < l; i++) {\n    result = callback.call(opt_this, values[i]);\n    if (result) {\n      return result;\n    }\n  }\n  return result;\n};\n\n\n/**\n * @return {boolean} Is empty.\n */\nRBush.prototype.isEmpty = function() {\n  return isEmpty(this.items_);\n};\n\n\n/**\n * Remove all values from the RBush.\n */\nRBush.prototype.clear = function() {\n  this.rbush_.clear();\n  this.items_ = {};\n};\n\n\n/**\n * @param {module:ol/extent~Extent=} opt_extent Extent.\n * @return {module:ol/extent~Extent} Extent.\n */\nRBush.prototype.getExtent = function(opt_extent) {\n  // FIXME add getExtent() to rbush\n  const data = this.rbush_.data;\n  return createOrUpdate(data.minX, data.minY, data.maxX, data.maxY, opt_extent);\n};\n\n\n/**\n * @param {module:ol/structs/RBush} rbush R-Tree.\n */\nRBush.prototype.concat = function(rbush) {\n  this.rbush_.load(rbush.rbush_.all());\n  for (const i in rbush.items_) {\n    this.items_[i | 0] = rbush.items_[i | 0];\n  }\n};\nexport default RBush;\n","/**\n * @module ol/style/Fill\n */\nimport {getUid} from '../util.js';\nimport {asString} from '../color.js';\n\n\n/**\n * @typedef {Object} Options\n * @property {module:ol/color~Color|module:ol/colorlike~ColorLike} [color] A color, gradient or pattern.\n * See {@link module:ol/color~Color} and {@link module:ol/colorlike~ColorLike} for possible formats.\n * Default null; if null, the Canvas/renderer default black will be used.\n */\n\n\n/**\n * @classdesc\n * Set fill style for vector features.\n *\n * @constructor\n * @param {module:ol/style/Fill~Options=} opt_options Options.\n * @api\n */\nconst Fill = function(opt_options) {\n\n  const options = opt_options || {};\n\n  /**\n   * @private\n   * @type {module:ol/color~Color|module:ol/colorlike~ColorLike}\n   */\n  this.color_ = options.color !== undefined ? options.color : null;\n\n  /**\n   * @private\n   * @type {string|undefined}\n   */\n  this.checksum_ = undefined;\n};\n\n\n/**\n * Clones the style. The color is not cloned if it is an {@link module:ol/colorlike~ColorLike}.\n * @return {module:ol/style/Fill} The cloned style.\n * @api\n */\nFill.prototype.clone = function() {\n  const color = this.getColor();\n  return new Fill({\n    color: (color && color.slice) ? color.slice() : color || undefined\n  });\n};\n\n\n/**\n * Get the fill color.\n * @return {module:ol/color~Color|module:ol/colorlike~ColorLike} Color.\n * @api\n */\nFill.prototype.getColor = function() {\n  return this.color_;\n};\n\n\n/**\n * Set the color.\n *\n * @param {module:ol/color~Color|module:ol/colorlike~ColorLike} color Color.\n * @api\n */\nFill.prototype.setColor = function(color) {\n  this.color_ = color;\n  this.checksum_ = undefined;\n};\n\n\n/**\n * @return {string} The checksum.\n */\nFill.prototype.getChecksum = function() {\n  if (this.checksum_ === undefined) {\n    if (\n      this.color_ instanceof CanvasPattern ||\n        this.color_ instanceof CanvasGradient\n    ) {\n      this.checksum_ = getUid(this.color_).toString();\n    } else {\n      this.checksum_ = 'f' + (this.color_ ? asString(this.color_) : '-');\n    }\n  }\n\n  return this.checksum_;\n};\nexport default Fill;\n","/**\n * @module ol/source/TileEventType\n */\n\n/**\n * @enum {string}\n */\nexport default {\n\n  /**\n   * Triggered when a tile starts loading.\n   * @event module:ol/source/Tile~TileSourceEvent#tileloadstart\n   * @api\n   */\n  TILELOADSTART: 'tileloadstart',\n\n  /**\n   * Triggered when a tile finishes loading, either when its data is loaded,\n   * or when loading was aborted because the tile is no longer needed.\n   * @event module:ol/source/Tile~TileSourceEvent#tileloadend\n   * @api\n   */\n  TILELOADEND: 'tileloadend',\n\n  /**\n   * Triggered if tile loading results in an error.\n   * @event module:ol/source/Tile~TileSourceEvent#tileloaderror\n   * @api\n   */\n  TILELOADERROR: 'tileloaderror'\n\n};\n","/**\n * @module ol/source/UrlTile\n */\nimport {getUid, inherits} from '../util.js';\nimport TileState from '../TileState.js';\nimport {expandUrl, createFromTemplates, nullTileUrlFunction} from '../tileurlfunction.js';\nimport TileSource, {TileSourceEvent} from '../source/Tile.js';\nimport TileEventType from '../source/TileEventType.js';\nimport {getKeyZXY} from '../tilecoord.js';\n\n/**\n * @typedef {Object} Options\n * @property {module:ol/source/Source~AttributionLike} [attributions]\n * @property {number} [cacheSize]\n * @property {module:ol/extent~Extent} [extent]\n * @property {boolean} [opaque]\n * @property {module:ol/proj~ProjectionLike} [projection]\n * @property {module:ol/source/State} [state]\n * @property {module:ol/tilegrid/TileGrid} [tileGrid]\n * @property {module:ol/Tile~LoadFunction} tileLoadFunction\n * @property {number} [tilePixelRatio]\n * @property {module:ol/Tile~UrlFunction} [tileUrlFunction]\n * @property {string} [url]\n * @property {Array.<string>} [urls]\n * @property {boolean} [wrapX=true]\n * @property {number} [transition]\n */\n\n\n/**\n * @classdesc\n * Base class for sources providing tiles divided into a tile grid over http.\n *\n * @constructor\n * @abstract\n * @fires module:ol/source/TileEvent\n * @extends {module:ol/source/Tile}\n * @param {module:ol/source/UrlTile~Options=} options Image tile options.\n */\nconst UrlTile = function(options) {\n\n  TileSource.call(this, {\n    attributions: options.attributions,\n    cacheSize: options.cacheSize,\n    extent: options.extent,\n    opaque: options.opaque,\n    projection: options.projection,\n    state: options.state,\n    tileGrid: options.tileGrid,\n    tilePixelRatio: options.tilePixelRatio,\n    wrapX: options.wrapX,\n    transition: options.transition\n  });\n\n  /**\n   * @protected\n   * @type {module:ol/Tile~LoadFunction}\n   */\n  this.tileLoadFunction = options.tileLoadFunction;\n\n  /**\n   * @protected\n   * @type {module:ol/Tile~UrlFunction}\n   */\n  this.tileUrlFunction = this.fixedTileUrlFunction ?\n    this.fixedTileUrlFunction.bind(this) : nullTileUrlFunction;\n\n  /**\n   * @protected\n   * @type {!Array.<string>|null}\n   */\n  this.urls = null;\n\n  if (options.urls) {\n    this.setUrls(options.urls);\n  } else if (options.url) {\n    this.setUrl(options.url);\n  }\n  if (options.tileUrlFunction) {\n    this.setTileUrlFunction(options.tileUrlFunction);\n  }\n\n  /**\n   * @private\n   * @type {!Object.<number, boolean>}\n   */\n  this.tileLoadingKeys_ = {};\n\n};\n\ninherits(UrlTile, TileSource);\n\n\n/**\n * @type {module:ol/Tile~UrlFunction|undefined}\n * @protected\n */\nUrlTile.prototype.fixedTileUrlFunction;\n\n/**\n * Return the tile load function of the source.\n * @return {module:ol/Tile~LoadFunction} TileLoadFunction\n * @api\n */\nUrlTile.prototype.getTileLoadFunction = function() {\n  return this.tileLoadFunction;\n};\n\n\n/**\n * Return the tile URL function of the source.\n * @return {module:ol/Tile~UrlFunction} TileUrlFunction\n * @api\n */\nUrlTile.prototype.getTileUrlFunction = function() {\n  return this.tileUrlFunction;\n};\n\n\n/**\n * Return the URLs used for this source.\n * When a tileUrlFunction is used instead of url or urls,\n * null will be returned.\n * @return {!Array.<string>|null} URLs.\n * @api\n */\nUrlTile.prototype.getUrls = function() {\n  return this.urls;\n};\n\n\n/**\n * Handle tile change events.\n * @param {module:ol/events/Event} event Event.\n * @protected\n */\nUrlTile.prototype.handleTileChange = function(event) {\n  const tile = /** @type {module:ol/Tile} */ (event.target);\n  const uid = getUid(tile);\n  const tileState = tile.getState();\n  let type;\n  if (tileState == TileState.LOADING) {\n    this.tileLoadingKeys_[uid] = true;\n    type = TileEventType.TILELOADSTART;\n  } else if (uid in this.tileLoadingKeys_) {\n    delete this.tileLoadingKeys_[uid];\n    type = tileState == TileState.ERROR ? TileEventType.TILELOADERROR :\n      (tileState == TileState.LOADED || tileState == TileState.ABORT) ?\n        TileEventType.TILELOADEND : undefined;\n  }\n  if (type != undefined) {\n    this.dispatchEvent(new TileSourceEvent(type, tile));\n  }\n};\n\n\n/**\n * Set the tile load function of the source.\n * @param {module:ol/Tile~LoadFunction} tileLoadFunction Tile load function.\n * @api\n */\nUrlTile.prototype.setTileLoadFunction = function(tileLoadFunction) {\n  this.tileCache.clear();\n  this.tileLoadFunction = tileLoadFunction;\n  this.changed();\n};\n\n\n/**\n * Set the tile URL function of the source.\n * @param {module:ol/Tile~UrlFunction} tileUrlFunction Tile URL function.\n * @param {string=} opt_key Optional new tile key for the source.\n * @api\n */\nUrlTile.prototype.setTileUrlFunction = function(tileUrlFunction, opt_key) {\n  this.tileUrlFunction = tileUrlFunction;\n  this.tileCache.pruneExceptNewestZ();\n  if (typeof opt_key !== 'undefined') {\n    this.setKey(opt_key);\n  } else {\n    this.changed();\n  }\n};\n\n\n/**\n * Set the URL to use for requests.\n * @param {string} url URL.\n * @api\n */\nUrlTile.prototype.setUrl = function(url) {\n  const urls = this.urls = expandUrl(url);\n  this.setTileUrlFunction(this.fixedTileUrlFunction ?\n    this.fixedTileUrlFunction.bind(this) :\n    createFromTemplates(urls, this.tileGrid), url);\n};\n\n\n/**\n * Set the URLs to use for requests.\n * @param {Array.<string>} urls URLs.\n * @api\n */\nUrlTile.prototype.setUrls = function(urls) {\n  this.urls = urls;\n  const key = urls.join('\\n');\n  this.setTileUrlFunction(this.fixedTileUrlFunction ?\n    this.fixedTileUrlFunction.bind(this) :\n    createFromTemplates(urls, this.tileGrid), key);\n};\n\n\n/**\n * @inheritDoc\n */\nUrlTile.prototype.useTile = function(z, x, y) {\n  const tileCoordKey = getKeyZXY(z, x, y);\n  if (this.tileCache.containsKey(tileCoordKey)) {\n    this.tileCache.get(tileCoordKey);\n  }\n};\nexport default UrlTile;\n","/**\n * @module ol/proj/transforms\n */\nimport {isEmpty} from '../obj.js';\n\n\n/**\n * @private\n * @type {!Object.<string, Object.<string, module:ol/proj~TransformFunction>>}\n */\nlet transforms = {};\n\n\n/**\n * Clear the transform cache.\n */\nexport function clear() {\n  transforms = {};\n}\n\n\n/**\n * Registers a conversion function to convert coordinates from the source\n * projection to the destination projection.\n *\n * @param {module:ol/proj/Projection} source Source.\n * @param {module:ol/proj/Projection} destination Destination.\n * @param {module:ol/proj~TransformFunction} transformFn Transform.\n */\nexport function add(source, destination, transformFn) {\n  const sourceCode = source.getCode();\n  const destinationCode = destination.getCode();\n  if (!(sourceCode in transforms)) {\n    transforms[sourceCode] = {};\n  }\n  transforms[sourceCode][destinationCode] = transformFn;\n}\n\n\n/**\n * Unregisters the conversion function to convert coordinates from the source\n * projection to the destination projection.  This method is used to clean up\n * cached transforms during testing.\n *\n * @param {module:ol/proj/Projection} source Source projection.\n * @param {module:ol/proj/Projection} destination Destination projection.\n * @return {module:ol/proj~TransformFunction} transformFn The unregistered transform.\n */\nexport function remove(source, destination) {\n  const sourceCode = source.getCode();\n  const destinationCode = destination.getCode();\n  const transform = transforms[sourceCode][destinationCode];\n  delete transforms[sourceCode][destinationCode];\n  if (isEmpty(transforms[sourceCode])) {\n    delete transforms[sourceCode];\n  }\n  return transform;\n}\n\n\n/**\n * Get a transform given a source code and a destination code.\n * @param {string} sourceCode The code for the source projection.\n * @param {string} destinationCode The code for the destination projection.\n * @return {module:ol/proj~TransformFunction|undefined} The transform function (if found).\n */\nexport function get(sourceCode, destinationCode) {\n  let transform;\n  if (sourceCode in transforms && destinationCode in transforms[sourceCode]) {\n    transform = transforms[sourceCode][destinationCode];\n  }\n  return transform;\n}\n","/**\n * @module ol/loadingstrategy\n */\n\n\n/**\n * Strategy function for loading all features with a single request.\n * @param {module:ol/extent~Extent} extent Extent.\n * @param {number} resolution Resolution.\n * @return {Array.<module:ol/extent~Extent>} Extents.\n * @api\n */\nexport function all(extent, resolution) {\n  return [[-Infinity, -Infinity, Infinity, Infinity]];\n}\n\n\n/**\n * Strategy function for loading features based on the view's extent and\n * resolution.\n * @param {module:ol/extent~Extent} extent Extent.\n * @param {number} resolution Resolution.\n * @return {Array.<module:ol/extent~Extent>} Extents.\n * @api\n */\nexport function bbox(extent, resolution) {\n  return [extent];\n}\n\n\n/**\n * Creates a strategy function for loading features based on a tile grid.\n * @param {module:ol/tilegrid/TileGrid} tileGrid Tile grid.\n * @return {function(module:ol/extent~Extent, number): Array.<module:ol/extent~Extent>} Loading strategy.\n * @api\n */\nexport function tile(tileGrid) {\n  return (\n    /**\n     * @param {module:ol/extent~Extent} extent Extent.\n     * @param {number} resolution Resolution.\n     * @return {Array.<module:ol/extent~Extent>} Extents.\n     */\n    function(extent, resolution) {\n      const z = tileGrid.getZForResolution(resolution);\n      const tileRange = tileGrid.getTileRangeForExtentAndZ(extent, z);\n      /** @type {Array.<module:ol/extent~Extent>} */\n      const extents = [];\n      /** @type {module:ol/tilecoord~TileCoord} */\n      const tileCoord = [z, 0, 0];\n      for (tileCoord[1] = tileRange.minX; tileCoord[1] <= tileRange.maxX; ++tileCoord[1]) {\n        for (tileCoord[2] = tileRange.minY; tileCoord[2] <= tileRange.maxY; ++tileCoord[2]) {\n          extents.push(tileGrid.getTileCoordExtent(tileCoord));\n        }\n      }\n      return extents;\n    }\n  );\n}\n","/**\n * @module ol/reproj\n */\nimport {createCanvasContext2D} from './dom.js';\nimport {containsCoordinate, createEmpty, extend, getHeight, getTopLeft, getWidth} from './extent.js';\nimport {solveLinearSystem} from './math.js';\nimport {getPointResolution, transform} from './proj.js';\n\n\n/**\n * Calculates ideal resolution to use from the source in order to achieve\n * pixel mapping as close as possible to 1:1 during reprojection.\n * The resolution is calculated regardless of what resolutions\n * are actually available in the dataset (TileGrid, Image, ...).\n *\n * @param {module:ol/proj/Projection} sourceProj Source projection.\n * @param {module:ol/proj/Projection} targetProj Target projection.\n * @param {module:ol/coordinate~Coordinate} targetCenter Target center.\n * @param {number} targetResolution Target resolution.\n * @return {number} The best resolution to use. Can be +-Infinity, NaN or 0.\n */\nexport function calculateSourceResolution(sourceProj, targetProj,\n  targetCenter, targetResolution) {\n\n  const sourceCenter = transform(targetCenter, targetProj, sourceProj);\n\n  // calculate the ideal resolution of the source data\n  let sourceResolution = getPointResolution(targetProj, targetResolution, targetCenter);\n\n  const targetMetersPerUnit = targetProj.getMetersPerUnit();\n  if (targetMetersPerUnit !== undefined) {\n    sourceResolution *= targetMetersPerUnit;\n  }\n  const sourceMetersPerUnit = sourceProj.getMetersPerUnit();\n  if (sourceMetersPerUnit !== undefined) {\n    sourceResolution /= sourceMetersPerUnit;\n  }\n\n  // Based on the projection properties, the point resolution at the specified\n  // coordinates may be slightly different. We need to reverse-compensate this\n  // in order to achieve optimal results.\n\n  const sourceExtent = sourceProj.getExtent();\n  if (!sourceExtent || containsCoordinate(sourceExtent, sourceCenter)) {\n    const compensationFactor = getPointResolution(sourceProj, sourceResolution, sourceCenter) /\n        sourceResolution;\n    if (isFinite(compensationFactor) && compensationFactor > 0) {\n      sourceResolution /= compensationFactor;\n    }\n  }\n\n  return sourceResolution;\n}\n\n\n/**\n * Enlarge the clipping triangle point by 1 pixel to ensure the edges overlap\n * in order to mask gaps caused by antialiasing.\n *\n * @param {number} centroidX Centroid of the triangle (x coordinate in pixels).\n * @param {number} centroidY Centroid of the triangle (y coordinate in pixels).\n * @param {number} x X coordinate of the point (in pixels).\n * @param {number} y Y coordinate of the point (in pixels).\n * @return {module:ol/coordinate~Coordinate} New point 1 px farther from the centroid.\n */\nfunction enlargeClipPoint(centroidX, centroidY, x, y) {\n  const dX = x - centroidX;\n  const dY = y - centroidY;\n  const distance = Math.sqrt(dX * dX + dY * dY);\n  return [Math.round(x + dX / distance), Math.round(y + dY / distance)];\n}\n\n\n/**\n * Renders the source data into new canvas based on the triangulation.\n *\n * @param {number} width Width of the canvas.\n * @param {number} height Height of the canvas.\n * @param {number} pixelRatio Pixel ratio.\n * @param {number} sourceResolution Source resolution.\n * @param {module:ol/extent~Extent} sourceExtent Extent of the data source.\n * @param {number} targetResolution Target resolution.\n * @param {module:ol/extent~Extent} targetExtent Target extent.\n * @param {module:ol/reproj/Triangulation} triangulation\n * Calculated triangulation.\n * @param {Array.<{extent: module:ol/extent~Extent,\n *                 image: (HTMLCanvasElement|Image|HTMLVideoElement)}>} sources\n * Array of sources.\n * @param {number} gutter Gutter of the sources.\n * @param {boolean=} opt_renderEdges Render reprojection edges.\n * @return {HTMLCanvasElement} Canvas with reprojected data.\n */\nexport function render(width, height, pixelRatio,\n  sourceResolution, sourceExtent, targetResolution, targetExtent,\n  triangulation, sources, gutter, opt_renderEdges) {\n\n  const context = createCanvasContext2D(Math.round(pixelRatio * width),\n    Math.round(pixelRatio * height));\n\n  if (sources.length === 0) {\n    return context.canvas;\n  }\n\n  context.scale(pixelRatio, pixelRatio);\n\n  const sourceDataExtent = createEmpty();\n  sources.forEach(function(src, i, arr) {\n    extend(sourceDataExtent, src.extent);\n  });\n\n  const canvasWidthInUnits = getWidth(sourceDataExtent);\n  const canvasHeightInUnits = getHeight(sourceDataExtent);\n  const stitchContext = createCanvasContext2D(\n    Math.round(pixelRatio * canvasWidthInUnits / sourceResolution),\n    Math.round(pixelRatio * canvasHeightInUnits / sourceResolution));\n\n  const stitchScale = pixelRatio / sourceResolution;\n\n  sources.forEach(function(src, i, arr) {\n    const xPos = src.extent[0] - sourceDataExtent[0];\n    const yPos = -(src.extent[3] - sourceDataExtent[3]);\n    const srcWidth = getWidth(src.extent);\n    const srcHeight = getHeight(src.extent);\n\n    stitchContext.drawImage(\n      src.image,\n      gutter, gutter,\n      src.image.width - 2 * gutter, src.image.height - 2 * gutter,\n      xPos * stitchScale, yPos * stitchScale,\n      srcWidth * stitchScale, srcHeight * stitchScale);\n  });\n\n  const targetTopLeft = getTopLeft(targetExtent);\n\n  triangulation.getTriangles().forEach(function(triangle, i, arr) {\n    /* Calculate affine transform (src -> dst)\n     * Resulting matrix can be used to transform coordinate\n     * from `sourceProjection` to destination pixels.\n     *\n     * To optimize number of context calls and increase numerical stability,\n     * we also do the following operations:\n     * trans(-topLeftExtentCorner), scale(1 / targetResolution), scale(1, -1)\n     * here before solving the linear system so [ui, vi] are pixel coordinates.\n     *\n     * Src points: xi, yi\n     * Dst points: ui, vi\n     * Affine coefficients: aij\n     *\n     * | x0 y0 1  0  0 0 |   |a00|   |u0|\n     * | x1 y1 1  0  0 0 |   |a01|   |u1|\n     * | x2 y2 1  0  0 0 | x |a02| = |u2|\n     * |  0  0 0 x0 y0 1 |   |a10|   |v0|\n     * |  0  0 0 x1 y1 1 |   |a11|   |v1|\n     * |  0  0 0 x2 y2 1 |   |a12|   |v2|\n     */\n    const source = triangle.source;\n    const target = triangle.target;\n    let x0 = source[0][0], y0 = source[0][1];\n    let x1 = source[1][0], y1 = source[1][1];\n    let x2 = source[2][0], y2 = source[2][1];\n    const u0 = (target[0][0] - targetTopLeft[0]) / targetResolution;\n    const v0 = -(target[0][1] - targetTopLeft[1]) / targetResolution;\n    const u1 = (target[1][0] - targetTopLeft[0]) / targetResolution;\n    const v1 = -(target[1][1] - targetTopLeft[1]) / targetResolution;\n    const u2 = (target[2][0] - targetTopLeft[0]) / targetResolution;\n    const v2 = -(target[2][1] - targetTopLeft[1]) / targetResolution;\n\n    // Shift all the source points to improve numerical stability\n    // of all the subsequent calculations. The [x0, y0] is used here.\n    // This is also used to simplify the linear system.\n    const sourceNumericalShiftX = x0;\n    const sourceNumericalShiftY = y0;\n    x0 = 0;\n    y0 = 0;\n    x1 -= sourceNumericalShiftX;\n    y1 -= sourceNumericalShiftY;\n    x2 -= sourceNumericalShiftX;\n    y2 -= sourceNumericalShiftY;\n\n    const augmentedMatrix = [\n      [x1, y1, 0, 0, u1 - u0],\n      [x2, y2, 0, 0, u2 - u0],\n      [0, 0, x1, y1, v1 - v0],\n      [0, 0, x2, y2, v2 - v0]\n    ];\n    const affineCoefs = solveLinearSystem(augmentedMatrix);\n    if (!affineCoefs) {\n      return;\n    }\n\n    context.save();\n    context.beginPath();\n    const centroidX = (u0 + u1 + u2) / 3;\n    const centroidY = (v0 + v1 + v2) / 3;\n    const p0 = enlargeClipPoint(centroidX, centroidY, u0, v0);\n    const p1 = enlargeClipPoint(centroidX, centroidY, u1, v1);\n    const p2 = enlargeClipPoint(centroidX, centroidY, u2, v2);\n\n    context.moveTo(p1[0], p1[1]);\n    context.lineTo(p0[0], p0[1]);\n    context.lineTo(p2[0], p2[1]);\n    context.clip();\n\n    context.transform(\n      affineCoefs[0], affineCoefs[2], affineCoefs[1], affineCoefs[3], u0, v0);\n\n    context.translate(sourceDataExtent[0] - sourceNumericalShiftX,\n      sourceDataExtent[3] - sourceNumericalShiftY);\n\n    context.scale(sourceResolution / pixelRatio,\n      -sourceResolution / pixelRatio);\n\n    context.drawImage(stitchContext.canvas, 0, 0);\n    context.restore();\n  });\n\n  if (opt_renderEdges) {\n    context.save();\n\n    context.strokeStyle = 'black';\n    context.lineWidth = 1;\n\n    triangulation.getTriangles().forEach(function(triangle, i, arr) {\n      const target = triangle.target;\n      const u0 = (target[0][0] - targetTopLeft[0]) / targetResolution;\n      const v0 = -(target[0][1] - targetTopLeft[1]) / targetResolution;\n      const u1 = (target[1][0] - targetTopLeft[0]) / targetResolution;\n      const v1 = -(target[1][1] - targetTopLeft[1]) / targetResolution;\n      const u2 = (target[2][0] - targetTopLeft[0]) / targetResolution;\n      const v2 = -(target[2][1] - targetTopLeft[1]) / targetResolution;\n\n      context.beginPath();\n      context.moveTo(u1, v1);\n      context.lineTo(u0, v0);\n      context.lineTo(u2, v2);\n      context.closePath();\n      context.stroke();\n    });\n\n    context.restore();\n  }\n  return context.canvas;\n}\n","/**\n * @module ol/geom/LinearRing\n */\nimport {inherits} from '../util.js';\nimport {closestSquaredDistanceXY} from '../extent.js';\nimport GeometryLayout from '../geom/GeometryLayout.js';\nimport GeometryType from '../geom/GeometryType.js';\nimport SimpleGeometry from '../geom/SimpleGeometry.js';\nimport {linearRing as linearRingArea} from '../geom/flat/area.js';\nimport {assignClosestPoint, maxSquaredDelta} from '../geom/flat/closest.js';\nimport {deflateCoordinates} from '../geom/flat/deflate.js';\nimport {inflateCoordinates} from '../geom/flat/inflate.js';\nimport {douglasPeucker} from '../geom/flat/simplify.js';\n\n/**\n * @classdesc\n * Linear ring geometry. Only used as part of polygon; cannot be rendered\n * on its own.\n *\n * @constructor\n * @extends {module:ol/geom/SimpleGeometry}\n * @param {Array.<module:ol/coordinate~Coordinate>} coordinates Coordinates.\n * @param {module:ol/geom/GeometryLayout=} opt_layout Layout.\n * @api\n */\nconst LinearRing = function(coordinates, opt_layout) {\n\n  SimpleGeometry.call(this);\n\n  /**\n   * @private\n   * @type {number}\n   */\n  this.maxDelta_ = -1;\n\n  /**\n   * @private\n   * @type {number}\n   */\n  this.maxDeltaRevision_ = -1;\n\n  this.setCoordinates(coordinates, opt_layout);\n\n};\n\ninherits(LinearRing, SimpleGeometry);\n\n\n/**\n * Make a complete copy of the geometry.\n * @return {!module:ol/geom/LinearRing} Clone.\n * @override\n * @api\n */\nLinearRing.prototype.clone = function() {\n  const linearRing = new LinearRing(null);\n  linearRing.setFlatCoordinates(this.layout, this.flatCoordinates.slice());\n  return linearRing;\n};\n\n\n/**\n * @inheritDoc\n */\nLinearRing.prototype.closestPointXY = function(x, y, closestPoint, minSquaredDistance) {\n  if (minSquaredDistance < closestSquaredDistanceXY(this.getExtent(), x, y)) {\n    return minSquaredDistance;\n  }\n  if (this.maxDeltaRevision_ != this.getRevision()) {\n    this.maxDelta_ = Math.sqrt(maxSquaredDelta(\n      this.flatCoordinates, 0, this.flatCoordinates.length, this.stride, 0));\n    this.maxDeltaRevision_ = this.getRevision();\n  }\n  return assignClosestPoint(\n    this.flatCoordinates, 0, this.flatCoordinates.length, this.stride,\n    this.maxDelta_, true, x, y, closestPoint, minSquaredDistance);\n};\n\n\n/**\n * Return the area of the linear ring on projected plane.\n * @return {number} Area (on projected plane).\n * @api\n */\nLinearRing.prototype.getArea = function() {\n  return linearRingArea(this.flatCoordinates, 0, this.flatCoordinates.length, this.stride);\n};\n\n\n/**\n * Return the coordinates of the linear ring.\n * @return {Array.<module:ol/coordinate~Coordinate>} Coordinates.\n * @override\n * @api\n */\nLinearRing.prototype.getCoordinates = function() {\n  return inflateCoordinates(\n    this.flatCoordinates, 0, this.flatCoordinates.length, this.stride);\n};\n\n\n/**\n * @inheritDoc\n */\nLinearRing.prototype.getSimplifiedGeometryInternal = function(squaredTolerance) {\n  const simplifiedFlatCoordinates = [];\n  simplifiedFlatCoordinates.length = douglasPeucker(\n    this.flatCoordinates, 0, this.flatCoordinates.length, this.stride,\n    squaredTolerance, simplifiedFlatCoordinates, 0);\n  const simplifiedLinearRing = new LinearRing(null);\n  simplifiedLinearRing.setFlatCoordinates(\n    GeometryLayout.XY, simplifiedFlatCoordinates);\n  return simplifiedLinearRing;\n};\n\n\n/**\n * @inheritDoc\n * @api\n */\nLinearRing.prototype.getType = function() {\n  return GeometryType.LINEAR_RING;\n};\n\n\n/**\n * @inheritDoc\n */\nLinearRing.prototype.intersectsExtent = function(extent) {};\n\n\n/**\n * Set the coordinates of the linear ring.\n * @param {Array.<module:ol/coordinate~Coordinate>} coordinates Coordinates.\n * @param {module:ol/geom/GeometryLayout=} opt_layout Layout.\n * @override\n * @api\n */\nLinearRing.prototype.setCoordinates = function(coordinates, opt_layout) {\n  if (!coordinates) {\n    this.setFlatCoordinates(GeometryLayout.XY, null);\n  } else {\n    this.setLayout(opt_layout, coordinates, 1);\n    if (!this.flatCoordinates) {\n      this.flatCoordinates = [];\n    }\n    this.flatCoordinates.length = deflateCoordinates(\n      this.flatCoordinates, 0, coordinates, this.stride);\n    this.changed();\n  }\n};\n\n\n/**\n * @param {module:ol/geom/GeometryLayout} layout Layout.\n * @param {Array.<number>} flatCoordinates Flat coordinates.\n */\nLinearRing.prototype.setFlatCoordinates = function(layout, flatCoordinates) {\n  this.setFlatCoordinatesInternal(layout, flatCoordinates);\n  this.changed();\n};\nexport default LinearRing;\n","/**\n * @module ol/MapEventType\n */\n\n/**\n * @enum {string}\n */\nexport default {\n\n  /**\n   * Triggered after a map frame is rendered.\n   * @event module:ol/MapEvent~MapEvent#postrender\n   * @api\n   */\n  POSTRENDER: 'postrender',\n\n  /**\n   * Triggered when the map starts moving.\n   * @event module:ol/MapEvent~MapEvent#movestart\n   * @api\n   */\n  MOVESTART: 'movestart',\n\n  /**\n   * Triggered after the map is moved.\n   * @event module:ol/MapEvent~MapEvent#moveend\n   * @api\n   */\n  MOVEEND: 'moveend'\n\n};\n","/**\n * @module ol/Disposable\n */\nimport {UNDEFINED} from './functions.js';\n\n/**\n * Objects that need to clean up after themselves.\n * @constructor\n */\nconst Disposable = function() {};\n\n/**\n * The object has already been disposed.\n * @type {boolean}\n * @private\n */\nDisposable.prototype.disposed_ = false;\n\n/**\n * Clean up.\n */\nDisposable.prototype.dispose = function() {\n  if (!this.disposed_) {\n    this.disposed_ = true;\n    this.disposeInternal();\n  }\n};\n\n/**\n * Extension point for disposable objects.\n * @protected\n */\nDisposable.prototype.disposeInternal = UNDEFINED;\nexport default Disposable;\n","/**\n * @module ol/ImageBase\n */\nimport {inherits} from './util.js';\nimport EventTarget from './events/EventTarget.js';\nimport EventType from './events/EventType.js';\n\n/**\n * @constructor\n * @abstract\n * @extends {module:ol/events/EventTarget}\n * @param {module:ol/extent~Extent} extent Extent.\n * @param {number|undefined} resolution Resolution.\n * @param {number} pixelRatio Pixel ratio.\n * @param {module:ol/ImageState} state State.\n */\nconst ImageBase = function(extent, resolution, pixelRatio, state) {\n\n  EventTarget.call(this);\n\n  /**\n   * @protected\n   * @type {module:ol/extent~Extent}\n   */\n  this.extent = extent;\n\n  /**\n   * @private\n   * @type {number}\n   */\n  this.pixelRatio_ = pixelRatio;\n\n  /**\n   * @protected\n   * @type {number|undefined}\n   */\n  this.resolution = resolution;\n\n  /**\n   * @protected\n   * @type {module:ol/ImageState}\n   */\n  this.state = state;\n\n};\n\ninherits(ImageBase, EventTarget);\n\n\n/**\n * @protected\n */\nImageBase.prototype.changed = function() {\n  this.dispatchEvent(EventType.CHANGE);\n};\n\n\n/**\n * @return {module:ol/extent~Extent} Extent.\n */\nImageBase.prototype.getExtent = function() {\n  return this.extent;\n};\n\n\n/**\n * @abstract\n * @return {HTMLCanvasElement|Image|HTMLVideoElement} Image.\n */\nImageBase.prototype.getImage = function() {};\n\n\n/**\n * @return {number} PixelRatio.\n */\nImageBase.prototype.getPixelRatio = function() {\n  return this.pixelRatio_;\n};\n\n\n/**\n * @return {number} Resolution.\n */\nImageBase.prototype.getResolution = function() {\n  return /** @type {number} */ (this.resolution);\n};\n\n\n/**\n * @return {module:ol/ImageState} State.\n */\nImageBase.prototype.getState = function() {\n  return this.state;\n};\n\n\n/**\n * Load not yet loaded URI.\n * @abstract\n */\nImageBase.prototype.load = function() {};\n\nexport default ImageBase;\n","/**\n * @module ol/source/WMSServerType\n */\n\n/**\n * Available server types: `'carmentaserver'`, `'geoserver'`, `'mapserver'`,\n *     `'qgis'`. These are servers that have vendor parameters beyond the WMS\n *     specification that OpenLayers can make use of.\n * @enum {string}\n */\nexport default {\n  CARMENTA_SERVER: 'carmentaserver',\n  GEOSERVER: 'geoserver',\n  MAPSERVER: 'mapserver',\n  QGIS: 'qgis'\n};\n","/**\n * @module ol/layer/TileProperty\n */\n\n/**\n * @enum {string}\n */\nexport default {\n  PRELOAD: 'preload',\n  USE_INTERIM_TILES_ON_ERROR: 'useInterimTilesOnError'\n};\n","/**\n * @module ol/renderer/Map\n */\nimport {getUid, inherits} from '../util.js';\nimport Disposable from '../Disposable.js';\nimport {listen, unlistenByKey} from '../events.js';\nimport EventType from '../events/EventType.js';\nimport {getWidth} from '../extent.js';\nimport {TRUE, UNDEFINED} from '../functions.js';\nimport {visibleAtResolution} from '../layer/Layer.js';\nimport {shared as iconImageCache} from '../style/IconImageCache.js';\nimport {compose as composeTransform, invert as invertTransform, setFromArray as transformSetFromArray} from '../transform.js';\n\n\n/**\n * @constructor\n * @abstract\n * @extends {module:ol/Disposable}\n * @param {module:ol/PluggableMap} map Map.\n * @struct\n */\nconst MapRenderer = function(map) {\n  Disposable.call(this);\n\n  /**\n   * @private\n   * @type {module:ol/PluggableMap}\n   */\n  this.map_ = map;\n\n  /**\n   * @private\n   * @type {!Object.<string, module:ol/renderer/Layer>}\n   */\n  this.layerRenderers_ = {};\n\n  /**\n   * @private\n   * @type {Object.<string, module:ol/events~EventsKey>}\n   */\n  this.layerRendererListeners_ = {};\n\n  /**\n   * @private\n   * @type {Array.<module:ol/renderer/Layer>}\n   */\n  this.layerRendererConstructors_ = [];\n\n};\n\ninherits(MapRenderer, Disposable);\n\n\n/**\n * Register layer renderer constructors.\n * @param {Array.<module:ol/renderer/Layer>} constructors Layer renderers.\n */\nMapRenderer.prototype.registerLayerRenderers = function(constructors) {\n  this.layerRendererConstructors_.push.apply(this.layerRendererConstructors_, constructors);\n};\n\n\n/**\n * Get the registered layer renderer constructors.\n * @return {Array.<module:ol/renderer/Layer>} Registered layer renderers.\n */\nMapRenderer.prototype.getLayerRendererConstructors = function() {\n  return this.layerRendererConstructors_;\n};\n\n\n/**\n * @param {module:ol/PluggableMap~FrameState} frameState FrameState.\n * @protected\n */\nMapRenderer.prototype.calculateMatrices2D = function(frameState) {\n  const viewState = frameState.viewState;\n  const coordinateToPixelTransform = frameState.coordinateToPixelTransform;\n  const pixelToCoordinateTransform = frameState.pixelToCoordinateTransform;\n\n  composeTransform(coordinateToPixelTransform,\n    frameState.size[0] / 2, frameState.size[1] / 2,\n    1 / viewState.resolution, -1 / viewState.resolution,\n    -viewState.rotation,\n    -viewState.center[0], -viewState.center[1]);\n\n  invertTransform(\n    transformSetFromArray(pixelToCoordinateTransform, coordinateToPixelTransform));\n};\n\n\n/**\n * Removes all layer renderers.\n */\nMapRenderer.prototype.removeLayerRenderers = function() {\n  for (const key in this.layerRenderers_) {\n    this.removeLayerRendererByKey_(key).dispose();\n  }\n};\n\n\n/**\n * @param {module:ol/PluggableMap} map Map.\n * @param {module:ol/PluggableMap~FrameState} frameState Frame state.\n */\nfunction expireIconCache(map, frameState) {\n  iconImageCache.expire();\n}\n\n\n/**\n * @param {module:ol/coordinate~Coordinate} coordinate Coordinate.\n * @param {module:ol/PluggableMap~FrameState} frameState FrameState.\n * @param {number} hitTolerance Hit tolerance in pixels.\n * @param {function(this: S, (module:ol/Feature|module:ol/render/Feature),\n *     module:ol/layer/Layer): T} callback Feature callback.\n * @param {S} thisArg Value to use as `this` when executing `callback`.\n * @param {function(this: U, module:ol/layer/Layer): boolean} layerFilter Layer filter\n *     function, only layers which are visible and for which this function\n *     returns `true` will be tested for features.  By default, all visible\n *     layers will be tested.\n * @param {U} thisArg2 Value to use as `this` when executing `layerFilter`.\n * @return {T|undefined} Callback result.\n * @template S,T,U\n */\nMapRenderer.prototype.forEachFeatureAtCoordinate = function(coordinate, frameState, hitTolerance, callback, thisArg,\n  layerFilter, thisArg2) {\n  let result;\n  const viewState = frameState.viewState;\n  const viewResolution = viewState.resolution;\n\n  /**\n   * @param {module:ol/Feature|module:ol/render/Feature} feature Feature.\n   * @param {module:ol/layer/Layer} layer Layer.\n   * @return {?} Callback result.\n   */\n  function forEachFeatureAtCoordinate(feature, layer) {\n    const key = getUid(feature).toString();\n    const managed = frameState.layerStates[getUid(layer)].managed;\n    if (!(key in frameState.skippedFeatureUids && !managed)) {\n      return callback.call(thisArg, feature, managed ? layer : null);\n    }\n  }\n\n  const projection = viewState.projection;\n\n  let translatedCoordinate = coordinate;\n  if (projection.canWrapX()) {\n    const projectionExtent = projection.getExtent();\n    const worldWidth = getWidth(projectionExtent);\n    const x = coordinate[0];\n    if (x < projectionExtent[0] || x > projectionExtent[2]) {\n      const worldsAway = Math.ceil((projectionExtent[0] - x) / worldWidth);\n      translatedCoordinate = [x + worldWidth * worldsAway, coordinate[1]];\n    }\n  }\n\n  const layerStates = frameState.layerStatesArray;\n  const numLayers = layerStates.length;\n  let i;\n  for (i = numLayers - 1; i >= 0; --i) {\n    const layerState = layerStates[i];\n    const layer = layerState.layer;\n    if (visibleAtResolution(layerState, viewResolution) && layerFilter.call(thisArg2, layer)) {\n      const layerRenderer = this.getLayerRenderer(layer);\n      if (layer.getSource()) {\n        result = layerRenderer.forEachFeatureAtCoordinate(\n          layer.getSource().getWrapX() ? translatedCoordinate : coordinate,\n          frameState, hitTolerance, forEachFeatureAtCoordinate, thisArg);\n      }\n      if (result) {\n        return result;\n      }\n    }\n  }\n  return undefined;\n};\n\n\n/**\n * @abstract\n * @param {module:ol~Pixel} pixel Pixel.\n * @param {module:ol/PluggableMap~FrameState} frameState FrameState.\n * @param {number} hitTolerance Hit tolerance in pixels.\n * @param {function(this: S, module:ol/layer/Layer, (Uint8ClampedArray|Uint8Array)): T} callback Layer\n *     callback.\n * @param {S} thisArg Value to use as `this` when executing `callback`.\n * @param {function(this: U, module:ol/layer/Layer): boolean} layerFilter Layer filter\n *     function, only layers which are visible and for which this function\n *     returns `true` will be tested for features.  By default, all visible\n *     layers will be tested.\n * @param {U} thisArg2 Value to use as `this` when executing `layerFilter`.\n * @return {T|undefined} Callback result.\n * @template S,T,U\n */\nMapRenderer.prototype.forEachLayerAtPixel = function(pixel, frameState, hitTolerance, callback, thisArg,\n  layerFilter, thisArg2) {};\n\n\n/**\n * @param {module:ol/coordinate~Coordinate} coordinate Coordinate.\n * @param {module:ol/PluggableMap~FrameState} frameState FrameState.\n * @param {number} hitTolerance Hit tolerance in pixels.\n * @param {function(this: U, module:ol/layer/Layer): boolean} layerFilter Layer filter\n *     function, only layers which are visible and for which this function\n *     returns `true` will be tested for features.  By default, all visible\n *     layers will be tested.\n * @param {U} thisArg Value to use as `this` when executing `layerFilter`.\n * @return {boolean} Is there a feature at the given coordinate?\n * @template U\n */\nMapRenderer.prototype.hasFeatureAtCoordinate = function(coordinate, frameState, hitTolerance, layerFilter, thisArg) {\n  const hasFeature = this.forEachFeatureAtCoordinate(\n    coordinate, frameState, hitTolerance, TRUE, this, layerFilter, thisArg);\n\n  return hasFeature !== undefined;\n};\n\n\n/**\n * @param {module:ol/layer/Layer} layer Layer.\n * @protected\n * @return {module:ol/renderer/Layer} Layer renderer.\n */\nMapRenderer.prototype.getLayerRenderer = function(layer) {\n  const layerKey = getUid(layer).toString();\n  if (layerKey in this.layerRenderers_) {\n    return this.layerRenderers_[layerKey];\n  } else {\n    let renderer;\n    for (let i = 0, ii = this.layerRendererConstructors_.length; i < ii; ++i) {\n      const candidate = this.layerRendererConstructors_[i];\n      if (candidate['handles'](layer)) {\n        renderer = candidate['create'](this, layer);\n        break;\n      }\n    }\n    if (renderer) {\n      this.layerRenderers_[layerKey] = renderer;\n      this.layerRendererListeners_[layerKey] = listen(renderer,\n        EventType.CHANGE, this.handleLayerRendererChange_, this);\n    } else {\n      throw new Error('Unable to create renderer for layer: ' + layer.getType());\n    }\n    return renderer;\n  }\n};\n\n\n/**\n * @param {string} layerKey Layer key.\n * @protected\n * @return {module:ol/renderer/Layer} Layer renderer.\n */\nMapRenderer.prototype.getLayerRendererByKey = function(layerKey) {\n  return this.layerRenderers_[layerKey];\n};\n\n\n/**\n * @protected\n * @return {Object.<string, module:ol/renderer/Layer>} Layer renderers.\n */\nMapRenderer.prototype.getLayerRenderers = function() {\n  return this.layerRenderers_;\n};\n\n\n/**\n * @return {module:ol/PluggableMap} Map.\n */\nMapRenderer.prototype.getMap = function() {\n  return this.map_;\n};\n\n\n/**\n * Handle changes in a layer renderer.\n * @private\n */\nMapRenderer.prototype.handleLayerRendererChange_ = function() {\n  this.map_.render();\n};\n\n\n/**\n * @param {string} layerKey Layer key.\n * @return {module:ol/renderer/Layer} Layer renderer.\n * @private\n */\nMapRenderer.prototype.removeLayerRendererByKey_ = function(layerKey) {\n  const layerRenderer = this.layerRenderers_[layerKey];\n  delete this.layerRenderers_[layerKey];\n\n  unlistenByKey(this.layerRendererListeners_[layerKey]);\n  delete this.layerRendererListeners_[layerKey];\n\n  return layerRenderer;\n};\n\n\n/**\n * Render.\n * @param {?module:ol/PluggableMap~FrameState} frameState Frame state.\n */\nMapRenderer.prototype.renderFrame = UNDEFINED;\n\n\n/**\n * @param {module:ol/PluggableMap} map Map.\n * @param {module:ol/PluggableMap~FrameState} frameState Frame state.\n * @private\n */\nMapRenderer.prototype.removeUnusedLayerRenderers_ = function(map, frameState) {\n  for (const layerKey in this.layerRenderers_) {\n    if (!frameState || !(layerKey in frameState.layerStates)) {\n      this.removeLayerRendererByKey_(layerKey).dispose();\n    }\n  }\n};\n\n\n/**\n * @param {module:ol/PluggableMap~FrameState} frameState Frame state.\n * @protected\n */\nMapRenderer.prototype.scheduleExpireIconCache = function(frameState) {\n  frameState.postRenderFunctions.push(/** @type {module:ol/PluggableMap~PostRenderFunction} */ (expireIconCache));\n};\n\n\n/**\n * @param {!module:ol/PluggableMap~FrameState} frameState Frame state.\n * @protected\n */\nMapRenderer.prototype.scheduleRemoveUnusedLayerRenderers = function(frameState) {\n  for (const layerKey in this.layerRenderers_) {\n    if (!(layerKey in frameState.layerStates)) {\n      frameState.postRenderFunctions.push(\n        /** @type {module:ol/PluggableMap~PostRenderFunction} */ (this.removeUnusedLayerRenderers_.bind(this))\n      );\n      return;\n    }\n  }\n};\n\n\n/**\n * @param {module:ol/layer/Layer~State} state1 First layer state.\n * @param {module:ol/layer/Layer~State} state2 Second layer state.\n * @return {number} The zIndex difference.\n */\nexport function sortByZIndex(state1, state2) {\n  return state1.zIndex - state2.zIndex;\n}\nexport default MapRenderer;\n","/**\n * @module ol/tilegrid/common\n */\n\n/**\n * Default maximum zoom for default tile grids.\n * @type {number}\n */\nexport const DEFAULT_MAX_ZOOM = 42;\n\n/**\n * Default tile size.\n * @type {number}\n */\nexport const DEFAULT_TILE_SIZE = 256;\n","/**\n * @module ol/format/XLink\n */\n\n\n/**\n * @const\n * @type {string}\n */\nconst NAMESPACE_URI = 'http://www.w3.org/1999/xlink';\n\n\n/**\n * @param {Node} node Node.\n * @return {boolean|undefined} Boolean.\n */\nexport function readHref(node) {\n  return node.getAttributeNS(NAMESPACE_URI, 'href');\n}\n","/**\n * @module ol/format/XML\n */\nimport {isDocument, isNode, parse} from '../xml.js';\n\n/**\n * @classdesc\n * Generic format for reading non-feature XML data\n *\n * @constructor\n * @abstract\n * @struct\n */\nconst XML = function() {\n};\n\n\n/**\n * @param {Document|Node|string} source Source.\n * @return {Object} The parsed result.\n */\nXML.prototype.read = function(source) {\n  if (isDocument(source)) {\n    return this.readFromDocument(/** @type {Document} */ (source));\n  } else if (isNode(source)) {\n    return this.readFromNode(/** @type {Node} */ (source));\n  } else if (typeof source === 'string') {\n    const doc = parse(source);\n    return this.readFromDocument(doc);\n  } else {\n    return null;\n  }\n};\n\n\n/**\n * @abstract\n * @param {Document} doc Document.\n * @return {Object} Object\n */\nXML.prototype.readFromDocument = function(doc) {};\n\n\n/**\n * @abstract\n * @param {Node} node Node.\n * @return {Object} Object\n */\nXML.prototype.readFromNode = function(node) {};\nexport default XML;\n","/**\n * @module ol/format/TextFeature\n */\nimport {inherits} from '../util.js';\nimport FeatureFormat from '../format/Feature.js';\nimport FormatType from '../format/FormatType.js';\n\n/**\n * @classdesc\n * Abstract base class; normally only used for creating subclasses and not\n * instantiated in apps.\n * Base class for text feature formats.\n *\n * @constructor\n * @abstract\n * @extends {module:ol/format/Feature}\n */\nconst TextFeature = function() {\n  FeatureFormat.call(this);\n};\n\ninherits(TextFeature, FeatureFormat);\n\n\n/**\n * @param {Document|Node|Object|string} source Source.\n * @return {string} Text.\n */\nfunction getText(source) {\n  if (typeof source === 'string') {\n    return source;\n  } else {\n    return '';\n  }\n}\n\n\n/**\n * @inheritDoc\n */\nTextFeature.prototype.getType = function() {\n  return FormatType.TEXT;\n};\n\n\n/**\n * @inheritDoc\n */\nTextFeature.prototype.readFeature = function(source, opt_options) {\n  return this.readFeatureFromText(getText(source), this.adaptOptions(opt_options));\n};\n\n\n/**\n * @abstract\n * @param {string} text Text.\n * @param {module:ol/format/Feature~ReadOptions=} opt_options Read options.\n * @protected\n * @return {module:ol/Feature} Feature.\n */\nTextFeature.prototype.readFeatureFromText = function(text, opt_options) {};\n\n\n/**\n * @inheritDoc\n */\nTextFeature.prototype.readFeatures = function(source, opt_options) {\n  return this.readFeaturesFromText(getText(source), this.adaptOptions(opt_options));\n};\n\n\n/**\n * @abstract\n * @param {string} text Text.\n * @param {module:ol/format/Feature~ReadOptions=} opt_options Read options.\n * @protected\n * @return {Array.<module:ol/Feature>} Features.\n */\nTextFeature.prototype.readFeaturesFromText = function(text, opt_options) {};\n\n\n/**\n * @inheritDoc\n */\nTextFeature.prototype.readGeometry = function(source, opt_options) {\n  return this.readGeometryFromText(getText(source), this.adaptOptions(opt_options));\n};\n\n\n/**\n * @abstract\n * @param {string} text Text.\n * @param {module:ol/format/Feature~ReadOptions=} opt_options Read options.\n * @protected\n * @return {module:ol/geom/Geometry} Geometry.\n */\nTextFeature.prototype.readGeometryFromText = function(text, opt_options) {};\n\n\n/**\n * @inheritDoc\n */\nTextFeature.prototype.readProjection = function(source) {\n  return this.readProjectionFromText(getText(source));\n};\n\n\n/**\n * @param {string} text Text.\n * @protected\n * @return {module:ol/proj/Projection} Projection.\n */\nTextFeature.prototype.readProjectionFromText = function(text) {\n  return this.dataProjection;\n};\n\n\n/**\n * @inheritDoc\n */\nTextFeature.prototype.writeFeature = function(feature, opt_options) {\n  return this.writeFeatureText(feature, this.adaptOptions(opt_options));\n};\n\n\n/**\n * @abstract\n * @param {module:ol/Feature} feature Features.\n * @param {module:ol/format/Feature~WriteOptions=} opt_options Write options.\n * @protected\n * @return {string} Text.\n */\nTextFeature.prototype.writeFeatureText = function(feature, opt_options) {};\n\n\n/**\n * @inheritDoc\n */\nTextFeature.prototype.writeFeatures = function(features, opt_options) {\n  return this.writeFeaturesText(features, this.adaptOptions(opt_options));\n};\n\n\n/**\n * @abstract\n * @param {Array.<module:ol/Feature>} features Features.\n * @param {module:ol/format/Feature~WriteOptions=} opt_options Write options.\n * @protected\n * @return {string} Text.\n */\nTextFeature.prototype.writeFeaturesText = function(features, opt_options) {};\n\n\n/**\n * @inheritDoc\n */\nTextFeature.prototype.writeGeometry = function(geometry, opt_options) {\n  return this.writeGeometryText(geometry, this.adaptOptions(opt_options));\n};\n\n\n/**\n * @abstract\n * @param {module:ol/geom/Geometry} geometry Geometry.\n * @param {module:ol/format/Feature~WriteOptions=} opt_options Write options.\n * @protected\n * @return {string} Text.\n */\nTextFeature.prototype.writeGeometryText = function(geometry, opt_options) {};\nexport default TextFeature;\n","/**\n * @module ol/geom/flat/interpolate\n */\nimport {binarySearch} from '../../array.js';\nimport {lerp} from '../../math.js';\n\n\n/**\n * @param {Array.<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {number} end End.\n * @param {number} stride Stride.\n * @param {number} fraction Fraction.\n * @param {Array.<number>=} opt_dest Destination.\n * @return {Array.<number>} Destination.\n */\nexport function interpolatePoint(flatCoordinates, offset, end, stride, fraction, opt_dest) {\n  let pointX = NaN;\n  let pointY = NaN;\n  const n = (end - offset) / stride;\n  if (n === 1) {\n    pointX = flatCoordinates[offset];\n    pointY = flatCoordinates[offset + 1];\n  } else if (n == 2) {\n    pointX = (1 - fraction) * flatCoordinates[offset] +\n        fraction * flatCoordinates[offset + stride];\n    pointY = (1 - fraction) * flatCoordinates[offset + 1] +\n        fraction * flatCoordinates[offset + stride + 1];\n  } else if (n !== 0) {\n    let x1 = flatCoordinates[offset];\n    let y1 = flatCoordinates[offset + 1];\n    let length = 0;\n    const cumulativeLengths = [0];\n    for (let i = offset + stride; i < end; i += stride) {\n      const x2 = flatCoordinates[i];\n      const y2 = flatCoordinates[i + 1];\n      length += Math.sqrt((x2 - x1) * (x2 - x1) + (y2 - y1) * (y2 - y1));\n      cumulativeLengths.push(length);\n      x1 = x2;\n      y1 = y2;\n    }\n    const target = fraction * length;\n    const index = binarySearch(cumulativeLengths, target);\n    if (index < 0) {\n      const t = (target - cumulativeLengths[-index - 2]) /\n          (cumulativeLengths[-index - 1] - cumulativeLengths[-index - 2]);\n      const o = offset + (-index - 2) * stride;\n      pointX = lerp(\n        flatCoordinates[o], flatCoordinates[o + stride], t);\n      pointY = lerp(\n        flatCoordinates[o + 1], flatCoordinates[o + stride + 1], t);\n    } else {\n      pointX = flatCoordinates[offset + index * stride];\n      pointY = flatCoordinates[offset + index * stride + 1];\n    }\n  }\n  if (opt_dest) {\n    opt_dest[0] = pointX;\n    opt_dest[1] = pointY;\n    return opt_dest;\n  } else {\n    return [pointX, pointY];\n  }\n}\n\n\n/**\n * @param {Array.<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {number} end End.\n * @param {number} stride Stride.\n * @param {number} m M.\n * @param {boolean} extrapolate Extrapolate.\n * @return {module:ol/coordinate~Coordinate} Coordinate.\n */\nexport function lineStringCoordinateAtM(flatCoordinates, offset, end, stride, m, extrapolate) {\n  if (end == offset) {\n    return null;\n  }\n  let coordinate;\n  if (m < flatCoordinates[offset + stride - 1]) {\n    if (extrapolate) {\n      coordinate = flatCoordinates.slice(offset, offset + stride);\n      coordinate[stride - 1] = m;\n      return coordinate;\n    } else {\n      return null;\n    }\n  } else if (flatCoordinates[end - 1] < m) {\n    if (extrapolate) {\n      coordinate = flatCoordinates.slice(end - stride, end);\n      coordinate[stride - 1] = m;\n      return coordinate;\n    } else {\n      return null;\n    }\n  }\n  // FIXME use O(1) search\n  if (m == flatCoordinates[offset + stride - 1]) {\n    return flatCoordinates.slice(offset, offset + stride);\n  }\n  let lo = offset / stride;\n  let hi = end / stride;\n  while (lo < hi) {\n    const mid = (lo + hi) >> 1;\n    if (m < flatCoordinates[(mid + 1) * stride - 1]) {\n      hi = mid;\n    } else {\n      lo = mid + 1;\n    }\n  }\n  const m0 = flatCoordinates[lo * stride - 1];\n  if (m == m0) {\n    return flatCoordinates.slice((lo - 1) * stride, (lo - 1) * stride + stride);\n  }\n  const m1 = flatCoordinates[(lo + 1) * stride - 1];\n  const t = (m - m0) / (m1 - m0);\n  coordinate = [];\n  for (let i = 0; i < stride - 1; ++i) {\n    coordinate.push(lerp(flatCoordinates[(lo - 1) * stride + i],\n      flatCoordinates[lo * stride + i], t));\n  }\n  coordinate.push(m);\n  return coordinate;\n}\n\n\n/**\n * @param {Array.<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {Array.<number>} ends Ends.\n * @param {number} stride Stride.\n * @param {number} m M.\n * @param {boolean} extrapolate Extrapolate.\n * @param {boolean} interpolate Interpolate.\n * @return {module:ol/coordinate~Coordinate} Coordinate.\n */\nexport function lineStringsCoordinateAtM(\n  flatCoordinates, offset, ends, stride, m, extrapolate, interpolate) {\n  if (interpolate) {\n    return lineStringCoordinateAtM(\n      flatCoordinates, offset, ends[ends.length - 1], stride, m, extrapolate);\n  }\n  let coordinate;\n  if (m < flatCoordinates[stride - 1]) {\n    if (extrapolate) {\n      coordinate = flatCoordinates.slice(0, stride);\n      coordinate[stride - 1] = m;\n      return coordinate;\n    } else {\n      return null;\n    }\n  }\n  if (flatCoordinates[flatCoordinates.length - 1] < m) {\n    if (extrapolate) {\n      coordinate = flatCoordinates.slice(flatCoordinates.length - stride);\n      coordinate[stride - 1] = m;\n      return coordinate;\n    } else {\n      return null;\n    }\n  }\n  for (let i = 0, ii = ends.length; i < ii; ++i) {\n    const end = ends[i];\n    if (offset == end) {\n      continue;\n    }\n    if (m < flatCoordinates[offset + stride - 1]) {\n      return null;\n    } else if (m <= flatCoordinates[end - 1]) {\n      return lineStringCoordinateAtM(\n        flatCoordinates, offset, end, stride, m, false);\n    }\n    offset = end;\n  }\n  return null;\n}\n","/**\n * @module ol/geom/GeometryCollection\n */\nimport {inherits} from '../util.js';\nimport {listen, unlisten} from '../events.js';\nimport EventType from '../events/EventType.js';\nimport {createOrUpdateEmpty, closestSquaredDistanceXY, extend, getCenter} from '../extent.js';\nimport Geometry from '../geom/Geometry.js';\nimport GeometryType from '../geom/GeometryType.js';\nimport {clear} from '../obj.js';\n\n/**\n * @classdesc\n * An array of {@link module:ol/geom/Geometry} objects.\n *\n * @constructor\n * @extends {module:ol/geom/Geometry}\n * @param {Array.<module:ol/geom/Geometry>=} opt_geometries Geometries.\n * @api\n */\nconst GeometryCollection = function(opt_geometries) {\n\n  Geometry.call(this);\n\n  /**\n   * @private\n   * @type {Array.<module:ol/geom/Geometry>}\n   */\n  this.geometries_ = opt_geometries ? opt_geometries : null;\n\n  this.listenGeometriesChange_();\n};\n\ninherits(GeometryCollection, Geometry);\n\n\n/**\n * @param {Array.<module:ol/geom/Geometry>} geometries Geometries.\n * @return {Array.<module:ol/geom/Geometry>} Cloned geometries.\n */\nfunction cloneGeometries(geometries) {\n  const clonedGeometries = [];\n  for (let i = 0, ii = geometries.length; i < ii; ++i) {\n    clonedGeometries.push(geometries[i].clone());\n  }\n  return clonedGeometries;\n}\n\n\n/**\n * @private\n */\nGeometryCollection.prototype.unlistenGeometriesChange_ = function() {\n  if (!this.geometries_) {\n    return;\n  }\n  for (let i = 0, ii = this.geometries_.length; i < ii; ++i) {\n    unlisten(\n      this.geometries_[i], EventType.CHANGE,\n      this.changed, this);\n  }\n};\n\n\n/**\n * @private\n */\nGeometryCollection.prototype.listenGeometriesChange_ = function() {\n  if (!this.geometries_) {\n    return;\n  }\n  for (let i = 0, ii = this.geometries_.length; i < ii; ++i) {\n    listen(\n      this.geometries_[i], EventType.CHANGE,\n      this.changed, this);\n  }\n};\n\n\n/**\n * Make a complete copy of the geometry.\n * @return {!module:ol/geom/GeometryCollection} Clone.\n * @override\n * @api\n */\nGeometryCollection.prototype.clone = function() {\n  const geometryCollection = new GeometryCollection(null);\n  geometryCollection.setGeometries(this.geometries_);\n  return geometryCollection;\n};\n\n\n/**\n * @inheritDoc\n */\nGeometryCollection.prototype.closestPointXY = function(x, y, closestPoint, minSquaredDistance) {\n  if (minSquaredDistance < closestSquaredDistanceXY(this.getExtent(), x, y)) {\n    return minSquaredDistance;\n  }\n  const geometries = this.geometries_;\n  for (let i = 0, ii = geometries.length; i < ii; ++i) {\n    minSquaredDistance = geometries[i].closestPointXY(\n      x, y, closestPoint, minSquaredDistance);\n  }\n  return minSquaredDistance;\n};\n\n\n/**\n * @inheritDoc\n */\nGeometryCollection.prototype.containsXY = function(x, y) {\n  const geometries = this.geometries_;\n  for (let i = 0, ii = geometries.length; i < ii; ++i) {\n    if (geometries[i].containsXY(x, y)) {\n      return true;\n    }\n  }\n  return false;\n};\n\n\n/**\n * @inheritDoc\n */\nGeometryCollection.prototype.computeExtent = function(extent) {\n  createOrUpdateEmpty(extent);\n  const geometries = this.geometries_;\n  for (let i = 0, ii = geometries.length; i < ii; ++i) {\n    extend(extent, geometries[i].getExtent());\n  }\n  return extent;\n};\n\n\n/**\n * Return the geometries that make up this geometry collection.\n * @return {Array.<module:ol/geom/Geometry>} Geometries.\n * @api\n */\nGeometryCollection.prototype.getGeometries = function() {\n  return cloneGeometries(this.geometries_);\n};\n\n\n/**\n * @return {Array.<module:ol/geom/Geometry>} Geometries.\n */\nGeometryCollection.prototype.getGeometriesArray = function() {\n  return this.geometries_;\n};\n\n\n/**\n * @inheritDoc\n */\nGeometryCollection.prototype.getSimplifiedGeometry = function(squaredTolerance) {\n  if (this.simplifiedGeometryRevision != this.getRevision()) {\n    clear(this.simplifiedGeometryCache);\n    this.simplifiedGeometryMaxMinSquaredTolerance = 0;\n    this.simplifiedGeometryRevision = this.getRevision();\n  }\n  if (squaredTolerance < 0 ||\n      (this.simplifiedGeometryMaxMinSquaredTolerance !== 0 &&\n       squaredTolerance < this.simplifiedGeometryMaxMinSquaredTolerance)) {\n    return this;\n  }\n  const key = squaredTolerance.toString();\n  if (this.simplifiedGeometryCache.hasOwnProperty(key)) {\n    return this.simplifiedGeometryCache[key];\n  } else {\n    const simplifiedGeometries = [];\n    const geometries = this.geometries_;\n    let simplified = false;\n    for (let i = 0, ii = geometries.length; i < ii; ++i) {\n      const geometry = geometries[i];\n      const simplifiedGeometry = geometry.getSimplifiedGeometry(squaredTolerance);\n      simplifiedGeometries.push(simplifiedGeometry);\n      if (simplifiedGeometry !== geometry) {\n        simplified = true;\n      }\n    }\n    if (simplified) {\n      const simplifiedGeometryCollection = new GeometryCollection(null);\n      simplifiedGeometryCollection.setGeometriesArray(simplifiedGeometries);\n      this.simplifiedGeometryCache[key] = simplifiedGeometryCollection;\n      return simplifiedGeometryCollection;\n    } else {\n      this.simplifiedGeometryMaxMinSquaredTolerance = squaredTolerance;\n      return this;\n    }\n  }\n};\n\n\n/**\n * @inheritDoc\n * @api\n */\nGeometryCollection.prototype.getType = function() {\n  return GeometryType.GEOMETRY_COLLECTION;\n};\n\n\n/**\n * @inheritDoc\n * @api\n */\nGeometryCollection.prototype.intersectsExtent = function(extent) {\n  const geometries = this.geometries_;\n  for (let i = 0, ii = geometries.length; i < ii; ++i) {\n    if (geometries[i].intersectsExtent(extent)) {\n      return true;\n    }\n  }\n  return false;\n};\n\n\n/**\n * @return {boolean} Is empty.\n */\nGeometryCollection.prototype.isEmpty = function() {\n  return this.geometries_.length === 0;\n};\n\n\n/**\n * @inheritDoc\n * @api\n */\nGeometryCollection.prototype.rotate = function(angle, anchor) {\n  const geometries = this.geometries_;\n  for (let i = 0, ii = geometries.length; i < ii; ++i) {\n    geometries[i].rotate(angle, anchor);\n  }\n  this.changed();\n};\n\n\n/**\n * @inheritDoc\n * @api\n */\nGeometryCollection.prototype.scale = function(sx, opt_sy, opt_anchor) {\n  let anchor = opt_anchor;\n  if (!anchor) {\n    anchor = getCenter(this.getExtent());\n  }\n  const geometries = this.geometries_;\n  for (let i = 0, ii = geometries.length; i < ii; ++i) {\n    geometries[i].scale(sx, opt_sy, anchor);\n  }\n  this.changed();\n};\n\n\n/**\n * Set the geometries that make up this geometry collection.\n * @param {Array.<module:ol/geom/Geometry>} geometries Geometries.\n * @api\n */\nGeometryCollection.prototype.setGeometries = function(geometries) {\n  this.setGeometriesArray(cloneGeometries(geometries));\n};\n\n\n/**\n * @param {Array.<module:ol/geom/Geometry>} geometries Geometries.\n */\nGeometryCollection.prototype.setGeometriesArray = function(geometries) {\n  this.unlistenGeometriesChange_();\n  this.geometries_ = geometries;\n  this.listenGeometriesChange_();\n  this.changed();\n};\n\n\n/**\n * @inheritDoc\n * @api\n */\nGeometryCollection.prototype.applyTransform = function(transformFn) {\n  const geometries = this.geometries_;\n  for (let i = 0, ii = geometries.length; i < ii; ++i) {\n    geometries[i].applyTransform(transformFn);\n  }\n  this.changed();\n};\n\n\n/**\n * Translate the geometry.\n * @param {number} deltaX Delta X.\n * @param {number} deltaY Delta Y.\n * @override\n * @api\n */\nGeometryCollection.prototype.translate = function(deltaX, deltaY) {\n  const geometries = this.geometries_;\n  for (let i = 0, ii = geometries.length; i < ii; ++i) {\n    geometries[i].translate(deltaX, deltaY);\n  }\n  this.changed();\n};\n\n\n/**\n * @inheritDoc\n */\nGeometryCollection.prototype.disposeInternal = function() {\n  this.unlistenGeometriesChange_();\n  Geometry.prototype.disposeInternal.call(this);\n};\nexport default GeometryCollection;\n","/**\n * @module ol/format/JSONFeature\n */\nimport {inherits} from '../util.js';\nimport FeatureFormat from '../format/Feature.js';\nimport FormatType from '../format/FormatType.js';\n\n/**\n * @classdesc\n * Abstract base class; normally only used for creating subclasses and not\n * instantiated in apps.\n * Base class for JSON feature formats.\n *\n * @constructor\n * @abstract\n * @extends {module:ol/format/Feature}\n */\nconst JSONFeature = function() {\n  FeatureFormat.call(this);\n};\n\ninherits(JSONFeature, FeatureFormat);\n\n\n/**\n * @param {Document|Node|Object|string} source Source.\n * @return {Object} Object.\n */\nfunction getObject(source) {\n  if (typeof source === 'string') {\n    const object = JSON.parse(source);\n    return object ? /** @type {Object} */ (object) : null;\n  } else if (source !== null) {\n    return source;\n  } else {\n    return null;\n  }\n}\n\n\n/**\n * @inheritDoc\n */\nJSONFeature.prototype.getType = function() {\n  return FormatType.JSON;\n};\n\n\n/**\n * @inheritDoc\n */\nJSONFeature.prototype.readFeature = function(source, opt_options) {\n  return this.readFeatureFromObject(\n    getObject(source), this.getReadOptions(source, opt_options));\n};\n\n\n/**\n * @inheritDoc\n */\nJSONFeature.prototype.readFeatures = function(source, opt_options) {\n  return this.readFeaturesFromObject(\n    getObject(source), this.getReadOptions(source, opt_options));\n};\n\n\n/**\n * @abstract\n * @param {Object} object Object.\n * @param {module:ol/format/Feature~ReadOptions=} opt_options Read options.\n * @protected\n * @return {module:ol/Feature} Feature.\n */\nJSONFeature.prototype.readFeatureFromObject = function(object, opt_options) {};\n\n\n/**\n * @abstract\n * @param {Object} object Object.\n * @param {module:ol/format/Feature~ReadOptions=} opt_options Read options.\n * @protected\n * @return {Array.<module:ol/Feature>} Features.\n */\nJSONFeature.prototype.readFeaturesFromObject = function(object, opt_options) {};\n\n\n/**\n * @inheritDoc\n */\nJSONFeature.prototype.readGeometry = function(source, opt_options) {\n  return this.readGeometryFromObject(\n    getObject(source), this.getReadOptions(source, opt_options));\n};\n\n\n/**\n * @abstract\n * @param {Object} object Object.\n * @param {module:ol/format/Feature~ReadOptions=} opt_options Read options.\n * @protected\n * @return {module:ol/geom/Geometry} Geometry.\n */\nJSONFeature.prototype.readGeometryFromObject = function(object, opt_options) {};\n\n\n/**\n * @inheritDoc\n */\nJSONFeature.prototype.readProjection = function(source) {\n  return this.readProjectionFromObject(getObject(source));\n};\n\n\n/**\n * @abstract\n * @param {Object} object Object.\n * @protected\n * @return {module:ol/proj/Projection} Projection.\n */\nJSONFeature.prototype.readProjectionFromObject = function(object) {};\n\n\n/**\n * @inheritDoc\n */\nJSONFeature.prototype.writeFeature = function(feature, opt_options) {\n  return JSON.stringify(this.writeFeatureObject(feature, opt_options));\n};\n\n\n/**\n * @abstract\n * @param {module:ol/Feature} feature Feature.\n * @param {module:ol/format/Feature~WriteOptions=} opt_options Write options.\n * @return {Object} Object.\n */\nJSONFeature.prototype.writeFeatureObject = function(feature, opt_options) {};\n\n\n/**\n * @inheritDoc\n */\nJSONFeature.prototype.writeFeatures = function(features, opt_options) {\n  return JSON.stringify(this.writeFeaturesObject(features, opt_options));\n};\n\n\n/**\n * @abstract\n * @param {Array.<module:ol/Feature>} features Features.\n * @param {module:ol/format/Feature~WriteOptions=} opt_options Write options.\n * @return {Object} Object.\n */\nJSONFeature.prototype.writeFeaturesObject = function(features, opt_options) {};\n\n\n/**\n * @inheritDoc\n */\nJSONFeature.prototype.writeGeometry = function(geometry, opt_options) {\n  return JSON.stringify(this.writeGeometryObject(geometry, opt_options));\n};\n\n\n/**\n * @abstract\n * @param {module:ol/geom/Geometry} geometry Geometry.\n * @param {module:ol/format/Feature~WriteOptions=} opt_options Write options.\n * @return {Object} Object.\n */\nJSONFeature.prototype.writeGeometryObject = function(geometry, opt_options) {};\nexport default JSONFeature;\n","/**\n * @module ol/source/Source\n */\nimport {inherits} from '../util.js';\nimport {UNDEFINED} from '../functions.js';\nimport BaseObject from '../Object.js';\nimport {get as getProjection} from '../proj.js';\nimport SourceState from '../source/State.js';\n\n\n/**\n * A function that returns a string or an array of strings representing source\n * attributions.\n *\n * @typedef {function(module:ol/PluggableMap~FrameState): (string|Array.<string>)} Attribution\n */\n\n\n/**\n * A type that can be used to provide attribution information for data sources.\n *\n * It represents either\n * * a simple string (e.g. `'© Acme Inc.'`)\n * * an array of simple strings (e.g. `['© Acme Inc.', '© Bacme Inc.']`)\n * * a function that returns a string or array of strings (`{@link module:ol/source/Source~Attribution}`)\n *\n * @typedef {string|Array.<string>|module:ol/source/Source~Attribution} AttributionLike\n */\n\n\n/**\n * @typedef {Object} Options\n * @property {module:ol/source/Source~AttributionLike} [attributions]\n * @property {module:ol/proj~ProjectionLike} projection\n * @property {module:ol/source/State} [state]\n * @property {boolean} [wrapX]\n */\n\n\n/**\n * @classdesc\n * Abstract base class; normally only used for creating subclasses and not\n * instantiated in apps.\n * Base class for {@link module:ol/layer/Layer~Layer} sources.\n *\n * A generic `change` event is triggered when the state of the source changes.\n *\n * @constructor\n * @abstract\n * @extends {module:ol/Object}\n * @param {module:ol/source/Source~Options} options Source options.\n * @api\n */\nconst Source = function(options) {\n\n  BaseObject.call(this);\n\n  /**\n   * @private\n   * @type {module:ol/proj/Projection}\n   */\n  this.projection_ = getProjection(options.projection);\n\n  /**\n   * @private\n   * @type {?module:ol/source/Source~Attribution}\n   */\n  this.attributions_ = this.adaptAttributions_(options.attributions);\n\n  /**\n   * @private\n   * @type {module:ol/source/State}\n   */\n  this.state_ = options.state !== undefined ?\n    options.state : SourceState.READY;\n\n  /**\n   * @private\n   * @type {boolean}\n   */\n  this.wrapX_ = options.wrapX !== undefined ? options.wrapX : false;\n\n};\n\ninherits(Source, BaseObject);\n\n/**\n * Turns the attributions option into an attributions function.\n * @param {module:ol/source/Source~AttributionLike|undefined} attributionLike The attribution option.\n * @return {?module:ol/source/Source~Attribution} An attribution function (or null).\n */\nSource.prototype.adaptAttributions_ = function(attributionLike) {\n  if (!attributionLike) {\n    return null;\n  }\n  if (Array.isArray(attributionLike)) {\n    return function(frameState) {\n      return attributionLike;\n    };\n  }\n\n  if (typeof attributionLike === 'function') {\n    return attributionLike;\n  }\n\n  return function(frameState) {\n    return [attributionLike];\n  };\n};\n\n/**\n * @param {module:ol/coordinate~Coordinate} coordinate Coordinate.\n * @param {number} resolution Resolution.\n * @param {number} rotation Rotation.\n * @param {number} hitTolerance Hit tolerance in pixels.\n * @param {Object.<string, boolean>} skippedFeatureUids Skipped feature uids.\n * @param {function((module:ol/Feature|module:ol/render/Feature)): T} callback Feature callback.\n * @return {T|undefined} Callback result.\n * @template T\n */\nSource.prototype.forEachFeatureAtCoordinate = UNDEFINED;\n\n\n/**\n * Get the attribution function for the source.\n * @return {?module:ol/source/Source~Attribution} Attribution function.\n */\nSource.prototype.getAttributions = function() {\n  return this.attributions_;\n};\n\n\n/**\n * Get the projection of the source.\n * @return {module:ol/proj/Projection} Projection.\n * @api\n */\nSource.prototype.getProjection = function() {\n  return this.projection_;\n};\n\n\n/**\n * @abstract\n * @return {Array.<number>|undefined} Resolutions.\n */\nSource.prototype.getResolutions = function() {};\n\n\n/**\n * Get the state of the source, see {@link module:ol/source/State~State} for possible states.\n * @return {module:ol/source/State} State.\n * @api\n */\nSource.prototype.getState = function() {\n  return this.state_;\n};\n\n\n/**\n * @return {boolean|undefined} Wrap X.\n */\nSource.prototype.getWrapX = function() {\n  return this.wrapX_;\n};\n\n\n/**\n * Refreshes the source and finally dispatches a 'change' event.\n * @api\n */\nSource.prototype.refresh = function() {\n  this.changed();\n};\n\n\n/**\n * Set the attributions of the source.\n * @param {module:ol/source/Source~AttributionLike|undefined} attributions Attributions.\n *     Can be passed as `string`, `Array<string>`, `{@link module:ol/source/Source~Attribution}`,\n *     or `undefined`.\n * @api\n */\nSource.prototype.setAttributions = function(attributions) {\n  this.attributions_ = this.adaptAttributions_(attributions);\n  this.changed();\n};\n\n\n/**\n * Set the state of the source.\n * @param {module:ol/source/State} state State.\n * @protected\n */\nSource.prototype.setState = function(state) {\n  this.state_ = state;\n  this.changed();\n};\nexport default Source;\n","/**\n * @module ol/TileRange\n */\n/**\n * A representation of a contiguous block of tiles.  A tile range is specified\n * by its min/max tile coordinates and is inclusive of coordinates.\n *\n * @constructor\n * @param {number} minX Minimum X.\n * @param {number} maxX Maximum X.\n * @param {number} minY Minimum Y.\n * @param {number} maxY Maximum Y.\n * @struct\n */\nconst TileRange = function(minX, maxX, minY, maxY) {\n\n  /**\n   * @type {number}\n   */\n  this.minX = minX;\n\n  /**\n   * @type {number}\n   */\n  this.maxX = maxX;\n\n  /**\n   * @type {number}\n   */\n  this.minY = minY;\n\n  /**\n   * @type {number}\n   */\n  this.maxY = maxY;\n\n};\n\n\n/**\n * @param {number} minX Minimum X.\n * @param {number} maxX Maximum X.\n * @param {number} minY Minimum Y.\n * @param {number} maxY Maximum Y.\n * @param {module:ol/TileRange=} tileRange TileRange.\n * @return {module:ol/TileRange} Tile range.\n */\nexport function createOrUpdate(minX, maxX, minY, maxY, tileRange) {\n  if (tileRange !== undefined) {\n    tileRange.minX = minX;\n    tileRange.maxX = maxX;\n    tileRange.minY = minY;\n    tileRange.maxY = maxY;\n    return tileRange;\n  } else {\n    return new TileRange(minX, maxX, minY, maxY);\n  }\n}\n\n\n/**\n * @param {module:ol/tilecoord~TileCoord} tileCoord Tile coordinate.\n * @return {boolean} Contains tile coordinate.\n */\nTileRange.prototype.contains = function(tileCoord) {\n  return this.containsXY(tileCoord[1], tileCoord[2]);\n};\n\n\n/**\n * @param {module:ol/TileRange} tileRange Tile range.\n * @return {boolean} Contains.\n */\nTileRange.prototype.containsTileRange = function(tileRange) {\n  return this.minX <= tileRange.minX && tileRange.maxX <= this.maxX &&\n      this.minY <= tileRange.minY && tileRange.maxY <= this.maxY;\n};\n\n\n/**\n * @param {number} x Tile coordinate x.\n * @param {number} y Tile coordinate y.\n * @return {boolean} Contains coordinate.\n */\nTileRange.prototype.containsXY = function(x, y) {\n  return this.minX <= x && x <= this.maxX && this.minY <= y && y <= this.maxY;\n};\n\n\n/**\n * @param {module:ol/TileRange} tileRange Tile range.\n * @return {boolean} Equals.\n */\nTileRange.prototype.equals = function(tileRange) {\n  return this.minX == tileRange.minX && this.minY == tileRange.minY &&\n      this.maxX == tileRange.maxX && this.maxY == tileRange.maxY;\n};\n\n\n/**\n * @param {module:ol/TileRange} tileRange Tile range.\n */\nTileRange.prototype.extend = function(tileRange) {\n  if (tileRange.minX < this.minX) {\n    this.minX = tileRange.minX;\n  }\n  if (tileRange.maxX > this.maxX) {\n    this.maxX = tileRange.maxX;\n  }\n  if (tileRange.minY < this.minY) {\n    this.minY = tileRange.minY;\n  }\n  if (tileRange.maxY > this.maxY) {\n    this.maxY = tileRange.maxY;\n  }\n};\n\n\n/**\n * @return {number} Height.\n */\nTileRange.prototype.getHeight = function() {\n  return this.maxY - this.minY + 1;\n};\n\n\n/**\n * @return {module:ol/size~Size} Size.\n */\nTileRange.prototype.getSize = function() {\n  return [this.getWidth(), this.getHeight()];\n};\n\n\n/**\n * @return {number} Width.\n */\nTileRange.prototype.getWidth = function() {\n  return this.maxX - this.minX + 1;\n};\n\n\n/**\n * @param {module:ol/TileRange} tileRange Tile range.\n * @return {boolean} Intersects.\n */\nTileRange.prototype.intersects = function(tileRange) {\n  return this.minX <= tileRange.maxX &&\n      this.maxX >= tileRange.minX &&\n      this.minY <= tileRange.maxY &&\n      this.maxY >= tileRange.minY;\n};\nexport default TileRange;\n","/**\n * @module ol/structs/PriorityQueue\n */\nimport {assert} from '../asserts.js';\nimport {clear} from '../obj.js';\n\n/**\n * Priority queue.\n *\n * The implementation is inspired from the Closure Library's Heap class and\n * Python's heapq module.\n *\n * @see http://closure-library.googlecode.com/svn/docs/closure_goog_structs_heap.js.source.html\n * @see http://hg.python.org/cpython/file/2.7/Lib/heapq.py\n *\n * @constructor\n * @param {function(T): number} priorityFunction Priority function.\n * @param {function(T): string} keyFunction Key function.\n * @struct\n * @template T\n */\nconst PriorityQueue = function(priorityFunction, keyFunction) {\n\n  /**\n   * @type {function(T): number}\n   * @private\n   */\n  this.priorityFunction_ = priorityFunction;\n\n  /**\n   * @type {function(T): string}\n   * @private\n   */\n  this.keyFunction_ = keyFunction;\n\n  /**\n   * @type {Array.<T>}\n   * @private\n   */\n  this.elements_ = [];\n\n  /**\n   * @type {Array.<number>}\n   * @private\n   */\n  this.priorities_ = [];\n\n  /**\n   * @type {!Object.<string, boolean>}\n   * @private\n   */\n  this.queuedElements_ = {};\n\n};\n\n\n/**\n * @type {number}\n */\nexport const DROP = Infinity;\n\n\n/**\n * FIXME empty description for jsdoc\n */\nPriorityQueue.prototype.clear = function() {\n  this.elements_.length = 0;\n  this.priorities_.length = 0;\n  clear(this.queuedElements_);\n};\n\n\n/**\n * Remove and return the highest-priority element. O(log N).\n * @return {T} Element.\n */\nPriorityQueue.prototype.dequeue = function() {\n  const elements = this.elements_;\n  const priorities = this.priorities_;\n  const element = elements[0];\n  if (elements.length == 1) {\n    elements.length = 0;\n    priorities.length = 0;\n  } else {\n    elements[0] = elements.pop();\n    priorities[0] = priorities.pop();\n    this.siftUp_(0);\n  }\n  const elementKey = this.keyFunction_(element);\n  delete this.queuedElements_[elementKey];\n  return element;\n};\n\n\n/**\n * Enqueue an element. O(log N).\n * @param {T} element Element.\n * @return {boolean} The element was added to the queue.\n */\nPriorityQueue.prototype.enqueue = function(element) {\n  assert(!(this.keyFunction_(element) in this.queuedElements_),\n    31); // Tried to enqueue an `element` that was already added to the queue\n  const priority = this.priorityFunction_(element);\n  if (priority != DROP) {\n    this.elements_.push(element);\n    this.priorities_.push(priority);\n    this.queuedElements_[this.keyFunction_(element)] = true;\n    this.siftDown_(0, this.elements_.length - 1);\n    return true;\n  }\n  return false;\n};\n\n\n/**\n * @return {number} Count.\n */\nPriorityQueue.prototype.getCount = function() {\n  return this.elements_.length;\n};\n\n\n/**\n * Gets the index of the left child of the node at the given index.\n * @param {number} index The index of the node to get the left child for.\n * @return {number} The index of the left child.\n * @private\n */\nPriorityQueue.prototype.getLeftChildIndex_ = function(index) {\n  return index * 2 + 1;\n};\n\n\n/**\n * Gets the index of the right child of the node at the given index.\n * @param {number} index The index of the node to get the right child for.\n * @return {number} The index of the right child.\n * @private\n */\nPriorityQueue.prototype.getRightChildIndex_ = function(index) {\n  return index * 2 + 2;\n};\n\n\n/**\n * Gets the index of the parent of the node at the given index.\n * @param {number} index The index of the node to get the parent for.\n * @return {number} The index of the parent.\n * @private\n */\nPriorityQueue.prototype.getParentIndex_ = function(index) {\n  return (index - 1) >> 1;\n};\n\n\n/**\n * Make this a heap. O(N).\n * @private\n */\nPriorityQueue.prototype.heapify_ = function() {\n  let i;\n  for (i = (this.elements_.length >> 1) - 1; i >= 0; i--) {\n    this.siftUp_(i);\n  }\n};\n\n\n/**\n * @return {boolean} Is empty.\n */\nPriorityQueue.prototype.isEmpty = function() {\n  return this.elements_.length === 0;\n};\n\n\n/**\n * @param {string} key Key.\n * @return {boolean} Is key queued.\n */\nPriorityQueue.prototype.isKeyQueued = function(key) {\n  return key in this.queuedElements_;\n};\n\n\n/**\n * @param {T} element Element.\n * @return {boolean} Is queued.\n */\nPriorityQueue.prototype.isQueued = function(element) {\n  return this.isKeyQueued(this.keyFunction_(element));\n};\n\n\n/**\n * @param {number} index The index of the node to move down.\n * @private\n */\nPriorityQueue.prototype.siftUp_ = function(index) {\n  const elements = this.elements_;\n  const priorities = this.priorities_;\n  const count = elements.length;\n  const element = elements[index];\n  const priority = priorities[index];\n  const startIndex = index;\n\n  while (index < (count >> 1)) {\n    const lIndex = this.getLeftChildIndex_(index);\n    const rIndex = this.getRightChildIndex_(index);\n\n    const smallerChildIndex = rIndex < count &&\n        priorities[rIndex] < priorities[lIndex] ?\n      rIndex : lIndex;\n\n    elements[index] = elements[smallerChildIndex];\n    priorities[index] = priorities[smallerChildIndex];\n    index = smallerChildIndex;\n  }\n\n  elements[index] = element;\n  priorities[index] = priority;\n  this.siftDown_(startIndex, index);\n};\n\n\n/**\n * @param {number} startIndex The index of the root.\n * @param {number} index The index of the node to move up.\n * @private\n */\nPriorityQueue.prototype.siftDown_ = function(startIndex, index) {\n  const elements = this.elements_;\n  const priorities = this.priorities_;\n  const element = elements[index];\n  const priority = priorities[index];\n\n  while (index > startIndex) {\n    const parentIndex = this.getParentIndex_(index);\n    if (priorities[parentIndex] > priority) {\n      elements[index] = elements[parentIndex];\n      priorities[index] = priorities[parentIndex];\n      index = parentIndex;\n    } else {\n      break;\n    }\n  }\n  elements[index] = element;\n  priorities[index] = priority;\n};\n\n\n/**\n * FIXME empty description for jsdoc\n */\nPriorityQueue.prototype.reprioritize = function() {\n  const priorityFunction = this.priorityFunction_;\n  const elements = this.elements_;\n  const priorities = this.priorities_;\n  let index = 0;\n  const n = elements.length;\n  let element, i, priority;\n  for (i = 0; i < n; ++i) {\n    element = elements[i];\n    priority = priorityFunction(element);\n    if (priority == DROP) {\n      delete this.queuedElements_[this.keyFunction_(element)];\n    } else {\n      priorities[index] = priority;\n      elements[index++] = element;\n    }\n  }\n  elements.length = index;\n  priorities.length = index;\n  this.heapify_();\n};\nexport default PriorityQueue;\n","/**\n * @module ol/MapEvent\n */\nimport {inherits} from './util.js';\nimport Event from './events/Event.js';\n\n/**\n * @classdesc\n * Events emitted as map events are instances of this type.\n * See {@link module:ol/Map~Map} for which events trigger a map event.\n *\n * @constructor\n * @extends {module:ol/events/Event}\n * @param {string} type Event type.\n * @param {module:ol/PluggableMap} map Map.\n * @param {?module:ol/PluggableMap~FrameState=} opt_frameState Frame state.\n */\nconst MapEvent = function(type, map, opt_frameState) {\n\n  Event.call(this, type);\n\n  /**\n   * The map where the event occurred.\n   * @type {module:ol/PluggableMap}\n   * @api\n   */\n  this.map = map;\n\n  /**\n   * The frame state at the time of the event.\n   * @type {?module:ol/PluggableMap~FrameState}\n   * @api\n   */\n  this.frameState = opt_frameState !== undefined ? opt_frameState : null;\n\n};\n\ninherits(MapEvent, Event);\nexport default MapEvent;\n","/**\n * @module ol/render/Feature\n */\nimport {UNDEFINED} from '../functions.js';\nimport {extend} from '../array.js';\nimport {createOrUpdateFromCoordinate, createOrUpdateFromFlatCoordinates, getCenter, getHeight} from '../extent.js';\nimport GeometryType from '../geom/GeometryType.js';\nimport {linearRingss as linearRingssCenter} from '../geom/flat/center.js';\nimport {getInteriorPointOfArray, getInteriorPointsOfMultiArray} from '../geom/flat/interiorpoint.js';\nimport {interpolatePoint} from '../geom/flat/interpolate.js';\nimport {get as getProjection} from '../proj.js';\nimport {transform2D} from '../geom/flat/transform.js';\nimport {create as createTransform, compose as composeTransform} from '../transform.js';\n\n/**\n * Lightweight, read-only, {@link module:ol/Feature~Feature} and {@link module:ol/geom/Geometry~Geometry} like\n * structure, optimized for vector tile rendering and styling. Geometry access\n * through the API is limited to getting the type and extent of the geometry.\n *\n * @constructor\n * @param {module:ol/geom/GeometryType} type Geometry type.\n * @param {Array.<number>} flatCoordinates Flat coordinates. These always need\n *     to be right-handed for polygons.\n * @param {Array.<number>|Array.<Array.<number>>} ends Ends or Endss.\n * @param {Object.<string, *>} properties Properties.\n * @param {number|string|undefined} id Feature id.\n */\nconst RenderFeature = function(type, flatCoordinates, ends, properties, id) {\n  /**\n   * @private\n   * @type {module:ol/extent~Extent|undefined}\n   */\n  this.extent_;\n\n  /**\n   * @private\n   * @type {number|string|undefined}\n   */\n  this.id_ = id;\n\n  /**\n   * @private\n   * @type {module:ol/geom/GeometryType}\n   */\n  this.type_ = type;\n\n  /**\n   * @private\n   * @type {Array.<number>}\n   */\n  this.flatCoordinates_ = flatCoordinates;\n\n  /**\n   * @private\n   * @type {Array.<number>}\n   */\n  this.flatInteriorPoints_ = null;\n\n  /**\n   * @private\n   * @type {Array.<number>}\n   */\n  this.flatMidpoints_ = null;\n\n  /**\n   * @private\n   * @type {Array.<number>|Array.<Array.<number>>}\n   */\n  this.ends_ = ends;\n\n  /**\n   * @private\n   * @type {Object.<string, *>}\n   */\n  this.properties_ = properties;\n\n};\n\n\n/**\n * @type {module:ol/transform~Transform}\n */\nconst tmpTransform = createTransform();\n\n\n/**\n * Get a feature property by its key.\n * @param {string} key Key\n * @return {*} Value for the requested key.\n * @api\n */\nRenderFeature.prototype.get = function(key) {\n  return this.properties_[key];\n};\n\n\n/**\n * @return {Array.<number>|Array.<Array.<number>>} Ends or endss.\n */\nRenderFeature.prototype.getEnds =\nRenderFeature.prototype.getEndss = function() {\n  return this.ends_;\n};\n\n\n/**\n * Get the extent of this feature's geometry.\n * @return {module:ol/extent~Extent} Extent.\n * @api\n */\nRenderFeature.prototype.getExtent = function() {\n  if (!this.extent_) {\n    this.extent_ = this.type_ === GeometryType.POINT ?\n      createOrUpdateFromCoordinate(this.flatCoordinates_) :\n      createOrUpdateFromFlatCoordinates(\n        this.flatCoordinates_, 0, this.flatCoordinates_.length, 2);\n\n  }\n  return this.extent_;\n};\n\n\n/**\n * @return {Array.<number>} Flat interior points.\n */\nRenderFeature.prototype.getFlatInteriorPoint = function() {\n  if (!this.flatInteriorPoints_) {\n    const flatCenter = getCenter(this.getExtent());\n    this.flatInteriorPoints_ = getInteriorPointOfArray(\n      this.flatCoordinates_, 0, this.ends_, 2, flatCenter, 0);\n  }\n  return this.flatInteriorPoints_;\n};\n\n\n/**\n * @return {Array.<number>} Flat interior points.\n */\nRenderFeature.prototype.getFlatInteriorPoints = function() {\n  if (!this.flatInteriorPoints_) {\n    const flatCenters = linearRingssCenter(\n      this.flatCoordinates_, 0, this.ends_, 2);\n    this.flatInteriorPoints_ = getInteriorPointsOfMultiArray(\n      this.flatCoordinates_, 0, this.ends_, 2, flatCenters);\n  }\n  return this.flatInteriorPoints_;\n};\n\n\n/**\n * @return {Array.<number>} Flat midpoint.\n */\nRenderFeature.prototype.getFlatMidpoint = function() {\n  if (!this.flatMidpoints_) {\n    this.flatMidpoints_ = interpolatePoint(\n      this.flatCoordinates_, 0, this.flatCoordinates_.length, 2, 0.5);\n  }\n  return this.flatMidpoints_;\n};\n\n\n/**\n * @return {Array.<number>} Flat midpoints.\n */\nRenderFeature.prototype.getFlatMidpoints = function() {\n  if (!this.flatMidpoints_) {\n    this.flatMidpoints_ = [];\n    const flatCoordinates = this.flatCoordinates_;\n    let offset = 0;\n    const ends = this.ends_;\n    for (let i = 0, ii = ends.length; i < ii; ++i) {\n      const end = ends[i];\n      const midpoint = interpolatePoint(\n        flatCoordinates, offset, end, 2, 0.5);\n      extend(this.flatMidpoints_, midpoint);\n      offset = end;\n    }\n  }\n  return this.flatMidpoints_;\n};\n\n/**\n * Get the feature identifier.  This is a stable identifier for the feature and\n * is set when reading data from a remote source.\n * @return {number|string|undefined} Id.\n * @api\n */\nRenderFeature.prototype.getId = function() {\n  return this.id_;\n};\n\n\n/**\n * @return {Array.<number>} Flat coordinates.\n */\nRenderFeature.prototype.getOrientedFlatCoordinates = function() {\n  return this.flatCoordinates_;\n};\n\n\n/**\n * @return {Array.<number>} Flat coordinates.\n */\nRenderFeature.prototype.getFlatCoordinates =\n    RenderFeature.prototype.getOrientedFlatCoordinates;\n\n\n/**\n * For API compatibility with {@link module:ol/Feature~Feature}, this method is useful when\n * determining the geometry type in style function (see {@link #getType}).\n * @return {module:ol/render/Feature} Feature.\n * @api\n */\nRenderFeature.prototype.getGeometry = function() {\n  return this;\n};\n\n\n/**\n * Get the feature properties.\n * @return {Object.<string, *>} Feature properties.\n * @api\n */\nRenderFeature.prototype.getProperties = function() {\n  return this.properties_;\n};\n\n\n/**\n * Get the feature for working with its geometry.\n * @return {module:ol/render/Feature} Feature.\n */\nRenderFeature.prototype.getSimplifiedGeometry =\n    RenderFeature.prototype.getGeometry;\n\n\n/**\n * @return {number} Stride.\n */\nRenderFeature.prototype.getStride = function() {\n  return 2;\n};\n\n\n/**\n * @return {undefined}\n */\nRenderFeature.prototype.getStyleFunction = UNDEFINED;\n\n\n/**\n * Get the type of this feature's geometry.\n * @return {module:ol/geom/GeometryType} Geometry type.\n * @api\n */\nRenderFeature.prototype.getType = function() {\n  return this.type_;\n};\n\n/**\n * Transform geometry coordinates from tile pixel space to projected.\n * The SRS of the source and destination are expected to be the same.\n *\n * @param {module:ol/proj~ProjectionLike} source The current projection\n * @param {module:ol/proj~ProjectionLike} destination The desired projection.\n */\nRenderFeature.prototype.transform = function(source, destination) {\n  source = getProjection(source);\n  const pixelExtent = source.getExtent();\n  const projectedExtent = source.getWorldExtent();\n  const scale = getHeight(projectedExtent) / getHeight(pixelExtent);\n  composeTransform(tmpTransform,\n    projectedExtent[0], projectedExtent[3],\n    scale, -scale, 0,\n    0, 0);\n  transform2D(this.flatCoordinates_, 0, this.flatCoordinates_.length, 2,\n    tmpTransform, this.flatCoordinates_);\n};\nexport default RenderFeature;\n","/**\n * @module ol/format/MVT\n */\n//FIXME Implement projection handling\n\nimport {inherits} from '../util.js';\nimport {assert} from '../asserts.js';\nimport PBF from 'pbf';\nimport FeatureFormat, {transformWithOptions} from '../format/Feature.js';\nimport FormatType from '../format/FormatType.js';\nimport GeometryLayout from '../geom/GeometryLayout.js';\nimport GeometryType from '../geom/GeometryType.js';\nimport LineString from '../geom/LineString.js';\nimport MultiLineString from '../geom/MultiLineString.js';\nimport MultiPoint from '../geom/MultiPoint.js';\nimport MultiPolygon from '../geom/MultiPolygon.js';\nimport Point from '../geom/Point.js';\nimport Polygon from '../geom/Polygon.js';\nimport {linearRingIsClockwise} from '../geom/flat/orient.js';\nimport Projection from '../proj/Projection.js';\nimport Units from '../proj/Units.js';\nimport RenderFeature from '../render/Feature.js';\n\n\n/**\n * @typedef {Object} Options\n * @property {function((module:ol/geom/Geometry|Object.<string,*>)=)|function(module:ol/geom/GeometryType,Array.<number>,(Array.<number>|Array.<Array.<number>>),Object.<string,*>,number)} [featureClass]\n * Class for features returned by {@link module:ol/format/MVT#readFeatures}. Set to\n * {@link module:ol/Feature~Feature} to get full editing and geometry support at the cost of\n * decreased rendering performance. The default is {@link module:ol/render/Feature~RenderFeature},\n * which is optimized for rendering and hit detection.\n * @property {string} [geometryName='geometry'] Geometry name to use when creating\n * features.\n * @property {string} [layerName='layer'] Name of the feature attribute that\n * holds the layer name.\n * @property {Array.<string>} [layers] Layers to read features from. If not\n * provided, features will be read from all layers.\n */\n\n\n/**\n * @classdesc\n * Feature format for reading data in the Mapbox MVT format.\n *\n * @constructor\n * @extends {module:ol/format/Feature}\n * @param {module:ol/format/MVT~Options=} opt_options Options.\n * @api\n */\nconst MVT = function(opt_options) {\n\n  FeatureFormat.call(this);\n\n  const options = opt_options ? opt_options : {};\n\n  /**\n   * @type {module:ol/proj/Projection}\n   */\n  this.dataProjection = new Projection({\n    code: '',\n    units: Units.TILE_PIXELS\n  });\n\n  /**\n   * @private\n   * @type {function((module:ol/geom/Geometry|Object.<string,*>)=)|\n   *     function(module:ol/geom/GeometryType,Array.<number>,\n   *         (Array.<number>|Array.<Array.<number>>),Object.<string,*>,number)}\n   */\n  this.featureClass_ = options.featureClass ?\n    options.featureClass : RenderFeature;\n\n  /**\n   * @private\n   * @type {string|undefined}\n   */\n  this.geometryName_ = options.geometryName;\n\n  /**\n   * @private\n   * @type {string}\n   */\n  this.layerName_ = options.layerName ? options.layerName : 'layer';\n\n  /**\n   * @private\n   * @type {Array.<string>}\n   */\n  this.layers_ = options.layers ? options.layers : null;\n\n  /**\n   * @private\n   * @type {module:ol/extent~Extent}\n   */\n  this.extent_ = null;\n\n};\n\ninherits(MVT, FeatureFormat);\n\n\n/**\n * Reader callback for parsing layers.\n * @param {number} tag The tag.\n * @param {Object} layers The layers object.\n * @param {Object} pbf The PBF.\n */\nfunction layersPBFReader(tag, layers, pbf) {\n  if (tag === 3) {\n    const layer = {\n      keys: [],\n      values: [],\n      features: []\n    };\n    const end = pbf.readVarint() + pbf.pos;\n    pbf.readFields(layerPBFReader, layer, end);\n    layer.length = layer.features.length;\n    if (layer.length) {\n      layers[layer.name] = layer;\n    }\n  }\n}\n\n/**\n * Reader callback for parsing layer.\n * @param {number} tag The tag.\n * @param {Object} layer The layer object.\n * @param {Object} pbf The PBF.\n */\nfunction layerPBFReader(tag, layer, pbf) {\n  if (tag === 15) {\n    layer.version = pbf.readVarint();\n  } else if (tag === 1) {\n    layer.name = pbf.readString();\n  } else if (tag === 5) {\n    layer.extent = pbf.readVarint();\n  } else if (tag === 2) {\n    layer.features.push(pbf.pos);\n  } else if (tag === 3) {\n    layer.keys.push(pbf.readString());\n  } else if (tag === 4) {\n    let value = null;\n    const end = pbf.readVarint() + pbf.pos;\n    while (pbf.pos < end) {\n      tag = pbf.readVarint() >> 3;\n      value = tag === 1 ? pbf.readString() :\n        tag === 2 ? pbf.readFloat() :\n          tag === 3 ? pbf.readDouble() :\n            tag === 4 ? pbf.readVarint64() :\n              tag === 5 ? pbf.readVarint() :\n                tag === 6 ? pbf.readSVarint() :\n                  tag === 7 ? pbf.readBoolean() : null;\n    }\n    layer.values.push(value);\n  }\n}\n\n/**\n * Reader callback for parsing feature.\n * @param {number} tag The tag.\n * @param {Object} feature The feature object.\n * @param {Object} pbf The PBF.\n */\nfunction featurePBFReader(tag, feature, pbf) {\n  if (tag == 1) {\n    feature.id = pbf.readVarint();\n  } else if (tag == 2) {\n    const end = pbf.readVarint() + pbf.pos;\n    while (pbf.pos < end) {\n      const key = feature.layer.keys[pbf.readVarint()];\n      const value = feature.layer.values[pbf.readVarint()];\n      feature.properties[key] = value;\n    }\n  } else if (tag == 3) {\n    feature.type = pbf.readVarint();\n  } else if (tag == 4) {\n    feature.geometry = pbf.pos;\n  }\n}\n\n\n/**\n * Read a raw feature from the pbf offset stored at index `i` in the raw layer.\n * @suppress {missingProperties}\n * @param {Object} pbf PBF.\n * @param {Object} layer Raw layer.\n * @param {number} i Index of the feature in the raw layer's `features` array.\n * @return {Object} Raw feature.\n */\nfunction readRawFeature(pbf, layer, i) {\n  pbf.pos = layer.features[i];\n  const end = pbf.readVarint() + pbf.pos;\n\n  const feature = {\n    layer: layer,\n    type: 0,\n    properties: {}\n  };\n  pbf.readFields(featurePBFReader, feature, end);\n  return feature;\n}\n\n\n/**\n * Read the raw geometry from the pbf offset stored in a raw feature's geometry\n * property.\n * @suppress {missingProperties}\n * @param {Object} pbf PBF.\n * @param {Object} feature Raw feature.\n * @param {Array.<number>} flatCoordinates Array to store flat coordinates in.\n * @param {Array.<number>} ends Array to store ends in.\n * @private\n */\nMVT.prototype.readRawGeometry_ = function(pbf, feature, flatCoordinates, ends) {\n  pbf.pos = feature.geometry;\n\n  const end = pbf.readVarint() + pbf.pos;\n  let cmd = 1;\n  let length = 0;\n  let x = 0;\n  let y = 0;\n  let coordsLen = 0;\n  let currentEnd = 0;\n\n  while (pbf.pos < end) {\n    if (!length) {\n      const cmdLen = pbf.readVarint();\n      cmd = cmdLen & 0x7;\n      length = cmdLen >> 3;\n    }\n\n    length--;\n\n    if (cmd === 1 || cmd === 2) {\n      x += pbf.readSVarint();\n      y += pbf.readSVarint();\n\n      if (cmd === 1) { // moveTo\n        if (coordsLen > currentEnd) {\n          ends.push(coordsLen);\n          currentEnd = coordsLen;\n        }\n      }\n\n      flatCoordinates.push(x, y);\n      coordsLen += 2;\n\n    } else if (cmd === 7) {\n\n      if (coordsLen > currentEnd) {\n        // close polygon\n        flatCoordinates.push(\n          flatCoordinates[currentEnd], flatCoordinates[currentEnd + 1]);\n        coordsLen += 2;\n      }\n\n    } else {\n      assert(false, 59); // Invalid command found in the PBF\n    }\n  }\n\n  if (coordsLen > currentEnd) {\n    ends.push(coordsLen);\n    currentEnd = coordsLen;\n  }\n\n};\n\n\n/**\n * @suppress {missingProperties}\n * @param {number} type The raw feature's geometry type\n * @param {number} numEnds Number of ends of the flat coordinates of the\n * geometry.\n * @return {module:ol/geom/GeometryType} The geometry type.\n */\nfunction getGeometryType(type, numEnds) {\n  /** @type {module:ol/geom/GeometryType} */\n  let geometryType;\n  if (type === 1) {\n    geometryType = numEnds === 1 ?\n      GeometryType.POINT : GeometryType.MULTI_POINT;\n  } else if (type === 2) {\n    geometryType = numEnds === 1 ?\n      GeometryType.LINE_STRING :\n      GeometryType.MULTI_LINE_STRING;\n  } else if (type === 3) {\n    geometryType = GeometryType.POLYGON;\n    // MultiPolygon not relevant for rendering - winding order determines\n    // outer rings of polygons.\n  }\n  return geometryType;\n}\n\n/**\n * @private\n * @param {Object} pbf PBF\n * @param {Object} rawFeature Raw Mapbox feature.\n * @param {module:ol/format/Feature~ReadOptions=} opt_options Read options.\n * @return {module:ol/Feature|module:ol/render/Feature} Feature.\n */\nMVT.prototype.createFeature_ = function(pbf, rawFeature, opt_options) {\n  const type = rawFeature.type;\n  if (type === 0) {\n    return null;\n  }\n\n  let feature;\n  const id = rawFeature.id;\n  const values = rawFeature.properties;\n  values[this.layerName_] = rawFeature.layer.name;\n\n  const flatCoordinates = [];\n  let ends = [];\n  this.readRawGeometry_(pbf, rawFeature, flatCoordinates, ends);\n\n  const geometryType = getGeometryType(type, ends.length);\n\n  if (this.featureClass_ === RenderFeature) {\n    feature = new this.featureClass_(geometryType, flatCoordinates, ends, values, id);\n  } else {\n    let geom;\n    if (geometryType == GeometryType.POLYGON) {\n      const endss = [];\n      let offset = 0;\n      let prevEndIndex = 0;\n      for (let i = 0, ii = ends.length; i < ii; ++i) {\n        const end = ends[i];\n        if (!linearRingIsClockwise(flatCoordinates, offset, end, 2)) {\n          endss.push(ends.slice(prevEndIndex, i));\n          prevEndIndex = i;\n        }\n        offset = end;\n      }\n      if (endss.length > 1) {\n        ends = endss;\n        geom = new MultiPolygon(null);\n      } else {\n        geom = new Polygon(null);\n      }\n    } else {\n      geom = geometryType === GeometryType.POINT ? new Point(null) :\n        geometryType === GeometryType.LINE_STRING ? new LineString(null) :\n          geometryType === GeometryType.POLYGON ? new Polygon(null) :\n            geometryType === GeometryType.MULTI_POINT ? new MultiPoint (null) :\n              geometryType === GeometryType.MULTI_LINE_STRING ? new MultiLineString(null) :\n                null;\n    }\n    geom.setFlatCoordinates(GeometryLayout.XY, flatCoordinates, ends);\n    feature = new this.featureClass_();\n    if (this.geometryName_) {\n      feature.setGeometryName(this.geometryName_);\n    }\n    const geometry = transformWithOptions(geom, false, this.adaptOptions(opt_options));\n    feature.setGeometry(geometry);\n    feature.setId(id);\n    feature.setProperties(values);\n  }\n\n  return feature;\n};\n\n\n/**\n * @inheritDoc\n * @api\n */\nMVT.prototype.getLastExtent = function() {\n  return this.extent_;\n};\n\n\n/**\n * @inheritDoc\n */\nMVT.prototype.getType = function() {\n  return FormatType.ARRAY_BUFFER;\n};\n\n\n/**\n * @inheritDoc\n * @api\n */\nMVT.prototype.readFeatures = function(source, opt_options) {\n  const layers = this.layers_;\n\n  const pbf = new PBF(/** @type {ArrayBuffer} */ (source));\n  const pbfLayers = pbf.readFields(layersPBFReader, {});\n  /** @type {Array.<module:ol/Feature|module:ol/render/Feature>} */\n  const features = [];\n  for (const name in pbfLayers) {\n    if (layers && layers.indexOf(name) == -1) {\n      continue;\n    }\n    const pbfLayer = pbfLayers[name];\n\n    for (let i = 0, ii = pbfLayer.length; i < ii; ++i) {\n      const rawFeature = readRawFeature(pbf, pbfLayer, i);\n      features.push(this.createFeature_(pbf, rawFeature));\n    }\n    this.extent_ = pbfLayer ? [0, 0, pbfLayer.extent, pbfLayer.extent] : null;\n  }\n\n  return features;\n};\n\n\n/**\n * @inheritDoc\n * @api\n */\nMVT.prototype.readProjection = function(source) {\n  return this.dataProjection;\n};\n\n\n/**\n * Sets the layers that features will be read from.\n * @param {Array.<string>} layers Layers.\n * @api\n */\nMVT.prototype.setLayers = function(layers) {\n  this.layers_ = layers;\n};\n\n\n/**\n * Not implemented.\n * @override\n */\nMVT.prototype.readFeature = function() {};\n\n\n/**\n * Not implemented.\n * @override\n */\nMVT.prototype.readGeometry = function() {};\n\n\n/**\n * Not implemented.\n * @override\n */\nMVT.prototype.writeFeature = function() {};\n\n\n/**\n * Not implemented.\n * @override\n */\nMVT.prototype.writeGeometry = function() {};\n\n\n/**\n * Not implemented.\n * @override\n */\nMVT.prototype.writeFeatures = function() {};\nexport default MVT;\n","/**\n * @module ol/format/OWS\n */\nimport {inherits} from '../util.js';\nimport {readHref} from '../format/XLink.js';\nimport XML from '../format/XML.js';\nimport {readString} from '../format/xsd.js';\nimport {makeObjectPropertyPusher, makeObjectPropertySetter, makeStructureNS, pushParseAndPop} from '../xml.js';\n\n/**\n * @constructor\n * @extends {module:ol/format/XML}\n */\nconst OWS = function() {\n  XML.call(this);\n};\n\ninherits(OWS, XML);\n\n\n/**\n * @const\n * @type {Array.<null|string>}\n */\nconst NAMESPACE_URIS = [null, 'http://www.opengis.net/ows/1.1'];\n\n\n/**\n * @const\n * @type {Object.<string, Object.<string, module:ol/xml~Parser>>}\n */\nconst PARSERS = makeStructureNS(\n  NAMESPACE_URIS, {\n    'ServiceIdentification': makeObjectPropertySetter(readServiceIdentification),\n    'ServiceProvider': makeObjectPropertySetter(readServiceProvider),\n    'OperationsMetadata': makeObjectPropertySetter(readOperationsMetadata)\n  });\n\n\n/**\n * @const\n * @type {Object.<string, Object.<string, module:ol/xml~Parser>>}\n */\nconst ADDRESS_PARSERS = makeStructureNS(\n  NAMESPACE_URIS, {\n    'DeliveryPoint': makeObjectPropertySetter(readString),\n    'City': makeObjectPropertySetter(readString),\n    'AdministrativeArea': makeObjectPropertySetter(readString),\n    'PostalCode': makeObjectPropertySetter(readString),\n    'Country': makeObjectPropertySetter(readString),\n    'ElectronicMailAddress': makeObjectPropertySetter(readString)\n  });\n\n\n/**\n * @const\n * @type {Object.<string, Object.<string, module:ol/xml~Parser>>}\n */\nconst ALLOWED_VALUES_PARSERS = makeStructureNS(\n  NAMESPACE_URIS, {\n    'Value': makeObjectPropertyPusher(readValue)\n  });\n\n\n/**\n * @const\n * @type {Object.<string, Object.<string, module:ol/xml~Parser>>}\n */\nconst CONSTRAINT_PARSERS = makeStructureNS(\n  NAMESPACE_URIS, {\n    'AllowedValues': makeObjectPropertySetter(readAllowedValues)\n  });\n\n\n/**\n * @const\n * @type {Object.<string, Object.<string, module:ol/xml~Parser>>}\n */\nconst CONTACT_INFO_PARSERS = makeStructureNS(\n  NAMESPACE_URIS, {\n    'Phone': makeObjectPropertySetter(readPhone),\n    'Address': makeObjectPropertySetter(readAddress)\n  });\n\n\n/**\n * @const\n * @type {Object.<string, Object.<string, module:ol/xml~Parser>>}\n */\nconst DCP_PARSERS = makeStructureNS(\n  NAMESPACE_URIS, {\n    'HTTP': makeObjectPropertySetter(readHttp)\n  });\n\n\n/**\n * @const\n * @type {Object.<string, Object.<string, module:ol/xml~Parser>>}\n */\nconst HTTP_PARSERS = makeStructureNS(\n  NAMESPACE_URIS, {\n    'Get': makeObjectPropertyPusher(readGet),\n    'Post': undefined // TODO\n  });\n\n\n/**\n * @const\n * @type {Object.<string, Object.<string, module:ol/xml~Parser>>}\n */\nconst OPERATION_PARSERS = makeStructureNS(\n  NAMESPACE_URIS, {\n    'DCP': makeObjectPropertySetter(readDcp)\n  });\n\n\n/**\n * @const\n * @type {Object.<string, Object.<string, module:ol/xml~Parser>>}\n */\nconst OPERATIONS_METADATA_PARSERS = makeStructureNS(\n  NAMESPACE_URIS, {\n    'Operation': readOperation\n  });\n\n\n/**\n * @const\n * @type {Object.<string, Object.<string, module:ol/xml~Parser>>}\n */\nconst PHONE_PARSERS = makeStructureNS(\n  NAMESPACE_URIS, {\n    'Voice': makeObjectPropertySetter(readString),\n    'Facsimile': makeObjectPropertySetter(readString)\n  });\n\n\n/**\n * @const\n * @type {Object.<string, Object.<string, module:ol/xml~Parser>>}\n */\nconst REQUEST_METHOD_PARSERS = makeStructureNS(\n  NAMESPACE_URIS, {\n    'Constraint': makeObjectPropertyPusher(readConstraint)\n  });\n\n\n/**\n * @const\n * @type {Object.<string, Object.<string, module:ol/xml~Parser>>}\n */\nconst SERVICE_CONTACT_PARSERS =\n    makeStructureNS(\n      NAMESPACE_URIS, {\n        'IndividualName': makeObjectPropertySetter(readString),\n        'PositionName': makeObjectPropertySetter(readString),\n        'ContactInfo': makeObjectPropertySetter(readContactInfo)\n      });\n\n\n/**\n * @const\n * @type {Object.<string, Object.<string, module:ol/xml~Parser>>}\n */\nconst SERVICE_IDENTIFICATION_PARSERS =\n    makeStructureNS(\n      NAMESPACE_URIS, {\n        'Abstract': makeObjectPropertySetter(readString),\n        'AccessConstraints': makeObjectPropertySetter(readString),\n        'Fees': makeObjectPropertySetter(readString),\n        'Title': makeObjectPropertySetter(readString),\n        'ServiceTypeVersion': makeObjectPropertySetter(readString),\n        'ServiceType': makeObjectPropertySetter(readString)\n      });\n\n\n/**\n * @const\n * @type {Object.<string, Object.<string, module:ol/xml~Parser>>}\n */\nconst SERVICE_PROVIDER_PARSERS =\n    makeStructureNS(\n      NAMESPACE_URIS, {\n        'ProviderName': makeObjectPropertySetter(readString),\n        'ProviderSite': makeObjectPropertySetter(readHref),\n        'ServiceContact': makeObjectPropertySetter(readServiceContact)\n      });\n\n\n/**\n * @inheritDoc\n */\nOWS.prototype.readFromDocument = function(doc) {\n  for (let n = doc.firstChild; n; n = n.nextSibling) {\n    if (n.nodeType == Node.ELEMENT_NODE) {\n      return this.readFromNode(n);\n    }\n  }\n  return null;\n};\n\n\n/**\n * @inheritDoc\n */\nOWS.prototype.readFromNode = function(node) {\n  const owsObject = pushParseAndPop({},\n    PARSERS, node, []);\n  return owsObject ? owsObject : null;\n};\n\n\n/**\n * @param {Node} node Node.\n * @param {Array.<*>} objectStack Object stack.\n * @return {Object|undefined} The address.\n */\nfunction readAddress(node, objectStack) {\n  return pushParseAndPop({},\n    ADDRESS_PARSERS, node, objectStack);\n}\n\n\n/**\n * @param {Node} node Node.\n * @param {Array.<*>} objectStack Object stack.\n * @return {Object|undefined} The values.\n */\nfunction readAllowedValues(node, objectStack) {\n  return pushParseAndPop({},\n    ALLOWED_VALUES_PARSERS, node, objectStack);\n}\n\n\n/**\n * @param {Node} node Node.\n * @param {Array.<*>} objectStack Object stack.\n * @return {Object|undefined} The constraint.\n */\nfunction readConstraint(node, objectStack) {\n  const name = node.getAttribute('name');\n  if (!name) {\n    return undefined;\n  }\n  return pushParseAndPop({'name': name},\n    CONSTRAINT_PARSERS, node,\n    objectStack);\n}\n\n\n/**\n * @param {Node} node Node.\n * @param {Array.<*>} objectStack Object stack.\n * @return {Object|undefined} The contact info.\n */\nfunction readContactInfo(node, objectStack) {\n  return pushParseAndPop({},\n    CONTACT_INFO_PARSERS, node, objectStack);\n}\n\n\n/**\n * @param {Node} node Node.\n * @param {Array.<*>} objectStack Object stack.\n * @return {Object|undefined} The DCP.\n */\nfunction readDcp(node, objectStack) {\n  return pushParseAndPop({},\n    DCP_PARSERS, node, objectStack);\n}\n\n\n/**\n * @param {Node} node Node.\n * @param {Array.<*>} objectStack Object stack.\n * @return {Object|undefined} The GET object.\n */\nfunction readGet(node, objectStack) {\n  const href = readHref(node);\n  if (!href) {\n    return undefined;\n  }\n  return pushParseAndPop({'href': href},\n    REQUEST_METHOD_PARSERS, node, objectStack);\n}\n\n\n/**\n * @param {Node} node Node.\n * @param {Array.<*>} objectStack Object stack.\n * @return {Object|undefined} The HTTP object.\n */\nfunction readHttp(node, objectStack) {\n  return pushParseAndPop({}, HTTP_PARSERS, node, objectStack);\n}\n\n\n/**\n * @param {Node} node Node.\n * @param {Array.<*>} objectStack Object stack.\n * @return {Object|undefined} The operation.\n */\nfunction readOperation(node, objectStack) {\n  const name = node.getAttribute('name');\n  const value = pushParseAndPop({},\n    OPERATION_PARSERS, node, objectStack);\n  if (!value) {\n    return undefined;\n  }\n  const object = /** @type {Object} */\n      (objectStack[objectStack.length - 1]);\n  object[name] = value;\n}\n\n\n/**\n * @param {Node} node Node.\n * @param {Array.<*>} objectStack Object stack.\n * @return {Object|undefined} The operations metadata.\n */\nfunction readOperationsMetadata(node, objectStack) {\n  return pushParseAndPop({},\n    OPERATIONS_METADATA_PARSERS, node,\n    objectStack);\n}\n\n\n/**\n * @param {Node} node Node.\n * @param {Array.<*>} objectStack Object stack.\n * @return {Object|undefined} The phone.\n */\nfunction readPhone(node, objectStack) {\n  return pushParseAndPop({},\n    PHONE_PARSERS, node, objectStack);\n}\n\n\n/**\n * @param {Node} node Node.\n * @param {Array.<*>} objectStack Object stack.\n * @return {Object|undefined} The service identification.\n */\nfunction readServiceIdentification(node, objectStack) {\n  return pushParseAndPop(\n    {}, SERVICE_IDENTIFICATION_PARSERS, node,\n    objectStack);\n}\n\n\n/**\n * @param {Node} node Node.\n * @param {Array.<*>} objectStack Object stack.\n * @return {Object|undefined} The service contact.\n */\nfunction readServiceContact(node, objectStack) {\n  return pushParseAndPop(\n    {}, SERVICE_CONTACT_PARSERS, node,\n    objectStack);\n}\n\n\n/**\n * @param {Node} node Node.\n * @param {Array.<*>} objectStack Object stack.\n * @return {Object|undefined} The service provider.\n */\nfunction readServiceProvider(node, objectStack) {\n  return pushParseAndPop(\n    {}, SERVICE_PROVIDER_PARSERS, node,\n    objectStack);\n}\n\n\n/**\n * @param {Node} node Node.\n * @param {Array.<*>} objectStack Object stack.\n * @return {string|undefined} The value.\n */\nfunction readValue(node, objectStack) {\n  return readString(node);\n}\n\n\nexport default OWS;\n","/**\n * @module ol/format/WMTSCapabilities\n */\nimport {inherits} from '../util.js';\nimport {boundingExtent} from '../extent.js';\nimport OWS from '../format/OWS.js';\nimport {readHref} from '../format/XLink.js';\nimport XML from '../format/XML.js';\nimport {readString, readNonNegativeInteger, readDecimal} from '../format/xsd.js';\nimport {pushParseAndPop, makeStructureNS,\n  makeObjectPropertySetter, makeObjectPropertyPusher, makeArrayPusher} from '../xml.js';\n\n/**\n * @classdesc\n * Format for reading WMTS capabilities data.\n *\n * @constructor\n * @extends {module:ol/format/XML}\n * @api\n */\nconst WMTSCapabilities = function() {\n  XML.call(this);\n\n  /**\n   * @type {module:ol/format/OWS}\n   * @private\n   */\n  this.owsParser_ = new OWS();\n};\n\ninherits(WMTSCapabilities, XML);\n\n\n/**\n * @const\n * @type {Array.<null|string>}\n */\nconst NAMESPACE_URIS = [\n  null,\n  'http://www.opengis.net/wmts/1.0'\n];\n\n\n/**\n * @const\n * @type {Array.<null|string>}\n */\nconst OWS_NAMESPACE_URIS = [\n  null,\n  'http://www.opengis.net/ows/1.1'\n];\n\n\n/**\n * @const\n * @type {Object.<string, Object.<string, module:ol/xml~Parser>>}\n */\nconst PARSERS = makeStructureNS(\n  NAMESPACE_URIS, {\n    'Contents': makeObjectPropertySetter(readContents)\n  });\n\n\n/**\n * @const\n * @type {Object.<string, Object.<string, module:ol/xml~Parser>>}\n */\nconst CONTENTS_PARSERS = makeStructureNS(\n  NAMESPACE_URIS, {\n    'Layer': makeObjectPropertyPusher(readLayer),\n    'TileMatrixSet': makeObjectPropertyPusher(readTileMatrixSet)\n  });\n\n\n/**\n * @const\n * @type {Object.<string, Object.<string, module:ol/xml~Parser>>}\n */\nconst LAYER_PARSERS = makeStructureNS(\n  NAMESPACE_URIS, {\n    'Style': makeObjectPropertyPusher(readStyle),\n    'Format': makeObjectPropertyPusher(readString),\n    'TileMatrixSetLink': makeObjectPropertyPusher(readTileMatrixSetLink),\n    'Dimension': makeObjectPropertyPusher(readDimensions),\n    'ResourceURL': makeObjectPropertyPusher(readResourceUrl)\n  }, makeStructureNS(OWS_NAMESPACE_URIS, {\n    'Title': makeObjectPropertySetter(readString),\n    'Abstract': makeObjectPropertySetter(readString),\n    'WGS84BoundingBox': makeObjectPropertySetter(readWgs84BoundingBox),\n    'Identifier': makeObjectPropertySetter(readString)\n  }));\n\n\n/**\n * @const\n * @type {Object.<string, Object.<string, module:ol/xml~Parser>>}\n */\nconst STYLE_PARSERS = makeStructureNS(\n  NAMESPACE_URIS, {\n    'LegendURL': makeObjectPropertyPusher(readLegendUrl)\n  }, makeStructureNS(OWS_NAMESPACE_URIS, {\n    'Title': makeObjectPropertySetter(readString),\n    'Identifier': makeObjectPropertySetter(readString)\n  }));\n\n\n/**\n * @const\n * @type {Object.<string, Object.<string, module:ol/xml~Parser>>}\n */\nconst TMS_LINKS_PARSERS = makeStructureNS(\n  NAMESPACE_URIS, {\n    'TileMatrixSet': makeObjectPropertySetter(readString),\n    'TileMatrixSetLimits': makeObjectPropertySetter(readTileMatrixLimitsList)\n  });\n\n/**\n * @const\n * @type {Object.<string, Object.<string, module:ol/xml~Parser>>}\n */\nconst TMS_LIMITS_LIST_PARSERS = makeStructureNS(\n  NAMESPACE_URIS, {\n    'TileMatrixLimits': makeArrayPusher(readTileMatrixLimits)\n  });\n\n\n/**\n * @const\n * @type {Object.<string, Object.<string, module:ol/xml~Parser>>}\n */\nconst TMS_LIMITS_PARSERS = makeStructureNS(\n  NAMESPACE_URIS, {\n    'TileMatrix': makeObjectPropertySetter(readString),\n    'MinTileRow': makeObjectPropertySetter(readNonNegativeInteger),\n    'MaxTileRow': makeObjectPropertySetter(readNonNegativeInteger),\n    'MinTileCol': makeObjectPropertySetter(readNonNegativeInteger),\n    'MaxTileCol': makeObjectPropertySetter(readNonNegativeInteger)\n  });\n\n\n/**\n * @const\n * @type {Object.<string, Object.<string, module:ol/xml~Parser>>}\n */\nconst DIMENSION_PARSERS = makeStructureNS(\n  NAMESPACE_URIS, {\n    'Default': makeObjectPropertySetter(readString),\n    'Value': makeObjectPropertyPusher(readString)\n  }, makeStructureNS(OWS_NAMESPACE_URIS, {\n    'Identifier': makeObjectPropertySetter(readString)\n  }));\n\n\n/**\n * @const\n * @type {Object.<string, Object.<string, module:ol/xml~Parser>>}\n */\nconst WGS84_BBOX_READERS = makeStructureNS(\n  OWS_NAMESPACE_URIS, {\n    'LowerCorner': makeArrayPusher(readCoordinates),\n    'UpperCorner': makeArrayPusher(readCoordinates)\n  });\n\n\n/**\n * @const\n * @type {Object.<string, Object.<string, module:ol/xml~Parser>>}\n */\nconst TMS_PARSERS = makeStructureNS(\n  NAMESPACE_URIS, {\n    'WellKnownScaleSet': makeObjectPropertySetter(readString),\n    'TileMatrix': makeObjectPropertyPusher(readTileMatrix)\n  }, makeStructureNS(OWS_NAMESPACE_URIS, {\n    'SupportedCRS': makeObjectPropertySetter(readString),\n    'Identifier': makeObjectPropertySetter(readString)\n  }));\n\n\n/**\n * @const\n * @type {Object.<string, Object.<string, module:ol/xml~Parser>>}\n */\nconst TM_PARSERS = makeStructureNS(\n  NAMESPACE_URIS, {\n    'TopLeftCorner': makeObjectPropertySetter(readCoordinates),\n    'ScaleDenominator': makeObjectPropertySetter(readDecimal),\n    'TileWidth': makeObjectPropertySetter(readNonNegativeInteger),\n    'TileHeight': makeObjectPropertySetter(readNonNegativeInteger),\n    'MatrixWidth': makeObjectPropertySetter(readNonNegativeInteger),\n    'MatrixHeight': makeObjectPropertySetter(readNonNegativeInteger)\n  }, makeStructureNS(OWS_NAMESPACE_URIS, {\n    'Identifier': makeObjectPropertySetter(readString)\n  }));\n\n\n/**\n * Read a WMTS capabilities document.\n *\n * @function\n * @param {Document|Node|string} source The XML source.\n * @return {Object} An object representing the WMTS capabilities.\n * @api\n */\nWMTSCapabilities.prototype.read;\n\n\n/**\n * @inheritDoc\n */\nWMTSCapabilities.prototype.readFromDocument = function(doc) {\n  for (let n = doc.firstChild; n; n = n.nextSibling) {\n    if (n.nodeType == Node.ELEMENT_NODE) {\n      return this.readFromNode(n);\n    }\n  }\n  return null;\n};\n\n\n/**\n * @inheritDoc\n */\nWMTSCapabilities.prototype.readFromNode = function(node) {\n  const version = node.getAttribute('version').trim();\n  let WMTSCapabilityObject = this.owsParser_.readFromNode(node);\n  if (!WMTSCapabilityObject) {\n    return null;\n  }\n  WMTSCapabilityObject['version'] = version;\n  WMTSCapabilityObject = pushParseAndPop(WMTSCapabilityObject, PARSERS, node, []);\n  return WMTSCapabilityObject ? WMTSCapabilityObject : null;\n};\n\n\n/**\n * @param {Node} node Node.\n * @param {Array.<*>} objectStack Object stack.\n * @return {Object|undefined} Attribution object.\n */\nfunction readContents(node, objectStack) {\n  return pushParseAndPop({}, CONTENTS_PARSERS, node, objectStack);\n}\n\n\n/**\n * @param {Node} node Node.\n * @param {Array.<*>} objectStack Object stack.\n * @return {Object|undefined} Layers object.\n */\nfunction readLayer(node, objectStack) {\n  return pushParseAndPop({}, LAYER_PARSERS, node, objectStack);\n}\n\n\n/**\n * @param {Node} node Node.\n * @param {Array.<*>} objectStack Object stack.\n * @return {Object|undefined} Tile Matrix Set object.\n */\nfunction readTileMatrixSet(node, objectStack) {\n  return pushParseAndPop({}, TMS_PARSERS, node, objectStack);\n}\n\n\n/**\n * @param {Node} node Node.\n * @param {Array.<*>} objectStack Object stack.\n * @return {Object|undefined} Style object.\n */\nfunction readStyle(node, objectStack) {\n  const style = pushParseAndPop({}, STYLE_PARSERS, node, objectStack);\n  if (!style) {\n    return undefined;\n  }\n  const isDefault = node.getAttribute('isDefault') === 'true';\n  style['isDefault'] = isDefault;\n  return style;\n\n}\n\n\n/**\n * @param {Node} node Node.\n * @param {Array.<*>} objectStack Object stack.\n * @return {Object|undefined} Tile Matrix Set Link object.\n */\nfunction readTileMatrixSetLink(node, objectStack) {\n  return pushParseAndPop({}, TMS_LINKS_PARSERS, node, objectStack);\n}\n\n\n/**\n * @param {Node} node Node.\n * @param {Array.<*>} objectStack Object stack.\n * @return {Object|undefined} Dimension object.\n */\nfunction readDimensions(node, objectStack) {\n  return pushParseAndPop({}, DIMENSION_PARSERS, node, objectStack);\n}\n\n\n/**\n * @param {Node} node Node.\n * @param {Array.<*>} objectStack Object stack.\n * @return {Object|undefined} Resource URL object.\n */\nfunction readResourceUrl(node, objectStack) {\n  const format = node.getAttribute('format');\n  const template = node.getAttribute('template');\n  const resourceType = node.getAttribute('resourceType');\n  const resource = {};\n  if (format) {\n    resource['format'] = format;\n  }\n  if (template) {\n    resource['template'] = template;\n  }\n  if (resourceType) {\n    resource['resourceType'] = resourceType;\n  }\n  return resource;\n}\n\n\n/**\n * @param {Node} node Node.\n * @param {Array.<*>} objectStack Object stack.\n * @return {Object|undefined} WGS84 BBox object.\n */\nfunction readWgs84BoundingBox(node, objectStack) {\n  const coordinates = pushParseAndPop([], WGS84_BBOX_READERS, node, objectStack);\n  if (coordinates.length != 2) {\n    return undefined;\n  }\n  return boundingExtent(coordinates);\n}\n\n\n/**\n * @param {Node} node Node.\n * @param {Array.<*>} objectStack Object stack.\n * @return {Object|undefined} Legend object.\n */\nfunction readLegendUrl(node, objectStack) {\n  const legend = {};\n  legend['format'] = node.getAttribute('format');\n  legend['href'] = readHref(node);\n  return legend;\n}\n\n\n/**\n * @param {Node} node Node.\n * @param {Array.<*>} objectStack Object stack.\n * @return {Object|undefined} Coordinates object.\n */\nfunction readCoordinates(node, objectStack) {\n  const coordinates = readString(node).split(' ');\n  if (!coordinates || coordinates.length != 2) {\n    return undefined;\n  }\n  const x = +coordinates[0];\n  const y = +coordinates[1];\n  if (isNaN(x) || isNaN(y)) {\n    return undefined;\n  }\n  return [x, y];\n}\n\n\n/**\n * @param {Node} node Node.\n * @param {Array.<*>} objectStack Object stack.\n * @return {Object|undefined} TileMatrix object.\n */\nfunction readTileMatrix(node, objectStack) {\n  return pushParseAndPop({}, TM_PARSERS, node, objectStack);\n}\n\n\n/**\n * @param {Node} node Node.\n * @param {Array.<*>} objectStack Object stack.\n * @return {Object|undefined} TileMatrixSetLimits Object.\n */\nfunction readTileMatrixLimitsList(node, objectStack) {\n  return pushParseAndPop([], TMS_LIMITS_LIST_PARSERS, node, objectStack);\n}\n\n\n/**\n * @param {Node} node Node.\n * @param {Array.<*>} objectStack Object stack.\n * @return {Object|undefined} TileMatrixLimits Array.\n */\nfunction readTileMatrixLimits(node, objectStack) {\n  return pushParseAndPop({}, TMS_LIMITS_PARSERS, node, objectStack);\n}\n\n\nexport default WMTSCapabilities;\n","/**\n * @module ol/webgl/Shader\n */\nimport {FALSE} from '../functions.js';\n\n/**\n * @constructor\n * @abstract\n * @param {string} source Source.\n * @struct\n */\nconst WebGLShader = function(source) {\n\n  /**\n   * @private\n   * @type {string}\n   */\n  this.source_ = source;\n\n};\n\n\n/**\n * @abstract\n * @return {number} Type.\n */\nWebGLShader.prototype.getType = function() {};\n\n\n/**\n * @return {string} Source.\n */\nWebGLShader.prototype.getSource = function() {\n  return this.source_;\n};\n\n\n/**\n * @return {boolean} Is animated?\n */\nWebGLShader.prototype.isAnimated = FALSE;\nexport default WebGLShader;\n","/**\n * @module ol/webgl/Fragment\n */\nimport {inherits} from '../util.js';\nimport {FRAGMENT_SHADER} from '../webgl.js';\nimport WebGLShader from '../webgl/Shader.js';\n\n/**\n * @constructor\n * @extends {module:ol/webgl/Shader}\n * @param {string} source Source.\n * @struct\n */\nconst WebGLFragment = function(source) {\n  WebGLShader.call(this, source);\n};\n\ninherits(WebGLFragment, WebGLShader);\n\n\n/**\n * @inheritDoc\n */\nWebGLFragment.prototype.getType = function() {\n  return FRAGMENT_SHADER;\n};\nexport default WebGLFragment;\n","/**\n * @module ol/webgl/Vertex\n */\nimport {inherits} from '../util.js';\nimport {VERTEX_SHADER} from '../webgl.js';\nimport WebGLShader from '../webgl/Shader.js';\n\n/**\n * @constructor\n * @extends {module:ol/webgl/Shader}\n * @param {string} source Source.\n * @struct\n */\nconst WebGLVertex = function(source) {\n  WebGLShader.call(this, source);\n};\n\ninherits(WebGLVertex, WebGLShader);\n\n\n/**\n * @inheritDoc\n */\nWebGLVertex.prototype.getType = function() {\n  return VERTEX_SHADER;\n};\nexport default WebGLVertex;\n","/**\n * @module ol/render/webgl/circlereplay/defaultshader\n */\n// This file is automatically generated, do not edit.\n// Run `make shaders` to generate, and commit the result.\n\nimport {DEBUG as DEBUG_WEBGL} from '../../../webgl.js';\nimport WebGLFragment from '../../../webgl/Fragment.js';\nimport WebGLVertex from '../../../webgl/Vertex.js';\n\nexport const fragment = new WebGLFragment(DEBUG_WEBGL ?\n  'precision mediump float;\\nvarying vec2 v_center;\\nvarying vec2 v_offset;\\nvarying float v_halfWidth;\\nvarying float v_pixelRatio;\\n\\n\\n\\nuniform float u_opacity;\\nuniform vec4 u_fillColor;\\nuniform vec4 u_strokeColor;\\nuniform vec2 u_size;\\n\\nvoid main(void) {\\n  vec2 windowCenter = vec2((v_center.x + 1.0) / 2.0 * u_size.x * v_pixelRatio,\\n      (v_center.y + 1.0) / 2.0 * u_size.y * v_pixelRatio);\\n  vec2 windowOffset = vec2((v_offset.x + 1.0) / 2.0 * u_size.x * v_pixelRatio,\\n      (v_offset.y + 1.0) / 2.0 * u_size.y * v_pixelRatio);\\n  float radius = length(windowCenter - windowOffset);\\n  float dist = length(windowCenter - gl_FragCoord.xy);\\n  if (dist > radius + v_halfWidth) {\\n    if (u_strokeColor.a == 0.0) {\\n      gl_FragColor = u_fillColor;\\n    } else {\\n      gl_FragColor = u_strokeColor;\\n    }\\n    gl_FragColor.a = gl_FragColor.a - (dist - (radius + v_halfWidth));\\n  } else if (u_fillColor.a == 0.0) {\\n    // Hooray, no fill, just stroke. We can use real antialiasing.\\n    gl_FragColor = u_strokeColor;\\n    if (dist < radius - v_halfWidth) {\\n      gl_FragColor.a = gl_FragColor.a - (radius - v_halfWidth - dist);\\n    }\\n  } else {\\n    gl_FragColor = u_fillColor;\\n    float strokeDist = radius - v_halfWidth;\\n    float antialias = 2.0 * v_pixelRatio;\\n    if (dist > strokeDist) {\\n      gl_FragColor = u_strokeColor;\\n    } else if (dist >= strokeDist - antialias) {\\n      float step = smoothstep(strokeDist - antialias, strokeDist, dist);\\n      gl_FragColor = mix(u_fillColor, u_strokeColor, step);\\n    }\\n  }\\n  gl_FragColor.a = gl_FragColor.a * u_opacity;\\n  if (gl_FragColor.a <= 0.0) {\\n    discard;\\n  }\\n}\\n' :\n  'precision mediump float;varying vec2 a;varying vec2 b;varying float c;varying float d;uniform float m;uniform vec4 n;uniform vec4 o;uniform vec2 p;void main(void){vec2 windowCenter=vec2((a.x+1.0)/2.0*p.x*d,(a.y+1.0)/2.0*p.y*d);vec2 windowOffset=vec2((b.x+1.0)/2.0*p.x*d,(b.y+1.0)/2.0*p.y*d);float radius=length(windowCenter-windowOffset);float dist=length(windowCenter-gl_FragCoord.xy);if(dist>radius+c){if(o.a==0.0){gl_FragColor=n;}else{gl_FragColor=o;}gl_FragColor.a=gl_FragColor.a-(dist-(radius+c));}else if(n.a==0.0){gl_FragColor=o;if(dist<radius-c){gl_FragColor.a=gl_FragColor.a-(radius-c-dist);}} else{gl_FragColor=n;float strokeDist=radius-c;float antialias=2.0*d;if(dist>strokeDist){gl_FragColor=o;}else if(dist>=strokeDist-antialias){float step=smoothstep(strokeDist-antialias,strokeDist,dist);gl_FragColor=mix(n,o,step);}} gl_FragColor.a=gl_FragColor.a*m;if(gl_FragColor.a<=0.0){discard;}}');\n\nexport const vertex = new WebGLVertex(DEBUG_WEBGL ?\n  'varying vec2 v_center;\\nvarying vec2 v_offset;\\nvarying float v_halfWidth;\\nvarying float v_pixelRatio;\\n\\n\\nattribute vec2 a_position;\\nattribute float a_instruction;\\nattribute float a_radius;\\n\\nuniform mat4 u_projectionMatrix;\\nuniform mat4 u_offsetScaleMatrix;\\nuniform mat4 u_offsetRotateMatrix;\\nuniform float u_lineWidth;\\nuniform float u_pixelRatio;\\n\\nvoid main(void) {\\n  mat4 offsetMatrix = u_offsetScaleMatrix * u_offsetRotateMatrix;\\n  v_center = vec4(u_projectionMatrix * vec4(a_position, 0.0, 1.0)).xy;\\n  v_pixelRatio = u_pixelRatio;\\n  float lineWidth = u_lineWidth * u_pixelRatio;\\n  v_halfWidth = lineWidth / 2.0;\\n  if (lineWidth == 0.0) {\\n    lineWidth = 2.0 * u_pixelRatio;\\n  }\\n  vec2 offset;\\n  // Radius with anitaliasing (roughly).\\n  float radius = a_radius + 3.0 * u_pixelRatio;\\n  // Until we get gl_VertexID in WebGL, we store an instruction.\\n  if (a_instruction == 0.0) {\\n    // Offsetting the edges of the triangle by lineWidth / 2 is necessary, however\\n    // we should also leave some space for the antialiasing, thus we offset by lineWidth.\\n    offset = vec2(-1.0, 1.0);\\n  } else if (a_instruction == 1.0) {\\n    offset = vec2(-1.0, -1.0);\\n  } else if (a_instruction == 2.0) {\\n    offset = vec2(1.0, -1.0);\\n  } else {\\n    offset = vec2(1.0, 1.0);\\n  }\\n\\n  gl_Position = u_projectionMatrix * vec4(a_position + offset * radius, 0.0, 1.0) +\\n      offsetMatrix * vec4(offset * lineWidth, 0.0, 0.0);\\n  v_offset = vec4(u_projectionMatrix * vec4(a_position.x + a_radius, a_position.y,\\n      0.0, 1.0)).xy;\\n\\n  if (distance(v_center, v_offset) > 20000.0) {\\n    gl_Position = vec4(v_center, 0.0, 1.0);\\n  }\\n}\\n\\n\\n' :\n  'varying vec2 a;varying vec2 b;varying float c;varying float d;attribute vec2 e;attribute float f;attribute float g;uniform mat4 h;uniform mat4 i;uniform mat4 j;uniform float k;uniform float l;void main(void){mat4 offsetMatrix=i*j;a=vec4(h*vec4(e,0.0,1.0)).xy;d=l;float lineWidth=k*l;c=lineWidth/2.0;if(lineWidth==0.0){lineWidth=2.0*l;}vec2 offset;float radius=g+3.0*l;if(f==0.0){offset=vec2(-1.0,1.0);}else if(f==1.0){offset=vec2(-1.0,-1.0);}else if(f==2.0){offset=vec2(1.0,-1.0);}else{offset=vec2(1.0,1.0);}gl_Position=h*vec4(e+offset*radius,0.0,1.0)+offsetMatrix*vec4(offset*lineWidth,0.0,0.0);b=vec4(h*vec4(e.x+g,e.y,0.0,1.0)).xy;if(distance(a,b)>20000.0){gl_Position=vec4(a,0.0,1.0);}}');\n","/**\n * @module ol/render/webgl/circlereplay/defaultshader/Locations\n */\n// This file is automatically generated, do not edit\n// Run `make shaders` to generate, and commit the result.\n\nimport {DEBUG as DEBUG_WEBGL} from '../../../../webgl.js';\n\n/**\n * @constructor\n * @param {WebGLRenderingContext} gl GL.\n * @param {WebGLProgram} program Program.\n * @struct\n */\nconst Locations = function(gl, program) {\n\n  /**\n   * @type {WebGLUniformLocation}\n   */\n  this.u_projectionMatrix = gl.getUniformLocation(\n    program, DEBUG_WEBGL ? 'u_projectionMatrix' : 'h');\n\n  /**\n   * @type {WebGLUniformLocation}\n   */\n  this.u_offsetScaleMatrix = gl.getUniformLocation(\n    program, DEBUG_WEBGL ? 'u_offsetScaleMatrix' : 'i');\n\n  /**\n   * @type {WebGLUniformLocation}\n   */\n  this.u_offsetRotateMatrix = gl.getUniformLocation(\n    program, DEBUG_WEBGL ? 'u_offsetRotateMatrix' : 'j');\n\n  /**\n   * @type {WebGLUniformLocation}\n   */\n  this.u_lineWidth = gl.getUniformLocation(\n    program, DEBUG_WEBGL ? 'u_lineWidth' : 'k');\n\n  /**\n   * @type {WebGLUniformLocation}\n   */\n  this.u_pixelRatio = gl.getUniformLocation(\n    program, DEBUG_WEBGL ? 'u_pixelRatio' : 'l');\n\n  /**\n   * @type {WebGLUniformLocation}\n   */\n  this.u_opacity = gl.getUniformLocation(\n    program, DEBUG_WEBGL ? 'u_opacity' : 'm');\n\n  /**\n   * @type {WebGLUniformLocation}\n   */\n  this.u_fillColor = gl.getUniformLocation(\n    program, DEBUG_WEBGL ? 'u_fillColor' : 'n');\n\n  /**\n   * @type {WebGLUniformLocation}\n   */\n  this.u_strokeColor = gl.getUniformLocation(\n    program, DEBUG_WEBGL ? 'u_strokeColor' : 'o');\n\n  /**\n   * @type {WebGLUniformLocation}\n   */\n  this.u_size = gl.getUniformLocation(\n    program, DEBUG_WEBGL ? 'u_size' : 'p');\n\n  /**\n   * @type {number}\n   */\n  this.a_position = gl.getAttribLocation(\n    program, DEBUG_WEBGL ? 'a_position' : 'e');\n\n  /**\n   * @type {number}\n   */\n  this.a_instruction = gl.getAttribLocation(\n    program, DEBUG_WEBGL ? 'a_instruction' : 'f');\n\n  /**\n   * @type {number}\n   */\n  this.a_radius = gl.getAttribLocation(\n    program, DEBUG_WEBGL ? 'a_radius' : 'g');\n};\n\nexport default Locations;\n","/**\n * @module ol/vec/mat4\n */\n\n\n/**\n * @return {Array.<number>} 4x4 matrix representing a 3D identity transform.\n */\nexport function create() {\n  return [1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1];\n}\n\n\n/**\n * @param {Array.<number>} mat4 Flattened 4x4 matrix receiving the result.\n * @param {module:ol/transform~Transform} transform Transformation matrix.\n * @return {Array.<number>} 2D transformation matrix as flattened 4x4 matrix.\n */\nexport function fromTransform(mat4, transform) {\n  mat4[0] = transform[0];\n  mat4[1] = transform[1];\n  mat4[4] = transform[2];\n  mat4[5] = transform[3];\n  mat4[12] = transform[4];\n  mat4[13] = transform[5];\n  return mat4;\n}\n","/**\n * @module ol/render/webgl/Replay\n */\nimport {inherits} from '../../util.js';\nimport {getCenter} from '../../extent.js';\nimport VectorContext from '../VectorContext.js';\nimport {\n  create as createTransform,\n  reset as resetTransform,\n  rotate as rotateTransform,\n  scale as scaleTransform,\n  translate as translateTransform\n} from '../../transform.js';\nimport {create, fromTransform} from '../../vec/mat4.js';\nimport {ARRAY_BUFFER, ELEMENT_ARRAY_BUFFER, TRIANGLES,\n  UNSIGNED_INT, UNSIGNED_SHORT} from '../../webgl.js';\n\n/**\n * @constructor\n * @abstract\n * @extends {module:ol/render/VectorContext}\n * @param {number} tolerance Tolerance.\n * @param {module:ol/extent~Extent} maxExtent Max extent.\n * @struct\n */\nconst WebGLReplay = function(tolerance, maxExtent) {\n  VectorContext.call(this);\n\n  /**\n   * @protected\n   * @type {number}\n   */\n  this.tolerance = tolerance;\n\n  /**\n   * @protected\n   * @const\n   * @type {module:ol/extent~Extent}\n   */\n  this.maxExtent = maxExtent;\n\n  /**\n   * The origin of the coordinate system for the point coordinates sent to\n   * the GPU. To eliminate jitter caused by precision problems in the GPU\n   * we use the \"Rendering Relative to Eye\" technique described in the \"3D\n   * Engine Design for Virtual Globes\" book.\n   * @protected\n   * @type {module:ol/coordinate~Coordinate}\n   */\n  this.origin = getCenter(maxExtent);\n\n  /**\n   * @private\n   * @type {module:ol/transform~Transform}\n   */\n  this.projectionMatrix_ = createTransform();\n\n  /**\n   * @private\n   * @type {module:ol/transform~Transform}\n   */\n  this.offsetRotateMatrix_ = createTransform();\n\n  /**\n   * @private\n   * @type {module:ol/transform~Transform}\n   */\n  this.offsetScaleMatrix_ = createTransform();\n\n  /**\n   * @private\n   * @type {Array.<number>}\n   */\n  this.tmpMat4_ = create();\n\n  /**\n   * @protected\n   * @type {Array.<number>}\n   */\n  this.indices = [];\n\n  /**\n   * @protected\n   * @type {?module:ol/webgl/Buffer}\n   */\n  this.indicesBuffer = null;\n\n  /**\n   * Start index per feature (the index).\n   * @protected\n   * @type {Array.<number>}\n   */\n  this.startIndices = [];\n\n  /**\n   * Start index per feature (the feature).\n   * @protected\n   * @type {Array.<module:ol/Feature|module:ol/render/Feature>}\n   */\n  this.startIndicesFeature = [];\n\n  /**\n   * @protected\n   * @type {Array.<number>}\n   */\n  this.vertices = [];\n\n  /**\n   * @protected\n   * @type {?module:ol/webgl/Buffer}\n   */\n  this.verticesBuffer = null;\n\n  /**\n   * Optional parameter for PolygonReplay instances.\n   * @protected\n   * @type {module:ol/render/webgl/LineStringReplay|undefined}\n   */\n  this.lineStringReplay = undefined;\n\n};\n\ninherits(WebGLReplay, VectorContext);\n\n\n/**\n * @abstract\n * @param {module:ol/webgl/Context} context WebGL context.\n * @return {function()} Delete resources function.\n */\nWebGLReplay.prototype.getDeleteResourcesFunction = function(context) {};\n\n\n/**\n * @abstract\n * @param {module:ol/webgl/Context} context Context.\n */\nWebGLReplay.prototype.finish = function(context) {};\n\n\n/**\n * @abstract\n * @protected\n * @param {WebGLRenderingContext} gl gl.\n * @param {module:ol/webgl/Context} context Context.\n * @param {module:ol/size~Size} size Size.\n * @param {number} pixelRatio Pixel ratio.\n * @return {module:ol/render/webgl/circlereplay/defaultshader/Locations|\n            module:ol/render/webgl/linestringreplay/defaultshader/Locations|\n            module:ol/render/webgl/polygonreplay/defaultshader/Locations|\n            module:ol/render/webgl/texturereplay/defaultshader/Locations} Locations.\n */\nWebGLReplay.prototype.setUpProgram = function(gl, context, size, pixelRatio) {};\n\n\n/**\n * @abstract\n * @protected\n * @param {WebGLRenderingContext} gl gl.\n * @param {module:ol/render/webgl/circlereplay/defaultshader/Locations|\n           module:ol/render/webgl/linestringreplay/defaultshader/Locations|\n           module:ol/render/webgl/polygonreplay/defaultshader/Locations|\n           module:ol/render/webgl/texturereplay/defaultshader/Locations} locations Locations.\n */\nWebGLReplay.prototype.shutDownProgram = function(gl, locations) {};\n\n\n/**\n * @abstract\n * @protected\n * @param {WebGLRenderingContext} gl gl.\n * @param {module:ol/webgl/Context} context Context.\n * @param {Object.<string, boolean>} skippedFeaturesHash Ids of features to skip.\n * @param {boolean} hitDetection Hit detection mode.\n */\nWebGLReplay.prototype.drawReplay = function(gl, context, skippedFeaturesHash, hitDetection) {};\n\n\n/**\n * @abstract\n * @protected\n * @param {WebGLRenderingContext} gl gl.\n * @param {module:ol/webgl/Context} context Context.\n * @param {Object.<string, boolean>} skippedFeaturesHash Ids of features to skip.\n * @param {function((module:ol/Feature|module:ol/render/Feature)): T|undefined} featureCallback Feature callback.\n * @param {module:ol/extent~Extent=} opt_hitExtent Hit extent: Only features intersecting this extent are checked.\n * @return {T|undefined} Callback result.\n * @template T\n */\nWebGLReplay.prototype.drawHitDetectionReplayOneByOne = function(gl, context, skippedFeaturesHash, featureCallback, opt_hitExtent) {};\n\n\n/**\n * @protected\n * @param {WebGLRenderingContext} gl gl.\n * @param {module:ol/webgl/Context} context Context.\n * @param {Object.<string, boolean>} skippedFeaturesHash Ids of features to skip.\n * @param {function((module:ol/Feature|module:ol/render/Feature)): T|undefined} featureCallback Feature callback.\n * @param {boolean} oneByOne Draw features one-by-one for the hit-detecion.\n * @param {module:ol/extent~Extent=} opt_hitExtent Hit extent: Only features intersecting\n *  this extent are checked.\n * @return {T|undefined} Callback result.\n * @template T\n */\nWebGLReplay.prototype.drawHitDetectionReplay = function(gl, context, skippedFeaturesHash,\n  featureCallback, oneByOne, opt_hitExtent) {\n  if (!oneByOne) {\n    // draw all hit-detection features in \"once\" (by texture group)\n    return this.drawHitDetectionReplayAll(gl, context,\n      skippedFeaturesHash, featureCallback);\n  } else {\n    // draw hit-detection features one by one\n    return this.drawHitDetectionReplayOneByOne(gl, context,\n      skippedFeaturesHash, featureCallback, opt_hitExtent);\n  }\n};\n\n\n/**\n * @protected\n * @param {WebGLRenderingContext} gl gl.\n * @param {module:ol/webgl/Context} context Context.\n * @param {Object.<string, boolean>} skippedFeaturesHash Ids of features to skip.\n * @param {function((module:ol/Feature|module:ol/render/Feature)): T|undefined} featureCallback Feature callback.\n * @return {T|undefined} Callback result.\n * @template T\n */\nWebGLReplay.prototype.drawHitDetectionReplayAll = function(gl, context, skippedFeaturesHash,\n  featureCallback) {\n  gl.clear(gl.COLOR_BUFFER_BIT | gl.DEPTH_BUFFER_BIT);\n  this.drawReplay(gl, context, skippedFeaturesHash, true);\n\n  const result = featureCallback(null);\n  if (result) {\n    return result;\n  } else {\n    return undefined;\n  }\n};\n\n\n/**\n * @param {module:ol/webgl/Context} context Context.\n * @param {module:ol/coordinate~Coordinate} center Center.\n * @param {number} resolution Resolution.\n * @param {number} rotation Rotation.\n * @param {module:ol/size~Size} size Size.\n * @param {number} pixelRatio Pixel ratio.\n * @param {number} opacity Global opacity.\n * @param {Object.<string, boolean>} skippedFeaturesHash Ids of features to skip.\n * @param {function((module:ol/Feature|module:ol/render/Feature)): T|undefined} featureCallback Feature callback.\n * @param {boolean} oneByOne Draw features one-by-one for the hit-detecion.\n * @param {module:ol/extent~Extent=} opt_hitExtent Hit extent: Only features intersecting\n *  this extent are checked.\n * @return {T|undefined} Callback result.\n * @template T\n */\nWebGLReplay.prototype.replay = function(context,\n  center, resolution, rotation, size, pixelRatio,\n  opacity, skippedFeaturesHash,\n  featureCallback, oneByOne, opt_hitExtent) {\n  const gl = context.getGL();\n  let tmpStencil, tmpStencilFunc, tmpStencilMaskVal, tmpStencilRef, tmpStencilMask,\n      tmpStencilOpFail, tmpStencilOpPass, tmpStencilOpZFail;\n\n  if (this.lineStringReplay) {\n    tmpStencil = gl.isEnabled(gl.STENCIL_TEST);\n    tmpStencilFunc = gl.getParameter(gl.STENCIL_FUNC);\n    tmpStencilMaskVal = gl.getParameter(gl.STENCIL_VALUE_MASK);\n    tmpStencilRef = gl.getParameter(gl.STENCIL_REF);\n    tmpStencilMask = gl.getParameter(gl.STENCIL_WRITEMASK);\n    tmpStencilOpFail = gl.getParameter(gl.STENCIL_FAIL);\n    tmpStencilOpPass = gl.getParameter(gl.STENCIL_PASS_DEPTH_PASS);\n    tmpStencilOpZFail = gl.getParameter(gl.STENCIL_PASS_DEPTH_FAIL);\n\n    gl.enable(gl.STENCIL_TEST);\n    gl.clear(gl.STENCIL_BUFFER_BIT);\n    gl.stencilMask(255);\n    gl.stencilFunc(gl.ALWAYS, 1, 255);\n    gl.stencilOp(gl.KEEP, gl.KEEP, gl.REPLACE);\n\n    this.lineStringReplay.replay(context,\n      center, resolution, rotation, size, pixelRatio,\n      opacity, skippedFeaturesHash,\n      featureCallback, oneByOne, opt_hitExtent);\n\n    gl.stencilMask(0);\n    gl.stencilFunc(gl.NOTEQUAL, 1, 255);\n  }\n\n  context.bindBuffer(ARRAY_BUFFER, this.verticesBuffer);\n\n  context.bindBuffer(ELEMENT_ARRAY_BUFFER, this.indicesBuffer);\n\n  const locations = this.setUpProgram(gl, context, size, pixelRatio);\n\n  // set the \"uniform\" values\n  const projectionMatrix = resetTransform(this.projectionMatrix_);\n  scaleTransform(projectionMatrix, 2 / (resolution * size[0]), 2 / (resolution * size[1]));\n  rotateTransform(projectionMatrix, -rotation);\n  translateTransform(projectionMatrix, -(center[0] - this.origin[0]), -(center[1] - this.origin[1]));\n\n  const offsetScaleMatrix = resetTransform(this.offsetScaleMatrix_);\n  scaleTransform(offsetScaleMatrix, 2 / size[0], 2 / size[1]);\n\n  const offsetRotateMatrix = resetTransform(this.offsetRotateMatrix_);\n  if (rotation !== 0) {\n    rotateTransform(offsetRotateMatrix, -rotation);\n  }\n\n  gl.uniformMatrix4fv(locations.u_projectionMatrix, false,\n    fromTransform(this.tmpMat4_, projectionMatrix));\n  gl.uniformMatrix4fv(locations.u_offsetScaleMatrix, false,\n    fromTransform(this.tmpMat4_, offsetScaleMatrix));\n  gl.uniformMatrix4fv(locations.u_offsetRotateMatrix, false,\n    fromTransform(this.tmpMat4_, offsetRotateMatrix));\n  gl.uniform1f(locations.u_opacity, opacity);\n\n  // draw!\n  let result;\n  if (featureCallback === undefined) {\n    this.drawReplay(gl, context, skippedFeaturesHash, false);\n  } else {\n    // draw feature by feature for the hit-detection\n    result = this.drawHitDetectionReplay(gl, context, skippedFeaturesHash,\n      featureCallback, oneByOne, opt_hitExtent);\n  }\n\n  // disable the vertex attrib arrays\n  this.shutDownProgram(gl, locations);\n\n  if (this.lineStringReplay) {\n    if (!tmpStencil) {\n      gl.disable(gl.STENCIL_TEST);\n    }\n    gl.clear(gl.STENCIL_BUFFER_BIT);\n    gl.stencilFunc(/** @type {number} */ (tmpStencilFunc),\n      /** @type {number} */ (tmpStencilRef), /** @type {number} */ (tmpStencilMaskVal));\n    gl.stencilMask(/** @type {number} */ (tmpStencilMask));\n    gl.stencilOp(/** @type {number} */ (tmpStencilOpFail),\n      /** @type {number} */ (tmpStencilOpZFail), /** @type {number} */ (tmpStencilOpPass));\n  }\n\n  return result;\n};\n\n/**\n * @protected\n * @param {WebGLRenderingContext} gl gl.\n * @param {module:ol/webgl/Context} context Context.\n * @param {number} start Start index.\n * @param {number} end End index.\n */\nWebGLReplay.prototype.drawElements = function(\n  gl, context, start, end) {\n  const elementType = context.hasOESElementIndexUint ?\n    UNSIGNED_INT : UNSIGNED_SHORT;\n  const elementSize = context.hasOESElementIndexUint ? 4 : 2;\n\n  const numItems = end - start;\n  const offsetInBytes = start * elementSize;\n  gl.drawElements(TRIANGLES, numItems, elementType, offsetInBytes);\n};\nexport default WebGLReplay;\n","/**\n * @module ol/render/webgl\n */\n\n\n/**\n * @const\n * @type {string}\n */\nexport const DEFAULT_FONT = '10px sans-serif';\n\n\n/**\n * @const\n * @type {module:ol/color~Color}\n */\nexport const DEFAULT_FILLSTYLE = [0.0, 0.0, 0.0, 1.0];\n\n\n/**\n * @const\n * @type {string}\n */\nexport const DEFAULT_LINECAP = 'round';\n\n\n/**\n * @const\n * @type {Array.<number>}\n */\nexport const DEFAULT_LINEDASH = [];\n\n\n/**\n * @const\n * @type {number}\n */\nexport const DEFAULT_LINEDASHOFFSET = 0;\n\n\n/**\n * @const\n * @type {string}\n */\nexport const DEFAULT_LINEJOIN = 'round';\n\n\n/**\n * @const\n * @type {number}\n */\nexport const DEFAULT_MITERLIMIT = 10;\n\n/**\n * @const\n * @type {module:ol/color~Color}\n */\nexport const DEFAULT_STROKESTYLE = [0.0, 0.0, 0.0, 1.0];\n\n\n/**\n * @const\n * @type {number}\n */\nexport const DEFAULT_TEXTALIGN = 0.5;\n\n\n/**\n * @const\n * @type {number}\n */\nexport const DEFAULT_TEXTBASELINE = 0.5;\n\n\n/**\n * @const\n * @type {number}\n */\nexport const DEFAULT_LINEWIDTH = 1;\n\n/**\n * @const\n * @type {number}\n */\nexport const EPSILON = Number.EPSILON || 2.220446049250313e-16;\n\n/**\n * Calculates the orientation of a triangle based on the determinant method.\n * @param {number} x1 First X coordinate.\n * @param {number} y1 First Y coordinate.\n * @param {number} x2 Second X coordinate.\n * @param {number} y2 Second Y coordinate.\n * @param {number} x3 Third X coordinate.\n * @param {number} y3 Third Y coordinate.\n * @return {boolean|undefined} Triangle is clockwise.\n */\nexport const triangleIsCounterClockwise = function(x1, y1, x2, y2, x3, y3) {\n  const area = (x2 - x1) * (y3 - y1) - (x3 - x1) * (y2 - y1);\n  return (area <= EPSILON && area >= -EPSILON) ?\n    undefined : area > 0;\n};\n\n","/**\n * @module ol/webgl/Buffer\n */\nimport {STATIC_DRAW, STREAM_DRAW, DYNAMIC_DRAW} from '../webgl.js';\n\n/**\n * @enum {number}\n */\nconst BufferUsage = {\n  STATIC_DRAW: STATIC_DRAW,\n  STREAM_DRAW: STREAM_DRAW,\n  DYNAMIC_DRAW: DYNAMIC_DRAW\n};\n\n/**\n * @constructor\n * @param {Array.<number>=} opt_arr Array.\n * @param {number=} opt_usage Usage.\n * @struct\n */\nconst WebGLBuffer = function(opt_arr, opt_usage) {\n\n  /**\n   * @private\n   * @type {Array.<number>}\n   */\n  this.arr_ = opt_arr !== undefined ? opt_arr : [];\n\n  /**\n   * @private\n   * @type {number}\n   */\n  this.usage_ = opt_usage !== undefined ? opt_usage : BufferUsage.STATIC_DRAW;\n\n};\n\n\n/**\n * @return {Array.<number>} Array.\n */\nWebGLBuffer.prototype.getArray = function() {\n  return this.arr_;\n};\n\n\n/**\n * @return {number} Usage.\n */\nWebGLBuffer.prototype.getUsage = function() {\n  return this.usage_;\n};\n\nexport default WebGLBuffer;\n","/**\n * @module ol/render/webgl/CircleReplay\n */\nimport {getUid, inherits} from '../../util.js';\nimport {equals} from '../../array.js';\nimport {asArray} from '../../color.js';\nimport {intersects} from '../../extent.js';\nimport {isEmpty} from '../../obj.js';\nimport {translate} from '../../geom/flat/transform.js';\nimport {fragment, vertex} from '../webgl/circlereplay/defaultshader.js';\nimport Locations from '../webgl/circlereplay/defaultshader/Locations.js';\nimport WebGLReplay from '../webgl/Replay.js';\nimport {DEFAULT_LINEDASH, DEFAULT_LINEDASHOFFSET, DEFAULT_STROKESTYLE,\n  DEFAULT_FILLSTYLE, DEFAULT_LINEWIDTH} from '../webgl.js';\nimport {FLOAT} from '../../webgl.js';\nimport WebGLBuffer from '../../webgl/Buffer.js';\n\n/**\n * @constructor\n * @extends {module:ol/render/webgl/Replay}\n * @param {number} tolerance Tolerance.\n * @param {module:ol/extent~Extent} maxExtent Max extent.\n * @struct\n */\nconst WebGLCircleReplay = function(tolerance, maxExtent) {\n  WebGLReplay.call(this, tolerance, maxExtent);\n\n  /**\n   * @private\n   * @type {module:ol/render/webgl/circlereplay/defaultshader/Locations}\n   */\n  this.defaultLocations_ = null;\n\n  /**\n   * @private\n   * @type {Array.<Array.<Array.<number>|number>>}\n   */\n  this.styles_ = [];\n\n  /**\n   * @private\n   * @type {Array.<number>}\n   */\n  this.styleIndices_ = [];\n\n  /**\n   * @private\n   * @type {number}\n   */\n  this.radius_ = 0;\n\n  /**\n   * @private\n   * @type {{fillColor: (Array.<number>|null),\n   *         strokeColor: (Array.<number>|null),\n   *         lineDash: Array.<number>,\n   *         lineDashOffset: (number|undefined),\n   *         lineWidth: (number|undefined),\n   *         changed: boolean}|null}\n   */\n  this.state_ = {\n    fillColor: null,\n    strokeColor: null,\n    lineDash: null,\n    lineDashOffset: undefined,\n    lineWidth: undefined,\n    changed: false\n  };\n\n};\n\ninherits(WebGLCircleReplay, WebGLReplay);\n\n\n/**\n * @private\n * @param {Array.<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {number} end End.\n * @param {number} stride Stride.\n */\nWebGLCircleReplay.prototype.drawCoordinates_ = function(\n  flatCoordinates, offset, end, stride) {\n  let numVertices = this.vertices.length;\n  let numIndices = this.indices.length;\n  let n = numVertices / 4;\n  let i, ii;\n  for (i = offset, ii = end; i < ii; i += stride) {\n    this.vertices[numVertices++] = flatCoordinates[i];\n    this.vertices[numVertices++] = flatCoordinates[i + 1];\n    this.vertices[numVertices++] = 0;\n    this.vertices[numVertices++] = this.radius_;\n\n    this.vertices[numVertices++] = flatCoordinates[i];\n    this.vertices[numVertices++] = flatCoordinates[i + 1];\n    this.vertices[numVertices++] = 1;\n    this.vertices[numVertices++] = this.radius_;\n\n    this.vertices[numVertices++] = flatCoordinates[i];\n    this.vertices[numVertices++] = flatCoordinates[i + 1];\n    this.vertices[numVertices++] = 2;\n    this.vertices[numVertices++] = this.radius_;\n\n    this.vertices[numVertices++] = flatCoordinates[i];\n    this.vertices[numVertices++] = flatCoordinates[i + 1];\n    this.vertices[numVertices++] = 3;\n    this.vertices[numVertices++] = this.radius_;\n\n    this.indices[numIndices++] = n;\n    this.indices[numIndices++] = n + 1;\n    this.indices[numIndices++] = n + 2;\n\n    this.indices[numIndices++] = n + 2;\n    this.indices[numIndices++] = n + 3;\n    this.indices[numIndices++] = n;\n\n    n += 4;\n  }\n};\n\n\n/**\n * @inheritDoc\n */\nWebGLCircleReplay.prototype.drawCircle = function(circleGeometry, feature) {\n  const radius = circleGeometry.getRadius();\n  const stride = circleGeometry.getStride();\n  if (radius) {\n    this.startIndices.push(this.indices.length);\n    this.startIndicesFeature.push(feature);\n    if (this.state_.changed) {\n      this.styleIndices_.push(this.indices.length);\n      this.state_.changed = false;\n    }\n\n    this.radius_ = radius;\n    let flatCoordinates = circleGeometry.getFlatCoordinates();\n    flatCoordinates = translate(flatCoordinates, 0, 2,\n      stride, -this.origin[0], -this.origin[1]);\n    this.drawCoordinates_(flatCoordinates, 0, 2, stride);\n  } else {\n    if (this.state_.changed) {\n      this.styles_.pop();\n      if (this.styles_.length) {\n        const lastState = this.styles_[this.styles_.length - 1];\n        this.state_.fillColor =  /** @type {Array.<number>} */ (lastState[0]);\n        this.state_.strokeColor = /** @type {Array.<number>} */ (lastState[1]);\n        this.state_.lineWidth = /** @type {number} */ (lastState[2]);\n        this.state_.changed = false;\n      }\n    }\n  }\n};\n\n\n/**\n * @inheritDoc\n **/\nWebGLCircleReplay.prototype.finish = function(context) {\n  // create, bind, and populate the vertices buffer\n  this.verticesBuffer = new WebGLBuffer(this.vertices);\n\n  // create, bind, and populate the indices buffer\n  this.indicesBuffer = new WebGLBuffer(this.indices);\n\n  this.startIndices.push(this.indices.length);\n\n  //Clean up, if there is nothing to draw\n  if (this.styleIndices_.length === 0 && this.styles_.length > 0) {\n    this.styles_ = [];\n  }\n\n  this.vertices = null;\n  this.indices = null;\n};\n\n\n/**\n * @inheritDoc\n */\nWebGLCircleReplay.prototype.getDeleteResourcesFunction = function(context) {\n  // We only delete our stuff here. The shaders and the program may\n  // be used by other CircleReplay instances (for other layers). And\n  // they will be deleted when disposing of the module:ol/webgl/Context~WebGLContext\n  // object.\n  const verticesBuffer = this.verticesBuffer;\n  const indicesBuffer = this.indicesBuffer;\n  return function() {\n    context.deleteBuffer(verticesBuffer);\n    context.deleteBuffer(indicesBuffer);\n  };\n};\n\n\n/**\n * @inheritDoc\n */\nWebGLCircleReplay.prototype.setUpProgram = function(gl, context, size, pixelRatio) {\n  // get the program\n  const program = context.getProgram(fragment, vertex);\n\n  // get the locations\n  let locations;\n  if (!this.defaultLocations_) {\n    locations = new Locations(gl, program);\n    this.defaultLocations_ = locations;\n  } else {\n    locations = this.defaultLocations_;\n  }\n\n  context.useProgram(program);\n\n  // enable the vertex attrib arrays\n  gl.enableVertexAttribArray(locations.a_position);\n  gl.vertexAttribPointer(locations.a_position, 2, FLOAT,\n    false, 16, 0);\n\n  gl.enableVertexAttribArray(locations.a_instruction);\n  gl.vertexAttribPointer(locations.a_instruction, 1, FLOAT,\n    false, 16, 8);\n\n  gl.enableVertexAttribArray(locations.a_radius);\n  gl.vertexAttribPointer(locations.a_radius, 1, FLOAT,\n    false, 16, 12);\n\n  // Enable renderer specific uniforms.\n  gl.uniform2fv(locations.u_size, size);\n  gl.uniform1f(locations.u_pixelRatio, pixelRatio);\n\n  return locations;\n};\n\n\n/**\n * @inheritDoc\n */\nWebGLCircleReplay.prototype.shutDownProgram = function(gl, locations) {\n  gl.disableVertexAttribArray(locations.a_position);\n  gl.disableVertexAttribArray(locations.a_instruction);\n  gl.disableVertexAttribArray(locations.a_radius);\n};\n\n\n/**\n * @inheritDoc\n */\nWebGLCircleReplay.prototype.drawReplay = function(gl, context, skippedFeaturesHash, hitDetection) {\n  if (!isEmpty(skippedFeaturesHash)) {\n    this.drawReplaySkipping_(gl, context, skippedFeaturesHash);\n  } else {\n    //Draw by style groups to minimize drawElements() calls.\n    let i, start, end, nextStyle;\n    end = this.startIndices[this.startIndices.length - 1];\n    for (i = this.styleIndices_.length - 1; i >= 0; --i) {\n      start = this.styleIndices_[i];\n      nextStyle = this.styles_[i];\n      this.setFillStyle_(gl, /** @type {Array.<number>} */ (nextStyle[0]));\n      this.setStrokeStyle_(gl, /** @type {Array.<number>} */ (nextStyle[1]),\n        /** @type {number} */ (nextStyle[2]));\n      this.drawElements(gl, context, start, end);\n      end = start;\n    }\n  }\n};\n\n\n/**\n * @inheritDoc\n */\nWebGLCircleReplay.prototype.drawHitDetectionReplayOneByOne = function(gl, context, skippedFeaturesHash,\n  featureCallback, opt_hitExtent) {\n  let i, start, end, nextStyle, groupStart, feature, featureUid, featureIndex;\n  featureIndex = this.startIndices.length - 2;\n  end = this.startIndices[featureIndex + 1];\n  for (i = this.styleIndices_.length - 1; i >= 0; --i) {\n    nextStyle = this.styles_[i];\n    this.setFillStyle_(gl, /** @type {Array.<number>} */ (nextStyle[0]));\n    this.setStrokeStyle_(gl, /** @type {Array.<number>} */ (nextStyle[1]),\n      /** @type {number} */ (nextStyle[2]));\n    groupStart = this.styleIndices_[i];\n\n    while (featureIndex >= 0 &&\n        this.startIndices[featureIndex] >= groupStart) {\n      start = this.startIndices[featureIndex];\n      feature = this.startIndicesFeature[featureIndex];\n      featureUid = getUid(feature).toString();\n\n      if (skippedFeaturesHash[featureUid] === undefined &&\n          feature.getGeometry() &&\n          (opt_hitExtent === undefined || intersects(\n            /** @type {Array<number>} */ (opt_hitExtent),\n            feature.getGeometry().getExtent()))) {\n        gl.clear(gl.COLOR_BUFFER_BIT | gl.DEPTH_BUFFER_BIT);\n        this.drawElements(gl, context, start, end);\n\n        const result = featureCallback(feature);\n\n        if (result) {\n          return result;\n        }\n\n      }\n      featureIndex--;\n      end = start;\n    }\n  }\n  return undefined;\n};\n\n\n/**\n * @private\n * @param {WebGLRenderingContext} gl gl.\n * @param {module:ol/webgl/Context} context Context.\n * @param {Object} skippedFeaturesHash Ids of features to skip.\n */\nWebGLCircleReplay.prototype.drawReplaySkipping_ = function(gl, context, skippedFeaturesHash) {\n  let i, start, end, nextStyle, groupStart, feature, featureUid, featureIndex, featureStart;\n  featureIndex = this.startIndices.length - 2;\n  end = start = this.startIndices[featureIndex + 1];\n  for (i = this.styleIndices_.length - 1; i >= 0; --i) {\n    nextStyle = this.styles_[i];\n    this.setFillStyle_(gl, /** @type {Array.<number>} */ (nextStyle[0]));\n    this.setStrokeStyle_(gl, /** @type {Array.<number>} */ (nextStyle[1]),\n      /** @type {number} */ (nextStyle[2]));\n    groupStart = this.styleIndices_[i];\n\n    while (featureIndex >= 0 &&\n        this.startIndices[featureIndex] >= groupStart) {\n      featureStart = this.startIndices[featureIndex];\n      feature = this.startIndicesFeature[featureIndex];\n      featureUid = getUid(feature).toString();\n\n      if (skippedFeaturesHash[featureUid]) {\n        if (start !== end) {\n          this.drawElements(gl, context, start, end);\n        }\n        end = featureStart;\n      }\n      featureIndex--;\n      start = featureStart;\n    }\n    if (start !== end) {\n      this.drawElements(gl, context, start, end);\n    }\n    start = end = groupStart;\n  }\n};\n\n\n/**\n * @private\n * @param {WebGLRenderingContext} gl gl.\n * @param {Array.<number>} color Color.\n */\nWebGLCircleReplay.prototype.setFillStyle_ = function(gl, color) {\n  gl.uniform4fv(this.defaultLocations_.u_fillColor, color);\n};\n\n\n/**\n * @private\n * @param {WebGLRenderingContext} gl gl.\n * @param {Array.<number>} color Color.\n * @param {number} lineWidth Line width.\n */\nWebGLCircleReplay.prototype.setStrokeStyle_ = function(gl, color, lineWidth) {\n  gl.uniform4fv(this.defaultLocations_.u_strokeColor, color);\n  gl.uniform1f(this.defaultLocations_.u_lineWidth, lineWidth);\n};\n\n\n/**\n * @inheritDoc\n */\nWebGLCircleReplay.prototype.setFillStrokeStyle = function(fillStyle, strokeStyle) {\n  let strokeStyleColor, strokeStyleWidth;\n  if (strokeStyle) {\n    const strokeStyleLineDash = strokeStyle.getLineDash();\n    this.state_.lineDash = strokeStyleLineDash ?\n      strokeStyleLineDash : DEFAULT_LINEDASH;\n    const strokeStyleLineDashOffset = strokeStyle.getLineDashOffset();\n    this.state_.lineDashOffset = strokeStyleLineDashOffset ?\n      strokeStyleLineDashOffset : DEFAULT_LINEDASHOFFSET;\n    strokeStyleColor = strokeStyle.getColor();\n    if (!(strokeStyleColor instanceof CanvasGradient) &&\n        !(strokeStyleColor instanceof CanvasPattern)) {\n      strokeStyleColor = asArray(strokeStyleColor).map(function(c, i) {\n        return i != 3 ? c / 255 : c;\n      }) || DEFAULT_STROKESTYLE;\n    } else {\n      strokeStyleColor = DEFAULT_STROKESTYLE;\n    }\n    strokeStyleWidth = strokeStyle.getWidth();\n    strokeStyleWidth = strokeStyleWidth !== undefined ?\n      strokeStyleWidth : DEFAULT_LINEWIDTH;\n  } else {\n    strokeStyleColor = [0, 0, 0, 0];\n    strokeStyleWidth = 0;\n  }\n  let fillStyleColor = fillStyle ? fillStyle.getColor() : [0, 0, 0, 0];\n  if (!(fillStyleColor instanceof CanvasGradient) &&\n      !(fillStyleColor instanceof CanvasPattern)) {\n    fillStyleColor = asArray(fillStyleColor).map(function(c, i) {\n      return i != 3 ? c / 255 : c;\n    }) || DEFAULT_FILLSTYLE;\n  } else {\n    fillStyleColor = DEFAULT_FILLSTYLE;\n  }\n  if (!this.state_.strokeColor || !equals(this.state_.strokeColor, strokeStyleColor) ||\n      !this.state_.fillColor || !equals(this.state_.fillColor, fillStyleColor) ||\n      this.state_.lineWidth !== strokeStyleWidth) {\n    this.state_.changed = true;\n    this.state_.fillColor = fillStyleColor;\n    this.state_.strokeColor = strokeStyleColor;\n    this.state_.lineWidth = strokeStyleWidth;\n    this.styles_.push([fillStyleColor, strokeStyleColor, strokeStyleWidth]);\n  }\n};\nexport default WebGLCircleReplay;\n","/**\n * @module ol/render/webgl/texturereplay/defaultshader\n */\n// This file is automatically generated, do not edit.\n// Run `make shaders` to generate, and commit the result.\n\nimport {DEBUG as DEBUG_WEBGL} from '../../../webgl.js';\nimport WebGLFragment from '../../../webgl/Fragment.js';\nimport WebGLVertex from '../../../webgl/Vertex.js';\n\nexport const fragment = new WebGLFragment(DEBUG_WEBGL ?\n  'precision mediump float;\\nvarying vec2 v_texCoord;\\nvarying float v_opacity;\\n\\nuniform float u_opacity;\\nuniform sampler2D u_image;\\n\\nvoid main(void) {\\n  vec4 texColor = texture2D(u_image, v_texCoord);\\n  gl_FragColor.rgb = texColor.rgb;\\n  float alpha = texColor.a * v_opacity * u_opacity;\\n  if (alpha == 0.0) {\\n    discard;\\n  }\\n  gl_FragColor.a = alpha;\\n}\\n' :\n  'precision mediump float;varying vec2 a;varying float b;uniform float k;uniform sampler2D l;void main(void){vec4 texColor=texture2D(l,a);gl_FragColor.rgb=texColor.rgb;float alpha=texColor.a*b*k;if(alpha==0.0){discard;}gl_FragColor.a=alpha;}');\n\nexport const vertex = new WebGLVertex(DEBUG_WEBGL ?\n  'varying vec2 v_texCoord;\\nvarying float v_opacity;\\n\\nattribute vec2 a_position;\\nattribute vec2 a_texCoord;\\nattribute vec2 a_offsets;\\nattribute float a_opacity;\\nattribute float a_rotateWithView;\\n\\nuniform mat4 u_projectionMatrix;\\nuniform mat4 u_offsetScaleMatrix;\\nuniform mat4 u_offsetRotateMatrix;\\n\\nvoid main(void) {\\n  mat4 offsetMatrix = u_offsetScaleMatrix;\\n  if (a_rotateWithView == 1.0) {\\n    offsetMatrix = u_offsetScaleMatrix * u_offsetRotateMatrix;\\n  }\\n  vec4 offsets = offsetMatrix * vec4(a_offsets, 0.0, 0.0);\\n  gl_Position = u_projectionMatrix * vec4(a_position, 0.0, 1.0) + offsets;\\n  v_texCoord = a_texCoord;\\n  v_opacity = a_opacity;\\n}\\n\\n\\n' :\n  'varying vec2 a;varying float b;attribute vec2 c;attribute vec2 d;attribute vec2 e;attribute float f;attribute float g;uniform mat4 h;uniform mat4 i;uniform mat4 j;void main(void){mat4 offsetMatrix=i;if(g==1.0){offsetMatrix=i*j;}vec4 offsets=offsetMatrix*vec4(e,0.0,0.0);gl_Position=h*vec4(c,0.0,1.0)+offsets;a=d;b=f;}');\n","/**\n * @module ol/render/webgl/texturereplay/defaultshader/Locations\n */\n// This file is automatically generated, do not edit\n// Run `make shaders` to generate, and commit the result.\n\nimport {DEBUG as DEBUG_WEBGL} from '../../../../webgl.js';\n\n/**\n * @constructor\n * @param {WebGLRenderingContext} gl GL.\n * @param {WebGLProgram} program Program.\n * @struct\n */\nconst Locations = function(gl, program) {\n\n  /**\n   * @type {WebGLUniformLocation}\n   */\n  this.u_projectionMatrix = gl.getUniformLocation(\n    program, DEBUG_WEBGL ? 'u_projectionMatrix' : 'h');\n\n  /**\n   * @type {WebGLUniformLocation}\n   */\n  this.u_offsetScaleMatrix = gl.getUniformLocation(\n    program, DEBUG_WEBGL ? 'u_offsetScaleMatrix' : 'i');\n\n  /**\n   * @type {WebGLUniformLocation}\n   */\n  this.u_offsetRotateMatrix = gl.getUniformLocation(\n    program, DEBUG_WEBGL ? 'u_offsetRotateMatrix' : 'j');\n\n  /**\n   * @type {WebGLUniformLocation}\n   */\n  this.u_opacity = gl.getUniformLocation(\n    program, DEBUG_WEBGL ? 'u_opacity' : 'k');\n\n  /**\n   * @type {WebGLUniformLocation}\n   */\n  this.u_image = gl.getUniformLocation(\n    program, DEBUG_WEBGL ? 'u_image' : 'l');\n\n  /**\n   * @type {number}\n   */\n  this.a_position = gl.getAttribLocation(\n    program, DEBUG_WEBGL ? 'a_position' : 'c');\n\n  /**\n   * @type {number}\n   */\n  this.a_texCoord = gl.getAttribLocation(\n    program, DEBUG_WEBGL ? 'a_texCoord' : 'd');\n\n  /**\n   * @type {number}\n   */\n  this.a_offsets = gl.getAttribLocation(\n    program, DEBUG_WEBGL ? 'a_offsets' : 'e');\n\n  /**\n   * @type {number}\n   */\n  this.a_opacity = gl.getAttribLocation(\n    program, DEBUG_WEBGL ? 'a_opacity' : 'f');\n\n  /**\n   * @type {number}\n   */\n  this.a_rotateWithView = gl.getAttribLocation(\n    program, DEBUG_WEBGL ? 'a_rotateWithView' : 'g');\n};\n\nexport default Locations;\n","/**\n * @module ol/webgl/ContextEventType\n */\n\n/**\n * @enum {string}\n */\nexport default {\n  LOST: 'webglcontextlost',\n  RESTORED: 'webglcontextrestored'\n};\n","/**\n * @module ol/webgl/Context\n */\nimport {getUid, inherits} from '../util.js';\nimport {EXTENSIONS as WEBGL_EXTENSIONS} from '../webgl.js';\nimport Disposable from '../Disposable.js';\nimport {includes} from '../array.js';\nimport {listen, unlistenAll} from '../events.js';\nimport {clear} from '../obj.js';\nimport {ARRAY_BUFFER, ELEMENT_ARRAY_BUFFER, TEXTURE_2D, TEXTURE_WRAP_S, TEXTURE_WRAP_T} from '../webgl.js';\nimport ContextEventType from '../webgl/ContextEventType.js';\n\n\n/**\n * @typedef {Object} BufferCacheEntry\n * @property {module:ol/webgl/Buffer} buf\n * @property {WebGLBuffer} buffer\n */\n\n\n/**\n * @classdesc\n * A WebGL context for accessing low-level WebGL capabilities.\n *\n * @constructor\n * @extends {module:ol/Disposable}\n * @param {HTMLCanvasElement} canvas Canvas.\n * @param {WebGLRenderingContext} gl GL.\n */\nconst WebGLContext = function(canvas, gl) {\n\n  /**\n   * @private\n   * @type {HTMLCanvasElement}\n   */\n  this.canvas_ = canvas;\n\n  /**\n   * @private\n   * @type {WebGLRenderingContext}\n   */\n  this.gl_ = gl;\n\n  /**\n   * @private\n   * @type {!Object.<string, module:ol/webgl/Context~BufferCacheEntry>}\n   */\n  this.bufferCache_ = {};\n\n  /**\n   * @private\n   * @type {!Object.<string, WebGLShader>}\n   */\n  this.shaderCache_ = {};\n\n  /**\n   * @private\n   * @type {!Object.<string, WebGLProgram>}\n   */\n  this.programCache_ = {};\n\n  /**\n   * @private\n   * @type {WebGLProgram}\n   */\n  this.currentProgram_ = null;\n\n  /**\n   * @private\n   * @type {WebGLFramebuffer}\n   */\n  this.hitDetectionFramebuffer_ = null;\n\n  /**\n   * @private\n   * @type {WebGLTexture}\n   */\n  this.hitDetectionTexture_ = null;\n\n  /**\n   * @private\n   * @type {WebGLRenderbuffer}\n   */\n  this.hitDetectionRenderbuffer_ = null;\n\n  /**\n   * @type {boolean}\n   */\n  this.hasOESElementIndexUint = includes(WEBGL_EXTENSIONS, 'OES_element_index_uint');\n\n  // use the OES_element_index_uint extension if available\n  if (this.hasOESElementIndexUint) {\n    gl.getExtension('OES_element_index_uint');\n  }\n\n  listen(this.canvas_, ContextEventType.LOST,\n    this.handleWebGLContextLost, this);\n  listen(this.canvas_, ContextEventType.RESTORED,\n    this.handleWebGLContextRestored, this);\n\n};\n\ninherits(WebGLContext, Disposable);\n\n\n/**\n * Just bind the buffer if it's in the cache. Otherwise create\n * the WebGL buffer, bind it, populate it, and add an entry to\n * the cache.\n * @param {number} target Target.\n * @param {module:ol/webgl/Buffer} buf Buffer.\n */\nWebGLContext.prototype.bindBuffer = function(target, buf) {\n  const gl = this.getGL();\n  const arr = buf.getArray();\n  const bufferKey = String(getUid(buf));\n  if (bufferKey in this.bufferCache_) {\n    const bufferCacheEntry = this.bufferCache_[bufferKey];\n    gl.bindBuffer(target, bufferCacheEntry.buffer);\n  } else {\n    const buffer = gl.createBuffer();\n    gl.bindBuffer(target, buffer);\n    let /** @type {ArrayBufferView} */ arrayBuffer;\n    if (target == ARRAY_BUFFER) {\n      arrayBuffer = new Float32Array(arr);\n    } else if (target == ELEMENT_ARRAY_BUFFER) {\n      arrayBuffer = this.hasOESElementIndexUint ?\n        new Uint32Array(arr) : new Uint16Array(arr);\n    }\n    gl.bufferData(target, arrayBuffer, buf.getUsage());\n    this.bufferCache_[bufferKey] = {\n      buf: buf,\n      buffer: buffer\n    };\n  }\n};\n\n\n/**\n * @param {module:ol/webgl/Buffer} buf Buffer.\n */\nWebGLContext.prototype.deleteBuffer = function(buf) {\n  const gl = this.getGL();\n  const bufferKey = String(getUid(buf));\n  const bufferCacheEntry = this.bufferCache_[bufferKey];\n  if (!gl.isContextLost()) {\n    gl.deleteBuffer(bufferCacheEntry.buffer);\n  }\n  delete this.bufferCache_[bufferKey];\n};\n\n\n/**\n * @inheritDoc\n */\nWebGLContext.prototype.disposeInternal = function() {\n  unlistenAll(this.canvas_);\n  const gl = this.getGL();\n  if (!gl.isContextLost()) {\n    for (const key in this.bufferCache_) {\n      gl.deleteBuffer(this.bufferCache_[key].buffer);\n    }\n    for (const key in this.programCache_) {\n      gl.deleteProgram(this.programCache_[key]);\n    }\n    for (const key in this.shaderCache_) {\n      gl.deleteShader(this.shaderCache_[key]);\n    }\n    // delete objects for hit-detection\n    gl.deleteFramebuffer(this.hitDetectionFramebuffer_);\n    gl.deleteRenderbuffer(this.hitDetectionRenderbuffer_);\n    gl.deleteTexture(this.hitDetectionTexture_);\n  }\n};\n\n\n/**\n * @return {HTMLCanvasElement} Canvas.\n */\nWebGLContext.prototype.getCanvas = function() {\n  return this.canvas_;\n};\n\n\n/**\n * Get the WebGL rendering context\n * @return {WebGLRenderingContext} The rendering context.\n * @api\n */\nWebGLContext.prototype.getGL = function() {\n  return this.gl_;\n};\n\n\n/**\n * Get the frame buffer for hit detection.\n * @return {WebGLFramebuffer} The hit detection frame buffer.\n */\nWebGLContext.prototype.getHitDetectionFramebuffer = function() {\n  if (!this.hitDetectionFramebuffer_) {\n    this.initHitDetectionFramebuffer_();\n  }\n  return this.hitDetectionFramebuffer_;\n};\n\n\n/**\n * Get shader from the cache if it's in the cache. Otherwise, create\n * the WebGL shader, compile it, and add entry to cache.\n * @param {module:ol/webgl/Shader} shaderObject Shader object.\n * @return {WebGLShader} Shader.\n */\nWebGLContext.prototype.getShader = function(shaderObject) {\n  const shaderKey = String(getUid(shaderObject));\n  if (shaderKey in this.shaderCache_) {\n    return this.shaderCache_[shaderKey];\n  } else {\n    const gl = this.getGL();\n    const shader = gl.createShader(shaderObject.getType());\n    gl.shaderSource(shader, shaderObject.getSource());\n    gl.compileShader(shader);\n    this.shaderCache_[shaderKey] = shader;\n    return shader;\n  }\n};\n\n\n/**\n * Get the program from the cache if it's in the cache. Otherwise create\n * the WebGL program, attach the shaders to it, and add an entry to the\n * cache.\n * @param {module:ol/webgl/Fragment} fragmentShaderObject Fragment shader.\n * @param {module:ol/webgl/Vertex} vertexShaderObject Vertex shader.\n * @return {WebGLProgram} Program.\n */\nWebGLContext.prototype.getProgram = function(fragmentShaderObject, vertexShaderObject) {\n  const programKey = getUid(fragmentShaderObject) + '/' + getUid(vertexShaderObject);\n  if (programKey in this.programCache_) {\n    return this.programCache_[programKey];\n  } else {\n    const gl = this.getGL();\n    const program = gl.createProgram();\n    gl.attachShader(program, this.getShader(fragmentShaderObject));\n    gl.attachShader(program, this.getShader(vertexShaderObject));\n    gl.linkProgram(program);\n    this.programCache_[programKey] = program;\n    return program;\n  }\n};\n\n\n/**\n * FIXME empty description for jsdoc\n */\nWebGLContext.prototype.handleWebGLContextLost = function() {\n  clear(this.bufferCache_);\n  clear(this.shaderCache_);\n  clear(this.programCache_);\n  this.currentProgram_ = null;\n  this.hitDetectionFramebuffer_ = null;\n  this.hitDetectionTexture_ = null;\n  this.hitDetectionRenderbuffer_ = null;\n};\n\n\n/**\n * FIXME empty description for jsdoc\n */\nWebGLContext.prototype.handleWebGLContextRestored = function() {\n};\n\n\n/**\n * Creates a 1x1 pixel framebuffer for the hit-detection.\n * @private\n */\nWebGLContext.prototype.initHitDetectionFramebuffer_ = function() {\n  const gl = this.gl_;\n  const framebuffer = gl.createFramebuffer();\n  gl.bindFramebuffer(gl.FRAMEBUFFER, framebuffer);\n\n  const texture = createEmptyTexture(gl, 1, 1);\n  const renderbuffer = gl.createRenderbuffer();\n  gl.bindRenderbuffer(gl.RENDERBUFFER, renderbuffer);\n  gl.renderbufferStorage(gl.RENDERBUFFER, gl.DEPTH_COMPONENT16, 1, 1);\n  gl.framebufferTexture2D(\n    gl.FRAMEBUFFER, gl.COLOR_ATTACHMENT0, gl.TEXTURE_2D, texture, 0);\n  gl.framebufferRenderbuffer(gl.FRAMEBUFFER, gl.DEPTH_ATTACHMENT,\n    gl.RENDERBUFFER, renderbuffer);\n\n  gl.bindTexture(gl.TEXTURE_2D, null);\n  gl.bindRenderbuffer(gl.RENDERBUFFER, null);\n  gl.bindFramebuffer(gl.FRAMEBUFFER, null);\n\n  this.hitDetectionFramebuffer_ = framebuffer;\n  this.hitDetectionTexture_ = texture;\n  this.hitDetectionRenderbuffer_ = renderbuffer;\n};\n\n\n/**\n * Use a program.  If the program is already in use, this will return `false`.\n * @param {WebGLProgram} program Program.\n * @return {boolean} Changed.\n * @api\n */\nWebGLContext.prototype.useProgram = function(program) {\n  if (program == this.currentProgram_) {\n    return false;\n  } else {\n    const gl = this.getGL();\n    gl.useProgram(program);\n    this.currentProgram_ = program;\n    return true;\n  }\n};\n\n\n/**\n * @param {WebGLRenderingContext} gl WebGL rendering context.\n * @param {number=} opt_wrapS wrapS.\n * @param {number=} opt_wrapT wrapT.\n * @return {WebGLTexture} The texture.\n */\nfunction createTextureInternal(gl, opt_wrapS, opt_wrapT) {\n  const texture = gl.createTexture();\n  gl.bindTexture(gl.TEXTURE_2D, texture);\n  gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MAG_FILTER, gl.LINEAR);\n  gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, gl.LINEAR);\n\n  if (opt_wrapS !== undefined) {\n    gl.texParameteri(\n      TEXTURE_2D, TEXTURE_WRAP_S, opt_wrapS);\n  }\n  if (opt_wrapT !== undefined) {\n    gl.texParameteri(\n      TEXTURE_2D, TEXTURE_WRAP_T, opt_wrapT);\n  }\n\n  return texture;\n}\n\n\n/**\n * @param {WebGLRenderingContext} gl WebGL rendering context.\n * @param {number} width Width.\n * @param {number} height Height.\n * @param {number=} opt_wrapS wrapS.\n * @param {number=} opt_wrapT wrapT.\n * @return {WebGLTexture} The texture.\n */\nexport function createEmptyTexture(gl, width, height, opt_wrapS, opt_wrapT) {\n  const texture = createTextureInternal(gl, opt_wrapS, opt_wrapT);\n  gl.texImage2D(gl.TEXTURE_2D, 0, gl.RGBA, width, height, 0, gl.RGBA, gl.UNSIGNED_BYTE, null);\n  return texture;\n}\n\n\n/**\n * @param {WebGLRenderingContext} gl WebGL rendering context.\n * @param {HTMLCanvasElement|HTMLImageElement|HTMLVideoElement} image Image.\n * @param {number=} opt_wrapS wrapS.\n * @param {number=} opt_wrapT wrapT.\n * @return {WebGLTexture} The texture.\n */\nexport function createTexture(gl, image, opt_wrapS, opt_wrapT) {\n  const texture = createTextureInternal(gl, opt_wrapS, opt_wrapT);\n  gl.texImage2D(gl.TEXTURE_2D, 0, gl.RGBA, gl.RGBA, gl.UNSIGNED_BYTE, image);\n  return texture;\n}\n\nexport default WebGLContext;\n","/**\n * @module ol/render/webgl/TextureReplay\n */\nimport {getUid, inherits} from '../../util.js';\nimport {intersects} from '../../extent.js';\nimport {isEmpty} from '../../obj.js';\nimport {fragment, vertex} from '../webgl/texturereplay/defaultshader.js';\nimport Locations from '../webgl/texturereplay/defaultshader/Locations.js';\nimport WebGLReplay from '../webgl/Replay.js';\nimport {CLAMP_TO_EDGE, FLOAT, TEXTURE_2D} from '../../webgl.js';\nimport {createTexture} from '../../webgl/Context.js';\n\n/**\n * @constructor\n * @abstract\n * @extends {module:ol/render/webgl/Replay}\n * @param {number} tolerance Tolerance.\n * @param {module:ol/extent~Extent} maxExtent Max extent.\n * @struct\n */\nconst WebGLTextureReplay = function(tolerance, maxExtent) {\n  WebGLReplay.call(this, tolerance, maxExtent);\n\n  /**\n   * @type {number|undefined}\n   * @protected\n   */\n  this.anchorX = undefined;\n\n  /**\n   * @type {number|undefined}\n   * @protected\n   */\n  this.anchorY = undefined;\n\n  /**\n   * @type {Array.<number>}\n   * @protected\n   */\n  this.groupIndices = [];\n\n  /**\n   * @type {Array.<number>}\n   * @protected\n   */\n  this.hitDetectionGroupIndices = [];\n\n  /**\n   * @type {number|undefined}\n   * @protected\n   */\n  this.height = undefined;\n\n  /**\n   * @type {number|undefined}\n   * @protected\n   */\n  this.imageHeight = undefined;\n\n  /**\n   * @type {number|undefined}\n   * @protected\n   */\n  this.imageWidth = undefined;\n\n  /**\n   * @protected\n   * @type {module:ol/render/webgl/texturereplay/defaultshader/Locations}\n   */\n  this.defaultLocations = null;\n\n  /**\n   * @protected\n   * @type {number|undefined}\n   */\n  this.opacity = undefined;\n\n  /**\n   * @type {number|undefined}\n   * @protected\n   */\n  this.originX = undefined;\n\n  /**\n   * @type {number|undefined}\n   * @protected\n   */\n  this.originY = undefined;\n\n  /**\n   * @protected\n   * @type {boolean|undefined}\n   */\n  this.rotateWithView = undefined;\n\n  /**\n   * @protected\n   * @type {number|undefined}\n   */\n  this.rotation = undefined;\n\n  /**\n   * @protected\n   * @type {number|undefined}\n   */\n  this.scale = undefined;\n\n  /**\n   * @type {number|undefined}\n   * @protected\n   */\n  this.width = undefined;\n};\n\ninherits(WebGLTextureReplay, WebGLReplay);\n\n\n/**\n * @inheritDoc\n */\nWebGLTextureReplay.prototype.getDeleteResourcesFunction = function(context) {\n  const verticesBuffer = this.verticesBuffer;\n  const indicesBuffer = this.indicesBuffer;\n  const textures = this.getTextures(true);\n  const gl = context.getGL();\n  return function() {\n    if (!gl.isContextLost()) {\n      let i, ii;\n      for (i = 0, ii = textures.length; i < ii; ++i) {\n        gl.deleteTexture(textures[i]);\n      }\n    }\n    context.deleteBuffer(verticesBuffer);\n    context.deleteBuffer(indicesBuffer);\n  };\n};\n\n\n/**\n * @param {Array.<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {number} end End.\n * @param {number} stride Stride.\n * @return {number} My end.\n * @protected\n */\nWebGLTextureReplay.prototype.drawCoordinates = function(flatCoordinates, offset, end, stride) {\n  const anchorX = /** @type {number} */ (this.anchorX);\n  const anchorY = /** @type {number} */ (this.anchorY);\n  const height = /** @type {number} */ (this.height);\n  const imageHeight = /** @type {number} */ (this.imageHeight);\n  const imageWidth = /** @type {number} */ (this.imageWidth);\n  const opacity = /** @type {number} */ (this.opacity);\n  const originX = /** @type {number} */ (this.originX);\n  const originY = /** @type {number} */ (this.originY);\n  const rotateWithView = this.rotateWithView ? 1.0 : 0.0;\n  // this.rotation_ is anti-clockwise, but rotation is clockwise\n  const rotation = /** @type {number} */ (-this.rotation);\n  const scale = /** @type {number} */ (this.scale);\n  const width = /** @type {number} */ (this.width);\n  const cos = Math.cos(rotation);\n  const sin = Math.sin(rotation);\n  let numIndices = this.indices.length;\n  let numVertices = this.vertices.length;\n  let i, n, offsetX, offsetY, x, y;\n  for (i = offset; i < end; i += stride) {\n    x = flatCoordinates[i] - this.origin[0];\n    y = flatCoordinates[i + 1] - this.origin[1];\n\n    // There are 4 vertices per [x, y] point, one for each corner of the\n    // rectangle we're going to draw. We'd use 1 vertex per [x, y] point if\n    // WebGL supported Geometry Shaders (which can emit new vertices), but that\n    // is not currently the case.\n    //\n    // And each vertex includes 8 values: the x and y coordinates, the x and\n    // y offsets used to calculate the position of the corner, the u and\n    // v texture coordinates for the corner, the opacity, and whether the\n    // the image should be rotated with the view (rotateWithView).\n\n    n = numVertices / 8;\n\n    // bottom-left corner\n    offsetX = -scale * anchorX;\n    offsetY = -scale * (height - anchorY);\n    this.vertices[numVertices++] = x;\n    this.vertices[numVertices++] = y;\n    this.vertices[numVertices++] = offsetX * cos - offsetY * sin;\n    this.vertices[numVertices++] = offsetX * sin + offsetY * cos;\n    this.vertices[numVertices++] = originX / imageWidth;\n    this.vertices[numVertices++] = (originY + height) / imageHeight;\n    this.vertices[numVertices++] = opacity;\n    this.vertices[numVertices++] = rotateWithView;\n\n    // bottom-right corner\n    offsetX = scale * (width - anchorX);\n    offsetY = -scale * (height - anchorY);\n    this.vertices[numVertices++] = x;\n    this.vertices[numVertices++] = y;\n    this.vertices[numVertices++] = offsetX * cos - offsetY * sin;\n    this.vertices[numVertices++] = offsetX * sin + offsetY * cos;\n    this.vertices[numVertices++] = (originX + width) / imageWidth;\n    this.vertices[numVertices++] = (originY + height) / imageHeight;\n    this.vertices[numVertices++] = opacity;\n    this.vertices[numVertices++] = rotateWithView;\n\n    // top-right corner\n    offsetX = scale * (width - anchorX);\n    offsetY = scale * anchorY;\n    this.vertices[numVertices++] = x;\n    this.vertices[numVertices++] = y;\n    this.vertices[numVertices++] = offsetX * cos - offsetY * sin;\n    this.vertices[numVertices++] = offsetX * sin + offsetY * cos;\n    this.vertices[numVertices++] = (originX + width) / imageWidth;\n    this.vertices[numVertices++] = originY / imageHeight;\n    this.vertices[numVertices++] = opacity;\n    this.vertices[numVertices++] = rotateWithView;\n\n    // top-left corner\n    offsetX = -scale * anchorX;\n    offsetY = scale * anchorY;\n    this.vertices[numVertices++] = x;\n    this.vertices[numVertices++] = y;\n    this.vertices[numVertices++] = offsetX * cos - offsetY * sin;\n    this.vertices[numVertices++] = offsetX * sin + offsetY * cos;\n    this.vertices[numVertices++] = originX / imageWidth;\n    this.vertices[numVertices++] = originY / imageHeight;\n    this.vertices[numVertices++] = opacity;\n    this.vertices[numVertices++] = rotateWithView;\n\n    this.indices[numIndices++] = n;\n    this.indices[numIndices++] = n + 1;\n    this.indices[numIndices++] = n + 2;\n    this.indices[numIndices++] = n;\n    this.indices[numIndices++] = n + 2;\n    this.indices[numIndices++] = n + 3;\n  }\n\n  return numVertices;\n};\n\n\n/**\n * @protected\n * @param {Array.<WebGLTexture>} textures Textures.\n * @param {Array.<HTMLCanvasElement|HTMLImageElement|HTMLVideoElement>} images Images.\n * @param {!Object.<string, WebGLTexture>} texturePerImage Texture cache.\n * @param {WebGLRenderingContext} gl Gl.\n */\nWebGLTextureReplay.prototype.createTextures = function(textures, images, texturePerImage, gl) {\n  let texture, image, uid, i;\n  const ii = images.length;\n  for (i = 0; i < ii; ++i) {\n    image = images[i];\n\n    uid = getUid(image).toString();\n    if (uid in texturePerImage) {\n      texture = texturePerImage[uid];\n    } else {\n      texture = createTexture(\n        gl, image, CLAMP_TO_EDGE, CLAMP_TO_EDGE);\n      texturePerImage[uid] = texture;\n    }\n    textures[i] = texture;\n  }\n};\n\n\n/**\n * @inheritDoc\n */\nWebGLTextureReplay.prototype.setUpProgram = function(gl, context, size, pixelRatio) {\n  // get the program\n  const program = context.getProgram(fragment, vertex);\n\n  // get the locations\n  let locations;\n  if (!this.defaultLocations) {\n    locations = new Locations(gl, program);\n    this.defaultLocations = locations;\n  } else {\n    locations = this.defaultLocations;\n  }\n\n  // use the program (FIXME: use the return value)\n  context.useProgram(program);\n\n  // enable the vertex attrib arrays\n  gl.enableVertexAttribArray(locations.a_position);\n  gl.vertexAttribPointer(locations.a_position, 2, FLOAT,\n    false, 32, 0);\n\n  gl.enableVertexAttribArray(locations.a_offsets);\n  gl.vertexAttribPointer(locations.a_offsets, 2, FLOAT,\n    false, 32, 8);\n\n  gl.enableVertexAttribArray(locations.a_texCoord);\n  gl.vertexAttribPointer(locations.a_texCoord, 2, FLOAT,\n    false, 32, 16);\n\n  gl.enableVertexAttribArray(locations.a_opacity);\n  gl.vertexAttribPointer(locations.a_opacity, 1, FLOAT,\n    false, 32, 24);\n\n  gl.enableVertexAttribArray(locations.a_rotateWithView);\n  gl.vertexAttribPointer(locations.a_rotateWithView, 1, FLOAT,\n    false, 32, 28);\n\n  return locations;\n};\n\n\n/**\n * @inheritDoc\n */\nWebGLTextureReplay.prototype.shutDownProgram = function(gl, locations) {\n  gl.disableVertexAttribArray(locations.a_position);\n  gl.disableVertexAttribArray(locations.a_offsets);\n  gl.disableVertexAttribArray(locations.a_texCoord);\n  gl.disableVertexAttribArray(locations.a_opacity);\n  gl.disableVertexAttribArray(locations.a_rotateWithView);\n};\n\n\n/**\n * @inheritDoc\n */\nWebGLTextureReplay.prototype.drawReplay = function(gl, context, skippedFeaturesHash, hitDetection) {\n  const textures = hitDetection ? this.getHitDetectionTextures() : this.getTextures();\n  const groupIndices = hitDetection ? this.hitDetectionGroupIndices : this.groupIndices;\n\n  if (!isEmpty(skippedFeaturesHash)) {\n    this.drawReplaySkipping(gl, context, skippedFeaturesHash, textures, groupIndices);\n  } else {\n    let i, ii, start;\n    for (i = 0, ii = textures.length, start = 0; i < ii; ++i) {\n      gl.bindTexture(TEXTURE_2D, textures[i]);\n      const end = groupIndices[i];\n      this.drawElements(gl, context, start, end);\n      start = end;\n    }\n  }\n};\n\n\n/**\n * Draw the replay while paying attention to skipped features.\n *\n * This functions creates groups of features that can be drawn to together,\n * so that the number of `drawElements` calls is minimized.\n *\n * For example given the following texture groups:\n *\n *    Group 1: A B C\n *    Group 2: D [E] F G\n *\n * If feature E should be skipped, the following `drawElements` calls will be\n * made:\n *\n *    drawElements with feature A, B and C\n *    drawElements with feature D\n *    drawElements with feature F and G\n *\n * @protected\n * @param {WebGLRenderingContext} gl gl.\n * @param {module:ol/webgl/Context} context Context.\n * @param {Object.<string, boolean>} skippedFeaturesHash Ids of features\n *  to skip.\n * @param {Array.<WebGLTexture>} textures Textures.\n * @param {Array.<number>} groupIndices Texture group indices.\n */\nWebGLTextureReplay.prototype.drawReplaySkipping = function(gl, context, skippedFeaturesHash, textures,\n  groupIndices) {\n  let featureIndex = 0;\n\n  let i, ii;\n  for (i = 0, ii = textures.length; i < ii; ++i) {\n    gl.bindTexture(TEXTURE_2D, textures[i]);\n    const groupStart = (i > 0) ? groupIndices[i - 1] : 0;\n    const groupEnd = groupIndices[i];\n\n    let start = groupStart;\n    let end = groupStart;\n    while (featureIndex < this.startIndices.length &&\n        this.startIndices[featureIndex] <= groupEnd) {\n      const feature = this.startIndicesFeature[featureIndex];\n\n      const featureUid = getUid(feature).toString();\n      if (skippedFeaturesHash[featureUid] !== undefined) {\n        // feature should be skipped\n        if (start !== end) {\n          // draw the features so far\n          this.drawElements(gl, context, start, end);\n        }\n        // continue with the next feature\n        start = (featureIndex === this.startIndices.length - 1) ?\n          groupEnd : this.startIndices[featureIndex + 1];\n        end = start;\n      } else {\n        // the feature is not skipped, augment the end index\n        end = (featureIndex === this.startIndices.length - 1) ?\n          groupEnd : this.startIndices[featureIndex + 1];\n      }\n      featureIndex++;\n    }\n\n    if (start !== end) {\n      // draw the remaining features (in case there was no skipped feature\n      // in this texture group, all features of a group are drawn together)\n      this.drawElements(gl, context, start, end);\n    }\n  }\n};\n\n\n/**\n * @inheritDoc\n */\nWebGLTextureReplay.prototype.drawHitDetectionReplayOneByOne = function(gl, context, skippedFeaturesHash,\n  featureCallback, opt_hitExtent) {\n  let i, groupStart, start, end, feature, featureUid;\n  let featureIndex = this.startIndices.length - 1;\n  const hitDetectionTextures = this.getHitDetectionTextures();\n  for (i = hitDetectionTextures.length - 1; i >= 0; --i) {\n    gl.bindTexture(TEXTURE_2D, hitDetectionTextures[i]);\n    groupStart = (i > 0) ? this.hitDetectionGroupIndices[i - 1] : 0;\n    end = this.hitDetectionGroupIndices[i];\n\n    // draw all features for this texture group\n    while (featureIndex >= 0 &&\n        this.startIndices[featureIndex] >= groupStart) {\n      start = this.startIndices[featureIndex];\n      feature = this.startIndicesFeature[featureIndex];\n      featureUid = getUid(feature).toString();\n\n      if (skippedFeaturesHash[featureUid] === undefined &&\n          feature.getGeometry() &&\n          (opt_hitExtent === undefined || intersects(\n            /** @type {Array<number>} */ (opt_hitExtent),\n            feature.getGeometry().getExtent()))) {\n        gl.clear(gl.COLOR_BUFFER_BIT | gl.DEPTH_BUFFER_BIT);\n        this.drawElements(gl, context, start, end);\n\n        const result = featureCallback(feature);\n        if (result) {\n          return result;\n        }\n      }\n\n      end = start;\n      featureIndex--;\n    }\n  }\n  return undefined;\n};\n\n\n/**\n * @inheritDoc\n */\nWebGLTextureReplay.prototype.finish = function(context) {\n  this.anchorX = undefined;\n  this.anchorY = undefined;\n  this.height = undefined;\n  this.imageHeight = undefined;\n  this.imageWidth = undefined;\n  this.indices = null;\n  this.opacity = undefined;\n  this.originX = undefined;\n  this.originY = undefined;\n  this.rotateWithView = undefined;\n  this.rotation = undefined;\n  this.scale = undefined;\n  this.vertices = null;\n  this.width = undefined;\n};\n\n\n/**\n * @abstract\n * @protected\n * @param {boolean=} opt_all Return hit detection textures with regular ones.\n * @returns {Array.<WebGLTexture>} Textures.\n */\nWebGLTextureReplay.prototype.getTextures = function(opt_all) {};\n\n\n/**\n * @abstract\n * @protected\n * @returns {Array.<WebGLTexture>} Textures.\n */\nWebGLTextureReplay.prototype.getHitDetectionTextures = function() {};\nexport default WebGLTextureReplay;\n","/**\n * @module ol/render/webgl/ImageReplay\n */\nimport {getUid, inherits} from '../../util.js';\nimport WebGLTextureReplay from '../webgl/TextureReplay.js';\nimport WebGLBuffer from '../../webgl/Buffer.js';\n\n/**\n * @constructor\n * @extends {module:ol/render/webgl/TextureReplay}\n * @param {number} tolerance Tolerance.\n * @param {module:ol/extent~Extent} maxExtent Max extent.\n * @struct\n */\nconst WebGLImageReplay = function(tolerance, maxExtent) {\n  WebGLTextureReplay.call(this, tolerance, maxExtent);\n\n  /**\n   * @type {Array.<HTMLCanvasElement|HTMLImageElement|HTMLVideoElement>}\n   * @protected\n   */\n  this.images_ = [];\n\n  /**\n   * @type {Array.<HTMLCanvasElement|HTMLImageElement|HTMLVideoElement>}\n   * @protected\n   */\n  this.hitDetectionImages_ = [];\n\n  /**\n   * @type {Array.<WebGLTexture>}\n   * @private\n   */\n  this.textures_ = [];\n\n  /**\n   * @type {Array.<WebGLTexture>}\n   * @private\n   */\n  this.hitDetectionTextures_ = [];\n\n};\n\ninherits(WebGLImageReplay, WebGLTextureReplay);\n\n\n/**\n * @inheritDoc\n */\nWebGLImageReplay.prototype.drawMultiPoint = function(multiPointGeometry, feature) {\n  this.startIndices.push(this.indices.length);\n  this.startIndicesFeature.push(feature);\n  const flatCoordinates = multiPointGeometry.getFlatCoordinates();\n  const stride = multiPointGeometry.getStride();\n  this.drawCoordinates(\n    flatCoordinates, 0, flatCoordinates.length, stride);\n};\n\n\n/**\n * @inheritDoc\n */\nWebGLImageReplay.prototype.drawPoint = function(pointGeometry, feature) {\n  this.startIndices.push(this.indices.length);\n  this.startIndicesFeature.push(feature);\n  const flatCoordinates = pointGeometry.getFlatCoordinates();\n  const stride = pointGeometry.getStride();\n  this.drawCoordinates(\n    flatCoordinates, 0, flatCoordinates.length, stride);\n};\n\n\n/**\n * @inheritDoc\n */\nWebGLImageReplay.prototype.finish = function(context) {\n  const gl = context.getGL();\n\n  this.groupIndices.push(this.indices.length);\n  this.hitDetectionGroupIndices.push(this.indices.length);\n\n  // create, bind, and populate the vertices buffer\n  this.verticesBuffer = new WebGLBuffer(this.vertices);\n\n  const indices = this.indices;\n\n  // create, bind, and populate the indices buffer\n  this.indicesBuffer = new WebGLBuffer(indices);\n\n  // create textures\n  /** @type {Object.<string, WebGLTexture>} */\n  const texturePerImage = {};\n\n  this.createTextures(this.textures_, this.images_, texturePerImage, gl);\n\n  this.createTextures(this.hitDetectionTextures_, this.hitDetectionImages_,\n    texturePerImage, gl);\n\n  this.images_ = null;\n  this.hitDetectionImages_ = null;\n  WebGLTextureReplay.prototype.finish.call(this, context);\n};\n\n\n/**\n * @inheritDoc\n */\nWebGLImageReplay.prototype.setImageStyle = function(imageStyle) {\n  const anchor = imageStyle.getAnchor();\n  const image = imageStyle.getImage(1);\n  const imageSize = imageStyle.getImageSize();\n  const hitDetectionImage = imageStyle.getHitDetectionImage(1);\n  const opacity = imageStyle.getOpacity();\n  const origin = imageStyle.getOrigin();\n  const rotateWithView = imageStyle.getRotateWithView();\n  const rotation = imageStyle.getRotation();\n  const size = imageStyle.getSize();\n  const scale = imageStyle.getScale();\n\n  let currentImage;\n  if (this.images_.length === 0) {\n    this.images_.push(image);\n  } else {\n    currentImage = this.images_[this.images_.length - 1];\n    if (getUid(currentImage) != getUid(image)) {\n      this.groupIndices.push(this.indices.length);\n      this.images_.push(image);\n    }\n  }\n\n  if (this.hitDetectionImages_.length === 0) {\n    this.hitDetectionImages_.push(hitDetectionImage);\n  } else {\n    currentImage =\n        this.hitDetectionImages_[this.hitDetectionImages_.length - 1];\n    if (getUid(currentImage) != getUid(hitDetectionImage)) {\n      this.hitDetectionGroupIndices.push(this.indices.length);\n      this.hitDetectionImages_.push(hitDetectionImage);\n    }\n  }\n\n  this.anchorX = anchor[0];\n  this.anchorY = anchor[1];\n  this.height = size[1];\n  this.imageHeight = imageSize[1];\n  this.imageWidth = imageSize[0];\n  this.opacity = opacity;\n  this.originX = origin[0];\n  this.originY = origin[1];\n  this.rotation = rotation;\n  this.rotateWithView = rotateWithView;\n  this.scale = scale;\n  this.width = size[0];\n};\n\n\n/**\n * @inheritDoc\n */\nWebGLImageReplay.prototype.getTextures = function(opt_all) {\n  return opt_all ? this.textures_.concat(this.hitDetectionTextures_) : this.textures_;\n};\n\n\n/**\n * @inheritDoc\n */\nWebGLImageReplay.prototype.getHitDetectionTextures = function() {\n  return this.hitDetectionTextures_;\n};\nexport default WebGLImageReplay;\n","/**\n * @module ol/geom/flat/topology\n */\nimport {linearRing as linearRingArea} from '../flat/area.js';\n\n/**\n * Check if the linestring is a boundary.\n * @param {Array.<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {number} end End.\n * @param {number} stride Stride.\n * @return {boolean} The linestring is a boundary.\n */\nexport function lineStringIsClosed(flatCoordinates, offset, end, stride) {\n  const lastCoord = end - stride;\n  if (flatCoordinates[offset] === flatCoordinates[lastCoord] &&\n      flatCoordinates[offset + 1] === flatCoordinates[lastCoord + 1] && (end - offset) / stride > 3) {\n    return !!linearRingArea(flatCoordinates, offset, end, stride);\n  }\n  return false;\n}\n","/**\n * @module ol/render/webgl/linestringreplay/defaultshader\n */\n// This file is automatically generated, do not edit.\n// Run `make shaders` to generate, and commit the result.\n\nimport {DEBUG as DEBUG_WEBGL} from '../../../webgl.js';\nimport WebGLFragment from '../../../webgl/Fragment.js';\nimport WebGLVertex from '../../../webgl/Vertex.js';\n\nexport const fragment = new WebGLFragment(DEBUG_WEBGL ?\n  'precision mediump float;\\nvarying float v_round;\\nvarying vec2 v_roundVertex;\\nvarying float v_halfWidth;\\n\\n\\n\\nuniform float u_opacity;\\nuniform vec4 u_color;\\nuniform vec2 u_size;\\nuniform float u_pixelRatio;\\n\\nvoid main(void) {\\n  if (v_round > 0.0) {\\n    vec2 windowCoords = vec2((v_roundVertex.x + 1.0) / 2.0 * u_size.x * u_pixelRatio,\\n        (v_roundVertex.y + 1.0) / 2.0 * u_size.y * u_pixelRatio);\\n    if (length(windowCoords - gl_FragCoord.xy) > v_halfWidth * u_pixelRatio) {\\n      discard;\\n    }\\n  }\\n  gl_FragColor = u_color;\\n  float alpha = u_color.a * u_opacity;\\n  if (alpha == 0.0) {\\n    discard;\\n  }\\n  gl_FragColor.a = alpha;\\n}\\n' :\n  'precision mediump float;varying float a;varying vec2 aVertex;varying float c;uniform float m;uniform vec4 n;uniform vec2 o;uniform float p;void main(void){if(a>0.0){vec2 windowCoords=vec2((aVertex.x+1.0)/2.0*o.x*p,(aVertex.y+1.0)/2.0*o.y*p);if(length(windowCoords-gl_FragCoord.xy)>c*p){discard;}} gl_FragColor=n;float alpha=n.a*m;if(alpha==0.0){discard;}gl_FragColor.a=alpha;}');\n\nexport const vertex = new WebGLVertex(DEBUG_WEBGL ?\n  'varying float v_round;\\nvarying vec2 v_roundVertex;\\nvarying float v_halfWidth;\\n\\n\\nattribute vec2 a_lastPos;\\nattribute vec2 a_position;\\nattribute vec2 a_nextPos;\\nattribute float a_direction;\\n\\nuniform mat4 u_projectionMatrix;\\nuniform mat4 u_offsetScaleMatrix;\\nuniform mat4 u_offsetRotateMatrix;\\nuniform float u_lineWidth;\\nuniform float u_miterLimit;\\n\\nbool nearlyEquals(in float value, in float ref) {\\n  float epsilon = 0.000000000001;\\n  return value >= ref - epsilon && value <= ref + epsilon;\\n}\\n\\nvoid alongNormal(out vec2 offset, in vec2 nextP, in float turnDir, in float direction) {\\n  vec2 dirVect = nextP - a_position;\\n  vec2 normal = normalize(vec2(-turnDir * dirVect.y, turnDir * dirVect.x));\\n  offset = u_lineWidth / 2.0 * normal * direction;\\n}\\n\\nvoid miterUp(out vec2 offset, out float round, in bool isRound, in float direction) {\\n  float halfWidth = u_lineWidth / 2.0;\\n  vec2 tangent = normalize(normalize(a_nextPos - a_position) + normalize(a_position - a_lastPos));\\n  vec2 normal = vec2(-tangent.y, tangent.x);\\n  vec2 dirVect = a_nextPos - a_position;\\n  vec2 tmpNormal = normalize(vec2(-dirVect.y, dirVect.x));\\n  float miterLength = abs(halfWidth / dot(normal, tmpNormal));\\n  offset = normal * direction * miterLength;\\n  round = 0.0;\\n  if (isRound) {\\n    round = 1.0;\\n  } else if (miterLength > u_miterLimit + u_lineWidth) {\\n    offset = halfWidth * tmpNormal * direction;\\n  }\\n}\\n\\nbool miterDown(out vec2 offset, in vec4 projPos, in mat4 offsetMatrix, in float direction) {\\n  bool degenerate = false;\\n  vec2 tangent = normalize(normalize(a_nextPos - a_position) + normalize(a_position - a_lastPos));\\n  vec2 normal = vec2(-tangent.y, tangent.x);\\n  vec2 dirVect = a_lastPos - a_position;\\n  vec2 tmpNormal = normalize(vec2(-dirVect.y, dirVect.x));\\n  vec2 longOffset, shortOffset, longVertex;\\n  vec4 shortProjVertex;\\n  float halfWidth = u_lineWidth / 2.0;\\n  if (length(a_nextPos - a_position) > length(a_lastPos - a_position)) {\\n    longOffset = tmpNormal * direction * halfWidth;\\n    shortOffset = normalize(vec2(dirVect.y, -dirVect.x)) * direction * halfWidth;\\n    longVertex = a_nextPos;\\n    shortProjVertex = u_projectionMatrix * vec4(a_lastPos, 0.0, 1.0);\\n  } else {\\n    shortOffset = tmpNormal * direction * halfWidth;\\n    longOffset = normalize(vec2(dirVect.y, -dirVect.x)) * direction * halfWidth;\\n    longVertex = a_lastPos;\\n    shortProjVertex = u_projectionMatrix * vec4(a_nextPos, 0.0, 1.0);\\n  }\\n  //Intersection algorithm based on theory by Paul Bourke (http://paulbourke.net/geometry/pointlineplane/).\\n  vec4 p1 = u_projectionMatrix * vec4(longVertex, 0.0, 1.0) + offsetMatrix * vec4(longOffset, 0.0, 0.0);\\n  vec4 p2 = projPos + offsetMatrix * vec4(longOffset, 0.0, 0.0);\\n  vec4 p3 = shortProjVertex + offsetMatrix * vec4(-shortOffset, 0.0, 0.0);\\n  vec4 p4 = shortProjVertex + offsetMatrix * vec4(shortOffset, 0.0, 0.0);\\n  float denom = (p4.y - p3.y) * (p2.x - p1.x) - (p4.x - p3.x) * (p2.y - p1.y);\\n  float firstU = ((p4.x - p3.x) * (p1.y - p3.y) - (p4.y - p3.y) * (p1.x - p3.x)) / denom;\\n  float secondU = ((p2.x - p1.x) * (p1.y - p3.y) - (p2.y - p1.y) * (p1.x - p3.x)) / denom;\\n  float epsilon = 0.000000000001;\\n  if (firstU > epsilon && firstU < 1.0 - epsilon && secondU > epsilon && secondU < 1.0 - epsilon) {\\n    shortProjVertex.x = p1.x + firstU * (p2.x - p1.x);\\n    shortProjVertex.y = p1.y + firstU * (p2.y - p1.y);\\n    offset = shortProjVertex.xy;\\n    degenerate = true;\\n  } else {\\n    float miterLength = abs(halfWidth / dot(normal, tmpNormal));\\n    offset = normal * direction * miterLength;\\n  }\\n  return degenerate;\\n}\\n\\nvoid squareCap(out vec2 offset, out float round, in bool isRound, in vec2 nextP,\\n    in float turnDir, in float direction) {\\n  round = 0.0;\\n  vec2 dirVect = a_position - nextP;\\n  vec2 firstNormal = normalize(dirVect);\\n  vec2 secondNormal = vec2(turnDir * firstNormal.y * direction, -turnDir * firstNormal.x * direction);\\n  vec2 hypotenuse = normalize(firstNormal - secondNormal);\\n  vec2 normal = vec2(turnDir * hypotenuse.y * direction, -turnDir * hypotenuse.x * direction);\\n  float length = sqrt(v_halfWidth * v_halfWidth * 2.0);\\n  offset = normal * length;\\n  if (isRound) {\\n    round = 1.0;\\n  }\\n}\\n\\nvoid main(void) {\\n  bool degenerate = false;\\n  float direction = float(sign(a_direction));\\n  mat4 offsetMatrix = u_offsetScaleMatrix * u_offsetRotateMatrix;\\n  vec2 offset;\\n  vec4 projPos = u_projectionMatrix * vec4(a_position, 0.0, 1.0);\\n  bool round = nearlyEquals(mod(a_direction, 2.0), 0.0);\\n\\n  v_round = 0.0;\\n  v_halfWidth = u_lineWidth / 2.0;\\n  v_roundVertex = projPos.xy;\\n\\n  if (nearlyEquals(mod(a_direction, 3.0), 0.0) || nearlyEquals(mod(a_direction, 17.0), 0.0)) {\\n    alongNormal(offset, a_nextPos, 1.0, direction);\\n  } else if (nearlyEquals(mod(a_direction, 5.0), 0.0) || nearlyEquals(mod(a_direction, 13.0), 0.0)) {\\n    alongNormal(offset, a_lastPos, -1.0, direction);\\n  } else if (nearlyEquals(mod(a_direction, 23.0), 0.0)) {\\n    miterUp(offset, v_round, round, direction);\\n  } else if (nearlyEquals(mod(a_direction, 19.0), 0.0)) {\\n    degenerate = miterDown(offset, projPos, offsetMatrix, direction);\\n  } else if (nearlyEquals(mod(a_direction, 7.0), 0.0)) {\\n    squareCap(offset, v_round, round, a_nextPos, 1.0, direction);\\n  } else if (nearlyEquals(mod(a_direction, 11.0), 0.0)) {\\n    squareCap(offset, v_round, round, a_lastPos, -1.0, direction);\\n  }\\n  if (!degenerate) {\\n    vec4 offsets = offsetMatrix * vec4(offset, 0.0, 0.0);\\n    gl_Position = projPos + offsets;\\n  } else {\\n    gl_Position = vec4(offset, 0.0, 1.0);\\n  }\\n}\\n\\n\\n' :\n  'varying float a;varying vec2 aVertex;varying float c;attribute vec2 d;attribute vec2 e;attribute vec2 f;attribute float g;uniform mat4 h;uniform mat4 i;uniform mat4 j;uniform float k;uniform float l;bool nearlyEquals(in float value,in float ref){float epsilon=0.000000000001;return value>=ref-epsilon&&value<=ref+epsilon;}void alongNormal(out vec2 offset,in vec2 nextP,in float turnDir,in float direction){vec2 dirVect=nextP-e;vec2 normal=normalize(vec2(-turnDir*dirVect.y,turnDir*dirVect.x));offset=k/2.0*normal*direction;}void miterUp(out vec2 offset,out float round,in bool isRound,in float direction){float halfWidth=k/2.0;vec2 tangent=normalize(normalize(f-e)+normalize(e-d));vec2 normal=vec2(-tangent.y,tangent.x);vec2 dirVect=f-e;vec2 tmpNormal=normalize(vec2(-dirVect.y,dirVect.x));float miterLength=abs(halfWidth/dot(normal,tmpNormal));offset=normal*direction*miterLength;round=0.0;if(isRound){round=1.0;}else if(miterLength>l+k){offset=halfWidth*tmpNormal*direction;}} bool miterDown(out vec2 offset,in vec4 projPos,in mat4 offsetMatrix,in float direction){bool degenerate=false;vec2 tangent=normalize(normalize(f-e)+normalize(e-d));vec2 normal=vec2(-tangent.y,tangent.x);vec2 dirVect=d-e;vec2 tmpNormal=normalize(vec2(-dirVect.y,dirVect.x));vec2 longOffset,shortOffset,longVertex;vec4 shortProjVertex;float halfWidth=k/2.0;if(length(f-e)>length(d-e)){longOffset=tmpNormal*direction*halfWidth;shortOffset=normalize(vec2(dirVect.y,-dirVect.x))*direction*halfWidth;longVertex=f;shortProjVertex=h*vec4(d,0.0,1.0);}else{shortOffset=tmpNormal*direction*halfWidth;longOffset=normalize(vec2(dirVect.y,-dirVect.x))*direction*halfWidth;longVertex=d;shortProjVertex=h*vec4(f,0.0,1.0);}vec4 p1=h*vec4(longVertex,0.0,1.0)+offsetMatrix*vec4(longOffset,0.0,0.0);vec4 p2=projPos+offsetMatrix*vec4(longOffset,0.0,0.0);vec4 p3=shortProjVertex+offsetMatrix*vec4(-shortOffset,0.0,0.0);vec4 p4=shortProjVertex+offsetMatrix*vec4(shortOffset,0.0,0.0);float denom=(p4.y-p3.y)*(p2.x-p1.x)-(p4.x-p3.x)*(p2.y-p1.y);float firstU=((p4.x-p3.x)*(p1.y-p3.y)-(p4.y-p3.y)*(p1.x-p3.x))/denom;float secondU=((p2.x-p1.x)*(p1.y-p3.y)-(p2.y-p1.y)*(p1.x-p3.x))/denom;float epsilon=0.000000000001;if(firstU>epsilon&&firstU<1.0-epsilon&&secondU>epsilon&&secondU<1.0-epsilon){shortProjVertex.x=p1.x+firstU*(p2.x-p1.x);shortProjVertex.y=p1.y+firstU*(p2.y-p1.y);offset=shortProjVertex.xy;degenerate=true;}else{float miterLength=abs(halfWidth/dot(normal,tmpNormal));offset=normal*direction*miterLength;}return degenerate;}void squareCap(out vec2 offset,out float round,in bool isRound,in vec2 nextP,in float turnDir,in float direction){round=0.0;vec2 dirVect=e-nextP;vec2 firstNormal=normalize(dirVect);vec2 secondNormal=vec2(turnDir*firstNormal.y*direction,-turnDir*firstNormal.x*direction);vec2 hypotenuse=normalize(firstNormal-secondNormal);vec2 normal=vec2(turnDir*hypotenuse.y*direction,-turnDir*hypotenuse.x*direction);float length=sqrt(c*c*2.0);offset=normal*length;if(isRound){round=1.0;}} void main(void){bool degenerate=false;float direction=float(sign(g));mat4 offsetMatrix=i*j;vec2 offset;vec4 projPos=h*vec4(e,0.0,1.0);bool round=nearlyEquals(mod(g,2.0),0.0);a=0.0;c=k/2.0;aVertex=projPos.xy;if(nearlyEquals(mod(g,3.0),0.0)||nearlyEquals(mod(g,17.0),0.0)){alongNormal(offset,f,1.0,direction);}else if(nearlyEquals(mod(g,5.0),0.0)||nearlyEquals(mod(g,13.0),0.0)){alongNormal(offset,d,-1.0,direction);}else if(nearlyEquals(mod(g,23.0),0.0)){miterUp(offset,a,round,direction);}else if(nearlyEquals(mod(g,19.0),0.0)){degenerate=miterDown(offset,projPos,offsetMatrix,direction);}else if(nearlyEquals(mod(g,7.0),0.0)){squareCap(offset,a,round,f,1.0,direction);}else if(nearlyEquals(mod(g,11.0),0.0)){squareCap(offset,a,round,d,-1.0,direction);}if(!degenerate){vec4 offsets=offsetMatrix*vec4(offset,0.0,0.0);gl_Position=projPos+offsets;}else{gl_Position=vec4(offset,0.0,1.0);}}');\n","/**\n * @module ol/render/webgl/linestringreplay/defaultshader/Locations\n */\n// This file is automatically generated, do not edit\n// Run `make shaders` to generate, and commit the result.\n\nimport {DEBUG as DEBUG_WEBGL} from '../../../../webgl.js';\n\n/**\n * @constructor\n * @param {WebGLRenderingContext} gl GL.\n * @param {WebGLProgram} program Program.\n * @struct\n */\nconst Locations = function(gl, program) {\n\n  /**\n   * @type {WebGLUniformLocation}\n   */\n  this.u_projectionMatrix = gl.getUniformLocation(\n    program, DEBUG_WEBGL ? 'u_projectionMatrix' : 'h');\n\n  /**\n   * @type {WebGLUniformLocation}\n   */\n  this.u_offsetScaleMatrix = gl.getUniformLocation(\n    program, DEBUG_WEBGL ? 'u_offsetScaleMatrix' : 'i');\n\n  /**\n   * @type {WebGLUniformLocation}\n   */\n  this.u_offsetRotateMatrix = gl.getUniformLocation(\n    program, DEBUG_WEBGL ? 'u_offsetRotateMatrix' : 'j');\n\n  /**\n   * @type {WebGLUniformLocation}\n   */\n  this.u_lineWidth = gl.getUniformLocation(\n    program, DEBUG_WEBGL ? 'u_lineWidth' : 'k');\n\n  /**\n   * @type {WebGLUniformLocation}\n   */\n  this.u_miterLimit = gl.getUniformLocation(\n    program, DEBUG_WEBGL ? 'u_miterLimit' : 'l');\n\n  /**\n   * @type {WebGLUniformLocation}\n   */\n  this.u_opacity = gl.getUniformLocation(\n    program, DEBUG_WEBGL ? 'u_opacity' : 'm');\n\n  /**\n   * @type {WebGLUniformLocation}\n   */\n  this.u_color = gl.getUniformLocation(\n    program, DEBUG_WEBGL ? 'u_color' : 'n');\n\n  /**\n   * @type {WebGLUniformLocation}\n   */\n  this.u_size = gl.getUniformLocation(\n    program, DEBUG_WEBGL ? 'u_size' : 'o');\n\n  /**\n   * @type {WebGLUniformLocation}\n   */\n  this.u_pixelRatio = gl.getUniformLocation(\n    program, DEBUG_WEBGL ? 'u_pixelRatio' : 'p');\n\n  /**\n   * @type {number}\n   */\n  this.a_lastPos = gl.getAttribLocation(\n    program, DEBUG_WEBGL ? 'a_lastPos' : 'd');\n\n  /**\n   * @type {number}\n   */\n  this.a_position = gl.getAttribLocation(\n    program, DEBUG_WEBGL ? 'a_position' : 'e');\n\n  /**\n   * @type {number}\n   */\n  this.a_nextPos = gl.getAttribLocation(\n    program, DEBUG_WEBGL ? 'a_nextPos' : 'f');\n\n  /**\n   * @type {number}\n   */\n  this.a_direction = gl.getAttribLocation(\n    program, DEBUG_WEBGL ? 'a_direction' : 'g');\n};\n\nexport default Locations;\n","/**\n * @module ol/render/webgl/LineStringReplay\n */\nimport {getUid, inherits} from '../../util.js';\nimport {equals} from '../../array.js';\nimport {asArray} from '../../color.js';\nimport {intersects} from '../../extent.js';\nimport {linearRingIsClockwise} from '../../geom/flat/orient.js';\nimport {translate} from '../../geom/flat/transform.js';\nimport {lineStringIsClosed} from '../../geom/flat/topology.js';\nimport {isEmpty} from '../../obj.js';\nimport {DEFAULT_LINECAP, DEFAULT_LINEDASH, DEFAULT_LINEDASHOFFSET,\n  DEFAULT_LINEJOIN, DEFAULT_LINEWIDTH, DEFAULT_MITERLIMIT, DEFAULT_STROKESTYLE,\n  triangleIsCounterClockwise} from '../webgl.js';\nimport WebGLReplay from '../webgl/Replay.js';\nimport {fragment, vertex} from '../webgl/linestringreplay/defaultshader.js';\nimport Locations from '../webgl/linestringreplay/defaultshader/Locations.js';\nimport {FLOAT} from '../../webgl.js';\nimport WebGLBuffer from '../../webgl/Buffer.js';\n\n\n/**\n * @enum {number}\n */\nconst Instruction = {\n  ROUND: 2,\n  BEGIN_LINE: 3,\n  END_LINE: 5,\n  BEGIN_LINE_CAP: 7,\n  END_LINE_CAP: 11,\n  BEVEL_FIRST: 13,\n  BEVEL_SECOND: 17,\n  MITER_BOTTOM: 19,\n  MITER_TOP: 23\n};\n\n\n/**\n * @constructor\n * @extends {module:ol/render/webgl/Replay}\n * @param {number} tolerance Tolerance.\n * @param {module:ol/extent~Extent} maxExtent Max extent.\n * @struct\n */\nconst WebGLLineStringReplay = function(tolerance, maxExtent) {\n  WebGLReplay.call(this, tolerance, maxExtent);\n\n  /**\n   * @private\n   * @type {module:ol/render/webgl/linestringreplay/defaultshader/Locations}\n   */\n  this.defaultLocations_ = null;\n\n  /**\n   * @private\n   * @type {Array.<Array.<?>>}\n   */\n  this.styles_ = [];\n\n  /**\n   * @private\n   * @type {Array.<number>}\n   */\n  this.styleIndices_ = [];\n\n  /**\n   * @private\n   * @type {{strokeColor: (Array.<number>|null),\n   *         lineCap: (string|undefined),\n   *         lineDash: Array.<number>,\n   *         lineDashOffset: (number|undefined),\n   *         lineJoin: (string|undefined),\n   *         lineWidth: (number|undefined),\n   *         miterLimit: (number|undefined),\n   *         changed: boolean}|null}\n   */\n  this.state_ = {\n    strokeColor: null,\n    lineCap: undefined,\n    lineDash: null,\n    lineDashOffset: undefined,\n    lineJoin: undefined,\n    lineWidth: undefined,\n    miterLimit: undefined,\n    changed: false\n  };\n\n};\n\ninherits(WebGLLineStringReplay, WebGLReplay);\n\n\n/**\n * Draw one segment.\n * @private\n * @param {Array.<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {number} end End.\n * @param {number} stride Stride.\n */\nWebGLLineStringReplay.prototype.drawCoordinates_ = function(flatCoordinates, offset, end, stride) {\n\n  let i, ii;\n  let numVertices = this.vertices.length;\n  let numIndices = this.indices.length;\n  //To save a vertex, the direction of a point is a product of the sign (1 or -1), a prime from\n  //Instruction, and a rounding factor (1 or 2). If the product is even,\n  //we round it. If it is odd, we don't.\n  const lineJoin = this.state_.lineJoin === 'bevel' ? 0 :\n    this.state_.lineJoin === 'miter' ? 1 : 2;\n  const lineCap = this.state_.lineCap === 'butt' ? 0 :\n    this.state_.lineCap === 'square' ? 1 : 2;\n  const closed = lineStringIsClosed(flatCoordinates, offset, end, stride);\n  let startCoords, sign, n;\n  let lastIndex = numIndices;\n  let lastSign = 1;\n  //We need the adjacent vertices to define normals in joins. p0 = last, p1 = current, p2 = next.\n  let p0, p1, p2;\n\n  for (i = offset, ii = end; i < ii; i += stride) {\n\n    n = numVertices / 7;\n\n    p0 = p1;\n    p1 = p2 || [flatCoordinates[i], flatCoordinates[i + 1]];\n    //First vertex.\n    if (i === offset) {\n      p2 = [flatCoordinates[i + stride], flatCoordinates[i + stride + 1]];\n      if (end - offset === stride * 2 && equals(p1, p2)) {\n        break;\n      }\n      if (closed) {\n        //A closed line! Complete the circle.\n        p0 = [flatCoordinates[end - stride * 2],\n          flatCoordinates[end - stride * 2 + 1]];\n\n        startCoords = p2;\n      } else {\n        //Add the first two/four vertices.\n\n        if (lineCap) {\n          numVertices = this.addVertices_([0, 0], p1, p2,\n            lastSign * Instruction.BEGIN_LINE_CAP * lineCap, numVertices);\n\n          numVertices = this.addVertices_([0, 0], p1, p2,\n            -lastSign * Instruction.BEGIN_LINE_CAP * lineCap, numVertices);\n\n          this.indices[numIndices++] = n + 2;\n          this.indices[numIndices++] = n;\n          this.indices[numIndices++] = n + 1;\n\n          this.indices[numIndices++] = n + 1;\n          this.indices[numIndices++] = n + 3;\n          this.indices[numIndices++] = n + 2;\n\n        }\n\n        numVertices = this.addVertices_([0, 0], p1, p2,\n          lastSign * Instruction.BEGIN_LINE * (lineCap || 1), numVertices);\n\n        numVertices = this.addVertices_([0, 0], p1, p2,\n          -lastSign * Instruction.BEGIN_LINE * (lineCap || 1), numVertices);\n\n        lastIndex = numVertices / 7 - 1;\n\n        continue;\n      }\n    } else if (i === end - stride) {\n      //Last vertex.\n      if (closed) {\n        //Same as the first vertex.\n        p2 = startCoords;\n        break;\n      } else {\n        p0 = p0 || [0, 0];\n\n        numVertices = this.addVertices_(p0, p1, [0, 0],\n          lastSign * Instruction.END_LINE * (lineCap || 1), numVertices);\n\n        numVertices = this.addVertices_(p0, p1, [0, 0],\n          -lastSign * Instruction.END_LINE * (lineCap || 1), numVertices);\n\n        this.indices[numIndices++] = n;\n        this.indices[numIndices++] = lastIndex - 1;\n        this.indices[numIndices++] = lastIndex;\n\n        this.indices[numIndices++] = lastIndex;\n        this.indices[numIndices++] = n + 1;\n        this.indices[numIndices++] = n;\n\n        if (lineCap) {\n          numVertices = this.addVertices_(p0, p1, [0, 0],\n            lastSign * Instruction.END_LINE_CAP * lineCap, numVertices);\n\n          numVertices = this.addVertices_(p0, p1, [0, 0],\n            -lastSign * Instruction.END_LINE_CAP * lineCap, numVertices);\n\n          this.indices[numIndices++] = n + 2;\n          this.indices[numIndices++] = n;\n          this.indices[numIndices++] = n + 1;\n\n          this.indices[numIndices++] = n + 1;\n          this.indices[numIndices++] = n + 3;\n          this.indices[numIndices++] = n + 2;\n\n        }\n\n        break;\n      }\n    } else {\n      p2 = [flatCoordinates[i + stride], flatCoordinates[i + stride + 1]];\n    }\n\n    // We group CW and straight lines, thus the not so inituitive CCW checking function.\n    sign = triangleIsCounterClockwise(p0[0], p0[1], p1[0], p1[1], p2[0], p2[1])\n      ? -1 : 1;\n\n    numVertices = this.addVertices_(p0, p1, p2,\n      sign * Instruction.BEVEL_FIRST * (lineJoin || 1), numVertices);\n\n    numVertices = this.addVertices_(p0, p1, p2,\n      sign * Instruction.BEVEL_SECOND * (lineJoin || 1), numVertices);\n\n    numVertices = this.addVertices_(p0, p1, p2,\n      -sign * Instruction.MITER_BOTTOM * (lineJoin || 1), numVertices);\n\n    if (i > offset) {\n      this.indices[numIndices++] = n;\n      this.indices[numIndices++] = lastIndex - 1;\n      this.indices[numIndices++] = lastIndex;\n\n      this.indices[numIndices++] = n + 2;\n      this.indices[numIndices++] = n;\n      this.indices[numIndices++] = lastSign * sign > 0 ? lastIndex : lastIndex - 1;\n    }\n\n    this.indices[numIndices++] = n;\n    this.indices[numIndices++] = n + 2;\n    this.indices[numIndices++] = n + 1;\n\n    lastIndex = n + 2;\n    lastSign = sign;\n\n    //Add miter\n    if (lineJoin) {\n      numVertices = this.addVertices_(p0, p1, p2,\n        sign * Instruction.MITER_TOP * lineJoin, numVertices);\n\n      this.indices[numIndices++] = n + 1;\n      this.indices[numIndices++] = n + 3;\n      this.indices[numIndices++] = n;\n    }\n  }\n\n  if (closed) {\n    n = n || numVertices / 7;\n    sign = linearRingIsClockwise([p0[0], p0[1], p1[0], p1[1], p2[0], p2[1]], 0, 6, 2)\n      ? 1 : -1;\n\n    numVertices = this.addVertices_(p0, p1, p2,\n      sign * Instruction.BEVEL_FIRST * (lineJoin || 1), numVertices);\n\n    numVertices = this.addVertices_(p0, p1, p2,\n      -sign * Instruction.MITER_BOTTOM * (lineJoin || 1), numVertices);\n\n    this.indices[numIndices++] = n;\n    this.indices[numIndices++] = lastIndex - 1;\n    this.indices[numIndices++] = lastIndex;\n\n    this.indices[numIndices++] = n + 1;\n    this.indices[numIndices++] = n;\n    this.indices[numIndices++] = lastSign * sign > 0 ? lastIndex : lastIndex - 1;\n  }\n};\n\n/**\n * @param {Array.<number>} p0 Last coordinates.\n * @param {Array.<number>} p1 Current coordinates.\n * @param {Array.<number>} p2 Next coordinates.\n * @param {number} product Sign, instruction, and rounding product.\n * @param {number} numVertices Vertex counter.\n * @return {number} Vertex counter.\n * @private\n */\nWebGLLineStringReplay.prototype.addVertices_ = function(p0, p1, p2, product, numVertices) {\n  this.vertices[numVertices++] = p0[0];\n  this.vertices[numVertices++] = p0[1];\n  this.vertices[numVertices++] = p1[0];\n  this.vertices[numVertices++] = p1[1];\n  this.vertices[numVertices++] = p2[0];\n  this.vertices[numVertices++] = p2[1];\n  this.vertices[numVertices++] = product;\n\n  return numVertices;\n};\n\n/**\n * Check if the linestring can be drawn (i. e. valid).\n * @param {Array.<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {number} end End.\n * @param {number} stride Stride.\n * @return {boolean} The linestring can be drawn.\n * @private\n */\nWebGLLineStringReplay.prototype.isValid_ = function(flatCoordinates, offset, end, stride) {\n  const range = end - offset;\n  if (range < stride * 2) {\n    return false;\n  } else if (range === stride * 2) {\n    const firstP = [flatCoordinates[offset], flatCoordinates[offset + 1]];\n    const lastP = [flatCoordinates[offset + stride], flatCoordinates[offset + stride + 1]];\n    return !equals(firstP, lastP);\n  }\n\n  return true;\n};\n\n\n/**\n * @inheritDoc\n */\nWebGLLineStringReplay.prototype.drawLineString = function(lineStringGeometry, feature) {\n  let flatCoordinates = lineStringGeometry.getFlatCoordinates();\n  const stride = lineStringGeometry.getStride();\n  if (this.isValid_(flatCoordinates, 0, flatCoordinates.length, stride)) {\n    flatCoordinates = translate(flatCoordinates, 0, flatCoordinates.length,\n      stride, -this.origin[0], -this.origin[1]);\n    if (this.state_.changed) {\n      this.styleIndices_.push(this.indices.length);\n      this.state_.changed = false;\n    }\n    this.startIndices.push(this.indices.length);\n    this.startIndicesFeature.push(feature);\n    this.drawCoordinates_(\n      flatCoordinates, 0, flatCoordinates.length, stride);\n  }\n};\n\n\n/**\n * @inheritDoc\n */\nWebGLLineStringReplay.prototype.drawMultiLineString = function(multiLineStringGeometry, feature) {\n  const indexCount = this.indices.length;\n  const ends = multiLineStringGeometry.getEnds();\n  ends.unshift(0);\n  const flatCoordinates = multiLineStringGeometry.getFlatCoordinates();\n  const stride = multiLineStringGeometry.getStride();\n  let i, ii;\n  if (ends.length > 1) {\n    for (i = 1, ii = ends.length; i < ii; ++i) {\n      if (this.isValid_(flatCoordinates, ends[i - 1], ends[i], stride)) {\n        const lineString = translate(flatCoordinates, ends[i - 1], ends[i],\n          stride, -this.origin[0], -this.origin[1]);\n        this.drawCoordinates_(\n          lineString, 0, lineString.length, stride);\n      }\n    }\n  }\n  if (this.indices.length > indexCount) {\n    this.startIndices.push(indexCount);\n    this.startIndicesFeature.push(feature);\n    if (this.state_.changed) {\n      this.styleIndices_.push(indexCount);\n      this.state_.changed = false;\n    }\n  }\n};\n\n\n/**\n * @param {Array.<number>} flatCoordinates Flat coordinates.\n * @param {Array.<Array.<number>>} holeFlatCoordinates Hole flat coordinates.\n * @param {number} stride Stride.\n */\nWebGLLineStringReplay.prototype.drawPolygonCoordinates = function(\n  flatCoordinates, holeFlatCoordinates, stride) {\n  if (!lineStringIsClosed(flatCoordinates, 0, flatCoordinates.length, stride)) {\n    flatCoordinates.push(flatCoordinates[0]);\n    flatCoordinates.push(flatCoordinates[1]);\n  }\n  this.drawCoordinates_(flatCoordinates, 0, flatCoordinates.length, stride);\n  if (holeFlatCoordinates.length) {\n    let i, ii;\n    for (i = 0, ii = holeFlatCoordinates.length; i < ii; ++i) {\n      if (!lineStringIsClosed(holeFlatCoordinates[i], 0, holeFlatCoordinates[i].length, stride)) {\n        holeFlatCoordinates[i].push(holeFlatCoordinates[i][0]);\n        holeFlatCoordinates[i].push(holeFlatCoordinates[i][1]);\n      }\n      this.drawCoordinates_(holeFlatCoordinates[i], 0,\n        holeFlatCoordinates[i].length, stride);\n    }\n  }\n};\n\n\n/**\n * @param {module:ol/Feature|module:ol/render/Feature} feature Feature.\n * @param {number=} opt_index Index count.\n */\nWebGLLineStringReplay.prototype.setPolygonStyle = function(feature, opt_index) {\n  const index = opt_index === undefined ? this.indices.length : opt_index;\n  this.startIndices.push(index);\n  this.startIndicesFeature.push(feature);\n  if (this.state_.changed) {\n    this.styleIndices_.push(index);\n    this.state_.changed = false;\n  }\n};\n\n\n/**\n * @return {number} Current index.\n */\nWebGLLineStringReplay.prototype.getCurrentIndex = function() {\n  return this.indices.length;\n};\n\n\n/**\n * @inheritDoc\n **/\nWebGLLineStringReplay.prototype.finish = function(context) {\n  // create, bind, and populate the vertices buffer\n  this.verticesBuffer = new WebGLBuffer(this.vertices);\n\n  // create, bind, and populate the indices buffer\n  this.indicesBuffer = new WebGLBuffer(this.indices);\n\n  this.startIndices.push(this.indices.length);\n\n  //Clean up, if there is nothing to draw\n  if (this.styleIndices_.length === 0 && this.styles_.length > 0) {\n    this.styles_ = [];\n  }\n\n  this.vertices = null;\n  this.indices = null;\n};\n\n\n/**\n * @inheritDoc\n */\nWebGLLineStringReplay.prototype.getDeleteResourcesFunction = function(context) {\n  const verticesBuffer = this.verticesBuffer;\n  const indicesBuffer = this.indicesBuffer;\n  return function() {\n    context.deleteBuffer(verticesBuffer);\n    context.deleteBuffer(indicesBuffer);\n  };\n};\n\n\n/**\n * @inheritDoc\n */\nWebGLLineStringReplay.prototype.setUpProgram = function(gl, context, size, pixelRatio) {\n  // get the program\n  const program = context.getProgram(fragment, vertex);\n\n  // get the locations\n  let locations;\n  if (!this.defaultLocations_) {\n    locations = new Locations(gl, program);\n    this.defaultLocations_ = locations;\n  } else {\n    locations = this.defaultLocations_;\n  }\n\n  context.useProgram(program);\n\n  // enable the vertex attrib arrays\n  gl.enableVertexAttribArray(locations.a_lastPos);\n  gl.vertexAttribPointer(locations.a_lastPos, 2, FLOAT,\n    false, 28, 0);\n\n  gl.enableVertexAttribArray(locations.a_position);\n  gl.vertexAttribPointer(locations.a_position, 2, FLOAT,\n    false, 28, 8);\n\n  gl.enableVertexAttribArray(locations.a_nextPos);\n  gl.vertexAttribPointer(locations.a_nextPos, 2, FLOAT,\n    false, 28, 16);\n\n  gl.enableVertexAttribArray(locations.a_direction);\n  gl.vertexAttribPointer(locations.a_direction, 1, FLOAT,\n    false, 28, 24);\n\n  // Enable renderer specific uniforms.\n  gl.uniform2fv(locations.u_size, size);\n  gl.uniform1f(locations.u_pixelRatio, pixelRatio);\n\n  return locations;\n};\n\n\n/**\n * @inheritDoc\n */\nWebGLLineStringReplay.prototype.shutDownProgram = function(gl, locations) {\n  gl.disableVertexAttribArray(locations.a_lastPos);\n  gl.disableVertexAttribArray(locations.a_position);\n  gl.disableVertexAttribArray(locations.a_nextPos);\n  gl.disableVertexAttribArray(locations.a_direction);\n};\n\n\n/**\n * @inheritDoc\n */\nWebGLLineStringReplay.prototype.drawReplay = function(gl, context, skippedFeaturesHash, hitDetection) {\n  //Save GL parameters.\n  const tmpDepthFunc = /** @type {number} */ (gl.getParameter(gl.DEPTH_FUNC));\n  const tmpDepthMask = /** @type {boolean} */ (gl.getParameter(gl.DEPTH_WRITEMASK));\n\n  if (!hitDetection) {\n    gl.enable(gl.DEPTH_TEST);\n    gl.depthMask(true);\n    gl.depthFunc(gl.NOTEQUAL);\n  }\n\n  if (!isEmpty(skippedFeaturesHash)) {\n    this.drawReplaySkipping_(gl, context, skippedFeaturesHash);\n  } else {\n    //Draw by style groups to minimize drawElements() calls.\n    let i, start, end, nextStyle;\n    end = this.startIndices[this.startIndices.length - 1];\n    for (i = this.styleIndices_.length - 1; i >= 0; --i) {\n      start = this.styleIndices_[i];\n      nextStyle = this.styles_[i];\n      this.setStrokeStyle_(gl, nextStyle[0], nextStyle[1], nextStyle[2]);\n      this.drawElements(gl, context, start, end);\n      gl.clear(gl.DEPTH_BUFFER_BIT);\n      end = start;\n    }\n  }\n  if (!hitDetection) {\n    gl.disable(gl.DEPTH_TEST);\n    gl.clear(gl.DEPTH_BUFFER_BIT);\n    //Restore GL parameters.\n    gl.depthMask(tmpDepthMask);\n    gl.depthFunc(tmpDepthFunc);\n  }\n};\n\n\n/**\n * @private\n * @param {WebGLRenderingContext} gl gl.\n * @param {module:ol/webgl/Context} context Context.\n * @param {Object} skippedFeaturesHash Ids of features to skip.\n */\nWebGLLineStringReplay.prototype.drawReplaySkipping_ = function(gl, context, skippedFeaturesHash) {\n  let i, start, end, nextStyle, groupStart, feature, featureUid, featureIndex, featureStart;\n  featureIndex = this.startIndices.length - 2;\n  end = start = this.startIndices[featureIndex + 1];\n  for (i = this.styleIndices_.length - 1; i >= 0; --i) {\n    nextStyle = this.styles_[i];\n    this.setStrokeStyle_(gl, nextStyle[0], nextStyle[1], nextStyle[2]);\n    groupStart = this.styleIndices_[i];\n\n    while (featureIndex >= 0 &&\n        this.startIndices[featureIndex] >= groupStart) {\n      featureStart = this.startIndices[featureIndex];\n      feature = this.startIndicesFeature[featureIndex];\n      featureUid = getUid(feature).toString();\n\n      if (skippedFeaturesHash[featureUid]) {\n        if (start !== end) {\n          this.drawElements(gl, context, start, end);\n          gl.clear(gl.DEPTH_BUFFER_BIT);\n        }\n        end = featureStart;\n      }\n      featureIndex--;\n      start = featureStart;\n    }\n    if (start !== end) {\n      this.drawElements(gl, context, start, end);\n      gl.clear(gl.DEPTH_BUFFER_BIT);\n    }\n    start = end = groupStart;\n  }\n};\n\n\n/**\n * @inheritDoc\n */\nWebGLLineStringReplay.prototype.drawHitDetectionReplayOneByOne = function(gl, context, skippedFeaturesHash,\n  featureCallback, opt_hitExtent) {\n  let i, start, end, nextStyle, groupStart, feature, featureUid, featureIndex;\n  featureIndex = this.startIndices.length - 2;\n  end = this.startIndices[featureIndex + 1];\n  for (i = this.styleIndices_.length - 1; i >= 0; --i) {\n    nextStyle = this.styles_[i];\n    this.setStrokeStyle_(gl, nextStyle[0], nextStyle[1], nextStyle[2]);\n    groupStart = this.styleIndices_[i];\n\n    while (featureIndex >= 0 &&\n        this.startIndices[featureIndex] >= groupStart) {\n      start = this.startIndices[featureIndex];\n      feature = this.startIndicesFeature[featureIndex];\n      featureUid = getUid(feature).toString();\n\n      if (skippedFeaturesHash[featureUid] === undefined &&\n          feature.getGeometry() &&\n          (opt_hitExtent === undefined || intersects(\n            /** @type {Array<number>} */ (opt_hitExtent),\n            feature.getGeometry().getExtent()))) {\n        gl.clear(gl.COLOR_BUFFER_BIT | gl.DEPTH_BUFFER_BIT);\n        this.drawElements(gl, context, start, end);\n\n        const result = featureCallback(feature);\n\n        if (result) {\n          return result;\n        }\n\n      }\n      featureIndex--;\n      end = start;\n    }\n  }\n  return undefined;\n};\n\n\n/**\n * @private\n * @param {WebGLRenderingContext} gl gl.\n * @param {Array.<number>} color Color.\n * @param {number} lineWidth Line width.\n * @param {number} miterLimit Miter limit.\n */\nWebGLLineStringReplay.prototype.setStrokeStyle_ = function(gl, color, lineWidth, miterLimit) {\n  gl.uniform4fv(this.defaultLocations_.u_color, color);\n  gl.uniform1f(this.defaultLocations_.u_lineWidth, lineWidth);\n  gl.uniform1f(this.defaultLocations_.u_miterLimit, miterLimit);\n};\n\n\n/**\n * @inheritDoc\n */\nWebGLLineStringReplay.prototype.setFillStrokeStyle = function(fillStyle, strokeStyle) {\n  const strokeStyleLineCap = strokeStyle.getLineCap();\n  this.state_.lineCap = strokeStyleLineCap !== undefined ?\n    strokeStyleLineCap : DEFAULT_LINECAP;\n  const strokeStyleLineDash = strokeStyle.getLineDash();\n  this.state_.lineDash = strokeStyleLineDash ?\n    strokeStyleLineDash : DEFAULT_LINEDASH;\n  const strokeStyleLineDashOffset = strokeStyle.getLineDashOffset();\n  this.state_.lineDashOffset = strokeStyleLineDashOffset ?\n    strokeStyleLineDashOffset : DEFAULT_LINEDASHOFFSET;\n  const strokeStyleLineJoin = strokeStyle.getLineJoin();\n  this.state_.lineJoin = strokeStyleLineJoin !== undefined ?\n    strokeStyleLineJoin : DEFAULT_LINEJOIN;\n  let strokeStyleColor = strokeStyle.getColor();\n  if (!(strokeStyleColor instanceof CanvasGradient) &&\n      !(strokeStyleColor instanceof CanvasPattern)) {\n    strokeStyleColor = asArray(strokeStyleColor).map(function(c, i) {\n      return i != 3 ? c / 255 : c;\n    }) || DEFAULT_STROKESTYLE;\n  } else {\n    strokeStyleColor = DEFAULT_STROKESTYLE;\n  }\n  let strokeStyleWidth = strokeStyle.getWidth();\n  strokeStyleWidth = strokeStyleWidth !== undefined ?\n    strokeStyleWidth : DEFAULT_LINEWIDTH;\n  let strokeStyleMiterLimit = strokeStyle.getMiterLimit();\n  strokeStyleMiterLimit = strokeStyleMiterLimit !== undefined ?\n    strokeStyleMiterLimit : DEFAULT_MITERLIMIT;\n  if (!this.state_.strokeColor || !equals(this.state_.strokeColor, strokeStyleColor) ||\n      this.state_.lineWidth !== strokeStyleWidth || this.state_.miterLimit !== strokeStyleMiterLimit) {\n    this.state_.changed = true;\n    this.state_.strokeColor = strokeStyleColor;\n    this.state_.lineWidth = strokeStyleWidth;\n    this.state_.miterLimit = strokeStyleMiterLimit;\n    this.styles_.push([strokeStyleColor, strokeStyleWidth, strokeStyleMiterLimit]);\n  }\n};\n\nexport default WebGLLineStringReplay;\n","/**\n * @module ol/render/webgl/polygonreplay/defaultshader\n */\n// This file is automatically generated, do not edit.\n// Run `make shaders` to generate, and commit the result.\n\nimport {DEBUG as DEBUG_WEBGL} from '../../../webgl.js';\nimport WebGLFragment from '../../../webgl/Fragment.js';\nimport WebGLVertex from '../../../webgl/Vertex.js';\n\nexport const fragment = new WebGLFragment(DEBUG_WEBGL ?\n  'precision mediump float;\\n\\n\\n\\nuniform vec4 u_color;\\nuniform float u_opacity;\\n\\nvoid main(void) {\\n  gl_FragColor = u_color;\\n  float alpha = u_color.a * u_opacity;\\n  if (alpha == 0.0) {\\n    discard;\\n  }\\n  gl_FragColor.a = alpha;\\n}\\n' :\n  'precision mediump float;uniform vec4 e;uniform float f;void main(void){gl_FragColor=e;float alpha=e.a*f;if(alpha==0.0){discard;}gl_FragColor.a=alpha;}');\n\nexport const vertex = new WebGLVertex(DEBUG_WEBGL ?\n  '\\n\\nattribute vec2 a_position;\\n\\nuniform mat4 u_projectionMatrix;\\nuniform mat4 u_offsetScaleMatrix;\\nuniform mat4 u_offsetRotateMatrix;\\n\\nvoid main(void) {\\n  gl_Position = u_projectionMatrix * vec4(a_position, 0.0, 1.0);\\n}\\n\\n\\n' :\n  'attribute vec2 a;uniform mat4 b;uniform mat4 c;uniform mat4 d;void main(void){gl_Position=b*vec4(a,0.0,1.0);}');\n","/**\n * @module ol/render/webgl/polygonreplay/defaultshader/Locations\n */\n// This file is automatically generated, do not edit\n// Run `make shaders` to generate, and commit the result.\n\nimport {DEBUG as DEBUG_WEBGL} from '../../../../webgl.js';\n\n/**\n * @constructor\n * @param {WebGLRenderingContext} gl GL.\n * @param {WebGLProgram} program Program.\n * @struct\n */\nconst Locations = function(gl, program) {\n\n  /**\n   * @type {WebGLUniformLocation}\n   */\n  this.u_projectionMatrix = gl.getUniformLocation(\n    program, DEBUG_WEBGL ? 'u_projectionMatrix' : 'b');\n\n  /**\n   * @type {WebGLUniformLocation}\n   */\n  this.u_offsetScaleMatrix = gl.getUniformLocation(\n    program, DEBUG_WEBGL ? 'u_offsetScaleMatrix' : 'c');\n\n  /**\n   * @type {WebGLUniformLocation}\n   */\n  this.u_offsetRotateMatrix = gl.getUniformLocation(\n    program, DEBUG_WEBGL ? 'u_offsetRotateMatrix' : 'd');\n\n  /**\n   * @type {WebGLUniformLocation}\n   */\n  this.u_color = gl.getUniformLocation(\n    program, DEBUG_WEBGL ? 'u_color' : 'e');\n\n  /**\n   * @type {WebGLUniformLocation}\n   */\n  this.u_opacity = gl.getUniformLocation(\n    program, DEBUG_WEBGL ? 'u_opacity' : 'f');\n\n  /**\n   * @type {number}\n   */\n  this.a_position = gl.getAttribLocation(\n    program, DEBUG_WEBGL ? 'a_position' : 'a');\n};\n\nexport default Locations;\n","/**\n * @module ol/structs/LinkedList\n */\n\n\n/**\n * @typedef {Object} Item\n * @property {module:ol/structs/LinkedList~Item} [prev]\n * @property {module:ol/structs/LinkedList~Item} [next]\n * @property {?} data\n */\n\n\n/**\n * Creates an empty linked list structure.\n *\n * @constructor\n * @struct\n * @param {boolean=} opt_circular The last item is connected to the first one,\n * and the first item to the last one. Default is true.\n */\nconst LinkedList = function(opt_circular) {\n\n  /**\n   * @private\n   * @type {module:ol/structs/LinkedList~Item|undefined}\n   */\n  this.first_;\n\n  /**\n   * @private\n   * @type {module:ol/structs/LinkedList~Item|undefined}\n   */\n  this.last_;\n\n  /**\n   * @private\n   * @type {module:ol/structs/LinkedList~Item|undefined}\n   */\n  this.head_;\n\n  /**\n   * @private\n   * @type {boolean}\n   */\n  this.circular_ = opt_circular === undefined ? true : opt_circular;\n\n  /**\n   * @private\n   * @type {number}\n   */\n  this.length_ = 0;\n};\n\n/**\n * Inserts an item into the linked list right after the current one.\n *\n * @param {?} data Item data.\n */\nLinkedList.prototype.insertItem = function(data) {\n\n  /** @type {module:ol/structs/LinkedList~Item} */\n  const item = {\n    prev: undefined,\n    next: undefined,\n    data: data\n  };\n\n  const head = this.head_;\n\n  //Initialize the list.\n  if (!head) {\n    this.first_ = item;\n    this.last_ = item;\n    if (this.circular_) {\n      item.next = item;\n      item.prev = item;\n    }\n  } else {\n    //Link the new item to the adjacent ones.\n    const next = head.next;\n    item.prev = head;\n    item.next = next;\n    head.next = item;\n    if (next) {\n      next.prev = item;\n    }\n\n    if (head === this.last_) {\n      this.last_ = item;\n    }\n  }\n  this.head_ = item;\n  this.length_++;\n};\n\n/**\n * Removes the current item from the list. Sets the cursor to the next item,\n * if possible.\n */\nLinkedList.prototype.removeItem = function() {\n  const head = this.head_;\n  if (head) {\n    const next = head.next;\n    const prev = head.prev;\n    if (next) {\n      next.prev = prev;\n    }\n    if (prev) {\n      prev.next = next;\n    }\n    this.head_ = next || prev;\n\n    if (this.first_ === this.last_) {\n      this.head_ = undefined;\n      this.first_ = undefined;\n      this.last_ = undefined;\n    } else if (this.first_ === head) {\n      this.first_ = this.head_;\n    } else if (this.last_ === head) {\n      this.last_ = prev ? this.head_.prev : this.head_;\n    }\n    this.length_--;\n  }\n};\n\n/**\n * Sets the cursor to the first item, and returns the associated data.\n *\n * @return {?} Item data.\n */\nLinkedList.prototype.firstItem = function() {\n  this.head_ = this.first_;\n  if (this.head_) {\n    return this.head_.data;\n  }\n  return undefined;\n};\n\n/**\n* Sets the cursor to the last item, and returns the associated data.\n*\n* @return {?} Item data.\n*/\nLinkedList.prototype.lastItem = function() {\n  this.head_ = this.last_;\n  if (this.head_) {\n    return this.head_.data;\n  }\n  return undefined;\n};\n\n/**\n * Sets the cursor to the next item, and returns the associated data.\n *\n * @return {?} Item data.\n */\nLinkedList.prototype.nextItem = function() {\n  if (this.head_ && this.head_.next) {\n    this.head_ = this.head_.next;\n    return this.head_.data;\n  }\n  return undefined;\n};\n\n/**\n * Returns the next item's data without moving the cursor.\n *\n * @return {?} Item data.\n */\nLinkedList.prototype.getNextItem = function() {\n  if (this.head_ && this.head_.next) {\n    return this.head_.next.data;\n  }\n  return undefined;\n};\n\n/**\n * Sets the cursor to the previous item, and returns the associated data.\n *\n * @return {?} Item data.\n */\nLinkedList.prototype.prevItem = function() {\n  if (this.head_ && this.head_.prev) {\n    this.head_ = this.head_.prev;\n    return this.head_.data;\n  }\n  return undefined;\n};\n\n/**\n * Returns the previous item's data without moving the cursor.\n *\n * @return {?} Item data.\n */\nLinkedList.prototype.getPrevItem = function() {\n  if (this.head_ && this.head_.prev) {\n    return this.head_.prev.data;\n  }\n  return undefined;\n};\n\n/**\n * Returns the current item's data.\n *\n * @return {?} Item data.\n */\nLinkedList.prototype.getCurrItem = function() {\n  if (this.head_) {\n    return this.head_.data;\n  }\n  return undefined;\n};\n\n/**\n * Sets the first item of the list. This only works for circular lists, and sets\n * the last item accordingly.\n */\nLinkedList.prototype.setFirstItem = function() {\n  if (this.circular_ && this.head_) {\n    this.first_ = this.head_;\n    this.last_ = this.head_.prev;\n  }\n};\n\n/**\n * Concatenates two lists.\n * @param {module:ol/structs/LinkedList} list List to merge into the current list.\n */\nLinkedList.prototype.concat = function(list) {\n  if (list.head_) {\n    if (this.head_) {\n      const end = this.head_.next;\n      this.head_.next = list.first_;\n      list.first_.prev = this.head_;\n      end.prev = list.last_;\n      list.last_.next = end;\n      this.length_ += list.length_;\n    } else {\n      this.head_ = list.head_;\n      this.first_ = list.first_;\n      this.last_ = list.last_;\n      this.length_ = list.length_;\n    }\n    list.head_ = undefined;\n    list.first_ = undefined;\n    list.last_ = undefined;\n    list.length_ = 0;\n  }\n};\n\n/**\n * Returns the current length of the list.\n *\n * @return {number} Length.\n */\nLinkedList.prototype.getLength = function() {\n  return this.length_;\n};\nexport default LinkedList;\n","/**\n * @module ol/render/webgl/PolygonReplay\n */\nimport {getUid, inherits} from '../../util.js';\nimport {equals} from '../../array.js';\nimport {asArray} from '../../color.js';\nimport {intersects} from '../../extent.js';\nimport {isEmpty} from '../../obj.js';\nimport {linearRingContainsXY} from '../../geom/flat/contains.js';\nimport {linearRingIsClockwise} from '../../geom/flat/orient.js';\nimport {translate} from '../../geom/flat/transform.js';\nimport {fragment, vertex} from '../webgl/polygonreplay/defaultshader.js';\nimport Locations from '../webgl/polygonreplay/defaultshader/Locations.js';\nimport WebGLLineStringReplay from '../webgl/LineStringReplay.js';\nimport WebGLReplay from '../webgl/Replay.js';\nimport {triangleIsCounterClockwise, EPSILON, DEFAULT_FILLSTYLE} from '../webgl.js';\nimport Stroke from '../../style/Stroke.js';\nimport LinkedList from '../../structs/LinkedList.js';\nimport RBush from '../../structs/RBush.js';\nimport {FLOAT} from '../../webgl.js';\nimport WebGLBuffer from '../../webgl/Buffer.js';\n\n\n/**\n * @typedef {Object} PolygonVertex\n * @property {number} x\n * @property {number} y\n * @property {number} i\n * @property {boolean} [reflex]\n */\n\n/**\n * @typedef {Object} PolygonSegment\n * @property {module:ol/render/webgl/PolygonReplay~PolygonVertex} p0\n * @property {module:ol/render/webgl/PolygonReplay~PolygonVertex} p1\n */\n\n\n/**\n * @constructor\n * @extends {module:ol/render/webgl/Replay}\n * @param {number} tolerance Tolerance.\n * @param {module:ol/extent~Extent} maxExtent Max extent.\n * @struct\n */\nconst WebGLPolygonReplay = function(tolerance, maxExtent) {\n  WebGLReplay.call(this, tolerance, maxExtent);\n\n  this.lineStringReplay = new WebGLLineStringReplay(\n    tolerance, maxExtent);\n\n  /**\n   * @private\n   * @type {module:ol/render/webgl/polygonreplay/defaultshader/Locations}\n   */\n  this.defaultLocations_ = null;\n\n  /**\n   * @private\n   * @type {Array.<Array.<number>>}\n   */\n  this.styles_ = [];\n\n  /**\n   * @private\n   * @type {Array.<number>}\n   */\n  this.styleIndices_ = [];\n\n  /**\n   * @private\n   * @type {{fillColor: (Array.<number>|null),\n   *         changed: boolean}|null}\n   */\n  this.state_ = {\n    fillColor: null,\n    changed: false\n  };\n\n};\n\ninherits(WebGLPolygonReplay, WebGLReplay);\n\n\n/**\n * Draw one polygon.\n * @param {Array.<number>} flatCoordinates Flat coordinates.\n * @param {Array.<Array.<number>>} holeFlatCoordinates Hole flat coordinates.\n * @param {number} stride Stride.\n * @private\n */\nWebGLPolygonReplay.prototype.drawCoordinates_ = function(\n  flatCoordinates, holeFlatCoordinates, stride) {\n  // Triangulate the polygon\n  const outerRing = new LinkedList();\n  const rtree = new RBush();\n  // Initialize the outer ring\n  this.processFlatCoordinates_(flatCoordinates, stride, outerRing, rtree, true);\n  const maxCoords = this.getMaxCoords_(outerRing);\n\n  // Eliminate holes, if there are any\n  if (holeFlatCoordinates.length) {\n    let i, ii;\n    const holeLists = [];\n    for (i = 0, ii = holeFlatCoordinates.length; i < ii; ++i) {\n      const holeList = {\n        list: new LinkedList(),\n        maxCoords: undefined,\n        rtree: new RBush()\n      };\n      holeLists.push(holeList);\n      this.processFlatCoordinates_(holeFlatCoordinates[i],\n        stride, holeList.list, holeList.rtree, false);\n      this.classifyPoints_(holeList.list, holeList.rtree, true);\n      holeList.maxCoords = this.getMaxCoords_(holeList.list);\n    }\n    holeLists.sort(function(a, b) {\n      return b.maxCoords[0] === a.maxCoords[0] ?\n        a.maxCoords[1] - b.maxCoords[1] : b.maxCoords[0] - a.maxCoords[0];\n    });\n    for (i = 0; i < holeLists.length; ++i) {\n      const currList = holeLists[i].list;\n      const start = currList.firstItem();\n      let currItem = start;\n      let intersection;\n      do {\n        //TODO: Triangulate holes when they intersect the outer ring.\n        if (this.getIntersections_(currItem, rtree).length) {\n          intersection = true;\n          break;\n        }\n        currItem = currList.nextItem();\n      } while (start !== currItem);\n      if (!intersection) {\n        if (this.bridgeHole_(currList, holeLists[i].maxCoords[0], outerRing, maxCoords[0], rtree)) {\n          rtree.concat(holeLists[i].rtree);\n          this.classifyPoints_(outerRing, rtree, false);\n        }\n      }\n    }\n  } else {\n    this.classifyPoints_(outerRing, rtree, false);\n  }\n  this.triangulate_(outerRing, rtree);\n};\n\n\n/**\n * Inserts flat coordinates in a linked list and adds them to the vertex buffer.\n * @private\n * @param {Array.<number>} flatCoordinates Flat coordinates.\n * @param {number} stride Stride.\n * @param {module:ol/structs/LinkedList} list Linked list.\n * @param {module:ol/structs/RBush} rtree R-Tree of the polygon.\n * @param {boolean} clockwise Coordinate order should be clockwise.\n */\nWebGLPolygonReplay.prototype.processFlatCoordinates_ = function(\n  flatCoordinates, stride, list, rtree, clockwise) {\n  const isClockwise = linearRingIsClockwise(flatCoordinates,\n    0, flatCoordinates.length, stride);\n  let i, ii;\n  let n = this.vertices.length / 2;\n  /** @type {module:ol/render/webgl/PolygonReplay~PolygonVertex} */\n  let start;\n  /** @type {module:ol/render/webgl/PolygonReplay~PolygonVertex} */\n  let p0;\n  /** @type {module:ol/render/webgl/PolygonReplay~PolygonVertex} */\n  let p1;\n  const extents = [];\n  const segments = [];\n  if (clockwise === isClockwise) {\n    start = this.createPoint_(flatCoordinates[0], flatCoordinates[1], n++);\n    p0 = start;\n    for (i = stride, ii = flatCoordinates.length; i < ii; i += stride) {\n      p1 = this.createPoint_(flatCoordinates[i], flatCoordinates[i + 1], n++);\n      segments.push(this.insertItem_(p0, p1, list));\n      extents.push([Math.min(p0.x, p1.x), Math.min(p0.y, p1.y), Math.max(p0.x, p1.x),\n        Math.max(p0.y, p1.y)]);\n      p0 = p1;\n    }\n    segments.push(this.insertItem_(p1, start, list));\n    extents.push([Math.min(p0.x, p1.x), Math.min(p0.y, p1.y), Math.max(p0.x, p1.x),\n      Math.max(p0.y, p1.y)]);\n  } else {\n    const end = flatCoordinates.length - stride;\n    start = this.createPoint_(flatCoordinates[end], flatCoordinates[end + 1], n++);\n    p0 = start;\n    for (i = end - stride, ii = 0; i >= ii; i -= stride) {\n      p1 = this.createPoint_(flatCoordinates[i], flatCoordinates[i + 1], n++);\n      segments.push(this.insertItem_(p0, p1, list));\n      extents.push([Math.min(p0.x, p1.x), Math.min(p0.y, p1.y), Math.max(p0.x, p1.x),\n        Math.max(p0.y, p1.y)]);\n      p0 = p1;\n    }\n    segments.push(this.insertItem_(p1, start, list));\n    extents.push([Math.min(p0.x, p1.x), Math.min(p0.y, p1.y), Math.max(p0.x, p1.x),\n      Math.max(p0.y, p1.y)]);\n  }\n  rtree.load(extents, segments);\n};\n\n\n/**\n * Returns the rightmost coordinates of a polygon on the X axis.\n * @private\n * @param {module:ol/structs/LinkedList} list Polygons ring.\n * @return {Array.<number>} Max X coordinates.\n */\nWebGLPolygonReplay.prototype.getMaxCoords_ = function(list) {\n  const start = list.firstItem();\n  let seg = start;\n  let maxCoords = [seg.p0.x, seg.p0.y];\n\n  do {\n    seg = list.nextItem();\n    if (seg.p0.x > maxCoords[0]) {\n      maxCoords = [seg.p0.x, seg.p0.y];\n    }\n  } while (seg !== start);\n\n  return maxCoords;\n};\n\n\n/**\n * Classifies the points of a polygon list as convex, reflex. Removes collinear vertices.\n * @private\n * @param {module:ol/structs/LinkedList} list Polygon ring.\n * @param {module:ol/structs/RBush} rtree R-Tree of the polygon.\n * @param {boolean} ccw The orientation of the polygon is counter-clockwise.\n * @return {boolean} There were reclassified points.\n */\nWebGLPolygonReplay.prototype.classifyPoints_ = function(list, rtree, ccw) {\n  let start = list.firstItem();\n  let s0 = start;\n  let s1 = list.nextItem();\n  let pointsReclassified = false;\n  do {\n    const reflex = ccw ? triangleIsCounterClockwise(s1.p1.x,\n      s1.p1.y, s0.p1.x, s0.p1.y, s0.p0.x, s0.p0.y) :\n      triangleIsCounterClockwise(s0.p0.x, s0.p0.y, s0.p1.x,\n        s0.p1.y, s1.p1.x, s1.p1.y);\n    if (reflex === undefined) {\n      this.removeItem_(s0, s1, list, rtree);\n      pointsReclassified = true;\n      if (s1 === start) {\n        start = list.getNextItem();\n      }\n      s1 = s0;\n      list.prevItem();\n    } else if (s0.p1.reflex !== reflex) {\n      s0.p1.reflex = reflex;\n      pointsReclassified = true;\n    }\n    s0 = s1;\n    s1 = list.nextItem();\n  } while (s0 !== start);\n  return pointsReclassified;\n};\n\n\n/**\n * @private\n * @param {module:ol/structs/LinkedList} hole Linked list of the hole.\n * @param {number} holeMaxX Maximum X value of the hole.\n * @param {module:ol/structs/LinkedList} list Linked list of the polygon.\n * @param {number} listMaxX Maximum X value of the polygon.\n * @param {module:ol/structs/RBush} rtree R-Tree of the polygon.\n * @return {boolean} Bridging was successful.\n */\nWebGLPolygonReplay.prototype.bridgeHole_ = function(hole, holeMaxX,\n  list, listMaxX, rtree) {\n  let seg = hole.firstItem();\n  while (seg.p1.x !== holeMaxX) {\n    seg = hole.nextItem();\n  }\n\n  const p1 = seg.p1;\n  /** @type {module:ol/render/webgl/PolygonReplay~PolygonVertex} */\n  const p2 = {x: listMaxX, y: p1.y, i: -1};\n  let minDist = Infinity;\n  let i, ii, bestPoint;\n  /** @type {module:ol/render/webgl/PolygonReplay~PolygonVertex} */\n  let p5;\n\n  const intersectingSegments = this.getIntersections_({p0: p1, p1: p2}, rtree, true);\n  for (i = 0, ii = intersectingSegments.length; i < ii; ++i) {\n    const currSeg = intersectingSegments[i];\n    const intersection = this.calculateIntersection_(p1, p2, currSeg.p0,\n      currSeg.p1, true);\n    const dist = Math.abs(p1.x - intersection[0]);\n    if (dist < minDist && triangleIsCounterClockwise(p1.x, p1.y,\n      currSeg.p0.x, currSeg.p0.y, currSeg.p1.x, currSeg.p1.y) !== undefined) {\n      minDist = dist;\n      p5 = {x: intersection[0], y: intersection[1], i: -1};\n      seg = currSeg;\n    }\n  }\n  if (minDist === Infinity) {\n    return false;\n  }\n  bestPoint = seg.p1;\n\n  if (minDist > 0) {\n    const pointsInTriangle = this.getPointsInTriangle_(p1, p5, seg.p1, rtree);\n    if (pointsInTriangle.length) {\n      let theta = Infinity;\n      for (i = 0, ii = pointsInTriangle.length; i < ii; ++i) {\n        const currPoint = pointsInTriangle[i];\n        const currTheta = Math.atan2(p1.y - currPoint.y, p2.x - currPoint.x);\n        if (currTheta < theta || (currTheta === theta && currPoint.x < bestPoint.x)) {\n          theta = currTheta;\n          bestPoint = currPoint;\n        }\n      }\n    }\n  }\n\n  seg = list.firstItem();\n  while (seg.p1.x !== bestPoint.x || seg.p1.y !== bestPoint.y) {\n    seg = list.nextItem();\n  }\n\n  //We clone the bridge points as they can have different convexity.\n  const p0Bridge = {x: p1.x, y: p1.y, i: p1.i, reflex: undefined};\n  const p1Bridge = {x: seg.p1.x, y: seg.p1.y, i: seg.p1.i, reflex: undefined};\n\n  hole.getNextItem().p0 = p0Bridge;\n  this.insertItem_(p1, seg.p1, hole, rtree);\n  this.insertItem_(p1Bridge, p0Bridge, hole, rtree);\n  seg.p1 = p1Bridge;\n  hole.setFirstItem();\n  list.concat(hole);\n\n  return true;\n};\n\n\n/**\n * @private\n * @param {module:ol/structs/LinkedList} list Linked list of the polygon.\n * @param {module:ol/structs/RBush} rtree R-Tree of the polygon.\n */\nWebGLPolygonReplay.prototype.triangulate_ = function(list, rtree) {\n  let ccw = false;\n  let simple = this.isSimple_(list, rtree);\n\n  // Start clipping ears\n  while (list.getLength() > 3) {\n    if (simple) {\n      if (!this.clipEars_(list, rtree, simple, ccw)) {\n        if (!this.classifyPoints_(list, rtree, ccw)) {\n          // Due to the behavior of OL's PIP algorithm, the ear clipping cannot\n          // introduce touching segments. However, the original data may have some.\n          if (!this.resolveSelfIntersections_(list, rtree, true)) {\n            break;\n          }\n        }\n      }\n    } else {\n      if (!this.clipEars_(list, rtree, simple, ccw)) {\n        // We ran out of ears, try to reclassify.\n        if (!this.classifyPoints_(list, rtree, ccw)) {\n          // We have a bad polygon, try to resolve local self-intersections.\n          if (!this.resolveSelfIntersections_(list, rtree)) {\n            simple = this.isSimple_(list, rtree);\n            if (!simple) {\n              // We have a really bad polygon, try more time consuming methods.\n              this.splitPolygon_(list, rtree);\n              break;\n            } else {\n              ccw = !this.isClockwise_(list);\n              this.classifyPoints_(list, rtree, ccw);\n            }\n          }\n        }\n      }\n    }\n  }\n  if (list.getLength() === 3) {\n    let numIndices = this.indices.length;\n    this.indices[numIndices++] = list.getPrevItem().p0.i;\n    this.indices[numIndices++] = list.getCurrItem().p0.i;\n    this.indices[numIndices++] = list.getNextItem().p0.i;\n  }\n};\n\n\n/**\n * @private\n * @param {module:ol/structs/LinkedList} list Linked list of the polygon.\n * @param {module:ol/structs/RBush} rtree R-Tree of the polygon.\n * @param {boolean} simple The polygon is simple.\n * @param {boolean} ccw Orientation of the polygon is counter-clockwise.\n * @return {boolean} There were processed ears.\n */\nWebGLPolygonReplay.prototype.clipEars_ = function(list, rtree, simple, ccw) {\n  let numIndices = this.indices.length;\n  let start = list.firstItem();\n  let s0 = list.getPrevItem();\n  let s1 = start;\n  let s2 = list.nextItem();\n  let s3 = list.getNextItem();\n  let p0, p1, p2;\n  let processedEars = false;\n  do {\n    p0 = s1.p0;\n    p1 = s1.p1;\n    p2 = s2.p1;\n    if (p1.reflex === false) {\n      // We might have a valid ear\n      let variableCriterion;\n      if (simple) {\n        variableCriterion = this.getPointsInTriangle_(p0, p1, p2, rtree, true).length === 0;\n      } else {\n        variableCriterion = ccw ? this.diagonalIsInside_(s3.p1, p2, p1, p0,\n          s0.p0) : this.diagonalIsInside_(s0.p0, p0, p1, p2, s3.p1);\n      }\n      if ((simple || this.getIntersections_({p0: p0, p1: p2}, rtree).length === 0) &&\n          variableCriterion) {\n        //The diagonal is completely inside the polygon\n        if (simple || p0.reflex === false || p2.reflex === false ||\n            linearRingIsClockwise([s0.p0.x, s0.p0.y, p0.x,\n              p0.y, p1.x, p1.y, p2.x, p2.y, s3.p1.x, s3.p1.y], 0, 10, 2) === !ccw) {\n          //The diagonal is persumably valid, we have an ear\n          this.indices[numIndices++] = p0.i;\n          this.indices[numIndices++] = p1.i;\n          this.indices[numIndices++] = p2.i;\n          this.removeItem_(s1, s2, list, rtree);\n          if (s2 === start) {\n            start = s3;\n          }\n          processedEars = true;\n        }\n      }\n    }\n    // Else we have a reflex point.\n    s0 = list.getPrevItem();\n    s1 = list.getCurrItem();\n    s2 = list.nextItem();\n    s3 = list.getNextItem();\n  } while (s1 !== start && list.getLength() > 3);\n\n  return processedEars;\n};\n\n\n/**\n * @private\n * @param {module:ol/structs/LinkedList} list Linked list of the polygon.\n * @param {module:ol/structs/RBush} rtree R-Tree of the polygon.\n * @param {boolean=} opt_touch Resolve touching segments.\n * @return {boolean} There were resolved intersections.\n*/\nWebGLPolygonReplay.prototype.resolveSelfIntersections_ = function(\n  list, rtree, opt_touch) {\n  const start = list.firstItem();\n  list.nextItem();\n  let s0 = start;\n  let s1 = list.nextItem();\n  let resolvedIntersections = false;\n\n  do {\n    const intersection = this.calculateIntersection_(s0.p0, s0.p1, s1.p0, s1.p1,\n      opt_touch);\n    if (intersection) {\n      let breakCond = false;\n      const numVertices = this.vertices.length;\n      let numIndices = this.indices.length;\n      const n = numVertices / 2;\n      const seg = list.prevItem();\n      list.removeItem();\n      rtree.remove(seg);\n      breakCond = (seg === start);\n      let p;\n      if (opt_touch) {\n        if (intersection[0] === s0.p0.x && intersection[1] === s0.p0.y) {\n          list.prevItem();\n          p = s0.p0;\n          s1.p0 = p;\n          rtree.remove(s0);\n          breakCond = breakCond || (s0 === start);\n        } else {\n          p = s1.p1;\n          s0.p1 = p;\n          rtree.remove(s1);\n          breakCond = breakCond || (s1 === start);\n        }\n        list.removeItem();\n      } else {\n        p = this.createPoint_(intersection[0], intersection[1], n);\n        s0.p1 = p;\n        s1.p0 = p;\n        rtree.update([Math.min(s0.p0.x, s0.p1.x), Math.min(s0.p0.y, s0.p1.y),\n          Math.max(s0.p0.x, s0.p1.x), Math.max(s0.p0.y, s0.p1.y)], s0);\n        rtree.update([Math.min(s1.p0.x, s1.p1.x), Math.min(s1.p0.y, s1.p1.y),\n          Math.max(s1.p0.x, s1.p1.x), Math.max(s1.p0.y, s1.p1.y)], s1);\n      }\n\n      this.indices[numIndices++] = seg.p0.i;\n      this.indices[numIndices++] = seg.p1.i;\n      this.indices[numIndices++] = p.i;\n\n      resolvedIntersections = true;\n      if (breakCond) {\n        break;\n      }\n    }\n\n    s0 = list.getPrevItem();\n    s1 = list.nextItem();\n  } while (s0 !== start);\n  return resolvedIntersections;\n};\n\n\n/**\n * @private\n * @param {module:ol/structs/LinkedList} list Linked list of the polygon.\n * @param {module:ol/structs/RBush} rtree R-Tree of the polygon.\n * @return {boolean} The polygon is simple.\n */\nWebGLPolygonReplay.prototype.isSimple_ = function(list, rtree) {\n  const start = list.firstItem();\n  let seg = start;\n  do {\n    if (this.getIntersections_(seg, rtree).length) {\n      return false;\n    }\n    seg = list.nextItem();\n  } while (seg !== start);\n  return true;\n};\n\n\n/**\n * @private\n * @param {module:ol/structs/LinkedList} list Linked list of the polygon.\n * @return {boolean} Orientation is clockwise.\n */\nWebGLPolygonReplay.prototype.isClockwise_ = function(list) {\n  const length = list.getLength() * 2;\n  const flatCoordinates = new Array(length);\n  const start = list.firstItem();\n  let seg = start;\n  let i = 0;\n  do {\n    flatCoordinates[i++] = seg.p0.x;\n    flatCoordinates[i++] = seg.p0.y;\n    seg = list.nextItem();\n  } while (seg !== start);\n  return linearRingIsClockwise(flatCoordinates, 0, length, 2);\n};\n\n\n/**\n * @private\n * @param {module:ol/structs/LinkedList} list Linked list of the polygon.\n * @param {module:ol/structs/RBush} rtree R-Tree of the polygon.\n */\nWebGLPolygonReplay.prototype.splitPolygon_ = function(list, rtree) {\n  const start = list.firstItem();\n  let s0 = start;\n  do {\n    const intersections = this.getIntersections_(s0, rtree);\n    if (intersections.length) {\n      const s1 = intersections[0];\n      const n = this.vertices.length / 2;\n      const intersection = this.calculateIntersection_(s0.p0,\n        s0.p1, s1.p0, s1.p1);\n      const p = this.createPoint_(intersection[0], intersection[1], n);\n      const newPolygon = new LinkedList();\n      const newRtree = new RBush();\n      this.insertItem_(p, s0.p1, newPolygon, newRtree);\n      s0.p1 = p;\n      rtree.update([Math.min(s0.p0.x, p.x), Math.min(s0.p0.y, p.y),\n        Math.max(s0.p0.x, p.x), Math.max(s0.p0.y, p.y)], s0);\n      let currItem = list.nextItem();\n      while (currItem !== s1) {\n        this.insertItem_(currItem.p0, currItem.p1, newPolygon, newRtree);\n        rtree.remove(currItem);\n        list.removeItem();\n        currItem = list.getCurrItem();\n      }\n      this.insertItem_(s1.p0, p, newPolygon, newRtree);\n      s1.p0 = p;\n      rtree.update([Math.min(s1.p1.x, p.x), Math.min(s1.p1.y, p.y),\n        Math.max(s1.p1.x, p.x), Math.max(s1.p1.y, p.y)], s1);\n      this.classifyPoints_(list, rtree, false);\n      this.triangulate_(list, rtree);\n      this.classifyPoints_(newPolygon, newRtree, false);\n      this.triangulate_(newPolygon, newRtree);\n      break;\n    }\n    s0 = list.nextItem();\n  } while (s0 !== start);\n};\n\n\n/**\n * @private\n * @param {number} x X coordinate.\n * @param {number} y Y coordinate.\n * @param {number} i Index.\n * @return {module:ol/render/webgl/PolygonReplay~PolygonVertex} List item.\n */\nWebGLPolygonReplay.prototype.createPoint_ = function(x, y, i) {\n  let numVertices = this.vertices.length;\n  this.vertices[numVertices++] = x;\n  this.vertices[numVertices++] = y;\n  /** @type {module:ol/render/webgl/PolygonReplay~PolygonVertex} */\n  const p = {\n    x: x,\n    y: y,\n    i: i,\n    reflex: undefined\n  };\n  return p;\n};\n\n\n/**\n * @private\n * @param {module:ol/render/webgl/PolygonReplay~PolygonVertex} p0 First point of segment.\n * @param {module:ol/render/webgl/PolygonReplay~PolygonVertex} p1 Second point of segment.\n * @param {module:ol/structs/LinkedList} list Polygon ring.\n * @param {module:ol/structs/RBush=} opt_rtree Insert the segment into the R-Tree.\n * @return {module:ol/render/webgl/PolygonReplay~PolygonSegment} segment.\n */\nWebGLPolygonReplay.prototype.insertItem_ = function(p0, p1, list, opt_rtree) {\n  const seg = {\n    p0: p0,\n    p1: p1\n  };\n  list.insertItem(seg);\n  if (opt_rtree) {\n    opt_rtree.insert([Math.min(p0.x, p1.x), Math.min(p0.y, p1.y),\n      Math.max(p0.x, p1.x), Math.max(p0.y, p1.y)], seg);\n  }\n  return seg;\n};\n\n\n/**\n  * @private\n  * @param {module:ol/render/webgl/PolygonReplay~PolygonSegment} s0 Segment before the remove candidate.\n  * @param {module:ol/render/webgl/PolygonReplay~PolygonSegment} s1 Remove candidate segment.\n  * @param {module:ol/structs/LinkedList} list Polygon ring.\n  * @param {module:ol/structs/RBush} rtree R-Tree of the polygon.\n  */\nWebGLPolygonReplay.prototype.removeItem_ = function(s0, s1, list, rtree) {\n  if (list.getCurrItem() === s1) {\n    list.removeItem();\n    s0.p1 = s1.p1;\n    rtree.remove(s1);\n    rtree.update([Math.min(s0.p0.x, s0.p1.x), Math.min(s0.p0.y, s0.p1.y),\n      Math.max(s0.p0.x, s0.p1.x), Math.max(s0.p0.y, s0.p1.y)], s0);\n  }\n};\n\n\n/**\n * @private\n * @param {module:ol/render/webgl/PolygonReplay~PolygonVertex} p0 First point.\n * @param {module:ol/render/webgl/PolygonReplay~PolygonVertex} p1 Second point.\n * @param {module:ol/render/webgl/PolygonReplay~PolygonVertex} p2 Third point.\n * @param {module:ol/structs/RBush} rtree R-Tree of the polygon.\n * @param {boolean=} opt_reflex Only include reflex points.\n * @return {Array.<module:ol/render/webgl/PolygonReplay~PolygonVertex>} Points in the triangle.\n */\nWebGLPolygonReplay.prototype.getPointsInTriangle_ = function(p0, p1, p2, rtree, opt_reflex) {\n  const result = [];\n  const segmentsInExtent = rtree.getInExtent([Math.min(p0.x, p1.x, p2.x),\n    Math.min(p0.y, p1.y, p2.y), Math.max(p0.x, p1.x, p2.x), Math.max(p0.y,\n      p1.y, p2.y)]);\n  for (let i = 0, ii = segmentsInExtent.length; i < ii; ++i) {\n    for (const j in segmentsInExtent[i]) {\n      const p = segmentsInExtent[i][j];\n      if (typeof p === 'object' && (!opt_reflex || p.reflex)) {\n        if ((p.x !== p0.x || p.y !== p0.y) && (p.x !== p1.x || p.y !== p1.y) &&\n            (p.x !== p2.x || p.y !== p2.y) && result.indexOf(p) === -1 &&\n            linearRingContainsXY([p0.x, p0.y, p1.x, p1.y, p2.x, p2.y], 0, 6, 2, p.x, p.y)) {\n          result.push(p);\n        }\n      }\n    }\n  }\n  return result;\n};\n\n\n/**\n * @private\n * @param {module:ol/render/webgl/PolygonReplay~PolygonSegment} segment Segment.\n * @param {module:ol/structs/RBush} rtree R-Tree of the polygon.\n * @param {boolean=} opt_touch Touching segments should be considered an intersection.\n * @return {Array.<module:ol/render/webgl/PolygonReplay~PolygonSegment>} Intersecting segments.\n */\nWebGLPolygonReplay.prototype.getIntersections_ = function(segment, rtree, opt_touch) {\n  const p0 = segment.p0;\n  const p1 = segment.p1;\n  const segmentsInExtent = rtree.getInExtent([Math.min(p0.x, p1.x),\n    Math.min(p0.y, p1.y), Math.max(p0.x, p1.x), Math.max(p0.y, p1.y)]);\n  const result = [];\n  for (let i = 0, ii = segmentsInExtent.length; i < ii; ++i) {\n    const currSeg = segmentsInExtent[i];\n    if (segment !== currSeg && (opt_touch || currSeg.p0 !== p1 || currSeg.p1 !== p0) &&\n        this.calculateIntersection_(p0, p1, currSeg.p0, currSeg.p1, opt_touch)) {\n      result.push(currSeg);\n    }\n  }\n  return result;\n};\n\n\n/**\n * Line intersection algorithm by Paul Bourke.\n * @see http://paulbourke.net/geometry/pointlineplane/\n *\n * @private\n * @param {module:ol/render/webgl/PolygonReplay~PolygonVertex} p0 First point.\n * @param {module:ol/render/webgl/PolygonReplay~PolygonVertex} p1 Second point.\n * @param {module:ol/render/webgl/PolygonReplay~PolygonVertex} p2 Third point.\n * @param {module:ol/render/webgl/PolygonReplay~PolygonVertex} p3 Fourth point.\n * @param {boolean=} opt_touch Touching segments should be considered an intersection.\n * @return {Array.<number>|undefined} Intersection coordinates.\n */\nWebGLPolygonReplay.prototype.calculateIntersection_ = function(p0, p1, p2, p3, opt_touch) {\n  const denom = (p3.y - p2.y) * (p1.x - p0.x) - (p3.x - p2.x) * (p1.y - p0.y);\n  if (denom !== 0) {\n    const ua = ((p3.x - p2.x) * (p0.y - p2.y) - (p3.y - p2.y) * (p0.x - p2.x)) / denom;\n    const ub = ((p1.x - p0.x) * (p0.y - p2.y) - (p1.y - p0.y) * (p0.x - p2.x)) / denom;\n    if ((!opt_touch && ua > EPSILON && ua < 1 - EPSILON &&\n        ub > EPSILON && ub < 1 - EPSILON) || (opt_touch &&\n        ua >= 0 && ua <= 1 && ub >= 0 && ub <= 1)) {\n      return [p0.x + ua * (p1.x - p0.x), p0.y + ua * (p1.y - p0.y)];\n    }\n  }\n  return undefined;\n};\n\n\n/**\n * @private\n * @param {module:ol/render/webgl/PolygonReplay~PolygonVertex} p0 Point before the start of the diagonal.\n * @param {module:ol/render/webgl/PolygonReplay~PolygonVertex} p1 Start point of the diagonal.\n * @param {module:ol/render/webgl/PolygonReplay~PolygonVertex} p2 Ear candidate.\n * @param {module:ol/render/webgl/PolygonReplay~PolygonVertex} p3 End point of the diagonal.\n * @param {module:ol/render/webgl/PolygonReplay~PolygonVertex} p4 Point after the end of the diagonal.\n * @return {boolean} Diagonal is inside the polygon.\n */\nWebGLPolygonReplay.prototype.diagonalIsInside_ = function(p0, p1, p2, p3, p4) {\n  if (p1.reflex === undefined || p3.reflex === undefined) {\n    return false;\n  }\n  const p1IsLeftOf = (p2.x - p3.x) * (p1.y - p3.y) > (p2.y - p3.y) * (p1.x - p3.x);\n  const p1IsRightOf = (p4.x - p3.x) * (p1.y - p3.y) < (p4.y - p3.y) * (p1.x - p3.x);\n  const p3IsLeftOf = (p0.x - p1.x) * (p3.y - p1.y) > (p0.y - p1.y) * (p3.x - p1.x);\n  const p3IsRightOf = (p2.x - p1.x) * (p3.y - p1.y) < (p2.y - p1.y) * (p3.x - p1.x);\n  const p1InCone = p3.reflex ? p1IsRightOf || p1IsLeftOf : p1IsRightOf && p1IsLeftOf;\n  const p3InCone = p1.reflex ? p3IsRightOf || p3IsLeftOf : p3IsRightOf && p3IsLeftOf;\n  return p1InCone && p3InCone;\n};\n\n\n/**\n * @inheritDoc\n */\nWebGLPolygonReplay.prototype.drawMultiPolygon = function(multiPolygonGeometry, feature) {\n  const endss = multiPolygonGeometry.getEndss();\n  const stride = multiPolygonGeometry.getStride();\n  const currIndex = this.indices.length;\n  const currLineIndex = this.lineStringReplay.getCurrentIndex();\n  const flatCoordinates = multiPolygonGeometry.getFlatCoordinates();\n  let i, ii, j, jj;\n  let start = 0;\n  for (i = 0, ii = endss.length; i < ii; ++i) {\n    const ends = endss[i];\n    if (ends.length > 0) {\n      const outerRing = translate(flatCoordinates, start, ends[0],\n        stride, -this.origin[0], -this.origin[1]);\n      if (outerRing.length) {\n        const holes = [];\n        let holeFlatCoords;\n        for (j = 1, jj = ends.length; j < jj; ++j) {\n          if (ends[j] !== ends[j - 1]) {\n            holeFlatCoords = translate(flatCoordinates, ends[j - 1],\n              ends[j], stride, -this.origin[0], -this.origin[1]);\n            holes.push(holeFlatCoords);\n          }\n        }\n        this.lineStringReplay.drawPolygonCoordinates(outerRing, holes, stride);\n        this.drawCoordinates_(outerRing, holes, stride);\n      }\n    }\n    start = ends[ends.length - 1];\n  }\n  if (this.indices.length > currIndex) {\n    this.startIndices.push(currIndex);\n    this.startIndicesFeature.push(feature);\n    if (this.state_.changed) {\n      this.styleIndices_.push(currIndex);\n      this.state_.changed = false;\n    }\n  }\n  if (this.lineStringReplay.getCurrentIndex() > currLineIndex) {\n    this.lineStringReplay.setPolygonStyle(feature, currLineIndex);\n  }\n};\n\n\n/**\n * @inheritDoc\n */\nWebGLPolygonReplay.prototype.drawPolygon = function(polygonGeometry, feature) {\n  const ends = polygonGeometry.getEnds();\n  const stride = polygonGeometry.getStride();\n  if (ends.length > 0) {\n    const flatCoordinates = polygonGeometry.getFlatCoordinates().map(Number);\n    const outerRing = translate(flatCoordinates, 0, ends[0],\n      stride, -this.origin[0], -this.origin[1]);\n    if (outerRing.length) {\n      const holes = [];\n      let i, ii, holeFlatCoords;\n      for (i = 1, ii = ends.length; i < ii; ++i) {\n        if (ends[i] !== ends[i - 1]) {\n          holeFlatCoords = translate(flatCoordinates, ends[i - 1],\n            ends[i], stride, -this.origin[0], -this.origin[1]);\n          holes.push(holeFlatCoords);\n        }\n      }\n\n      this.startIndices.push(this.indices.length);\n      this.startIndicesFeature.push(feature);\n      if (this.state_.changed) {\n        this.styleIndices_.push(this.indices.length);\n        this.state_.changed = false;\n      }\n      this.lineStringReplay.setPolygonStyle(feature);\n\n      this.lineStringReplay.drawPolygonCoordinates(outerRing, holes, stride);\n      this.drawCoordinates_(outerRing, holes, stride);\n    }\n  }\n};\n\n\n/**\n * @inheritDoc\n **/\nWebGLPolygonReplay.prototype.finish = function(context) {\n  // create, bind, and populate the vertices buffer\n  this.verticesBuffer = new WebGLBuffer(this.vertices);\n\n  // create, bind, and populate the indices buffer\n  this.indicesBuffer = new WebGLBuffer(this.indices);\n\n  this.startIndices.push(this.indices.length);\n\n  this.lineStringReplay.finish(context);\n\n  //Clean up, if there is nothing to draw\n  if (this.styleIndices_.length === 0 && this.styles_.length > 0) {\n    this.styles_ = [];\n  }\n\n  this.vertices = null;\n  this.indices = null;\n};\n\n\n/**\n * @inheritDoc\n */\nWebGLPolygonReplay.prototype.getDeleteResourcesFunction = function(context) {\n  const verticesBuffer = this.verticesBuffer;\n  const indicesBuffer = this.indicesBuffer;\n  const lineDeleter = this.lineStringReplay.getDeleteResourcesFunction(context);\n  return function() {\n    context.deleteBuffer(verticesBuffer);\n    context.deleteBuffer(indicesBuffer);\n    lineDeleter();\n  };\n};\n\n\n/**\n * @inheritDoc\n */\nWebGLPolygonReplay.prototype.setUpProgram = function(gl, context, size, pixelRatio) {\n  // get the program\n  const program = context.getProgram(fragment, vertex);\n\n  // get the locations\n  let locations;\n  if (!this.defaultLocations_) {\n    locations = new Locations(gl, program);\n    this.defaultLocations_ = locations;\n  } else {\n    locations = this.defaultLocations_;\n  }\n\n  context.useProgram(program);\n\n  // enable the vertex attrib arrays\n  gl.enableVertexAttribArray(locations.a_position);\n  gl.vertexAttribPointer(locations.a_position, 2, FLOAT,\n    false, 8, 0);\n\n  return locations;\n};\n\n\n/**\n * @inheritDoc\n */\nWebGLPolygonReplay.prototype.shutDownProgram = function(gl, locations) {\n  gl.disableVertexAttribArray(locations.a_position);\n};\n\n\n/**\n * @inheritDoc\n */\nWebGLPolygonReplay.prototype.drawReplay = function(gl, context, skippedFeaturesHash, hitDetection) {\n  //Save GL parameters.\n  const tmpDepthFunc = /** @type {number} */ (gl.getParameter(gl.DEPTH_FUNC));\n  const tmpDepthMask = /** @type {boolean} */ (gl.getParameter(gl.DEPTH_WRITEMASK));\n\n  if (!hitDetection) {\n    gl.enable(gl.DEPTH_TEST);\n    gl.depthMask(true);\n    gl.depthFunc(gl.NOTEQUAL);\n  }\n\n  if (!isEmpty(skippedFeaturesHash)) {\n    this.drawReplaySkipping_(gl, context, skippedFeaturesHash);\n  } else {\n    //Draw by style groups to minimize drawElements() calls.\n    let i, start, end, nextStyle;\n    end = this.startIndices[this.startIndices.length - 1];\n    for (i = this.styleIndices_.length - 1; i >= 0; --i) {\n      start = this.styleIndices_[i];\n      nextStyle = this.styles_[i];\n      this.setFillStyle_(gl, nextStyle);\n      this.drawElements(gl, context, start, end);\n      end = start;\n    }\n  }\n  if (!hitDetection) {\n    gl.disable(gl.DEPTH_TEST);\n    gl.clear(gl.DEPTH_BUFFER_BIT);\n    //Restore GL parameters.\n    gl.depthMask(tmpDepthMask);\n    gl.depthFunc(tmpDepthFunc);\n  }\n};\n\n\n/**\n * @inheritDoc\n */\nWebGLPolygonReplay.prototype.drawHitDetectionReplayOneByOne = function(gl, context, skippedFeaturesHash,\n  featureCallback, opt_hitExtent) {\n  let i, start, end, nextStyle, groupStart, feature, featureUid, featureIndex;\n  featureIndex = this.startIndices.length - 2;\n  end = this.startIndices[featureIndex + 1];\n  for (i = this.styleIndices_.length - 1; i >= 0; --i) {\n    nextStyle = this.styles_[i];\n    this.setFillStyle_(gl, nextStyle);\n    groupStart = this.styleIndices_[i];\n\n    while (featureIndex >= 0 &&\n        this.startIndices[featureIndex] >= groupStart) {\n      start = this.startIndices[featureIndex];\n      feature = this.startIndicesFeature[featureIndex];\n      featureUid = getUid(feature).toString();\n\n      if (skippedFeaturesHash[featureUid] === undefined &&\n          feature.getGeometry() &&\n          (opt_hitExtent === undefined || intersects(\n            /** @type {Array<number>} */ (opt_hitExtent),\n            feature.getGeometry().getExtent()))) {\n        gl.clear(gl.COLOR_BUFFER_BIT | gl.DEPTH_BUFFER_BIT);\n        this.drawElements(gl, context, start, end);\n\n        const result = featureCallback(feature);\n\n        if (result) {\n          return result;\n        }\n\n      }\n      featureIndex--;\n      end = start;\n    }\n  }\n  return undefined;\n};\n\n\n/**\n * @private\n * @param {WebGLRenderingContext} gl gl.\n * @param {module:ol/webgl/Context} context Context.\n * @param {Object} skippedFeaturesHash Ids of features to skip.\n */\nWebGLPolygonReplay.prototype.drawReplaySkipping_ = function(gl, context, skippedFeaturesHash) {\n  let i, start, end, nextStyle, groupStart, feature, featureUid, featureIndex, featureStart;\n  featureIndex = this.startIndices.length - 2;\n  end = start = this.startIndices[featureIndex + 1];\n  for (i = this.styleIndices_.length - 1; i >= 0; --i) {\n    nextStyle = this.styles_[i];\n    this.setFillStyle_(gl, nextStyle);\n    groupStart = this.styleIndices_[i];\n\n    while (featureIndex >= 0 &&\n        this.startIndices[featureIndex] >= groupStart) {\n      featureStart = this.startIndices[featureIndex];\n      feature = this.startIndicesFeature[featureIndex];\n      featureUid = getUid(feature).toString();\n\n      if (skippedFeaturesHash[featureUid]) {\n        if (start !== end) {\n          this.drawElements(gl, context, start, end);\n          gl.clear(gl.DEPTH_BUFFER_BIT);\n        }\n        end = featureStart;\n      }\n      featureIndex--;\n      start = featureStart;\n    }\n    if (start !== end) {\n      this.drawElements(gl, context, start, end);\n      gl.clear(gl.DEPTH_BUFFER_BIT);\n    }\n    start = end = groupStart;\n  }\n};\n\n\n/**\n * @private\n * @param {WebGLRenderingContext} gl gl.\n * @param {Array.<number>} color Color.\n */\nWebGLPolygonReplay.prototype.setFillStyle_ = function(gl, color) {\n  gl.uniform4fv(this.defaultLocations_.u_color, color);\n};\n\n\n/**\n * @inheritDoc\n */\nWebGLPolygonReplay.prototype.setFillStrokeStyle = function(fillStyle, strokeStyle) {\n  let fillStyleColor = fillStyle ? fillStyle.getColor() : [0, 0, 0, 0];\n  if (!(fillStyleColor instanceof CanvasGradient) &&\n      !(fillStyleColor instanceof CanvasPattern)) {\n    fillStyleColor = asArray(fillStyleColor).map(function(c, i) {\n      return i != 3 ? c / 255 : c;\n    }) || DEFAULT_FILLSTYLE;\n  } else {\n    fillStyleColor = DEFAULT_FILLSTYLE;\n  }\n  if (!this.state_.fillColor || !equals(fillStyleColor, this.state_.fillColor)) {\n    this.state_.fillColor = fillStyleColor;\n    this.state_.changed = true;\n    this.styles_.push(fillStyleColor);\n  }\n  //Provide a null stroke style, if no strokeStyle is provided. Required for the draw interaction to work.\n  if (strokeStyle) {\n    this.lineStringReplay.setFillStrokeStyle(null, strokeStyle);\n  } else {\n    const nullStrokeStyle = new Stroke({\n      color: [0, 0, 0, 0],\n      lineWidth: 0\n    });\n    this.lineStringReplay.setFillStrokeStyle(null, nullStrokeStyle);\n  }\n};\nexport default WebGLPolygonReplay;\n","/**\n * @module ol/render/webgl/TextReplay\n */\nimport {getUid, inherits} from '../../util.js';\nimport {asColorLike} from '../../colorlike.js';\nimport {createCanvasContext2D} from '../../dom.js';\nimport GeometryType from '../../geom/GeometryType.js';\nimport {CANVAS_LINE_DASH} from '../../has.js';\nimport {TEXT_ALIGN} from '../replay.js';\nimport {DEFAULT_FILLSTYLE, DEFAULT_FONT, DEFAULT_LINECAP, DEFAULT_LINEDASH,\n  DEFAULT_LINEDASHOFFSET, DEFAULT_LINEJOIN, DEFAULT_LINEWIDTH, DEFAULT_MITERLIMIT,\n  DEFAULT_STROKESTYLE, DEFAULT_TEXTALIGN, DEFAULT_TEXTBASELINE} from '../webgl.js';\nimport WebGLTextureReplay from '../webgl/TextureReplay.js';\nimport AtlasManager from '../../style/AtlasManager.js';\nimport WebGLBuffer from '../../webgl/Buffer.js';\n\n/**\n * @typedef {Object} GlyphAtlas\n * @property {module:ol/style/AtlasManager} atlas\n * @property {Object.<string, number>} width\n * @property {number} height\n */\n\n\n/**\n * @constructor\n * @extends {module:ol/render/webgl/TextureReplay}\n * @param {number} tolerance Tolerance.\n * @param {module:ol/extent~Extent} maxExtent Max extent.\n * @struct\n */\nconst WebGLTextReplay = function(tolerance, maxExtent) {\n  WebGLTextureReplay.call(this, tolerance, maxExtent);\n\n  /**\n   * @private\n   * @type {Array.<HTMLCanvasElement>}\n   */\n  this.images_ = [];\n\n  /**\n   * @private\n   * @type {Array.<WebGLTexture>}\n   */\n  this.textures_ = [];\n\n  /**\n   * @private\n   * @type {HTMLCanvasElement}\n   */\n  this.measureCanvas_ = createCanvasContext2D(0, 0).canvas;\n\n  /**\n   * @private\n   * @type {{strokeColor: (module:ol/colorlike~ColorLike|null),\n   *         lineCap: (string|undefined),\n   *         lineDash: Array.<number>,\n   *         lineDashOffset: (number|undefined),\n   *         lineJoin: (string|undefined),\n   *         lineWidth: number,\n   *         miterLimit: (number|undefined),\n   *         fillColor: (module:ol/colorlike~ColorLike|null),\n   *         font: (string|undefined),\n   *         scale: (number|undefined)}}\n   */\n  this.state_ = {\n    strokeColor: null,\n    lineCap: undefined,\n    lineDash: null,\n    lineDashOffset: undefined,\n    lineJoin: undefined,\n    lineWidth: 0,\n    miterLimit: undefined,\n    fillColor: null,\n    font: undefined,\n    scale: undefined\n  };\n\n  /**\n   * @private\n   * @type {string}\n   */\n  this.text_ = '';\n\n  /**\n   * @private\n   * @type {number|undefined}\n   */\n  this.textAlign_ = undefined;\n\n  /**\n   * @private\n   * @type {number|undefined}\n   */\n  this.textBaseline_ = undefined;\n\n  /**\n   * @private\n   * @type {number|undefined}\n   */\n  this.offsetX_ = undefined;\n\n  /**\n   * @private\n   * @type {number|undefined}\n   */\n  this.offsetY_ = undefined;\n\n  /**\n   * @private\n   * @type {Object.<string, module:ol/render/webgl/TextReplay~GlyphAtlas>}\n   */\n  this.atlases_ = {};\n\n  /**\n   * @private\n   * @type {module:ol/render/webgl/TextReplay~GlyphAtlas|undefined}\n   */\n  this.currAtlas_ = undefined;\n\n  this.scale = 1;\n\n  this.opacity = 1;\n\n};\n\ninherits(WebGLTextReplay, WebGLTextureReplay);\n\n\n/**\n * @inheritDoc\n */\nWebGLTextReplay.prototype.drawText = function(geometry, feature) {\n  if (this.text_) {\n    let flatCoordinates = null;\n    const offset = 0;\n    let end = 2;\n    let stride = 2;\n    switch (geometry.getType()) {\n      case GeometryType.POINT:\n      case GeometryType.MULTI_POINT:\n        flatCoordinates = geometry.getFlatCoordinates();\n        end = flatCoordinates.length;\n        stride = geometry.getStride();\n        break;\n      case GeometryType.CIRCLE:\n        flatCoordinates = /** @type {module:ol/geom/Circle} */ (geometry).getCenter();\n        break;\n      case GeometryType.LINE_STRING:\n        flatCoordinates = /** @type {module:ol/geom/LineString} */ (geometry).getFlatMidpoint();\n        break;\n      case GeometryType.MULTI_LINE_STRING:\n        flatCoordinates = /** @type {module:ol/geom/MultiLineString} */ (geometry).getFlatMidpoints();\n        end = flatCoordinates.length;\n        break;\n      case GeometryType.POLYGON:\n        flatCoordinates = /** @type {module:ol/geom/Polygon} */ (geometry).getFlatInteriorPoint();\n        break;\n      case GeometryType.MULTI_POLYGON:\n        flatCoordinates = /** @type {module:ol/geom/MultiPolygon} */ (geometry).getFlatInteriorPoints();\n        end = flatCoordinates.length;\n        break;\n      default:\n    }\n    this.startIndices.push(this.indices.length);\n    this.startIndicesFeature.push(feature);\n\n    const glyphAtlas = this.currAtlas_;\n    const lines = this.text_.split('\\n');\n    const textSize = this.getTextSize_(lines);\n    let i, ii, j, jj, currX, currY, charArr, charInfo;\n    const anchorX = Math.round(textSize[0] * this.textAlign_ - this.offsetX_);\n    const anchorY = Math.round(textSize[1] * this.textBaseline_ - this.offsetY_);\n    const lineWidth = (this.state_.lineWidth / 2) * this.state_.scale;\n\n    for (i = 0, ii = lines.length; i < ii; ++i) {\n      currX = 0;\n      currY = glyphAtlas.height * i;\n      charArr = lines[i].split('');\n\n      for (j = 0, jj = charArr.length; j < jj; ++j) {\n        charInfo = glyphAtlas.atlas.getInfo(charArr[j]);\n\n        if (charInfo) {\n          const image = charInfo.image;\n\n          this.anchorX = anchorX - currX;\n          this.anchorY = anchorY - currY;\n          this.originX = j === 0 ? charInfo.offsetX - lineWidth : charInfo.offsetX;\n          this.originY = charInfo.offsetY;\n          this.height = glyphAtlas.height;\n          this.width = j === 0 || j === charArr.length - 1 ?\n            glyphAtlas.width[charArr[j]] + lineWidth : glyphAtlas.width[charArr[j]];\n          this.imageHeight = image.height;\n          this.imageWidth = image.width;\n\n          if (this.images_.length === 0) {\n            this.images_.push(image);\n          } else {\n            const currentImage = this.images_[this.images_.length - 1];\n            if (getUid(currentImage) != getUid(image)) {\n              this.groupIndices.push(this.indices.length);\n              this.images_.push(image);\n            }\n          }\n\n          this.drawText_(flatCoordinates, offset, end, stride);\n        }\n        currX += this.width;\n      }\n    }\n  }\n};\n\n\n/**\n * @private\n * @param {Array.<string>} lines Label to draw split to lines.\n * @return {Array.<number>} Size of the label in pixels.\n */\nWebGLTextReplay.prototype.getTextSize_ = function(lines) {\n  const self = this;\n  const glyphAtlas = this.currAtlas_;\n  const textHeight = lines.length * glyphAtlas.height;\n  //Split every line to an array of chars, sum up their width, and select the longest.\n  const textWidth = lines.map(function(str) {\n    let sum = 0;\n    for (let i = 0, ii = str.length; i < ii; ++i) {\n      const curr = str[i];\n      if (!glyphAtlas.width[curr]) {\n        self.addCharToAtlas_(curr);\n      }\n      sum += glyphAtlas.width[curr] ? glyphAtlas.width[curr] : 0;\n    }\n    return sum;\n  }).reduce(function(max, curr) {\n    return Math.max(max, curr);\n  });\n\n  return [textWidth, textHeight];\n};\n\n\n/**\n * @private\n * @param {Array.<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {number} end End.\n * @param {number} stride Stride.\n */\nWebGLTextReplay.prototype.drawText_ = function(flatCoordinates, offset, end, stride) {\n  for (let i = offset, ii = end; i < ii; i += stride) {\n    this.drawCoordinates(flatCoordinates, offset, end, stride);\n  }\n};\n\n\n/**\n * @private\n * @param {string} char Character.\n */\nWebGLTextReplay.prototype.addCharToAtlas_ = function(char) {\n  if (char.length === 1) {\n    const glyphAtlas = this.currAtlas_;\n    const state = this.state_;\n    const mCtx = this.measureCanvas_.getContext('2d');\n    mCtx.font = state.font;\n    const width = Math.ceil(mCtx.measureText(char).width * state.scale);\n\n    const info = glyphAtlas.atlas.add(char, width, glyphAtlas.height,\n      function(ctx, x, y) {\n        //Parameterize the canvas\n        ctx.font = /** @type {string} */ (state.font);\n        ctx.fillStyle = state.fillColor;\n        ctx.strokeStyle = state.strokeColor;\n        ctx.lineWidth = state.lineWidth;\n        ctx.lineCap = /*** @type {string} */ (state.lineCap);\n        ctx.lineJoin = /** @type {string} */ (state.lineJoin);\n        ctx.miterLimit = /** @type {number} */ (state.miterLimit);\n        ctx.textAlign = 'left';\n        ctx.textBaseline = 'top';\n        if (CANVAS_LINE_DASH && state.lineDash) {\n          //FIXME: use pixelRatio\n          ctx.setLineDash(state.lineDash);\n          ctx.lineDashOffset = /** @type {number} */ (state.lineDashOffset);\n        }\n        if (state.scale !== 1) {\n          //FIXME: use pixelRatio\n          ctx.setTransform(/** @type {number} */ (state.scale), 0, 0,\n            /** @type {number} */ (state.scale), 0, 0);\n        }\n\n        //Draw the character on the canvas\n        if (state.strokeColor) {\n          ctx.strokeText(char, x, y);\n        }\n        if (state.fillColor) {\n          ctx.fillText(char, x, y);\n        }\n      });\n\n    if (info) {\n      glyphAtlas.width[char] = width;\n    }\n  }\n};\n\n\n/**\n * @inheritDoc\n */\nWebGLTextReplay.prototype.finish = function(context) {\n  const gl = context.getGL();\n\n  this.groupIndices.push(this.indices.length);\n  this.hitDetectionGroupIndices = this.groupIndices;\n\n  // create, bind, and populate the vertices buffer\n  this.verticesBuffer = new WebGLBuffer(this.vertices);\n\n  // create, bind, and populate the indices buffer\n  this.indicesBuffer = new WebGLBuffer(this.indices);\n\n  // create textures\n  /** @type {Object.<string, WebGLTexture>} */\n  const texturePerImage = {};\n\n  this.createTextures(this.textures_, this.images_, texturePerImage, gl);\n\n  this.state_ = {\n    strokeColor: null,\n    lineCap: undefined,\n    lineDash: null,\n    lineDashOffset: undefined,\n    lineJoin: undefined,\n    lineWidth: 0,\n    miterLimit: undefined,\n    fillColor: null,\n    font: undefined,\n    scale: undefined\n  };\n  this.text_ = '';\n  this.textAlign_ = undefined;\n  this.textBaseline_ = undefined;\n  this.offsetX_ = undefined;\n  this.offsetY_ = undefined;\n  this.images_ = null;\n  this.atlases_ = {};\n  this.currAtlas_ = undefined;\n  WebGLTextureReplay.prototype.finish.call(this, context);\n};\n\n\n/**\n * @inheritDoc\n */\nWebGLTextReplay.prototype.setTextStyle = function(textStyle) {\n  const state = this.state_;\n  const textFillStyle = textStyle.getFill();\n  const textStrokeStyle = textStyle.getStroke();\n  if (!textStyle || !textStyle.getText() || (!textFillStyle && !textStrokeStyle)) {\n    this.text_ = '';\n  } else {\n    if (!textFillStyle) {\n      state.fillColor = null;\n    } else {\n      const textFillStyleColor = textFillStyle.getColor();\n      state.fillColor = asColorLike(textFillStyleColor ?\n        textFillStyleColor : DEFAULT_FILLSTYLE);\n    }\n    if (!textStrokeStyle) {\n      state.strokeColor = null;\n      state.lineWidth = 0;\n    } else {\n      const textStrokeStyleColor = textStrokeStyle.getColor();\n      state.strokeColor = asColorLike(textStrokeStyleColor ?\n        textStrokeStyleColor : DEFAULT_STROKESTYLE);\n      state.lineWidth = textStrokeStyle.getWidth() || DEFAULT_LINEWIDTH;\n      state.lineCap = textStrokeStyle.getLineCap() || DEFAULT_LINECAP;\n      state.lineDashOffset = textStrokeStyle.getLineDashOffset() || DEFAULT_LINEDASHOFFSET;\n      state.lineJoin = textStrokeStyle.getLineJoin() || DEFAULT_LINEJOIN;\n      state.miterLimit = textStrokeStyle.getMiterLimit() || DEFAULT_MITERLIMIT;\n      const lineDash = textStrokeStyle.getLineDash();\n      state.lineDash = lineDash ? lineDash.slice() : DEFAULT_LINEDASH;\n    }\n    state.font = textStyle.getFont() || DEFAULT_FONT;\n    state.scale = textStyle.getScale() || 1;\n    this.text_ = /** @type {string} */ (textStyle.getText());\n    const textAlign = TEXT_ALIGN[textStyle.getTextAlign()];\n    const textBaseline = TEXT_ALIGN[textStyle.getTextBaseline()];\n    this.textAlign_ = textAlign === undefined ?\n      DEFAULT_TEXTALIGN : textAlign;\n    this.textBaseline_ = textBaseline === undefined ?\n      DEFAULT_TEXTBASELINE : textBaseline;\n    this.offsetX_ = textStyle.getOffsetX() || 0;\n    this.offsetY_ = textStyle.getOffsetY() || 0;\n    this.rotateWithView = !!textStyle.getRotateWithView();\n    this.rotation = textStyle.getRotation() || 0;\n\n    this.currAtlas_ = this.getAtlas_(state);\n  }\n};\n\n\n/**\n * @private\n * @param {Object} state Font attributes.\n * @return {module:ol/render/webgl/TextReplay~GlyphAtlas} Glyph atlas.\n */\nWebGLTextReplay.prototype.getAtlas_ = function(state) {\n  let params = [];\n  for (const i in state) {\n    if (state[i] || state[i] === 0) {\n      if (Array.isArray(state[i])) {\n        params = params.concat(state[i]);\n      } else {\n        params.push(state[i]);\n      }\n    }\n  }\n  const hash = this.calculateHash_(params);\n  if (!this.atlases_[hash]) {\n    const mCtx = this.measureCanvas_.getContext('2d');\n    mCtx.font = state.font;\n    const height = Math.ceil((mCtx.measureText('M').width * 1.5 +\n        state.lineWidth / 2) * state.scale);\n\n    this.atlases_[hash] = {\n      atlas: new AtlasManager({\n        space: state.lineWidth + 1\n      }),\n      width: {},\n      height: height\n    };\n  }\n  return this.atlases_[hash];\n};\n\n\n/**\n * @private\n * @param {Array.<string|number>} params Array of parameters.\n * @return {string} Hash string.\n */\nWebGLTextReplay.prototype.calculateHash_ = function(params) {\n  //TODO: Create a more performant, reliable, general hash function.\n  let hash = '';\n  for (let i = 0, ii = params.length; i < ii; ++i) {\n    hash += params[i];\n  }\n  return hash;\n};\n\n\n/**\n * @inheritDoc\n */\nWebGLTextReplay.prototype.getTextures = function(opt_all) {\n  return this.textures_;\n};\n\n\n/**\n * @inheritDoc\n */\nWebGLTextReplay.prototype.getHitDetectionTextures = function() {\n  return this.textures_;\n};\nexport default WebGLTextReplay;\n","/**\n * @module ol/render/webgl/ReplayGroup\n */\nimport {inherits} from '../../util.js';\nimport {numberSafeCompareFunction} from '../../array.js';\nimport {buffer, createOrUpdateFromCoordinate} from '../../extent.js';\nimport {isEmpty} from '../../obj.js';\nimport {ORDER} from '../replay.js';\nimport ReplayGroup from '../ReplayGroup.js';\nimport WebGLCircleReplay from '../webgl/CircleReplay.js';\nimport WebGLImageReplay from '../webgl/ImageReplay.js';\nimport WebGLLineStringReplay from '../webgl/LineStringReplay.js';\nimport WebGLPolygonReplay from '../webgl/PolygonReplay.js';\nimport WebGLTextReplay from '../webgl/TextReplay.js';\n\n/**\n * @type {Array.<number>}\n */\nconst HIT_DETECTION_SIZE = [1, 1];\n\n/**\n * @type {Object.<module:ol/render/ReplayType,\n *                function(new: module:ol/render/webgl/Replay, number,\n *                module:ol/extent~Extent)>}\n */\nconst BATCH_CONSTRUCTORS = {\n  'Circle': WebGLCircleReplay,\n  'Image': WebGLImageReplay,\n  'LineString': WebGLLineStringReplay,\n  'Polygon': WebGLPolygonReplay,\n  'Text': WebGLTextReplay\n};\n\n\n/**\n * @constructor\n * @extends {module:ol/render/ReplayGroup}\n * @param {number} tolerance Tolerance.\n * @param {module:ol/extent~Extent} maxExtent Max extent.\n * @param {number=} opt_renderBuffer Render buffer.\n * @struct\n */\nconst WebGLReplayGroup = function(tolerance, maxExtent, opt_renderBuffer) {\n  ReplayGroup.call(this);\n\n  /**\n   * @type {module:ol/extent~Extent}\n   * @private\n   */\n  this.maxExtent_ = maxExtent;\n\n  /**\n   * @type {number}\n   * @private\n   */\n  this.tolerance_ = tolerance;\n\n  /**\n   * @type {number|undefined}\n   * @private\n   */\n  this.renderBuffer_ = opt_renderBuffer;\n\n  /**\n   * @private\n   * @type {!Object.<string,\n   *        Object.<module:ol/render/ReplayType, module:ol/render/webgl/Replay>>}\n   */\n  this.replaysByZIndex_ = {};\n\n};\n\ninherits(WebGLReplayGroup, ReplayGroup);\n\n\n/**\n * @param {module:ol/style/Style} style Style.\n * @param {boolean} group Group with previous replay.\n */\nWebGLReplayGroup.prototype.addDeclutter = function(style, group) {};\n\n\n/**\n * @param {module:ol/webgl/Context} context WebGL context.\n * @return {function()} Delete resources function.\n */\nWebGLReplayGroup.prototype.getDeleteResourcesFunction = function(context) {\n  const functions = [];\n  let zKey;\n  for (zKey in this.replaysByZIndex_) {\n    const replays = this.replaysByZIndex_[zKey];\n    for (const replayKey in replays) {\n      functions.push(\n        replays[replayKey].getDeleteResourcesFunction(context));\n    }\n  }\n  return function() {\n    const length = functions.length;\n    let result;\n    for (let i = 0; i < length; i++) {\n      result = functions[i].apply(this, arguments);\n    }\n    return result;\n  };\n};\n\n\n/**\n * @param {module:ol/webgl/Context} context Context.\n */\nWebGLReplayGroup.prototype.finish = function(context) {\n  let zKey;\n  for (zKey in this.replaysByZIndex_) {\n    const replays = this.replaysByZIndex_[zKey];\n    for (const replayKey in replays) {\n      replays[replayKey].finish(context);\n    }\n  }\n};\n\n\n/**\n * @inheritDoc\n */\nWebGLReplayGroup.prototype.getReplay = function(zIndex, replayType) {\n  const zIndexKey = zIndex !== undefined ? zIndex.toString() : '0';\n  let replays = this.replaysByZIndex_[zIndexKey];\n  if (replays === undefined) {\n    replays = {};\n    this.replaysByZIndex_[zIndexKey] = replays;\n  }\n  let replay = replays[replayType];\n  if (replay === undefined) {\n    /**\n     * @type {Function}\n     */\n    const Constructor = BATCH_CONSTRUCTORS[replayType];\n    replay = new Constructor(this.tolerance_, this.maxExtent_);\n    replays[replayType] = replay;\n  }\n  return replay;\n};\n\n\n/**\n * @inheritDoc\n */\nWebGLReplayGroup.prototype.isEmpty = function() {\n  return isEmpty(this.replaysByZIndex_);\n};\n\n\n/**\n * @param {module:ol/webgl/Context} context Context.\n * @param {module:ol/coordinate~Coordinate} center Center.\n * @param {number} resolution Resolution.\n * @param {number} rotation Rotation.\n * @param {module:ol/size~Size} size Size.\n * @param {number} pixelRatio Pixel ratio.\n * @param {number} opacity Global opacity.\n * @param {Object.<string, boolean>} skippedFeaturesHash Ids of features to skip.\n */\nWebGLReplayGroup.prototype.replay = function(context,\n  center, resolution, rotation, size, pixelRatio,\n  opacity, skippedFeaturesHash) {\n  /** @type {Array.<number>} */\n  const zs = Object.keys(this.replaysByZIndex_).map(Number);\n  zs.sort(numberSafeCompareFunction);\n\n  let i, ii, j, jj, replays, replay;\n  for (i = 0, ii = zs.length; i < ii; ++i) {\n    replays = this.replaysByZIndex_[zs[i].toString()];\n    for (j = 0, jj = ORDER.length; j < jj; ++j) {\n      replay = replays[ORDER[j]];\n      if (replay !== undefined) {\n        replay.replay(context,\n          center, resolution, rotation, size, pixelRatio,\n          opacity, skippedFeaturesHash,\n          undefined, false);\n      }\n    }\n  }\n};\n\n\n/**\n * @private\n * @param {module:ol/webgl/Context} context Context.\n * @param {module:ol/coordinate~Coordinate} center Center.\n * @param {number} resolution Resolution.\n * @param {number} rotation Rotation.\n * @param {module:ol/size~Size} size Size.\n * @param {number} pixelRatio Pixel ratio.\n * @param {number} opacity Global opacity.\n * @param {Object.<string, boolean>} skippedFeaturesHash Ids of features to skip.\n * @param {function((module:ol/Feature|module:ol/render/Feature)): T|undefined} featureCallback Feature callback.\n * @param {boolean} oneByOne Draw features one-by-one for the hit-detecion.\n * @param {module:ol/extent~Extent=} opt_hitExtent Hit extent: Only features intersecting\n *  this extent are checked.\n * @return {T|undefined} Callback result.\n * @template T\n */\nWebGLReplayGroup.prototype.replayHitDetection_ = function(context,\n  center, resolution, rotation, size, pixelRatio, opacity,\n  skippedFeaturesHash, featureCallback, oneByOne, opt_hitExtent) {\n  /** @type {Array.<number>} */\n  const zs = Object.keys(this.replaysByZIndex_).map(Number);\n  zs.sort(function(a, b) {\n    return b - a;\n  });\n\n  let i, ii, j, replays, replay, result;\n  for (i = 0, ii = zs.length; i < ii; ++i) {\n    replays = this.replaysByZIndex_[zs[i].toString()];\n    for (j = ORDER.length - 1; j >= 0; --j) {\n      replay = replays[ORDER[j]];\n      if (replay !== undefined) {\n        result = replay.replay(context,\n          center, resolution, rotation, size, pixelRatio, opacity,\n          skippedFeaturesHash, featureCallback, oneByOne, opt_hitExtent);\n        if (result) {\n          return result;\n        }\n      }\n    }\n  }\n  return undefined;\n};\n\n\n/**\n * @param {module:ol/coordinate~Coordinate} coordinate Coordinate.\n * @param {module:ol/webgl/Context} context Context.\n * @param {module:ol/coordinate~Coordinate} center Center.\n * @param {number} resolution Resolution.\n * @param {number} rotation Rotation.\n * @param {module:ol/size~Size} size Size.\n * @param {number} pixelRatio Pixel ratio.\n * @param {number} opacity Global opacity.\n * @param {Object.<string, boolean>} skippedFeaturesHash Ids of features to skip.\n * @param {function((module:ol/Feature|module:ol/render/Feature)): T|undefined} callback Feature callback.\n * @return {T|undefined} Callback result.\n * @template T\n */\nWebGLReplayGroup.prototype.forEachFeatureAtCoordinate = function(\n  coordinate, context, center, resolution, rotation, size, pixelRatio,\n  opacity, skippedFeaturesHash,\n  callback) {\n  const gl = context.getGL();\n  gl.bindFramebuffer(\n    gl.FRAMEBUFFER, context.getHitDetectionFramebuffer());\n\n\n  /**\n   * @type {module:ol/extent~Extent}\n   */\n  let hitExtent;\n  if (this.renderBuffer_ !== undefined) {\n    // build an extent around the coordinate, so that only features that\n    // intersect this extent are checked\n    hitExtent = buffer(createOrUpdateFromCoordinate(coordinate), resolution * this.renderBuffer_);\n  }\n\n  return this.replayHitDetection_(context,\n    coordinate, resolution, rotation, HIT_DETECTION_SIZE,\n    pixelRatio, opacity, skippedFeaturesHash,\n    /**\n     * @param {module:ol/Feature|module:ol/render/Feature} feature Feature.\n     * @return {?} Callback result.\n     */\n    function(feature) {\n      const imageData = new Uint8Array(4);\n      gl.readPixels(0, 0, 1, 1, gl.RGBA, gl.UNSIGNED_BYTE, imageData);\n\n      if (imageData[3] > 0) {\n        const result = callback(feature);\n        if (result) {\n          return result;\n        }\n      }\n    }, true, hitExtent);\n};\n\n\n/**\n * @param {module:ol/coordinate~Coordinate} coordinate Coordinate.\n * @param {module:ol/webgl/Context} context Context.\n * @param {module:ol/coordinate~Coordinate} center Center.\n * @param {number} resolution Resolution.\n * @param {number} rotation Rotation.\n * @param {module:ol/size~Size} size Size.\n * @param {number} pixelRatio Pixel ratio.\n * @param {number} opacity Global opacity.\n * @param {Object.<string, boolean>} skippedFeaturesHash Ids of features to skip.\n * @return {boolean} Is there a feature at the given coordinate?\n */\nWebGLReplayGroup.prototype.hasFeatureAtCoordinate = function(\n  coordinate, context, center, resolution, rotation, size, pixelRatio,\n  opacity, skippedFeaturesHash) {\n  const gl = context.getGL();\n  gl.bindFramebuffer(\n    gl.FRAMEBUFFER, context.getHitDetectionFramebuffer());\n\n  const hasFeature = this.replayHitDetection_(context,\n    coordinate, resolution, rotation, HIT_DETECTION_SIZE,\n    pixelRatio, opacity, skippedFeaturesHash,\n    /**\n     * @param {module:ol/Feature|module:ol/render/Feature} feature Feature.\n     * @return {boolean} Is there a feature?\n     */\n    function(feature) {\n      const imageData = new Uint8Array(4);\n      gl.readPixels(0, 0, 1, 1, gl.RGBA, gl.UNSIGNED_BYTE, imageData);\n      return imageData[3] > 0;\n    }, false);\n\n  return hasFeature !== undefined;\n};\n\nexport default WebGLReplayGroup;\n","/**\n * @module ol/render/webgl/Immediate\n */\nimport {inherits} from '../../util.js';\nimport {intersects} from '../../extent.js';\nimport GeometryType from '../../geom/GeometryType.js';\nimport ReplayType from '../ReplayType.js';\nimport VectorContext from '../VectorContext.js';\nimport WebGLReplayGroup from '../webgl/ReplayGroup.js';\n\n/**\n * @constructor\n * @extends {module:ol/render/VectorContext}\n * @param {module:ol/webgl/Context} context Context.\n * @param {module:ol/coordinate~Coordinate} center Center.\n * @param {number} resolution Resolution.\n * @param {number} rotation Rotation.\n * @param {module:ol/size~Size} size Size.\n * @param {module:ol/extent~Extent} extent Extent.\n * @param {number} pixelRatio Pixel ratio.\n * @struct\n */\nconst WebGLImmediateRenderer = function(context, center, resolution, rotation, size, extent, pixelRatio) {\n  VectorContext.call(this);\n\n  /**\n   * @private\n   */\n  this.context_ = context;\n\n  /**\n   * @private\n   */\n  this.center_ = center;\n\n  /**\n   * @private\n   */\n  this.extent_ = extent;\n\n  /**\n   * @private\n   */\n  this.pixelRatio_ = pixelRatio;\n\n  /**\n   * @private\n   */\n  this.size_ = size;\n\n  /**\n   * @private\n   */\n  this.rotation_ = rotation;\n\n  /**\n   * @private\n   */\n  this.resolution_ = resolution;\n\n  /**\n   * @private\n   * @type {module:ol/style/Image}\n   */\n  this.imageStyle_ = null;\n\n  /**\n   * @private\n   * @type {module:ol/style/Fill}\n   */\n  this.fillStyle_ = null;\n\n  /**\n   * @private\n   * @type {module:ol/style/Stroke}\n   */\n  this.strokeStyle_ = null;\n\n  /**\n   * @private\n   * @type {module:ol/style/Text}\n   */\n  this.textStyle_ = null;\n\n};\n\ninherits(WebGLImmediateRenderer, VectorContext);\n\n\n/**\n * @param {module:ol/render/webgl/ReplayGroup} replayGroup Replay group.\n * @param {module:ol/geom/Geometry|module:ol/render/Feature} geometry Geometry.\n * @private\n */\nWebGLImmediateRenderer.prototype.drawText_ = function(replayGroup, geometry) {\n  const context = this.context_;\n  const replay = /** @type {module:ol/render/webgl/TextReplay} */ (\n    replayGroup.getReplay(0, ReplayType.TEXT));\n  replay.setTextStyle(this.textStyle_);\n  replay.drawText(geometry, null);\n  replay.finish(context);\n  // default colors\n  const opacity = 1;\n  const skippedFeatures = {};\n  let featureCallback;\n  const oneByOne = false;\n  replay.replay(this.context_, this.center_, this.resolution_, this.rotation_,\n    this.size_, this.pixelRatio_, opacity, skippedFeatures, featureCallback,\n    oneByOne);\n  replay.getDeleteResourcesFunction(context)();\n};\n\n\n/**\n * Set the rendering style.  Note that since this is an immediate rendering API,\n * any `zIndex` on the provided style will be ignored.\n *\n * @param {module:ol/style/Style} style The rendering style.\n * @override\n * @api\n */\nWebGLImmediateRenderer.prototype.setStyle = function(style) {\n  this.setFillStrokeStyle(style.getFill(), style.getStroke());\n  this.setImageStyle(style.getImage());\n  this.setTextStyle(style.getText());\n};\n\n\n/**\n * Render a geometry into the canvas.  Call\n * {@link ol/render/webgl/Immediate#setStyle} first to set the rendering style.\n *\n * @param {module:ol/geom/Geometry|module:ol/render/Feature} geometry The geometry to render.\n * @override\n * @api\n */\nWebGLImmediateRenderer.prototype.drawGeometry = function(geometry) {\n  const type = geometry.getType();\n  switch (type) {\n    case GeometryType.POINT:\n      this.drawPoint(/** @type {module:ol/geom/Point} */ (geometry), null);\n      break;\n    case GeometryType.LINE_STRING:\n      this.drawLineString(/** @type {module:ol/geom/LineString} */ (geometry), null);\n      break;\n    case GeometryType.POLYGON:\n      this.drawPolygon(/** @type {module:ol/geom/Polygon} */ (geometry), null);\n      break;\n    case GeometryType.MULTI_POINT:\n      this.drawMultiPoint(/** @type {module:ol/geom/MultiPoint} */ (geometry), null);\n      break;\n    case GeometryType.MULTI_LINE_STRING:\n      this.drawMultiLineString(/** @type {module:ol/geom/MultiLineString} */ (geometry), null);\n      break;\n    case GeometryType.MULTI_POLYGON:\n      this.drawMultiPolygon(/** @type {module:ol/geom/MultiPolygon} */ (geometry), null);\n      break;\n    case GeometryType.GEOMETRY_COLLECTION:\n      this.drawGeometryCollection(/** @type {module:ol/geom/GeometryCollection} */ (geometry), null);\n      break;\n    case GeometryType.CIRCLE:\n      this.drawCircle(/** @type {module:ol/geom/Circle} */ (geometry), null);\n      break;\n    default:\n      // pass\n  }\n};\n\n\n/**\n * @inheritDoc\n * @api\n */\nWebGLImmediateRenderer.prototype.drawFeature = function(feature, style) {\n  const geometry = style.getGeometryFunction()(feature);\n  if (!geometry || !intersects(this.extent_, geometry.getExtent())) {\n    return;\n  }\n  this.setStyle(style);\n  this.drawGeometry(geometry);\n};\n\n\n/**\n * @inheritDoc\n */\nWebGLImmediateRenderer.prototype.drawGeometryCollection = function(geometry, data) {\n  const geometries = geometry.getGeometriesArray();\n  let i, ii;\n  for (i = 0, ii = geometries.length; i < ii; ++i) {\n    this.drawGeometry(geometries[i]);\n  }\n};\n\n\n/**\n * @inheritDoc\n */\nWebGLImmediateRenderer.prototype.drawPoint = function(geometry, data) {\n  const context = this.context_;\n  const replayGroup = new WebGLReplayGroup(1, this.extent_);\n  const replay = /** @type {module:ol/render/webgl/ImageReplay} */ (\n    replayGroup.getReplay(0, ReplayType.IMAGE));\n  replay.setImageStyle(this.imageStyle_);\n  replay.drawPoint(geometry, data);\n  replay.finish(context);\n  // default colors\n  const opacity = 1;\n  const skippedFeatures = {};\n  let featureCallback;\n  const oneByOne = false;\n  replay.replay(this.context_, this.center_, this.resolution_, this.rotation_,\n    this.size_, this.pixelRatio_, opacity, skippedFeatures, featureCallback,\n    oneByOne);\n  replay.getDeleteResourcesFunction(context)();\n\n  if (this.textStyle_) {\n    this.drawText_(replayGroup, geometry);\n  }\n};\n\n\n/**\n * @inheritDoc\n */\nWebGLImmediateRenderer.prototype.drawMultiPoint = function(geometry, data) {\n  const context = this.context_;\n  const replayGroup = new WebGLReplayGroup(1, this.extent_);\n  const replay = /** @type {module:ol/render/webgl/ImageReplay} */ (\n    replayGroup.getReplay(0, ReplayType.IMAGE));\n  replay.setImageStyle(this.imageStyle_);\n  replay.drawMultiPoint(geometry, data);\n  replay.finish(context);\n  const opacity = 1;\n  const skippedFeatures = {};\n  let featureCallback;\n  const oneByOne = false;\n  replay.replay(this.context_, this.center_, this.resolution_, this.rotation_,\n    this.size_, this.pixelRatio_, opacity, skippedFeatures, featureCallback,\n    oneByOne);\n  replay.getDeleteResourcesFunction(context)();\n\n  if (this.textStyle_) {\n    this.drawText_(replayGroup, geometry);\n  }\n};\n\n\n/**\n * @inheritDoc\n */\nWebGLImmediateRenderer.prototype.drawLineString = function(geometry, data) {\n  const context = this.context_;\n  const replayGroup = new WebGLReplayGroup(1, this.extent_);\n  const replay = /** @type {module:ol/render/webgl/LineStringReplay} */ (\n    replayGroup.getReplay(0, ReplayType.LINE_STRING));\n  replay.setFillStrokeStyle(null, this.strokeStyle_);\n  replay.drawLineString(geometry, data);\n  replay.finish(context);\n  const opacity = 1;\n  const skippedFeatures = {};\n  let featureCallback;\n  const oneByOne = false;\n  replay.replay(this.context_, this.center_, this.resolution_, this.rotation_,\n    this.size_, this.pixelRatio_, opacity, skippedFeatures, featureCallback,\n    oneByOne);\n  replay.getDeleteResourcesFunction(context)();\n\n  if (this.textStyle_) {\n    this.drawText_(replayGroup, geometry);\n  }\n};\n\n\n/**\n * @inheritDoc\n */\nWebGLImmediateRenderer.prototype.drawMultiLineString = function(geometry, data) {\n  const context = this.context_;\n  const replayGroup = new WebGLReplayGroup(1, this.extent_);\n  const replay = /** @type {module:ol/render/webgl/LineStringReplay} */ (\n    replayGroup.getReplay(0, ReplayType.LINE_STRING));\n  replay.setFillStrokeStyle(null, this.strokeStyle_);\n  replay.drawMultiLineString(geometry, data);\n  replay.finish(context);\n  const opacity = 1;\n  const skippedFeatures = {};\n  let featureCallback;\n  const oneByOne = false;\n  replay.replay(this.context_, this.center_, this.resolution_, this.rotation_,\n    this.size_, this.pixelRatio_, opacity, skippedFeatures, featureCallback,\n    oneByOne);\n  replay.getDeleteResourcesFunction(context)();\n\n  if (this.textStyle_) {\n    this.drawText_(replayGroup, geometry);\n  }\n};\n\n\n/**\n * @inheritDoc\n */\nWebGLImmediateRenderer.prototype.drawPolygon = function(geometry, data) {\n  const context = this.context_;\n  const replayGroup = new WebGLReplayGroup(1, this.extent_);\n  const replay = /** @type {module:ol/render/webgl/PolygonReplay} */ (\n    replayGroup.getReplay(0, ReplayType.POLYGON));\n  replay.setFillStrokeStyle(this.fillStyle_, this.strokeStyle_);\n  replay.drawPolygon(geometry, data);\n  replay.finish(context);\n  const opacity = 1;\n  const skippedFeatures = {};\n  let featureCallback;\n  const oneByOne = false;\n  replay.replay(this.context_, this.center_, this.resolution_, this.rotation_,\n    this.size_, this.pixelRatio_, opacity, skippedFeatures, featureCallback,\n    oneByOne);\n  replay.getDeleteResourcesFunction(context)();\n\n  if (this.textStyle_) {\n    this.drawText_(replayGroup, geometry);\n  }\n};\n\n\n/**\n * @inheritDoc\n */\nWebGLImmediateRenderer.prototype.drawMultiPolygon = function(geometry, data) {\n  const context = this.context_;\n  const replayGroup = new WebGLReplayGroup(1, this.extent_);\n  const replay = /** @type {module:ol/render/webgl/PolygonReplay} */ (\n    replayGroup.getReplay(0, ReplayType.POLYGON));\n  replay.setFillStrokeStyle(this.fillStyle_, this.strokeStyle_);\n  replay.drawMultiPolygon(geometry, data);\n  replay.finish(context);\n  const opacity = 1;\n  const skippedFeatures = {};\n  let featureCallback;\n  const oneByOne = false;\n  replay.replay(this.context_, this.center_, this.resolution_, this.rotation_,\n    this.size_, this.pixelRatio_, opacity, skippedFeatures, featureCallback,\n    oneByOne);\n  replay.getDeleteResourcesFunction(context)();\n\n  if (this.textStyle_) {\n    this.drawText_(replayGroup, geometry);\n  }\n};\n\n\n/**\n * @inheritDoc\n */\nWebGLImmediateRenderer.prototype.drawCircle = function(geometry, data) {\n  const context = this.context_;\n  const replayGroup = new WebGLReplayGroup(1, this.extent_);\n  const replay = /** @type {module:ol/render/webgl/CircleReplay} */ (\n    replayGroup.getReplay(0, ReplayType.CIRCLE));\n  replay.setFillStrokeStyle(this.fillStyle_, this.strokeStyle_);\n  replay.drawCircle(geometry, data);\n  replay.finish(context);\n  const opacity = 1;\n  const skippedFeatures = {};\n  let featureCallback;\n  const oneByOne = false;\n  replay.replay(this.context_, this.center_, this.resolution_, this.rotation_,\n    this.size_, this.pixelRatio_, opacity, skippedFeatures, featureCallback,\n    oneByOne);\n  replay.getDeleteResourcesFunction(context)();\n\n  if (this.textStyle_) {\n    this.drawText_(replayGroup, geometry);\n  }\n};\n\n\n/**\n * @inheritDoc\n */\nWebGLImmediateRenderer.prototype.setImageStyle = function(imageStyle) {\n  this.imageStyle_ = imageStyle;\n};\n\n\n/**\n * @inheritDoc\n */\nWebGLImmediateRenderer.prototype.setFillStrokeStyle = function(fillStyle, strokeStyle) {\n  this.fillStyle_ = fillStyle;\n  this.strokeStyle_ = strokeStyle;\n};\n\n\n/**\n * @inheritDoc\n */\nWebGLImmediateRenderer.prototype.setTextStyle = function(textStyle) {\n  this.textStyle_ = textStyle;\n};\nexport default WebGLImmediateRenderer;\n","/**\n * @module ol/renderer/webgl/defaultmapshader\n */\n// This file is automatically generated, do not edit.\n// Run `make shaders` to generate, and commit the result.\n\nimport {DEBUG as DEBUG_WEBGL} from '../../webgl.js';\nimport WebGLFragment from '../../webgl/Fragment.js';\nimport WebGLVertex from '../../webgl/Vertex.js';\n\nexport const fragment = new WebGLFragment(DEBUG_WEBGL ?\n  'precision mediump float;\\nvarying vec2 v_texCoord;\\n\\n\\nuniform float u_opacity;\\nuniform sampler2D u_texture;\\n\\nvoid main(void) {\\n  vec4 texColor = texture2D(u_texture, v_texCoord);\\n  gl_FragColor.rgb = texColor.rgb;\\n  gl_FragColor.a = texColor.a * u_opacity;\\n}\\n' :\n  'precision mediump float;varying vec2 a;uniform float f;uniform sampler2D g;void main(void){vec4 texColor=texture2D(g,a);gl_FragColor.rgb=texColor.rgb;gl_FragColor.a=texColor.a*f;}');\n\nexport const vertex = new WebGLVertex(DEBUG_WEBGL ?\n  'varying vec2 v_texCoord;\\n\\n\\nattribute vec2 a_position;\\nattribute vec2 a_texCoord;\\n\\nuniform mat4 u_texCoordMatrix;\\nuniform mat4 u_projectionMatrix;\\n\\nvoid main(void) {\\n  gl_Position = u_projectionMatrix * vec4(a_position, 0., 1.);\\n  v_texCoord = (u_texCoordMatrix * vec4(a_texCoord, 0., 1.)).st;\\n}\\n\\n\\n' :\n  'varying vec2 a;attribute vec2 b;attribute vec2 c;uniform mat4 d;uniform mat4 e;void main(void){gl_Position=e*vec4(b,0.,1.);a=(d*vec4(c,0.,1.)).st;}');\n","/**\n * @module ol/renderer/webgl/defaultmapshader/Locations\n */\n// This file is automatically generated, do not edit\n// Run `make shaders` to generate, and commit the result.\n\nimport {DEBUG as DEBUG_WEBGL} from '../../../webgl.js';\n\n/**\n * @constructor\n * @param {WebGLRenderingContext} gl GL.\n * @param {WebGLProgram} program Program.\n * @struct\n */\nconst Locations = function(gl, program) {\n\n  /**\n   * @type {WebGLUniformLocation}\n   */\n  this.u_texCoordMatrix = gl.getUniformLocation(\n    program, DEBUG_WEBGL ? 'u_texCoordMatrix' : 'd');\n\n  /**\n   * @type {WebGLUniformLocation}\n   */\n  this.u_projectionMatrix = gl.getUniformLocation(\n    program, DEBUG_WEBGL ? 'u_projectionMatrix' : 'e');\n\n  /**\n   * @type {WebGLUniformLocation}\n   */\n  this.u_opacity = gl.getUniformLocation(\n    program, DEBUG_WEBGL ? 'u_opacity' : 'f');\n\n  /**\n   * @type {WebGLUniformLocation}\n   */\n  this.u_texture = gl.getUniformLocation(\n    program, DEBUG_WEBGL ? 'u_texture' : 'g');\n\n  /**\n   * @type {number}\n   */\n  this.a_position = gl.getAttribLocation(\n    program, DEBUG_WEBGL ? 'a_position' : 'b');\n\n  /**\n   * @type {number}\n   */\n  this.a_texCoord = gl.getAttribLocation(\n    program, DEBUG_WEBGL ? 'a_texCoord' : 'c');\n};\n\nexport default Locations;\n","/**\n * @module ol/renderer/webgl/Layer\n */\nimport {inherits} from '../../util.js';\nimport RenderEvent from '../../render/Event.js';\nimport RenderEventType from '../../render/EventType.js';\nimport WebGLImmediateRenderer from '../../render/webgl/Immediate.js';\nimport LayerRenderer from '../Layer.js';\nimport {fragment, vertex} from '../webgl/defaultmapshader.js';\nimport Locations from '../webgl/defaultmapshader/Locations.js';\nimport {create as createTransform} from '../../transform.js';\nimport {create, fromTransform} from '../../vec/mat4.js';\nimport {ARRAY_BUFFER, FRAMEBUFFER, FLOAT, TEXTURE_2D,\n  TRIANGLE_STRIP, COLOR_ATTACHMENT0} from '../../webgl.js';\nimport WebGLBuffer from '../../webgl/Buffer.js';\nimport {createEmptyTexture} from '../../webgl/Context.js';\n\n/**\n * @constructor\n * @abstract\n * @extends {module:ol/renderer/Layer}\n * @param {module:ol/renderer/webgl/Map} mapRenderer Map renderer.\n * @param {module:ol/layer/Layer} layer Layer.\n */\nconst WebGLLayerRenderer = function(mapRenderer, layer) {\n\n  LayerRenderer.call(this, layer);\n\n  /**\n   * @protected\n   * @type {module:ol/renderer/webgl/Map}\n   */\n  this.mapRenderer = mapRenderer;\n\n  /**\n   * @private\n   * @type {module:ol/webgl/Buffer}\n   */\n  this.arrayBuffer_ = new WebGLBuffer([\n    -1, -1, 0, 0,\n    1, -1, 1, 0,\n    -1, 1, 0, 1,\n    1, 1, 1, 1\n  ]);\n\n  /**\n   * @protected\n   * @type {WebGLTexture}\n   */\n  this.texture = null;\n\n  /**\n   * @protected\n   * @type {WebGLFramebuffer}\n   */\n  this.framebuffer = null;\n\n  /**\n   * @protected\n   * @type {number|undefined}\n   */\n  this.framebufferDimension = undefined;\n\n  /**\n   * @protected\n   * @type {module:ol/transform~Transform}\n   */\n  this.texCoordMatrix = createTransform();\n\n  /**\n   * @protected\n   * @type {module:ol/transform~Transform}\n   */\n  this.projectionMatrix = createTransform();\n\n  /**\n   * @type {Array.<number>}\n   * @private\n   */\n  this.tmpMat4_ = create();\n\n  /**\n   * @private\n   * @type {module:ol/renderer/webgl/defaultmapshader/Locations}\n   */\n  this.defaultLocations_ = null;\n\n};\n\ninherits(WebGLLayerRenderer, LayerRenderer);\n\n\n/**\n * @param {module:ol/PluggableMap~FrameState} frameState Frame state.\n * @param {number} framebufferDimension Framebuffer dimension.\n * @protected\n */\nWebGLLayerRenderer.prototype.bindFramebuffer = function(frameState, framebufferDimension) {\n\n  const gl = this.mapRenderer.getGL();\n\n  if (this.framebufferDimension === undefined ||\n      this.framebufferDimension != framebufferDimension) {\n    /**\n     * @param {WebGLRenderingContext} gl GL.\n     * @param {WebGLFramebuffer} framebuffer Framebuffer.\n     * @param {WebGLTexture} texture Texture.\n     */\n    const postRenderFunction = function(gl, framebuffer, texture) {\n      if (!gl.isContextLost()) {\n        gl.deleteFramebuffer(framebuffer);\n        gl.deleteTexture(texture);\n      }\n    }.bind(null, gl, this.framebuffer, this.texture);\n\n    frameState.postRenderFunctions.push(\n      /** @type {module:ol/PluggableMap~PostRenderFunction} */ (postRenderFunction)\n    );\n\n    const texture = createEmptyTexture(\n      gl, framebufferDimension, framebufferDimension);\n\n    const framebuffer = gl.createFramebuffer();\n    gl.bindFramebuffer(FRAMEBUFFER, framebuffer);\n    gl.framebufferTexture2D(FRAMEBUFFER,\n      COLOR_ATTACHMENT0, TEXTURE_2D, texture, 0);\n\n    this.texture = texture;\n    this.framebuffer = framebuffer;\n    this.framebufferDimension = framebufferDimension;\n\n  } else {\n    gl.bindFramebuffer(FRAMEBUFFER, this.framebuffer);\n  }\n\n};\n\n\n/**\n * @param {module:ol/PluggableMap~FrameState} frameState Frame state.\n * @param {module:ol/layer/Layer~State} layerState Layer state.\n * @param {module:ol/webgl/Context} context Context.\n */\nWebGLLayerRenderer.prototype.composeFrame = function(frameState, layerState, context) {\n\n  this.dispatchComposeEvent_(RenderEventType.PRECOMPOSE, context, frameState);\n\n  context.bindBuffer(ARRAY_BUFFER, this.arrayBuffer_);\n\n  const gl = context.getGL();\n\n  const program = context.getProgram(fragment, vertex);\n\n  let locations;\n  if (!this.defaultLocations_) {\n    locations = new Locations(gl, program);\n    this.defaultLocations_ = locations;\n  } else {\n    locations = this.defaultLocations_;\n  }\n\n  if (context.useProgram(program)) {\n    gl.enableVertexAttribArray(locations.a_position);\n    gl.vertexAttribPointer(\n      locations.a_position, 2, FLOAT, false, 16, 0);\n    gl.enableVertexAttribArray(locations.a_texCoord);\n    gl.vertexAttribPointer(\n      locations.a_texCoord, 2, FLOAT, false, 16, 8);\n    gl.uniform1i(locations.u_texture, 0);\n  }\n\n  gl.uniformMatrix4fv(locations.u_texCoordMatrix, false,\n    fromTransform(this.tmpMat4_, this.getTexCoordMatrix()));\n  gl.uniformMatrix4fv(locations.u_projectionMatrix, false,\n    fromTransform(this.tmpMat4_, this.getProjectionMatrix()));\n  gl.uniform1f(locations.u_opacity, layerState.opacity);\n  gl.bindTexture(TEXTURE_2D, this.getTexture());\n  gl.drawArrays(TRIANGLE_STRIP, 0, 4);\n\n  this.dispatchComposeEvent_(RenderEventType.POSTCOMPOSE, context, frameState);\n};\n\n\n/**\n * @param {module:ol/render/EventType} type Event type.\n * @param {module:ol/webgl/Context} context WebGL context.\n * @param {module:ol/PluggableMap~FrameState} frameState Frame state.\n * @private\n */\nWebGLLayerRenderer.prototype.dispatchComposeEvent_ = function(type, context, frameState) {\n  const layer = this.getLayer();\n  if (layer.hasListener(type)) {\n    const viewState = frameState.viewState;\n    const resolution = viewState.resolution;\n    const pixelRatio = frameState.pixelRatio;\n    const extent = frameState.extent;\n    const center = viewState.center;\n    const rotation = viewState.rotation;\n    const size = frameState.size;\n\n    const render = new WebGLImmediateRenderer(\n      context, center, resolution, rotation, size, extent, pixelRatio);\n    const composeEvent = new RenderEvent(\n      type, render, frameState, null, context);\n    layer.dispatchEvent(composeEvent);\n  }\n};\n\n\n/**\n * @return {!module:ol/transform~Transform} Matrix.\n */\nWebGLLayerRenderer.prototype.getTexCoordMatrix = function() {\n  return this.texCoordMatrix;\n};\n\n\n/**\n * @return {WebGLTexture} Texture.\n */\nWebGLLayerRenderer.prototype.getTexture = function() {\n  return this.texture;\n};\n\n\n/**\n * @return {!module:ol/transform~Transform} Matrix.\n */\nWebGLLayerRenderer.prototype.getProjectionMatrix = function() {\n  return this.projectionMatrix;\n};\n\n\n/**\n * Handle webglcontextlost.\n */\nWebGLLayerRenderer.prototype.handleWebGLContextLost = function() {\n  this.texture = null;\n  this.framebuffer = null;\n  this.framebufferDimension = undefined;\n};\n\n\n/**\n * @abstract\n * @param {module:ol/PluggableMap~FrameState} frameState Frame state.\n * @param {module:ol/layer/Layer~State} layerState Layer state.\n * @param {module:ol/webgl/Context} context Context.\n * @return {boolean} whether composeFrame should be called.\n */\nWebGLLayerRenderer.prototype.prepareFrame = function(frameState, layerState, context) {};\n\n\n/**\n * @abstract\n * @param {module:ol~Pixel} pixel Pixel.\n * @param {module:ol/PluggableMap~FrameState} frameState FrameState.\n * @param {function(this: S, module:ol/layer/Layer, (Uint8ClampedArray|Uint8Array)): T} callback Layer\n *     callback.\n * @param {S} thisArg Value to use as `this` when executing `callback`.\n * @return {T|undefined} Callback result.\n * @template S,T,U\n */\nWebGLLayerRenderer.prototype.forEachLayerAtPixel = function(pixel, frameState, callback, thisArg) {};\nexport default WebGLLayerRenderer;\n","/**\n * @module ol/renderer/webgl/ImageLayer\n */\nimport {ENABLE_RASTER_REPROJECTION} from '../../reproj/common.js';\nimport {inherits} from '../../util.js';\nimport {TRUE, UNDEFINED} from '../../functions.js';\nimport LayerType from '../../LayerType.js';\nimport ViewHint from '../../ViewHint.js';\nimport {createCanvasContext2D} from '../../dom.js';\nimport {getIntersection, isEmpty} from '../../extent.js';\nimport WebGLLayerRenderer from '../webgl/Layer.js';\nimport {\n  create as createTransform,\n  rotate as rotateTransform,\n  translate as translateTransform,\n  scale as scaleTransform,\n  reset as resetTransform,\n  apply as applyTransform,\n  invert as invertTransform,\n  multiply as multiplyTransform\n} from '../../transform.js';\nimport {CLAMP_TO_EDGE} from '../../webgl.js';\nimport {createTexture} from '../../webgl/Context.js';\n\n/**\n * @constructor\n * @extends {module:ol/renderer/webgl/Layer}\n * @param {module:ol/renderer/webgl/Map} mapRenderer Map renderer.\n * @param {module:ol/layer/Image} imageLayer Tile layer.\n * @api\n */\nconst WebGLImageLayerRenderer = function(mapRenderer, imageLayer) {\n\n  WebGLLayerRenderer.call(this, mapRenderer, imageLayer);\n\n  /**\n   * The last rendered image.\n   * @private\n   * @type {?module:ol/ImageBase}\n   */\n  this.image_ = null;\n\n  /**\n   * @private\n   * @type {CanvasRenderingContext2D}\n   */\n  this.hitCanvasContext_ = null;\n\n  /**\n   * @private\n   * @type {?module:ol/transform~Transform}\n   */\n  this.hitTransformationMatrix_ = null;\n\n};\n\ninherits(WebGLImageLayerRenderer, WebGLLayerRenderer);\n\n\n/**\n * Determine if this renderer handles the provided layer.\n * @param {module:ol/layer/Layer} layer The candidate layer.\n * @return {boolean} The renderer can render the layer.\n */\nWebGLImageLayerRenderer['handles'] = function(layer) {\n  return layer.getType() === LayerType.IMAGE;\n};\n\n\n/**\n * Create a layer renderer.\n * @param {module:ol/renderer/Map} mapRenderer The map renderer.\n * @param {module:ol/layer/Layer} layer The layer to be rendererd.\n * @return {module:ol/renderer/webgl/ImageLayer} The layer renderer.\n */\nWebGLImageLayerRenderer['create'] = function(mapRenderer, layer) {\n  return new WebGLImageLayerRenderer(\n    /** @type {module:ol/renderer/webgl/Map} */ (mapRenderer),\n    /** @type {module:ol/layer/Image} */ (layer)\n  );\n};\n\n\n/**\n * @param {module:ol/ImageBase} image Image.\n * @private\n * @return {WebGLTexture} Texture.\n */\nWebGLImageLayerRenderer.prototype.createTexture_ = function(image) {\n\n  // We meet the conditions to work with non-power of two textures.\n  // http://www.khronos.org/webgl/wiki/WebGL_and_OpenGL_Differences#Non-Power_of_Two_Texture_Support\n  // http://learningwebgl.com/blog/?p=2101\n\n  const imageElement = image.getImage();\n  const gl = this.mapRenderer.getGL();\n\n  return createTexture(\n    gl, imageElement, CLAMP_TO_EDGE, CLAMP_TO_EDGE);\n};\n\n\n/**\n * @inheritDoc\n */\nWebGLImageLayerRenderer.prototype.forEachFeatureAtCoordinate = function(coordinate, frameState, hitTolerance, callback, thisArg) {\n  const layer = this.getLayer();\n  const source = layer.getSource();\n  const resolution = frameState.viewState.resolution;\n  const rotation = frameState.viewState.rotation;\n  const skippedFeatureUids = frameState.skippedFeatureUids;\n  return source.forEachFeatureAtCoordinate(\n    coordinate, resolution, rotation, hitTolerance, skippedFeatureUids,\n\n    /**\n     * @param {module:ol/Feature|module:ol/render/Feature} feature Feature.\n     * @return {?} Callback result.\n     */\n    function(feature) {\n      return callback.call(thisArg, feature, layer);\n    });\n};\n\n\n/**\n * @inheritDoc\n */\nWebGLImageLayerRenderer.prototype.prepareFrame = function(frameState, layerState, context) {\n\n  const gl = this.mapRenderer.getGL();\n\n  const pixelRatio = frameState.pixelRatio;\n  const viewState = frameState.viewState;\n  const viewCenter = viewState.center;\n  const viewResolution = viewState.resolution;\n  const viewRotation = viewState.rotation;\n\n  let image = this.image_;\n  let texture = this.texture;\n  const imageLayer = /** @type {module:ol/layer/Image} */ (this.getLayer());\n  const imageSource = imageLayer.getSource();\n\n  const hints = frameState.viewHints;\n\n  let renderedExtent = frameState.extent;\n  if (layerState.extent !== undefined) {\n    renderedExtent = getIntersection(renderedExtent, layerState.extent);\n  }\n  if (!hints[ViewHint.ANIMATING] && !hints[ViewHint.INTERACTING] &&\n      !isEmpty(renderedExtent)) {\n    let projection = viewState.projection;\n    if (!ENABLE_RASTER_REPROJECTION) {\n      const sourceProjection = imageSource.getProjection();\n      if (sourceProjection) {\n        projection = sourceProjection;\n      }\n    }\n    const image_ = imageSource.getImage(renderedExtent, viewResolution,\n      pixelRatio, projection);\n    if (image_) {\n      const loaded = this.loadImage(image_);\n      if (loaded) {\n        image = image_;\n        texture = this.createTexture_(image_);\n        if (this.texture) {\n          /**\n           * @param {WebGLRenderingContext} gl GL.\n           * @param {WebGLTexture} texture Texture.\n           */\n          const postRenderFunction = function(gl, texture) {\n            if (!gl.isContextLost()) {\n              gl.deleteTexture(texture);\n            }\n          }.bind(null, gl, this.texture);\n          frameState.postRenderFunctions.push(\n            /** @type {module:ol/PluggableMap~PostRenderFunction} */ (postRenderFunction)\n          );\n        }\n      }\n    }\n  }\n\n  if (image) {\n    const canvas = this.mapRenderer.getContext().getCanvas();\n\n    this.updateProjectionMatrix_(canvas.width, canvas.height,\n      pixelRatio, viewCenter, viewResolution, viewRotation,\n      image.getExtent());\n    this.hitTransformationMatrix_ = null;\n\n    // Translate and scale to flip the Y coord.\n    const texCoordMatrix = this.texCoordMatrix;\n    resetTransform(texCoordMatrix);\n    scaleTransform(texCoordMatrix, 1, -1);\n    translateTransform(texCoordMatrix, 0, -1);\n\n    this.image_ = image;\n    this.texture = texture;\n  }\n\n  return !!image;\n};\n\n\n/**\n * @param {number} canvasWidth Canvas width.\n * @param {number} canvasHeight Canvas height.\n * @param {number} pixelRatio Pixel ratio.\n * @param {module:ol/coordinate~Coordinate} viewCenter View center.\n * @param {number} viewResolution View resolution.\n * @param {number} viewRotation View rotation.\n * @param {module:ol/extent~Extent} imageExtent Image extent.\n * @private\n */\nWebGLImageLayerRenderer.prototype.updateProjectionMatrix_ = function(canvasWidth, canvasHeight, pixelRatio,\n  viewCenter, viewResolution, viewRotation, imageExtent) {\n\n  const canvasExtentWidth = canvasWidth * viewResolution;\n  const canvasExtentHeight = canvasHeight * viewResolution;\n\n  const projectionMatrix = this.projectionMatrix;\n  resetTransform(projectionMatrix);\n  scaleTransform(projectionMatrix,\n    pixelRatio * 2 / canvasExtentWidth,\n    pixelRatio * 2 / canvasExtentHeight);\n  rotateTransform(projectionMatrix, -viewRotation);\n  translateTransform(projectionMatrix,\n    imageExtent[0] - viewCenter[0],\n    imageExtent[1] - viewCenter[1]);\n  scaleTransform(projectionMatrix,\n    (imageExtent[2] - imageExtent[0]) / 2,\n    (imageExtent[3] - imageExtent[1]) / 2);\n  translateTransform(projectionMatrix, 1, 1);\n\n};\n\n\n/**\n * @inheritDoc\n */\nWebGLImageLayerRenderer.prototype.hasFeatureAtCoordinate = function(coordinate, frameState) {\n  const hasFeature = this.forEachFeatureAtCoordinate(coordinate, frameState, 0, TRUE, this);\n  return hasFeature !== undefined;\n};\n\n\n/**\n * @inheritDoc\n */\nWebGLImageLayerRenderer.prototype.forEachLayerAtPixel = function(pixel, frameState, callback, thisArg) {\n  if (!this.image_ || !this.image_.getImage()) {\n    return undefined;\n  }\n\n  if (this.getLayer().getSource().forEachFeatureAtCoordinate !== UNDEFINED) {\n    // for ImageCanvas sources use the original hit-detection logic,\n    // so that for example also transparent polygons are detected\n    const coordinate = applyTransform(\n      frameState.pixelToCoordinateTransform, pixel.slice());\n    const hasFeature = this.forEachFeatureAtCoordinate(coordinate, frameState, 0, TRUE, this);\n\n    if (hasFeature) {\n      return callback.call(thisArg, this.getLayer(), null);\n    } else {\n      return undefined;\n    }\n  } else {\n    const imageSize =\n        [this.image_.getImage().width, this.image_.getImage().height];\n\n    if (!this.hitTransformationMatrix_) {\n      this.hitTransformationMatrix_ = this.getHitTransformationMatrix_(\n        frameState.size, imageSize);\n    }\n\n    const pixelOnFrameBuffer = applyTransform(\n      this.hitTransformationMatrix_, pixel.slice());\n\n    if (pixelOnFrameBuffer[0] < 0 || pixelOnFrameBuffer[0] > imageSize[0] ||\n        pixelOnFrameBuffer[1] < 0 || pixelOnFrameBuffer[1] > imageSize[1]) {\n      // outside the image, no need to check\n      return undefined;\n    }\n\n    if (!this.hitCanvasContext_) {\n      this.hitCanvasContext_ = createCanvasContext2D(1, 1);\n    }\n\n    this.hitCanvasContext_.clearRect(0, 0, 1, 1);\n    this.hitCanvasContext_.drawImage(this.image_.getImage(),\n      pixelOnFrameBuffer[0], pixelOnFrameBuffer[1], 1, 1, 0, 0, 1, 1);\n\n    const imageData = this.hitCanvasContext_.getImageData(0, 0, 1, 1).data;\n    if (imageData[3] > 0) {\n      return callback.call(thisArg, this.getLayer(),  imageData);\n    } else {\n      return undefined;\n    }\n  }\n};\n\n\n/**\n * The transformation matrix to get the pixel on the image for a\n * pixel on the map.\n * @param {module:ol/size~Size} mapSize The map size.\n * @param {module:ol/size~Size} imageSize The image size.\n * @return {module:ol/transform~Transform} The transformation matrix.\n * @private\n */\nWebGLImageLayerRenderer.prototype.getHitTransformationMatrix_ = function(mapSize, imageSize) {\n  // the first matrix takes a map pixel, flips the y-axis and scales to\n  // a range between -1 ... 1\n  const mapCoordTransform = createTransform();\n  translateTransform(mapCoordTransform, -1, -1);\n  scaleTransform(mapCoordTransform, 2 / mapSize[0], 2 / mapSize[1]);\n  translateTransform(mapCoordTransform, 0, mapSize[1]);\n  scaleTransform(mapCoordTransform, 1, -1);\n\n  // the second matrix is the inverse of the projection matrix used in the\n  // shader for drawing\n  const projectionMatrixInv = invertTransform(this.projectionMatrix.slice());\n\n  // the third matrix scales to the image dimensions and flips the y-axis again\n  const transform = createTransform();\n  translateTransform(transform, 0, imageSize[1]);\n  scaleTransform(transform, 1, -1);\n  scaleTransform(transform, imageSize[0] / 2, imageSize[1] / 2);\n  translateTransform(transform, 1, 1);\n\n  multiplyTransform(transform, projectionMatrixInv);\n  multiplyTransform(transform, mapCoordTransform);\n\n  return transform;\n};\nexport default WebGLImageLayerRenderer;\n","/**\n * @module ol/renderer/webgl/Map\n */\n\nimport {inherits} from '../../util.js';\nimport {stableSort} from '../../array.js';\nimport {CLASS_UNSELECTABLE} from '../../css.js';\nimport {createCanvasContext2D} from '../../dom.js';\nimport {listen} from '../../events.js';\nimport {visibleAtResolution} from '../../layer/Layer.js';\nimport RenderEvent from '../../render/Event.js';\nimport RenderEventType from '../../render/EventType.js';\nimport WebGLImmediateRenderer from '../../render/webgl/Immediate.js';\nimport MapRenderer, {sortByZIndex} from '../Map.js';\nimport SourceState from '../../source/State.js';\nimport LRUCache from '../../structs/LRUCache.js';\nimport PriorityQueue from '../../structs/PriorityQueue.js';\nimport {BLEND, CLAMP_TO_EDGE, COLOR_BUFFER_BIT, CULL_FACE, DEPTH_TEST, FRAMEBUFFER,\n  getContext, LINEAR, ONE, ONE_MINUS_SRC_ALPHA, RGBA, SCISSOR_TEST, SRC_ALPHA,\n  STENCIL_TEST, TEXTURE0, TEXTURE_2D, TEXTURE_MAG_FILTER, TEXTURE_MIN_FILTER,\n  TEXTURE_WRAP_S, TEXTURE_WRAP_T, UNSIGNED_BYTE} from '../../webgl.js';\nimport WebGLContext from '../../webgl/Context.js';\nimport ContextEventType from '../../webgl/ContextEventType.js';\n\n\n/**\n * @typedef {Object} TextureCacheEntry\n * @property {number} magFilter\n * @property {number} minFilter\n * @property {WebGLTexture} texture\n */\n\n\n/**\n * Texture cache high water mark.\n * @type {number}\n */\nconst WEBGL_TEXTURE_CACHE_HIGH_WATER_MARK = 1024;\n\n\n/**\n * @constructor\n * @extends {module:ol/renderer/Map}\n * @param {module:ol/PluggableMap} map Map.\n * @api\n */\nconst WebGLMapRenderer = function(map) {\n  MapRenderer.call(this, map);\n\n  const container = map.getViewport();\n\n  /**\n   * @private\n   * @type {HTMLCanvasElement}\n   */\n  this.canvas_ = /** @type {HTMLCanvasElement} */\n    (document.createElement('CANVAS'));\n  this.canvas_.style.width = '100%';\n  this.canvas_.style.height = '100%';\n  this.canvas_.style.display = 'block';\n  this.canvas_.className = CLASS_UNSELECTABLE;\n  container.insertBefore(this.canvas_, container.childNodes[0] || null);\n\n  /**\n   * @private\n   * @type {number}\n   */\n  this.clipTileCanvasWidth_ = 0;\n\n  /**\n   * @private\n   * @type {number}\n   */\n  this.clipTileCanvasHeight_ = 0;\n\n  /**\n   * @private\n   * @type {CanvasRenderingContext2D}\n   */\n  this.clipTileContext_ = createCanvasContext2D();\n\n  /**\n   * @private\n   * @type {boolean}\n   */\n  this.renderedVisible_ = true;\n\n  /**\n   * @private\n   * @type {WebGLRenderingContext}\n   */\n  this.gl_ = getContext(this.canvas_, {\n    antialias: true,\n    depth: true,\n    failIfMajorPerformanceCaveat: true,\n    preserveDrawingBuffer: false,\n    stencil: true\n  });\n\n  /**\n   * @private\n   * @type {module:ol/webgl/Context}\n   */\n  this.context_ = new WebGLContext(this.canvas_, this.gl_);\n\n  listen(this.canvas_, ContextEventType.LOST,\n    this.handleWebGLContextLost, this);\n  listen(this.canvas_, ContextEventType.RESTORED,\n    this.handleWebGLContextRestored, this);\n\n  /**\n   * @private\n   * @type {module:ol/structs/LRUCache.<module:ol/renderer/webgl/Map~TextureCacheEntry|null>}\n   */\n  this.textureCache_ = new LRUCache();\n\n  /**\n   * @private\n   * @type {module:ol/coordinate~Coordinate}\n   */\n  this.focus_ = null;\n\n  /**\n   * @private\n   * @type {module:ol/structs/PriorityQueue.<Array>}\n   */\n  this.tileTextureQueue_ = new PriorityQueue(\n    /**\n     * @param {Array.<*>} element Element.\n     * @return {number} Priority.\n     * @this {module:ol/renderer/webgl/Map}\n     */\n    (function(element) {\n      const tileCenter = /** @type {module:ol/coordinate~Coordinate} */ (element[1]);\n      const tileResolution = /** @type {number} */ (element[2]);\n      const deltaX = tileCenter[0] - this.focus_[0];\n      const deltaY = tileCenter[1] - this.focus_[1];\n      return 65536 * Math.log(tileResolution) +\n            Math.sqrt(deltaX * deltaX + deltaY * deltaY) / tileResolution;\n    }).bind(this),\n    /**\n     * @param {Array.<*>} element Element.\n     * @return {string} Key.\n     */\n    function(element) {\n      return (\n        /** @type {module:ol/Tile} */ (element[0]).getKey()\n      );\n    });\n\n\n  /**\n   * @param {module:ol/PluggableMap} map Map.\n   * @param {?module:ol/PluggableMap~FrameState} frameState Frame state.\n   * @return {boolean} false.\n   * @this {module:ol/renderer/webgl/Map}\n   */\n  this.loadNextTileTexture_ =\n      function(map, frameState) {\n        if (!this.tileTextureQueue_.isEmpty()) {\n          this.tileTextureQueue_.reprioritize();\n          const element = this.tileTextureQueue_.dequeue();\n          const tile = /** @type {module:ol/Tile} */ (element[0]);\n          const tileSize = /** @type {module:ol/size~Size} */ (element[3]);\n          const tileGutter = /** @type {number} */ (element[4]);\n          this.bindTileTexture(\n            tile, tileSize, tileGutter, LINEAR, LINEAR);\n        }\n        return false;\n      }.bind(this);\n\n\n  /**\n   * @private\n   * @type {number}\n   */\n  this.textureCacheFrameMarkerCount_ = 0;\n\n  this.initializeGL_();\n};\n\ninherits(WebGLMapRenderer, MapRenderer);\n\n\n/**\n * @param {module:ol/Tile} tile Tile.\n * @param {module:ol/size~Size} tileSize Tile size.\n * @param {number} tileGutter Tile gutter.\n * @param {number} magFilter Mag filter.\n * @param {number} minFilter Min filter.\n */\nWebGLMapRenderer.prototype.bindTileTexture = function(tile, tileSize, tileGutter, magFilter, minFilter) {\n  const gl = this.getGL();\n  const tileKey = tile.getKey();\n  if (this.textureCache_.containsKey(tileKey)) {\n    const textureCacheEntry = this.textureCache_.get(tileKey);\n    gl.bindTexture(TEXTURE_2D, textureCacheEntry.texture);\n    if (textureCacheEntry.magFilter != magFilter) {\n      gl.texParameteri(\n        TEXTURE_2D, TEXTURE_MAG_FILTER, magFilter);\n      textureCacheEntry.magFilter = magFilter;\n    }\n    if (textureCacheEntry.minFilter != minFilter) {\n      gl.texParameteri(\n        TEXTURE_2D, TEXTURE_MIN_FILTER, minFilter);\n      textureCacheEntry.minFilter = minFilter;\n    }\n  } else {\n    const texture = gl.createTexture();\n    gl.bindTexture(TEXTURE_2D, texture);\n    if (tileGutter > 0) {\n      const clipTileCanvas = this.clipTileContext_.canvas;\n      const clipTileContext = this.clipTileContext_;\n      if (this.clipTileCanvasWidth_ !== tileSize[0] ||\n          this.clipTileCanvasHeight_ !== tileSize[1]) {\n        clipTileCanvas.width = tileSize[0];\n        clipTileCanvas.height = tileSize[1];\n        this.clipTileCanvasWidth_ = tileSize[0];\n        this.clipTileCanvasHeight_ = tileSize[1];\n      } else {\n        clipTileContext.clearRect(0, 0, tileSize[0], tileSize[1]);\n      }\n      clipTileContext.drawImage(tile.getImage(), tileGutter, tileGutter,\n        tileSize[0], tileSize[1], 0, 0, tileSize[0], tileSize[1]);\n      gl.texImage2D(TEXTURE_2D, 0,\n        RGBA, RGBA,\n        UNSIGNED_BYTE, clipTileCanvas);\n    } else {\n      gl.texImage2D(TEXTURE_2D, 0,\n        RGBA, RGBA,\n        UNSIGNED_BYTE, tile.getImage());\n    }\n    gl.texParameteri(\n      TEXTURE_2D, TEXTURE_MAG_FILTER, magFilter);\n    gl.texParameteri(\n      TEXTURE_2D, TEXTURE_MIN_FILTER, minFilter);\n    gl.texParameteri(TEXTURE_2D, TEXTURE_WRAP_S,\n      CLAMP_TO_EDGE);\n    gl.texParameteri(TEXTURE_2D, TEXTURE_WRAP_T,\n      CLAMP_TO_EDGE);\n    this.textureCache_.set(tileKey, {\n      texture: texture,\n      magFilter: magFilter,\n      minFilter: minFilter\n    });\n  }\n};\n\n\n/**\n * @param {module:ol/render/EventType} type Event type.\n * @param {module:ol/PluggableMap~FrameState} frameState Frame state.\n * @private\n */\nWebGLMapRenderer.prototype.dispatchComposeEvent_ = function(type, frameState) {\n  const map = this.getMap();\n  if (map.hasListener(type)) {\n    const context = this.context_;\n\n    const extent = frameState.extent;\n    const size = frameState.size;\n    const viewState = frameState.viewState;\n    const pixelRatio = frameState.pixelRatio;\n\n    const resolution = viewState.resolution;\n    const center = viewState.center;\n    const rotation = viewState.rotation;\n\n    const vectorContext = new WebGLImmediateRenderer(context,\n      center, resolution, rotation, size, extent, pixelRatio);\n    const composeEvent = new RenderEvent(type, vectorContext,\n      frameState, null, context);\n    map.dispatchEvent(composeEvent);\n  }\n};\n\n\n/**\n * @inheritDoc\n */\nWebGLMapRenderer.prototype.disposeInternal = function() {\n  const gl = this.getGL();\n  if (!gl.isContextLost()) {\n    this.textureCache_.forEach(\n      /**\n       * @param {?module:ol/renderer/webgl/Map~TextureCacheEntry} textureCacheEntry\n       *     Texture cache entry.\n       */\n      function(textureCacheEntry) {\n        if (textureCacheEntry) {\n          gl.deleteTexture(textureCacheEntry.texture);\n        }\n      });\n  }\n  this.context_.dispose();\n  MapRenderer.prototype.disposeInternal.call(this);\n};\n\n\n/**\n * @param {module:ol/PluggableMap} map Map.\n * @param {module:ol/PluggableMap~FrameState} frameState Frame state.\n * @private\n */\nWebGLMapRenderer.prototype.expireCache_ = function(map, frameState) {\n  const gl = this.getGL();\n  let textureCacheEntry;\n  while (this.textureCache_.getCount() - this.textureCacheFrameMarkerCount_ >\n      WEBGL_TEXTURE_CACHE_HIGH_WATER_MARK) {\n    textureCacheEntry = this.textureCache_.peekLast();\n    if (!textureCacheEntry) {\n      if (+this.textureCache_.peekLastKey() == frameState.index) {\n        break;\n      } else {\n        --this.textureCacheFrameMarkerCount_;\n      }\n    } else {\n      gl.deleteTexture(textureCacheEntry.texture);\n    }\n    this.textureCache_.pop();\n  }\n};\n\n\n/**\n * @return {module:ol/webgl/Context} The context.\n */\nWebGLMapRenderer.prototype.getContext = function() {\n  return this.context_;\n};\n\n\n/**\n * @return {WebGLRenderingContext} GL.\n */\nWebGLMapRenderer.prototype.getGL = function() {\n  return this.gl_;\n};\n\n\n/**\n * @return {module:ol/structs/PriorityQueue.<Array>} Tile texture queue.\n */\nWebGLMapRenderer.prototype.getTileTextureQueue = function() {\n  return this.tileTextureQueue_;\n};\n\n\n/**\n * @param {module:ol/events/Event} event Event.\n * @protected\n */\nWebGLMapRenderer.prototype.handleWebGLContextLost = function(event) {\n  event.preventDefault();\n  this.textureCache_.clear();\n  this.textureCacheFrameMarkerCount_ = 0;\n\n  const renderers = this.getLayerRenderers();\n  for (const id in renderers) {\n    const renderer = /** @type {module:ol/renderer/webgl/Layer} */ (renderers[id]);\n    renderer.handleWebGLContextLost();\n  }\n};\n\n\n/**\n * @protected\n */\nWebGLMapRenderer.prototype.handleWebGLContextRestored = function() {\n  this.initializeGL_();\n  this.getMap().render();\n};\n\n\n/**\n * @private\n */\nWebGLMapRenderer.prototype.initializeGL_ = function() {\n  const gl = this.gl_;\n  gl.activeTexture(TEXTURE0);\n  gl.blendFuncSeparate(\n    SRC_ALPHA, ONE_MINUS_SRC_ALPHA,\n    ONE, ONE_MINUS_SRC_ALPHA);\n  gl.disable(CULL_FACE);\n  gl.disable(DEPTH_TEST);\n  gl.disable(SCISSOR_TEST);\n  gl.disable(STENCIL_TEST);\n};\n\n\n/**\n * @param {module:ol/Tile} tile Tile.\n * @return {boolean} Is tile texture loaded.\n */\nWebGLMapRenderer.prototype.isTileTextureLoaded = function(tile) {\n  return this.textureCache_.containsKey(tile.getKey());\n};\n\n\n/**\n * @inheritDoc\n */\nWebGLMapRenderer.prototype.renderFrame = function(frameState) {\n\n  const context = this.getContext();\n  const gl = this.getGL();\n\n  if (gl.isContextLost()) {\n    return false;\n  }\n\n  if (!frameState) {\n    if (this.renderedVisible_) {\n      this.canvas_.style.display = 'none';\n      this.renderedVisible_ = false;\n    }\n    return false;\n  }\n\n  this.focus_ = frameState.focus;\n\n  this.textureCache_.set((-frameState.index).toString(), null);\n  ++this.textureCacheFrameMarkerCount_;\n\n  this.dispatchComposeEvent_(RenderEventType.PRECOMPOSE, frameState);\n\n  /** @type {Array.<module:ol/layer/Layer~State>} */\n  const layerStatesToDraw = [];\n  const layerStatesArray = frameState.layerStatesArray;\n  stableSort(layerStatesArray, sortByZIndex);\n\n  const viewResolution = frameState.viewState.resolution;\n  let i, ii, layerRenderer, layerState;\n  for (i = 0, ii = layerStatesArray.length; i < ii; ++i) {\n    layerState = layerStatesArray[i];\n    if (visibleAtResolution(layerState, viewResolution) &&\n        layerState.sourceState == SourceState.READY) {\n      layerRenderer = /** @type {module:ol/renderer/webgl/Layer} */ (this.getLayerRenderer(layerState.layer));\n      if (layerRenderer.prepareFrame(frameState, layerState, context)) {\n        layerStatesToDraw.push(layerState);\n      }\n    }\n  }\n\n  const width = frameState.size[0] * frameState.pixelRatio;\n  const height = frameState.size[1] * frameState.pixelRatio;\n  if (this.canvas_.width != width || this.canvas_.height != height) {\n    this.canvas_.width = width;\n    this.canvas_.height = height;\n  }\n\n  gl.bindFramebuffer(FRAMEBUFFER, null);\n\n  gl.clearColor(0, 0, 0, 0);\n  gl.clear(COLOR_BUFFER_BIT);\n  gl.enable(BLEND);\n  gl.viewport(0, 0, this.canvas_.width, this.canvas_.height);\n\n  for (i = 0, ii = layerStatesToDraw.length; i < ii; ++i) {\n    layerState = layerStatesToDraw[i];\n    layerRenderer = /** @type {module:ol/renderer/webgl/Layer} */ (this.getLayerRenderer(layerState.layer));\n    layerRenderer.composeFrame(frameState, layerState, context);\n  }\n\n  if (!this.renderedVisible_) {\n    this.canvas_.style.display = '';\n    this.renderedVisible_ = true;\n  }\n\n  this.calculateMatrices2D(frameState);\n\n  if (this.textureCache_.getCount() - this.textureCacheFrameMarkerCount_ >\n      WEBGL_TEXTURE_CACHE_HIGH_WATER_MARK) {\n    frameState.postRenderFunctions.push(\n      /** @type {module:ol/PluggableMap~PostRenderFunction} */ (this.expireCache_.bind(this))\n    );\n  }\n\n  if (!this.tileTextureQueue_.isEmpty()) {\n    frameState.postRenderFunctions.push(this.loadNextTileTexture_);\n    frameState.animate = true;\n  }\n\n  this.dispatchComposeEvent_(RenderEventType.POSTCOMPOSE, frameState);\n\n  this.scheduleRemoveUnusedLayerRenderers(frameState);\n  this.scheduleExpireIconCache(frameState);\n\n};\n\n\n/**\n * @inheritDoc\n */\nWebGLMapRenderer.prototype.forEachFeatureAtCoordinate = function(coordinate, frameState, hitTolerance, callback, thisArg,\n  layerFilter, thisArg2) {\n  let result;\n\n  if (this.getGL().isContextLost()) {\n    return false;\n  }\n\n  const viewState = frameState.viewState;\n\n  const layerStates = frameState.layerStatesArray;\n  const numLayers = layerStates.length;\n  let i;\n  for (i = numLayers - 1; i >= 0; --i) {\n    const layerState = layerStates[i];\n    const layer = layerState.layer;\n    if (visibleAtResolution(layerState, viewState.resolution) &&\n        layerFilter.call(thisArg2, layer)) {\n      const layerRenderer = this.getLayerRenderer(layer);\n      result = layerRenderer.forEachFeatureAtCoordinate(\n        coordinate, frameState, hitTolerance, callback, thisArg);\n      if (result) {\n        return result;\n      }\n    }\n  }\n  return undefined;\n};\n\n\n/**\n * @inheritDoc\n */\nWebGLMapRenderer.prototype.hasFeatureAtCoordinate = function(coordinate, frameState, hitTolerance, layerFilter, thisArg) {\n  let hasFeature = false;\n\n  if (this.getGL().isContextLost()) {\n    return false;\n  }\n\n  const viewState = frameState.viewState;\n\n  const layerStates = frameState.layerStatesArray;\n  const numLayers = layerStates.length;\n  let i;\n  for (i = numLayers - 1; i >= 0; --i) {\n    const layerState = layerStates[i];\n    const layer = layerState.layer;\n    if (visibleAtResolution(layerState, viewState.resolution) &&\n        layerFilter.call(thisArg, layer)) {\n      const layerRenderer = this.getLayerRenderer(layer);\n      hasFeature =\n          layerRenderer.hasFeatureAtCoordinate(coordinate, frameState);\n      if (hasFeature) {\n        return true;\n      }\n    }\n  }\n  return hasFeature;\n};\n\n\n/**\n * @inheritDoc\n */\nWebGLMapRenderer.prototype.forEachLayerAtPixel = function(pixel, frameState, hitTolerance, callback, thisArg,\n  layerFilter, thisArg2) {\n  if (this.getGL().isContextLost()) {\n    return false;\n  }\n\n  const viewState = frameState.viewState;\n  let result;\n\n  const layerStates = frameState.layerStatesArray;\n  const numLayers = layerStates.length;\n  let i;\n  for (i = numLayers - 1; i >= 0; --i) {\n    const layerState = layerStates[i];\n    const layer = layerState.layer;\n    if (visibleAtResolution(layerState, viewState.resolution) &&\n        layerFilter.call(thisArg, layer)) {\n      const layerRenderer = /** @type {module:ol/renderer/webgl/Layer} */ (this.getLayerRenderer(layer));\n      result = layerRenderer.forEachLayerAtPixel(\n        pixel, frameState, callback, thisArg);\n      if (result) {\n        return result;\n      }\n    }\n  }\n  return undefined;\n};\n\nexport default WebGLMapRenderer;\n","/**\n * @module ol/renderer/webgl/tilelayershader\n */\n// This file is automatically generated, do not edit.\n// Run `make shaders` to generate, and commit the result.\n\nimport {DEBUG as DEBUG_WEBGL} from '../../webgl.js';\nimport WebGLFragment from '../../webgl/Fragment.js';\nimport WebGLVertex from '../../webgl/Vertex.js';\n\nexport const fragment = new WebGLFragment(DEBUG_WEBGL ?\n  'precision mediump float;\\nvarying vec2 v_texCoord;\\n\\n\\nuniform sampler2D u_texture;\\n\\nvoid main(void) {\\n  gl_FragColor = texture2D(u_texture, v_texCoord);\\n}\\n' :\n  'precision mediump float;varying vec2 a;uniform sampler2D e;void main(void){gl_FragColor=texture2D(e,a);}');\n\nexport const vertex = new WebGLVertex(DEBUG_WEBGL ?\n  'varying vec2 v_texCoord;\\n\\n\\nattribute vec2 a_position;\\nattribute vec2 a_texCoord;\\nuniform vec4 u_tileOffset;\\n\\nvoid main(void) {\\n  gl_Position = vec4(a_position * u_tileOffset.xy + u_tileOffset.zw, 0., 1.);\\n  v_texCoord = a_texCoord;\\n}\\n\\n\\n' :\n  'varying vec2 a;attribute vec2 b;attribute vec2 c;uniform vec4 d;void main(void){gl_Position=vec4(b*d.xy+d.zw,0.,1.);a=c;}');\n","/**\n * @module ol/renderer/webgl/tilelayershader/Locations\n */\n// This file is automatically generated, do not edit\n// Run `make shaders` to generate, and commit the result.\n\nimport {DEBUG as DEBUG_WEBGL} from '../../../webgl.js';\n\n/**\n * @constructor\n * @param {WebGLRenderingContext} gl GL.\n * @param {WebGLProgram} program Program.\n * @struct\n */\nconst Locations = function(gl, program) {\n\n  /**\n   * @type {WebGLUniformLocation}\n   */\n  this.u_tileOffset = gl.getUniformLocation(\n    program, DEBUG_WEBGL ? 'u_tileOffset' : 'd');\n\n  /**\n   * @type {WebGLUniformLocation}\n   */\n  this.u_texture = gl.getUniformLocation(\n    program, DEBUG_WEBGL ? 'u_texture' : 'e');\n\n  /**\n   * @type {number}\n   */\n  this.a_position = gl.getAttribLocation(\n    program, DEBUG_WEBGL ? 'a_position' : 'b');\n\n  /**\n   * @type {number}\n   */\n  this.a_texCoord = gl.getAttribLocation(\n    program, DEBUG_WEBGL ? 'a_texCoord' : 'c');\n};\n\nexport default Locations;\n","/**\n * @module ol/renderer/webgl/TileLayer\n */\n// FIXME large resolutions lead to too large framebuffers :-(\n// FIXME animated shaders! check in redraw\n\nimport {inherits} from '../../util.js';\nimport LayerType from '../../LayerType.js';\nimport TileRange from '../../TileRange.js';\nimport TileState from '../../TileState.js';\nimport {numberSafeCompareFunction} from '../../array.js';\nimport {createEmpty, intersects} from '../../extent.js';\nimport {roundUpToPowerOfTwo} from '../../math.js';\nimport WebGLLayerRenderer from '../webgl/Layer.js';\nimport {fragment, vertex} from '../webgl/tilelayershader.js';\nimport Locations from '../webgl/tilelayershader/Locations.js';\nimport {toSize} from '../../size.js';\nimport {\n  reset as resetTransform,\n  rotate as rotateTransform,\n  scale as scaleTransform,\n  translate as translateTransform,\n  apply as applyTransform\n} from '../../transform.js';\nimport {COLOR_BUFFER_BIT, BLEND, ARRAY_BUFFER, FLOAT, LINEAR, TRIANGLE_STRIP} from '../../webgl.js';\nimport WebGLBuffer from '../../webgl/Buffer.js';\n\n/**\n * @constructor\n * @extends {module:ol/renderer/webgl/Layer}\n * @param {module:ol/renderer/webgl/Map} mapRenderer Map renderer.\n * @param {module:ol/layer/Tile} tileLayer Tile layer.\n * @api\n */\nconst WebGLTileLayerRenderer = function(mapRenderer, tileLayer) {\n\n  WebGLLayerRenderer.call(this, mapRenderer, tileLayer);\n\n  /**\n   * @private\n   * @type {module:ol/webgl/Fragment}\n   */\n  this.fragmentShader_ = fragment;\n\n  /**\n   * @private\n   * @type {module:ol/webgl/Vertex}\n   */\n  this.vertexShader_ = vertex;\n\n  /**\n   * @private\n   * @type {module:ol/renderer/webgl/tilelayershader/Locations}\n   */\n  this.locations_ = null;\n\n  /**\n   * @private\n   * @type {module:ol/webgl/Buffer}\n   */\n  this.renderArrayBuffer_ = new WebGLBuffer([\n    0, 0, 0, 1,\n    1, 0, 1, 1,\n    0, 1, 0, 0,\n    1, 1, 1, 0\n  ]);\n\n  /**\n   * @private\n   * @type {module:ol/TileRange}\n   */\n  this.renderedTileRange_ = null;\n\n  /**\n   * @private\n   * @type {module:ol/extent~Extent}\n   */\n  this.renderedFramebufferExtent_ = null;\n\n  /**\n   * @private\n   * @type {number}\n   */\n  this.renderedRevision_ = -1;\n\n  /**\n   * @private\n   * @type {module:ol/size~Size}\n   */\n  this.tmpSize_ = [0, 0];\n\n};\n\ninherits(WebGLTileLayerRenderer, WebGLLayerRenderer);\n\n\n/**\n * Determine if this renderer handles the provided layer.\n * @param {module:ol/layer/Layer} layer The candidate layer.\n * @return {boolean} The renderer can render the layer.\n */\nWebGLTileLayerRenderer['handles'] = function(layer) {\n  return layer.getType() === LayerType.TILE;\n};\n\n\n/**\n * Create a layer renderer.\n * @param {module:ol/renderer/Map} mapRenderer The map renderer.\n * @param {module:ol/layer/Layer} layer The layer to be rendererd.\n * @return {module:ol/renderer/webgl/TileLayer} The layer renderer.\n */\nWebGLTileLayerRenderer['create'] = function(mapRenderer, layer) {\n  return new WebGLTileLayerRenderer(\n    /** @type {module:ol/renderer/webgl/Map} */ (mapRenderer),\n    /** @type {module:ol/layer/Tile} */ (layer)\n  );\n};\n\n\n/**\n * @inheritDoc\n */\nWebGLTileLayerRenderer.prototype.disposeInternal = function() {\n  const context = this.mapRenderer.getContext();\n  context.deleteBuffer(this.renderArrayBuffer_);\n  WebGLLayerRenderer.prototype.disposeInternal.call(this);\n};\n\n\n/**\n * @inheritDoc\n */\nWebGLTileLayerRenderer.prototype.createLoadedTileFinder = function(source, projection, tiles) {\n  const mapRenderer = this.mapRenderer;\n\n  return (\n    /**\n     * @param {number} zoom Zoom level.\n     * @param {module:ol/TileRange} tileRange Tile range.\n     * @return {boolean} The tile range is fully loaded.\n     */\n    function(zoom, tileRange) {\n      function callback(tile) {\n        const loaded = mapRenderer.isTileTextureLoaded(tile);\n        if (loaded) {\n          if (!tiles[zoom]) {\n            tiles[zoom] = {};\n          }\n          tiles[zoom][tile.tileCoord.toString()] = tile;\n        }\n        return loaded;\n      }\n      return source.forEachLoadedTile(projection, zoom, tileRange, callback);\n    }\n  );\n};\n\n\n/**\n * @inheritDoc\n */\nWebGLTileLayerRenderer.prototype.handleWebGLContextLost = function() {\n  WebGLLayerRenderer.prototype.handleWebGLContextLost.call(this);\n  this.locations_ = null;\n};\n\n\n/**\n * @inheritDoc\n */\nWebGLTileLayerRenderer.prototype.prepareFrame = function(frameState, layerState, context) {\n\n  const mapRenderer = this.mapRenderer;\n  const gl = context.getGL();\n\n  const viewState = frameState.viewState;\n  const projection = viewState.projection;\n\n  const tileLayer = /** @type {module:ol/layer/Tile} */ (this.getLayer());\n  const tileSource = tileLayer.getSource();\n  const tileGrid = tileSource.getTileGridForProjection(projection);\n  const z = tileGrid.getZForResolution(viewState.resolution);\n  const tileResolution = tileGrid.getResolution(z);\n\n  const tilePixelSize =\n      tileSource.getTilePixelSize(z, frameState.pixelRatio, projection);\n  const pixelRatio = tilePixelSize[0] /\n      toSize(tileGrid.getTileSize(z), this.tmpSize_)[0];\n  const tilePixelResolution = tileResolution / pixelRatio;\n  const tileGutter = tileSource.getTilePixelRatio(pixelRatio) * tileSource.getGutter(projection);\n\n  const center = viewState.center;\n  const extent = frameState.extent;\n  const tileRange = tileGrid.getTileRangeForExtentAndZ(extent, z);\n\n  let framebufferExtent;\n  if (this.renderedTileRange_ &&\n      this.renderedTileRange_.equals(tileRange) &&\n      this.renderedRevision_ == tileSource.getRevision()) {\n    framebufferExtent = this.renderedFramebufferExtent_;\n  } else {\n\n    const tileRangeSize = tileRange.getSize();\n\n    const maxDimension = Math.max(\n      tileRangeSize[0] * tilePixelSize[0],\n      tileRangeSize[1] * tilePixelSize[1]);\n    const framebufferDimension = roundUpToPowerOfTwo(maxDimension);\n    const framebufferExtentDimension = tilePixelResolution * framebufferDimension;\n    const origin = tileGrid.getOrigin(z);\n    const minX = origin[0] +\n        tileRange.minX * tilePixelSize[0] * tilePixelResolution;\n    const minY = origin[1] +\n        tileRange.minY * tilePixelSize[1] * tilePixelResolution;\n    framebufferExtent = [\n      minX, minY,\n      minX + framebufferExtentDimension, minY + framebufferExtentDimension\n    ];\n\n    this.bindFramebuffer(frameState, framebufferDimension);\n    gl.viewport(0, 0, framebufferDimension, framebufferDimension);\n\n    gl.clearColor(0, 0, 0, 0);\n    gl.clear(COLOR_BUFFER_BIT);\n    gl.disable(BLEND);\n\n    const program = context.getProgram(this.fragmentShader_, this.vertexShader_);\n    context.useProgram(program);\n    if (!this.locations_) {\n      this.locations_ = new Locations(gl, program);\n    }\n\n    context.bindBuffer(ARRAY_BUFFER, this.renderArrayBuffer_);\n    gl.enableVertexAttribArray(this.locations_.a_position);\n    gl.vertexAttribPointer(\n      this.locations_.a_position, 2, FLOAT, false, 16, 0);\n    gl.enableVertexAttribArray(this.locations_.a_texCoord);\n    gl.vertexAttribPointer(\n      this.locations_.a_texCoord, 2, FLOAT, false, 16, 8);\n    gl.uniform1i(this.locations_.u_texture, 0);\n\n    /**\n     * @type {Object.<number, Object.<string, module:ol/Tile>>}\n     */\n    const tilesToDrawByZ = {};\n    tilesToDrawByZ[z] = {};\n\n    const findLoadedTiles = this.createLoadedTileFinder(\n      tileSource, projection, tilesToDrawByZ);\n\n    const useInterimTilesOnError = tileLayer.getUseInterimTilesOnError();\n    let allTilesLoaded = true;\n    const tmpExtent = createEmpty();\n    const tmpTileRange = new TileRange(0, 0, 0, 0);\n    let childTileRange, drawable, fullyLoaded, tile, tileState;\n    let x, y, tileExtent;\n    for (x = tileRange.minX; x <= tileRange.maxX; ++x) {\n      for (y = tileRange.minY; y <= tileRange.maxY; ++y) {\n\n        tile = tileSource.getTile(z, x, y, pixelRatio, projection);\n        if (layerState.extent !== undefined) {\n          // ignore tiles outside layer extent\n          tileExtent = tileGrid.getTileCoordExtent(tile.tileCoord, tmpExtent);\n          if (!intersects(tileExtent, layerState.extent)) {\n            continue;\n          }\n        }\n        tileState = tile.getState();\n        drawable = tileState == TileState.LOADED ||\n            tileState == TileState.EMPTY ||\n            tileState == TileState.ERROR && !useInterimTilesOnError;\n        if (!drawable) {\n          tile = tile.getInterimTile();\n        }\n        tileState = tile.getState();\n        if (tileState == TileState.LOADED) {\n          if (mapRenderer.isTileTextureLoaded(tile)) {\n            tilesToDrawByZ[z][tile.tileCoord.toString()] = tile;\n            continue;\n          }\n        } else if (tileState == TileState.EMPTY ||\n                   (tileState == TileState.ERROR &&\n                    !useInterimTilesOnError)) {\n          continue;\n        }\n\n        allTilesLoaded = false;\n        fullyLoaded = tileGrid.forEachTileCoordParentTileRange(\n          tile.tileCoord, findLoadedTiles, null, tmpTileRange, tmpExtent);\n        if (!fullyLoaded) {\n          childTileRange = tileGrid.getTileCoordChildTileRange(\n            tile.tileCoord, tmpTileRange, tmpExtent);\n          if (childTileRange) {\n            findLoadedTiles(z + 1, childTileRange);\n          }\n        }\n\n      }\n\n    }\n\n    /** @type {Array.<number>} */\n    const zs = Object.keys(tilesToDrawByZ).map(Number);\n    zs.sort(numberSafeCompareFunction);\n    const u_tileOffset = new Float32Array(4);\n    for (let i = 0, ii = zs.length; i < ii; ++i) {\n      const tilesToDraw = tilesToDrawByZ[zs[i]];\n      for (const tileKey in tilesToDraw) {\n        tile = tilesToDraw[tileKey];\n        tileExtent = tileGrid.getTileCoordExtent(tile.tileCoord, tmpExtent);\n        u_tileOffset[0] = 2 * (tileExtent[2] - tileExtent[0]) /\n            framebufferExtentDimension;\n        u_tileOffset[1] = 2 * (tileExtent[3] - tileExtent[1]) /\n            framebufferExtentDimension;\n        u_tileOffset[2] = 2 * (tileExtent[0] - framebufferExtent[0]) /\n            framebufferExtentDimension - 1;\n        u_tileOffset[3] = 2 * (tileExtent[1] - framebufferExtent[1]) /\n            framebufferExtentDimension - 1;\n        gl.uniform4fv(this.locations_.u_tileOffset, u_tileOffset);\n        mapRenderer.bindTileTexture(tile, tilePixelSize,\n          tileGutter * pixelRatio, LINEAR, LINEAR);\n        gl.drawArrays(TRIANGLE_STRIP, 0, 4);\n      }\n    }\n\n    if (allTilesLoaded) {\n      this.renderedTileRange_ = tileRange;\n      this.renderedFramebufferExtent_ = framebufferExtent;\n      this.renderedRevision_ = tileSource.getRevision();\n    } else {\n      this.renderedTileRange_ = null;\n      this.renderedFramebufferExtent_ = null;\n      this.renderedRevision_ = -1;\n      frameState.animate = true;\n    }\n\n  }\n\n  this.updateUsedTiles(frameState.usedTiles, tileSource, z, tileRange);\n  const tileTextureQueue = mapRenderer.getTileTextureQueue();\n  this.manageTilePyramid(\n    frameState, tileSource, tileGrid, pixelRatio, projection, extent, z,\n    tileLayer.getPreload(),\n    /**\n     * @param {module:ol/Tile} tile Tile.\n     */\n    function(tile) {\n      if (tile.getState() == TileState.LOADED &&\n            !mapRenderer.isTileTextureLoaded(tile) &&\n            !tileTextureQueue.isKeyQueued(tile.getKey())) {\n        tileTextureQueue.enqueue([\n          tile,\n          tileGrid.getTileCoordCenter(tile.tileCoord),\n          tileGrid.getResolution(tile.tileCoord[0]),\n          tilePixelSize, tileGutter * pixelRatio\n        ]);\n      }\n    }, this);\n  this.scheduleExpireCache(frameState, tileSource);\n\n  const texCoordMatrix = this.texCoordMatrix;\n  resetTransform(texCoordMatrix);\n  translateTransform(texCoordMatrix,\n    (Math.round(center[0] / tileResolution) * tileResolution - framebufferExtent[0]) /\n          (framebufferExtent[2] - framebufferExtent[0]),\n    (Math.round(center[1] / tileResolution) * tileResolution - framebufferExtent[1]) /\n          (framebufferExtent[3] - framebufferExtent[1]));\n  if (viewState.rotation !== 0) {\n    rotateTransform(texCoordMatrix, viewState.rotation);\n  }\n  scaleTransform(texCoordMatrix,\n    frameState.size[0] * viewState.resolution /\n          (framebufferExtent[2] - framebufferExtent[0]),\n    frameState.size[1] * viewState.resolution /\n          (framebufferExtent[3] - framebufferExtent[1]));\n  translateTransform(texCoordMatrix, -0.5, -0.5);\n\n  return true;\n};\n\n\n/**\n * @inheritDoc\n */\nWebGLTileLayerRenderer.prototype.forEachLayerAtPixel = function(pixel, frameState, callback, thisArg) {\n  if (!this.framebuffer) {\n    return undefined;\n  }\n\n  const pixelOnMapScaled = [\n    pixel[0] / frameState.size[0],\n    (frameState.size[1] - pixel[1]) / frameState.size[1]];\n\n  const pixelOnFrameBufferScaled = applyTransform(\n    this.texCoordMatrix, pixelOnMapScaled.slice());\n  const pixelOnFrameBuffer = [\n    pixelOnFrameBufferScaled[0] * this.framebufferDimension,\n    pixelOnFrameBufferScaled[1] * this.framebufferDimension];\n\n  const gl = this.mapRenderer.getContext().getGL();\n  gl.bindFramebuffer(gl.FRAMEBUFFER, this.framebuffer);\n  const imageData = new Uint8Array(4);\n  gl.readPixels(pixelOnFrameBuffer[0], pixelOnFrameBuffer[1], 1, 1,\n    gl.RGBA, gl.UNSIGNED_BYTE, imageData);\n\n  if (imageData[3] > 0) {\n    return callback.call(thisArg, this.getLayer(), imageData);\n  } else {\n    return undefined;\n  }\n};\nexport default WebGLTileLayerRenderer;\n","/**\n * @module ol/renderer/webgl/VectorLayer\n */\nimport {getUid, inherits} from '../../util.js';\nimport LayerType from '../../LayerType.js';\nimport ViewHint from '../../ViewHint.js';\nimport {buffer, containsExtent, createEmpty} from '../../extent.js';\nimport WebGLReplayGroup from '../../render/webgl/ReplayGroup.js';\nimport {defaultOrder as defaultRenderOrder, getTolerance as getRenderTolerance, getSquaredTolerance as getSquaredRenderTolerance, renderFeature} from '../vector.js';\nimport WebGLLayerRenderer from '../webgl/Layer.js';\nimport {apply as applyTransform} from '../../transform.js';\n\n/**\n * @constructor\n * @extends {module:ol/renderer/webgl/Layer}\n * @param {module:ol/renderer/webgl/Map} mapRenderer Map renderer.\n * @param {module:ol/layer/Vector} vectorLayer Vector layer.\n * @api\n */\nconst WebGLVectorLayerRenderer = function(mapRenderer, vectorLayer) {\n\n  WebGLLayerRenderer.call(this, mapRenderer, vectorLayer);\n\n  /**\n   * @private\n   * @type {boolean}\n   */\n  this.dirty_ = false;\n\n  /**\n   * @private\n   * @type {number}\n   */\n  this.renderedRevision_ = -1;\n\n  /**\n   * @private\n   * @type {number}\n   */\n  this.renderedResolution_ = NaN;\n\n  /**\n   * @private\n   * @type {module:ol/extent~Extent}\n   */\n  this.renderedExtent_ = createEmpty();\n\n  /**\n   * @private\n   * @type {function(module:ol/Feature, module:ol/Feature): number|null}\n   */\n  this.renderedRenderOrder_ = null;\n\n  /**\n   * @private\n   * @type {module:ol/render/webgl/ReplayGroup}\n   */\n  this.replayGroup_ = null;\n\n  /**\n   * The last layer state.\n   * @private\n   * @type {?module:ol/layer/Layer~State}\n   */\n  this.layerState_ = null;\n\n};\n\ninherits(WebGLVectorLayerRenderer, WebGLLayerRenderer);\n\n\n/**\n * Determine if this renderer handles the provided layer.\n * @param {module:ol/layer/Layer} layer The candidate layer.\n * @return {boolean} The renderer can render the layer.\n */\nWebGLVectorLayerRenderer['handles'] = function(layer) {\n  return layer.getType() === LayerType.VECTOR;\n};\n\n\n/**\n * Create a layer renderer.\n * @param {module:ol/renderer/Map} mapRenderer The map renderer.\n * @param {module:ol/layer/Layer} layer The layer to be rendererd.\n * @return {module:ol/renderer/webgl/VectorLayer} The layer renderer.\n */\nWebGLVectorLayerRenderer['create'] = function(mapRenderer, layer) {\n  return new WebGLVectorLayerRenderer(\n    /** @type {module:ol/renderer/webgl/Map} */ (mapRenderer),\n    /** @type {module:ol/layer/Vector} */ (layer)\n  );\n};\n\n\n/**\n * @inheritDoc\n */\nWebGLVectorLayerRenderer.prototype.composeFrame = function(frameState, layerState, context) {\n  this.layerState_ = layerState;\n  const viewState = frameState.viewState;\n  const replayGroup = this.replayGroup_;\n  const size = frameState.size;\n  const pixelRatio = frameState.pixelRatio;\n  const gl = this.mapRenderer.getGL();\n  if (replayGroup && !replayGroup.isEmpty()) {\n    gl.enable(gl.SCISSOR_TEST);\n    gl.scissor(0, 0, size[0] * pixelRatio, size[1] * pixelRatio);\n    replayGroup.replay(context,\n      viewState.center, viewState.resolution, viewState.rotation,\n      size, pixelRatio, layerState.opacity,\n      layerState.managed ? frameState.skippedFeatureUids : {});\n    gl.disable(gl.SCISSOR_TEST);\n  }\n\n};\n\n\n/**\n * @inheritDoc\n */\nWebGLVectorLayerRenderer.prototype.disposeInternal = function() {\n  const replayGroup = this.replayGroup_;\n  if (replayGroup) {\n    const context = this.mapRenderer.getContext();\n    replayGroup.getDeleteResourcesFunction(context)();\n    this.replayGroup_ = null;\n  }\n  WebGLLayerRenderer.prototype.disposeInternal.call(this);\n};\n\n\n/**\n * @inheritDoc\n */\nWebGLVectorLayerRenderer.prototype.forEachFeatureAtCoordinate = function(coordinate, frameState, hitTolerance, callback, thisArg) {\n  if (!this.replayGroup_ || !this.layerState_) {\n    return undefined;\n  } else {\n    const context = this.mapRenderer.getContext();\n    const viewState = frameState.viewState;\n    const layer = this.getLayer();\n    const layerState = this.layerState_;\n    /** @type {!Object.<string, boolean>} */\n    const features = {};\n    return this.replayGroup_.forEachFeatureAtCoordinate(coordinate,\n      context, viewState.center, viewState.resolution, viewState.rotation,\n      frameState.size, frameState.pixelRatio, layerState.opacity,\n      {},\n      /**\n       * @param {module:ol/Feature|module:ol/render/Feature} feature Feature.\n       * @return {?} Callback result.\n       */\n      function(feature) {\n        const key = getUid(feature).toString();\n        if (!(key in features)) {\n          features[key] = true;\n          return callback.call(thisArg, feature, layer);\n        }\n      });\n  }\n};\n\n\n/**\n * @inheritDoc\n */\nWebGLVectorLayerRenderer.prototype.hasFeatureAtCoordinate = function(coordinate, frameState) {\n  if (!this.replayGroup_ || !this.layerState_) {\n    return false;\n  } else {\n    const context = this.mapRenderer.getContext();\n    const viewState = frameState.viewState;\n    const layerState = this.layerState_;\n    return this.replayGroup_.hasFeatureAtCoordinate(coordinate,\n      context, viewState.center, viewState.resolution, viewState.rotation,\n      frameState.size, frameState.pixelRatio, layerState.opacity,\n      frameState.skippedFeatureUids);\n  }\n};\n\n\n/**\n * @inheritDoc\n */\nWebGLVectorLayerRenderer.prototype.forEachLayerAtPixel = function(pixel, frameState, callback, thisArg) {\n  const coordinate = applyTransform(\n    frameState.pixelToCoordinateTransform, pixel.slice());\n  const hasFeature = this.hasFeatureAtCoordinate(coordinate, frameState);\n\n  if (hasFeature) {\n    return callback.call(thisArg, this.getLayer(), null);\n  } else {\n    return undefined;\n  }\n};\n\n\n/**\n * Handle changes in image style state.\n * @param {module:ol/events/Event} event Image style change event.\n * @private\n */\nWebGLVectorLayerRenderer.prototype.handleStyleImageChange_ = function(event) {\n  this.renderIfReadyAndVisible();\n};\n\n\n/**\n * @inheritDoc\n */\nWebGLVectorLayerRenderer.prototype.prepareFrame = function(frameState, layerState, context) {\n  const vectorLayer = /** @type {module:ol/layer/Vector} */ (this.getLayer());\n  const vectorSource = vectorLayer.getSource();\n\n  const animating = frameState.viewHints[ViewHint.ANIMATING];\n  const interacting = frameState.viewHints[ViewHint.INTERACTING];\n  const updateWhileAnimating = vectorLayer.getUpdateWhileAnimating();\n  const updateWhileInteracting = vectorLayer.getUpdateWhileInteracting();\n\n  if (!this.dirty_ && (!updateWhileAnimating && animating) ||\n      (!updateWhileInteracting && interacting)) {\n    return true;\n  }\n\n  const frameStateExtent = frameState.extent;\n  const viewState = frameState.viewState;\n  const projection = viewState.projection;\n  const resolution = viewState.resolution;\n  const pixelRatio = frameState.pixelRatio;\n  const vectorLayerRevision = vectorLayer.getRevision();\n  const vectorLayerRenderBuffer = vectorLayer.getRenderBuffer();\n  let vectorLayerRenderOrder = vectorLayer.getRenderOrder();\n\n  if (vectorLayerRenderOrder === undefined) {\n    vectorLayerRenderOrder = defaultRenderOrder;\n  }\n\n  const extent = buffer(frameStateExtent,\n    vectorLayerRenderBuffer * resolution);\n\n  if (!this.dirty_ &&\n      this.renderedResolution_ == resolution &&\n      this.renderedRevision_ == vectorLayerRevision &&\n      this.renderedRenderOrder_ == vectorLayerRenderOrder &&\n      containsExtent(this.renderedExtent_, extent)) {\n    return true;\n  }\n\n  if (this.replayGroup_) {\n    frameState.postRenderFunctions.push(\n      this.replayGroup_.getDeleteResourcesFunction(context));\n  }\n\n  this.dirty_ = false;\n\n  const replayGroup = new WebGLReplayGroup(\n    getRenderTolerance(resolution, pixelRatio),\n    extent, vectorLayer.getRenderBuffer());\n  vectorSource.loadFeatures(extent, resolution, projection);\n  /**\n   * @param {module:ol/Feature} feature Feature.\n   * @this {module:ol/renderer/webgl/VectorLayer}\n   */\n  const render = function(feature) {\n    let styles;\n    const styleFunction = feature.getStyleFunction() || vectorLayer.getStyleFunction();\n    if (styleFunction) {\n      styles = styleFunction(feature, resolution);\n    }\n    if (styles) {\n      const dirty = this.renderFeature(\n        feature, resolution, pixelRatio, styles, replayGroup);\n      this.dirty_ = this.dirty_ || dirty;\n    }\n  };\n  if (vectorLayerRenderOrder) {\n    /** @type {Array.<module:ol/Feature>} */\n    const features = [];\n    vectorSource.forEachFeatureInExtent(extent,\n      /**\n       * @param {module:ol/Feature} feature Feature.\n       */\n      function(feature) {\n        features.push(feature);\n      }, this);\n    features.sort(vectorLayerRenderOrder);\n    features.forEach(render.bind(this));\n  } else {\n    vectorSource.forEachFeatureInExtent(extent, render, this);\n  }\n  replayGroup.finish(context);\n\n  this.renderedResolution_ = resolution;\n  this.renderedRevision_ = vectorLayerRevision;\n  this.renderedRenderOrder_ = vectorLayerRenderOrder;\n  this.renderedExtent_ = extent;\n  this.replayGroup_ = replayGroup;\n\n  return true;\n};\n\n\n/**\n * @param {module:ol/Feature} feature Feature.\n * @param {number} resolution Resolution.\n * @param {number} pixelRatio Pixel ratio.\n * @param {(module:ol/style/Style|Array.<module:ol/style/Style>)} styles The style or array of\n *     styles.\n * @param {module:ol/render/webgl/ReplayGroup} replayGroup Replay group.\n * @return {boolean} `true` if an image is loading.\n */\nWebGLVectorLayerRenderer.prototype.renderFeature = function(feature, resolution, pixelRatio, styles, replayGroup) {\n  if (!styles) {\n    return false;\n  }\n  let loading = false;\n  if (Array.isArray(styles)) {\n    for (let i = styles.length - 1, ii = 0; i >= ii; --i) {\n      loading = renderFeature(\n        replayGroup, feature, styles[i],\n        getSquaredRenderTolerance(resolution, pixelRatio),\n        this.handleStyleImageChange_, this) || loading;\n    }\n  } else {\n    loading = renderFeature(\n      replayGroup, feature, styles,\n      getSquaredRenderTolerance(resolution, pixelRatio),\n      this.handleStyleImageChange_, this) || loading;\n  }\n  return loading;\n};\nexport default WebGLVectorLayerRenderer;\n","/**\n * @module ol/WebGLMap\n */\nimport {inherits} from './util.js';\nimport PluggableMap from './PluggableMap.js';\nimport {defaults as defaultControls} from './control.js';\nimport {defaults as defaultInteractions} from './interaction.js';\nimport {assign} from './obj.js';\nimport WebGLImageLayerRenderer from './renderer/webgl/ImageLayer.js';\nimport WebGLMapRenderer from './renderer/webgl/Map.js';\nimport WebGLTileLayerRenderer from './renderer/webgl/TileLayer.js';\nimport WebGLVectorLayerRenderer from './renderer/webgl/VectorLayer.js';\n\n\n/**\n * @classdesc\n * The WebGLMap uses WebGL for rendering map layers.  This renderer has limited\n * support for vector data and no support for vector tiles.\n *\n *     import WebGLMap from 'ol/WebGLMap';\n *     import TileLayer from 'ol/layer/Tile';\n *     import OSM from 'ol/source/OSM';\n *     import View from 'ol/View';\n *\n *     var map = new WebGLMap({\n *       view: new View({\n *         center: [0, 0],\n *         zoom: 1\n *       }),\n *       layers: [\n *         new TileLayer({\n *           source: new OSM()\n *         })\n *       ],\n *       target: 'map'\n *     });\n *\n * The above snippet creates a map using a {@link module:ol/layer/Tile~Tile} to\n * display {@link module:ol/source/OSM~OSM} OSM data and render it to a DOM\n * element with the id `map`.\n *\n * The constructor places a viewport container (with CSS class name\n * `ol-viewport`) in the target element (see `getViewport()`), and then two\n * further elements within the viewport: one with CSS class name\n * `ol-overlaycontainer-stopevent` for controls and some overlays, and one with\n * CSS class name `ol-overlaycontainer` for other overlays (see the `stopEvent`\n * option of {@link module:ol/Overlay~Overlay} for the difference). The map\n * itself is placed in a further element within the viewport.\n *\n * Layers are stored as a {@link module:ol/Collection~Collection} in\n * layerGroups. A top-level group is provided by the library. This is what is\n * accessed by `getLayerGroup` and `setLayerGroup`. Layers entered in the\n * options are added to this group, and `addLayer` and `removeLayer` change the\n * layer collection in the group. `getLayers` is a convenience function for\n * `getLayerGroup().getLayers()`.\n * Note that {@link module:ol/layer/Group~Group} is a subclass of\n * {@link module:ol/layer/Base}, so layers entered in the options or added\n * with `addLayer` can be groups, which can contain further groups, and so on.\n *\n * @constructor\n * @extends {module:ol/PluggableMap}\n * @param {module:ol/PluggableMap~MapOptions} options Map options.\n * @fires module:ol/MapBrowserEvent~MapBrowserEvent\n * @fires module:ol/MapEvent~MapEvent\n * @fires module:ol/render/Event~RenderEvent#postcompose\n * @fires module:ol/render/Event~RenderEvent#precompose\n * @api\n */\nconst WebGLMap = function(options) {\n  options = assign({}, options);\n  if (!options.controls) {\n    options.controls = defaultControls();\n  }\n  if (!options.interactions) {\n    options.interactions = defaultInteractions();\n  }\n\n  PluggableMap.call(this, options);\n};\n\ninherits(WebGLMap, PluggableMap);\n\n\nWebGLMap.prototype.createRenderer = function() {\n  const renderer = new WebGLMapRenderer(this);\n  renderer.registerLayerRenderers([\n    WebGLImageLayerRenderer,\n    WebGLTileLayerRenderer,\n    WebGLVectorLayerRenderer\n  ]);\n  return renderer;\n};\n\nexport default WebGLMap;\n","/**\n * @module ol/tilegrid/WMTS\n */\nimport {inherits} from '../util.js';\nimport {find} from '../array.js';\nimport {get as getProjection} from '../proj.js';\nimport TileGrid from '../tilegrid/TileGrid.js';\n\n\n/**\n * @typedef {Object} Options\n * @property {module:ol/extent~Extent} [extent] Extent for the tile grid. No tiles\n * outside this extent will be requested by {@link module:ol/source/Tile} sources.\n * When no `origin` or `origins` are configured, the `origin` will be set to the\n * top-left corner of the extent.\n * @property {module:ol/coordinate~Coordinate} [origin] The tile grid origin, i.e.\n * where the `x` and `y` axes meet (`[z, 0, 0]`). Tile coordinates increase left\n * to right and upwards. If not specified, `extent` or `origins` must be provided.\n * @property {Array.<module:ol/coordinate~Coordinate>} [origins] Tile grid origins,\n * i.e. where the `x` and `y` axes meet (`[z, 0, 0]`), for each zoom level. If\n * given, the array length should match the length of the `resolutions` array, i.e.\n * each resolution can have a different origin. Tile coordinates increase left to\n * right and upwards. If not specified, `extent` or `origin` must be provided.\n * @property {!Array.<number>} resolutions Resolutions. The array index of each\n * resolution needs to match the zoom level. This means that even if a `minZoom`\n * is configured, the resolutions array will have a length of `maxZoom + 1`\n * @property {!Array.<string>} matrixIds matrix IDs. The length of this array needs\n * to match the length of the `resolutions` array.\n * @property {Array.<module:ol/size~Size>} [sizes] Number of tile rows and columns\n * of the grid for each zoom level. The values here are the `TileMatrixWidth` and\n * `TileMatrixHeight` advertised in the GetCapabilities response of the WMTS, and\n * define the grid's extent together with the `origin`.\n * An `extent` can be configured in addition, and will further limit the extent for\n * which tile requests are made by sources. Note that when the top-left corner of\n * the `extent` is used as `origin` or `origins`, then the `y` value must be\n * negative because OpenLayers tile coordinates increase upwards.\n * @property {number|module:ol/size~Size} [tileSize] Tile size.\n * @property {Array.<module:ol/size~Size>} [tileSizes] Tile sizes. The length of\n * this array needs to match the length of the `resolutions` array.\n * @property {Array.<number>} [widths] Number of tile columns that cover the grid's\n * extent for each zoom level. Only required when used with a source that has `wrapX`\n * set to `true`, and only when the grid's origin differs from the one of the\n * projection's extent. The array length has to match the length of the `resolutions`\n * array, i.e. each resolution will have a matching entry here.\n */\n\n\n/**\n * @classdesc\n * Set the grid pattern for sources accessing WMTS tiled-image servers.\n *\n * @constructor\n * @extends {module:ol/tilegrid/TileGrid}\n * @param {module:ol/tilegrid/WMTS~Options} options WMTS options.\n * @struct\n * @api\n */\nconst WMTSTileGrid = function(options) {\n  /**\n   * @private\n   * @type {!Array.<string>}\n   */\n  this.matrixIds_ = options.matrixIds;\n  // FIXME: should the matrixIds become optional?\n\n  TileGrid.call(this, {\n    extent: options.extent,\n    origin: options.origin,\n    origins: options.origins,\n    resolutions: options.resolutions,\n    tileSize: options.tileSize,\n    tileSizes: options.tileSizes,\n    sizes: options.sizes\n  });\n};\n\ninherits(WMTSTileGrid, TileGrid);\n\n\n/**\n * @param {number} z Z.\n * @return {string} MatrixId..\n */\nWMTSTileGrid.prototype.getMatrixId = function(z) {\n  return this.matrixIds_[z];\n};\n\n\n/**\n * Get the list of matrix identifiers.\n * @return {Array.<string>} MatrixIds.\n * @api\n */\nWMTSTileGrid.prototype.getMatrixIds = function() {\n  return this.matrixIds_;\n};\n\nexport default WMTSTileGrid;\n\n/**\n * Create a tile grid from a WMTS capabilities matrix set and an\n * optional TileMatrixSetLimits.\n * @param {Object} matrixSet An object representing a matrixSet in the\n *     capabilities document.\n * @param {module:ol/extent~Extent=} opt_extent An optional extent to restrict the tile\n *     ranges the server provides.\n * @param {Array.<Object>=} opt_matrixLimits An optional object representing\n *     the available matrices for tileGrid.\n * @return {module:ol/tilegrid/WMTS} WMTS tileGrid instance.\n * @api\n */\nexport function createFromCapabilitiesMatrixSet(matrixSet, opt_extent, opt_matrixLimits) {\n\n  /** @type {!Array.<number>} */\n  const resolutions = [];\n  /** @type {!Array.<string>} */\n  const matrixIds = [];\n  /** @type {!Array.<module:ol/coordinate~Coordinate>} */\n  const origins = [];\n  /** @type {!Array.<module:ol/size~Size>} */\n  const tileSizes = [];\n  /** @type {!Array.<module:ol/size~Size>} */\n  const sizes = [];\n\n  const matrixLimits = opt_matrixLimits !== undefined ? opt_matrixLimits : [];\n\n  const supportedCRSPropName = 'SupportedCRS';\n  const matrixIdsPropName = 'TileMatrix';\n  const identifierPropName = 'Identifier';\n  const scaleDenominatorPropName = 'ScaleDenominator';\n  const topLeftCornerPropName = 'TopLeftCorner';\n  const tileWidthPropName = 'TileWidth';\n  const tileHeightPropName = 'TileHeight';\n\n  const code = matrixSet[supportedCRSPropName];\n  const projection = getProjection(code.replace(/urn:ogc:def:crs:(\\w+):(.*:)?(\\w+)$/, '$1:$3')) ||\n      getProjection(code);\n  const metersPerUnit = projection.getMetersPerUnit();\n  // swap origin x and y coordinates if axis orientation is lat/long\n  const switchOriginXY = projection.getAxisOrientation().substr(0, 2) == 'ne';\n\n  matrixSet[matrixIdsPropName].sort(function(a, b) {\n    return b[scaleDenominatorPropName] - a[scaleDenominatorPropName];\n  });\n\n  matrixSet[matrixIdsPropName].forEach(function(elt) {\n\n    let matrixAvailable;\n    // use of matrixLimits to filter TileMatrices from GetCapabilities\n    // TileMatrixSet from unavailable matrix levels.\n    if (matrixLimits.length > 0) {\n      matrixAvailable = find(matrixLimits, function(elt_ml) {\n        if (elt[identifierPropName] == elt_ml[matrixIdsPropName]) {\n          return true;\n        }\n        // Fallback for tileMatrix identifiers that don't get prefixed\n        // by their tileMatrixSet identifiers.\n        if (elt[identifierPropName].indexOf(':') === -1) {\n          return matrixSet[identifierPropName] + ':' + elt[identifierPropName] === elt_ml[matrixIdsPropName];\n        }\n        return false;\n      });\n    } else {\n      matrixAvailable = true;\n    }\n\n    if (matrixAvailable) {\n      matrixIds.push(elt[identifierPropName]);\n      const resolution = elt[scaleDenominatorPropName] * 0.28E-3 / metersPerUnit;\n      const tileWidth = elt[tileWidthPropName];\n      const tileHeight = elt[tileHeightPropName];\n      if (switchOriginXY) {\n        origins.push([elt[topLeftCornerPropName][1],\n          elt[topLeftCornerPropName][0]]);\n      } else {\n        origins.push(elt[topLeftCornerPropName]);\n      }\n      resolutions.push(resolution);\n      tileSizes.push(tileWidth == tileHeight ?\n        tileWidth : [tileWidth, tileHeight]);\n      // top-left origin, so height is negative\n      sizes.push([elt['MatrixWidth'], -elt['MatrixHeight']]);\n    }\n  });\n\n  return new WMTSTileGrid({\n    extent: opt_extent,\n    origins: origins,\n    resolutions: resolutions,\n    matrixIds: matrixIds,\n    tileSizes: tileSizes,\n    sizes: sizes\n  });\n}\n","/**\n * @module ol/Image\n */\nimport {inherits} from './util.js';\nimport ImageBase from './ImageBase.js';\nimport ImageState from './ImageState.js';\nimport {listenOnce, unlistenByKey} from './events.js';\nimport EventType from './events/EventType.js';\nimport {getHeight} from './extent.js';\n\n\n/**\n * A function that takes an {@link module:ol/Image~Image} for the image and a\n * `{string}` for the src as arguments. It is supposed to make it so the\n * underlying image {@link module:ol/Image~Image#getImage} is assigned the\n * content specified by the src. If not specified, the default is\n *\n *     function(image, src) {\n *       image.getImage().src = src;\n *     }\n *\n * Providing a custom `imageLoadFunction` can be useful to load images with\n * post requests or - in general - through XHR requests, where the src of the\n * image element would be set to a data URI when the content is loaded.\n *\n * @typedef {function(module:ol/Image, string)} LoadFunction\n * @api\n */\n\n\n/**\n * @constructor\n * @extends {module:ol/ImageBase}\n * @param {module:ol/extent~Extent} extent Extent.\n * @param {number|undefined} resolution Resolution.\n * @param {number} pixelRatio Pixel ratio.\n * @param {string} src Image source URI.\n * @param {?string} crossOrigin Cross origin.\n * @param {module:ol/Image~LoadFunction} imageLoadFunction Image load function.\n */\nconst ImageWrapper = function(extent, resolution, pixelRatio, src, crossOrigin, imageLoadFunction) {\n\n  ImageBase.call(this, extent, resolution, pixelRatio, ImageState.IDLE);\n\n  /**\n   * @private\n   * @type {string}\n   */\n  this.src_ = src;\n\n  /**\n   * @private\n   * @type {HTMLCanvasElement|Image|HTMLVideoElement}\n   */\n  this.image_ = new Image();\n  if (crossOrigin !== null) {\n    this.image_.crossOrigin = crossOrigin;\n  }\n\n  /**\n   * @private\n   * @type {Array.<module:ol/events~EventsKey>}\n   */\n  this.imageListenerKeys_ = null;\n\n  /**\n   * @protected\n   * @type {module:ol/ImageState}\n   */\n  this.state = ImageState.IDLE;\n\n  /**\n   * @private\n   * @type {module:ol/Image~LoadFunction}\n   */\n  this.imageLoadFunction_ = imageLoadFunction;\n\n};\n\ninherits(ImageWrapper, ImageBase);\n\n\n/**\n * @inheritDoc\n * @api\n */\nImageWrapper.prototype.getImage = function() {\n  return this.image_;\n};\n\n\n/**\n * Tracks loading or read errors.\n *\n * @private\n */\nImageWrapper.prototype.handleImageError_ = function() {\n  this.state = ImageState.ERROR;\n  this.unlistenImage_();\n  this.changed();\n};\n\n\n/**\n * Tracks successful image load.\n *\n * @private\n */\nImageWrapper.prototype.handleImageLoad_ = function() {\n  if (this.resolution === undefined) {\n    this.resolution = getHeight(this.extent) / this.image_.height;\n  }\n  this.state = ImageState.LOADED;\n  this.unlistenImage_();\n  this.changed();\n};\n\n\n/**\n * Load the image or retry if loading previously failed.\n * Loading is taken care of by the tile queue, and calling this method is\n * only needed for preloading or for reloading in case of an error.\n * @override\n * @api\n */\nImageWrapper.prototype.load = function() {\n  if (this.state == ImageState.IDLE || this.state == ImageState.ERROR) {\n    this.state = ImageState.LOADING;\n    this.changed();\n    this.imageListenerKeys_ = [\n      listenOnce(this.image_, EventType.ERROR,\n        this.handleImageError_, this),\n      listenOnce(this.image_, EventType.LOAD,\n        this.handleImageLoad_, this)\n    ];\n    this.imageLoadFunction_(this, this.src_);\n  }\n};\n\n\n/**\n * @param {HTMLCanvasElement|Image|HTMLVideoElement} image Image.\n */\nImageWrapper.prototype.setImage = function(image) {\n  this.image_ = image;\n};\n\n\n/**\n * Discards event handlers which listen for load completion or errors.\n *\n * @private\n */\nImageWrapper.prototype.unlistenImage_ = function() {\n  this.imageListenerKeys_.forEach(unlistenByKey);\n  this.imageListenerKeys_ = null;\n};\n\nexport default ImageWrapper;\n","/**\n * @module ol/render/Event\n */\nimport {inherits} from '../util.js';\nimport Event from '../events/Event.js';\n\n/**\n * @constructor\n * @extends {module:ol/events/Event}\n * @param {module:ol/render/EventType} type Type.\n * @param {module:ol/render/VectorContext=} opt_vectorContext Vector context.\n * @param {module:ol/PluggableMap~FrameState=} opt_frameState Frame state.\n * @param {?CanvasRenderingContext2D=} opt_context Context.\n * @param {?module:ol/webgl/Context=} opt_glContext WebGL Context.\n */\nconst RenderEvent = function(\n  type, opt_vectorContext, opt_frameState, opt_context,\n  opt_glContext) {\n\n  Event.call(this, type);\n\n  /**\n   * For canvas, this is an instance of {@link module:ol/render/canvas/Immediate}.\n   * @type {module:ol/render/VectorContext|undefined}\n   * @api\n   */\n  this.vectorContext = opt_vectorContext;\n\n  /**\n   * An object representing the current render frame state.\n   * @type {module:ol/PluggableMap~FrameState|undefined}\n   * @api\n   */\n  this.frameState = opt_frameState;\n\n  /**\n   * Canvas context. Only available when a Canvas renderer is used, null\n   * otherwise.\n   * @type {CanvasRenderingContext2D|null|undefined}\n   * @api\n   */\n  this.context = opt_context;\n\n  /**\n   * WebGL context. Only available when a WebGL renderer is used, null\n   * otherwise.\n   * @type {module:ol/webgl/Context|null|undefined}\n   * @api\n   */\n  this.glContext = opt_glContext;\n\n};\n\ninherits(RenderEvent, Event);\nexport default RenderEvent;\n","/**\n * @module ol/geom/flat/intersectsextent\n */\nimport {containsExtent, createEmpty, extendFlatCoordinates, intersects, intersectsSegment} from '../../extent.js';\nimport {linearRingContainsXY, linearRingContainsExtent} from '../flat/contains.js';\nimport {forEach as forEachSegment} from '../flat/segments.js';\n\n\n/**\n * @param {Array.<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {number} end End.\n * @param {number} stride Stride.\n * @param {module:ol/extent~Extent} extent Extent.\n * @return {boolean} True if the geometry and the extent intersect.\n */\nexport function intersectsLineString(flatCoordinates, offset, end, stride, extent) {\n  const coordinatesExtent = extendFlatCoordinates(\n    createEmpty(), flatCoordinates, offset, end, stride);\n  if (!intersects(extent, coordinatesExtent)) {\n    return false;\n  }\n  if (containsExtent(extent, coordinatesExtent)) {\n    return true;\n  }\n  if (coordinatesExtent[0] >= extent[0] &&\n      coordinatesExtent[2] <= extent[2]) {\n    return true;\n  }\n  if (coordinatesExtent[1] >= extent[1] &&\n      coordinatesExtent[3] <= extent[3]) {\n    return true;\n  }\n  return forEachSegment(flatCoordinates, offset, end, stride,\n    /**\n     * @param {module:ol/coordinate~Coordinate} point1 Start point.\n     * @param {module:ol/coordinate~Coordinate} point2 End point.\n     * @return {boolean} `true` if the segment and the extent intersect,\n     *     `false` otherwise.\n     */\n    function(point1, point2) {\n      return intersectsSegment(extent, point1, point2);\n    });\n}\n\n\n/**\n * @param {Array.<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {Array.<number>} ends Ends.\n * @param {number} stride Stride.\n * @param {module:ol/extent~Extent} extent Extent.\n * @return {boolean} True if the geometry and the extent intersect.\n */\nexport function intersectsLineStringArray(flatCoordinates, offset, ends, stride, extent) {\n  for (let i = 0, ii = ends.length; i < ii; ++i) {\n    if (intersectsLineString(\n      flatCoordinates, offset, ends[i], stride, extent)) {\n      return true;\n    }\n    offset = ends[i];\n  }\n  return false;\n}\n\n\n/**\n * @param {Array.<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {number} end End.\n * @param {number} stride Stride.\n * @param {module:ol/extent~Extent} extent Extent.\n * @return {boolean} True if the geometry and the extent intersect.\n */\nexport function intersectsLinearRing(flatCoordinates, offset, end, stride, extent) {\n  if (intersectsLineString(\n    flatCoordinates, offset, end, stride, extent)) {\n    return true;\n  }\n  if (linearRingContainsXY(flatCoordinates, offset, end, stride, extent[0], extent[1])) {\n    return true;\n  }\n  if (linearRingContainsXY(flatCoordinates, offset, end, stride, extent[0], extent[3])) {\n    return true;\n  }\n  if (linearRingContainsXY(flatCoordinates, offset, end, stride, extent[2], extent[1])) {\n    return true;\n  }\n  if (linearRingContainsXY(flatCoordinates, offset, end, stride, extent[2], extent[3])) {\n    return true;\n  }\n  return false;\n}\n\n\n/**\n * @param {Array.<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {Array.<number>} ends Ends.\n * @param {number} stride Stride.\n * @param {module:ol/extent~Extent} extent Extent.\n * @return {boolean} True if the geometry and the extent intersect.\n */\nexport function intersectsLinearRingArray(flatCoordinates, offset, ends, stride, extent) {\n  if (!intersectsLinearRing(\n    flatCoordinates, offset, ends[0], stride, extent)) {\n    return false;\n  }\n  if (ends.length === 1) {\n    return true;\n  }\n  for (let i = 1, ii = ends.length; i < ii; ++i) {\n    if (linearRingContainsExtent(flatCoordinates, ends[i - 1], ends[i], stride, extent)) {\n      return false;\n    }\n  }\n  return true;\n}\n\n\n/**\n * @param {Array.<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {Array.<Array.<number>>} endss Endss.\n * @param {number} stride Stride.\n * @param {module:ol/extent~Extent} extent Extent.\n * @return {boolean} True if the geometry and the extent intersect.\n */\nexport function intersectsLinearRingMultiArray(flatCoordinates, offset, endss, stride, extent) {\n  for (let i = 0, ii = endss.length; i < ii; ++i) {\n    const ends = endss[i];\n    if (intersectsLinearRingArray(\n      flatCoordinates, offset, ends, stride, extent)) {\n      return true;\n    }\n    offset = ends[ends.length - 1];\n  }\n  return false;\n}\n","/**\n * @module ol/geom/flat/area\n */\n\n\n/**\n * @param {Array.<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {number} end End.\n * @param {number} stride Stride.\n * @return {number} Area.\n */\nexport function linearRing(flatCoordinates, offset, end, stride) {\n  let twiceArea = 0;\n  let x1 = flatCoordinates[end - stride];\n  let y1 = flatCoordinates[end - stride + 1];\n  for (; offset < end; offset += stride) {\n    const x2 = flatCoordinates[offset];\n    const y2 = flatCoordinates[offset + 1];\n    twiceArea += y1 * x2 - x1 * y2;\n    x1 = x2;\n    y1 = y2;\n  }\n  return twiceArea / 2;\n}\n\n\n/**\n * @param {Array.<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {Array.<number>} ends Ends.\n * @param {number} stride Stride.\n * @return {number} Area.\n */\nexport function linearRings(flatCoordinates, offset, ends, stride) {\n  let area = 0;\n  for (let i = 0, ii = ends.length; i < ii; ++i) {\n    const end = ends[i];\n    area += linearRing(flatCoordinates, offset, end, stride);\n    offset = end;\n  }\n  return area;\n}\n\n\n/**\n * @param {Array.<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {Array.<Array.<number>>} endss Endss.\n * @param {number} stride Stride.\n * @return {number} Area.\n */\nexport function linearRingss(flatCoordinates, offset, endss, stride) {\n  let area = 0;\n  for (let i = 0, ii = endss.length; i < ii; ++i) {\n    const ends = endss[i];\n    area += linearRings(flatCoordinates, offset, ends, stride);\n    offset = ends[ends.length - 1];\n  }\n  return area;\n}\n","/**\n * @module ol/source/Raster\n */\nimport {getUid, inherits} from '../util.js';\nimport ImageCanvas from '../ImageCanvas.js';\nimport TileQueue from '../TileQueue.js';\nimport {createCanvasContext2D} from '../dom.js';\nimport {listen} from '../events.js';\nimport Event from '../events/Event.js';\nimport EventType from '../events/EventType.js';\nimport {Processor} from 'pixelworks/lib/index';\nimport {equals, getCenter, getHeight, getWidth} from '../extent.js';\nimport LayerType from '../LayerType.js';\nimport Layer from '../layer/Layer.js';\nimport ImageLayer from '../layer/Image.js';\nimport TileLayer from '../layer/Tile.js';\nimport {assign} from '../obj.js';\nimport CanvasImageLayerRenderer from '../renderer/canvas/ImageLayer.js';\nimport CanvasTileLayerRenderer from '../renderer/canvas/TileLayer.js';\nimport ImageSource from '../source/Image.js';\nimport SourceState from '../source/State.js';\nimport TileSource from '../source/Tile.js';\nimport {create as createTransform} from '../transform.js';\n\n\n/**\n * A function that takes an array of input data, performs some operation, and\n * returns an array of output data.\n * For `pixel` type operations, the function will be called with an array of\n * pixels, where each pixel is an array of four numbers (`[r, g, b, a]`) in the\n * range of 0 - 255. It should return a single pixel array.\n * For `'image'` type operations, functions will be called with an array of\n * {@link ImageData https://developer.mozilla.org/en-US/docs/Web/API/ImageData}\n * and should return a single {@link ImageData\n * https://developer.mozilla.org/en-US/docs/Web/API/ImageData}.  The operations\n * are called with a second \"data\" argument, which can be used for storage.  The\n * data object is accessible from raster events, where it can be initialized in\n * \"beforeoperations\" and accessed again in \"afteroperations\".\n *\n * @typedef {function((Array.<Array.<number>>|Array.<ImageData>), Object):\n *     (Array.<number>|ImageData)} Operation\n */\n\n\n/**\n * @enum {string}\n */\nconst RasterEventType = {\n  /**\n   * Triggered before operations are run.\n   * @event ol/source/Raster~RasterSourceEvent#beforeoperations\n   * @api\n   */\n  BEFOREOPERATIONS: 'beforeoperations',\n\n  /**\n   * Triggered after operations are run.\n   * @event ol/source/Raster~RasterSourceEvent#afteroperations\n   * @api\n   */\n  AFTEROPERATIONS: 'afteroperations'\n};\n\n\n/**\n * Raster operation type. Supported values are `'pixel'` and `'image'`.\n * @enum {string}\n */\nconst RasterOperationType = {\n  PIXEL: 'pixel',\n  IMAGE: 'image'\n};\n\n\n/**\n * @classdesc\n * Events emitted by {@link module:ol/source/Raster} instances are instances of this\n * type.\n *\n * @constructor\n * @extends {module:ol/events/Event}\n * @param {string} type Type.\n * @param {module:ol/PluggableMap~FrameState} frameState The frame state.\n * @param {Object} data An object made available to operations.\n */\nconst RasterSourceEvent = function(type, frameState, data) {\n  Event.call(this, type);\n\n  /**\n   * The raster extent.\n   * @type {module:ol/extent~Extent}\n   * @api\n   */\n  this.extent = frameState.extent;\n\n  /**\n   * The pixel resolution (map units per pixel).\n   * @type {number}\n   * @api\n   */\n  this.resolution = frameState.viewState.resolution / frameState.pixelRatio;\n\n  /**\n   * An object made available to all operations.  This can be used by operations\n   * as a storage object (e.g. for calculating statistics).\n   * @type {Object}\n   * @api\n   */\n  this.data = data;\n\n};\ninherits(RasterSourceEvent, Event);\n\n/**\n * @typedef {Object} Options\n * @property {Array.<module:ol/source/Source|module:ol/layer/Layer>} sources Input\n * sources or layers. Vector layers must be configured with `renderMode: 'image'`.\n * @property {module:ol/source/Raster~Operation} [operation] Raster operation.\n * The operation will be called with data from input sources\n * and the output will be assigned to the raster source.\n * @property {Object} [lib] Functions that will be made available to operations run in a worker.\n * @property {number} [threads] By default, operations will be run in a single worker thread.\n * To avoid using workers altogether, set `threads: 0`.  For pixel operations, operations can\n * be run in multiple worker threads.  Note that there is additional overhead in\n * transferring data to multiple workers, and that depending on the user's\n * system, it may not be possible to parallelize the work.\n * @property {module:ol/source/Raster~RasterOperationType} [operationType='pixel'] Operation type.\n * Supported values are `'pixel'` and `'image'`.  By default,\n * `'pixel'` operations are assumed, and operations will be called with an\n * array of pixels from input sources.  If set to `'image'`, operations will\n * be called with an array of ImageData objects from input sources.\n */\n\n\n/**\n * @classdesc\n * A source that transforms data from any number of input sources using an\n * {@link module:ol/source/Raster~Operation} function to transform input pixel values into\n * output pixel values.\n *\n * @constructor\n * @extends {module:ol/source/Image}\n * @fires ol/source/Raster~RasterSourceEvent\n * @param {module:ol/source/Raster~Options=} options Options.\n * @api\n */\nconst RasterSource = function(options) {\n\n  /**\n   * @private\n   * @type {*}\n   */\n  this.worker_ = null;\n\n  /**\n   * @private\n   * @type {module:ol/source/Raster~RasterOperationType}\n   */\n  this.operationType_ = options.operationType !== undefined ?\n    options.operationType : RasterOperationType.PIXEL;\n\n  /**\n   * @private\n   * @type {number}\n   */\n  this.threads_ = options.threads !== undefined ? options.threads : 1;\n\n  /**\n   * @private\n   * @type {Array.<module:ol/renderer/canvas/Layer>}\n   */\n  this.renderers_ = createRenderers(options.sources);\n\n  for (let r = 0, rr = this.renderers_.length; r < rr; ++r) {\n    listen(this.renderers_[r], EventType.CHANGE,\n      this.changed, this);\n  }\n\n  /**\n   * @private\n   * @type {module:ol/TileQueue}\n   */\n  this.tileQueue_ = new TileQueue(\n    function() {\n      return 1;\n    },\n    this.changed.bind(this));\n\n  const layerStatesArray = getLayerStatesArray(this.renderers_);\n  const layerStates = {};\n  for (let i = 0, ii = layerStatesArray.length; i < ii; ++i) {\n    layerStates[getUid(layerStatesArray[i].layer)] = layerStatesArray[i];\n  }\n\n  /**\n   * The most recently requested frame state.\n   * @type {module:ol/PluggableMap~FrameState}\n   * @private\n   */\n  this.requestedFrameState_;\n\n  /**\n   * The most recently rendered image canvas.\n   * @type {module:ol/ImageCanvas}\n   * @private\n   */\n  this.renderedImageCanvas_ = null;\n\n  /**\n   * The most recently rendered revision.\n   * @type {number}\n   */\n  this.renderedRevision_;\n\n  /**\n   * @private\n   * @type {module:ol/PluggableMap~FrameState}\n   */\n  this.frameState_ = {\n    animate: false,\n    coordinateToPixelTransform: createTransform(),\n    extent: null,\n    focus: null,\n    index: 0,\n    layerStates: layerStates,\n    layerStatesArray: layerStatesArray,\n    pixelRatio: 1,\n    pixelToCoordinateTransform: createTransform(),\n    postRenderFunctions: [],\n    size: [0, 0],\n    skippedFeatureUids: {},\n    tileQueue: this.tileQueue_,\n    time: Date.now(),\n    usedTiles: {},\n    viewState: /** @type {module:ol/View~State} */ ({\n      rotation: 0\n    }),\n    viewHints: [],\n    wantedTiles: {}\n  };\n\n  ImageSource.call(this, {});\n\n  if (options.operation !== undefined) {\n    this.setOperation(options.operation, options.lib);\n  }\n\n};\n\ninherits(RasterSource, ImageSource);\n\n\n/**\n * Set the operation.\n * @param {module:ol/source/Raster~Operation} operation New operation.\n * @param {Object=} opt_lib Functions that will be available to operations run\n *     in a worker.\n * @api\n */\nRasterSource.prototype.setOperation = function(operation, opt_lib) {\n  this.worker_ = new Processor({\n    operation: operation,\n    imageOps: this.operationType_ === RasterOperationType.IMAGE,\n    queue: 1,\n    lib: opt_lib,\n    threads: this.threads_\n  });\n  this.changed();\n};\n\n\n/**\n * Update the stored frame state.\n * @param {module:ol/extent~Extent} extent The view extent (in map units).\n * @param {number} resolution The view resolution.\n * @param {module:ol/proj/Projection} projection The view projection.\n * @return {module:ol/PluggableMap~FrameState} The updated frame state.\n * @private\n */\nRasterSource.prototype.updateFrameState_ = function(extent, resolution, projection) {\n\n  const frameState = /** @type {module:ol/PluggableMap~FrameState} */ (assign({}, this.frameState_));\n\n  frameState.viewState = /** @type {module:ol/View~State} */ (assign({}, frameState.viewState));\n\n  const center = getCenter(extent);\n\n  frameState.extent = extent.slice();\n  frameState.focus = center;\n  frameState.size[0] = Math.round(getWidth(extent) / resolution);\n  frameState.size[1] = Math.round(getHeight(extent) / resolution);\n  frameState.time = Date.now();\n  frameState.animate = false;\n\n  const viewState = frameState.viewState;\n  viewState.center = center;\n  viewState.projection = projection;\n  viewState.resolution = resolution;\n  return frameState;\n};\n\n\n/**\n * Determine if all sources are ready.\n * @return {boolean} All sources are ready.\n * @private\n */\nRasterSource.prototype.allSourcesReady_ = function() {\n  let ready = true;\n  let source;\n  for (let i = 0, ii = this.renderers_.length; i < ii; ++i) {\n    source = this.renderers_[i].getLayer().getSource();\n    if (source.getState() !== SourceState.READY) {\n      ready = false;\n      break;\n    }\n  }\n  return ready;\n};\n\n\n/**\n * @inheritDoc\n */\nRasterSource.prototype.getImage = function(extent, resolution, pixelRatio, projection) {\n  if (!this.allSourcesReady_()) {\n    return null;\n  }\n\n  const frameState = this.updateFrameState_(extent, resolution, projection);\n  this.requestedFrameState_ = frameState;\n\n  // check if we can't reuse the existing ol/ImageCanvas\n  if (this.renderedImageCanvas_) {\n    const renderedResolution = this.renderedImageCanvas_.getResolution();\n    const renderedExtent = this.renderedImageCanvas_.getExtent();\n    if (resolution !== renderedResolution || !equals(extent, renderedExtent)) {\n      this.renderedImageCanvas_ = null;\n    }\n  }\n\n  if (!this.renderedImageCanvas_ || this.getRevision() !== this.renderedRevision_) {\n    this.processSources_();\n  }\n\n  frameState.tileQueue.loadMoreTiles(16, 16);\n\n  if (frameState.animate) {\n    requestAnimationFrame(this.changed.bind(this));\n  }\n\n  return this.renderedImageCanvas_;\n};\n\n\n/**\n * Start processing source data.\n * @private\n */\nRasterSource.prototype.processSources_ = function() {\n  const frameState = this.requestedFrameState_;\n  const len = this.renderers_.length;\n  const imageDatas = new Array(len);\n  for (let i = 0; i < len; ++i) {\n    const imageData = getImageData(\n      this.renderers_[i], frameState, frameState.layerStatesArray[i]);\n    if (imageData) {\n      imageDatas[i] = imageData;\n    } else {\n      return;\n    }\n  }\n\n  const data = {};\n  this.dispatchEvent(new RasterSourceEvent(RasterEventType.BEFOREOPERATIONS, frameState, data));\n  this.worker_.process(imageDatas, data, this.onWorkerComplete_.bind(this, frameState));\n};\n\n\n/**\n * Called when pixel processing is complete.\n * @param {module:ol/PluggableMap~FrameState} frameState The frame state.\n * @param {Error} err Any error during processing.\n * @param {ImageData} output The output image data.\n * @param {Object} data The user data.\n * @private\n */\nRasterSource.prototype.onWorkerComplete_ = function(frameState, err, output, data) {\n  if (err || !output) {\n    return;\n  }\n\n  // do nothing if extent or resolution changed\n  const extent = frameState.extent;\n  const resolution = frameState.viewState.resolution;\n  if (resolution !== this.requestedFrameState_.viewState.resolution ||\n      !equals(extent, this.requestedFrameState_.extent)) {\n    return;\n  }\n\n  let context;\n  if (this.renderedImageCanvas_) {\n    context = this.renderedImageCanvas_.getImage().getContext('2d');\n  } else {\n    const width = Math.round(getWidth(extent) / resolution);\n    const height = Math.round(getHeight(extent) / resolution);\n    context = createCanvasContext2D(width, height);\n    this.renderedImageCanvas_ = new ImageCanvas(extent, resolution, 1, context.canvas);\n  }\n  context.putImageData(output, 0, 0);\n\n  this.changed();\n  this.renderedRevision_ = this.getRevision();\n\n  this.dispatchEvent(new RasterSourceEvent(RasterEventType.AFTEROPERATIONS, frameState, data));\n};\n\n\n/**\n * A reusable canvas context.\n * @type {CanvasRenderingContext2D}\n * @private\n */\nlet sharedContext = null;\n\n\n/**\n * Get image data from a renderer.\n * @param {module:ol/renderer/canvas/Layer} renderer Layer renderer.\n * @param {module:ol/PluggableMap~FrameState} frameState The frame state.\n * @param {module:ol/layer/Layer~State} layerState The layer state.\n * @return {ImageData} The image data.\n */\nfunction getImageData(renderer, frameState, layerState) {\n  if (!renderer.prepareFrame(frameState, layerState)) {\n    return null;\n  }\n  const width = frameState.size[0];\n  const height = frameState.size[1];\n  if (!sharedContext) {\n    sharedContext = createCanvasContext2D(width, height);\n  } else {\n    const canvas = sharedContext.canvas;\n    if (canvas.width !== width || canvas.height !== height) {\n      sharedContext = createCanvasContext2D(width, height);\n    } else {\n      sharedContext.clearRect(0, 0, width, height);\n    }\n  }\n  renderer.composeFrame(frameState, layerState, sharedContext);\n  return sharedContext.getImageData(0, 0, width, height);\n}\n\n\n/**\n * Get a list of layer states from a list of renderers.\n * @param {Array.<module:ol/renderer/canvas/Layer>} renderers Layer renderers.\n * @return {Array.<module:ol/layer/Layer~State>} The layer states.\n */\nfunction getLayerStatesArray(renderers) {\n  return renderers.map(function(renderer) {\n    return renderer.getLayer().getLayerState();\n  });\n}\n\n\n/**\n * Create renderers for all sources.\n * @param {Array.<module:ol/source/Source>} sources The sources.\n * @return {Array.<module:ol/renderer/canvas/Layer>} Array of layer renderers.\n */\nfunction createRenderers(sources) {\n  const len = sources.length;\n  const renderers = new Array(len);\n  for (let i = 0; i < len; ++i) {\n    renderers[i] = createRenderer(sources[i]);\n  }\n  return renderers;\n}\n\n\n/**\n * Create a renderer for the provided source.\n * @param {module:ol/source/Source} source The source.\n * @return {module:ol/renderer/canvas/Layer} The renderer.\n */\nfunction createRenderer(source) {\n  let renderer = null;\n  if (source instanceof TileSource) {\n    renderer = createTileRenderer(source);\n  } else if (source instanceof ImageSource) {\n    renderer = createImageRenderer(source);\n  } else if (source instanceof TileLayer) {\n    renderer = new CanvasTileLayerRenderer(source);\n  } else if (source instanceof Layer &&\n      (source.getType() == LayerType.IMAGE || source.getType() == LayerType.VECTOR)) {\n    renderer = new CanvasImageLayerRenderer(source);\n  }\n  return renderer;\n}\n\n\n/**\n * Create an image renderer for the provided source.\n * @param {module:ol/source/Image} source The source.\n * @return {module:ol/renderer/canvas/Layer} The renderer.\n */\nfunction createImageRenderer(source) {\n  const layer = new ImageLayer({source: source});\n  return new CanvasImageLayerRenderer(layer);\n}\n\n\n/**\n * Create a tile renderer for the provided source.\n * @param {module:ol/source/Tile} source The source.\n * @return {module:ol/renderer/canvas/Layer} The renderer.\n */\nfunction createTileRenderer(source) {\n  const layer = new TileLayer({source: source});\n  return new CanvasTileLayerRenderer(layer);\n}\n\n\n/**\n * @override\n */\nRasterSource.prototype.getImageInternal = function() {\n  return null; // not implemented\n};\n\n\nexport default RasterSource;\n","/**\n * @module ol/pointer/MouseSource\n */\n// Based on https://github.com/Polymer/PointerEvents\n\n// Copyright (c) 2013 The Polymer Authors. All rights reserved.\n//\n// Redistribution and use in source and binary forms, with or without\n// modification, are permitted provided that the following conditions are\n// met:\n//\n// * Redistributions of source code must retain the above copyright\n// notice, this list of conditions and the following disclaimer.\n// * Redistributions in binary form must reproduce the above\n// copyright notice, this list of conditions and the following disclaimer\n// in the documentation and/or other materials provided with the\n// distribution.\n// * Neither the name of Google Inc. nor the names of its\n// contributors may be used to endorse or promote products derived from\n// this software without specific prior written permission.\n//\n// THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS\n// \"AS IS\" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT\n// LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR\n// A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT\n// OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,\n// SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT\n// LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,\n// DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY\n// THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n// (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE\n// OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n\nimport {inherits} from '../util.js';\nimport EventSource from '../pointer/EventSource.js';\n\n/**\n * @param {module:ol/pointer/PointerEventHandler} dispatcher Event handler.\n * @constructor\n * @extends {module:ol/pointer/EventSource}\n */\nconst MouseSource = function(dispatcher) {\n  const mapping = {\n    'mousedown': this.mousedown,\n    'mousemove': this.mousemove,\n    'mouseup': this.mouseup,\n    'mouseover': this.mouseover,\n    'mouseout': this.mouseout\n  };\n  EventSource.call(this, dispatcher, mapping);\n\n  /**\n   * @const\n   * @type {!Object.<string, Event|Object>}\n   */\n  this.pointerMap = dispatcher.pointerMap;\n\n  /**\n   * @const\n   * @type {Array.<module:ol~Pixel>}\n   */\n  this.lastTouches = [];\n};\n\ninherits(MouseSource, EventSource);\n\n\n/**\n * @type {number}\n */\nexport const POINTER_ID = 1;\n\n\n/**\n * @type {string}\n */\nexport const POINTER_TYPE = 'mouse';\n\n\n/**\n * Radius around touchend that swallows mouse events.\n *\n * @type {number}\n */\nconst DEDUP_DIST = 25;\n\n\n/**\n * Detect if a mouse event was simulated from a touch by\n * checking if previously there was a touch event at the\n * same position.\n *\n * FIXME - Known problem with the native Android browser on\n * Samsung GT-I9100 (Android 4.1.2):\n * In case the page is scrolled, this function does not work\n * correctly when a canvas is used (WebGL or canvas renderer).\n * Mouse listeners on canvas elements (for this browser), create\n * two mouse events: One 'good' and one 'bad' one (on other browsers or\n * when a div is used, there is only one event). For the 'bad' one,\n * clientX/clientY and also pageX/pageY are wrong when the page\n * is scrolled. Because of that, this function can not detect if\n * the events were simulated from a touch event. As result, a\n * pointer event at a wrong position is dispatched, which confuses\n * the map interactions.\n * It is unclear, how one can get the correct position for the event\n * or detect that the positions are invalid.\n *\n * @private\n * @param {Event} inEvent The in event.\n * @return {boolean} True, if the event was generated by a touch.\n */\nMouseSource.prototype.isEventSimulatedFromTouch_ = function(inEvent) {\n  const lts = this.lastTouches;\n  const x = inEvent.clientX;\n  const y = inEvent.clientY;\n  for (let i = 0, l = lts.length, t; i < l && (t = lts[i]); i++) {\n    // simulated mouse events will be swallowed near a primary touchend\n    const dx = Math.abs(x - t[0]);\n    const dy = Math.abs(y - t[1]);\n    if (dx <= DEDUP_DIST && dy <= DEDUP_DIST) {\n      return true;\n    }\n  }\n  return false;\n};\n\n\n/**\n * Creates a copy of the original event that will be used\n * for the fake pointer event.\n *\n * @param {Event} inEvent The in event.\n * @param {module:ol/pointer/PointerEventHandler} dispatcher Event handler.\n * @return {Object} The copied event.\n */\nfunction prepareEvent(inEvent, dispatcher) {\n  const e = dispatcher.cloneEvent(inEvent, inEvent);\n\n  // forward mouse preventDefault\n  const pd = e.preventDefault;\n  e.preventDefault = function() {\n    inEvent.preventDefault();\n    pd();\n  };\n\n  e.pointerId = POINTER_ID;\n  e.isPrimary = true;\n  e.pointerType = POINTER_TYPE;\n\n  return e;\n}\n\n\n/**\n * Handler for `mousedown`.\n *\n * @param {Event} inEvent The in event.\n */\nMouseSource.prototype.mousedown = function(inEvent) {\n  if (!this.isEventSimulatedFromTouch_(inEvent)) {\n    // TODO(dfreedman) workaround for some elements not sending mouseup\n    // http://crbug/149091\n    if (POINTER_ID.toString() in this.pointerMap) {\n      this.cancel(inEvent);\n    }\n    const e = prepareEvent(inEvent, this.dispatcher);\n    this.pointerMap[POINTER_ID.toString()] = inEvent;\n    this.dispatcher.down(e, inEvent);\n  }\n};\n\n\n/**\n * Handler for `mousemove`.\n *\n * @param {Event} inEvent The in event.\n */\nMouseSource.prototype.mousemove = function(inEvent) {\n  if (!this.isEventSimulatedFromTouch_(inEvent)) {\n    const e = prepareEvent(inEvent, this.dispatcher);\n    this.dispatcher.move(e, inEvent);\n  }\n};\n\n\n/**\n * Handler for `mouseup`.\n *\n * @param {Event} inEvent The in event.\n */\nMouseSource.prototype.mouseup = function(inEvent) {\n  if (!this.isEventSimulatedFromTouch_(inEvent)) {\n    const p = this.pointerMap[POINTER_ID.toString()];\n\n    if (p && p.button === inEvent.button) {\n      const e = prepareEvent(inEvent, this.dispatcher);\n      this.dispatcher.up(e, inEvent);\n      this.cleanupMouse();\n    }\n  }\n};\n\n\n/**\n * Handler for `mouseover`.\n *\n * @param {Event} inEvent The in event.\n */\nMouseSource.prototype.mouseover = function(inEvent) {\n  if (!this.isEventSimulatedFromTouch_(inEvent)) {\n    const e = prepareEvent(inEvent, this.dispatcher);\n    this.dispatcher.enterOver(e, inEvent);\n  }\n};\n\n\n/**\n * Handler for `mouseout`.\n *\n * @param {Event} inEvent The in event.\n */\nMouseSource.prototype.mouseout = function(inEvent) {\n  if (!this.isEventSimulatedFromTouch_(inEvent)) {\n    const e = prepareEvent(inEvent, this.dispatcher);\n    this.dispatcher.leaveOut(e, inEvent);\n  }\n};\n\n\n/**\n * Dispatches a `pointercancel` event.\n *\n * @param {Event} inEvent The in event.\n */\nMouseSource.prototype.cancel = function(inEvent) {\n  const e = prepareEvent(inEvent, this.dispatcher);\n  this.dispatcher.cancel(e, inEvent);\n  this.cleanupMouse();\n};\n\n\n/**\n * Remove the mouse from the list of active pointers.\n */\nMouseSource.prototype.cleanupMouse = function() {\n  delete this.pointerMap[POINTER_ID.toString()];\n};\nexport default MouseSource;\n","/**\n * @license\n * Latitude/longitude spherical geodesy formulae taken from\n * http://www.movable-type.co.uk/scripts/latlong.html\n * Licensed under CC-BY-3.0.\n */\n\n/**\n * @module ol/sphere\n */\nimport {toRadians, toDegrees} from './math.js';\nimport GeometryType from './geom/GeometryType.js';\n\n\n/**\n * Object literal with options for the {@link getLength} or {@link getArea}\n * functions.\n * @typedef {Object} SphereMetricOptions\n * @property {module:ol/proj~ProjectionLike} [projection='EPSG:3857']\n * Projection of the  geometry.  By default, the geometry is assumed to be in\n * Web Mercator.\n * @property {number} [radius=6371008.8] Sphere radius.  By default, the radius of the\n * earth is used (Clarke 1866 Authalic Sphere).\n */\n\n\n/**\n * The mean Earth radius (1/3 * (2a + b)) for the WGS84 ellipsoid.\n * https://en.wikipedia.org/wiki/Earth_radius#Mean_radius\n * @type {number}\n */\nexport const DEFAULT_RADIUS = 6371008.8;\n\n\n/**\n * Get the great circle distance (in meters) between two geographic coordinates.\n * @param {Array} c1 Starting coordinate.\n * @param {Array} c2 Ending coordinate.\n * @param {number=} opt_radius The sphere radius to use.  Defaults to the Earth's\n *     mean radius using the WGS84 ellipsoid.\n * @return {number} The great circle distance between the points (in meters).\n * @api\n */\nexport function getDistance(c1, c2, opt_radius) {\n  const radius = opt_radius || DEFAULT_RADIUS;\n  const lat1 = toRadians(c1[1]);\n  const lat2 = toRadians(c2[1]);\n  const deltaLatBy2 = (lat2 - lat1) / 2;\n  const deltaLonBy2 = toRadians(c2[0] - c1[0]) / 2;\n  const a = Math.sin(deltaLatBy2) * Math.sin(deltaLatBy2) +\n      Math.sin(deltaLonBy2) * Math.sin(deltaLonBy2) *\n      Math.cos(lat1) * Math.cos(lat2);\n  return 2 * radius * Math.atan2(Math.sqrt(a), Math.sqrt(1 - a));\n}\n\n\n/**\n * Get the cumulative great circle length of linestring coordinates (geographic).\n * @param {Array} coordinates Linestring coordinates.\n * @param {number} radius The sphere radius to use.\n * @return {number} The length (in meters).\n */\nfunction getLengthInternal(coordinates, radius) {\n  let length = 0;\n  for (let i = 0, ii = coordinates.length; i < ii - 1; ++i) {\n    length += getDistance(coordinates[i], coordinates[i + 1], radius);\n  }\n  return length;\n}\n\n\n/**\n * Get the spherical length of a geometry.  This length is the sum of the\n * great circle distances between coordinates.  For polygons, the length is\n * the sum of all rings.  For points, the length is zero.  For multi-part\n * geometries, the length is the sum of the length of each part.\n * @param {module:ol/geom/Geometry} geometry A geometry.\n * @param {module:ol/sphere~SphereMetricOptions=} opt_options Options for the\n * length calculation.  By default, geometries are assumed to be in 'EPSG:3857'.\n * You can change this by providing a `projection` option.\n * @return {number} The spherical length (in meters).\n * @api\n */\nexport function getLength(geometry, opt_options) {\n  const options = opt_options || {};\n  const radius = options.radius || DEFAULT_RADIUS;\n  const projection = options.projection || 'EPSG:3857';\n  const type = geometry.getType();\n  if (type !== GeometryType.GEOMETRY_COLLECTION) {\n    geometry = geometry.clone().transform(projection, 'EPSG:4326');\n  }\n  let length = 0;\n  let coordinates, coords, i, ii, j, jj;\n  switch (type) {\n    case GeometryType.POINT:\n    case GeometryType.MULTI_POINT: {\n      break;\n    }\n    case GeometryType.LINE_STRING:\n    case GeometryType.LINEAR_RING: {\n      coordinates = /** @type {module:ol/geom/SimpleGeometry} */ (geometry).getCoordinates();\n      length = getLengthInternal(coordinates, radius);\n      break;\n    }\n    case GeometryType.MULTI_LINE_STRING:\n    case GeometryType.POLYGON: {\n      coordinates = /** @type {module:ol/geom/SimpleGeometry} */ (geometry).getCoordinates();\n      for (i = 0, ii = coordinates.length; i < ii; ++i) {\n        length += getLengthInternal(coordinates[i], radius);\n      }\n      break;\n    }\n    case GeometryType.MULTI_POLYGON: {\n      coordinates = /** @type {module:ol/geom/SimpleGeometry} */ (geometry).getCoordinates();\n      for (i = 0, ii = coordinates.length; i < ii; ++i) {\n        coords = coordinates[i];\n        for (j = 0, jj = coords.length; j < jj; ++j) {\n          length += getLengthInternal(coords[j], radius);\n        }\n      }\n      break;\n    }\n    case GeometryType.GEOMETRY_COLLECTION: {\n      const geometries = /** @type {module:ol/geom/GeometryCollection} */ (geometry).getGeometries();\n      for (i = 0, ii = geometries.length; i < ii; ++i) {\n        length += getLength(geometries[i], opt_options);\n      }\n      break;\n    }\n    default: {\n      throw new Error('Unsupported geometry type: ' + type);\n    }\n  }\n  return length;\n}\n\n\n/**\n * Returns the spherical area for a list of coordinates.\n *\n * [Reference](https://trs-new.jpl.nasa.gov/handle/2014/40409)\n * Robert. G. Chamberlain and William H. Duquette, \"Some Algorithms for\n * Polygons on a Sphere\", JPL Publication 07-03, Jet Propulsion\n * Laboratory, Pasadena, CA, June 2007\n *\n * @param {Array.<module:ol/coordinate~Coordinate>} coordinates List of coordinates of a linear\n * ring. If the ring is oriented clockwise, the area will be positive,\n * otherwise it will be negative.\n * @param {number} radius The sphere radius.\n * @return {number} Area (in square meters).\n */\nfunction getAreaInternal(coordinates, radius) {\n  let area = 0;\n  const len = coordinates.length;\n  let x1 = coordinates[len - 1][0];\n  let y1 = coordinates[len - 1][1];\n  for (let i = 0; i < len; i++) {\n    const x2 = coordinates[i][0];\n    const y2 = coordinates[i][1];\n    area += toRadians(x2 - x1) *\n        (2 + Math.sin(toRadians(y1)) +\n        Math.sin(toRadians(y2)));\n    x1 = x2;\n    y1 = y2;\n  }\n  return area * radius * radius / 2.0;\n}\n\n\n/**\n * Get the spherical area of a geometry.  This is the area (in meters) assuming\n * that polygon edges are segments of great circles on a sphere.\n * @param {module:ol/geom/Geometry} geometry A geometry.\n * @param {module:ol/sphere~SphereMetricOptions=} opt_options Options for the area\n *     calculation.  By default, geometries are assumed to be in 'EPSG:3857'.\n *     You can change this by providing a `projection` option.\n * @return {number} The spherical area (in square meters).\n * @api\n */\nexport function getArea(geometry, opt_options) {\n  const options = opt_options || {};\n  const radius = options.radius || DEFAULT_RADIUS;\n  const projection = options.projection || 'EPSG:3857';\n  const type = geometry.getType();\n  if (type !== GeometryType.GEOMETRY_COLLECTION) {\n    geometry = geometry.clone().transform(projection, 'EPSG:4326');\n  }\n  let area = 0;\n  let coordinates, coords, i, ii, j, jj;\n  switch (type) {\n    case GeometryType.POINT:\n    case GeometryType.MULTI_POINT:\n    case GeometryType.LINE_STRING:\n    case GeometryType.MULTI_LINE_STRING:\n    case GeometryType.LINEAR_RING: {\n      break;\n    }\n    case GeometryType.POLYGON: {\n      coordinates = /** @type {module:ol/geom/Polygon} */ (geometry).getCoordinates();\n      area = Math.abs(getAreaInternal(coordinates[0], radius));\n      for (i = 1, ii = coordinates.length; i < ii; ++i) {\n        area -= Math.abs(getAreaInternal(coordinates[i], radius));\n      }\n      break;\n    }\n    case GeometryType.MULTI_POLYGON: {\n      coordinates = /** @type {module:ol/geom/SimpleGeometry} */ (geometry).getCoordinates();\n      for (i = 0, ii = coordinates.length; i < ii; ++i) {\n        coords = coordinates[i];\n        area += Math.abs(getAreaInternal(coords[0], radius));\n        for (j = 1, jj = coords.length; j < jj; ++j) {\n          area -= Math.abs(getAreaInternal(coords[j], radius));\n        }\n      }\n      break;\n    }\n    case GeometryType.GEOMETRY_COLLECTION: {\n      const geometries = /** @type {module:ol/geom/GeometryCollection} */ (geometry).getGeometries();\n      for (i = 0, ii = geometries.length; i < ii; ++i) {\n        area += getArea(geometries[i], opt_options);\n      }\n      break;\n    }\n    default: {\n      throw new Error('Unsupported geometry type: ' + type);\n    }\n  }\n  return area;\n}\n\n\n/**\n * Returns the coordinate at the given distance and bearing from `c1`.\n *\n * @param {module:ol/coordinate~Coordinate} c1 The origin point (`[lon, lat]` in degrees).\n * @param {number} distance The great-circle distance between the origin\n *     point and the target point.\n * @param {number} bearing The bearing (in radians).\n * @param {number=} opt_radius The sphere radius to use.  Defaults to the Earth's\n *     mean radius using the WGS84 ellipsoid.\n * @return {module:ol/coordinate~Coordinate} The target point.\n */\nexport function offset(c1, distance, bearing, opt_radius) {\n  const radius = opt_radius || DEFAULT_RADIUS;\n  const lat1 = toRadians(c1[1]);\n  const lon1 = toRadians(c1[0]);\n  const dByR = distance / radius;\n  const lat = Math.asin(\n    Math.sin(lat1) * Math.cos(dByR) +\n      Math.cos(lat1) * Math.sin(dByR) * Math.cos(bearing));\n  const lon = lon1 + Math.atan2(\n    Math.sin(bearing) * Math.sin(dByR) * Math.cos(lat1),\n    Math.cos(dByR) - Math.sin(lat1) * Math.sin(lat));\n  return [toDegrees(lon), toDegrees(lat)];\n}\n","/**\n * @module ol/style/IconImage\n */\nimport {inherits} from '../util.js';\nimport {createCanvasContext2D} from '../dom.js';\nimport {listenOnce, unlistenByKey} from '../events.js';\nimport EventTarget from '../events/EventTarget.js';\nimport EventType from '../events/EventType.js';\nimport ImageState from '../ImageState.js';\nimport {shared as iconImageCache} from '../style/IconImageCache.js';\n\n/**\n * @constructor\n * @param {Image|HTMLCanvasElement} image Image.\n * @param {string|undefined} src Src.\n * @param {module:ol/size~Size} size Size.\n * @param {?string} crossOrigin Cross origin.\n * @param {module:ol/ImageState} imageState Image state.\n * @param {module:ol/color~Color} color Color.\n * @extends {module:ol/events/EventTarget}\n */\nconst IconImage = function(image, src, size, crossOrigin, imageState, color) {\n\n  EventTarget.call(this);\n\n  /**\n   * @private\n   * @type {Image|HTMLCanvasElement}\n   */\n  this.hitDetectionImage_ = null;\n\n  /**\n   * @private\n   * @type {Image|HTMLCanvasElement}\n   */\n  this.image_ = !image ? new Image() : image;\n\n  if (crossOrigin !== null) {\n    this.image_.crossOrigin = crossOrigin;\n  }\n\n  /**\n   * @private\n   * @type {HTMLCanvasElement}\n   */\n  this.canvas_ = color ?\n    /** @type {HTMLCanvasElement} */ (document.createElement('CANVAS')) :\n    null;\n\n  /**\n   * @private\n   * @type {module:ol/color~Color}\n   */\n  this.color_ = color;\n\n  /**\n   * @private\n   * @type {Array.<module:ol/events~EventsKey>}\n   */\n  this.imageListenerKeys_ = null;\n\n  /**\n   * @private\n   * @type {module:ol/ImageState}\n   */\n  this.imageState_ = imageState;\n\n  /**\n   * @private\n   * @type {module:ol/size~Size}\n   */\n  this.size_ = size;\n\n  /**\n   * @private\n   * @type {string|undefined}\n   */\n  this.src_ = src;\n\n  /**\n   * @private\n   * @type {boolean}\n   */\n  this.tainting_ = false;\n  if (this.imageState_ == ImageState.LOADED) {\n    this.determineTainting_();\n  }\n\n};\n\ninherits(IconImage, EventTarget);\n\n\n/**\n * @param {Image|HTMLCanvasElement} image Image.\n * @param {string} src Src.\n * @param {module:ol/size~Size} size Size.\n * @param {?string} crossOrigin Cross origin.\n * @param {module:ol/ImageState} imageState Image state.\n * @param {module:ol/color~Color} color Color.\n * @return {module:ol/style/IconImage} Icon image.\n */\nexport function get(image, src, size, crossOrigin, imageState, color) {\n  let iconImage = iconImageCache.get(src, crossOrigin, color);\n  if (!iconImage) {\n    iconImage = new IconImage(image, src, size, crossOrigin, imageState, color);\n    iconImageCache.set(src, crossOrigin, color, iconImage);\n  }\n  return iconImage;\n}\n\n\n/**\n * @private\n */\nIconImage.prototype.determineTainting_ = function() {\n  const context = createCanvasContext2D(1, 1);\n  try {\n    context.drawImage(this.image_, 0, 0);\n    context.getImageData(0, 0, 1, 1);\n  } catch (e) {\n    this.tainting_ = true;\n  }\n};\n\n\n/**\n * @private\n */\nIconImage.prototype.dispatchChangeEvent_ = function() {\n  this.dispatchEvent(EventType.CHANGE);\n};\n\n\n/**\n * @private\n */\nIconImage.prototype.handleImageError_ = function() {\n  this.imageState_ = ImageState.ERROR;\n  this.unlistenImage_();\n  this.dispatchChangeEvent_();\n};\n\n\n/**\n * @private\n */\nIconImage.prototype.handleImageLoad_ = function() {\n  this.imageState_ = ImageState.LOADED;\n  if (this.size_) {\n    this.image_.width = this.size_[0];\n    this.image_.height = this.size_[1];\n  }\n  this.size_ = [this.image_.width, this.image_.height];\n  this.unlistenImage_();\n  this.determineTainting_();\n  this.replaceColor_();\n  this.dispatchChangeEvent_();\n};\n\n\n/**\n * @param {number} pixelRatio Pixel ratio.\n * @return {Image|HTMLCanvasElement} Image or Canvas element.\n */\nIconImage.prototype.getImage = function(pixelRatio) {\n  return this.canvas_ ? this.canvas_ : this.image_;\n};\n\n\n/**\n * @return {module:ol/ImageState} Image state.\n */\nIconImage.prototype.getImageState = function() {\n  return this.imageState_;\n};\n\n\n/**\n * @param {number} pixelRatio Pixel ratio.\n * @return {Image|HTMLCanvasElement} Image element.\n */\nIconImage.prototype.getHitDetectionImage = function(pixelRatio) {\n  if (!this.hitDetectionImage_) {\n    if (this.tainting_) {\n      const width = this.size_[0];\n      const height = this.size_[1];\n      const context = createCanvasContext2D(width, height);\n      context.fillRect(0, 0, width, height);\n      this.hitDetectionImage_ = context.canvas;\n    } else {\n      this.hitDetectionImage_ = this.image_;\n    }\n  }\n  return this.hitDetectionImage_;\n};\n\n\n/**\n * @return {module:ol/size~Size} Image size.\n */\nIconImage.prototype.getSize = function() {\n  return this.size_;\n};\n\n\n/**\n * @return {string|undefined} Image src.\n */\nIconImage.prototype.getSrc = function() {\n  return this.src_;\n};\n\n\n/**\n * Load not yet loaded URI.\n */\nIconImage.prototype.load = function() {\n  if (this.imageState_ == ImageState.IDLE) {\n    this.imageState_ = ImageState.LOADING;\n    this.imageListenerKeys_ = [\n      listenOnce(this.image_, EventType.ERROR,\n        this.handleImageError_, this),\n      listenOnce(this.image_, EventType.LOAD,\n        this.handleImageLoad_, this)\n    ];\n    try {\n      this.image_.src = this.src_;\n    } catch (e) {\n      this.handleImageError_();\n    }\n  }\n};\n\n\n/**\n * @private\n */\nIconImage.prototype.replaceColor_ = function() {\n  if (this.tainting_ || this.color_ === null) {\n    return;\n  }\n\n  this.canvas_.width = this.image_.width;\n  this.canvas_.height = this.image_.height;\n\n  const ctx = this.canvas_.getContext('2d');\n  ctx.drawImage(this.image_, 0, 0);\n\n  const imgData = ctx.getImageData(0, 0, this.image_.width, this.image_.height);\n  const data = imgData.data;\n  const r = this.color_[0] / 255.0;\n  const g = this.color_[1] / 255.0;\n  const b = this.color_[2] / 255.0;\n\n  for (let i = 0, ii = data.length; i < ii; i += 4) {\n    data[i] *= r;\n    data[i + 1] *= g;\n    data[i + 2] *= b;\n  }\n  ctx.putImageData(imgData, 0, 0);\n};\n\n\n/**\n * Discards event handlers which listen for load completion or errors.\n *\n * @private\n */\nIconImage.prototype.unlistenImage_ = function() {\n  this.imageListenerKeys_.forEach(unlistenByKey);\n  this.imageListenerKeys_ = null;\n};\nexport default IconImage;\n","/**\n * @module ol/style/Icon\n */\nimport {getUid, inherits} from '../util.js';\nimport ImageState from '../ImageState.js';\nimport {assert} from '../asserts.js';\nimport {asArray} from '../color.js';\nimport {listen, unlisten} from '../events.js';\nimport EventType from '../events/EventType.js';\nimport IconAnchorUnits from '../style/IconAnchorUnits.js';\nimport {get as getIconImage} from '../style/IconImage.js';\nimport IconOrigin from '../style/IconOrigin.js';\nimport ImageStyle from '../style/Image.js';\n\n\n/**\n * @typedef {Object} Options\n * @property {Array.<number>} [anchor=[0.5, 0.5]] Anchor. Default value is the icon center.\n * @property {module:ol/style/IconOrigin} [anchorOrigin] Origin of the anchor: `bottom-left`, `bottom-right`,\n * `top-left` or `top-right`. Default is `top-left`.\n * @property {module:ol/style/IconAnchorUnits} [anchorXUnits] Units in which the anchor x value is\n * specified. A value of `'fraction'` indicates the x value is a fraction of the icon. A value of `'pixels'` indicates\n * the x value in pixels. Default is `'fraction'`.\n * @property {module:ol/style/IconAnchorUnits} [anchorYUnits] Units in which the anchor y value is\n * specified. A value of `'fraction'` indicates the y value is a fraction of the icon. A value of `'pixels'` indicates\n * the y value in pixels. Default is `'fraction'`.\n * @property {module:ol/color~Color|string} [color] Color to tint the icon. If not specified,\n * the icon will be left as is.\n * @property {null|string} [crossOrigin] The `crossOrigin` attribute for loaded images. Note that you must provide a\n * `crossOrigin` value if you are using the WebGL renderer or if you want to access pixel data with the Canvas renderer.\n * See {@link https://developer.mozilla.org/en-US/docs/Web/HTML/CORS_enabled_image} for more detail.\n * @property {Image|HTMLCanvasElement} [img] Image object for the icon. If the `src` option is not provided then the\n * provided image must already be loaded. And in that case, it is required\n * to provide the size of the image, with the `imgSize` option.\n * @property {Array.<number>} [offset=[0, 0]] Offset, which, together with the size and the offset origin, define the\n * sub-rectangle to use from the original icon image.\n * @property {module:ol/style/IconOrigin} [offsetOrigin] Origin of the offset: `bottom-left`, `bottom-right`,\n * `top-left` or `top-right`. Default is `top-left`.\n * @property {number} [opacity=1] Opacity of the icon.\n * @property {number} [scale=1] Scale.\n * @property {boolean} [snapToPixel=true] If `true` integral numbers of pixels are used as the X and Y pixel coordinate\n * when drawing the icon in the output canvas. If `false` fractional numbers may be used. Using `true` allows for\n * \"sharp\" rendering (no blur), while using `false` allows for \"accurate\" rendering. Note that accuracy is important if\n * the icon's position is animated. Without it, the icon may jitter noticeably.\n * @property {boolean} [rotateWithView=false] Whether to rotate the icon with the view.\n * @property {number} [rotation=0] Rotation in radians (positive rotation clockwise).\n * @property {module:ol/size~Size} [size] Icon size in pixel. Can be used together with `offset` to define the\n * sub-rectangle to use from the origin (sprite) icon image.\n * @property {module:ol/size~Size} [imgSize] Image size in pixels. Only required if `img` is set and `src` is not, and\n * for SVG images in Internet Explorer 11. The provided `imgSize` needs to match the actual size of the image.\n * @property {string} [src] Image source URI.\n */\n\n\n/**\n * @classdesc\n * Set icon style for vector features.\n *\n * @constructor\n * @param {module:ol/style/Icon~Options=} opt_options Options.\n * @extends {module:ol/style/Image}\n * @api\n */\nconst Icon = function(opt_options) {\n\n  const options = opt_options || {};\n\n  /**\n   * @private\n   * @type {Array.<number>}\n   */\n  this.anchor_ = options.anchor !== undefined ? options.anchor : [0.5, 0.5];\n\n  /**\n   * @private\n   * @type {Array.<number>}\n   */\n  this.normalizedAnchor_ = null;\n\n  /**\n   * @private\n   * @type {module:ol/style/IconOrigin}\n   */\n  this.anchorOrigin_ = options.anchorOrigin !== undefined ?\n    options.anchorOrigin : IconOrigin.TOP_LEFT;\n\n  /**\n   * @private\n   * @type {module:ol/style/IconAnchorUnits}\n   */\n  this.anchorXUnits_ = options.anchorXUnits !== undefined ?\n    options.anchorXUnits : IconAnchorUnits.FRACTION;\n\n  /**\n   * @private\n   * @type {module:ol/style/IconAnchorUnits}\n   */\n  this.anchorYUnits_ = options.anchorYUnits !== undefined ?\n    options.anchorYUnits : IconAnchorUnits.FRACTION;\n\n  /**\n   * @private\n   * @type {?string}\n   */\n  this.crossOrigin_ =\n      options.crossOrigin !== undefined ? options.crossOrigin : null;\n\n  /**\n   * @type {Image|HTMLCanvasElement}\n   */\n  const image = options.img !== undefined ? options.img : null;\n\n  /**\n   * @type {module:ol/size~Size}\n   */\n  const imgSize = options.imgSize !== undefined ? options.imgSize : null;\n\n  /**\n   * @type {string|undefined}\n   */\n  let src = options.src;\n\n  assert(!(src !== undefined && image),\n    4); // `image` and `src` cannot be provided at the same time\n  assert(!image || (image && imgSize),\n    5); // `imgSize` must be set when `image` is provided\n\n  if ((src === undefined || src.length === 0) && image) {\n    src = image.src || getUid(image).toString();\n  }\n  assert(src !== undefined && src.length > 0,\n    6); // A defined and non-empty `src` or `image` must be provided\n\n  /**\n   * @type {module:ol/ImageState}\n   */\n  const imageState = options.src !== undefined ?\n    ImageState.IDLE : ImageState.LOADED;\n\n  /**\n   * @private\n   * @type {module:ol/color~Color}\n   */\n  this.color_ = options.color !== undefined ? asArray(options.color) : null;\n\n  /**\n   * @private\n   * @type {module:ol/style/IconImage}\n   */\n  this.iconImage_ = getIconImage(\n    image, /** @type {string} */ (src), imgSize, this.crossOrigin_, imageState, this.color_);\n\n  /**\n   * @private\n   * @type {Array.<number>}\n   */\n  this.offset_ = options.offset !== undefined ? options.offset : [0, 0];\n\n  /**\n   * @private\n   * @type {module:ol/style/IconOrigin}\n   */\n  this.offsetOrigin_ = options.offsetOrigin !== undefined ?\n    options.offsetOrigin : IconOrigin.TOP_LEFT;\n\n  /**\n   * @private\n   * @type {Array.<number>}\n   */\n  this.origin_ = null;\n\n  /**\n   * @private\n   * @type {module:ol/size~Size}\n   */\n  this.size_ = options.size !== undefined ? options.size : null;\n\n  /**\n   * @type {number}\n   */\n  const opacity = options.opacity !== undefined ? options.opacity : 1;\n\n  /**\n   * @type {boolean}\n   */\n  const rotateWithView = options.rotateWithView !== undefined ?\n    options.rotateWithView : false;\n\n  /**\n   * @type {number}\n   */\n  const rotation = options.rotation !== undefined ? options.rotation : 0;\n\n  /**\n   * @type {number}\n   */\n  const scale = options.scale !== undefined ? options.scale : 1;\n\n  /**\n   * @type {boolean}\n   */\n  const snapToPixel = options.snapToPixel !== undefined ?\n    options.snapToPixel : true;\n\n  ImageStyle.call(this, {\n    opacity: opacity,\n    rotation: rotation,\n    scale: scale,\n    snapToPixel: snapToPixel,\n    rotateWithView: rotateWithView\n  });\n\n};\n\ninherits(Icon, ImageStyle);\n\n\n/**\n * Clones the style. The underlying Image/HTMLCanvasElement is not cloned.\n * @return {module:ol/style/Icon} The cloned style.\n * @api\n */\nIcon.prototype.clone = function() {\n  return new Icon({\n    anchor: this.anchor_.slice(),\n    anchorOrigin: this.anchorOrigin_,\n    anchorXUnits: this.anchorXUnits_,\n    anchorYUnits: this.anchorYUnits_,\n    crossOrigin: this.crossOrigin_,\n    color: (this.color_ && this.color_.slice) ? this.color_.slice() : this.color_ || undefined,\n    src: this.getSrc(),\n    offset: this.offset_.slice(),\n    offsetOrigin: this.offsetOrigin_,\n    size: this.size_ !== null ? this.size_.slice() : undefined,\n    opacity: this.getOpacity(),\n    scale: this.getScale(),\n    snapToPixel: this.getSnapToPixel(),\n    rotation: this.getRotation(),\n    rotateWithView: this.getRotateWithView()\n  });\n};\n\n\n/**\n * @inheritDoc\n * @api\n */\nIcon.prototype.getAnchor = function() {\n  if (this.normalizedAnchor_) {\n    return this.normalizedAnchor_;\n  }\n  let anchor = this.anchor_;\n  const size = this.getSize();\n  if (this.anchorXUnits_ == IconAnchorUnits.FRACTION ||\n      this.anchorYUnits_ == IconAnchorUnits.FRACTION) {\n    if (!size) {\n      return null;\n    }\n    anchor = this.anchor_.slice();\n    if (this.anchorXUnits_ == IconAnchorUnits.FRACTION) {\n      anchor[0] *= size[0];\n    }\n    if (this.anchorYUnits_ == IconAnchorUnits.FRACTION) {\n      anchor[1] *= size[1];\n    }\n  }\n\n  if (this.anchorOrigin_ != IconOrigin.TOP_LEFT) {\n    if (!size) {\n      return null;\n    }\n    if (anchor === this.anchor_) {\n      anchor = this.anchor_.slice();\n    }\n    if (this.anchorOrigin_ == IconOrigin.TOP_RIGHT ||\n        this.anchorOrigin_ == IconOrigin.BOTTOM_RIGHT) {\n      anchor[0] = -anchor[0] + size[0];\n    }\n    if (this.anchorOrigin_ == IconOrigin.BOTTOM_LEFT ||\n        this.anchorOrigin_ == IconOrigin.BOTTOM_RIGHT) {\n      anchor[1] = -anchor[1] + size[1];\n    }\n  }\n  this.normalizedAnchor_ = anchor;\n  return this.normalizedAnchor_;\n};\n\n\n/**\n * Get the icon color.\n * @return {module:ol/color~Color} Color.\n * @api\n */\nIcon.prototype.getColor = function() {\n  return this.color_;\n};\n\n\n/**\n * Get the image icon.\n * @param {number} pixelRatio Pixel ratio.\n * @return {Image|HTMLCanvasElement} Image or Canvas element.\n * @override\n * @api\n */\nIcon.prototype.getImage = function(pixelRatio) {\n  return this.iconImage_.getImage(pixelRatio);\n};\n\n\n/**\n * @override\n */\nIcon.prototype.getImageSize = function() {\n  return this.iconImage_.getSize();\n};\n\n\n/**\n * @override\n */\nIcon.prototype.getHitDetectionImageSize = function() {\n  return this.getImageSize();\n};\n\n\n/**\n * @override\n */\nIcon.prototype.getImageState = function() {\n  return this.iconImage_.getImageState();\n};\n\n\n/**\n * @override\n */\nIcon.prototype.getHitDetectionImage = function(pixelRatio) {\n  return this.iconImage_.getHitDetectionImage(pixelRatio);\n};\n\n\n/**\n * @inheritDoc\n * @api\n */\nIcon.prototype.getOrigin = function() {\n  if (this.origin_) {\n    return this.origin_;\n  }\n  let offset = this.offset_;\n\n  if (this.offsetOrigin_ != IconOrigin.TOP_LEFT) {\n    const size = this.getSize();\n    const iconImageSize = this.iconImage_.getSize();\n    if (!size || !iconImageSize) {\n      return null;\n    }\n    offset = offset.slice();\n    if (this.offsetOrigin_ == IconOrigin.TOP_RIGHT ||\n        this.offsetOrigin_ == IconOrigin.BOTTOM_RIGHT) {\n      offset[0] = iconImageSize[0] - size[0] - offset[0];\n    }\n    if (this.offsetOrigin_ == IconOrigin.BOTTOM_LEFT ||\n        this.offsetOrigin_ == IconOrigin.BOTTOM_RIGHT) {\n      offset[1] = iconImageSize[1] - size[1] - offset[1];\n    }\n  }\n  this.origin_ = offset;\n  return this.origin_;\n};\n\n\n/**\n * Get the image URL.\n * @return {string|undefined} Image src.\n * @api\n */\nIcon.prototype.getSrc = function() {\n  return this.iconImage_.getSrc();\n};\n\n\n/**\n * @inheritDoc\n * @api\n */\nIcon.prototype.getSize = function() {\n  return !this.size_ ? this.iconImage_.getSize() : this.size_;\n};\n\n\n/**\n * @override\n */\nIcon.prototype.listenImageChange = function(listener, thisArg) {\n  return listen(this.iconImage_, EventType.CHANGE,\n    listener, thisArg);\n};\n\n\n/**\n * Load not yet loaded URI.\n * When rendering a feature with an icon style, the vector renderer will\n * automatically call this method. However, you might want to call this\n * method yourself for preloading or other purposes.\n * @override\n * @api\n */\nIcon.prototype.load = function() {\n  this.iconImage_.load();\n};\n\n\n/**\n * @override\n */\nIcon.prototype.unlistenImageChange = function(listener, thisArg) {\n  unlisten(this.iconImage_, EventType.CHANGE,\n    listener, thisArg);\n};\nexport default Icon;\n","/**\n * Default WMS version.\n * @type {string}\n */\nexport const DEFAULT_WMS_VERSION = '1.3.0';\n","/**\n * @module ol/renderer/canvas/Layer\n */\nimport {inherits} from '../../util.js';\nimport {getBottomLeft, getBottomRight, getTopLeft, getTopRight} from '../../extent.js';\nimport {TRUE} from '../../functions.js';\nimport RenderEvent from '../../render/Event.js';\nimport RenderEventType from '../../render/EventType.js';\nimport {rotateAtOffset} from '../../render/canvas.js';\nimport CanvasImmediateRenderer from '../../render/canvas/Immediate.js';\nimport LayerRenderer from '../Layer.js';\nimport {create as createTransform, apply as applyTransform, compose as composeTransform} from '../../transform.js';\n\n/**\n * @constructor\n * @abstract\n * @extends {module:ol/renderer/Layer}\n * @param {module:ol/layer/Layer} layer Layer.\n */\nconst CanvasLayerRenderer = function(layer) {\n\n  LayerRenderer.call(this, layer);\n\n  /**\n   * @protected\n   * @type {number}\n   */\n  this.renderedResolution;\n\n  /**\n   * @private\n   * @type {module:ol/transform~Transform}\n   */\n  this.transform_ = createTransform();\n\n};\n\ninherits(CanvasLayerRenderer, LayerRenderer);\n\n\n/**\n * @param {CanvasRenderingContext2D} context Context.\n * @param {module:ol/PluggableMap~FrameState} frameState Frame state.\n * @param {module:ol/extent~Extent} extent Clip extent.\n * @protected\n */\nCanvasLayerRenderer.prototype.clip = function(context, frameState, extent) {\n  const pixelRatio = frameState.pixelRatio;\n  const width = frameState.size[0] * pixelRatio;\n  const height = frameState.size[1] * pixelRatio;\n  const rotation = frameState.viewState.rotation;\n  const topLeft = getTopLeft(/** @type {module:ol/extent~Extent} */ (extent));\n  const topRight = getTopRight(/** @type {module:ol/extent~Extent} */ (extent));\n  const bottomRight = getBottomRight(/** @type {module:ol/extent~Extent} */ (extent));\n  const bottomLeft = getBottomLeft(/** @type {module:ol/extent~Extent} */ (extent));\n\n  applyTransform(frameState.coordinateToPixelTransform, topLeft);\n  applyTransform(frameState.coordinateToPixelTransform, topRight);\n  applyTransform(frameState.coordinateToPixelTransform, bottomRight);\n  applyTransform(frameState.coordinateToPixelTransform, bottomLeft);\n\n  context.save();\n  rotateAtOffset(context, -rotation, width / 2, height / 2);\n  context.beginPath();\n  context.moveTo(topLeft[0] * pixelRatio, topLeft[1] * pixelRatio);\n  context.lineTo(topRight[0] * pixelRatio, topRight[1] * pixelRatio);\n  context.lineTo(bottomRight[0] * pixelRatio, bottomRight[1] * pixelRatio);\n  context.lineTo(bottomLeft[0] * pixelRatio, bottomLeft[1] * pixelRatio);\n  context.clip();\n  rotateAtOffset(context, rotation, width / 2, height / 2);\n};\n\n\n/**\n * @param {module:ol/render/EventType} type Event type.\n * @param {CanvasRenderingContext2D} context Context.\n * @param {module:ol/PluggableMap~FrameState} frameState Frame state.\n * @param {module:ol/transform~Transform=} opt_transform Transform.\n * @private\n */\nCanvasLayerRenderer.prototype.dispatchComposeEvent_ = function(type, context, frameState, opt_transform) {\n  const layer = this.getLayer();\n  if (layer.hasListener(type)) {\n    const width = frameState.size[0] * frameState.pixelRatio;\n    const height = frameState.size[1] * frameState.pixelRatio;\n    const rotation = frameState.viewState.rotation;\n    rotateAtOffset(context, -rotation, width / 2, height / 2);\n    const transform = opt_transform !== undefined ?\n      opt_transform : this.getTransform(frameState, 0);\n    const render = new CanvasImmediateRenderer(\n      context, frameState.pixelRatio, frameState.extent, transform,\n      frameState.viewState.rotation);\n    const composeEvent = new RenderEvent(type, render, frameState,\n      context, null);\n    layer.dispatchEvent(composeEvent);\n    rotateAtOffset(context, rotation, width / 2, height / 2);\n  }\n};\n\n\n/**\n * @param {module:ol/coordinate~Coordinate} coordinate Coordinate.\n * @param {module:ol/PluggableMap~FrameState} frameState FrameState.\n * @param {number} hitTolerance Hit tolerance in pixels.\n * @param {function(this: S, module:ol/layer/Layer, (Uint8ClampedArray|Uint8Array)): T} callback Layer\n *     callback.\n * @param {S} thisArg Value to use as `this` when executing `callback`.\n * @return {T|undefined} Callback result.\n * @template S,T,U\n */\nCanvasLayerRenderer.prototype.forEachLayerAtCoordinate = function(coordinate, frameState, hitTolerance, callback, thisArg) {\n  const hasFeature = this.forEachFeatureAtCoordinate(coordinate, frameState, hitTolerance, TRUE, this);\n\n  if (hasFeature) {\n    return callback.call(thisArg, this.getLayer(), null);\n  } else {\n    return undefined;\n  }\n};\n\n\n/**\n * @param {CanvasRenderingContext2D} context Context.\n * @param {module:ol/PluggableMap~FrameState} frameState Frame state.\n * @param {module:ol/layer/Layer~State} layerState Layer state.\n * @param {module:ol/transform~Transform=} opt_transform Transform.\n * @protected\n */\nCanvasLayerRenderer.prototype.postCompose = function(context, frameState, layerState, opt_transform) {\n  this.dispatchComposeEvent_(RenderEventType.POSTCOMPOSE, context, frameState, opt_transform);\n};\n\n\n/**\n * @param {CanvasRenderingContext2D} context Context.\n * @param {module:ol/PluggableMap~FrameState} frameState Frame state.\n * @param {module:ol/transform~Transform=} opt_transform Transform.\n * @protected\n */\nCanvasLayerRenderer.prototype.preCompose = function(context, frameState, opt_transform) {\n  this.dispatchComposeEvent_(RenderEventType.PRECOMPOSE, context, frameState, opt_transform);\n};\n\n\n/**\n * @param {CanvasRenderingContext2D} context Context.\n * @param {module:ol/PluggableMap~FrameState} frameState Frame state.\n * @param {module:ol/transform~Transform=} opt_transform Transform.\n * @protected\n */\nCanvasLayerRenderer.prototype.dispatchRenderEvent = function(context, frameState, opt_transform) {\n  this.dispatchComposeEvent_(RenderEventType.RENDER, context, frameState, opt_transform);\n};\n\n\n/**\n * @param {module:ol/PluggableMap~FrameState} frameState Frame state.\n * @param {number} offsetX Offset on the x-axis in view coordinates.\n * @protected\n * @return {!module:ol/transform~Transform} Transform.\n */\nCanvasLayerRenderer.prototype.getTransform = function(frameState, offsetX) {\n  const viewState = frameState.viewState;\n  const pixelRatio = frameState.pixelRatio;\n  const dx1 = pixelRatio * frameState.size[0] / 2;\n  const dy1 = pixelRatio * frameState.size[1] / 2;\n  const sx = pixelRatio / viewState.resolution;\n  const sy = -sx;\n  const angle = -viewState.rotation;\n  const dx2 = -viewState.center[0] + offsetX;\n  const dy2 = -viewState.center[1];\n  return composeTransform(this.transform_, dx1, dy1, sx, sy, angle, dx2, dy2);\n};\n\n\n/**\n * @abstract\n * @param {module:ol/PluggableMap~FrameState} frameState Frame state.\n * @param {module:ol/layer/Layer~State} layerState Layer state.\n * @param {CanvasRenderingContext2D} context Context.\n */\nCanvasLayerRenderer.prototype.composeFrame = function(frameState, layerState, context) {};\n\n/**\n * @abstract\n * @param {module:ol/PluggableMap~FrameState} frameState Frame state.\n * @param {module:ol/layer/Layer~State} layerState Layer state.\n * @return {boolean} whether composeFrame should be called.\n */\nCanvasLayerRenderer.prototype.prepareFrame = function(frameState, layerState) {};\nexport default CanvasLayerRenderer;\n","/**\n * @module ol/renderer/canvas/IntermediateCanvas\n */\nimport {inherits} from '../../util.js';\nimport {scale as scaleCoordinate} from '../../coordinate.js';\nimport {createCanvasContext2D} from '../../dom.js';\nimport {containsExtent, intersects} from '../../extent.js';\nimport {UNDEFINED} from '../../functions.js';\nimport CanvasLayerRenderer from '../canvas/Layer.js';\nimport {create as createTransform, apply as applyTransform} from '../../transform.js';\n\n/**\n * @constructor\n * @abstract\n * @extends {module:ol/renderer/canvas/Layer}\n * @param {module:ol/layer/Layer} layer Layer.\n */\nconst IntermediateCanvasRenderer = function(layer) {\n\n  CanvasLayerRenderer.call(this, layer);\n\n  /**\n   * @protected\n   * @type {module:ol/transform~Transform}\n   */\n  this.coordinateToCanvasPixelTransform = createTransform();\n\n  /**\n   * @private\n   * @type {CanvasRenderingContext2D}\n   */\n  this.hitCanvasContext_ = null;\n\n};\n\ninherits(IntermediateCanvasRenderer, CanvasLayerRenderer);\n\n\n/**\n * @inheritDoc\n */\nIntermediateCanvasRenderer.prototype.composeFrame = function(frameState, layerState, context) {\n\n  this.preCompose(context, frameState);\n\n  const image = this.getImage();\n  if (image) {\n\n    // clipped rendering if layer extent is set\n    const extent = layerState.extent;\n    const clipped = extent !== undefined &&\n        !containsExtent(extent, frameState.extent) &&\n        intersects(extent, frameState.extent);\n    if (clipped) {\n      this.clip(context, frameState, /** @type {module:ol/extent~Extent} */ (extent));\n    }\n\n    const imageTransform = this.getImageTransform();\n    // for performance reasons, context.save / context.restore is not used\n    // to save and restore the transformation matrix and the opacity.\n    // see http://jsperf.com/context-save-restore-versus-variable\n    const alpha = context.globalAlpha;\n    context.globalAlpha = layerState.opacity;\n\n    // for performance reasons, context.setTransform is only used\n    // when the view is rotated. see http://jsperf.com/canvas-transform\n    const dx = imageTransform[4];\n    const dy = imageTransform[5];\n    const dw = image.width * imageTransform[0];\n    const dh = image.height * imageTransform[3];\n    context.drawImage(image, 0, 0, +image.width, +image.height,\n      Math.round(dx), Math.round(dy), Math.round(dw), Math.round(dh));\n    context.globalAlpha = alpha;\n\n    if (clipped) {\n      context.restore();\n    }\n  }\n\n  this.postCompose(context, frameState, layerState);\n};\n\n\n/**\n * @abstract\n * @return {HTMLCanvasElement|HTMLVideoElement|Image} Canvas.\n */\nIntermediateCanvasRenderer.prototype.getImage = function() {};\n\n\n/**\n * @abstract\n * @return {!module:ol/transform~Transform} Image transform.\n */\nIntermediateCanvasRenderer.prototype.getImageTransform = function() {};\n\n\n/**\n * @inheritDoc\n */\nIntermediateCanvasRenderer.prototype.forEachFeatureAtCoordinate = function(coordinate, frameState, hitTolerance, callback, thisArg) {\n  const layer = this.getLayer();\n  const source = layer.getSource();\n  const resolution = frameState.viewState.resolution;\n  const rotation = frameState.viewState.rotation;\n  const skippedFeatureUids = frameState.skippedFeatureUids;\n  return source.forEachFeatureAtCoordinate(\n    coordinate, resolution, rotation, hitTolerance, skippedFeatureUids,\n    /**\n     * @param {module:ol/Feature|module:ol/render/Feature} feature Feature.\n     * @return {?} Callback result.\n     */\n    function(feature) {\n      return callback.call(thisArg, feature, layer);\n    });\n};\n\n\n/**\n * @inheritDoc\n */\nIntermediateCanvasRenderer.prototype.forEachLayerAtCoordinate = function(coordinate, frameState, hitTolerance, callback, thisArg) {\n  if (!this.getImage()) {\n    return undefined;\n  }\n\n  if (this.getLayer().getSource().forEachFeatureAtCoordinate !== UNDEFINED) {\n    // for ImageCanvas sources use the original hit-detection logic,\n    // so that for example also transparent polygons are detected\n    return CanvasLayerRenderer.prototype.forEachLayerAtCoordinate.apply(this, arguments);\n  } else {\n    const pixel = applyTransform(this.coordinateToCanvasPixelTransform, coordinate.slice());\n    scaleCoordinate(pixel, frameState.viewState.resolution / this.renderedResolution);\n\n    if (!this.hitCanvasContext_) {\n      this.hitCanvasContext_ = createCanvasContext2D(1, 1);\n    }\n\n    this.hitCanvasContext_.clearRect(0, 0, 1, 1);\n    this.hitCanvasContext_.drawImage(this.getImage(), pixel[0], pixel[1], 1, 1, 0, 0, 1, 1);\n\n    const imageData = this.hitCanvasContext_.getImageData(0, 0, 1, 1).data;\n    if (imageData[3] > 0) {\n      return callback.call(thisArg, this.getLayer(),  imageData);\n    } else {\n      return undefined;\n    }\n  }\n};\n\nexport default IntermediateCanvasRenderer;\n","/**\n * @module ol/net\n */\nimport {getUid} from './util.js';\n\n\n/**\n * Simple JSONP helper. Supports error callbacks and a custom callback param.\n * The error callback will be called when no JSONP is executed after 10 seconds.\n *\n * @param {string} url Request url. A 'callback' query parameter will be\n *     appended.\n * @param {Function} callback Callback on success.\n * @param {function()=} opt_errback Callback on error.\n * @param {string=} opt_callbackParam Custom query parameter for the JSONP\n *     callback. Default is 'callback'.\n */\nexport function jsonp(url, callback, opt_errback, opt_callbackParam) {\n  const script = document.createElement('script');\n  const key = 'olc_' + getUid(callback);\n  function cleanup() {\n    delete window[key];\n    script.parentNode.removeChild(script);\n  }\n  script.async = true;\n  script.src = url + (url.indexOf('?') == -1 ? '?' : '&') +\n      (opt_callbackParam || 'callback') + '=' + key;\n  const timer = setTimeout(function() {\n    cleanup();\n    if (opt_errback) {\n      opt_errback();\n    }\n  }, 10000);\n  window[key] = function(data) {\n    clearTimeout(timer);\n    cleanup();\n    callback(data);\n  };\n  document.getElementsByTagName('head')[0].appendChild(script);\n}\n","/**\n * @module ol/structs/LRUCache\n */\nimport {inherits} from '../util.js';\nimport {assert} from '../asserts.js';\nimport EventTarget from '../events/EventTarget.js';\nimport EventType from '../events/EventType.js';\n\n\n/**\n * @typedef {Object} Entry\n * @property {string} key_\n * @property {Object} newer\n * @property {Object} older\n * @property {*} value_\n */\n\n\n/**\n * Implements a Least-Recently-Used cache where the keys do not conflict with\n * Object's properties (e.g. 'hasOwnProperty' is not allowed as a key). Expiring\n * items from the cache is the responsibility of the user.\n * @constructor\n * @extends {module:ol/events/EventTarget}\n * @fires module:ol/events/Event~Event\n * @struct\n * @template T\n * @param {number=} opt_highWaterMark High water mark.\n */\nconst LRUCache = function(opt_highWaterMark) {\n\n  EventTarget.call(this);\n\n  /**\n   * @type {number}\n   */\n  this.highWaterMark = opt_highWaterMark !== undefined ? opt_highWaterMark : 2048;\n\n  /**\n   * @private\n   * @type {number}\n   */\n  this.count_ = 0;\n\n  /**\n   * @private\n   * @type {!Object.<string, module:ol/structs/LRUCache~Entry>}\n   */\n  this.entries_ = {};\n\n  /**\n   * @private\n   * @type {?module:ol/structs/LRUCache~Entry}\n   */\n  this.oldest_ = null;\n\n  /**\n   * @private\n   * @type {?module:ol/structs/LRUCache~Entry}\n   */\n  this.newest_ = null;\n\n};\n\ninherits(LRUCache, EventTarget);\n\n\n/**\n * @return {boolean} Can expire cache.\n */\nLRUCache.prototype.canExpireCache = function() {\n  return this.getCount() > this.highWaterMark;\n};\n\n\n/**\n * FIXME empty description for jsdoc\n */\nLRUCache.prototype.clear = function() {\n  this.count_ = 0;\n  this.entries_ = {};\n  this.oldest_ = null;\n  this.newest_ = null;\n  this.dispatchEvent(EventType.CLEAR);\n};\n\n\n/**\n * @param {string} key Key.\n * @return {boolean} Contains key.\n */\nLRUCache.prototype.containsKey = function(key) {\n  return this.entries_.hasOwnProperty(key);\n};\n\n\n/**\n * @param {function(this: S, T, string, module:ol/structs/LRUCache): ?} f The function\n *     to call for every entry from the oldest to the newer. This function takes\n *     3 arguments (the entry value, the entry key and the LRUCache object).\n *     The return value is ignored.\n * @param {S=} opt_this The object to use as `this` in `f`.\n * @template S\n */\nLRUCache.prototype.forEach = function(f, opt_this) {\n  let entry = this.oldest_;\n  while (entry) {\n    f.call(opt_this, entry.value_, entry.key_, this);\n    entry = entry.newer;\n  }\n};\n\n\n/**\n * @param {string} key Key.\n * @return {T} Value.\n */\nLRUCache.prototype.get = function(key) {\n  const entry = this.entries_[key];\n  assert(entry !== undefined,\n    15); // Tried to get a value for a key that does not exist in the cache\n  if (entry === this.newest_) {\n    return entry.value_;\n  } else if (entry === this.oldest_) {\n    this.oldest_ = /** @type {module:ol/structs/LRUCache~Entry} */ (this.oldest_.newer);\n    this.oldest_.older = null;\n  } else {\n    entry.newer.older = entry.older;\n    entry.older.newer = entry.newer;\n  }\n  entry.newer = null;\n  entry.older = this.newest_;\n  this.newest_.newer = entry;\n  this.newest_ = entry;\n  return entry.value_;\n};\n\n\n/**\n * Remove an entry from the cache.\n * @param {string} key The entry key.\n * @return {T} The removed entry.\n */\nLRUCache.prototype.remove = function(key) {\n  const entry = this.entries_[key];\n  assert(entry !== undefined, 15); // Tried to get a value for a key that does not exist in the cache\n  if (entry === this.newest_) {\n    this.newest_ = /** @type {module:ol/structs/LRUCache~Entry} */ (entry.older);\n    if (this.newest_) {\n      this.newest_.newer = null;\n    }\n  } else if (entry === this.oldest_) {\n    this.oldest_ = /** @type {module:ol/structs/LRUCache~Entry} */ (entry.newer);\n    if (this.oldest_) {\n      this.oldest_.older = null;\n    }\n  } else {\n    entry.newer.older = entry.older;\n    entry.older.newer = entry.newer;\n  }\n  delete this.entries_[key];\n  --this.count_;\n  return entry.value_;\n};\n\n\n/**\n * @return {number} Count.\n */\nLRUCache.prototype.getCount = function() {\n  return this.count_;\n};\n\n\n/**\n * @return {Array.<string>} Keys.\n */\nLRUCache.prototype.getKeys = function() {\n  const keys = new Array(this.count_);\n  let i = 0;\n  let entry;\n  for (entry = this.newest_; entry; entry = entry.older) {\n    keys[i++] = entry.key_;\n  }\n  return keys;\n};\n\n\n/**\n * @return {Array.<T>} Values.\n */\nLRUCache.prototype.getValues = function() {\n  const values = new Array(this.count_);\n  let i = 0;\n  let entry;\n  for (entry = this.newest_; entry; entry = entry.older) {\n    values[i++] = entry.value_;\n  }\n  return values;\n};\n\n\n/**\n * @return {T} Last value.\n */\nLRUCache.prototype.peekLast = function() {\n  return this.oldest_.value_;\n};\n\n\n/**\n * @return {string} Last key.\n */\nLRUCache.prototype.peekLastKey = function() {\n  return this.oldest_.key_;\n};\n\n\n/**\n * Get the key of the newest item in the cache.  Throws if the cache is empty.\n * @return {string} The newest key.\n */\nLRUCache.prototype.peekFirstKey = function() {\n  return this.newest_.key_;\n};\n\n\n/**\n * @return {T} value Value.\n */\nLRUCache.prototype.pop = function() {\n  const entry = this.oldest_;\n  delete this.entries_[entry.key_];\n  if (entry.newer) {\n    entry.newer.older = null;\n  }\n  this.oldest_ = /** @type {module:ol/structs/LRUCache~Entry} */ (entry.newer);\n  if (!this.oldest_) {\n    this.newest_ = null;\n  }\n  --this.count_;\n  return entry.value_;\n};\n\n\n/**\n * @param {string} key Key.\n * @param {T} value Value.\n */\nLRUCache.prototype.replace = function(key, value) {\n  this.get(key);  // update `newest_`\n  this.entries_[key].value_ = value;\n};\n\n\n/**\n * @param {string} key Key.\n * @param {T} value Value.\n */\nLRUCache.prototype.set = function(key, value) {\n  assert(!(key in this.entries_),\n    16); // Tried to set a value for a key that is used already\n  const entry = /** @type {module:ol/structs/LRUCache~Entry} */ ({\n    key_: key,\n    newer: null,\n    older: this.newest_,\n    value_: value\n  });\n  if (!this.newest_) {\n    this.oldest_ = entry;\n  } else {\n    this.newest_.newer = entry;\n  }\n  this.newest_ = entry;\n  this.entries_[key] = entry;\n  ++this.count_;\n};\n\n\n/**\n * Set a maximum number of entries for the cache.\n * @param {number} size Cache size.\n * @api\n */\nLRUCache.prototype.setSize = function(size) {\n  this.highWaterMark = size;\n};\n\n\n/**\n * Prune the cache.\n */\nLRUCache.prototype.prune = function() {\n  while (this.canExpireCache()) {\n    this.pop();\n  }\n};\nexport default LRUCache;\n","/**\n * @module ol/geom/flat/interiorpoint\n */\nimport {numberSafeCompareFunction} from '../../array.js';\nimport {linearRingsContainsXY} from '../flat/contains.js';\n\n\n/**\n * Calculates a point that is likely to lie in the interior of the linear rings.\n * Inspired by JTS's com.vividsolutions.jts.geom.Geometry#getInteriorPoint.\n * @param {Array.<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {Array.<number>} ends Ends.\n * @param {number} stride Stride.\n * @param {Array.<number>} flatCenters Flat centers.\n * @param {number} flatCentersOffset Flat center offset.\n * @param {Array.<number>=} opt_dest Destination.\n * @return {Array.<number>} Destination point as XYM coordinate, where M is the\n * length of the horizontal intersection that the point belongs to.\n */\nexport function getInteriorPointOfArray(flatCoordinates, offset,\n  ends, stride, flatCenters, flatCentersOffset, opt_dest) {\n  let i, ii, x, x1, x2, y1, y2;\n  const y = flatCenters[flatCentersOffset + 1];\n  /** @type {Array.<number>} */\n  const intersections = [];\n  // Calculate intersections with the horizontal line\n  for (let r = 0, rr = ends.length; r < rr; ++r) {\n    const end = ends[r];\n    x1 = flatCoordinates[end - stride];\n    y1 = flatCoordinates[end - stride + 1];\n    for (i = offset; i < end; i += stride) {\n      x2 = flatCoordinates[i];\n      y2 = flatCoordinates[i + 1];\n      if ((y <= y1 && y2 <= y) || (y1 <= y && y <= y2)) {\n        x = (y - y1) / (y2 - y1) * (x2 - x1) + x1;\n        intersections.push(x);\n      }\n      x1 = x2;\n      y1 = y2;\n    }\n  }\n  // Find the longest segment of the horizontal line that has its center point\n  // inside the linear ring.\n  let pointX = NaN;\n  let maxSegmentLength = -Infinity;\n  intersections.sort(numberSafeCompareFunction);\n  x1 = intersections[0];\n  for (i = 1, ii = intersections.length; i < ii; ++i) {\n    x2 = intersections[i];\n    const segmentLength = Math.abs(x2 - x1);\n    if (segmentLength > maxSegmentLength) {\n      x = (x1 + x2) / 2;\n      if (linearRingsContainsXY(flatCoordinates, offset, ends, stride, x, y)) {\n        pointX = x;\n        maxSegmentLength = segmentLength;\n      }\n    }\n    x1 = x2;\n  }\n  if (isNaN(pointX)) {\n    // There is no horizontal line that has its center point inside the linear\n    // ring.  Use the center of the the linear ring's extent.\n    pointX = flatCenters[flatCentersOffset];\n  }\n  if (opt_dest) {\n    opt_dest.push(pointX, y, maxSegmentLength);\n    return opt_dest;\n  } else {\n    return [pointX, y, maxSegmentLength];\n  }\n}\n\n\n/**\n * @param {Array.<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {Array.<Array.<number>>} endss Endss.\n * @param {number} stride Stride.\n * @param {Array.<number>} flatCenters Flat centers.\n * @return {Array.<number>} Interior points as XYM coordinates, where M is the\n * length of the horizontal intersection that the point belongs to.\n */\nexport function getInteriorPointsOfMultiArray(flatCoordinates, offset, endss, stride, flatCenters) {\n  let interiorPoints = [];\n  for (let i = 0, ii = endss.length; i < ii; ++i) {\n    const ends = endss[i];\n    interiorPoints = getInteriorPointOfArray(flatCoordinates,\n      offset, ends, stride, flatCenters, 2 * i, interiorPoints);\n    offset = ends[ends.length - 1];\n  }\n  return interiorPoints;\n}\n","/**\n * @module ol/interaction/Property\n */\n\n/**\n * @enum {string}\n */\nexport default {\n  ACTIVE: 'active'\n};\n","/**\n * @module ol/interaction/Modify\n */\nimport {getUid, inherits} from '../util.js';\nimport Collection from '../Collection.js';\nimport CollectionEventType from '../CollectionEventType.js';\nimport Feature from '../Feature.js';\nimport MapBrowserEventType from '../MapBrowserEventType.js';\nimport MapBrowserPointerEvent from '../MapBrowserPointerEvent.js';\nimport {equals} from '../array.js';\nimport {equals as coordinatesEqual, distance as coordinateDistance, squaredDistance as squaredCoordinateDistance, squaredDistanceToSegment, closestOnSegment} from '../coordinate.js';\nimport {listen, unlisten} from '../events.js';\nimport Event from '../events/Event.js';\nimport EventType from '../events/EventType.js';\nimport {always, primaryAction, altKeyOnly, singleClick} from '../events/condition.js';\nimport {boundingExtent, buffer, createOrUpdateFromCoordinate} from '../extent.js';\nimport GeometryType from '../geom/GeometryType.js';\nimport Point from '../geom/Point.js';\nimport PointerInteraction, {handleEvent as handlePointerEvent} from '../interaction/Pointer.js';\nimport VectorLayer from '../layer/Vector.js';\nimport VectorSource from '../source/Vector.js';\nimport VectorEventType from '../source/VectorEventType.js';\nimport RBush from '../structs/RBush.js';\nimport {createEditingStyle} from '../style/Style.js';\n\n\n/**\n * @enum {string}\n */\nconst ModifyEventType = {\n  /**\n   * Triggered upon feature modification start\n   * @event ModifyEvent#modifystart\n   * @api\n   */\n  MODIFYSTART: 'modifystart',\n  /**\n   * Triggered upon feature modification end\n   * @event ModifyEvent#modifyend\n   * @api\n   */\n  MODIFYEND: 'modifyend'\n};\n\n\n/**\n * @typedef {Object} SegmentData\n * @property {Array.<number>} [depth]\n * @property {module:ol/Feature} feature\n * @property {module:ol/geom/SimpleGeometry} geometry\n * @property {number} index\n * @property {Array.<module:ol/extent~Extent>} segment\n * @property {Array.<module:ol/interaction/Modify~SegmentData>} [featureSegments]\n */\n\n\n/**\n * @typedef {Object} Options\n * @property {module:ol/events/condition~Condition} [condition] A function that\n * takes an {@link module:ol/MapBrowserEvent~MapBrowserEvent} and returns a\n * boolean to indicate whether that event will be considered to add or move a\n * vertex to the sketch. Default is\n * {@link module:ol/events/condition~primaryAction}.\n * @property {module:ol/events/condition~Condition} [deleteCondition] A function\n * that takes an {@link module:ol/MapBrowserEvent~MapBrowserEvent} and returns a\n * boolean to indicate whether that event should be handled. By default,\n * {@link module:ol/events/condition~singleClick} with\n * {@link module:ol/events/condition~altKeyOnly} results in a vertex deletion.\n * @property {module:ol/events/condition~Condition} [insertVertexCondition] A\n * function that takes an {@link module:ol/MapBrowserEvent~MapBrowserEvent} and\n * returns a boolean to indicate whether a new vertex can be added to the sketch\n * features. Default is {@link module:ol/events/condition~always}.\n * @property {number} [pixelTolerance=10] Pixel tolerance for considering the\n * pointer close enough to a segment or vertex for editing.\n * @property {module:ol/style/Style|Array.<module:ol/style/Style>|module:ol/style/Style~StyleFunction} [style]\n * Style used for the features being modified. By default the default edit\n * style is used (see {@link module:ol/style}).\n * @property {module:ol/source/Vector} [source] The vector source with\n * features to modify.  If a vector source is not provided, a feature collection\n * must be provided with the features option.\n * @property {module:ol/Collection.<module:ol/Feature>} [features]\n * The features the interaction works on.  If a feature collection is not\n * provided, a vector source must be provided with the source option.\n * @property {boolean} [wrapX=false] Wrap the world horizontally on the sketch\n * overlay.\n */\n\n\n/**\n * @classdesc\n * Events emitted by {@link module:ol/interaction/Modify~Modify} instances are\n * instances of this type.\n *\n * @constructor\n * @extends {module:ol/events/Event}\n * @param {ModifyEventType} type Type.\n * @param {module:ol/Collection.<module:ol/Feature>} features\n * The features modified.\n * @param {module:ol/MapBrowserPointerEvent} mapBrowserPointerEvent\n * Associated {@link module:ol/MapBrowserPointerEvent}.\n */\nexport const ModifyEvent = function(type, features, mapBrowserPointerEvent) {\n\n  Event.call(this, type);\n\n  /**\n   * The features being modified.\n   * @type {module:ol/Collection.<module:ol/Feature>}\n   * @api\n   */\n  this.features = features;\n\n  /**\n   * Associated {@link module:ol/MapBrowserEvent}.\n   * @type {module:ol/MapBrowserEvent}\n   * @api\n   */\n  this.mapBrowserEvent = mapBrowserPointerEvent;\n};\n\ninherits(ModifyEvent, Event);\n\n\n/**\n * @classdesc\n * Interaction for modifying feature geometries.  To modify features that have\n * been added to an existing source, construct the modify interaction with the\n * `source` option.  If you want to modify features in a collection (for example,\n * the collection used by a select interaction), construct the interaction with\n * the `features` option.  The interaction must be constructed with either a\n * `source` or `features` option.\n *\n * By default, the interaction will allow deletion of vertices when the `alt`\n * key is pressed.  To configure the interaction with a different condition\n * for deletion, use the `deleteCondition` option.\n *\n * @constructor\n * @extends {module:ol/interaction/Pointer}\n * @param {module:ol/interaction/Modify~Options} options Options.\n * @fires module:ol/interaction/Modify~ModifyEvent\n * @api\n */\nconst Modify = function(options) {\n\n  PointerInteraction.call(this, {\n    handleDownEvent: handleDownEvent,\n    handleDragEvent: handleDragEvent,\n    handleEvent: handleEvent,\n    handleUpEvent: handleUpEvent\n  });\n\n  /**\n   * @private\n   * @type {module:ol/events/condition~Condition}\n   */\n  this.condition_ = options.condition ? options.condition : primaryAction;\n\n\n  /**\n   * @private\n   * @param {module:ol/MapBrowserEvent} mapBrowserEvent Browser event.\n   * @return {boolean} Combined condition result.\n   */\n  this.defaultDeleteCondition_ = function(mapBrowserEvent) {\n    return altKeyOnly(mapBrowserEvent) && singleClick(mapBrowserEvent);\n  };\n\n  /**\n   * @type {module:ol/events/condition~Condition}\n   * @private\n   */\n  this.deleteCondition_ = options.deleteCondition ?\n    options.deleteCondition : this.defaultDeleteCondition_;\n\n  /**\n   * @type {module:ol/events/condition~Condition}\n   * @private\n   */\n  this.insertVertexCondition_ = options.insertVertexCondition ?\n    options.insertVertexCondition : always;\n\n  /**\n   * Editing vertex.\n   * @type {module:ol/Feature}\n   * @private\n   */\n  this.vertexFeature_ = null;\n\n  /**\n   * Segments intersecting {@link this.vertexFeature_} by segment uid.\n   * @type {Object.<string, boolean>}\n   * @private\n   */\n  this.vertexSegments_ = null;\n\n  /**\n   * @type {module:ol~Pixel}\n   * @private\n   */\n  this.lastPixel_ = [0, 0];\n\n  /**\n   * Tracks if the next `singleclick` event should be ignored to prevent\n   * accidental deletion right after vertex creation.\n   * @type {boolean}\n   * @private\n   */\n  this.ignoreNextSingleClick_ = false;\n\n  /**\n   * @type {boolean}\n   * @private\n   */\n  this.modified_ = false;\n\n  /**\n   * Segment RTree for each layer\n   * @type {module:ol/structs/RBush.<module:ol/interaction/Modify~SegmentData>}\n   * @private\n   */\n  this.rBush_ = new RBush();\n\n  /**\n   * @type {number}\n   * @private\n   */\n  this.pixelTolerance_ = options.pixelTolerance !== undefined ?\n    options.pixelTolerance : 10;\n\n  /**\n   * @type {boolean}\n   * @private\n   */\n  this.snappedToVertex_ = false;\n\n  /**\n   * Indicate whether the interaction is currently changing a feature's\n   * coordinates.\n   * @type {boolean}\n   * @private\n   */\n  this.changingFeature_ = false;\n\n  /**\n   * @type {Array}\n   * @private\n   */\n  this.dragSegments_ = [];\n\n  /**\n   * Draw overlay where sketch features are drawn.\n   * @type {module:ol/layer/Vector}\n   * @private\n   */\n  this.overlay_ = new VectorLayer({\n    source: new VectorSource({\n      useSpatialIndex: false,\n      wrapX: !!options.wrapX\n    }),\n    style: options.style ? options.style :\n      getDefaultStyleFunction(),\n    updateWhileAnimating: true,\n    updateWhileInteracting: true\n  });\n\n  /**\n   * @const\n   * @private\n   * @type {!Object.<string, function(module:ol/Feature, module:ol/geom/Geometry)>}\n   */\n  this.SEGMENT_WRITERS_ = {\n    'Point': this.writePointGeometry_,\n    'LineString': this.writeLineStringGeometry_,\n    'LinearRing': this.writeLineStringGeometry_,\n    'Polygon': this.writePolygonGeometry_,\n    'MultiPoint': this.writeMultiPointGeometry_,\n    'MultiLineString': this.writeMultiLineStringGeometry_,\n    'MultiPolygon': this.writeMultiPolygonGeometry_,\n    'Circle': this.writeCircleGeometry_,\n    'GeometryCollection': this.writeGeometryCollectionGeometry_\n  };\n\n\n  /**\n   * @type {module:ol/source/Vector}\n   * @private\n   */\n  this.source_ = null;\n\n  let features;\n  if (options.source) {\n    this.source_ = options.source;\n    features = new Collection(this.source_.getFeatures());\n    listen(this.source_, VectorEventType.ADDFEATURE,\n      this.handleSourceAdd_, this);\n    listen(this.source_, VectorEventType.REMOVEFEATURE,\n      this.handleSourceRemove_, this);\n  } else {\n    features = options.features;\n  }\n  if (!features) {\n    throw new Error('The modify interaction requires features or a source');\n  }\n\n  /**\n   * @type {module:ol/Collection.<module:ol/Feature>}\n   * @private\n   */\n  this.features_ = features;\n\n  this.features_.forEach(this.addFeature_.bind(this));\n  listen(this.features_, CollectionEventType.ADD,\n    this.handleFeatureAdd_, this);\n  listen(this.features_, CollectionEventType.REMOVE,\n    this.handleFeatureRemove_, this);\n\n  /**\n   * @type {module:ol/MapBrowserPointerEvent}\n   * @private\n   */\n  this.lastPointerEvent_ = null;\n\n};\n\ninherits(Modify, PointerInteraction);\n\n\n/**\n * The segment index assigned to a circle's center when\n * breaking up a circle into ModifySegmentDataType segments.\n * @type {number}\n */\nconst CIRCLE_CENTER_INDEX = 0;\n\n/**\n * The segment index assigned to a circle's circumference when\n * breaking up a circle into ModifySegmentDataType segments.\n * @type {number}\n */\nconst CIRCLE_CIRCUMFERENCE_INDEX = 1;\n\n\n/**\n * @param {module:ol/Feature} feature Feature.\n * @private\n */\nModify.prototype.addFeature_ = function(feature) {\n  const geometry = feature.getGeometry();\n  if (geometry && geometry.getType() in this.SEGMENT_WRITERS_) {\n    this.SEGMENT_WRITERS_[geometry.getType()].call(this, feature, geometry);\n  }\n  const map = this.getMap();\n  if (map && map.isRendered() && this.getActive()) {\n    this.handlePointerAtPixel_(this.lastPixel_, map);\n  }\n  listen(feature, EventType.CHANGE,\n    this.handleFeatureChange_, this);\n};\n\n\n/**\n * @param {module:ol/MapBrowserPointerEvent} evt Map browser event\n * @private\n */\nModify.prototype.willModifyFeatures_ = function(evt) {\n  if (!this.modified_) {\n    this.modified_ = true;\n    this.dispatchEvent(new ModifyEvent(\n      ModifyEventType.MODIFYSTART, this.features_, evt));\n  }\n};\n\n\n/**\n * @param {module:ol/Feature} feature Feature.\n * @private\n */\nModify.prototype.removeFeature_ = function(feature) {\n  this.removeFeatureSegmentData_(feature);\n  // Remove the vertex feature if the collection of canditate features\n  // is empty.\n  if (this.vertexFeature_ && this.features_.getLength() === 0) {\n    this.overlay_.getSource().removeFeature(this.vertexFeature_);\n    this.vertexFeature_ = null;\n  }\n  unlisten(feature, EventType.CHANGE,\n    this.handleFeatureChange_, this);\n};\n\n\n/**\n * @param {module:ol/Feature} feature Feature.\n * @private\n */\nModify.prototype.removeFeatureSegmentData_ = function(feature) {\n  const rBush = this.rBush_;\n  const /** @type {Array.<module:ol/interaction/Modify~SegmentData>} */ nodesToRemove = [];\n  rBush.forEach(\n    /**\n     * @param {module:ol/interaction/Modify~SegmentData} node RTree node.\n     */\n    function(node) {\n      if (feature === node.feature) {\n        nodesToRemove.push(node);\n      }\n    });\n  for (let i = nodesToRemove.length - 1; i >= 0; --i) {\n    rBush.remove(nodesToRemove[i]);\n  }\n};\n\n\n/**\n * @inheritDoc\n */\nModify.prototype.setActive = function(active) {\n  if (this.vertexFeature_ && !active) {\n    this.overlay_.getSource().removeFeature(this.vertexFeature_);\n    this.vertexFeature_ = null;\n  }\n  PointerInteraction.prototype.setActive.call(this, active);\n};\n\n\n/**\n * @inheritDoc\n */\nModify.prototype.setMap = function(map) {\n  this.overlay_.setMap(map);\n  PointerInteraction.prototype.setMap.call(this, map);\n};\n\n\n/**\n * @param {module:ol/source/Vector~VectorSourceEvent} event Event.\n * @private\n */\nModify.prototype.handleSourceAdd_ = function(event) {\n  if (event.feature) {\n    this.features_.push(event.feature);\n  }\n};\n\n\n/**\n * @param {module:ol/source/Vector~VectorSourceEvent} event Event.\n * @private\n */\nModify.prototype.handleSourceRemove_ = function(event) {\n  if (event.feature) {\n    this.features_.remove(event.feature);\n  }\n};\n\n\n/**\n * @param {module:ol/Collection~CollectionEvent} evt Event.\n * @private\n */\nModify.prototype.handleFeatureAdd_ = function(evt) {\n  this.addFeature_(/** @type {module:ol/Feature} */ (evt.element));\n};\n\n\n/**\n * @param {module:ol/events/Event} evt Event.\n * @private\n */\nModify.prototype.handleFeatureChange_ = function(evt) {\n  if (!this.changingFeature_) {\n    const feature = /** @type {module:ol/Feature} */ (evt.target);\n    this.removeFeature_(feature);\n    this.addFeature_(feature);\n  }\n};\n\n\n/**\n * @param {module:ol/Collection~CollectionEvent} evt Event.\n * @private\n */\nModify.prototype.handleFeatureRemove_ = function(evt) {\n  const feature = /** @type {module:ol/Feature} */ (evt.element);\n  this.removeFeature_(feature);\n};\n\n\n/**\n * @param {module:ol/Feature} feature Feature\n * @param {module:ol/geom/Point} geometry Geometry.\n * @private\n */\nModify.prototype.writePointGeometry_ = function(feature, geometry) {\n  const coordinates = geometry.getCoordinates();\n  const segmentData = /** @type {module:ol/interaction/Modify~SegmentData} */ ({\n    feature: feature,\n    geometry: geometry,\n    segment: [coordinates, coordinates]\n  });\n  this.rBush_.insert(geometry.getExtent(), segmentData);\n};\n\n\n/**\n * @param {module:ol/Feature} feature Feature\n * @param {module:ol/geom/MultiPoint} geometry Geometry.\n * @private\n */\nModify.prototype.writeMultiPointGeometry_ = function(feature, geometry) {\n  const points = geometry.getCoordinates();\n  for (let i = 0, ii = points.length; i < ii; ++i) {\n    const coordinates = points[i];\n    const segmentData = /** @type {module:ol/interaction/Modify~SegmentData} */ ({\n      feature: feature,\n      geometry: geometry,\n      depth: [i],\n      index: i,\n      segment: [coordinates, coordinates]\n    });\n    this.rBush_.insert(geometry.getExtent(), segmentData);\n  }\n};\n\n\n/**\n * @param {module:ol/Feature} feature Feature\n * @param {module:ol/geom/LineString} geometry Geometry.\n * @private\n */\nModify.prototype.writeLineStringGeometry_ = function(feature, geometry) {\n  const coordinates = geometry.getCoordinates();\n  for (let i = 0, ii = coordinates.length - 1; i < ii; ++i) {\n    const segment = coordinates.slice(i, i + 2);\n    const segmentData = /** @type {module:ol/interaction/Modify~SegmentData} */ ({\n      feature: feature,\n      geometry: geometry,\n      index: i,\n      segment: segment\n    });\n    this.rBush_.insert(boundingExtent(segment), segmentData);\n  }\n};\n\n\n/**\n * @param {module:ol/Feature} feature Feature\n * @param {module:ol/geom/MultiLineString} geometry Geometry.\n * @private\n */\nModify.prototype.writeMultiLineStringGeometry_ = function(feature, geometry) {\n  const lines = geometry.getCoordinates();\n  for (let j = 0, jj = lines.length; j < jj; ++j) {\n    const coordinates = lines[j];\n    for (let i = 0, ii = coordinates.length - 1; i < ii; ++i) {\n      const segment = coordinates.slice(i, i + 2);\n      const segmentData = /** @type {module:ol/interaction/Modify~SegmentData} */ ({\n        feature: feature,\n        geometry: geometry,\n        depth: [j],\n        index: i,\n        segment: segment\n      });\n      this.rBush_.insert(boundingExtent(segment), segmentData);\n    }\n  }\n};\n\n\n/**\n * @param {module:ol/Feature} feature Feature\n * @param {module:ol/geom/Polygon} geometry Geometry.\n * @private\n */\nModify.prototype.writePolygonGeometry_ = function(feature, geometry) {\n  const rings = geometry.getCoordinates();\n  for (let j = 0, jj = rings.length; j < jj; ++j) {\n    const coordinates = rings[j];\n    for (let i = 0, ii = coordinates.length - 1; i < ii; ++i) {\n      const segment = coordinates.slice(i, i + 2);\n      const segmentData = /** @type {module:ol/interaction/Modify~SegmentData} */ ({\n        feature: feature,\n        geometry: geometry,\n        depth: [j],\n        index: i,\n        segment: segment\n      });\n      this.rBush_.insert(boundingExtent(segment), segmentData);\n    }\n  }\n};\n\n\n/**\n * @param {module:ol/Feature} feature Feature\n * @param {module:ol/geom/MultiPolygon} geometry Geometry.\n * @private\n */\nModify.prototype.writeMultiPolygonGeometry_ = function(feature, geometry) {\n  const polygons = geometry.getCoordinates();\n  for (let k = 0, kk = polygons.length; k < kk; ++k) {\n    const rings = polygons[k];\n    for (let j = 0, jj = rings.length; j < jj; ++j) {\n      const coordinates = rings[j];\n      for (let i = 0, ii = coordinates.length - 1; i < ii; ++i) {\n        const segment = coordinates.slice(i, i + 2);\n        const segmentData = /** @type {module:ol/interaction/Modify~SegmentData} */ ({\n          feature: feature,\n          geometry: geometry,\n          depth: [j, k],\n          index: i,\n          segment: segment\n        });\n        this.rBush_.insert(boundingExtent(segment), segmentData);\n      }\n    }\n  }\n};\n\n\n/**\n * We convert a circle into two segments.  The segment at index\n * {@link CIRCLE_CENTER_INDEX} is the\n * circle's center (a point).  The segment at index\n * {@link CIRCLE_CIRCUMFERENCE_INDEX} is\n * the circumference, and is not a line segment.\n *\n * @param {module:ol/Feature} feature Feature.\n * @param {module:ol/geom/Circle} geometry Geometry.\n * @private\n */\nModify.prototype.writeCircleGeometry_ = function(feature, geometry) {\n  const coordinates = geometry.getCenter();\n  const centerSegmentData = /** @type {module:ol/interaction/Modify~SegmentData} */ ({\n    feature: feature,\n    geometry: geometry,\n    index: CIRCLE_CENTER_INDEX,\n    segment: [coordinates, coordinates]\n  });\n  const circumferenceSegmentData = /** @type {module:ol/interaction/Modify~SegmentData} */ ({\n    feature: feature,\n    geometry: geometry,\n    index: CIRCLE_CIRCUMFERENCE_INDEX,\n    segment: [coordinates, coordinates]\n  });\n  const featureSegments = [centerSegmentData, circumferenceSegmentData];\n  centerSegmentData.featureSegments = circumferenceSegmentData.featureSegments = featureSegments;\n  this.rBush_.insert(createOrUpdateFromCoordinate(coordinates), centerSegmentData);\n  this.rBush_.insert(geometry.getExtent(), circumferenceSegmentData);\n};\n\n\n/**\n * @param {module:ol/Feature} feature Feature\n * @param {module:ol/geom/GeometryCollection} geometry Geometry.\n * @private\n */\nModify.prototype.writeGeometryCollectionGeometry_ = function(feature, geometry) {\n  const geometries = geometry.getGeometriesArray();\n  for (let i = 0; i < geometries.length; ++i) {\n    this.SEGMENT_WRITERS_[geometries[i].getType()].call(this, feature, geometries[i]);\n  }\n};\n\n\n/**\n * @param {module:ol/coordinate~Coordinate} coordinates Coordinates.\n * @return {module:ol/Feature} Vertex feature.\n * @private\n */\nModify.prototype.createOrUpdateVertexFeature_ = function(coordinates) {\n  let vertexFeature = this.vertexFeature_;\n  if (!vertexFeature) {\n    vertexFeature = new Feature(new Point(coordinates));\n    this.vertexFeature_ = vertexFeature;\n    this.overlay_.getSource().addFeature(vertexFeature);\n  } else {\n    const geometry = /** @type {module:ol/geom/Point} */ (vertexFeature.getGeometry());\n    geometry.setCoordinates(coordinates);\n  }\n  return vertexFeature;\n};\n\n\n/**\n * @param {module:ol/interaction/Modify~SegmentData} a The first segment data.\n * @param {module:ol/interaction/Modify~SegmentData} b The second segment data.\n * @return {number} The difference in indexes.\n */\nfunction compareIndexes(a, b) {\n  return a.index - b.index;\n}\n\n\n/**\n * @param {module:ol/MapBrowserPointerEvent} evt Event.\n * @return {boolean} Start drag sequence?\n * @this {module:ol/interaction/Modify}\n */\nfunction handleDownEvent(evt) {\n  if (!this.condition_(evt)) {\n    return false;\n  }\n  this.handlePointerAtPixel_(evt.pixel, evt.map);\n  const pixelCoordinate = evt.map.getCoordinateFromPixel(evt.pixel);\n  this.dragSegments_.length = 0;\n  this.modified_ = false;\n  const vertexFeature = this.vertexFeature_;\n  if (vertexFeature) {\n    const insertVertices = [];\n    const geometry = /** @type {module:ol/geom/Point} */ (vertexFeature.getGeometry());\n    const vertex = geometry.getCoordinates();\n    const vertexExtent = boundingExtent([vertex]);\n    const segmentDataMatches = this.rBush_.getInExtent(vertexExtent);\n    const componentSegments = {};\n    segmentDataMatches.sort(compareIndexes);\n    for (let i = 0, ii = segmentDataMatches.length; i < ii; ++i) {\n      const segmentDataMatch = segmentDataMatches[i];\n      const segment = segmentDataMatch.segment;\n      let uid = getUid(segmentDataMatch.feature);\n      const depth = segmentDataMatch.depth;\n      if (depth) {\n        uid += '-' + depth.join('-'); // separate feature components\n      }\n      if (!componentSegments[uid]) {\n        componentSegments[uid] = new Array(2);\n      }\n      if (segmentDataMatch.geometry.getType() === GeometryType.CIRCLE &&\n      segmentDataMatch.index === CIRCLE_CIRCUMFERENCE_INDEX) {\n\n        const closestVertex = closestOnSegmentData(pixelCoordinate, segmentDataMatch);\n        if (coordinatesEqual(closestVertex, vertex) && !componentSegments[uid][0]) {\n          this.dragSegments_.push([segmentDataMatch, 0]);\n          componentSegments[uid][0] = segmentDataMatch;\n        }\n      } else if (coordinatesEqual(segment[0], vertex) &&\n          !componentSegments[uid][0]) {\n        this.dragSegments_.push([segmentDataMatch, 0]);\n        componentSegments[uid][0] = segmentDataMatch;\n      } else if (coordinatesEqual(segment[1], vertex) &&\n          !componentSegments[uid][1]) {\n\n        // prevent dragging closed linestrings by the connecting node\n        if ((segmentDataMatch.geometry.getType() ===\n            GeometryType.LINE_STRING ||\n            segmentDataMatch.geometry.getType() ===\n            GeometryType.MULTI_LINE_STRING) &&\n            componentSegments[uid][0] &&\n            componentSegments[uid][0].index === 0) {\n          continue;\n        }\n\n        this.dragSegments_.push([segmentDataMatch, 1]);\n        componentSegments[uid][1] = segmentDataMatch;\n      } else if (this.insertVertexCondition_(evt) && getUid(segment) in this.vertexSegments_ &&\n          (!componentSegments[uid][0] && !componentSegments[uid][1])) {\n        insertVertices.push([segmentDataMatch, vertex]);\n      }\n    }\n    if (insertVertices.length) {\n      this.willModifyFeatures_(evt);\n    }\n    for (let j = insertVertices.length - 1; j >= 0; --j) {\n      this.insertVertex_.apply(this, insertVertices[j]);\n    }\n  }\n  return !!this.vertexFeature_;\n}\n\n\n/**\n * @param {module:ol/MapBrowserPointerEvent} evt Event.\n * @this {module:ol/interaction/Modify}\n */\nfunction handleDragEvent(evt) {\n  this.ignoreNextSingleClick_ = false;\n  this.willModifyFeatures_(evt);\n\n  const vertex = evt.coordinate;\n  for (let i = 0, ii = this.dragSegments_.length; i < ii; ++i) {\n    const dragSegment = this.dragSegments_[i];\n    const segmentData = dragSegment[0];\n    const depth = segmentData.depth;\n    const geometry = segmentData.geometry;\n    let coordinates;\n    const segment = segmentData.segment;\n    const index = dragSegment[1];\n\n    while (vertex.length < geometry.getStride()) {\n      vertex.push(segment[index][vertex.length]);\n    }\n\n    switch (geometry.getType()) {\n      case GeometryType.POINT:\n        coordinates = vertex;\n        segment[0] = segment[1] = vertex;\n        break;\n      case GeometryType.MULTI_POINT:\n        coordinates = geometry.getCoordinates();\n        coordinates[segmentData.index] = vertex;\n        segment[0] = segment[1] = vertex;\n        break;\n      case GeometryType.LINE_STRING:\n        coordinates = geometry.getCoordinates();\n        coordinates[segmentData.index + index] = vertex;\n        segment[index] = vertex;\n        break;\n      case GeometryType.MULTI_LINE_STRING:\n        coordinates = geometry.getCoordinates();\n        coordinates[depth[0]][segmentData.index + index] = vertex;\n        segment[index] = vertex;\n        break;\n      case GeometryType.POLYGON:\n        coordinates = geometry.getCoordinates();\n        coordinates[depth[0]][segmentData.index + index] = vertex;\n        segment[index] = vertex;\n        break;\n      case GeometryType.MULTI_POLYGON:\n        coordinates = geometry.getCoordinates();\n        coordinates[depth[1]][depth[0]][segmentData.index + index] = vertex;\n        segment[index] = vertex;\n        break;\n      case GeometryType.CIRCLE:\n        segment[0] = segment[1] = vertex;\n        if (segmentData.index === CIRCLE_CENTER_INDEX) {\n          this.changingFeature_ = true;\n          geometry.setCenter(vertex);\n          this.changingFeature_ = false;\n        } else { // We're dragging the circle's circumference:\n          this.changingFeature_ = true;\n          geometry.setRadius(coordinateDistance(geometry.getCenter(), vertex));\n          this.changingFeature_ = false;\n        }\n        break;\n      default:\n        // pass\n    }\n\n    if (coordinates) {\n      this.setGeometryCoordinates_(geometry, coordinates);\n    }\n  }\n  this.createOrUpdateVertexFeature_(vertex);\n}\n\n\n/**\n * @param {module:ol/MapBrowserPointerEvent} evt Event.\n * @return {boolean} Stop drag sequence?\n * @this {module:ol/interaction/Modify}\n */\nfunction handleUpEvent(evt) {\n  for (let i = this.dragSegments_.length - 1; i >= 0; --i) {\n    const segmentData = this.dragSegments_[i][0];\n    const geometry = segmentData.geometry;\n    if (geometry.getType() === GeometryType.CIRCLE) {\n      // Update a circle object in the R* bush:\n      const coordinates = geometry.getCenter();\n      const centerSegmentData = segmentData.featureSegments[0];\n      const circumferenceSegmentData = segmentData.featureSegments[1];\n      centerSegmentData.segment[0] = centerSegmentData.segment[1] = coordinates;\n      circumferenceSegmentData.segment[0] = circumferenceSegmentData.segment[1] = coordinates;\n      this.rBush_.update(createOrUpdateFromCoordinate(coordinates), centerSegmentData);\n      this.rBush_.update(geometry.getExtent(), circumferenceSegmentData);\n    } else {\n      this.rBush_.update(boundingExtent(segmentData.segment), segmentData);\n    }\n  }\n  if (this.modified_) {\n    this.dispatchEvent(new ModifyEvent(ModifyEventType.MODIFYEND, this.features_, evt));\n    this.modified_ = false;\n  }\n  return false;\n}\n\n\n/**\n * Handles the {@link module:ol/MapBrowserEvent map browser event} and may modify the\n * geometry.\n * @param {module:ol/MapBrowserEvent} mapBrowserEvent Map browser event.\n * @return {boolean} `false` to stop event propagation.\n * @this {module:ol/interaction/Modify}\n */\nfunction handleEvent(mapBrowserEvent) {\n  if (!(mapBrowserEvent instanceof MapBrowserPointerEvent)) {\n    return true;\n  }\n  this.lastPointerEvent_ = mapBrowserEvent;\n\n  let handled;\n  if (!mapBrowserEvent.map.getView().getInteracting() &&\n      mapBrowserEvent.type == MapBrowserEventType.POINTERMOVE &&\n      !this.handlingDownUpSequence) {\n    this.handlePointerMove_(mapBrowserEvent);\n  }\n  if (this.vertexFeature_ && this.deleteCondition_(mapBrowserEvent)) {\n    if (mapBrowserEvent.type != MapBrowserEventType.SINGLECLICK || !this.ignoreNextSingleClick_) {\n      handled = this.removePoint();\n    } else {\n      handled = true;\n    }\n  }\n\n  if (mapBrowserEvent.type == MapBrowserEventType.SINGLECLICK) {\n    this.ignoreNextSingleClick_ = false;\n  }\n\n  return handlePointerEvent.call(this, mapBrowserEvent) && !handled;\n}\n\n\n/**\n * @param {module:ol/MapBrowserEvent} evt Event.\n * @private\n */\nModify.prototype.handlePointerMove_ = function(evt) {\n  this.lastPixel_ = evt.pixel;\n  this.handlePointerAtPixel_(evt.pixel, evt.map);\n};\n\n\n/**\n * @param {module:ol~Pixel} pixel Pixel\n * @param {module:ol/PluggableMap} map Map.\n * @private\n */\nModify.prototype.handlePointerAtPixel_ = function(pixel, map) {\n  const pixelCoordinate = map.getCoordinateFromPixel(pixel);\n  const sortByDistance = function(a, b) {\n    return pointDistanceToSegmentDataSquared(pixelCoordinate, a) -\n        pointDistanceToSegmentDataSquared(pixelCoordinate, b);\n  };\n\n  const box = buffer(createOrUpdateFromCoordinate(pixelCoordinate),\n    map.getView().getResolution() * this.pixelTolerance_);\n\n  const rBush = this.rBush_;\n  const nodes = rBush.getInExtent(box);\n  if (nodes.length > 0) {\n    nodes.sort(sortByDistance);\n    const node = nodes[0];\n    const closestSegment = node.segment;\n    let vertex = closestOnSegmentData(pixelCoordinate, node);\n    const vertexPixel = map.getPixelFromCoordinate(vertex);\n    let dist = coordinateDistance(pixel, vertexPixel);\n    if (dist <= this.pixelTolerance_) {\n      const vertexSegments = {};\n\n      if (node.geometry.getType() === GeometryType.CIRCLE &&\n      node.index === CIRCLE_CIRCUMFERENCE_INDEX) {\n\n        this.snappedToVertex_ = true;\n        this.createOrUpdateVertexFeature_(vertex);\n      } else {\n        const pixel1 = map.getPixelFromCoordinate(closestSegment[0]);\n        const pixel2 = map.getPixelFromCoordinate(closestSegment[1]);\n        const squaredDist1 = squaredCoordinateDistance(vertexPixel, pixel1);\n        const squaredDist2 = squaredCoordinateDistance(vertexPixel, pixel2);\n        dist = Math.sqrt(Math.min(squaredDist1, squaredDist2));\n        this.snappedToVertex_ = dist <= this.pixelTolerance_;\n        if (this.snappedToVertex_) {\n          vertex = squaredDist1 > squaredDist2 ? closestSegment[1] : closestSegment[0];\n        }\n        this.createOrUpdateVertexFeature_(vertex);\n        for (let i = 1, ii = nodes.length; i < ii; ++i) {\n          const segment = nodes[i].segment;\n          if ((coordinatesEqual(closestSegment[0], segment[0]) &&\n              coordinatesEqual(closestSegment[1], segment[1]) ||\n              (coordinatesEqual(closestSegment[0], segment[1]) &&\n              coordinatesEqual(closestSegment[1], segment[0])))) {\n            vertexSegments[getUid(segment)] = true;\n          } else {\n            break;\n          }\n        }\n      }\n\n      vertexSegments[getUid(closestSegment)] = true;\n      this.vertexSegments_ = vertexSegments;\n      return;\n    }\n  }\n  if (this.vertexFeature_) {\n    this.overlay_.getSource().removeFeature(this.vertexFeature_);\n    this.vertexFeature_ = null;\n  }\n};\n\n\n/**\n * Returns the distance from a point to a line segment.\n *\n * @param {module:ol/coordinate~Coordinate} pointCoordinates The coordinates of the point from\n *        which to calculate the distance.\n * @param {module:ol/interaction/Modify~SegmentData} segmentData The object describing the line\n *        segment we are calculating the distance to.\n * @return {number} The square of the distance between a point and a line segment.\n */\nfunction pointDistanceToSegmentDataSquared(pointCoordinates, segmentData) {\n  const geometry = segmentData.geometry;\n\n  if (geometry.getType() === GeometryType.CIRCLE) {\n    const circleGeometry = /** @type {module:ol/geom/Circle} */ (geometry);\n\n    if (segmentData.index === CIRCLE_CIRCUMFERENCE_INDEX) {\n      const distanceToCenterSquared =\n            squaredCoordinateDistance(circleGeometry.getCenter(), pointCoordinates);\n      const distanceToCircumference =\n            Math.sqrt(distanceToCenterSquared) - circleGeometry.getRadius();\n      return distanceToCircumference * distanceToCircumference;\n    }\n  }\n  return squaredDistanceToSegment(pointCoordinates, segmentData.segment);\n}\n\n/**\n * Returns the point closest to a given line segment.\n *\n * @param {module:ol/coordinate~Coordinate} pointCoordinates The point to which a closest point\n *        should be found.\n * @param {module:ol/interaction/Modify~SegmentData} segmentData The object describing the line\n *        segment which should contain the closest point.\n * @return {module:ol/coordinate~Coordinate} The point closest to the specified line segment.\n */\nfunction closestOnSegmentData(pointCoordinates, segmentData) {\n  const geometry = segmentData.geometry;\n\n  if (geometry.getType() === GeometryType.CIRCLE &&\n  segmentData.index === CIRCLE_CIRCUMFERENCE_INDEX) {\n    return geometry.getClosestPoint(pointCoordinates);\n  }\n  return closestOnSegment(pointCoordinates, segmentData.segment);\n}\n\n\n/**\n * @param {module:ol/interaction/Modify~SegmentData} segmentData Segment data.\n * @param {module:ol/coordinate~Coordinate} vertex Vertex.\n * @private\n */\nModify.prototype.insertVertex_ = function(segmentData, vertex) {\n  const segment = segmentData.segment;\n  const feature = segmentData.feature;\n  const geometry = segmentData.geometry;\n  const depth = segmentData.depth;\n  const index = /** @type {number} */ (segmentData.index);\n  let coordinates;\n\n  while (vertex.length < geometry.getStride()) {\n    vertex.push(0);\n  }\n\n  switch (geometry.getType()) {\n    case GeometryType.MULTI_LINE_STRING:\n      coordinates = geometry.getCoordinates();\n      coordinates[depth[0]].splice(index + 1, 0, vertex);\n      break;\n    case GeometryType.POLYGON:\n      coordinates = geometry.getCoordinates();\n      coordinates[depth[0]].splice(index + 1, 0, vertex);\n      break;\n    case GeometryType.MULTI_POLYGON:\n      coordinates = geometry.getCoordinates();\n      coordinates[depth[1]][depth[0]].splice(index + 1, 0, vertex);\n      break;\n    case GeometryType.LINE_STRING:\n      coordinates = geometry.getCoordinates();\n      coordinates.splice(index + 1, 0, vertex);\n      break;\n    default:\n      return;\n  }\n\n  this.setGeometryCoordinates_(geometry, coordinates);\n  const rTree = this.rBush_;\n  rTree.remove(segmentData);\n  this.updateSegmentIndices_(geometry, index, depth, 1);\n  const newSegmentData = /** @type {module:ol/interaction/Modify~SegmentData} */ ({\n    segment: [segment[0], vertex],\n    feature: feature,\n    geometry: geometry,\n    depth: depth,\n    index: index\n  });\n  rTree.insert(boundingExtent(newSegmentData.segment),\n    newSegmentData);\n  this.dragSegments_.push([newSegmentData, 1]);\n\n  const newSegmentData2 = /** @type {module:ol/interaction/Modify~SegmentData} */ ({\n    segment: [vertex, segment[1]],\n    feature: feature,\n    geometry: geometry,\n    depth: depth,\n    index: index + 1\n  });\n  rTree.insert(boundingExtent(newSegmentData2.segment), newSegmentData2);\n  this.dragSegments_.push([newSegmentData2, 0]);\n  this.ignoreNextSingleClick_ = true;\n};\n\n/**\n * Removes the vertex currently being pointed.\n * @return {boolean} True when a vertex was removed.\n * @api\n */\nModify.prototype.removePoint = function() {\n  if (this.lastPointerEvent_ && this.lastPointerEvent_.type != MapBrowserEventType.POINTERDRAG) {\n    const evt = this.lastPointerEvent_;\n    this.willModifyFeatures_(evt);\n    this.removeVertex_();\n    this.dispatchEvent(new ModifyEvent(ModifyEventType.MODIFYEND, this.features_, evt));\n    this.modified_ = false;\n    return true;\n  }\n  return false;\n};\n\n/**\n * Removes a vertex from all matching features.\n * @return {boolean} True when a vertex was removed.\n * @private\n */\nModify.prototype.removeVertex_ = function() {\n  const dragSegments = this.dragSegments_;\n  const segmentsByFeature = {};\n  let deleted = false;\n  let component, coordinates, dragSegment, geometry, i, index, left;\n  let newIndex, right, segmentData, uid;\n  for (i = dragSegments.length - 1; i >= 0; --i) {\n    dragSegment = dragSegments[i];\n    segmentData = dragSegment[0];\n    uid = getUid(segmentData.feature);\n    if (segmentData.depth) {\n      // separate feature components\n      uid += '-' + segmentData.depth.join('-');\n    }\n    if (!(uid in segmentsByFeature)) {\n      segmentsByFeature[uid] = {};\n    }\n    if (dragSegment[1] === 0) {\n      segmentsByFeature[uid].right = segmentData;\n      segmentsByFeature[uid].index = segmentData.index;\n    } else if (dragSegment[1] == 1) {\n      segmentsByFeature[uid].left = segmentData;\n      segmentsByFeature[uid].index = segmentData.index + 1;\n    }\n\n  }\n  for (uid in segmentsByFeature) {\n    right = segmentsByFeature[uid].right;\n    left = segmentsByFeature[uid].left;\n    index = segmentsByFeature[uid].index;\n    newIndex = index - 1;\n    if (left !== undefined) {\n      segmentData = left;\n    } else {\n      segmentData = right;\n    }\n    if (newIndex < 0) {\n      newIndex = 0;\n    }\n    geometry = segmentData.geometry;\n    coordinates = geometry.getCoordinates();\n    component = coordinates;\n    deleted = false;\n    switch (geometry.getType()) {\n      case GeometryType.MULTI_LINE_STRING:\n        if (coordinates[segmentData.depth[0]].length > 2) {\n          coordinates[segmentData.depth[0]].splice(index, 1);\n          deleted = true;\n        }\n        break;\n      case GeometryType.LINE_STRING:\n        if (coordinates.length > 2) {\n          coordinates.splice(index, 1);\n          deleted = true;\n        }\n        break;\n      case GeometryType.MULTI_POLYGON:\n        component = component[segmentData.depth[1]];\n        /* falls through */\n      case GeometryType.POLYGON:\n        component = component[segmentData.depth[0]];\n        if (component.length > 4) {\n          if (index == component.length - 1) {\n            index = 0;\n          }\n          component.splice(index, 1);\n          deleted = true;\n          if (index === 0) {\n            // close the ring again\n            component.pop();\n            component.push(component[0]);\n            newIndex = component.length - 1;\n          }\n        }\n        break;\n      default:\n        // pass\n    }\n\n    if (deleted) {\n      this.setGeometryCoordinates_(geometry, coordinates);\n      const segments = [];\n      if (left !== undefined) {\n        this.rBush_.remove(left);\n        segments.push(left.segment[0]);\n      }\n      if (right !== undefined) {\n        this.rBush_.remove(right);\n        segments.push(right.segment[1]);\n      }\n      if (left !== undefined && right !== undefined) {\n        const newSegmentData = /** @type {module:ol/interaction/Modify~SegmentData} */ ({\n          depth: segmentData.depth,\n          feature: segmentData.feature,\n          geometry: segmentData.geometry,\n          index: newIndex,\n          segment: segments\n        });\n        this.rBush_.insert(boundingExtent(newSegmentData.segment),\n          newSegmentData);\n      }\n      this.updateSegmentIndices_(geometry, index, segmentData.depth, -1);\n      if (this.vertexFeature_) {\n        this.overlay_.getSource().removeFeature(this.vertexFeature_);\n        this.vertexFeature_ = null;\n      }\n      dragSegments.length = 0;\n    }\n\n  }\n  return deleted;\n};\n\n\n/**\n * @param {module:ol/geom/SimpleGeometry} geometry Geometry.\n * @param {Array} coordinates Coordinates.\n * @private\n */\nModify.prototype.setGeometryCoordinates_ = function(geometry, coordinates) {\n  this.changingFeature_ = true;\n  geometry.setCoordinates(coordinates);\n  this.changingFeature_ = false;\n};\n\n\n/**\n * @param {module:ol/geom/SimpleGeometry} geometry Geometry.\n * @param {number} index Index.\n * @param {Array.<number>|undefined} depth Depth.\n * @param {number} delta Delta (1 or -1).\n * @private\n */\nModify.prototype.updateSegmentIndices_ = function(\n  geometry, index, depth, delta) {\n  this.rBush_.forEachInExtent(geometry.getExtent(), function(segmentDataMatch) {\n    if (segmentDataMatch.geometry === geometry &&\n        (depth === undefined || segmentDataMatch.depth === undefined ||\n        equals(segmentDataMatch.depth, depth)) &&\n        segmentDataMatch.index > index) {\n      segmentDataMatch.index += delta;\n    }\n  });\n};\n\n\n/**\n * @return {module:ol/style/Style~StyleFunction} Styles.\n */\nfunction getDefaultStyleFunction() {\n  const style = createEditingStyle();\n  return function(feature, resolution) {\n    return style[GeometryType.POINT];\n  };\n}\n\n\nexport default Modify;\n","/**\n * @module ol/extent/Corner\n */\n\n/**\n * Extent corner.\n * @enum {string}\n */\nexport default {\n  BOTTOM_LEFT: 'bottom-left',\n  BOTTOM_RIGHT: 'bottom-right',\n  TOP_LEFT: 'top-left',\n  TOP_RIGHT: 'top-right'\n};\n","/**\n * @module ol/render/Box\n */\n// FIXME add rotation\n\nimport {inherits} from '../util.js';\nimport Disposable from '../Disposable.js';\nimport Polygon from '../geom/Polygon.js';\n\n/**\n * @constructor\n * @extends {module:ol/Disposable}\n * @param {string} className CSS class name.\n */\nconst RenderBox = function(className) {\n\n  /**\n   * @type {module:ol/geom/Polygon}\n   * @private\n   */\n  this.geometry_ = null;\n\n  /**\n   * @type {HTMLDivElement}\n   * @private\n   */\n  this.element_ = /** @type {HTMLDivElement} */ (document.createElement('div'));\n  this.element_.style.position = 'absolute';\n  this.element_.className = 'ol-box ' + className;\n\n  /**\n   * @private\n   * @type {module:ol/PluggableMap}\n   */\n  this.map_ = null;\n\n  /**\n   * @private\n   * @type {module:ol~Pixel}\n   */\n  this.startPixel_ = null;\n\n  /**\n   * @private\n   * @type {module:ol~Pixel}\n   */\n  this.endPixel_ = null;\n\n};\n\ninherits(RenderBox, Disposable);\n\n\n/**\n * @inheritDoc\n */\nRenderBox.prototype.disposeInternal = function() {\n  this.setMap(null);\n};\n\n\n/**\n * @private\n */\nRenderBox.prototype.render_ = function() {\n  const startPixel = this.startPixel_;\n  const endPixel = this.endPixel_;\n  const px = 'px';\n  const style = this.element_.style;\n  style.left = Math.min(startPixel[0], endPixel[0]) + px;\n  style.top = Math.min(startPixel[1], endPixel[1]) + px;\n  style.width = Math.abs(endPixel[0] - startPixel[0]) + px;\n  style.height = Math.abs(endPixel[1] - startPixel[1]) + px;\n};\n\n\n/**\n * @param {module:ol/PluggableMap} map Map.\n */\nRenderBox.prototype.setMap = function(map) {\n  if (this.map_) {\n    this.map_.getOverlayContainer().removeChild(this.element_);\n    const style = this.element_.style;\n    style.left = style.top = style.width = style.height = 'inherit';\n  }\n  this.map_ = map;\n  if (this.map_) {\n    this.map_.getOverlayContainer().appendChild(this.element_);\n  }\n};\n\n\n/**\n * @param {module:ol~Pixel} startPixel Start pixel.\n * @param {module:ol~Pixel} endPixel End pixel.\n */\nRenderBox.prototype.setPixels = function(startPixel, endPixel) {\n  this.startPixel_ = startPixel;\n  this.endPixel_ = endPixel;\n  this.createOrUpdateGeometry();\n  this.render_();\n};\n\n\n/**\n * Creates or updates the cached geometry.\n */\nRenderBox.prototype.createOrUpdateGeometry = function() {\n  const startPixel = this.startPixel_;\n  const endPixel = this.endPixel_;\n  const pixels = [\n    startPixel,\n    [startPixel[0], endPixel[1]],\n    endPixel,\n    [endPixel[0], startPixel[1]]\n  ];\n  const coordinates = pixels.map(this.map_.getCoordinateFromPixel, this.map_);\n  // close the polygon\n  coordinates[4] = coordinates[0].slice();\n  if (!this.geometry_) {\n    this.geometry_ = new Polygon([coordinates]);\n  } else {\n    this.geometry_.setCoordinates([coordinates]);\n  }\n};\n\n\n/**\n * @return {module:ol/geom/Polygon} Geometry.\n */\nRenderBox.prototype.getGeometry = function() {\n  return this.geometry_;\n};\nexport default RenderBox;\n","/**\n * @module ol/interaction/DragBox\n */\n// FIXME draw drag box\nimport Event from '../events/Event.js';\nimport {inherits} from '../util.js';\nimport {always, mouseOnly, mouseActionButton} from '../events/condition.js';\nimport {UNDEFINED} from '../functions.js';\nimport PointerInteraction from '../interaction/Pointer.js';\nimport RenderBox from '../render/Box.js';\n\n\n/**\n * A function that takes a {@link module:ol/MapBrowserEvent} and two\n * {@link module:ol~Pixel}s and returns a `{boolean}`. If the condition is met,\n * true should be returned.\n * @typedef {function(this: ?, module:ol/MapBrowserEvent, module:ol~Pixel, module:ol~Pixel):boolean} EndCondition\n */\n\n\n/**\n * @typedef {Object} Options\n * @property {string} [className='ol-dragbox'] CSS class name for styling the box.\n * @property {module:ol/events/condition~Condition} [condition] A function that takes an {@link module:ol/MapBrowserEvent~MapBrowserEvent} and returns a boolean\n * to indicate whether that event should be handled.\n * Default is {@link ol/events/condition~always}.\n * @property {number} [minArea=64] The minimum area of the box in pixel, this value is used by the default\n * `boxEndCondition` function.\n * @property {module:ol/interaction/DragBox~EndCondition} [boxEndCondition] A function that takes a {@link module:ol/MapBrowserEvent~MapBrowserEvent} and two\n * {@link module:ol~Pixel}s to indicate whether a `boxend` event should be fired.\n * Default is `true` if the area of the box is bigger than the `minArea` option.\n */\n\n\n/**\n * @enum {string}\n */\nconst DragBoxEventType = {\n  /**\n   * Triggered upon drag box start.\n   * @event module:ol/interaction/DragBox~DragBoxEvent#boxstart\n   * @api\n   */\n  BOXSTART: 'boxstart',\n\n  /**\n   * Triggered on drag when box is active.\n   * @event module:ol/interaction/DragBox~DragBoxEvent#boxdrag\n   * @api\n   */\n  BOXDRAG: 'boxdrag',\n\n  /**\n   * Triggered upon drag box end.\n   * @event module:ol/interaction/DragBox~DragBoxEvent#boxend\n   * @api\n   */\n  BOXEND: 'boxend'\n};\n\n\n/**\n * @classdesc\n * Events emitted by {@link module:ol/interaction/DragBox~DragBox} instances are instances of\n * this type.\n *\n * @param {string} type The event type.\n * @param {module:ol/coordinate~Coordinate} coordinate The event coordinate.\n * @param {module:ol/MapBrowserEvent} mapBrowserEvent Originating event.\n * @extends {module:ol/events/Event}\n * @constructor\n */\nconst DragBoxEvent = function(type, coordinate, mapBrowserEvent) {\n  Event.call(this, type);\n\n  /**\n   * The coordinate of the drag event.\n   * @const\n   * @type {module:ol/coordinate~Coordinate}\n   * @api\n   */\n  this.coordinate = coordinate;\n\n  /**\n   * @const\n   * @type {module:ol/MapBrowserEvent}\n   * @api\n   */\n  this.mapBrowserEvent = mapBrowserEvent;\n\n};\n\ninherits(DragBoxEvent, Event);\n\n\n/**\n * @classdesc\n * Allows the user to draw a vector box by clicking and dragging on the map,\n * normally combined with an {@link module:ol/events/condition} that limits\n * it to when the shift or other key is held down. This is used, for example,\n * for zooming to a specific area of the map\n * (see {@link module:ol/interaction/DragZoom~DragZoom} and\n * {@link module:ol/interaction/DragRotateAndZoom}).\n *\n * This interaction is only supported for mouse devices.\n *\n * @constructor\n * @extends {module:ol/interaction/Pointer}\n * @fires module:ol/interaction/DragBox~DragBoxEvent\n * @param {module:ol/interaction/DragBox~Options=} opt_options Options.\n * @api\n */\nconst DragBox = function(opt_options) {\n\n  PointerInteraction.call(this, {\n    handleDownEvent: handleDownEvent,\n    handleDragEvent: handleDragEvent,\n    handleUpEvent: handleUpEvent\n  });\n\n  const options = opt_options ? opt_options : {};\n\n  /**\n   * @type {module:ol/render/Box}\n   * @private\n   */\n  this.box_ = new RenderBox(options.className || 'ol-dragbox');\n\n  /**\n   * @type {number}\n   * @private\n   */\n  this.minArea_ = options.minArea !== undefined ? options.minArea : 64;\n\n  /**\n   * @type {module:ol~Pixel}\n   * @private\n   */\n  this.startPixel_ = null;\n\n  /**\n   * @private\n   * @type {module:ol/events/condition~Condition}\n   */\n  this.condition_ = options.condition ? options.condition : always;\n\n  /**\n   * @private\n   * @type {module:ol/interaction/DragBox~EndCondition}\n   */\n  this.boxEndCondition_ = options.boxEndCondition ?\n    options.boxEndCondition : defaultBoxEndCondition;\n};\n\ninherits(DragBox, PointerInteraction);\n\n\n/**\n * The default condition for determining whether the boxend event\n * should fire.\n * @param {module:ol/MapBrowserEvent} mapBrowserEvent The originating MapBrowserEvent\n *     leading to the box end.\n * @param {module:ol~Pixel} startPixel The starting pixel of the box.\n * @param {module:ol~Pixel} endPixel The end pixel of the box.\n * @return {boolean} Whether or not the boxend condition should be fired.\n * @this {module:ol/interaction/DragBox}\n */\nfunction defaultBoxEndCondition(mapBrowserEvent, startPixel, endPixel) {\n  const width = endPixel[0] - startPixel[0];\n  const height = endPixel[1] - startPixel[1];\n  return width * width + height * height >= this.minArea_;\n}\n\n\n/**\n * @param {module:ol/MapBrowserPointerEvent} mapBrowserEvent Event.\n * @this {module:ol/interaction/DragBox}\n */\nfunction handleDragEvent(mapBrowserEvent) {\n  if (!mouseOnly(mapBrowserEvent)) {\n    return;\n  }\n\n  this.box_.setPixels(this.startPixel_, mapBrowserEvent.pixel);\n\n  this.dispatchEvent(new DragBoxEvent(DragBoxEventType.BOXDRAG,\n    mapBrowserEvent.coordinate, mapBrowserEvent));\n}\n\n\n/**\n * Returns geometry of last drawn box.\n * @return {module:ol/geom/Polygon} Geometry.\n * @api\n */\nDragBox.prototype.getGeometry = function() {\n  return this.box_.getGeometry();\n};\n\n\n/**\n * To be overridden by child classes.\n * FIXME: use constructor option instead of relying on overriding.\n * @param {module:ol/MapBrowserEvent} mapBrowserEvent Map browser event.\n * @protected\n */\nDragBox.prototype.onBoxEnd = UNDEFINED;\n\n\n/**\n * @param {module:ol/MapBrowserPointerEvent} mapBrowserEvent Event.\n * @return {boolean} Stop drag sequence?\n * @this {module:ol/interaction/DragBox}\n */\nfunction handleUpEvent(mapBrowserEvent) {\n  if (!mouseOnly(mapBrowserEvent)) {\n    return true;\n  }\n\n  this.box_.setMap(null);\n\n  if (this.boxEndCondition_(mapBrowserEvent,\n    this.startPixel_, mapBrowserEvent.pixel)) {\n    this.onBoxEnd(mapBrowserEvent);\n    this.dispatchEvent(new DragBoxEvent(DragBoxEventType.BOXEND,\n      mapBrowserEvent.coordinate, mapBrowserEvent));\n  }\n  return false;\n}\n\n\n/**\n * @param {module:ol/MapBrowserPointerEvent} mapBrowserEvent Event.\n * @return {boolean} Start drag sequence?\n * @this {module:ol/interaction/DragBox}\n */\nfunction handleDownEvent(mapBrowserEvent) {\n  if (!mouseOnly(mapBrowserEvent)) {\n    return false;\n  }\n\n  if (mouseActionButton(mapBrowserEvent) &&\n      this.condition_(mapBrowserEvent)) {\n    this.startPixel_ = mapBrowserEvent.pixel;\n    this.box_.setMap(mapBrowserEvent.map);\n    this.box_.setPixels(this.startPixel_, this.startPixel_);\n    this.dispatchEvent(new DragBoxEvent(DragBoxEventType.BOXSTART,\n      mapBrowserEvent.coordinate, mapBrowserEvent));\n    return true;\n  } else {\n    return false;\n  }\n}\n\n\nexport default DragBox;\n","/**\n * @module ol/GeolocationProperty\n */\n\n/**\n * @enum {string}\n */\nexport default {\n  ACCURACY: 'accuracy',\n  ACCURACY_GEOMETRY: 'accuracyGeometry',\n  ALTITUDE: 'altitude',\n  ALTITUDE_ACCURACY: 'altitudeAccuracy',\n  HEADING: 'heading',\n  POSITION: 'position',\n  PROJECTION: 'projection',\n  SPEED: 'speed',\n  TRACKING: 'tracking',\n  TRACKING_OPTIONS: 'trackingOptions'\n};\n","/**\n * @module ol/Geolocation\n */\nimport {inherits} from './util.js';\nimport GeolocationProperty from './GeolocationProperty.js';\nimport BaseObject, {getChangeEventType} from './Object.js';\nimport {listen} from './events.js';\nimport EventType from './events/EventType.js';\nimport {circular as circularPolygon} from './geom/Polygon.js';\nimport {GEOLOCATION} from './has.js';\nimport {toRadians} from './math.js';\nimport {get as getProjection, getTransformFromProjections, identityTransform} from './proj.js';\n\n\n/**\n * @typedef {Object} Options\n * @property {boolean} [tracking=false] Start Tracking right after\n * instantiation.\n * @property {GeolocationPositionOptions} [trackingOptions] Tracking options.\n * See {@link http://www.w3.org/TR/geolocation-API/#position_options_interface}.\n * @property {module:ol/proj~ProjectionLike} [projection] The projection the position\n * is reported in.\n */\n\n\n/**\n * @classdesc\n * Helper class for providing HTML5 Geolocation capabilities.\n * The [Geolocation API](http://www.w3.org/TR/geolocation-API/)\n * is used to locate a user's position.\n *\n * To get notified of position changes, register a listener for the generic\n * `change` event on your instance of {@link module:ol/Geolocation~Geolocation}.\n *\n * Example:\n *\n *     var geolocation = new Geolocation({\n *       // take the projection to use from the map's view\n *       projection: view.getProjection()\n *     });\n *     // listen to changes in position\n *     geolocation.on('change', function(evt) {\n *       window.console.log(geolocation.getPosition());\n *     });\n *\n * @fires error\n * @constructor\n * @extends {module:ol/Object}\n * @param {module:ol/Geolocation~Options=} opt_options Options.\n * @api\n */\nconst Geolocation = function(opt_options) {\n\n  BaseObject.call(this);\n\n  const options = opt_options || {};\n\n  /**\n   * The unprojected (EPSG:4326) device position.\n   * @private\n   * @type {module:ol/coordinate~Coordinate}\n   */\n  this.position_ = null;\n\n  /**\n   * @private\n   * @type {module:ol/proj~TransformFunction}\n   */\n  this.transform_ = identityTransform;\n\n  /**\n   * @private\n   * @type {number|undefined}\n   */\n  this.watchId_ = undefined;\n\n  listen(\n    this, getChangeEventType(GeolocationProperty.PROJECTION),\n    this.handleProjectionChanged_, this);\n  listen(\n    this, getChangeEventType(GeolocationProperty.TRACKING),\n    this.handleTrackingChanged_, this);\n\n  if (options.projection !== undefined) {\n    this.setProjection(options.projection);\n  }\n  if (options.trackingOptions !== undefined) {\n    this.setTrackingOptions(options.trackingOptions);\n  }\n\n  this.setTracking(options.tracking !== undefined ? options.tracking : false);\n\n};\n\ninherits(Geolocation, BaseObject);\n\n\n/**\n * @inheritDoc\n */\nGeolocation.prototype.disposeInternal = function() {\n  this.setTracking(false);\n  BaseObject.prototype.disposeInternal.call(this);\n};\n\n\n/**\n * @private\n */\nGeolocation.prototype.handleProjectionChanged_ = function() {\n  const projection = this.getProjection();\n  if (projection) {\n    this.transform_ = getTransformFromProjections(\n      getProjection('EPSG:4326'), projection);\n    if (this.position_) {\n      this.set(GeolocationProperty.POSITION, this.transform_(this.position_));\n    }\n  }\n};\n\n\n/**\n * @private\n */\nGeolocation.prototype.handleTrackingChanged_ = function() {\n  if (GEOLOCATION) {\n    const tracking = this.getTracking();\n    if (tracking && this.watchId_ === undefined) {\n      this.watchId_ = navigator.geolocation.watchPosition(\n        this.positionChange_.bind(this),\n        this.positionError_.bind(this),\n        this.getTrackingOptions());\n    } else if (!tracking && this.watchId_ !== undefined) {\n      navigator.geolocation.clearWatch(this.watchId_);\n      this.watchId_ = undefined;\n    }\n  }\n};\n\n\n/**\n * @private\n * @param {GeolocationPosition} position position event.\n */\nGeolocation.prototype.positionChange_ = function(position) {\n  const coords = position.coords;\n  this.set(GeolocationProperty.ACCURACY, coords.accuracy);\n  this.set(GeolocationProperty.ALTITUDE,\n    coords.altitude === null ? undefined : coords.altitude);\n  this.set(GeolocationProperty.ALTITUDE_ACCURACY,\n    coords.altitudeAccuracy === null ?\n      undefined : coords.altitudeAccuracy);\n  this.set(GeolocationProperty.HEADING, coords.heading === null ?\n    undefined : toRadians(coords.heading));\n  if (!this.position_) {\n    this.position_ = [coords.longitude, coords.latitude];\n  } else {\n    this.position_[0] = coords.longitude;\n    this.position_[1] = coords.latitude;\n  }\n  const projectedPosition = this.transform_(this.position_);\n  this.set(GeolocationProperty.POSITION, projectedPosition);\n  this.set(GeolocationProperty.SPEED,\n    coords.speed === null ? undefined : coords.speed);\n  const geometry = circularPolygon(this.position_, coords.accuracy);\n  geometry.applyTransform(this.transform_);\n  this.set(GeolocationProperty.ACCURACY_GEOMETRY, geometry);\n  this.changed();\n};\n\n/**\n * Triggered when the Geolocation returns an error.\n * @event error\n * @api\n */\n\n/**\n * @private\n * @param {GeolocationPositionError} error error object.\n */\nGeolocation.prototype.positionError_ = function(error) {\n  error.type = EventType.ERROR;\n  this.setTracking(false);\n  this.dispatchEvent(/** @type {{type: string, target: undefined}} */ (error));\n};\n\n\n/**\n * Get the accuracy of the position in meters.\n * @return {number|undefined} The accuracy of the position measurement in\n *     meters.\n * @observable\n * @api\n */\nGeolocation.prototype.getAccuracy = function() {\n  return /** @type {number|undefined} */ (this.get(GeolocationProperty.ACCURACY));\n};\n\n\n/**\n * Get a geometry of the position accuracy.\n * @return {?module:ol/geom/Polygon} A geometry of the position accuracy.\n * @observable\n * @api\n */\nGeolocation.prototype.getAccuracyGeometry = function() {\n  return (\n    /** @type {?module:ol/geom/Polygon} */ (this.get(GeolocationProperty.ACCURACY_GEOMETRY) || null)\n  );\n};\n\n\n/**\n * Get the altitude associated with the position.\n * @return {number|undefined} The altitude of the position in meters above mean\n *     sea level.\n * @observable\n * @api\n */\nGeolocation.prototype.getAltitude = function() {\n  return /** @type {number|undefined} */ (this.get(GeolocationProperty.ALTITUDE));\n};\n\n\n/**\n * Get the altitude accuracy of the position.\n * @return {number|undefined} The accuracy of the altitude measurement in\n *     meters.\n * @observable\n * @api\n */\nGeolocation.prototype.getAltitudeAccuracy = function() {\n  return /** @type {number|undefined} */ (this.get(GeolocationProperty.ALTITUDE_ACCURACY));\n};\n\n\n/**\n * Get the heading as radians clockwise from North.\n * Note: depending on the browser, the heading is only defined if the `enableHighAccuracy`\n * is set to `true` in the tracking options.\n * @return {number|undefined} The heading of the device in radians from north.\n * @observable\n * @api\n */\nGeolocation.prototype.getHeading = function() {\n  return /** @type {number|undefined} */ (this.get(GeolocationProperty.HEADING));\n};\n\n\n/**\n * Get the position of the device.\n * @return {module:ol/coordinate~Coordinate|undefined} The current position of the device reported\n *     in the current projection.\n * @observable\n * @api\n */\nGeolocation.prototype.getPosition = function() {\n  return (\n    /** @type {module:ol/coordinate~Coordinate|undefined} */ (this.get(GeolocationProperty.POSITION))\n  );\n};\n\n\n/**\n * Get the projection associated with the position.\n * @return {module:ol/proj/Projection|undefined} The projection the position is\n *     reported in.\n * @observable\n * @api\n */\nGeolocation.prototype.getProjection = function() {\n  return (\n    /** @type {module:ol/proj/Projection|undefined} */ (this.get(GeolocationProperty.PROJECTION))\n  );\n};\n\n\n/**\n * Get the speed in meters per second.\n * @return {number|undefined} The instantaneous speed of the device in meters\n *     per second.\n * @observable\n * @api\n */\nGeolocation.prototype.getSpeed = function() {\n  return /** @type {number|undefined} */ (this.get(GeolocationProperty.SPEED));\n};\n\n\n/**\n * Determine if the device location is being tracked.\n * @return {boolean} The device location is being tracked.\n * @observable\n * @api\n */\nGeolocation.prototype.getTracking = function() {\n  return /** @type {boolean} */ (this.get(GeolocationProperty.TRACKING));\n};\n\n\n/**\n * Get the tracking options.\n * @see http://www.w3.org/TR/geolocation-API/#position-options\n * @return {GeolocationPositionOptions|undefined} PositionOptions as defined by\n *     the [HTML5 Geolocation spec\n *     ](http://www.w3.org/TR/geolocation-API/#position_options_interface).\n * @observable\n * @api\n */\nGeolocation.prototype.getTrackingOptions = function() {\n  return /** @type {GeolocationPositionOptions|undefined} */ (this.get(GeolocationProperty.TRACKING_OPTIONS));\n};\n\n\n/**\n * Set the projection to use for transforming the coordinates.\n * @param {module:ol/proj~ProjectionLike} projection The projection the position is\n *     reported in.\n * @observable\n * @api\n */\nGeolocation.prototype.setProjection = function(projection) {\n  this.set(GeolocationProperty.PROJECTION, getProjection(projection));\n};\n\n\n/**\n * Enable or disable tracking.\n * @param {boolean} tracking Enable tracking.\n * @observable\n * @api\n */\nGeolocation.prototype.setTracking = function(tracking) {\n  this.set(GeolocationProperty.TRACKING, tracking);\n};\n\n\n/**\n * Set the tracking options.\n * @see http://www.w3.org/TR/geolocation-API/#position-options\n * @param {GeolocationPositionOptions} options PositionOptions as defined by the\n *     [HTML5 Geolocation spec\n *     ](http://www.w3.org/TR/geolocation-API/#position_options_interface).\n * @observable\n * @api\n */\nGeolocation.prototype.setTrackingOptions = function(options) {\n  this.set(GeolocationProperty.TRACKING_OPTIONS, options);\n};\nexport default Geolocation;\n","'use strict';\n\nmodule.exports = rbush;\nmodule.exports.default = rbush;\n\nvar quickselect = require('quickselect');\n\nfunction rbush(maxEntries, format) {\n    if (!(this instanceof rbush)) return new rbush(maxEntries, format);\n\n    // max entries in a node is 9 by default; min node fill is 40% for best performance\n    this._maxEntries = Math.max(4, maxEntries || 9);\n    this._minEntries = Math.max(2, Math.ceil(this._maxEntries * 0.4));\n\n    if (format) {\n        this._initFormat(format);\n    }\n\n    this.clear();\n}\n\nrbush.prototype = {\n\n    all: function () {\n        return this._all(this.data, []);\n    },\n\n    search: function (bbox) {\n\n        var node = this.data,\n            result = [],\n            toBBox = this.toBBox;\n\n        if (!intersects(bbox, node)) return result;\n\n        var nodesToSearch = [],\n            i, len, child, childBBox;\n\n        while (node) {\n            for (i = 0, len = node.children.length; i < len; i++) {\n\n                child = node.children[i];\n                childBBox = node.leaf ? toBBox(child) : child;\n\n                if (intersects(bbox, childBBox)) {\n                    if (node.leaf) result.push(child);\n                    else if (contains(bbox, childBBox)) this._all(child, result);\n                    else nodesToSearch.push(child);\n                }\n            }\n            node = nodesToSearch.pop();\n        }\n\n        return result;\n    },\n\n    collides: function (bbox) {\n\n        var node = this.data,\n            toBBox = this.toBBox;\n\n        if (!intersects(bbox, node)) return false;\n\n        var nodesToSearch = [],\n            i, len, child, childBBox;\n\n        while (node) {\n            for (i = 0, len = node.children.length; i < len; i++) {\n\n                child = node.children[i];\n                childBBox = node.leaf ? toBBox(child) : child;\n\n                if (intersects(bbox, childBBox)) {\n                    if (node.leaf || contains(bbox, childBBox)) return true;\n                    nodesToSearch.push(child);\n                }\n            }\n            node = nodesToSearch.pop();\n        }\n\n        return false;\n    },\n\n    load: function (data) {\n        if (!(data && data.length)) return this;\n\n        if (data.length < this._minEntries) {\n            for (var i = 0, len = data.length; i < len; i++) {\n                this.insert(data[i]);\n            }\n            return this;\n        }\n\n        // recursively build the tree with the given data from scratch using OMT algorithm\n        var node = this._build(data.slice(), 0, data.length - 1, 0);\n\n        if (!this.data.children.length) {\n            // save as is if tree is empty\n            this.data = node;\n\n        } else if (this.data.height === node.height) {\n            // split root if trees have the same height\n            this._splitRoot(this.data, node);\n\n        } else {\n            if (this.data.height < node.height) {\n                // swap trees if inserted one is bigger\n                var tmpNode = this.data;\n                this.data = node;\n                node = tmpNode;\n            }\n\n            // insert the small tree into the large tree at appropriate level\n            this._insert(node, this.data.height - node.height - 1, true);\n        }\n\n        return this;\n    },\n\n    insert: function (item) {\n        if (item) this._insert(item, this.data.height - 1);\n        return this;\n    },\n\n    clear: function () {\n        this.data = createNode([]);\n        return this;\n    },\n\n    remove: function (item, equalsFn) {\n        if (!item) return this;\n\n        var node = this.data,\n            bbox = this.toBBox(item),\n            path = [],\n            indexes = [],\n            i, parent, index, goingUp;\n\n        // depth-first iterative tree traversal\n        while (node || path.length) {\n\n            if (!node) { // go up\n                node = path.pop();\n                parent = path[path.length - 1];\n                i = indexes.pop();\n                goingUp = true;\n            }\n\n            if (node.leaf) { // check current node\n                index = findItem(item, node.children, equalsFn);\n\n                if (index !== -1) {\n                    // item found, remove the item and condense tree upwards\n                    node.children.splice(index, 1);\n                    path.push(node);\n                    this._condense(path);\n                    return this;\n                }\n            }\n\n            if (!goingUp && !node.leaf && contains(node, bbox)) { // go down\n                path.push(node);\n                indexes.push(i);\n                i = 0;\n                parent = node;\n                node = node.children[0];\n\n            } else if (parent) { // go right\n                i++;\n                node = parent.children[i];\n                goingUp = false;\n\n            } else node = null; // nothing found\n        }\n\n        return this;\n    },\n\n    toBBox: function (item) { return item; },\n\n    compareMinX: compareNodeMinX,\n    compareMinY: compareNodeMinY,\n\n    toJSON: function () { return this.data; },\n\n    fromJSON: function (data) {\n        this.data = data;\n        return this;\n    },\n\n    _all: function (node, result) {\n        var nodesToSearch = [];\n        while (node) {\n            if (node.leaf) result.push.apply(result, node.children);\n            else nodesToSearch.push.apply(nodesToSearch, node.children);\n\n            node = nodesToSearch.pop();\n        }\n        return result;\n    },\n\n    _build: function (items, left, right, height) {\n\n        var N = right - left + 1,\n            M = this._maxEntries,\n            node;\n\n        if (N <= M) {\n            // reached leaf level; return leaf\n            node = createNode(items.slice(left, right + 1));\n            calcBBox(node, this.toBBox);\n            return node;\n        }\n\n        if (!height) {\n            // target height of the bulk-loaded tree\n            height = Math.ceil(Math.log(N) / Math.log(M));\n\n            // target number of root entries to maximize storage utilization\n            M = Math.ceil(N / Math.pow(M, height - 1));\n        }\n\n        node = createNode([]);\n        node.leaf = false;\n        node.height = height;\n\n        // split the items into M mostly square tiles\n\n        var N2 = Math.ceil(N / M),\n            N1 = N2 * Math.ceil(Math.sqrt(M)),\n            i, j, right2, right3;\n\n        multiSelect(items, left, right, N1, this.compareMinX);\n\n        for (i = left; i <= right; i += N1) {\n\n            right2 = Math.min(i + N1 - 1, right);\n\n            multiSelect(items, i, right2, N2, this.compareMinY);\n\n            for (j = i; j <= right2; j += N2) {\n\n                right3 = Math.min(j + N2 - 1, right2);\n\n                // pack each entry recursively\n                node.children.push(this._build(items, j, right3, height - 1));\n            }\n        }\n\n        calcBBox(node, this.toBBox);\n\n        return node;\n    },\n\n    _chooseSubtree: function (bbox, node, level, path) {\n\n        var i, len, child, targetNode, area, enlargement, minArea, minEnlargement;\n\n        while (true) {\n            path.push(node);\n\n            if (node.leaf || path.length - 1 === level) break;\n\n            minArea = minEnlargement = Infinity;\n\n            for (i = 0, len = node.children.length; i < len; i++) {\n                child = node.children[i];\n                area = bboxArea(child);\n                enlargement = enlargedArea(bbox, child) - area;\n\n                // choose entry with the least area enlargement\n                if (enlargement < minEnlargement) {\n                    minEnlargement = enlargement;\n                    minArea = area < minArea ? area : minArea;\n                    targetNode = child;\n\n                } else if (enlargement === minEnlargement) {\n                    // otherwise choose one with the smallest area\n                    if (area < minArea) {\n                        minArea = area;\n                        targetNode = child;\n                    }\n                }\n            }\n\n            node = targetNode || node.children[0];\n        }\n\n        return node;\n    },\n\n    _insert: function (item, level, isNode) {\n\n        var toBBox = this.toBBox,\n            bbox = isNode ? item : toBBox(item),\n            insertPath = [];\n\n        // find the best node for accommodating the item, saving all nodes along the path too\n        var node = this._chooseSubtree(bbox, this.data, level, insertPath);\n\n        // put the item into the node\n        node.children.push(item);\n        extend(node, bbox);\n\n        // split on node overflow; propagate upwards if necessary\n        while (level >= 0) {\n            if (insertPath[level].children.length > this._maxEntries) {\n                this._split(insertPath, level);\n                level--;\n            } else break;\n        }\n\n        // adjust bboxes along the insertion path\n        this._adjustParentBBoxes(bbox, insertPath, level);\n    },\n\n    // split overflowed node into two\n    _split: function (insertPath, level) {\n\n        var node = insertPath[level],\n            M = node.children.length,\n            m = this._minEntries;\n\n        this._chooseSplitAxis(node, m, M);\n\n        var splitIndex = this._chooseSplitIndex(node, m, M);\n\n        var newNode = createNode(node.children.splice(splitIndex, node.children.length - splitIndex));\n        newNode.height = node.height;\n        newNode.leaf = node.leaf;\n\n        calcBBox(node, this.toBBox);\n        calcBBox(newNode, this.toBBox);\n\n        if (level) insertPath[level - 1].children.push(newNode);\n        else this._splitRoot(node, newNode);\n    },\n\n    _splitRoot: function (node, newNode) {\n        // split root node\n        this.data = createNode([node, newNode]);\n        this.data.height = node.height + 1;\n        this.data.leaf = false;\n        calcBBox(this.data, this.toBBox);\n    },\n\n    _chooseSplitIndex: function (node, m, M) {\n\n        var i, bbox1, bbox2, overlap, area, minOverlap, minArea, index;\n\n        minOverlap = minArea = Infinity;\n\n        for (i = m; i <= M - m; i++) {\n            bbox1 = distBBox(node, 0, i, this.toBBox);\n            bbox2 = distBBox(node, i, M, this.toBBox);\n\n            overlap = intersectionArea(bbox1, bbox2);\n            area = bboxArea(bbox1) + bboxArea(bbox2);\n\n            // choose distribution with minimum overlap\n            if (overlap < minOverlap) {\n                minOverlap = overlap;\n                index = i;\n\n                minArea = area < minArea ? area : minArea;\n\n            } else if (overlap === minOverlap) {\n                // otherwise choose distribution with minimum area\n                if (area < minArea) {\n                    minArea = area;\n                    index = i;\n                }\n            }\n        }\n\n        return index;\n    },\n\n    // sorts node children by the best axis for split\n    _chooseSplitAxis: function (node, m, M) {\n\n        var compareMinX = node.leaf ? this.compareMinX : compareNodeMinX,\n            compareMinY = node.leaf ? this.compareMinY : compareNodeMinY,\n            xMargin = this._allDistMargin(node, m, M, compareMinX),\n            yMargin = this._allDistMargin(node, m, M, compareMinY);\n\n        // if total distributions margin value is minimal for x, sort by minX,\n        // otherwise it's already sorted by minY\n        if (xMargin < yMargin) node.children.sort(compareMinX);\n    },\n\n    // total margin of all possible split distributions where each node is at least m full\n    _allDistMargin: function (node, m, M, compare) {\n\n        node.children.sort(compare);\n\n        var toBBox = this.toBBox,\n            leftBBox = distBBox(node, 0, m, toBBox),\n            rightBBox = distBBox(node, M - m, M, toBBox),\n            margin = bboxMargin(leftBBox) + bboxMargin(rightBBox),\n            i, child;\n\n        for (i = m; i < M - m; i++) {\n            child = node.children[i];\n            extend(leftBBox, node.leaf ? toBBox(child) : child);\n            margin += bboxMargin(leftBBox);\n        }\n\n        for (i = M - m - 1; i >= m; i--) {\n            child = node.children[i];\n            extend(rightBBox, node.leaf ? toBBox(child) : child);\n            margin += bboxMargin(rightBBox);\n        }\n\n        return margin;\n    },\n\n    _adjustParentBBoxes: function (bbox, path, level) {\n        // adjust bboxes along the given tree path\n        for (var i = level; i >= 0; i--) {\n            extend(path[i], bbox);\n        }\n    },\n\n    _condense: function (path) {\n        // go through the path, removing empty nodes and updating bboxes\n        for (var i = path.length - 1, siblings; i >= 0; i--) {\n            if (path[i].children.length === 0) {\n                if (i > 0) {\n                    siblings = path[i - 1].children;\n                    siblings.splice(siblings.indexOf(path[i]), 1);\n\n                } else this.clear();\n\n            } else calcBBox(path[i], this.toBBox);\n        }\n    },\n\n    _initFormat: function (format) {\n        // data format (minX, minY, maxX, maxY accessors)\n\n        // uses eval-type function compilation instead of just accepting a toBBox function\n        // because the algorithms are very sensitive to sorting functions performance,\n        // so they should be dead simple and without inner calls\n\n        var compareArr = ['return a', ' - b', ';'];\n\n        this.compareMinX = new Function('a', 'b', compareArr.join(format[0]));\n        this.compareMinY = new Function('a', 'b', compareArr.join(format[1]));\n\n        this.toBBox = new Function('a',\n            'return {minX: a' + format[0] +\n            ', minY: a' + format[1] +\n            ', maxX: a' + format[2] +\n            ', maxY: a' + format[3] + '};');\n    }\n};\n\nfunction findItem(item, items, equalsFn) {\n    if (!equalsFn) return items.indexOf(item);\n\n    for (var i = 0; i < items.length; i++) {\n        if (equalsFn(item, items[i])) return i;\n    }\n    return -1;\n}\n\n// calculate node's bbox from bboxes of its children\nfunction calcBBox(node, toBBox) {\n    distBBox(node, 0, node.children.length, toBBox, node);\n}\n\n// min bounding rectangle of node children from k to p-1\nfunction distBBox(node, k, p, toBBox, destNode) {\n    if (!destNode) destNode = createNode(null);\n    destNode.minX = Infinity;\n    destNode.minY = Infinity;\n    destNode.maxX = -Infinity;\n    destNode.maxY = -Infinity;\n\n    for (var i = k, child; i < p; i++) {\n        child = node.children[i];\n        extend(destNode, node.leaf ? toBBox(child) : child);\n    }\n\n    return destNode;\n}\n\nfunction extend(a, b) {\n    a.minX = Math.min(a.minX, b.minX);\n    a.minY = Math.min(a.minY, b.minY);\n    a.maxX = Math.max(a.maxX, b.maxX);\n    a.maxY = Math.max(a.maxY, b.maxY);\n    return a;\n}\n\nfunction compareNodeMinX(a, b) { return a.minX - b.minX; }\nfunction compareNodeMinY(a, b) { return a.minY - b.minY; }\n\nfunction bboxArea(a)   { return (a.maxX - a.minX) * (a.maxY - a.minY); }\nfunction bboxMargin(a) { return (a.maxX - a.minX) + (a.maxY - a.minY); }\n\nfunction enlargedArea(a, b) {\n    return (Math.max(b.maxX, a.maxX) - Math.min(b.minX, a.minX)) *\n           (Math.max(b.maxY, a.maxY) - Math.min(b.minY, a.minY));\n}\n\nfunction intersectionArea(a, b) {\n    var minX = Math.max(a.minX, b.minX),\n        minY = Math.max(a.minY, b.minY),\n        maxX = Math.min(a.maxX, b.maxX),\n        maxY = Math.min(a.maxY, b.maxY);\n\n    return Math.max(0, maxX - minX) *\n           Math.max(0, maxY - minY);\n}\n\nfunction contains(a, b) {\n    return a.minX <= b.minX &&\n           a.minY <= b.minY &&\n           b.maxX <= a.maxX &&\n           b.maxY <= a.maxY;\n}\n\nfunction intersects(a, b) {\n    return b.minX <= a.maxX &&\n           b.minY <= a.maxY &&\n           b.maxX >= a.minX &&\n           b.maxY >= a.minY;\n}\n\nfunction createNode(children) {\n    return {\n        children: children,\n        height: 1,\n        leaf: true,\n        minX: Infinity,\n        minY: Infinity,\n        maxX: -Infinity,\n        maxY: -Infinity\n    };\n}\n\n// sort an array so that items come in groups of n unsorted items, with groups sorted between each other;\n// combines selection algorithm with binary divide & conquer approach\n\nfunction multiSelect(arr, left, right, n, compare) {\n    var stack = [left, right],\n        mid;\n\n    while (stack.length) {\n        right = stack.pop();\n        left = stack.pop();\n\n        if (right - left <= n) continue;\n\n        mid = left + Math.ceil((right - left) / n / 2) * n;\n        quickselect(arr, mid, left, right, compare);\n\n        stack.push(left, mid, mid, right);\n    }\n}\n","/**\n * @module ol/ImageCanvas\n */\nimport {inherits} from './util.js';\nimport ImageBase from './ImageBase.js';\nimport ImageState from './ImageState.js';\n\n\n/**\n * A function that is called to trigger asynchronous canvas drawing.  It is\n * called with a \"done\" callback that should be called when drawing is done.\n * If any error occurs during drawing, the \"done\" callback should be called with\n * that error.\n *\n * @typedef {function(function(Error))} Loader\n */\n\n\n/**\n * @constructor\n * @extends {module:ol/ImageBase}\n * @param {module:ol/extent~Extent} extent Extent.\n * @param {number} resolution Resolution.\n * @param {number} pixelRatio Pixel ratio.\n * @param {HTMLCanvasElement} canvas Canvas.\n * @param {module:ol/ImageCanvas~Loader=} opt_loader Optional loader function to\n *     support asynchronous canvas drawing.\n */\nconst ImageCanvas = function(extent, resolution, pixelRatio, canvas, opt_loader) {\n\n  /**\n   * Optional canvas loader function.\n   * @type {?module:ol/ImageCanvas~Loader}\n   * @private\n   */\n  this.loader_ = opt_loader !== undefined ? opt_loader : null;\n\n  const state = opt_loader !== undefined ? ImageState.IDLE : ImageState.LOADED;\n\n  ImageBase.call(this, extent, resolution, pixelRatio, state);\n\n  /**\n   * @private\n   * @type {HTMLCanvasElement}\n   */\n  this.canvas_ = canvas;\n\n  /**\n   * @private\n   * @type {Error}\n   */\n  this.error_ = null;\n\n};\n\ninherits(ImageCanvas, ImageBase);\n\n\n/**\n * Get any error associated with asynchronous rendering.\n * @return {Error} Any error that occurred during rendering.\n */\nImageCanvas.prototype.getError = function() {\n  return this.error_;\n};\n\n\n/**\n * Handle async drawing complete.\n * @param {Error} err Any error during drawing.\n * @private\n */\nImageCanvas.prototype.handleLoad_ = function(err) {\n  if (err) {\n    this.error_ = err;\n    this.state = ImageState.ERROR;\n  } else {\n    this.state = ImageState.LOADED;\n  }\n  this.changed();\n};\n\n\n/**\n * @inheritDoc\n */\nImageCanvas.prototype.load = function() {\n  if (this.state == ImageState.IDLE) {\n    this.state = ImageState.LOADING;\n    this.changed();\n    this.loader_(this.handleLoad_.bind(this));\n  }\n};\n\n\n/**\n * @return {HTMLCanvasElement} Canvas element.\n */\nImageCanvas.prototype.getImage = function() {\n  return this.canvas_;\n};\nexport default ImageCanvas;\n","/**\n * @module ol/render/canvas/Immediate\n */\n// FIXME test, especially polygons with holes and multipolygons\n// FIXME need to handle large thick features (where pixel size matters)\n// FIXME add offset and end to ol/geom/flat/transform~transform2D?\n\nimport {inherits} from '../../util.js';\nimport {equals} from '../../array.js';\nimport {asColorLike} from '../../colorlike.js';\nimport {intersects} from '../../extent.js';\nimport GeometryType from '../../geom/GeometryType.js';\nimport {transformGeom2D} from '../../geom/SimpleGeometry.js';\nimport {transform2D} from '../../geom/flat/transform.js';\nimport {CANVAS_LINE_DASH} from '../../has.js';\nimport VectorContext from '../VectorContext.js';\nimport {defaultTextAlign, defaultFillStyle, defaultLineCap, defaultLineDash, defaultLineDashOffset, defaultLineJoin, defaultLineWidth, defaultMiterLimit, defaultStrokeStyle, defaultTextBaseline, defaultFont} from '../canvas.js';\nimport {create as createTransform, compose as composeTransform} from '../../transform.js';\n\n/**\n * @classdesc\n * A concrete subclass of {@link module:ol/render/VectorContext} that implements\n * direct rendering of features and geometries to an HTML5 Canvas context.\n * Instances of this class are created internally by the library and\n * provided to application code as vectorContext member of the\n * {@link module:ol/render/Event~RenderEvent} object associated with postcompose, precompose and\n * render events emitted by layers and maps.\n *\n * @constructor\n * @extends {module:ol/render/VectorContext}\n * @param {CanvasRenderingContext2D} context Context.\n * @param {number} pixelRatio Pixel ratio.\n * @param {module:ol/extent~Extent} extent Extent.\n * @param {module:ol/transform~Transform} transform Transform.\n * @param {number} viewRotation View rotation.\n * @struct\n */\nconst CanvasImmediateRenderer = function(context, pixelRatio, extent, transform, viewRotation) {\n  VectorContext.call(this);\n\n  /**\n   * @private\n   * @type {CanvasRenderingContext2D}\n   */\n  this.context_ = context;\n\n  /**\n   * @private\n   * @type {number}\n   */\n  this.pixelRatio_ = pixelRatio;\n\n  /**\n   * @private\n   * @type {module:ol/extent~Extent}\n   */\n  this.extent_ = extent;\n\n  /**\n   * @private\n   * @type {module:ol/transform~Transform}\n   */\n  this.transform_ = transform;\n\n  /**\n   * @private\n   * @type {number}\n   */\n  this.viewRotation_ = viewRotation;\n\n  /**\n   * @private\n   * @type {?module:ol/render/canvas~FillState}\n   */\n  this.contextFillState_ = null;\n\n  /**\n   * @private\n   * @type {?module:ol/render/canvas~StrokeState}\n   */\n  this.contextStrokeState_ = null;\n\n  /**\n   * @private\n   * @type {?module:ol/render/canvas~TextState}\n   */\n  this.contextTextState_ = null;\n\n  /**\n   * @private\n   * @type {?module:ol/render/canvas~FillState}\n   */\n  this.fillState_ = null;\n\n  /**\n   * @private\n   * @type {?module:ol/render/canvas~StrokeState}\n   */\n  this.strokeState_ = null;\n\n  /**\n   * @private\n   * @type {HTMLCanvasElement|HTMLVideoElement|Image}\n   */\n  this.image_ = null;\n\n  /**\n   * @private\n   * @type {number}\n   */\n  this.imageAnchorX_ = 0;\n\n  /**\n   * @private\n   * @type {number}\n   */\n  this.imageAnchorY_ = 0;\n\n  /**\n   * @private\n   * @type {number}\n   */\n  this.imageHeight_ = 0;\n\n  /**\n   * @private\n   * @type {number}\n   */\n  this.imageOpacity_ = 0;\n\n  /**\n   * @private\n   * @type {number}\n   */\n  this.imageOriginX_ = 0;\n\n  /**\n   * @private\n   * @type {number}\n   */\n  this.imageOriginY_ = 0;\n\n  /**\n   * @private\n   * @type {boolean}\n   */\n  this.imageRotateWithView_ = false;\n\n  /**\n   * @private\n   * @type {number}\n   */\n  this.imageRotation_ = 0;\n\n  /**\n   * @private\n   * @type {number}\n   */\n  this.imageScale_ = 0;\n\n  /**\n   * @private\n   * @type {boolean}\n   */\n  this.imageSnapToPixel_ = false;\n\n  /**\n   * @private\n   * @type {number}\n   */\n  this.imageWidth_ = 0;\n\n  /**\n   * @private\n   * @type {string}\n   */\n  this.text_ = '';\n\n  /**\n   * @private\n   * @type {number}\n   */\n  this.textOffsetX_ = 0;\n\n  /**\n   * @private\n   * @type {number}\n   */\n  this.textOffsetY_ = 0;\n\n  /**\n   * @private\n   * @type {boolean}\n   */\n  this.textRotateWithView_ = false;\n\n  /**\n   * @private\n   * @type {number}\n   */\n  this.textRotation_ = 0;\n\n  /**\n   * @private\n   * @type {number}\n   */\n  this.textScale_ = 0;\n\n  /**\n   * @private\n   * @type {?module:ol/render/canvas~FillState}\n   */\n  this.textFillState_ = null;\n\n  /**\n   * @private\n   * @type {?module:ol/render/canvas~StrokeState}\n   */\n  this.textStrokeState_ = null;\n\n  /**\n   * @private\n   * @type {?module:ol/render/canvas~TextState}\n   */\n  this.textState_ = null;\n\n  /**\n   * @private\n   * @type {Array.<number>}\n   */\n  this.pixelCoordinates_ = [];\n\n  /**\n   * @private\n   * @type {module:ol/transform~Transform}\n   */\n  this.tmpLocalTransform_ = createTransform();\n\n};\n\ninherits(CanvasImmediateRenderer, VectorContext);\n\n\n/**\n * @param {Array.<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {number} end End.\n * @param {number} stride Stride.\n * @private\n */\nCanvasImmediateRenderer.prototype.drawImages_ = function(flatCoordinates, offset, end, stride) {\n  if (!this.image_) {\n    return;\n  }\n  const pixelCoordinates = transform2D(\n    flatCoordinates, offset, end, 2, this.transform_,\n    this.pixelCoordinates_);\n  const context = this.context_;\n  const localTransform = this.tmpLocalTransform_;\n  const alpha = context.globalAlpha;\n  if (this.imageOpacity_ != 1) {\n    context.globalAlpha = alpha * this.imageOpacity_;\n  }\n  let rotation = this.imageRotation_;\n  if (this.imageRotateWithView_) {\n    rotation += this.viewRotation_;\n  }\n  for (let i = 0, ii = pixelCoordinates.length; i < ii; i += 2) {\n    let x = pixelCoordinates[i] - this.imageAnchorX_;\n    let y = pixelCoordinates[i + 1] - this.imageAnchorY_;\n    if (this.imageSnapToPixel_) {\n      x = Math.round(x);\n      y = Math.round(y);\n    }\n    if (rotation !== 0 || this.imageScale_ != 1) {\n      const centerX = x + this.imageAnchorX_;\n      const centerY = y + this.imageAnchorY_;\n      composeTransform(localTransform,\n        centerX, centerY,\n        this.imageScale_, this.imageScale_,\n        rotation,\n        -centerX, -centerY);\n      context.setTransform.apply(context, localTransform);\n    }\n    context.drawImage(this.image_, this.imageOriginX_, this.imageOriginY_,\n      this.imageWidth_, this.imageHeight_, x, y,\n      this.imageWidth_, this.imageHeight_);\n  }\n  if (rotation !== 0 || this.imageScale_ != 1) {\n    context.setTransform(1, 0, 0, 1, 0, 0);\n  }\n  if (this.imageOpacity_ != 1) {\n    context.globalAlpha = alpha;\n  }\n};\n\n\n/**\n * @param {Array.<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {number} end End.\n * @param {number} stride Stride.\n * @private\n */\nCanvasImmediateRenderer.prototype.drawText_ = function(flatCoordinates, offset, end, stride) {\n  if (!this.textState_ || this.text_ === '') {\n    return;\n  }\n  if (this.textFillState_) {\n    this.setContextFillState_(this.textFillState_);\n  }\n  if (this.textStrokeState_) {\n    this.setContextStrokeState_(this.textStrokeState_);\n  }\n  this.setContextTextState_(this.textState_);\n  const pixelCoordinates = transform2D(\n    flatCoordinates, offset, end, stride, this.transform_,\n    this.pixelCoordinates_);\n  const context = this.context_;\n  let rotation = this.textRotation_;\n  if (this.textRotateWithView_) {\n    rotation += this.viewRotation_;\n  }\n  for (; offset < end; offset += stride) {\n    const x = pixelCoordinates[offset] + this.textOffsetX_;\n    const y = pixelCoordinates[offset + 1] + this.textOffsetY_;\n    if (rotation !== 0 || this.textScale_ != 1) {\n      const localTransform = composeTransform(this.tmpLocalTransform_,\n        x, y,\n        this.textScale_, this.textScale_,\n        rotation,\n        -x, -y);\n      context.setTransform.apply(context, localTransform);\n    }\n    if (this.textStrokeState_) {\n      context.strokeText(this.text_, x, y);\n    }\n    if (this.textFillState_) {\n      context.fillText(this.text_, x, y);\n    }\n  }\n  if (rotation !== 0 || this.textScale_ != 1) {\n    context.setTransform(1, 0, 0, 1, 0, 0);\n  }\n};\n\n\n/**\n * @param {Array.<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {number} end End.\n * @param {number} stride Stride.\n * @param {boolean} close Close.\n * @private\n * @return {number} end End.\n */\nCanvasImmediateRenderer.prototype.moveToLineTo_ = function(flatCoordinates, offset, end, stride, close) {\n  const context = this.context_;\n  const pixelCoordinates = transform2D(\n    flatCoordinates, offset, end, stride, this.transform_,\n    this.pixelCoordinates_);\n  context.moveTo(pixelCoordinates[0], pixelCoordinates[1]);\n  let length = pixelCoordinates.length;\n  if (close) {\n    length -= 2;\n  }\n  for (let i = 2; i < length; i += 2) {\n    context.lineTo(pixelCoordinates[i], pixelCoordinates[i + 1]);\n  }\n  if (close) {\n    context.closePath();\n  }\n  return end;\n};\n\n\n/**\n * @param {Array.<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {Array.<number>} ends Ends.\n * @param {number} stride Stride.\n * @private\n * @return {number} End.\n */\nCanvasImmediateRenderer.prototype.drawRings_ = function(flatCoordinates, offset, ends, stride) {\n  for (let i = 0, ii = ends.length; i < ii; ++i) {\n    offset = this.moveToLineTo_(flatCoordinates, offset, ends[i], stride, true);\n  }\n  return offset;\n};\n\n\n/**\n * Render a circle geometry into the canvas.  Rendering is immediate and uses\n * the current fill and stroke styles.\n *\n * @param {module:ol/geom/Circle} geometry Circle geometry.\n * @override\n * @api\n */\nCanvasImmediateRenderer.prototype.drawCircle = function(geometry) {\n  if (!intersects(this.extent_, geometry.getExtent())) {\n    return;\n  }\n  if (this.fillState_ || this.strokeState_) {\n    if (this.fillState_) {\n      this.setContextFillState_(this.fillState_);\n    }\n    if (this.strokeState_) {\n      this.setContextStrokeState_(this.strokeState_);\n    }\n    const pixelCoordinates = transformGeom2D(\n      geometry, this.transform_, this.pixelCoordinates_);\n    const dx = pixelCoordinates[2] - pixelCoordinates[0];\n    const dy = pixelCoordinates[3] - pixelCoordinates[1];\n    const radius = Math.sqrt(dx * dx + dy * dy);\n    const context = this.context_;\n    context.beginPath();\n    context.arc(\n      pixelCoordinates[0], pixelCoordinates[1], radius, 0, 2 * Math.PI);\n    if (this.fillState_) {\n      context.fill();\n    }\n    if (this.strokeState_) {\n      context.stroke();\n    }\n  }\n  if (this.text_ !== '') {\n    this.drawText_(geometry.getCenter(), 0, 2, 2);\n  }\n};\n\n\n/**\n * Set the rendering style.  Note that since this is an immediate rendering API,\n * any `zIndex` on the provided style will be ignored.\n *\n * @param {module:ol/style/Style} style The rendering style.\n * @override\n * @api\n */\nCanvasImmediateRenderer.prototype.setStyle = function(style) {\n  this.setFillStrokeStyle(style.getFill(), style.getStroke());\n  this.setImageStyle(style.getImage());\n  this.setTextStyle(style.getText());\n};\n\n\n/**\n * Render a geometry into the canvas.  Call\n * {@link module:ol/render/canvas/Immediate#setStyle} first to set the rendering style.\n *\n * @param {module:ol/geom/Geometry|module:ol/render/Feature} geometry The geometry to render.\n * @override\n * @api\n */\nCanvasImmediateRenderer.prototype.drawGeometry = function(geometry) {\n  const type = geometry.getType();\n  switch (type) {\n    case GeometryType.POINT:\n      this.drawPoint(/** @type {module:ol/geom/Point} */ (geometry));\n      break;\n    case GeometryType.LINE_STRING:\n      this.drawLineString(/** @type {module:ol/geom/LineString} */ (geometry));\n      break;\n    case GeometryType.POLYGON:\n      this.drawPolygon(/** @type {module:ol/geom/Polygon} */ (geometry));\n      break;\n    case GeometryType.MULTI_POINT:\n      this.drawMultiPoint(/** @type {module:ol/geom/MultiPoint} */ (geometry));\n      break;\n    case GeometryType.MULTI_LINE_STRING:\n      this.drawMultiLineString(/** @type {module:ol/geom/MultiLineString} */ (geometry));\n      break;\n    case GeometryType.MULTI_POLYGON:\n      this.drawMultiPolygon(/** @type {module:ol/geom/MultiPolygon} */ (geometry));\n      break;\n    case GeometryType.GEOMETRY_COLLECTION:\n      this.drawGeometryCollection(/** @type {module:ol/geom/GeometryCollection} */ (geometry));\n      break;\n    case GeometryType.CIRCLE:\n      this.drawCircle(/** @type {module:ol/geom/Circle} */ (geometry));\n      break;\n    default:\n  }\n};\n\n\n/**\n * Render a feature into the canvas.  Note that any `zIndex` on the provided\n * style will be ignored - features are rendered immediately in the order that\n * this method is called.  If you need `zIndex` support, you should be using an\n * {@link module:ol/layer/Vector~VectorLayer} instead.\n *\n * @param {module:ol/Feature} feature Feature.\n * @param {module:ol/style/Style} style Style.\n * @override\n * @api\n */\nCanvasImmediateRenderer.prototype.drawFeature = function(feature, style) {\n  const geometry = style.getGeometryFunction()(feature);\n  if (!geometry || !intersects(this.extent_, geometry.getExtent())) {\n    return;\n  }\n  this.setStyle(style);\n  this.drawGeometry(geometry);\n};\n\n\n/**\n * Render a GeometryCollection to the canvas.  Rendering is immediate and\n * uses the current styles appropriate for each geometry in the collection.\n *\n * @param {module:ol/geom/GeometryCollection} geometry Geometry collection.\n * @override\n */\nCanvasImmediateRenderer.prototype.drawGeometryCollection = function(geometry) {\n  const geometries = geometry.getGeometriesArray();\n  for (let i = 0, ii = geometries.length; i < ii; ++i) {\n    this.drawGeometry(geometries[i]);\n  }\n};\n\n\n/**\n * Render a Point geometry into the canvas.  Rendering is immediate and uses\n * the current style.\n *\n * @param {module:ol/geom/Point|module:ol/render/Feature} geometry Point geometry.\n * @override\n */\nCanvasImmediateRenderer.prototype.drawPoint = function(geometry) {\n  const flatCoordinates = geometry.getFlatCoordinates();\n  const stride = geometry.getStride();\n  if (this.image_) {\n    this.drawImages_(flatCoordinates, 0, flatCoordinates.length, stride);\n  }\n  if (this.text_ !== '') {\n    this.drawText_(flatCoordinates, 0, flatCoordinates.length, stride);\n  }\n};\n\n\n/**\n * Render a MultiPoint geometry  into the canvas.  Rendering is immediate and\n * uses the current style.\n *\n * @param {module:ol/geom/MultiPoint|module:ol/render/Feature} geometry MultiPoint geometry.\n * @override\n */\nCanvasImmediateRenderer.prototype.drawMultiPoint = function(geometry) {\n  const flatCoordinates = geometry.getFlatCoordinates();\n  const stride = geometry.getStride();\n  if (this.image_) {\n    this.drawImages_(flatCoordinates, 0, flatCoordinates.length, stride);\n  }\n  if (this.text_ !== '') {\n    this.drawText_(flatCoordinates, 0, flatCoordinates.length, stride);\n  }\n};\n\n\n/**\n * Render a LineString into the canvas.  Rendering is immediate and uses\n * the current style.\n *\n * @param {module:ol/geom/LineString|module:ol/render/Feature} geometry LineString geometry.\n * @override\n */\nCanvasImmediateRenderer.prototype.drawLineString = function(geometry) {\n  if (!intersects(this.extent_, geometry.getExtent())) {\n    return;\n  }\n  if (this.strokeState_) {\n    this.setContextStrokeState_(this.strokeState_);\n    const context = this.context_;\n    const flatCoordinates = geometry.getFlatCoordinates();\n    context.beginPath();\n    this.moveToLineTo_(flatCoordinates, 0, flatCoordinates.length,\n      geometry.getStride(), false);\n    context.stroke();\n  }\n  if (this.text_ !== '') {\n    const flatMidpoint = geometry.getFlatMidpoint();\n    this.drawText_(flatMidpoint, 0, 2, 2);\n  }\n};\n\n\n/**\n * Render a MultiLineString geometry into the canvas.  Rendering is immediate\n * and uses the current style.\n *\n * @param {module:ol/geom/MultiLineString|module:ol/render/Feature} geometry MultiLineString geometry.\n * @override\n */\nCanvasImmediateRenderer.prototype.drawMultiLineString = function(geometry) {\n  const geometryExtent = geometry.getExtent();\n  if (!intersects(this.extent_, geometryExtent)) {\n    return;\n  }\n  if (this.strokeState_) {\n    this.setContextStrokeState_(this.strokeState_);\n    const context = this.context_;\n    const flatCoordinates = geometry.getFlatCoordinates();\n    let offset = 0;\n    const ends = geometry.getEnds();\n    const stride = geometry.getStride();\n    context.beginPath();\n    for (let i = 0, ii = ends.length; i < ii; ++i) {\n      offset = this.moveToLineTo_(flatCoordinates, offset, ends[i], stride, false);\n    }\n    context.stroke();\n  }\n  if (this.text_ !== '') {\n    const flatMidpoints = geometry.getFlatMidpoints();\n    this.drawText_(flatMidpoints, 0, flatMidpoints.length, 2);\n  }\n};\n\n\n/**\n * Render a Polygon geometry into the canvas.  Rendering is immediate and uses\n * the current style.\n *\n * @param {module:ol/geom/Polygon|module:ol/render/Feature} geometry Polygon geometry.\n * @override\n */\nCanvasImmediateRenderer.prototype.drawPolygon = function(geometry) {\n  if (!intersects(this.extent_, geometry.getExtent())) {\n    return;\n  }\n  if (this.strokeState_ || this.fillState_) {\n    if (this.fillState_) {\n      this.setContextFillState_(this.fillState_);\n    }\n    if (this.strokeState_) {\n      this.setContextStrokeState_(this.strokeState_);\n    }\n    const context = this.context_;\n    context.beginPath();\n    this.drawRings_(geometry.getOrientedFlatCoordinates(),\n      0, geometry.getEnds(), geometry.getStride());\n    if (this.fillState_) {\n      context.fill();\n    }\n    if (this.strokeState_) {\n      context.stroke();\n    }\n  }\n  if (this.text_ !== '') {\n    const flatInteriorPoint = geometry.getFlatInteriorPoint();\n    this.drawText_(flatInteriorPoint, 0, 2, 2);\n  }\n};\n\n\n/**\n * Render MultiPolygon geometry into the canvas.  Rendering is immediate and\n * uses the current style.\n * @param {module:ol/geom/MultiPolygon} geometry MultiPolygon geometry.\n * @override\n */\nCanvasImmediateRenderer.prototype.drawMultiPolygon = function(geometry) {\n  if (!intersects(this.extent_, geometry.getExtent())) {\n    return;\n  }\n  if (this.strokeState_ || this.fillState_) {\n    if (this.fillState_) {\n      this.setContextFillState_(this.fillState_);\n    }\n    if (this.strokeState_) {\n      this.setContextStrokeState_(this.strokeState_);\n    }\n    const context = this.context_;\n    const flatCoordinates = geometry.getOrientedFlatCoordinates();\n    let offset = 0;\n    const endss = geometry.getEndss();\n    const stride = geometry.getStride();\n    context.beginPath();\n    for (let i = 0, ii = endss.length; i < ii; ++i) {\n      const ends = endss[i];\n      offset = this.drawRings_(flatCoordinates, offset, ends, stride);\n    }\n    if (this.fillState_) {\n      context.fill();\n    }\n    if (this.strokeState_) {\n      context.stroke();\n    }\n  }\n  if (this.text_ !== '') {\n    const flatInteriorPoints = geometry.getFlatInteriorPoints();\n    this.drawText_(flatInteriorPoints, 0, flatInteriorPoints.length, 2);\n  }\n};\n\n\n/**\n * @param {module:ol/render/canvas~FillState} fillState Fill state.\n * @private\n */\nCanvasImmediateRenderer.prototype.setContextFillState_ = function(fillState) {\n  const context = this.context_;\n  const contextFillState = this.contextFillState_;\n  if (!contextFillState) {\n    context.fillStyle = fillState.fillStyle;\n    this.contextFillState_ = {\n      fillStyle: fillState.fillStyle\n    };\n  } else {\n    if (contextFillState.fillStyle != fillState.fillStyle) {\n      contextFillState.fillStyle = context.fillStyle = fillState.fillStyle;\n    }\n  }\n};\n\n\n/**\n * @param {module:ol/render/canvas~StrokeState} strokeState Stroke state.\n * @private\n */\nCanvasImmediateRenderer.prototype.setContextStrokeState_ = function(strokeState) {\n  const context = this.context_;\n  const contextStrokeState = this.contextStrokeState_;\n  if (!contextStrokeState) {\n    context.lineCap = strokeState.lineCap;\n    if (CANVAS_LINE_DASH) {\n      context.setLineDash(strokeState.lineDash);\n      context.lineDashOffset = strokeState.lineDashOffset;\n    }\n    context.lineJoin = strokeState.lineJoin;\n    context.lineWidth = strokeState.lineWidth;\n    context.miterLimit = strokeState.miterLimit;\n    context.strokeStyle = strokeState.strokeStyle;\n    this.contextStrokeState_ = {\n      lineCap: strokeState.lineCap,\n      lineDash: strokeState.lineDash,\n      lineDashOffset: strokeState.lineDashOffset,\n      lineJoin: strokeState.lineJoin,\n      lineWidth: strokeState.lineWidth,\n      miterLimit: strokeState.miterLimit,\n      strokeStyle: strokeState.strokeStyle\n    };\n  } else {\n    if (contextStrokeState.lineCap != strokeState.lineCap) {\n      contextStrokeState.lineCap = context.lineCap = strokeState.lineCap;\n    }\n    if (CANVAS_LINE_DASH) {\n      if (!equals(contextStrokeState.lineDash, strokeState.lineDash)) {\n        context.setLineDash(contextStrokeState.lineDash = strokeState.lineDash);\n      }\n      if (contextStrokeState.lineDashOffset != strokeState.lineDashOffset) {\n        contextStrokeState.lineDashOffset = context.lineDashOffset =\n            strokeState.lineDashOffset;\n      }\n    }\n    if (contextStrokeState.lineJoin != strokeState.lineJoin) {\n      contextStrokeState.lineJoin = context.lineJoin = strokeState.lineJoin;\n    }\n    if (contextStrokeState.lineWidth != strokeState.lineWidth) {\n      contextStrokeState.lineWidth = context.lineWidth = strokeState.lineWidth;\n    }\n    if (contextStrokeState.miterLimit != strokeState.miterLimit) {\n      contextStrokeState.miterLimit = context.miterLimit =\n          strokeState.miterLimit;\n    }\n    if (contextStrokeState.strokeStyle != strokeState.strokeStyle) {\n      contextStrokeState.strokeStyle = context.strokeStyle =\n          strokeState.strokeStyle;\n    }\n  }\n};\n\n\n/**\n * @param {module:ol/render/canvas~TextState} textState Text state.\n * @private\n */\nCanvasImmediateRenderer.prototype.setContextTextState_ = function(textState) {\n  const context = this.context_;\n  const contextTextState = this.contextTextState_;\n  const textAlign = textState.textAlign ?\n    textState.textAlign : defaultTextAlign;\n  if (!contextTextState) {\n    context.font = textState.font;\n    context.textAlign = textAlign;\n    context.textBaseline = textState.textBaseline;\n    this.contextTextState_ = {\n      font: textState.font,\n      textAlign: textAlign,\n      textBaseline: textState.textBaseline\n    };\n  } else {\n    if (contextTextState.font != textState.font) {\n      contextTextState.font = context.font = textState.font;\n    }\n    if (contextTextState.textAlign != textAlign) {\n      contextTextState.textAlign = context.textAlign = textAlign;\n    }\n    if (contextTextState.textBaseline != textState.textBaseline) {\n      contextTextState.textBaseline = context.textBaseline =\n          textState.textBaseline;\n    }\n  }\n};\n\n\n/**\n * Set the fill and stroke style for subsequent draw operations.  To clear\n * either fill or stroke styles, pass null for the appropriate parameter.\n *\n * @param {module:ol/style/Fill} fillStyle Fill style.\n * @param {module:ol/style/Stroke} strokeStyle Stroke style.\n * @override\n */\nCanvasImmediateRenderer.prototype.setFillStrokeStyle = function(fillStyle, strokeStyle) {\n  if (!fillStyle) {\n    this.fillState_ = null;\n  } else {\n    const fillStyleColor = fillStyle.getColor();\n    this.fillState_ = {\n      fillStyle: asColorLike(fillStyleColor ?\n        fillStyleColor : defaultFillStyle)\n    };\n  }\n  if (!strokeStyle) {\n    this.strokeState_ = null;\n  } else {\n    const strokeStyleColor = strokeStyle.getColor();\n    const strokeStyleLineCap = strokeStyle.getLineCap();\n    const strokeStyleLineDash = strokeStyle.getLineDash();\n    const strokeStyleLineDashOffset = strokeStyle.getLineDashOffset();\n    const strokeStyleLineJoin = strokeStyle.getLineJoin();\n    const strokeStyleWidth = strokeStyle.getWidth();\n    const strokeStyleMiterLimit = strokeStyle.getMiterLimit();\n    this.strokeState_ = {\n      lineCap: strokeStyleLineCap !== undefined ?\n        strokeStyleLineCap : defaultLineCap,\n      lineDash: strokeStyleLineDash ?\n        strokeStyleLineDash : defaultLineDash,\n      lineDashOffset: strokeStyleLineDashOffset ?\n        strokeStyleLineDashOffset : defaultLineDashOffset,\n      lineJoin: strokeStyleLineJoin !== undefined ?\n        strokeStyleLineJoin : defaultLineJoin,\n      lineWidth: this.pixelRatio_ * (strokeStyleWidth !== undefined ?\n        strokeStyleWidth : defaultLineWidth),\n      miterLimit: strokeStyleMiterLimit !== undefined ?\n        strokeStyleMiterLimit : defaultMiterLimit,\n      strokeStyle: asColorLike(strokeStyleColor ?\n        strokeStyleColor : defaultStrokeStyle)\n    };\n  }\n};\n\n\n/**\n * Set the image style for subsequent draw operations.  Pass null to remove\n * the image style.\n *\n * @param {module:ol/style/Image} imageStyle Image style.\n * @override\n */\nCanvasImmediateRenderer.prototype.setImageStyle = function(imageStyle) {\n  if (!imageStyle) {\n    this.image_ = null;\n  } else {\n    const imageAnchor = imageStyle.getAnchor();\n    // FIXME pixel ratio\n    const imageImage = imageStyle.getImage(1);\n    const imageOrigin = imageStyle.getOrigin();\n    const imageSize = imageStyle.getSize();\n    this.imageAnchorX_ = imageAnchor[0];\n    this.imageAnchorY_ = imageAnchor[1];\n    this.imageHeight_ = imageSize[1];\n    this.image_ = imageImage;\n    this.imageOpacity_ = imageStyle.getOpacity();\n    this.imageOriginX_ = imageOrigin[0];\n    this.imageOriginY_ = imageOrigin[1];\n    this.imageRotateWithView_ = imageStyle.getRotateWithView();\n    this.imageRotation_ = imageStyle.getRotation();\n    this.imageScale_ = imageStyle.getScale() * this.pixelRatio_;\n    this.imageSnapToPixel_ = imageStyle.getSnapToPixel();\n    this.imageWidth_ = imageSize[0];\n  }\n};\n\n\n/**\n * Set the text style for subsequent draw operations.  Pass null to\n * remove the text style.\n *\n * @param {module:ol/style/Text} textStyle Text style.\n * @override\n */\nCanvasImmediateRenderer.prototype.setTextStyle = function(textStyle) {\n  if (!textStyle) {\n    this.text_ = '';\n  } else {\n    const textFillStyle = textStyle.getFill();\n    if (!textFillStyle) {\n      this.textFillState_ = null;\n    } else {\n      const textFillStyleColor = textFillStyle.getColor();\n      this.textFillState_ = {\n        fillStyle: asColorLike(textFillStyleColor ?\n          textFillStyleColor : defaultFillStyle)\n      };\n    }\n    const textStrokeStyle = textStyle.getStroke();\n    if (!textStrokeStyle) {\n      this.textStrokeState_ = null;\n    } else {\n      const textStrokeStyleColor = textStrokeStyle.getColor();\n      const textStrokeStyleLineCap = textStrokeStyle.getLineCap();\n      const textStrokeStyleLineDash = textStrokeStyle.getLineDash();\n      const textStrokeStyleLineDashOffset = textStrokeStyle.getLineDashOffset();\n      const textStrokeStyleLineJoin = textStrokeStyle.getLineJoin();\n      const textStrokeStyleWidth = textStrokeStyle.getWidth();\n      const textStrokeStyleMiterLimit = textStrokeStyle.getMiterLimit();\n      this.textStrokeState_ = {\n        lineCap: textStrokeStyleLineCap !== undefined ?\n          textStrokeStyleLineCap : defaultLineCap,\n        lineDash: textStrokeStyleLineDash ?\n          textStrokeStyleLineDash : defaultLineDash,\n        lineDashOffset: textStrokeStyleLineDashOffset ?\n          textStrokeStyleLineDashOffset : defaultLineDashOffset,\n        lineJoin: textStrokeStyleLineJoin !== undefined ?\n          textStrokeStyleLineJoin : defaultLineJoin,\n        lineWidth: textStrokeStyleWidth !== undefined ?\n          textStrokeStyleWidth : defaultLineWidth,\n        miterLimit: textStrokeStyleMiterLimit !== undefined ?\n          textStrokeStyleMiterLimit : defaultMiterLimit,\n        strokeStyle: asColorLike(textStrokeStyleColor ?\n          textStrokeStyleColor : defaultStrokeStyle)\n      };\n    }\n    const textFont = textStyle.getFont();\n    const textOffsetX = textStyle.getOffsetX();\n    const textOffsetY = textStyle.getOffsetY();\n    const textRotateWithView = textStyle.getRotateWithView();\n    const textRotation = textStyle.getRotation();\n    const textScale = textStyle.getScale();\n    const textText = textStyle.getText();\n    const textTextAlign = textStyle.getTextAlign();\n    const textTextBaseline = textStyle.getTextBaseline();\n    this.textState_ = {\n      font: textFont !== undefined ?\n        textFont : defaultFont,\n      textAlign: textTextAlign !== undefined ?\n        textTextAlign : defaultTextAlign,\n      textBaseline: textTextBaseline !== undefined ?\n        textTextBaseline : defaultTextBaseline\n    };\n    this.text_ = textText !== undefined ? textText : '';\n    this.textOffsetX_ =\n        textOffsetX !== undefined ? (this.pixelRatio_ * textOffsetX) : 0;\n    this.textOffsetY_ =\n        textOffsetY !== undefined ? (this.pixelRatio_ * textOffsetY) : 0;\n    this.textRotateWithView_ = textRotateWithView !== undefined ? textRotateWithView : false;\n    this.textRotation_ = textRotation !== undefined ? textRotation : 0;\n    this.textScale_ = this.pixelRatio_ * (textScale !== undefined ?\n      textScale : 1);\n  }\n};\nexport default CanvasImmediateRenderer;\n","/**\n * @module ol/MapBrowserEventHandler\n */\nimport {inherits} from './util.js';\nimport {DEVICE_PIXEL_RATIO} from './has.js';\nimport MapBrowserEventType from './MapBrowserEventType.js';\nimport MapBrowserPointerEvent from './MapBrowserPointerEvent.js';\nimport {listen, unlistenByKey} from './events.js';\nimport EventTarget from './events/EventTarget.js';\nimport PointerEventType from './pointer/EventType.js';\nimport PointerEventHandler from './pointer/PointerEventHandler.js';\n\n/**\n * @param {module:ol/PluggableMap} map The map with the viewport to\n * listen to events on.\n * @param {number=} moveTolerance The minimal distance the pointer must travel\n * to trigger a move.\n * @constructor\n * @extends {module:ol/events/EventTarget}\n */\nconst MapBrowserEventHandler = function(map, moveTolerance) {\n\n  EventTarget.call(this);\n\n  /**\n   * This is the element that we will listen to the real events on.\n   * @type {module:ol/PluggableMap}\n   * @private\n   */\n  this.map_ = map;\n\n  /**\n   * @type {number}\n   * @private\n   */\n  this.clickTimeoutId_ = 0;\n\n  /**\n   * @type {boolean}\n   * @private\n   */\n  this.dragging_ = false;\n\n  /**\n   * @type {!Array.<module:ol/events~EventsKey>}\n   * @private\n   */\n  this.dragListenerKeys_ = [];\n\n  /**\n   * @type {number}\n   * @private\n   */\n  this.moveTolerance_ = moveTolerance ?\n    moveTolerance * DEVICE_PIXEL_RATIO : DEVICE_PIXEL_RATIO;\n\n  /**\n   * The most recent \"down\" type event (or null if none have occurred).\n   * Set on pointerdown.\n   * @type {module:ol/pointer/PointerEvent}\n   * @private\n   */\n  this.down_ = null;\n\n  const element = this.map_.getViewport();\n\n  /**\n   * @type {number}\n   * @private\n   */\n  this.activePointers_ = 0;\n\n  /**\n   * @type {!Object.<number, boolean>}\n   * @private\n   */\n  this.trackedTouches_ = {};\n\n  /**\n   * Event handler which generates pointer events for\n   * the viewport element.\n   *\n   * @type {module:ol/pointer/PointerEventHandler}\n   * @private\n   */\n  this.pointerEventHandler_ = new PointerEventHandler(element);\n\n  /**\n   * Event handler which generates pointer events for\n   * the document (used when dragging).\n   *\n   * @type {module:ol/pointer/PointerEventHandler}\n   * @private\n   */\n  this.documentPointerEventHandler_ = null;\n\n  /**\n   * @type {?module:ol/events~EventsKey}\n   * @private\n   */\n  this.pointerdownListenerKey_ = listen(this.pointerEventHandler_,\n    PointerEventType.POINTERDOWN,\n    this.handlePointerDown_, this);\n\n  /**\n   * @type {?module:ol/events~EventsKey}\n   * @private\n   */\n  this.relayedListenerKey_ = listen(this.pointerEventHandler_,\n    PointerEventType.POINTERMOVE,\n    this.relayEvent_, this);\n\n};\n\ninherits(MapBrowserEventHandler, EventTarget);\n\n\n/**\n * @param {module:ol/pointer/PointerEvent} pointerEvent Pointer\n * event.\n * @private\n */\nMapBrowserEventHandler.prototype.emulateClick_ = function(pointerEvent) {\n  let newEvent = new MapBrowserPointerEvent(\n    MapBrowserEventType.CLICK, this.map_, pointerEvent);\n  this.dispatchEvent(newEvent);\n  if (this.clickTimeoutId_ !== 0) {\n    // double-click\n    clearTimeout(this.clickTimeoutId_);\n    this.clickTimeoutId_ = 0;\n    newEvent = new MapBrowserPointerEvent(\n      MapBrowserEventType.DBLCLICK, this.map_, pointerEvent);\n    this.dispatchEvent(newEvent);\n  } else {\n    // click\n    this.clickTimeoutId_ = setTimeout(function() {\n      this.clickTimeoutId_ = 0;\n      const newEvent = new MapBrowserPointerEvent(\n        MapBrowserEventType.SINGLECLICK, this.map_, pointerEvent);\n      this.dispatchEvent(newEvent);\n    }.bind(this), 250);\n  }\n};\n\n\n/**\n * Keeps track on how many pointers are currently active.\n *\n * @param {module:ol/pointer/PointerEvent} pointerEvent Pointer\n * event.\n * @private\n */\nMapBrowserEventHandler.prototype.updateActivePointers_ = function(pointerEvent) {\n  const event = pointerEvent;\n\n  if (event.type == MapBrowserEventType.POINTERUP ||\n      event.type == MapBrowserEventType.POINTERCANCEL) {\n    delete this.trackedTouches_[event.pointerId];\n  } else if (event.type == MapBrowserEventType.POINTERDOWN) {\n    this.trackedTouches_[event.pointerId] = true;\n  }\n  this.activePointers_ = Object.keys(this.trackedTouches_).length;\n};\n\n\n/**\n * @param {module:ol/pointer/PointerEvent} pointerEvent Pointer\n * event.\n * @private\n */\nMapBrowserEventHandler.prototype.handlePointerUp_ = function(pointerEvent) {\n  this.updateActivePointers_(pointerEvent);\n  const newEvent = new MapBrowserPointerEvent(\n    MapBrowserEventType.POINTERUP, this.map_, pointerEvent);\n  this.dispatchEvent(newEvent);\n\n  // We emulate click events on left mouse button click, touch contact, and pen\n  // contact. isMouseActionButton returns true in these cases (evt.button is set\n  // to 0).\n  // See http://www.w3.org/TR/pointerevents/#button-states\n  // We only fire click, singleclick, and doubleclick if nobody has called\n  // event.stopPropagation() or event.preventDefault().\n  if (!newEvent.propagationStopped && !this.dragging_ && this.isMouseActionButton_(pointerEvent)) {\n    this.emulateClick_(this.down_);\n  }\n\n  if (this.activePointers_ === 0) {\n    this.dragListenerKeys_.forEach(unlistenByKey);\n    this.dragListenerKeys_.length = 0;\n    this.dragging_ = false;\n    this.down_ = null;\n    this.documentPointerEventHandler_.dispose();\n    this.documentPointerEventHandler_ = null;\n  }\n};\n\n\n/**\n * @param {module:ol/pointer/PointerEvent} pointerEvent Pointer\n * event.\n * @return {boolean} If the left mouse button was pressed.\n * @private\n */\nMapBrowserEventHandler.prototype.isMouseActionButton_ = function(pointerEvent) {\n  return pointerEvent.button === 0;\n};\n\n\n/**\n * @param {module:ol/pointer/PointerEvent} pointerEvent Pointer\n * event.\n * @private\n */\nMapBrowserEventHandler.prototype.handlePointerDown_ = function(pointerEvent) {\n  this.updateActivePointers_(pointerEvent);\n  const newEvent = new MapBrowserPointerEvent(\n    MapBrowserEventType.POINTERDOWN, this.map_, pointerEvent);\n  this.dispatchEvent(newEvent);\n\n  this.down_ = pointerEvent;\n\n  if (this.dragListenerKeys_.length === 0) {\n    /* Set up a pointer event handler on the `document`,\n     * which is required when the pointer is moved outside\n     * the viewport when dragging.\n     */\n    this.documentPointerEventHandler_ =\n        new PointerEventHandler(document);\n\n    this.dragListenerKeys_.push(\n      listen(this.documentPointerEventHandler_,\n        MapBrowserEventType.POINTERMOVE,\n        this.handlePointerMove_, this),\n      listen(this.documentPointerEventHandler_,\n        MapBrowserEventType.POINTERUP,\n        this.handlePointerUp_, this),\n      /* Note that the listener for `pointercancel is set up on\n       * `pointerEventHandler_` and not `documentPointerEventHandler_` like\n       * the `pointerup` and `pointermove` listeners.\n       *\n       * The reason for this is the following: `TouchSource.vacuumTouches_()`\n       * issues `pointercancel` events, when there was no `touchend` for a\n       * `touchstart`. Now, let's say a first `touchstart` is registered on\n       * `pointerEventHandler_`. The `documentPointerEventHandler_` is set up.\n       * But `documentPointerEventHandler_` doesn't know about the first\n       * `touchstart`. If there is no `touchend` for the `touchstart`, we can\n       * only receive a `touchcancel` from `pointerEventHandler_`, because it is\n       * only registered there.\n       */\n      listen(this.pointerEventHandler_,\n        MapBrowserEventType.POINTERCANCEL,\n        this.handlePointerUp_, this)\n    );\n  }\n};\n\n\n/**\n * @param {module:ol/pointer/PointerEvent} pointerEvent Pointer\n * event.\n * @private\n */\nMapBrowserEventHandler.prototype.handlePointerMove_ = function(pointerEvent) {\n  // Between pointerdown and pointerup, pointermove events are triggered.\n  // To avoid a 'false' touchmove event to be dispatched, we test if the pointer\n  // moved a significant distance.\n  if (this.isMoving_(pointerEvent)) {\n    this.dragging_ = true;\n    const newEvent = new MapBrowserPointerEvent(\n      MapBrowserEventType.POINTERDRAG, this.map_, pointerEvent,\n      this.dragging_);\n    this.dispatchEvent(newEvent);\n  }\n\n  // Some native android browser triggers mousemove events during small period\n  // of time. See: https://code.google.com/p/android/issues/detail?id=5491 or\n  // https://code.google.com/p/android/issues/detail?id=19827\n  // ex: Galaxy Tab P3110 + Android 4.1.1\n  pointerEvent.preventDefault();\n};\n\n\n/**\n * Wrap and relay a pointer event.  Note that this requires that the type\n * string for the MapBrowserPointerEvent matches the PointerEvent type.\n * @param {module:ol/pointer/PointerEvent} pointerEvent Pointer\n * event.\n * @private\n */\nMapBrowserEventHandler.prototype.relayEvent_ = function(pointerEvent) {\n  const dragging = !!(this.down_ && this.isMoving_(pointerEvent));\n  this.dispatchEvent(new MapBrowserPointerEvent(\n    pointerEvent.type, this.map_, pointerEvent, dragging));\n};\n\n\n/**\n * @param {module:ol/pointer/PointerEvent} pointerEvent Pointer\n * event.\n * @return {boolean} Is moving.\n * @private\n */\nMapBrowserEventHandler.prototype.isMoving_ = function(pointerEvent) {\n  return this.dragging_ ||\n      Math.abs(pointerEvent.clientX - this.down_.clientX) > this.moveTolerance_ ||\n      Math.abs(pointerEvent.clientY - this.down_.clientY) > this.moveTolerance_;\n};\n\n\n/**\n * @inheritDoc\n */\nMapBrowserEventHandler.prototype.disposeInternal = function() {\n  if (this.relayedListenerKey_) {\n    unlistenByKey(this.relayedListenerKey_);\n    this.relayedListenerKey_ = null;\n  }\n  if (this.pointerdownListenerKey_) {\n    unlistenByKey(this.pointerdownListenerKey_);\n    this.pointerdownListenerKey_ = null;\n  }\n\n  this.dragListenerKeys_.forEach(unlistenByKey);\n  this.dragListenerKeys_.length = 0;\n\n  if (this.documentPointerEventHandler_) {\n    this.documentPointerEventHandler_.dispose();\n    this.documentPointerEventHandler_ = null;\n  }\n  if (this.pointerEventHandler_) {\n    this.pointerEventHandler_.dispose();\n    this.pointerEventHandler_ = null;\n  }\n  EventTarget.prototype.disposeInternal.call(this);\n};\nexport default MapBrowserEventHandler;\n","/**\n * @module ol/PluggableMap\n */\nimport {getUid, inherits} from './util.js';\nimport Collection from './Collection.js';\nimport CollectionEventType from './CollectionEventType.js';\nimport MapBrowserEvent from './MapBrowserEvent.js';\nimport MapBrowserEventHandler from './MapBrowserEventHandler.js';\nimport MapBrowserEventType from './MapBrowserEventType.js';\nimport MapEvent from './MapEvent.js';\nimport MapEventType from './MapEventType.js';\nimport MapProperty from './MapProperty.js';\nimport BaseObject, {getChangeEventType} from './Object.js';\nimport ObjectEventType from './ObjectEventType.js';\nimport TileQueue from './TileQueue.js';\nimport View from './View.js';\nimport ViewHint from './ViewHint.js';\nimport {assert} from './asserts.js';\nimport {removeNode} from './dom.js';\nimport {listen, unlistenByKey, unlisten} from './events.js';\nimport {stopPropagation} from './events/Event.js';\nimport EventType from './events/EventType.js';\nimport {createEmpty, clone, createOrUpdateEmpty, equals, getForViewAndSize, isEmpty} from './extent.js';\nimport {TRUE} from './functions.js';\nimport {DEVICE_PIXEL_RATIO, TOUCH} from './has.js';\nimport LayerGroup from './layer/Group.js';\nimport {hasArea} from './size.js';\nimport {DROP} from './structs/PriorityQueue.js';\nimport {create as createTransform, apply as applyTransform} from './transform.js';\n\n\n/**\n * State of the current frame. Only `pixelRatio`, `time` and `viewState` should\n * be used in applications.\n * @typedef {Object} FrameState\n * @property {number} pixelRatio The pixel ratio of the frame.\n * @property {number} time The time when rendering of the frame was requested.\n * @property {module:ol/View~State} viewState The state of the current view.\n * @property {boolean} animate\n * @property {module:ol/transform~Transform} coordinateToPixelTransform\n * @property {null|module:ol/extent~Extent} extent\n * @property {module:ol/coordinate~Coordinate} focus\n * @property {number} index\n * @property {Object.<number, module:ol/layer/Layer~State>} layerStates\n * @property {Array.<module:ol/layer/Layer~State>} layerStatesArray\n * @property {module:ol/transform~Transform} pixelToCoordinateTransform\n * @property {Array.<module:ol/PluggableMap~PostRenderFunction>} postRenderFunctions\n * @property {module:ol/size~Size} size\n * @property {!Object.<string, boolean>} skippedFeatureUids\n * @property {module:ol/TileQueue} tileQueue\n * @property {Object.<string, Object.<string, module:ol/TileRange>>} usedTiles\n * @property {Array.<number>} viewHints\n * @property {!Object.<string, Object.<string, boolean>>} wantedTiles\n */\n\n\n/**\n * @typedef {function(module:ol/PluggableMap, ?module:ol/PluggableMap~FrameState): boolean} PostRenderFunction\n */\n\n\n/**\n * @typedef {Object} AtPixelOptions\n * @property {((function(module:ol/layer/Layer): boolean)|undefined)} layerFilter Layer filter\n * function. The filter function will receive one argument, the\n * {@link module:ol/layer/Layer layer-candidate} and it should return a boolean value.\n * Only layers which are visible and for which this function returns `true`\n * will be tested for features. By default, all visible layers will be tested.\n * @property {number} [hitTolerance=0] Hit-detection tolerance in pixels. Pixels\n * inside the radius around the given position will be checked for features. This only\n * works for the canvas renderer and not for WebGL.\n */\n\n\n/**\n * @typedef {Object} MapOptionsInternal\n * @property {module:ol/Collection.<module:ol/control/Control>} [controls]\n * @property {module:ol/Collection.<module:ol/interaction/Interaction>} [interactions]\n * @property {Element|Document} keyboardEventTarget\n * @property {module:ol/Collection.<module:ol/Overlay>} overlays\n * @property {Object.<string, *>} values\n */\n\n\n/**\n * Object literal with config options for the map.\n * @typedef {Object} MapOptions\n * @property {module:ol/Collection.<module:ol/control/Control>|Array.<module:ol/control/Control>} [controls]\n * Controls initially added to the map. If not specified,\n * {@link module:ol/control/util~defaults} is used.\n * @property {number} [pixelRatio=window.devicePixelRatio] The ratio between\n * physical pixels and device-independent pixels (dips) on the device.\n * @property {module:ol/Collection.<module:ol/interaction/Interaction>|Array.<module:ol/interaction/Interaction>} [interactions]\n * Interactions that are initially added to the map. If not specified,\n * {@link module:ol/interaction~defaults} is used.\n * @property {Element|Document|string} [keyboardEventTarget] The element to\n * listen to keyboard events on. This determines when the `KeyboardPan` and\n * `KeyboardZoom` interactions trigger. For example, if this option is set to\n * `document` the keyboard interactions will always trigger. If this option is\n * not specified, the element the library listens to keyboard events on is the\n * map target (i.e. the user-provided div for the map). If this is not\n * `document`, the target element needs to be focused for key events to be\n * emitted, requiring that the target element has a `tabindex` attribute.\n * @property {Array.<module:ol/layer/Base>|module:ol/Collection.<module:ol/layer/Base>} [layers]\n * Layers. If this is not defined, a map with no layers will be rendered. Note\n * that layers are rendered in the order supplied, so if you want, for example,\n * a vector layer to appear on top of a tile layer, it must come after the tile\n * layer.\n * @property {number} [maxTilesLoading=16] Maximum number tiles to load\n * simultaneously.\n * @property {boolean} [loadTilesWhileAnimating=false] When set to `true`, tiles\n * will be loaded during animations. This may improve the user experience, but\n * can also make animations stutter on devices with slow memory.\n * @property {boolean} [loadTilesWhileInteracting=false] When set to `true`,\n * tiles will be loaded while interacting with the map. This may improve the\n * user experience, but can also make map panning and zooming choppy on devices\n * with slow memory.\n * @property {number} [moveTolerance=1] The minimum distance in pixels the\n * cursor must move to be detected as a map move event instead of a click.\n * Increasing this value can make it easier to click on the map.\n * @property {module:ol/Collection.<module:ol/Overlay>|Array.<module:ol/Overlay>} [overlays]\n * Overlays initially added to the map. By default, no overlays are added.\n * @property {Element|string} [target] The container for the map, either the\n * element itself or the `id` of the element. If not specified at construction\n * time, {@link module:ol/Map~Map#setTarget} must be called for the map to be\n * rendered.\n * @property {module:ol/View} [view] The map's view.  No layer sources will be\n * fetched unless this is specified at construction time or through\n * {@link module:ol/Map~Map#setView}.\n */\n\n\n/**\n * @constructor\n * @extends {module:ol/Object}\n * @param {module:ol/PluggableMap~MapOptions} options Map options.\n * @fires module:ol/MapBrowserEvent~MapBrowserEvent\n * @fires module:ol/MapEvent~MapEvent\n * @fires module:ol/render/Event~RenderEvent#postcompose\n * @fires module:ol/render/Event~RenderEvent#precompose\n * @api\n */\nconst PluggableMap = function(options) {\n\n  BaseObject.call(this);\n\n  const optionsInternal = createOptionsInternal(options);\n\n  /**\n   * @type {number}\n   * @private\n   */\n  this.maxTilesLoading_ = options.maxTilesLoading !== undefined ? options.maxTilesLoading : 16;\n\n  /**\n   * @type {boolean}\n   * @private\n   */\n  this.loadTilesWhileAnimating_ =\n      options.loadTilesWhileAnimating !== undefined ?\n        options.loadTilesWhileAnimating : false;\n\n  /**\n   * @type {boolean}\n   * @private\n   */\n  this.loadTilesWhileInteracting_ =\n      options.loadTilesWhileInteracting !== undefined ?\n        options.loadTilesWhileInteracting : false;\n\n  /**\n   * @private\n   * @type {number}\n   */\n  this.pixelRatio_ = options.pixelRatio !== undefined ?\n    options.pixelRatio : DEVICE_PIXEL_RATIO;\n\n  /**\n   * @private\n   * @type {number|undefined}\n   */\n  this.animationDelayKey_;\n\n  /**\n   * @private\n   */\n  this.animationDelay_ = function() {\n    this.animationDelayKey_ = undefined;\n    this.renderFrame_.call(this, Date.now());\n  }.bind(this);\n\n  /**\n   * @private\n   * @type {module:ol/transform~Transform}\n   */\n  this.coordinateToPixelTransform_ = createTransform();\n\n  /**\n   * @private\n   * @type {module:ol/transform~Transform}\n   */\n  this.pixelToCoordinateTransform_ = createTransform();\n\n  /**\n   * @private\n   * @type {number}\n   */\n  this.frameIndex_ = 0;\n\n  /**\n   * @private\n   * @type {?module:ol/PluggableMap~FrameState}\n   */\n  this.frameState_ = null;\n\n  /**\n   * The extent at the previous 'moveend' event.\n   * @private\n   * @type {module:ol/extent~Extent}\n   */\n  this.previousExtent_ = null;\n\n  /**\n   * @private\n   * @type {?module:ol/events~EventsKey}\n   */\n  this.viewPropertyListenerKey_ = null;\n\n  /**\n   * @private\n   * @type {?module:ol/events~EventsKey}\n   */\n  this.viewChangeListenerKey_ = null;\n\n  /**\n   * @private\n   * @type {Array.<module:ol/events~EventsKey>}\n   */\n  this.layerGroupPropertyListenerKeys_ = null;\n\n  /**\n   * @private\n   * @type {Element}\n   */\n  this.viewport_ = document.createElement('DIV');\n  this.viewport_.className = 'ol-viewport' + (TOUCH ? ' ol-touch' : '');\n  this.viewport_.style.position = 'relative';\n  this.viewport_.style.overflow = 'hidden';\n  this.viewport_.style.width = '100%';\n  this.viewport_.style.height = '100%';\n  // prevent page zoom on IE >= 10 browsers\n  this.viewport_.style.msTouchAction = 'none';\n  this.viewport_.style.touchAction = 'none';\n\n  /**\n   * @private\n   * @type {!Element}\n   */\n  this.overlayContainer_ = document.createElement('DIV');\n  this.overlayContainer_.className = 'ol-overlaycontainer';\n  this.viewport_.appendChild(this.overlayContainer_);\n\n  /**\n   * @private\n   * @type {!Element}\n   */\n  this.overlayContainerStopEvent_ = document.createElement('DIV');\n  this.overlayContainerStopEvent_.className = 'ol-overlaycontainer-stopevent';\n  const overlayEvents = [\n    EventType.CLICK,\n    EventType.DBLCLICK,\n    EventType.MOUSEDOWN,\n    EventType.TOUCHSTART,\n    EventType.MSPOINTERDOWN,\n    MapBrowserEventType.POINTERDOWN,\n    EventType.MOUSEWHEEL,\n    EventType.WHEEL\n  ];\n  for (let i = 0, ii = overlayEvents.length; i < ii; ++i) {\n    listen(this.overlayContainerStopEvent_, overlayEvents[i], stopPropagation);\n  }\n  this.viewport_.appendChild(this.overlayContainerStopEvent_);\n\n  /**\n   * @private\n   * @type {module:ol/MapBrowserEventHandler}\n   */\n  this.mapBrowserEventHandler_ = new MapBrowserEventHandler(this, options.moveTolerance);\n  for (const key in MapBrowserEventType) {\n    listen(this.mapBrowserEventHandler_, MapBrowserEventType[key],\n      this.handleMapBrowserEvent, this);\n  }\n\n  /**\n   * @private\n   * @type {Element|Document}\n   */\n  this.keyboardEventTarget_ = optionsInternal.keyboardEventTarget;\n\n  /**\n   * @private\n   * @type {Array.<module:ol/events~EventsKey>}\n   */\n  this.keyHandlerKeys_ = null;\n\n  listen(this.viewport_, EventType.CONTEXTMENU, this.handleBrowserEvent, this);\n  listen(this.viewport_, EventType.WHEEL, this.handleBrowserEvent, this);\n  listen(this.viewport_, EventType.MOUSEWHEEL, this.handleBrowserEvent, this);\n\n  /**\n   * @type {module:ol/Collection.<module:ol/control/Control>}\n   * @protected\n   */\n  this.controls = optionsInternal.controls || new Collection();\n\n  /**\n   * @type {module:ol/Collection.<module:ol/interaction/Interaction>}\n   * @protected\n   */\n  this.interactions = optionsInternal.interactions || new Collection();\n\n  /**\n   * @type {module:ol/Collection.<module:ol/Overlay>}\n   * @private\n   */\n  this.overlays_ = optionsInternal.overlays;\n\n  /**\n   * A lookup of overlays by id.\n   * @private\n   * @type {Object.<string, module:ol/Overlay>}\n   */\n  this.overlayIdIndex_ = {};\n\n  /**\n   * @type {module:ol/renderer/Map}\n   * @private\n   */\n  this.renderer_ = this.createRenderer();\n\n  /**\n   * @type {function(Event)|undefined}\n   * @private\n   */\n  this.handleResize_;\n\n  /**\n   * @private\n   * @type {module:ol/coordinate~Coordinate}\n   */\n  this.focus_ = null;\n\n  /**\n   * @private\n   * @type {!Array.<module:ol/PluggableMap~PostRenderFunction>}\n   */\n  this.postRenderFunctions_ = [];\n\n  /**\n   * @private\n   * @type {module:ol/TileQueue}\n   */\n  this.tileQueue_ = new TileQueue(\n    this.getTilePriority.bind(this),\n    this.handleTileChange_.bind(this));\n\n  /**\n   * Uids of features to skip at rendering time.\n   * @type {Object.<string, boolean>}\n   * @private\n   */\n  this.skippedFeatureUids_ = {};\n\n  listen(\n    this, getChangeEventType(MapProperty.LAYERGROUP),\n    this.handleLayerGroupChanged_, this);\n  listen(this, getChangeEventType(MapProperty.VIEW),\n    this.handleViewChanged_, this);\n  listen(this, getChangeEventType(MapProperty.SIZE),\n    this.handleSizeChanged_, this);\n  listen(this, getChangeEventType(MapProperty.TARGET),\n    this.handleTargetChanged_, this);\n\n  // setProperties will trigger the rendering of the map if the map\n  // is \"defined\" already.\n  this.setProperties(optionsInternal.values);\n\n  this.controls.forEach(\n    /**\n     * @param {module:ol/control/Control} control Control.\n     * @this {module:ol/PluggableMap}\n     */\n    (function(control) {\n      control.setMap(this);\n    }).bind(this));\n\n  listen(this.controls, CollectionEventType.ADD,\n    /**\n     * @param {module:ol/Collection~CollectionEvent} event CollectionEvent.\n     */\n    function(event) {\n      event.element.setMap(this);\n    }, this);\n\n  listen(this.controls, CollectionEventType.REMOVE,\n    /**\n     * @param {module:ol/Collection~CollectionEvent} event CollectionEvent.\n     */\n    function(event) {\n      event.element.setMap(null);\n    }, this);\n\n  this.interactions.forEach(\n    /**\n     * @param {module:ol/interaction/Interaction} interaction Interaction.\n     * @this {module:ol/PluggableMap}\n     */\n    (function(interaction) {\n      interaction.setMap(this);\n    }).bind(this));\n\n  listen(this.interactions, CollectionEventType.ADD,\n    /**\n     * @param {module:ol/Collection~CollectionEvent} event CollectionEvent.\n     */\n    function(event) {\n      event.element.setMap(this);\n    }, this);\n\n  listen(this.interactions, CollectionEventType.REMOVE,\n    /**\n     * @param {module:ol/Collection~CollectionEvent} event CollectionEvent.\n     */\n    function(event) {\n      event.element.setMap(null);\n    }, this);\n\n  this.overlays_.forEach(this.addOverlayInternal_.bind(this));\n\n  listen(this.overlays_, CollectionEventType.ADD,\n    /**\n     * @param {module:ol/Collection~CollectionEvent} event CollectionEvent.\n     */\n    function(event) {\n      this.addOverlayInternal_(/** @type {module:ol/Overlay} */ (event.element));\n    }, this);\n\n  listen(this.overlays_, CollectionEventType.REMOVE,\n    /**\n     * @param {module:ol/Collection~CollectionEvent} event CollectionEvent.\n     */\n    function(event) {\n      const overlay = /** @type {module:ol/Overlay} */ (event.element);\n      const id = overlay.getId();\n      if (id !== undefined) {\n        delete this.overlayIdIndex_[id.toString()];\n      }\n      event.element.setMap(null);\n    }, this);\n\n};\n\ninherits(PluggableMap, BaseObject);\n\n\nPluggableMap.prototype.createRenderer = function() {\n  throw new Error('Use a map type that has a createRenderer method');\n};\n\n\n/**\n * Add the given control to the map.\n * @param {module:ol/control/Control} control Control.\n * @api\n */\nPluggableMap.prototype.addControl = function(control) {\n  this.getControls().push(control);\n};\n\n\n/**\n * Add the given interaction to the map.\n * @param {module:ol/interaction/Interaction} interaction Interaction to add.\n * @api\n */\nPluggableMap.prototype.addInteraction = function(interaction) {\n  this.getInteractions().push(interaction);\n};\n\n\n/**\n * Adds the given layer to the top of this map. If you want to add a layer\n * elsewhere in the stack, use `getLayers()` and the methods available on\n * {@link module:ol/Collection~Collection}.\n * @param {module:ol/layer/Base} layer Layer.\n * @api\n */\nPluggableMap.prototype.addLayer = function(layer) {\n  const layers = this.getLayerGroup().getLayers();\n  layers.push(layer);\n};\n\n\n/**\n * Add the given overlay to the map.\n * @param {module:ol/Overlay} overlay Overlay.\n * @api\n */\nPluggableMap.prototype.addOverlay = function(overlay) {\n  this.getOverlays().push(overlay);\n};\n\n\n/**\n * This deals with map's overlay collection changes.\n * @param {module:ol/Overlay} overlay Overlay.\n * @private\n */\nPluggableMap.prototype.addOverlayInternal_ = function(overlay) {\n  const id = overlay.getId();\n  if (id !== undefined) {\n    this.overlayIdIndex_[id.toString()] = overlay;\n  }\n  overlay.setMap(this);\n};\n\n\n/**\n *\n * @inheritDoc\n */\nPluggableMap.prototype.disposeInternal = function() {\n  this.mapBrowserEventHandler_.dispose();\n  unlisten(this.viewport_, EventType.CONTEXTMENU, this.handleBrowserEvent, this);\n  unlisten(this.viewport_, EventType.WHEEL, this.handleBrowserEvent, this);\n  unlisten(this.viewport_, EventType.MOUSEWHEEL, this.handleBrowserEvent, this);\n  if (this.handleResize_ !== undefined) {\n    removeEventListener(EventType.RESIZE, this.handleResize_, false);\n    this.handleResize_ = undefined;\n  }\n  if (this.animationDelayKey_) {\n    cancelAnimationFrame(this.animationDelayKey_);\n    this.animationDelayKey_ = undefined;\n  }\n  this.setTarget(null);\n  BaseObject.prototype.disposeInternal.call(this);\n};\n\n\n/**\n * Detect features that intersect a pixel on the viewport, and execute a\n * callback with each intersecting feature. Layers included in the detection can\n * be configured through the `layerFilter` option in `opt_options`.\n * @param {module:ol~Pixel} pixel Pixel.\n * @param {function(this: S, (module:ol/Feature|module:ol/render/Feature),\n *     module:ol/layer/Layer): T} callback Feature callback. The callback will be\n *     called with two arguments. The first argument is one\n *     {@link module:ol/Feature feature} or\n *     {@link module:ol/render/Feature render feature} at the pixel, the second is\n *     the {@link module:ol/layer/Layer layer} of the feature and will be null for\n *     unmanaged layers. To stop detection, callback functions can return a\n *     truthy value.\n * @param {module:ol/PluggableMap~AtPixelOptions=} opt_options Optional options.\n * @return {T|undefined} Callback result, i.e. the return value of last\n * callback execution, or the first truthy callback return value.\n * @template S,T\n * @api\n */\nPluggableMap.prototype.forEachFeatureAtPixel = function(pixel, callback, opt_options) {\n  if (!this.frameState_) {\n    return;\n  }\n  const coordinate = this.getCoordinateFromPixel(pixel);\n  opt_options = opt_options !== undefined ? opt_options : {};\n  const hitTolerance = opt_options.hitTolerance !== undefined ?\n    opt_options.hitTolerance * this.frameState_.pixelRatio : 0;\n  const layerFilter = opt_options.layerFilter !== undefined ?\n    opt_options.layerFilter : TRUE;\n  return this.renderer_.forEachFeatureAtCoordinate(\n    coordinate, this.frameState_, hitTolerance, callback, null,\n    layerFilter, null);\n};\n\n\n/**\n * Get all features that intersect a pixel on the viewport.\n * @param {module:ol~Pixel} pixel Pixel.\n * @param {module:ol/PluggableMap~AtPixelOptions=} opt_options Optional options.\n * @return {Array.<module:ol/Feature|module:ol/render/Feature>} The detected features or\n * `null` if none were found.\n * @api\n */\nPluggableMap.prototype.getFeaturesAtPixel = function(pixel, opt_options) {\n  let features = null;\n  this.forEachFeatureAtPixel(pixel, function(feature) {\n    if (!features) {\n      features = [];\n    }\n    features.push(feature);\n  }, opt_options);\n  return features;\n};\n\n/**\n * Detect layers that have a color value at a pixel on the viewport, and\n * execute a callback with each matching layer. Layers included in the\n * detection can be configured through `opt_layerFilter`.\n * @param {module:ol~Pixel} pixel Pixel.\n * @param {function(this: S, module:ol/layer/Layer, (Uint8ClampedArray|Uint8Array)): T} callback\n *     Layer callback. This callback will receive two arguments: first is the\n *     {@link module:ol/layer/Layer layer}, second argument is an array representing\n *     [R, G, B, A] pixel values (0 - 255) and will be `null` for layer types\n *     that do not currently support this argument. To stop detection, callback\n *     functions can return a truthy value.\n * @param {module:ol/PluggableMap~AtPixelOptions=} opt_options Configuration options.\n * @return {T|undefined} Callback result, i.e. the return value of last\n * callback execution, or the first truthy callback return value.\n * @template S,T\n * @api\n */\nPluggableMap.prototype.forEachLayerAtPixel = function(pixel, callback, opt_options) {\n  if (!this.frameState_) {\n    return;\n  }\n  const options = opt_options || {};\n  const hitTolerance = options.hitTolerance !== undefined ?\n    opt_options.hitTolerance * this.frameState_.pixelRatio : 0;\n  const layerFilter = options.layerFilter || TRUE;\n  return this.renderer_.forEachLayerAtPixel(\n    pixel, this.frameState_, hitTolerance, callback, null, layerFilter, null);\n};\n\n\n/**\n * Detect if features intersect a pixel on the viewport. Layers included in the\n * detection can be configured through `opt_layerFilter`.\n * @param {module:ol~Pixel} pixel Pixel.\n * @param {module:ol/PluggableMap~AtPixelOptions=} opt_options Optional options.\n * @return {boolean} Is there a feature at the given pixel?\n * @template U\n * @api\n */\nPluggableMap.prototype.hasFeatureAtPixel = function(pixel, opt_options) {\n  if (!this.frameState_) {\n    return false;\n  }\n  const coordinate = this.getCoordinateFromPixel(pixel);\n  opt_options = opt_options !== undefined ? opt_options : {};\n  const layerFilter = opt_options.layerFilter !== undefined ? opt_options.layerFilter : TRUE;\n  const hitTolerance = opt_options.hitTolerance !== undefined ?\n    opt_options.hitTolerance * this.frameState_.pixelRatio : 0;\n  return this.renderer_.hasFeatureAtCoordinate(\n    coordinate, this.frameState_, hitTolerance, layerFilter, null);\n};\n\n\n/**\n * Returns the coordinate in view projection for a browser event.\n * @param {Event} event Event.\n * @return {module:ol/coordinate~Coordinate} Coordinate.\n * @api\n */\nPluggableMap.prototype.getEventCoordinate = function(event) {\n  return this.getCoordinateFromPixel(this.getEventPixel(event));\n};\n\n\n/**\n * Returns the map pixel position for a browser event relative to the viewport.\n * @param {Event} event Event.\n * @return {module:ol~Pixel} Pixel.\n * @api\n */\nPluggableMap.prototype.getEventPixel = function(event) {\n  const viewportPosition = this.viewport_.getBoundingClientRect();\n  const eventPosition = event.changedTouches ? event.changedTouches[0] : event;\n  return [\n    eventPosition.clientX - viewportPosition.left,\n    eventPosition.clientY - viewportPosition.top\n  ];\n};\n\n\n/**\n * Get the target in which this map is rendered.\n * Note that this returns what is entered as an option or in setTarget:\n * if that was an element, it returns an element; if a string, it returns that.\n * @return {Element|string|undefined} The Element or id of the Element that the\n *     map is rendered in.\n * @observable\n * @api\n */\nPluggableMap.prototype.getTarget = function() {\n  return /** @type {Element|string|undefined} */ (this.get(MapProperty.TARGET));\n};\n\n\n/**\n * Get the DOM element into which this map is rendered. In contrast to\n * `getTarget` this method always return an `Element`, or `null` if the\n * map has no target.\n * @return {Element} The element that the map is rendered in.\n * @api\n */\nPluggableMap.prototype.getTargetElement = function() {\n  const target = this.getTarget();\n  if (target !== undefined) {\n    return typeof target === 'string' ? document.getElementById(target) : target;\n  } else {\n    return null;\n  }\n};\n\n\n/**\n * Get the coordinate for a given pixel.  This returns a coordinate in the\n * map view projection.\n * @param {module:ol~Pixel} pixel Pixel position in the map viewport.\n * @return {module:ol/coordinate~Coordinate} The coordinate for the pixel position.\n * @api\n */\nPluggableMap.prototype.getCoordinateFromPixel = function(pixel) {\n  const frameState = this.frameState_;\n  if (!frameState) {\n    return null;\n  } else {\n    return applyTransform(frameState.pixelToCoordinateTransform, pixel.slice());\n  }\n};\n\n\n/**\n * Get the map controls. Modifying this collection changes the controls\n * associated with the map.\n * @return {module:ol/Collection.<module:ol/control/Control>} Controls.\n * @api\n */\nPluggableMap.prototype.getControls = function() {\n  return this.controls;\n};\n\n\n/**\n * Get the map overlays. Modifying this collection changes the overlays\n * associated with the map.\n * @return {module:ol/Collection.<module:ol/Overlay>} Overlays.\n * @api\n */\nPluggableMap.prototype.getOverlays = function() {\n  return this.overlays_;\n};\n\n\n/**\n * Get an overlay by its identifier (the value returned by overlay.getId()).\n * Note that the index treats string and numeric identifiers as the same. So\n * `map.getOverlayById(2)` will return an overlay with id `'2'` or `2`.\n * @param {string|number} id Overlay identifier.\n * @return {module:ol/Overlay} Overlay.\n * @api\n */\nPluggableMap.prototype.getOverlayById = function(id) {\n  const overlay = this.overlayIdIndex_[id.toString()];\n  return overlay !== undefined ? overlay : null;\n};\n\n\n/**\n * Get the map interactions. Modifying this collection changes the interactions\n * associated with the map.\n *\n * Interactions are used for e.g. pan, zoom and rotate.\n * @return {module:ol/Collection.<module:ol/interaction/Interaction>} Interactions.\n * @api\n */\nPluggableMap.prototype.getInteractions = function() {\n  return this.interactions;\n};\n\n\n/**\n * Get the layergroup associated with this map.\n * @return {module:ol/layer/Group} A layer group containing the layers in this map.\n * @observable\n * @api\n */\nPluggableMap.prototype.getLayerGroup = function() {\n  return (\n    /** @type {module:ol/layer/Group} */ (this.get(MapProperty.LAYERGROUP))\n  );\n};\n\n\n/**\n * Get the collection of layers associated with this map.\n * @return {!module:ol/Collection.<module:ol/layer/Base>} Layers.\n * @api\n */\nPluggableMap.prototype.getLayers = function() {\n  const layers = this.getLayerGroup().getLayers();\n  return layers;\n};\n\n\n/**\n * Get the pixel for a coordinate.  This takes a coordinate in the map view\n * projection and returns the corresponding pixel.\n * @param {module:ol/coordinate~Coordinate} coordinate A map coordinate.\n * @return {module:ol~Pixel} A pixel position in the map viewport.\n * @api\n */\nPluggableMap.prototype.getPixelFromCoordinate = function(coordinate) {\n  const frameState = this.frameState_;\n  if (!frameState) {\n    return null;\n  } else {\n    return applyTransform(frameState.coordinateToPixelTransform, coordinate.slice(0, 2));\n  }\n};\n\n\n/**\n * Get the map renderer.\n * @return {module:ol/renderer/Map} Renderer\n */\nPluggableMap.prototype.getRenderer = function() {\n  return this.renderer_;\n};\n\n\n/**\n * Get the size of this map.\n * @return {module:ol/size~Size|undefined} The size in pixels of the map in the DOM.\n * @observable\n * @api\n */\nPluggableMap.prototype.getSize = function() {\n  return (\n    /** @type {module:ol/size~Size|undefined} */ (this.get(MapProperty.SIZE))\n  );\n};\n\n\n/**\n * Get the view associated with this map. A view manages properties such as\n * center and resolution.\n * @return {module:ol/View} The view that controls this map.\n * @observable\n * @api\n */\nPluggableMap.prototype.getView = function() {\n  return (\n    /** @type {module:ol/View} */ (this.get(MapProperty.VIEW))\n  );\n};\n\n\n/**\n * Get the element that serves as the map viewport.\n * @return {Element} Viewport.\n * @api\n */\nPluggableMap.prototype.getViewport = function() {\n  return this.viewport_;\n};\n\n\n/**\n * Get the element that serves as the container for overlays.  Elements added to\n * this container will let mousedown and touchstart events through to the map,\n * so clicks and gestures on an overlay will trigger {@link module:ol/MapBrowserEvent~MapBrowserEvent}\n * events.\n * @return {!Element} The map's overlay container.\n */\nPluggableMap.prototype.getOverlayContainer = function() {\n  return this.overlayContainer_;\n};\n\n\n/**\n * Get the element that serves as a container for overlays that don't allow\n * event propagation. Elements added to this container won't let mousedown and\n * touchstart events through to the map, so clicks and gestures on an overlay\n * don't trigger any {@link module:ol/MapBrowserEvent~MapBrowserEvent}.\n * @return {!Element} The map's overlay container that stops events.\n */\nPluggableMap.prototype.getOverlayContainerStopEvent = function() {\n  return this.overlayContainerStopEvent_;\n};\n\n\n/**\n * @param {module:ol/Tile} tile Tile.\n * @param {string} tileSourceKey Tile source key.\n * @param {module:ol/coordinate~Coordinate} tileCenter Tile center.\n * @param {number} tileResolution Tile resolution.\n * @return {number} Tile priority.\n */\nPluggableMap.prototype.getTilePriority = function(tile, tileSourceKey, tileCenter, tileResolution) {\n  // Filter out tiles at higher zoom levels than the current zoom level, or that\n  // are outside the visible extent.\n  const frameState = this.frameState_;\n  if (!frameState || !(tileSourceKey in frameState.wantedTiles)) {\n    return DROP;\n  }\n  if (!frameState.wantedTiles[tileSourceKey][tile.getKey()]) {\n    return DROP;\n  }\n  // Prioritize the highest zoom level tiles closest to the focus.\n  // Tiles at higher zoom levels are prioritized using Math.log(tileResolution).\n  // Within a zoom level, tiles are prioritized by the distance in pixels\n  // between the center of the tile and the focus.  The factor of 65536 means\n  // that the prioritization should behave as desired for tiles up to\n  // 65536 * Math.log(2) = 45426 pixels from the focus.\n  const deltaX = tileCenter[0] - frameState.focus[0];\n  const deltaY = tileCenter[1] - frameState.focus[1];\n  return 65536 * Math.log(tileResolution) +\n      Math.sqrt(deltaX * deltaX + deltaY * deltaY) / tileResolution;\n};\n\n\n/**\n * @param {Event} browserEvent Browser event.\n * @param {string=} opt_type Type.\n */\nPluggableMap.prototype.handleBrowserEvent = function(browserEvent, opt_type) {\n  const type = opt_type || browserEvent.type;\n  const mapBrowserEvent = new MapBrowserEvent(type, this, browserEvent);\n  this.handleMapBrowserEvent(mapBrowserEvent);\n};\n\n\n/**\n * @param {module:ol/MapBrowserEvent} mapBrowserEvent The event to handle.\n */\nPluggableMap.prototype.handleMapBrowserEvent = function(mapBrowserEvent) {\n  if (!this.frameState_) {\n    // With no view defined, we cannot translate pixels into geographical\n    // coordinates so interactions cannot be used.\n    return;\n  }\n  this.focus_ = mapBrowserEvent.coordinate;\n  mapBrowserEvent.frameState = this.frameState_;\n  const interactionsArray = this.getInteractions().getArray();\n  if (this.dispatchEvent(mapBrowserEvent) !== false) {\n    for (let i = interactionsArray.length - 1; i >= 0; i--) {\n      const interaction = interactionsArray[i];\n      if (!interaction.getActive()) {\n        continue;\n      }\n      const cont = interaction.handleEvent(mapBrowserEvent);\n      if (!cont) {\n        break;\n      }\n    }\n  }\n};\n\n\n/**\n * @protected\n */\nPluggableMap.prototype.handlePostRender = function() {\n\n  const frameState = this.frameState_;\n\n  // Manage the tile queue\n  // Image loads are expensive and a limited resource, so try to use them\n  // efficiently:\n  // * When the view is static we allow a large number of parallel tile loads\n  //   to complete the frame as quickly as possible.\n  // * When animating or interacting, image loads can cause janks, so we reduce\n  //   the maximum number of loads per frame and limit the number of parallel\n  //   tile loads to remain reactive to view changes and to reduce the chance of\n  //   loading tiles that will quickly disappear from view.\n  const tileQueue = this.tileQueue_;\n  if (!tileQueue.isEmpty()) {\n    let maxTotalLoading = this.maxTilesLoading_;\n    let maxNewLoads = maxTotalLoading;\n    if (frameState) {\n      const hints = frameState.viewHints;\n      if (hints[ViewHint.ANIMATING]) {\n        maxTotalLoading = this.loadTilesWhileAnimating_ ? 8 : 0;\n        maxNewLoads = 2;\n      }\n      if (hints[ViewHint.INTERACTING]) {\n        maxTotalLoading = this.loadTilesWhileInteracting_ ? 8 : 0;\n        maxNewLoads = 2;\n      }\n    }\n    if (tileQueue.getTilesLoading() < maxTotalLoading) {\n      tileQueue.reprioritize(); // FIXME only call if view has changed\n      tileQueue.loadMoreTiles(maxTotalLoading, maxNewLoads);\n    }\n  }\n\n  const postRenderFunctions = this.postRenderFunctions_;\n  for (let i = 0, ii = postRenderFunctions.length; i < ii; ++i) {\n    postRenderFunctions[i](this, frameState);\n  }\n  postRenderFunctions.length = 0;\n};\n\n\n/**\n * @private\n */\nPluggableMap.prototype.handleSizeChanged_ = function() {\n  this.render();\n};\n\n\n/**\n * @private\n */\nPluggableMap.prototype.handleTargetChanged_ = function() {\n  // target may be undefined, null, a string or an Element.\n  // If it's a string we convert it to an Element before proceeding.\n  // If it's not now an Element we remove the viewport from the DOM.\n  // If it's an Element we append the viewport element to it.\n\n  let targetElement;\n  if (this.getTarget()) {\n    targetElement = this.getTargetElement();\n  }\n\n  if (this.keyHandlerKeys_) {\n    for (let i = 0, ii = this.keyHandlerKeys_.length; i < ii; ++i) {\n      unlistenByKey(this.keyHandlerKeys_[i]);\n    }\n    this.keyHandlerKeys_ = null;\n  }\n\n  if (!targetElement) {\n    this.renderer_.removeLayerRenderers();\n    removeNode(this.viewport_);\n    if (this.handleResize_ !== undefined) {\n      removeEventListener(EventType.RESIZE, this.handleResize_, false);\n      this.handleResize_ = undefined;\n    }\n  } else {\n    targetElement.appendChild(this.viewport_);\n\n    const keyboardEventTarget = !this.keyboardEventTarget_ ?\n      targetElement : this.keyboardEventTarget_;\n    this.keyHandlerKeys_ = [\n      listen(keyboardEventTarget, EventType.KEYDOWN, this.handleBrowserEvent, this),\n      listen(keyboardEventTarget, EventType.KEYPRESS, this.handleBrowserEvent, this)\n    ];\n\n    if (!this.handleResize_) {\n      this.handleResize_ = this.updateSize.bind(this);\n      addEventListener(EventType.RESIZE, this.handleResize_, false);\n    }\n  }\n\n  this.updateSize();\n  // updateSize calls setSize, so no need to call this.render\n  // ourselves here.\n};\n\n\n/**\n * @private\n */\nPluggableMap.prototype.handleTileChange_ = function() {\n  this.render();\n};\n\n\n/**\n * @private\n */\nPluggableMap.prototype.handleViewPropertyChanged_ = function() {\n  this.render();\n};\n\n\n/**\n * @private\n */\nPluggableMap.prototype.handleViewChanged_ = function() {\n  if (this.viewPropertyListenerKey_) {\n    unlistenByKey(this.viewPropertyListenerKey_);\n    this.viewPropertyListenerKey_ = null;\n  }\n  if (this.viewChangeListenerKey_) {\n    unlistenByKey(this.viewChangeListenerKey_);\n    this.viewChangeListenerKey_ = null;\n  }\n  const view = this.getView();\n  if (view) {\n    this.viewport_.setAttribute('data-view', getUid(view));\n    this.viewPropertyListenerKey_ = listen(\n      view, ObjectEventType.PROPERTYCHANGE,\n      this.handleViewPropertyChanged_, this);\n    this.viewChangeListenerKey_ = listen(\n      view, EventType.CHANGE,\n      this.handleViewPropertyChanged_, this);\n  }\n  this.render();\n};\n\n\n/**\n * @private\n */\nPluggableMap.prototype.handleLayerGroupChanged_ = function() {\n  if (this.layerGroupPropertyListenerKeys_) {\n    this.layerGroupPropertyListenerKeys_.forEach(unlistenByKey);\n    this.layerGroupPropertyListenerKeys_ = null;\n  }\n  const layerGroup = this.getLayerGroup();\n  if (layerGroup) {\n    this.layerGroupPropertyListenerKeys_ = [\n      listen(\n        layerGroup, ObjectEventType.PROPERTYCHANGE,\n        this.render, this),\n      listen(\n        layerGroup, EventType.CHANGE,\n        this.render, this)\n    ];\n  }\n  this.render();\n};\n\n\n/**\n * @return {boolean} Is rendered.\n */\nPluggableMap.prototype.isRendered = function() {\n  return !!this.frameState_;\n};\n\n\n/**\n * Requests an immediate render in a synchronous manner.\n * @api\n */\nPluggableMap.prototype.renderSync = function() {\n  if (this.animationDelayKey_) {\n    cancelAnimationFrame(this.animationDelayKey_);\n  }\n  this.animationDelay_();\n};\n\n\n/**\n * Request a map rendering (at the next animation frame).\n * @api\n */\nPluggableMap.prototype.render = function() {\n  if (this.animationDelayKey_ === undefined) {\n    this.animationDelayKey_ = requestAnimationFrame(this.animationDelay_);\n  }\n};\n\n\n/**\n * Remove the given control from the map.\n * @param {module:ol/control/Control} control Control.\n * @return {module:ol/control/Control|undefined} The removed control (or undefined\n *     if the control was not found).\n * @api\n */\nPluggableMap.prototype.removeControl = function(control) {\n  return this.getControls().remove(control);\n};\n\n\n/**\n * Remove the given interaction from the map.\n * @param {module:ol/interaction/Interaction} interaction Interaction to remove.\n * @return {module:ol/interaction/Interaction|undefined} The removed interaction (or\n *     undefined if the interaction was not found).\n * @api\n */\nPluggableMap.prototype.removeInteraction = function(interaction) {\n  return this.getInteractions().remove(interaction);\n};\n\n\n/**\n * Removes the given layer from the map.\n * @param {module:ol/layer/Base} layer Layer.\n * @return {module:ol/layer/Base|undefined} The removed layer (or undefined if the\n *     layer was not found).\n * @api\n */\nPluggableMap.prototype.removeLayer = function(layer) {\n  const layers = this.getLayerGroup().getLayers();\n  return layers.remove(layer);\n};\n\n\n/**\n * Remove the given overlay from the map.\n * @param {module:ol/Overlay} overlay Overlay.\n * @return {module:ol/Overlay|undefined} The removed overlay (or undefined\n *     if the overlay was not found).\n * @api\n */\nPluggableMap.prototype.removeOverlay = function(overlay) {\n  return this.getOverlays().remove(overlay);\n};\n\n\n/**\n * @param {number} time Time.\n * @private\n */\nPluggableMap.prototype.renderFrame_ = function(time) {\n  let viewState;\n\n  const size = this.getSize();\n  const view = this.getView();\n  const extent = createEmpty();\n  const previousFrameState = this.frameState_;\n  /** @type {?module:ol/PluggableMap~FrameState} */\n  let frameState = null;\n  if (size !== undefined && hasArea(size) && view && view.isDef()) {\n    const viewHints = view.getHints(this.frameState_ ? this.frameState_.viewHints : undefined);\n    const layerStatesArray = this.getLayerGroup().getLayerStatesArray();\n    const layerStates = {};\n    for (let i = 0, ii = layerStatesArray.length; i < ii; ++i) {\n      layerStates[getUid(layerStatesArray[i].layer)] = layerStatesArray[i];\n    }\n    viewState = view.getState();\n    let focus = this.focus_;\n    if (!focus) {\n      focus = viewState.center;\n      const pixelResolution = viewState.resolution / this.pixelRatio_;\n      focus[0] = Math.round(focus[0] / pixelResolution) * pixelResolution;\n      focus[1] = Math.round(focus[1] / pixelResolution) * pixelResolution;\n    }\n    frameState = /** @type {module:ol/PluggableMap~FrameState} */ ({\n      animate: false,\n      coordinateToPixelTransform: this.coordinateToPixelTransform_,\n      extent: extent,\n      focus: focus,\n      index: this.frameIndex_++,\n      layerStates: layerStates,\n      layerStatesArray: layerStatesArray,\n      pixelRatio: this.pixelRatio_,\n      pixelToCoordinateTransform: this.pixelToCoordinateTransform_,\n      postRenderFunctions: [],\n      size: size,\n      skippedFeatureUids: this.skippedFeatureUids_,\n      tileQueue: this.tileQueue_,\n      time: time,\n      usedTiles: {},\n      viewState: viewState,\n      viewHints: viewHints,\n      wantedTiles: {}\n    });\n  }\n\n  if (frameState) {\n    frameState.extent = getForViewAndSize(viewState.center,\n      viewState.resolution, viewState.rotation, frameState.size, extent);\n  }\n\n  this.frameState_ = frameState;\n  this.renderer_.renderFrame(frameState);\n\n  if (frameState) {\n    if (frameState.animate) {\n      this.render();\n    }\n    Array.prototype.push.apply(this.postRenderFunctions_, frameState.postRenderFunctions);\n\n    if (previousFrameState) {\n      const moveStart = !this.previousExtent_ ||\n                  (!isEmpty(this.previousExtent_) &&\n                  !equals(frameState.extent, this.previousExtent_));\n      if (moveStart) {\n        this.dispatchEvent(\n          new MapEvent(MapEventType.MOVESTART, this, previousFrameState));\n        this.previousExtent_ = createOrUpdateEmpty(this.previousExtent_);\n      }\n    }\n\n    const idle = this.previousExtent_ &&\n        !frameState.viewHints[ViewHint.ANIMATING] &&\n        !frameState.viewHints[ViewHint.INTERACTING] &&\n        !equals(frameState.extent, this.previousExtent_);\n\n    if (idle) {\n      this.dispatchEvent(new MapEvent(MapEventType.MOVEEND, this, frameState));\n      clone(frameState.extent, this.previousExtent_);\n    }\n  }\n\n  this.dispatchEvent(new MapEvent(MapEventType.POSTRENDER, this, frameState));\n\n  setTimeout(this.handlePostRender.bind(this), 0);\n\n};\n\n\n/**\n * Sets the layergroup of this map.\n * @param {module:ol/layer/Group} layerGroup A layer group containing the layers in this map.\n * @observable\n * @api\n */\nPluggableMap.prototype.setLayerGroup = function(layerGroup) {\n  this.set(MapProperty.LAYERGROUP, layerGroup);\n};\n\n\n/**\n * Set the size of this map.\n * @param {module:ol/size~Size|undefined} size The size in pixels of the map in the DOM.\n * @observable\n * @api\n */\nPluggableMap.prototype.setSize = function(size) {\n  this.set(MapProperty.SIZE, size);\n};\n\n\n/**\n * Set the target element to render this map into.\n * @param {Element|string|undefined} target The Element or id of the Element\n *     that the map is rendered in.\n * @observable\n * @api\n */\nPluggableMap.prototype.setTarget = function(target) {\n  this.set(MapProperty.TARGET, target);\n};\n\n\n/**\n * Set the view for this map.\n * @param {module:ol/View} view The view that controls this map.\n * @observable\n * @api\n */\nPluggableMap.prototype.setView = function(view) {\n  this.set(MapProperty.VIEW, view);\n};\n\n\n/**\n * @param {module:ol/Feature} feature Feature.\n */\nPluggableMap.prototype.skipFeature = function(feature) {\n  const featureUid = getUid(feature).toString();\n  this.skippedFeatureUids_[featureUid] = true;\n  this.render();\n};\n\n\n/**\n * Force a recalculation of the map viewport size.  This should be called when\n * third-party code changes the size of the map viewport.\n * @api\n */\nPluggableMap.prototype.updateSize = function() {\n  const targetElement = this.getTargetElement();\n\n  if (!targetElement) {\n    this.setSize(undefined);\n  } else {\n    const computedStyle = getComputedStyle(targetElement);\n    this.setSize([\n      targetElement.offsetWidth -\n          parseFloat(computedStyle['borderLeftWidth']) -\n          parseFloat(computedStyle['paddingLeft']) -\n          parseFloat(computedStyle['paddingRight']) -\n          parseFloat(computedStyle['borderRightWidth']),\n      targetElement.offsetHeight -\n          parseFloat(computedStyle['borderTopWidth']) -\n          parseFloat(computedStyle['paddingTop']) -\n          parseFloat(computedStyle['paddingBottom']) -\n          parseFloat(computedStyle['borderBottomWidth'])\n    ]);\n  }\n};\n\n\n/**\n * @param {module:ol/Feature} feature Feature.\n */\nPluggableMap.prototype.unskipFeature = function(feature) {\n  const featureUid = getUid(feature).toString();\n  delete this.skippedFeatureUids_[featureUid];\n  this.render();\n};\n\n\n/**\n * @param {MapOptions} options Map options.\n * @return {module:ol/PluggableMap~MapOptionsInternal} Internal map options.\n */\nfunction createOptionsInternal(options) {\n\n  /**\n   * @type {Element|Document}\n   */\n  let keyboardEventTarget = null;\n  if (options.keyboardEventTarget !== undefined) {\n    keyboardEventTarget = typeof options.keyboardEventTarget === 'string' ?\n      document.getElementById(options.keyboardEventTarget) :\n      options.keyboardEventTarget;\n  }\n\n  /**\n   * @type {Object.<string, *>}\n   */\n  const values = {};\n\n  const layerGroup = (options.layers instanceof LayerGroup) ?\n    options.layers : new LayerGroup({layers: options.layers});\n  values[MapProperty.LAYERGROUP] = layerGroup;\n\n  values[MapProperty.TARGET] = options.target;\n\n  values[MapProperty.VIEW] = options.view !== undefined ?\n    options.view : new View();\n\n  let controls;\n  if (options.controls !== undefined) {\n    if (Array.isArray(options.controls)) {\n      controls = new Collection(options.controls.slice());\n    } else {\n      assert(options.controls instanceof Collection,\n        47); // Expected `controls` to be an array or an `module:ol/Collection~Collection`\n      controls = options.controls;\n    }\n  }\n\n  let interactions;\n  if (options.interactions !== undefined) {\n    if (Array.isArray(options.interactions)) {\n      interactions = new Collection(options.interactions.slice());\n    } else {\n      assert(options.interactions instanceof Collection,\n        48); // Expected `interactions` to be an array or an `module:ol/Collection~Collection`\n      interactions = options.interactions;\n    }\n  }\n\n  let overlays;\n  if (options.overlays !== undefined) {\n    if (Array.isArray(options.overlays)) {\n      overlays = new Collection(options.overlays.slice());\n    } else {\n      assert(options.overlays instanceof Collection,\n        49); // Expected `overlays` to be an array or an `module:ol/Collection~Collection`\n      overlays = options.overlays;\n    }\n  } else {\n    overlays = new Collection();\n  }\n\n  return {\n    controls: controls,\n    interactions: interactions,\n    keyboardEventTarget: keyboardEventTarget,\n    overlays: overlays,\n    values: values\n  };\n\n}\nexport default PluggableMap;\n","/**\n * @module ol/format/TopoJSON\n */\nimport {inherits} from '../util.js';\nimport Feature from '../Feature.js';\nimport {transformWithOptions} from '../format/Feature.js';\nimport JSONFeature from '../format/JSONFeature.js';\nimport LineString from '../geom/LineString.js';\nimport MultiLineString from '../geom/MultiLineString.js';\nimport MultiPoint from '../geom/MultiPoint.js';\nimport MultiPolygon from '../geom/MultiPolygon.js';\nimport Point from '../geom/Point.js';\nimport Polygon from '../geom/Polygon.js';\nimport {get as getProjection} from '../proj.js';\n\n\n/**\n * @typedef {Object} Options\n * @property {module:ol/proj~ProjectionLike} [dataProjection='EPSG:4326'] Default data projection.\n * @property {string} [layerName] Set the name of the TopoJSON topology\n * `objects`'s children as feature property with the specified name. This means\n * that when set to `'layer'`, a topology like\n * ```\n * {\n *   \"type\": \"Topology\",\n *   \"objects\": {\n *     \"example\": {\n *       \"type\": \"GeometryCollection\",\n *       \"geometries\": []\n *     }\n *   }\n * }\n * ```\n * will result in features that have a property `'layer'` set to `'example'`.\n * When not set, no property will be added to features.\n * @property {Array.<string>} [layers] Names of the TopoJSON topology's\n * `objects`'s children to read features from.  If not provided, features will\n * be read from all children.\n */\n\n\n/**\n * @classdesc\n * Feature format for reading data in the TopoJSON format.\n *\n * @constructor\n * @extends {module:ol/format/JSONFeature}\n * @param {module:ol/format/TopoJSON~Options=} opt_options Options.\n * @api\n */\nconst TopoJSON = function(opt_options) {\n\n  const options = opt_options ? opt_options : {};\n\n  JSONFeature.call(this);\n\n  /**\n   * @private\n   * @type {string|undefined}\n   */\n  this.layerName_ = options.layerName;\n\n  /**\n   * @private\n   * @type {Array.<string>}\n   */\n  this.layers_ = options.layers ? options.layers : null;\n\n  /**\n   * @inheritDoc\n   */\n  this.dataProjection = getProjection(\n    options.dataProjection ?\n      options.dataProjection : 'EPSG:4326');\n\n};\n\ninherits(TopoJSON, JSONFeature);\n\n\n/**\n * @const\n * @type {Object.<string, function(TopoJSONGeometry, Array, ...Array): module:ol/geom/Geometry>}\n */\nconst GEOMETRY_READERS = {\n  'Point': readPointGeometry,\n  'LineString': readLineStringGeometry,\n  'Polygon': readPolygonGeometry,\n  'MultiPoint': readMultiPointGeometry,\n  'MultiLineString': readMultiLineStringGeometry,\n  'MultiPolygon': readMultiPolygonGeometry\n};\n\n\n/**\n * Concatenate arcs into a coordinate array.\n * @param {Array.<number>} indices Indices of arcs to concatenate.  Negative\n *     values indicate arcs need to be reversed.\n * @param {Array.<Array.<module:ol/coordinate~Coordinate>>} arcs Array of arcs (already\n *     transformed).\n * @return {Array.<module:ol/coordinate~Coordinate>} Coordinates array.\n */\nfunction concatenateArcs(indices, arcs) {\n  /** @type {Array.<module:ol/coordinate~Coordinate>} */\n  const coordinates = [];\n  let index, arc;\n  for (let i = 0, ii = indices.length; i < ii; ++i) {\n    index = indices[i];\n    if (i > 0) {\n      // splicing together arcs, discard last point\n      coordinates.pop();\n    }\n    if (index >= 0) {\n      // forward arc\n      arc = arcs[index];\n    } else {\n      // reverse arc\n      arc = arcs[~index].slice().reverse();\n    }\n    coordinates.push.apply(coordinates, arc);\n  }\n  // provide fresh copies of coordinate arrays\n  for (let j = 0, jj = coordinates.length; j < jj; ++j) {\n    coordinates[j] = coordinates[j].slice();\n  }\n  return coordinates;\n}\n\n\n/**\n * Create a point from a TopoJSON geometry object.\n *\n * @param {TopoJSONGeometry} object TopoJSON object.\n * @param {Array.<number>} scale Scale for each dimension.\n * @param {Array.<number>} translate Translation for each dimension.\n * @return {module:ol/geom/Point} Geometry.\n */\nfunction readPointGeometry(object, scale, translate) {\n  const coordinates = object.coordinates;\n  if (scale && translate) {\n    transformVertex(coordinates, scale, translate);\n  }\n  return new Point(coordinates);\n}\n\n\n/**\n * Create a multi-point from a TopoJSON geometry object.\n *\n * @param {TopoJSONGeometry} object TopoJSON object.\n * @param {Array.<number>} scale Scale for each dimension.\n * @param {Array.<number>} translate Translation for each dimension.\n * @return {module:ol/geom/MultiPoint} Geometry.\n */\nfunction readMultiPointGeometry(object, scale, translate) {\n  const coordinates = object.coordinates;\n  if (scale && translate) {\n    for (let i = 0, ii = coordinates.length; i < ii; ++i) {\n      transformVertex(coordinates[i], scale, translate);\n    }\n  }\n  return new MultiPoint(coordinates);\n}\n\n\n/**\n * Create a linestring from a TopoJSON geometry object.\n *\n * @param {TopoJSONGeometry} object TopoJSON object.\n * @param {Array.<Array.<module:ol/coordinate~Coordinate>>} arcs Array of arcs.\n * @return {module:ol/geom/LineString} Geometry.\n */\nfunction readLineStringGeometry(object, arcs) {\n  const coordinates = concatenateArcs(object.arcs, arcs);\n  return new LineString(coordinates);\n}\n\n\n/**\n * Create a multi-linestring from a TopoJSON geometry object.\n *\n * @param {TopoJSONGeometry} object TopoJSON object.\n * @param {Array.<Array.<module:ol/coordinate~Coordinate>>} arcs Array of arcs.\n * @return {module:ol/geom/MultiLineString} Geometry.\n */\nfunction readMultiLineStringGeometry(object, arcs) {\n  const coordinates = [];\n  for (let i = 0, ii = object.arcs.length; i < ii; ++i) {\n    coordinates[i] = concatenateArcs(object.arcs[i], arcs);\n  }\n  return new MultiLineString(coordinates);\n}\n\n\n/**\n * Create a polygon from a TopoJSON geometry object.\n *\n * @param {TopoJSONGeometry} object TopoJSON object.\n * @param {Array.<Array.<module:ol/coordinate~Coordinate>>} arcs Array of arcs.\n * @return {module:ol/geom/Polygon} Geometry.\n */\nfunction readPolygonGeometry(object, arcs) {\n  const coordinates = [];\n  for (let i = 0, ii = object.arcs.length; i < ii; ++i) {\n    coordinates[i] = concatenateArcs(object.arcs[i], arcs);\n  }\n  return new Polygon(coordinates);\n}\n\n\n/**\n * Create a multi-polygon from a TopoJSON geometry object.\n *\n * @param {TopoJSONGeometry} object TopoJSON object.\n * @param {Array.<Array.<module:ol/coordinate~Coordinate>>} arcs Array of arcs.\n * @return {module:ol/geom/MultiPolygon} Geometry.\n */\nfunction readMultiPolygonGeometry(object, arcs) {\n  const coordinates = [];\n  for (let i = 0, ii = object.arcs.length; i < ii; ++i) {\n    // for each polygon\n    const polyArray = object.arcs[i];\n    const ringCoords = [];\n    for (let j = 0, jj = polyArray.length; j < jj; ++j) {\n      // for each ring\n      ringCoords[j] = concatenateArcs(polyArray[j], arcs);\n    }\n    coordinates[i] = ringCoords;\n  }\n  return new MultiPolygon(coordinates);\n}\n\n\n/**\n * Create features from a TopoJSON GeometryCollection object.\n *\n * @param {TopoJSONGeometryCollection} collection TopoJSON Geometry\n *     object.\n * @param {Array.<Array.<module:ol/coordinate~Coordinate>>} arcs Array of arcs.\n * @param {Array.<number>} scale Scale for each dimension.\n * @param {Array.<number>} translate Translation for each dimension.\n * @param {string|undefined} property Property to set the `GeometryCollection`'s parent\n *     object to.\n * @param {string} name Name of the `Topology`'s child object.\n * @param {module:ol/format/Feature~ReadOptions=} opt_options Read options.\n * @return {Array.<module:ol/Feature>} Array of features.\n */\nfunction readFeaturesFromGeometryCollection(collection, arcs, scale, translate, property, name, opt_options) {\n  const geometries = collection.geometries;\n  const features = [];\n  for (let i = 0, ii = geometries.length; i < ii; ++i) {\n    features[i] = readFeatureFromGeometry(\n      geometries[i], arcs, scale, translate, property, name, opt_options);\n  }\n  return features;\n}\n\n\n/**\n * Create a feature from a TopoJSON geometry object.\n *\n * @param {TopoJSONGeometry} object TopoJSON geometry object.\n * @param {Array.<Array.<module:ol/coordinate~Coordinate>>} arcs Array of arcs.\n * @param {Array.<number>} scale Scale for each dimension.\n * @param {Array.<number>} translate Translation for each dimension.\n * @param {string|undefined} property Property to set the `GeometryCollection`'s parent\n *     object to.\n * @param {string} name Name of the `Topology`'s child object.\n * @param {module:ol/format/Feature~ReadOptions=} opt_options Read options.\n * @return {module:ol/Feature} Feature.\n */\nfunction readFeatureFromGeometry(object, arcs, scale, translate, property, name, opt_options) {\n  let geometry;\n  const type = object.type;\n  const geometryReader = GEOMETRY_READERS[type];\n  if ((type === 'Point') || (type === 'MultiPoint')) {\n    geometry = geometryReader(object, scale, translate);\n  } else {\n    geometry = geometryReader(object, arcs);\n  }\n  const feature = new Feature();\n  feature.setGeometry(/** @type {module:ol/geom/Geometry} */ (\n    transformWithOptions(geometry, false, opt_options)));\n  if (object.id !== undefined) {\n    feature.setId(object.id);\n  }\n  let properties = object.properties;\n  if (property) {\n    if (!properties) {\n      properties = {};\n    }\n    properties[property] = name;\n  }\n  if (properties) {\n    feature.setProperties(properties);\n  }\n  return feature;\n}\n\n\n/**\n * Read all features from a TopoJSON source.\n *\n * @function\n * @param {Document|Node|Object|string} source Source.\n * @return {Array.<module:ol/Feature>} Features.\n * @api\n */\nTopoJSON.prototype.readFeatures;\n\n\n/**\n * @inheritDoc\n */\nTopoJSON.prototype.readFeaturesFromObject = function(object, opt_options) {\n  if (object.type == 'Topology') {\n    const topoJSONTopology = /** @type {TopoJSONTopology} */ (object);\n    let transform, scale = null, translate = null;\n    if (topoJSONTopology.transform) {\n      transform = topoJSONTopology.transform;\n      scale = transform.scale;\n      translate = transform.translate;\n    }\n    const arcs = topoJSONTopology.arcs;\n    if (transform) {\n      transformArcs(arcs, scale, translate);\n    }\n    /** @type {Array.<module:ol/Feature>} */\n    const features = [];\n    const topoJSONFeatures = topoJSONTopology.objects;\n    const property = this.layerName_;\n    let feature;\n    for (const objectName in topoJSONFeatures) {\n      if (this.layers_ && this.layers_.indexOf(objectName) == -1) {\n        continue;\n      }\n      if (topoJSONFeatures[objectName].type === 'GeometryCollection') {\n        feature = /** @type {TopoJSONGeometryCollection} */ (topoJSONFeatures[objectName]);\n        features.push.apply(features, readFeaturesFromGeometryCollection(\n          feature, arcs, scale, translate, property, objectName, opt_options));\n      } else {\n        feature = /** @type {TopoJSONGeometry} */ (topoJSONFeatures[objectName]);\n        features.push(readFeatureFromGeometry(\n          feature, arcs, scale, translate, property, objectName, opt_options));\n      }\n    }\n    return features;\n  } else {\n    return [];\n  }\n};\n\n\n/**\n * Apply a linear transform to array of arcs.  The provided array of arcs is\n * modified in place.\n *\n * @param {Array.<Array.<module:ol/coordinate~Coordinate>>} arcs Array of arcs.\n * @param {Array.<number>} scale Scale for each dimension.\n * @param {Array.<number>} translate Translation for each dimension.\n */\nfunction transformArcs(arcs, scale, translate) {\n  for (let i = 0, ii = arcs.length; i < ii; ++i) {\n    transformArc(arcs[i], scale, translate);\n  }\n}\n\n\n/**\n * Apply a linear transform to an arc.  The provided arc is modified in place.\n *\n * @param {Array.<module:ol/coordinate~Coordinate>} arc Arc.\n * @param {Array.<number>} scale Scale for each dimension.\n * @param {Array.<number>} translate Translation for each dimension.\n */\nfunction transformArc(arc, scale, translate) {\n  let x = 0;\n  let y = 0;\n  for (let i = 0, ii = arc.length; i < ii; ++i) {\n    const vertex = arc[i];\n    x += vertex[0];\n    y += vertex[1];\n    vertex[0] = x;\n    vertex[1] = y;\n    transformVertex(vertex, scale, translate);\n  }\n}\n\n\n/**\n * Apply a linear transform to a vertex.  The provided vertex is modified in\n * place.\n *\n * @param {module:ol/coordinate~Coordinate} vertex Vertex.\n * @param {Array.<number>} scale Scale for each dimension.\n * @param {Array.<number>} translate Translation for each dimension.\n */\nfunction transformVertex(vertex, scale, translate) {\n  vertex[0] = vertex[0] * scale[0] + translate[0];\n  vertex[1] = vertex[1] * scale[1] + translate[1];\n}\n\n\n/**\n * Read the projection from a TopoJSON source.\n *\n * @param {Document|Node|Object|string} object Source.\n * @return {module:ol/proj/Projection} Projection.\n * @override\n * @api\n */\nTopoJSON.prototype.readProjection;\n\n\n/**\n * @inheritDoc\n */\nTopoJSON.prototype.readProjectionFromObject = function(object) {\n  return this.dataProjection;\n};\n\n\n/**\n * Not implemented.\n * @inheritDoc\n */\nTopoJSON.prototype.writeFeatureObject = function(feature, opt_options) {};\n\n\n/**\n * Not implemented.\n * @inheritDoc\n */\nTopoJSON.prototype.writeFeaturesObject = function(features, opt_options) {};\n\n\n/**\n * Not implemented.\n * @inheritDoc\n */\nTopoJSON.prototype.writeGeometryObject = function(geometry, opt_options) {};\n\n\n/**\n * Not implemented.\n * @override\n */\nTopoJSON.prototype.readGeometryFromObject = function() {};\n\n\n/**\n * Not implemented.\n * @override\n */\nTopoJSON.prototype.readFeatureFromObject = function() {};\nexport default TopoJSON;\n","/**\n * @module ol/style/Image\n */\n\n\n/**\n * @typedef {Object} Options\n * @property {number} opacity\n * @property {boolean} rotateWithView\n * @property {number} rotation\n * @property {number} scale\n * @property {boolean} snapToPixel\n */\n\n\n/**\n * @classdesc\n * A base class used for creating subclasses and not instantiated in\n * apps. Base class for {@link module:ol/style/Icon~Icon}, {@link module:ol/style/Circle~CircleStyle} and\n * {@link module:ol/style/RegularShape~RegularShape}.\n *\n * @constructor\n * @abstract\n * @param {module:ol/style/Image~Options} options Options.\n * @api\n */\nconst ImageStyle = function(options) {\n\n  /**\n   * @private\n   * @type {number}\n   */\n  this.opacity_ = options.opacity;\n\n  /**\n   * @private\n   * @type {boolean}\n   */\n  this.rotateWithView_ = options.rotateWithView;\n\n  /**\n   * @private\n   * @type {number}\n   */\n  this.rotation_ = options.rotation;\n\n  /**\n   * @private\n   * @type {number}\n   */\n  this.scale_ = options.scale;\n\n  /**\n   * @private\n   * @type {boolean}\n   */\n  this.snapToPixel_ = options.snapToPixel;\n\n};\n\n\n/**\n * Get the symbolizer opacity.\n * @return {number} Opacity.\n * @api\n */\nImageStyle.prototype.getOpacity = function() {\n  return this.opacity_;\n};\n\n\n/**\n * Determine whether the symbolizer rotates with the map.\n * @return {boolean} Rotate with map.\n * @api\n */\nImageStyle.prototype.getRotateWithView = function() {\n  return this.rotateWithView_;\n};\n\n\n/**\n * Get the symoblizer rotation.\n * @return {number} Rotation.\n * @api\n */\nImageStyle.prototype.getRotation = function() {\n  return this.rotation_;\n};\n\n\n/**\n * Get the symbolizer scale.\n * @return {number} Scale.\n * @api\n */\nImageStyle.prototype.getScale = function() {\n  return this.scale_;\n};\n\n\n/**\n * Determine whether the symbolizer should be snapped to a pixel.\n * @return {boolean} The symbolizer should snap to a pixel.\n * @api\n */\nImageStyle.prototype.getSnapToPixel = function() {\n  return this.snapToPixel_;\n};\n\n\n/**\n * Get the anchor point in pixels. The anchor determines the center point for the\n * symbolizer.\n * @abstract\n * @return {Array.<number>} Anchor.\n */\nImageStyle.prototype.getAnchor = function() {};\n\n\n/**\n * Get the image element for the symbolizer.\n * @abstract\n * @param {number} pixelRatio Pixel ratio.\n * @return {HTMLCanvasElement|HTMLVideoElement|Image} Image element.\n */\nImageStyle.prototype.getImage = function(pixelRatio) {};\n\n\n/**\n * @abstract\n * @param {number} pixelRatio Pixel ratio.\n * @return {HTMLCanvasElement|HTMLVideoElement|Image} Image element.\n */\nImageStyle.prototype.getHitDetectionImage = function(pixelRatio) {};\n\n\n/**\n * @abstract\n * @return {module:ol/ImageState} Image state.\n */\nImageStyle.prototype.getImageState = function() {};\n\n\n/**\n * @abstract\n * @return {module:ol/size~Size} Image size.\n */\nImageStyle.prototype.getImageSize = function() {};\n\n\n/**\n * @abstract\n * @return {module:ol/size~Size} Size of the hit-detection image.\n */\nImageStyle.prototype.getHitDetectionImageSize = function() {};\n\n\n/**\n * Get the origin of the symbolizer.\n * @abstract\n * @return {Array.<number>} Origin.\n */\nImageStyle.prototype.getOrigin = function() {};\n\n\n/**\n * Get the size of the symbolizer (in pixels).\n * @abstract\n * @return {module:ol/size~Size} Size.\n */\nImageStyle.prototype.getSize = function() {};\n\n\n/**\n * Set the opacity.\n *\n * @param {number} opacity Opacity.\n * @api\n */\nImageStyle.prototype.setOpacity = function(opacity) {\n  this.opacity_ = opacity;\n};\n\n\n/**\n * Set whether to rotate the style with the view.\n *\n * @param {boolean} rotateWithView Rotate with map.\n * @api\n */\nImageStyle.prototype.setRotateWithView = function(rotateWithView) {\n  this.rotateWithView_ = rotateWithView;\n};\n\n\n/**\n * Set the rotation.\n *\n * @param {number} rotation Rotation.\n * @api\n */\nImageStyle.prototype.setRotation = function(rotation) {\n  this.rotation_ = rotation;\n};\n\n\n/**\n * Set the scale.\n *\n * @param {number} scale Scale.\n * @api\n */\nImageStyle.prototype.setScale = function(scale) {\n  this.scale_ = scale;\n};\n\n\n/**\n * Set whether to snap the image to the closest pixel.\n *\n * @param {boolean} snapToPixel Snap to pixel?\n * @api\n */\nImageStyle.prototype.setSnapToPixel = function(snapToPixel) {\n  this.snapToPixel_ = snapToPixel;\n};\n\n\n/**\n * @abstract\n * @param {function(this: T, module:ol/events/Event)} listener Listener function.\n * @param {T} thisArg Value to use as `this` when executing `listener`.\n * @return {module:ol/events~EventsKey|undefined} Listener key.\n * @template T\n */\nImageStyle.prototype.listenImageChange = function(listener, thisArg) {};\n\n\n/**\n * Load not yet loaded URI.\n * @abstract\n */\nImageStyle.prototype.load = function() {};\n\n\n/**\n * @abstract\n * @param {function(this: T, module:ol/events/Event)} listener Listener function.\n * @param {T} thisArg Value to use as `this` when executing `listener`.\n * @template T\n */\nImageStyle.prototype.unlistenImageChange = function(listener, thisArg) {};\nexport default ImageStyle;\n","/**\n * @module ol/ImageTile\n */\nimport {inherits} from './util.js';\nimport Tile from './Tile.js';\nimport TileState from './TileState.js';\nimport {createCanvasContext2D} from './dom.js';\nimport {listenOnce, unlistenByKey} from './events.js';\nimport EventType from './events/EventType.js';\n\n/**\n * @typedef {function(new: module:ol/ImageTile, module:ol/tilecoord~TileCoord,\n * module:ol/TileState, string, ?string, module:ol/Tile~LoadFunction)} TileClass\n * @api\n */\n\n/**\n * @constructor\n * @extends {module:ol/Tile}\n * @param {module:ol/tilecoord~TileCoord} tileCoord Tile coordinate.\n * @param {module:ol/TileState} state State.\n * @param {string} src Image source URI.\n * @param {?string} crossOrigin Cross origin.\n * @param {module:ol/Tile~LoadFunction} tileLoadFunction Tile load function.\n * @param {module:ol/Tile~Options=} opt_options Tile options.\n */\nconst ImageTile = function(tileCoord, state, src, crossOrigin, tileLoadFunction, opt_options) {\n\n  Tile.call(this, tileCoord, state, opt_options);\n\n  /**\n   * @private\n   * @type {?string}\n   */\n  this.crossOrigin_ = crossOrigin;\n\n  /**\n   * Image URI\n   *\n   * @private\n   * @type {string}\n   */\n  this.src_ = src;\n\n  /**\n   * @private\n   * @type {Image|HTMLCanvasElement}\n   */\n  this.image_ = new Image();\n  if (crossOrigin !== null) {\n    this.image_.crossOrigin = crossOrigin;\n  }\n\n  /**\n   * @private\n   * @type {Array.<module:ol/events~EventsKey>}\n   */\n  this.imageListenerKeys_ = null;\n\n  /**\n   * @private\n   * @type {module:ol/Tile~LoadFunction}\n   */\n  this.tileLoadFunction_ = tileLoadFunction;\n\n};\n\ninherits(ImageTile, Tile);\n\n\n/**\n * @inheritDoc\n */\nImageTile.prototype.disposeInternal = function() {\n  if (this.state == TileState.LOADING) {\n    this.unlistenImage_();\n    this.image_ = getBlankImage();\n  }\n  if (this.interimTile) {\n    this.interimTile.dispose();\n  }\n  this.state = TileState.ABORT;\n  this.changed();\n  Tile.prototype.disposeInternal.call(this);\n};\n\n\n/**\n * Get the HTML image element for this tile (may be a Canvas, Image, or Video).\n * @return {HTMLCanvasElement|HTMLImageElement|HTMLVideoElement} Image.\n * @api\n */\nImageTile.prototype.getImage = function() {\n  return this.image_;\n};\n\n\n/**\n * @inheritDoc\n */\nImageTile.prototype.getKey = function() {\n  return this.src_;\n};\n\n\n/**\n * Tracks loading or read errors.\n *\n * @private\n */\nImageTile.prototype.handleImageError_ = function() {\n  this.state = TileState.ERROR;\n  this.unlistenImage_();\n  this.image_ = getBlankImage();\n  this.changed();\n};\n\n\n/**\n * Tracks successful image load.\n *\n * @private\n */\nImageTile.prototype.handleImageLoad_ = function() {\n  if (this.image_.naturalWidth && this.image_.naturalHeight) {\n    this.state = TileState.LOADED;\n  } else {\n    this.state = TileState.EMPTY;\n  }\n  this.unlistenImage_();\n  this.changed();\n};\n\n\n/**\n * @inheritDoc\n * @api\n */\nImageTile.prototype.load = function() {\n  if (this.state == TileState.ERROR) {\n    this.state = TileState.IDLE;\n    this.image_ = new Image();\n    if (this.crossOrigin_ !== null) {\n      this.image_.crossOrigin = this.crossOrigin_;\n    }\n  }\n  if (this.state == TileState.IDLE) {\n    this.state = TileState.LOADING;\n    this.changed();\n    this.imageListenerKeys_ = [\n      listenOnce(this.image_, EventType.ERROR,\n        this.handleImageError_, this),\n      listenOnce(this.image_, EventType.LOAD,\n        this.handleImageLoad_, this)\n    ];\n    this.tileLoadFunction_(this, this.src_);\n  }\n};\n\n\n/**\n * Discards event handlers which listen for load completion or errors.\n *\n * @private\n */\nImageTile.prototype.unlistenImage_ = function() {\n  this.imageListenerKeys_.forEach(unlistenByKey);\n  this.imageListenerKeys_ = null;\n};\n\n\n/**\n * Get a 1-pixel blank image.\n * @return {HTMLCanvasElement} Blank image.\n */\nfunction getBlankImage() {\n  const ctx = createCanvasContext2D(1, 1);\n  ctx.fillStyle = 'rgba(0,0,0,0)';\n  ctx.fillRect(0, 0, 1, 1);\n  return ctx.canvas;\n}\n\nexport default ImageTile;\n","/**\n * @module ol/render/ReplayGroup\n */\n/**\n * Base class for replay groups.\n * @constructor\n * @abstract\n */\nconst ReplayGroup = function() {};\n\n\n/**\n * @abstract\n * @param {number|undefined} zIndex Z index.\n * @param {module:ol/render/ReplayType} replayType Replay type.\n * @return {module:ol/render/VectorContext} Replay.\n */\nReplayGroup.prototype.getReplay = function(zIndex, replayType) {};\n\n\n/**\n * @abstract\n * @return {boolean} Is empty.\n */\nReplayGroup.prototype.isEmpty = function() {};\nexport default ReplayGroup;\n","/**\n * @module ol/renderer/Layer\n */\nimport {getUid, inherits} from '../util.js';\nimport ImageState from '../ImageState.js';\nimport Observable from '../Observable.js';\nimport TileState from '../TileState.js';\nimport {listen} from '../events.js';\nimport EventType from '../events/EventType.js';\nimport {FALSE, UNDEFINED} from '../functions.js';\nimport SourceState from '../source/State.js';\n\n/**\n * @constructor\n * @extends {module:ol/Observable}\n * @param {module:ol/layer/Layer} layer Layer.\n * @struct\n */\nconst LayerRenderer = function(layer) {\n\n  Observable.call(this);\n\n  /**\n   * @private\n   * @type {module:ol/layer/Layer}\n   */\n  this.layer_ = layer;\n\n\n};\n\ninherits(LayerRenderer, Observable);\n\n\n/**\n * @param {module:ol/coordinate~Coordinate} coordinate Coordinate.\n * @param {module:ol/PluggableMap~FrameState} frameState Frame state.\n * @param {number} hitTolerance Hit tolerance in pixels.\n * @param {function(this: S, (module:ol/Feature|module:ol/render/Feature), module:ol/layer/Layer): T}\n *     callback Feature callback.\n * @param {S} thisArg Value to use as `this` when executing `callback`.\n * @return {T|undefined} Callback result.\n * @template S,T\n */\nLayerRenderer.prototype.forEachFeatureAtCoordinate = UNDEFINED;\n\n\n/**\n * @param {module:ol/coordinate~Coordinate} coordinate Coordinate.\n * @param {module:ol/PluggableMap~FrameState} frameState Frame state.\n * @return {boolean} Is there a feature at the given coordinate?\n */\nLayerRenderer.prototype.hasFeatureAtCoordinate = FALSE;\n\n\n/**\n * Create a function that adds loaded tiles to the tile lookup.\n * @param {module:ol/source/Tile} source Tile source.\n * @param {module:ol/proj/Projection} projection Projection of the tiles.\n * @param {Object.<number, Object.<string, module:ol/Tile>>} tiles Lookup of loaded tiles by zoom level.\n * @return {function(number, module:ol/TileRange):boolean} A function that can be\n *     called with a zoom level and a tile range to add loaded tiles to the lookup.\n * @protected\n */\nLayerRenderer.prototype.createLoadedTileFinder = function(source, projection, tiles) {\n  return (\n    /**\n     * @param {number} zoom Zoom level.\n     * @param {module:ol/TileRange} tileRange Tile range.\n     * @return {boolean} The tile range is fully loaded.\n     */\n    function(zoom, tileRange) {\n      function callback(tile) {\n        if (!tiles[zoom]) {\n          tiles[zoom] = {};\n        }\n        tiles[zoom][tile.tileCoord.toString()] = tile;\n      }\n      return source.forEachLoadedTile(projection, zoom, tileRange, callback);\n    }\n  );\n};\n\n\n/**\n * @return {module:ol/layer/Layer} Layer.\n */\nLayerRenderer.prototype.getLayer = function() {\n  return this.layer_;\n};\n\n\n/**\n * Handle changes in image state.\n * @param {module:ol/events/Event} event Image change event.\n * @private\n */\nLayerRenderer.prototype.handleImageChange_ = function(event) {\n  const image = /** @type {module:ol/Image} */ (event.target);\n  if (image.getState() === ImageState.LOADED) {\n    this.renderIfReadyAndVisible();\n  }\n};\n\n\n/**\n * Load the image if not already loaded, and register the image change\n * listener if needed.\n * @param {module:ol/ImageBase} image Image.\n * @return {boolean} `true` if the image is already loaded, `false` otherwise.\n * @protected\n */\nLayerRenderer.prototype.loadImage = function(image) {\n  let imageState = image.getState();\n  if (imageState != ImageState.LOADED && imageState != ImageState.ERROR) {\n    listen(image, EventType.CHANGE, this.handleImageChange_, this);\n  }\n  if (imageState == ImageState.IDLE) {\n    image.load();\n    imageState = image.getState();\n  }\n  return imageState == ImageState.LOADED;\n};\n\n\n/**\n * @protected\n */\nLayerRenderer.prototype.renderIfReadyAndVisible = function() {\n  const layer = this.getLayer();\n  if (layer.getVisible() && layer.getSourceState() == SourceState.READY) {\n    this.changed();\n  }\n};\n\n\n/**\n * @param {module:ol/PluggableMap~FrameState} frameState Frame state.\n * @param {module:ol/source/Tile} tileSource Tile source.\n * @protected\n */\nLayerRenderer.prototype.scheduleExpireCache = function(frameState, tileSource) {\n  if (tileSource.canExpireCache()) {\n    /**\n     * @param {module:ol/source/Tile} tileSource Tile source.\n     * @param {module:ol/PluggableMap} map Map.\n     * @param {module:ol/PluggableMap~FrameState} frameState Frame state.\n     */\n    const postRenderFunction = function(tileSource, map, frameState) {\n      const tileSourceKey = getUid(tileSource).toString();\n      if (tileSourceKey in frameState.usedTiles) {\n        tileSource.expireCache(frameState.viewState.projection,\n          frameState.usedTiles[tileSourceKey]);\n      }\n    }.bind(null, tileSource);\n\n    frameState.postRenderFunctions.push(\n      /** @type {module:ol/PluggableMap~PostRenderFunction} */ (postRenderFunction)\n    );\n  }\n};\n\n\n/**\n * @param {!Object.<string, !Object.<string, module:ol/TileRange>>} usedTiles Used tiles.\n * @param {module:ol/source/Tile} tileSource Tile source.\n * @param {number} z Z.\n * @param {module:ol/TileRange} tileRange Tile range.\n * @protected\n */\nLayerRenderer.prototype.updateUsedTiles = function(usedTiles, tileSource, z, tileRange) {\n  // FIXME should we use tilesToDrawByZ instead?\n  const tileSourceKey = getUid(tileSource).toString();\n  const zKey = z.toString();\n  if (tileSourceKey in usedTiles) {\n    if (zKey in usedTiles[tileSourceKey]) {\n      usedTiles[tileSourceKey][zKey].extend(tileRange);\n    } else {\n      usedTiles[tileSourceKey][zKey] = tileRange;\n    }\n  } else {\n    usedTiles[tileSourceKey] = {};\n    usedTiles[tileSourceKey][zKey] = tileRange;\n  }\n};\n\n\n/**\n * Manage tile pyramid.\n * This function performs a number of functions related to the tiles at the\n * current zoom and lower zoom levels:\n * - registers idle tiles in frameState.wantedTiles so that they are not\n *   discarded by the tile queue\n * - enqueues missing tiles\n * @param {module:ol/PluggableMap~FrameState} frameState Frame state.\n * @param {module:ol/source/Tile} tileSource Tile source.\n * @param {module:ol/tilegrid/TileGrid} tileGrid Tile grid.\n * @param {number} pixelRatio Pixel ratio.\n * @param {module:ol/proj/Projection} projection Projection.\n * @param {module:ol/extent~Extent} extent Extent.\n * @param {number} currentZ Current Z.\n * @param {number} preload Load low resolution tiles up to 'preload' levels.\n * @param {function(this: T, module:ol/Tile)=} opt_tileCallback Tile callback.\n * @param {T=} opt_this Object to use as `this` in `opt_tileCallback`.\n * @protected\n * @template T\n */\nLayerRenderer.prototype.manageTilePyramid = function(\n  frameState, tileSource, tileGrid, pixelRatio, projection, extent,\n  currentZ, preload, opt_tileCallback, opt_this) {\n  const tileSourceKey = getUid(tileSource).toString();\n  if (!(tileSourceKey in frameState.wantedTiles)) {\n    frameState.wantedTiles[tileSourceKey] = {};\n  }\n  const wantedTiles = frameState.wantedTiles[tileSourceKey];\n  const tileQueue = frameState.tileQueue;\n  const minZoom = tileGrid.getMinZoom();\n  let tile, tileRange, tileResolution, x, y, z;\n  for (z = minZoom; z <= currentZ; ++z) {\n    tileRange = tileGrid.getTileRangeForExtentAndZ(extent, z, tileRange);\n    tileResolution = tileGrid.getResolution(z);\n    for (x = tileRange.minX; x <= tileRange.maxX; ++x) {\n      for (y = tileRange.minY; y <= tileRange.maxY; ++y) {\n        if (currentZ - z <= preload) {\n          tile = tileSource.getTile(z, x, y, pixelRatio, projection);\n          if (tile.getState() == TileState.IDLE) {\n            wantedTiles[tile.getKey()] = true;\n            if (!tileQueue.isKeyQueued(tile.getKey())) {\n              tileQueue.enqueue([tile, tileSourceKey,\n                tileGrid.getTileCoordCenter(tile.tileCoord), tileResolution]);\n            }\n          }\n          if (opt_tileCallback !== undefined) {\n            opt_tileCallback.call(opt_this, tile);\n          }\n        } else {\n          tileSource.useTile(z, x, y, projection);\n        }\n      }\n    }\n  }\n};\nexport default LayerRenderer;\n","/**\n * @module ol/layer/Base\n */\nimport {inherits} from '../util.js';\nimport BaseObject from '../Object.js';\nimport LayerProperty from '../layer/Property.js';\nimport {clamp} from '../math.js';\nimport {assign} from '../obj.js';\n\n\n/**\n * @typedef {Object} Options\n * @property {number} [opacity=1] Opacity (0, 1).\n * @property {boolean} [visible=true] Visibility.\n * @property {module:ol/extent~Extent} [extent] The bounding extent for layer rendering.  The layer will not be\n * rendered outside of this extent.\n * @property {number} [zIndex=0] The z-index for layer rendering.  At rendering time, the layers\n * will be ordered, first by Z-index and then by position.\n * @property {number} [minResolution] The minimum resolution (inclusive) at which this layer will be\n * visible.\n * @property {number} [maxResolution] The maximum resolution (exclusive) below which this layer will\n * be visible.\n */\n\n\n/**\n * @classdesc\n * Abstract base class; normally only used for creating subclasses and not\n * instantiated in apps.\n * Note that with {@link module:ol/layer/Base} and all its subclasses, any property set in\n * the options is set as a {@link module:ol/Object} property on the layer object, so\n * is observable, and has get/set accessors.\n *\n * @constructor\n * @abstract\n * @extends {module:ol/Object}\n * @param {module:ol/layer/Base~Options} options Layer options.\n * @api\n */\nconst BaseLayer = function(options) {\n\n  BaseObject.call(this);\n\n  /**\n   * @type {Object.<string, *>}\n   */\n  const properties = assign({}, options);\n  properties[LayerProperty.OPACITY] =\n      options.opacity !== undefined ? options.opacity : 1;\n  properties[LayerProperty.VISIBLE] =\n      options.visible !== undefined ? options.visible : true;\n  properties[LayerProperty.Z_INDEX] =\n      options.zIndex !== undefined ? options.zIndex : 0;\n  properties[LayerProperty.MAX_RESOLUTION] =\n      options.maxResolution !== undefined ? options.maxResolution : Infinity;\n  properties[LayerProperty.MIN_RESOLUTION] =\n      options.minResolution !== undefined ? options.minResolution : 0;\n\n  this.setProperties(properties);\n\n  /**\n   * @type {module:ol/layer/Layer~State}\n   * @private\n   */\n  this.state_ = /** @type {module:ol/layer/Layer~State} */ ({\n    layer: /** @type {module:ol/layer/Layer} */ (this),\n    managed: true\n  });\n\n  /**\n   * The layer type.\n   * @type {module:ol/LayerType}\n   * @protected;\n   */\n  this.type;\n\n};\n\ninherits(BaseLayer, BaseObject);\n\n\n/**\n * Get the layer type (used when creating a layer renderer).\n * @return {module:ol/LayerType} The layer type.\n */\nBaseLayer.prototype.getType = function() {\n  return this.type;\n};\n\n\n/**\n * @return {module:ol/layer/Layer~State} Layer state.\n */\nBaseLayer.prototype.getLayerState = function() {\n  this.state_.opacity = clamp(this.getOpacity(), 0, 1);\n  this.state_.sourceState = this.getSourceState();\n  this.state_.visible = this.getVisible();\n  this.state_.extent = this.getExtent();\n  this.state_.zIndex = this.getZIndex();\n  this.state_.maxResolution = this.getMaxResolution();\n  this.state_.minResolution = Math.max(this.getMinResolution(), 0);\n\n  return this.state_;\n};\n\n\n/**\n * @abstract\n * @param {Array.<module:ol/layer/Layer>=} opt_array Array of layers (to be\n *     modified in place).\n * @return {Array.<module:ol/layer/Layer>} Array of layers.\n */\nBaseLayer.prototype.getLayersArray = function(opt_array) {};\n\n\n/**\n * @abstract\n * @param {Array.<module:ol/layer/Layer~State>=} opt_states Optional list of layer\n *     states (to be modified in place).\n * @return {Array.<module:ol/layer/Layer~State>} List of layer states.\n */\nBaseLayer.prototype.getLayerStatesArray = function(opt_states) {};\n\n\n/**\n * Return the {@link module:ol/extent~Extent extent} of the layer or `undefined` if it\n * will be visible regardless of extent.\n * @return {module:ol/extent~Extent|undefined} The layer extent.\n * @observable\n * @api\n */\nBaseLayer.prototype.getExtent = function() {\n  return (\n    /** @type {module:ol/extent~Extent|undefined} */ (this.get(LayerProperty.EXTENT))\n  );\n};\n\n\n/**\n * Return the maximum resolution of the layer.\n * @return {number} The maximum resolution of the layer.\n * @observable\n * @api\n */\nBaseLayer.prototype.getMaxResolution = function() {\n  return /** @type {number} */ (this.get(LayerProperty.MAX_RESOLUTION));\n};\n\n\n/**\n * Return the minimum resolution of the layer.\n * @return {number} The minimum resolution of the layer.\n * @observable\n * @api\n */\nBaseLayer.prototype.getMinResolution = function() {\n  return /** @type {number} */ (this.get(LayerProperty.MIN_RESOLUTION));\n};\n\n\n/**\n * Return the opacity of the layer (between 0 and 1).\n * @return {number} The opacity of the layer.\n * @observable\n * @api\n */\nBaseLayer.prototype.getOpacity = function() {\n  return /** @type {number} */ (this.get(LayerProperty.OPACITY));\n};\n\n\n/**\n * @abstract\n * @return {module:ol/source/State} Source state.\n */\nBaseLayer.prototype.getSourceState = function() {};\n\n\n/**\n * Return the visibility of the layer (`true` or `false`).\n * @return {boolean} The visibility of the layer.\n * @observable\n * @api\n */\nBaseLayer.prototype.getVisible = function() {\n  return /** @type {boolean} */ (this.get(LayerProperty.VISIBLE));\n};\n\n\n/**\n * Return the Z-index of the layer, which is used to order layers before\n * rendering. The default Z-index is 0.\n * @return {number} The Z-index of the layer.\n * @observable\n * @api\n */\nBaseLayer.prototype.getZIndex = function() {\n  return /** @type {number} */ (this.get(LayerProperty.Z_INDEX));\n};\n\n\n/**\n * Set the extent at which the layer is visible.  If `undefined`, the layer\n * will be visible at all extents.\n * @param {module:ol/extent~Extent|undefined} extent The extent of the layer.\n * @observable\n * @api\n */\nBaseLayer.prototype.setExtent = function(extent) {\n  this.set(LayerProperty.EXTENT, extent);\n};\n\n\n/**\n * Set the maximum resolution at which the layer is visible.\n * @param {number} maxResolution The maximum resolution of the layer.\n * @observable\n * @api\n */\nBaseLayer.prototype.setMaxResolution = function(maxResolution) {\n  this.set(LayerProperty.MAX_RESOLUTION, maxResolution);\n};\n\n\n/**\n * Set the minimum resolution at which the layer is visible.\n * @param {number} minResolution The minimum resolution of the layer.\n * @observable\n * @api\n */\nBaseLayer.prototype.setMinResolution = function(minResolution) {\n  this.set(LayerProperty.MIN_RESOLUTION, minResolution);\n};\n\n\n/**\n * Set the opacity of the layer, allowed values range from 0 to 1.\n * @param {number} opacity The opacity of the layer.\n * @observable\n * @api\n */\nBaseLayer.prototype.setOpacity = function(opacity) {\n  this.set(LayerProperty.OPACITY, opacity);\n};\n\n\n/**\n * Set the visibility of the layer (`true` or `false`).\n * @param {boolean} visible The visibility of the layer.\n * @observable\n * @api\n */\nBaseLayer.prototype.setVisible = function(visible) {\n  this.set(LayerProperty.VISIBLE, visible);\n};\n\n\n/**\n * Set Z-index of the layer, which is used to order layers before rendering.\n * The default Z-index is 0.\n * @param {number} zindex The z-index of the layer.\n * @observable\n * @api\n */\nBaseLayer.prototype.setZIndex = function(zindex) {\n  this.set(LayerProperty.Z_INDEX, zindex);\n};\nexport default BaseLayer;\n","/**\n * @module ol/interaction/MouseWheelZoom\n */\nimport {inherits} from '../util.js';\nimport ViewHint from '../ViewHint.js';\nimport {always} from '../events/condition.js';\nimport {easeOut} from '../easing.js';\nimport EventType from '../events/EventType.js';\nimport {DEVICE_PIXEL_RATIO, FIREFOX, SAFARI} from '../has.js';\nimport Interaction, {zoomByDelta} from '../interaction/Interaction.js';\nimport {clamp} from '../math.js';\n\n\n/**\n * Maximum mouse wheel delta.\n * @type {number}\n */\nconst MAX_DELTA = 1;\n\n\n/**\n * @enum {string}\n */\nexport const Mode = {\n  TRACKPAD: 'trackpad',\n  WHEEL: 'wheel'\n};\n\n\n/**\n * @typedef {Object} Options\n * @property {module:ol/events/condition~Condition} [condition] A function that\n * takes an {@link module:ol/MapBrowserEvent~MapBrowserEvent} and returns a\n * boolean to indicate whether that event should be handled. Default is\n * {@link module:ol/events/condition~always}.\n * @property {number} [duration=250] Animation duration in milliseconds.\n * @property {number} [timeout=80] Mouse wheel timeout duration in milliseconds.\n * @property {boolean} [constrainResolution=false] When using a trackpad or\n * magic mouse, zoom to the closest integer zoom level after the scroll gesture\n * ends.\n * @property {boolean} [useAnchor=true] Enable zooming using the mouse's\n * location as the anchor. When set to `false`, zooming in and out will zoom to\n * the center of the screen instead of zooming on the mouse's location.\n */\n\n\n/**\n * @classdesc\n * Allows the user to zoom the map by scrolling the mouse wheel.\n *\n * @constructor\n * @extends {module:ol/interaction/Interaction}\n * @param {module:ol/interaction/MouseWheelZoom~Options=} opt_options Options.\n * @api\n */\nconst MouseWheelZoom = function(opt_options) {\n\n  Interaction.call(this, {\n    handleEvent: handleEvent\n  });\n\n  const options = opt_options || {};\n\n  /**\n   * @private\n   * @type {number}\n   */\n  this.delta_ = 0;\n\n  /**\n   * @private\n   * @type {number}\n   */\n  this.duration_ = options.duration !== undefined ? options.duration : 250;\n\n  /**\n   * @private\n   * @type {number}\n   */\n  this.timeout_ = options.timeout !== undefined ? options.timeout : 80;\n\n  /**\n   * @private\n   * @type {boolean}\n   */\n  this.useAnchor_ = options.useAnchor !== undefined ? options.useAnchor : true;\n\n  /**\n   * @private\n   * @type {boolean}\n   */\n  this.constrainResolution_ = options.constrainResolution || false;\n\n  /**\n   * @private\n   * @type {module:ol/events/condition~Condition}\n   */\n  this.condition_ = options.condition ? options.condition : always;\n\n  /**\n   * @private\n   * @type {?module:ol/coordinate~Coordinate}\n   */\n  this.lastAnchor_ = null;\n\n  /**\n   * @private\n   * @type {number|undefined}\n   */\n  this.startTime_ = undefined;\n\n  /**\n   * @private\n   * @type {number|undefined}\n   */\n  this.timeoutId_ = undefined;\n\n  /**\n   * @private\n   * @type {module:ol/interaction/MouseWheelZoom~Mode|undefined}\n   */\n  this.mode_ = undefined;\n\n  /**\n   * Trackpad events separated by this delay will be considered separate\n   * interactions.\n   * @type {number}\n   */\n  this.trackpadEventGap_ = 400;\n\n  /**\n   * @type {number|undefined}\n   */\n  this.trackpadTimeoutId_ = undefined;\n\n  /**\n   * The number of delta values per zoom level\n   * @private\n   * @type {number}\n   */\n  this.trackpadDeltaPerZoom_ = 300;\n\n  /**\n   * The zoom factor by which scroll zooming is allowed to exceed the limits.\n   * @private\n   * @type {number}\n   */\n  this.trackpadZoomBuffer_ = 1.5;\n\n};\n\ninherits(MouseWheelZoom, Interaction);\n\n\n/**\n * Handles the {@link module:ol/MapBrowserEvent map browser event} (if it was a\n * mousewheel-event) and eventually zooms the map.\n * @param {module:ol/MapBrowserEvent} mapBrowserEvent Map browser event.\n * @return {boolean} Allow event propagation.\n * @this {module:ol/interaction/MouseWheelZoom}\n */\nfunction handleEvent(mapBrowserEvent) {\n  if (!this.condition_(mapBrowserEvent)) {\n    return true;\n  }\n  const type = mapBrowserEvent.type;\n  if (type !== EventType.WHEEL && type !== EventType.MOUSEWHEEL) {\n    return true;\n  }\n\n  mapBrowserEvent.preventDefault();\n\n  const map = mapBrowserEvent.map;\n  const wheelEvent = /** @type {WheelEvent} */ (mapBrowserEvent.originalEvent);\n\n  if (this.useAnchor_) {\n    this.lastAnchor_ = mapBrowserEvent.coordinate;\n  }\n\n  // Delta normalisation inspired by\n  // https://github.com/mapbox/mapbox-gl-js/blob/001c7b9/js/ui/handler/scroll_zoom.js\n  let delta;\n  if (mapBrowserEvent.type == EventType.WHEEL) {\n    delta = wheelEvent.deltaY;\n    if (FIREFOX &&\n        wheelEvent.deltaMode === WheelEvent.DOM_DELTA_PIXEL) {\n      delta /= DEVICE_PIXEL_RATIO;\n    }\n    if (wheelEvent.deltaMode === WheelEvent.DOM_DELTA_LINE) {\n      delta *= 40;\n    }\n  } else if (mapBrowserEvent.type == EventType.MOUSEWHEEL) {\n    delta = -wheelEvent.wheelDeltaY;\n    if (SAFARI) {\n      delta /= 3;\n    }\n  }\n\n  if (delta === 0) {\n    return false;\n  }\n\n  const now = Date.now();\n\n  if (this.startTime_ === undefined) {\n    this.startTime_ = now;\n  }\n\n  if (!this.mode_ || now - this.startTime_ > this.trackpadEventGap_) {\n    this.mode_ = Math.abs(delta) < 4 ?\n      Mode.TRACKPAD :\n      Mode.WHEEL;\n  }\n\n  if (this.mode_ === Mode.TRACKPAD) {\n    const view = map.getView();\n    if (this.trackpadTimeoutId_) {\n      clearTimeout(this.trackpadTimeoutId_);\n    } else {\n      view.setHint(ViewHint.INTERACTING, 1);\n    }\n    this.trackpadTimeoutId_ = setTimeout(this.decrementInteractingHint_.bind(this), this.trackpadEventGap_);\n    let resolution = view.getResolution() * Math.pow(2, delta / this.trackpadDeltaPerZoom_);\n    const minResolution = view.getMinResolution();\n    const maxResolution = view.getMaxResolution();\n    let rebound = 0;\n    if (resolution < minResolution) {\n      resolution = Math.max(resolution, minResolution / this.trackpadZoomBuffer_);\n      rebound = 1;\n    } else if (resolution > maxResolution) {\n      resolution = Math.min(resolution, maxResolution * this.trackpadZoomBuffer_);\n      rebound = -1;\n    }\n    if (this.lastAnchor_) {\n      const center = view.calculateCenterZoom(resolution, this.lastAnchor_);\n      view.setCenter(view.constrainCenter(center));\n    }\n    view.setResolution(resolution);\n\n    if (rebound === 0 && this.constrainResolution_) {\n      view.animate({\n        resolution: view.constrainResolution(resolution, delta > 0 ? -1 : 1),\n        easing: easeOut,\n        anchor: this.lastAnchor_,\n        duration: this.duration_\n      });\n    }\n\n    if (rebound > 0) {\n      view.animate({\n        resolution: minResolution,\n        easing: easeOut,\n        anchor: this.lastAnchor_,\n        duration: 500\n      });\n    } else if (rebound < 0) {\n      view.animate({\n        resolution: maxResolution,\n        easing: easeOut,\n        anchor: this.lastAnchor_,\n        duration: 500\n      });\n    }\n    this.startTime_ = now;\n    return false;\n  }\n\n  this.delta_ += delta;\n\n  const timeLeft = Math.max(this.timeout_ - (now - this.startTime_), 0);\n\n  clearTimeout(this.timeoutId_);\n  this.timeoutId_ = setTimeout(this.handleWheelZoom_.bind(this, map), timeLeft);\n\n  return false;\n}\n\n\n/**\n * @private\n */\nMouseWheelZoom.prototype.decrementInteractingHint_ = function() {\n  this.trackpadTimeoutId_ = undefined;\n  const view = this.getMap().getView();\n  view.setHint(ViewHint.INTERACTING, -1);\n};\n\n\n/**\n * @private\n * @param {module:ol/PluggableMap} map Map.\n */\nMouseWheelZoom.prototype.handleWheelZoom_ = function(map) {\n  const view = map.getView();\n  if (view.getAnimating()) {\n    view.cancelAnimations();\n  }\n  const maxDelta = MAX_DELTA;\n  const delta = clamp(this.delta_, -maxDelta, maxDelta);\n  zoomByDelta(view, -delta, this.lastAnchor_, this.duration_);\n  this.mode_ = undefined;\n  this.delta_ = 0;\n  this.lastAnchor_ = null;\n  this.startTime_ = undefined;\n  this.timeoutId_ = undefined;\n};\n\n\n/**\n * Enable or disable using the mouse's location as an anchor when zooming\n * @param {boolean} useAnchor true to zoom to the mouse's location, false\n * to zoom to the center of the map\n * @api\n */\nMouseWheelZoom.prototype.setMouseAnchor = function(useAnchor) {\n  this.useAnchor_ = useAnchor;\n  if (!useAnchor) {\n    this.lastAnchor_ = null;\n  }\n};\n\n\nexport default MouseWheelZoom;\n","/**\n * @module ol/interaction/PinchZoom\n */\nimport {inherits} from '../util.js';\nimport ViewHint from '../ViewHint.js';\nimport {FALSE} from '../functions.js';\nimport {zoom, zoomWithoutConstraints} from '../interaction/Interaction.js';\nimport PointerInteraction, {centroid as centroidFromPointers} from '../interaction/Pointer.js';\n\n\n/**\n * @typedef {Object} Options\n * @property {number} [duration=400] Animation duration in milliseconds.\n * @property {boolean} [constrainResolution=false] Zoom to the closest integer\n * zoom level after the pinch gesture ends.\n */\n\n\n/**\n * @classdesc\n * Allows the user to zoom the map by pinching with two fingers\n * on a touch screen.\n *\n * @constructor\n * @extends {module:ol/interaction/Pointer}\n * @param {module:ol/interaction/PinchZoom~Options=} opt_options Options.\n * @api\n */\nconst PinchZoom = function(opt_options) {\n\n  PointerInteraction.call(this, {\n    handleDownEvent: handleDownEvent,\n    handleDragEvent: handleDragEvent,\n    handleUpEvent: handleUpEvent\n  });\n\n  const options = opt_options ? opt_options : {};\n\n  /**\n   * @private\n   * @type {boolean}\n   */\n  this.constrainResolution_ = options.constrainResolution || false;\n\n  /**\n   * @private\n   * @type {module:ol/coordinate~Coordinate}\n   */\n  this.anchor_ = null;\n\n  /**\n   * @private\n   * @type {number}\n   */\n  this.duration_ = options.duration !== undefined ? options.duration : 400;\n\n  /**\n   * @private\n   * @type {number|undefined}\n   */\n  this.lastDistance_ = undefined;\n\n  /**\n   * @private\n   * @type {number}\n   */\n  this.lastScaleDelta_ = 1;\n\n};\n\ninherits(PinchZoom, PointerInteraction);\n\n\n/**\n * @param {module:ol/MapBrowserPointerEvent} mapBrowserEvent Event.\n * @this {module:ol/interaction/PinchZoom}\n */\nfunction handleDragEvent(mapBrowserEvent) {\n  let scaleDelta = 1.0;\n\n  const touch0 = this.targetPointers[0];\n  const touch1 = this.targetPointers[1];\n  const dx = touch0.clientX - touch1.clientX;\n  const dy = touch0.clientY - touch1.clientY;\n\n  // distance between touches\n  const distance = Math.sqrt(dx * dx + dy * dy);\n\n  if (this.lastDistance_ !== undefined) {\n    scaleDelta = this.lastDistance_ / distance;\n  }\n  this.lastDistance_ = distance;\n\n\n  const map = mapBrowserEvent.map;\n  const view = map.getView();\n  const resolution = view.getResolution();\n  const maxResolution = view.getMaxResolution();\n  const minResolution = view.getMinResolution();\n  let newResolution = resolution * scaleDelta;\n  if (newResolution > maxResolution) {\n    scaleDelta = maxResolution / resolution;\n    newResolution = maxResolution;\n  } else if (newResolution < minResolution) {\n    scaleDelta = minResolution / resolution;\n    newResolution = minResolution;\n  }\n\n  if (scaleDelta != 1.0) {\n    this.lastScaleDelta_ = scaleDelta;\n  }\n\n  // scale anchor point.\n  const viewportPosition = map.getViewport().getBoundingClientRect();\n  const centroid = centroidFromPointers(this.targetPointers);\n  centroid[0] -= viewportPosition.left;\n  centroid[1] -= viewportPosition.top;\n  this.anchor_ = map.getCoordinateFromPixel(centroid);\n\n  // scale, bypass the resolution constraint\n  map.render();\n  zoomWithoutConstraints(view, newResolution, this.anchor_);\n}\n\n\n/**\n * @param {module:ol/MapBrowserPointerEvent} mapBrowserEvent Event.\n * @return {boolean} Stop drag sequence?\n * @this {module:ol/interaction/PinchZoom}\n */\nfunction handleUpEvent(mapBrowserEvent) {\n  if (this.targetPointers.length < 2) {\n    const map = mapBrowserEvent.map;\n    const view = map.getView();\n    view.setHint(ViewHint.INTERACTING, -1);\n    const resolution = view.getResolution();\n    if (this.constrainResolution_ ||\n        resolution < view.getMinResolution() ||\n        resolution > view.getMaxResolution()) {\n      // Zoom to final resolution, with an animation, and provide a\n      // direction not to zoom out/in if user was pinching in/out.\n      // Direction is > 0 if pinching out, and < 0 if pinching in.\n      const direction = this.lastScaleDelta_ - 1;\n      zoom(view, resolution, this.anchor_, this.duration_, direction);\n    }\n    return false;\n  } else {\n    return true;\n  }\n}\n\n\n/**\n * @param {module:ol/MapBrowserPointerEvent} mapBrowserEvent Event.\n * @return {boolean} Start drag sequence?\n * @this {module:ol/interaction/PinchZoom}\n */\nfunction handleDownEvent(mapBrowserEvent) {\n  if (this.targetPointers.length >= 2) {\n    const map = mapBrowserEvent.map;\n    this.anchor_ = null;\n    this.lastDistance_ = undefined;\n    this.lastScaleDelta_ = 1;\n    if (!this.handlingDownUpSequence) {\n      map.getView().setHint(ViewHint.INTERACTING, 1);\n    }\n    return true;\n  } else {\n    return false;\n  }\n}\n\n\n/**\n * @inheritDoc\n */\nPinchZoom.prototype.shouldStopEvent = FALSE;\nexport default PinchZoom;\n","/**\n * @module ol/pointer/MsSource\n */\n// Based on https://github.com/Polymer/PointerEvents\n\n// Copyright (c) 2013 The Polymer Authors. All rights reserved.\n//\n// Redistribution and use in source and binary forms, with or without\n// modification, are permitted provided that the following conditions are\n// met:\n//\n// * Redistributions of source code must retain the above copyright\n// notice, this list of conditions and the following disclaimer.\n// * Redistributions in binary form must reproduce the above\n// copyright notice, this list of conditions and the following disclaimer\n// in the documentation and/or other materials provided with the\n// distribution.\n// * Neither the name of Google Inc. nor the names of its\n// contributors may be used to endorse or promote products derived from\n// this software without specific prior written permission.\n//\n// THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS\n// \"AS IS\" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT\n// LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR\n// A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT\n// OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,\n// SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT\n// LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,\n// DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY\n// THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n// (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE\n// OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n\nimport {inherits} from '../util.js';\nimport EventSource from '../pointer/EventSource.js';\n\n/**\n * @param {module:ol/pointer/PointerEventHandler} dispatcher Event handler.\n * @constructor\n * @extends {module:ol/pointer/EventSource}\n */\nconst MsSource = function(dispatcher) {\n  const mapping = {\n    'MSPointerDown': this.msPointerDown,\n    'MSPointerMove': this.msPointerMove,\n    'MSPointerUp': this.msPointerUp,\n    'MSPointerOut': this.msPointerOut,\n    'MSPointerOver': this.msPointerOver,\n    'MSPointerCancel': this.msPointerCancel,\n    'MSGotPointerCapture': this.msGotPointerCapture,\n    'MSLostPointerCapture': this.msLostPointerCapture\n  };\n  EventSource.call(this, dispatcher, mapping);\n\n  /**\n   * @const\n   * @type {!Object.<string, MSPointerEvent|Object>}\n   */\n  this.pointerMap = dispatcher.pointerMap;\n};\n\ninherits(MsSource, EventSource);\n\n/**\n * @const\n * @type {Array.<string>}\n */\nconst POINTER_TYPES = [\n  '',\n  'unavailable',\n  'touch',\n  'pen',\n  'mouse'\n];\n\n\n/**\n * Creates a copy of the original event that will be used\n * for the fake pointer event.\n *\n * @private\n * @param {MSPointerEvent} inEvent The in event.\n * @return {Object} The copied event.\n */\nMsSource.prototype.prepareEvent_ = function(inEvent) {\n  let e = inEvent;\n  if (typeof inEvent.pointerType === 'number') {\n    e = this.dispatcher.cloneEvent(inEvent, inEvent);\n    e.pointerType = POINTER_TYPES[inEvent.pointerType];\n  }\n\n  return e;\n};\n\n\n/**\n * Remove this pointer from the list of active pointers.\n * @param {number} pointerId Pointer identifier.\n */\nMsSource.prototype.cleanup = function(pointerId) {\n  delete this.pointerMap[pointerId.toString()];\n};\n\n\n/**\n * Handler for `msPointerDown`.\n *\n * @param {MSPointerEvent} inEvent The in event.\n */\nMsSource.prototype.msPointerDown = function(inEvent) {\n  this.pointerMap[inEvent.pointerId.toString()] = inEvent;\n  const e = this.prepareEvent_(inEvent);\n  this.dispatcher.down(e, inEvent);\n};\n\n\n/**\n * Handler for `msPointerMove`.\n *\n * @param {MSPointerEvent} inEvent The in event.\n */\nMsSource.prototype.msPointerMove = function(inEvent) {\n  const e = this.prepareEvent_(inEvent);\n  this.dispatcher.move(e, inEvent);\n};\n\n\n/**\n * Handler for `msPointerUp`.\n *\n * @param {MSPointerEvent} inEvent The in event.\n */\nMsSource.prototype.msPointerUp = function(inEvent) {\n  const e = this.prepareEvent_(inEvent);\n  this.dispatcher.up(e, inEvent);\n  this.cleanup(inEvent.pointerId);\n};\n\n\n/**\n * Handler for `msPointerOut`.\n *\n * @param {MSPointerEvent} inEvent The in event.\n */\nMsSource.prototype.msPointerOut = function(inEvent) {\n  const e = this.prepareEvent_(inEvent);\n  this.dispatcher.leaveOut(e, inEvent);\n};\n\n\n/**\n * Handler for `msPointerOver`.\n *\n * @param {MSPointerEvent} inEvent The in event.\n */\nMsSource.prototype.msPointerOver = function(inEvent) {\n  const e = this.prepareEvent_(inEvent);\n  this.dispatcher.enterOver(e, inEvent);\n};\n\n\n/**\n * Handler for `msPointerCancel`.\n *\n * @param {MSPointerEvent} inEvent The in event.\n */\nMsSource.prototype.msPointerCancel = function(inEvent) {\n  const e = this.prepareEvent_(inEvent);\n  this.dispatcher.cancel(e, inEvent);\n  this.cleanup(inEvent.pointerId);\n};\n\n\n/**\n * Handler for `msLostPointerCapture`.\n *\n * @param {MSPointerEvent} inEvent The in event.\n */\nMsSource.prototype.msLostPointerCapture = function(inEvent) {\n  const e = this.dispatcher.makeEvent('lostpointercapture', inEvent, inEvent);\n  this.dispatcher.dispatchEvent(e);\n};\n\n\n/**\n * Handler for `msGotPointerCapture`.\n *\n * @param {MSPointerEvent} inEvent The in event.\n */\nMsSource.prototype.msGotPointerCapture = function(inEvent) {\n  const e = this.dispatcher.makeEvent('gotpointercapture', inEvent, inEvent);\n  this.dispatcher.dispatchEvent(e);\n};\nexport default MsSource;\n","/**\n * @module ol/pointer/NativeSource\n */\n// Based on https://github.com/Polymer/PointerEvents\n\n// Copyright (c) 2013 The Polymer Authors. All rights reserved.\n//\n// Redistribution and use in source and binary forms, with or without\n// modification, are permitted provided that the following conditions are\n// met:\n//\n// * Redistributions of source code must retain the above copyright\n// notice, this list of conditions and the following disclaimer.\n// * Redistributions in binary form must reproduce the above\n// copyright notice, this list of conditions and the following disclaimer\n// in the documentation and/or other materials provided with the\n// distribution.\n// * Neither the name of Google Inc. nor the names of its\n// contributors may be used to endorse or promote products derived from\n// this software without specific prior written permission.\n//\n// THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS\n// \"AS IS\" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT\n// LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR\n// A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT\n// OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,\n// SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT\n// LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,\n// DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY\n// THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n// (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE\n// OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n\nimport {inherits} from '../util.js';\nimport EventSource from '../pointer/EventSource.js';\n\n/**\n * @param {module:ol/pointer/PointerEventHandler} dispatcher Event handler.\n * @constructor\n * @extends {module:ol/pointer/EventSource}\n */\nconst NativeSource = function(dispatcher) {\n  const mapping = {\n    'pointerdown': this.pointerDown,\n    'pointermove': this.pointerMove,\n    'pointerup': this.pointerUp,\n    'pointerout': this.pointerOut,\n    'pointerover': this.pointerOver,\n    'pointercancel': this.pointerCancel,\n    'gotpointercapture': this.gotPointerCapture,\n    'lostpointercapture': this.lostPointerCapture\n  };\n  EventSource.call(this, dispatcher, mapping);\n};\n\ninherits(NativeSource, EventSource);\n\n\n/**\n * Handler for `pointerdown`.\n *\n * @param {Event} inEvent The in event.\n */\nNativeSource.prototype.pointerDown = function(inEvent) {\n  this.dispatcher.fireNativeEvent(inEvent);\n};\n\n\n/**\n * Handler for `pointermove`.\n *\n * @param {Event} inEvent The in event.\n */\nNativeSource.prototype.pointerMove = function(inEvent) {\n  this.dispatcher.fireNativeEvent(inEvent);\n};\n\n\n/**\n * Handler for `pointerup`.\n *\n * @param {Event} inEvent The in event.\n */\nNativeSource.prototype.pointerUp = function(inEvent) {\n  this.dispatcher.fireNativeEvent(inEvent);\n};\n\n\n/**\n * Handler for `pointerout`.\n *\n * @param {Event} inEvent The in event.\n */\nNativeSource.prototype.pointerOut = function(inEvent) {\n  this.dispatcher.fireNativeEvent(inEvent);\n};\n\n\n/**\n * Handler for `pointerover`.\n *\n * @param {Event} inEvent The in event.\n */\nNativeSource.prototype.pointerOver = function(inEvent) {\n  this.dispatcher.fireNativeEvent(inEvent);\n};\n\n\n/**\n * Handler for `pointercancel`.\n *\n * @param {Event} inEvent The in event.\n */\nNativeSource.prototype.pointerCancel = function(inEvent) {\n  this.dispatcher.fireNativeEvent(inEvent);\n};\n\n\n/**\n * Handler for `lostpointercapture`.\n *\n * @param {Event} inEvent The in event.\n */\nNativeSource.prototype.lostPointerCapture = function(inEvent) {\n  this.dispatcher.fireNativeEvent(inEvent);\n};\n\n\n/**\n * Handler for `gotpointercapture`.\n *\n * @param {Event} inEvent The in event.\n */\nNativeSource.prototype.gotPointerCapture = function(inEvent) {\n  this.dispatcher.fireNativeEvent(inEvent);\n};\nexport default NativeSource;\n","/**\n * @module ol/pointer/PointerEvent\n */\n// Based on https://github.com/Polymer/PointerEvents\n\n// Copyright (c) 2013 The Polymer Authors. All rights reserved.\n//\n// Redistribution and use in source and binary forms, with or without\n// modification, are permitted provided that the following conditions are\n// met:\n//\n// * Redistributions of source code must retain the above copyright\n// notice, this list of conditions and the following disclaimer.\n// * Redistributions in binary form must reproduce the above\n// copyright notice, this list of conditions and the following disclaimer\n// in the documentation and/or other materials provided with the\n// distribution.\n// * Neither the name of Google Inc. nor the names of its\n// contributors may be used to endorse or promote products derived from\n// this software without specific prior written permission.\n//\n// THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS\n// \"AS IS\" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT\n// LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR\n// A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT\n// OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,\n// SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT\n// LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,\n// DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY\n// THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n// (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE\n// OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n\nimport {inherits} from '../util.js';\nimport Event from '../events/Event.js';\n\n/**\n * A class for pointer events.\n *\n * This class is used as an abstraction for mouse events,\n * touch events and even native pointer events.\n *\n * @constructor\n * @extends {module:ol/events/Event}\n * @param {string} type The type of the event to create.\n * @param {Event} originalEvent The event.\n * @param {Object.<string, ?>=} opt_eventDict An optional dictionary of\n *    initial event properties.\n */\nconst PointerEvent = function(type, originalEvent, opt_eventDict) {\n  Event.call(this, type);\n\n  /**\n   * @const\n   * @type {Event}\n   */\n  this.originalEvent = originalEvent;\n\n  const eventDict = opt_eventDict ? opt_eventDict : {};\n\n  /**\n   * @type {number}\n   */\n  this.buttons = this.getButtons_(eventDict);\n\n  /**\n   * @type {number}\n   */\n  this.pressure = this.getPressure_(eventDict, this.buttons);\n\n  // MouseEvent related properties\n\n  /**\n   * @type {boolean}\n   */\n  this.bubbles = 'bubbles' in eventDict ? eventDict['bubbles'] : false;\n\n  /**\n   * @type {boolean}\n   */\n  this.cancelable = 'cancelable' in eventDict ? eventDict['cancelable'] : false;\n\n  /**\n   * @type {Object}\n   */\n  this.view = 'view' in eventDict ? eventDict['view'] : null;\n\n  /**\n   * @type {number}\n   */\n  this.detail = 'detail' in eventDict ? eventDict['detail'] : null;\n\n  /**\n   * @type {number}\n   */\n  this.screenX = 'screenX' in eventDict ? eventDict['screenX'] : 0;\n\n  /**\n   * @type {number}\n   */\n  this.screenY = 'screenY' in eventDict ? eventDict['screenY'] : 0;\n\n  /**\n   * @type {number}\n   */\n  this.clientX = 'clientX' in eventDict ? eventDict['clientX'] : 0;\n\n  /**\n   * @type {number}\n   */\n  this.clientY = 'clientY' in eventDict ? eventDict['clientY'] : 0;\n\n  /**\n   * @type {boolean}\n   */\n  this.ctrlKey = 'ctrlKey' in eventDict ? eventDict['ctrlKey'] : false;\n\n  /**\n   * @type {boolean}\n   */\n  this.altKey = 'altKey' in eventDict ? eventDict['altKey'] : false;\n\n  /**\n   * @type {boolean}\n   */\n  this.shiftKey = 'shiftKey' in eventDict ? eventDict['shiftKey'] : false;\n\n  /**\n   * @type {boolean}\n   */\n  this.metaKey = 'metaKey' in eventDict ? eventDict['metaKey'] : false;\n\n  /**\n   * @type {number}\n   */\n  this.button = 'button' in eventDict ? eventDict['button'] : 0;\n\n  /**\n   * @type {Node}\n   */\n  this.relatedTarget = 'relatedTarget' in eventDict ?\n    eventDict['relatedTarget'] : null;\n\n  // PointerEvent related properties\n\n  /**\n   * @const\n   * @type {number}\n   */\n  this.pointerId = 'pointerId' in eventDict ? eventDict['pointerId'] : 0;\n\n  /**\n   * @type {number}\n   */\n  this.width = 'width' in eventDict ? eventDict['width'] : 0;\n\n  /**\n   * @type {number}\n   */\n  this.height = 'height' in eventDict ? eventDict['height'] : 0;\n\n  /**\n   * @type {number}\n   */\n  this.tiltX = 'tiltX' in eventDict ? eventDict['tiltX'] : 0;\n\n  /**\n   * @type {number}\n   */\n  this.tiltY = 'tiltY' in eventDict ? eventDict['tiltY'] : 0;\n\n  /**\n   * @type {string}\n   */\n  this.pointerType = 'pointerType' in eventDict ? eventDict['pointerType'] : '';\n\n  /**\n   * @type {number}\n   */\n  this.hwTimestamp = 'hwTimestamp' in eventDict ? eventDict['hwTimestamp'] : 0;\n\n  /**\n   * @type {boolean}\n   */\n  this.isPrimary = 'isPrimary' in eventDict ? eventDict['isPrimary'] : false;\n\n  // keep the semantics of preventDefault\n  if (originalEvent.preventDefault) {\n    this.preventDefault = function() {\n      originalEvent.preventDefault();\n    };\n  }\n};\n\ninherits(PointerEvent, Event);\n\n\n/**\n * Is the `buttons` property supported?\n * @type {boolean}\n */\nlet HAS_BUTTONS = false;\n\n\n/**\n * @private\n * @param {Object.<string, ?>} eventDict The event dictionary.\n * @return {number} Button indicator.\n */\nPointerEvent.prototype.getButtons_ = function(eventDict) {\n  // According to the w3c spec,\n  // http://www.w3.org/TR/DOM-Level-3-Events/#events-MouseEvent-button\n  // MouseEvent.button == 0 can mean either no mouse button depressed, or the\n  // left mouse button depressed.\n  //\n  // As of now, the only way to distinguish between the two states of\n  // MouseEvent.button is by using the deprecated MouseEvent.which property, as\n  // this maps mouse buttons to positive integers > 0, and uses 0 to mean that\n  // no mouse button is held.\n  //\n  // MouseEvent.which is derived from MouseEvent.button at MouseEvent creation,\n  // but initMouseEvent does not expose an argument with which to set\n  // MouseEvent.which. Calling initMouseEvent with a buttonArg of 0 will set\n  // MouseEvent.button == 0 and MouseEvent.which == 1, breaking the expectations\n  // of app developers.\n  //\n  // The only way to propagate the correct state of MouseEvent.which and\n  // MouseEvent.button to a new MouseEvent.button == 0 and MouseEvent.which == 0\n  // is to call initMouseEvent with a buttonArg value of -1.\n  //\n  // This is fixed with DOM Level 4's use of buttons\n  let buttons;\n  if (eventDict.buttons || HAS_BUTTONS) {\n    buttons = eventDict.buttons;\n  } else {\n    switch (eventDict.which) {\n      case 1: buttons = 1; break;\n      case 2: buttons = 4; break;\n      case 3: buttons = 2; break;\n      default: buttons = 0;\n    }\n  }\n  return buttons;\n};\n\n\n/**\n * @private\n * @param {Object.<string, ?>} eventDict The event dictionary.\n * @param {number} buttons Button indicator.\n * @return {number} The pressure.\n */\nPointerEvent.prototype.getPressure_ = function(eventDict, buttons) {\n  // Spec requires that pointers without pressure specified use 0.5 for down\n  // state and 0 for up state.\n  let pressure = 0;\n  if (eventDict.pressure) {\n    pressure = eventDict.pressure;\n  } else {\n    pressure = buttons ? 0.5 : 0;\n  }\n  return pressure;\n};\n\n\n/**\n * Checks if the `buttons` property is supported.\n */\n(function() {\n  try {\n    const ev = new MouseEvent('click', {buttons: 1});\n    HAS_BUTTONS = ev.buttons === 1;\n  } catch (e) {\n    // pass\n  }\n})();\nexport default PointerEvent;\n","/**\n * @module ol/pointer/TouchSource\n */\n// Based on https://github.com/Polymer/PointerEvents\n\n// Copyright (c) 2013 The Polymer Authors. All rights reserved.\n//\n// Redistribution and use in source and binary forms, with or without\n// modification, are permitted provided that the following conditions are\n// met:\n//\n// * Redistributions of source code must retain the above copyright\n// notice, this list of conditions and the following disclaimer.\n// * Redistributions in binary form must reproduce the above\n// copyright notice, this list of conditions and the following disclaimer\n// in the documentation and/or other materials provided with the\n// distribution.\n// * Neither the name of Google Inc. nor the names of its\n// contributors may be used to endorse or promote products derived from\n// this software without specific prior written permission.\n//\n// THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS\n// \"AS IS\" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT\n// LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR\n// A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT\n// OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,\n// SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT\n// LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,\n// DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY\n// THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n// (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE\n// OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n\nimport {inherits} from '../util.js';\nimport {remove} from '../array.js';\nimport EventSource from '../pointer/EventSource.js';\nimport {POINTER_ID} from '../pointer/MouseSource.js';\n\n\n/**\n * @constructor\n * @param {module:ol/pointer/PointerEventHandler} dispatcher The event handler.\n * @param {module:ol/pointer/MouseSource} mouseSource Mouse source.\n * @extends {module:ol/pointer/EventSource}\n */\nconst TouchSource = function(dispatcher, mouseSource) {\n  const mapping = {\n    'touchstart': this.touchstart,\n    'touchmove': this.touchmove,\n    'touchend': this.touchend,\n    'touchcancel': this.touchcancel\n  };\n  EventSource.call(this, dispatcher, mapping);\n\n  /**\n   * @const\n   * @type {!Object.<string, Event|Object>}\n   */\n  this.pointerMap = dispatcher.pointerMap;\n\n  /**\n   * @const\n   * @type {module:ol/pointer/MouseSource}\n   */\n  this.mouseSource = mouseSource;\n\n  /**\n   * @private\n   * @type {number|undefined}\n   */\n  this.firstTouchId_ = undefined;\n\n  /**\n   * @private\n   * @type {number}\n   */\n  this.clickCount_ = 0;\n\n  /**\n   * @private\n   * @type {number|undefined}\n   */\n  this.resetId_ = undefined;\n\n  /**\n   * Mouse event timeout: This should be long enough to\n   * ignore compat mouse events made by touch.\n   * @private\n   * @type {number}\n   */\n  this.dedupTimeout_ = 2500;\n};\n\ninherits(TouchSource, EventSource);\n\n\n/**\n * @type {number}\n */\nconst CLICK_COUNT_TIMEOUT = 200;\n\n\n/**\n * @type {string}\n */\nconst POINTER_TYPE = 'touch';\n\n/**\n * @private\n * @param {Touch} inTouch The in touch.\n * @return {boolean} True, if this is the primary touch.\n */\nTouchSource.prototype.isPrimaryTouch_ = function(inTouch) {\n  return this.firstTouchId_ === inTouch.identifier;\n};\n\n\n/**\n * Set primary touch if there are no pointers, or the only pointer is the mouse.\n * @param {Touch} inTouch The in touch.\n * @private\n */\nTouchSource.prototype.setPrimaryTouch_ = function(inTouch) {\n  const count = Object.keys(this.pointerMap).length;\n  if (count === 0 || (count === 1 && POINTER_ID.toString() in this.pointerMap)) {\n    this.firstTouchId_ = inTouch.identifier;\n    this.cancelResetClickCount_();\n  }\n};\n\n\n/**\n * @private\n * @param {Object} inPointer The in pointer object.\n */\nTouchSource.prototype.removePrimaryPointer_ = function(inPointer) {\n  if (inPointer.isPrimary) {\n    this.firstTouchId_ = undefined;\n    this.resetClickCount_();\n  }\n};\n\n\n/**\n * @private\n */\nTouchSource.prototype.resetClickCount_ = function() {\n  this.resetId_ = setTimeout(\n    this.resetClickCountHandler_.bind(this),\n    CLICK_COUNT_TIMEOUT);\n};\n\n\n/**\n * @private\n */\nTouchSource.prototype.resetClickCountHandler_ = function() {\n  this.clickCount_ = 0;\n  this.resetId_ = undefined;\n};\n\n\n/**\n * @private\n */\nTouchSource.prototype.cancelResetClickCount_ = function() {\n  if (this.resetId_ !== undefined) {\n    clearTimeout(this.resetId_);\n  }\n};\n\n\n/**\n * @private\n * @param {Event} browserEvent Browser event\n * @param {Touch} inTouch Touch event\n * @return {Object} A pointer object.\n */\nTouchSource.prototype.touchToPointer_ = function(browserEvent, inTouch) {\n  const e = this.dispatcher.cloneEvent(browserEvent, inTouch);\n  // Spec specifies that pointerId 1 is reserved for Mouse.\n  // Touch identifiers can start at 0.\n  // Add 2 to the touch identifier for compatibility.\n  e.pointerId = inTouch.identifier + 2;\n  // TODO: check if this is necessary?\n  //e.target = findTarget(e);\n  e.bubbles = true;\n  e.cancelable = true;\n  e.detail = this.clickCount_;\n  e.button = 0;\n  e.buttons = 1;\n  e.width = inTouch.webkitRadiusX || inTouch.radiusX || 0;\n  e.height = inTouch.webkitRadiusY || inTouch.radiusY || 0;\n  e.pressure = inTouch.webkitForce || inTouch.force || 0.5;\n  e.isPrimary = this.isPrimaryTouch_(inTouch);\n  e.pointerType = POINTER_TYPE;\n\n  // make sure that the properties that are different for\n  // each `Touch` object are not copied from the BrowserEvent object\n  e.clientX = inTouch.clientX;\n  e.clientY = inTouch.clientY;\n  e.screenX = inTouch.screenX;\n  e.screenY = inTouch.screenY;\n\n  return e;\n};\n\n\n/**\n * @private\n * @param {Event} inEvent Touch event\n * @param {function(Event, Object)} inFunction In function.\n */\nTouchSource.prototype.processTouches_ = function(inEvent, inFunction) {\n  const touches = Array.prototype.slice.call(inEvent.changedTouches);\n  const count = touches.length;\n  function preventDefault() {\n    inEvent.preventDefault();\n  }\n  for (let i = 0; i < count; ++i) {\n    const pointer = this.touchToPointer_(inEvent, touches[i]);\n    // forward touch preventDefaults\n    pointer.preventDefault = preventDefault;\n    inFunction.call(this, inEvent, pointer);\n  }\n};\n\n\n/**\n * @private\n * @param {TouchList} touchList The touch list.\n * @param {number} searchId Search identifier.\n * @return {boolean} True, if the `Touch` with the given id is in the list.\n */\nTouchSource.prototype.findTouch_ = function(touchList, searchId) {\n  const l = touchList.length;\n  for (let i = 0; i < l; i++) {\n    const touch = touchList[i];\n    if (touch.identifier === searchId) {\n      return true;\n    }\n  }\n  return false;\n};\n\n\n/**\n * In some instances, a touchstart can happen without a touchend. This\n * leaves the pointermap in a broken state.\n * Therefore, on every touchstart, we remove the touches that did not fire a\n * touchend event.\n * To keep state globally consistent, we fire a pointercancel for\n * this \"abandoned\" touch\n *\n * @private\n * @param {Event} inEvent The in event.\n */\nTouchSource.prototype.vacuumTouches_ = function(inEvent) {\n  const touchList = inEvent.touches;\n  // pointerMap.getCount() should be < touchList.length here,\n  // as the touchstart has not been processed yet.\n  const keys = Object.keys(this.pointerMap);\n  const count = keys.length;\n  if (count >= touchList.length) {\n    const d = [];\n    for (let i = 0; i < count; ++i) {\n      const key = keys[i];\n      const value = this.pointerMap[key];\n      // Never remove pointerId == 1, which is mouse.\n      // Touch identifiers are 2 smaller than their pointerId, which is the\n      // index in pointermap.\n      if (key != POINTER_ID && !this.findTouch_(touchList, key - 2)) {\n        d.push(value.out);\n      }\n    }\n    for (let i = 0; i < d.length; ++i) {\n      this.cancelOut_(inEvent, d[i]);\n    }\n  }\n};\n\n\n/**\n * Handler for `touchstart`, triggers `pointerover`,\n * `pointerenter` and `pointerdown` events.\n *\n * @param {Event} inEvent The in event.\n */\nTouchSource.prototype.touchstart = function(inEvent) {\n  this.vacuumTouches_(inEvent);\n  this.setPrimaryTouch_(inEvent.changedTouches[0]);\n  this.dedupSynthMouse_(inEvent);\n  this.clickCount_++;\n  this.processTouches_(inEvent, this.overDown_);\n};\n\n\n/**\n * @private\n * @param {Event} browserEvent The event.\n * @param {Object} inPointer The in pointer object.\n */\nTouchSource.prototype.overDown_ = function(browserEvent, inPointer) {\n  this.pointerMap[inPointer.pointerId] = {\n    target: inPointer.target,\n    out: inPointer,\n    outTarget: inPointer.target\n  };\n  this.dispatcher.over(inPointer, browserEvent);\n  this.dispatcher.enter(inPointer, browserEvent);\n  this.dispatcher.down(inPointer, browserEvent);\n};\n\n\n/**\n * Handler for `touchmove`.\n *\n * @param {Event} inEvent The in event.\n */\nTouchSource.prototype.touchmove = function(inEvent) {\n  inEvent.preventDefault();\n  this.processTouches_(inEvent, this.moveOverOut_);\n};\n\n\n/**\n * @private\n * @param {Event} browserEvent The event.\n * @param {Object} inPointer The in pointer.\n */\nTouchSource.prototype.moveOverOut_ = function(browserEvent, inPointer) {\n  const event = inPointer;\n  const pointer = this.pointerMap[event.pointerId];\n  // a finger drifted off the screen, ignore it\n  if (!pointer) {\n    return;\n  }\n  const outEvent = pointer.out;\n  const outTarget = pointer.outTarget;\n  this.dispatcher.move(event, browserEvent);\n  if (outEvent && outTarget !== event.target) {\n    outEvent.relatedTarget = event.target;\n    event.relatedTarget = outTarget;\n    // recover from retargeting by shadow\n    outEvent.target = outTarget;\n    if (event.target) {\n      this.dispatcher.leaveOut(outEvent, browserEvent);\n      this.dispatcher.enterOver(event, browserEvent);\n    } else {\n      // clean up case when finger leaves the screen\n      event.target = outTarget;\n      event.relatedTarget = null;\n      this.cancelOut_(browserEvent, event);\n    }\n  }\n  pointer.out = event;\n  pointer.outTarget = event.target;\n};\n\n\n/**\n * Handler for `touchend`, triggers `pointerup`,\n * `pointerout` and `pointerleave` events.\n *\n * @param {Event} inEvent The event.\n */\nTouchSource.prototype.touchend = function(inEvent) {\n  this.dedupSynthMouse_(inEvent);\n  this.processTouches_(inEvent, this.upOut_);\n};\n\n\n/**\n * @private\n * @param {Event} browserEvent An event.\n * @param {Object} inPointer The inPointer object.\n */\nTouchSource.prototype.upOut_ = function(browserEvent, inPointer) {\n  this.dispatcher.up(inPointer, browserEvent);\n  this.dispatcher.out(inPointer, browserEvent);\n  this.dispatcher.leave(inPointer, browserEvent);\n  this.cleanUpPointer_(inPointer);\n};\n\n\n/**\n * Handler for `touchcancel`, triggers `pointercancel`,\n * `pointerout` and `pointerleave` events.\n *\n * @param {Event} inEvent The in event.\n */\nTouchSource.prototype.touchcancel = function(inEvent) {\n  this.processTouches_(inEvent, this.cancelOut_);\n};\n\n\n/**\n * @private\n * @param {Event} browserEvent The event.\n * @param {Object} inPointer The in pointer.\n */\nTouchSource.prototype.cancelOut_ = function(browserEvent, inPointer) {\n  this.dispatcher.cancel(inPointer, browserEvent);\n  this.dispatcher.out(inPointer, browserEvent);\n  this.dispatcher.leave(inPointer, browserEvent);\n  this.cleanUpPointer_(inPointer);\n};\n\n\n/**\n * @private\n * @param {Object} inPointer The inPointer object.\n */\nTouchSource.prototype.cleanUpPointer_ = function(inPointer) {\n  delete this.pointerMap[inPointer.pointerId];\n  this.removePrimaryPointer_(inPointer);\n};\n\n\n/**\n * Prevent synth mouse events from creating pointer events.\n *\n * @private\n * @param {Event} inEvent The in event.\n */\nTouchSource.prototype.dedupSynthMouse_ = function(inEvent) {\n  const lts = this.mouseSource.lastTouches;\n  const t = inEvent.changedTouches[0];\n  // only the primary finger will synth mouse events\n  if (this.isPrimaryTouch_(t)) {\n    // remember x/y of last touch\n    const lt = [t.clientX, t.clientY];\n    lts.push(lt);\n\n    setTimeout(function() {\n      // remove touch after timeout\n      remove(lts, lt);\n    }, this.dedupTimeout_);\n  }\n};\nexport default TouchSource;\n","/**\n * @module ol/pointer/PointerEventHandler\n */\n// Based on https://github.com/Polymer/PointerEvents\n\n// Copyright (c) 2013 The Polymer Authors. All rights reserved.\n//\n// Redistribution and use in source and binary forms, with or without\n// modification, are permitted provided that the following conditions are\n// met:\n//\n// * Redistributions of source code must retain the above copyright\n// notice, this list of conditions and the following disclaimer.\n// * Redistributions in binary form must reproduce the above\n// copyright notice, this list of conditions and the following disclaimer\n// in the documentation and/or other materials provided with the\n// distribution.\n// * Neither the name of Google Inc. nor the names of its\n// contributors may be used to endorse or promote products derived from\n// this software without specific prior written permission.\n//\n// THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS\n// \"AS IS\" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT\n// LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR\n// A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT\n// OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,\n// SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT\n// LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,\n// DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY\n// THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n// (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE\n// OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n\nimport {inherits} from '../util.js';\nimport {listen, unlisten} from '../events.js';\nimport EventTarget from '../events/EventTarget.js';\nimport {POINTER, MSPOINTER, TOUCH} from '../has.js';\nimport PointerEventType from '../pointer/EventType.js';\nimport MouseSource from '../pointer/MouseSource.js';\nimport MsSource from '../pointer/MsSource.js';\nimport NativeSource from '../pointer/NativeSource.js';\nimport PointerEvent from '../pointer/PointerEvent.js';\nimport TouchSource from '../pointer/TouchSource.js';\n\n/**\n * @constructor\n * @extends {module:ol/events/EventTarget}\n * @param {Element|HTMLDocument} element Viewport element.\n */\nconst PointerEventHandler = function(element) {\n  EventTarget.call(this);\n\n  /**\n   * @const\n   * @private\n   * @type {Element|HTMLDocument}\n   */\n  this.element_ = element;\n\n  /**\n   * @const\n   * @type {!Object.<string, Event|Object>}\n   */\n  this.pointerMap = {};\n\n  /**\n   * @type {Object.<string, function(Event)>}\n   * @private\n   */\n  this.eventMap_ = {};\n\n  /**\n   * @type {Array.<module:ol/pointer/EventSource>}\n   * @private\n   */\n  this.eventSourceList_ = [];\n\n  this.registerSources();\n};\n\ninherits(PointerEventHandler, EventTarget);\n\n/**\n * Properties to copy when cloning an event, with default values.\n * @type {Array.<Array>}\n */\nconst CLONE_PROPS = [\n  // MouseEvent\n  ['bubbles', false],\n  ['cancelable', false],\n  ['view', null],\n  ['detail', null],\n  ['screenX', 0],\n  ['screenY', 0],\n  ['clientX', 0],\n  ['clientY', 0],\n  ['ctrlKey', false],\n  ['altKey', false],\n  ['shiftKey', false],\n  ['metaKey', false],\n  ['button', 0],\n  ['relatedTarget', null],\n  // DOM Level 3\n  ['buttons', 0],\n  // PointerEvent\n  ['pointerId', 0],\n  ['width', 0],\n  ['height', 0],\n  ['pressure', 0],\n  ['tiltX', 0],\n  ['tiltY', 0],\n  ['pointerType', ''],\n  ['hwTimestamp', 0],\n  ['isPrimary', false],\n  // event instance\n  ['type', ''],\n  ['target', null],\n  ['currentTarget', null],\n  ['which', 0]\n];\n\n\n/**\n * Set up the event sources (mouse, touch and native pointers)\n * that generate pointer events.\n */\nPointerEventHandler.prototype.registerSources = function() {\n  if (POINTER) {\n    this.registerSource('native', new NativeSource(this));\n  } else if (MSPOINTER) {\n    this.registerSource('ms', new MsSource(this));\n  } else {\n    const mouseSource = new MouseSource(this);\n    this.registerSource('mouse', mouseSource);\n\n    if (TOUCH) {\n      this.registerSource('touch', new TouchSource(this, mouseSource));\n    }\n  }\n\n  // register events on the viewport element\n  this.register_();\n};\n\n\n/**\n * Add a new event source that will generate pointer events.\n *\n * @param {string} name A name for the event source\n * @param {module:ol/pointer/EventSource} source The source event.\n */\nPointerEventHandler.prototype.registerSource = function(name, source) {\n  const s = source;\n  const newEvents = s.getEvents();\n\n  if (newEvents) {\n    newEvents.forEach(function(e) {\n      const handler = s.getHandlerForEvent(e);\n\n      if (handler) {\n        this.eventMap_[e] = handler.bind(s);\n      }\n    }.bind(this));\n    this.eventSourceList_.push(s);\n  }\n};\n\n\n/**\n * Set up the events for all registered event sources.\n * @private\n */\nPointerEventHandler.prototype.register_ = function() {\n  const l = this.eventSourceList_.length;\n  for (let i = 0; i < l; i++) {\n    const eventSource = this.eventSourceList_[i];\n    this.addEvents_(eventSource.getEvents());\n  }\n};\n\n\n/**\n * Remove all registered events.\n * @private\n */\nPointerEventHandler.prototype.unregister_ = function() {\n  const l = this.eventSourceList_.length;\n  for (let i = 0; i < l; i++) {\n    const eventSource = this.eventSourceList_[i];\n    this.removeEvents_(eventSource.getEvents());\n  }\n};\n\n\n/**\n * Calls the right handler for a new event.\n * @private\n * @param {Event} inEvent Browser event.\n */\nPointerEventHandler.prototype.eventHandler_ = function(inEvent) {\n  const type = inEvent.type;\n  const handler = this.eventMap_[type];\n  if (handler) {\n    handler(inEvent);\n  }\n};\n\n\n/**\n * Setup listeners for the given events.\n * @private\n * @param {Array.<string>} events List of events.\n */\nPointerEventHandler.prototype.addEvents_ = function(events) {\n  events.forEach(function(eventName) {\n    listen(this.element_, eventName, this.eventHandler_, this);\n  }.bind(this));\n};\n\n\n/**\n * Unregister listeners for the given events.\n * @private\n * @param {Array.<string>} events List of events.\n */\nPointerEventHandler.prototype.removeEvents_ = function(events) {\n  events.forEach(function(e) {\n    unlisten(this.element_, e, this.eventHandler_, this);\n  }.bind(this));\n};\n\n\n/**\n * Returns a snapshot of inEvent, with writable properties.\n *\n * @param {Event} event Browser event.\n * @param {Event|Touch} inEvent An event that contains\n *    properties to copy.\n * @return {Object} An object containing shallow copies of\n *    `inEvent`'s properties.\n */\nPointerEventHandler.prototype.cloneEvent = function(event, inEvent) {\n  const eventCopy = {};\n  for (let i = 0, ii = CLONE_PROPS.length; i < ii; i++) {\n    const p = CLONE_PROPS[i][0];\n    eventCopy[p] = event[p] || inEvent[p] || CLONE_PROPS[i][1];\n  }\n\n  return eventCopy;\n};\n\n\n// EVENTS\n\n\n/**\n * Triggers a 'pointerdown' event.\n * @param {Object} data Pointer event data.\n * @param {Event} event The event.\n */\nPointerEventHandler.prototype.down = function(data, event) {\n  this.fireEvent(PointerEventType.POINTERDOWN, data, event);\n};\n\n\n/**\n * Triggers a 'pointermove' event.\n * @param {Object} data Pointer event data.\n * @param {Event} event The event.\n */\nPointerEventHandler.prototype.move = function(data, event) {\n  this.fireEvent(PointerEventType.POINTERMOVE, data, event);\n};\n\n\n/**\n * Triggers a 'pointerup' event.\n * @param {Object} data Pointer event data.\n * @param {Event} event The event.\n */\nPointerEventHandler.prototype.up = function(data, event) {\n  this.fireEvent(PointerEventType.POINTERUP, data, event);\n};\n\n\n/**\n * Triggers a 'pointerenter' event.\n * @param {Object} data Pointer event data.\n * @param {Event} event The event.\n */\nPointerEventHandler.prototype.enter = function(data, event) {\n  data.bubbles = false;\n  this.fireEvent(PointerEventType.POINTERENTER, data, event);\n};\n\n\n/**\n * Triggers a 'pointerleave' event.\n * @param {Object} data Pointer event data.\n * @param {Event} event The event.\n */\nPointerEventHandler.prototype.leave = function(data, event) {\n  data.bubbles = false;\n  this.fireEvent(PointerEventType.POINTERLEAVE, data, event);\n};\n\n\n/**\n * Triggers a 'pointerover' event.\n * @param {Object} data Pointer event data.\n * @param {Event} event The event.\n */\nPointerEventHandler.prototype.over = function(data, event) {\n  data.bubbles = true;\n  this.fireEvent(PointerEventType.POINTEROVER, data, event);\n};\n\n\n/**\n * Triggers a 'pointerout' event.\n * @param {Object} data Pointer event data.\n * @param {Event} event The event.\n */\nPointerEventHandler.prototype.out = function(data, event) {\n  data.bubbles = true;\n  this.fireEvent(PointerEventType.POINTEROUT, data, event);\n};\n\n\n/**\n * Triggers a 'pointercancel' event.\n * @param {Object} data Pointer event data.\n * @param {Event} event The event.\n */\nPointerEventHandler.prototype.cancel = function(data, event) {\n  this.fireEvent(PointerEventType.POINTERCANCEL, data, event);\n};\n\n\n/**\n * Triggers a combination of 'pointerout' and 'pointerleave' events.\n * @param {Object} data Pointer event data.\n * @param {Event} event The event.\n */\nPointerEventHandler.prototype.leaveOut = function(data, event) {\n  this.out(data, event);\n  if (!this.contains_(data.target, data.relatedTarget)) {\n    this.leave(data, event);\n  }\n};\n\n\n/**\n * Triggers a combination of 'pointerover' and 'pointerevents' events.\n * @param {Object} data Pointer event data.\n * @param {Event} event The event.\n */\nPointerEventHandler.prototype.enterOver = function(data, event) {\n  this.over(data, event);\n  if (!this.contains_(data.target, data.relatedTarget)) {\n    this.enter(data, event);\n  }\n};\n\n\n/**\n * @private\n * @param {Element} container The container element.\n * @param {Element} contained The contained element.\n * @return {boolean} Returns true if the container element\n *   contains the other element.\n */\nPointerEventHandler.prototype.contains_ = function(container, contained) {\n  if (!container || !contained) {\n    return false;\n  }\n  return container.contains(contained);\n};\n\n\n// EVENT CREATION AND TRACKING\n/**\n * Creates a new Event of type `inType`, based on the information in\n * `data`.\n *\n * @param {string} inType A string representing the type of event to create.\n * @param {Object} data Pointer event data.\n * @param {Event} event The event.\n * @return {module:ol/pointer/PointerEvent} A PointerEvent of type `inType`.\n */\nPointerEventHandler.prototype.makeEvent = function(inType, data, event) {\n  return new PointerEvent(inType, event, data);\n};\n\n\n/**\n * Make and dispatch an event in one call.\n * @param {string} inType A string representing the type of event.\n * @param {Object} data Pointer event data.\n * @param {Event} event The event.\n */\nPointerEventHandler.prototype.fireEvent = function(inType, data, event) {\n  const e = this.makeEvent(inType, data, event);\n  this.dispatchEvent(e);\n};\n\n\n/**\n * Creates a pointer event from a native pointer event\n * and dispatches this event.\n * @param {Event} event A platform event with a target.\n */\nPointerEventHandler.prototype.fireNativeEvent = function(event) {\n  const e = this.makeEvent(event.type, event, event);\n  this.dispatchEvent(e);\n};\n\n\n/**\n * Wrap a native mouse event into a pointer event.\n * This proxy method is required for the legacy IE support.\n * @param {string} eventType The pointer event type.\n * @param {Event} event The event.\n * @return {module:ol/pointer/PointerEvent} The wrapped event.\n */\nPointerEventHandler.prototype.wrapMouseEvent = function(eventType, event) {\n  const pointerEvent = this.makeEvent(\n    eventType, MouseSource.prepareEvent(event, this), event);\n  return pointerEvent;\n};\n\n\n/**\n * @inheritDoc\n */\nPointerEventHandler.prototype.disposeInternal = function() {\n  this.unregister_();\n  EventTarget.prototype.disposeInternal.call(this);\n};\n\n\nexport default PointerEventHandler;\n","/**\n * @module ol/format/GML2\n */\nimport {inherits} from '../util.js';\nimport {createOrUpdate} from '../extent.js';\nimport {transformWithOptions} from '../format/Feature.js';\nimport GMLBase, {GMLNS} from '../format/GMLBase.js';\nimport {writeStringTextNode} from '../format/xsd.js';\nimport Geometry from '../geom/Geometry.js';\nimport {assign} from '../obj.js';\nimport {get as getProjection, transformExtent} from '../proj.js';\nimport {createElementNS, getAllTextContent, makeArrayPusher, makeChildAppender,\n  makeReplacer, makeSimpleNodeFactory, OBJECT_PROPERTY_NODE_FACTORY, pushParseAndPop, pushSerializeAndPop} from '../xml.js';\n\n\n/**\n * @const\n * @type {string}\n */\nconst schemaLocation = GMLNS + ' http://schemas.opengis.net/gml/2.1.2/feature.xsd';\n\n\n/**\n * @classdesc\n * Feature format for reading and writing data in the GML format,\n * version 2.1.2.\n *\n * @constructor\n * @param {module:ol/format/GMLBase~Options=} opt_options Optional configuration object.\n * @extends {module:ol/format/GMLBase}\n * @api\n */\nconst GML2 = function(opt_options) {\n  const options = /** @type {module:ol/format/GMLBase~Options} */\n      (opt_options ? opt_options : {});\n\n  GMLBase.call(this, options);\n\n  this.FEATURE_COLLECTION_PARSERS[GMLNS][\n    'featureMember'] =\n      makeArrayPusher(GMLBase.prototype.readFeaturesInternal);\n\n  /**\n   * @inheritDoc\n   */\n  this.schemaLocation = options.schemaLocation ?\n    options.schemaLocation : schemaLocation;\n\n};\n\ninherits(GML2, GMLBase);\n\n\n/**\n * @param {Node} node Node.\n * @param {Array.<*>} objectStack Object stack.\n * @private\n * @return {Array.<number>|undefined} Flat coordinates.\n */\nGML2.prototype.readFlatCoordinates_ = function(node, objectStack) {\n  const s = getAllTextContent(node, false).replace(/^\\s*|\\s*$/g, '');\n  const context = /** @type {module:ol/xml~NodeStackItem} */ (objectStack[0]);\n  const containerSrs = context['srsName'];\n  let axisOrientation = 'enu';\n  if (containerSrs) {\n    const proj = getProjection(containerSrs);\n    if (proj) {\n      axisOrientation = proj.getAxisOrientation();\n    }\n  }\n  const coordsGroups = s.trim().split(/\\s+/);\n  const flatCoordinates = [];\n  for (let i = 0, ii = coordsGroups.length; i < ii; i++) {\n    const coords = coordsGroups[i].split(/,+/);\n    const x = parseFloat(coords[0]);\n    const y = parseFloat(coords[1]);\n    const z = (coords.length === 3) ? parseFloat(coords[2]) : 0;\n    if (axisOrientation.substr(0, 2) === 'en') {\n      flatCoordinates.push(x, y, z);\n    } else {\n      flatCoordinates.push(y, x, z);\n    }\n  }\n  return flatCoordinates;\n};\n\n\n/**\n * @param {Node} node Node.\n * @param {Array.<*>} objectStack Object stack.\n * @private\n * @return {module:ol/extent~Extent|undefined} Envelope.\n */\nGML2.prototype.readBox_ = function(node, objectStack) {\n  /** @type {Array.<number>} */\n  const flatCoordinates = pushParseAndPop([null],\n    this.BOX_PARSERS_, node, objectStack, this);\n  return createOrUpdate(flatCoordinates[1][0],\n    flatCoordinates[1][1], flatCoordinates[1][3],\n    flatCoordinates[1][4]);\n};\n\n\n/**\n * @param {Node} node Node.\n * @param {Array.<*>} objectStack Object stack.\n * @private\n */\nGML2.prototype.innerBoundaryIsParser_ = function(node, objectStack) {\n  /** @type {Array.<number>|undefined} */\n  const flatLinearRing = pushParseAndPop(undefined,\n    this.RING_PARSERS, node, objectStack, this);\n  if (flatLinearRing) {\n    const flatLinearRings = /** @type {Array.<Array.<number>>} */\n        (objectStack[objectStack.length - 1]);\n    flatLinearRings.push(flatLinearRing);\n  }\n};\n\n\n/**\n * @param {Node} node Node.\n * @param {Array.<*>} objectStack Object stack.\n * @private\n */\nGML2.prototype.outerBoundaryIsParser_ = function(node, objectStack) {\n  /** @type {Array.<number>|undefined} */\n  const flatLinearRing = pushParseAndPop(undefined,\n    this.RING_PARSERS, node, objectStack, this);\n  if (flatLinearRing) {\n    const flatLinearRings = /** @type {Array.<Array.<number>>} */\n        (objectStack[objectStack.length - 1]);\n    flatLinearRings[0] = flatLinearRing;\n  }\n};\n\n\n/**\n * @const\n * @param {*} value Value.\n * @param {Array.<*>} objectStack Object stack.\n * @param {string=} opt_nodeName Node name.\n * @return {Node|undefined} Node.\n * @private\n */\nGML2.prototype.GEOMETRY_NODE_FACTORY_ = function(value, objectStack, opt_nodeName) {\n  const context = objectStack[objectStack.length - 1];\n  const multiSurface = context['multiSurface'];\n  const surface = context['surface'];\n  const multiCurve = context['multiCurve'];\n  let nodeName;\n  if (!Array.isArray(value)) {\n    nodeName = /** @type {module:ol/geom/Geometry} */ (value).getType();\n    if (nodeName === 'MultiPolygon' && multiSurface === true) {\n      nodeName = 'MultiSurface';\n    } else if (nodeName === 'Polygon' && surface === true) {\n      nodeName = 'Surface';\n    } else if (nodeName === 'MultiLineString' && multiCurve === true) {\n      nodeName = 'MultiCurve';\n    }\n  } else {\n    nodeName = 'Envelope';\n  }\n  return createElementNS('http://www.opengis.net/gml',\n    nodeName);\n};\n\n\n/**\n * @param {Node} node Node.\n * @param {module:ol/Feature} feature Feature.\n * @param {Array.<*>} objectStack Node stack.\n */\nGML2.prototype.writeFeatureElement = function(node, feature, objectStack) {\n  const fid = feature.getId();\n  if (fid) {\n    node.setAttribute('fid', fid);\n  }\n  const context = /** @type {Object} */ (objectStack[objectStack.length - 1]);\n  const featureNS = context['featureNS'];\n  const geometryName = feature.getGeometryName();\n  if (!context.serializers) {\n    context.serializers = {};\n    context.serializers[featureNS] = {};\n  }\n  const properties = feature.getProperties();\n  const keys = [];\n  const values = [];\n  for (const key in properties) {\n    const value = properties[key];\n    if (value !== null) {\n      keys.push(key);\n      values.push(value);\n      if (key == geometryName || value instanceof Geometry) {\n        if (!(key in context.serializers[featureNS])) {\n          context.serializers[featureNS][key] = makeChildAppender(\n            this.writeGeometryElement, this);\n        }\n      } else {\n        if (!(key in context.serializers[featureNS])) {\n          context.serializers[featureNS][key] = makeChildAppender(writeStringTextNode);\n        }\n      }\n    }\n  }\n  const item = assign({}, context);\n  item.node = node;\n  pushSerializeAndPop(/** @type {module:ol/xml~NodeStackItem} */\n    (item), context.serializers,\n    makeSimpleNodeFactory(undefined, featureNS),\n    values,\n    objectStack, keys);\n};\n\n\n/**\n * @param {Node} node Node.\n * @param {module:ol/geom/LineString} geometry LineString geometry.\n * @param {Array.<*>} objectStack Node stack.\n * @private\n */\nGML2.prototype.writeCurveOrLineString_ = function(node, geometry, objectStack) {\n  const context = objectStack[objectStack.length - 1];\n  const srsName = context['srsName'];\n  if (node.nodeName !== 'LineStringSegment' && srsName) {\n    node.setAttribute('srsName', srsName);\n  }\n  if (node.nodeName === 'LineString' ||\n      node.nodeName === 'LineStringSegment') {\n    const coordinates = this.createCoordinatesNode_(node.namespaceURI);\n    node.appendChild(coordinates);\n    this.writeCoordinates_(coordinates, geometry, objectStack);\n  } else if (node.nodeName === 'Curve') {\n    const segments = createElementNS(node.namespaceURI, 'segments');\n    node.appendChild(segments);\n    this.writeCurveSegments_(segments,\n      geometry, objectStack);\n  }\n};\n\n\n/**\n * @param {Node} node Node.\n * @param {module:ol/geom/LineString} line LineString geometry.\n * @param {Array.<*>} objectStack Node stack.\n * @private\n */\nGML2.prototype.writeLineStringOrCurveMember_ = function(node, line, objectStack) {\n  const child = this.GEOMETRY_NODE_FACTORY_(line, objectStack);\n  if (child) {\n    node.appendChild(child);\n    this.writeCurveOrLineString_(child, line, objectStack);\n  }\n};\n\n\n/**\n * @param {Node} node Node.\n * @param {module:ol/geom/MultiLineString} geometry MultiLineString geometry.\n * @param {Array.<*>} objectStack Node stack.\n * @private\n */\nGML2.prototype.writeMultiCurveOrLineString_ = function(node, geometry, objectStack) {\n  const context = objectStack[objectStack.length - 1];\n  const hasZ = context['hasZ'];\n  const srsName = context['srsName'];\n  const curve = context['curve'];\n  if (srsName) {\n    node.setAttribute('srsName', srsName);\n  }\n  const lines = geometry.getLineStrings();\n  pushSerializeAndPop({node: node, hasZ: hasZ, srsName: srsName, curve: curve},\n    this.LINESTRINGORCURVEMEMBER_SERIALIZERS_,\n    this.MULTIGEOMETRY_MEMBER_NODE_FACTORY_, lines,\n    objectStack, undefined, this);\n};\n\n\n/**\n * @param {Node} node Node.\n * @param {module:ol/geom/Geometry|module:ol/extent~Extent} geometry Geometry.\n * @param {Array.<*>} objectStack Node stack.\n */\nGML2.prototype.writeGeometryElement = function(node, geometry, objectStack) {\n  const context = /** @type {module:ol/format/Feature~WriteOptions} */ (objectStack[objectStack.length - 1]);\n  const item = assign({}, context);\n  item.node = node;\n  let value;\n  if (Array.isArray(geometry)) {\n    if (context.dataProjection) {\n      value = transformExtent(\n        geometry, context.featureProjection, context.dataProjection);\n    } else {\n      value = geometry;\n    }\n  } else {\n    value = transformWithOptions(/** @type {module:ol/geom/Geometry} */ (geometry), true, context);\n  }\n  pushSerializeAndPop(/** @type {module:ol/xml~NodeStackItem} */\n    (item), this.GEOMETRY_SERIALIZERS_,\n    this.GEOMETRY_NODE_FACTORY_, [value],\n    objectStack, undefined, this);\n};\n\n\n/**\n * @param {string} namespaceURI XML namespace.\n * @returns {Node} coordinates node.\n * @private\n */\nGML2.prototype.createCoordinatesNode_ = function(namespaceURI) {\n  const coordinates = createElementNS(namespaceURI, 'coordinates');\n  coordinates.setAttribute('decimal', '.');\n  coordinates.setAttribute('cs', ',');\n  coordinates.setAttribute('ts', ' ');\n\n  return coordinates;\n};\n\n\n/**\n * @param {Node} node Node.\n * @param {module:ol/geom/LineString|module:ol/geom/LinearRing} value Geometry.\n * @param {Array.<*>} objectStack Node stack.\n * @private\n */\nGML2.prototype.writeCoordinates_ = function(node, value, objectStack) {\n  const context = objectStack[objectStack.length - 1];\n  const hasZ = context['hasZ'];\n  const srsName = context['srsName'];\n  // only 2d for simple features profile\n  const points = value.getCoordinates();\n  const len = points.length;\n  const parts = new Array(len);\n  for (let i = 0; i < len; ++i) {\n    const point = points[i];\n    parts[i] = this.getCoords_(point, srsName, hasZ);\n  }\n  writeStringTextNode(node, parts.join(' '));\n};\n\n\n/**\n * @param {Node} node Node.\n * @param {module:ol/geom/LineString} line LineString geometry.\n * @param {Array.<*>} objectStack Node stack.\n * @private\n */\nGML2.prototype.writeCurveSegments_ = function(node, line, objectStack) {\n  const child = createElementNS(node.namespaceURI, 'LineStringSegment');\n  node.appendChild(child);\n  this.writeCurveOrLineString_(child, line, objectStack);\n};\n\n\n/**\n * @param {Node} node Node.\n * @param {module:ol/geom/Polygon} geometry Polygon geometry.\n * @param {Array.<*>} objectStack Node stack.\n * @private\n */\nGML2.prototype.writeSurfaceOrPolygon_ = function(node, geometry, objectStack) {\n  const context = objectStack[objectStack.length - 1];\n  const hasZ = context['hasZ'];\n  const srsName = context['srsName'];\n  if (node.nodeName !== 'PolygonPatch' && srsName) {\n    node.setAttribute('srsName', srsName);\n  }\n  if (node.nodeName === 'Polygon' || node.nodeName === 'PolygonPatch') {\n    const rings = geometry.getLinearRings();\n    pushSerializeAndPop(\n      {node: node, hasZ: hasZ, srsName: srsName},\n      this.RING_SERIALIZERS_,\n      this.RING_NODE_FACTORY_,\n      rings, objectStack, undefined, this);\n  } else if (node.nodeName === 'Surface') {\n    const patches = createElementNS(node.namespaceURI, 'patches');\n    node.appendChild(patches);\n    this.writeSurfacePatches_(\n      patches, geometry, objectStack);\n  }\n};\n\n\n/**\n * @param {*} value Value.\n * @param {Array.<*>} objectStack Object stack.\n * @param {string=} opt_nodeName Node name.\n * @return {Node} Node.\n * @private\n */\nGML2.prototype.RING_NODE_FACTORY_ = function(value, objectStack, opt_nodeName) {\n  const context = objectStack[objectStack.length - 1];\n  const parentNode = context.node;\n  const exteriorWritten = context['exteriorWritten'];\n  if (exteriorWritten === undefined) {\n    context['exteriorWritten'] = true;\n  }\n  return createElementNS(parentNode.namespaceURI,\n    exteriorWritten !== undefined ? 'innerBoundaryIs' : 'outerBoundaryIs');\n};\n\n\n/**\n * @param {Node} node Node.\n * @param {module:ol/geom/Polygon} polygon Polygon geometry.\n * @param {Array.<*>} objectStack Node stack.\n * @private\n */\nGML2.prototype.writeSurfacePatches_ = function(node, polygon, objectStack) {\n  const child = createElementNS(node.namespaceURI, 'PolygonPatch');\n  node.appendChild(child);\n  this.writeSurfaceOrPolygon_(child, polygon, objectStack);\n};\n\n\n/**\n * @param {Node} node Node.\n * @param {module:ol/geom/LinearRing} ring LinearRing geometry.\n * @param {Array.<*>} objectStack Node stack.\n * @private\n */\nGML2.prototype.writeRing_ = function(node, ring, objectStack) {\n  const linearRing = createElementNS(node.namespaceURI, 'LinearRing');\n  node.appendChild(linearRing);\n  this.writeLinearRing_(linearRing, ring, objectStack);\n};\n\n\n/**\n * @param {Array.<number>} point Point geometry.\n * @param {string=} opt_srsName Optional srsName\n * @param {boolean=} opt_hasZ whether the geometry has a Z coordinate (is 3D) or not.\n * @return {string} The coords string.\n * @private\n */\nGML2.prototype.getCoords_ = function(point, opt_srsName, opt_hasZ) {\n  let axisOrientation = 'enu';\n  if (opt_srsName) {\n    axisOrientation = getProjection(opt_srsName).getAxisOrientation();\n  }\n  let coords = ((axisOrientation.substr(0, 2) === 'en') ?\n    point[0] + ',' + point[1] :\n    point[1] + ',' + point[0]);\n  if (opt_hasZ) {\n    // For newly created points, Z can be undefined.\n    const z = point[2] || 0;\n    coords += ',' + z;\n  }\n\n  return coords;\n};\n\n\n/**\n * @param {Node} node Node.\n * @param {module:ol/geom/Point} geometry Point geometry.\n * @param {Array.<*>} objectStack Node stack.\n * @private\n */\nGML2.prototype.writePoint_ = function(node, geometry, objectStack) {\n  const context = objectStack[objectStack.length - 1];\n  const hasZ = context['hasZ'];\n  const srsName = context['srsName'];\n  if (srsName) {\n    node.setAttribute('srsName', srsName);\n  }\n  const coordinates = this.createCoordinatesNode_(node.namespaceURI);\n  node.appendChild(coordinates);\n  const point = geometry.getCoordinates();\n  const coord = this.getCoords_(point, srsName, hasZ);\n  writeStringTextNode(coordinates, coord);\n};\n\n\n/**\n * @param {Node} node Node.\n * @param {module:ol/geom/MultiPoint} geometry MultiPoint geometry.\n * @param {Array.<*>} objectStack Node stack.\n * @private\n */\nGML2.prototype.writeMultiPoint_ = function(node, geometry, objectStack) {\n  const context = objectStack[objectStack.length - 1];\n  const hasZ = context['hasZ'];\n  const srsName = context['srsName'];\n  if (srsName) {\n    node.setAttribute('srsName', srsName);\n  }\n  const points = geometry.getPoints();\n  pushSerializeAndPop({node: node, hasZ: hasZ, srsName: srsName},\n    this.POINTMEMBER_SERIALIZERS_,\n    makeSimpleNodeFactory('pointMember'), points,\n    objectStack, undefined, this);\n};\n\n\n/**\n * @param {Node} node Node.\n * @param {module:ol/geom/Point} point Point geometry.\n * @param {Array.<*>} objectStack Node stack.\n * @private\n */\nGML2.prototype.writePointMember_ = function(node, point, objectStack) {\n  const child = createElementNS(node.namespaceURI, 'Point');\n  node.appendChild(child);\n  this.writePoint_(child, point, objectStack);\n};\n\n\n/**\n * @param {Node} node Node.\n * @param {module:ol/geom/LinearRing} geometry LinearRing geometry.\n * @param {Array.<*>} objectStack Node stack.\n * @private\n */\nGML2.prototype.writeLinearRing_ = function(node, geometry, objectStack) {\n  const context = objectStack[objectStack.length - 1];\n  const srsName = context['srsName'];\n  if (srsName) {\n    node.setAttribute('srsName', srsName);\n  }\n  const coordinates = this.createCoordinatesNode_(node.namespaceURI);\n  node.appendChild(coordinates);\n  this.writeCoordinates_(coordinates, geometry, objectStack);\n};\n\n\n/**\n * @param {Node} node Node.\n * @param {module:ol/geom/MultiPolygon} geometry MultiPolygon geometry.\n * @param {Array.<*>} objectStack Node stack.\n * @private\n */\nGML2.prototype.writeMultiSurfaceOrPolygon_ = function(node, geometry, objectStack) {\n  const context = objectStack[objectStack.length - 1];\n  const hasZ = context['hasZ'];\n  const srsName = context['srsName'];\n  const surface = context['surface'];\n  if (srsName) {\n    node.setAttribute('srsName', srsName);\n  }\n  const polygons = geometry.getPolygons();\n  pushSerializeAndPop({node: node, hasZ: hasZ, srsName: srsName, surface: surface},\n    this.SURFACEORPOLYGONMEMBER_SERIALIZERS_,\n    this.MULTIGEOMETRY_MEMBER_NODE_FACTORY_, polygons,\n    objectStack, undefined, this);\n};\n\n\n/**\n * @param {Node} node Node.\n * @param {module:ol/geom/Polygon} polygon Polygon geometry.\n * @param {Array.<*>} objectStack Node stack.\n * @private\n */\nGML2.prototype.writeSurfaceOrPolygonMember_ = function(node, polygon, objectStack) {\n  const child = this.GEOMETRY_NODE_FACTORY_(\n    polygon, objectStack);\n  if (child) {\n    node.appendChild(child);\n    this.writeSurfaceOrPolygon_(child, polygon, objectStack);\n  }\n};\n\n\n/**\n * @param {Node} node Node.\n * @param {module:ol/extent~Extent} extent Extent.\n * @param {Array.<*>} objectStack Node stack.\n * @private\n */\nGML2.prototype.writeEnvelope = function(node, extent, objectStack) {\n  const context = objectStack[objectStack.length - 1];\n  const srsName = context['srsName'];\n  if (srsName) {\n    node.setAttribute('srsName', srsName);\n  }\n  const keys = ['lowerCorner', 'upperCorner'];\n  const values = [extent[0] + ' ' + extent[1], extent[2] + ' ' + extent[3]];\n  pushSerializeAndPop(/** @type {module:ol/xml~NodeStackItem} */\n    ({node: node}), this.ENVELOPE_SERIALIZERS_,\n    OBJECT_PROPERTY_NODE_FACTORY,\n    values,\n    objectStack, keys, this);\n};\n\n\n/**\n * @const\n * @type {Object.<string, string>}\n */\nconst MULTIGEOMETRY_TO_MEMBER_NODENAME = {\n  'MultiLineString': 'lineStringMember',\n  'MultiCurve': 'curveMember',\n  'MultiPolygon': 'polygonMember',\n  'MultiSurface': 'surfaceMember'\n};\n\n\n/**\n * @const\n * @param {*} value Value.\n * @param {Array.<*>} objectStack Object stack.\n * @param {string=} opt_nodeName Node name.\n * @return {Node|undefined} Node.\n * @private\n */\nGML2.prototype.MULTIGEOMETRY_MEMBER_NODE_FACTORY_ = function(value, objectStack, opt_nodeName) {\n  const parentNode = objectStack[objectStack.length - 1].node;\n  return createElementNS('http://www.opengis.net/gml',\n    MULTIGEOMETRY_TO_MEMBER_NODENAME[parentNode.nodeName]);\n};\n\n\n/**\n * @const\n * @type {Object.<string, Object.<string, module:ol/xml~Parser>>}\n * @private\n */\nGML2.prototype.GEOMETRY_FLAT_COORDINATES_PARSERS_ = {\n  'http://www.opengis.net/gml': {\n    'coordinates': makeReplacer(GML2.prototype.readFlatCoordinates_)\n  }\n};\n\n\n/**\n * @const\n * @type {Object.<string, Object.<string, module:ol/xml~Parser>>}\n * @private\n */\nGML2.prototype.FLAT_LINEAR_RINGS_PARSERS_ = {\n  'http://www.opengis.net/gml': {\n    'innerBoundaryIs': GML2.prototype.innerBoundaryIsParser_,\n    'outerBoundaryIs': GML2.prototype.outerBoundaryIsParser_\n  }\n};\n\n\n/**\n * @const\n * @type {Object.<string, Object.<string, module:ol/xml~Parser>>}\n * @private\n */\nGML2.prototype.BOX_PARSERS_ = {\n  'http://www.opengis.net/gml': {\n    'coordinates': makeArrayPusher(\n      GML2.prototype.readFlatCoordinates_)\n  }\n};\n\n\n/**\n * @const\n * @type {Object.<string, Object.<string, module:ol/xml~Parser>>}\n * @private\n */\nGML2.prototype.GEOMETRY_PARSERS_ = {\n  'http://www.opengis.net/gml': {\n    'Point': makeReplacer(GMLBase.prototype.readPoint),\n    'MultiPoint': makeReplacer(\n      GMLBase.prototype.readMultiPoint),\n    'LineString': makeReplacer(\n      GMLBase.prototype.readLineString),\n    'MultiLineString': makeReplacer(\n      GMLBase.prototype.readMultiLineString),\n    'LinearRing': makeReplacer(\n      GMLBase.prototype.readLinearRing),\n    'Polygon': makeReplacer(GMLBase.prototype.readPolygon),\n    'MultiPolygon': makeReplacer(\n      GMLBase.prototype.readMultiPolygon),\n    'Box': makeReplacer(GML2.prototype.readBox_)\n  }\n};\n\n\n/**\n * @const\n * @type {Object.<string, Object.<string, module:ol/xml~Serializer>>}\n * @private\n */\nGML2.prototype.GEOMETRY_SERIALIZERS_ = {\n  'http://www.opengis.net/gml': {\n    'Curve': makeChildAppender(\n      GML2.prototype.writeCurveOrLineString_),\n    'MultiCurve': makeChildAppender(\n      GML2.prototype.writeMultiCurveOrLineString_),\n    'Point': makeChildAppender(GML2.prototype.writePoint_),\n    'MultiPoint': makeChildAppender(\n      GML2.prototype.writeMultiPoint_),\n    'LineString': makeChildAppender(\n      GML2.prototype.writeCurveOrLineString_),\n    'MultiLineString': makeChildAppender(\n      GML2.prototype.writeMultiCurveOrLineString_),\n    'LinearRing': makeChildAppender(\n      GML2.prototype.writeLinearRing_),\n    'Polygon': makeChildAppender(\n      GML2.prototype.writeSurfaceOrPolygon_),\n    'MultiPolygon': makeChildAppender(\n      GML2.prototype.writeMultiSurfaceOrPolygon_),\n    'Surface': makeChildAppender(\n      GML2.prototype.writeSurfaceOrPolygon_),\n    'MultiSurface': makeChildAppender(\n      GML2.prototype.writeMultiSurfaceOrPolygon_),\n    'Envelope': makeChildAppender(\n      GML2.prototype.writeEnvelope)\n  }\n};\n\n\n/**\n * @type {Object.<string, Object.<string, module:ol/xml~Serializer>>}\n * @private\n */\nGML2.prototype.LINESTRINGORCURVEMEMBER_SERIALIZERS_ = {\n  'http://www.opengis.net/gml': {\n    'lineStringMember': makeChildAppender(\n      GML2.prototype.writeLineStringOrCurveMember_),\n    'curveMember': makeChildAppender(\n      GML2.prototype.writeLineStringOrCurveMember_)\n  }\n};\n\n\n/**\n * @type {Object.<string, Object.<string, module:ol/xml~Serializer>>}\n * @private\n */\nGML2.prototype.RING_SERIALIZERS_ = {\n  'http://www.opengis.net/gml': {\n    'outerBoundaryIs': makeChildAppender(GML2.prototype.writeRing_),\n    'innerBoundaryIs': makeChildAppender(GML2.prototype.writeRing_)\n  }\n};\n\n\n/**\n * @type {Object.<string, Object.<string, module:ol/xml~Serializer>>}\n * @private\n */\nGML2.prototype.POINTMEMBER_SERIALIZERS_ = {\n  'http://www.opengis.net/gml': {\n    'pointMember': makeChildAppender(\n      GML2.prototype.writePointMember_)\n  }\n};\n\n\n/**\n * @const\n * @type {Object.<string, Object.<string, module:ol/xml~Serializer>>}\n * @private\n */\nGML2.prototype.SURFACEORPOLYGONMEMBER_SERIALIZERS_ = {\n  'http://www.opengis.net/gml': {\n    'surfaceMember': makeChildAppender(\n      GML2.prototype.writeSurfaceOrPolygonMember_),\n    'polygonMember': makeChildAppender(\n      GML2.prototype.writeSurfaceOrPolygonMember_)\n  }\n};\n\n\n/**\n * @type {Object.<string, Object.<string, module:ol/xml~Serializer>>}\n * @private\n */\nGML2.prototype.ENVELOPE_SERIALIZERS_ = {\n  'http://www.opengis.net/gml': {\n    'lowerCorner': makeChildAppender(writeStringTextNode),\n    'upperCorner': makeChildAppender(writeStringTextNode)\n  }\n};\n\nexport default GML2;\n","/**\n * @module ol/interaction/Snap\n */\nimport {getUid, inherits} from '../util.js';\nimport {CollectionEvent} from '../Collection.js';\nimport CollectionEventType from '../CollectionEventType.js';\nimport {distance as coordinateDistance, squaredDistance as squaredCoordinateDistance, closestOnCircle, closestOnSegment, squaredDistanceToSegment} from '../coordinate.js';\nimport {listen, unlistenByKey} from '../events.js';\nimport EventType from '../events/EventType.js';\nimport {boundingExtent, createEmpty} from '../extent.js';\nimport {TRUE, FALSE} from '../functions.js';\nimport GeometryType from '../geom/GeometryType.js';\nimport {fromCircle} from '../geom/Polygon.js';\nimport PointerInteraction, {handleEvent as handlePointerEvent} from '../interaction/Pointer.js';\nimport {getValues} from '../obj.js';\nimport {VectorSourceEvent} from '../source/Vector.js';\nimport VectorEventType from '../source/VectorEventType.js';\nimport RBush from '../structs/RBush.js';\n\n\n/**\n * @typedef {Object} Result\n * @property {boolean} snapped\n * @property {module:ol/coordinate~Coordinate|null} vertex\n * @property {module:ol~Pixel|null} vertexPixel\n */\n\n\n/**\n * @typedef {Object} SegmentData\n * @property {module:ol/Feature} feature\n * @property {Array.<module:ol/coordinate~Coordinate>} segment\n */\n\n\n/**\n * @typedef {Object} Options\n * @property {module:ol/Collection.<module:ol/Feature>} [features] Snap to these features. Either this option or source should be provided.\n * @property {boolean} [edge=true] Snap to edges.\n * @property {boolean} [vertex=true] Snap to vertices.\n * @property {number} [pixelTolerance=10] Pixel tolerance for considering the pointer close enough to a segment or\n * vertex for snapping.\n * @property {module:ol/source/Vector} [source] Snap to features from this source. Either this option or features should be provided\n */\n\n\n/**\n * @classdesc\n * Handles snapping of vector features while modifying or drawing them.  The\n * features can come from a {@link module:ol/source/Vector} or {@link module:ol/Collection~Collection}\n * Any interaction object that allows the user to interact\n * with the features using the mouse can benefit from the snapping, as long\n * as it is added before.\n *\n * The snap interaction modifies map browser event `coordinate` and `pixel`\n * properties to force the snap to occur to any interaction that them.\n *\n * Example:\n *\n *     import Snap from 'ol/interaction/Snap';\n *\n *     var snap = new Snap({\n *       source: source\n *     });\n *\n * @constructor\n * @extends {module:ol/interaction/Pointer}\n * @param {module:ol/interaction/Snap~Options=} opt_options Options.\n * @api\n */\nconst Snap = function(opt_options) {\n\n  PointerInteraction.call(this, {\n    handleEvent: handleEvent,\n    handleDownEvent: TRUE,\n    handleUpEvent: handleUpEvent\n  });\n\n  const options = opt_options ? opt_options : {};\n\n  /**\n   * @type {module:ol/source/Vector}\n   * @private\n   */\n  this.source_ = options.source ? options.source : null;\n\n  /**\n   * @private\n   * @type {boolean}\n   */\n  this.vertex_ = options.vertex !== undefined ? options.vertex : true;\n\n  /**\n   * @private\n   * @type {boolean}\n   */\n  this.edge_ = options.edge !== undefined ? options.edge : true;\n\n  /**\n   * @type {module:ol/Collection.<module:ol/Feature>}\n   * @private\n   */\n  this.features_ = options.features ? options.features : null;\n\n  /**\n   * @type {Array.<module:ol/events~EventsKey>}\n   * @private\n   */\n  this.featuresListenerKeys_ = [];\n\n  /**\n   * @type {Object.<number, module:ol/events~EventsKey>}\n   * @private\n   */\n  this.featureChangeListenerKeys_ = {};\n\n  /**\n   * Extents are preserved so indexed segment can be quickly removed\n   * when its feature geometry changes\n   * @type {Object.<number, module:ol/extent~Extent>}\n   * @private\n   */\n  this.indexedFeaturesExtents_ = {};\n\n  /**\n   * If a feature geometry changes while a pointer drag|move event occurs, the\n   * feature doesn't get updated right away.  It will be at the next 'pointerup'\n   * event fired.\n   * @type {!Object.<number, module:ol/Feature>}\n   * @private\n   */\n  this.pendingFeatures_ = {};\n\n  /**\n   * Used for distance sorting in sortByDistance_\n   * @type {module:ol/coordinate~Coordinate}\n   * @private\n   */\n  this.pixelCoordinate_ = null;\n\n  /**\n   * @type {number}\n   * @private\n   */\n  this.pixelTolerance_ = options.pixelTolerance !== undefined ?\n    options.pixelTolerance : 10;\n\n  /**\n   * @type {function(module:ol/interaction/Snap~SegmentData, module:ol/interaction/Snap~SegmentData): number}\n   * @private\n   */\n  this.sortByDistance_ = sortByDistance.bind(this);\n\n\n  /**\n  * Segment RTree for each layer\n  * @type {module:ol/structs/RBush.<module:ol/interaction/Snap~SegmentData>}\n  * @private\n  */\n  this.rBush_ = new RBush();\n\n\n  /**\n  * @const\n  * @private\n  * @type {Object.<string, function(module:ol/Feature, module:ol/geom/Geometry)>}\n  */\n  this.SEGMENT_WRITERS_ = {\n    'Point': this.writePointGeometry_,\n    'LineString': this.writeLineStringGeometry_,\n    'LinearRing': this.writeLineStringGeometry_,\n    'Polygon': this.writePolygonGeometry_,\n    'MultiPoint': this.writeMultiPointGeometry_,\n    'MultiLineString': this.writeMultiLineStringGeometry_,\n    'MultiPolygon': this.writeMultiPolygonGeometry_,\n    'GeometryCollection': this.writeGeometryCollectionGeometry_,\n    'Circle': this.writeCircleGeometry_\n  };\n};\n\ninherits(Snap, PointerInteraction);\n\n\n/**\n * Add a feature to the collection of features that we may snap to.\n * @param {module:ol/Feature} feature Feature.\n * @param {boolean=} opt_listen Whether to listen to the feature change or not\n *     Defaults to `true`.\n * @api\n */\nSnap.prototype.addFeature = function(feature, opt_listen) {\n  const register = opt_listen !== undefined ? opt_listen : true;\n  const feature_uid = getUid(feature);\n  const geometry = feature.getGeometry();\n  if (geometry) {\n    const segmentWriter = this.SEGMENT_WRITERS_[geometry.getType()];\n    if (segmentWriter) {\n      this.indexedFeaturesExtents_[feature_uid] = geometry.getExtent(createEmpty());\n      segmentWriter.call(this, feature, geometry);\n    }\n  }\n\n  if (register) {\n    this.featureChangeListenerKeys_[feature_uid] = listen(\n      feature,\n      EventType.CHANGE,\n      this.handleFeatureChange_, this);\n  }\n};\n\n\n/**\n * @param {module:ol/Feature} feature Feature.\n * @private\n */\nSnap.prototype.forEachFeatureAdd_ = function(feature) {\n  this.addFeature(feature);\n};\n\n\n/**\n * @param {module:ol/Feature} feature Feature.\n * @private\n */\nSnap.prototype.forEachFeatureRemove_ = function(feature) {\n  this.removeFeature(feature);\n};\n\n\n/**\n * @return {module:ol/Collection.<module:ol/Feature>|Array.<module:ol/Feature>} Features.\n * @private\n */\nSnap.prototype.getFeatures_ = function() {\n  let features;\n  if (this.features_) {\n    features = this.features_;\n  } else if (this.source_) {\n    features = this.source_.getFeatures();\n  }\n  return (\n    /** @type {!Array.<module:ol/Feature>|!module:ol/Collection.<module:ol/Feature>} */ (features)\n  );\n};\n\n\n/**\n * @param {module:ol/source/Vector|module:ol/Collection~CollectionEvent} evt Event.\n * @private\n */\nSnap.prototype.handleFeatureAdd_ = function(evt) {\n  let feature;\n  if (evt instanceof VectorSourceEvent) {\n    feature = evt.feature;\n  } else if (evt instanceof CollectionEvent) {\n    feature = evt.element;\n  }\n  this.addFeature(/** @type {module:ol/Feature} */ (feature));\n};\n\n\n/**\n * @param {module:ol/source/Vector|module:ol/Collection~CollectionEvent} evt Event.\n * @private\n */\nSnap.prototype.handleFeatureRemove_ = function(evt) {\n  let feature;\n  if (evt instanceof VectorSourceEvent) {\n    feature = evt.feature;\n  } else if (evt instanceof CollectionEvent) {\n    feature = evt.element;\n  }\n  this.removeFeature(/** @type {module:ol/Feature} */ (feature));\n};\n\n\n/**\n * @param {module:ol/events/Event} evt Event.\n * @private\n */\nSnap.prototype.handleFeatureChange_ = function(evt) {\n  const feature = /** @type {module:ol/Feature} */ (evt.target);\n  if (this.handlingDownUpSequence) {\n    const uid = getUid(feature);\n    if (!(uid in this.pendingFeatures_)) {\n      this.pendingFeatures_[uid] = feature;\n    }\n  } else {\n    this.updateFeature_(feature);\n  }\n};\n\n\n/**\n * Remove a feature from the collection of features that we may snap to.\n * @param {module:ol/Feature} feature Feature\n * @param {boolean=} opt_unlisten Whether to unlisten to the feature change\n *     or not. Defaults to `true`.\n * @api\n */\nSnap.prototype.removeFeature = function(feature, opt_unlisten) {\n  const unregister = opt_unlisten !== undefined ? opt_unlisten : true;\n  const feature_uid = getUid(feature);\n  const extent = this.indexedFeaturesExtents_[feature_uid];\n  if (extent) {\n    const rBush = this.rBush_;\n    const nodesToRemove = [];\n    rBush.forEachInExtent(extent, function(node) {\n      if (feature === node.feature) {\n        nodesToRemove.push(node);\n      }\n    });\n    for (let i = nodesToRemove.length - 1; i >= 0; --i) {\n      rBush.remove(nodesToRemove[i]);\n    }\n  }\n\n  if (unregister) {\n    unlistenByKey(this.featureChangeListenerKeys_[feature_uid]);\n    delete this.featureChangeListenerKeys_[feature_uid];\n  }\n};\n\n\n/**\n * @inheritDoc\n */\nSnap.prototype.setMap = function(map) {\n  const currentMap = this.getMap();\n  const keys = this.featuresListenerKeys_;\n  const features = this.getFeatures_();\n\n  if (currentMap) {\n    keys.forEach(unlistenByKey);\n    keys.length = 0;\n    features.forEach(this.forEachFeatureRemove_.bind(this));\n  }\n  PointerInteraction.prototype.setMap.call(this, map);\n\n  if (map) {\n    if (this.features_) {\n      keys.push(\n        listen(this.features_, CollectionEventType.ADD,\n          this.handleFeatureAdd_, this),\n        listen(this.features_, CollectionEventType.REMOVE,\n          this.handleFeatureRemove_, this)\n      );\n    } else if (this.source_) {\n      keys.push(\n        listen(this.source_, VectorEventType.ADDFEATURE,\n          this.handleFeatureAdd_, this),\n        listen(this.source_, VectorEventType.REMOVEFEATURE,\n          this.handleFeatureRemove_, this)\n      );\n    }\n    features.forEach(this.forEachFeatureAdd_.bind(this));\n  }\n};\n\n\n/**\n * @inheritDoc\n */\nSnap.prototype.shouldStopEvent = FALSE;\n\n\n/**\n * @param {module:ol~Pixel} pixel Pixel\n * @param {module:ol/coordinate~Coordinate} pixelCoordinate Coordinate\n * @param {module:ol/PluggableMap} map Map.\n * @return {module:ol/interaction/Snap~Result} Snap result\n */\nSnap.prototype.snapTo = function(pixel, pixelCoordinate, map) {\n\n  const lowerLeft = map.getCoordinateFromPixel(\n    [pixel[0] - this.pixelTolerance_, pixel[1] + this.pixelTolerance_]);\n  const upperRight = map.getCoordinateFromPixel(\n    [pixel[0] + this.pixelTolerance_, pixel[1] - this.pixelTolerance_]);\n  const box = boundingExtent([lowerLeft, upperRight]);\n\n  let segments = this.rBush_.getInExtent(box);\n\n  // If snapping on vertices only, don't consider circles\n  if (this.vertex_ && !this.edge_) {\n    segments = segments.filter(function(segment) {\n      return segment.feature.getGeometry().getType() !==\n          GeometryType.CIRCLE;\n    });\n  }\n\n  let snappedToVertex = false;\n  let snapped = false;\n  let vertex = null;\n  let vertexPixel = null;\n  let dist, pixel1, pixel2, squaredDist1, squaredDist2;\n  if (segments.length > 0) {\n    this.pixelCoordinate_ = pixelCoordinate;\n    segments.sort(this.sortByDistance_);\n    const closestSegment = segments[0].segment;\n    const isCircle = segments[0].feature.getGeometry().getType() ===\n        GeometryType.CIRCLE;\n    if (this.vertex_ && !this.edge_) {\n      pixel1 = map.getPixelFromCoordinate(closestSegment[0]);\n      pixel2 = map.getPixelFromCoordinate(closestSegment[1]);\n      squaredDist1 = squaredCoordinateDistance(pixel, pixel1);\n      squaredDist2 = squaredCoordinateDistance(pixel, pixel2);\n      dist = Math.sqrt(Math.min(squaredDist1, squaredDist2));\n      snappedToVertex = dist <= this.pixelTolerance_;\n      if (snappedToVertex) {\n        snapped = true;\n        vertex = squaredDist1 > squaredDist2 ? closestSegment[1] : closestSegment[0];\n        vertexPixel = map.getPixelFromCoordinate(vertex);\n      }\n    } else if (this.edge_) {\n      if (isCircle) {\n        vertex = closestOnCircle(pixelCoordinate,\n          /** @type {module:ol/geom/Circle} */ (segments[0].feature.getGeometry()));\n      } else {\n        vertex = closestOnSegment(pixelCoordinate, closestSegment);\n      }\n      vertexPixel = map.getPixelFromCoordinate(vertex);\n      if (coordinateDistance(pixel, vertexPixel) <= this.pixelTolerance_) {\n        snapped = true;\n        if (this.vertex_ && !isCircle) {\n          pixel1 = map.getPixelFromCoordinate(closestSegment[0]);\n          pixel2 = map.getPixelFromCoordinate(closestSegment[1]);\n          squaredDist1 = squaredCoordinateDistance(vertexPixel, pixel1);\n          squaredDist2 = squaredCoordinateDistance(vertexPixel, pixel2);\n          dist = Math.sqrt(Math.min(squaredDist1, squaredDist2));\n          snappedToVertex = dist <= this.pixelTolerance_;\n          if (snappedToVertex) {\n            vertex = squaredDist1 > squaredDist2 ? closestSegment[1] : closestSegment[0];\n            vertexPixel = map.getPixelFromCoordinate(vertex);\n          }\n        }\n      }\n    }\n    if (snapped) {\n      vertexPixel = [Math.round(vertexPixel[0]), Math.round(vertexPixel[1])];\n    }\n  }\n  return (\n    /** @type {module:ol/interaction/Snap~Result} */ ({\n      snapped: snapped,\n      vertex: vertex,\n      vertexPixel: vertexPixel\n    })\n  );\n};\n\n\n/**\n * @param {module:ol/Feature} feature Feature\n * @private\n */\nSnap.prototype.updateFeature_ = function(feature) {\n  this.removeFeature(feature, false);\n  this.addFeature(feature, false);\n};\n\n\n/**\n * @param {module:ol/Feature} feature Feature\n * @param {module:ol/geom/Circle} geometry Geometry.\n * @private\n */\nSnap.prototype.writeCircleGeometry_ = function(feature, geometry) {\n  const polygon = fromCircle(geometry);\n  const coordinates = polygon.getCoordinates()[0];\n  for (let i = 0, ii = coordinates.length - 1; i < ii; ++i) {\n    const segment = coordinates.slice(i, i + 2);\n    const segmentData = /** @type {module:ol/interaction/Snap~SegmentData} */ ({\n      feature: feature,\n      segment: segment\n    });\n    this.rBush_.insert(boundingExtent(segment), segmentData);\n  }\n};\n\n\n/**\n * @param {module:ol/Feature} feature Feature\n * @param {module:ol/geom/GeometryCollection} geometry Geometry.\n * @private\n */\nSnap.prototype.writeGeometryCollectionGeometry_ = function(feature, geometry) {\n  const geometries = geometry.getGeometriesArray();\n  for (let i = 0; i < geometries.length; ++i) {\n    const segmentWriter = this.SEGMENT_WRITERS_[geometries[i].getType()];\n    if (segmentWriter) {\n      segmentWriter.call(this, feature, geometries[i]);\n    }\n  }\n};\n\n\n/**\n * @param {module:ol/Feature} feature Feature\n * @param {module:ol/geom/LineString} geometry Geometry.\n * @private\n */\nSnap.prototype.writeLineStringGeometry_ = function(feature, geometry) {\n  const coordinates = geometry.getCoordinates();\n  for (let i = 0, ii = coordinates.length - 1; i < ii; ++i) {\n    const segment = coordinates.slice(i, i + 2);\n    const segmentData = /** @type {module:ol/interaction/Snap~SegmentData} */ ({\n      feature: feature,\n      segment: segment\n    });\n    this.rBush_.insert(boundingExtent(segment), segmentData);\n  }\n};\n\n\n/**\n * @param {module:ol/Feature} feature Feature\n * @param {module:ol/geom/MultiLineString} geometry Geometry.\n * @private\n */\nSnap.prototype.writeMultiLineStringGeometry_ = function(feature, geometry) {\n  const lines = geometry.getCoordinates();\n  for (let j = 0, jj = lines.length; j < jj; ++j) {\n    const coordinates = lines[j];\n    for (let i = 0, ii = coordinates.length - 1; i < ii; ++i) {\n      const segment = coordinates.slice(i, i + 2);\n      const segmentData = /** @type {module:ol/interaction/Snap~SegmentData} */ ({\n        feature: feature,\n        segment: segment\n      });\n      this.rBush_.insert(boundingExtent(segment), segmentData);\n    }\n  }\n};\n\n\n/**\n * @param {module:ol/Feature} feature Feature\n * @param {module:ol/geom/MultiPoint} geometry Geometry.\n * @private\n */\nSnap.prototype.writeMultiPointGeometry_ = function(feature, geometry) {\n  const points = geometry.getCoordinates();\n  for (let i = 0, ii = points.length; i < ii; ++i) {\n    const coordinates = points[i];\n    const segmentData = /** @type {module:ol/interaction/Snap~SegmentData} */ ({\n      feature: feature,\n      segment: [coordinates, coordinates]\n    });\n    this.rBush_.insert(geometry.getExtent(), segmentData);\n  }\n};\n\n\n/**\n * @param {module:ol/Feature} feature Feature\n * @param {module:ol/geom/MultiPolygon} geometry Geometry.\n * @private\n */\nSnap.prototype.writeMultiPolygonGeometry_ = function(feature, geometry) {\n  const polygons = geometry.getCoordinates();\n  for (let k = 0, kk = polygons.length; k < kk; ++k) {\n    const rings = polygons[k];\n    for (let j = 0, jj = rings.length; j < jj; ++j) {\n      const coordinates = rings[j];\n      for (let i = 0, ii = coordinates.length - 1; i < ii; ++i) {\n        const segment = coordinates.slice(i, i + 2);\n        const segmentData = /** @type {module:ol/interaction/Snap~SegmentData} */ ({\n          feature: feature,\n          segment: segment\n        });\n        this.rBush_.insert(boundingExtent(segment), segmentData);\n      }\n    }\n  }\n};\n\n\n/**\n * @param {module:ol/Feature} feature Feature\n * @param {module:ol/geom/Point} geometry Geometry.\n * @private\n */\nSnap.prototype.writePointGeometry_ = function(feature, geometry) {\n  const coordinates = geometry.getCoordinates();\n  const segmentData = /** @type {module:ol/interaction/Snap~SegmentData} */ ({\n    feature: feature,\n    segment: [coordinates, coordinates]\n  });\n  this.rBush_.insert(geometry.getExtent(), segmentData);\n};\n\n\n/**\n * @param {module:ol/Feature} feature Feature\n * @param {module:ol/geom/Polygon} geometry Geometry.\n * @private\n */\nSnap.prototype.writePolygonGeometry_ = function(feature, geometry) {\n  const rings = geometry.getCoordinates();\n  for (let j = 0, jj = rings.length; j < jj; ++j) {\n    const coordinates = rings[j];\n    for (let i = 0, ii = coordinates.length - 1; i < ii; ++i) {\n      const segment = coordinates.slice(i, i + 2);\n      const segmentData = /** @type {module:ol/interaction/Snap~SegmentData} */ ({\n        feature: feature,\n        segment: segment\n      });\n      this.rBush_.insert(boundingExtent(segment), segmentData);\n    }\n  }\n};\n\n\n/**\n * Handle all pointer events events.\n * @param {module:ol/MapBrowserEvent} evt A move event.\n * @return {boolean} Pass the event to other interactions.\n * @this {module:ol/interaction/Snap}\n */\nexport function handleEvent(evt) {\n  const result = this.snapTo(evt.pixel, evt.coordinate, evt.map);\n  if (result.snapped) {\n    evt.coordinate = result.vertex.slice(0, 2);\n    evt.pixel = result.vertexPixel;\n  }\n  return handlePointerEvent.call(this, evt);\n}\n\n\n/**\n * @param {module:ol/MapBrowserPointerEvent} evt Event.\n * @return {boolean} Stop drag sequence?\n * @this {module:ol/interaction/Snap}\n */\nfunction handleUpEvent(evt) {\n  const featuresToUpdate = getValues(this.pendingFeatures_);\n  if (featuresToUpdate.length) {\n    featuresToUpdate.forEach(this.updateFeature_.bind(this));\n    this.pendingFeatures_ = {};\n  }\n  return false;\n}\n\n\n/**\n * Sort segments by distance, helper function\n * @param {module:ol/interaction/Snap~SegmentData} a The first segment data.\n * @param {module:ol/interaction/Snap~SegmentData} b The second segment data.\n * @return {number} The difference in distance.\n * @this {module:ol/interaction/Snap}\n */\nfunction sortByDistance(a, b) {\n  const deltaA = squaredDistanceToSegment(this.pixelCoordinate_, a.segment);\n  const deltaB = squaredDistanceToSegment(this.pixelCoordinate_, b.segment);\n  return deltaA - deltaB;\n}\n\nexport default Snap;\n","/**\n * @module ol/interaction/DragRotateAndZoom\n */\nimport {inherits} from '../util.js';\nimport {disable} from '../rotationconstraint.js';\nimport ViewHint from '../ViewHint.js';\nimport {shiftKeyOnly, mouseOnly} from '../events/condition.js';\nimport {rotate, rotateWithoutConstraints, zoom, zoomWithoutConstraints} from '../interaction/Interaction.js';\nimport PointerInteraction from '../interaction/Pointer.js';\n\n\n/**\n * @typedef {Object} Options\n * @property {module:ol/events/condition~Condition} [condition] A function that\n * takes an {@link module:ol/MapBrowserEvent~MapBrowserEvent} and returns a\n * boolean to indicate whether that event should be handled.\n * Default is {@link module:ol/events/condition~shiftKeyOnly}.\n * @property {number} [duration=400] Animation duration in milliseconds.\n */\n\n\n/**\n * @classdesc\n * Allows the user to zoom and rotate the map by clicking and dragging\n * on the map.  By default, this interaction is limited to when the shift\n * key is held down.\n *\n * This interaction is only supported for mouse devices.\n *\n * And this interaction is not included in the default interactions.\n *\n * @constructor\n * @extends {module:ol/interaction/Pointer}\n * @param {module:ol/interaction/DragRotateAndZoom~Options=} opt_options Options.\n * @api\n */\nconst DragRotateAndZoom = function(opt_options) {\n\n  const options = opt_options ? opt_options : {};\n\n  PointerInteraction.call(this, {\n    handleDownEvent: handleDownEvent,\n    handleDragEvent: handleDragEvent,\n    handleUpEvent: handleUpEvent\n  });\n\n  /**\n   * @private\n   * @type {module:ol/events/condition~Condition}\n   */\n  this.condition_ = options.condition ? options.condition : shiftKeyOnly;\n\n  /**\n   * @private\n   * @type {number|undefined}\n   */\n  this.lastAngle_ = undefined;\n\n  /**\n   * @private\n   * @type {number|undefined}\n   */\n  this.lastMagnitude_ = undefined;\n\n  /**\n   * @private\n   * @type {number}\n   */\n  this.lastScaleDelta_ = 0;\n\n  /**\n   * @private\n   * @type {number}\n   */\n  this.duration_ = options.duration !== undefined ? options.duration : 400;\n\n};\n\ninherits(DragRotateAndZoom, PointerInteraction);\n\n\n/**\n * @param {module:ol/MapBrowserPointerEvent} mapBrowserEvent Event.\n * @this {module:ol/interaction/DragRotateAndZoom}\n */\nfunction handleDragEvent(mapBrowserEvent) {\n  if (!mouseOnly(mapBrowserEvent)) {\n    return;\n  }\n\n  const map = mapBrowserEvent.map;\n  const size = map.getSize();\n  const offset = mapBrowserEvent.pixel;\n  const deltaX = offset[0] - size[0] / 2;\n  const deltaY = size[1] / 2 - offset[1];\n  const theta = Math.atan2(deltaY, deltaX);\n  const magnitude = Math.sqrt(deltaX * deltaX + deltaY * deltaY);\n  const view = map.getView();\n  if (view.getConstraints().rotation !== disable && this.lastAngle_ !== undefined) {\n    const angleDelta = theta - this.lastAngle_;\n    rotateWithoutConstraints(view, view.getRotation() - angleDelta);\n  }\n  this.lastAngle_ = theta;\n  if (this.lastMagnitude_ !== undefined) {\n    const resolution = this.lastMagnitude_ * (view.getResolution() / magnitude);\n    zoomWithoutConstraints(view, resolution);\n  }\n  if (this.lastMagnitude_ !== undefined) {\n    this.lastScaleDelta_ = this.lastMagnitude_ / magnitude;\n  }\n  this.lastMagnitude_ = magnitude;\n}\n\n\n/**\n * @param {module:ol/MapBrowserPointerEvent} mapBrowserEvent Event.\n * @return {boolean} Stop drag sequence?\n * @this {module:ol/interaction/DragRotateAndZoom}\n */\nfunction handleUpEvent(mapBrowserEvent) {\n  if (!mouseOnly(mapBrowserEvent)) {\n    return true;\n  }\n\n  const map = mapBrowserEvent.map;\n  const view = map.getView();\n  view.setHint(ViewHint.INTERACTING, -1);\n  const direction = this.lastScaleDelta_ - 1;\n  rotate(view, view.getRotation());\n  zoom(view, view.getResolution(), undefined, this.duration_, direction);\n  this.lastScaleDelta_ = 0;\n  return false;\n}\n\n\n/**\n * @param {module:ol/MapBrowserPointerEvent} mapBrowserEvent Event.\n * @return {boolean} Start drag sequence?\n * @this {module:ol/interaction/DragRotateAndZoom}\n */\nfunction handleDownEvent(mapBrowserEvent) {\n  if (!mouseOnly(mapBrowserEvent)) {\n    return false;\n  }\n\n  if (this.condition_(mapBrowserEvent)) {\n    mapBrowserEvent.map.getView().setHint(ViewHint.INTERACTING, 1);\n    this.lastAngle_ = undefined;\n    this.lastMagnitude_ = undefined;\n    return true;\n  } else {\n    return false;\n  }\n}\n\nexport default DragRotateAndZoom;\n","/**\n * @module ol/geom/Circle\n */\nimport {inherits} from '../util.js';\nimport {createOrUpdate, forEachCorner, intersects} from '../extent.js';\nimport GeometryLayout from '../geom/GeometryLayout.js';\nimport GeometryType from '../geom/GeometryType.js';\nimport SimpleGeometry from '../geom/SimpleGeometry.js';\nimport {deflateCoordinate} from '../geom/flat/deflate.js';\n\n/**\n * @classdesc\n * Circle geometry.\n *\n * @constructor\n * @extends {module:ol/geom/SimpleGeometry}\n * @param {module:ol/coordinate~Coordinate} center Center.\n * @param {number=} opt_radius Radius.\n * @param {module:ol/geom/GeometryLayout=} opt_layout Layout.\n * @api\n */\nconst Circle = function(center, opt_radius, opt_layout) {\n  SimpleGeometry.call(this);\n  const radius = opt_radius ? opt_radius : 0;\n  this.setCenterAndRadius(center, radius, opt_layout);\n};\n\ninherits(Circle, SimpleGeometry);\n\n\n/**\n * Make a complete copy of the geometry.\n * @return {!module:ol/geom/Circle} Clone.\n * @override\n * @api\n */\nCircle.prototype.clone = function() {\n  const circle = new Circle(null);\n  circle.setFlatCoordinates(this.layout, this.flatCoordinates.slice());\n  return circle;\n};\n\n\n/**\n * @inheritDoc\n */\nCircle.prototype.closestPointXY = function(x, y, closestPoint, minSquaredDistance) {\n  const flatCoordinates = this.flatCoordinates;\n  const dx = x - flatCoordinates[0];\n  const dy = y - flatCoordinates[1];\n  const squaredDistance = dx * dx + dy * dy;\n  if (squaredDistance < minSquaredDistance) {\n    if (squaredDistance === 0) {\n      for (let i = 0; i < this.stride; ++i) {\n        closestPoint[i] = flatCoordinates[i];\n      }\n    } else {\n      const delta = this.getRadius() / Math.sqrt(squaredDistance);\n      closestPoint[0] = flatCoordinates[0] + delta * dx;\n      closestPoint[1] = flatCoordinates[1] + delta * dy;\n      for (let i = 2; i < this.stride; ++i) {\n        closestPoint[i] = flatCoordinates[i];\n      }\n    }\n    closestPoint.length = this.stride;\n    return squaredDistance;\n  } else {\n    return minSquaredDistance;\n  }\n};\n\n\n/**\n * @inheritDoc\n */\nCircle.prototype.containsXY = function(x, y) {\n  const flatCoordinates = this.flatCoordinates;\n  const dx = x - flatCoordinates[0];\n  const dy = y - flatCoordinates[1];\n  return dx * dx + dy * dy <= this.getRadiusSquared_();\n};\n\n\n/**\n * Return the center of the circle as {@link module:ol/coordinate~Coordinate coordinate}.\n * @return {module:ol/coordinate~Coordinate} Center.\n * @api\n */\nCircle.prototype.getCenter = function() {\n  return this.flatCoordinates.slice(0, this.stride);\n};\n\n\n/**\n * @inheritDoc\n */\nCircle.prototype.computeExtent = function(extent) {\n  const flatCoordinates = this.flatCoordinates;\n  const radius = flatCoordinates[this.stride] - flatCoordinates[0];\n  return createOrUpdate(\n    flatCoordinates[0] - radius, flatCoordinates[1] - radius,\n    flatCoordinates[0] + radius, flatCoordinates[1] + radius,\n    extent);\n};\n\n\n/**\n * Return the radius of the circle.\n * @return {number} Radius.\n * @api\n */\nCircle.prototype.getRadius = function() {\n  return Math.sqrt(this.getRadiusSquared_());\n};\n\n\n/**\n * @private\n * @return {number} Radius squared.\n */\nCircle.prototype.getRadiusSquared_ = function() {\n  const dx = this.flatCoordinates[this.stride] - this.flatCoordinates[0];\n  const dy = this.flatCoordinates[this.stride + 1] - this.flatCoordinates[1];\n  return dx * dx + dy * dy;\n};\n\n\n/**\n * @inheritDoc\n * @api\n */\nCircle.prototype.getType = function() {\n  return GeometryType.CIRCLE;\n};\n\n\n/**\n * @inheritDoc\n * @api\n */\nCircle.prototype.intersectsExtent = function(extent) {\n  const circleExtent = this.getExtent();\n  if (intersects(extent, circleExtent)) {\n    const center = this.getCenter();\n\n    if (extent[0] <= center[0] && extent[2] >= center[0]) {\n      return true;\n    }\n    if (extent[1] <= center[1] && extent[3] >= center[1]) {\n      return true;\n    }\n\n    return forEachCorner(extent, this.intersectsCoordinate, this);\n  }\n  return false;\n\n};\n\n\n/**\n * Set the center of the circle as {@link module:ol/coordinate~Coordinate coordinate}.\n * @param {module:ol/coordinate~Coordinate} center Center.\n * @api\n */\nCircle.prototype.setCenter = function(center) {\n  const stride = this.stride;\n  const radius = this.flatCoordinates[stride] - this.flatCoordinates[0];\n  const flatCoordinates = center.slice();\n  flatCoordinates[stride] = flatCoordinates[0] + radius;\n  for (let i = 1; i < stride; ++i) {\n    flatCoordinates[stride + i] = center[i];\n  }\n  this.setFlatCoordinates(this.layout, flatCoordinates);\n};\n\n\n/**\n * Set the center (as {@link module:ol/coordinate~Coordinate coordinate}) and the radius (as\n * number) of the circle.\n * @param {module:ol/coordinate~Coordinate} center Center.\n * @param {number} radius Radius.\n * @param {module:ol/geom/GeometryLayout=} opt_layout Layout.\n * @api\n */\nCircle.prototype.setCenterAndRadius = function(center, radius, opt_layout) {\n  if (!center) {\n    this.setFlatCoordinates(GeometryLayout.XY, null);\n  } else {\n    this.setLayout(opt_layout, center, 0);\n    if (!this.flatCoordinates) {\n      this.flatCoordinates = [];\n    }\n    /** @type {Array.<number>} */\n    const flatCoordinates = this.flatCoordinates;\n    let offset = deflateCoordinate(\n      flatCoordinates, 0, center, this.stride);\n    flatCoordinates[offset++] = flatCoordinates[0] + radius;\n    for (let i = 1, ii = this.stride; i < ii; ++i) {\n      flatCoordinates[offset++] = flatCoordinates[i];\n    }\n    flatCoordinates.length = offset;\n    this.changed();\n  }\n};\n\n\n/**\n * @inheritDoc\n */\nCircle.prototype.getCoordinates = function() {};\n\n\n/**\n * @inheritDoc\n */\nCircle.prototype.setCoordinates = function(coordinates, opt_layout) {};\n\n\n/**\n * @param {module:ol/geom/GeometryLayout} layout Layout.\n * @param {Array.<number>} flatCoordinates Flat coordinates.\n */\nCircle.prototype.setFlatCoordinates = function(layout, flatCoordinates) {\n  this.setFlatCoordinatesInternal(layout, flatCoordinates);\n  this.changed();\n};\n\n\n/**\n * Set the radius of the circle. The radius is in the units of the projection.\n * @param {number} radius Radius.\n * @api\n */\nCircle.prototype.setRadius = function(radius) {\n  this.flatCoordinates[this.stride] = this.flatCoordinates[0] + radius;\n  this.changed();\n};\n\n\n/**\n * Transform each coordinate of the circle from one coordinate reference system\n * to another. The geometry is modified in place.\n * If you do not want the geometry modified in place, first clone() it and\n * then use this function on the clone.\n *\n * Internally a circle is currently represented by two points: the center of\n * the circle `[cx, cy]`, and the point to the right of the circle\n * `[cx + r, cy]`. This `transform` function just transforms these two points.\n * So the resulting geometry is also a circle, and that circle does not\n * correspond to the shape that would be obtained by transforming every point\n * of the original circle.\n *\n * @param {module:ol/proj~ProjectionLike} source The current projection.  Can be a\n *     string identifier or a {@link module:ol/proj/Projection~Projection} object.\n * @param {module:ol/proj~ProjectionLike} destination The desired projection.  Can be a\n *     string identifier or a {@link module:ol/proj/Projection~Projection} object.\n * @return {module:ol/geom/Circle} This geometry.  Note that original geometry is\n *     modified in place.\n * @function\n * @api\n */\nCircle.prototype.transform;\nexport default Circle;\n","/**\n * @module ol/renderer/canvas/ImageLayer\n */\nimport {ENABLE_RASTER_REPROJECTION} from '../../reproj/common.js';\nimport {inherits} from '../../util.js';\nimport ImageCanvas from '../../ImageCanvas.js';\nimport LayerType from '../../LayerType.js';\nimport ViewHint from '../../ViewHint.js';\nimport {equals} from '../../array.js';\nimport {getHeight, getIntersection, getWidth, isEmpty} from '../../extent.js';\nimport VectorRenderType from '../../layer/VectorRenderType.js';\nimport {assign} from '../../obj.js';\nimport {layerRendererConstructors} from './Map.js';\nimport IntermediateCanvasRenderer from '../canvas/IntermediateCanvas.js';\nimport {create as createTransform, compose as composeTransform} from '../../transform.js';\n\n/**\n * @constructor\n * @extends {module:ol/renderer/canvas/IntermediateCanvas}\n * @param {module:ol/layer/Image|module:ol/layer/Vector} imageLayer Image or vector layer.\n * @api\n */\nconst CanvasImageLayerRenderer = function(imageLayer) {\n\n  IntermediateCanvasRenderer.call(this, imageLayer);\n\n  /**\n   * @private\n   * @type {?module:ol/ImageBase}\n   */\n  this.image_ = null;\n\n  /**\n   * @private\n   * @type {module:ol/transform~Transform}\n   */\n  this.imageTransform_ = createTransform();\n\n  /**\n   * @type {!Array.<string>}\n   */\n  this.skippedFeatures_ = [];\n\n  /**\n   * @private\n   * @type {module:ol/renderer/canvas/VectorLayer}\n   */\n  this.vectorRenderer_ = null;\n\n  if (imageLayer.getType() === LayerType.VECTOR) {\n    for (let i = 0, ii = layerRendererConstructors.length; i < ii; ++i) {\n      const ctor = layerRendererConstructors[i];\n      if (ctor !== CanvasImageLayerRenderer && ctor['handles'](imageLayer)) {\n        this.vectorRenderer_ = new ctor(imageLayer);\n        break;\n      }\n    }\n  }\n\n};\n\ninherits(CanvasImageLayerRenderer, IntermediateCanvasRenderer);\n\n\n/**\n * Determine if this renderer handles the provided layer.\n * @param {module:ol/layer/Layer} layer The candidate layer.\n * @return {boolean} The renderer can render the layer.\n */\nCanvasImageLayerRenderer['handles'] = function(layer) {\n  return layer.getType() === LayerType.IMAGE ||\n    layer.getType() === LayerType.VECTOR &&\n    /** @type {module:ol/layer/Vector} */ (layer).getRenderMode() === VectorRenderType.IMAGE;\n};\n\n\n/**\n * Create a layer renderer.\n * @param {module:ol/renderer/Map} mapRenderer The map renderer.\n * @param {module:ol/layer/Layer} layer The layer to be rendererd.\n * @return {module:ol/renderer/canvas/ImageLayer} The layer renderer.\n */\nCanvasImageLayerRenderer['create'] = function(mapRenderer, layer) {\n  return new CanvasImageLayerRenderer(/** @type {module:ol/layer/Image} */ (layer));\n};\n\n\n/**\n * @inheritDoc\n */\nCanvasImageLayerRenderer.prototype.disposeInternal = function() {\n  if (this.vectorRenderer_) {\n    this.vectorRenderer_.dispose();\n  }\n  IntermediateCanvasRenderer.prototype.disposeInternal.call(this);\n};\n\n\n/**\n * @inheritDoc\n */\nCanvasImageLayerRenderer.prototype.getImage = function() {\n  return !this.image_ ? null : this.image_.getImage();\n};\n\n\n/**\n * @inheritDoc\n */\nCanvasImageLayerRenderer.prototype.getImageTransform = function() {\n  return this.imageTransform_;\n};\n\n\n/**\n * @inheritDoc\n */\nCanvasImageLayerRenderer.prototype.prepareFrame = function(frameState, layerState) {\n\n  const pixelRatio = frameState.pixelRatio;\n  const size = frameState.size;\n  const viewState = frameState.viewState;\n  const viewCenter = viewState.center;\n  const viewResolution = viewState.resolution;\n\n  let image;\n  const imageLayer = /** @type {module:ol/layer/Image} */ (this.getLayer());\n  const imageSource = imageLayer.getSource();\n\n  const hints = frameState.viewHints;\n\n  const vectorRenderer = this.vectorRenderer_;\n  let renderedExtent = frameState.extent;\n  if (!vectorRenderer && layerState.extent !== undefined) {\n    renderedExtent = getIntersection(renderedExtent, layerState.extent);\n  }\n\n  if (!hints[ViewHint.ANIMATING] && !hints[ViewHint.INTERACTING] &&\n      !isEmpty(renderedExtent)) {\n    let projection = viewState.projection;\n    if (!ENABLE_RASTER_REPROJECTION) {\n      const sourceProjection = imageSource.getProjection();\n      if (sourceProjection) {\n        projection = sourceProjection;\n      }\n    }\n    let skippedFeatures = this.skippedFeatures_;\n    if (vectorRenderer) {\n      const context = vectorRenderer.context;\n      const imageFrameState = /** @type {module:ol/PluggableMap~FrameState} */ (assign({}, frameState, {\n        size: [\n          getWidth(renderedExtent) / viewResolution,\n          getHeight(renderedExtent) / viewResolution\n        ],\n        viewState: /** @type {module:ol/View~State} */ (assign({}, frameState.viewState, {\n          rotation: 0\n        }))\n      }));\n      const newSkippedFeatures = Object.keys(imageFrameState.skippedFeatureUids).sort();\n      image = new ImageCanvas(renderedExtent, viewResolution, pixelRatio, context.canvas, function(callback) {\n        if (vectorRenderer.prepareFrame(imageFrameState, layerState) &&\n            (vectorRenderer.replayGroupChanged ||\n            !equals(skippedFeatures, newSkippedFeatures))) {\n          context.canvas.width = imageFrameState.size[0] * pixelRatio;\n          context.canvas.height = imageFrameState.size[1] * pixelRatio;\n          vectorRenderer.compose(context, imageFrameState, layerState);\n          skippedFeatures = newSkippedFeatures;\n          callback();\n        }\n      });\n    } else {\n      image = imageSource.getImage(\n        renderedExtent, viewResolution, pixelRatio, projection);\n    }\n    if (image && this.loadImage(image)) {\n      this.image_ = image;\n      this.skippedFeatures_ = skippedFeatures;\n    }\n  }\n\n  if (this.image_) {\n    image = this.image_;\n    const imageExtent = image.getExtent();\n    const imageResolution = image.getResolution();\n    const imagePixelRatio = image.getPixelRatio();\n    const scale = pixelRatio * imageResolution /\n        (viewResolution * imagePixelRatio);\n    const transform = composeTransform(this.imageTransform_,\n      pixelRatio * size[0] / 2, pixelRatio * size[1] / 2,\n      scale, scale,\n      0,\n      imagePixelRatio * (imageExtent[0] - viewCenter[0]) / imageResolution,\n      imagePixelRatio * (viewCenter[1] - imageExtent[3]) / imageResolution);\n    composeTransform(this.coordinateToCanvasPixelTransform,\n      pixelRatio * size[0] / 2 - transform[4], pixelRatio * size[1] / 2 - transform[5],\n      pixelRatio / viewResolution, -pixelRatio / viewResolution,\n      0,\n      -viewCenter[0], -viewCenter[1]);\n\n    this.renderedResolution = imageResolution * pixelRatio / imagePixelRatio;\n  }\n\n  return !!this.image_;\n};\n\n\n/**\n * @inheritDoc\n */\nCanvasImageLayerRenderer.prototype.forEachFeatureAtCoordinate = function(coordinate, frameState, hitTolerance, callback, thisArg) {\n  if (this.vectorRenderer_) {\n    return this.vectorRenderer_.forEachFeatureAtCoordinate(coordinate, frameState, hitTolerance, callback, thisArg);\n  } else {\n    return IntermediateCanvasRenderer.prototype.forEachFeatureAtCoordinate.call(this, coordinate, frameState, hitTolerance, callback, thisArg);\n  }\n};\n\n\nexport default CanvasImageLayerRenderer;\n","/**\n * @module ol/style/IconImageCache\n */\nimport {asString} from '../color.js';\n\n/**\n * Singleton class. Available through {@link module:ol/style/IconImageCache~shared}.\n * @constructor\n */\nconst IconImageCache = function() {\n\n  /**\n   * @type {!Object.<string, module:ol/style/IconImage>}\n   * @private\n   */\n  this.cache_ = {};\n\n  /**\n   * @type {number}\n   * @private\n   */\n  this.cacheSize_ = 0;\n\n  /**\n   * @type {number}\n   * @private\n   */\n  this.maxCacheSize_ = 32;\n};\n\n\n/**\n * @param {string} src Src.\n * @param {?string} crossOrigin Cross origin.\n * @param {module:ol/color~Color} color Color.\n * @return {string} Cache key.\n */\nfunction getKey(src, crossOrigin, color) {\n  const colorString = color ? asString(color) : 'null';\n  return crossOrigin + ':' + src + ':' + colorString;\n}\n\n\n/**\n * FIXME empty description for jsdoc\n */\nIconImageCache.prototype.clear = function() {\n  this.cache_ = {};\n  this.cacheSize_ = 0;\n};\n\n\n/**\n * FIXME empty description for jsdoc\n */\nIconImageCache.prototype.expire = function() {\n  if (this.cacheSize_ > this.maxCacheSize_) {\n    let i = 0;\n    for (const key in this.cache_) {\n      const iconImage = this.cache_[key];\n      if ((i++ & 3) === 0 && !iconImage.hasListener()) {\n        delete this.cache_[key];\n        --this.cacheSize_;\n      }\n    }\n  }\n};\n\n\n/**\n * @param {string} src Src.\n * @param {?string} crossOrigin Cross origin.\n * @param {module:ol/color~Color} color Color.\n * @return {module:ol/style/IconImage} Icon image.\n */\nIconImageCache.prototype.get = function(src, crossOrigin, color) {\n  const key = getKey(src, crossOrigin, color);\n  return key in this.cache_ ? this.cache_[key] : null;\n};\n\n\n/**\n * @param {string} src Src.\n * @param {?string} crossOrigin Cross origin.\n * @param {module:ol/color~Color} color Color.\n * @param {module:ol/style/IconImage} iconImage Icon image.\n */\nIconImageCache.prototype.set = function(src, crossOrigin, color, iconImage) {\n  const key = getKey(src, crossOrigin, color);\n  this.cache_[key] = iconImage;\n  ++this.cacheSize_;\n};\n\n\n/**\n * Set the cache size of the icon cache. Default is `32`. Change this value when\n * your map uses more than 32 different icon images and you are not caching icon\n * styles on the application level.\n * @param {number} maxCacheSize Cache max size.\n * @api\n */\nIconImageCache.prototype.setSize = function(maxCacheSize) {\n  this.maxCacheSize_ = maxCacheSize;\n  this.expire();\n};\nexport default IconImageCache;\n\n\n/**\n * The {@link module:ol/style/IconImageCache~IconImageCache} for\n * {@link module:ol/style/Icon~Icon} images.\n * @api\n */\nexport const shared = new IconImageCache();\n","/**\n * @module ol/renderer/canvas/Map\n */\nimport {create as createTransform, apply as applyTransform, compose as composeTransform} from '../../transform.js';\nimport {inherits} from '../../util.js';\nimport {includes, stableSort} from '../../array.js';\nimport {CLASS_UNSELECTABLE} from '../../css.js';\nimport {createCanvasContext2D} from '../../dom.js';\nimport {visibleAtResolution} from '../../layer/Layer.js';\nimport RenderEvent from '../../render/Event.js';\nimport RenderEventType from '../../render/EventType.js';\nimport {rotateAtOffset} from '../../render/canvas.js';\nimport CanvasImmediateRenderer from '../../render/canvas/Immediate.js';\nimport MapRenderer, {sortByZIndex} from '../Map.js';\nimport SourceState from '../../source/State.js';\n\n\n/**\n * @type {Array.<module:ol/renderer/Layer>}\n */\nexport const layerRendererConstructors = [];\n\n\n/**\n * @constructor\n * @extends {module:ol/renderer/Map}\n * @param {module:ol/PluggableMap} map Map.\n * @api\n */\nconst CanvasMapRenderer = function(map) {\n  MapRenderer.call(this, map);\n\n  const container = map.getViewport();\n\n  /**\n   * @private\n   * @type {CanvasRenderingContext2D}\n   */\n  this.context_ = createCanvasContext2D();\n\n  /**\n   * @private\n   * @type {HTMLCanvasElement}\n   */\n  this.canvas_ = this.context_.canvas;\n\n  this.canvas_.style.width = '100%';\n  this.canvas_.style.height = '100%';\n  this.canvas_.style.display = 'block';\n  this.canvas_.className = CLASS_UNSELECTABLE;\n  container.insertBefore(this.canvas_, container.childNodes[0] || null);\n\n  /**\n   * @private\n   * @type {boolean}\n   */\n  this.renderedVisible_ = true;\n\n  /**\n   * @private\n   * @type {module:ol/transform~Transform}\n   */\n  this.transform_ = createTransform();\n\n};\n\ninherits(CanvasMapRenderer, MapRenderer);\n\n\n/**\n * @param {module:ol/render/EventType} type Event type.\n * @param {module:ol/PluggableMap~FrameState} frameState Frame state.\n * @private\n */\nCanvasMapRenderer.prototype.dispatchComposeEvent_ = function(type, frameState) {\n  const map = this.getMap();\n  const context = this.context_;\n  if (map.hasListener(type)) {\n    const extent = frameState.extent;\n    const pixelRatio = frameState.pixelRatio;\n    const viewState = frameState.viewState;\n    const rotation = viewState.rotation;\n\n    const transform = this.getTransform(frameState);\n\n    const vectorContext = new CanvasImmediateRenderer(context, pixelRatio,\n      extent, transform, rotation);\n    const composeEvent = new RenderEvent(type, vectorContext,\n      frameState, context, null);\n    map.dispatchEvent(composeEvent);\n  }\n};\n\n\n/**\n * @param {module:ol/PluggableMap~FrameState} frameState Frame state.\n * @protected\n * @return {!module:ol/transform~Transform} Transform.\n */\nCanvasMapRenderer.prototype.getTransform = function(frameState) {\n  const viewState = frameState.viewState;\n  const dx1 = this.canvas_.width / 2;\n  const dy1 = this.canvas_.height / 2;\n  const sx = frameState.pixelRatio / viewState.resolution;\n  const sy = -sx;\n  const angle = -viewState.rotation;\n  const dx2 = -viewState.center[0];\n  const dy2 = -viewState.center[1];\n  return composeTransform(this.transform_, dx1, dy1, sx, sy, angle, dx2, dy2);\n};\n\n\n/**\n * @inheritDoc\n */\nCanvasMapRenderer.prototype.renderFrame = function(frameState) {\n\n  if (!frameState) {\n    if (this.renderedVisible_) {\n      this.canvas_.style.display = 'none';\n      this.renderedVisible_ = false;\n    }\n    return;\n  }\n\n  const context = this.context_;\n  const pixelRatio = frameState.pixelRatio;\n  const width = Math.round(frameState.size[0] * pixelRatio);\n  const height = Math.round(frameState.size[1] * pixelRatio);\n  if (this.canvas_.width != width || this.canvas_.height != height) {\n    this.canvas_.width = width;\n    this.canvas_.height = height;\n  } else {\n    context.clearRect(0, 0, width, height);\n  }\n\n  const rotation = frameState.viewState.rotation;\n\n  this.calculateMatrices2D(frameState);\n\n  this.dispatchComposeEvent_(RenderEventType.PRECOMPOSE, frameState);\n\n  const layerStatesArray = frameState.layerStatesArray;\n  stableSort(layerStatesArray, sortByZIndex);\n\n  if (rotation) {\n    context.save();\n    rotateAtOffset(context, rotation, width / 2, height / 2);\n  }\n\n  const viewResolution = frameState.viewState.resolution;\n  let i, ii, layer, layerRenderer, layerState;\n  for (i = 0, ii = layerStatesArray.length; i < ii; ++i) {\n    layerState = layerStatesArray[i];\n    layer = layerState.layer;\n    layerRenderer = /** @type {module:ol/renderer/canvas/Layer} */ (this.getLayerRenderer(layer));\n    if (!visibleAtResolution(layerState, viewResolution) ||\n        layerState.sourceState != SourceState.READY) {\n      continue;\n    }\n    if (layerRenderer.prepareFrame(frameState, layerState)) {\n      layerRenderer.composeFrame(frameState, layerState, context);\n    }\n  }\n\n  if (rotation) {\n    context.restore();\n  }\n\n  this.dispatchComposeEvent_(RenderEventType.POSTCOMPOSE, frameState);\n\n  if (!this.renderedVisible_) {\n    this.canvas_.style.display = '';\n    this.renderedVisible_ = true;\n  }\n\n  this.scheduleRemoveUnusedLayerRenderers(frameState);\n  this.scheduleExpireIconCache(frameState);\n};\n\n\n/**\n * @inheritDoc\n */\nCanvasMapRenderer.prototype.forEachLayerAtPixel = function(pixel, frameState, hitTolerance, callback, thisArg,\n  layerFilter, thisArg2) {\n  let result;\n  const viewState = frameState.viewState;\n  const viewResolution = viewState.resolution;\n\n  const layerStates = frameState.layerStatesArray;\n  const numLayers = layerStates.length;\n\n  const coordinate = applyTransform(\n    frameState.pixelToCoordinateTransform, pixel.slice());\n\n  let i;\n  for (i = numLayers - 1; i >= 0; --i) {\n    const layerState = layerStates[i];\n    const layer = layerState.layer;\n    if (visibleAtResolution(layerState, viewResolution) && layerFilter.call(thisArg2, layer)) {\n      const layerRenderer = /** @type {module:ol/renderer/canvas/Layer} */ (this.getLayerRenderer(layer));\n      result = layerRenderer.forEachLayerAtCoordinate(\n        coordinate, frameState, hitTolerance, callback, thisArg);\n      if (result) {\n        return result;\n      }\n    }\n  }\n  return undefined;\n};\n\n\n/**\n * @inheritDoc\n */\nCanvasMapRenderer.prototype.registerLayerRenderers = function(constructors) {\n  MapRenderer.prototype.registerLayerRenderers.call(this, constructors);\n  for (let i = 0, ii = constructors.length; i < ii; ++i) {\n    const ctor = constructors[i];\n    if (!includes(layerRendererConstructors, ctor)) {\n      layerRendererConstructors.push(ctor);\n    }\n  }\n};\n\nexport default CanvasMapRenderer;\n","/**\n * @module ol/MapBrowserEvent\n */\nimport {inherits} from './util.js';\nimport MapEvent from './MapEvent.js';\n\n/**\n * @classdesc\n * Events emitted as map browser events are instances of this type.\n * See {@link module:ol/Map~Map} for which events trigger a map browser event.\n *\n * @constructor\n * @extends {module:ol/MapEvent}\n * @param {string} type Event type.\n * @param {module:ol/PluggableMap} map Map.\n * @param {Event} browserEvent Browser event.\n * @param {boolean=} opt_dragging Is the map currently being dragged?\n * @param {?module:ol/PluggableMap~FrameState=} opt_frameState Frame state.\n */\nconst MapBrowserEvent = function(type, map, browserEvent, opt_dragging, opt_frameState) {\n\n  MapEvent.call(this, type, map, opt_frameState);\n\n  /**\n   * The original browser event.\n   * @const\n   * @type {Event}\n   * @api\n   */\n  this.originalEvent = browserEvent;\n\n  /**\n   * The map pixel relative to the viewport corresponding to the original browser event.\n   * @type {module:ol~Pixel}\n   * @api\n   */\n  this.pixel = map.getEventPixel(browserEvent);\n\n  /**\n   * The coordinate in view projection corresponding to the original browser event.\n   * @type {module:ol/coordinate~Coordinate}\n   * @api\n   */\n  this.coordinate = map.getCoordinateFromPixel(this.pixel);\n\n  /**\n   * Indicates if the map is currently being dragged. Only set for\n   * `POINTERDRAG` and `POINTERMOVE` events. Default is `false`.\n   *\n   * @type {boolean}\n   * @api\n   */\n  this.dragging = opt_dragging !== undefined ? opt_dragging : false;\n\n};\n\ninherits(MapBrowserEvent, MapEvent);\n\n\n/**\n * Prevents the default browser action.\n * @see https://developer.mozilla.org/en-US/docs/Web/API/event.preventDefault\n * @override\n * @api\n */\nMapBrowserEvent.prototype.preventDefault = function() {\n  MapEvent.prototype.preventDefault.call(this);\n  this.originalEvent.preventDefault();\n};\n\n\n/**\n * Prevents further propagation of the current event.\n * @see https://developer.mozilla.org/en-US/docs/Web/API/event.stopPropagation\n * @override\n * @api\n */\nMapBrowserEvent.prototype.stopPropagation = function() {\n  MapEvent.prototype.stopPropagation.call(this);\n  this.originalEvent.stopPropagation();\n};\nexport default MapBrowserEvent;\n","/**\n * @module ol/layer/Group\n */\nimport {getUid, inherits} from '../util.js';\nimport Collection from '../Collection.js';\nimport CollectionEventType from '../CollectionEventType.js';\nimport {getChangeEventType} from '../Object.js';\nimport ObjectEventType from '../ObjectEventType.js';\nimport {assert} from '../asserts.js';\nimport {listen, unlistenByKey} from '../events.js';\nimport EventType from '../events/EventType.js';\nimport {getIntersection} from '../extent.js';\nimport BaseLayer from '../layer/Base.js';\nimport {assign, clear} from '../obj.js';\nimport SourceState from '../source/State.js';\n\n\n/**\n * @typedef {Object} Options\n * @property {number} [opacity=1] Opacity (0, 1).\n * @property {boolean} [visible=true] Visibility.\n * @property {module:ol/extent~Extent} [extent] The bounding extent for layer rendering.  The layer will not be\n * rendered outside of this extent.\n * @property {number} [zIndex=0] The z-index for layer rendering.  At rendering time, the layers\n * will be ordered, first by Z-index and then by position.\n * @property {number} [minResolution] The minimum resolution (inclusive) at which this layer will be\n * visible.\n * @property {number} [maxResolution] The maximum resolution (exclusive) below which this layer will\n * be visible.\n * @property {(Array.<module:ol/layer/Base>|module:ol/Collection.<module:ol/layer/Base>)} [layers] Child layers.\n */\n\n\n/**\n * @enum {string}\n * @private\n */\nconst Property = {\n  LAYERS: 'layers'\n};\n\n\n/**\n * @classdesc\n * A {@link module:ol/Collection~Collection} of layers that are handled together.\n *\n * A generic `change` event is triggered when the group/Collection changes.\n *\n * @constructor\n * @extends {module:ol/layer/Base}\n * @param {module:ol/layer/Group~Options=} opt_options Layer options.\n * @api\n */\nconst LayerGroup = function(opt_options) {\n\n  const options = opt_options || {};\n  const baseOptions = /** @type {module:ol/layer/Group~Options} */ (assign({}, options));\n  delete baseOptions.layers;\n\n  let layers = options.layers;\n\n  BaseLayer.call(this, baseOptions);\n\n  /**\n   * @private\n   * @type {Array.<module:ol/events~EventsKey>}\n   */\n  this.layersListenerKeys_ = [];\n\n  /**\n   * @private\n   * @type {Object.<string, Array.<module:ol/events~EventsKey>>}\n   */\n  this.listenerKeys_ = {};\n\n  listen(this,\n    getChangeEventType(Property.LAYERS),\n    this.handleLayersChanged_, this);\n\n  if (layers) {\n    if (Array.isArray(layers)) {\n      layers = new Collection(layers.slice(), {unique: true});\n    } else {\n      assert(layers instanceof Collection,\n        43); // Expected `layers` to be an array or a `Collection`\n      layers = layers;\n    }\n  } else {\n    layers = new Collection(undefined, {unique: true});\n  }\n\n  this.setLayers(layers);\n\n};\n\ninherits(LayerGroup, BaseLayer);\n\n\n/**\n * @private\n */\nLayerGroup.prototype.handleLayerChange_ = function() {\n  this.changed();\n};\n\n\n/**\n * @param {module:ol/events/Event} event Event.\n * @private\n */\nLayerGroup.prototype.handleLayersChanged_ = function(event) {\n  this.layersListenerKeys_.forEach(unlistenByKey);\n  this.layersListenerKeys_.length = 0;\n\n  const layers = this.getLayers();\n  this.layersListenerKeys_.push(\n    listen(layers, CollectionEventType.ADD, this.handleLayersAdd_, this),\n    listen(layers, CollectionEventType.REMOVE, this.handleLayersRemove_, this)\n  );\n\n  for (const id in this.listenerKeys_) {\n    this.listenerKeys_[id].forEach(unlistenByKey);\n  }\n  clear(this.listenerKeys_);\n\n  const layersArray = layers.getArray();\n  for (let i = 0, ii = layersArray.length; i < ii; i++) {\n    const layer = layersArray[i];\n    this.listenerKeys_[getUid(layer).toString()] = [\n      listen(layer, ObjectEventType.PROPERTYCHANGE, this.handleLayerChange_, this),\n      listen(layer, EventType.CHANGE, this.handleLayerChange_, this)\n    ];\n  }\n\n  this.changed();\n};\n\n\n/**\n * @param {module:ol/Collection~CollectionEvent} collectionEvent CollectionEvent.\n * @private\n */\nLayerGroup.prototype.handleLayersAdd_ = function(collectionEvent) {\n  const layer = /** @type {module:ol/layer/Base} */ (collectionEvent.element);\n  const key = getUid(layer).toString();\n  this.listenerKeys_[key] = [\n    listen(layer, ObjectEventType.PROPERTYCHANGE, this.handleLayerChange_, this),\n    listen(layer, EventType.CHANGE, this.handleLayerChange_, this)\n  ];\n  this.changed();\n};\n\n\n/**\n * @param {module:ol/Collection~CollectionEvent} collectionEvent CollectionEvent.\n * @private\n */\nLayerGroup.prototype.handleLayersRemove_ = function(collectionEvent) {\n  const layer = /** @type {module:ol/layer/Base} */ (collectionEvent.element);\n  const key = getUid(layer).toString();\n  this.listenerKeys_[key].forEach(unlistenByKey);\n  delete this.listenerKeys_[key];\n  this.changed();\n};\n\n\n/**\n * Returns the {@link module:ol/Collection collection} of {@link module:ol/layer/Layer~Layer layers}\n * in this group.\n * @return {!module:ol/Collection.<module:ol/layer/Base>} Collection of\n *   {@link module:ol/layer/Base layers} that are part of this group.\n * @observable\n * @api\n */\nLayerGroup.prototype.getLayers = function() {\n  return (\n    /** @type {!module:ol/Collection.<module:ol/layer/Base>} */ (this.get(Property.LAYERS))\n  );\n};\n\n\n/**\n * Set the {@link module:ol/Collection collection} of {@link module:ol/layer/Layer~Layer layers}\n * in this group.\n * @param {!module:ol/Collection.<module:ol/layer/Base>} layers Collection of\n *   {@link module:ol/layer/Base layers} that are part of this group.\n * @observable\n * @api\n */\nLayerGroup.prototype.setLayers = function(layers) {\n  this.set(Property.LAYERS, layers);\n};\n\n\n/**\n * @inheritDoc\n */\nLayerGroup.prototype.getLayersArray = function(opt_array) {\n  const array = opt_array !== undefined ? opt_array : [];\n  this.getLayers().forEach(function(layer) {\n    layer.getLayersArray(array);\n  });\n  return array;\n};\n\n\n/**\n * @inheritDoc\n */\nLayerGroup.prototype.getLayerStatesArray = function(opt_states) {\n  const states = opt_states !== undefined ? opt_states : [];\n\n  const pos = states.length;\n\n  this.getLayers().forEach(function(layer) {\n    layer.getLayerStatesArray(states);\n  });\n\n  const ownLayerState = this.getLayerState();\n  for (let i = pos, ii = states.length; i < ii; i++) {\n    const layerState = states[i];\n    layerState.opacity *= ownLayerState.opacity;\n    layerState.visible = layerState.visible && ownLayerState.visible;\n    layerState.maxResolution = Math.min(\n      layerState.maxResolution, ownLayerState.maxResolution);\n    layerState.minResolution = Math.max(\n      layerState.minResolution, ownLayerState.minResolution);\n    if (ownLayerState.extent !== undefined) {\n      if (layerState.extent !== undefined) {\n        layerState.extent = getIntersection(layerState.extent, ownLayerState.extent);\n      } else {\n        layerState.extent = ownLayerState.extent;\n      }\n    }\n  }\n\n  return states;\n};\n\n\n/**\n * @inheritDoc\n */\nLayerGroup.prototype.getSourceState = function() {\n  return SourceState.READY;\n};\n\nexport default LayerGroup;\n","/**\n * @module ol/control/ScaleLine\n */\nimport {inherits} from '../util.js';\nimport {getChangeEventType} from '../Object.js';\nimport {assert} from '../asserts.js';\nimport Control from '../control/Control.js';\nimport {CLASS_UNSELECTABLE} from '../css.js';\nimport {listen} from '../events.js';\nimport {getPointResolution, METERS_PER_UNIT} from '../proj.js';\nimport ProjUnits from '../proj/Units.js';\n\n\n/**\n * @type {string}\n */\nconst UNITS_PROP = 'units';\n\n/**\n * Units for the scale line. Supported values are `'degrees'`, `'imperial'`,\n * `'nautical'`, `'metric'`, `'us'`.\n * @enum {string}\n */\nexport const Units = {\n  DEGREES: 'degrees',\n  IMPERIAL: 'imperial',\n  NAUTICAL: 'nautical',\n  METRIC: 'metric',\n  US: 'us'\n};\n\n\n/**\n * @const\n * @type {Array.<number>}\n */\nconst LEADING_DIGITS = [1, 2, 5];\n\n\n/**\n * @typedef {Object} Options\n * @property {string} [className='ol-scale-line'] CSS Class name.\n * @property {number} [minWidth=64] Minimum width in pixels.\n * @property {function(module:ol/MapEvent)} [render] Function called when the control\n * should be re-rendered. This is called in a `requestAnimationFrame` callback.\n * @property {Element|string} [target] Specify a target if you want the control\n * to be rendered outside of the map's viewport.\n * @property {module:ol/control/ScaleLine~Units|string} [units='metric'] Units.\n */\n\n\n/**\n * @classdesc\n * A control displaying rough y-axis distances, calculated for the center of the\n * viewport. For conformal projections (e.g. EPSG:3857, the default view\n * projection in OpenLayers), the scale is valid for all directions.\n * No scale line will be shown when the y-axis distance of a pixel at the\n * viewport center cannot be calculated in the view projection.\n * By default the scale line will show in the bottom left portion of the map,\n * but this can be changed by using the css selector `.ol-scale-line`.\n *\n * @constructor\n * @extends {module:ol/control/Control}\n * @param {module:ol/control/ScaleLine~Options=} opt_options Scale line options.\n * @api\n */\nconst ScaleLine = function(opt_options) {\n\n  const options = opt_options ? opt_options : {};\n\n  const className = options.className !== undefined ? options.className : 'ol-scale-line';\n\n  /**\n   * @private\n   * @type {Element}\n   */\n  this.innerElement_ = document.createElement('DIV');\n  this.innerElement_.className = className + '-inner';\n\n  /**\n   * @private\n   * @type {Element}\n   */\n  this.element_ = document.createElement('DIV');\n  this.element_.className = className + ' ' + CLASS_UNSELECTABLE;\n  this.element_.appendChild(this.innerElement_);\n\n  /**\n   * @private\n   * @type {?module:ol/View~State}\n   */\n  this.viewState_ = null;\n\n  /**\n   * @private\n   * @type {number}\n   */\n  this.minWidth_ = options.minWidth !== undefined ? options.minWidth : 64;\n\n  /**\n   * @private\n   * @type {boolean}\n   */\n  this.renderedVisible_ = false;\n\n  /**\n   * @private\n   * @type {number|undefined}\n   */\n  this.renderedWidth_ = undefined;\n\n  /**\n   * @private\n   * @type {string}\n   */\n  this.renderedHTML_ = '';\n\n  Control.call(this, {\n    element: this.element_,\n    render: options.render || render,\n    target: options.target\n  });\n\n  listen(\n    this, getChangeEventType(UNITS_PROP),\n    this.handleUnitsChanged_, this);\n\n  this.setUnits(/** @type {module:ol/control/ScaleLine~Units} */ (options.units) ||\n      Units.METRIC);\n\n};\n\ninherits(ScaleLine, Control);\n\n\n/**\n * Return the units to use in the scale line.\n * @return {module:ol/control/ScaleLine~Units|undefined} The units\n * to use in the scale line.\n * @observable\n * @api\n */\nScaleLine.prototype.getUnits = function() {\n  return (\n    /** @type {module:ol/control/ScaleLine~Units|undefined} */ (this.get(UNITS_PROP))\n  );\n};\n\n\n/**\n * Update the scale line element.\n * @param {module:ol/MapEvent} mapEvent Map event.\n * @this {module:ol/control/ScaleLine}\n * @api\n */\nexport function render(mapEvent) {\n  const frameState = mapEvent.frameState;\n  if (!frameState) {\n    this.viewState_ = null;\n  } else {\n    this.viewState_ = frameState.viewState;\n  }\n  this.updateElement_();\n}\n\n\n/**\n * @private\n */\nScaleLine.prototype.handleUnitsChanged_ = function() {\n  this.updateElement_();\n};\n\n\n/**\n * Set the units to use in the scale line.\n * @param {module:ol/control/ScaleLine~Units} units The units to use in the scale line.\n * @observable\n * @api\n */\nScaleLine.prototype.setUnits = function(units) {\n  this.set(UNITS_PROP, units);\n};\n\n\n/**\n * @private\n */\nScaleLine.prototype.updateElement_ = function() {\n  const viewState = this.viewState_;\n\n  if (!viewState) {\n    if (this.renderedVisible_) {\n      this.element_.style.display = 'none';\n      this.renderedVisible_ = false;\n    }\n    return;\n  }\n\n  const center = viewState.center;\n  const projection = viewState.projection;\n  const units = this.getUnits();\n  const pointResolutionUnits = units == Units.DEGREES ?\n    ProjUnits.DEGREES :\n    ProjUnits.METERS;\n  let pointResolution =\n      getPointResolution(projection, viewState.resolution, center, pointResolutionUnits);\n  if (projection.getUnits() != ProjUnits.DEGREES && projection.getMetersPerUnit()\n    && pointResolutionUnits == ProjUnits.METERS) {\n    pointResolution *= projection.getMetersPerUnit();\n  }\n\n  let nominalCount = this.minWidth_ * pointResolution;\n  let suffix = '';\n  if (units == Units.DEGREES) {\n    const metersPerDegree = METERS_PER_UNIT[ProjUnits.DEGREES];\n    if (projection.getUnits() == ProjUnits.DEGREES) {\n      nominalCount *= metersPerDegree;\n    } else {\n      pointResolution /= metersPerDegree;\n    }\n    if (nominalCount < metersPerDegree / 60) {\n      suffix = '\\u2033'; // seconds\n      pointResolution *= 3600;\n    } else if (nominalCount < metersPerDegree) {\n      suffix = '\\u2032'; // minutes\n      pointResolution *= 60;\n    } else {\n      suffix = '\\u00b0'; // degrees\n    }\n  } else if (units == Units.IMPERIAL) {\n    if (nominalCount < 0.9144) {\n      suffix = 'in';\n      pointResolution /= 0.0254;\n    } else if (nominalCount < 1609.344) {\n      suffix = 'ft';\n      pointResolution /= 0.3048;\n    } else {\n      suffix = 'mi';\n      pointResolution /= 1609.344;\n    }\n  } else if (units == Units.NAUTICAL) {\n    pointResolution /= 1852;\n    suffix = 'nm';\n  } else if (units == Units.METRIC) {\n    if (nominalCount < 0.001) {\n      suffix = 'μm';\n      pointResolution *= 1000000;\n    } else if (nominalCount < 1) {\n      suffix = 'mm';\n      pointResolution *= 1000;\n    } else if (nominalCount < 1000) {\n      suffix = 'm';\n    } else {\n      suffix = 'km';\n      pointResolution /= 1000;\n    }\n  } else if (units == Units.US) {\n    if (nominalCount < 0.9144) {\n      suffix = 'in';\n      pointResolution *= 39.37;\n    } else if (nominalCount < 1609.344) {\n      suffix = 'ft';\n      pointResolution /= 0.30480061;\n    } else {\n      suffix = 'mi';\n      pointResolution /= 1609.3472;\n    }\n  } else {\n    assert(false, 33); // Invalid units\n  }\n\n  let i = 3 * Math.floor(\n    Math.log(this.minWidth_ * pointResolution) / Math.log(10));\n  let count, width;\n  while (true) {\n    count = LEADING_DIGITS[((i % 3) + 3) % 3] *\n        Math.pow(10, Math.floor(i / 3));\n    width = Math.round(count / pointResolution);\n    if (isNaN(width)) {\n      this.element_.style.display = 'none';\n      this.renderedVisible_ = false;\n      return;\n    } else if (width >= this.minWidth_) {\n      break;\n    }\n    ++i;\n  }\n\n  const html = count + ' ' + suffix;\n  if (this.renderedHTML_ != html) {\n    this.innerElement_.innerHTML = html;\n    this.renderedHTML_ = html;\n  }\n\n  if (this.renderedWidth_ != width) {\n    this.innerElement_.style.width = width + 'px';\n    this.renderedWidth_ = width;\n  }\n\n  if (!this.renderedVisible_) {\n    this.element_.style.display = '';\n    this.renderedVisible_ = true;\n  }\n\n};\n\nexport default ScaleLine;\n","/**\n * @module ol/geom/flat/geodesic\n */\nimport {squaredSegmentDistance, toRadians, toDegrees} from '../../math.js';\nimport {get as getProjection, getTransform} from '../../proj.js';\n\n\n/**\n * @param {function(number): module:ol/coordinate~Coordinate} interpolate Interpolate function.\n * @param {module:ol/proj~TransformFunction} transform Transform from longitude/latitude to\n *     projected coordinates.\n * @param {number} squaredTolerance Squared tolerance.\n * @return {Array.<number>} Flat coordinates.\n */\nfunction line(interpolate, transform, squaredTolerance) {\n  // FIXME reduce garbage generation\n  // FIXME optimize stack operations\n\n  /** @type {Array.<number>} */\n  const flatCoordinates = [];\n\n  let geoA = interpolate(0);\n  let geoB = interpolate(1);\n\n  let a = transform(geoA);\n  let b = transform(geoB);\n\n  /** @type {Array.<module:ol/coordinate~Coordinate>} */\n  const geoStack = [geoB, geoA];\n  /** @type {Array.<module:ol/coordinate~Coordinate>} */\n  const stack = [b, a];\n  /** @type {Array.<number>} */\n  const fractionStack = [1, 0];\n\n  /** @type {!Object.<string, boolean>} */\n  const fractions = {};\n\n  let maxIterations = 1e5;\n  let geoM, m, fracA, fracB, fracM, key;\n\n  while (--maxIterations > 0 && fractionStack.length > 0) {\n    // Pop the a coordinate off the stack\n    fracA = fractionStack.pop();\n    geoA = geoStack.pop();\n    a = stack.pop();\n    // Add the a coordinate if it has not been added yet\n    key = fracA.toString();\n    if (!(key in fractions)) {\n      flatCoordinates.push(a[0], a[1]);\n      fractions[key] = true;\n    }\n    // Pop the b coordinate off the stack\n    fracB = fractionStack.pop();\n    geoB = geoStack.pop();\n    b = stack.pop();\n    // Find the m point between the a and b coordinates\n    fracM = (fracA + fracB) / 2;\n    geoM = interpolate(fracM);\n    m = transform(geoM);\n    if (squaredSegmentDistance(m[0], m[1], a[0], a[1],\n      b[0], b[1]) < squaredTolerance) {\n      // If the m point is sufficiently close to the straight line, then we\n      // discard it.  Just use the b coordinate and move on to the next line\n      // segment.\n      flatCoordinates.push(b[0], b[1]);\n      key = fracB.toString();\n      fractions[key] = true;\n    } else {\n      // Otherwise, we need to subdivide the current line segment.  Split it\n      // into two and push the two line segments onto the stack.\n      fractionStack.push(fracB, fracM, fracM, fracA);\n      stack.push(b, m, m, a);\n      geoStack.push(geoB, geoM, geoM, geoA);\n    }\n  }\n\n  return flatCoordinates;\n}\n\n\n/**\n * Generate a great-circle arcs between two lat/lon points.\n * @param {number} lon1 Longitude 1 in degrees.\n * @param {number} lat1 Latitude 1 in degrees.\n * @param {number} lon2 Longitude 2 in degrees.\n * @param {number} lat2 Latitude 2 in degrees.\n * @param {module:ol/proj/Projection} projection Projection.\n * @param {number} squaredTolerance Squared tolerance.\n * @return {Array.<number>} Flat coordinates.\n */\nexport function greatCircleArc(lon1, lat1, lon2, lat2, projection, squaredTolerance) {\n  const geoProjection = getProjection('EPSG:4326');\n\n  const cosLat1 = Math.cos(toRadians(lat1));\n  const sinLat1 = Math.sin(toRadians(lat1));\n  const cosLat2 = Math.cos(toRadians(lat2));\n  const sinLat2 = Math.sin(toRadians(lat2));\n  const cosDeltaLon = Math.cos(toRadians(lon2 - lon1));\n  const sinDeltaLon = Math.sin(toRadians(lon2 - lon1));\n  const d = sinLat1 * sinLat2 + cosLat1 * cosLat2 * cosDeltaLon;\n\n  return line(\n    /**\n     * @param {number} frac Fraction.\n     * @return {module:ol/coordinate~Coordinate} Coordinate.\n     */\n    function(frac) {\n      if (1 <= d) {\n        return [lon2, lat2];\n      }\n      const D = frac * Math.acos(d);\n      const cosD = Math.cos(D);\n      const sinD = Math.sin(D);\n      const y = sinDeltaLon * cosLat2;\n      const x = cosLat1 * sinLat2 - sinLat1 * cosLat2 * cosDeltaLon;\n      const theta = Math.atan2(y, x);\n      const lat = Math.asin(sinLat1 * cosD + cosLat1 * sinD * Math.cos(theta));\n      const lon = toRadians(lon1) +\n            Math.atan2(Math.sin(theta) * sinD * cosLat1,\n              cosD - sinLat1 * Math.sin(lat));\n      return [toDegrees(lon), toDegrees(lat)];\n    }, getTransform(geoProjection, projection), squaredTolerance);\n}\n\n\n/**\n * Generate a meridian (line at constant longitude).\n * @param {number} lon Longitude.\n * @param {number} lat1 Latitude 1.\n * @param {number} lat2 Latitude 2.\n * @param {module:ol/proj/Projection} projection Projection.\n * @param {number} squaredTolerance Squared tolerance.\n * @return {Array.<number>} Flat coordinates.\n */\nexport function meridian(lon, lat1, lat2, projection, squaredTolerance) {\n  const epsg4326Projection = getProjection('EPSG:4326');\n  return line(\n    /**\n     * @param {number} frac Fraction.\n     * @return {module:ol/coordinate~Coordinate} Coordinate.\n     */\n    function(frac) {\n      return [lon, lat1 + ((lat2 - lat1) * frac)];\n    },\n    getTransform(epsg4326Projection, projection), squaredTolerance);\n}\n\n\n/**\n * Generate a parallel (line at constant latitude).\n * @param {number} lat Latitude.\n * @param {number} lon1 Longitude 1.\n * @param {number} lon2 Longitude 2.\n * @param {module:ol/proj/Projection} projection Projection.\n * @param {number} squaredTolerance Squared tolerance.\n * @return {Array.<number>} Flat coordinates.\n */\nexport function parallel(lat, lon1, lon2, projection, squaredTolerance) {\n  const epsg4326Projection = getProjection('EPSG:4326');\n  return line(\n    /**\n     * @param {number} frac Fraction.\n     * @return {module:ol/coordinate~Coordinate} Coordinate.\n     */\n    function(frac) {\n      return [lon1 + ((lon2 - lon1) * frac), lat];\n    },\n    getTransform(epsg4326Projection, projection), squaredTolerance);\n}\n","/**\n * @module ol/Graticule\n */\nimport {degreesToStringHDMS} from './coordinate.js';\nimport {listen, unlistenByKey} from './events.js';\nimport {intersects, getCenter} from './extent.js';\nimport GeometryLayout from './geom/GeometryLayout.js';\nimport LineString from './geom/LineString.js';\nimport Point from './geom/Point.js';\nimport {meridian, parallel} from './geom/flat/geodesic.js';\nimport {clamp} from './math.js';\nimport {get as getProjection, equivalent as equivalentProjection, getTransform, transformExtent} from './proj.js';\nimport RenderEventType from './render/EventType.js';\nimport Fill from './style/Fill.js';\nimport Stroke from './style/Stroke.js';\nimport Text from './style/Text.js';\n\n\n/**\n * @type {module:ol/style/Stroke}\n * @private\n * @const\n */\nconst DEFAULT_STROKE_STYLE = new Stroke({\n  color: 'rgba(0,0,0,0.2)'\n});\n\n/**\n * TODO can be configurable\n * @type {Array.<number>}\n * @private\n */\nconst INTERVALS = [\n  90, 45, 30, 20, 10, 5, 2, 1, 0.5, 0.2, 0.1, 0.05, 0.01, 0.005, 0.002, 0.001\n];\n\n/**\n * @typedef {Object} GraticuleLabelDataType\n * @property {module:ol/geom/Point} geom\n * @property {string} text\n */\n\n/**\n * @typedef {Object} Options\n * @property {module:ol/PluggableMap} [map] Reference to an\n * {@link module:ol/Map~Map} object.\n * @property {number} [maxLines=100] The maximum number of meridians and\n * parallels from the center of the map. The default value of 100 means that at\n * most 200 meridians and 200 parallels will be displayed. The default value is\n * appropriate for conformal projections like Spherical Mercator. If you\n * increase the value, more lines will be drawn and the drawing performance will\n * decrease.\n * @property {module:ol/style/Stroke} [strokeStyle='rgba(0,0,0,0.2)'] The\n * stroke style to use for drawing the graticule. If not provided, a not fully\n * opaque black will be used.\n * @property {number} [targetSize=100] The target size of the graticule cells,\n * in pixels.\n * @property {boolean} [showLabels=false] Render a label with the respective\n * latitude/longitude for each graticule line.\n * @property {function(number):string} [lonLabelFormatter] Label formatter for\n * longitudes. This function is called with the longitude as argument, and\n * should return a formatted string representing the longitude. By default,\n * labels are formatted as degrees, minutes, seconds and hemisphere.\n * @property {function(number):string} [latLabelFormatter] Label formatter for\n * latitudes. This function is called with the latitude as argument, and\n * should return a formatted string representing the latitude. By default,\n * labels are formatted as degrees, minutes, seconds and hemisphere.\n * @property {number} [lonLabelPosition=0] Longitude label position in fractions\n * (0..1) of view extent. 0 means at the bottom of the viewport, 1 means at the\n * top.\n * @property {number} [latLabelPosition=1] Latitude label position in fractions\n * (0..1) of view extent. 0 means at the left of the viewport, 1 means at the\n * right.\n * @property {module:ol/style/Text} [lonLabelStyle] Longitude label text\n * style. If not provided, the following style will be used:\n * ```js\n * new Text({\n *   font: '12px Calibri,sans-serif',\n *   textBaseline: 'bottom',\n *   fill: new Fill({\n *     color: 'rgba(0,0,0,1)'\n *   }),\n *   stroke: new Stroke({\n *     color: 'rgba(255,255,255,1)',\n *     width: 3\n *   })\n * });\n * ```\n * Note that the default's `textBaseline` configuration will not work well for\n * `lonLabelPosition` configurations that position labels close to the top of\n * the viewport.\n * @property {module:ol/style/Text} [latLabelStyle] Latitude label text style.\n * If not provided, the following style will be used:\n * ```js\n * new Text({\n *   font: '12px Calibri,sans-serif',\n *   textAlign: 'end',\n *   fill: new Fill({\n *     color: 'rgba(0,0,0,1)'\n *   }),\n *   stroke: Stroke({\n *     color: 'rgba(255,255,255,1)',\n *     width: 3\n *   })\n * });\n * ```\n * Note that the default's `textAlign` configuration will not work well for\n * `latLabelPosition` configurations that position labels close to the left of\n * the viewport.\n */\n\n\n/**\n * Render a grid for a coordinate system on a map.\n * @constructor\n * @param {module:ol/Graticule~Options=} opt_options Options.\n * @api\n */\nconst Graticule = function(opt_options) {\n  const options = opt_options || {};\n\n  /**\n   * @type {module:ol/PluggableMap}\n   * @private\n   */\n  this.map_ = null;\n\n  /**\n   * @type {?module:ol/events~EventsKey}\n   * @private\n   */\n  this.postcomposeListenerKey_ = null;\n\n  /**\n   * @type {module:ol/proj/Projection}\n   */\n  this.projection_ = null;\n\n  /**\n   * @type {number}\n   * @private\n   */\n  this.maxLat_ = Infinity;\n\n  /**\n   * @type {number}\n   * @private\n   */\n  this.maxLon_ = Infinity;\n\n  /**\n   * @type {number}\n   * @private\n   */\n  this.minLat_ = -Infinity;\n\n  /**\n   * @type {number}\n   * @private\n   */\n  this.minLon_ = -Infinity;\n\n  /**\n   * @type {number}\n   * @private\n   */\n  this.maxLatP_ = Infinity;\n\n  /**\n   * @type {number}\n   * @private\n   */\n  this.maxLonP_ = Infinity;\n\n  /**\n   * @type {number}\n   * @private\n   */\n  this.minLatP_ = -Infinity;\n\n  /**\n   * @type {number}\n   * @private\n   */\n  this.minLonP_ = -Infinity;\n\n  /**\n   * @type {number}\n   * @private\n   */\n  this.targetSize_ = options.targetSize !== undefined ? options.targetSize : 100;\n\n  /**\n   * @type {number}\n   * @private\n   */\n  this.maxLines_ = options.maxLines !== undefined ? options.maxLines : 100;\n\n  /**\n   * @type {Array.<module:ol/geom/LineString>}\n   * @private\n   */\n  this.meridians_ = [];\n\n  /**\n   * @type {Array.<module:ol/geom/LineString>}\n   * @private\n   */\n  this.parallels_ = [];\n\n  /**\n   * @type {module:ol/style/Stroke}\n   * @private\n   */\n  this.strokeStyle_ = options.strokeStyle !== undefined ? options.strokeStyle : DEFAULT_STROKE_STYLE;\n\n  /**\n   * @type {module:ol/proj~TransformFunction|undefined}\n   * @private\n   */\n  this.fromLonLatTransform_ = undefined;\n\n  /**\n   * @type {module:ol/proj~TransformFunction|undefined}\n   * @private\n   */\n  this.toLonLatTransform_ = undefined;\n\n  /**\n   * @type {module:ol/coordinate~Coordinate}\n   * @private\n   */\n  this.projectionCenterLonLat_ = null;\n\n  /**\n   * @type {Array.<module:ol/Graticule~GraticuleLabelDataType>}\n   * @private\n   */\n  this.meridiansLabels_ = null;\n\n  /**\n   * @type {Array.<module:ol/Graticule~GraticuleLabelDataType>}\n   * @private\n   */\n  this.parallelsLabels_ = null;\n\n  if (options.showLabels == true) {\n\n    /**\n     * @type {null|function(number):string}\n     * @private\n     */\n    this.lonLabelFormatter_ = options.lonLabelFormatter == undefined ?\n      degreesToStringHDMS.bind(this, 'EW') : options.lonLabelFormatter;\n\n    /**\n     * @type {function(number):string}\n     * @private\n     */\n    this.latLabelFormatter_ = options.latLabelFormatter == undefined ?\n      degreesToStringHDMS.bind(this, 'NS') : options.latLabelFormatter;\n\n    /**\n     * Longitude label position in fractions (0..1) of view extent. 0 means\n     * bottom, 1 means top.\n     * @type {number}\n     * @private\n     */\n    this.lonLabelPosition_ = options.lonLabelPosition == undefined ? 0 :\n      options.lonLabelPosition;\n\n    /**\n     * Latitude Label position in fractions (0..1) of view extent. 0 means left, 1\n     * means right.\n     * @type {number}\n     * @private\n     */\n    this.latLabelPosition_ = options.latLabelPosition == undefined ? 1 :\n      options.latLabelPosition;\n\n    /**\n     * @type {module:ol/style/Text}\n     * @private\n     */\n    this.lonLabelStyle_ = options.lonLabelStyle !== undefined ? options.lonLabelStyle :\n      new Text({\n        font: '12px Calibri,sans-serif',\n        textBaseline: 'bottom',\n        fill: new Fill({\n          color: 'rgba(0,0,0,1)'\n        }),\n        stroke: new Stroke({\n          color: 'rgba(255,255,255,1)',\n          width: 3\n        })\n      });\n\n    /**\n     * @type {module:ol/style/Text}\n     * @private\n     */\n    this.latLabelStyle_ = options.latLabelStyle !== undefined ? options.latLabelStyle :\n      new Text({\n        font: '12px Calibri,sans-serif',\n        textAlign: 'end',\n        fill: new Fill({\n          color: 'rgba(0,0,0,1)'\n        }),\n        stroke: new Stroke({\n          color: 'rgba(255,255,255,1)',\n          width: 3\n        })\n      });\n\n    this.meridiansLabels_ = [];\n    this.parallelsLabels_ = [];\n  }\n\n  this.setMap(options.map !== undefined ? options.map : null);\n};\n\n\n/**\n * @param {number} lon Longitude.\n * @param {number} minLat Minimal latitude.\n * @param {number} maxLat Maximal latitude.\n * @param {number} squaredTolerance Squared tolerance.\n * @param {module:ol/extent~Extent} extent Extent.\n * @param {number} index Index.\n * @return {number} Index.\n * @private\n */\nGraticule.prototype.addMeridian_ = function(lon, minLat, maxLat, squaredTolerance, extent, index) {\n  const lineString = this.getMeridian_(lon, minLat, maxLat, squaredTolerance, index);\n  if (intersects(lineString.getExtent(), extent)) {\n    if (this.meridiansLabels_) {\n      const textPoint = this.getMeridianPoint_(lineString, extent, index);\n      this.meridiansLabels_[index] = {\n        geom: textPoint,\n        text: this.lonLabelFormatter_(lon)\n      };\n    }\n    this.meridians_[index++] = lineString;\n  }\n  return index;\n};\n\n/**\n * @param {module:ol/geom/LineString} lineString Meridian\n * @param {module:ol/extent~Extent} extent Extent.\n * @param {number} index Index.\n * @return {module:ol/geom/Point} Meridian point.\n * @private\n */\nGraticule.prototype.getMeridianPoint_ = function(lineString, extent, index) {\n  const flatCoordinates = lineString.getFlatCoordinates();\n  const clampedBottom = Math.max(extent[1], flatCoordinates[1]);\n  const clampedTop = Math.min(extent[3], flatCoordinates[flatCoordinates.length - 1]);\n  const lat = clamp(\n    extent[1] + Math.abs(extent[1] - extent[3]) * this.lonLabelPosition_,\n    clampedBottom, clampedTop);\n  const coordinate = [flatCoordinates[0], lat];\n  const point = this.meridiansLabels_[index] !== undefined ?\n    this.meridiansLabels_[index].geom : new Point(null);\n  point.setCoordinates(coordinate);\n  return point;\n};\n\n\n/**\n * @param {number} lat Latitude.\n * @param {number} minLon Minimal longitude.\n * @param {number} maxLon Maximal longitude.\n * @param {number} squaredTolerance Squared tolerance.\n * @param {module:ol/extent~Extent} extent Extent.\n * @param {number} index Index.\n * @return {number} Index.\n * @private\n */\nGraticule.prototype.addParallel_ = function(lat, minLon, maxLon, squaredTolerance, extent, index) {\n  const lineString = this.getParallel_(lat, minLon, maxLon, squaredTolerance, index);\n  if (intersects(lineString.getExtent(), extent)) {\n    if (this.parallelsLabels_) {\n      const textPoint = this.getParallelPoint_(lineString, extent, index);\n      this.parallelsLabels_[index] = {\n        geom: textPoint,\n        text: this.latLabelFormatter_(lat)\n      };\n    }\n    this.parallels_[index++] = lineString;\n  }\n  return index;\n};\n\n\n/**\n * @param {module:ol/geom/LineString} lineString Parallels.\n * @param {module:ol/extent~Extent} extent Extent.\n * @param {number} index Index.\n * @return {module:ol/geom/Point} Parallel point.\n * @private\n */\nGraticule.prototype.getParallelPoint_ = function(lineString, extent, index) {\n  const flatCoordinates = lineString.getFlatCoordinates();\n  const clampedLeft = Math.max(extent[0], flatCoordinates[0]);\n  const clampedRight = Math.min(extent[2], flatCoordinates[flatCoordinates.length - 2]);\n  const lon = clamp(\n    extent[0] + Math.abs(extent[0] - extent[2]) * this.latLabelPosition_,\n    clampedLeft, clampedRight);\n  const coordinate = [lon, flatCoordinates[1]];\n  const point = this.parallelsLabels_[index] !== undefined ?\n    this.parallelsLabels_[index].geom : new Point(null);\n  point.setCoordinates(coordinate);\n  return point;\n};\n\n\n/**\n * @param {module:ol/extent~Extent} extent Extent.\n * @param {module:ol/coordinate~Coordinate} center Center.\n * @param {number} resolution Resolution.\n * @param {number} squaredTolerance Squared tolerance.\n * @private\n */\nGraticule.prototype.createGraticule_ = function(extent, center, resolution, squaredTolerance) {\n\n  const interval = this.getInterval_(resolution);\n  if (interval == -1) {\n    this.meridians_.length = this.parallels_.length = 0;\n    if (this.meridiansLabels_) {\n      this.meridiansLabels_.length = 0;\n    }\n    if (this.parallelsLabels_) {\n      this.parallelsLabels_.length = 0;\n    }\n    return;\n  }\n\n  const centerLonLat = this.toLonLatTransform_(center);\n  let centerLon = centerLonLat[0];\n  let centerLat = centerLonLat[1];\n  const maxLines = this.maxLines_;\n  let cnt, idx, lat, lon;\n\n  let validExtent = [\n    Math.max(extent[0], this.minLonP_),\n    Math.max(extent[1], this.minLatP_),\n    Math.min(extent[2], this.maxLonP_),\n    Math.min(extent[3], this.maxLatP_)\n  ];\n\n  validExtent = transformExtent(validExtent, this.projection_, 'EPSG:4326');\n  const maxLat = validExtent[3];\n  const maxLon = validExtent[2];\n  const minLat = validExtent[1];\n  const minLon = validExtent[0];\n\n  // Create meridians\n\n  centerLon = Math.floor(centerLon / interval) * interval;\n  lon = clamp(centerLon, this.minLon_, this.maxLon_);\n\n  idx = this.addMeridian_(lon, minLat, maxLat, squaredTolerance, extent, 0);\n\n  cnt = 0;\n  while (lon != this.minLon_ && cnt++ < maxLines) {\n    lon = Math.max(lon - interval, this.minLon_);\n    idx = this.addMeridian_(lon, minLat, maxLat, squaredTolerance, extent, idx);\n  }\n\n  lon = clamp(centerLon, this.minLon_, this.maxLon_);\n\n  cnt = 0;\n  while (lon != this.maxLon_ && cnt++ < maxLines) {\n    lon = Math.min(lon + interval, this.maxLon_);\n    idx = this.addMeridian_(lon, minLat, maxLat, squaredTolerance, extent, idx);\n  }\n\n  this.meridians_.length = idx;\n  if (this.meridiansLabels_) {\n    this.meridiansLabels_.length = idx;\n  }\n\n  // Create parallels\n\n  centerLat = Math.floor(centerLat / interval) * interval;\n  lat = clamp(centerLat, this.minLat_, this.maxLat_);\n\n  idx = this.addParallel_(lat, minLon, maxLon, squaredTolerance, extent, 0);\n\n  cnt = 0;\n  while (lat != this.minLat_ && cnt++ < maxLines) {\n    lat = Math.max(lat - interval, this.minLat_);\n    idx = this.addParallel_(lat, minLon, maxLon, squaredTolerance, extent, idx);\n  }\n\n  lat = clamp(centerLat, this.minLat_, this.maxLat_);\n\n  cnt = 0;\n  while (lat != this.maxLat_ && cnt++ < maxLines) {\n    lat = Math.min(lat + interval, this.maxLat_);\n    idx = this.addParallel_(lat, minLon, maxLon, squaredTolerance, extent, idx);\n  }\n\n  this.parallels_.length = idx;\n  if (this.parallelsLabels_) {\n    this.parallelsLabels_.length = idx;\n  }\n\n};\n\n\n/**\n * @param {number} resolution Resolution.\n * @return {number} The interval in degrees.\n * @private\n */\nGraticule.prototype.getInterval_ = function(resolution) {\n  const centerLon = this.projectionCenterLonLat_[0];\n  const centerLat = this.projectionCenterLonLat_[1];\n  let interval = -1;\n  const target = Math.pow(this.targetSize_ * resolution, 2);\n  /** @type {Array.<number>} **/\n  const p1 = [];\n  /** @type {Array.<number>} **/\n  const p2 = [];\n  for (let i = 0, ii = INTERVALS.length; i < ii; ++i) {\n    const delta = INTERVALS[i] / 2;\n    p1[0] = centerLon - delta;\n    p1[1] = centerLat - delta;\n    p2[0] = centerLon + delta;\n    p2[1] = centerLat + delta;\n    this.fromLonLatTransform_(p1, p1);\n    this.fromLonLatTransform_(p2, p2);\n    const dist = Math.pow(p2[0] - p1[0], 2) + Math.pow(p2[1] - p1[1], 2);\n    if (dist <= target) {\n      break;\n    }\n    interval = INTERVALS[i];\n  }\n  return interval;\n};\n\n\n/**\n * Get the map associated with this graticule.\n * @return {module:ol/PluggableMap} The map.\n * @api\n */\nGraticule.prototype.getMap = function() {\n  return this.map_;\n};\n\n\n/**\n * @param {number} lon Longitude.\n * @param {number} minLat Minimal latitude.\n * @param {number} maxLat Maximal latitude.\n * @param {number} squaredTolerance Squared tolerance.\n * @return {module:ol/geom/LineString} The meridian line string.\n * @param {number} index Index.\n * @private\n */\nGraticule.prototype.getMeridian_ = function(lon, minLat, maxLat, squaredTolerance, index) {\n  const flatCoordinates = meridian(lon, minLat, maxLat, this.projection_, squaredTolerance);\n  const lineString = this.meridians_[index] !== undefined ? this.meridians_[index] : new LineString(null);\n  lineString.setFlatCoordinates(GeometryLayout.XY, flatCoordinates);\n  return lineString;\n};\n\n\n/**\n * Get the list of meridians.  Meridians are lines of equal longitude.\n * @return {Array.<module:ol/geom/LineString>} The meridians.\n * @api\n */\nGraticule.prototype.getMeridians = function() {\n  return this.meridians_;\n};\n\n\n/**\n * @param {number} lat Latitude.\n * @param {number} minLon Minimal longitude.\n * @param {number} maxLon Maximal longitude.\n * @param {number} squaredTolerance Squared tolerance.\n * @return {module:ol/geom/LineString} The parallel line string.\n * @param {number} index Index.\n * @private\n */\nGraticule.prototype.getParallel_ = function(lat, minLon, maxLon, squaredTolerance, index) {\n  const flatCoordinates = parallel(lat, minLon, maxLon, this.projection_, squaredTolerance);\n  const lineString = this.parallels_[index] !== undefined ? this.parallels_[index] : new LineString(null);\n  lineString.setFlatCoordinates(GeometryLayout.XY, flatCoordinates);\n  return lineString;\n};\n\n\n/**\n * Get the list of parallels.  Parallels are lines of equal latitude.\n * @return {Array.<module:ol/geom/LineString>} The parallels.\n * @api\n */\nGraticule.prototype.getParallels = function() {\n  return this.parallels_;\n};\n\n\n/**\n * @param {module:ol/render/Event} e Event.\n * @private\n */\nGraticule.prototype.handlePostCompose_ = function(e) {\n  const vectorContext = e.vectorContext;\n  const frameState = e.frameState;\n  const extent = frameState.extent;\n  const viewState = frameState.viewState;\n  const center = viewState.center;\n  const projection = viewState.projection;\n  const resolution = viewState.resolution;\n  const pixelRatio = frameState.pixelRatio;\n  const squaredTolerance =\n      resolution * resolution / (4 * pixelRatio * pixelRatio);\n\n  const updateProjectionInfo = !this.projection_ ||\n      !equivalentProjection(this.projection_, projection);\n\n  if (updateProjectionInfo) {\n    this.updateProjectionInfo_(projection);\n  }\n\n  this.createGraticule_(extent, center, resolution, squaredTolerance);\n\n  // Draw the lines\n  vectorContext.setFillStrokeStyle(null, this.strokeStyle_);\n  let i, l, line;\n  for (i = 0, l = this.meridians_.length; i < l; ++i) {\n    line = this.meridians_[i];\n    vectorContext.drawGeometry(line);\n  }\n  for (i = 0, l = this.parallels_.length; i < l; ++i) {\n    line = this.parallels_[i];\n    vectorContext.drawGeometry(line);\n  }\n  let labelData;\n  if (this.meridiansLabels_) {\n    for (i = 0, l = this.meridiansLabels_.length; i < l; ++i) {\n      labelData = this.meridiansLabels_[i];\n      this.lonLabelStyle_.setText(labelData.text);\n      vectorContext.setTextStyle(this.lonLabelStyle_);\n      vectorContext.drawGeometry(labelData.geom);\n    }\n  }\n  if (this.parallelsLabels_) {\n    for (i = 0, l = this.parallelsLabels_.length; i < l; ++i) {\n      labelData = this.parallelsLabels_[i];\n      this.latLabelStyle_.setText(labelData.text);\n      vectorContext.setTextStyle(this.latLabelStyle_);\n      vectorContext.drawGeometry(labelData.geom);\n    }\n  }\n};\n\n\n/**\n * @param {module:ol/proj/Projection} projection Projection.\n * @private\n */\nGraticule.prototype.updateProjectionInfo_ = function(projection) {\n  const epsg4326Projection = getProjection('EPSG:4326');\n\n  const worldExtent = projection.getWorldExtent();\n  const worldExtentP = transformExtent(worldExtent, epsg4326Projection, projection);\n\n  this.maxLat_ = worldExtent[3];\n  this.maxLon_ = worldExtent[2];\n  this.minLat_ = worldExtent[1];\n  this.minLon_ = worldExtent[0];\n\n  this.maxLatP_ = worldExtentP[3];\n  this.maxLonP_ = worldExtentP[2];\n  this.minLatP_ = worldExtentP[1];\n  this.minLonP_ = worldExtentP[0];\n\n  this.fromLonLatTransform_ = getTransform(epsg4326Projection, projection);\n\n  this.toLonLatTransform_ = getTransform(projection, epsg4326Projection);\n\n  this.projectionCenterLonLat_ = this.toLonLatTransform_(getCenter(projection.getExtent()));\n\n  this.projection_ = projection;\n};\n\n\n/**\n * Set the map for this graticule.  The graticule will be rendered on the\n * provided map.\n * @param {module:ol/PluggableMap} map Map.\n * @api\n */\nGraticule.prototype.setMap = function(map) {\n  if (this.map_) {\n    unlistenByKey(this.postcomposeListenerKey_);\n    this.postcomposeListenerKey_ = null;\n    this.map_.render();\n  }\n  if (map) {\n    this.postcomposeListenerKey_ = listen(map, RenderEventType.POSTCOMPOSE, this.handlePostCompose_, this);\n    map.render();\n  }\n  this.map_ = map;\n};\nexport default Graticule;\n","/**\n * @module ol/format/EsriJSON\n */\nimport {inherits} from '../util.js';\nimport Feature from '../Feature.js';\nimport {assert} from '../asserts.js';\nimport {containsExtent} from '../extent.js';\nimport {transformWithOptions} from '../format/Feature.js';\nimport JSONFeature from '../format/JSONFeature.js';\nimport GeometryLayout from '../geom/GeometryLayout.js';\nimport GeometryType from '../geom/GeometryType.js';\nimport LineString from '../geom/LineString.js';\nimport LinearRing from '../geom/LinearRing.js';\nimport MultiLineString from '../geom/MultiLineString.js';\nimport MultiPoint from '../geom/MultiPoint.js';\nimport MultiPolygon from '../geom/MultiPolygon.js';\nimport Point from '../geom/Point.js';\nimport Polygon from '../geom/Polygon.js';\nimport {deflateCoordinates} from '../geom/flat/deflate.js';\nimport {linearRingIsClockwise} from '../geom/flat/orient.js';\nimport {assign, isEmpty} from '../obj.js';\nimport {get as getProjection} from '../proj.js';\n\n\n/**\n * @const\n * @type {Object.<module:ol/geom/GeometryType, function(EsriJSONGeometry): module:ol/geom/Geometry>}\n */\nconst GEOMETRY_READERS = {};\nGEOMETRY_READERS[GeometryType.POINT] = readPointGeometry;\nGEOMETRY_READERS[GeometryType.LINE_STRING] = readLineStringGeometry;\nGEOMETRY_READERS[GeometryType.POLYGON] = readPolygonGeometry;\nGEOMETRY_READERS[GeometryType.MULTI_POINT] = readMultiPointGeometry;\nGEOMETRY_READERS[GeometryType.MULTI_LINE_STRING] = readMultiLineStringGeometry;\nGEOMETRY_READERS[GeometryType.MULTI_POLYGON] = readMultiPolygonGeometry;\n\n\n/**\n * @const\n * @type {Object.<string, function(module:ol/geom/Geometry, module:ol/format/Feature~WriteOptions=): (EsriJSONGeometry)>}\n */\nconst GEOMETRY_WRITERS = {};\nGEOMETRY_WRITERS[GeometryType.POINT] = writePointGeometry;\nGEOMETRY_WRITERS[GeometryType.LINE_STRING] = writeLineStringGeometry;\nGEOMETRY_WRITERS[GeometryType.POLYGON] = writePolygonGeometry;\nGEOMETRY_WRITERS[GeometryType.MULTI_POINT] = writeMultiPointGeometry;\nGEOMETRY_WRITERS[GeometryType.MULTI_LINE_STRING] = writeMultiLineStringGeometry;\nGEOMETRY_WRITERS[GeometryType.MULTI_POLYGON] = writeMultiPolygonGeometry;\n\n\n/**\n * @typedef {Object} Options\n * @property {string} [geometryName] Geometry name to use when creating features.\n */\n\n\n/**\n * @classdesc\n * Feature format for reading and writing data in the EsriJSON format.\n *\n * @constructor\n * @extends {module:ol/format/JSONFeature}\n * @param {module:ol/format/EsriJSON~Options=} opt_options Options.\n * @api\n */\nconst EsriJSON = function(opt_options) {\n\n  const options = opt_options ? opt_options : {};\n\n  JSONFeature.call(this);\n\n  /**\n   * Name of the geometry attribute for features.\n   * @type {string|undefined}\n   * @private\n   */\n  this.geometryName_ = options.geometryName;\n\n};\n\ninherits(EsriJSON, JSONFeature);\n\n\n/**\n * @param {EsriJSONGeometry} object Object.\n * @param {module:ol/format/Feature~ReadOptions=} opt_options Read options.\n * @return {module:ol/geom/Geometry} Geometry.\n */\nfunction readGeometry(object, opt_options) {\n  if (!object) {\n    return null;\n  }\n  /** @type {module:ol/geom/GeometryType} */\n  let type;\n  if (typeof object.x === 'number' && typeof object.y === 'number') {\n    type = GeometryType.POINT;\n  } else if (object.points) {\n    type = GeometryType.MULTI_POINT;\n  } else if (object.paths) {\n    if (object.paths.length === 1) {\n      type = GeometryType.LINE_STRING;\n    } else {\n      type = GeometryType.MULTI_LINE_STRING;\n    }\n  } else if (object.rings) {\n    const layout = getGeometryLayout(object);\n    const rings = convertRings(object.rings, layout);\n    object = /** @type {EsriJSONGeometry} */(assign({}, object));\n    if (rings.length === 1) {\n      type = GeometryType.POLYGON;\n      object.rings = rings[0];\n    } else {\n      type = GeometryType.MULTI_POLYGON;\n      object.rings = rings;\n    }\n  }\n  const geometryReader = GEOMETRY_READERS[type];\n  return (\n    /** @type {module:ol/geom/Geometry} */ (transformWithOptions(geometryReader(object), false, opt_options))\n  );\n}\n\n\n/**\n * Determines inner and outer rings.\n * Checks if any polygons in this array contain any other polygons in this\n * array. It is used for checking for holes.\n * Logic inspired by: https://github.com/Esri/terraformer-arcgis-parser\n * @param {Array.<!Array.<!Array.<number>>>} rings Rings.\n * @param {module:ol/geom/GeometryLayout} layout Geometry layout.\n * @return {Array.<!Array.<!Array.<number>>>} Transformed rings.\n */\nfunction convertRings(rings, layout) {\n  const flatRing = [];\n  const outerRings = [];\n  const holes = [];\n  let i, ii;\n  for (i = 0, ii = rings.length; i < ii; ++i) {\n    flatRing.length = 0;\n    deflateCoordinates(flatRing, 0, rings[i], layout.length);\n    // is this ring an outer ring? is it clockwise?\n    const clockwise = linearRingIsClockwise(flatRing, 0,\n      flatRing.length, layout.length);\n    if (clockwise) {\n      outerRings.push([rings[i]]);\n    } else {\n      holes.push(rings[i]);\n    }\n  }\n  while (holes.length) {\n    const hole = holes.shift();\n    let matched = false;\n    // loop over all outer rings and see if they contain our hole.\n    for (i = outerRings.length - 1; i >= 0; i--) {\n      const outerRing = outerRings[i][0];\n      const containsHole = containsExtent(\n        new LinearRing(outerRing).getExtent(),\n        new LinearRing(hole).getExtent()\n      );\n      if (containsHole) {\n        // the hole is contained push it into our polygon\n        outerRings[i].push(hole);\n        matched = true;\n        break;\n      }\n    }\n    if (!matched) {\n      // no outer rings contain this hole turn it into and outer\n      // ring (reverse it)\n      outerRings.push([hole.reverse()]);\n    }\n  }\n  return outerRings;\n}\n\n\n/**\n * @param {EsriJSONGeometry} object Object.\n * @return {module:ol/geom/Geometry} Point.\n */\nfunction readPointGeometry(object) {\n  let point;\n  if (object.m !== undefined && object.z !== undefined) {\n    point = new Point([object.x, object.y, object.z, object.m],\n      GeometryLayout.XYZM);\n  } else if (object.z !== undefined) {\n    point = new Point([object.x, object.y, object.z],\n      GeometryLayout.XYZ);\n  } else if (object.m !== undefined) {\n    point = new Point([object.x, object.y, object.m],\n      GeometryLayout.XYM);\n  } else {\n    point = new Point([object.x, object.y]);\n  }\n  return point;\n}\n\n\n/**\n * @param {EsriJSONGeometry} object Object.\n * @return {module:ol/geom/Geometry} LineString.\n */\nfunction readLineStringGeometry(object) {\n  const layout = getGeometryLayout(object);\n  return new LineString(object.paths[0], layout);\n}\n\n\n/**\n * @param {EsriJSONGeometry} object Object.\n * @return {module:ol/geom/Geometry} MultiLineString.\n */\nfunction readMultiLineStringGeometry(object) {\n  const layout = getGeometryLayout(object);\n  return new MultiLineString(object.paths, layout);\n}\n\n\n/**\n * @param {EsriJSONGeometry} object Object.\n * @return {module:ol/geom/GeometryLayout} The geometry layout to use.\n */\nfunction getGeometryLayout(object) {\n  let layout = GeometryLayout.XY;\n  if (object.hasZ === true && object.hasM === true) {\n    layout = GeometryLayout.XYZM;\n  } else if (object.hasZ === true) {\n    layout = GeometryLayout.XYZ;\n  } else if (object.hasM === true) {\n    layout = GeometryLayout.XYM;\n  }\n  return layout;\n}\n\n\n/**\n * @param {EsriJSONGeometry} object Object.\n * @return {module:ol/geom/Geometry} MultiPoint.\n */\nfunction readMultiPointGeometry(object) {\n  const layout = getGeometryLayout(object);\n  return new MultiPoint(object.points, layout);\n}\n\n\n/**\n * @param {EsriJSONGeometry} object Object.\n * @return {module:ol/geom/Geometry} MultiPolygon.\n */\nfunction readMultiPolygonGeometry(object) {\n  const layout = getGeometryLayout(object);\n  return new MultiPolygon(\n    /** @type {Array.<Array.<Array.<Array.<number>>>>} */(object.rings),\n    layout);\n}\n\n\n/**\n * @param {EsriJSONGeometry} object Object.\n * @return {module:ol/geom/Geometry} Polygon.\n */\nfunction readPolygonGeometry(object) {\n  const layout = getGeometryLayout(object);\n  return new Polygon(object.rings, layout);\n}\n\n\n/**\n * @param {module:ol/geom/Geometry} geometry Geometry.\n * @param {module:ol/format/Feature~WriteOptions=} opt_options Write options.\n * @return {EsriJSONGeometry} EsriJSON geometry.\n */\nfunction writePointGeometry(geometry, opt_options) {\n  const coordinates = /** @type {module:ol/geom/Point} */ (geometry).getCoordinates();\n  let esriJSON;\n  const layout = /** @type {module:ol/geom/Point} */ (geometry).getLayout();\n  if (layout === GeometryLayout.XYZ) {\n    esriJSON = /** @type {EsriJSONPoint} */ ({\n      x: coordinates[0],\n      y: coordinates[1],\n      z: coordinates[2]\n    });\n  } else if (layout === GeometryLayout.XYM) {\n    esriJSON = /** @type {EsriJSONPoint} */ ({\n      x: coordinates[0],\n      y: coordinates[1],\n      m: coordinates[2]\n    });\n  } else if (layout === GeometryLayout.XYZM) {\n    esriJSON = /** @type {EsriJSONPoint} */ ({\n      x: coordinates[0],\n      y: coordinates[1],\n      z: coordinates[2],\n      m: coordinates[3]\n    });\n  } else if (layout === GeometryLayout.XY) {\n    esriJSON = /** @type {EsriJSONPoint} */ ({\n      x: coordinates[0],\n      y: coordinates[1]\n    });\n  } else {\n    assert(false, 34); // Invalid geometry layout\n  }\n  return /** @type {EsriJSONGeometry} */ (esriJSON);\n}\n\n\n/**\n * @param {module:ol/geom/SimpleGeometry} geometry Geometry.\n * @return {Object} Object with boolean hasZ and hasM keys.\n */\nfunction getHasZM(geometry) {\n  const layout = geometry.getLayout();\n  return {\n    hasZ: (layout === GeometryLayout.XYZ ||\n      layout === GeometryLayout.XYZM),\n    hasM: (layout === GeometryLayout.XYM ||\n      layout === GeometryLayout.XYZM)\n  };\n}\n\n\n/**\n * @param {module:ol/geom/Geometry} geometry Geometry.\n * @param {module:ol/format/Feature~WriteOptions=} opt_options Write options.\n * @return {EsriJSONPolyline} EsriJSON geometry.\n */\nfunction writeLineStringGeometry(geometry, opt_options) {\n  const hasZM = getHasZM(/** @type {module:ol/geom/LineString} */(geometry));\n  return (\n    /** @type {EsriJSONPolyline} */ {\n      hasZ: hasZM.hasZ,\n      hasM: hasZM.hasM,\n      paths: [\n        /** @type {module:ol/geom/LineString} */ (geometry).getCoordinates()\n      ]\n    }\n  );\n}\n\n\n/**\n * @param {module:ol/geom/Geometry} geometry Geometry.\n * @param {module:ol/format/Feature~WriteOptions=} opt_options Write options.\n * @return {EsriJSONPolygon} EsriJSON geometry.\n */\nfunction writePolygonGeometry(geometry, opt_options) {\n  // Esri geometries use the left-hand rule\n  const hasZM = getHasZM(/** @type {module:ol/geom/Polygon} */(geometry));\n  return (\n    /** @type {EsriJSONPolygon} */ {\n      hasZ: hasZM.hasZ,\n      hasM: hasZM.hasM,\n      rings: /** @type {module:ol/geom/Polygon} */ (geometry).getCoordinates(false)\n    }\n  );\n}\n\n\n/**\n * @param {module:ol/geom/Geometry} geometry Geometry.\n * @param {module:ol/format/Feature~WriteOptions=} opt_options Write options.\n * @return {EsriJSONPolyline} EsriJSON geometry.\n */\nfunction writeMultiLineStringGeometry(geometry, opt_options) {\n  const hasZM = getHasZM(/** @type {module:ol/geom/MultiLineString} */(geometry));\n  return (\n    /** @type {EsriJSONPolyline} */ {\n      hasZ: hasZM.hasZ,\n      hasM: hasZM.hasM,\n      paths: /** @type {module:ol/geom/MultiLineString} */ (geometry).getCoordinates()\n    }\n  );\n}\n\n\n/**\n * @param {module:ol/geom/Geometry} geometry Geometry.\n * @param {module:ol/format/Feature~WriteOptions=} opt_options Write options.\n * @return {EsriJSONMultipoint} EsriJSON geometry.\n */\nfunction writeMultiPointGeometry(geometry, opt_options) {\n  const hasZM = getHasZM(/** @type {module:ol/geom/MultiPoint} */(geometry));\n  return (\n    /** @type {EsriJSONMultipoint} */ {\n      hasZ: hasZM.hasZ,\n      hasM: hasZM.hasM,\n      points: /** @type {module:ol/geom/MultiPoint} */ (geometry).getCoordinates()\n    }\n  );\n}\n\n\n/**\n * @param {module:ol/geom/Geometry} geometry Geometry.\n * @param {module:ol/format/Feature~WriteOptions=} opt_options Write options.\n * @return {EsriJSONPolygon} EsriJSON geometry.\n */\nfunction writeMultiPolygonGeometry(geometry, opt_options) {\n  const hasZM = getHasZM(/** @type {module:ol/geom/MultiPolygon} */(geometry));\n  const coordinates = /** @type {module:ol/geom/MultiPolygon} */ (geometry).getCoordinates(false);\n  const output = [];\n  for (let i = 0; i < coordinates.length; i++) {\n    for (let x = coordinates[i].length - 1; x >= 0; x--) {\n      output.push(coordinates[i][x]);\n    }\n  }\n  return /** @type {EsriJSONPolygon} */ ({\n    hasZ: hasZM.hasZ,\n    hasM: hasZM.hasM,\n    rings: output\n  });\n}\n\n\n/**\n * Read a feature from a EsriJSON Feature source.  Only works for Feature,\n * use `readFeatures` to read FeatureCollection source.\n *\n * @function\n * @param {ArrayBuffer|Document|Node|Object|string} source Source.\n * @param {module:ol/format/Feature~ReadOptions=} opt_options Read options.\n * @return {module:ol/Feature} Feature.\n * @api\n */\nEsriJSON.prototype.readFeature;\n\n\n/**\n * Read all features from a EsriJSON source.  Works with both Feature and\n * FeatureCollection sources.\n *\n * @function\n * @param {ArrayBuffer|Document|Node|Object|string} source Source.\n * @param {module:ol/format/Feature~ReadOptions=} opt_options Read options.\n * @return {Array.<module:ol/Feature>} Features.\n * @api\n */\nEsriJSON.prototype.readFeatures;\n\n\n/**\n * @inheritDoc\n */\nEsriJSON.prototype.readFeatureFromObject = function(object, opt_options) {\n  const esriJSONFeature = /** @type {EsriJSONFeature} */ (object);\n  const geometry = readGeometry(esriJSONFeature.geometry, opt_options);\n  const feature = new Feature();\n  if (this.geometryName_) {\n    feature.setGeometryName(this.geometryName_);\n  }\n  feature.setGeometry(geometry);\n  if (opt_options && opt_options.idField &&\n    esriJSONFeature.attributes[opt_options.idField]) {\n    feature.setId(/** @type {number} */(esriJSONFeature.attributes[opt_options.idField]));\n  }\n  if (esriJSONFeature.attributes) {\n    feature.setProperties(esriJSONFeature.attributes);\n  }\n  return feature;\n};\n\n\n/**\n * @inheritDoc\n */\nEsriJSON.prototype.readFeaturesFromObject = function(object, opt_options) {\n  const esriJSONObject = /** @type {EsriJSONObject} */ (object);\n  const options = opt_options ? opt_options : {};\n  if (esriJSONObject.features) {\n    const esriJSONFeatureCollection = /** @type {EsriJSONFeatureCollection} */ (object);\n    /** @type {Array.<module:ol/Feature>} */\n    const features = [];\n    const esriJSONFeatures = esriJSONFeatureCollection.features;\n    options.idField = object.objectIdFieldName;\n    for (let i = 0, ii = esriJSONFeatures.length; i < ii; ++i) {\n      features.push(this.readFeatureFromObject(esriJSONFeatures[i], options));\n    }\n    return features;\n  } else {\n    return [this.readFeatureFromObject(object, options)];\n  }\n};\n\n\n/**\n * Read a geometry from a EsriJSON source.\n *\n * @function\n * @param {ArrayBuffer|Document|Node|Object|string} source Source.\n * @param {module:ol/format/Feature~ReadOptions=} opt_options Read options.\n * @return {module:ol/geom/Geometry} Geometry.\n * @api\n */\nEsriJSON.prototype.readGeometry;\n\n\n/**\n * @inheritDoc\n */\nEsriJSON.prototype.readGeometryFromObject = function(object, opt_options) {\n  return readGeometry(/** @type {EsriJSONGeometry} */(object), opt_options);\n};\n\n\n/**\n * Read the projection from a EsriJSON source.\n *\n * @function\n * @param {ArrayBuffer|Document|Node|Object|string} source Source.\n * @return {module:ol/proj/Projection} Projection.\n * @api\n */\nEsriJSON.prototype.readProjection;\n\n\n/**\n * @inheritDoc\n */\nEsriJSON.prototype.readProjectionFromObject = function(object) {\n  const esriJSONObject = /** @type {EsriJSONObject} */ (object);\n  if (esriJSONObject.spatialReference && esriJSONObject.spatialReference.wkid) {\n    const crs = esriJSONObject.spatialReference.wkid;\n    return getProjection('EPSG:' + crs);\n  } else {\n    return null;\n  }\n};\n\n\n/**\n * @param {module:ol/geom/Geometry} geometry Geometry.\n * @param {module:ol/format/Feature~WriteOptions=} opt_options Write options.\n * @return {EsriJSONGeometry} EsriJSON geometry.\n */\nfunction writeGeometry(geometry, opt_options) {\n  const geometryWriter = GEOMETRY_WRITERS[geometry.getType()];\n  return geometryWriter(/** @type {module:ol/geom/Geometry} */(\n    transformWithOptions(geometry, true, opt_options)), opt_options);\n}\n\n\n/**\n * Encode a geometry as a EsriJSON string.\n *\n * @function\n * @param {module:ol/geom/Geometry} geometry Geometry.\n * @param {module:ol/format/Feature~WriteOptions=} opt_options Write options.\n * @return {string} EsriJSON.\n * @api\n */\nEsriJSON.prototype.writeGeometry;\n\n\n/**\n * Encode a geometry as a EsriJSON object.\n *\n * @param {module:ol/geom/Geometry} geometry Geometry.\n * @param {module:ol/format/Feature~WriteOptions=} opt_options Write options.\n * @return {EsriJSONGeometry} Object.\n * @override\n * @api\n */\nEsriJSON.prototype.writeGeometryObject = function(geometry, opt_options) {\n  return writeGeometry(geometry, this.adaptOptions(opt_options));\n};\n\n\n/**\n * Encode a feature as a EsriJSON Feature string.\n *\n * @function\n * @param {module:ol/Feature} feature Feature.\n * @param {module:ol/format/Feature~WriteOptions=} opt_options Write options.\n * @return {string} EsriJSON.\n * @api\n */\nEsriJSON.prototype.writeFeature;\n\n\n/**\n * Encode a feature as a esriJSON Feature object.\n *\n * @param {module:ol/Feature} feature Feature.\n * @param {module:ol/format/Feature~WriteOptions=} opt_options Write options.\n * @return {Object} Object.\n * @override\n * @api\n */\nEsriJSON.prototype.writeFeatureObject = function(feature, opt_options) {\n  opt_options = this.adaptOptions(opt_options);\n  const object = {};\n  const geometry = feature.getGeometry();\n  if (geometry) {\n    object['geometry'] = writeGeometry(geometry, opt_options);\n    if (opt_options && opt_options.featureProjection) {\n      object['geometry']['spatialReference'] = /** @type {EsriJSONCRS} */({\n        wkid: getProjection(opt_options.featureProjection).getCode().split(':').pop()\n      });\n    }\n  }\n  const properties = feature.getProperties();\n  delete properties[feature.getGeometryName()];\n  if (!isEmpty(properties)) {\n    object['attributes'] = properties;\n  } else {\n    object['attributes'] = {};\n  }\n  return object;\n};\n\n\n/**\n * Encode an array of features as EsriJSON.\n *\n * @function\n * @param {Array.<module:ol/Feature>} features Features.\n * @param {module:ol/format/Feature~WriteOptions=} opt_options Write options.\n * @return {string} EsriJSON.\n * @api\n */\nEsriJSON.prototype.writeFeatures;\n\n\n/**\n * Encode an array of features as a EsriJSON object.\n *\n * @param {Array.<module:ol/Feature>} features Features.\n * @param {module:ol/format/Feature~WriteOptions=} opt_options Write options.\n * @return {Object} EsriJSON Object.\n * @override\n * @api\n */\nEsriJSON.prototype.writeFeaturesObject = function(features, opt_options) {\n  opt_options = this.adaptOptions(opt_options);\n  const objects = [];\n  for (let i = 0, ii = features.length; i < ii; ++i) {\n    objects.push(this.writeFeatureObject(features[i], opt_options));\n  }\n  return /** @type {EsriJSONFeatureCollection} */ ({\n    'features': objects\n  });\n};\n\nexport default EsriJSON;\n","/**\n * @module ol/source/ImageStatic\n */\nimport {inherits} from '../util.js';\nimport ImageWrapper from '../Image.js';\nimport ImageState from '../ImageState.js';\nimport {createCanvasContext2D} from '../dom.js';\nimport {listen} from '../events.js';\nimport EventType from '../events/EventType.js';\nimport {intersects, getHeight, getWidth} from '../extent.js';\nimport {get as getProjection} from '../proj.js';\nimport ImageSource, {defaultImageLoadFunction} from '../source/Image.js';\n\n/**\n * @typedef {Object} Options\n * @property {module:ol/source/Source~AttributionLike} [attributions] Attributions.\n * @property {null|string} [crossOrigin] The `crossOrigin` attribute for loaded images.  Note that\n * you must provide a `crossOrigin` value if you are using the WebGL renderer or if you want to\n * access pixel data with the Canvas renderer.  See\n * {@link https://developer.mozilla.org/en-US/docs/Web/HTML/CORS_enabled_image} for more detail.\n * @property {module:ol/extent~Extent} [imageExtent] Extent of the image in map coordinates.\n * This is the [left, bottom, right, top] map coordinates of your image.\n * @property {module:ol/Image~LoadFunction} [imageLoadFunction] Optional function to load an image given a URL.\n * @property {module:ol/proj~ProjectionLike} projection Projection.\n * @property {module:ol/size~Size} [imageSize] Size of the image in pixels. Usually the image size is auto-detected, so this\n * only needs to be set if auto-detection fails for some reason.\n * @property {string} url Image URL.\n */\n\n\n/**\n * @classdesc\n * A layer source for displaying a single, static image.\n *\n * @constructor\n * @extends {module:ol/source/Image}\n * @param {module:ol/source/ImageStatic~Options=} options ImageStatic options.\n * @api\n */\nconst Static = function(options) {\n  const imageExtent = options.imageExtent;\n\n  const crossOrigin = options.crossOrigin !== undefined ?\n    options.crossOrigin : null;\n\n  const /** @type {module:ol/Image~LoadFunction} */ imageLoadFunction =\n      options.imageLoadFunction !== undefined ?\n        options.imageLoadFunction : defaultImageLoadFunction;\n\n  ImageSource.call(this, {\n    attributions: options.attributions,\n    projection: getProjection(options.projection)\n  });\n\n  /**\n   * @private\n   * @type {module:ol/Image}\n   */\n  this.image_ = new ImageWrapper(imageExtent, undefined, 1, options.url, crossOrigin, imageLoadFunction);\n\n  /**\n   * @private\n   * @type {module:ol/size~Size}\n   */\n  this.imageSize_ = options.imageSize ? options.imageSize : null;\n\n  listen(this.image_, EventType.CHANGE,\n    this.handleImageChange, this);\n\n};\n\ninherits(Static, ImageSource);\n\n\n/**\n * @inheritDoc\n */\nStatic.prototype.getImageInternal = function(extent, resolution, pixelRatio, projection) {\n  if (intersects(extent, this.image_.getExtent())) {\n    return this.image_;\n  }\n  return null;\n};\n\n\n/**\n * @inheritDoc\n */\nStatic.prototype.handleImageChange = function(evt) {\n  if (this.image_.getState() == ImageState.LOADED) {\n    const imageExtent = this.image_.getExtent();\n    const image = this.image_.getImage();\n    let imageWidth, imageHeight;\n    if (this.imageSize_) {\n      imageWidth = this.imageSize_[0];\n      imageHeight = this.imageSize_[1];\n    } else {\n      imageWidth = image.width;\n      imageHeight = image.height;\n    }\n    const resolution = getHeight(imageExtent) / imageHeight;\n    const targetWidth = Math.ceil(getWidth(imageExtent) / resolution);\n    if (targetWidth != imageWidth) {\n      const context = createCanvasContext2D(targetWidth, imageHeight);\n      const canvas = context.canvas;\n      context.drawImage(image, 0, 0, imageWidth, imageHeight,\n        0, 0, canvas.width, canvas.height);\n      this.image_.setImage(canvas);\n    }\n  }\n  ImageSource.prototype.handleImageChange.call(this, evt);\n};\nexport default Static;\n","/**\n * @module ol/control/MousePosition\n */\n\nimport {inherits} from '../util.js';\nimport {listen} from '../events.js';\nimport EventType from '../events/EventType.js';\nimport {getChangeEventType} from '../Object.js';\nimport Control from '../control/Control.js';\nimport {getTransformFromProjections, identityTransform, get as getProjection} from '../proj.js';\n\n\n/**\n * @type {string}\n */\nconst PROJECTION = 'projection';\n\n/**\n * @type {string}\n */\nconst COORDINATE_FORMAT = 'coordinateFormat';\n\n\n/**\n * @typedef {Object} Options\n * @property {string} [className='ol-mouse-position'] CSS class name.\n * @property {module:ol/coordinate~CoordinateFormat} [coordinateFormat] Coordinate format.\n * @property {module:ol/proj~ProjectionLike} projection Projection.\n * @property {function(module:ol/MapEvent)} [render] Function called when the\n * control should be re-rendered. This is called in a `requestAnimationFrame`\n * callback.\n * @property {Element|string} [target] Specify a target if you want the\n * control to be rendered outside of the map's viewport.\n * @property {string} [undefinedHTML='&nbsp;'] Markup to show when coordinates are not\n * available (e.g. when the pointer leaves the map viewport).  By default, the last position\n * will be replaced with `'&nbsp;'` when the pointer leaves the viewport.  To\n * retain the last rendered position, set this option to something falsey (like an empty\n * string `''`).\n */\n\n\n/**\n * @classdesc\n * A control to show the 2D coordinates of the mouse cursor. By default, these\n * are in the view projection, but can be in any supported projection.\n * By default the control is shown in the top right corner of the map, but this\n * can be changed by using the css selector `.ol-mouse-position`.\n *\n * @constructor\n * @extends {module:ol/control/Control}\n * @param {module:ol/control/MousePosition~Options=} opt_options Mouse position\n *     options.\n * @api\n */\nconst MousePosition = function(opt_options) {\n\n  const options = opt_options ? opt_options : {};\n\n  const element = document.createElement('DIV');\n  element.className = options.className !== undefined ? options.className : 'ol-mouse-position';\n\n  Control.call(this, {\n    element: element,\n    render: options.render || render,\n    target: options.target\n  });\n\n  listen(this,\n    getChangeEventType(PROJECTION),\n    this.handleProjectionChanged_, this);\n\n  if (options.coordinateFormat) {\n    this.setCoordinateFormat(options.coordinateFormat);\n  }\n  if (options.projection) {\n    this.setProjection(options.projection);\n  }\n\n  /**\n   * @private\n   * @type {string}\n   */\n  this.undefinedHTML_ = 'undefinedHTML' in options ? options.undefinedHTML : '&nbsp;';\n\n  /**\n   * @private\n   * @type {boolean}\n   */\n  this.renderOnMouseOut_ = !!this.undefinedHTML_;\n\n  /**\n   * @private\n   * @type {string}\n   */\n  this.renderedHTML_ = element.innerHTML;\n\n  /**\n   * @private\n   * @type {module:ol/proj/Projection}\n   */\n  this.mapProjection_ = null;\n\n  /**\n   * @private\n   * @type {?module:ol/proj~TransformFunction}\n   */\n  this.transform_ = null;\n\n  /**\n   * @private\n   * @type {module:ol~Pixel}\n   */\n  this.lastMouseMovePixel_ = null;\n\n};\n\ninherits(MousePosition, Control);\n\n\n/**\n * Update the mouseposition element.\n * @param {module:ol/MapEvent} mapEvent Map event.\n * @this {module:ol/control/MousePosition}\n * @api\n */\nexport function render(mapEvent) {\n  const frameState = mapEvent.frameState;\n  if (!frameState) {\n    this.mapProjection_ = null;\n  } else {\n    if (this.mapProjection_ != frameState.viewState.projection) {\n      this.mapProjection_ = frameState.viewState.projection;\n      this.transform_ = null;\n    }\n  }\n  this.updateHTML_(this.lastMouseMovePixel_);\n}\n\n\n/**\n * @private\n */\nMousePosition.prototype.handleProjectionChanged_ = function() {\n  this.transform_ = null;\n};\n\n\n/**\n * Return the coordinate format type used to render the current position or\n * undefined.\n * @return {module:ol/coordinate~CoordinateFormat|undefined} The format to render the current\n *     position in.\n * @observable\n * @api\n */\nMousePosition.prototype.getCoordinateFormat = function() {\n  return (\n    /** @type {module:ol/coordinate~CoordinateFormat|undefined} */ (this.get(COORDINATE_FORMAT))\n  );\n};\n\n\n/**\n * Return the projection that is used to report the mouse position.\n * @return {module:ol/proj/Projection|undefined} The projection to report mouse\n *     position in.\n * @observable\n * @api\n */\nMousePosition.prototype.getProjection = function() {\n  return (\n    /** @type {module:ol/proj/Projection|undefined} */ (this.get(PROJECTION))\n  );\n};\n\n\n/**\n * @param {Event} event Browser event.\n * @protected\n */\nMousePosition.prototype.handleMouseMove = function(event) {\n  const map = this.getMap();\n  this.lastMouseMovePixel_ = map.getEventPixel(event);\n  this.updateHTML_(this.lastMouseMovePixel_);\n};\n\n\n/**\n * @param {Event} event Browser event.\n * @protected\n */\nMousePosition.prototype.handleMouseOut = function(event) {\n  this.updateHTML_(null);\n  this.lastMouseMovePixel_ = null;\n};\n\n\n/**\n * @inheritDoc\n * @api\n */\nMousePosition.prototype.setMap = function(map) {\n  Control.prototype.setMap.call(this, map);\n  if (map) {\n    const viewport = map.getViewport();\n    this.listenerKeys.push(\n      listen(viewport, EventType.MOUSEMOVE, this.handleMouseMove, this)\n    );\n    if (this.renderOnMouseOut_) {\n      this.listenerKeys.push(\n        listen(viewport, EventType.MOUSEOUT, this.handleMouseOut, this)\n      );\n    }\n  }\n};\n\n\n/**\n * Set the coordinate format type used to render the current position.\n * @param {module:ol/coordinate~CoordinateFormat} format The format to render the current\n *     position in.\n * @observable\n * @api\n */\nMousePosition.prototype.setCoordinateFormat = function(format) {\n  this.set(COORDINATE_FORMAT, format);\n};\n\n\n/**\n * Set the projection that is used to report the mouse position.\n * @param {module:ol/proj~ProjectionLike} projection The projection to report mouse\n *     position in.\n * @observable\n * @api\n */\nMousePosition.prototype.setProjection = function(projection) {\n  this.set(PROJECTION, getProjection(projection));\n};\n\n\n/**\n * @param {?module:ol~Pixel} pixel Pixel.\n * @private\n */\nMousePosition.prototype.updateHTML_ = function(pixel) {\n  let html = this.undefinedHTML_;\n  if (pixel && this.mapProjection_) {\n    if (!this.transform_) {\n      const projection = this.getProjection();\n      if (projection) {\n        this.transform_ = getTransformFromProjections(\n          this.mapProjection_, projection);\n      } else {\n        this.transform_ = identityTransform;\n      }\n    }\n    const map = this.getMap();\n    const coordinate = map.getCoordinateFromPixel(pixel);\n    if (coordinate) {\n      this.transform_(coordinate, coordinate);\n      const coordinateFormat = this.getCoordinateFormat();\n      if (coordinateFormat) {\n        html = coordinateFormat(coordinate);\n      } else {\n        html = coordinate.toString();\n      }\n    }\n  }\n  if (!this.renderedHTML_ || html !== this.renderedHTML_) {\n    this.element.innerHTML = html;\n    this.renderedHTML_ = html;\n  }\n};\n\n\nexport default MousePosition;\n","/**\n * @module ol/format/WKT\n */\nimport {inherits} from '../util.js';\nimport Feature from '../Feature.js';\nimport {transformWithOptions} from '../format/Feature.js';\nimport TextFeature from '../format/TextFeature.js';\nimport GeometryCollection from '../geom/GeometryCollection.js';\nimport GeometryType from '../geom/GeometryType.js';\nimport GeometryLayout from '../geom/GeometryLayout.js';\nimport LineString from '../geom/LineString.js';\nimport MultiLineString from '../geom/MultiLineString.js';\nimport MultiPoint from '../geom/MultiPoint.js';\nimport MultiPolygon from '../geom/MultiPolygon.js';\nimport Point from '../geom/Point.js';\nimport Polygon from '../geom/Polygon.js';\nimport SimpleGeometry from '../geom/SimpleGeometry.js';\n\n\n/**\n * @typedef {Object} Options\n * @property {boolean} [splitCollection=false] Whether to split GeometryCollections into\n * multiple features on reading.\n */\n\n/**\n * @typedef {Object} Token\n * @property {number} type\n * @property {number|string} [value]\n * @property {number} position\n */\n\n/**\n * @const\n * @type {string}\n */\nconst EMPTY = 'EMPTY';\n\n\n/**\n * @const\n * @type {string}\n */\nconst Z = 'Z';\n\n\n/**\n * @const\n * @type {string}\n */\nconst M = 'M';\n\n\n/**\n * @const\n * @type {string}\n */\nconst ZM = 'ZM';\n\n\n/**\n * @const\n * @enum {number}\n */\nconst TokenType = {\n  TEXT: 1,\n  LEFT_PAREN: 2,\n  RIGHT_PAREN: 3,\n  NUMBER: 4,\n  COMMA: 5,\n  EOF: 6\n};\n\n\n/**\n * Class to tokenize a WKT string.\n * @param {string} wkt WKT string.\n * @constructor\n */\nconst Lexer = function(wkt) {\n\n  /**\n   * @type {string}\n   */\n  this.wkt = wkt;\n\n  /**\n   * @type {number}\n   * @private\n   */\n  this.index_ = -1;\n};\n\n\n/**\n * @param {string} c Character.\n * @return {boolean} Whether the character is alphabetic.\n * @private\n */\nLexer.prototype.isAlpha_ = function(c) {\n  return c >= 'a' && c <= 'z' || c >= 'A' && c <= 'Z';\n};\n\n\n/**\n * @param {string} c Character.\n * @param {boolean=} opt_decimal Whether the string number\n *     contains a dot, i.e. is a decimal number.\n * @return {boolean} Whether the character is numeric.\n * @private\n */\nLexer.prototype.isNumeric_ = function(c, opt_decimal) {\n  const decimal = opt_decimal !== undefined ? opt_decimal : false;\n  return c >= '0' && c <= '9' || c == '.' && !decimal;\n};\n\n\n/**\n * @param {string} c Character.\n * @return {boolean} Whether the character is whitespace.\n * @private\n */\nLexer.prototype.isWhiteSpace_ = function(c) {\n  return c == ' ' || c == '\\t' || c == '\\r' || c == '\\n';\n};\n\n\n/**\n * @return {string} Next string character.\n * @private\n */\nLexer.prototype.nextChar_ = function() {\n  return this.wkt.charAt(++this.index_);\n};\n\n\n/**\n * Fetch and return the next token.\n * @return {!module:ol/format/WKT~Token} Next string token.\n */\nLexer.prototype.nextToken = function() {\n  const c = this.nextChar_();\n  const token = {position: this.index_, value: c};\n\n  if (c == '(') {\n    token.type = TokenType.LEFT_PAREN;\n  } else if (c == ',') {\n    token.type = TokenType.COMMA;\n  } else if (c == ')') {\n    token.type = TokenType.RIGHT_PAREN;\n  } else if (this.isNumeric_(c) || c == '-') {\n    token.type = TokenType.NUMBER;\n    token.value = this.readNumber_();\n  } else if (this.isAlpha_(c)) {\n    token.type = TokenType.TEXT;\n    token.value = this.readText_();\n  } else if (this.isWhiteSpace_(c)) {\n    return this.nextToken();\n  } else if (c === '') {\n    token.type = TokenType.EOF;\n  } else {\n    throw new Error('Unexpected character: ' + c);\n  }\n\n  return token;\n};\n\n\n/**\n * @return {number} Numeric token value.\n * @private\n */\nLexer.prototype.readNumber_ = function() {\n  let c;\n  const index = this.index_;\n  let decimal = false;\n  let scientificNotation = false;\n  do {\n    if (c == '.') {\n      decimal = true;\n    } else if (c == 'e' || c == 'E') {\n      scientificNotation = true;\n    }\n    c = this.nextChar_();\n  } while (\n    this.isNumeric_(c, decimal) ||\n      // if we haven't detected a scientific number before, 'e' or 'E'\n      // hint that we should continue to read\n      !scientificNotation && (c == 'e' || c == 'E') ||\n      // once we know that we have a scientific number, both '-' and '+'\n      // are allowed\n      scientificNotation && (c == '-' || c == '+')\n  );\n  return parseFloat(this.wkt.substring(index, this.index_--));\n};\n\n\n/**\n * @return {string} String token value.\n * @private\n */\nLexer.prototype.readText_ = function() {\n  let c;\n  const index = this.index_;\n  do {\n    c = this.nextChar_();\n  } while (this.isAlpha_(c));\n  return this.wkt.substring(index, this.index_--).toUpperCase();\n};\n\n\n/**\n * Class to parse the tokens from the WKT string.\n * @param {module:ol/format/WKT~Lexer} lexer The lexer.\n * @constructor\n */\nconst Parser = function(lexer) {\n\n  /**\n   * @type {module:ol/format/WKT~Lexer}\n   * @private\n   */\n  this.lexer_ = lexer;\n\n  /**\n   * @type {module:ol/format/WKT~Token}\n   * @private\n   */\n  this.token_;\n\n  /**\n   * @type {module:ol/geom/GeometryLayout}\n   * @private\n   */\n  this.layout_ = GeometryLayout.XY;\n};\n\n\n/**\n * Fetch the next token form the lexer and replace the active token.\n * @private\n */\nParser.prototype.consume_ = function() {\n  this.token_ = this.lexer_.nextToken();\n};\n\n/**\n * Tests if the given type matches the type of the current token.\n * @param {module:ol/format/WKT~TokenType} type Token type.\n * @return {boolean} Whether the token matches the given type.\n */\nParser.prototype.isTokenType = function(type) {\n  const isMatch = this.token_.type == type;\n  return isMatch;\n};\n\n\n/**\n * If the given type matches the current token, consume it.\n * @param {module:ol/format/WKT~TokenType} type Token type.\n * @return {boolean} Whether the token matches the given type.\n */\nParser.prototype.match = function(type) {\n  const isMatch = this.isTokenType(type);\n  if (isMatch) {\n    this.consume_();\n  }\n  return isMatch;\n};\n\n\n/**\n * Try to parse the tokens provided by the lexer.\n * @return {module:ol/geom/Geometry} The geometry.\n */\nParser.prototype.parse = function() {\n  this.consume_();\n  const geometry = this.parseGeometry_();\n  return geometry;\n};\n\n\n/**\n * Try to parse the dimensional info.\n * @return {module:ol/geom/GeometryLayout} The layout.\n * @private\n */\nParser.prototype.parseGeometryLayout_ = function() {\n  let layout = GeometryLayout.XY;\n  const dimToken = this.token_;\n  if (this.isTokenType(TokenType.TEXT)) {\n    const dimInfo = dimToken.value;\n    if (dimInfo === Z) {\n      layout = GeometryLayout.XYZ;\n    } else if (dimInfo === M) {\n      layout = GeometryLayout.XYM;\n    } else if (dimInfo === ZM) {\n      layout = GeometryLayout.XYZM;\n    }\n    if (layout !== GeometryLayout.XY) {\n      this.consume_();\n    }\n  }\n  return layout;\n};\n\n\n/**\n * @return {!Array.<module:ol/geom/Geometry>} A collection of geometries.\n * @private\n */\nParser.prototype.parseGeometryCollectionText_ = function() {\n  if (this.match(TokenType.LEFT_PAREN)) {\n    const geometries = [];\n    do {\n      geometries.push(this.parseGeometry_());\n    } while (this.match(TokenType.COMMA));\n    if (this.match(TokenType.RIGHT_PAREN)) {\n      return geometries;\n    }\n  } else if (this.isEmptyGeometry_()) {\n    return [];\n  }\n  throw new Error(this.formatErrorMessage_());\n};\n\n\n/**\n * @return {Array.<number>} All values in a point.\n * @private\n */\nParser.prototype.parsePointText_ = function() {\n  if (this.match(TokenType.LEFT_PAREN)) {\n    const coordinates = this.parsePoint_();\n    if (this.match(TokenType.RIGHT_PAREN)) {\n      return coordinates;\n    }\n  } else if (this.isEmptyGeometry_()) {\n    return null;\n  }\n  throw new Error(this.formatErrorMessage_());\n};\n\n\n/**\n * @return {!Array.<!Array.<number>>} All points in a linestring.\n * @private\n */\nParser.prototype.parseLineStringText_ = function() {\n  if (this.match(TokenType.LEFT_PAREN)) {\n    const coordinates = this.parsePointList_();\n    if (this.match(TokenType.RIGHT_PAREN)) {\n      return coordinates;\n    }\n  } else if (this.isEmptyGeometry_()) {\n    return [];\n  }\n  throw new Error(this.formatErrorMessage_());\n};\n\n\n/**\n * @return {!Array.<!Array.<number>>} All points in a polygon.\n * @private\n */\nParser.prototype.parsePolygonText_ = function() {\n  if (this.match(TokenType.LEFT_PAREN)) {\n    const coordinates = this.parseLineStringTextList_();\n    if (this.match(TokenType.RIGHT_PAREN)) {\n      return coordinates;\n    }\n  } else if (this.isEmptyGeometry_()) {\n    return [];\n  }\n  throw new Error(this.formatErrorMessage_());\n};\n\n\n/**\n * @return {!Array.<!Array.<number>>} All points in a multipoint.\n * @private\n */\nParser.prototype.parseMultiPointText_ = function() {\n  if (this.match(TokenType.LEFT_PAREN)) {\n    let coordinates;\n    if (this.token_.type == TokenType.LEFT_PAREN) {\n      coordinates = this.parsePointTextList_();\n    } else {\n      coordinates = this.parsePointList_();\n    }\n    if (this.match(TokenType.RIGHT_PAREN)) {\n      return coordinates;\n    }\n  } else if (this.isEmptyGeometry_()) {\n    return [];\n  }\n  throw new Error(this.formatErrorMessage_());\n};\n\n\n/**\n * @return {!Array.<!Array.<number>>} All linestring points\n *                                        in a multilinestring.\n * @private\n */\nParser.prototype.parseMultiLineStringText_ = function() {\n  if (this.match(TokenType.LEFT_PAREN)) {\n    const coordinates = this.parseLineStringTextList_();\n    if (this.match(TokenType.RIGHT_PAREN)) {\n      return coordinates;\n    }\n  } else if (this.isEmptyGeometry_()) {\n    return [];\n  }\n  throw new Error(this.formatErrorMessage_());\n};\n\n\n/**\n * @return {!Array.<!Array.<number>>} All polygon points in a multipolygon.\n * @private\n */\nParser.prototype.parseMultiPolygonText_ = function() {\n  if (this.match(TokenType.LEFT_PAREN)) {\n    const coordinates = this.parsePolygonTextList_();\n    if (this.match(TokenType.RIGHT_PAREN)) {\n      return coordinates;\n    }\n  } else if (this.isEmptyGeometry_()) {\n    return [];\n  }\n  throw new Error(this.formatErrorMessage_());\n};\n\n\n/**\n * @return {!Array.<number>} A point.\n * @private\n */\nParser.prototype.parsePoint_ = function() {\n  const coordinates = [];\n  const dimensions = this.layout_.length;\n  for (let i = 0; i < dimensions; ++i) {\n    const token = this.token_;\n    if (this.match(TokenType.NUMBER)) {\n      coordinates.push(token.value);\n    } else {\n      break;\n    }\n  }\n  if (coordinates.length == dimensions) {\n    return coordinates;\n  }\n  throw new Error(this.formatErrorMessage_());\n};\n\n\n/**\n * @return {!Array.<!Array.<number>>} An array of points.\n * @private\n */\nParser.prototype.parsePointList_ = function() {\n  const coordinates = [this.parsePoint_()];\n  while (this.match(TokenType.COMMA)) {\n    coordinates.push(this.parsePoint_());\n  }\n  return coordinates;\n};\n\n\n/**\n * @return {!Array.<!Array.<number>>} An array of points.\n * @private\n */\nParser.prototype.parsePointTextList_ = function() {\n  const coordinates = [this.parsePointText_()];\n  while (this.match(TokenType.COMMA)) {\n    coordinates.push(this.parsePointText_());\n  }\n  return coordinates;\n};\n\n\n/**\n * @return {!Array.<!Array.<number>>} An array of points.\n * @private\n */\nParser.prototype.parseLineStringTextList_ = function() {\n  const coordinates = [this.parseLineStringText_()];\n  while (this.match(TokenType.COMMA)) {\n    coordinates.push(this.parseLineStringText_());\n  }\n  return coordinates;\n};\n\n\n/**\n * @return {!Array.<!Array.<number>>} An array of points.\n * @private\n */\nParser.prototype.parsePolygonTextList_ = function() {\n  const coordinates = [this.parsePolygonText_()];\n  while (this.match(TokenType.COMMA)) {\n    coordinates.push(this.parsePolygonText_());\n  }\n  return coordinates;\n};\n\n\n/**\n * @return {boolean} Whether the token implies an empty geometry.\n * @private\n */\nParser.prototype.isEmptyGeometry_ = function() {\n  const isEmpty = this.isTokenType(TokenType.TEXT) &&\n      this.token_.value == EMPTY;\n  if (isEmpty) {\n    this.consume_();\n  }\n  return isEmpty;\n};\n\n\n/**\n * Create an error message for an unexpected token error.\n * @return {string} Error message.\n * @private\n */\nParser.prototype.formatErrorMessage_ = function() {\n  return 'Unexpected `' + this.token_.value + '` at position ' +\n      this.token_.position + ' in `' + this.lexer_.wkt + '`';\n};\n\n\n/**\n * @classdesc\n * Geometry format for reading and writing data in the `WellKnownText` (WKT)\n * format.\n *\n * @constructor\n * @extends {module:ol/format/TextFeature}\n * @param {module:ol/format/WKT~Options=} opt_options Options.\n * @api\n */\nconst WKT = function(opt_options) {\n\n  const options = opt_options ? opt_options : {};\n\n  TextFeature.call(this);\n\n  /**\n   * Split GeometryCollection into multiple features.\n   * @type {boolean}\n   * @private\n   */\n  this.splitCollection_ = options.splitCollection !== undefined ?\n    options.splitCollection : false;\n\n};\n\ninherits(WKT, TextFeature);\n\n\n/**\n * @param {module:ol/geom/Point} geom Point geometry.\n * @return {string} Coordinates part of Point as WKT.\n */\nfunction encodePointGeometry(geom) {\n  const coordinates = geom.getCoordinates();\n  if (coordinates.length === 0) {\n    return '';\n  }\n  return coordinates.join(' ');\n}\n\n\n/**\n * @param {module:ol/geom/MultiPoint} geom MultiPoint geometry.\n * @return {string} Coordinates part of MultiPoint as WKT.\n */\nfunction encodeMultiPointGeometry(geom) {\n  const array = [];\n  const components = geom.getPoints();\n  for (let i = 0, ii = components.length; i < ii; ++i) {\n    array.push('(' + encodePointGeometry(components[i]) + ')');\n  }\n  return array.join(',');\n}\n\n\n/**\n * @param {module:ol/geom/GeometryCollection} geom GeometryCollection geometry.\n * @return {string} Coordinates part of GeometryCollection as WKT.\n */\nfunction encodeGeometryCollectionGeometry(geom) {\n  const array = [];\n  const geoms = geom.getGeometries();\n  for (let i = 0, ii = geoms.length; i < ii; ++i) {\n    array.push(encode(geoms[i]));\n  }\n  return array.join(',');\n}\n\n\n/**\n * @param {module:ol/geom/LineString|module:ol/geom/LinearRing} geom LineString geometry.\n * @return {string} Coordinates part of LineString as WKT.\n */\nfunction encodeLineStringGeometry(geom) {\n  const coordinates = geom.getCoordinates();\n  const array = [];\n  for (let i = 0, ii = coordinates.length; i < ii; ++i) {\n    array.push(coordinates[i].join(' '));\n  }\n  return array.join(',');\n}\n\n\n/**\n * @param {module:ol/geom/MultiLineString} geom MultiLineString geometry.\n * @return {string} Coordinates part of MultiLineString as WKT.\n */\nfunction encodeMultiLineStringGeometry(geom) {\n  const array = [];\n  const components = geom.getLineStrings();\n  for (let i = 0, ii = components.length; i < ii; ++i) {\n    array.push('(' + encodeLineStringGeometry(components[i]) + ')');\n  }\n  return array.join(',');\n}\n\n\n/**\n * @param {module:ol/geom/Polygon} geom Polygon geometry.\n * @return {string} Coordinates part of Polygon as WKT.\n */\nfunction encodePolygonGeometry(geom) {\n  const array = [];\n  const rings = geom.getLinearRings();\n  for (let i = 0, ii = rings.length; i < ii; ++i) {\n    array.push('(' + encodeLineStringGeometry(rings[i]) + ')');\n  }\n  return array.join(',');\n}\n\n\n/**\n * @param {module:ol/geom/MultiPolygon} geom MultiPolygon geometry.\n * @return {string} Coordinates part of MultiPolygon as WKT.\n */\nfunction encodeMultiPolygonGeometry(geom) {\n  const array = [];\n  const components = geom.getPolygons();\n  for (let i = 0, ii = components.length; i < ii; ++i) {\n    array.push('(' + encodePolygonGeometry(components[i]) + ')');\n  }\n  return array.join(',');\n}\n\n/**\n * @param {module:ol/geom/SimpleGeometry} geom SimpleGeometry geometry.\n * @return {string} Potential dimensional information for WKT type.\n */\nfunction encodeGeometryLayout(geom) {\n  const layout = geom.getLayout();\n  let dimInfo = '';\n  if (layout === GeometryLayout.XYZ || layout === GeometryLayout.XYZM) {\n    dimInfo += Z;\n  }\n  if (layout === GeometryLayout.XYM || layout === GeometryLayout.XYZM) {\n    dimInfo += M;\n  }\n  return dimInfo;\n}\n\n\n/**\n * @const\n * @type {Object.<string, function(module:ol/geom/Geometry): string>}\n */\nconst GeometryEncoder = {\n  'Point': encodePointGeometry,\n  'LineString': encodeLineStringGeometry,\n  'Polygon': encodePolygonGeometry,\n  'MultiPoint': encodeMultiPointGeometry,\n  'MultiLineString': encodeMultiLineStringGeometry,\n  'MultiPolygon': encodeMultiPolygonGeometry,\n  'GeometryCollection': encodeGeometryCollectionGeometry\n};\n\n\n/**\n * Encode a geometry as WKT.\n * @param {module:ol/geom/Geometry} geom The geometry to encode.\n * @return {string} WKT string for the geometry.\n */\nfunction encode(geom) {\n  let type = geom.getType();\n  const geometryEncoder = GeometryEncoder[type];\n  const enc = geometryEncoder(geom);\n  type = type.toUpperCase();\n  if (geom instanceof SimpleGeometry) {\n    const dimInfo = encodeGeometryLayout(geom);\n    if (dimInfo.length > 0) {\n      type += ' ' + dimInfo;\n    }\n  }\n  if (enc.length === 0) {\n    return type + ' ' + EMPTY;\n  }\n  return type + '(' + enc + ')';\n}\n\n\n/**\n * Parse a WKT string.\n * @param {string} wkt WKT string.\n * @return {module:ol/geom/Geometry|undefined}\n *     The geometry created.\n * @private\n */\nWKT.prototype.parse_ = function(wkt) {\n  const lexer = new Lexer(wkt);\n  const parser = new Parser(lexer);\n  return parser.parse();\n};\n\n\n/**\n * Read a feature from a WKT source.\n *\n * @function\n * @param {Document|Node|Object|string} source Source.\n * @param {module:ol/format/Feature~ReadOptions=} opt_options Read options.\n * @return {module:ol/Feature} Feature.\n * @api\n */\nWKT.prototype.readFeature;\n\n\n/**\n * @inheritDoc\n */\nWKT.prototype.readFeatureFromText = function(text, opt_options) {\n  const geom = this.readGeometryFromText(text, opt_options);\n  if (geom) {\n    const feature = new Feature();\n    feature.setGeometry(geom);\n    return feature;\n  }\n  return null;\n};\n\n\n/**\n * Read all features from a WKT source.\n *\n * @function\n * @param {Document|Node|Object|string} source Source.\n * @param {module:ol/format/Feature~ReadOptions=} opt_options Read options.\n * @return {Array.<module:ol/Feature>} Features.\n * @api\n */\nWKT.prototype.readFeatures;\n\n\n/**\n * @inheritDoc\n */\nWKT.prototype.readFeaturesFromText = function(text, opt_options) {\n  let geometries = [];\n  const geometry = this.readGeometryFromText(text, opt_options);\n  if (this.splitCollection_ &&\n      geometry.getType() == GeometryType.GEOMETRY_COLLECTION) {\n    geometries = (/** @type {module:ol/geom/GeometryCollection} */ (geometry))\n      .getGeometriesArray();\n  } else {\n    geometries = [geometry];\n  }\n  const features = [];\n  for (let i = 0, ii = geometries.length; i < ii; ++i) {\n    const feature = new Feature();\n    feature.setGeometry(geometries[i]);\n    features.push(feature);\n  }\n  return features;\n};\n\n\n/**\n * Read a single geometry from a WKT source.\n *\n * @function\n * @param {Document|Node|Object|string} source Source.\n * @param {module:ol/format/Feature~ReadOptions=} opt_options Read options.\n * @return {module:ol/geom/Geometry} Geometry.\n * @api\n */\nWKT.prototype.readGeometry;\n\n\n/**\n * @inheritDoc\n */\nWKT.prototype.readGeometryFromText = function(text, opt_options) {\n  const geometry = this.parse_(text);\n  if (geometry) {\n    return (\n      /** @type {module:ol/geom/Geometry} */ (transformWithOptions(geometry, false, opt_options))\n    );\n  } else {\n    return null;\n  }\n};\n\n\n/**\n * @enum {function (new:module:ol/geom/Geometry, Array, module:ol/geom/GeometryLayout)}\n */\nconst GeometryConstructor = {\n  'POINT': Point,\n  'LINESTRING': LineString,\n  'POLYGON': Polygon,\n  'MULTIPOINT': MultiPoint,\n  'MULTILINESTRING': MultiLineString,\n  'MULTIPOLYGON': MultiPolygon\n};\n\n\n/**\n * @enum {(function(): Array)}\n */\nconst GeometryParser = {\n  'POINT': Parser.prototype.parsePointText_,\n  'LINESTRING': Parser.prototype.parseLineStringText_,\n  'POLYGON': Parser.prototype.parsePolygonText_,\n  'MULTIPOINT': Parser.prototype.parseMultiPointText_,\n  'MULTILINESTRING': Parser.prototype.parseMultiLineStringText_,\n  'MULTIPOLYGON': Parser.prototype.parseMultiPolygonText_\n};\n\n\n/**\n * @return {!module:ol/geom/Geometry} The geometry.\n * @private\n */\nParser.prototype.parseGeometry_ = function() {\n  const token = this.token_;\n  if (this.match(TokenType.TEXT)) {\n    const geomType = token.value;\n    this.layout_ = this.parseGeometryLayout_();\n    if (geomType == GeometryType.GEOMETRY_COLLECTION.toUpperCase()) {\n      const geometries = this.parseGeometryCollectionText_();\n      return new GeometryCollection(geometries);\n    } else {\n      const parser = GeometryParser[geomType];\n      const ctor = GeometryConstructor[geomType];\n      if (!parser || !ctor) {\n        throw new Error('Invalid geometry type: ' + geomType);\n      }\n      const coordinates = parser.call(this);\n      return new ctor(coordinates, this.layout_);\n    }\n  }\n  throw new Error(this.formatErrorMessage_());\n};\n\n\n/**\n * Encode a feature as a WKT string.\n *\n * @function\n * @param {module:ol/Feature} feature Feature.\n * @param {module:ol/format/Feature~WriteOptions=} opt_options Write options.\n * @return {string} WKT string.\n * @api\n */\nWKT.prototype.writeFeature;\n\n\n/**\n * @inheritDoc\n */\nWKT.prototype.writeFeatureText = function(feature, opt_options) {\n  const geometry = feature.getGeometry();\n  if (geometry) {\n    return this.writeGeometryText(geometry, opt_options);\n  }\n  return '';\n};\n\n\n/**\n * Encode an array of features as a WKT string.\n *\n * @function\n * @param {Array.<module:ol/Feature>} features Features.\n * @param {module:ol/format/Feature~WriteOptions=} opt_options Write options.\n * @return {string} WKT string.\n * @api\n */\nWKT.prototype.writeFeatures;\n\n\n/**\n * @inheritDoc\n */\nWKT.prototype.writeFeaturesText = function(features, opt_options) {\n  if (features.length == 1) {\n    return this.writeFeatureText(features[0], opt_options);\n  }\n  const geometries = [];\n  for (let i = 0, ii = features.length; i < ii; ++i) {\n    geometries.push(features[i].getGeometry());\n  }\n  const collection = new GeometryCollection(geometries);\n  return this.writeGeometryText(collection, opt_options);\n};\n\n\n/**\n * Write a single geometry as a WKT string.\n *\n * @function\n * @param {module:ol/geom/Geometry} geometry Geometry.\n * @param {module:ol/format/Feature~WriteOptions=} opt_options Write options.\n * @return {string} WKT string.\n * @api\n */\nWKT.prototype.writeGeometry;\n\n\n/**\n * @inheritDoc\n */\nWKT.prototype.writeGeometryText = function(geometry, opt_options) {\n  return encode(/** @type {module:ol/geom/Geometry} */ (\n    transformWithOptions(geometry, true, opt_options)));\n};\n\n\nexport default WKT;\n","/**\n * @module ol/render\n */\nimport {DEVICE_PIXEL_RATIO} from './has.js';\nimport {create as createTransform, scale as scaleTransform} from './transform.js';\nimport CanvasImmediateRenderer from './render/canvas/Immediate.js';\n\n\n/**\n * @typedef {Object} State\n * @property {CanvasRenderingContext2D} context Canvas context that the layer is being rendered to.\n * @property {module:ol/Feature|module:ol/render/Feature} feature\n * @property {module:ol/geom/SimpleGeometry} geometry\n * @property {number} pixelRatio Pixel ratio used by the layer renderer.\n * @property {number} resolution Resolution that the render batch was created and optimized for.\n * This is not the view's resolution that is being rendered.\n * @property {number} rotation Rotation of the rendered layer in radians.\n */\n\n\n/**\n * A function to be used when sorting features before rendering.\n * It takes two instances of {@link module:ol/Feature} or\n * {@link module:ol/render/Feature} and returns a `{number}`.\n *\n * @typedef {function((module:ol/Feature|module:ol/render/Feature),\n *           (module:ol/Feature|module:ol/render/Feature)):number} OrderFunction\n */\n\n\n/**\n * @typedef {Object} ToContextOptions\n * @property {module:ol/size~Size} [size] Desired size of the canvas in css\n * pixels. When provided, both canvas and css size will be set according to the\n * `pixelRatio`. If not provided, the current canvas and css sizes will not be\n * altered.\n * @property {number} [pixelRatio=window.devicePixelRatio] Pixel ratio (canvas\n * pixel to css pixel ratio) for the canvas.\n */\n\n\n/**\n * Binds a Canvas Immediate API to a canvas context, to allow drawing geometries\n * to the context's canvas.\n *\n * The units for geometry coordinates are css pixels relative to the top left\n * corner of the canvas element.\n * ```js\n * import {toContext} from 'ol/render';\n * import Fill from 'ol/style/Fill';\n * import Polygon from 'ol/geom/Polygon';\n *\n * var canvas = document.createElement('canvas');\n * var render = toContext(canvas.getContext('2d'),\n *     { size: [100, 100] });\n * render.setFillStrokeStyle(new Fill({ color: blue }));\n * render.drawPolygon(\n *     new Polygon([[[0, 0], [100, 100], [100, 0], [0, 0]]]));\n * ```\n *\n * @param {CanvasRenderingContext2D} context Canvas context.\n * @param {module:ol/render~ToContextOptions=} opt_options Options.\n * @return {module:ol/render/canvas/Immediate} Canvas Immediate.\n * @api\n */\nexport function toContext(context, opt_options) {\n  const canvas = context.canvas;\n  const options = opt_options ? opt_options : {};\n  const pixelRatio = options.pixelRatio || DEVICE_PIXEL_RATIO;\n  const size = options.size;\n  if (size) {\n    canvas.width = size[0] * pixelRatio;\n    canvas.height = size[1] * pixelRatio;\n    canvas.style.width = size[0] + 'px';\n    canvas.style.height = size[1] + 'px';\n  }\n  const extent = [0, 0, canvas.width, canvas.height];\n  const transform = scaleTransform(createTransform(), pixelRatio, pixelRatio);\n  return new CanvasImmediateRenderer(context, pixelRatio, extent, transform, 0);\n}\n","/**\n * @module ol/interaction/DragAndDrop\n */\n// FIXME should handle all geo-referenced data, not just vector data\n\nimport {inherits} from '../util.js';\nimport {TRUE} from '../functions.js';\nimport {listen, unlistenByKey} from '../events.js';\nimport Event from '../events/Event.js';\nimport EventType from '../events/EventType.js';\nimport Interaction from '../interaction/Interaction.js';\nimport {get as getProjection} from '../proj.js';\n\n\n/**\n * @typedef {Object} Options\n * @property {Array.<function(new: module:ol/format/Feature)>} [formatConstructors] Format constructors.\n * @property {module:ol/source/Vector} [source] Optional vector source where features will be added.  If a source is provided\n * all existing features will be removed and new features will be added when\n * they are dropped on the target.  If you want to add features to a vector\n * source without removing the existing features (append only), instead of\n * providing the source option listen for the \"addfeatures\" event.\n * @property {module:ol/proj~ProjectionLike} [projection] Target projection. By default, the map's view's projection is used.\n * @property {Element} [target] The element that is used as the drop target, default is the viewport element.\n */\n\n\n/**\n * @enum {string}\n */\nconst DragAndDropEventType = {\n  /**\n   * Triggered when features are added\n   * @event module:ol/interaction/DragAndDrop~DragAndDropEvent#addfeatures\n   * @api\n   */\n  ADD_FEATURES: 'addfeatures'\n};\n\n\n/**\n * @classdesc\n * Events emitted by {@link module:ol/interaction/DragAndDrop~DragAndDrop} instances are instances\n * of this type.\n *\n * @constructor\n * @extends {module:ol/events/Event}\n * @param {module:ol/interaction/DragAndDrop~DragAndDropEventType} type Type.\n * @param {File} file File.\n * @param {Array.<module:ol/Feature>=} opt_features Features.\n * @param {module:ol/proj/Projection=} opt_projection Projection.\n */\nconst DragAndDropEvent = function(type, file, opt_features, opt_projection) {\n\n  Event.call(this, type);\n\n  /**\n   * The features parsed from dropped data.\n   * @type {Array.<module:ol/Feature>|undefined}\n   * @api\n   */\n  this.features = opt_features;\n\n  /**\n   * The dropped file.\n   * @type {File}\n   * @api\n   */\n  this.file = file;\n\n  /**\n   * The feature projection.\n   * @type {module:ol/proj/Projection|undefined}\n   * @api\n   */\n  this.projection = opt_projection;\n\n};\ninherits(DragAndDropEvent, Event);\n\n\n/**\n * @classdesc\n * Handles input of vector data by drag and drop.\n *\n * @constructor\n * @extends {module:ol/interaction/Interaction}\n * @fires module:ol/interaction/DragAndDrop~DragAndDropEvent\n * @param {module:ol/interaction/DragAndDrop~Options=} opt_options Options.\n * @api\n */\nconst DragAndDrop = function(opt_options) {\n\n  const options = opt_options ? opt_options : {};\n\n  Interaction.call(this, {\n    handleEvent: TRUE\n  });\n\n  /**\n   * @private\n   * @type {Array.<function(new: module:ol/format/Feature)>}\n   */\n  this.formatConstructors_ = options.formatConstructors ?\n    options.formatConstructors : [];\n\n  /**\n   * @private\n   * @type {module:ol/proj/Projection}\n   */\n  this.projection_ = options.projection ?\n    getProjection(options.projection) : null;\n\n  /**\n   * @private\n   * @type {Array.<module:ol/events~EventsKey>}\n   */\n  this.dropListenKeys_ = null;\n\n  /**\n   * @private\n   * @type {module:ol/source/Vector}\n   */\n  this.source_ = options.source || null;\n\n  /**\n   * @private\n   * @type {Element}\n   */\n  this.target = options.target ? options.target : null;\n\n};\n\ninherits(DragAndDrop, Interaction);\n\n\n/**\n * @param {DragEvent} event Event.\n * @this {module:ol/interaction/DragAndDrop}\n */\nfunction handleDrop(event) {\n  const files = event.dataTransfer.files;\n  for (let i = 0, ii = files.length; i < ii; ++i) {\n    const file = files.item(i);\n    const reader = new FileReader();\n    reader.addEventListener(EventType.LOAD, this.handleResult_.bind(this, file));\n    reader.readAsText(file);\n  }\n}\n\n\n/**\n * @param {DragEvent} event Event.\n */\nfunction handleStop(event) {\n  event.stopPropagation();\n  event.preventDefault();\n  event.dataTransfer.dropEffect = 'copy';\n}\n\n\n/**\n * @param {File} file File.\n * @param {Event} event Load event.\n * @private\n */\nDragAndDrop.prototype.handleResult_ = function(file, event) {\n  const result = event.target.result;\n  const map = this.getMap();\n  let projection = this.projection_;\n  if (!projection) {\n    const view = map.getView();\n    projection = view.getProjection();\n  }\n\n  const formatConstructors = this.formatConstructors_;\n  let features = [];\n  for (let i = 0, ii = formatConstructors.length; i < ii; ++i) {\n    /**\n     * Avoid \"cannot instantiate abstract class\" error.\n     * @type {Function}\n     */\n    const formatConstructor = formatConstructors[i];\n    /**\n     * @type {module:ol/format/Feature}\n     */\n    const format = new formatConstructor();\n    features = this.tryReadFeatures_(format, result, {\n      featureProjection: projection\n    });\n    if (features && features.length > 0) {\n      break;\n    }\n  }\n  if (this.source_) {\n    this.source_.clear();\n    this.source_.addFeatures(features);\n  }\n  this.dispatchEvent(\n    new DragAndDropEvent(\n      DragAndDropEventType.ADD_FEATURES, file,\n      features, projection));\n};\n\n\n/**\n * @private\n */\nDragAndDrop.prototype.registerListeners_ = function() {\n  const map = this.getMap();\n  if (map) {\n    const dropArea = this.target ? this.target : map.getViewport();\n    this.dropListenKeys_ = [\n      listen(dropArea, EventType.DROP, handleDrop, this),\n      listen(dropArea, EventType.DRAGENTER, handleStop, this),\n      listen(dropArea, EventType.DRAGOVER, handleStop, this),\n      listen(dropArea, EventType.DROP, handleStop, this)\n    ];\n  }\n};\n\n\n/**\n * @inheritDoc\n */\nDragAndDrop.prototype.setActive = function(active) {\n  Interaction.prototype.setActive.call(this, active);\n  if (active) {\n    this.registerListeners_();\n  } else {\n    this.unregisterListeners_();\n  }\n};\n\n\n/**\n * @inheritDoc\n */\nDragAndDrop.prototype.setMap = function(map) {\n  this.unregisterListeners_();\n  Interaction.prototype.setMap.call(this, map);\n  if (this.getActive()) {\n    this.registerListeners_();\n  }\n};\n\n\n/**\n * @param {module:ol/format/Feature} format Format.\n * @param {string} text Text.\n * @param {module:ol/format/Feature~ReadOptions} options Read options.\n * @private\n * @return {Array.<module:ol/Feature>} Features.\n */\nDragAndDrop.prototype.tryReadFeatures_ = function(format, text, options) {\n  try {\n    return format.readFeatures(text, options);\n  } catch (e) {\n    return null;\n  }\n};\n\n\n/**\n * @private\n */\nDragAndDrop.prototype.unregisterListeners_ = function() {\n  if (this.dropListenKeys_) {\n    this.dropListenKeys_.forEach(unlistenByKey);\n    this.dropListenKeys_ = null;\n  }\n};\n\n\nexport default DragAndDrop;\n","/**\n * @module ol/geom/flat/center\n */\nimport {createEmpty, createOrUpdateFromFlatCoordinates} from '../../extent.js';\n\n\n/**\n * @param {Array.<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {Array.<Array.<number>>} endss Endss.\n * @param {number} stride Stride.\n * @return {Array.<number>} Flat centers.\n */\nexport function linearRingss(flatCoordinates, offset, endss, stride) {\n  const flatCenters = [];\n  let extent = createEmpty();\n  for (let i = 0, ii = endss.length; i < ii; ++i) {\n    const ends = endss[i];\n    extent = createOrUpdateFromFlatCoordinates(flatCoordinates, offset, ends[0], stride);\n    flatCenters.push((extent[0] + extent[2]) / 2, (extent[1] + extent[3]) / 2);\n    offset = ends[ends.length - 1];\n  }\n  return flatCenters;\n}\n","/**\n * @module ol/featureloader\n */\nimport {UNDEFINED} from './functions.js';\nimport FormatType from './format/FormatType.js';\n\n\n/**\n * {@link module:ol/source/Vector} sources use a function of this type to\n * load features.\n *\n * This function takes an {@link module:ol/extent~Extent} representing the area to be loaded,\n * a `{number}` representing the resolution (map units per pixel) and an\n * {@link module:ol/proj/Projection} for the projection  as\n * arguments. `this` within the function is bound to the\n * {@link module:ol/source/Vector} it's called from.\n *\n * The function is responsible for loading the features and adding them to the\n * source.\n * @typedef {function(this:module:ol/source/Vector, module:ol/extent~Extent, number,\n *                    module:ol/proj/Projection)} FeatureLoader\n * @api\n */\n\n\n/**\n * {@link module:ol/source/Vector} sources use a function of this type to\n * get the url to load features from.\n *\n * This function takes an {@link module:ol/extent~Extent} representing the area\n * to be loaded, a `{number}` representing the resolution (map units per pixel)\n * and an {@link module:ol/proj/Projection} for the projection  as\n * arguments and returns a `{string}` representing the URL.\n * @typedef {function(module:ol/extent~Extent, number, module:ol/proj/Projection): string} FeatureUrlFunction\n * @api\n */\n\n\n/**\n * @param {string|module:ol/featureloader~FeatureUrlFunction} url Feature URL service.\n * @param {module:ol/format/Feature} format Feature format.\n * @param {function(this:module:ol/VectorTile, Array.<module:ol/Feature>, module:ol/proj/Projection, module:ol/extent~Extent)|function(this:module:ol/source/Vector, Array.<module:ol/Feature>)} success\n *     Function called with the loaded features and optionally with the data\n *     projection. Called with the vector tile or source as `this`.\n * @param {function(this:module:ol/VectorTile)|function(this:module:ol/source/Vector)} failure\n *     Function called when loading failed. Called with the vector tile or\n *     source as `this`.\n * @return {module:ol/featureloader~FeatureLoader} The feature loader.\n */\nexport function loadFeaturesXhr(url, format, success, failure) {\n  return (\n    /**\n     * @param {module:ol/extent~Extent} extent Extent.\n     * @param {number} resolution Resolution.\n     * @param {module:ol/proj/Projection} projection Projection.\n     * @this {module:ol/source/Vector|module:ol/VectorTile}\n     */\n    function(extent, resolution, projection) {\n      const xhr = new XMLHttpRequest();\n      xhr.open('GET',\n        typeof url === 'function' ? url(extent, resolution, projection) : url,\n        true);\n      if (format.getType() == FormatType.ARRAY_BUFFER) {\n        xhr.responseType = 'arraybuffer';\n      }\n      /**\n       * @param {Event} event Event.\n       * @private\n       */\n      xhr.onload = function(event) {\n        // status will be 0 for file:// urls\n        if (!xhr.status || xhr.status >= 200 && xhr.status < 300) {\n          const type = format.getType();\n          /** @type {Document|Node|Object|string|undefined} */\n          let source;\n          if (type == FormatType.JSON || type == FormatType.TEXT) {\n            source = xhr.responseText;\n          } else if (type == FormatType.XML) {\n            source = xhr.responseXML;\n            if (!source) {\n              source = new DOMParser().parseFromString(xhr.responseText, 'application/xml');\n            }\n          } else if (type == FormatType.ARRAY_BUFFER) {\n            source = /** @type {ArrayBuffer} */ (xhr.response);\n          }\n          if (source) {\n            success.call(this, format.readFeatures(source,\n              {featureProjection: projection}),\n            format.readProjection(source), format.getLastExtent());\n          } else {\n            failure.call(this);\n          }\n        } else {\n          failure.call(this);\n        }\n      }.bind(this);\n      /**\n       * @private\n       */\n      xhr.onerror = function() {\n        failure.call(this);\n      }.bind(this);\n      xhr.send();\n    }\n  );\n}\n\n\n/**\n * Create an XHR feature loader for a `url` and `format`. The feature loader\n * loads features (with XHR), parses the features, and adds them to the\n * vector source.\n * @param {string|module:ol/featureloader~FeatureUrlFunction} url Feature URL service.\n * @param {module:ol/format/Feature} format Feature format.\n * @return {module:ol/featureloader~FeatureLoader} The feature loader.\n * @api\n */\nexport function xhr(url, format) {\n  return loadFeaturesXhr(url, format,\n    /**\n     * @param {Array.<module:ol/Feature>} features The loaded features.\n     * @param {module:ol/proj/Projection} dataProjection Data\n     * projection.\n     * @this {module:ol/source/Vector}\n     */\n    function(features, dataProjection) {\n      this.addFeatures(features);\n    }, /* FIXME handle error */ UNDEFINED);\n}\n","/**\n * @module ol/reproj/Triangulation\n */\nimport {boundingExtent, createEmpty, extendCoordinate, getBottomLeft, getBottomRight,\n  getTopLeft, getTopRight, getWidth, intersects} from '../extent.js';\nimport {modulo} from '../math.js';\nimport {getTransform} from '../proj.js';\n\n\n/**\n * Single triangle; consists of 3 source points and 3 target points.\n * @typedef {Object} Triangle\n * @property {Array.<module:ol/coordinate~Coordinate>} source\n * @property {Array.<module:ol/coordinate~Coordinate>} target\n */\n\n\n/**\n * Maximum number of subdivision steps during raster reprojection triangulation.\n * Prevents high memory usage and large number of proj4 calls (for certain\n * transformations and areas). At most `2*(2^this)` triangles are created for\n * each triangulated extent (tile/image).\n * @type {number}\n */\nconst MAX_SUBDIVISION = 10;\n\n\n/**\n * Maximum allowed size of triangle relative to world width. When transforming\n * corners of world extent between certain projections, the resulting\n * triangulation seems to have zero error and no subdivision is performed. If\n * the triangle width is more than this (relative to world width; 0-1),\n * subdivison is forced (up to `MAX_SUBDIVISION`). Default is `0.25`.\n * @type {number}\n */\nconst MAX_TRIANGLE_WIDTH = 0.25;\n\n\n/**\n * @classdesc\n * Class containing triangulation of the given target extent.\n * Used for determining source data and the reprojection itself.\n *\n * @param {module:ol/proj/Projection} sourceProj Source projection.\n * @param {module:ol/proj/Projection} targetProj Target projection.\n * @param {module:ol/extent~Extent} targetExtent Target extent to triangulate.\n * @param {module:ol/extent~Extent} maxSourceExtent Maximal source extent that can be used.\n * @param {number} errorThreshold Acceptable error (in source units).\n * @constructor\n */\nconst Triangulation = function(sourceProj, targetProj, targetExtent,\n  maxSourceExtent, errorThreshold) {\n\n  /**\n   * @type {module:ol/proj/Projection}\n   * @private\n   */\n  this.sourceProj_ = sourceProj;\n\n  /**\n   * @type {module:ol/proj/Projection}\n   * @private\n   */\n  this.targetProj_ = targetProj;\n\n  /** @type {!Object.<string, module:ol/coordinate~Coordinate>} */\n  let transformInvCache = {};\n  const transformInv = getTransform(this.targetProj_, this.sourceProj_);\n\n  /**\n   * @param {module:ol/coordinate~Coordinate} c A coordinate.\n   * @return {module:ol/coordinate~Coordinate} Transformed coordinate.\n   * @private\n   */\n  this.transformInv_ = function(c) {\n    const key = c[0] + '/' + c[1];\n    if (!transformInvCache[key]) {\n      transformInvCache[key] = transformInv(c);\n    }\n    return transformInvCache[key];\n  };\n\n  /**\n   * @type {module:ol/extent~Extent}\n   * @private\n   */\n  this.maxSourceExtent_ = maxSourceExtent;\n\n  /**\n   * @type {number}\n   * @private\n   */\n  this.errorThresholdSquared_ = errorThreshold * errorThreshold;\n\n  /**\n   * @type {Array.<module:ol/reproj/Triangulation~Triangle>}\n   * @private\n   */\n  this.triangles_ = [];\n\n  /**\n   * Indicates that the triangulation crosses edge of the source projection.\n   * @type {boolean}\n   * @private\n   */\n  this.wrapsXInSource_ = false;\n\n  /**\n   * @type {boolean}\n   * @private\n   */\n  this.canWrapXInSource_ = this.sourceProj_.canWrapX() &&\n      !!maxSourceExtent &&\n      !!this.sourceProj_.getExtent() &&\n      (getWidth(maxSourceExtent) == getWidth(this.sourceProj_.getExtent()));\n\n  /**\n   * @type {?number}\n   * @private\n   */\n  this.sourceWorldWidth_ = this.sourceProj_.getExtent() ?\n    getWidth(this.sourceProj_.getExtent()) : null;\n\n  /**\n   * @type {?number}\n   * @private\n   */\n  this.targetWorldWidth_ = this.targetProj_.getExtent() ?\n    getWidth(this.targetProj_.getExtent()) : null;\n\n  const destinationTopLeft = getTopLeft(targetExtent);\n  const destinationTopRight = getTopRight(targetExtent);\n  const destinationBottomRight = getBottomRight(targetExtent);\n  const destinationBottomLeft = getBottomLeft(targetExtent);\n  const sourceTopLeft = this.transformInv_(destinationTopLeft);\n  const sourceTopRight = this.transformInv_(destinationTopRight);\n  const sourceBottomRight = this.transformInv_(destinationBottomRight);\n  const sourceBottomLeft = this.transformInv_(destinationBottomLeft);\n\n  this.addQuad_(\n    destinationTopLeft, destinationTopRight,\n    destinationBottomRight, destinationBottomLeft,\n    sourceTopLeft, sourceTopRight, sourceBottomRight, sourceBottomLeft,\n    MAX_SUBDIVISION);\n\n  if (this.wrapsXInSource_) {\n    let leftBound = Infinity;\n    this.triangles_.forEach(function(triangle, i, arr) {\n      leftBound = Math.min(leftBound,\n        triangle.source[0][0], triangle.source[1][0], triangle.source[2][0]);\n    });\n\n    // Shift triangles to be as close to `leftBound` as possible\n    // (if the distance is more than `worldWidth / 2` it can be closer.\n    this.triangles_.forEach(function(triangle) {\n      if (Math.max(triangle.source[0][0], triangle.source[1][0],\n        triangle.source[2][0]) - leftBound > this.sourceWorldWidth_ / 2) {\n        const newTriangle = [[triangle.source[0][0], triangle.source[0][1]],\n          [triangle.source[1][0], triangle.source[1][1]],\n          [triangle.source[2][0], triangle.source[2][1]]];\n        if ((newTriangle[0][0] - leftBound) > this.sourceWorldWidth_ / 2) {\n          newTriangle[0][0] -= this.sourceWorldWidth_;\n        }\n        if ((newTriangle[1][0] - leftBound) > this.sourceWorldWidth_ / 2) {\n          newTriangle[1][0] -= this.sourceWorldWidth_;\n        }\n        if ((newTriangle[2][0] - leftBound) > this.sourceWorldWidth_ / 2) {\n          newTriangle[2][0] -= this.sourceWorldWidth_;\n        }\n\n        // Rarely (if the extent contains both the dateline and prime meridian)\n        // the shift can in turn break some triangles.\n        // Detect this here and don't shift in such cases.\n        const minX = Math.min(\n          newTriangle[0][0], newTriangle[1][0], newTriangle[2][0]);\n        const maxX = Math.max(\n          newTriangle[0][0], newTriangle[1][0], newTriangle[2][0]);\n        if ((maxX - minX) < this.sourceWorldWidth_ / 2) {\n          triangle.source = newTriangle;\n        }\n      }\n    }.bind(this));\n  }\n\n  transformInvCache = {};\n};\n\n\n/**\n * Adds triangle to the triangulation.\n * @param {module:ol/coordinate~Coordinate} a The target a coordinate.\n * @param {module:ol/coordinate~Coordinate} b The target b coordinate.\n * @param {module:ol/coordinate~Coordinate} c The target c coordinate.\n * @param {module:ol/coordinate~Coordinate} aSrc The source a coordinate.\n * @param {module:ol/coordinate~Coordinate} bSrc The source b coordinate.\n * @param {module:ol/coordinate~Coordinate} cSrc The source c coordinate.\n * @private\n */\nTriangulation.prototype.addTriangle_ = function(a, b, c,\n  aSrc, bSrc, cSrc) {\n  this.triangles_.push({\n    source: [aSrc, bSrc, cSrc],\n    target: [a, b, c]\n  });\n};\n\n\n/**\n * Adds quad (points in clock-wise order) to the triangulation\n * (and reprojects the vertices) if valid.\n * Performs quad subdivision if needed to increase precision.\n *\n * @param {module:ol/coordinate~Coordinate} a The target a coordinate.\n * @param {module:ol/coordinate~Coordinate} b The target b coordinate.\n * @param {module:ol/coordinate~Coordinate} c The target c coordinate.\n * @param {module:ol/coordinate~Coordinate} d The target d coordinate.\n * @param {module:ol/coordinate~Coordinate} aSrc The source a coordinate.\n * @param {module:ol/coordinate~Coordinate} bSrc The source b coordinate.\n * @param {module:ol/coordinate~Coordinate} cSrc The source c coordinate.\n * @param {module:ol/coordinate~Coordinate} dSrc The source d coordinate.\n * @param {number} maxSubdivision Maximal allowed subdivision of the quad.\n * @private\n */\nTriangulation.prototype.addQuad_ = function(a, b, c, d,\n  aSrc, bSrc, cSrc, dSrc, maxSubdivision) {\n\n  const sourceQuadExtent = boundingExtent([aSrc, bSrc, cSrc, dSrc]);\n  const sourceCoverageX = this.sourceWorldWidth_ ?\n    getWidth(sourceQuadExtent) / this.sourceWorldWidth_ : null;\n  const sourceWorldWidth = /** @type {number} */ (this.sourceWorldWidth_);\n\n  // when the quad is wrapped in the source projection\n  // it covers most of the projection extent, but not fully\n  const wrapsX = this.sourceProj_.canWrapX() &&\n               sourceCoverageX > 0.5 && sourceCoverageX < 1;\n\n  let needsSubdivision = false;\n\n  if (maxSubdivision > 0) {\n    if (this.targetProj_.isGlobal() && this.targetWorldWidth_) {\n      const targetQuadExtent = boundingExtent([a, b, c, d]);\n      const targetCoverageX = getWidth(targetQuadExtent) / this.targetWorldWidth_;\n      needsSubdivision |=\n          targetCoverageX > MAX_TRIANGLE_WIDTH;\n    }\n    if (!wrapsX && this.sourceProj_.isGlobal() && sourceCoverageX) {\n      needsSubdivision |=\n          sourceCoverageX > MAX_TRIANGLE_WIDTH;\n    }\n  }\n\n  if (!needsSubdivision && this.maxSourceExtent_) {\n    if (!intersects(sourceQuadExtent, this.maxSourceExtent_)) {\n      // whole quad outside source projection extent -> ignore\n      return;\n    }\n  }\n\n  if (!needsSubdivision) {\n    if (!isFinite(aSrc[0]) || !isFinite(aSrc[1]) ||\n        !isFinite(bSrc[0]) || !isFinite(bSrc[1]) ||\n        !isFinite(cSrc[0]) || !isFinite(cSrc[1]) ||\n        !isFinite(dSrc[0]) || !isFinite(dSrc[1])) {\n      if (maxSubdivision > 0) {\n        needsSubdivision = true;\n      } else {\n        return;\n      }\n    }\n  }\n\n  if (maxSubdivision > 0) {\n    if (!needsSubdivision) {\n      const center = [(a[0] + c[0]) / 2, (a[1] + c[1]) / 2];\n      const centerSrc = this.transformInv_(center);\n\n      let dx;\n      if (wrapsX) {\n        const centerSrcEstimX =\n            (modulo(aSrc[0], sourceWorldWidth) +\n             modulo(cSrc[0], sourceWorldWidth)) / 2;\n        dx = centerSrcEstimX -\n            modulo(centerSrc[0], sourceWorldWidth);\n      } else {\n        dx = (aSrc[0] + cSrc[0]) / 2 - centerSrc[0];\n      }\n      const dy = (aSrc[1] + cSrc[1]) / 2 - centerSrc[1];\n      const centerSrcErrorSquared = dx * dx + dy * dy;\n      needsSubdivision = centerSrcErrorSquared > this.errorThresholdSquared_;\n    }\n    if (needsSubdivision) {\n      if (Math.abs(a[0] - c[0]) <= Math.abs(a[1] - c[1])) {\n        // split horizontally (top & bottom)\n        const bc = [(b[0] + c[0]) / 2, (b[1] + c[1]) / 2];\n        const bcSrc = this.transformInv_(bc);\n        const da = [(d[0] + a[0]) / 2, (d[1] + a[1]) / 2];\n        const daSrc = this.transformInv_(da);\n\n        this.addQuad_(\n          a, b, bc, da, aSrc, bSrc, bcSrc, daSrc, maxSubdivision - 1);\n        this.addQuad_(\n          da, bc, c, d, daSrc, bcSrc, cSrc, dSrc, maxSubdivision - 1);\n      } else {\n        // split vertically (left & right)\n        const ab = [(a[0] + b[0]) / 2, (a[1] + b[1]) / 2];\n        const abSrc = this.transformInv_(ab);\n        const cd = [(c[0] + d[0]) / 2, (c[1] + d[1]) / 2];\n        const cdSrc = this.transformInv_(cd);\n\n        this.addQuad_(\n          a, ab, cd, d, aSrc, abSrc, cdSrc, dSrc, maxSubdivision - 1);\n        this.addQuad_(\n          ab, b, c, cd, abSrc, bSrc, cSrc, cdSrc, maxSubdivision - 1);\n      }\n      return;\n    }\n  }\n\n  if (wrapsX) {\n    if (!this.canWrapXInSource_) {\n      return;\n    }\n    this.wrapsXInSource_ = true;\n  }\n\n  this.addTriangle_(a, c, d, aSrc, cSrc, dSrc);\n  this.addTriangle_(a, b, c, aSrc, bSrc, cSrc);\n};\n\n\n/**\n * Calculates extent of the 'source' coordinates from all the triangles.\n *\n * @return {module:ol/extent~Extent} Calculated extent.\n */\nTriangulation.prototype.calculateSourceExtent = function() {\n  const extent = createEmpty();\n\n  this.triangles_.forEach(function(triangle, i, arr) {\n    const src = triangle.source;\n    extendCoordinate(extent, src[0]);\n    extendCoordinate(extent, src[1]);\n    extendCoordinate(extent, src[2]);\n  });\n\n  return extent;\n};\n\n\n/**\n * @return {Array.<module:ol/reproj/Triangulation~Triangle>} Array of the calculated triangles.\n */\nTriangulation.prototype.getTriangles = function() {\n  return this.triangles_;\n};\nexport default Triangulation;\n","/**\n * @module ol/TileCache\n */\nimport {inherits} from './util.js';\nimport LRUCache from './structs/LRUCache.js';\nimport {fromKey, getKey} from './tilecoord.js';\n\n/**\n * @constructor\n * @extends {module:ol/structs/LRUCache.<module:ol/Tile>}\n * @param {number=} opt_highWaterMark High water mark.\n * @struct\n */\nconst TileCache = function(opt_highWaterMark) {\n\n  LRUCache.call(this, opt_highWaterMark);\n\n};\n\ninherits(TileCache, LRUCache);\n\n\n/**\n * @param {!Object.<string, module:ol/TileRange>} usedTiles Used tiles.\n */\nTileCache.prototype.expireCache = function(usedTiles) {\n  while (this.canExpireCache()) {\n    const tile = this.peekLast();\n    const zKey = tile.tileCoord[0].toString();\n    if (zKey in usedTiles && usedTiles[zKey].contains(tile.tileCoord)) {\n      break;\n    } else {\n      this.pop().dispose();\n    }\n  }\n};\n\n\n/**\n * Prune all tiles from the cache that don't have the same z as the newest tile.\n */\nTileCache.prototype.pruneExceptNewestZ = function() {\n  if (this.getCount() === 0) {\n    return;\n  }\n  const key = this.peekFirstKey();\n  const tileCoord = fromKey(key);\n  const z = tileCoord[0];\n  this.forEach(function(tile) {\n    if (tile.tileCoord[0] !== z) {\n      this.remove(getKey(tile.tileCoord));\n      tile.dispose();\n    }\n  }, this);\n};\nexport default TileCache;\n","/**\n * @module ol/style/TextPlacement\n */\n\n/**\n * Text placement. One of `'point'`, `'line'`. Default is `'point'`. Note that\n * `'line'` requires the underlying geometry to be a {@link module:ol/geom/LineString~LineString},\n * {@link module:ol/geom/Polygon~Polygon}, {@link module:ol/geom/MultiLineString~MultiLineString} or\n * {@link module:ol/geom/MultiPolygon~MultiPolygon}.\n * @enum {string}\n */\nexport default {\n  POINT: 'point',\n  LINE: 'line'\n};\n","/**\n * @module ol/geom/flat/length\n */\n\n\n/**\n * @param {Array.<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {number} end End.\n * @param {number} stride Stride.\n * @return {number} Length.\n */\nexport function lineStringLength(flatCoordinates, offset, end, stride) {\n  let x1 = flatCoordinates[offset];\n  let y1 = flatCoordinates[offset + 1];\n  let length = 0;\n  for (let i = offset + stride; i < end; i += stride) {\n    const x2 = flatCoordinates[i];\n    const y2 = flatCoordinates[i + 1];\n    length += Math.sqrt((x2 - x1) * (x2 - x1) + (y2 - y1) * (y2 - y1));\n    x1 = x2;\n    y1 = y2;\n  }\n  return length;\n}\n\n\n/**\n * @param {Array.<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {number} end End.\n * @param {number} stride Stride.\n * @return {number} Perimeter.\n */\nexport function linearRingLength(flatCoordinates, offset, end, stride) {\n  let perimeter = lineStringLength(flatCoordinates, offset, end, stride);\n  const dx = flatCoordinates[end - stride] - flatCoordinates[offset];\n  const dy = flatCoordinates[end - stride + 1] - flatCoordinates[offset + 1];\n  perimeter += Math.sqrt(dx * dx + dy * dy);\n  return perimeter;\n}\n","/**\n * @module ol/layer/VectorRenderType\n */\n\n/**\n * @enum {string}\n * Render mode for vector layers:\n *  * `'image'`: Vector layers are rendered as images. Great performance, but\n *    point symbols and texts are always rotated with the view and pixels are\n *    scaled during zoom animations.\n *  * `'vector'`: Vector layers are rendered as vectors. Most accurate rendering\n *    even during animations, but slower performance.\n * @api\n */\nexport default {\n  IMAGE: 'image',\n  VECTOR: 'vector'\n};\n","/**\n * @module ol/TileQueue\n */\nimport {inherits} from './util.js';\nimport TileState from './TileState.js';\nimport {listen, unlisten} from './events.js';\nimport EventType from './events/EventType.js';\nimport PriorityQueue from './structs/PriorityQueue.js';\n\n\n/**\n * @typedef {function(module:ol/Tile, string, module:ol/coordinate~Coordinate, number): number} PriorityFunction\n */\n\n\n/**\n * @constructor\n * @extends {module:ol/structs/PriorityQueue.<Array>}\n * @param {module:ol/TileQueue~PriorityFunction} tilePriorityFunction\n *     Tile priority function.\n * @param {function(): ?} tileChangeCallback\n *     Function called on each tile change event.\n * @struct\n */\nconst TileQueue = function(tilePriorityFunction, tileChangeCallback) {\n\n  PriorityQueue.call(\n    this,\n    /**\n     * @param {Array} element Element.\n     * @return {number} Priority.\n     */\n    function(element) {\n      return tilePriorityFunction.apply(null, element);\n    },\n    /**\n     * @param {Array} element Element.\n     * @return {string} Key.\n     */\n    function(element) {\n      return (/** @type {module:ol/Tile} */ (element[0]).getKey());\n    });\n\n  /**\n   * @private\n   * @type {function(): ?}\n   */\n  this.tileChangeCallback_ = tileChangeCallback;\n\n  /**\n   * @private\n   * @type {number}\n   */\n  this.tilesLoading_ = 0;\n\n  /**\n   * @private\n   * @type {!Object.<string,boolean>}\n   */\n  this.tilesLoadingKeys_ = {};\n\n};\n\ninherits(TileQueue, PriorityQueue);\n\n\n/**\n * @inheritDoc\n */\nTileQueue.prototype.enqueue = function(element) {\n  const added = PriorityQueue.prototype.enqueue.call(this, element);\n  if (added) {\n    const tile = element[0];\n    listen(tile, EventType.CHANGE, this.handleTileChange, this);\n  }\n  return added;\n};\n\n\n/**\n * @return {number} Number of tiles loading.\n */\nTileQueue.prototype.getTilesLoading = function() {\n  return this.tilesLoading_;\n};\n\n\n/**\n * @param {module:ol/events/Event} event Event.\n * @protected\n */\nTileQueue.prototype.handleTileChange = function(event) {\n  const tile = /** @type {module:ol/Tile} */ (event.target);\n  const state = tile.getState();\n  if (state === TileState.LOADED || state === TileState.ERROR ||\n      state === TileState.EMPTY || state === TileState.ABORT) {\n    unlisten(tile, EventType.CHANGE, this.handleTileChange, this);\n    const tileKey = tile.getKey();\n    if (tileKey in this.tilesLoadingKeys_) {\n      delete this.tilesLoadingKeys_[tileKey];\n      --this.tilesLoading_;\n    }\n    this.tileChangeCallback_();\n  }\n};\n\n\n/**\n * @param {number} maxTotalLoading Maximum number tiles to load simultaneously.\n * @param {number} maxNewLoads Maximum number of new tiles to load.\n */\nTileQueue.prototype.loadMoreTiles = function(maxTotalLoading, maxNewLoads) {\n  let newLoads = 0;\n  let abortedTiles = false;\n  let state, tile, tileKey;\n  while (this.tilesLoading_ < maxTotalLoading && newLoads < maxNewLoads &&\n         this.getCount() > 0) {\n    tile = /** @type {module:ol/Tile} */ (this.dequeue()[0]);\n    tileKey = tile.getKey();\n    state = tile.getState();\n    if (state === TileState.ABORT) {\n      abortedTiles = true;\n    } else if (state === TileState.IDLE && !(tileKey in this.tilesLoadingKeys_)) {\n      this.tilesLoadingKeys_[tileKey] = true;\n      ++this.tilesLoading_;\n      ++newLoads;\n      tile.load();\n    }\n  }\n  if (newLoads === 0 && abortedTiles) {\n    // Do not stop the render loop when all wanted tiles were aborted due to\n    // a small, saturated tile cache.\n    this.tileChangeCallback_();\n  }\n};\nexport default TileQueue;\n","/**\n * @module ol/geom/flat/segments\n */\n\n\n/**\n * This function calls `callback` for each segment of the flat coordinates\n * array. If the callback returns a truthy value the function returns that\n * value immediately. Otherwise the function returns `false`.\n * @param {Array.<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {number} end End.\n * @param {number} stride Stride.\n * @param {function(this: S, module:ol/coordinate~Coordinate, module:ol/coordinate~Coordinate): T} callback Function\n *     called for each segment.\n * @param {S=} opt_this The object to be used as the value of 'this'\n *     within callback.\n * @return {T|boolean} Value.\n * @template T,S\n */\nexport function forEach(flatCoordinates, offset, end, stride, callback, opt_this) {\n  const point1 = [flatCoordinates[offset], flatCoordinates[offset + 1]];\n  const point2 = [];\n  let ret;\n  for (; (offset + stride) < end; offset += stride) {\n    point2[0] = flatCoordinates[offset + stride];\n    point2[1] = flatCoordinates[offset + stride + 1];\n    ret = callback.call(opt_this, point1, point2);\n    if (ret) {\n      return ret;\n    }\n    point1[0] = point2[0];\n    point1[1] = point2[1];\n  }\n  return false;\n}\n","/**\n * @module ol/AssertionError\n */\nimport {VERSION, inherits} from './util.js';\n\n/**\n * Error object thrown when an assertion failed. This is an ECMA-262 Error,\n * extended with a `code` property.\n * @see {@link https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Error}\n * @constructor\n * @extends {Error}\n * @param {number} code Error code.\n */\nconst AssertionError = function(code) {\n\n  const path = VERSION.split('-')[0];\n\n  /**\n   * @type {string}\n   */\n  this.message = 'Assertion failed. See https://openlayers.org/en/' + path +\n      '/doc/errors/#' + code + ' for details.';\n\n  /**\n   * Error code. The meaning of the code can be found on\n   * {@link https://openlayers.org/en/latest/doc/errors/} (replace `latest` with\n   * the version found in the OpenLayers script's header comment if a version\n   * other than the latest is used).\n   * @type {number}\n   * @api\n   */\n  this.code = code;\n\n  this.name = 'AssertionError';\n\n};\n\ninherits(AssertionError, Error);\n\nexport default AssertionError;\n","/**\n * @module ol/format/IGC\n */\nimport {inherits} from '../util.js';\nimport Feature from '../Feature.js';\nimport {transformWithOptions} from '../format/Feature.js';\nimport TextFeature from '../format/TextFeature.js';\nimport GeometryLayout from '../geom/GeometryLayout.js';\nimport LineString from '../geom/LineString.js';\nimport {get as getProjection} from '../proj.js';\n\n/**\n * IGC altitude/z. One of 'barometric', 'gps', 'none'.\n * @enum {string}\n */\nconst IGCZ = {\n  BAROMETRIC: 'barometric',\n  GPS: 'gps',\n  NONE: 'none'\n};\n\n\n/**\n * @typedef {Object} Options\n * @property {IGCZ|string} [altitudeMode='none'] Altitude mode. Possible\n * values are `'barometric'`, `'gps'`, and `'none'`.\n */\n\n\n/**\n * @classdesc\n * Feature format for `*.igc` flight recording files.\n *\n * @constructor\n * @extends {module:ol/format/TextFeature}\n * @param {module:ol/format/IGC~Options=} opt_options Options.\n * @api\n */\nconst IGC = function(opt_options) {\n\n  const options = opt_options ? opt_options : {};\n\n  TextFeature.call(this);\n\n  /**\n   * @inheritDoc\n   */\n  this.dataProjection = getProjection('EPSG:4326');\n\n  /**\n   * @private\n   * @type {IGCZ}\n   */\n  this.altitudeMode_ = options.altitudeMode ? options.altitudeMode : IGCZ.NONE;\n};\n\ninherits(IGC, TextFeature);\n\n\n/**\n * @const\n * @type {RegExp}\n */\nconst B_RECORD_RE =\n    /^B(\\d{2})(\\d{2})(\\d{2})(\\d{2})(\\d{5})([NS])(\\d{3})(\\d{5})([EW])([AV])(\\d{5})(\\d{5})/;\n\n\n/**\n * @const\n * @type {RegExp}\n */\nconst H_RECORD_RE = /^H.([A-Z]{3}).*?:(.*)/;\n\n\n/**\n * @const\n * @type {RegExp}\n */\nconst HFDTE_RECORD_RE = /^HFDTE(\\d{2})(\\d{2})(\\d{2})/;\n\n\n/**\n * A regular expression matching the newline characters `\\r\\n`, `\\r` and `\\n`.\n *\n * @const\n * @type {RegExp}\n */\nconst NEWLINE_RE = /\\r\\n|\\r|\\n/;\n\n\n/**\n * Read the feature from the IGC source.\n *\n * @function\n * @param {Document|Node|Object|string} source Source.\n * @param {module:ol/format/Feature~ReadOptions=} opt_options Read options.\n * @return {module:ol/Feature} Feature.\n * @api\n */\nIGC.prototype.readFeature;\n\n\n/**\n * @inheritDoc\n */\nIGC.prototype.readFeatureFromText = function(text, opt_options) {\n  const altitudeMode = this.altitudeMode_;\n  const lines = text.split(NEWLINE_RE);\n  /** @type {Object.<string, string>} */\n  const properties = {};\n  const flatCoordinates = [];\n  let year = 2000;\n  let month = 0;\n  let day = 1;\n  let lastDateTime = -1;\n  let i, ii;\n  for (i = 0, ii = lines.length; i < ii; ++i) {\n    const line = lines[i];\n    let m;\n    if (line.charAt(0) == 'B') {\n      m = B_RECORD_RE.exec(line);\n      if (m) {\n        const hour = parseInt(m[1], 10);\n        const minute = parseInt(m[2], 10);\n        const second = parseInt(m[3], 10);\n        let y = parseInt(m[4], 10) + parseInt(m[5], 10) / 60000;\n        if (m[6] == 'S') {\n          y = -y;\n        }\n        let x = parseInt(m[7], 10) + parseInt(m[8], 10) / 60000;\n        if (m[9] == 'W') {\n          x = -x;\n        }\n        flatCoordinates.push(x, y);\n        if (altitudeMode != IGCZ.NONE) {\n          let z;\n          if (altitudeMode == IGCZ.GPS) {\n            z = parseInt(m[11], 10);\n          } else if (altitudeMode == IGCZ.BAROMETRIC) {\n            z = parseInt(m[12], 10);\n          } else {\n            z = 0;\n          }\n          flatCoordinates.push(z);\n        }\n        let dateTime = Date.UTC(year, month, day, hour, minute, second);\n        // Detect UTC midnight wrap around.\n        if (dateTime < lastDateTime) {\n          dateTime = Date.UTC(year, month, day + 1, hour, minute, second);\n        }\n        flatCoordinates.push(dateTime / 1000);\n        lastDateTime = dateTime;\n      }\n    } else if (line.charAt(0) == 'H') {\n      m = HFDTE_RECORD_RE.exec(line);\n      if (m) {\n        day = parseInt(m[1], 10);\n        month = parseInt(m[2], 10) - 1;\n        year = 2000 + parseInt(m[3], 10);\n      } else {\n        m = H_RECORD_RE.exec(line);\n        if (m) {\n          properties[m[1]] = m[2].trim();\n        }\n      }\n    }\n  }\n  if (flatCoordinates.length === 0) {\n    return null;\n  }\n  const lineString = new LineString(null);\n  const layout = altitudeMode == IGCZ.NONE ? GeometryLayout.XYM : GeometryLayout.XYZM;\n  lineString.setFlatCoordinates(layout, flatCoordinates);\n  const feature = new Feature(transformWithOptions(lineString, false, opt_options));\n  feature.setProperties(properties);\n  return feature;\n};\n\n\n/**\n * Read the feature from the source. As IGC sources contain a single\n * feature, this will return the feature in an array.\n *\n * @function\n * @param {Document|Node|Object|string} source Source.\n * @param {module:ol/format/Feature~ReadOptions=} opt_options Read options.\n * @return {Array.<module:ol/Feature>} Features.\n * @api\n */\nIGC.prototype.readFeatures;\n\n\n/**\n * @inheritDoc\n */\nIGC.prototype.readFeaturesFromText = function(text, opt_options) {\n  const feature = this.readFeatureFromText(text, opt_options);\n  if (feature) {\n    return [feature];\n  } else {\n    return [];\n  }\n};\n\n\n/**\n * Read the projection from the IGC source.\n *\n * @function\n * @param {Document|Node|Object|string} source Source.\n * @return {module:ol/proj/Projection} Projection.\n * @api\n */\nIGC.prototype.readProjection;\n\n\n/**\n * Not implemented.\n * @inheritDoc\n */\nIGC.prototype.writeFeatureText = function(feature, opt_options) {};\n\n\n/**\n * Not implemented.\n * @inheritDoc\n */\nIGC.prototype.writeFeaturesText = function(features, opt_options) {};\n\n\n/**\n * Not implemented.\n * @inheritDoc\n */\nIGC.prototype.writeGeometryText = function(geometry, opt_options) {};\n\n\n/**\n * Not implemented.\n * @inheritDoc\n */\nIGC.prototype.readGeometryFromText = function(text, opt_options) {};\nexport default IGC;\n","/**\n * @module ol/format/GPX\n */\nimport {inherits} from '../util.js';\nimport Feature from '../Feature.js';\nimport {includes} from '../array.js';\nimport {transformWithOptions} from '../format/Feature.js';\nimport XMLFeature from '../format/XMLFeature.js';\nimport {readString, readDecimal, readNonNegativeInteger, readDateTime, writeStringTextNode, writeNonNegativeIntegerTextNode, writeDecimalTextNode, writeDateTimeTextNode} from '../format/xsd.js';\nimport GeometryLayout from '../geom/GeometryLayout.js';\nimport LineString from '../geom/LineString.js';\nimport MultiLineString from '../geom/MultiLineString.js';\nimport Point from '../geom/Point.js';\nimport {get as getProjection} from '../proj.js';\nimport {createElementNS, makeArrayPusher, makeArraySerializer, makeChildAppender,\n  makeObjectPropertySetter, makeSequence, makeSimpleNodeFactory, makeStructureNS,\n  OBJECT_PROPERTY_NODE_FACTORY, parseNode, pushParseAndPop, pushSerializeAndPop,\n  XML_SCHEMA_INSTANCE_URI} from '../xml.js';\n\n\n/**\n * @typedef {Object} Options\n * @property {function(module:ol/Feature, Node)} [readExtensions] Callback function\n * to process `extensions` nodes. To prevent memory leaks, this callback function must\n * not store any references to the node. Note that the `extensions`\n * node is not allowed in GPX 1.0. Moreover, only `extensions`\n * nodes from `wpt`, `rte` and `trk` can be processed, as those are\n * directly mapped to a feature.\n */\n\n/**\n * @typedef {Object} LayoutOptions\n * @property {boolean} [hasZ]\n * @property {boolean} [hasM]\n */\n\n/**\n * @classdesc\n * Feature format for reading and writing data in the GPX format.\n *\n * @constructor\n * @extends {module:ol/format/XMLFeature}\n * @param {module:ol/format/GPX~Options=} opt_options Options.\n * @api\n */\nconst GPX = function(opt_options) {\n\n  const options = opt_options ? opt_options : {};\n\n  XMLFeature.call(this);\n\n  /**\n   * @inheritDoc\n   */\n  this.dataProjection = getProjection('EPSG:4326');\n\n  /**\n   * @type {function(module:ol/Feature, Node)|undefined}\n   * @private\n   */\n  this.readExtensions_ = options.readExtensions;\n};\n\ninherits(GPX, XMLFeature);\n\n\n/**\n * @const\n * @type {Array.<null|string>}\n */\nconst NAMESPACE_URIS = [\n  null,\n  'http://www.topografix.com/GPX/1/0',\n  'http://www.topografix.com/GPX/1/1'\n];\n\n\n/**\n * @const\n * @type {string}\n */\nconst SCHEMA_LOCATION = 'http://www.topografix.com/GPX/1/1 ' +\n    'http://www.topografix.com/GPX/1/1/gpx.xsd';\n\n\n/**\n * @const\n * @type {Object.<string, function(Node, Array.<*>): (module:ol/Feature|undefined)>}\n */\nconst FEATURE_READER = {\n  'rte': readRte,\n  'trk': readTrk,\n  'wpt': readWpt\n};\n\n\n/**\n * @const\n * @type {Object.<string, Object.<string, module:ol/xml~Parser>>}\n */\nconst GPX_PARSERS = makeStructureNS(\n  NAMESPACE_URIS, {\n    'rte': makeArrayPusher(readRte),\n    'trk': makeArrayPusher(readTrk),\n    'wpt': makeArrayPusher(readWpt)\n  });\n\n\n/**\n * @const\n * @type {Object.<string, Object.<string, module:ol/xml~Parser>>}\n */\nconst LINK_PARSERS = makeStructureNS(\n  NAMESPACE_URIS, {\n    'text': makeObjectPropertySetter(readString, 'linkText'),\n    'type': makeObjectPropertySetter(readString, 'linkType')\n  });\n\n\n/**\n * @const\n * @type {Object.<string, Object.<string, module:ol/xml~Parser>>}\n */\nconst RTE_PARSERS = makeStructureNS(\n  NAMESPACE_URIS, {\n    'name': makeObjectPropertySetter(readString),\n    'cmt': makeObjectPropertySetter(readString),\n    'desc': makeObjectPropertySetter(readString),\n    'src': makeObjectPropertySetter(readString),\n    'link': parseLink,\n    'number': makeObjectPropertySetter(readNonNegativeInteger),\n    'extensions': parseExtensions,\n    'type': makeObjectPropertySetter(readString),\n    'rtept': parseRtePt\n  });\n\n\n/**\n * @const\n * @type {Object.<string, Object.<string, module:ol/xml~Parser>>}\n */\nconst RTEPT_PARSERS = makeStructureNS(\n  NAMESPACE_URIS, {\n    'ele': makeObjectPropertySetter(readDecimal),\n    'time': makeObjectPropertySetter(readDateTime)\n  });\n\n\n/**\n * @const\n * @type {Object.<string, Object.<string, module:ol/xml~Parser>>}\n */\nconst TRK_PARSERS = makeStructureNS(\n  NAMESPACE_URIS, {\n    'name': makeObjectPropertySetter(readString),\n    'cmt': makeObjectPropertySetter(readString),\n    'desc': makeObjectPropertySetter(readString),\n    'src': makeObjectPropertySetter(readString),\n    'link': parseLink,\n    'number': makeObjectPropertySetter(readNonNegativeInteger),\n    'type': makeObjectPropertySetter(readString),\n    'extensions': parseExtensions,\n    'trkseg': parseTrkSeg\n  });\n\n\n/**\n * @const\n * @type {Object.<string, Object.<string, module:ol/xml~Parser>>}\n */\nconst TRKSEG_PARSERS = makeStructureNS(\n  NAMESPACE_URIS, {\n    'trkpt': parseTrkPt\n  });\n\n\n/**\n * @const\n * @type {Object.<string, Object.<string, module:ol/xml~Parser>>}\n */\nconst TRKPT_PARSERS = makeStructureNS(\n  NAMESPACE_URIS, {\n    'ele': makeObjectPropertySetter(readDecimal),\n    'time': makeObjectPropertySetter(readDateTime)\n  });\n\n\n/**\n * @const\n * @type {Object.<string, Object.<string, module:ol/xml~Parser>>}\n */\nconst WPT_PARSERS = makeStructureNS(\n  NAMESPACE_URIS, {\n    'ele': makeObjectPropertySetter(readDecimal),\n    'time': makeObjectPropertySetter(readDateTime),\n    'magvar': makeObjectPropertySetter(readDecimal),\n    'geoidheight': makeObjectPropertySetter(readDecimal),\n    'name': makeObjectPropertySetter(readString),\n    'cmt': makeObjectPropertySetter(readString),\n    'desc': makeObjectPropertySetter(readString),\n    'src': makeObjectPropertySetter(readString),\n    'link': parseLink,\n    'sym': makeObjectPropertySetter(readString),\n    'type': makeObjectPropertySetter(readString),\n    'fix': makeObjectPropertySetter(readString),\n    'sat': makeObjectPropertySetter(readNonNegativeInteger),\n    'hdop': makeObjectPropertySetter(readDecimal),\n    'vdop': makeObjectPropertySetter(readDecimal),\n    'pdop': makeObjectPropertySetter(readDecimal),\n    'ageofdgpsdata': makeObjectPropertySetter(readDecimal),\n    'dgpsid': makeObjectPropertySetter(readNonNegativeInteger),\n    'extensions': parseExtensions\n  });\n\n\n/**\n * @const\n * @type {Array.<string>}\n */\nconst LINK_SEQUENCE = ['text', 'type'];\n\n\n/**\n * @const\n * @type {Object.<string, Object.<string, module:ol/xml~Serializer>>}\n */\nconst LINK_SERIALIZERS = makeStructureNS(\n  NAMESPACE_URIS, {\n    'text': makeChildAppender(writeStringTextNode),\n    'type': makeChildAppender(writeStringTextNode)\n  });\n\n\n/**\n * @const\n * @type {Object.<string, Array.<string>>}\n */\nconst RTE_SEQUENCE = makeStructureNS(\n  NAMESPACE_URIS, [\n    'name', 'cmt', 'desc', 'src', 'link', 'number', 'type', 'rtept'\n  ]);\n\n\n/**\n * @const\n * @type {Object.<string, Object.<string, module:ol/xml~Serializer>>}\n */\nconst RTE_SERIALIZERS = makeStructureNS(\n  NAMESPACE_URIS, {\n    'name': makeChildAppender(writeStringTextNode),\n    'cmt': makeChildAppender(writeStringTextNode),\n    'desc': makeChildAppender(writeStringTextNode),\n    'src': makeChildAppender(writeStringTextNode),\n    'link': makeChildAppender(writeLink),\n    'number': makeChildAppender(writeNonNegativeIntegerTextNode),\n    'type': makeChildAppender(writeStringTextNode),\n    'rtept': makeArraySerializer(makeChildAppender(writeWptType))\n  });\n\n\n/**\n * @const\n * @type {Object.<string, Array.<string>>}\n */\nconst RTEPT_TYPE_SEQUENCE = makeStructureNS(\n  NAMESPACE_URIS, [\n    'ele', 'time'\n  ]);\n\n\n/**\n * @const\n * @type {Object.<string, Array.<string>>}\n */\nconst TRK_SEQUENCE = makeStructureNS(\n  NAMESPACE_URIS, [\n    'name', 'cmt', 'desc', 'src', 'link', 'number', 'type', 'trkseg'\n  ]);\n\n\n/**\n * @const\n * @type {Object.<string, Object.<string, module:ol/xml~Serializer>>}\n */\nconst TRK_SERIALIZERS = makeStructureNS(\n  NAMESPACE_URIS, {\n    'name': makeChildAppender(writeStringTextNode),\n    'cmt': makeChildAppender(writeStringTextNode),\n    'desc': makeChildAppender(writeStringTextNode),\n    'src': makeChildAppender(writeStringTextNode),\n    'link': makeChildAppender(writeLink),\n    'number': makeChildAppender(writeNonNegativeIntegerTextNode),\n    'type': makeChildAppender(writeStringTextNode),\n    'trkseg': makeArraySerializer(makeChildAppender(writeTrkSeg))\n  });\n\n\n/**\n * @const\n * @type {function(*, Array.<*>, string=): (Node|undefined)}\n */\nconst TRKSEG_NODE_FACTORY = makeSimpleNodeFactory('trkpt');\n\n\n/**\n * @const\n * @type {Object.<string, Object.<string, module:ol/xml~Serializer>>}\n */\nconst TRKSEG_SERIALIZERS = makeStructureNS(\n  NAMESPACE_URIS, {\n    'trkpt': makeChildAppender(writeWptType)\n  });\n\n\n/**\n * @const\n * @type {Object.<string, Array.<string>>}\n */\nconst WPT_TYPE_SEQUENCE = makeStructureNS(\n  NAMESPACE_URIS, [\n    'ele', 'time', 'magvar', 'geoidheight', 'name', 'cmt', 'desc', 'src',\n    'link', 'sym', 'type', 'fix', 'sat', 'hdop', 'vdop', 'pdop',\n    'ageofdgpsdata', 'dgpsid'\n  ]);\n\n\n/**\n * @const\n * @type {Object.<string, Object.<string, module:ol/xml~Serializer>>}\n */\nconst WPT_TYPE_SERIALIZERS = makeStructureNS(\n  NAMESPACE_URIS, {\n    'ele': makeChildAppender(writeDecimalTextNode),\n    'time': makeChildAppender(writeDateTimeTextNode),\n    'magvar': makeChildAppender(writeDecimalTextNode),\n    'geoidheight': makeChildAppender(writeDecimalTextNode),\n    'name': makeChildAppender(writeStringTextNode),\n    'cmt': makeChildAppender(writeStringTextNode),\n    'desc': makeChildAppender(writeStringTextNode),\n    'src': makeChildAppender(writeStringTextNode),\n    'link': makeChildAppender(writeLink),\n    'sym': makeChildAppender(writeStringTextNode),\n    'type': makeChildAppender(writeStringTextNode),\n    'fix': makeChildAppender(writeStringTextNode),\n    'sat': makeChildAppender(writeNonNegativeIntegerTextNode),\n    'hdop': makeChildAppender(writeDecimalTextNode),\n    'vdop': makeChildAppender(writeDecimalTextNode),\n    'pdop': makeChildAppender(writeDecimalTextNode),\n    'ageofdgpsdata': makeChildAppender(writeDecimalTextNode),\n    'dgpsid': makeChildAppender(writeNonNegativeIntegerTextNode)\n  });\n\n\n/**\n * @const\n * @type {Object.<string, string>}\n */\nconst GEOMETRY_TYPE_TO_NODENAME = {\n  'Point': 'wpt',\n  'LineString': 'rte',\n  'MultiLineString': 'trk'\n};\n\n\n/**\n * @param {*} value Value.\n * @param {Array.<*>} objectStack Object stack.\n * @param {string=} opt_nodeName Node name.\n * @return {Node|undefined} Node.\n */\nfunction GPX_NODE_FACTORY(value, objectStack, opt_nodeName) {\n  const geometry = /** @type {module:ol/Feature} */ (value).getGeometry();\n  if (geometry) {\n    const nodeName = GEOMETRY_TYPE_TO_NODENAME[geometry.getType()];\n    if (nodeName) {\n      const parentNode = objectStack[objectStack.length - 1].node;\n      return createElementNS(parentNode.namespaceURI, nodeName);\n    }\n  }\n}\n\n\n/**\n * @const\n * @type {Object.<string, Object.<string, module:ol/xml~Serializer>>}\n */\nconst GPX_SERIALIZERS = makeStructureNS(\n  NAMESPACE_URIS, {\n    'rte': makeChildAppender(writeRte),\n    'trk': makeChildAppender(writeTrk),\n    'wpt': makeChildAppender(writeWpt)\n  });\n\n\n/**\n * @param {Array.<number>} flatCoordinates Flat coordinates.\n * @param {module:ol/format/GPX~LayoutOptions} layoutOptions Layout options.\n * @param {Node} node Node.\n * @param {!Object} values Values.\n * @return {Array.<number>} Flat coordinates.\n */\nfunction appendCoordinate(flatCoordinates, layoutOptions, node, values) {\n  flatCoordinates.push(\n    parseFloat(node.getAttribute('lon')),\n    parseFloat(node.getAttribute('lat')));\n  if ('ele' in values) {\n    flatCoordinates.push(/** @type {number} */ (values['ele']));\n    delete values['ele'];\n    layoutOptions.hasZ = true;\n  } else {\n    flatCoordinates.push(0);\n  }\n  if ('time' in values) {\n    flatCoordinates.push(/** @type {number} */ (values['time']));\n    delete values['time'];\n    layoutOptions.hasM = true;\n  } else {\n    flatCoordinates.push(0);\n  }\n  return flatCoordinates;\n}\n\n\n/**\n * Choose GeometryLayout based on flags in layoutOptions and adjust flatCoordinates\n * and ends arrays by shrinking them accordingly (removing unused zero entries).\n *\n * @param {module:ol/format/GPX~LayoutOptions} layoutOptions Layout options.\n * @param {Array.<number>} flatCoordinates Flat coordinates.\n * @param {Array.<number>=} ends Ends.\n * @return {module:ol/geom/GeometryLayout} Layout.\n */\nfunction applyLayoutOptions(layoutOptions, flatCoordinates, ends) {\n  let layout = GeometryLayout.XY;\n  let stride = 2;\n  if (layoutOptions.hasZ && layoutOptions.hasM) {\n    layout = GeometryLayout.XYZM;\n    stride = 4;\n  } else if (layoutOptions.hasZ) {\n    layout = GeometryLayout.XYZ;\n    stride = 3;\n  } else if (layoutOptions.hasM) {\n    layout = GeometryLayout.XYM;\n    stride = 3;\n  }\n  if (stride !== 4) {\n    for (let i = 0, ii = flatCoordinates.length / 4; i < ii; i++) {\n      flatCoordinates[i * stride] = flatCoordinates[i * 4];\n      flatCoordinates[i * stride + 1] = flatCoordinates[i * 4 + 1];\n      if (layoutOptions.hasZ) {\n        flatCoordinates[i * stride + 2] = flatCoordinates[i * 4 + 2];\n      }\n      if (layoutOptions.hasM) {\n        flatCoordinates[i * stride + 2] = flatCoordinates[i * 4 + 3];\n      }\n    }\n    flatCoordinates.length = flatCoordinates.length / 4 * stride;\n    if (ends) {\n      for (let i = 0, ii = ends.length; i < ii; i++) {\n        ends[i] = ends[i] / 4 * stride;\n      }\n    }\n  }\n  return layout;\n}\n\n\n/**\n * @param {Node} node Node.\n * @param {Array.<*>} objectStack Object stack.\n */\nfunction parseLink(node, objectStack) {\n  const values = /** @type {Object} */ (objectStack[objectStack.length - 1]);\n  const href = node.getAttribute('href');\n  if (href !== null) {\n    values['link'] = href;\n  }\n  parseNode(LINK_PARSERS, node, objectStack);\n}\n\n\n/**\n * @param {Node} node Node.\n * @param {Array.<*>} objectStack Object stack.\n */\nfunction parseExtensions(node, objectStack) {\n  const values = /** @type {Object} */ (objectStack[objectStack.length - 1]);\n  values['extensionsNode_'] = node;\n}\n\n\n/**\n * @param {Node} node Node.\n * @param {Array.<*>} objectStack Object stack.\n */\nfunction parseRtePt(node, objectStack) {\n  const values = pushParseAndPop({}, RTEPT_PARSERS, node, objectStack);\n  if (values) {\n    const rteValues = /** @type {!Object} */ (objectStack[objectStack.length - 1]);\n    const flatCoordinates = /** @type {Array.<number>} */ (rteValues['flatCoordinates']);\n    const layoutOptions = /** @type {module:ol/format/GPX~LayoutOptions} */ (rteValues['layoutOptions']);\n    appendCoordinate(flatCoordinates, layoutOptions, node, values);\n  }\n}\n\n\n/**\n * @param {Node} node Node.\n * @param {Array.<*>} objectStack Object stack.\n */\nfunction parseTrkPt(node, objectStack) {\n  const values = pushParseAndPop({}, TRKPT_PARSERS, node, objectStack);\n  if (values) {\n    const trkValues = /** @type {!Object} */ (objectStack[objectStack.length - 1]);\n    const flatCoordinates = /** @type {Array.<number>} */ (trkValues['flatCoordinates']);\n    const layoutOptions = /** @type {module:ol/format/GPX~LayoutOptions} */ (trkValues['layoutOptions']);\n    appendCoordinate(flatCoordinates, layoutOptions, node, values);\n  }\n}\n\n\n/**\n * @param {Node} node Node.\n * @param {Array.<*>} objectStack Object stack.\n */\nfunction parseTrkSeg(node, objectStack) {\n  const values = /** @type {Object} */ (objectStack[objectStack.length - 1]);\n  parseNode(TRKSEG_PARSERS, node, objectStack);\n  const flatCoordinates = /** @type {Array.<number>} */\n      (values['flatCoordinates']);\n  const ends = /** @type {Array.<number>} */ (values['ends']);\n  ends.push(flatCoordinates.length);\n}\n\n\n/**\n * @param {Node} node Node.\n * @param {Array.<*>} objectStack Object stack.\n * @return {module:ol/Feature|undefined} Track.\n */\nfunction readRte(node, objectStack) {\n  const options = /** @type {module:ol/format/Feature~ReadOptions} */ (objectStack[0]);\n  const values = pushParseAndPop({\n    'flatCoordinates': [],\n    'layoutOptions': {}\n  }, RTE_PARSERS, node, objectStack);\n  if (!values) {\n    return undefined;\n  }\n  const flatCoordinates = /** @type {Array.<number>} */\n      (values['flatCoordinates']);\n  delete values['flatCoordinates'];\n  const layoutOptions = /** @type {module:ol/format/GPX~LayoutOptions} */ (values['layoutOptions']);\n  delete values['layoutOptions'];\n  const layout = applyLayoutOptions(layoutOptions, flatCoordinates);\n  const geometry = new LineString(null);\n  geometry.setFlatCoordinates(layout, flatCoordinates);\n  transformWithOptions(geometry, false, options);\n  const feature = new Feature(geometry);\n  feature.setProperties(values);\n  return feature;\n}\n\n\n/**\n * @param {Node} node Node.\n * @param {Array.<*>} objectStack Object stack.\n * @return {module:ol/Feature|undefined} Track.\n */\nfunction readTrk(node, objectStack) {\n  const options = /** @type {module:ol/format/Feature~ReadOptions} */ (objectStack[0]);\n  const values = pushParseAndPop({\n    'flatCoordinates': [],\n    'ends': [],\n    'layoutOptions': {}\n  }, TRK_PARSERS, node, objectStack);\n  if (!values) {\n    return undefined;\n  }\n  const flatCoordinates = /** @type {Array.<number>} */\n      (values['flatCoordinates']);\n  delete values['flatCoordinates'];\n  const ends = /** @type {Array.<number>} */ (values['ends']);\n  delete values['ends'];\n  const layoutOptions = /** @type {module:ol/format/GPX~LayoutOptions} */ (values['layoutOptions']);\n  delete values['layoutOptions'];\n  const layout = applyLayoutOptions(layoutOptions, flatCoordinates, ends);\n  const geometry = new MultiLineString(null);\n  geometry.setFlatCoordinates(layout, flatCoordinates, ends);\n  transformWithOptions(geometry, false, options);\n  const feature = new Feature(geometry);\n  feature.setProperties(values);\n  return feature;\n}\n\n\n/**\n * @param {Node} node Node.\n * @param {Array.<*>} objectStack Object stack.\n * @return {module:ol/Feature|undefined} Waypoint.\n */\nfunction readWpt(node, objectStack) {\n  const options = /** @type {module:ol/format/Feature~ReadOptions} */ (objectStack[0]);\n  const values = pushParseAndPop({}, WPT_PARSERS, node, objectStack);\n  if (!values) {\n    return undefined;\n  }\n  const layoutOptions = /** @type {module:ol/format/GPX~LayoutOptions} */ ({});\n  const coordinates = appendCoordinate([], layoutOptions, node, values);\n  const layout = applyLayoutOptions(layoutOptions, coordinates);\n  const geometry = new Point(coordinates, layout);\n  transformWithOptions(geometry, false, options);\n  const feature = new Feature(geometry);\n  feature.setProperties(values);\n  return feature;\n}\n\n\n/**\n * @param {Array.<module:ol/Feature>} features List of features.\n * @private\n */\nGPX.prototype.handleReadExtensions_ = function(features) {\n  if (!features) {\n    features = [];\n  }\n  for (let i = 0, ii = features.length; i < ii; ++i) {\n    const feature = features[i];\n    if (this.readExtensions_) {\n      const extensionsNode = feature.get('extensionsNode_') || null;\n      this.readExtensions_(feature, extensionsNode);\n    }\n    feature.set('extensionsNode_', undefined);\n  }\n};\n\n\n/**\n * Read the first feature from a GPX source.\n * Routes (`<rte>`) are converted into LineString geometries, and tracks (`<trk>`)\n * into MultiLineString. Any properties on route and track waypoints are ignored.\n *\n * @function\n * @param {Document|Node|Object|string} source Source.\n * @param {module:ol/format/Feature~ReadOptions=} opt_options Read options.\n * @return {module:ol/Feature} Feature.\n * @api\n */\nGPX.prototype.readFeature;\n\n\n/**\n * @inheritDoc\n */\nGPX.prototype.readFeatureFromNode = function(node, opt_options) {\n  if (!includes(NAMESPACE_URIS, node.namespaceURI)) {\n    return null;\n  }\n  const featureReader = FEATURE_READER[node.localName];\n  if (!featureReader) {\n    return null;\n  }\n  const feature = featureReader(node, [this.getReadOptions(node, opt_options)]);\n  if (!feature) {\n    return null;\n  }\n  this.handleReadExtensions_([feature]);\n  return feature;\n};\n\n\n/**\n * Read all features from a GPX source.\n * Routes (`<rte>`) are converted into LineString geometries, and tracks (`<trk>`)\n * into MultiLineString. Any properties on route and track waypoints are ignored.\n *\n * @function\n * @param {Document|Node|Object|string} source Source.\n * @param {module:ol/format/Feature~ReadOptions=} opt_options Read options.\n * @return {Array.<module:ol/Feature>} Features.\n * @api\n */\nGPX.prototype.readFeatures;\n\n\n/**\n * @inheritDoc\n */\nGPX.prototype.readFeaturesFromNode = function(node, opt_options) {\n  if (!includes(NAMESPACE_URIS, node.namespaceURI)) {\n    return [];\n  }\n  if (node.localName == 'gpx') {\n    /** @type {Array.<module:ol/Feature>} */\n    const features = pushParseAndPop([], GPX_PARSERS,\n      node, [this.getReadOptions(node, opt_options)]);\n    if (features) {\n      this.handleReadExtensions_(features);\n      return features;\n    } else {\n      return [];\n    }\n  }\n  return [];\n};\n\n\n/**\n * Read the projection from a GPX source.\n *\n * @function\n * @param {Document|Node|Object|string} source Source.\n * @return {module:ol/proj/Projection} Projection.\n * @api\n */\nGPX.prototype.readProjection;\n\n\n/**\n * @param {Node} node Node.\n * @param {string} value Value for the link's `href` attribute.\n * @param {Array.<*>} objectStack Node stack.\n */\nfunction writeLink(node, value, objectStack) {\n  node.setAttribute('href', value);\n  const context = objectStack[objectStack.length - 1];\n  const properties = context['properties'];\n  const link = [\n    properties['linkText'],\n    properties['linkType']\n  ];\n  pushSerializeAndPop(/** @type {module:ol/xml~NodeStackItem} */ ({node: node}),\n    LINK_SERIALIZERS, OBJECT_PROPERTY_NODE_FACTORY,\n    link, objectStack, LINK_SEQUENCE);\n}\n\n\n/**\n * @param {Node} node Node.\n * @param {module:ol/coordinate~Coordinate} coordinate Coordinate.\n * @param {Array.<*>} objectStack Object stack.\n */\nfunction writeWptType(node, coordinate, objectStack) {\n  const context = objectStack[objectStack.length - 1];\n  const parentNode = context.node;\n  const namespaceURI = parentNode.namespaceURI;\n  const properties = context['properties'];\n  //FIXME Projection handling\n  node.setAttributeNS(null, 'lat', coordinate[1]);\n  node.setAttributeNS(null, 'lon', coordinate[0]);\n  const geometryLayout = context['geometryLayout'];\n  switch (geometryLayout) {\n    case GeometryLayout.XYZM:\n      if (coordinate[3] !== 0) {\n        properties['time'] = coordinate[3];\n      }\n      // fall through\n    case GeometryLayout.XYZ:\n      if (coordinate[2] !== 0) {\n        properties['ele'] = coordinate[2];\n      }\n      break;\n    case GeometryLayout.XYM:\n      if (coordinate[2] !== 0) {\n        properties['time'] = coordinate[2];\n      }\n      break;\n    default:\n      // pass\n  }\n  const orderedKeys = (node.nodeName == 'rtept') ?\n    RTEPT_TYPE_SEQUENCE[namespaceURI] :\n    WPT_TYPE_SEQUENCE[namespaceURI];\n  const values = makeSequence(properties, orderedKeys);\n  pushSerializeAndPop(/** @type {module:ol/xml~NodeStackItem} */\n    ({node: node, 'properties': properties}),\n    WPT_TYPE_SERIALIZERS, OBJECT_PROPERTY_NODE_FACTORY,\n    values, objectStack, orderedKeys);\n}\n\n\n/**\n * @param {Node} node Node.\n * @param {module:ol/Feature} feature Feature.\n * @param {Array.<*>} objectStack Object stack.\n */\nfunction writeRte(node, feature, objectStack) {\n  const options = /** @type {module:ol/format/Feature~WriteOptions} */ (objectStack[0]);\n  const properties = feature.getProperties();\n  const context = {node: node, 'properties': properties};\n  let geometry = feature.getGeometry();\n  if (geometry) {\n    geometry = /** @type {module:ol/geom/LineString} */ (transformWithOptions(geometry, true, options));\n    context['geometryLayout'] = geometry.getLayout();\n    properties['rtept'] = geometry.getCoordinates();\n  }\n  const parentNode = objectStack[objectStack.length - 1].node;\n  const orderedKeys = RTE_SEQUENCE[parentNode.namespaceURI];\n  const values = makeSequence(properties, orderedKeys);\n  pushSerializeAndPop(context,\n    RTE_SERIALIZERS, OBJECT_PROPERTY_NODE_FACTORY,\n    values, objectStack, orderedKeys);\n}\n\n\n/**\n * @param {Node} node Node.\n * @param {module:ol/Feature} feature Feature.\n * @param {Array.<*>} objectStack Object stack.\n */\nfunction writeTrk(node, feature, objectStack) {\n  const options = /** @type {module:ol/format/Feature~WriteOptions} */ (objectStack[0]);\n  const properties = feature.getProperties();\n  /** @type {module:ol/xml~NodeStackItem} */\n  const context = {node: node, 'properties': properties};\n  let geometry = feature.getGeometry();\n  if (geometry) {\n    geometry = /** @type {module:ol/geom/MultiLineString} */\n      (transformWithOptions(geometry, true, options));\n    properties['trkseg'] = geometry.getLineStrings();\n  }\n  const parentNode = objectStack[objectStack.length - 1].node;\n  const orderedKeys = TRK_SEQUENCE[parentNode.namespaceURI];\n  const values = makeSequence(properties, orderedKeys);\n  pushSerializeAndPop(context,\n    TRK_SERIALIZERS, OBJECT_PROPERTY_NODE_FACTORY,\n    values, objectStack, orderedKeys);\n}\n\n\n/**\n * @param {Node} node Node.\n * @param {module:ol/geom/LineString} lineString LineString.\n * @param {Array.<*>} objectStack Object stack.\n */\nfunction writeTrkSeg(node, lineString, objectStack) {\n  /** @type {module:ol/xml~NodeStackItem} */\n  const context = {node: node, 'geometryLayout': lineString.getLayout(),\n    'properties': {}};\n  pushSerializeAndPop(context,\n    TRKSEG_SERIALIZERS, TRKSEG_NODE_FACTORY,\n    lineString.getCoordinates(), objectStack);\n}\n\n\n/**\n * @param {Node} node Node.\n * @param {module:ol/Feature} feature Feature.\n * @param {Array.<*>} objectStack Object stack.\n */\nfunction writeWpt(node, feature, objectStack) {\n  const options = /** @type {module:ol/format/Feature~WriteOptions} */ (objectStack[0]);\n  const context = objectStack[objectStack.length - 1];\n  context['properties'] = feature.getProperties();\n  let geometry = feature.getGeometry();\n  if (geometry) {\n    geometry = /** @type {module:ol/geom/Point} */\n      (transformWithOptions(geometry, true, options));\n    context['geometryLayout'] = geometry.getLayout();\n    writeWptType(node, geometry.getCoordinates(), objectStack);\n  }\n}\n\n\n/**\n * Encode an array of features in the GPX format.\n * LineString geometries are output as routes (`<rte>`), and MultiLineString\n * as tracks (`<trk>`).\n *\n * @function\n * @param {Array.<module:ol/Feature>} features Features.\n * @param {module:ol/format/Feature~WriteOptions=} opt_options Write options.\n * @return {string} Result.\n * @api\n */\nGPX.prototype.writeFeatures;\n\n\n/**\n * Encode an array of features in the GPX format as an XML node.\n * LineString geometries are output as routes (`<rte>`), and MultiLineString\n * as tracks (`<trk>`).\n *\n * @param {Array.<module:ol/Feature>} features Features.\n * @param {module:ol/format/Feature~WriteOptions=} opt_options Options.\n * @return {Node} Node.\n * @override\n * @api\n */\nGPX.prototype.writeFeaturesNode = function(features, opt_options) {\n  opt_options = this.adaptOptions(opt_options);\n  //FIXME Serialize metadata\n  const gpx = createElementNS('http://www.topografix.com/GPX/1/1', 'gpx');\n  const xmlnsUri = 'http://www.w3.org/2000/xmlns/';\n  gpx.setAttributeNS(xmlnsUri, 'xmlns:xsi', XML_SCHEMA_INSTANCE_URI);\n  gpx.setAttributeNS(XML_SCHEMA_INSTANCE_URI, 'xsi:schemaLocation', SCHEMA_LOCATION);\n  gpx.setAttribute('version', '1.1');\n  gpx.setAttribute('creator', 'OpenLayers');\n\n  pushSerializeAndPop(/** @type {module:ol/xml~NodeStackItem} */\n    ({node: gpx}), GPX_SERIALIZERS, GPX_NODE_FACTORY, features, [opt_options]);\n  return gpx;\n};\nexport default GPX;\n","/**\n * @module ol/style/Atlas\n */\nimport {createCanvasContext2D} from '../dom.js';\n\n\n/**\n * @typedef {Object} AtlasBlock\n * @property {number} x\n * @property {number} y\n * @property {number} width\n * @property {number} height\n */\n\n/**\n * Provides information for an image inside an atlas.\n * `offsetX` and `offsetY` are the position of the image inside the atlas image `image`.\n * @typedef {Object} AtlasInfo\n * @property {number} offsetX\n * @property {number} offsetY\n * @property {HTMLCanvasElement} image\n */\n\n/**\n * This class facilitates the creation of image atlases.\n *\n * Images added to an atlas will be rendered onto a single\n * atlas canvas. The distribution of images on the canvas is\n * managed with the bin packing algorithm described in:\n * http://www.blackpawn.com/texts/lightmaps/\n *\n * @constructor\n * @struct\n * @param {number} size The size in pixels of the sprite image.\n * @param {number} space The space in pixels between images.\n *    Because texture coordinates are float values, the edges of\n *    images might not be completely correct (in a way that the\n *    edges overlap when being rendered). To avoid this we add a\n *    padding around each image.\n */\nconst Atlas = function(size, space) {\n\n  /**\n   * @private\n   * @type {number}\n   */\n  this.space_ = space;\n\n  /**\n   * @private\n   * @type {Array.<module:ol/style/Atlas~AtlasBlock>}\n   */\n  this.emptyBlocks_ = [{x: 0, y: 0, width: size, height: size}];\n\n  /**\n   * @private\n   * @type {Object.<string, module:ol/style/Atlas~AtlasInfo>}\n   */\n  this.entries_ = {};\n\n  /**\n   * @private\n   * @type {CanvasRenderingContext2D}\n   */\n  this.context_ = createCanvasContext2D(size, size);\n\n  /**\n   * @private\n   * @type {HTMLCanvasElement}\n   */\n  this.canvas_ = this.context_.canvas;\n};\n\n\n/**\n * @param {string} id The identifier of the entry to check.\n * @return {?module:ol/style/Atlas~AtlasInfo} The atlas info.\n */\nAtlas.prototype.get = function(id) {\n  return this.entries_[id] || null;\n};\n\n\n/**\n * @param {string} id The identifier of the entry to add.\n * @param {number} width The width.\n * @param {number} height The height.\n * @param {function(CanvasRenderingContext2D, number, number)} renderCallback\n *    Called to render the new image onto an atlas image.\n * @param {Object=} opt_this Value to use as `this` when executing\n *    `renderCallback`.\n * @return {?module:ol/style/Atlas~AtlasInfo} The position and atlas image for the entry.\n */\nAtlas.prototype.add = function(id, width, height, renderCallback, opt_this) {\n  for (let i = 0, ii = this.emptyBlocks_.length; i < ii; ++i) {\n    const block = this.emptyBlocks_[i];\n    if (block.width >= width + this.space_ &&\n        block.height >= height + this.space_) {\n      // we found a block that is big enough for our entry\n      const entry = {\n        offsetX: block.x + this.space_,\n        offsetY: block.y + this.space_,\n        image: this.canvas_\n      };\n      this.entries_[id] = entry;\n\n      // render the image on the atlas image\n      renderCallback.call(opt_this, this.context_,\n        block.x + this.space_, block.y + this.space_);\n\n      // split the block after the insertion, either horizontally or vertically\n      this.split_(i, block, width + this.space_, height + this.space_);\n\n      return entry;\n    }\n  }\n\n  // there is no space for the new entry in this atlas\n  return null;\n};\n\n\n/**\n * @private\n * @param {number} index The index of the block.\n * @param {module:ol/style/Atlas~AtlasBlock} block The block to split.\n * @param {number} width The width of the entry to insert.\n * @param {number} height The height of the entry to insert.\n */\nAtlas.prototype.split_ = function(index, block, width, height) {\n  const deltaWidth = block.width - width;\n  const deltaHeight = block.height - height;\n\n  /** @type {module:ol/style/Atlas~AtlasBlock} */\n  let newBlock1;\n  /** @type {module:ol/style/Atlas~AtlasBlock} */\n  let newBlock2;\n\n  if (deltaWidth > deltaHeight) {\n    // split vertically\n    // block right of the inserted entry\n    newBlock1 = {\n      x: block.x + width,\n      y: block.y,\n      width: block.width - width,\n      height: block.height\n    };\n\n    // block below the inserted entry\n    newBlock2 = {\n      x: block.x,\n      y: block.y + height,\n      width: width,\n      height: block.height - height\n    };\n    this.updateBlocks_(index, newBlock1, newBlock2);\n  } else {\n    // split horizontally\n    // block right of the inserted entry\n    newBlock1 = {\n      x: block.x + width,\n      y: block.y,\n      width: block.width - width,\n      height: height\n    };\n\n    // block below the inserted entry\n    newBlock2 = {\n      x: block.x,\n      y: block.y + height,\n      width: block.width,\n      height: block.height - height\n    };\n    this.updateBlocks_(index, newBlock1, newBlock2);\n  }\n};\n\n\n/**\n * Remove the old block and insert new blocks at the same array position.\n * The new blocks are inserted at the same position, so that splitted\n * blocks (that are potentially smaller) are filled first.\n * @private\n * @param {number} index The index of the block to remove.\n * @param {module:ol/style/Atlas~AtlasBlock} newBlock1 The 1st block to add.\n * @param {module:ol/style/Atlas~AtlasBlock} newBlock2 The 2nd block to add.\n */\nAtlas.prototype.updateBlocks_ = function(index, newBlock1, newBlock2) {\n  const args = [index, 1];\n  if (newBlock1.width > 0 && newBlock1.height > 0) {\n    args.push(newBlock1);\n  }\n  if (newBlock2.width > 0 && newBlock2.height > 0) {\n    args.push(newBlock2);\n  }\n  this.emptyBlocks_.splice.apply(this.emptyBlocks_, args);\n};\nexport default Atlas;\n","/**\n * @module ol/style/AtlasManager\n */\nimport {MAX_TEXTURE_SIZE as WEBGL_MAX_TEXTURE_SIZE} from '../webgl.js';\nimport {UNDEFINED} from '../functions.js';\nimport Atlas from '../style/Atlas.js';\n\n\n/**\n * @typedef {Object} Options\n * @property {number} [initialSize=256] The size in pixels of the first atlas image.\n * @property {number} [maxSize] The maximum size in pixels of atlas images. Default is\n * `webgl/MAX_TEXTURE_SIZE` or 2048 if WebGL is not supported.\n * @property {number} [space=1] The space in pixels between images.\n */\n\n\n/**\n * Provides information for an image inside an atlas manager.\n * `offsetX` and `offsetY` is the position of the image inside\n * the atlas image `image` and the position of the hit-detection image\n * inside the hit-detection atlas image `hitImage`.\n * @typedef {Object} AtlasManagerInfo\n * @property {number} offsetX\n * @property {number} offsetY\n * @property {HTMLCanvasElement} image\n * @property {HTMLCanvasElement} hitImage\n */\n\n\n/**\n * The size in pixels of the first atlas image.\n * @type {number}\n */\nconst INITIAL_ATLAS_SIZE = 256;\n\n/**\n * The maximum size in pixels of atlas images.\n * @type {number}\n */\nconst MAX_ATLAS_SIZE = -1;\n\n\n/**\n * Manages the creation of image atlases.\n *\n * Images added to this manager will be inserted into an atlas, which\n * will be used for rendering.\n * The `size` given in the constructor is the size for the first\n * atlas. After that, when new atlases are created, they will have\n * twice the size as the latest atlas (until `maxSize` is reached).\n *\n * If an application uses many images or very large images, it is recommended\n * to set a higher `size` value to avoid the creation of too many atlases.\n *\n * @constructor\n * @struct\n * @api\n * @param {module:ol/style/AtlasManager~Options=} opt_options Options.\n */\nconst AtlasManager = function(opt_options) {\n\n  const options = opt_options || {};\n\n  /**\n   * The size in pixels of the latest atlas image.\n   * @private\n   * @type {number}\n   */\n  this.currentSize_ = options.initialSize !== undefined ?\n    options.initialSize : INITIAL_ATLAS_SIZE;\n\n  /**\n   * The maximum size in pixels of atlas images.\n   * @private\n   * @type {number}\n   */\n  this.maxSize_ = options.maxSize !== undefined ?\n    options.maxSize : MAX_ATLAS_SIZE != -1 ?\n      MAX_ATLAS_SIZE : WEBGL_MAX_TEXTURE_SIZE !== undefined ?\n        WEBGL_MAX_TEXTURE_SIZE : 2048;\n\n  /**\n   * The size in pixels between images.\n   * @private\n   * @type {number}\n   */\n  this.space_ = options.space !== undefined ? options.space : 1;\n\n  /**\n   * @private\n   * @type {Array.<module:ol/style/Atlas>}\n   */\n  this.atlases_ = [new Atlas(this.currentSize_, this.space_)];\n\n  /**\n   * The size in pixels of the latest atlas image for hit-detection images.\n   * @private\n   * @type {number}\n   */\n  this.currentHitSize_ = this.currentSize_;\n\n  /**\n   * @private\n   * @type {Array.<module:ol/style/Atlas>}\n   */\n  this.hitAtlases_ = [new Atlas(this.currentHitSize_, this.space_)];\n};\n\n\n/**\n * @param {string} id The identifier of the entry to check.\n * @return {?module:ol/style/AtlasManager~AtlasManagerInfo} The position and atlas image for the\n *    entry, or `null` if the entry is not part of the atlas manager.\n */\nAtlasManager.prototype.getInfo = function(id) {\n  /** @type {?module:ol/style/Atlas~AtlasInfo} */\n  const info = this.getInfo_(this.atlases_, id);\n\n  if (!info) {\n    return null;\n  }\n  const hitInfo = /** @type {module:ol/style/Atlas~AtlasInfo} */ (this.getInfo_(this.hitAtlases_, id));\n\n  return this.mergeInfos_(info, hitInfo);\n};\n\n\n/**\n * @private\n * @param {Array.<module:ol/style/Atlas>} atlases The atlases to search.\n * @param {string} id The identifier of the entry to check.\n * @return {?module:ol/style/Atlas~AtlasInfo} The position and atlas image for the entry,\n *    or `null` if the entry is not part of the atlases.\n */\nAtlasManager.prototype.getInfo_ = function(atlases, id) {\n  for (let i = 0, ii = atlases.length; i < ii; ++i) {\n    const atlas = atlases[i];\n    const info = atlas.get(id);\n    if (info) {\n      return info;\n    }\n  }\n  return null;\n};\n\n\n/**\n * @private\n * @param {module:ol/style/Atlas~AtlasInfo} info The info for the real image.\n * @param {module:ol/style/Atlas~AtlasInfo} hitInfo The info for the hit-detection\n *    image.\n * @return {?module:ol/style/AtlasManager~AtlasManagerInfo} The position and atlas image for the\n *    entry, or `null` if the entry is not part of the atlases.\n */\nAtlasManager.prototype.mergeInfos_ = function(info, hitInfo) {\n  return (\n    /** @type {module:ol/style/AtlasManager~AtlasManagerInfo} */ ({\n      offsetX: info.offsetX,\n      offsetY: info.offsetY,\n      image: info.image,\n      hitImage: hitInfo.image\n    })\n  );\n};\n\n\n/**\n * Add an image to the atlas manager.\n *\n * If an entry for the given id already exists, the entry will\n * be overridden (but the space on the atlas graphic will not be freed).\n *\n * If `renderHitCallback` is provided, the image (or the hit-detection version\n * of the image) will be rendered into a separate hit-detection atlas image.\n *\n * @param {string} id The identifier of the entry to add.\n * @param {number} width The width.\n * @param {number} height The height.\n * @param {function(CanvasRenderingContext2D, number, number)} renderCallback\n *    Called to render the new image onto an atlas image.\n * @param {function(CanvasRenderingContext2D, number, number)=}\n *    opt_renderHitCallback Called to render a hit-detection image onto a hit\n *    detection atlas image.\n * @param {Object=} opt_this Value to use as `this` when executing\n *    `renderCallback` and `renderHitCallback`.\n * @return {?module:ol/style/AtlasManager~AtlasManagerInfo}  The position and atlas image for the\n *    entry, or `null` if the image is too big.\n */\nAtlasManager.prototype.add = function(id, width, height,\n  renderCallback, opt_renderHitCallback, opt_this) {\n  if (width + this.space_ > this.maxSize_ ||\n      height + this.space_ > this.maxSize_) {\n    return null;\n  }\n\n  /** @type {?module:ol/style/Atlas~AtlasInfo} */\n  const info = this.add_(false, id, width, height, renderCallback, opt_this);\n  if (!info) {\n    return null;\n  }\n\n  // even if no hit-detection entry is requested, we insert a fake entry into\n  // the hit-detection atlas, to make sure that the offset is the same for\n  // the original image and the hit-detection image.\n  const renderHitCallback = opt_renderHitCallback !== undefined ?\n    opt_renderHitCallback : UNDEFINED;\n\n  const hitInfo = /** @type {module:ol/style/Atlas~AtlasInfo} */ (this.add_(true,\n    id, width, height, renderHitCallback, opt_this));\n\n  return this.mergeInfos_(info, hitInfo);\n};\n\n\n/**\n * @private\n * @param {boolean} isHitAtlas If the hit-detection atlases are used.\n * @param {string} id The identifier of the entry to add.\n * @param {number} width The width.\n * @param {number} height The height.\n * @param {function(CanvasRenderingContext2D, number, number)} renderCallback\n *    Called to render the new image onto an atlas image.\n * @param {Object=} opt_this Value to use as `this` when executing\n *    `renderCallback` and `renderHitCallback`.\n * @return {?module:ol/style/Atlas~AtlasInfo}  The position and atlas image for the entry,\n *    or `null` if the image is too big.\n */\nAtlasManager.prototype.add_ = function(isHitAtlas, id, width, height, renderCallback, opt_this) {\n  const atlases = (isHitAtlas) ? this.hitAtlases_ : this.atlases_;\n  let atlas, info, i, ii;\n  for (i = 0, ii = atlases.length; i < ii; ++i) {\n    atlas = atlases[i];\n    info = atlas.add(id, width, height, renderCallback, opt_this);\n    if (info) {\n      return info;\n    } else if (!info && i === ii - 1) {\n      // the entry could not be added to one of the existing atlases,\n      // create a new atlas that is twice as big and try to add to this one.\n      let size;\n      if (isHitAtlas) {\n        size = Math.min(this.currentHitSize_ * 2, this.maxSize_);\n        this.currentHitSize_ = size;\n      } else {\n        size = Math.min(this.currentSize_ * 2, this.maxSize_);\n        this.currentSize_ = size;\n      }\n      atlas = new Atlas(size, this.space_);\n      atlases.push(atlas);\n      // run the loop another time\n      ++ii;\n    }\n  }\n  return null;\n};\nexport default AtlasManager;\n","/**\n * @module ol/control/Attribution\n */\nimport {inherits} from '../util.js';\nimport {equals} from '../array.js';\nimport Control from '../control/Control.js';\nimport {CLASS_CONTROL, CLASS_UNSELECTABLE, CLASS_COLLAPSED} from '../css.js';\nimport {removeChildren, replaceNode} from '../dom.js';\nimport {listen} from '../events.js';\nimport EventType from '../events/EventType.js';\nimport {visibleAtResolution} from '../layer/Layer.js';\n\n\n/**\n * @typedef {Object} Options\n * @property {string} [className='ol-attribution'] CSS class name.\n * @property {Element|string} [target] Specify a target if you\n * want the control to be rendered outside of the map's\n * viewport.\n * @property {boolean} [collapsible=true] Specify if attributions can\n * be collapsed. If you use an OSM source, should be set to `false` — see\n * {@link https://www.openstreetmap.org/copyright OSM Copyright} —\n * @property {boolean} [collapsed=true] Specify if attributions should\n * be collapsed at startup.\n * @property {string} [tipLabel='Attributions'] Text label to use for the button tip.\n * @property {string} [label='i'] Text label to use for the\n * collapsed attributions button.\n * Instead of text, also an element (e.g. a `span` element) can be used.\n * @property {string|Element} [collapseLabel='»'] Text label to use\n * for the expanded attributions button.\n * Instead of text, also an element (e.g. a `span` element) can be used.\n * @property {function(module:ol/MapEvent)} [render] Function called when\n * the control should be re-rendered. This is called in a `requestAnimationFrame`\n * callback.\n */\n\n\n/**\n * @classdesc\n * Control to show all the attributions associated with the layer sources\n * in the map. This control is one of the default controls included in maps.\n * By default it will show in the bottom right portion of the map, but this can\n * be changed by using a css selector for `.ol-attribution`.\n *\n * @constructor\n * @extends {module:ol/control/Control}\n * @param {module:ol/control/Attribution~Options=} opt_options Attribution options.\n * @api\n */\nconst Attribution = function(opt_options) {\n\n  const options = opt_options ? opt_options : {};\n\n  /**\n   * @private\n   * @type {Element}\n   */\n  this.ulElement_ = document.createElement('UL');\n\n  /**\n   * @private\n   * @type {boolean}\n   */\n  this.collapsed_ = options.collapsed !== undefined ? options.collapsed : true;\n\n  /**\n   * @private\n   * @type {boolean}\n   */\n  this.collapsible_ = options.collapsible !== undefined ?\n    options.collapsible : true;\n\n  if (!this.collapsible_) {\n    this.collapsed_ = false;\n  }\n\n  const className = options.className !== undefined ? options.className : 'ol-attribution';\n\n  const tipLabel = options.tipLabel !== undefined ? options.tipLabel : 'Attributions';\n\n  const collapseLabel = options.collapseLabel !== undefined ? options.collapseLabel : '\\u00BB';\n\n  if (typeof collapseLabel === 'string') {\n    /**\n     * @private\n     * @type {Element}\n     */\n    this.collapseLabel_ = document.createElement('span');\n    this.collapseLabel_.textContent = collapseLabel;\n  } else {\n    this.collapseLabel_ = collapseLabel;\n  }\n\n  const label = options.label !== undefined ? options.label : 'i';\n\n  if (typeof label === 'string') {\n    /**\n     * @private\n     * @type {Element}\n     */\n    this.label_ = document.createElement('span');\n    this.label_.textContent = label;\n  } else {\n    this.label_ = label;\n  }\n\n\n  const activeLabel = (this.collapsible_ && !this.collapsed_) ?\n    this.collapseLabel_ : this.label_;\n  const button = document.createElement('button');\n  button.setAttribute('type', 'button');\n  button.title = tipLabel;\n  button.appendChild(activeLabel);\n\n  listen(button, EventType.CLICK, this.handleClick_, this);\n\n  const cssClasses = className + ' ' + CLASS_UNSELECTABLE + ' ' + CLASS_CONTROL +\n      (this.collapsed_ && this.collapsible_ ? ' ' + CLASS_COLLAPSED : '') +\n      (this.collapsible_ ? '' : ' ol-uncollapsible');\n  const element = document.createElement('div');\n  element.className = cssClasses;\n  element.appendChild(this.ulElement_);\n  element.appendChild(button);\n\n  Control.call(this, {\n    element: element,\n    render: options.render || render,\n    target: options.target\n  });\n\n  /**\n   * A list of currently rendered resolutions.\n   * @type {Array.<string>}\n   * @private\n   */\n  this.renderedAttributions_ = [];\n\n  /**\n   * @private\n   * @type {boolean}\n   */\n  this.renderedVisible_ = true;\n\n};\n\ninherits(Attribution, Control);\n\n\n/**\n * Get a list of visible attributions.\n * @param {module:ol/PluggableMap~FrameState} frameState Frame state.\n * @return {Array.<string>} Attributions.\n * @private\n */\nAttribution.prototype.getSourceAttributions_ = function(frameState) {\n  /**\n   * Used to determine if an attribution already exists.\n   * @type {!Object.<string, boolean>}\n   */\n  const lookup = {};\n\n  /**\n   * A list of visible attributions.\n   * @type {Array.<string>}\n   */\n  const visibleAttributions = [];\n\n  const layerStatesArray = frameState.layerStatesArray;\n  const resolution = frameState.viewState.resolution;\n  for (let i = 0, ii = layerStatesArray.length; i < ii; ++i) {\n    const layerState = layerStatesArray[i];\n    if (!visibleAtResolution(layerState, resolution)) {\n      continue;\n    }\n\n    const source = layerState.layer.getSource();\n    if (!source) {\n      continue;\n    }\n\n    const attributionGetter = source.getAttributions();\n    if (!attributionGetter) {\n      continue;\n    }\n\n    const attributions = attributionGetter(frameState);\n    if (!attributions) {\n      continue;\n    }\n\n    if (Array.isArray(attributions)) {\n      for (let j = 0, jj = attributions.length; j < jj; ++j) {\n        if (!(attributions[j] in lookup)) {\n          visibleAttributions.push(attributions[j]);\n          lookup[attributions[j]] = true;\n        }\n      }\n    } else {\n      if (!(attributions in lookup)) {\n        visibleAttributions.push(attributions);\n        lookup[attributions] = true;\n      }\n    }\n  }\n  return visibleAttributions;\n};\n\n\n/**\n * Update the attribution element.\n * @param {module:ol/MapEvent} mapEvent Map event.\n * @this {module:ol/control/Attribution}\n * @api\n */\nexport function render(mapEvent) {\n  this.updateElement_(mapEvent.frameState);\n}\n\n\n/**\n * @private\n * @param {?module:ol/PluggableMap~FrameState} frameState Frame state.\n */\nAttribution.prototype.updateElement_ = function(frameState) {\n  if (!frameState) {\n    if (this.renderedVisible_) {\n      this.element.style.display = 'none';\n      this.renderedVisible_ = false;\n    }\n    return;\n  }\n\n  const attributions = this.getSourceAttributions_(frameState);\n\n  const visible = attributions.length > 0;\n  if (this.renderedVisible_ != visible) {\n    this.element.style.display = visible ? '' : 'none';\n    this.renderedVisible_ = visible;\n  }\n\n  if (equals(attributions, this.renderedAttributions_)) {\n    return;\n  }\n\n  removeChildren(this.ulElement_);\n\n  // append the attributions\n  for (let i = 0, ii = attributions.length; i < ii; ++i) {\n    const element = document.createElement('LI');\n    element.innerHTML = attributions[i];\n    this.ulElement_.appendChild(element);\n  }\n\n  this.renderedAttributions_ = attributions;\n};\n\n\n/**\n * @param {Event} event The event to handle\n * @private\n */\nAttribution.prototype.handleClick_ = function(event) {\n  event.preventDefault();\n  this.handleToggle_();\n};\n\n\n/**\n * @private\n */\nAttribution.prototype.handleToggle_ = function() {\n  this.element.classList.toggle(CLASS_COLLAPSED);\n  if (this.collapsed_) {\n    replaceNode(this.collapseLabel_, this.label_);\n  } else {\n    replaceNode(this.label_, this.collapseLabel_);\n  }\n  this.collapsed_ = !this.collapsed_;\n};\n\n\n/**\n * Return `true` if the attribution is collapsible, `false` otherwise.\n * @return {boolean} True if the widget is collapsible.\n * @api\n */\nAttribution.prototype.getCollapsible = function() {\n  return this.collapsible_;\n};\n\n\n/**\n * Set whether the attribution should be collapsible.\n * @param {boolean} collapsible True if the widget is collapsible.\n * @api\n */\nAttribution.prototype.setCollapsible = function(collapsible) {\n  if (this.collapsible_ === collapsible) {\n    return;\n  }\n  this.collapsible_ = collapsible;\n  this.element.classList.toggle('ol-uncollapsible');\n  if (!collapsible && this.collapsed_) {\n    this.handleToggle_();\n  }\n};\n\n\n/**\n * Collapse or expand the attribution according to the passed parameter. Will\n * not do anything if the attribution isn't collapsible or if the current\n * collapsed state is already the one requested.\n * @param {boolean} collapsed True if the widget is collapsed.\n * @api\n */\nAttribution.prototype.setCollapsed = function(collapsed) {\n  if (!this.collapsible_ || this.collapsed_ === collapsed) {\n    return;\n  }\n  this.handleToggle_();\n};\n\n\n/**\n * Return `true` when the attribution is currently collapsed or `false`\n * otherwise.\n * @return {boolean} True if the widget is collapsed.\n * @api\n */\nAttribution.prototype.getCollapsed = function() {\n  return this.collapsed_;\n};\nexport default Attribution;\n","/**\n * @module ol/control/FullScreen\n */\nimport {inherits} from '../util.js';\nimport Control from '../control/Control.js';\nimport {CLASS_CONTROL, CLASS_UNSELECTABLE, CLASS_UNSUPPORTED} from '../css.js';\nimport {replaceNode} from '../dom.js';\nimport {listen} from '../events.js';\nimport EventType from '../events/EventType.js';\n\n\n/**\n * @return {string} Change type.\n */\nconst getChangeType = (function() {\n  let changeType;\n  return function() {\n    if (!changeType) {\n      const body = document.body;\n      if (body.webkitRequestFullscreen) {\n        changeType = 'webkitfullscreenchange';\n      } else if (body.mozRequestFullScreen) {\n        changeType = 'mozfullscreenchange';\n      } else if (body.msRequestFullscreen) {\n        changeType = 'MSFullscreenChange';\n      } else if (body.requestFullscreen) {\n        changeType = 'fullscreenchange';\n      }\n    }\n    return changeType;\n  };\n})();\n\n\n/**\n * @typedef {Object} Options\n * @property {string} [className='ol-full-screen'] CSS class name.\n * @property {string|Element} [label='\\u2922'] Text label to use for the button.\n * Instead of text, also an element (e.g. a `span` element) can be used.\n * @property {string|Element} [labelActive='\\u00d7'] Text label to use for the\n * button when full-screen is active.\n * Instead of text, also an element (e.g. a `span` element) can be used.\n * @property {string} [tipLabel='Toggle full-screen'] Text label to use for the button tip.\n * @property {boolean} [keys=false] Full keyboard access.\n * @property {Element|string} [target] Specify a target if you want the\n * control to be rendered outside of the map's viewport.\n * @property {Element|string} [source] The element to be displayed\n * fullscreen. When not provided, the element containing the map viewport will\n * be displayed fullscreen.\n */\n\n\n/**\n * @classdesc\n * Provides a button that when clicked fills up the full screen with the map.\n * The full screen source element is by default the element containing the map viewport unless\n * overridden by providing the `source` option. In which case, the dom\n * element introduced using this parameter will be displayed in full screen.\n *\n * When in full screen mode, a close button is shown to exit full screen mode.\n * The [Fullscreen API](http://www.w3.org/TR/fullscreen/) is used to\n * toggle the map in full screen mode.\n *\n *\n * @constructor\n * @extends {module:ol/control/Control}\n * @param {module:ol/control/FullScreen~Options=} opt_options Options.\n * @api\n */\nconst FullScreen = function(opt_options) {\n\n  const options = opt_options ? opt_options : {};\n\n  /**\n   * @private\n   * @type {string}\n   */\n  this.cssClassName_ = options.className !== undefined ? options.className :\n    'ol-full-screen';\n\n  const label = options.label !== undefined ? options.label : '\\u2922';\n\n  /**\n   * @private\n   * @type {Element}\n   */\n  this.labelNode_ = typeof label === 'string' ?\n    document.createTextNode(label) : label;\n\n  const labelActive = options.labelActive !== undefined ? options.labelActive : '\\u00d7';\n\n  /**\n   * @private\n   * @type {Element}\n   */\n  this.labelActiveNode_ = typeof labelActive === 'string' ?\n    document.createTextNode(labelActive) : labelActive;\n\n  const tipLabel = options.tipLabel ? options.tipLabel : 'Toggle full-screen';\n  const button = document.createElement('button');\n  button.className = this.cssClassName_ + '-' + isFullScreen();\n  button.setAttribute('type', 'button');\n  button.title = tipLabel;\n  button.appendChild(this.labelNode_);\n\n  listen(button, EventType.CLICK,\n    this.handleClick_, this);\n\n  const cssClasses = this.cssClassName_ + ' ' + CLASS_UNSELECTABLE +\n      ' ' + CLASS_CONTROL + ' ' +\n      (!isFullScreenSupported() ? CLASS_UNSUPPORTED : '');\n  const element = document.createElement('div');\n  element.className = cssClasses;\n  element.appendChild(button);\n\n  Control.call(this, {\n    element: element,\n    target: options.target\n  });\n\n  /**\n   * @private\n   * @type {boolean}\n   */\n  this.keys_ = options.keys !== undefined ? options.keys : false;\n\n  /**\n   * @private\n   * @type {Element|string|undefined}\n   */\n  this.source_ = options.source;\n\n};\n\ninherits(FullScreen, Control);\n\n\n/**\n * @param {Event} event The event to handle\n * @private\n */\nFullScreen.prototype.handleClick_ = function(event) {\n  event.preventDefault();\n  this.handleFullScreen_();\n};\n\n\n/**\n * @private\n */\nFullScreen.prototype.handleFullScreen_ = function() {\n  if (!isFullScreenSupported()) {\n    return;\n  }\n  const map = this.getMap();\n  if (!map) {\n    return;\n  }\n  if (isFullScreen()) {\n    exitFullScreen();\n  } else {\n    let element;\n    if (this.source_) {\n      element = typeof this.source_ === 'string' ?\n        document.getElementById(this.source_) :\n        this.source_;\n    } else {\n      element = map.getTargetElement();\n    }\n    if (this.keys_) {\n      requestFullScreenWithKeys(element);\n\n    } else {\n      requestFullScreen(element);\n    }\n  }\n};\n\n\n/**\n * @private\n */\nFullScreen.prototype.handleFullScreenChange_ = function() {\n  const button = this.element.firstElementChild;\n  const map = this.getMap();\n  if (isFullScreen()) {\n    button.className = this.cssClassName_ + '-true';\n    replaceNode(this.labelActiveNode_, this.labelNode_);\n  } else {\n    button.className = this.cssClassName_ + '-false';\n    replaceNode(this.labelNode_, this.labelActiveNode_);\n  }\n  if (map) {\n    map.updateSize();\n  }\n};\n\n\n/**\n * @inheritDoc\n * @api\n */\nFullScreen.prototype.setMap = function(map) {\n  Control.prototype.setMap.call(this, map);\n  if (map) {\n    this.listenerKeys.push(listen(document,\n      getChangeType(),\n      this.handleFullScreenChange_, this)\n    );\n  }\n};\n\n/**\n * @return {boolean} Fullscreen is supported by the current platform.\n */\nfunction isFullScreenSupported() {\n  const body = document.body;\n  return !!(\n    body.webkitRequestFullscreen ||\n    (body.mozRequestFullScreen && document.mozFullScreenEnabled) ||\n    (body.msRequestFullscreen && document.msFullscreenEnabled) ||\n    (body.requestFullscreen && document.fullscreenEnabled)\n  );\n}\n\n/**\n * @return {boolean} Element is currently in fullscreen.\n */\nfunction isFullScreen() {\n  return !!(\n    document.webkitIsFullScreen || document.mozFullScreen ||\n    document.msFullscreenElement || document.fullscreenElement\n  );\n}\n\n/**\n * Request to fullscreen an element.\n * @param {Element} element Element to request fullscreen\n */\nfunction requestFullScreen(element) {\n  if (element.requestFullscreen) {\n    element.requestFullscreen();\n  } else if (element.msRequestFullscreen) {\n    element.msRequestFullscreen();\n  } else if (element.mozRequestFullScreen) {\n    element.mozRequestFullScreen();\n  } else if (element.webkitRequestFullscreen) {\n    element.webkitRequestFullscreen();\n  }\n}\n\n/**\n * Request to fullscreen an element with keyboard input.\n * @param {Element} element Element to request fullscreen\n */\nfunction requestFullScreenWithKeys(element) {\n  if (element.mozRequestFullScreenWithKeys) {\n    element.mozRequestFullScreenWithKeys();\n  } else if (element.webkitRequestFullscreen) {\n    element.webkitRequestFullscreen(Element.ALLOW_KEYBOARD_INPUT);\n  } else {\n    requestFullScreen(element);\n  }\n}\n\n/**\n * Exit fullscreen.\n */\nfunction exitFullScreen() {\n  if (document.exitFullscreen) {\n    document.exitFullscreen();\n  } else if (document.msExitFullscreen) {\n    document.msExitFullscreen();\n  } else if (document.mozCancelFullScreen) {\n    document.mozCancelFullScreen();\n  } else if (document.webkitExitFullscreen) {\n    document.webkitExitFullscreen();\n  }\n}\n\nexport default FullScreen;\n","'use strict';\n\nmodule.exports = Pbf;\n\nvar ieee754 = require('ieee754');\n\nfunction Pbf(buf) {\n    this.buf = ArrayBuffer.isView && ArrayBuffer.isView(buf) ? buf : new Uint8Array(buf || 0);\n    this.pos = 0;\n    this.type = 0;\n    this.length = this.buf.length;\n}\n\nPbf.Varint  = 0; // varint: int32, int64, uint32, uint64, sint32, sint64, bool, enum\nPbf.Fixed64 = 1; // 64-bit: double, fixed64, sfixed64\nPbf.Bytes   = 2; // length-delimited: string, bytes, embedded messages, packed repeated fields\nPbf.Fixed32 = 5; // 32-bit: float, fixed32, sfixed32\n\nvar SHIFT_LEFT_32 = (1 << 16) * (1 << 16),\n    SHIFT_RIGHT_32 = 1 / SHIFT_LEFT_32;\n\nPbf.prototype = {\n\n    destroy: function() {\n        this.buf = null;\n    },\n\n    // === READING =================================================================\n\n    readFields: function(readField, result, end) {\n        end = end || this.length;\n\n        while (this.pos < end) {\n            var val = this.readVarint(),\n                tag = val >> 3,\n                startPos = this.pos;\n\n            this.type = val & 0x7;\n            readField(tag, result, this);\n\n            if (this.pos === startPos) this.skip(val);\n        }\n        return result;\n    },\n\n    readMessage: function(readField, result) {\n        return this.readFields(readField, result, this.readVarint() + this.pos);\n    },\n\n    readFixed32: function() {\n        var val = readUInt32(this.buf, this.pos);\n        this.pos += 4;\n        return val;\n    },\n\n    readSFixed32: function() {\n        var val = readInt32(this.buf, this.pos);\n        this.pos += 4;\n        return val;\n    },\n\n    // 64-bit int handling is based on github.com/dpw/node-buffer-more-ints (MIT-licensed)\n\n    readFixed64: function() {\n        var val = readUInt32(this.buf, this.pos) + readUInt32(this.buf, this.pos + 4) * SHIFT_LEFT_32;\n        this.pos += 8;\n        return val;\n    },\n\n    readSFixed64: function() {\n        var val = readUInt32(this.buf, this.pos) + readInt32(this.buf, this.pos + 4) * SHIFT_LEFT_32;\n        this.pos += 8;\n        return val;\n    },\n\n    readFloat: function() {\n        var val = ieee754.read(this.buf, this.pos, true, 23, 4);\n        this.pos += 4;\n        return val;\n    },\n\n    readDouble: function() {\n        var val = ieee754.read(this.buf, this.pos, true, 52, 8);\n        this.pos += 8;\n        return val;\n    },\n\n    readVarint: function(isSigned) {\n        var buf = this.buf,\n            val, b;\n\n        b = buf[this.pos++]; val  =  b & 0x7f;        if (b < 0x80) return val;\n        b = buf[this.pos++]; val |= (b & 0x7f) << 7;  if (b < 0x80) return val;\n        b = buf[this.pos++]; val |= (b & 0x7f) << 14; if (b < 0x80) return val;\n        b = buf[this.pos++]; val |= (b & 0x7f) << 21; if (b < 0x80) return val;\n        b = buf[this.pos];   val |= (b & 0x0f) << 28;\n\n        return readVarintRemainder(val, isSigned, this);\n    },\n\n    readVarint64: function() { // for compatibility with v2.0.1\n        return this.readVarint(true);\n    },\n\n    readSVarint: function() {\n        var num = this.readVarint();\n        return num % 2 === 1 ? (num + 1) / -2 : num / 2; // zigzag encoding\n    },\n\n    readBoolean: function() {\n        return Boolean(this.readVarint());\n    },\n\n    readString: function() {\n        var end = this.readVarint() + this.pos,\n            str = readUtf8(this.buf, this.pos, end);\n        this.pos = end;\n        return str;\n    },\n\n    readBytes: function() {\n        var end = this.readVarint() + this.pos,\n            buffer = this.buf.subarray(this.pos, end);\n        this.pos = end;\n        return buffer;\n    },\n\n    // verbose for performance reasons; doesn't affect gzipped size\n\n    readPackedVarint: function(arr, isSigned) {\n        var end = readPackedEnd(this);\n        arr = arr || [];\n        while (this.pos < end) arr.push(this.readVarint(isSigned));\n        return arr;\n    },\n    readPackedSVarint: function(arr) {\n        var end = readPackedEnd(this);\n        arr = arr || [];\n        while (this.pos < end) arr.push(this.readSVarint());\n        return arr;\n    },\n    readPackedBoolean: function(arr) {\n        var end = readPackedEnd(this);\n        arr = arr || [];\n        while (this.pos < end) arr.push(this.readBoolean());\n        return arr;\n    },\n    readPackedFloat: function(arr) {\n        var end = readPackedEnd(this);\n        arr = arr || [];\n        while (this.pos < end) arr.push(this.readFloat());\n        return arr;\n    },\n    readPackedDouble: function(arr) {\n        var end = readPackedEnd(this);\n        arr = arr || [];\n        while (this.pos < end) arr.push(this.readDouble());\n        return arr;\n    },\n    readPackedFixed32: function(arr) {\n        var end = readPackedEnd(this);\n        arr = arr || [];\n        while (this.pos < end) arr.push(this.readFixed32());\n        return arr;\n    },\n    readPackedSFixed32: function(arr) {\n        var end = readPackedEnd(this);\n        arr = arr || [];\n        while (this.pos < end) arr.push(this.readSFixed32());\n        return arr;\n    },\n    readPackedFixed64: function(arr) {\n        var end = readPackedEnd(this);\n        arr = arr || [];\n        while (this.pos < end) arr.push(this.readFixed64());\n        return arr;\n    },\n    readPackedSFixed64: function(arr) {\n        var end = readPackedEnd(this);\n        arr = arr || [];\n        while (this.pos < end) arr.push(this.readSFixed64());\n        return arr;\n    },\n\n    skip: function(val) {\n        var type = val & 0x7;\n        if (type === Pbf.Varint) while (this.buf[this.pos++] > 0x7f) {}\n        else if (type === Pbf.Bytes) this.pos = this.readVarint() + this.pos;\n        else if (type === Pbf.Fixed32) this.pos += 4;\n        else if (type === Pbf.Fixed64) this.pos += 8;\n        else throw new Error('Unimplemented type: ' + type);\n    },\n\n    // === WRITING =================================================================\n\n    writeTag: function(tag, type) {\n        this.writeVarint((tag << 3) | type);\n    },\n\n    realloc: function(min) {\n        var length = this.length || 16;\n\n        while (length < this.pos + min) length *= 2;\n\n        if (length !== this.length) {\n            var buf = new Uint8Array(length);\n            buf.set(this.buf);\n            this.buf = buf;\n            this.length = length;\n        }\n    },\n\n    finish: function() {\n        this.length = this.pos;\n        this.pos = 0;\n        return this.buf.subarray(0, this.length);\n    },\n\n    writeFixed32: function(val) {\n        this.realloc(4);\n        writeInt32(this.buf, val, this.pos);\n        this.pos += 4;\n    },\n\n    writeSFixed32: function(val) {\n        this.realloc(4);\n        writeInt32(this.buf, val, this.pos);\n        this.pos += 4;\n    },\n\n    writeFixed64: function(val) {\n        this.realloc(8);\n        writeInt32(this.buf, val & -1, this.pos);\n        writeInt32(this.buf, Math.floor(val * SHIFT_RIGHT_32), this.pos + 4);\n        this.pos += 8;\n    },\n\n    writeSFixed64: function(val) {\n        this.realloc(8);\n        writeInt32(this.buf, val & -1, this.pos);\n        writeInt32(this.buf, Math.floor(val * SHIFT_RIGHT_32), this.pos + 4);\n        this.pos += 8;\n    },\n\n    writeVarint: function(val) {\n        val = +val || 0;\n\n        if (val > 0xfffffff || val < 0) {\n            writeBigVarint(val, this);\n            return;\n        }\n\n        this.realloc(4);\n\n        this.buf[this.pos++] =           val & 0x7f  | (val > 0x7f ? 0x80 : 0); if (val <= 0x7f) return;\n        this.buf[this.pos++] = ((val >>>= 7) & 0x7f) | (val > 0x7f ? 0x80 : 0); if (val <= 0x7f) return;\n        this.buf[this.pos++] = ((val >>>= 7) & 0x7f) | (val > 0x7f ? 0x80 : 0); if (val <= 0x7f) return;\n        this.buf[this.pos++] =   (val >>> 7) & 0x7f;\n    },\n\n    writeSVarint: function(val) {\n        this.writeVarint(val < 0 ? -val * 2 - 1 : val * 2);\n    },\n\n    writeBoolean: function(val) {\n        this.writeVarint(Boolean(val));\n    },\n\n    writeString: function(str) {\n        str = String(str);\n        this.realloc(str.length * 4);\n\n        this.pos++; // reserve 1 byte for short string length\n\n        var startPos = this.pos;\n        // write the string directly to the buffer and see how much was written\n        this.pos = writeUtf8(this.buf, str, this.pos);\n        var len = this.pos - startPos;\n\n        if (len >= 0x80) makeRoomForExtraLength(startPos, len, this);\n\n        // finally, write the message length in the reserved place and restore the position\n        this.pos = startPos - 1;\n        this.writeVarint(len);\n        this.pos += len;\n    },\n\n    writeFloat: function(val) {\n        this.realloc(4);\n        ieee754.write(this.buf, val, this.pos, true, 23, 4);\n        this.pos += 4;\n    },\n\n    writeDouble: function(val) {\n        this.realloc(8);\n        ieee754.write(this.buf, val, this.pos, true, 52, 8);\n        this.pos += 8;\n    },\n\n    writeBytes: function(buffer) {\n        var len = buffer.length;\n        this.writeVarint(len);\n        this.realloc(len);\n        for (var i = 0; i < len; i++) this.buf[this.pos++] = buffer[i];\n    },\n\n    writeRawMessage: function(fn, obj) {\n        this.pos++; // reserve 1 byte for short message length\n\n        // write the message directly to the buffer and see how much was written\n        var startPos = this.pos;\n        fn(obj, this);\n        var len = this.pos - startPos;\n\n        if (len >= 0x80) makeRoomForExtraLength(startPos, len, this);\n\n        // finally, write the message length in the reserved place and restore the position\n        this.pos = startPos - 1;\n        this.writeVarint(len);\n        this.pos += len;\n    },\n\n    writeMessage: function(tag, fn, obj) {\n        this.writeTag(tag, Pbf.Bytes);\n        this.writeRawMessage(fn, obj);\n    },\n\n    writePackedVarint:   function(tag, arr) { this.writeMessage(tag, writePackedVarint, arr);   },\n    writePackedSVarint:  function(tag, arr) { this.writeMessage(tag, writePackedSVarint, arr);  },\n    writePackedBoolean:  function(tag, arr) { this.writeMessage(tag, writePackedBoolean, arr);  },\n    writePackedFloat:    function(tag, arr) { this.writeMessage(tag, writePackedFloat, arr);    },\n    writePackedDouble:   function(tag, arr) { this.writeMessage(tag, writePackedDouble, arr);   },\n    writePackedFixed32:  function(tag, arr) { this.writeMessage(tag, writePackedFixed32, arr);  },\n    writePackedSFixed32: function(tag, arr) { this.writeMessage(tag, writePackedSFixed32, arr); },\n    writePackedFixed64:  function(tag, arr) { this.writeMessage(tag, writePackedFixed64, arr);  },\n    writePackedSFixed64: function(tag, arr) { this.writeMessage(tag, writePackedSFixed64, arr); },\n\n    writeBytesField: function(tag, buffer) {\n        this.writeTag(tag, Pbf.Bytes);\n        this.writeBytes(buffer);\n    },\n    writeFixed32Field: function(tag, val) {\n        this.writeTag(tag, Pbf.Fixed32);\n        this.writeFixed32(val);\n    },\n    writeSFixed32Field: function(tag, val) {\n        this.writeTag(tag, Pbf.Fixed32);\n        this.writeSFixed32(val);\n    },\n    writeFixed64Field: function(tag, val) {\n        this.writeTag(tag, Pbf.Fixed64);\n        this.writeFixed64(val);\n    },\n    writeSFixed64Field: function(tag, val) {\n        this.writeTag(tag, Pbf.Fixed64);\n        this.writeSFixed64(val);\n    },\n    writeVarintField: function(tag, val) {\n        this.writeTag(tag, Pbf.Varint);\n        this.writeVarint(val);\n    },\n    writeSVarintField: function(tag, val) {\n        this.writeTag(tag, Pbf.Varint);\n        this.writeSVarint(val);\n    },\n    writeStringField: function(tag, str) {\n        this.writeTag(tag, Pbf.Bytes);\n        this.writeString(str);\n    },\n    writeFloatField: function(tag, val) {\n        this.writeTag(tag, Pbf.Fixed32);\n        this.writeFloat(val);\n    },\n    writeDoubleField: function(tag, val) {\n        this.writeTag(tag, Pbf.Fixed64);\n        this.writeDouble(val);\n    },\n    writeBooleanField: function(tag, val) {\n        this.writeVarintField(tag, Boolean(val));\n    }\n};\n\nfunction readVarintRemainder(l, s, p) {\n    var buf = p.buf,\n        h, b;\n\n    b = buf[p.pos++]; h  = (b & 0x70) >> 4;  if (b < 0x80) return toNum(l, h, s);\n    b = buf[p.pos++]; h |= (b & 0x7f) << 3;  if (b < 0x80) return toNum(l, h, s);\n    b = buf[p.pos++]; h |= (b & 0x7f) << 10; if (b < 0x80) return toNum(l, h, s);\n    b = buf[p.pos++]; h |= (b & 0x7f) << 17; if (b < 0x80) return toNum(l, h, s);\n    b = buf[p.pos++]; h |= (b & 0x7f) << 24; if (b < 0x80) return toNum(l, h, s);\n    b = buf[p.pos++]; h |= (b & 0x01) << 31; if (b < 0x80) return toNum(l, h, s);\n\n    throw new Error('Expected varint not more than 10 bytes');\n}\n\nfunction readPackedEnd(pbf) {\n    return pbf.type === Pbf.Bytes ?\n        pbf.readVarint() + pbf.pos : pbf.pos + 1;\n}\n\nfunction toNum(low, high, isSigned) {\n    if (isSigned) {\n        return high * 0x100000000 + (low >>> 0);\n    }\n\n    return ((high >>> 0) * 0x100000000) + (low >>> 0);\n}\n\nfunction writeBigVarint(val, pbf) {\n    var low, high;\n\n    if (val >= 0) {\n        low  = (val % 0x100000000) | 0;\n        high = (val / 0x100000000) | 0;\n    } else {\n        low  = ~(-val % 0x100000000);\n        high = ~(-val / 0x100000000);\n\n        if (low ^ 0xffffffff) {\n            low = (low + 1) | 0;\n        } else {\n            low = 0;\n            high = (high + 1) | 0;\n        }\n    }\n\n    if (val >= 0x10000000000000000 || val < -0x10000000000000000) {\n        throw new Error('Given varint doesn\\'t fit into 10 bytes');\n    }\n\n    pbf.realloc(10);\n\n    writeBigVarintLow(low, high, pbf);\n    writeBigVarintHigh(high, pbf);\n}\n\nfunction writeBigVarintLow(low, high, pbf) {\n    pbf.buf[pbf.pos++] = low & 0x7f | 0x80; low >>>= 7;\n    pbf.buf[pbf.pos++] = low & 0x7f | 0x80; low >>>= 7;\n    pbf.buf[pbf.pos++] = low & 0x7f | 0x80; low >>>= 7;\n    pbf.buf[pbf.pos++] = low & 0x7f | 0x80; low >>>= 7;\n    pbf.buf[pbf.pos]   = low & 0x7f;\n}\n\nfunction writeBigVarintHigh(high, pbf) {\n    var lsb = (high & 0x07) << 4;\n\n    pbf.buf[pbf.pos++] |= lsb         | ((high >>>= 3) ? 0x80 : 0); if (!high) return;\n    pbf.buf[pbf.pos++]  = high & 0x7f | ((high >>>= 7) ? 0x80 : 0); if (!high) return;\n    pbf.buf[pbf.pos++]  = high & 0x7f | ((high >>>= 7) ? 0x80 : 0); if (!high) return;\n    pbf.buf[pbf.pos++]  = high & 0x7f | ((high >>>= 7) ? 0x80 : 0); if (!high) return;\n    pbf.buf[pbf.pos++]  = high & 0x7f | ((high >>>= 7) ? 0x80 : 0); if (!high) return;\n    pbf.buf[pbf.pos++]  = high & 0x7f;\n}\n\nfunction makeRoomForExtraLength(startPos, len, pbf) {\n    var extraLen =\n        len <= 0x3fff ? 1 :\n        len <= 0x1fffff ? 2 :\n        len <= 0xfffffff ? 3 : Math.ceil(Math.log(len) / (Math.LN2 * 7));\n\n    // if 1 byte isn't enough for encoding message length, shift the data to the right\n    pbf.realloc(extraLen);\n    for (var i = pbf.pos - 1; i >= startPos; i--) pbf.buf[i + extraLen] = pbf.buf[i];\n}\n\nfunction writePackedVarint(arr, pbf)   { for (var i = 0; i < arr.length; i++) pbf.writeVarint(arr[i]);   }\nfunction writePackedSVarint(arr, pbf)  { for (var i = 0; i < arr.length; i++) pbf.writeSVarint(arr[i]);  }\nfunction writePackedFloat(arr, pbf)    { for (var i = 0; i < arr.length; i++) pbf.writeFloat(arr[i]);    }\nfunction writePackedDouble(arr, pbf)   { for (var i = 0; i < arr.length; i++) pbf.writeDouble(arr[i]);   }\nfunction writePackedBoolean(arr, pbf)  { for (var i = 0; i < arr.length; i++) pbf.writeBoolean(arr[i]);  }\nfunction writePackedFixed32(arr, pbf)  { for (var i = 0; i < arr.length; i++) pbf.writeFixed32(arr[i]);  }\nfunction writePackedSFixed32(arr, pbf) { for (var i = 0; i < arr.length; i++) pbf.writeSFixed32(arr[i]); }\nfunction writePackedFixed64(arr, pbf)  { for (var i = 0; i < arr.length; i++) pbf.writeFixed64(arr[i]);  }\nfunction writePackedSFixed64(arr, pbf) { for (var i = 0; i < arr.length; i++) pbf.writeSFixed64(arr[i]); }\n\n// Buffer code below from https://github.com/feross/buffer, MIT-licensed\n\nfunction readUInt32(buf, pos) {\n    return ((buf[pos]) |\n        (buf[pos + 1] << 8) |\n        (buf[pos + 2] << 16)) +\n        (buf[pos + 3] * 0x1000000);\n}\n\nfunction writeInt32(buf, val, pos) {\n    buf[pos] = val;\n    buf[pos + 1] = (val >>> 8);\n    buf[pos + 2] = (val >>> 16);\n    buf[pos + 3] = (val >>> 24);\n}\n\nfunction readInt32(buf, pos) {\n    return ((buf[pos]) |\n        (buf[pos + 1] << 8) |\n        (buf[pos + 2] << 16)) +\n        (buf[pos + 3] << 24);\n}\n\nfunction readUtf8(buf, pos, end) {\n    var str = '';\n    var i = pos;\n\n    while (i < end) {\n        var b0 = buf[i];\n        var c = null; // codepoint\n        var bytesPerSequence =\n            b0 > 0xEF ? 4 :\n            b0 > 0xDF ? 3 :\n            b0 > 0xBF ? 2 : 1;\n\n        if (i + bytesPerSequence > end) break;\n\n        var b1, b2, b3;\n\n        if (bytesPerSequence === 1) {\n            if (b0 < 0x80) {\n                c = b0;\n            }\n        } else if (bytesPerSequence === 2) {\n            b1 = buf[i + 1];\n            if ((b1 & 0xC0) === 0x80) {\n                c = (b0 & 0x1F) << 0x6 | (b1 & 0x3F);\n                if (c <= 0x7F) {\n                    c = null;\n                }\n            }\n        } else if (bytesPerSequence === 3) {\n            b1 = buf[i + 1];\n            b2 = buf[i + 2];\n            if ((b1 & 0xC0) === 0x80 && (b2 & 0xC0) === 0x80) {\n                c = (b0 & 0xF) << 0xC | (b1 & 0x3F) << 0x6 | (b2 & 0x3F);\n                if (c <= 0x7FF || (c >= 0xD800 && c <= 0xDFFF)) {\n                    c = null;\n                }\n            }\n        } else if (bytesPerSequence === 4) {\n            b1 = buf[i + 1];\n            b2 = buf[i + 2];\n            b3 = buf[i + 3];\n            if ((b1 & 0xC0) === 0x80 && (b2 & 0xC0) === 0x80 && (b3 & 0xC0) === 0x80) {\n                c = (b0 & 0xF) << 0x12 | (b1 & 0x3F) << 0xC | (b2 & 0x3F) << 0x6 | (b3 & 0x3F);\n                if (c <= 0xFFFF || c >= 0x110000) {\n                    c = null;\n                }\n            }\n        }\n\n        if (c === null) {\n            c = 0xFFFD;\n            bytesPerSequence = 1;\n\n        } else if (c > 0xFFFF) {\n            c -= 0x10000;\n            str += String.fromCharCode(c >>> 10 & 0x3FF | 0xD800);\n            c = 0xDC00 | c & 0x3FF;\n        }\n\n        str += String.fromCharCode(c);\n        i += bytesPerSequence;\n    }\n\n    return str;\n}\n\nfunction writeUtf8(buf, str, pos) {\n    for (var i = 0, c, lead; i < str.length; i++) {\n        c = str.charCodeAt(i); // code point\n\n        if (c > 0xD7FF && c < 0xE000) {\n            if (lead) {\n                if (c < 0xDC00) {\n                    buf[pos++] = 0xEF;\n                    buf[pos++] = 0xBF;\n                    buf[pos++] = 0xBD;\n                    lead = c;\n                    continue;\n                } else {\n                    c = lead - 0xD800 << 10 | c - 0xDC00 | 0x10000;\n                    lead = null;\n                }\n            } else {\n                if (c > 0xDBFF || (i + 1 === str.length)) {\n                    buf[pos++] = 0xEF;\n                    buf[pos++] = 0xBF;\n                    buf[pos++] = 0xBD;\n                } else {\n                    lead = c;\n                }\n                continue;\n            }\n        } else if (lead) {\n            buf[pos++] = 0xEF;\n            buf[pos++] = 0xBF;\n            buf[pos++] = 0xBD;\n            lead = null;\n        }\n\n        if (c < 0x80) {\n            buf[pos++] = c;\n        } else {\n            if (c < 0x800) {\n                buf[pos++] = c >> 0x6 | 0xC0;\n            } else {\n                if (c < 0x10000) {\n                    buf[pos++] = c >> 0xC | 0xE0;\n                } else {\n                    buf[pos++] = c >> 0x12 | 0xF0;\n                    buf[pos++] = c >> 0xC & 0x3F | 0x80;\n                }\n                buf[pos++] = c >> 0x6 & 0x3F | 0x80;\n            }\n            buf[pos++] = c & 0x3F | 0x80;\n        }\n    }\n    return pos;\n}\n","var Processor = require('./processor');\n\nexports.Processor = Processor;\n","/**\n * @module ol/control/OverviewMap\n */\nimport {inherits} from '../util.js';\nimport Collection from '../Collection.js';\nimport Map from '../Map.js';\nimport MapEventType from '../MapEventType.js';\nimport MapProperty from '../MapProperty.js';\nimport {getChangeEventType} from '../Object.js';\nimport ObjectEventType from '../ObjectEventType.js';\nimport Overlay from '../Overlay.js';\nimport OverlayPositioning from '../OverlayPositioning.js';\nimport ViewProperty from '../ViewProperty.js';\nimport Control from '../control/Control.js';\nimport {rotate as rotateCoordinate, add as addCoordinate} from '../coordinate.js';\nimport {CLASS_CONTROL, CLASS_UNSELECTABLE, CLASS_COLLAPSED} from '../css.js';\nimport {replaceNode} from '../dom.js';\nimport {listen, listenOnce, unlisten} from '../events.js';\nimport EventType from '../events/EventType.js';\nimport {containsExtent, getBottomLeft, getBottomRight, getTopLeft, getTopRight, scaleFromCenter} from '../extent.js';\n\n\n/**\n * Maximum width and/or height extent ratio that determines when the overview\n * map should be zoomed out.\n * @type {number}\n */\nconst MAX_RATIO = 0.75;\n\n\n/**\n * Minimum width and/or height extent ratio that determines when the overview\n * map should be zoomed in.\n * @type {number}\n */\nconst MIN_RATIO = 0.1;\n\n\n/**\n * @typedef {Object} Options\n * @property {string} [className='ol-overviewmap'] CSS class name.\n * @property {boolean} [collapsed=true] Whether the control should start collapsed or not (expanded).\n * @property {string|Element} [collapseLabel='«'] Text label to use for the\n * expanded overviewmap button. Instead of text, also an element (e.g. a `span` element) can be used.\n * @property {boolean} [collapsible=true] Whether the control can be collapsed or not.\n * @property {string|Element} [label='»'] Text label to use for the collapsed\n * overviewmap button. Instead of text, also an element (e.g. a `span` element) can be used.\n * @property {Array.<module:ol/layer/Layer>|module:ol/Collection.<module:ol/layer/Layer>} [layers]\n * Layers for the overview map. If not set, then all main map layers are used\n * instead.\n * @property {function(module:ol/MapEvent)} [render] Function called when the control\n * should be re-rendered. This is called in a `requestAnimationFrame` callback.\n * @property {Element|string} [target] Specify a target if you want the control\n * to be rendered outside of the map's viewport.\n * @property {string} [tipLabel='Overview map'] Text label to use for the button tip.\n * @property {module:ol/View} [view] Custom view for the overview map. If not provided,\n * a default view with an EPSG:3857 projection will be used.\n */\n\n\n/**\n * Create a new control with a map acting as an overview map for an other\n * defined map.\n * @constructor\n * @extends {module:ol/control/Control}\n * @param {module:ol/control/OverviewMap~Options=} opt_options OverviewMap options.\n * @api\n */\nconst OverviewMap = function(opt_options) {\n\n  const options = opt_options ? opt_options : {};\n\n  /**\n   * @type {boolean}\n   * @private\n   */\n  this.collapsed_ = options.collapsed !== undefined ? options.collapsed : true;\n\n  /**\n   * @private\n   * @type {boolean}\n   */\n  this.collapsible_ = options.collapsible !== undefined ?\n    options.collapsible : true;\n\n  if (!this.collapsible_) {\n    this.collapsed_ = false;\n  }\n\n  const className = options.className !== undefined ? options.className : 'ol-overviewmap';\n\n  const tipLabel = options.tipLabel !== undefined ? options.tipLabel : 'Overview map';\n\n  const collapseLabel = options.collapseLabel !== undefined ? options.collapseLabel : '\\u00AB';\n\n  if (typeof collapseLabel === 'string') {\n    /**\n     * @private\n     * @type {Element}\n     */\n    this.collapseLabel_ = document.createElement('span');\n    this.collapseLabel_.textContent = collapseLabel;\n  } else {\n    this.collapseLabel_ = collapseLabel;\n  }\n\n  const label = options.label !== undefined ? options.label : '\\u00BB';\n\n\n  if (typeof label === 'string') {\n    /**\n     * @private\n     * @type {Element}\n     */\n    this.label_ = document.createElement('span');\n    this.label_.textContent = label;\n  } else {\n    this.label_ = label;\n  }\n\n  const activeLabel = (this.collapsible_ && !this.collapsed_) ?\n    this.collapseLabel_ : this.label_;\n  const button = document.createElement('button');\n  button.setAttribute('type', 'button');\n  button.title = tipLabel;\n  button.appendChild(activeLabel);\n\n  listen(button, EventType.CLICK,\n    this.handleClick_, this);\n\n  /**\n   * @type {Element}\n   * @private\n   */\n  this.ovmapDiv_ = document.createElement('DIV');\n  this.ovmapDiv_.className = 'ol-overviewmap-map';\n\n  /**\n   * @type {module:ol/Map}\n   * @private\n   */\n  this.ovmap_ = new Map({\n    controls: new Collection(),\n    interactions: new Collection(),\n    view: options.view\n  });\n  const ovmap = this.ovmap_;\n\n  if (options.layers) {\n    options.layers.forEach(\n      /**\n       * @param {module:ol/layer/Layer} layer Layer.\n       */\n      (function(layer) {\n        ovmap.addLayer(layer);\n      }).bind(this));\n  }\n\n  const box = document.createElement('DIV');\n  box.className = 'ol-overviewmap-box';\n  box.style.boxSizing = 'border-box';\n\n  /**\n   * @type {module:ol/Overlay}\n   * @private\n   */\n  this.boxOverlay_ = new Overlay({\n    position: [0, 0],\n    positioning: OverlayPositioning.BOTTOM_LEFT,\n    element: box\n  });\n  this.ovmap_.addOverlay(this.boxOverlay_);\n\n  const cssClasses = className + ' ' + CLASS_UNSELECTABLE + ' ' + CLASS_CONTROL +\n      (this.collapsed_ && this.collapsible_ ? ' ' + CLASS_COLLAPSED : '') +\n      (this.collapsible_ ? '' : ' ol-uncollapsible');\n  const element = document.createElement('div');\n  element.className = cssClasses;\n  element.appendChild(this.ovmapDiv_);\n  element.appendChild(button);\n\n  Control.call(this, {\n    element: element,\n    render: options.render || render,\n    target: options.target\n  });\n\n  /* Interactive map */\n\n  const scope = this;\n\n  const overlay = this.boxOverlay_;\n  const overlayBox = this.boxOverlay_.getElement();\n\n  /* Functions definition */\n\n  const computeDesiredMousePosition = function(mousePosition) {\n    return {\n      clientX: mousePosition.clientX - (overlayBox.offsetWidth / 2),\n      clientY: mousePosition.clientY + (overlayBox.offsetHeight / 2)\n    };\n  };\n\n  const move = function(event) {\n    const coordinates = ovmap.getEventCoordinate(computeDesiredMousePosition(event));\n\n    overlay.setPosition(coordinates);\n  };\n\n  const endMoving = function(event) {\n    const coordinates = ovmap.getEventCoordinate(event);\n\n    scope.getMap().getView().setCenter(coordinates);\n\n    window.removeEventListener('mousemove', move);\n    window.removeEventListener('mouseup', endMoving);\n  };\n\n  /* Binding */\n\n  overlayBox.addEventListener('mousedown', function() {\n    window.addEventListener('mousemove', move);\n    window.addEventListener('mouseup', endMoving);\n  });\n};\n\ninherits(OverviewMap, Control);\n\n\n/**\n * @inheritDoc\n * @api\n */\nOverviewMap.prototype.setMap = function(map) {\n  const oldMap = this.getMap();\n  if (map === oldMap) {\n    return;\n  }\n  if (oldMap) {\n    const oldView = oldMap.getView();\n    if (oldView) {\n      this.unbindView_(oldView);\n    }\n    this.ovmap_.setTarget(null);\n  }\n  Control.prototype.setMap.call(this, map);\n\n  if (map) {\n    this.ovmap_.setTarget(this.ovmapDiv_);\n    this.listenerKeys.push(listen(\n      map, ObjectEventType.PROPERTYCHANGE,\n      this.handleMapPropertyChange_, this));\n\n    // TODO: to really support map switching, this would need to be reworked\n    if (this.ovmap_.getLayers().getLength() === 0) {\n      this.ovmap_.setLayerGroup(map.getLayerGroup());\n    }\n\n    const view = map.getView();\n    if (view) {\n      this.bindView_(view);\n      if (view.isDef()) {\n        this.ovmap_.updateSize();\n        this.resetExtent_();\n      }\n    }\n  }\n};\n\n\n/**\n * Handle map property changes.  This only deals with changes to the map's view.\n * @param {module:ol/Object~ObjectEvent} event The propertychange event.\n * @private\n */\nOverviewMap.prototype.handleMapPropertyChange_ = function(event) {\n  if (event.key === MapProperty.VIEW) {\n    const oldView = /** @type {module:ol/View} */ (event.oldValue);\n    if (oldView) {\n      this.unbindView_(oldView);\n    }\n    const newView = this.getMap().getView();\n    this.bindView_(newView);\n  }\n};\n\n\n/**\n * Register listeners for view property changes.\n * @param {module:ol/View} view The view.\n * @private\n */\nOverviewMap.prototype.bindView_ = function(view) {\n  listen(view,\n    getChangeEventType(ViewProperty.ROTATION),\n    this.handleRotationChanged_, this);\n};\n\n\n/**\n * Unregister listeners for view property changes.\n * @param {module:ol/View} view The view.\n * @private\n */\nOverviewMap.prototype.unbindView_ = function(view) {\n  unlisten(view,\n    getChangeEventType(ViewProperty.ROTATION),\n    this.handleRotationChanged_, this);\n};\n\n\n/**\n * Handle rotation changes to the main map.\n * TODO: This should rotate the extent rectrangle instead of the\n * overview map's view.\n * @private\n */\nOverviewMap.prototype.handleRotationChanged_ = function() {\n  this.ovmap_.getView().setRotation(this.getMap().getView().getRotation());\n};\n\n\n/**\n * Update the overview map element.\n * @param {module:ol/MapEvent} mapEvent Map event.\n * @this {module:ol/control/OverviewMap}\n * @api\n */\nexport function render(mapEvent) {\n  this.validateExtent_();\n  this.updateBox_();\n}\n\n\n/**\n * Reset the overview map extent if the box size (width or\n * height) is less than the size of the overview map size times minRatio\n * or is greater than the size of the overview size times maxRatio.\n *\n * If the map extent was not reset, the box size can fits in the defined\n * ratio sizes. This method then checks if is contained inside the overview\n * map current extent. If not, recenter the overview map to the current\n * main map center location.\n * @private\n */\nOverviewMap.prototype.validateExtent_ = function() {\n  const map = this.getMap();\n  const ovmap = this.ovmap_;\n\n  if (!map.isRendered() || !ovmap.isRendered()) {\n    return;\n  }\n\n  const mapSize = /** @type {module:ol/size~Size} */ (map.getSize());\n\n  const view = map.getView();\n  const extent = view.calculateExtent(mapSize);\n\n  const ovmapSize = /** @type {module:ol/size~Size} */ (ovmap.getSize());\n\n  const ovview = ovmap.getView();\n  const ovextent = ovview.calculateExtent(ovmapSize);\n\n  const topLeftPixel =\n      ovmap.getPixelFromCoordinate(getTopLeft(extent));\n  const bottomRightPixel =\n      ovmap.getPixelFromCoordinate(getBottomRight(extent));\n\n  const boxWidth = Math.abs(topLeftPixel[0] - bottomRightPixel[0]);\n  const boxHeight = Math.abs(topLeftPixel[1] - bottomRightPixel[1]);\n\n  const ovmapWidth = ovmapSize[0];\n  const ovmapHeight = ovmapSize[1];\n\n  if (boxWidth < ovmapWidth * MIN_RATIO ||\n      boxHeight < ovmapHeight * MIN_RATIO ||\n      boxWidth > ovmapWidth * MAX_RATIO ||\n      boxHeight > ovmapHeight * MAX_RATIO) {\n    this.resetExtent_();\n  } else if (!containsExtent(ovextent, extent)) {\n    this.recenter_();\n  }\n};\n\n\n/**\n * Reset the overview map extent to half calculated min and max ratio times\n * the extent of the main map.\n * @private\n */\nOverviewMap.prototype.resetExtent_ = function() {\n  if (MAX_RATIO === 0 || MIN_RATIO === 0) {\n    return;\n  }\n\n  const map = this.getMap();\n  const ovmap = this.ovmap_;\n\n  const mapSize = /** @type {module:ol/size~Size} */ (map.getSize());\n\n  const view = map.getView();\n  const extent = view.calculateExtent(mapSize);\n\n  const ovview = ovmap.getView();\n\n  // get how many times the current map overview could hold different\n  // box sizes using the min and max ratio, pick the step in the middle used\n  // to calculate the extent from the main map to set it to the overview map,\n  const steps = Math.log(\n    MAX_RATIO / MIN_RATIO) / Math.LN2;\n  const ratio = 1 / (Math.pow(2, steps / 2) * MIN_RATIO);\n  scaleFromCenter(extent, ratio);\n  ovview.fit(extent);\n};\n\n\n/**\n * Set the center of the overview map to the map center without changing its\n * resolution.\n * @private\n */\nOverviewMap.prototype.recenter_ = function() {\n  const map = this.getMap();\n  const ovmap = this.ovmap_;\n\n  const view = map.getView();\n\n  const ovview = ovmap.getView();\n\n  ovview.setCenter(view.getCenter());\n};\n\n\n/**\n * Update the box using the main map extent\n * @private\n */\nOverviewMap.prototype.updateBox_ = function() {\n  const map = this.getMap();\n  const ovmap = this.ovmap_;\n\n  if (!map.isRendered() || !ovmap.isRendered()) {\n    return;\n  }\n\n  const mapSize = /** @type {module:ol/size~Size} */ (map.getSize());\n\n  const view = map.getView();\n\n  const ovview = ovmap.getView();\n\n  const rotation = view.getRotation();\n\n  const overlay = this.boxOverlay_;\n  const box = this.boxOverlay_.getElement();\n  const extent = view.calculateExtent(mapSize);\n  const ovresolution = ovview.getResolution();\n  const bottomLeft = getBottomLeft(extent);\n  const topRight = getTopRight(extent);\n\n  // set position using bottom left coordinates\n  const rotateBottomLeft = this.calculateCoordinateRotate_(rotation, bottomLeft);\n  overlay.setPosition(rotateBottomLeft);\n\n  // set box size calculated from map extent size and overview map resolution\n  if (box) {\n    box.style.width = Math.abs((bottomLeft[0] - topRight[0]) / ovresolution) + 'px';\n    box.style.height = Math.abs((topRight[1] - bottomLeft[1]) / ovresolution) + 'px';\n  }\n};\n\n\n/**\n * @param {number} rotation Target rotation.\n * @param {module:ol/coordinate~Coordinate} coordinate Coordinate.\n * @return {module:ol/coordinate~Coordinate|undefined} Coordinate for rotation and center anchor.\n * @private\n */\nOverviewMap.prototype.calculateCoordinateRotate_ = function(\n  rotation, coordinate) {\n  let coordinateRotate;\n\n  const map = this.getMap();\n  const view = map.getView();\n\n  const currentCenter = view.getCenter();\n\n  if (currentCenter) {\n    coordinateRotate = [\n      coordinate[0] - currentCenter[0],\n      coordinate[1] - currentCenter[1]\n    ];\n    rotateCoordinate(coordinateRotate, rotation);\n    addCoordinate(coordinateRotate, currentCenter);\n  }\n  return coordinateRotate;\n};\n\n\n/**\n * @param {Event} event The event to handle\n * @private\n */\nOverviewMap.prototype.handleClick_ = function(event) {\n  event.preventDefault();\n  this.handleToggle_();\n};\n\n\n/**\n * @private\n */\nOverviewMap.prototype.handleToggle_ = function() {\n  this.element.classList.toggle(CLASS_COLLAPSED);\n  if (this.collapsed_) {\n    replaceNode(this.collapseLabel_, this.label_);\n  } else {\n    replaceNode(this.label_, this.collapseLabel_);\n  }\n  this.collapsed_ = !this.collapsed_;\n\n  // manage overview map if it had not been rendered before and control\n  // is expanded\n  const ovmap = this.ovmap_;\n  if (!this.collapsed_ && !ovmap.isRendered()) {\n    ovmap.updateSize();\n    this.resetExtent_();\n    listenOnce(ovmap, MapEventType.POSTRENDER,\n      function(event) {\n        this.updateBox_();\n      },\n      this);\n  }\n};\n\n\n/**\n * Return `true` if the overview map is collapsible, `false` otherwise.\n * @return {boolean} True if the widget is collapsible.\n * @api\n */\nOverviewMap.prototype.getCollapsible = function() {\n  return this.collapsible_;\n};\n\n\n/**\n * Set whether the overview map should be collapsible.\n * @param {boolean} collapsible True if the widget is collapsible.\n * @api\n */\nOverviewMap.prototype.setCollapsible = function(collapsible) {\n  if (this.collapsible_ === collapsible) {\n    return;\n  }\n  this.collapsible_ = collapsible;\n  this.element.classList.toggle('ol-uncollapsible');\n  if (!collapsible && this.collapsed_) {\n    this.handleToggle_();\n  }\n};\n\n\n/**\n * Collapse or expand the overview map according to the passed parameter. Will\n * not do anything if the overview map isn't collapsible or if the current\n * collapsed state is already the one requested.\n * @param {boolean} collapsed True if the widget is collapsed.\n * @api\n */\nOverviewMap.prototype.setCollapsed = function(collapsed) {\n  if (!this.collapsible_ || this.collapsed_ === collapsed) {\n    return;\n  }\n  this.handleToggle_();\n};\n\n\n/**\n * Determine if the overview map is collapsed.\n * @return {boolean} The overview map is collapsed.\n * @api\n */\nOverviewMap.prototype.getCollapsed = function() {\n  return this.collapsed_;\n};\n\n\n/**\n * Return the overview map.\n * @return {module:ol/PluggableMap} Overview map.\n * @api\n */\nOverviewMap.prototype.getOverviewMap = function() {\n  return this.ovmap_;\n};\nexport default OverviewMap;\n","/**\n * @module ol/source/Cluster\n */\n\nimport {getUid, inherits} from '../util.js';\nimport {assert} from '../asserts.js';\nimport Feature from '../Feature.js';\nimport {scale as scaleCoordinate, add as addCoordinate} from '../coordinate.js';\nimport {listen} from '../events.js';\nimport EventType from '../events/EventType.js';\nimport {buffer, createEmpty, createOrUpdateFromCoordinate} from '../extent.js';\nimport Point from '../geom/Point.js';\nimport VectorSource from '../source/Vector.js';\n\n/**\n * @typedef {Object} Options\n * @property {module:ol/source/Source~AttributionLike} [attributions] Attributions.\n * @property {number} [distance=20] Minimum distance in pixels between clusters.\n * @property {module:ol/extent~Extent} [extent] Extent.\n * @property {function(module:ol/Feature):module:ol/geom/Point} [geometryFunction]\n * Function that takes an {@link module:ol/Feature} as argument and returns an\n * {@link module:ol/geom/Point} as cluster calculation point for the feature. When a\n * feature should not be considered for clustering, the function should return\n * `null`. The default, which works when the underyling source contains point\n * features only, is\n * ```js\n * function(feature) {\n *   return feature.getGeometry();\n * }\n * ```\n * See {@link module:ol/geom/Polygon~Polygon#getInteriorPoint} for a way to get a cluster\n * calculation point for polygons.\n * @property {module:ol/proj~ProjectionLike} projection Projection.\n * @property {module:ol/source/Vector} source Source.\n * @property {boolean} [wrapX=true] Whether to wrap the world horizontally.\n */\n\n\n/**\n * @classdesc\n * Layer source to cluster vector data. Works out of the box with point\n * geometries. For other geometry types, or if not all geometries should be\n * considered for clustering, a custom `geometryFunction` can be defined.\n *\n * @constructor\n * @param {module:ol/source/Cluster~Options=} options Cluster options.\n * @extends {module:ol/source/Vector}\n * @api\n */\nconst Cluster = function(options) {\n  VectorSource.call(this, {\n    attributions: options.attributions,\n    extent: options.extent,\n    projection: options.projection,\n    wrapX: options.wrapX\n  });\n\n  /**\n   * @type {number|undefined}\n   * @protected\n   */\n  this.resolution = undefined;\n\n  /**\n   * @type {number}\n   * @protected\n   */\n  this.distance = options.distance !== undefined ? options.distance : 20;\n\n  /**\n   * @type {Array.<module:ol/Feature>}\n   * @protected\n   */\n  this.features = [];\n\n  /**\n   * @param {module:ol/Feature} feature Feature.\n   * @return {module:ol/geom/Point} Cluster calculation point.\n   * @protected\n   */\n  this.geometryFunction = options.geometryFunction || function(feature) {\n    const geometry = /** @type {module:ol/geom/Point} */ (feature.getGeometry());\n    assert(geometry instanceof Point,\n      10); // The default `geometryFunction` can only handle `module:ol/geom/Point~Point` geometries\n    return geometry;\n  };\n\n  /**\n   * @type {module:ol/source/Vector}\n   * @protected\n   */\n  this.source = options.source;\n\n  listen(this.source, EventType.CHANGE, this.refresh, this);\n};\n\ninherits(Cluster, VectorSource);\n\n\n/**\n * Get the distance in pixels between clusters.\n * @return {number} Distance.\n * @api\n */\nCluster.prototype.getDistance = function() {\n  return this.distance;\n};\n\n\n/**\n * Get a reference to the wrapped source.\n * @return {module:ol/source/Vector} Source.\n * @api\n */\nCluster.prototype.getSource = function() {\n  return this.source;\n};\n\n\n/**\n * @inheritDoc\n */\nCluster.prototype.loadFeatures = function(extent, resolution, projection) {\n  this.source.loadFeatures(extent, resolution, projection);\n  if (resolution !== this.resolution) {\n    this.clear();\n    this.resolution = resolution;\n    this.cluster();\n    this.addFeatures(this.features);\n  }\n};\n\n\n/**\n * Set the distance in pixels between clusters.\n * @param {number} distance The distance in pixels.\n * @api\n */\nCluster.prototype.setDistance = function(distance) {\n  this.distance = distance;\n  this.refresh();\n};\n\n\n/**\n * handle the source changing\n * @override\n */\nCluster.prototype.refresh = function() {\n  this.clear();\n  this.cluster();\n  this.addFeatures(this.features);\n  VectorSource.prototype.refresh.call(this);\n};\n\n\n/**\n * @protected\n */\nCluster.prototype.cluster = function() {\n  if (this.resolution === undefined) {\n    return;\n  }\n  this.features.length = 0;\n  const extent = createEmpty();\n  const mapDistance = this.distance * this.resolution;\n  const features = this.source.getFeatures();\n\n  /**\n   * @type {!Object.<string, boolean>}\n   */\n  const clustered = {};\n\n  for (let i = 0, ii = features.length; i < ii; i++) {\n    const feature = features[i];\n    if (!(getUid(feature).toString() in clustered)) {\n      const geometry = this.geometryFunction(feature);\n      if (geometry) {\n        const coordinates = geometry.getCoordinates();\n        createOrUpdateFromCoordinate(coordinates, extent);\n        buffer(extent, mapDistance, extent);\n\n        let neighbors = this.source.getFeaturesInExtent(extent);\n        neighbors = neighbors.filter(function(neighbor) {\n          const uid = getUid(neighbor).toString();\n          if (!(uid in clustered)) {\n            clustered[uid] = true;\n            return true;\n          } else {\n            return false;\n          }\n        });\n        this.features.push(this.createCluster(neighbors));\n      }\n    }\n  }\n};\n\n\n/**\n * @param {Array.<module:ol/Feature>} features Features\n * @return {module:ol/Feature} The cluster feature.\n * @protected\n */\nCluster.prototype.createCluster = function(features) {\n  const centroid = [0, 0];\n  for (let i = features.length - 1; i >= 0; --i) {\n    const geometry = this.geometryFunction(features[i]);\n    if (geometry) {\n      addCoordinate(centroid, geometry.getCoordinates());\n    } else {\n      features.splice(i, 1);\n    }\n  }\n  scaleCoordinate(centroid, 1 / features.length);\n\n  const cluster = new Feature(new Point(centroid));\n  cluster.set('features', features);\n  return cluster;\n};\nexport default Cluster;\n","/**\n * @module ol/control/Rotate\n */\n\nimport Control from '../control/Control.js';\nimport {CLASS_CONTROL, CLASS_HIDDEN, CLASS_UNSELECTABLE} from '../css.js';\nimport {easeOut} from '../easing.js';\nimport {listen} from '../events.js';\nimport EventType from '../events/EventType.js';\nimport {inherits} from '../util.js';\n\n\n/**\n * @typedef {Object} Options\n * @property {string} [className='ol-rotate'] CSS class name.\n * @property {string|Element} [label='⇧'] Text label to use for the rotate button.\n * Instead of text, also an element (e.g. a `span` element) can be used.\n * @property {string} [tipLabel='Reset rotation'] Text label to use for the rotate tip.\n * @property {number} [duration=250] Animation duration in milliseconds.\n * @property {boolean} [autoHide=true] Hide the control when rotation is 0.\n * @property {function(module:ol/MapEvent)} [render] Function called when the control should\n * be re-rendered. This is called in a `requestAnimationFrame` callback.\n * @property {function()} [resetNorth] Function called when the control is clicked.\n * This will override the default `resetNorth`.\n * @property {Element|string} [target] Specify a target if you want the control to be\n * rendered outside of the map's viewport.\n */\n\n\n/**\n * @classdesc\n * A button control to reset rotation to 0.\n * To style this control use css selector `.ol-rotate`. A `.ol-hidden` css\n * selector is added to the button when the rotation is 0.\n *\n * @constructor\n * @extends {module:ol/control/Control}\n * @param {module:ol/control/Rotate~Options=} opt_options Rotate options.\n * @api\n */\nconst Rotate = function(opt_options) {\n\n  const options = opt_options ? opt_options : {};\n\n  const className = options.className !== undefined ? options.className : 'ol-rotate';\n\n  const label = options.label !== undefined ? options.label : '\\u21E7';\n\n  /**\n   * @type {Element}\n   * @private\n   */\n  this.label_ = null;\n\n  if (typeof label === 'string') {\n    this.label_ = document.createElement('span');\n    this.label_.className = 'ol-compass';\n    this.label_.textContent = label;\n  } else {\n    this.label_ = label;\n    this.label_.classList.add('ol-compass');\n  }\n\n  const tipLabel = options.tipLabel ? options.tipLabel : 'Reset rotation';\n\n  const button = document.createElement('button');\n  button.className = className + '-reset';\n  button.setAttribute('type', 'button');\n  button.title = tipLabel;\n  button.appendChild(this.label_);\n\n  listen(button, EventType.CLICK,\n    Rotate.prototype.handleClick_, this);\n\n  const cssClasses = className + ' ' + CLASS_UNSELECTABLE + ' ' + CLASS_CONTROL;\n  const element = document.createElement('div');\n  element.className = cssClasses;\n  element.appendChild(button);\n\n  this.callResetNorth_ = options.resetNorth ? options.resetNorth : undefined;\n\n  Control.call(this, {\n    element: element,\n    render: options.render || render,\n    target: options.target\n  });\n\n  /**\n   * @type {number}\n   * @private\n   */\n  this.duration_ = options.duration !== undefined ? options.duration : 250;\n\n  /**\n   * @type {boolean}\n   * @private\n   */\n  this.autoHide_ = options.autoHide !== undefined ? options.autoHide : true;\n\n  /**\n   * @private\n   * @type {number|undefined}\n   */\n  this.rotation_ = undefined;\n\n  if (this.autoHide_) {\n    this.element.classList.add(CLASS_HIDDEN);\n  }\n\n};\n\ninherits(Rotate, Control);\n\n\n/**\n * @param {Event} event The event to handle\n * @private\n */\nRotate.prototype.handleClick_ = function(event) {\n  event.preventDefault();\n  if (this.callResetNorth_ !== undefined) {\n    this.callResetNorth_();\n  } else {\n    this.resetNorth_();\n  }\n};\n\n\n/**\n * @private\n */\nRotate.prototype.resetNorth_ = function() {\n  const map = this.getMap();\n  const view = map.getView();\n  if (!view) {\n    // the map does not have a view, so we can't act\n    // upon it\n    return;\n  }\n  if (view.getRotation() !== undefined) {\n    if (this.duration_ > 0) {\n      view.animate({\n        rotation: 0,\n        duration: this.duration_,\n        easing: easeOut\n      });\n    } else {\n      view.setRotation(0);\n    }\n  }\n};\n\n\n/**\n * Update the rotate control element.\n * @param {module:ol/MapEvent} mapEvent Map event.\n * @this {module:ol/control/Rotate}\n * @api\n */\nexport function render(mapEvent) {\n  const frameState = mapEvent.frameState;\n  if (!frameState) {\n    return;\n  }\n  const rotation = frameState.viewState.rotation;\n  if (rotation != this.rotation_) {\n    const transform = 'rotate(' + rotation + 'rad)';\n    if (this.autoHide_) {\n      const contains = this.element.classList.contains(CLASS_HIDDEN);\n      if (!contains && rotation === 0) {\n        this.element.classList.add(CLASS_HIDDEN);\n      } else if (contains && rotation !== 0) {\n        this.element.classList.remove(CLASS_HIDDEN);\n      }\n    }\n    this.label_.style.msTransform = transform;\n    this.label_.style.webkitTransform = transform;\n    this.label_.style.transform = transform;\n  }\n  this.rotation_ = rotation;\n}\n\nexport default Rotate;\n","/**\n * @module ol/control/Zoom\n */\nimport {inherits} from '../util.js';\nimport {listen} from '../events.js';\nimport EventType from '../events/EventType.js';\nimport Control from '../control/Control.js';\nimport {CLASS_CONTROL, CLASS_UNSELECTABLE} from '../css.js';\nimport {easeOut} from '../easing.js';\n\n\n/**\n * @typedef {Object} Options\n * @property {number} [duration=250] Animation duration in milliseconds.\n * @property {string} [className='ol-zoom'] CSS class name.\n * @property {string|Element} [zoomInLabel='+'] Text label to use for the zoom-in\n * button. Instead of text, also an element (e.g. a `span` element) can be used.\n * @property {string|Element} [zoomOutLabel='-'] Text label to use for the zoom-out button.\n * Instead of text, also an element (e.g. a `span` element) can be used.\n * @property {string} [zoomInTipLabel='Zoom in'] Text label to use for the button tip.\n * @property {string} [zoomOutTipLabel='Zoom out'] Text label to use for the button tip.\n * @property {number} [delta=1] The zoom delta applied on each click.\n * @property {Element|string} [target] Specify a target if you want the control to be\n * rendered outside of the map's viewport.\n */\n\n\n/**\n * @classdesc\n * A control with 2 buttons, one for zoom in and one for zoom out.\n * This control is one of the default controls of a map. To style this control\n * use css selectors `.ol-zoom-in` and `.ol-zoom-out`.\n *\n * @constructor\n * @extends {module:ol/control/Control}\n * @param {module:ol/control/Zoom~Options=} opt_options Zoom options.\n * @api\n */\nconst Zoom = function(opt_options) {\n\n  const options = opt_options ? opt_options : {};\n\n  const className = options.className !== undefined ? options.className : 'ol-zoom';\n\n  const delta = options.delta !== undefined ? options.delta : 1;\n\n  const zoomInLabel = options.zoomInLabel !== undefined ? options.zoomInLabel : '+';\n  const zoomOutLabel = options.zoomOutLabel !== undefined ? options.zoomOutLabel : '\\u2212';\n\n  const zoomInTipLabel = options.zoomInTipLabel !== undefined ?\n    options.zoomInTipLabel : 'Zoom in';\n  const zoomOutTipLabel = options.zoomOutTipLabel !== undefined ?\n    options.zoomOutTipLabel : 'Zoom out';\n\n  const inElement = document.createElement('button');\n  inElement.className = className + '-in';\n  inElement.setAttribute('type', 'button');\n  inElement.title = zoomInTipLabel;\n  inElement.appendChild(\n    typeof zoomInLabel === 'string' ? document.createTextNode(zoomInLabel) : zoomInLabel\n  );\n\n  listen(inElement, EventType.CLICK,\n    Zoom.prototype.handleClick_.bind(this, delta));\n\n  const outElement = document.createElement('button');\n  outElement.className = className + '-out';\n  outElement.setAttribute('type', 'button');\n  outElement.title = zoomOutTipLabel;\n  outElement.appendChild(\n    typeof zoomOutLabel === 'string' ? document.createTextNode(zoomOutLabel) : zoomOutLabel\n  );\n\n  listen(outElement, EventType.CLICK,\n    Zoom.prototype.handleClick_.bind(this, -delta));\n\n  const cssClasses = className + ' ' + CLASS_UNSELECTABLE + ' ' + CLASS_CONTROL;\n  const element = document.createElement('div');\n  element.className = cssClasses;\n  element.appendChild(inElement);\n  element.appendChild(outElement);\n\n  Control.call(this, {\n    element: element,\n    target: options.target\n  });\n\n  /**\n   * @type {number}\n   * @private\n   */\n  this.duration_ = options.duration !== undefined ? options.duration : 250;\n\n};\n\ninherits(Zoom, Control);\n\n\n/**\n * @param {number} delta Zoom delta.\n * @param {Event} event The event to handle\n * @private\n */\nZoom.prototype.handleClick_ = function(delta, event) {\n  event.preventDefault();\n  this.zoomByDelta_(delta);\n};\n\n\n/**\n * @param {number} delta Zoom delta.\n * @private\n */\nZoom.prototype.zoomByDelta_ = function(delta) {\n  const map = this.getMap();\n  const view = map.getView();\n  if (!view) {\n    // the map does not have a view, so we can't act\n    // upon it\n    return;\n  }\n  const currentResolution = view.getResolution();\n  if (currentResolution) {\n    const newResolution = view.constrainResolution(currentResolution, delta);\n    if (this.duration_ > 0) {\n      if (view.getAnimating()) {\n        view.cancelAnimations();\n      }\n      view.animate({\n        resolution: newResolution,\n        duration: this.duration_,\n        easing: easeOut\n      });\n    } else {\n      view.setResolution(newResolution);\n    }\n  }\n};\nexport default Zoom;\n","/**\n * @module ol/control/util\n */\nimport Collection from '../Collection.js';\nimport Attribution from './Attribution.js';\nimport Rotate from './Rotate.js';\nimport Zoom from './Zoom.js';\n\n\n/**\n * @typedef {Object} DefaultsOptions\n * @property {boolean} [attribution=true] Include\n * {@link module:ol/control/Attribution~Attribution}.\n * @property {module:ol/control/Attribution~Options} [attributionOptions]\n * Options for {@link module:ol/control/Attribution~Attribution}.\n * @property {boolean} [rotate=true] Include\n * {@link module:ol/control/Rotate~Rotate}.\n * @property {module:ol/control/Rotate~Options} [rotateOptions] Options\n * for {@link module:ol/control/Rotate~Rotate}.\n * @property {boolean} [zoom] Include {@link module:ol/control/Zoom~Zoom}.\n * @property {module:ol/control/Zoom~Options} [zoomOptions] Options for\n * {@link module:ol/control/Zoom~Zoom}.\n * @api\n */\n\n\n/**\n * Set of controls included in maps by default. Unless configured otherwise,\n * this returns a collection containing an instance of each of the following\n * controls:\n * * {@link module:ol/control/Zoom~Zoom}\n * * {@link module:ol/control/Rotate~Rotate}\n * * {@link module:ol/control/Attribution~Attribution}\n *\n * @param {module:ol/control/util~DefaultsOptions=} opt_options\n * Defaults options.\n * @return {module:ol/Collection.<module:ol/control/Control>}\n * Controls.\n * @function module:ol/control.defaults\n * @api\n */\nexport function defaults(opt_options) {\n\n  const options = opt_options ? opt_options : {};\n\n  const controls = new Collection();\n\n  const zoomControl = options.zoom !== undefined ? options.zoom : true;\n  if (zoomControl) {\n    controls.push(new Zoom(options.zoomOptions));\n  }\n\n  const rotateControl = options.rotate !== undefined ? options.rotate : true;\n  if (rotateControl) {\n    controls.push(new Rotate(options.rotateOptions));\n  }\n\n  const attributionControl = options.attribution !== undefined ?\n    options.attribution : true;\n  if (attributionControl) {\n    controls.push(new Attribution(options.attributionOptions));\n  }\n\n  return controls;\n}\n","exports.read = function (buffer, offset, isLE, mLen, nBytes) {\n  var e, m\n  var eLen = (nBytes * 8) - mLen - 1\n  var eMax = (1 << eLen) - 1\n  var eBias = eMax >> 1\n  var nBits = -7\n  var i = isLE ? (nBytes - 1) : 0\n  var d = isLE ? -1 : 1\n  var s = buffer[offset + i]\n\n  i += d\n\n  e = s & ((1 << (-nBits)) - 1)\n  s >>= (-nBits)\n  nBits += eLen\n  for (; nBits > 0; e = (e * 256) + buffer[offset + i], i += d, nBits -= 8) {}\n\n  m = e & ((1 << (-nBits)) - 1)\n  e >>= (-nBits)\n  nBits += mLen\n  for (; nBits > 0; m = (m * 256) + buffer[offset + i], i += d, nBits -= 8) {}\n\n  if (e === 0) {\n    e = 1 - eBias\n  } else if (e === eMax) {\n    return m ? NaN : ((s ? -1 : 1) * Infinity)\n  } else {\n    m = m + Math.pow(2, mLen)\n    e = e - eBias\n  }\n  return (s ? -1 : 1) * m * Math.pow(2, e - mLen)\n}\n\nexports.write = function (buffer, value, offset, isLE, mLen, nBytes) {\n  var e, m, c\n  var eLen = (nBytes * 8) - mLen - 1\n  var eMax = (1 << eLen) - 1\n  var eBias = eMax >> 1\n  var rt = (mLen === 23 ? Math.pow(2, -24) - Math.pow(2, -77) : 0)\n  var i = isLE ? 0 : (nBytes - 1)\n  var d = isLE ? 1 : -1\n  var s = value < 0 || (value === 0 && 1 / value < 0) ? 1 : 0\n\n  value = Math.abs(value)\n\n  if (isNaN(value) || value === Infinity) {\n    m = isNaN(value) ? 1 : 0\n    e = eMax\n  } else {\n    e = Math.floor(Math.log(value) / Math.LN2)\n    if (value * (c = Math.pow(2, -e)) < 1) {\n      e--\n      c *= 2\n    }\n    if (e + eBias >= 1) {\n      value += rt / c\n    } else {\n      value += rt * Math.pow(2, 1 - eBias)\n    }\n    if (value * c >= 2) {\n      e++\n      c /= 2\n    }\n\n    if (e + eBias >= eMax) {\n      m = 0\n      e = eMax\n    } else if (e + eBias >= 1) {\n      m = ((value * c) - 1) * Math.pow(2, mLen)\n      e = e + eBias\n    } else {\n      m = value * Math.pow(2, eBias - 1) * Math.pow(2, mLen)\n      e = 0\n    }\n  }\n\n  for (; mLen >= 8; buffer[offset + i] = m & 0xff, i += d, m /= 256, mLen -= 8) {}\n\n  e = (e << mLen) | m\n  eLen += mLen\n  for (; eLen > 0; buffer[offset + i] = e & 0xff, i += d, e /= 256, eLen -= 8) {}\n\n  buffer[offset + i - d] |= s * 128\n}\n","var hasImageData = true;\ntry {\n  new ImageData(10, 10);\n} catch (_) {\n  hasImageData = false;\n}\n\nvar context = document.createElement('canvas').getContext('2d');\n\nfunction newImageData(data, width, height) {\n  if (hasImageData) {\n    return new ImageData(data, width, height);\n  } else {\n    var imageData = context.createImageData(width, height);\n    imageData.data.set(data);\n    return imageData;\n  }\n}\n\nexports.newImageData = newImageData;\n","var newImageData = require('./util').newImageData;\n\n/**\n * Create a function for running operations.  This function is serialized for\n * use in a worker.\n * @param {function(Array, Object):*} operation The operation.\n * @return {function(Object):ArrayBuffer} A function that takes an object with\n * buffers, meta, imageOps, width, and height properties and returns an array\n * buffer.\n */\nfunction createMinion(operation) {\n  var workerHasImageData = true;\n  try {\n    new ImageData(10, 10);\n  } catch (_) {\n    workerHasImageData = false;\n  }\n\n  function newWorkerImageData(data, width, height) {\n    if (workerHasImageData) {\n      return new ImageData(data, width, height);\n    } else {\n      return {data: data, width: width, height: height};\n    }\n  }\n\n  return function(data) {\n    // bracket notation for minification support\n    var buffers = data['buffers'];\n    var meta = data['meta'];\n    var imageOps = data['imageOps'];\n    var width = data['width'];\n    var height = data['height'];\n\n    var numBuffers = buffers.length;\n    var numBytes = buffers[0].byteLength;\n    var output, b;\n\n    if (imageOps) {\n      var images = new Array(numBuffers);\n      for (b = 0; b < numBuffers; ++b) {\n        images[b] = newWorkerImageData(\n            new Uint8ClampedArray(buffers[b]), width, height);\n      }\n      output = operation(images, meta).data;\n    } else {\n      output = new Uint8ClampedArray(numBytes);\n      var arrays = new Array(numBuffers);\n      var pixels = new Array(numBuffers);\n      for (b = 0; b < numBuffers; ++b) {\n        arrays[b] = new Uint8ClampedArray(buffers[b]);\n        pixels[b] = [0, 0, 0, 0];\n      }\n      for (var i = 0; i < numBytes; i += 4) {\n        for (var j = 0; j < numBuffers; ++j) {\n          var array = arrays[j];\n          pixels[j][0] = array[i];\n          pixels[j][1] = array[i + 1];\n          pixels[j][2] = array[i + 2];\n          pixels[j][3] = array[i + 3];\n        }\n        var pixel = operation(pixels, meta);\n        output[i] = pixel[0];\n        output[i + 1] = pixel[1];\n        output[i + 2] = pixel[2];\n        output[i + 3] = pixel[3];\n      }\n    }\n    return output.buffer;\n  };\n}\n\n/**\n * Create a worker for running operations.\n * @param {Object} config Configuration.\n * @param {function(MessageEvent)} onMessage Called with a message event.\n * @return {Worker} The worker.\n */\nfunction createWorker(config, onMessage) {\n  var lib = Object.keys(config.lib || {}).map(function(name) {\n    return 'var ' + name + ' = ' + config.lib[name].toString() + ';';\n  });\n\n  var lines = lib.concat([\n    'var __minion__ = (' + createMinion.toString() + ')(', config.operation.toString(), ');',\n    'self.addEventListener(\"message\", function(event) {',\n    '  var buffer = __minion__(event.data);',\n    '  self.postMessage({buffer: buffer, meta: event.data.meta}, [buffer]);',\n    '});'\n  ]);\n\n  var blob = new Blob(lines, {type: 'text/javascript'});\n  var source = URL.createObjectURL(blob);\n  var worker = new Worker(source);\n  worker.addEventListener('message', onMessage);\n  return worker;\n}\n\n/**\n * Create a faux worker for running operations.\n * @param {Object} config Configuration.\n * @param {function(MessageEvent)} onMessage Called with a message event.\n * @return {Object} The faux worker.\n */\nfunction createFauxWorker(config, onMessage) {\n  var minion = createMinion(config.operation);\n  return {\n    postMessage: function(data) {\n      setTimeout(function() {\n        onMessage({'data': {'buffer': minion(data), 'meta': data['meta']}});\n      }, 0);\n    }\n  };\n}\n\n/**\n * A processor runs pixel or image operations in workers.\n * @param {Object} config Configuration.\n */\nfunction Processor(config) {\n  this._imageOps = !!config.imageOps;\n  var threads;\n  if (config.threads === 0) {\n    threads = 0;\n  } else if (this._imageOps) {\n    threads = 1;\n  } else {\n    threads = config.threads || 1;\n  }\n  var workers = [];\n  if (threads) {\n    for (var i = 0; i < threads; ++i) {\n      workers[i] = createWorker(config, this._onWorkerMessage.bind(this, i));\n    }\n  } else {\n    workers[0] = createFauxWorker(config, this._onWorkerMessage.bind(this, 0));\n  }\n  this._workers = workers;\n  this._queue = [];\n  this._maxQueueLength = config.queue || Infinity;\n  this._running = 0;\n  this._dataLookup = {};\n  this._job = null;\n}\n\n/**\n * Run operation on input data.\n * @param {Array.<Array|ImageData>} inputs Array of pixels or image data\n *     (depending on the operation type).\n * @param {Object} meta A user data object.  This is passed to all operations\n *     and must be serializable.\n * @param {function(Error, ImageData, Object)} callback Called when work\n *     completes.  The first argument is any error.  The second is the ImageData\n *     generated by operations.  The third is the user data object.\n */\nProcessor.prototype.process = function(inputs, meta, callback) {\n  this._enqueue({\n    inputs: inputs,\n    meta: meta,\n    callback: callback\n  });\n  this._dispatch();\n};\n\n/**\n * Stop responding to any completed work and destroy the processor.\n */\nProcessor.prototype.destroy = function() {\n  for (var key in this) {\n    this[key] = null;\n  }\n  this._destroyed = true;\n};\n\n/**\n * Add a job to the queue.\n * @param {Object} job The job.\n */\nProcessor.prototype._enqueue = function(job) {\n  this._queue.push(job);\n  while (this._queue.length > this._maxQueueLength) {\n    this._queue.shift().callback(null, null);\n  }\n};\n\n/**\n * Dispatch a job.\n */\nProcessor.prototype._dispatch = function() {\n  if (this._running === 0 && this._queue.length > 0) {\n    var job = this._job = this._queue.shift();\n    var width = job.inputs[0].width;\n    var height = job.inputs[0].height;\n    var buffers = job.inputs.map(function(input) {\n      return input.data.buffer;\n    });\n    var threads = this._workers.length;\n    this._running = threads;\n    if (threads === 1) {\n      this._workers[0].postMessage({\n        'buffers': buffers,\n        'meta': job.meta,\n        'imageOps': this._imageOps,\n        'width': width,\n        'height': height\n      }, buffers);\n    } else {\n      var length = job.inputs[0].data.length;\n      var segmentLength = 4 * Math.ceil(length / 4 / threads);\n      for (var i = 0; i < threads; ++i) {\n        var offset = i * segmentLength;\n        var slices = [];\n        for (var j = 0, jj = buffers.length; j < jj; ++j) {\n          slices.push(buffers[i].slice(offset, offset + segmentLength));\n        }\n        this._workers[i].postMessage({\n          'buffers': slices,\n          'meta': job.meta,\n          'imageOps': this._imageOps,\n          'width': width,\n          'height': height\n        }, slices);\n      }\n    }\n  }\n};\n\n/**\n * Handle messages from the worker.\n * @param {number} index The worker index.\n * @param {MessageEvent} event The message event.\n */\nProcessor.prototype._onWorkerMessage = function(index, event) {\n  if (this._destroyed) {\n    return;\n  }\n  this._dataLookup[index] = event.data;\n  --this._running;\n  if (this._running === 0) {\n    this._resolveJob();\n  }\n};\n\n/**\n * Resolve a job.  If there are no more worker threads, the processor callback\n * will be called.\n */\nProcessor.prototype._resolveJob = function() {\n  var job = this._job;\n  var threads = this._workers.length;\n  var data, meta;\n  if (threads === 1) {\n    data = new Uint8ClampedArray(this._dataLookup[0]['buffer']);\n    meta = this._dataLookup[0]['meta'];\n  } else {\n    var length = job.inputs[0].data.length;\n    data = new Uint8ClampedArray(length);\n    meta = new Array(length);\n    var segmentLength = 4 * Math.ceil(length / 4 / threads);\n    for (var i = 0; i < threads; ++i) {\n      var buffer = this._dataLookup[i]['buffer'];\n      var offset = i * segmentLength;\n      data.set(new Uint8ClampedArray(buffer), offset);\n      meta[i] = this._dataLookup[i]['meta'];\n    }\n  }\n  this._job = null;\n  this._dataLookup = {};\n  job.callback(null,\n      newImageData(data, job.inputs[0].width, job.inputs[0].height), meta);\n  this._dispatch();\n};\n\nmodule.exports = Processor;\n","/**\n * @module ol/style/Circle\n */\nimport {inherits} from '../util.js';\nimport RegularShape from '../style/RegularShape.js';\n\n\n/**\n * @typedef {Object} Options\n * @property {module:ol/style/Fill} [fill] Fill style.\n * @property {number} radius Circle radius.\n * @property {boolean} [snapToPixel=true] If `true` integral numbers of pixels are used as the X and Y pixel coordinate\n * when drawing the circle in the output canvas. If `false` fractional numbers may be used. Using `true` allows for\n * \"sharp\" rendering (no blur), while using `false` allows for \"accurate\" rendering. Note that accuracy is important if\n * the circle's position is animated. Without it, the circle may jitter noticeably.\n * @property {module:ol/style/Stroke} [stroke] Stroke style.\n * @property {module:ol/style/AtlasManager} [atlasManager] The atlas manager to use for this circle.\n * When using WebGL it is recommended to use an atlas manager to avoid texture switching. If an atlas manager is given,\n * the circle is added to an atlas. By default no atlas manager is used.\n */\n\n\n/**\n * @classdesc\n * Set circle style for vector features.\n *\n * @constructor\n * @param {module:ol/style/Circle~Options=} opt_options Options.\n * @extends {module:ol/style/RegularShape}\n * @api\n */\nconst CircleStyle = function(opt_options) {\n\n  const options = opt_options || {};\n\n  RegularShape.call(this, {\n    points: Infinity,\n    fill: options.fill,\n    radius: options.radius,\n    snapToPixel: options.snapToPixel,\n    stroke: options.stroke,\n    atlasManager: options.atlasManager\n  });\n\n};\n\ninherits(CircleStyle, RegularShape);\n\n\n/**\n * Clones the style.  If an atlasmanager was provided to the original style it will be used in the cloned style, too.\n * @return {module:ol/style/Circle} The cloned style.\n * @override\n * @api\n */\nCircleStyle.prototype.clone = function() {\n  const style = new CircleStyle({\n    fill: this.getFill() ? this.getFill().clone() : undefined,\n    stroke: this.getStroke() ? this.getStroke().clone() : undefined,\n    radius: this.getRadius(),\n    snapToPixel: this.getSnapToPixel(),\n    atlasManager: this.atlasManager_\n  });\n  style.setOpacity(this.getOpacity());\n  style.setScale(this.getScale());\n  return style;\n};\n\n\n/**\n * Set the circle radius.\n *\n * @param {number} radius Circle radius.\n * @api\n */\nCircleStyle.prototype.setRadius = function(radius) {\n  this.radius_ = radius;\n  this.render_(this.atlasManager_);\n};\nexport default CircleStyle;\n","(function (global, factory) {\n\ttypeof exports === 'object' && typeof module !== 'undefined' ? module.exports = factory() :\n\ttypeof define === 'function' && define.amd ? define(factory) :\n\t(global.quickselect = factory());\n}(this, (function () { 'use strict';\n\nfunction quickselect(arr, k, left, right, compare) {\n    quickselectStep(arr, k, left || 0, right || (arr.length - 1), compare || defaultCompare);\n}\n\nfunction quickselectStep(arr, k, left, right, compare) {\n\n    while (right > left) {\n        if (right - left > 600) {\n            var n = right - left + 1;\n            var m = k - left + 1;\n            var z = Math.log(n);\n            var s = 0.5 * Math.exp(2 * z / 3);\n            var sd = 0.5 * Math.sqrt(z * s * (n - s) / n) * (m - n / 2 < 0 ? -1 : 1);\n            var newLeft = Math.max(left, Math.floor(k - m * s / n + sd));\n            var newRight = Math.min(right, Math.floor(k + (n - m) * s / n + sd));\n            quickselectStep(arr, k, newLeft, newRight, compare);\n        }\n\n        var t = arr[k];\n        var i = left;\n        var j = right;\n\n        swap(arr, left, k);\n        if (compare(arr[right], t) > 0) swap(arr, left, right);\n\n        while (i < j) {\n            swap(arr, i, j);\n            i++;\n            j--;\n            while (compare(arr[i], t) < 0) i++;\n            while (compare(arr[j], t) > 0) j--;\n        }\n\n        if (compare(arr[left], t) === 0) swap(arr, left, j);\n        else {\n            j++;\n            swap(arr, j, right);\n        }\n\n        if (j <= k) left = j + 1;\n        if (k <= j) right = j - 1;\n    }\n}\n\nfunction swap(arr, i, j) {\n    var tmp = arr[i];\n    arr[i] = arr[j];\n    arr[j] = tmp;\n}\n\nfunction defaultCompare(a, b) {\n    return a < b ? -1 : a > b ? 1 : 0;\n}\n\nreturn quickselect;\n\n})));\n"],"sourceRoot":""}