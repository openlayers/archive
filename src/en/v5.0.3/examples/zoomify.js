(window.webpackJsonp=window.webpackJsonp||[]).push([[2],{241:function(e,i,t){"use strict";t.r(i);var r=t(3),n=t(2),o=t(5),a=t(140),s=t(0),c=t(181),l=t(17),u=t(84),h=t(22),p=t(25),g=t(1),f=t(58),v=t(65),m=t(106),z="default",d="truncated",b=function(e,i,t,r,n,o,a){c.a.call(this,i,t,r,n,o,a),this.zoomifyImage_=null,this.tileSize_=Object(f.d)(e.getTileSize(i[0]))};Object(s.c)(b,c.a),b.prototype.getImage=function(){if(this.zoomifyImage_)return this.zoomifyImage_;var e=c.a.prototype.getImage.call(this);if(this.state==l.a.LOADED){var i=this.tileSize_;if(e.width==i[0]&&e.height==i[1])return this.zoomifyImage_=e,e;var t=Object(p.a)(i[0],i[1]);return t.drawImage(e,0,0),this.zoomifyImage_=t.canvas,t.canvas}return e};var w=function(e){var i=e||{},t=i.size,r=void 0!==i.tierSizeCalculation?i.tierSizeCalculation:z,n=t[0],o=t[1],s=i.extent||[0,-t[1],t[0],0],c=[],l=i.tileSize||a.b,p=l;switch(r){case z:for(;n>p||o>p;)c.push([Math.ceil(n/p),Math.ceil(o/p)]),p+=p;break;case d:for(var f=n,w=o;f>p||w>p;)c.push([Math.ceil(f/p),Math.ceil(w/p)]),f>>=1,w>>=1;break;default:Object(h.a)(!1,53)}c.push([1,1]),c.reverse();for(var O=[1],y=[0],I=1,j=c.length;I<j;I++)O.push(1<<I),y.push(c[I-1][0]*c[I-1][1]+y[I-1]);O.reverse();var S=new m.a({tileSize:l,extent:s,origin:Object(g.C)(s),resolutions:O}),T=i.url;T&&-1==T.indexOf("{TileGroup}")&&-1==T.indexOf("{tileIndex}")&&(T+="{TileGroup}/{z}-{x}-{y}.jpg");var x=Object(u.c)(T);var D=Object(u.b)(x.map(function(e){return function(i,t,r){if(i){var n=i[0],o=i[1],a=-i[2]-1,s=o+a*c[n][0],l=S.getTileSize(n),u={z:n,x:o,y:a,tileIndex:s,TileGroup:"TileGroup"+((s+y[n])/l|0)};return e.replace(/\{(\w+?)\}/g,function(e,i){return u[i]})}}})),_=b.bind(null,S);v.a.call(this,{attributions:i.attributions,cacheSize:i.cacheSize,crossOrigin:i.crossOrigin,projection:i.projection,reprojectionErrorThreshold:i.reprojectionErrorThreshold,tileClass:_,tileGrid:S,tileUrlFunction:D,transition:i.transition})};Object(s.c)(w,v.a);var O=w,y="http://vips.vtech.fr/cgi-bin/iipsrv.fcgi?zoomify=/mnt/MD1/AD00/plan_CHU-4HD-01/FOND.TIF/",I=new o.a({source:new O({url:y,size:[9911,6100],crossOrigin:"anonymous"})}),j=[0,-6100,9911,0];new r.a({layers:[I],target:"map",view:new n.a({resolutions:I.getSource().getTileGrid().getResolutions(),extent:j})}).getView().fit(j),document.getElementById("zoomifyProtocol").addEventListener("change",function(e){var i=e.currentTarget.value;"iip"===i?I.setSource(new O({url:"http://vips.vtech.fr/cgi-bin/iipsrv.fcgi?FIF=/mnt/MD1/AD00/plan_CHU-4HD-01/FOND.TIF&JTL={z},{tileIndex}",size:[9911,6100],crossOrigin:"anonymous"})):"zoomify"===i&&I.setSource(new O({url:y,size:[9911,6100],crossOrigin:"anonymous"}))})}},[[241,0]]]);
//# sourceMappingURL=zoomify.js.map