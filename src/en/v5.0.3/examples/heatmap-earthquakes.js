(window.webpackJsonp=window.webpackJsonp||[]).push([[117],{231:function(t,e,a){"use strict";a.r(e);var i=a(3),n=a(2),r=a(105),s=a(9),h=a(0),d=a(30),o=a(25),l=a(29),u=a(18),c=a(14),g=a(80),f=a(162),p=a(73),w="blur",y="gradient",b="radius",_=["#00f","#0ff","#0f0","#ff0","#f00"],v=function(t){var e=t||{},a=Object(c.a)({},e);delete a.gradient,delete a.radius,delete a.blur,delete a.shadow,delete a.weight,l.a.call(this,a),this.gradient_=null,this.shadow_=void 0!==e.shadow?e.shadow:250,this.circleImage_=void 0,this.styleCache_=null,Object(s.a)(this,Object(d.b)(y),this.handleGradientChanged_,this),this.setGradient(e.gradient?e.gradient:_),this.setBlur(void 0!==e.blur?e.blur:15),this.setRadius(void 0!==e.radius?e.radius:8),Object(s.a)(this,Object(d.b)(w),this.handleStyleChanged_,this),Object(s.a)(this,Object(d.b)(b),this.handleStyleChanged_,this),this.handleStyleChanged_();var i,n=e.weight?e.weight:"weight";i="string"==typeof n?function(t){return t.get(n)}:n,this.setStyle(function(t,e){var a=i(t),n=void 0!==a?Object(u.a)(a,0,1):1,r=255*n|0,s=this.styleCache_[r];return s||(s=[new p.c({image:new f.a({opacity:n,src:this.circleImage_})})],this.styleCache_[r]=s),s}.bind(this)),this.setRenderOrder(null),Object(s.a)(this,g.a.RENDER,this.handleRender_,this)};Object(h.c)(v,l.a);v.prototype.createCircle_=function(){var t=this.getRadius(),e=this.getBlur(),a=t+e+1,i=2*a,n=Object(o.a)(i,i);n.shadowOffsetX=n.shadowOffsetY=this.shadow_,n.shadowBlur=e,n.shadowColor="#000",n.beginPath();var r=a-this.shadow_;return n.arc(r,r,t,0,2*Math.PI,!0),n.fill(),n.canvas.toDataURL()},v.prototype.getBlur=function(){return this.get(w)},v.prototype.getGradient=function(){return this.get(y)},v.prototype.getRadius=function(){return this.get(b)},v.prototype.handleGradientChanged_=function(){this.gradient_=function(t){for(var e=Object(o.a)(1,256),a=e.createLinearGradient(0,0,1,256),i=1/(t.length-1),n=0,r=t.length;n<r;++n)a.addColorStop(n*i,t[n]);return e.fillStyle=a,e.fillRect(0,0,1,256),e.getImageData(0,0,1,256).data}(this.getGradient())},v.prototype.handleStyleChanged_=function(){this.circleImage_=this.createCircle_(),this.styleCache_=new Array(256),this.changed()},v.prototype.handleRender_=function(t){for(var e=t.context,a=e.canvas,i=e.getImageData(0,0,a.width,a.height),n=i.data,r=0,s=n.length;r<s;r+=4){var h=4*n[r+3];h&&(n[r]=this.gradient_[h],n[r+1]=this.gradient_[h+1],n[r+2]=this.gradient_[h+2])}e.putImageData(i,0,0)},v.prototype.setBlur=function(t){this.set(w,t)},v.prototype.setGradient=function(t){this.set(y,t)},v.prototype.setRadius=function(t){this.set(b,t)};var m=v,O=a(5),C=a(69),I=a(13),j=document.getElementById("blur"),R=document.getElementById("radius"),S=new m({source:new I.b({url:"data/kml/2012_Earthquakes_Mag5.kml",format:new r.a({extractStyles:!1})}),blur:parseInt(j.value,10),radius:parseInt(R.value,10)});S.getSource().on("addfeature",function(t){var e=t.feature.get("name"),a=parseFloat(e.substr(2));t.feature.set("weight",a-5)});var B=new O.a({source:new C.a({layer:"toner"})});new i.a({layers:[B,S],target:"map",view:new n.a({center:[0,0],zoom:2})});j.addEventListener("input",function(){S.setBlur(parseInt(j.value,10))}),R.addEventListener("input",function(){S.setRadius(parseInt(R.value,10))})}},[[231,0]]]);
//# sourceMappingURL=heatmap-earthquakes.js.map