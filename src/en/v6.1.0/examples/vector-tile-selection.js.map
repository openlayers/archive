{"version":3,"sources":["webpack:///./vector-tile-selection.js"],"names":["selection","vtLayer","declutter","source","format","url","style","feature","const","selected","get","stroke","color","width","fill","map","layers","target","view","center","zoom","selectElement","document","getElementById","on","event","getFeatures","pixel","then","features","length","setStyle","getStyle","fid","value"],"mappings":"4FAAA,2EAQIA,EAAY,GAIVC,EAAU,IAAI,IAAgB,CAClCC,WAAW,EACXC,OAAQ,IAAI,IAAiB,CAC3BC,OAAQ,IAAI,IACZC,IAAK,wHAGPC,MAAO,SAASC,GACdC,IAAMC,IAAaT,EAAUO,EAAQG,IAV1B,WAWX,OAAO,IAAI,IAAM,CACfC,OAAQ,IAAI,IAAO,CACjBC,MAAOH,EAAW,sBAAwB,OAC1CI,MAAOJ,EAAW,EAAI,IAExBK,KAAM,IAAI,IAAK,CACbF,MAAOH,EAAW,sBAAwB,4BAM5CM,EAAM,IAAI,IAAI,CAClBC,OAAQ,CACNf,GAEFgB,OAAQ,MACRC,KAAM,IAAI,IAAK,CACbC,OAAQ,CAAC,EAAG,GACZC,KAAM,MAIJC,EAAgBC,SAASC,eAAe,QAE9CR,EAAIS,GAAG,QAAS,SAASC,GACvBxB,EAAQyB,YAAYD,EAAME,OAAOC,KAAK,SAASC,GAC7C,IAAKA,EAASC,OAIZ,OAHA9B,EAAY,QAEZC,EAAQ8B,SAAS9B,EAAQ+B,YAG3BxB,IAAMD,EAAUsB,EAAS,GACzB,GAAKtB,EAAL,CAGAC,IAAMyB,EAAM1B,EAAQG,IAhDT,UAkDiB,iBAAxBW,EAAca,QAChBlC,EAAY,IAGdA,EAAUiC,GAAO1B,EAGjBN,EAAQ8B,SAAS9B,EAAQ+B,mB","file":"vector-tile-selection.js","sourcesContent":["import Map from '../src/ol/Map.js';\nimport View from '../src/ol/View.js';\nimport MVT from '../src/ol/format/MVT.js';\nimport VectorTileLayer from '../src/ol/layer/VectorTile.js';\nimport VectorTileSource from '../src/ol/source/VectorTile.js';\nimport {Fill, Stroke, Style} from '../src/ol/style.js';\n\n// lookup for selection objects\nlet selection = {};\n// feature property to act as identifier\nconst idProp = 'iso_a3';\n\nconst vtLayer = new VectorTileLayer({\n  declutter: true,\n  source: new VectorTileSource({\n    format: new MVT(),\n    url: 'https://ahocevar.com/geoserver/gwc/service/tms/1.0.0/' +\n      'ne:ne_10m_admin_0_countries@EPSG%3A900913@pbf/{z}/{x}/{-y}.pbf'\n  }),\n  style: function(feature) {\n    const selected = !!selection[feature.get(idProp)];\n    return new Style({\n      stroke: new Stroke({\n        color: selected ? 'rgba(200,20,20,0.8)' : 'gray',\n        width: selected ? 2 : 1\n      }),\n      fill: new Fill({\n        color: selected ? 'rgba(200,20,20,0.2)' : 'rgba(20,20,20,0.9)'\n      })\n    });\n  }\n});\n\nconst map = new Map({\n  layers: [\n    vtLayer\n  ],\n  target: 'map',\n  view: new View({\n    center: [0, 0],\n    zoom: 2\n  })\n});\n\nconst selectElement = document.getElementById('type');\n\nmap.on('click', function(event) {\n  vtLayer.getFeatures(event.pixel).then(function(features) {\n    if (!features.length) {\n      selection = {};\n      // force redraw of layer style\n      vtLayer.setStyle(vtLayer.getStyle());\n      return;\n    }\n    const feature = features[0];\n    if (!feature) {\n      return;\n    }\n    const fid = feature.get(idProp);\n\n    if (selectElement.value === 'singleselect') {\n      selection = {};\n    }\n    // add selected feature to lookup\n    selection[fid] = feature;\n\n    // force redraw of layer style\n    vtLayer.setStyle(vtLayer.getStyle());\n  });\n\n});\n"],"sourceRoot":""}