(window.webpackJsonp=window.webpackJsonp||[]).push([[117],{238:function(t,e,a){"use strict";a.r(e);var n=a(3),i=a(2),s=a(105),r=a(9),o=a(0),h=a(30),d=a(25),c=a(29),l=a(18),u=a(14),g=a(79),f=a(198),p=a(76);const w="blur",y="gradient",b="radius",_=["#00f","#0ff","#0f0","#ff0","#f00"],m=function(t){const e=t||{},a=Object(u.a)({},e);delete a.gradient,delete a.radius,delete a.blur,delete a.shadow,delete a.weight,c.a.call(this,a),this.gradient_=null,this.shadow_=void 0!==e.shadow?e.shadow:250,this.circleImage_=void 0,this.styleCache_=null,Object(r.a)(this,Object(h.b)(y),this.handleGradientChanged_,this),this.setGradient(e.gradient?e.gradient:_),this.setBlur(void 0!==e.blur?e.blur:15),this.setRadius(void 0!==e.radius?e.radius:8),Object(r.a)(this,Object(h.b)(w),this.handleStyleChanged_,this),Object(r.a)(this,Object(h.b)(b),this.handleStyleChanged_,this),this.handleStyleChanged_();const n=e.weight?e.weight:"weight";let i;i="string"==typeof n?function(t){return t.get(n)}:n,this.setStyle(function(t,e){const a=i(t),n=void 0!==a?Object(l.a)(a,0,1):1,s=255*n|0;let r=this.styleCache_[s];return r||(r=[new p.c({image:new f.a({opacity:n,src:this.circleImage_})})],this.styleCache_[s]=r),r}.bind(this)),this.setRenderOrder(null),Object(r.a)(this,g.a.RENDER,this.handleRender_,this)};Object(o.c)(m,c.a);m.prototype.createCircle_=function(){const t=this.getRadius(),e=this.getBlur(),a=t+e+1,n=2*a,i=Object(d.a)(n,n);i.shadowOffsetX=i.shadowOffsetY=this.shadow_,i.shadowBlur=e,i.shadowColor="#000",i.beginPath();const s=a-this.shadow_;return i.arc(s,s,t,0,2*Math.PI,!0),i.fill(),i.canvas.toDataURL()},m.prototype.getBlur=function(){return this.get(w)},m.prototype.getGradient=function(){return this.get(y)},m.prototype.getRadius=function(){return this.get(b)},m.prototype.handleGradientChanged_=function(){this.gradient_=function(t){const e=Object(d.a)(1,256),a=e.createLinearGradient(0,0,1,256),n=1/(t.length-1);for(let e=0,i=t.length;e<i;++e)a.addColorStop(e*n,t[e]);return e.fillStyle=a,e.fillRect(0,0,1,256),e.getImageData(0,0,1,256).data}(this.getGradient())},m.prototype.handleStyleChanged_=function(){this.circleImage_=this.createCircle_(),this.styleCache_=new Array(256),this.changed()},m.prototype.handleRender_=function(t){const e=t.context,a=e.canvas,n=e.getImageData(0,0,a.width,a.height),i=n.data;for(let t=0,e=i.length;t<e;t+=4){const e=4*i[t+3];e&&(i[t]=this.gradient_[e],i[t+1]=this.gradient_[e+1],i[t+2]=this.gradient_[e+2])}e.putImageData(n,0,0)},m.prototype.setBlur=function(t){this.set(w,t)},m.prototype.setGradient=function(t){this.set(y,t)},m.prototype.setRadius=function(t){this.set(b,t)};var v=m,O=a(4),C=a(75),I=a(13);const j=document.getElementById("blur"),R=document.getElementById("radius"),S=new v({source:new I.b({url:"data/kml/2012_Earthquakes_Mag5.kml",format:new s.a({extractStyles:!1})}),blur:parseInt(j.value,10),radius:parseInt(R.value,10)});S.getSource().on("addfeature",function(t){const e=t.feature.get("name"),a=parseFloat(e.substr(2));t.feature.set("weight",a-5)});const B=new O.a({source:new C.a({layer:"toner"})});new n.a({layers:[B,S],target:"map",view:new i.a({center:[0,0],zoom:2})});j.addEventListener("input",function(){S.setBlur(parseInt(j.value,10))}),R.addEventListener("input",function(){S.setRadius(parseInt(R.value,10))})}},[[238,0]]]);
//# sourceMappingURL=heatmap-earthquakes.js.map