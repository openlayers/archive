(window.webpackJsonp=window.webpackJsonp||[]).push([[34],{236:function(t,e,i){"use strict";i.r(e);var n=i(3),o=i(96),s=i(2),r=i(4),a=i(61),l=i(0),h=i(77),c=i(17),d=i(84),u=i(22),p=i(9),_=i(12),f=i(1),g=i(166),y=i(8),m=i(47),E=i(120),b=i(56),O=i(63);const v=function(t,e,i,n,o,s){h.a.call(this,t,e),this.src_=i,this.extent_=n,this.preemptive_=o,this.grid_=null,this.keys_=null,this.data_=null,this.jsonp_=s};Object(l.c)(v,h.a),v.prototype.getImage=function(){return null},v.prototype.getData=function(t){if(!this.grid_||!this.keys_)return null;const e=(t[0]-this.extent_[0])/(this.extent_[2]-this.extent_[0]),i=(t[1]-this.extent_[1])/(this.extent_[3]-this.extent_[1]),n=this.grid_[Math.floor((1-i)*this.grid_.length)];if("string"!=typeof n)return null;let o=n.charCodeAt(Math.floor(e*n.length));o>=93&&o--,o>=35&&o--;let s=null;if((o-=32)in this.keys_){const t=this.keys_[o];s=this.data_&&t in this.data_?this.data_[t]:t}return s},v.prototype.forDataAtCoordinate=function(t,e,i,n){this.state==c.a.IDLE&&!0===n?(Object(p.b)(this,_.a.CHANGE,function(n){e.call(i,this.getData(t))},this),this.loadInternal_()):!0===n?setTimeout(function(){e.call(i,this.getData(t))}.bind(this),0):e.call(i,this.getData(t))},v.prototype.getKey=function(){return this.src_},v.prototype.handleError_=function(){this.state=c.a.ERROR,this.changed()},v.prototype.handleLoad_=function(t){this.grid_=t.grid,this.keys_=t.keys,this.data_=t.data,this.state=c.a.EMPTY,this.changed()},v.prototype.loadInternal_=function(){if(this.state==c.a.IDLE)if(this.state=c.a.LOADING,this.jsonp_)Object(g.a)(this.src_,this.handleLoad_.bind(this),this.handleError_.bind(this));else{const t=new XMLHttpRequest;t.addEventListener("load",this.onXHRLoad_.bind(this)),t.addEventListener("error",this.onXHRError_.bind(this)),t.open("GET",this.src_),t.send()}},v.prototype.onXHRLoad_=function(t){const e=t.target;if(!e.status||e.status>=200&&e.status<300){let t;try{t=JSON.parse(e.responseText)}catch(t){return void this.handleError_()}this.handleLoad_(t)}else this.handleError_()},v.prototype.onXHRError_=function(t){this.handleError_()},v.prototype.load=function(){this.preemptive_&&this.loadInternal_()};const j=function(t){if(E.b.call(this,{projection:Object(y.g)("EPSG:3857"),state:m.a.LOADING}),this.preemptive_=void 0===t.preemptive||t.preemptive,this.tileUrlFunction_=d.d,this.template_=void 0,this.jsonp_=t.jsonp||!1,t.url)if(this.jsonp_)Object(g.a)(t.url,this.handleTileJSONResponse.bind(this),this.handleTileJSONError.bind(this));else{const e=new XMLHttpRequest;e.addEventListener("load",this.onXHRLoad_.bind(this)),e.addEventListener("error",this.onXHRError_.bind(this)),e.open("GET",t.url),e.send()}else t.tileJSON?this.handleTileJSONResponse(t.tileJSON):Object(u.a)(!1,51)};Object(l.c)(j,E.b),j.prototype.onXHRLoad_=function(t){const e=t.target;if(!e.status||e.status>=200&&e.status<300){let t;try{t=JSON.parse(e.responseText)}catch(t){return void this.handleTileJSONError()}this.handleTileJSONResponse(t)}else this.handleTileJSONError()},j.prototype.onXHRError_=function(t){this.handleTileJSONError()},j.prototype.getTemplate=function(){return this.template_},j.prototype.forDataAtCoordinateAndResolution=function(t,e,i,n){if(this.tileGrid){const o=this.tileGrid.getTileCoordForCoordAndResolution(t,e);this.getTile(o[0],o[1],o[2],1,this.getProjection()).forDataAtCoordinate(t,i,null,n)}else!0===n?setTimeout(function(){i(null)},0):i(null)},j.prototype.handleTileJSONError=function(){this.setState(m.a.ERROR)},j.prototype.handleTileJSONResponse=function(t){const e=Object(y.g)("EPSG:4326"),i=this.getProjection();let n;if(void 0!==t.bounds){const o=Object(y.j)(e,i);n=Object(f.a)(t.bounds,o)}const o=t.minzoom||0,s=t.maxzoom||22,r=Object(O.b)({extent:Object(O.c)(i),maxZoom:s,minZoom:o});this.tileGrid=r,this.template_=t.template;const a=t.grids;if(a){if(this.tileUrlFunction_=Object(d.a)(a,r),void 0!==t.attribution){const i=void 0!==n?n:e.getExtent();this.setAttributions(function(e){return Object(f.F)(i,e.extent)?[t.attribution]:null})}this.setState(m.a.READY)}else this.setState(m.a.ERROR)},j.prototype.getTile=function(t,e,i,n,o){const s=Object(b.d)(t,e,i);if(this.tileCache.containsKey(s))return this.tileCache.get(s);{const r=[t,e,i],a=this.getTileCoordForTileUrlFunction(r,o),l=this.tileUrlFunction_(a,n,o),h=new v(r,void 0!==l?c.a.IDLE:c.a.EMPTY,void 0!==l?l:"",this.tileGrid.getTileCoordExtent(r),this.preemptive_,this.jsonp_);return this.tileCache.set(s,h),h}},j.prototype.useTile=function(t,e,i){const n=Object(b.d)(t,e,i);this.tileCache.containsKey(n)&&this.tileCache.get(n)};var R=j;const T="pk.eyJ1IjoiYWhvY2V2YXIiLCJhIjoiY2pzbmg0Nmk5MGF5NzQzbzRnbDNoeHJrbiJ9.7_-_gL8ur7ZtEiNwRfCy7Q",L=new r.a({source:new a.a({url:"https://api.tiles.mapbox.com/v4/mapbox.geography-class.json?secure&access_token="+T})}),S=new R({url:"https://api.tiles.mapbox.com/v4/mapbox.geography-class.json?secure&access_token="+T}),x=new r.a({source:S}),J=new s.a({center:[0,0],zoom:1}),w=document.getElementById("map"),C=new n.a({layers:[L,x],target:w,view:J}),I=document.getElementById("country-info"),N=document.getElementById("country-flag"),k=document.getElementById("country-name"),D=new o.a({element:I,offset:[15,15],stopEvent:!1});C.addOverlay(D);const A=function(t){const e=J.getResolution();S.forDataAtCoordinateAndResolution(t,e,function(e){w.style.cursor=e?"pointer":"",e&&(N.src="data:image/png;base64,"+e.flag_png,k.innerHTML=e.admin),D.setPosition(e?t:void 0)})};C.on("pointermove",function(t){if(t.dragging)return;const e=C.getEventCoordinate(t.originalEvent);A(e)}),C.on("click",function(t){A(t.coordinate)})}},[[236,0]]]);
//# sourceMappingURL=utfgrid.js.map