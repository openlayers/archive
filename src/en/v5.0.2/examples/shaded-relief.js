(window.webpackJsonp=window.webpackJsonp||[]).push([[54],{293:function(t,n,e){"use strict";e.r(n);var a=e(3),o=e(2),r=e(4),s=e(80),i=e(51),u=e(159),c=e(5);const h=new i.a({url:"https://{a-d}.tiles.mapbox.com/v3/aj.sf-dem/{z}/{x}/{y}.png",crossOrigin:"anonymous",transition:0}),d=new u.a({sources:[h],operationType:"image",operation:function(t,n){const e=t[0],a=e.width,o=e.height,r=e.data,s=new Uint8ClampedArray(r.length),i=2*n.resolution,u=a-1,c=o-1,h=[0,0,0,0],d=2*Math.PI,m=Math.PI/2,w=Math.PI*n.sunEl/180,l=Math.PI*n.sunAz/180,p=Math.cos(w),v=Math.sin(w);let M,f,g,y,b,x,E,I,z,P,A,T,k,B,J;for(f=0;f<=c;++f)for(b=0===f?0:f-1,x=f===c?c:f+1,M=0;M<=u;++M)y=M===u?u:M+1,E=4*(f*a+(g=0===M?0:M-1)),h[0]=r[E],h[1]=r[E+1],h[2]=r[E+2],h[3]=r[E+3],I=n.vert*(h[0]+2*h[1]+3*h[2]),E=4*(f*a+y),h[0]=r[E],h[1]=r[E+1],h[2]=r[E+2],h[3]=r[E+3],P=((z=n.vert*(h[0]+2*h[1]+3*h[2]))-I)/i,E=4*(b*a+M),h[0]=r[E],h[1]=r[E+1],h[2]=r[E+2],h[3]=r[E+3],I=n.vert*(h[0]+2*h[1]+3*h[2]),E=4*(x*a+M),h[0]=r[E],h[1]=r[E+1],h[2]=r[E+2],h[3]=r[E+3],A=((z=n.vert*(h[0]+2*h[1]+3*h[2]))-I)/i,T=Math.atan(Math.sqrt(P*P+A*A)),k=(k=Math.atan2(A,-P))<0?m-k:k>m?d-k+m:m-k,J=255*(B=v*Math.cos(T)+p*Math.sin(T)*Math.cos(l-k)),s[E=4*(f*a+M)]=J,s[E+1]=J,s[E+2]=J,s[E+3]=r[E+3];return{data:s,width:a,height:o}}}),m=(new a.a({target:"map",layers:[new r.a({source:new c.b}),new s.a({opacity:.3,source:d})],view:new o.a({extent:[-13675026,4439648,-13580856,4580292],center:[-13615645,4497969],minZoom:10,maxZoom:16,zoom:13})}),{});["vert","sunEl","sunAz"].forEach(function(t){const n=document.getElementById(t),e=document.getElementById(t+"Out");n.addEventListener("input",function(){e.innerText=n.value,d.changed()}),e.innerText=n.value,m[t]=n}),d.on("beforeoperations",function(t){const n=t.data;n.resolution=t.resolution;for(const t in m)n[t]=Number(m[t].value)})}},[[293,0]]]);
//# sourceMappingURL=shaded-relief.js.map