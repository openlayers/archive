(window.webpackJsonp=window.webpackJsonp||[]).push([[165],{239:function(t,i,e){"use strict";e.r(i);var s=e(3),n=e(2),o=e(4),a=e(80),r=e(5),c=e(0),h=e(155),u=e(22),g=e(9),p=e(12),l=e(1),_=e(14),m=e(66),d=e(110);const v=function(t){const i=t||{};m.a.call(this,{attributions:i.attributions,projection:i.projection,resolutions:i.resolutions}),this.crossOrigin_=void 0!==i.crossOrigin?i.crossOrigin:null,this.hidpi_=void 0===i.hidpi||i.hidpi,this.url_=i.url,this.imageLoadFunction_=void 0!==i.imageLoadFunction?i.imageLoadFunction:m.b,this.params_=i.params||{},this.image_=null,this.imageSize_=[0,0],this.renderedRevision_=0,this.ratio_=void 0!==i.ratio?i.ratio:1.5};Object(c.c)(v,m.a),v.prototype.getParams=function(){return this.params_},v.prototype.getImageInternal=function(t,i,e,s){if(void 0===this.url_)return null;i=this.findNearestResolution(i),e=this.hidpi_?e:1;const n=this.image_;if(n&&this.renderedRevision_==this.getRevision()&&n.getResolution()==i&&n.getPixelRatio()==e&&Object(l.g)(n.getExtent(),t))return n;const o={F:"image",FORMAT:"PNG32",TRANSPARENT:!0};Object(_.a)(o,this.params_);const a=((t=t.slice())[0]+t[2])/2,r=(t[1]+t[3])/2;if(1!=this.ratio_){const i=this.ratio_*Object(l.E)(t)/2,e=this.ratio_*Object(l.A)(t)/2;t[0]=a-i,t[1]=r-e,t[2]=a+i,t[3]=r+e}const c=i/e,u=Math.ceil(Object(l.E)(t)/c),m=Math.ceil(Object(l.A)(t)/c);t[0]=a-c*u/2,t[2]=a+c*u/2,t[1]=r-c*m/2,t[3]=r+c*m/2,this.imageSize_[0]=u,this.imageSize_[1]=m;const d=this.getRequestUrl_(t,this.imageSize_,e,s,o);return this.image_=new h.a(t,i,e,d,this.crossOrigin_,this.imageLoadFunction_),this.renderedRevision_=this.getRevision(),Object(g.a)(this.image_,p.a.CHANGE,this.handleImageChange,this),this.image_},v.prototype.getImageLoadFunction=function(){return this.imageLoadFunction_},v.prototype.getRequestUrl_=function(t,i,e,s,n){const o=s.getCode().split(":").pop();n.SIZE=i[0]+","+i[1],n.BBOX=t.join(","),n.BBOXSR=o,n.IMAGESR=o,n.DPI=Math.round(90*e);const a=this.url_,r=a.replace(/MapServer\/?$/,"MapServer/export").replace(/ImageServer\/?$/,"ImageServer/exportImage");return r==a&&Object(u.a)(!1,50),Object(d.a)(r,n)},v.prototype.getUrl=function(){return this.url_},v.prototype.setImageLoadFunction=function(t){this.image_=null,this.imageLoadFunction_=t,this.changed()},v.prototype.setUrl=function(t){t!=this.url_&&(this.url_=t,this.image_=null,this.changed())},v.prototype.updateParams=function(t){Object(_.a)(this.params_,t),this.image_=null,this.changed()};var O=v;const S=[new o.a({source:new r.b}),new a.a({source:new O({ratio:1,params:{},url:"https://sampleserver1.arcgisonline.com/ArcGIS/rest/services/Specialty/ESRI_StateCityHighway_USA/MapServer"})})];new s.a({layers:S,target:"map",view:new n.a({center:[-10997148,4569099],zoom:4})})}},[[239,0]]]);
//# sourceMappingURL=arcgis-image.js.map