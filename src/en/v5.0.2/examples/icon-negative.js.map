{"version":3,"sources":["webpack:///./icon-negative.js"],"names":["createStyle","src","img","_src_ol_style_js__WEBPACK_IMPORTED_MODULE_9__","image","_src_ol_style_js__WEBPACK_IMPORTED_MODULE_10__","anchor","crossOrigin","imgSize","width","height","undefined","iconFeature","_src_ol_Feature_js__WEBPACK_IMPORTED_MODULE_0__","_src_ol_geom_Point_js__WEBPACK_IMPORTED_MODULE_3__","set","map","_src_ol_Map_js__WEBPACK_IMPORTED_MODULE_1__","layers","_src_ol_layer_js__WEBPACK_IMPORTED_MODULE_5__","source","_src_ol_source_Stamen_js__WEBPACK_IMPORTED_MODULE_7__","layer","_src_ol_layer_js__WEBPACK_IMPORTED_MODULE_6__","style","feature","get","_src_ol_source_Vector_js__WEBPACK_IMPORTED_MODULE_8__","features","target","document","getElementById","view","_src_ol_View_js__WEBPACK_IMPORTED_MODULE_2__","center","zoom","selectStyle","select","_src_ol_interaction_Select_js__WEBPACK_IMPORTED_MODULE_4__","getImage","canvas","createElement","context","getContext","drawImage","imageData","getImageData","data","i","ii","length","putImageData","addInteraction","on","evt","getTargetElement","cursor","hasFeatureAtPixel","pixel"],"mappings":"8LAWA,SAAAA,EAAAC,EAAAC,GACA,WAAAC,EAAA,GACAC,MAAA,IAAAC,EAAA,GACAC,QAAA,QACAC,YAAA,YACAN,MACAC,MACAM,QAAAN,KAAAO,MAAAP,EAAAQ,aAAAC,MAKA,MAAAC,EAAA,IAAAC,EAAA,MAAAC,EAAA,UACAF,EAAAG,IAAA,QAAAf,EAAA,qBAAAW,IAEA,MAAAK,EAAA,IAAAC,EAAA,GACAC,QACA,IAAAC,EAAA,GACAC,OAAA,IAAAC,EAAA,GAA0BC,MAAA,iBAE1B,IAAAC,EAAA,GACAC,MAAA,SAAAC,GACA,OAAAA,EAAAC,IAAA,UAEAN,OAAA,IAAAO,EAAA,GAAgCC,UAAAhB,QAGhCiB,OAAAC,SAAAC,eAAA,OACAC,KAAA,IAAAC,EAAA,GACAC,QAAA,KACAC,KAAA,MAIAC,KACAC,EAAA,IAAAC,EAAA,GACAd,MAAA,SAAAC,GACA,MAAArB,EAAAqB,EAAAC,IAAA,SAAAa,sBACA,IAAAH,EAAAhC,EAAAH,KAAA,CACA,MAAAuC,EAAAV,SAAAW,cAAA,UACAC,EAAAF,EAAAG,WAAA,MACAH,EAAA/B,MAAAL,EAAAK,MACA+B,EAAA9B,OAAAN,EAAAM,OACAgC,EAAAE,UAAAxC,EAAA,IAAAA,EAAAK,MAAAL,EAAAM,QACA,MAAAmC,EAAAH,EAAAI,aAAA,IAAAN,EAAA/B,MAAA+B,EAAA9B,QACAqC,EAAAF,EAAAE,KACA,QAAAC,EAAA,EAAAC,EAAAF,EAAAG,OAAuCF,EAAAC,EAAQD,KAAA,SAC/CD,EAAAC,GAAA,IAAAD,EAAAC,GAEAN,EAAAS,aAAAN,EAAA,KACAT,EAAAhC,EAAAH,KAAAD,OAAAW,EAAA6B,GAEA,OAAAJ,EAAAhC,EAAAH,QAGAe,EAAAoC,eAAAf,GAEArB,EAAAqC,GAAA,uBAAAC,GACAtC,EAAAuC,mBAAA/B,MAAAgC,OACAxC,EAAAyC,kBAAAH,EAAAI,OAAA","file":"icon-negative.js","sourcesContent":["import Feature from '../src/ol/Feature.js';\nimport Map from '../src/ol/Map.js';\nimport View from '../src/ol/View.js';\nimport Point from '../src/ol/geom/Point.js';\nimport Select from '../src/ol/interaction/Select.js';\nimport {Tile as TileLayer, Vector as VectorLayer} from '../src/ol/layer.js';\nimport Stamen from '../src/ol/source/Stamen.js';\nimport VectorSource from '../src/ol/source/Vector.js';\nimport {Icon, Style} from '../src/ol/style.js';\n\n\nfunction createStyle(src, img) {\n  return new Style({\n    image: new Icon(/** @type {module:ol/style/Icon~Options} */ ({\n      anchor: [0.5, 0.96],\n      crossOrigin: 'anonymous',\n      src: src,\n      img: img,\n      imgSize: img ? [img.width, img.height] : undefined\n    }))\n  });\n}\n\nconst iconFeature = new Feature(new Point([0, 0]));\niconFeature.set('style', createStyle('data/icon.png', undefined));\n\nconst map = new Map({\n  layers: [\n    new TileLayer({\n      source: new Stamen({layer: 'watercolor'})\n    }),\n    new VectorLayer({\n      style: function(feature) {\n        return feature.get('style');\n      },\n      source: new VectorSource({features: [iconFeature]})\n    })\n  ],\n  target: document.getElementById('map'),\n  view: new View({\n    center: [0, 0],\n    zoom: 3\n  })\n});\n\nconst selectStyle = {};\nconst select = new Select({\n  style: function(feature) {\n    const image = feature.get('style').getImage().getImage();\n    if (!selectStyle[image.src]) {\n      const canvas = document.createElement('canvas');\n      const context = canvas.getContext('2d');\n      canvas.width = image.width;\n      canvas.height = image.height;\n      context.drawImage(image, 0, 0, image.width, image.height);\n      const imageData = context.getImageData(0, 0, canvas.width, canvas.height);\n      const data = imageData.data;\n      for (let i = 0, ii = data.length; i < ii; i = i + (i % 4 == 2 ? 2 : 1)) {\n        data[i] = 255 - data[i];\n      }\n      context.putImageData(imageData, 0, 0);\n      selectStyle[image.src] = createStyle(undefined, canvas);\n    }\n    return selectStyle[image.src];\n  }\n});\nmap.addInteraction(select);\n\nmap.on('pointermove', function(evt) {\n  map.getTargetElement().style.cursor =\n      map.hasFeatureAtPixel(evt.pixel) ? 'pointer' : '';\n});\n"],"sourceRoot":""}