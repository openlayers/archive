(window.webpackJsonp=window.webpackJsonp||[]).push([[134],{197:function(e,t,n){"use strict";var r=n(0),i=n(20),o=n(39),a=n(99),s=n(31),l=n(34),c=n(1),u=n(10),p=n(24),h=n(36),d=n(38),x=n(29),_=n(13),f=n(76);const w="extentchanged",b=function(e){l.a.call(this,w),this.extent=e};Object(r.c)(b,l.a);const O=function(e){const t=e||{};this.extent_=null,this.pointerHandler_=null,this.pixelTolerance_=void 0!==t.pixelTolerance?t.pixelTolerance:10,this.snappedToVertex_=!1,this.extentFeature_=null,this.vertexFeature_=null,e||(e={}),d.b.call(this,{handleDownEvent:y,handleDragEvent:g,handleEvent:v,handleUpEvent:j}),this.extentOverlay_=new x.a({source:new _.b({useSpatialIndex:!1,wrapX:!!e.wrapX}),style:e.boxStyle?e.boxStyle:function(){const e=Object(f.b)();return function(t,n){return e[u.a.POLYGON]}}(),updateWhileAnimating:!0,updateWhileInteracting:!0}),this.vertexOverlay_=new x.a({source:new _.b({useSpatialIndex:!1,wrapX:!!e.wrapX}),style:e.pointerStyle?e.pointerStyle:function(){const e=Object(f.b)();return function(t,n){return e[u.a.POINT]}}(),updateWhileAnimating:!0,updateWhileInteracting:!0}),e.extent&&this.setExtent(e.extent)};function v(e){return!(e instanceof a.a)||(e.type!=o.a.POINTERMOVE||this.handlingDownUpSequence||this.handlePointerMove_(e),d.c.call(this,e),!1)}function y(e){const t=e.pixel,n=e.map,r=this.getExtent();let i=this.snapToVertex_(t,n);const o=function(e){let t=null,n=null;return e[0]==r[0]?t=r[2]:e[0]==r[2]&&(t=r[0]),e[1]==r[1]?n=r[3]:e[1]==r[3]&&(n=r[1]),null!==t&&null!==n?[t,n]:null};if(i&&r){const e=i[0]==r[0]||i[0]==r[2]?i[0]:null,t=i[1]==r[1]||i[1]==r[3]?i[1]:null;null!==e&&null!==t?this.pointerHandler_=E(o(i)):null!==e?this.pointerHandler_=F(o([e,r[1]]),o([e,r[3]])):null!==t&&(this.pointerHandler_=F(o([r[0],t]),o([r[2],t])))}else i=n.getCoordinateFromPixel(t),this.setExtent([i[0],i[1],i[0],i[1]]),this.pointerHandler_=E(i);return!0}function g(e){if(this.pointerHandler_){const t=e.coordinate;this.setExtent(this.pointerHandler_(t)),this.createOrUpdatePointerFeature_(t)}return!0}function j(e){this.pointerHandler_=null;const t=this.getExtent();return t&&0!==Object(c.u)(t)||this.setExtent(null),!1}function E(e){return function(t){return Object(c.b)([e,t])}}function F(e,t){return e[0]==t[0]?function(n){return Object(c.b)([e,[n[0],t[1]]])}:e[1]==t[1]?function(n){return Object(c.b)([e,[t[0],n[1]]])}:null}Object(r.c)(O,d.b),O.prototype.snapToVertex_=function(e,t){const n=t.getCoordinateFromPixel(e),r=function(e,t){return Object(s.k)(n,e)-Object(s.k)(n,t)},i=this.getExtent();if(i){const o=function(e){return[[[e[0],e[1]],[e[0],e[3]]],[[e[0],e[3]],[e[2],e[3]]],[[e[2],e[3]],[e[2],e[1]]],[[e[2],e[1]],[e[0],e[1]]]]}(i);o.sort(r);const a=o[0];let l=Object(s.c)(n,a);const c=t.getPixelFromCoordinate(l);if(Object(s.f)(e,c)<=this.pixelTolerance_){const e=t.getPixelFromCoordinate(a[0]),n=t.getPixelFromCoordinate(a[1]),r=Object(s.j)(c,e),i=Object(s.j)(c,n),o=Math.sqrt(Math.min(r,i));return this.snappedToVertex_=o<=this.pixelTolerance_,this.snappedToVertex_&&(l=r>i?a[1]:a[0]),l}}return null},O.prototype.handlePointerMove_=function(e){const t=e.pixel,n=e.map;let r=this.snapToVertex_(t,n);r||(r=n.getCoordinateFromPixel(t)),this.createOrUpdatePointerFeature_(r)},O.prototype.createOrUpdateExtentFeature_=function(e){let t=this.extentFeature_;return t?e?t.setGeometry(Object(h.d)(e)):t.setGeometry(void 0):(t=e?new i.a(Object(h.d)(e)):new i.a({}),this.extentFeature_=t,this.extentOverlay_.getSource().addFeature(t)),t},O.prototype.createOrUpdatePointerFeature_=function(e){let t=this.vertexFeature_;if(t){t.getGeometry().setCoordinates(e)}else t=new i.a(new p.a(e)),this.vertexFeature_=t,this.vertexOverlay_.getSource().addFeature(t);return t},O.prototype.setMap=function(e){this.extentOverlay_.setMap(e),this.vertexOverlay_.setMap(e),d.b.prototype.setMap.call(this,e)},O.prototype.getExtent=function(){return this.extent_},O.prototype.setExtent=function(e){this.extent_=e||null,this.createOrUpdateExtentFeature_(e),this.dispatchEvent(new b(this.extent_))},t.a=O},368:function(e,t,n){"use strict";n.r(t);var r=n(3),i=n(2),o=n(35),a=n(28),s=n(197),l=n(4),c=n(29),u=n(13),p=n(5);const h=new u.b({url:"data/geojson/countries.geojson",format:new a.a}),d=new r.a({layers:[new l.a({source:new p.b}),new c.a({source:h})],target:"map",view:new i.a({center:[0,0],zoom:2})}),x=new s.a({condition:o.j});d.addInteraction(x),x.setActive(!1),window.addEventListener("keydown",function(e){16==e.keyCode&&x.setActive(!0)}),window.addEventListener("keyup",function(e){16==e.keyCode&&x.setActive(!1)})}},[[368,0]]]);
//# sourceMappingURL=extent-interaction.js.map