(window.webpackJsonp=window.webpackJsonp||[]).push([[2],{235:function(e,t,i){"use strict";i.r(t);var n=i(3),o=i(2),r=i(4),s=i(140),c=i(0),a=i(179),l=i(17),u=i(84),h=i(22),p=i(25),g=i(1),f=i(57),m=i(65),z=i(106);const d="default",b="truncated",w=function(e,t,i,n,o,r,s){a.a.call(this,t,i,n,o,r,s),this.zoomifyImage_=null,this.tileSize_=Object(f.d)(e.getTileSize(t[0]))};Object(c.c)(w,a.a),w.prototype.getImage=function(){if(this.zoomifyImage_)return this.zoomifyImage_;const e=a.a.prototype.getImage.call(this);if(this.state==l.a.LOADED){const t=this.tileSize_;if(e.width==t[0]&&e.height==t[1])return this.zoomifyImage_=e,e;{const i=Object(p.a)(t[0],t[1]);return i.drawImage(e,0,0),this.zoomifyImage_=i.canvas,i.canvas}}return e};const O=function(e){const t=e||{},i=t.size,n=void 0!==t.tierSizeCalculation?t.tierSizeCalculation:d,o=i[0],r=i[1],c=t.extent||[0,-i[1],i[0],0],a=[],l=t.tileSize||s.b;let p=l;switch(n){case d:for(;o>p||r>p;)a.push([Math.ceil(o/p),Math.ceil(r/p)]),p+=p;break;case b:let e=o,t=r;for(;e>p||t>p;)a.push([Math.ceil(e/p),Math.ceil(t/p)]),e>>=1,t>>=1;break;default:Object(h.a)(!1,53)}a.push([1,1]),a.reverse();const f=[1],O=[0];for(let e=1,t=a.length;e<t;e++)f.push(1<<e),O.push(a[e-1][0]*a[e-1][1]+O[e-1]);f.reverse();const y=new z.a({tileSize:l,extent:c,origin:Object(g.C)(c),resolutions:f});let v=t.url;v&&-1==v.indexOf("{TileGroup}")&&-1==v.indexOf("{tileIndex}")&&(v+="{TileGroup}/{z}-{x}-{y}.jpg");const I=Object(u.c)(v);const j=Object(u.b)(I.map(function(e){return function(t,i,n){if(t){const i=t[0],n=t[1],o=-t[2]-1,r=n+o*a[i][0],s=y.getTileSize(i),c={z:i,x:n,y:o,tileIndex:r,TileGroup:"TileGroup"+((r+O[i])/s|0)};return e.replace(/\{(\w+?)\}/g,function(e,t){return c[t]})}}})),S=w.bind(null,y);m.a.call(this,{attributions:t.attributions,cacheSize:t.cacheSize,crossOrigin:t.crossOrigin,projection:t.projection,reprojectionErrorThreshold:t.reprojectionErrorThreshold,tileClass:S,tileGrid:y,tileUrlFunction:j,transition:t.transition})};Object(c.c)(O,m.a);var y=O;const v="http://vips.vtech.fr/cgi-bin/iipsrv.fcgi?zoomify=/mnt/MD1/AD00/plan_CHU-4HD-01/FOND.TIF/",I=new r.a({source:new y({url:v,size:[9911,6100],crossOrigin:"anonymous"})}),j=[0,-6100,9911,0];new n.a({layers:[I],target:"map",view:new o.a({resolutions:I.getSource().getTileGrid().getResolutions(),extent:j})}).getView().fit(j),document.getElementById("zoomifyProtocol").addEventListener("change",function(e){const t=e.currentTarget.value;"iip"===t?I.setSource(new y({url:"http://vips.vtech.fr/cgi-bin/iipsrv.fcgi?FIF=/mnt/MD1/AD00/plan_CHU-4HD-01/FOND.TIF&JTL={z},{tileIndex}",size:[9911,6100],crossOrigin:"anonymous"})):"zoomify"===t&&I.setSource(new y({url:v,size:[9911,6100],crossOrigin:"anonymous"}))})}},[[235,0]]]);
//# sourceMappingURL=zoomify.js.map