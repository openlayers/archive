(window.webpackJsonp=window.webpackJsonp||[]).push([[69],{308:function(t,e,n){"use strict";n.r(e);var o=n(3),a=n(2),s=n(4),r=n(80),l=n(43),i=n(159);function c(t){const e=t[0]/255,n=t[1]/255,o=t[2]/255;return(2*n-e-o)/(2*n+e+o)}function u(t,e){const n=e.min,o=e.max,a=e.values.length;if(t<n);else if(t>=o)e.values[a-1]+=1;else{const o=Math.floor((t-n)/e.delta);e.values[o]+=1}}const d=new l.a({key:"As1HiMj1PvLPlqc_gtM7AqZfBL8ZL3VrjaS3zIb22Uvb9WKhuJObROC-qUpa81U5",imagerySet:"Aerial"}),h=new i.a({sources:[d],operation:function(t,e){const n=t[0],o=c(n);return u(o,e.counts),o>=e.threshold?(n[0]=0,n[1]=255,n[2]=0,n[3]=128):n[3]=0,n},lib:{vgi:c,summarize:u}});h.set("threshold",.1),h.on("beforeoperations",function(t){t.data.counts=function(t,e,n){const o=new Array(n);for(let t=0;t<n;++t)o[t]=0;return{min:t,max:e,values:o,delta:(e-t)/n}}(0,.25,10),t.data.threshold=h.get("threshold")}),h.on("afteroperations",function(t){!function(t,e,n){f&&(clearTimeout(f),f=null);f=setTimeout(function(t,e,n){const o=d3.scaleLinear().domain([0,d3.max(e.values)]).range([0,p]),a=v.selectAll("rect").data(e.values);a.enter().append("rect"),a.attr("class",function(t,o){const a=e.min+o*e.delta;return"bar"+(a>=n?" selected":"")}).attr("width",m-2),a.transition().attr("transform",function(t,e){return"translate("+e*m+", "+(p-o(t))+")"}).attr("height",o),a.on("mousemove",function(t,n){const o=e.min+n*e.delta;h.get("threshold")!==o&&(h.set("threshold",o),h.changed())}),a.on("mouseover",function(n,o){let a=0;for(let n=e.values.length-1;n>=o;--n)a+=t*t*e.values[n];w.html(function(t,e){return(e/4046.86).toFixed(0).replace(/\B(?=(\d{3})+(?!\d))/g,",")+" acres at<br>"+t.toFixed(2)+" VGI or above"}(e.min+o*e.delta,a)),w.style("display","block"),w.transition().style({left:g.left+o*m+m/2+"px",top:d3.event.y-60+"px",opacity:1})}),a.on("mouseout",function(){w.transition().style("opacity",0).each("end",function(){w.style("display","none")})})}.bind(null,t,e,n),1e3/60)}(t.resolution,t.data.counts,t.data.threshold)});new o.a({layers:[new s.a({source:d}),new r.a({source:h})],target:"map",view:new a.a({center:[-9651695,4937351],zoom:13,minZoom:12,maxZoom:19})});let f=null;const m=15,p=150,v=d3.select("#plot").append("svg").attr("width",10*m).attr("height",p),g=v.node().getBoundingClientRect(),w=d3.select(document.body).append("div").attr("class","tip")}},[[308,0]]]);
//# sourceMappingURL=raster.js.map