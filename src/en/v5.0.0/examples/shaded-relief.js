(window.webpackJsonp=window.webpackJsonp||[]).push([[54],{289:function(t,n,e){"use strict";e.r(n);var o=e(5),a=e(4),r=e(10),s=e(16);const i=new s.o({url:"https://{a-d}.tiles.mapbox.com/v3/aj.sf-dem/{z}/{x}/{y}.png",crossOrigin:"anonymous",transition:0}),c=new s.g({sources:[i],operationType:"image",operation:function(t,n){const e=t[0],o=e.width,a=e.height,r=e.data,s=new Uint8ClampedArray(r.length),i=2*n.resolution,c=o-1,u=a-1,h=[0,0,0,0],d=2*Math.PI,m=Math.PI/2,w=Math.PI*n.sunEl/180,l=Math.PI*n.sunAz/180,p=Math.cos(w),f=Math.sin(w);let v,M,g,y,x,E,I,b,z,P,A,T,k,B,J;for(M=0;M<=u;++M)for(x=0===M?0:M-1,E=M===u?u:M+1,v=0;v<=c;++v)y=v===c?c:v+1,I=4*(M*o+(g=0===v?0:v-1)),h[0]=r[I],h[1]=r[I+1],h[2]=r[I+2],h[3]=r[I+3],b=n.vert*(h[0]+2*h[1]+3*h[2]),I=4*(M*o+y),h[0]=r[I],h[1]=r[I+1],h[2]=r[I+2],h[3]=r[I+3],P=((z=n.vert*(h[0]+2*h[1]+3*h[2]))-b)/i,I=4*(x*o+v),h[0]=r[I],h[1]=r[I+1],h[2]=r[I+2],h[3]=r[I+3],b=n.vert*(h[0]+2*h[1]+3*h[2]),I=4*(E*o+v),h[0]=r[I],h[1]=r[I+1],h[2]=r[I+2],h[3]=r[I+3],A=((z=n.vert*(h[0]+2*h[1]+3*h[2]))-b)/i,T=Math.atan(Math.sqrt(P*P+A*A)),k=(k=Math.atan2(A,-P))<0?m-k:k>m?d-k+m:m-k,J=255*(B=f*Math.cos(T)+p*Math.sin(T)*Math.cos(l-k)),s[I=4*(M*o+v)]=J,s[I+1]=J,s[I+2]=J,s[I+3]=r[I+3];return{data:s,width:o,height:a}}}),u=(new o.a({target:"map",layers:[new r.d({source:new s.f}),new r.c({opacity:.3,source:c})],view:new a.a({extent:[-13675026,4439648,-13580856,4580292],center:[-13615645,4497969],minZoom:10,maxZoom:16,zoom:13})}),{});["vert","sunEl","sunAz"].forEach(function(t){const n=document.getElementById(t),e=document.getElementById(t+"Out");n.addEventListener("input",function(){e.innerText=n.value,c.changed()}),e.innerText=n.value,u[t]=n}),c.on("beforeoperations",function(t){const n=t.data;n.resolution=t.resolution;for(const t in u)n[t]=Number(u[t].value)})}},[[289,0]]]);
//# sourceMappingURL=shaded-relief.js.map