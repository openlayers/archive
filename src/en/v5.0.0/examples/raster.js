(window.webpackJsonp=window.webpackJsonp||[]).push([[69],{304:function(t,e,n){"use strict";n.r(e);var o=n(5),a=n(4),s=n(10),r=n(46),l=n(156);function i(t){const e=t[0]/255,n=t[1]/255,o=t[2]/255;return(2*n-e-o)/(2*n+e+o)}function c(t,e){const n=e.min,o=e.max,a=e.values.length;if(t<n);else if(t>=o)e.values[a-1]+=1;else{const o=Math.floor((t-n)/e.delta);e.values[o]+=1}}const u=new r.a({key:"As1HiMj1PvLPlqc_gtM7AqZfBL8ZL3VrjaS3zIb22Uvb9WKhuJObROC-qUpa81U5",imagerySet:"Aerial"}),d=new l.a({sources:[u],operation:function(t,e){const n=t[0],o=i(n);return c(o,e.counts),o>=e.threshold?(n[0]=0,n[1]=255,n[2]=0,n[3]=128):n[3]=0,n},lib:{vgi:i,summarize:c}});d.set("threshold",.1),d.on("beforeoperations",function(t){t.data.counts=function(t,e,n){const o=new Array(n);for(let t=0;t<n;++t)o[t]=0;return{min:t,max:e,values:o,delta:(e-t)/n}}(0,.25,10),t.data.threshold=d.get("threshold")}),d.on("afteroperations",function(t){!function(t,e,n){h&&(clearTimeout(h),h=null);h=setTimeout(function(t,e,n){const o=d3.scaleLinear().domain([0,d3.max(e.values)]).range([0,m]),a=p.selectAll("rect").data(e.values);a.enter().append("rect"),a.attr("class",function(t,o){const a=e.min+o*e.delta;return"bar"+(a>=n?" selected":"")}).attr("width",f-2),a.transition().attr("transform",function(t,e){return"translate("+e*f+", "+(m-o(t))+")"}).attr("height",o),a.on("mousemove",function(t,n){const o=e.min+n*e.delta;d.get("threshold")!==o&&(d.set("threshold",o),d.changed())}),a.on("mouseover",function(n,o){let a=0;for(let n=e.values.length-1;n>=o;--n)a+=t*t*e.values[n];g.html(function(t,e){return(e/4046.86).toFixed(0).replace(/\B(?=(\d{3})+(?!\d))/g,",")+" acres at<br>"+t.toFixed(2)+" VGI or above"}(e.min+o*e.delta,a)),g.style("display","block"),g.transition().style({left:v.left+o*f+f/2+"px",top:d3.event.y-60+"px",opacity:1})}),a.on("mouseout",function(){g.transition().style("opacity",0).each("end",function(){g.style("display","none")})})}.bind(null,t,e,n),1e3/60)}(t.resolution,t.data.counts,t.data.threshold)});new o.a({layers:[new s.d({source:u}),new s.c({source:d})],target:"map",view:new a.a({center:[-9651695,4937351],zoom:13,minZoom:12,maxZoom:19})});let h=null;const f=15,m=150,p=d3.select("#plot").append("svg").attr("width",10*f).attr("height",m),v=p.node().getBoundingClientRect(),g=d3.select(document.body).append("div").attr("class","tip")}},[[304,0]]]);
//# sourceMappingURL=raster.js.map