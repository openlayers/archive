{"version":3,"sources":["webpack:///./icon-sprite-webgl.js"],"names":["iconInfo","offset","opacity","rotateWithView","rotation","scale","size","Math","PI","i","iconCount","length","icons","Array","info","_src_ol_style_js__WEBPACK_IMPORTED_MODULE_6__","crossOrigin","src","features","feature","geometry","e","_src_ol_geom_Point_js__WEBPACK_IMPORTED_MODULE_3__","random","_src_ol_Feature_js__WEBPACK_IMPORTED_MODULE_0__","setStyle","image","vectorSource","_src_ol_source_Vector_js__WEBPACK_IMPORTED_MODULE_5__","vector","_src_ol_layer_Vector_js__WEBPACK_IMPORTED_MODULE_4__","source","map","_src_ol_WebGLMap_js__WEBPACK_IMPORTED_MODULE_1__","layers","target","document","getElementById","view","_src_ol_View_js__WEBPACK_IMPORTED_MODULE_2__","center","zoom","overlayFeatures","clone","push","style","on","evt","innerHTML","window","setTimeout","forEachFeatureAtPixel","pixel","dragging","getEventPixel","originalEvent","hit","hasFeatureAtPixel","getTarget","cursor"],"mappings":"8JASA,MAAAA,IACAC,QAAA,KACAC,QAAA,EACAC,gBAAA,EACAC,SAAA,EACAC,MAAA,EACAC,MAAA,SAEAL,QAAA,QACAC,QAAA,IACAC,gBAAA,EACAC,SAAAG,KAAAC,GAAA,EACAH,MAAA,KACAC,MAAA,SAEAL,QAAA,MACAC,QAAA,GACAC,gBAAA,EACAC,SAAAG,KAAAC,GAAA,EACAH,MAAA,IACAC,MAAA,SAEAL,QAAA,OACAC,QAAA,EACAC,gBAAA,EACAC,SAAA,EACAC,MAAA,EACAC,MAAA,SAGA,IAAAG,EAEA,MAAAC,EAAAV,EAAAW,OACAC,EAAA,IAAAC,MAAAH,GACA,IAAAD,EAAA,EAAWA,EAAAC,IAAeD,EAAA,CAC1B,MAAAK,EAAAd,EAAAS,GACAG,EAAAH,GAAA,IAAAM,EAAA,GACAd,OAAAa,EAAAb,OACAC,QAAAY,EAAAZ,QACAC,eAAAW,EAAAX,eACAC,SAAAU,EAAAV,SACAC,MAAAS,EAAAT,MACAC,KAAAQ,EAAAR,KACAU,YAAA,YACAC,IAAA,uBAIA,MACAC,EAAA,IAAAL,MADA,KAEA,IAAAM,EAAAC,EACA,MAAAC,EAAA,KACA,IAAAZ,EAAA,EAAWA,EAJX,MAI6BA,EAC7BW,EAAA,IAAAE,EAAA,GACA,IAAAf,KAAAgB,SAAAF,EAAA,IAAAd,KAAAgB,SAAAF,KACAF,EAAA,IAAAK,EAAA,EAAAJ,IACAK,SACA,IAAAV,EAAA,GACAW,MAAAd,EAAAH,GAAAC,EAAA,OAGAQ,EAAAT,GAAAU,EAGA,MAAAQ,EAAA,IAAAC,EAAA,GACAV,aAEAW,EAAA,IAAAC,EAAA,GACAC,OAAAJ,IAGAK,EAAA,IAAAC,EAAA,GACAC,QAAAL,GACAM,OAAAC,SAAAC,eAAA,OACAC,KAAA,IAAAC,EAAA,GACAC,QAAA,KACAC,KAAA,MAIAC,KACA,IAAAjC,EAAA,EAAWA,EAjCX,IAiC6BA,GAAA,IAC7B,MAAAkC,EAAAzB,EAAAT,GAAAkC,QACAA,EAAAlB,SAAA,MACAiB,EAAAE,KAAAD,GAGA,IAAAb,EAAA,GACAE,MACAD,OAAA,IAAAH,EAAA,GACAV,SAAAwB,IAEAG,MAAA,IAAA9B,EAAA,GACAW,MAAAd,EAAAF,EAAA,OAIAsB,EAAAc,GAAA,iBAAAC,GACA,MAAAjC,EAAAsB,SAAAC,eAAA,QACAvB,EAAAkC,UACA,gEAEAC,OAAAC,WAAA,WACA,MAAAhC,KACAc,EAAAmB,sBAAAJ,EAAAK,MAAA,SAAAjC,GAEA,OADAD,EAAA0B,KAAAzB,IACA,IAGA,IAAAD,EAAAP,OACAG,EAAAkC,UAAA,oBACK9B,EAAAP,OAAA,EACLG,EAAAkC,UAAA,OAAA9B,EAAAP,OAAA,eAEAG,EAAAkC,UAAA,qCAEG,KAGHhB,EAAAc,GAAA,uBAAAC,GACA,GAAAA,EAAAM,SACA,OAEA,MAAAD,EAAApB,EAAAsB,cAAAP,EAAAQ,eACAC,EAAAxB,EAAAyB,kBAAAL,GACApB,EAAA0B,YAAAb,MAAAc,OAAAH,EAAA","file":"icon-sprite-webgl.js","sourcesContent":["import Feature from '../src/ol/Feature.js';\nimport Map from '../src/ol/WebGLMap.js';\nimport View from '../src/ol/View.js';\nimport Point from '../src/ol/geom/Point.js';\nimport VectorLayer from '../src/ol/layer/Vector.js';\nimport VectorSource from '../src/ol/source/Vector.js';\nimport {Icon, Style} from '../src/ol/style.js';\n\n\nconst iconInfo = [{\n  offset: [0, 0],\n  opacity: 1.0,\n  rotateWithView: true,\n  rotation: 0.0,\n  scale: 1.0,\n  size: [55, 55]\n}, {\n  offset: [110, 86],\n  opacity: 0.75,\n  rotateWithView: false,\n  rotation: Math.PI / 2.0,\n  scale: 1.25,\n  size: [55, 55]\n}, {\n  offset: [55, 0],\n  opacity: 0.5,\n  rotateWithView: true,\n  rotation: Math.PI / 3.0,\n  scale: 1.5,\n  size: [55, 86]\n}, {\n  offset: [212, 0],\n  opacity: 1.0,\n  rotateWithView: true,\n  rotation: 0.0,\n  scale: 1.0,\n  size: [44, 44]\n}];\n\nlet i;\n\nconst iconCount = iconInfo.length;\nconst icons = new Array(iconCount);\nfor (i = 0; i < iconCount; ++i) {\n  const info = iconInfo[i];\n  icons[i] = new Icon({\n    offset: info.offset,\n    opacity: info.opacity,\n    rotateWithView: info.rotateWithView,\n    rotation: info.rotation,\n    scale: info.scale,\n    size: info.size,\n    crossOrigin: 'anonymous',\n    src: 'data/Butterfly.png'\n  });\n}\n\nconst featureCount = 50000;\nconst features = new Array(featureCount);\nlet feature, geometry;\nconst e = 25000000;\nfor (i = 0; i < featureCount; ++i) {\n  geometry = new Point(\n    [2 * e * Math.random() - e, 2 * e * Math.random() - e]);\n  feature = new Feature(geometry);\n  feature.setStyle(\n    new Style({\n      image: icons[i % (iconCount - 1)]\n    })\n  );\n  features[i] = feature;\n}\n\nconst vectorSource = new VectorSource({\n  features: features\n});\nconst vector = new VectorLayer({\n  source: vectorSource\n});\n\nconst map = new Map({\n  layers: [vector],\n  target: document.getElementById('map'),\n  view: new View({\n    center: [0, 0],\n    zoom: 5\n  })\n});\n\nconst overlayFeatures = [];\nfor (i = 0; i < featureCount; i += 30) {\n  const clone = features[i].clone();\n  clone.setStyle(null);\n  overlayFeatures.push(clone);\n}\n\nnew VectorLayer({\n  map: map,\n  source: new VectorSource({\n    features: overlayFeatures\n  }),\n  style: new Style({\n    image: icons[iconCount - 1]\n  })\n});\n\nmap.on('click', function(evt) {\n  const info = document.getElementById('info');\n  info.innerHTML =\n      'Hold on a second, while I catch those butterflies for you ...';\n\n  window.setTimeout(function() {\n    const features = [];\n    map.forEachFeatureAtPixel(evt.pixel, function(feature) {\n      features.push(feature);\n      return false;\n    });\n\n    if (features.length === 1) {\n      info.innerHTML = 'Got one butterfly';\n    } else if (features.length > 1) {\n      info.innerHTML = 'Got ' + features.length + ' butterflies';\n    } else {\n      info.innerHTML = 'Couldn\\'t catch a single butterfly';\n    }\n  }, 1);\n});\n\nmap.on('pointermove', function(evt) {\n  if (evt.dragging) {\n    return;\n  }\n  const pixel = map.getEventPixel(evt.originalEvent);\n  const hit = map.hasFeatureAtPixel(pixel);\n  map.getTarget().style.cursor = hit ? 'pointer' : '';\n});\n"],"sourceRoot":""}