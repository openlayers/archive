(window.webpackJsonp=window.webpackJsonp||[]).push([[37],{272:function(e,t,n){"use strict";n.r(t);var o=n(23),r=n(5),d=n(4),c=n(49),i=n(31),a=n(10),w=n(16),g=n(2),s=n(222);const l=new a.d({source:new w.f}),f=new w.n({wrapX:!1}),u=new a.e({source:f,style:function(e){return[new g.g({image:new g.b({radius:8,fill:new g.c({color:"rgba(255, 0, 0, 0.2)"}),stroke:new g.f({color:"red",width:1})}),text:new g.h({text:e.get("node").id.toString(),fill:new g.c({color:"red"}),stroke:new g.f({color:"white",width:3})})})]}}),y=new w.n({wrapX:!1}),h=new a.e({source:y,style:function(e){return[new g.g({stroke:new g.f({color:"blue",width:1}),text:new g.h({text:e.get("edge").id.toString(),fill:new g.c({color:"blue"}),stroke:new g.f({color:"white",width:2})})})]}}),m=new w.n({wrapX:!1}),p=new a.e({source:m,style:function(e){return[new g.g({stroke:new g.f({color:"black",width:1}),fill:new g.c({color:"rgba(0, 255, 0, 0.2)"}),text:new g.h({font:"bold 12px sans-serif",text:e.get("face").id.toString(),fill:new g.c({color:"green"}),stroke:new g.f({color:"white",width:2})})})]}}),I=new r.a({layers:[l,p,h,u],target:"map",view:new d.a({center:[-11e6,46e5],zoom:16})}),b=topolis.createTopology();function k(e,t){const n=e.getFeatureById(t.id);e.removeFeature(n)}function v(e,t){let n;const o=e.getEdgeByPoint(t,5)[0];return n=o?e.modEdgeSplit(o,t):e.addIsoNode(t)}b.on("addnode",function(e){const t=new o.a({geometry:new c.e(e.coordinate),node:e});t.setId(e.id),f.addFeature(t)}),b.on("removenode",function(e){k(f,e)}),b.on("addedge",function(e){const t=new o.a({geometry:new c.a(e.coordinates),edge:e});t.setId(e.id),y.addFeature(t)}),b.on("modedge",function(e){y.getFeatureById(e.id).setGeometry(new c.a(e.coordinates))}),b.on("removeedge",function(e){k(y,e)}),b.on("addface",function(e){const t=b.getFaceGeometry(e),n=new o.a({geometry:new c.f(t),face:e});n.setId(e.id),m.addFeature(n)}),b.on("removeface",function(e){k(m,e)});const F=new i.d({type:"LineString"});F.on("drawend",function(e){const t=e.feature.getGeometry().getCoordinates(),n=t[0],o=t[t.length-1];let r,d;try{r=b.getNodeByPoint(n),d=b.getNodeByPoint(o);const c=b.getEdgeByPoint(n,5),i=b.getEdgeByPoint(o,5),a=b.getEdgesByLine(t);if(1===a.length&&!r&&!d&&0===c.length&&0===i.length)return b.remEdgeNewFace(a[0]),(r=a[0].start).face&&b.removeIsoNode(r),void((d=a[0].end).face&&b.removeIsoNode(d));r||(r=v(b,n),t[0]=r.coordinate),d||(d=v(b,o),t[t.length-1]=d.coordinate),b.addEdgeNewFaces(r,d,t)}catch(e){toastr.warning(e.toString())}}),I.addInteraction(F);const B=new i.j({source:y});I.addInteraction(B),I.addControl(new s.a)}},[[272,0]]]);
//# sourceMappingURL=topolis.js.map