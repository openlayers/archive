{"version":3,"sources":["webpack:///./custom-interactions.js"],"names":["app","Drag","_src_ol_interaction_js__WEBPACK_IMPORTED_MODULE_5__","call","this","handleDownEvent","prototype","handleDragEvent","handleMoveEvent","handleUpEvent","coordinate_","cursor_","feature_","previousCursor_","undefined","Object","_src_ol_index_js__WEBPACK_IMPORTED_MODULE_0__","evt","feature","map","forEachFeatureAtPixel","pixel","coordinate","deltaX","deltaY","getGeometry","translate","element","getTargetElement","style","cursor","pointFeature","_src_ol_Feature_js__WEBPACK_IMPORTED_MODULE_1__","_src_ol_geom_js__WEBPACK_IMPORTED_MODULE_4__","lineFeature","polygonFeature","_src_ol_Map_js__WEBPACK_IMPORTED_MODULE_2__","interactions","extend","layers","_src_ol_layer_js__WEBPACK_IMPORTED_MODULE_6__","source","_src_ol_source_js__WEBPACK_IMPORTED_MODULE_7__","url","features","_src_ol_style_js__WEBPACK_IMPORTED_MODULE_8__","image","anchor","anchorXUnits","anchorYUnits","opacity","src","stroke","width","color","fill","target","view","_src_ol_View_js__WEBPACK_IMPORTED_MODULE_3__","center","zoom"],"mappings":"6KAcA,MAAAA,GAOAC,KAAA,WAEAC,EAAA,EAAAC,KAAAC,MACAC,gBAAAL,EAAAC,KAAAK,UAAAD,gBACAE,gBAAAP,EAAAC,KAAAK,UAAAC,gBACAC,gBAAAR,EAAAC,KAAAK,UAAAE,gBACAC,cAAAT,EAAAC,KAAAK,UAAAG,gBAOAL,KAAAM,YAAA,KAMAN,KAAAO,QAAA,UAMAP,KAAAQ,SAAA,KAMAR,KAAAS,qBAAAC,IAGAC,OAAAC,EAAA,EAAAD,CAAAf,EAAAC,KAAAC,EAAA,GAOAF,EAAAC,KAAAK,UAAAD,gBAAA,SAAAY,GACA,MAEAC,EAFAD,EAAAE,IAEAC,sBAAAH,EAAAI,MACA,SAAAH,GACA,OAAAA,IAQA,OALAA,IACAd,KAAAM,YAAAO,EAAAK,WACAlB,KAAAQ,SAAAM,KAGAA,GAOAlB,EAAAC,KAAAK,UAAAC,gBAAA,SAAAU,GACA,MAAAM,EAAAN,EAAAK,WAAA,GAAAlB,KAAAM,YAAA,GACAc,EAAAP,EAAAK,WAAA,GAAAlB,KAAAM,YAAA,GAEAN,KAAAQ,SAAAa,cACAC,UAAAH,EAAAC,GAEApB,KAAAM,YAAA,GAAAO,EAAAK,WAAA,GACAlB,KAAAM,YAAA,GAAAO,EAAAK,WAAA,IAOAtB,EAAAC,KAAAK,UAAAE,gBAAA,SAAAS,GACA,GAAAb,KAAAO,QAAA,CACA,MACAO,EADAD,EAAAE,IACAC,sBAAAH,EAAAI,MACA,SAAAH,GACA,OAAAA,IAEAS,EAAAV,EAAAE,IAAAS,mBACAV,EACAS,EAAAE,MAAAC,QAAA1B,KAAAO,UACAP,KAAAS,gBAAAc,EAAAE,MAAAC,OACAH,EAAAE,MAAAC,OAAA1B,KAAAO,cAEKG,IAAAV,KAAAS,kBACLc,EAAAE,MAAAC,OAAA1B,KAAAS,gBACAT,KAAAS,qBAAAC,KASAd,EAAAC,KAAAK,UAAAG,cAAA,WAGA,OAFAL,KAAAM,YAAA,KACAN,KAAAQ,SAAA,MACA,GAIA,MAAAmB,EAAA,IAAAC,EAAA,MAAAC,EAAA,UAEAC,EAAA,IAAAF,EAAA,EACA,IAAAC,EAAA,4BAEAE,EAAA,IAAAH,EAAA,EACA,IAAAC,EAAA,6BACA,qCAGA,IAAAG,EAAA,GACAC,aAAAtB,OAAAb,EAAA,EAAAa,GAAAuB,QAAA,IAAAtC,EAAAC,OACAsC,QACA,IAAAC,EAAA,GACAC,OAAA,IAAAC,EAAA,GACAC,IAAA,yEAGA,IAAAH,EAAA,GACAC,OAAA,IAAAC,EAAA,GACAE,UAAAb,EAAAG,EAAAC,KAEAN,MAAA,IAAAgB,EAAA,GACAC,MAAA,IAAAD,EAAA,GACAE,QAAA,OACAC,aAAA,WACAC,aAAA,SACAC,QAAA,IACAC,IAAA,kBAEAC,OAAA,IAAAP,EAAA,GACAQ,MAAA,EACAC,OAAA,aAEAC,KAAA,IAAAV,EAAA,GACAS,OAAA,mBAKAE,OAAA,MACAC,KAAA,IAAAC,EAAA,GACAC,QAAA,KACAC,KAAA","file":"custom-interactions.js","sourcesContent":["import {inherits} from '../src/ol/index.js';\nimport Feature from '../src/ol/Feature.js';\nimport Map from '../src/ol/Map.js';\nimport View from '../src/ol/View.js';\nimport {LineString, Point, Polygon} from '../src/ol/geom.js';\nimport {defaults as defaultInteractions, Pointer as PointerInteraction} from '../src/ol/interaction.js';\nimport {Tile as TileLayer, Vector as VectorLayer} from '../src/ol/layer.js';\nimport {TileJSON, Vector as VectorSource} from '../src/ol/source.js';\nimport {Fill, Icon, Stroke, Style} from '../src/ol/style.js';\n\n\n/**\n * Define a namespace for the application.\n */\nconst app = {};\n\n\n/**\n * @constructor\n * @extends {module:ol/interaction/Pointer}\n */\napp.Drag = function() {\n\n  PointerInteraction.call(this, {\n    handleDownEvent: app.Drag.prototype.handleDownEvent,\n    handleDragEvent: app.Drag.prototype.handleDragEvent,\n    handleMoveEvent: app.Drag.prototype.handleMoveEvent,\n    handleUpEvent: app.Drag.prototype.handleUpEvent\n  });\n\n  /**\n   * @type {module:ol~Pixel}\n   * @private\n   */\n  this.coordinate_ = null;\n\n  /**\n   * @type {string|undefined}\n   * @private\n   */\n  this.cursor_ = 'pointer';\n\n  /**\n   * @type {module:ol/Feature~Feature}\n   * @private\n   */\n  this.feature_ = null;\n\n  /**\n   * @type {string|undefined}\n   * @private\n   */\n  this.previousCursor_ = undefined;\n\n};\ninherits(app.Drag, PointerInteraction);\n\n\n/**\n * @param {module:ol/MapBrowserEvent~MapBrowserEvent} evt Map browser event.\n * @return {boolean} `true` to start the drag sequence.\n */\napp.Drag.prototype.handleDownEvent = function(evt) {\n  const map = evt.map;\n\n  const feature = map.forEachFeatureAtPixel(evt.pixel,\n    function(feature) {\n      return feature;\n    });\n\n  if (feature) {\n    this.coordinate_ = evt.coordinate;\n    this.feature_ = feature;\n  }\n\n  return !!feature;\n};\n\n\n/**\n * @param {module:ol/MapBrowserEvent~MapBrowserEvent} evt Map browser event.\n */\napp.Drag.prototype.handleDragEvent = function(evt) {\n  const deltaX = evt.coordinate[0] - this.coordinate_[0];\n  const deltaY = evt.coordinate[1] - this.coordinate_[1];\n\n  const geometry = this.feature_.getGeometry();\n  geometry.translate(deltaX, deltaY);\n\n  this.coordinate_[0] = evt.coordinate[0];\n  this.coordinate_[1] = evt.coordinate[1];\n};\n\n\n/**\n * @param {module:ol/MapBrowserEvent~MapBrowserEvent} evt Event.\n */\napp.Drag.prototype.handleMoveEvent = function(evt) {\n  if (this.cursor_) {\n    const map = evt.map;\n    const feature = map.forEachFeatureAtPixel(evt.pixel,\n      function(feature) {\n        return feature;\n      });\n    const element = evt.map.getTargetElement();\n    if (feature) {\n      if (element.style.cursor != this.cursor_) {\n        this.previousCursor_ = element.style.cursor;\n        element.style.cursor = this.cursor_;\n      }\n    } else if (this.previousCursor_ !== undefined) {\n      element.style.cursor = this.previousCursor_;\n      this.previousCursor_ = undefined;\n    }\n  }\n};\n\n\n/**\n * @return {boolean} `false` to stop the drag sequence.\n */\napp.Drag.prototype.handleUpEvent = function() {\n  this.coordinate_ = null;\n  this.feature_ = null;\n  return false;\n};\n\n\nconst pointFeature = new Feature(new Point([0, 0]));\n\nconst lineFeature = new Feature(\n  new LineString([[-1e7, 1e6], [-1e6, 3e6]]));\n\nconst polygonFeature = new Feature(\n  new Polygon([[[-3e6, -1e6], [-3e6, 1e6],\n    [-1e6, 1e6], [-1e6, -1e6], [-3e6, -1e6]]]));\n\n\nconst map = new Map({\n  interactions: defaultInteractions().extend([new app.Drag()]),\n  layers: [\n    new TileLayer({\n      source: new TileJSON({\n        url: 'https://api.tiles.mapbox.com/v3/mapbox.geography-class.json?secure'\n      })\n    }),\n    new VectorLayer({\n      source: new VectorSource({\n        features: [pointFeature, lineFeature, polygonFeature]\n      }),\n      style: new Style({\n        image: new Icon(/** @type {module:ol/style/Icon~Options} */ ({\n          anchor: [0.5, 46],\n          anchorXUnits: 'fraction',\n          anchorYUnits: 'pixels',\n          opacity: 0.95,\n          src: 'data/icon.png'\n        })),\n        stroke: new Stroke({\n          width: 3,\n          color: [255, 0, 0, 1]\n        }),\n        fill: new Fill({\n          color: [0, 0, 255, 0.6]\n        })\n      })\n    })\n  ],\n  target: 'map',\n  view: new View({\n    center: [0, 0],\n    zoom: 2\n  })\n});\n"],"sourceRoot":""}