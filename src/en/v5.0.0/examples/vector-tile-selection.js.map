{"version":3,"sources":["webpack:///./vector-tile-selection.js"],"names":["selection","vtLayer","_src_ol_layer_VectorTile_js__WEBPACK_IMPORTED_MODULE_3__","declutter","source","_src_ol_source_VectorTile_js__WEBPACK_IMPORTED_MODULE_4__","format","_src_ol_format_MVT_js__WEBPACK_IMPORTED_MODULE_2__","url","style","feature","selected","get","_src_ol_style_js__WEBPACK_IMPORTED_MODULE_5__","stroke","color","width","fill","map","_src_ol_Map_js__WEBPACK_IMPORTED_MODULE_0__","layers","target","view","_src_ol_View_js__WEBPACK_IMPORTED_MODULE_1__","center","zoom","selectElement","document","getElementById","on","event","features","getFeaturesAtPixel","pixel","setStyle","getStyle","fid","value"],"mappings":"sJAQA,IAAAA,KAEA,MAEAC,EAAA,IAAAC,EAAA,GACAC,WAAA,EACAC,OAAA,IAAAC,EAAA,GACAC,OAAA,IAAAC,EAAA,EACAC,IAAA,wHAGAC,MAAA,SAAAC,GACA,MAAAC,IAAAX,EAAAU,EAAAE,IAVA,WAWA,WAAAC,EAAA,GACAC,OAAA,IAAAD,EAAA,GACAE,MAAAJ,EAAA,6BACAK,MAAAL,EAAA,MAEAM,KAAA,IAAAJ,EAAA,GACAE,MAAAJ,EAAA,kDAMAO,EAAA,IAAAC,EAAA,GACAC,QACAnB,GAEAoB,OAAA,MACAC,KAAA,IAAAC,EAAA,GACAC,QAAA,KACAC,KAAA,MAIAC,EAAAC,SAAAC,eAAA,QAEAV,EAAAW,GAAA,iBAAAC,GACA,MAAAC,EAAAb,EAAAc,mBAAAF,EAAAG,OACA,IAAAF,EAIA,OAHA/B,UAEAC,EAAAiC,SAAAjC,EAAAkC,YAGA,MAAAzB,EAAAqB,EAAA,GACAK,EAAA1B,EAAAE,IA7CA,UA+CA,iBAAAc,EAAAW,QACArC,MAGAA,EAAAoC,GAAA1B,EAGAT,EAAAiC,SAAAjC,EAAAkC","file":"vector-tile-selection.js","sourcesContent":["import Map from '../src/ol/Map.js';\nimport View from '../src/ol/View.js';\nimport MVT from '../src/ol/format/MVT.js';\nimport VectorTileLayer from '../src/ol/layer/VectorTile.js';\nimport VectorTileSource from '../src/ol/source/VectorTile.js';\nimport {Fill, Stroke, Style} from '../src/ol/style.js';\n\n// lookup for selection objects\nlet selection = {};\n// feature property to act as identifier\nconst idProp = 'iso_a3';\n\nconst vtLayer = new VectorTileLayer({\n  declutter: true,\n  source: new VectorTileSource({\n    format: new MVT(),\n    url: 'https://ahocevar.com/geoserver/gwc/service/tms/1.0.0/' +\n      'ne:ne_10m_admin_0_countries@EPSG%3A900913@pbf/{z}/{x}/{-y}.pbf'\n  }),\n  style: function(feature) {\n    const selected = !!selection[feature.get(idProp)];\n    return new Style({\n      stroke: new Stroke({\n        color: selected ? 'rgba(200,20,20,0.8)' : 'gray',\n        width: selected ? 2 : 1\n      }),\n      fill: new Fill({\n        color: selected ? 'rgba(200,20,20,0.2)' : 'rgba(20,20,20,0.9)'\n      })\n    });\n  }\n});\n\nconst map = new Map({\n  layers: [\n    vtLayer\n  ],\n  target: 'map',\n  view: new View({\n    center: [0, 0],\n    zoom: 2\n  })\n});\n\nconst selectElement = document.getElementById('type');\n\nmap.on('click', function(event) {\n  const features = map.getFeaturesAtPixel(event.pixel);\n  if (!features) {\n    selection = {};\n    // force redraw of layer style\n    vtLayer.setStyle(vtLayer.getStyle());\n    return;\n  }\n  const feature = features[0];\n  const fid = feature.get(idProp);\n\n  if (selectElement.value === 'singleselect') {\n    selection = {};\n  }\n  // add selected feature to lookup\n  selection[fid] = feature;\n\n  // force redraw of layer style\n  vtLayer.setStyle(vtLayer.getStyle());\n});\n"],"sourceRoot":""}