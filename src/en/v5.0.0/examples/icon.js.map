{"version":3,"sources":["webpack:///./icon.js"],"names":["iconFeature","_src_ol_Feature_js__WEBPACK_IMPORTED_MODULE_0__","geometry","_src_ol_geom_Point_js__WEBPACK_IMPORTED_MODULE_4__","name","population","rainfall","iconStyle","_src_ol_style_js__WEBPACK_IMPORTED_MODULE_8__","image","anchor","anchorXUnits","anchorYUnits","src","setStyle","vectorSource","_src_ol_source_Vector_js__WEBPACK_IMPORTED_MODULE_7__","features","vectorLayer","_src_ol_layer_js__WEBPACK_IMPORTED_MODULE_5__","source","rasterLayer","_src_ol_source_TileJSON_js__WEBPACK_IMPORTED_MODULE_6__","url","crossOrigin","map","_src_ol_Map_js__WEBPACK_IMPORTED_MODULE_1__","layers","target","document","getElementById","view","_src_ol_View_js__WEBPACK_IMPORTED_MODULE_3__","center","zoom","element","popup","_src_ol_Overlay_js__WEBPACK_IMPORTED_MODULE_2__","positioning","stopEvent","offset","addOverlay","on","evt","feature","forEachFeatureAtPixel","pixel","coordinates","getGeometry","getCoordinates","setPosition","$","popover","placement","html","content","get","e","dragging","getEventPixel","originalEvent","hit","hasFeatureAtPixel","getTarget","style","cursor"],"mappings":"4KAWA,MAAAA,EAAA,IAAAC,EAAA,GACAC,SAAA,IAAAC,EAAA,SACAC,KAAA,cACAC,WAAA,IACAC,SAAA,MAGAC,EAAA,IAAAC,EAAA,GACAC,MAAA,IAAAD,EAAA,GACAE,QAAA,OACAC,aAAA,WACAC,aAAA,SACAC,IAAA,oBAIAb,EAAAc,SAAAP,GAEA,MAAAQ,EAAA,IAAAC,EAAA,GACAC,UAAAjB,KAGAkB,EAAA,IAAAC,EAAA,GACAC,OAAAL,IAGAM,EAAA,IAAAF,EAAA,GACAC,OAAA,IAAAE,EAAA,GACAC,IAAA,qEACAC,YAAA,OAIAC,EAAA,IAAAC,EAAA,GACAC,QAAAN,EAAAH,GACAU,OAAAC,SAAAC,eAAA,OACAC,KAAA,IAAAC,EAAA,GACAC,QAAA,KACAC,KAAA,MAIAC,EAAAN,SAAAC,eAAA,SAEAM,EAAA,IAAAC,EAAA,GACAF,UACAG,YAAA,gBACAC,WAAA,EACAC,QAAA,SAEAf,EAAAgB,WAAAL,GAGAX,EAAAiB,GAAA,iBAAAC,GACA,MAAAC,EAAAnB,EAAAoB,sBAAAF,EAAAG,MACA,SAAAF,GACA,OAAAA,IAEA,GAAAA,EAAA,CACA,MAAAG,EAAAH,EAAAI,cAAAC,iBACAb,EAAAc,YAAAH,GACAI,EAAAhB,GAAAiB,SACAC,UAAA,MACAC,MAAA,EACAC,QAAAX,EAAAY,IAAA,UAEAL,EAAAhB,GAAAiB,QAAA,aAEAD,EAAAhB,GAAAiB,QAAA,aAKA3B,EAAAiB,GAAA,uBAAAe,GACA,GAAAA,EAAAC,SAEA,YADAP,EAAAhB,GAAAiB,QAAA,WAGA,MAAAN,EAAArB,EAAAkC,cAAAF,EAAAG,eACAC,EAAApC,EAAAqC,kBAAAhB,GACArB,EAAAsC,YAAAC,MAAAC,OAAAJ,EAAA","file":"icon.js","sourcesContent":["import Feature from '../src/ol/Feature.js';\nimport Map from '../src/ol/Map.js';\nimport Overlay from '../src/ol/Overlay.js';\nimport View from '../src/ol/View.js';\nimport Point from '../src/ol/geom/Point.js';\nimport {Tile as TileLayer, Vector as VectorLayer} from '../src/ol/layer.js';\nimport TileJSON from '../src/ol/source/TileJSON.js';\nimport VectorSource from '../src/ol/source/Vector.js';\nimport {Icon, Style} from '../src/ol/style.js';\n\n\nconst iconFeature = new Feature({\n  geometry: new Point([0, 0]),\n  name: 'Null Island',\n  population: 4000,\n  rainfall: 500\n});\n\nconst iconStyle = new Style({\n  image: new Icon(/** @type {module:ol/style/Icon~Options} */ ({\n    anchor: [0.5, 46],\n    anchorXUnits: 'fraction',\n    anchorYUnits: 'pixels',\n    src: 'data/icon.png'\n  }))\n});\n\niconFeature.setStyle(iconStyle);\n\nconst vectorSource = new VectorSource({\n  features: [iconFeature]\n});\n\nconst vectorLayer = new VectorLayer({\n  source: vectorSource\n});\n\nconst rasterLayer = new TileLayer({\n  source: new TileJSON({\n    url: 'https://api.tiles.mapbox.com/v3/mapbox.geography-class.json?secure',\n    crossOrigin: ''\n  })\n});\n\nconst map = new Map({\n  layers: [rasterLayer, vectorLayer],\n  target: document.getElementById('map'),\n  view: new View({\n    center: [0, 0],\n    zoom: 3\n  })\n});\n\nconst element = document.getElementById('popup');\n\nconst popup = new Overlay({\n  element: element,\n  positioning: 'bottom-center',\n  stopEvent: false,\n  offset: [0, -50]\n});\nmap.addOverlay(popup);\n\n// display popup on click\nmap.on('click', function(evt) {\n  const feature = map.forEachFeatureAtPixel(evt.pixel,\n    function(feature) {\n      return feature;\n    });\n  if (feature) {\n    const coordinates = feature.getGeometry().getCoordinates();\n    popup.setPosition(coordinates);\n    $(element).popover({\n      placement: 'top',\n      html: true,\n      content: feature.get('name')\n    });\n    $(element).popover('show');\n  } else {\n    $(element).popover('destroy');\n  }\n});\n\n// change mouse cursor when over marker\nmap.on('pointermove', function(e) {\n  if (e.dragging) {\n    $(element).popover('destroy');\n    return;\n  }\n  const pixel = map.getEventPixel(e.originalEvent);\n  const hit = map.hasFeatureAtPixel(pixel);\n  map.getTarget().style.cursor = hit ? 'pointer' : '';\n});\n"],"sourceRoot":""}