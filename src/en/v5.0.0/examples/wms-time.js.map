{"version":3,"sources":["webpack:///./wms-time.js"],"names":["threeHoursAgo","Date","Math","round","now","extent","Object","_src_ol_proj_js__WEBPACK_IMPORTED_MODULE_4__","startDate","animationId","layers","_src_ol_layer_Tile_js__WEBPACK_IMPORTED_MODULE_3__","source","_src_ol_source_Stamen_js__WEBPACK_IMPORTED_MODULE_5__","layer","_src_ol_source_TileWMS_js__WEBPACK_IMPORTED_MODULE_6__","attributions","url","params","LAYERS","_src_ol_Map_js__WEBPACK_IMPORTED_MODULE_0__","target","view","_src_ol_View_js__WEBPACK_IMPORTED_MODULE_1__","center","_src_ol_extent_js__WEBPACK_IMPORTED_MODULE_2__","zoom","updateInfo","document","getElementById","innerHTML","toISOString","setTime","setMinutes","getMinutes","getSource","updateParams","TIME","stop","window","clearInterval","addEventListener","setInterval"],"mappings":"0JAQA,SAAAA,IACA,WAAAC,KAAA,KAAAC,KAAAC,MAAAF,KAAAG,MAAA,aAGA,MAAAC,EAAAC,OAAAC,EAAA,EAAAD,GAAA,wCACA,IAAAE,EAAAR,IAEA,IAAAS,EAAA,KAEA,MAAAC,GACA,IAAAC,EAAA,GACAC,OAAA,IAAAC,EAAA,GACAC,MAAA,cAGA,IAAAH,EAAA,GACAN,SACAO,OAAA,IAAAG,EAAA,GACAC,cAAA,yBACAC,IAAA,iEACAC,QAAeC,OAAA,wBAIf,IAAAC,EAAA,GACAV,SACAW,OAAA,MACAC,KAAA,IAAAC,EAAA,GACAC,OAAAlB,OAAAmB,EAAA,EAAAnB,CAAAD,GACAqB,KAAA,MAIA,SAAAC,IACAC,SAAAC,eAAA,QACAC,UAAAtB,EAAAuB,cAGA,SAAAC,IACAxB,EAAAyB,WAAAzB,EAAA0B,aAAA,IACA1B,EAAAP,KAAAG,QACAI,EAAAR,KAEAU,EAAA,GAAAyB,YAAAC,cAAsCC,KAAA7B,EAAAuB,gBACtCJ,IAEAK,IAEA,MAAAM,EAAA,WACA,OAAA7B,IACA8B,OAAAC,cAAA/B,GACAA,EAAA,OASAmB,SAAAC,eAAA,QACAY,iBAAA,QANA,WACAH,IACA7B,EAAA8B,OAAAG,YAAAV,EAAA,OAIA,GAEAJ,SAAAC,eAAA,SACAY,iBAAA,QAAAH,GAAA,GAEAX","file":"wms-time.js","sourcesContent":["import Map from '../src/ol/Map.js';\nimport View from '../src/ol/View.js';\nimport {getCenter} from '../src/ol/extent.js';\nimport TileLayer from '../src/ol/layer/Tile.js';\nimport {transformExtent} from '../src/ol/proj.js';\nimport Stamen from '../src/ol/source/Stamen.js';\nimport TileWMS from '../src/ol/source/TileWMS.js';\n\nfunction threeHoursAgo() {\n  return new Date(Math.round(Date.now() / 3600000) * 3600000 - 3600000 * 3);\n}\n\nconst extent = transformExtent([-126, 24, -66, 50], 'EPSG:4326', 'EPSG:3857');\nlet startDate = threeHoursAgo();\nconst frameRate = 0.5; // frames per second\nlet animationId = null;\n\nconst layers = [\n  new TileLayer({\n    source: new Stamen({\n      layer: 'terrain'\n    })\n  }),\n  new TileLayer({\n    extent: extent,\n    source: new TileWMS({\n      attributions: ['Iowa State University'],\n      url: 'https://mesonet.agron.iastate.edu/cgi-bin/wms/nexrad/n0r-t.cgi',\n      params: {'LAYERS': 'nexrad-n0r-wmst'}\n    })\n  })\n];\nconst map = new Map({\n  layers: layers,\n  target: 'map',\n  view: new View({\n    center: getCenter(extent),\n    zoom: 4\n  })\n});\n\nfunction updateInfo() {\n  const el = document.getElementById('info');\n  el.innerHTML = startDate.toISOString();\n}\n\nfunction setTime() {\n  startDate.setMinutes(startDate.getMinutes() + 15);\n  if (startDate > Date.now()) {\n    startDate = threeHoursAgo();\n  }\n  layers[1].getSource().updateParams({'TIME': startDate.toISOString()});\n  updateInfo();\n}\nsetTime();\n\nconst stop = function() {\n  if (animationId !== null) {\n    window.clearInterval(animationId);\n    animationId = null;\n  }\n};\n\nconst play = function() {\n  stop();\n  animationId = window.setInterval(setTime, 1000 / frameRate);\n};\n\nconst startButton = document.getElementById('play');\nstartButton.addEventListener('click', play, false);\n\nconst stopButton = document.getElementById('pause');\nstopButton.addEventListener('click', stop, false);\n\nupdateInfo();\n"],"sourceRoot":""}