(window.webpackJsonp=window.webpackJsonp||[]).push([[134],{396:function(t,e,i){"use strict";i.r(e);var o=i(1),n=i(93),r=i(0),s=i(3),a=i(60),l=i(113),h=i(22),d=i(83),u=i(24),c=i(8),p=i(11),_=i(6),m=i(158),f=i(2),T=i(45),g=i(132),v=i(53),y=i(61),E=function(t){function CustomTile(e,i,o,n,r,s){t.call(this,e,i),this.src_=o,this.extent_=n,this.preemptive_=r,this.grid_=null,this.keys_=null,this.data_=null,this.jsonp_=s}return t&&(CustomTile.__proto__=t),CustomTile.prototype=Object.create(t&&t.prototype),CustomTile.prototype.constructor=CustomTile,CustomTile.prototype.getImage=function(){return null},CustomTile.prototype.getData=function(t){if(!this.grid_||!this.keys_)return null;var e=(t[0]-this.extent_[0])/(this.extent_[2]-this.extent_[0]),i=(t[1]-this.extent_[1])/(this.extent_[3]-this.extent_[1]),o=this.grid_[Math.floor((1-i)*this.grid_.length)];if("string"!=typeof o)return null;var n=o.charCodeAt(Math.floor(e*o.length));n>=93&&n--,n>=35&&n--;var r=null;if((n-=32)in this.keys_){var s=this.keys_[n];r=this.data_&&s in this.data_?this.data_[s]:s}return r},CustomTile.prototype.forDataAtCoordinate=function(t,e,i,o){this.state==h.a.IDLE&&!0===o?(Object(c.b)(this,p.a.CHANGE,function(o){e.call(i,this.getData(t))},this),this.loadInternal_()):!0===o?setTimeout(function(){e.call(i,this.getData(t))}.bind(this),0):e.call(i,this.getData(t))},CustomTile.prototype.getKey=function(){return this.src_},CustomTile.prototype.handleError_=function(){this.state=h.a.ERROR,this.changed()},CustomTile.prototype.handleLoad_=function(t){this.grid_=t.grid,this.keys_=t.keys,this.data_=t.data,this.state=h.a.EMPTY,this.changed()},CustomTile.prototype.loadInternal_=function(){if(this.state==h.a.IDLE)if(this.state=h.a.LOADING,this.jsonp_)Object(m.a)(this.src_,this.handleLoad_.bind(this),this.handleError_.bind(this));else{var t=new XMLHttpRequest;t.addEventListener("load",this.onXHRLoad_.bind(this)),t.addEventListener("error",this.onXHRError_.bind(this)),t.open("GET",this.src_),t.send()}},CustomTile.prototype.onXHRLoad_=function(t){var e=t.target;if(!e.status||e.status>=200&&e.status<300){var i;try{i=JSON.parse(e.responseText)}catch(t){return void this.handleError_()}this.handleLoad_(i)}else this.handleError_()},CustomTile.prototype.onXHRError_=function(t){this.handleError_()},CustomTile.prototype.load=function(){this.preemptive_&&this.loadInternal_()},CustomTile}(l.a),b=function(t){function UTFGrid(e){if(t.call(this,{projection:Object(f.g)("EPSG:3857"),state:T.a.LOADING}),this.preemptive_=void 0===e.preemptive||e.preemptive,this.tileUrlFunction_=d.d,this.template_=void 0,this.jsonp_=e.jsonp||!1,e.url)if(this.jsonp_)Object(m.a)(e.url,this.handleTileJSONResponse.bind(this),this.handleTileJSONError.bind(this));else{var i=new XMLHttpRequest;i.addEventListener("load",this.onXHRLoad_.bind(this)),i.addEventListener("error",this.onXHRError_.bind(this)),i.open("GET",e.url),i.send()}else e.tileJSON?this.handleTileJSONResponse(e.tileJSON):Object(u.a)(!1,51)}return t&&(UTFGrid.__proto__=t),UTFGrid.prototype=Object.create(t&&t.prototype),UTFGrid.prototype.constructor=UTFGrid,UTFGrid.prototype.onXHRLoad_=function(t){var e=t.target;if(!e.status||e.status>=200&&e.status<300){var i;try{i=JSON.parse(e.responseText)}catch(t){return void this.handleTileJSONError()}this.handleTileJSONResponse(i)}else this.handleTileJSONError()},UTFGrid.prototype.onXHRError_=function(t){this.handleTileJSONError()},UTFGrid.prototype.getTemplate=function(){return this.template_},UTFGrid.prototype.forDataAtCoordinateAndResolution=function(t,e,i,o){if(this.tileGrid){var n=this.tileGrid.getTileCoordForCoordAndResolution(t,e);this.getTile(n[0],n[1],n[2],1,this.getProjection()).forDataAtCoordinate(t,i,null,o)}else!0===o?setTimeout(function(){i(null)},0):i(null)},UTFGrid.prototype.handleTileJSONError=function(){this.setState(T.a.ERROR)},UTFGrid.prototype.handleTileJSONResponse=function(t){var e,i=Object(f.g)("EPSG:4326"),o=this.getProjection();if(void 0!==t.bounds){var n=Object(f.j)(i,o);e=Object(_.a)(t.bounds,n)}var r=t.minzoom||0,s=t.maxzoom||22,a=Object(y.b)({extent:Object(y.c)(o),maxZoom:s,minZoom:r});this.tileGrid=a,this.template_=t.template;var l=t.grids;if(l){if(this.tileUrlFunction_=Object(d.a)(l,a),void 0!==t.attribution){var h=void 0!==e?e:i.getExtent();this.setAttributions(function(e){return Object(_.F)(h,e.extent)?[t.attribution]:null})}this.setState(T.a.READY)}else this.setState(T.a.ERROR)},UTFGrid.prototype.getTile=function(t,e,i,o,n){var r=Object(v.d)(t,e,i);if(this.tileCache.containsKey(r))return this.tileCache.get(r);var s=[t,e,i],a=this.getTileCoordForTileUrlFunction(s,n),l=this.tileUrlFunction_(a,o,n),d=new E(s,void 0!==l?h.a.IDLE:h.a.EMPTY,void 0!==l?l:"",this.tileGrid.getTileCoordExtent(s),this.preemptive_,this.jsonp_);return this.tileCache.set(r,d),d},UTFGrid.prototype.useTile=function(t,e,i){var o=Object(v.d)(t,e,i);this.tileCache.containsKey(o)&&this.tileCache.get(o)},UTFGrid}(g.b),O="pk.eyJ1IjoiYWhvY2V2YXIiLCJhIjoiY2pzbmg0Nmk5MGF5NzQzbzRnbDNoeHJrbiJ9.7_-_gL8ur7ZtEiNwRfCy7Q",C=new s.a({source:new a.a({url:"https://api.tiles.mapbox.com/v4/mapbox.geography-class.json?secure&access_token="+O})}),j=new b({url:"https://api.tiles.mapbox.com/v4/mapbox.geography-class.json?secure&access_token="+O}),R=new s.a({source:j}),G=new r.a({center:[0,0],zoom:1}),F=document.getElementById("map"),L=new o.a({layers:[C,R],target:F,view:G}),S=document.getElementById("country-info"),x=document.getElementById("country-flag"),J=document.getElementById("country-name"),U=new n.a({element:S,offset:[15,15],stopEvent:!1});L.addOverlay(U);var w=function(t){var e=G.getResolution();j.forDataAtCoordinateAndResolution(t,e,function(e){F.style.cursor=e?"pointer":"",e&&(x.src="data:image/png;base64,"+e.flag_png,J.innerHTML=e.admin),U.setPosition(e?t:void 0)})};L.on("pointermove",function(t){if(!t.dragging){var e=L.getEventCoordinate(t.originalEvent);w(e)}}),L.on("click",function(t){w(t.coordinate)})}},[[396,0]]]);
//# sourceMappingURL=utfgrid.js.map