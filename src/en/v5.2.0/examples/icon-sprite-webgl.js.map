{"version":3,"sources":["webpack:///./icon-sprite-webgl.js"],"names":["i","iconInfo","offset","opacity","rotateWithView","rotation","scale","size","Math","PI","iconCount","length","icons","Array","const","info","_src_ol_style_js__WEBPACK_IMPORTED_MODULE_6__","crossOrigin","src","feature","geometry","features","e","_src_ol_geom_Point_js__WEBPACK_IMPORTED_MODULE_3__","random","_src_ol_Feature_js__WEBPACK_IMPORTED_MODULE_0__","setStyle","_src_ol_style_js__WEBPACK_IMPORTED_MODULE_7__","image","vectorSource","_src_ol_source_Vector_js__WEBPACK_IMPORTED_MODULE_5__","vector","_src_ol_layer_Vector_js__WEBPACK_IMPORTED_MODULE_4__","source","map","_src_ol_WebGLMap_js__WEBPACK_IMPORTED_MODULE_1__","layers","target","document","getElementById","view","_src_ol_View_js__WEBPACK_IMPORTED_MODULE_2__","center","zoom","overlayFeatures","clone","push","style","on","evt","innerHTML","window","setTimeout","forEachFeatureAtPixel","pixel","dragging","getEventPixel","originalEvent","hit","hasFeatureAtPixel","getTarget","cursor"],"mappings":"sGAuCIA,mEA9BEC,IACJC,QAAS,EAAG,GACZC,QAAS,EACTC,gBAAgB,EAChBC,SAAU,EACVC,MAAO,EACPC,MAAO,GAAI,MAEXL,QAAS,IAAK,IACdC,QAAS,IACTC,gBAAgB,EAChBC,SAAUG,KAAKC,GAAK,EACpBH,MAAO,KACPC,MAAO,GAAI,MAEXL,QAAS,GAAI,GACbC,QAAS,GACTC,gBAAgB,EAChBC,SAAUG,KAAKC,GAAK,EACpBH,MAAO,IACPC,MAAO,GAAI,MAEXL,QAAS,IAAK,GACdC,QAAS,EACTC,gBAAgB,EAChBC,SAAU,EACVC,MAAO,EACPC,MAAO,GAAI,MAKPG,EAAYT,EAASU,OACrBC,EAAQ,IAAIC,MAAMH,GACxB,IAAKV,EAAI,EAAGA,EAAIU,IAAaV,EAAG,CAC9Bc,IAAMC,EAAOd,EAASD,GACtBY,EAAMZ,GAAK,IAAIgB,EAAA,GACbd,OAAQa,EAAKb,OACbC,QAASY,EAAKZ,QACdC,eAAgBW,EAAKX,eACrBC,SAAUU,EAAKV,SACfC,MAAOS,EAAKT,MACZC,KAAMQ,EAAKR,KACXU,YAAa,YACbC,IAAK,uBAITJ,IAEIK,EAASC,EADPC,EAAW,IAAIR,MADA,KAGfS,EAAI,KACV,IAAKtB,EAAI,EAAGA,EAJS,MAIWA,EAC9BoB,EAAW,IAAIG,EAAA,GACZ,IAAQf,KAAKgB,SAAWF,EAAG,IAAQd,KAAKgB,SAAWF,KACtDH,EAAU,IAAIM,EAAA,EAAQL,IACdM,SACN,IAAIC,EAAA,GACFC,MAAOhB,EAAMZ,GAAKU,EAAY,OAGlCW,EAASrB,GAAKmB,EAGhBL,IAAMe,EAAe,IAAIC,EAAA,GACvBT,SAAUA,IAENU,EAAS,IAAIC,EAAA,GACjBC,OAAQJ,IAGJK,EAAM,IAAIC,EAAA,GACdC,QAASL,GACTM,OAAQC,SAASC,eAAe,OAChCC,KAAM,IAAIC,EAAA,GACRC,QAAS,EAAG,GACZC,KAAM,MAIJC,KACN,IAAK5C,EAAI,EAAGA,EAjCS,IAiCSA,GAAK,GAAI,CACrCc,IAAM+B,EAAQxB,EAASrB,GAAG6C,QAC1BA,EAAMnB,SAAS,MACfkB,EAAgBE,KAAKD,GAGvB,IAAIb,EAAA,GACFE,IAAKA,EACLD,OAAQ,IAAIH,EAAA,GACVT,SAAUuB,IAEZG,MAAO,IAAIpB,EAAA,GACTC,MAAOhB,EAAMF,EAAY,OAI7BwB,EAAIc,GAAG,QAAS,SAASC,GACvBnC,IAAMC,EAAOuB,SAASC,eAAe,QACrCxB,EAAKmC,UACD,gEAEJC,OAAOC,WAAW,WAChBtC,IAAMO,KACNa,EAAImB,sBAAsBJ,EAAIK,MAAO,SAASnC,GAE5C,OADAE,EAASyB,KAAK3B,IACP,IAGe,IAApBE,EAASV,OACXI,EAAKmC,UAAY,oBACR7B,EAASV,OAAS,EAC3BI,EAAKmC,UAAY,OAAS7B,EAASV,OAAS,eAE5CI,EAAKmC,UAAY,qCAElB,KAGLhB,EAAIc,GAAG,cAAe,SAASC,GAC7B,IAAIA,EAAIM,SAAR,CAGAzC,IAAMwC,EAAQpB,EAAIsB,cAAcP,EAAIQ,eAC9BC,EAAMxB,EAAIyB,kBAAkBL,GAClCpB,EAAI0B,YAAYb,MAAMc,OAASH,EAAM,UAAY","file":"icon-sprite-webgl.js","sourcesContent":["import Feature from '../src/ol/Feature.js';\nimport Map from '../src/ol/WebGLMap.js';\nimport View from '../src/ol/View.js';\nimport Point from '../src/ol/geom/Point.js';\nimport VectorLayer from '../src/ol/layer/Vector.js';\nimport VectorSource from '../src/ol/source/Vector.js';\nimport {Icon, Style} from '../src/ol/style.js';\n\n\nconst iconInfo = [{\n  offset: [0, 0],\n  opacity: 1.0,\n  rotateWithView: true,\n  rotation: 0.0,\n  scale: 1.0,\n  size: [55, 55]\n}, {\n  offset: [110, 86],\n  opacity: 0.75,\n  rotateWithView: false,\n  rotation: Math.PI / 2.0,\n  scale: 1.25,\n  size: [55, 55]\n}, {\n  offset: [55, 0],\n  opacity: 0.5,\n  rotateWithView: true,\n  rotation: Math.PI / 3.0,\n  scale: 1.5,\n  size: [55, 86]\n}, {\n  offset: [212, 0],\n  opacity: 1.0,\n  rotateWithView: true,\n  rotation: 0.0,\n  scale: 1.0,\n  size: [44, 44]\n}];\n\nlet i;\n\nconst iconCount = iconInfo.length;\nconst icons = new Array(iconCount);\nfor (i = 0; i < iconCount; ++i) {\n  const info = iconInfo[i];\n  icons[i] = new Icon({\n    offset: info.offset,\n    opacity: info.opacity,\n    rotateWithView: info.rotateWithView,\n    rotation: info.rotation,\n    scale: info.scale,\n    size: info.size,\n    crossOrigin: 'anonymous',\n    src: 'data/Butterfly.png'\n  });\n}\n\nconst featureCount = 50000;\nconst features = new Array(featureCount);\nlet feature, geometry;\nconst e = 25000000;\nfor (i = 0; i < featureCount; ++i) {\n  geometry = new Point(\n    [2 * e * Math.random() - e, 2 * e * Math.random() - e]);\n  feature = new Feature(geometry);\n  feature.setStyle(\n    new Style({\n      image: icons[i % (iconCount - 1)]\n    })\n  );\n  features[i] = feature;\n}\n\nconst vectorSource = new VectorSource({\n  features: features\n});\nconst vector = new VectorLayer({\n  source: vectorSource\n});\n\nconst map = new Map({\n  layers: [vector],\n  target: document.getElementById('map'),\n  view: new View({\n    center: [0, 0],\n    zoom: 5\n  })\n});\n\nconst overlayFeatures = [];\nfor (i = 0; i < featureCount; i += 30) {\n  const clone = features[i].clone();\n  clone.setStyle(null);\n  overlayFeatures.push(clone);\n}\n\nnew VectorLayer({\n  map: map,\n  source: new VectorSource({\n    features: overlayFeatures\n  }),\n  style: new Style({\n    image: icons[iconCount - 1]\n  })\n});\n\nmap.on('click', function(evt) {\n  const info = document.getElementById('info');\n  info.innerHTML =\n      'Hold on a second, while I catch those butterflies for you ...';\n\n  window.setTimeout(function() {\n    const features = [];\n    map.forEachFeatureAtPixel(evt.pixel, function(feature) {\n      features.push(feature);\n      return false;\n    });\n\n    if (features.length === 1) {\n      info.innerHTML = 'Got one butterfly';\n    } else if (features.length > 1) {\n      info.innerHTML = 'Got ' + features.length + ' butterflies';\n    } else {\n      info.innerHTML = 'Couldn\\'t catch a single butterfly';\n    }\n  }, 1);\n});\n\nmap.on('pointermove', function(evt) {\n  if (evt.dragging) {\n    return;\n  }\n  const pixel = map.getEventPixel(evt.originalEvent);\n  const hit = map.hasFeatureAtPixel(pixel);\n  map.getTarget().style.cursor = hit ? 'pointer' : '';\n});\n"],"sourceRoot":""}