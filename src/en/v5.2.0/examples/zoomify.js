(window.webpackJsonp=window.webpackJsonp||[]).push([[166],{400:function(e,t,i){"use strict";i.r(t);var o=i(1),r=i(0),n=i(3),a=i(131),s=i(199),c=i(22),u=i(83),l=i(24),p=i(27),f=i(6),m=i(57),h=i(92),g=i(109),y={DEFAULT:"default",TRUNCATED:"truncated"},T=function(e){function CustomTile(t,i,o,r,n,a,s){e.call(this,i,o,r,n,a,s),this.zoomifyImage_=null,this.tileSize_=Object(m.d)(t.getTileSize(i[0]))}return e&&(CustomTile.__proto__=e),CustomTile.prototype=Object.create(e&&e.prototype),CustomTile.prototype.constructor=CustomTile,CustomTile.prototype.getImage=function(){if(this.zoomifyImage_)return this.zoomifyImage_;var t=e.prototype.getImage.call(this);if(this.state==c.a.LOADED){var i=this.tileSize_;if(t.width==i[0]&&t.height==i[1])return this.zoomifyImage_=t,t;var o=Object(p.a)(i[0],i[1]);return o.drawImage(t,0,0),this.zoomifyImage_=o.canvas,o.canvas}return t},CustomTile}(s.a),v=function(e){function Zoomify(t){var i=t||{},o=i.size,r=void 0!==i.tierSizeCalculation?i.tierSizeCalculation:y.DEFAULT,n=o[0],s=o[1],c=i.extent||[0,-o[1],o[0],0],p=[],m=i.tileSize||a.b,h=m;switch(r){case y.DEFAULT:for(;n>h||s>h;)p.push([Math.ceil(n/h),Math.ceil(s/h)]),h+=h;break;case y.TRUNCATED:for(var v=n,z=s;v>h||z>h;)p.push([Math.ceil(v/h),Math.ceil(z/h)]),v>>=1,z>>=1;break;default:Object(l.a)(!1,53)}p.push([1,1]),p.reverse();for(var d=[1],b=[0],w=1,O=p.length;w<O;w++)d.push(1<<w),b.push(p[w-1][0]*p[w-1][1]+b[w-1]);d.reverse();var _=new g.a({tileSize:m,extent:c,origin:Object(f.C)(c),resolutions:d}),C=i.url;C&&-1==C.indexOf("{TileGroup}")&&-1==C.indexOf("{tileIndex}")&&(C+="{TileGroup}/{z}-{x}-{y}.jpg");var D=Object(u.c)(C);var I=Object(u.b)(D.map(function(e){return function(t,i,o){if(t){var r=t[0],n=t[1],a=-t[2]-1,s=n+a*p[r][0],c=_.getTileSize(r),u={z:r,x:n,y:a,tileIndex:s,TileGroup:"TileGroup"+((s+b[r])/c|0)};return e.replace(/\{(\w+?)\}/g,function(e,t){return u[t]})}}})),j=T.bind(null,_);e.call(this,{attributions:i.attributions,cacheSize:i.cacheSize,crossOrigin:i.crossOrigin,projection:i.projection,reprojectionErrorThreshold:i.reprojectionErrorThreshold,tileClass:j,tileGrid:_,tileUrlFunction:I,transition:i.transition})}return e&&(Zoomify.__proto__=e),Zoomify.prototype=Object.create(e&&e.prototype),Zoomify.prototype.constructor=Zoomify,Zoomify}(h.a),z="http://vips.vtech.fr/cgi-bin/iipsrv.fcgi?zoomify=/mnt/MD1/AD00/plan_CHU-4HD-01/FOND.TIF/",d=new n.a({source:new v({url:z,size:[9911,6100],crossOrigin:"anonymous"})}),b=[0,-6100,9911,0];new o.a({layers:[d],target:"map",view:new r.a({resolutions:d.getSource().getTileGrid().getResolutions(),extent:b})}).getView().fit(b),document.getElementById("zoomifyProtocol").addEventListener("change",function(e){var t=e.currentTarget.value;"iip"===t?d.setSource(new v({url:"http://vips.vtech.fr/cgi-bin/iipsrv.fcgi?FIF=/mnt/MD1/AD00/plan_CHU-4HD-01/FOND.TIF&JTL={z},{tileIndex}",size:[9911,6100],crossOrigin:"anonymous"})):"zoomify"===t&&d.setSource(new v({url:z,size:[9911,6100],crossOrigin:"anonymous"}))})}},[[400,0]]]);
//# sourceMappingURL=zoomify.js.map