(window.webpackJsonp=window.webpackJsonp||[]).push([[3],{391:function(e,t,i){"use strict";i.r(t);var r=i(1),a=i(0),s=i(3),o=i(72),n=i(4),c=i(144),g=i(24),h=i(8),u=i(11),p=i(6),m=i(12),_=i(94),l=i(110),I=function(e){function ImageArcGISRest(t){var i=t||{};e.call(this,{attributions:i.attributions,projection:i.projection,resolutions:i.resolutions}),this.crossOrigin_=void 0!==i.crossOrigin?i.crossOrigin:null,this.hidpi_=void 0===i.hidpi||i.hidpi,this.url_=i.url,this.imageLoadFunction_=void 0!==i.imageLoadFunction?i.imageLoadFunction:_.b,this.params_=i.params||{},this.image_=null,this.imageSize_=[0,0],this.renderedRevision_=0,this.ratio_=void 0!==i.ratio?i.ratio:1.5}return e&&(ImageArcGISRest.__proto__=e),ImageArcGISRest.prototype=Object.create(e&&e.prototype),ImageArcGISRest.prototype.constructor=ImageArcGISRest,ImageArcGISRest.prototype.getParams=function(){return this.params_},ImageArcGISRest.prototype.getImageInternal=function(e,t,i,r){if(void 0===this.url_)return null;t=this.findNearestResolution(t),i=this.hidpi_?i:1;var a=this.image_;if(a&&this.renderedRevision_==this.getRevision()&&a.getResolution()==t&&a.getPixelRatio()==i&&Object(p.g)(a.getExtent(),e))return a;var s={F:"image",FORMAT:"PNG32",TRANSPARENT:!0};Object(m.a)(s,this.params_);var o=((e=e.slice())[0]+e[2])/2,n=(e[1]+e[3])/2;if(1!=this.ratio_){var g=this.ratio_*Object(p.E)(e)/2,_=this.ratio_*Object(p.A)(e)/2;e[0]=o-g,e[1]=n-_,e[2]=o+g,e[3]=n+_}var l=t/i,I=Math.ceil(Object(p.E)(e)/l),d=Math.ceil(Object(p.A)(e)/l);e[0]=o-l*I/2,e[2]=o+l*I/2,e[1]=n-l*d/2,e[3]=n+l*d/2,this.imageSize_[0]=I,this.imageSize_[1]=d;var S=this.getRequestUrl_(e,this.imageSize_,i,r,s);return this.image_=new c.a(e,t,i,S,this.crossOrigin_,this.imageLoadFunction_),this.renderedRevision_=this.getRevision(),Object(h.a)(this.image_,u.a.CHANGE,this.handleImageChange,this),this.image_},ImageArcGISRest.prototype.getImageLoadFunction=function(){return this.imageLoadFunction_},ImageArcGISRest.prototype.getRequestUrl_=function(e,t,i,r,a){var s=r.getCode().split(":").pop();a.SIZE=t[0]+","+t[1],a.BBOX=e.join(","),a.BBOXSR=s,a.IMAGESR=s,a.DPI=Math.round(90*i);var o=this.url_,n=o.replace(/MapServer\/?$/,"MapServer/export").replace(/ImageServer\/?$/,"ImageServer/exportImage");return n==o&&Object(g.a)(!1,50),Object(l.a)(n,a)},ImageArcGISRest.prototype.getUrl=function(){return this.url_},ImageArcGISRest.prototype.setImageLoadFunction=function(e){this.image_=null,this.imageLoadFunction_=e,this.changed()},ImageArcGISRest.prototype.setUrl=function(e){e!=this.url_&&(this.url_=e,this.image_=null,this.changed())},ImageArcGISRest.prototype.updateParams=function(e){Object(m.a)(this.params_,e),this.image_=null,this.changed()},ImageArcGISRest}(_.a),d=[new s.a({source:new n.b}),new o.a({source:new I({ratio:1,params:{},url:"https://sampleserver1.arcgisonline.com/ArcGIS/rest/services/Specialty/ESRI_StateCityHighway_USA/MapServer"})})];new r.a({layers:d,target:"map",view:new a.a({center:[-10997148,4569099],zoom:4})})}},[[391,0]]]);
//# sourceMappingURL=arcgis-image.js.map