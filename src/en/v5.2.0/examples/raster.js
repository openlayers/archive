(window.webpackJsonp=window.webpackJsonp||[]).push([[99],{322:function(e,t,a){"use strict";a.r(t);var n=a(1),o=a(0),r=a(3),i=a(72),s=a(40),l=a(151);function vgi(e){var t=e[0]/255,a=e[1]/255,n=e[2]/255;return(2*a-t-n)/(2*a+t+n)}function summarize(e,t){var a=t.min,n=t.max,o=t.values.length;if(e<a);else if(e>=n)t.values[o-1]+=1;else{var r=Math.floor((e-a)/t.delta);t.values[r]+=1}}var u=new s.a({key:"As1HiMj1PvLPlqc_gtM7AqZfBL8ZL3VrjaS3zIb22Uvb9WKhuJObROC-qUpa81U5",imagerySet:"Aerial"}),c=new l.a({sources:[u],operation:function(e,t){var a=e[0],n=vgi(a);return summarize(n,t.counts),n>=t.threshold?(a[0]=0,a[1]=255,a[2]=0,a[3]=128):a[3]=0,a},lib:{vgi:vgi,summarize:summarize}});c.set("threshold",.1),c.on("beforeoperations",function(e){e.data.counts=function(e,t,a){for(var n=new Array(a),o=0;o<a;++o)n[o]=0;return{min:e,max:t,values:n,delta:(t-e)/a}}(0,.25,10),e.data.threshold=c.get("threshold")}),c.on("afteroperations",function(e){!function(e,t,a){d&&(clearTimeout(d),d=null);d=setTimeout(function(e,t,a){var n=d3.scaleLinear().domain([0,d3.max(t.values)]).range([0,m]),o=h.selectAll("rect").data(t.values);o.enter().append("rect"),o.attr("class",function(e,n){var o=t.min+n*t.delta;return"bar"+(o>=a?" selected":"")}).attr("width",v-2),o.transition().attr("transform",function(e,t){return"translate("+t*v+", "+(m-n(e))+")"}).attr("height",n),o.on("mousemove",function(e,a){var n=t.min+a*t.delta;c.get("threshold")!==n&&(c.set("threshold",n),c.changed())}),o.on("mouseover",function(a,n){for(var o=0,r=t.values.length-1;r>=n;--r)o+=e*e*t.values[r];p.html(function(e,t){return(t/4046.86).toFixed(0).replace(/\B(?=(\d{3})+(?!\d))/g,",")+" acres at<br>"+e.toFixed(2)+" VGI or above"}(t.min+n*t.delta,o)),p.style("display","block"),p.transition().style({left:f.left+n*v+v/2+"px",top:d3.event.y-60+"px",opacity:1})}),o.on("mouseout",function(){p.transition().style("opacity",0).each("end",function(){p.style("display","none")})})}.bind(null,e,t,a),1e3/60)}(e.resolution,e.data.counts,e.data.threshold)});new n.a({layers:[new r.a({source:u}),new i.a({source:c})],target:"map",view:new o.a({center:[-9651695,4937351],zoom:13,minZoom:12,maxZoom:19})});var d=null;var v=15,m=150,h=d3.select("#plot").append("svg").attr("width",10*v).attr("height",m),f=h.node().getBoundingClientRect(),p=d3.select(document.body).append("div").attr("class","tip")}},[[322,0]]]);
//# sourceMappingURL=raster.js.map