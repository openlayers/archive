(window.webpackJsonp=window.webpackJsonp||[]).push([[60],{300:function(e,t,o){"use strict";o.r(t);var a=o(3),r=o(2),i=o(5),n=o(53),f=o(24),u=o(26),c=o(22),d=o(10),s=o(4),l=o(146),_=o(89),x=new d.a({features:[],attributions:"National UFO Reporting Center"}),v=new Image;v.src="data/ufo_shapes.png";var m,p={light:[0,0],sphere:[.25,0],circle:[.25,0],disc:[.5,0],oval:[.5,0],triangle:[.75,0],fireball:[0,.5],default:[.75,.5]},g=[255,160,110],b=[180,255,200],C=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.createRenderer=function(){return new l.a(this,{attributes:[{name:"year",callback:function(e){return e.get("year")}},{name:"texCoordU",callback:function(e){var t=p[e.get("shape")];return t||(t=p.default),t[0]}},{name:"texCoordV",callback:function(e){var t=p[e.get("shape")];return t||(t=p.default),t[1]}}],uniforms:{u_texture:v},vertexShader:["precision mediump float;","uniform mat4 u_projectionMatrix;","uniform mat4 u_offsetScaleMatrix;","uniform mat4 u_offsetRotateMatrix;","attribute vec2 a_position;","attribute float a_index;","attribute float a_year;","attribute float a_texCoordU;","attribute float a_texCoordV;","varying vec2 v_texCoord;","varying float v_year;","void main(void) {","  mat4 offsetMatrix = u_offsetScaleMatrix;","  float offsetX = a_index == 0.0 || a_index == 3.0 ? ","    "+Object(_.b)(-8)+" : "+Object(_.b)(8)+";","  float offsetY = a_index == 0.0 || a_index == 1.0 ? ","    "+Object(_.b)(-8)+" : "+Object(_.b)(8)+";","  vec4 offsets = offsetMatrix * vec4(offsetX, offsetY, 0.0, 0.0);","  gl_Position = u_projectionMatrix * vec4(a_position, 0.0, 1.0) + offsets;","  float u = a_index == 0.0 || a_index == 3.0 ? a_texCoordU : a_texCoordU + 0.25;","  float v = a_index == 2.0 || a_index == 3.0 ? a_texCoordV : a_texCoordV + 0.5;","  v_texCoord = vec2(u, v);","  v_year = a_year;","}"].join(" "),fragmentShader:["precision mediump float;","uniform float u_time;","uniform float u_minYear;","uniform float u_maxYear;","uniform sampler2D u_texture;","varying vec2 v_texCoord;","varying float v_year;","void main(void) {","  vec4 textureColor = texture2D(u_texture, v_texCoord);","  if (textureColor.a < 0.1) {","    discard;","  }","  float ratio = clamp((v_year - 1950.0) / (2013.0 - 1950.0), 0.0, 1.1);","  vec3 color = mix(vec3("+Object(_.a)(g)+"),","    vec3("+Object(_.a)(b)+"), ratio);","  gl_FragColor = vec4(color, 1.0) * textureColor;","  gl_FragColor.rgb *= gl_FragColor.a;","}"].join(" "),hitVertexShader:["precision mediump float;","uniform mat4 u_projectionMatrix;","uniform mat4 u_offsetScaleMatrix;","uniform mat4 u_offsetRotateMatrix;","attribute vec2 a_position;","attribute float a_index;","attribute vec4 a_hitColor;","attribute float a_texCoordU;","attribute float a_texCoordV;","varying vec2 v_texCoord;","varying vec4 v_hitColor;","void main(void) {","  mat4 offsetMatrix = u_offsetScaleMatrix;","  float offsetX = a_index == 0.0 || a_index == 3.0 ? ","    "+Object(_.b)(-8)+" : "+Object(_.b)(8)+";","  float offsetY = a_index == 0.0 || a_index == 1.0 ? ","    "+Object(_.b)(-8)+" : "+Object(_.b)(8)+";","  vec4 offsets = offsetMatrix * vec4(offsetX, offsetY, 0.0, 0.0);","  gl_Position = u_projectionMatrix * vec4(a_position, 0.0, 1.0) + offsets;","  float u = a_index == 0.0 || a_index == 3.0 ? a_texCoordU : a_texCoordU + 0.25;","  float v = a_index == 2.0 || a_index == 3.0 ? a_texCoordV : a_texCoordV + 0.5;","  v_texCoord = vec2(u, v);","  v_hitColor = a_hitColor;","}"].join(" "),hitFragmentShader:["precision mediump float;","uniform sampler2D u_texture;","varying vec2 v_texCoord;","varying vec4 v_hitColor;","void main(void) {","  vec4 textureColor = texture2D(u_texture, v_texCoord);","  if (textureColor.a < 0.1) {","    discard;","  }","  gl_FragColor = v_hitColor;","}"].join(" ")})},t}(c.a);(m=new XMLHttpRequest).open("GET","data/csv/ufo_sighting_data.csv"),m.onload=function(){for(var e,t=m.responseText,o=[],a=t.indexOf("\n")+1;-1!=(e=t.indexOf("\n",a));){var r=t.substr(a,e-a).split(",");a=e+1;var i=Object(s.f)([parseFloat(r[5]),parseFloat(r[4])]);isNaN(i[0])||isNaN(i[1])||o.push(new f.a({datetime:r[0],year:parseInt(/[0-9]{4}/.exec(r[0])[0]),shape:r[2],duration:r[3],geometry:new u.a(i)}))}x.addFeatures(o)},m.send();var y=new a.a({layers:[new i.a({source:new n.a({url:"https://api.tiles.mapbox.com/v4/mapbox.world-dark.json?secure&access_token=pk.eyJ1IjoidHNjaGF1YiIsImEiOiJjaW5zYW5lNHkxMTNmdWttM3JyOHZtMmNtIn0.CDIBD8H-G2Gf-cPkIuWtRg",crossOrigin:"anonymous"})}),new C({source:x})],target:document.getElementById("map"),view:new r.a({center:[0,4e6],zoom:2})}),h=document.getElementById("info");y.on("pointermove",function(e){if(!y.getView().getInteracting()){var t=e.pixel;h.innerText="",y.forEachFeatureAtPixel(t,function(e){var t=e.get("datetime"),o=e.get("duration"),a=e.get("shape");h.innerText="On "+t+", lasted "+o+' seconds and had a "'+a+'" shape.'})}}),v.addEventListener("load",function(){y.render()})}},[[300,0]]]);
//# sourceMappingURL=icon-sprite-webgl.js.map