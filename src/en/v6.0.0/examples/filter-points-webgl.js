(window.webpackJsonp=window.webpackJsonp||[]).push([[38],{281:function(e,t,a){"use strict";a.r(t);var o=a(3),r=a(2),n=a(5),i=a(24),s=a(26),u=a(22),f=a(10),c=a(4),d=a(146),l=a(15),v=a(66),m=a(89),_=new f.a({attributions:"NASA"}),p=[180,140,140],x=[255,80,80],y=.001*Date.now(),g=document.getElementById("min-year"),w=document.getElementById("max-year");function b(){var e=document.getElementById("status");e.querySelector("span.min-year").textContent=g.value,e.querySelector("span.max-year").textContent=w.value}g.addEventListener("input",b),g.addEventListener("change",b),w.addEventListener("input",b),w.addEventListener("change",b),b();var C,h=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.createRenderer=function(){return new d.a(this,{attributes:[{name:"size",callback:function(e){return 18*Object(l.a)(e.get("mass")/2e5,0,1)+8}},{name:"year",callback:function(e){return e.get("year")}}],vertexShader:["precision mediump float;","uniform mat4 u_projectionMatrix;","uniform mat4 u_offsetScaleMatrix;","uniform mat4 u_offsetRotateMatrix;","attribute vec2 a_position;","attribute float a_index;","attribute float a_size;","attribute float a_year;","varying vec2 v_texCoord;","varying float v_year;","void main(void) {","  mat4 offsetMatrix = u_offsetScaleMatrix;","  float offsetX = a_index == 0.0 || a_index == 3.0 ? -a_size / 2.0 : a_size / 2.0;","  float offsetY = a_index == 0.0 || a_index == 1.0 ? -a_size / 2.0 : a_size / 2.0;","  vec4 offsets = offsetMatrix * vec4(offsetX, offsetY, 0.0, 0.0);","  gl_Position = u_projectionMatrix * vec4(a_position, 0.0, 1.0) + offsets;","  float u = a_index == 0.0 || a_index == 3.0 ? 0.0 : 1.0;","  float v = a_index == 0.0 || a_index == 1.0 ? 0.0 : 1.0;","  v_texCoord = vec2(u, v);","  v_year = a_year;","}"].join(" "),fragmentShader:["precision mediump float;","uniform float u_time;","uniform float u_minYear;","uniform float u_maxYear;","varying vec2 v_texCoord;","varying float v_year;","void main(void) {","  if (v_year < u_minYear || v_year > u_maxYear) {","    discard;","  }","  vec2 texCoord = v_texCoord * 2.0 - vec2(1.0, 1.0);","  float sqRadius = texCoord.x * texCoord.x + texCoord.y * texCoord.y;","  float value = 2.0 * (1.0 - sqRadius);","  float alpha = smoothstep(0.0, 1.0, value);","  float ratio = clamp((v_year - 1800.0) / (2013.0 - 1800.0), 0.0, 1.1);","  vec3 color = mix(vec3("+Object(m.a)(p)+"),","    vec3("+Object(m.a)(x)+"), ratio);","  float period = 8.0;","  color.g *= 2.0 * (1.0 - sqrt(mod(u_time + v_year * 0.025, period) / period));","  gl_FragColor = vec4(color, 1.0);","  gl_FragColor.a *= alpha;","  gl_FragColor.rgb *= gl_FragColor.a;","}"].join(" "),uniforms:{u_time:function(){return.001*Date.now()-y},u_minYear:function(){return parseInt(g.value)},u_maxYear:function(){return parseInt(w.value)}}})},t}(u.a);(C=new XMLHttpRequest).open("GET","data/csv/meteorite_landings.csv"),C.onload=function(){for(var e,t=C.responseText,a=[],o=t.indexOf("\n")+1;-1!=(e=t.indexOf("\n",o));){var r=t.substr(o,e-o).split(",");o=e+1;var n=Object(c.f)([parseFloat(r[4]),parseFloat(r[3])]);isNaN(n[0])||isNaN(n[1])||a.push(new i.a({mass:parseFloat(r[1])||0,year:parseInt(r[2])||0,geometry:new s.a(n)}))}_.addFeatures(a)},C.send();var j=new o.a({layers:[new n.a({source:new v.a({layer:"toner"})}),new h({source:_})],target:document.getElementById("map"),view:new r.a({center:[0,0],zoom:2})});!function e(){j.render(),window.requestAnimationFrame(e)}()}},[[281,0]]]);
//# sourceMappingURL=filter-points-webgl.js.map