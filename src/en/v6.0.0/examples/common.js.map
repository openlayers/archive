{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///../src/ol/xml.js","webpack:///../src/ol/extent.js","webpack:///../src/ol/centerconstraint.js","webpack:///../src/ol/resolutionconstraint.js","webpack:///../src/ol/View.js","webpack:///../src/ol/Map.js","webpack:///../src/ol/proj/epsg3857.js","webpack:///../src/ol/proj/epsg4326.js","webpack:///../src/ol/proj/projections.js","webpack:///../src/ol/proj.js","webpack:///../src/ol/layer/BaseTile.js","webpack:///../src/ol/layer/Tile.js","webpack:///../src/ol/format/xsd.js","webpack:///../src/ol/geom/GeometryType.js","webpack:///../src/ol/util.js","webpack:///../src/ol/source/OSM.js","webpack:///../src/ol/source/Vector.js","webpack:///../src/ol/obj.js","webpack:///../src/ol/style/Style.js","webpack:///../src/ol/events/EventType.js","webpack:///../src/ol/array.js","webpack:///../src/ol/math.js","webpack:///../src/ol/events.js","webpack:///../src/ol/TileState.js","webpack:///../src/ol/transform.js","webpack:///../src/ol/style/Stroke.js","webpack:///../src/ol/asserts.js","webpack:///../src/ol/geom/GeometryLayout.js","webpack:///../src/ol/layer/Vector.js","webpack:///../src/ol/style/Fill.js","webpack:///../src/ol/Feature.js","webpack:///../src/ol/render/canvas/LabelCache.js","webpack:///../src/ol/render/canvas.js","webpack:///../src/ol/geom/Point.js","webpack:///../src/ol/render/canvas/Instruction.js","webpack:///../src/ol/coordinate.js","webpack:///../src/ol/dom.js","webpack:///../src/ol/ImageState.js","webpack:///../src/ol/format/GeoJSON.js","webpack:///../src/ol/geom/Polygon.js","webpack:///../src/ol/geom/LineString.js","webpack:///../src/ol/Object.js","webpack:///../src/ol/functions.js","webpack:///../src/ol/events/condition.js","webpack:///../src/ol/MapBrowserEventType.js","webpack:///../src/ol/format/Feature.js","webpack:///../src/ol/source/BingMaps.js","webpack:///../src/ol/css.js","webpack:///../src/ol/render/canvas/BuilderType.js","webpack:///../src/ol/events/Event.js","webpack:///../src/ol/source/State.js","webpack:///../src/ol/ViewHint.js","webpack:///../src/ol/source/XYZ.js","webpack:///../src/ol/style/Circle.js","webpack:///../src/ol/Kinetic.js","webpack:///../src/ol/interaction/DoubleClickZoom.js","webpack:///../src/ol/interaction/DragPan.js","webpack:///../src/ol/interaction/DragRotate.js","webpack:///../src/ol/interaction/DragZoom.js","webpack:///../src/ol/events/KeyCode.js","webpack:///../src/ol/interaction/KeyboardPan.js","webpack:///../src/ol/interaction/KeyboardZoom.js","webpack:///../src/ol/interaction/MouseWheelZoom.js","webpack:///../src/ol/interaction/PinchRotate.js","webpack:///../src/ol/interaction.js","webpack:///../src/ol/control/Rotate.js","webpack:///../src/ol/control/Zoom.js","webpack:///../src/ol/control.js","webpack:///../src/ol/format/GMLBase.js","webpack:///../src/ol/source/TileJSON.js","webpack:///../src/ol/tilecoord.js","webpack:///../src/ol/size.js","webpack:///../src/ol/layer/Property.js","webpack:///../src/ol/interaction/Pointer.js","webpack:///../src/ol/proj/Units.js","webpack:///../src/ol/easing.js","webpack:///../src/ol/tilegrid.js","webpack:///../src/ol/CollectionEventType.js","webpack:///../src/ol/Collection.js","webpack:///../src/ol/interaction/Draw.js","webpack:///../node_modules/proj4/lib/global.js","webpack:///../node_modules/proj4/lib/constants/values.js","webpack:///../node_modules/proj4/lib/constants/PrimeMeridian.js","webpack:///../node_modules/proj4/lib/constants/units.js","webpack:///../node_modules/proj4/lib/match.js","webpack:///../node_modules/proj4/lib/projString.js","webpack:///../node_modules/wkt-parser/parser.js","webpack:///../node_modules/wkt-parser/process.js","webpack:///../node_modules/wkt-parser/index.js","webpack:///../node_modules/proj4/lib/defs.js","webpack:///../node_modules/proj4/lib/parseCode.js","webpack:///../node_modules/proj4/lib/extend.js","webpack:///../node_modules/proj4/lib/common/msfnz.js","webpack:///../node_modules/proj4/lib/common/sign.js","webpack:///../node_modules/proj4/lib/common/adjust_lon.js","webpack:///../node_modules/proj4/lib/common/tsfnz.js","webpack:///../node_modules/proj4/lib/common/phi2z.js","webpack:///../node_modules/proj4/lib/projections/longlat.js","webpack:///../node_modules/proj4/lib/projections.js","webpack:///../node_modules/proj4/lib/projections/merc.js","webpack:///../node_modules/proj4/lib/constants/Ellipsoid.js","webpack:///../node_modules/proj4/lib/constants/Datum.js","webpack:///../node_modules/proj4/lib/datum.js","webpack:///../node_modules/proj4/lib/Proj.js","webpack:///../node_modules/proj4/lib/deriveConstants.js","webpack:///../node_modules/proj4/lib/datum_transform.js","webpack:///../node_modules/proj4/lib/datumUtils.js","webpack:///../node_modules/proj4/lib/adjust_axis.js","webpack:///../node_modules/proj4/lib/common/toPoint.js","webpack:///../node_modules/proj4/lib/checkSanity.js","webpack:///../node_modules/proj4/lib/transform.js","webpack:///../node_modules/proj4/lib/core.js","webpack:///../node_modules/mgrs/mgrs.js","webpack:///../node_modules/proj4/lib/Point.js","webpack:///../node_modules/proj4/lib/common/pj_enfn.js","webpack:///../node_modules/proj4/lib/common/pj_mlfn.js","webpack:///../node_modules/proj4/lib/common/pj_inv_mlfn.js","webpack:///../node_modules/proj4/lib/projections/tmerc.js","webpack:///../node_modules/proj4/lib/common/sinh.js","webpack:///../node_modules/proj4/lib/common/hypot.js","webpack:///../node_modules/proj4/lib/common/asinhy.js","webpack:///../node_modules/proj4/lib/common/log1py.js","webpack:///../node_modules/proj4/lib/common/gatg.js","webpack:///../node_modules/proj4/lib/common/clens.js","webpack:///../node_modules/proj4/lib/common/clens_cmplx.js","webpack:///../node_modules/proj4/lib/common/cosh.js","webpack:///../node_modules/proj4/lib/projections/etmerc.js","webpack:///../node_modules/proj4/lib/common/adjust_zone.js","webpack:///../node_modules/proj4/lib/projections/utm.js","webpack:///../node_modules/proj4/lib/common/srat.js","webpack:///../node_modules/proj4/lib/projections/gauss.js","webpack:///../node_modules/proj4/lib/projections/sterea.js","webpack:///../node_modules/proj4/lib/projections/stere.js","webpack:///../node_modules/proj4/lib/projections/somerc.js","webpack:///../node_modules/proj4/lib/projections/omerc.js","webpack:///../node_modules/proj4/lib/projections/lcc.js","webpack:///../node_modules/proj4/lib/projections/krovak.js","webpack:///../node_modules/proj4/lib/common/mlfn.js","webpack:///../node_modules/proj4/lib/common/e0fn.js","webpack:///../node_modules/proj4/lib/common/e1fn.js","webpack:///../node_modules/proj4/lib/common/e2fn.js","webpack:///../node_modules/proj4/lib/common/e3fn.js","webpack:///../node_modules/proj4/lib/common/gN.js","webpack:///../node_modules/proj4/lib/common/adjust_lat.js","webpack:///../node_modules/proj4/lib/common/imlfn.js","webpack:///../node_modules/proj4/lib/projections/cass.js","webpack:///../node_modules/proj4/lib/common/qsfnz.js","webpack:///../node_modules/proj4/lib/projections/laea.js","webpack:///../node_modules/proj4/lib/common/asinz.js","webpack:///../node_modules/proj4/lib/projections/aea.js","webpack:///../node_modules/proj4/lib/projections/gnom.js","webpack:///../node_modules/proj4/lib/common/iqsfnz.js","webpack:///../node_modules/proj4/lib/projections/cea.js","webpack:///../node_modules/proj4/lib/projections/eqc.js","webpack:///../node_modules/proj4/lib/projections/poly.js","webpack:///../node_modules/proj4/lib/projections/nzmg.js","webpack:///../node_modules/proj4/lib/projections/mill.js","webpack:///../node_modules/proj4/lib/projections/sinu.js","webpack:///../node_modules/proj4/lib/projections/moll.js","webpack:///../node_modules/proj4/lib/projections/eqdc.js","webpack:///../node_modules/proj4/lib/projections/vandg.js","webpack:///../node_modules/proj4/lib/projections/aeqd.js","webpack:///../node_modules/proj4/lib/projections/ortho.js","webpack:///../node_modules/proj4/lib/projections/qsc.js","webpack:///../node_modules/proj4/lib/projections/robin.js","webpack:///../node_modules/proj4/projs.js","webpack:///../node_modules/proj4/lib/index.js","webpack:///../src/ol/render/canvas/Immediate.js","webpack:///../src/ol/render.js","webpack:///../src/ol/source/Stamen.js","webpack:///../src/ol/source/TileWMS.js","webpack:///../src/ol/layer/BaseImage.js","webpack:///../src/ol/layer/Image.js","webpack:///../src/ol/proj/Projection.js","webpack:///../src/ol/geom/MultiLineString.js","webpack:///../src/ol/geom/MultiPoint.js","webpack:///../src/ol/control/Control.js","webpack:///../src/ol/has.js","webpack:///../src/ol/style/Text.js","webpack:///../src/ol/style/IconOrigin.js","webpack:///../src/ol/geom/SimpleGeometry.js","webpack:///../src/ol/interaction/Interaction.js","webpack:///../src/ol/Overlay.js","webpack:///../src/ol/geom/flat/transform.js","webpack:///../src/ol/extent/Relationship.js","webpack:///../src/ol/geom/MultiPolygon.js","webpack:///../src/ol/reproj/Tile.js","webpack:///../src/ol/source/TileImage.js","webpack:///../src/ol/tileurlfunction.js","webpack:///../src/ol/geom/flat/deflate.js","webpack:///../src/ol/layer/Layer.js","webpack:///../src/ol/geom/flat/inflate.js","webpack:///../src/ol/tilegrid/TileGrid.js","webpack:///../src/ol/reproj/common.js","webpack:///../src/ol/webgl/ShaderBuilder.js","webpack:///../src/ol/MapProperty.js","webpack:///../src/ol/style/IconAnchorUnits.js","webpack:///../src/ol/OverlayPositioning.js","webpack:///../src/ol/style/IconImage.js","webpack:///../src/ol/style/Icon.js","webpack:///../src/ol/VectorRenderTile.js","webpack:///../src/ol/VectorTile.js","webpack:///../src/ol/source/VectorTile.js","webpack:///../src/ol/uri.js","webpack:///../src/ol/source/WMTSRequestEncoding.js","webpack:///../src/ol/source/WMTS.js","webpack:///../src/ol/geom/flat/closest.js","webpack:///../src/ol/reproj/Image.js","webpack:///../src/ol/source/Image.js","webpack:///../src/ol/format/KML.js","webpack:///../src/ol/layer/VectorTileRenderType.js","webpack:///../src/ol/renderer/canvas/VectorTileLayer.js","webpack:///../src/ol/layer/VectorTile.js","webpack:///../src/ol/format/FormatType.js","webpack:///../src/ol/colorlike.js","webpack:///../src/ol/source/VectorEventType.js","webpack:///../src/ol/ViewProperty.js","webpack:///../src/ol/source/ImageWMS.js","webpack:///../src/ol/Observable.js","webpack:///../src/ol/string.js","webpack:///../src/ol/events/Target.js","webpack:///../src/ol/Disposable.js","webpack:///../src/ol/geom/flat/simplify.js","webpack:///../src/ol/color.js","webpack:///../src/ol/Image.js","webpack:///../src/ol/Tile.js","webpack:///../src/ol/loadingstrategy.js","webpack:///../src/ol/format/XMLFeature.js","webpack:///../src/ol/proj/proj4.js","webpack:///../src/ol/ObjectEventType.js","webpack:///../src/ol/tilegrid/common.js","webpack:///../src/ol/geom/flat/contains.js","webpack:///../src/ol/geom/flat/reverse.js","webpack:///../src/ol/geom/flat/orient.js","webpack:///../src/ol/pointer/EventType.js","webpack:///../src/ol/interaction/Select.js","webpack:///../src/ol/render/EventType.js","webpack:///../src/ol/proj/transforms.js","webpack:///../src/ol/style/RegularShape.js","webpack:///../src/ol/render/canvas/Builder.js","webpack:///../src/ol/format/MVT.js","webpack:///../src/ol/MapEventType.js","webpack:///../src/ol/geom/LinearRing.js","webpack:///../src/ol/reproj.js","webpack:///../src/ol/rotationconstraint.js","webpack:///../src/ol/MapBrowserPointerEvent.js","webpack:///../src/ol/layer/TileProperty.js","webpack:///../src/ol/renderer/vector.js","webpack:///../src/ol/source/common.js","webpack:///../src/ol/source/WMSServerType.js","webpack:///../src/ol/source/Source.js","webpack:///../src/ol/geom/GeometryCollection.js","webpack:///../src/ol/geom/flat/interpolate.js","webpack:///../src/ol/format/XLink.js","webpack:///../node_modules/html-to-image/lib/utils.js","webpack:///../src/ol/geom/flat/intersectsextent.js","webpack:///../src/ol/tilegrid/WMTS.js","webpack:///../src/ol/webgl.js","webpack:///../src/ol/webgl/Buffer.js","webpack:///../src/ol/webgl/ContextEventType.js","webpack:///../src/ol/vec/mat4.js","webpack:///../src/ol/webgl/PostProcessingPass.js","webpack:///../src/ol/webgl/Helper.js","webpack:///../src/ol/renderer/webgl/Layer.js","webpack:///../src/ol/worker/webgl.js","webpack:///../src/ol/webgl/RenderTarget.js","webpack:///../src/ol/renderer/webgl/PointsLayer.js","webpack:///../src/ol/format/OWS.js","webpack:///../src/ol/format/WMTSCapabilities.js","webpack:///../src/ol/sphere.js","webpack:///../src/ol/interaction/Modify.js","webpack:///../src/ol/control/ScaleLine.js","webpack:///../src/ol/interaction/Property.js","webpack:///../src/ol/geom/flat/interiorpoint.js","webpack:///../src/ol/source/Tile.js","webpack:///../src/ol/net.js","webpack:///../src/ol/structs/RBush.js","webpack:///../src/ol/extent/Corner.js","webpack:///../src/ol/TileRange.js","webpack:///../src/ol/source/Raster.js","webpack:///../src/ol/source/Zoomify.js","webpack:///../src/ol/geom/flat/straightchunk.js","webpack:///../src/ol/render/canvas/TextBuilder.js","webpack:///../src/ol/control/MousePosition.js","webpack:///../src/ol/geom/flat/area.js","webpack:///../src/ol/renderer/canvas/Layer.js","webpack:///../src/ol/ImageBase.js","webpack:///../src/ol/format/JSONFeature.js","webpack:///../src/ol/layer/BaseVector.js","webpack:///../src/ol/format/TextFeature.js","webpack:///../src/ol/Geolocation.js","webpack:///../src/ol/format/XML.js","webpack:///../src/ol/style/IconImageCache.js","webpack:///../src/ol/MapEvent.js","webpack:///../src/ol/format/TopoJSON.js","webpack:///../src/ol/geom/flat/textpath.js","webpack:///../src/ol/render/canvas/Executor.js","webpack:///../src/ol/render/canvas/ExecutorGroup.js","webpack:///../src/ol/control/Attribution.js","webpack:///../src/ol/interaction/PinchZoom.js","webpack:///../src/ol/control/ZoomSlider.js","webpack:///../src/ol/render/Box.js","webpack:///../src/ol/interaction/DragBox.js","webpack:///../src/ol/structs/PriorityQueue.js","webpack:///../src/ol/featureloader.js","webpack:///../src/ol/geom/Circle.js","webpack:///../src/ol/interaction/DragRotateAndZoom.js","webpack:///../src/ol/interaction/Snap.js","webpack:///../src/ol/control/FullScreen.js","webpack:///../src/ol/format/GML2.js","webpack:///../src/ol/render/Feature.js","webpack:///../src/ol/AssertionError.js","webpack:///../src/ol/layer/Base.js","webpack:///../src/ol/geom/Geometry.js","webpack:///../src/ol/geom/flat/segments.js","webpack:///../src/ol/structs/LRUCache.js","webpack:///../src/ol/render/Event.js","webpack:///../src/ol/render/VectorContext.js","webpack:///../src/ol/MapBrowserEvent.js","webpack:///../src/ol/TileQueue.js","webpack:///../src/ol/renderer/canvas/TileLayer.js","webpack:///../src/ol/renderer/Layer.js","webpack:///../src/ol/ImageTile.js","webpack:///../src/ol/TileCache.js","webpack:///../src/ol/reproj/Triangulation.js","webpack:///../src/ol/renderer/canvas/ImageLayer.js","webpack:///../node_modules/rbush/rbush.min.js","webpack:///../src/ol/geom/flat/length.js","webpack:///../src/ol/geom/flat/center.js","webpack:///../src/ol/renderer/canvas/VectorLayer.js","webpack:///../src/ol/style/TextPlacement.js","webpack:///../src/ol/style/Image.js","webpack:///../src/ol/ImageCanvas.js","webpack:///../src/ol/interaction/DragAndDrop.js","webpack:///../node_modules/html-to-image/lib/index.js","webpack:///../src/ol/format/WKT.js","webpack:///../src/ol/control/OverviewMap.js","webpack:///../src/ol/source/ImageStatic.js","webpack:///../src/ol/format/EsriJSON.js","webpack:///../src/ol/render/canvas/ImageBuilder.js","webpack:///../src/ol/render/canvas/LineStringBuilder.js","webpack:///../src/ol/render/canvas/PolygonBuilder.js","webpack:///../src/ol/render/canvas/BuilderGroup.js","webpack:///../src/ol/geom/flat/geodesic.js","webpack:///../src/ol/layer/Graticule.js","webpack:///../src/ol/source/TileEventType.js","webpack:///../src/ol/source/UrlTile.js","webpack:///../src/ol/MapBrowserEventHandler.js","webpack:///../src/ol/PluggableMap.js","webpack:///../src/ol/renderer/Map.js","webpack:///../src/ol/renderer/Composite.js","webpack:///../src/ol/layer/Group.js","webpack:///../src/ol/format/GPX.js","webpack:///../src/ol/format/IGC.js","webpack:///../node_modules/@openlayers/pepjs/dist/pep.js","webpack:///../src/ol/renderer/canvas/VectorImageLayer.js","webpack:///../src/ol/layer/VectorImage.js","webpack:///../node_modules/html-to-image/lib/embedResources.js","webpack:///../node_modules/html-to-image/lib/getBlobFromURL.js","webpack:///../node_modules/ieee754/index.js","webpack:///../node_modules/pixelworks/lib/index.js","webpack:///../node_modules/pbf/index.js","webpack:///../src/ol/source/Cluster.js","webpack:///../node_modules/pixelworks/lib/processor.js","webpack:///../node_modules/pixelworks/lib/util.js","webpack:///../node_modules/html-to-image/lib/cloneNode.js","webpack:///../node_modules/html-to-image/lib/clonePseudoElements.js","webpack:///../node_modules/html-to-image/lib/embedWebFonts.js","webpack:///../node_modules/html-to-image/lib/embedImages.js","webpack:///../node_modules/html-to-image/lib/createSvgDataURL.js","webpack:///../node_modules/html-to-image/lib/applyStyleWithOptions.js"],"names":["webpackJsonpCallback","data","moduleId","chunkId","chunkIds","moreModules","executeModules","i","resolves","length","Object","prototype","hasOwnProperty","call","installedChunks","push","modules","parentJsonpFunction","shift","deferredModules","apply","checkDeferredModules","result","deferredModule","fulfilled","j","depId","splice","__webpack_require__","s","installedModules","0","exports","module","l","m","c","d","name","getter","o","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","p","jsonpArray","window","oldJsonpFunction","slice","DOCUMENT","document","implementation","createDocument","XML_SCHEMA_INSTANCE_URI","createElementNS","namespaceURI","qualifiedName","getAllTextContent","node","normalizeWhitespace","getAllTextContent_","accumulator","nodeType","Node","CDATA_SECTION_NODE","TEXT_NODE","String","nodeValue","replace","let","firstChild","nextSibling","join","isDocument","getAttributeNS","parse","xml","DOMParser","parseFromString","makeArrayExtender","valueReader","opt_this","objectStack","const","undefined","this","array","makeArrayPusher","makeReplacer","makeObjectPropertyPusher","opt_property","localName","makeObjectPropertySetter","makeChildAppender","nodeWriter","appendChild","makeArraySerializer","serializersNS","nodeFactory","serializers","makeSimpleNodeFactory","serialize","opt_nodeName","opt_namespaceURI","fixedNodeName","nodeName","OBJECT_PROPERTY_NODE_FACTORY","makeSequence","orderedKeys","sequence","Array","makeStructureNS","namespaceURIs","structure","opt_structureNS","ii","structureNS","parseNode","parsersNS","firstElementChild","nextElementSibling","parsers","parser","pushParseAndPop","pop","values","opt_keys","pushSerializeAndPop","boundingExtent","coordinates","extent","createEmpty","extendCoordinate","buffer","opt_extent","clone","closestSquaredDistanceXY","x","y","dx","dy","containsCoordinate","coordinate","containsXY","containsExtent","extent1","extent2","coordinateRelationship","minX","minY","maxX","maxY","relationship","UNKNOWN","LEFT","RIGHT","BELOW","ABOVE","INTERSECTING","Infinity","createOrUpdate","createOrUpdateEmpty","createOrUpdateFromCoordinate","createOrUpdateFromCoordinates","extendCoordinates","createOrUpdateFromFlatCoordinates","flatCoordinates","offset","end","stride","extendFlatCoordinates","equals","extend","extendXY","Math","min","max","forEachCorner","callback","val","getBottomLeft","getBottomRight","getTopRight","getTopLeft","getArea","area","isEmpty","getWidth","getHeight","getCenter","getCorner","corner","BOTTOM_LEFT","BOTTOM_RIGHT","TOP_LEFT","TOP_RIGHT","getForViewAndSize","center","resolution","rotation","size","cosRotation","cos","sinRotation","sin","xCos","xSin","yCos","ySin","x0","x1","x2","x3","y0","y1","y2","y3","getIntersection","intersection","intersects","returnOrUpdate","scaleFromCenter","deltaX","deltaY","intersectsSegment","start","startRel","endRel","startX","startY","endX","endY","slope","applyTransform","transformFn","xs","ys","_boundingExtentXYs","createExtent","onlyCenter","smooth","opt_isMoving","viewWidth","viewHeight","ratio","log","none","getViewportClampedResolution","maxExtent","viewportSize","xResolution","yResolution","getSmoothClampedResolution","maxResolution","minResolution","createMinMaxResolution","opt_smooth","opt_maxExtent","direction","cappedMaxRes","DEFAULT_MIN_ZOOM","opt_options","super","options","hints_","animations_","updateAnimationKey_","projection_","projection","targetCenter_","targetResolution_","targetRotation_","applyOptions_","resolutionConstraintInfo","resolutionConstraint","minZoom","maxZoom","zoomFactor","multiWorld","smoothResolutionConstraint","projExtent","getExtent","constrainOnlyCenter","isGlobal","resolutions","constrainResolution","capped","z","floor","createSnapToResolutions","defaultMaxResolution","Units","DEGREES","getMetersPerUnit","pow","defaultMinResolution","power","opt_minResolution","zoomLevel","newResolution","createSnapToPower","constraint","createResolutionConstraint","maxResolution_","minResolution_","zoomFactor_","resolutions_","minZoom_","centerConstraint","smoothExtentConstraint","createCenterConstraint","rotationConstraint","enableRotation","constrainRotation","createRotationConstraint","constraints_","setRotation","setCenterInternal","setResolution","zoom","setZoom","resolveConstraints","setProperties","options_","getUpdatedOptions_","newOptions","getResolution","getZoom","getCenterInternal","getRotation","animate","var_args","isDef","getAnimating","args","arguments","getProjection","anchor","animateInternal","animationCount","state","animationCallback","Date","now","series","animation","complete","duration","easing","sourceCenter","targetCenter","sourceResolution","targetResolution","getResolutionForZoom","sourceRotation","delta","PI","targetRotation","isNoopAnimation","setHint","ViewHint","ANIMATING","updateAnimations_","getInteracting","INTERACTING","cancelAnimations","cancelAnimationFrame","more","seriesComplete","jj","elapsed","fraction","progress","getSizeFromViewport_","constrainedResolution","calculateCenterZoom","applyTargetState_","constrainedRotation","calculateCenterRotate","filter","Boolean","requestAnimationFrame","currentCenter","currentResolution","opt_rotation","selector","element","querySelector","metrics","getComputedStyle","parseInt","width","height","w","h","abs","ViewProperty","CENTER","getConstraints","getHints","opt_hints","calculateExtent","opt_size","calculateExtentInternal","getMaxResolution","getMinResolution","getMaxZoom","getZoomForResolution","setMaxZoom","getMinZoom","setMinZoom","setConstrainResolution","enabled","RESOLUTION","getResolutions","getResolutionForExtent","getResolutionForExtentInternal","getResolutionForValueFunction","opt_power","ROTATION","getValueForResolutionFunction","getState","nearest","baseLevel","fit","geometryOrExtent","geometry","isArray","getSimplifiedGeometry","getType","GeometryType","CIRCLE","rotate","userProjection","transform","fitInternal","padding","coords","getFlatCoordinates","cosAngle","sinAngle","minRotX","minRotY","maxRotX","maxRotY","getStride","rotX","rotY","isNaN","getConstrainedResolution","centerRotX","centerRotY","getConstrainedCenter","centerOn","position","centerOnInternal","centerX","centerY","adjustCenter","deltaCoordinates","setCenter","adjustCenterInternal","adjustResolution","opt_anchor","adjustResolutionInternal","isMoving","adjustZoom","adjustRotation","adjustRotationInternal","newRotation","hint","changed","opt_doNotCancelAnims","opt_forceMoving","newCenter","set","opt_duration","opt_resolutionDirection","beginInteraction","endInteraction","endInteractionInternal","opt_targetResolution","getConstrainedZoom","targetZoom","opt_direction","targetRes","returnValue","setTimeout","Map","controls","interactions","createRenderer","RADIUS","HALF_SIZE","EXTENT","WORLD_EXTENT","code","units","METERS","global","worldExtent","getPointResolution","point","PROJECTIONS","fromEPSG4326","input","opt_output","opt_dimension","dimension","output","halfSize","tan","atan","exp","METERS_PER_UNIT","opt_axisOrientation","axisOrientation","metersPerUnit","cache","cloneTransform","identityTransform","addProjection","add","getCode","projectionLike","opt_units","pointResolution","getPointResolutionFunc","getUnits","toEPSG4326","getTransformFromProjections","vertices","addEquivalentProjections","projections","forEach","addProjections","source","destination","createProjection","defaultCode","createTransformFromCoordinateTransform","coordTransform","addCoordinateTransforms","forward","inverse","sourceProj","destProj","fromLonLat","opt_projection","toLonLat","lonLat","lon","equivalent","projection1","projection2","equalUnits","sourceProjection","destinationProjection","sourceCode","destinationCode","transformFunc","getTransform","transformExtent","projections2","forwardTransform","inverseTransform","getUserProjection","useGeographic","toUserCoordinate","fromUserCoordinate","destProjection","toUserExtent","fromUserExtent","BaseTile","baseOptions","preload","useInterimTilesOnError","setPreload","setUseInterimTilesOnError","getPreload","TileProperty","PRELOAD","getUseInterimTilesOnError","USE_INTERIM_TILES_ON_ERROR","readBoolean","readBooleanString","string","exec","readDateTime","dateTime","readDecimal","readDecimalString","parseFloat","readNonNegativeInteger","readNonNegativeIntegerString","readString","trim","writeBooleanTextNode","bool","writeStringTextNode","writeCDATASection","createCDATASection","writeDateTimeTextNode","date","getUTCFullYear","getUTCMonth","getUTCDate","getUTCHours","getUTCMinutes","getUTCSeconds","createTextNode","writeDecimalTextNode","decimal","toPrecision","writeNonNegativeIntegerTextNode","nonNegativeInteger","toString","POINT","LINE_STRING","LINEAR_RING","POLYGON","MULTI_POINT","MULTI_LINE_STRING","MULTI_POLYGON","GEOMETRY_COLLECTION","abstract","Error","uidCounter_","getUid","obj","ol_uid","VERSION","ATTRIBUTION","OSM","attributions","crossOrigin","url","cacheSize","opaque","reprojectionErrorThreshold","tileLoadFunction","wrapX","attributionsCollapsible","VectorSourceEvent","type","opt_feature","feature","VectorSource","READY","loader_","format_","format","overlaps_","overlaps","url_","loader","strategy_","strategy","collection","features","useSpatialIndex","featuresRtree_","loadedExtentsRtree_","nullGeometryFeatures_","idIndex_","uidIndex_","featureChangeKeys_","featuresCollection_","getArray","addFeaturesInternal","bindFeaturesCollection_","addFeature","addFeatureInternal","featureKey","addToIndex_","setupChangeEvents_","getGeometry","insert","dispatchEvent","ADDFEATURE","remove","CHANGE","handleFeatureChange_","PROPERTYCHANGE","valid","id","getId","addFeatures","extents","newFeatures","geometryFeatures","load","modifyingCollection","addEventListener","evt","REMOVEFEATURE","ADD","REMOVE","removeFeature","clear","opt_fast","featureId","removeFeatureInternal","clearEvent","CLEAR","forEachFeature","forEachFeatureAtCoordinateDirect","forEachFeatureInExtent","intersectsCoordinate","forEachInExtent","forEachFeatureIntersectingExtent","intersectsExtent","getFeaturesCollection","getFeatures","getAll","getFeaturesAtCoordinate","getFeaturesInExtent","getInExtent","getClosestFeatureToCoordinate","opt_filter","closestFeature","closestPoint","NaN","minSquaredDistance","previousMinSquaredDistance","closestPointXY","minDistance","sqrt","getFeatureById","getFeatureByUid","uid","getFormat","getOverlaps","getUrl","event","update","sid","removeFromIdIndex_","CHANGEFEATURE","hasFeature","loadFeatures","loadedExtentsRtree","extentsToLoad","loading","extentToLoad","refresh","removeLoadedExtent","removed","setLoader","setUrl","assign","target","var_sources","TypeError","getValues","Style","geometry_","geometryFunction_","defaultGeometryFunction","setGeometry","fill_","fill","image_","image","renderer_","renderer","stroke_","stroke","text_","text","zIndex_","zIndex","toFunction","styleFunction","styles","getZIndex","getFill","getImage","getStroke","getText","getRenderer","setRenderer","getGeometryFunction","setFill","setImage","setStroke","setText","setZIndex","defaultStyles","createDefaultStyle","color","radius","createEditingStyle","white","blue","concat","ERROR","CONTEXTMENU","CLICK","DBLCLICK","DRAGENTER","DRAGOVER","DROP","KEYDOWN","KEYPRESS","LOAD","RESIZE","WHEEL","binarySearch","haystack","needle","opt_comparator","mid","cmp","comparator","numberSafeCompareFunction","low","high","found","a","b","includes","arr","indexOf","linearFindNearest","reverseSubArray","begin","tmp","extension","find","func","arr1","arr2","len1","findIndex","index","every","el","idx","isSorted","opt_func","opt_strict","compare","currentVal","res","clamp","cosh","squaredSegmentDistance","squaredDistance","solveLinearSystem","mat","maxRow","maxEl","absValue","coef","k","toDegrees","angleInRadians","toRadians","angleInDegrees","modulo","lerp","listen","listener","opt_once","originalListener","removeEventListener","eventsKey","listenOnce","unlistenByKey","IDLE","LOADING","LOADED","EMPTY","ABORT","tmp_","reset","multiply","transform1","transform2","a1","b1","c1","d1","e1","f1","a2","b2","c2","d2","e2","f2","e","f","setFromArray","angle","scale","makeScale","translate","compose","dx1","dy1","sx","sy","dx2","dy2","makeInverse","det","Stroke","color_","lineCap_","lineCap","lineDash_","lineDash","lineDashOffset_","lineDashOffset","lineJoin_","lineJoin","miterLimit_","miterLimit","width_","getColor","getLineCap","getLineDash","getLineDashOffset","getLineJoin","getMiterLimit","setColor","setLineCap","setLineDash","setLineDashOffset","setLineJoin","setMiterLimit","setWidth","assert","assertion","errorCode","XY","XYZ","XYM","XYZM","VectorLayer","Fill","Feature","opt_geometryOrProperties","id_","geometryName_","style_","styleFunction_","geometryChangeKey_","handleGeometryChanged_","properties","getProperties","setGeometryName","getGeometryName","style","getStyle","setStyle","getStyleFunction","handleGeometryChange_","createStyleFunction","setId","opt_highWaterMark","consumers","consumer","canvas","consumerId","prune","outer","canExpireCache","peekLastKey","release","measureFont","defaultFont","defaultFillStyle","defaultLineCap","defaultLineDash","defaultLineDashOffset","defaultLineJoin","defaultMiterLimit","defaultStrokeStyle","defaultTextAlign","defaultTextBaseline","defaultPadding","defaultLineWidth","labelCache","checkedFonts","measureContext","textHeights","checkFont","interval","referenceWidth","retries","checked","referenceFonts","len","isAvailable","fontStyle","fontWeight","fontFamily","context","getMeasureContext","available","referenceFont","font","measureText","check","done","split","getCount","clearInterval","fontSpec","families","family","weight","setInterval","div","heights","measureTextHeight","createElement","innerHTML","margin","left","body","offsetHeight","removeChild","measureTextWidth","measureAndCacheTextWidth","measureTextWidths","lines","widths","numLines","currentWidth","rotateAtOffset","offsetX","offsetY","resetTransform","drawImage","opacity","originX","originY","alpha","globalAlpha","setTransform","Point","opt_layout","setCoordinates","layout","getCoordinates","computeExtent","setLayout","Instruction","BEGIN_GEOMETRY","BEGIN_PATH","CLOSE_PATH","CUSTOM","DRAW_CHARS","DRAW_IMAGE","END_GEOMETRY","FILL","MOVE_TO_LINE_TO","SET_FILL_STYLE","SET_STROKE_STYLE","STROKE","fillInstruction","strokeInstruction","beginPathInstruction","closePathInstruction","closestOnCircle","circle","getRadius","closestOnSegment","segment","along","createStringXY","opt_fractionDigits","template","toFixed","toStringXY","degreesToStringHDMS","hemispheres","degrees","normalizedDegrees","dflPrecision","precision","deg","sec","ceil","charAt","coordinate1","coordinate2","coord1","coord2","distance","squaredDistanceToSegment","toStringHDMS","createCanvasContext2D","opt_width","opt_height","getContext","outerWidth","offsetWidth","marginLeft","marginRight","outerHeight","marginTop","marginBottom","replaceNode","newNode","oldNode","parent","parentNode","replaceChild","removeNode","removeChildren","lastChild","replaceChildren","children","oldChildren","childNodes","oldChild","newChild","insertBefore","GeoJSON","dataProjection","featureProjection","defaultFeatureProjection","geometryName","extractGeometryName_","extractGeometryName","readFeatureFromObject","geoJSONFeature","readGeometry","readFeaturesFromObject","geoJSONFeatures","readGeometryFromObject","readProjectionFromObject","crs","writeFeatureObject","adaptOptions","writeGeometry","writeFeaturesObject","objects","writeGeometryObject","readPointGeometry","readLineStringGeometry","readPolygonGeometry","readMultiPointGeometry","readMultiLineStringGeometry","readMultiPolygonGeometry","geometries","map","readGeometryCollectionGeometry","geoJSON","writePointGeometry","writeLineStringGeometry","right","rightHanded","writePolygonGeometry","writeMultiPointGeometry","writeMultiLineStringGeometry","writeMultiPolygonGeometry","getGeometriesArray","writeGeometryCollectionGeometry","Polygon","opt_ends","ends_","flatInteriorPointRevision_","flatInteriorPoint_","maxDelta_","maxDeltaRevision_","orientedRevision_","orientedFlatCoordinates_","setFlatCoordinates","appendLinearRing","linearRing","getRevision","getOrientedFlatCoordinates","opt_right","getEnds","getFlatInteriorPoint","flatCenter","getInteriorPoint","getLinearRingCount","getLinearRing","getLinearRings","ends","linearRings","getSimplifiedGeometryInternal","squaredTolerance","simplifiedFlatCoordinates","simplifiedEnds","circular","opt_n","opt_sphereRadius","fromExtent","fromCircle","opt_sides","opt_angle","sides","getLayout","arrayLength","polygon","makeRegular","startAngle","LineString","flatMidpoint_","flatMidpointRevision_","appendCoordinate","forEachSegment","getCoordinateAtM","opt_extrapolate","extrapolate","getCoordinateAt","opt_dest","getLength","getFlatMidpoint","ObjectEvent","oldValue","BaseObject","opt_values","values_","getKeys","keys","notify","eventType","getChangeEventType","opt_silent","unset","changeEventTypeCache","TRUE","FALSE","VOID","memoizeOne","fn","lastResult","lastArgs","lastThis","called","nextArgs","altKeyOnly","mapBrowserEvent","originalEvent","altKey","metaKey","ctrlKey","shiftKey","altShiftKeysOnly","focus","getTargetElement","activeElement","always","mouseActionButton","button","never","pointerMove","singleClick","SINGLECLICK","noModifierKeys","platformModifierKeyOnly","shiftKeyOnly","targetNotEditable","tagName","mouseOnly","pointerEvent","pointerType","primaryAction","isPrimary","POINTERDRAG","POINTERMOVE","POINTERDOWN","POINTERUP","POINTEROVER","POINTEROUT","POINTERENTER","POINTERLEAVE","POINTERCANCEL","FeatureFormat","transformGeometryWithOptions","write","transformed","decimals","round","transformExtentWithOptions","getReadOptions","readProjection","TILE_PIXELS","setWorldExtent","readFeature","readFeatures","writeFeature","writeFeatures","BingMaps","hidpi","tilePixelRatio","transition","hidpi_","culture_","culture","maxZoom_","apiKey_","imagerySet_","imagerySet","handleImageryMetadataResponse","getApiKey","getImagerySet","response","statusCode","statusDescription","authenticationResultCode","resourceSets","resources","resource","zoomMax","tileSize","imageWidth","imageHeight","tileGrid","zoomMin","tileUrlFunction","imageUrlSubdomains","subdomain","quadKeyTileCoord","imageUrl","tileCoord","pixelRatio","charCode","digits","mask","fromCharCode","quadKey","imageryProviders","setAttributions","frameState","viewState","getTileGrid","getZForResolution","zDirection","getTileCoordForCoordAndZ","imageryProvider","intersecting","coverageAreas","coverageArea","bbox","epsg4326Extent","attribution","setState","CLASS_HIDDEN","CLASS_SELECTABLE","CLASS_UNSELECTABLE","CLASS_UNSUPPORTED","CLASS_CONTROL","CLASS_COLLAPSED","getFontParameters","DEFAULT","IMAGE","TEXT","BaseEvent","propagationStopped","stopPropagation","preventDefault","UNDEFINED","urls","CircleStyle","points","setOpacity","getOpacity","setScale","getScale","setRadius","radius_","render","Kinetic","decay","minVelocity","delay","decay_","minVelocity_","delay_","points_","angle_","initialVelocity_","lastIndex","firstIndex","atan2","getDistance","getAngle","stopEvent","MapBrowserEventType","browserEvent","delta_","view","getView","duration_","handleEvent","defaultCondition","stopDown","kinetic_","kinetic","lastCentroid","lastPointersCount_","panning_","condition_","condition","noKinetic_","handleDragEvent","getMap","targetPointers","centroid","handleUpEvent","centerpx","getPixelFromCoordinateInternal","dest","getCoordinateFromPixelInternal","handleDownEvent","Pointer","lastAngle_","getSize","pixel","theta","onBoxEnd","out_","mapExtent","boxPixelExtent","factor","className","minArea","out","UP","DOWN","EventType","keyCode","KeyCode","mapUnitsDelta","pixelDelta_","defaultCondition_","pixelDelta","charCodeAt","Mode","totalDelta_","lastDelta_","maxDelta","timeout_","timeout","useAnchor_","useAnchor","lastAnchor_","startTime_","timeoutId_","mode_","trackpadEventGap_","trackpadTimeoutId_","trackpadDeltaPerZoom_","endInteraction_","sign","wheelEvent","deltaMode","WheelEvent","DOM_DELTA_PIXEL","DOM_DELTA_LINE","clearTimeout","timeLeft","handleWheelZoom_","setMouseAnchor","pointerOptions","anchor_","rotating_","rotationDelta_","threshold_","threshold","rotationDelta","touch0","touch1","clientY","clientX","viewportPosition","getViewport","getBoundingClientRect","top","handlingDownUpSequence","defaults","Collection","altShiftDragRotate","doubleClickZoom","zoomDelta","zoomDuration","dragPan","onFocusOnly","pinchRotate","pinchZoom","PinchZoom","keyboard","mouseWheelZoom","shiftDragZoom","mapEvent","rotation_","autoHide_","contains","classList","label_","label","textContent","tipLabel","setAttribute","title","handleClick_","cssClasses","callResetNorth_","resetNorth","autoHide","resetNorth_","zoomInLabel","zoomOutLabel","zoomInTipLabel","zoomOutTipLabel","inElement","outElement","zoomByDelta_","currentZoom","newZoom","zoomOptions","rotateOptions","Attribution","attributionOptions","GMLNS","ONLY_WHITESPACE_RE","GMLBase","featureType","featureNS","srsName","schemaLocation","FEATURE_COLLECTION_PARSERS","namespace","readFeaturesInternal","child","ft","count","uri","candidate","featureTypes","readFeatureElement","readGeometryElement","getAttribute","GEOMETRY_PARSERS","readFeatureElementInternal","asFeature","test","attributes","_content_","attName","fid","readPoint","readFlatCoordinatesFromNode_","readMultiPoint","MULTIPOINT_PARSERS_","readMultiLineString","lineStrings","MULTILINESTRING_PARSERS_","readMultiPolygon","polygons","MULTIPOLYGON_PARSERS_","pointMemberParser_","POINTMEMBER_PARSERS_","lineStringMemberParser_","LINESTRINGMEMBER_PARSERS_","polygonMemberParser_","POLYGONMEMBER_PARSERS_","readLineString","readFlatLinearRing_","ring","GEOMETRY_FLAT_COORDINATES_PARSERS","readLinearRing","readPolygon","flatLinearRings","FLAT_LINEAR_RINGS_PARSERS","readGeometryFromNode","readFeaturesFromNode","readProjectionFromNode","RING_PARSERS","TileJSON","tileJSON_","tileSize_","jsonp","handleTileJSONResponse","handleTileJSONError","client","XMLHttpRequest","onXHRLoad_","onXHRError_","open","send","tileJSON","status","JSON","responseText","err","getTileJSON","epsg4326Projection","getAttributions","attributionExtent","opt_tileCoord","getKeyZXY","getKey","fromKey","Number","hash","withinExtentAndZ","tileRange","getTileRangeForExtentAndZ","getFullTileRange","num","hasArea","toSize","OPACITY","VISIBLE","Z_INDEX","MAX_RESOLUTION","MIN_RESOLUTION","MAX_ZOOM","MIN_ZOOM","SOURCE","PointerInteraction","handleMoveEvent","trackedPointers_","updateTrackedPointers_","handledUp","handled","isPointerDraggingEvent","pointerId","pointerEvents","FEET","PIXELS","USFEET","easeIn","easeOut","inAndOut","linear","getForProjection","getDefaultTileGrid","createForProjection","setDefaultTileGrid","getTileCoordCenter","projectionExtent","extentFromProjection","worldWidth","worldsAway","createXYZ","xyzOptions","gridOptions","resolutionsFromExtent","opt_maxZoom","opt_tileSize","opt_corner","origin","createForExtent","half","Property","CollectionEvent","opt_element","opt_index","opt_array","unique_","unique","array_","assertUnique_","updateLength_","item","insertAt","elem","removeAt","prev","setAt","opt_except","DrawEventType","DrawEvent","Draw","shouldHandle_","downPx_","downTimeout_","lastDragTime_","freehand_","source_","features_","snapTolerance_","snapTolerance","type_","getMode","stopClick_","stopClick","minPoints_","minPoints","maxPoints_","maxPoints","finishCondition_","finishCondition","geometryFunction","opt_geometry","squaredLength","setCenterAndRadius","Constructor","dragVertexDelay_","dragVertexDelay","finishCoordinate_","sketchFeature_","sketchPoint_","sketchCoords_","sketchLine_","sketchLineCoords_","squaredClickTolerance_","clickTolerance","overlay_","updateWhileInteracting","freehandCondition_","freehand","freehandCondition","ACTIVE","updateState_","setMap","getOverlay","move","pass","addToDrawing_","handlePointerMove_","startDrawing_","circleMode","finishDrawing","atFinish_","abortDrawing_","downPx","clickPx","modifyDrawing_","createOrUpdateSketchPoint_","at","potentiallyDone","potentiallyFinishCoordinates","sketchCoords","finishCoordinate","finishPixel","getPixelFromCoordinate","updateSketchFeatures_","last","sketchLineGeom","removeLastPoint","sketchFeature","getSource","lineString","sketchFeatures","overlaySource","active","getActive","createRegularPolygon","createBox","boxCoordinates","PJD_3PARAM","PJD_7PARAM","PJD_WGS84","PJD_NODATUM","SEC_TO_RAD","HALF_PI","SIXTH","RA4","RA6","EPSLN","D2R","R2D","FORTPI","TWO_PI","SPI","to_meter","ignoredChar","match","testkey","lkey","toLowerCase","paramName","paramVal","paramOutname","self","paramObj","defData","v","reduce","params","proj","datum","rf","lat_0","lat0","lat_1","lat1","lat_2","lat2","lat_ts","lon_0","long0","lon_1","long1","lon_2","long2","lonc","longc","x_0","y_0","k_0","k0","r_a","R_A","zone","south","utmSouth","towgs84","datum_params","unit","from_greenwich","pm","nadgrids","datumCode","axis","substr","txt","Parser","NEUTRAL","whitespace","latin","keyword","endThings","digets","level","place","root","stack","currentObject","mapit","unshift","thing","newObj","sExpr","convert","readCharicter","char","neutral","quoted","afterquote","number","word","afterItem","newObjects","d2r","lisp","wkt","projName","local","PROJECTION","UNIT","DATUM","SPHEROID","geogcs","GEOGCS","toMeter","sphere","ellps","TOWGS84","isFinite","outName","inName","cleanWKT","defs","that","def","EPSG","ESRI","IAU2000","console","WGS84","GOOGLE","codeWords","codes","testObj","testDef","some","testWKT","auth","checkMercator","maybeProjStr","ext","checkProjStr","testProj","con","eccent","sinphi","cosphi","com","phi","dphi","eccnth","ts","identity","pt","projs","init","es","msfnz","lat","adjust_lon","tsfnz","phi2z","names","projStore","ellipseName","wgs84","ellipse","datumName","ch1903","ggrs87","nad83","nad27","potsdam","carthage","hermannskogel","osni52","ire65","rassadiran","nzgd49","osgb36","s_jtsk","beduaram","gunung_segara","rnb72","ep2","datum_type","Projection","srsCode","error","json","parseCode","ourProj","datumDef","sphere_","ecc","datumObj","Proj","checkParams","compareDatums","Rn","Sin_Lat","Sin2_Lat","Cos_Lat","Longitude","Latitude","Height","geodeticToGeocentric","Dx_BF","Dy_BF","Dz_BF","Rx_BF","Ry_BF","Rz_BF","M_BF","geocentricToWgs84","x_tmp","y_tmp","z_tmp","geocentricFromWgs84","P","RR","CT","ST","RX","RK","RN","CPHI0","SPHI0","CPHI","SPHI","SDPHI","iter","X","Y","Z","geocentricToGeodetic","xin","yin","zin","denorm","checkCoord","toPoint","checkSanity","checkNotWGS","adjust_axis","datum_transform","transformer","from","to","transformedArray","checkProj","oProj","fromProj","toProj","coord","single","NUM_100K_SETS","SET_ORIGIN_COLUMN_LETTERS","SET_ORIGIN_ROW_LETTERS","I","O","mgrs","UTMtoLL","decode","toUpperCase","bottom","ll","accuracy","utm","seasting","easting","snorthing","northing","zoneNumber","zoneLetter","setParm","get100kSetForZone","setColumn","setRow","column","row","parm","colOrigin","rowOrigin","colInt","rowInt","rollover","encode","N","T","C","A","M","LongOriginRad","ZoneNumber","Lat","Long","LatRad","degToRad","LongRad","UTMEasting","UTMNorthing","getLetterDesignator","LLtoUTM","radToDeg","rad","N1","T1","C1","R1","D","LongOrigin","mu","phi1Rad","topRight","LetterDesignator","mgrsString","testChar","hunK","sb","substring","east100k","curCol","eastingValue","rewindMarker","getEastingFromChar","north100k","curRow","northingValue","getNorthingFromChar","getMinNorthing","remainder","accuracyBonus","sepEastingString","sepNorthingString","sep","sepEasting","sepNorthing","warn","fromMGRS","mgrsStr","toMGRS","C08","en","cphi","sphi","arg","pj_mlfn","pj_enfn","ml0","delta_lon","sin_phi","cos_phi","al","als","cs","tq","ml","acos","pj_inv_mlfn","tan_phi","ds","g","temp","asin","log1py","hypot","cos_2B","B","pp","h1","h2","hr","arg_r","hr1","hr2","hi2","sin_arg_r","cos_arg_r","sinh_arg_i","sinh","arg_i","cosh_arg_i","hi1","hi","cgb","cbg","utg","gtu","np","Qn","gatg","Zb","clens","Ce","Cn","sin_Cn","cos_Cn","sin_Ce","cos_Ce","asinhy","clens_cmplx","adjust_zone","etmerc","dependsOn","esinp","rc","phic0","ratexp","K","srat","gauss","sinc0","cosc0","R2","sinc","cosc","cosl","rho","coslat0","sinlat0","cons","ms1","X0","ssfn_","cosX0","sinX0","sinX","cosX","rh","sinlat","coslat","dlon","ce","Chi","phit","eccen","phy0","lambda0","sinPhy0","semiMajorAxis","flattening","R","b0","k1","k2","k3","Sa1","Sa2","S","rotI","rotB","lambda","phy","prevPhy","iteration","no_off","no_rot","bl","fl","gl","t0","dl","t1","t2","hl","jl","pl","dlon12","dlon10","gamma0","uc","us","vs","ql","sl","tl","vl","ul","POSITIVE_INFINITY","qp","sp","tp","vp","up","sin1","cos1","ts1","sin2","cos2","ms2","ts2","ts0","f0","rh1","s45","s90","fi0","alfa","uq","u0","n0","s0","ro0","ad","gfi","u","deltav","eps","ro","czech","fi1","ok","e0","e3","e0fn","e1fn","e2fn","e3fn","mlfn","lam","nl","gN","asq","cl","dd","ml1","phi1","imlfn","nl1","rl1","tl1","dsq","adjust_lat","P00","P01","P02","P10","P11","P20","S_POLE","N_POLE","EQUIT","OBLIQ","qsfnz","mmf","apa","APA","authset","rq","xmf","ymf","sinb1","cosb1","sinph0","cosph0","coslam","sinlam","q","sinb","cosb","phi0","cCe","sCe","ab","beta","cosz","sinz","sin_po","cos_po","qs1","qs2","t3","qs0","ns0","qs","phi1z","asinz","eccnts","sin_p14","cos_p14","infinity_dist","coslon","iqsfnz","dlat","tanphi","mln","mlnp","ma","B_re","B_im","C_re","C_im","delta_lat","d_phi","d_lambda","d_phi_n","d_psi","th_n_im1","th_re","th_im","th_n_re","th_n_im","z_re","z_im","z_n_im1","delta_x","z_n_re","z_n_im","iterations","num_re","num_im","den_re","den_im","den2","d_psi_n","C_y","C_x","V","delta_theta","ml2","sinth","costh","gsq","msq","xx","yy","xys","c3","m1","th1","sin_p12","cos_p12","Mlp","Ml","Nl1","Nl","psi","Az","G","H","GH","Hs","kp","cos_c","s2","s3","s4","cosAz","Ee","F","FACE_ENUM","FRONT","BACK","TOP","BOTTOM","AREA_ENUM","AREA_0","AREA_1","AREA_2","AREA_3","qsc_fwd_equat_face_theta","qsc_shift_lon_origin","slon","face","one_minus_f","one_minus_f_squared","xy","sinlon","nu","cosmu","tannu","tantheta","invert_sign","xa","lp","COEFS_X","COEFS_Y","FXC","FYC","RC1","NODES","poly3_val","coefs","poly3_der","f_df","max_err","iters","upd","newton_rapshon","defaultDatum","version","tmerc","proj4","sterea","stere","somerc","omerc","lcc","krovak","cass","laea","aea","gnom","cea","eqc","poly","nzmg","mill","sinu","moll","eqdc","vandg","aeqd","ortho","qsc","robin","viewRotation","context_","pixelRatio_","extent_","transform_","viewRotation_","contextFillState_","contextStrokeState_","contextTextState_","fillState_","strokeState_","imageAnchorX_","imageAnchorY_","imageHeight_","imageOpacity_","imageOriginX_","imageOriginY_","imageRotateWithView_","imageRotation_","imageScale_","imageWidth_","textOffsetX_","textOffsetY_","textRotateWithView_","textRotation_","textScale_","textFillState_","textStrokeState_","textState_","pixelCoordinates_","tmpLocalTransform_","drawImages_","pixelCoordinates","localTransform","drawText_","setContextFillState_","setContextStrokeState_","setContextTextState_","strokeText","fillText","moveToLineTo_","close","moveTo","lineTo","closePath","drawRings_","drawCircle","beginPath","arc","setFillStrokeStyle","setImageStyle","setTextStyle","drawGeometry","drawPoint","drawLineString","drawPolygon","drawMultiPoint","drawMultiLineString","drawMultiPolygon","drawGeometryCollection","drawFeature","flatMidpoint","geometryExtent","flatMidpoints","getFlatMidpoints","flatInteriorPoint","endss","getEndss","flatInteriorPoints","getFlatInteriorPoints","fillState","contextFillState","fillStyle","strokeState","contextStrokeState","lineWidth","strokeStyle","textState","contextTextState","textAlign","textBaseline","fillStyleColor","strokeStyleColor","strokeStyleLineCap","strokeStyleLineDash","strokeStyleLineDashOffset","strokeStyleLineJoin","strokeStyleWidth","strokeStyleMiterLimit","imageStyle","imageAnchor","getAnchor","imageImage","imageOrigin","getOrigin","imageSize","getRotateWithView","textStyle","textFillStyle","textFillStyleColor","textStrokeStyle","textStrokeStyleColor","textStrokeStyleLineCap","textStrokeStyleLineDash","textStrokeStyleLineDashOffset","textStrokeStyleLineJoin","textStrokeStyleWidth","textStrokeStyleMiterLimit","textFont","getFont","textOffsetX","getOffsetX","textOffsetY","getOffsetY","textRotateWithView","textRotation","textScale","textText","textTextAlign","getTextAlign","textTextBaseline","getTextBaseline","toContext","getVectorContext","inversePixelTransform","coordinateToPixelTransform","getRenderPixel","renderDeclutterItems","declutterTree","items","declutterItems","zIndexItems","renderDeclutter","ATTRIBUTIONS","LayerConfig","ProviderConfig","Stamen","layer","provider","providerConfig","layerConfig","TileWMS","transparent","tileClass","gutter_","gutter","params_","v13_","serverType_","tmpExtent_","updateV13_","setKey","getKeyForParams_","getFeatureInfoUrl","projectionObj","sourceProjectionObj","getTileGridForProjection","tileResolution","tileExtent","getTileCoordExtent","getTileSize","tmpSize","baseParams","getRequestUrl_","getLegendUrl","layers","LAYERS","mpu","getGutter","getParams","GEOSERVER","dpi","MAPSERVER","CARMENTA_SERVER","QGIS","getAxisOrientation","getTilePixelRatio","updateParams","BaseImage","code_","units_","worldExtent_","axisOrientation_","global_","canWrapX_","getPointResolutionFunc_","defaultTileGrid_","metersPerUnit_","canWrapX","getWorldExtent","setGlobal","setExtent","setGetPointResolution","MultiLineString","appendLineString","opt_interpolate","interpolate","getLineString","getLineStrings","midpoints","midpoint","MultiPoint","appendPoint","getPoint","getPoints","Control","target_","map_","listenerKeys","setTarget","disposeInternal","getOverlayContainerStopEvent","POSTRENDER","getElementById","ua","navigator","userAgent","FIREFOX","WEBKIT","MAC","DEVICE_PIXEL_RATIO","devicePixelRatio","IMAGE_DECODE","Image","Text","font_","rotateWithView_","rotateWithView","scale_","textAlign_","textBaseline_","maxAngle_","maxAngle","placement_","placement","overflow_","overflow","offsetX_","offsetY_","backgroundFill_","backgroundFill","backgroundStroke_","backgroundStroke","padding_","getPlacement","getMaxAngle","getOverflow","getBackgroundFill","getBackgroundStroke","getPadding","setOverflow","setFont","setMaxAngle","setOffsetX","setOffsetY","setPlacement","setRotateWithView","setTextAlign","setTextBaseline","setBackgroundFill","setBackgroundStroke","setPadding","SimpleGeometry","getFirstCoordinate","getLastCoordinate","simplifiedGeometryRevision","simplifiedGeometryMaxMinSquaredTolerance","simplifiedGeometry","getStrideForLayout","nesting","getLayoutForStride","opt_sy","transformGeom2D","simpleGeometry","Interaction","setActive","pan","zoomByDelta","ELEMENT","MAP","OFFSET","POSITION","POSITIONING","Overlay","insertFirst","autoPan","autoPanAnimation","autoPanMargin","rendered","bottom_","left_","right_","top_","visible","mapPostrenderListenerKey","handleElementChanged","handleMapChanged","handleOffsetChanged","handlePositionChanged","handlePositioningChanged","setElement","setOffset","setPositioning","positioning","setPosition","getElement","getOffset","getPosition","getPositioning","updatePixelPosition","container","getOverlayContainer","panIntoView","mapRect","getRect","overlayRect","offsetLeft","offsetRight","offsetTop","offsetBottom","centerPx","newCenterPx","box","pageXOffset","pageYOffset","setVisible","display","isRendered","mapSize","updateRenderedPosition","CENTER_RIGHT","BOTTOM_CENTER","CENTER_CENTER","TOP_CENTER","CENTER_LEFT","getOptions","transform2D","anchorX","anchorY","MultiPolygon","opt_endss","endss_","flatInteriorPointsRevision_","flatInteriorPoints_","appendPolygon","newEndss","flatCenters","getInteriorPoints","simplifiedEndss","getPolygon","prevEnds","getPolygons","lastEnds","sourceTileGrid","targetProj","targetTileGrid","wrappedTileCoord","getTileFunction","opt_errorThreshold","opt_renderEdges","TileState","renderEdges_","canvas_","sourceTileGrid_","targetTileGrid_","wrappedTileCoord_","sourceTiles_","sourcesListenerKeys_","sourceZ_","targetExtent","maxTargetExtent","maxSourceExtent","limitedTargetExtent","sourceProjExtent","errorThresholdInPixels","triangulation_","Triangulation","getTriangles","sourceExtent","calculateSourceExtent","sourceRange","srcX","srcY","tile","unlistenSources_","reproject_","sources","leftToLoad","sourceListenKey","defaultTileLoadFunction","ImageTile","tileCacheForProjection","tileGridForProjection","reprojectionErrorThreshold_","renderReprojectionEdges_","tileCache","expireCache","usedTiles","usedTileCache","getTileCacheForProjection","getGutterForProjection","getOpaque","thisProj","projKey","TileCache","highWaterMark","createTile_","urlTileCoord","getTileCoordForTileUrlFunction","tileUrl","tileOptions","handleTileChange","getTile","tileCoordKey","containsKey","newTile","getTileInternal","interimTile","refreshInterimChain","setRenderReprojectionEdges","setTileGridForProjection","tilegrid","imageTile","src","createFromTemplate","zRegEx","xRegEx","yRegEx","dashYRegEx","range","createFromTemplates","templates","tileUrlFunctions","createFromTileUrlFunctions","nullTileUrlFunction","expandUrl","startCharCode","stopCharCode","stop","deflateCoordinate","deflateCoordinates","deflateCoordinatesArray","coordinatess","deflateMultiCoordinatesArray","coordinatesss","Layer","mapPrecomposeKey_","mapRenderKey_","sourceChangeKey_","handleSourcePropertyChange_","setSource","getLayersArray","getLayerStatesArray","opt_states","states","getLayerState","getSourceState","handleSourceChange_","layerRenderer","prepareFrame","renderFrame","PRECOMPOSE","layerStatesArray","hasRenderer","inView","layerState","inflateCoordinates","opt_coordinates","inflateCoordinatesArray","opt_coordinatess","inflateMultiCoordinatesArray","opt_coordinatesss","tmpTileCoord","TileGrid","origins","origin_","origins_","tileSizes_","tileSizes","fullTileRanges_","tmpSize_","sizes","calculateTileRanges_","forEachTileCoord","forEachTileCoordParentTileRange","opt_tileRange","tileCoordExtent","getTileCoordChildTileRange","getTileRangeExtent","getTileCoordForXYAndZ_","getTileCoordForCoordAndResolution","getTileCoordForXYAndResolution_","reverseIntersectionPolicy","adjustX","adjustY","xFromOrigin","yFromOrigin","tileCoordX","tileCoordY","getTileCoordResolution","fullTileRanges","ERROR_THRESHOLD","ENABLE_RASTER_REPROJECTION","formatNumber","formatColor","colorArray","getSymbolVertexShader","parameters","offsetMatrix","uniforms","varyings","uniform","attribute","varying","expression","getSymbolFragmentShader","attributePrefix","stringify","parseSymbolStyle","texCoord","textureCoord","pA","pV","opacityFilter","visibleSize","symbolType","st","colorExpression","sizeExpression","offsetExpression","texCoordExpression","attrName","attributeName","texture","LAYERGROUP","SIZE","TARGET","VIEW","FRACTION","imageState","hitDetectionImage_","unlisten_","imageState_","size_","src_","tainted_","isTainted_","ImageState","getImageData","dispatchChangeEvent_","handleImageError_","unlistenImage_","handleImageLoad_","replaceColor_","getImageState","getHitDetectionImage","fillRect","getSrc","ctx","imgData","putImageData","normalizedAnchor_","anchorOrigin_","anchorOrigin","IconOrigin","anchorXUnits_","anchorXUnits","IconAnchorUnits","anchorYUnits_","anchorYUnits","crossOrigin_","img","imgSize","iconImage_","iconImage","offset_","offsetOrigin_","offsetOrigin","Icon","setAnchor","getImageSize","getHitDetectionImageSize","iconImageSize","listenImageChange","unlistenImageChange","getSourceTiles","removeSourceTiles","executorGroups","loadingSourceTiles","errorSourceTileKeys","replayState_","wantedResolution","getSourceTiles_","removeSourceTiles_","sourceZ","hifi","hasContext","getReplayState","dirty","renderedRenderOrder","renderedResolution","renderedRevision","renderedTileResolution","renderedTileRevision","renderedZ","renderedTileZ","tileLoadFunction_","onLoad","setFeatures","onError","defaultLoadFunction","loadingTiles_","sourceTileByCoordKey_","sourceTilesByTileKey_","tileGrids_","sourceTiles","covered","empty","loadedZ","previousSourceTiles","sourceTileCoord","sourceTile","coordKey","sourceTileKey","addSourceTiles","tileKey","dispose","getTilePixelSize","appendParams","keyParams","encodeURIComponent","KVP","REST","requestEncoding","WMTSRequestEncoding","version_","dimensions_","dimensions","layer_","matrixSet_","matrixSet","requestEncoding_","getKeyForDimensions_","createFromWMTSTemplate","setUrls","setTileUrlFunction","getDimensions","getLayer","getMatrixSet","getRequestEncoding","getVersion","updateDimensions","optionsFromCapabilities","wmtsCap","config","elt","tileMatrixSets","supportedCRS","proj1","proj2","matrixLimits","matrixSets","matrixSetObj","projConfig","wgs84BoundingBox","wgs84ProjectionExtent","gets","encodings","localContext","getMatrixId","assignClosest","offset1","offset2","maxSquaredDelta","squaredDelta","arrayMaxSquaredDelta","multiArrayMaxSquaredDelta","assignClosestPoint","isRing","opt_tmpPoint","tmpPoint","assignClosestArrayPoint","assignClosestMultiArrayPoint","getImageFunction","triangulation","sourceImage","sourcePixelRatio","getPixelRatio","targetProj_","maxSourceExtent_","targetExtent_","sourceImage_","sourcePixelRatio_","sourceListenerKey_","unlistenSource_","sourceState","ImageSourceEventType","ImageSourceEvent","Event","reprojectedImage_","reprojectedRevision_","findNearestResolution","getImageInternal","handleImageChange","defaultImageLoadFunction","DEFAULT_COLOR","DEFAULT_IMAGE_STYLE_ANCHOR","DEFAULT_IMAGE_STYLE_ANCHOR_X_UNITS","DEFAULT_IMAGE_STYLE_ANCHOR_Y_UNITS","DEFAULT_IMAGE_STYLE_SIZE","DEFAULT_IMAGE_STYLE_SRC","DEFAULT_IMAGE_SCALE_MULTIPLIER","GX_NAMESPACE_URIS","NAMESPACE_URIS","ICON_ANCHOR_UNITS_MAP","PLACEMARK_PARSERS","extendedDataParser","regionParser","readMultiGeometry","readStyle","styleMapValue","readStyleMapValue","placemarkObject","readURI","GX_MULTITRACK_GEOMETRY_PARSERS","readGxTrack","NETWORK_LINK_PARSERS","LINK_PARSERS","REGION_PARSERS","LAT_LON_ALT_BOX_PARSERS","regionObject","LOD_PARSERS","lodObject","KML_SEQUENCE","KML_SERIALIZERS","DOCUMENT_SERIALIZERS","DOCUMENT_NODE_FACTORY","writePlacemark","DEFAULT_FILL_STYLE","DEFAULT_NO_IMAGE_STYLE","DEFAULT_IMAGE_STYLE","DEFAULT_TEXT_STROKE_STYLE","DEFAULT_STROKE_STYLE","DEFAULT_TEXT_STYLE","DEFAULT_STYLE","DEFAULT_STYLE_ARRAY","KML","defaultStyle_","defaultStyle","extractStyles_","extractStyles","writeStyles_","writeStyles","sharedStyles_","showPointNames_","showPointNames","readDocumentOrFolder_","readPlacemark_","readSharedStyle_","readSharedStyleMap_","styleUrl","sharedStyles","nameStyle","drawName","createNameStyleFunction","foundStyle","findStyle","styleValue","createFeatureStyleFunction","styleUri","baseURI","location","href","URL","readFeatureFromNode","fs","readName","doc","readNameFromDocument","readNameFromNode","ELEMENT_NODE","readNetworkLinks","networkLinks","readNetworkLinksFromDocument","readNetworkLinksFromNode","readRegion","regions","readRegionFromDocument","readRegionFromNode","writeFeaturesNode","kml","xmlnsUri","setAttributeNS","textOffset","imageScale","foundText","readColor","hexColor","readFlatCoordinates","re","readScale","STYLE_MAP_PARSERS","pairObject","PAIR_PARSERS","ICON_STYLE_PARSERS","iconObject","ICON_PARSERS","xunits","yunits","LABEL_STYLE_PARSERS","LINE_STYLE_PARSERS","POLY_STYLE_PARSERS","FLAT_LINEAR_RING_PARSERS","readFlatLinearRing","GX_TRACK_PARSERS","whens","when","gxTrackObject","readFlatCoordinatesFromNode","EXTRUDE_AND_ALTITUDE_MODE_PARSERS","MULTI_GEOMETRY_PARSERS","multiGeometry","homogeneous","setCommonGeometryProperties","flatLinearRing","INNER_BOUNDARY_IS_PARSERS","OUTER_BOUNDARY_IS_PARSERS","STYLE_PARSERS","styleObject","IconObject","drawIcon","hotSpot","heading","outline","hasExtrude","hasTessellate","hasAltitudeMode","extrudes","tessellates","altitudeModes","DATA_PARSERS","EXTENDED_DATA_PARSERS","featureObject","displayName","SCHEMA_DATA_PARSERS","writeColorTextNode","rgba","abgr","hex","EXTENDEDDATA_NODE_SERIALIZERS","pair","DATA_NODE_FACTORY","ICON_SEQUENCE","ICON_SERIALIZERS","GX_NODE_FACTORY","ICON_STYLE_SEQUENCE","ICON_STYLE_SERIALIZERS","icon","vec2","writeScaleTextNode","LABEL_STYLE_SEQUENCE","LABEL_STYLE_SERIALIZERS","LINE_STYLE_SEQUENCE","LINE_STYLE_SERIALIZERS","GEOMETRY_TYPE_TO_NODENAME","GEOMETRY_NODE_FACTORY","POINT_NODE_FACTORY","LINE_STRING_NODE_FACTORY","LINEAR_RING_NODE_FACTORY","POLYGON_NODE_FACTORY","MULTI_GEOMETRY_SERIALIZERS","writePrimitiveGeometry","writePolygon","writeMultiGeometry","factory","getGeometries","BOUNDARY_IS_SERIALIZERS","writeBoundaryIs","PLACEMARK_SERIALIZERS","namesAndValues","STYLE_SEQUENCE","STYLE_SERIALIZERS","PLACEMARK_SEQUENCE","EXTENDEDDATA_NODE_FACTORY","sort","PRIMITIVE_GEOMETRY_SEQUENCE","PRIMITIVE_GEOMETRY_SERIALIZERS","POLYGON_SERIALIZERS","INNER_BOUNDARY_NODE_FACTORY","OUTER_BOUNDARY_NODE_FACTORY","outerRing","POLY_STYLE_SERIALIZERS","COLOR_NODE_FACTORY","iconProperties","HYBRID","IMAGE_REPLAYS","VECTOR_REPLAYS","boundHandleStyleImageChange_","handleStyleImageChange_","overlayContext_","overlayContextUid_","overlayPixelTransform_","inverseOverlayPixelTransform_","dirty_","renderedLayerRevision_","renderTileImageQueue_","tileListenerKeys_","tmpTransform_","useContainer","overlayContext","childElementCount","lastElementChild","containerReused","transformOrigin","prepareTile","queue","tileUid","updateExecutorGroup_","tileImageNeedsRender_","listenerKey","viewHints","renderTileImage_","isDrawableTile","getTileImage","layerIndex","hasOverlay","layerRevision","renderedTiles","revision","renderOrder","getRenderOrder","builderState","layerUid","sourceTileExtent","sharedExtent","bufferedExtent","getRenderBuffer","tmpExtent","builderGroup","getDeclutter","renderFeature","executorGroupInstructions","finish","replayExtent","renderingReplayGroup","tt","forEachFeatureAtCoordinate","hitTolerance","declutteredFeatures","declutter","tileContainsCoordinate","executorGroup","handleFontsChanged","getVisible","renderIfReadyAndVisible","renderQueuedTileImages_","renderMode","getRenderMode","VectorTileRenderType","declutterReplays","replayTypes","canvasTransform","clearRect","tiles","clips","clipZs","worldOffset","getRenderTransform","clipped","hasExecutors","currentZ","currentClip","getClipCoords","save","clip","execute","restore","time","replayState","renderPixelRatio","renderScale","pixelScale","getDataAtPixel","renderPixel","Uint8Array","renderMode_","BaseVector","ARRAY_BUFFER","XML","asColorLike","GETFEATUREINFO_IMAGE_SIZE","ImageWMS","imageLoadFunction_","imageLoadFunction","imageSize_","renderedRevision_","ratio_","imageResolution","viewExtent","requestWidth","requestHeight","requestExtent","getImageLoadFunction","setImageLoadFunction","Observable","revision_","on","once","un","unByKey","padNumber","opt_precision","numberString","compareVersions","v1","v2","s1","n1","n2","Target","opt_target","pendingRemovals_","dispatching_","listeners_","listeners","propagate","pendingRemovals","getListeners","hasListener","opt_type","Disposable","disposed_","douglasPeucker","simplifiedOffset","markers","first","maxSquaredDistance","douglasPeuckerArray","snap","tolerance","quantize","quantizeArray","quantizeMultiArray","HEX_COLOR_RE_","NAMED_COLOR_RE_","asString","fromString","rgb","fromNamed","hasAlpha","normalize","fromStringInternal_","asArray","ImageWrapper","listenImage","loadHandler","errorHandler","promise","listening","then","catch","message","Tile","transition_","transitionStarts_","getInterimTile","getTileCoord","getAlpha","inTransition","endTransition","all","XMLFeature","xmlSerializer_","XMLSerializer","readFeatureFromDocument","readFeaturesFromDocument","readGeometryFromDocument","readProjectionFromDocument","writeFeatureNode","serializeToString","writeGeometryNode","register","projCodes","code1","code2","DEFAULT_MAX_ZOOM","DEFAULT_TILE_SIZE","linearRingContainsExtent","linearRingContainsXY","wn","linearRingsContainsXY","linearRingssContainsXY","linearRingIsClockwise","edge","linearRingsAreOriented","isClockwise","linearRingssAreOriented","orientLinearRings","orientLinearRingsArray","SelectEventType","SELECT","SelectEvent","selected","deselected","Select","layerFilter","addCondition_","addCondition","removeCondition_","removeCondition","toggleCondition_","toggleCondition","multi_","multi","filter_","hitTolerance_","featureStyleAssociation_","layerFilter_","featureLayerAssociation_","addFeature_","removeFeature_","addFeatureLayerAssociation_","getHitTolerance","setHitTolerance","removeSelectedStyle_","giveSelectedStyle_","removeFeatureLayerAssociation_","toggle","forEachFeatureAtPixel","PRERENDER","POSTCOMPOSE","RENDERCOMPLETE","transforms","RegularShape","hitDetectionCanvas_","radius1","radius2_","radius2","hitDetectionImageSize_","getRadius2","strokeWidth","renderOptions","draw_","createHitDetectionCanvas_","angle0","radiusC","drawHitDetectionCanvas_","CanvasBuilder","maxLineWidth","beginGeometryInstruction1_","beginGeometryInstruction2_","bufferedMaxExtent_","instructions","tmpCoordinate_","hitDetectionInstructions","applyPixelRatio","dashArray","dash","appendFlatCoordinates","closed","skipFirst","myEnd","getBufferedMaxExtent","lastRel","nextRel","lastXCoord","lastYCoord","nextCoord","skipped","drawCustomCoordinates_","builderEnds","builderEnd","drawCustom","beginGeometry","builderEndss","builderBegin","myEnds","endGeometry","reverseHitDetectionInstructions","reverse","instruction","createFill","applyStroke","createStroke","updateFillStyle","currentFillStyle","updateStrokeStyle","currentStrokeStyle","currentLineCap","currentLineDash","currentLineDashOffset","currentLineJoin","currentLineWidth","currentMiterLimit","endGeometryInstruction","MVT","featureClass_","featureClass","layerName_","layerName","layers_","idProperty_","idProperty","readRawGeometry_","pbf","pos","readVarint","cmd","coordsLen","currentEnd","cmdLen","readSVarint","createFeature_","rawFeature","geometryType","numEnds","getGeometryType","geom","prevEndIndex","ctor","pbfLayers","readFields","layersPBFReader","pbfLayer","readRawFeature","setLayers","tag","layerPBFReader","readFloat","readDouble","readVarint64","featurePBFReader","MOVESTART","MOVEEND","LinearRing","calculateSourceResolution","targetMetersPerUnit","sourceMetersPerUnit","compensationFactor","enlargeClipPoint","centroidX","centroidY","dX","dY","sourceDataExtent","canvasWidthInUnits","canvasHeightInUnits","stitchContext","stitchScale","xPos","yPos","srcWidth","srcHeight","targetTopLeft","triangle","v0","u1","u2","sourceNumericalShiftX","sourceNumericalShiftY","augmentedMatrix","affineCoefs","p0","p1","p2","disable","createSnapToN","createSnapToZero","opt_tolerance","MapBrowserPointerEvent","opt_dragging","opt_frameState","SIMPLIFY_TOLERANCE","GEOMETRY_RENDERERS","imageReplay","getBuilder","addDeclutter","textReplay","drawText","lineStringReplay","polygonReplay","replayGroup","geometryRenderer","circleReplay","defaultOrder","feature1","feature2","getSquaredTolerance","getTolerance","simplifyTransformed","renderGeometry","replay","renderFeatureInternal","DEFAULT_WMS_VERSION","Source","attributions_","adaptAttributions","attributionsCollapsible_","state_","wrapX_","getAttributionsCollapsible","getWrapX","attributionLike","GeometryCollection","opt_geometries","geometries_","changeEventsKeys_","listenGeometriesChange_","unlistenGeometriesChange_","geometryCollection","setGeometries","cloneGeometries","simplifiedGeometries","simplified","simplifiedGeometryCollection","setGeometriesArray","clonedGeometries","interpolatePoint","pointX","pointY","cumulativeLengths","lineStringCoordinateAtM","lo","m0","lineStringsCoordinateAtM","NAMESPACE_URI","readHref","counter","WOFF","mimes","woff","woff2","ttf","eot","png","jpg","jpeg","gif","tiff","svg","parseExtension","getMimeType","createImage","Promise","resolve","reject","onload","onerror","getDataURLContent","dataURL","px","styleProperty","getPropertyValue","uuid","random","ms","isDataUrl","search","toDataURL","content","mimeType","canvasToBlob","toBlob","binaryString","atob","binaryArray","Blob","toArray","arrayLike","getNodeWidth","leftBorder","rightBorder","scrollWidth","getNodeHeight","topBorder","bottomBorder","scrollHeight","svgToDataURL","html","getBlobFromImageURL","intersectsLineString","coordinatesExtent","point1","point2","intersectsLineStringArray","intersectsLinearRingArray","intersectsLinearRing","intersectsLinearRingMultiArray","WMTSTileGrid","matrixIds_","matrixIds","getMatrixIds","createFromCapabilitiesMatrixSet","opt_matrixLimits","switchOriginXY","elt_ml","tileWidth","tileHeight","supportedExtensions","ELEMENT_ARRAY_BUFFER","DYNAMIC_DRAW","CONTEXT_IDS","opt_attributes","BufferUsage","opt_usage","usage","getArrayClassForType","Float32Array","Uint32Array","ofSize","fromArray","fromArrayBuffer","getUsage","LOST","RESTORED","fromTransform","mat4","WebGLPostProcessingPass","gl_","webGlContext","scaleRatio_","scaleRatio","renderTargetTexture_","createTexture","renderTargetTextureSize_","frameBuffer_","createFramebuffer","vertexShader","createShader","VERTEX_SHADER","shaderSource","compileShader","fragmentShader","FRAGMENT_SHADER","renderTargetProgram_","createProgram","attachShader","linkProgram","renderTargetVerticesBuffer_","createBuffer","bindBuffer","bufferData","STATIC_DRAW","renderTargetAttribLocation_","getAttribLocation","renderTargetUniformLocation_","getUniformLocation","renderTargetTextureLocation_","uniforms_","getGL","bindFramebuffer","FRAMEBUFFER","getFrameBuffer","viewport","internalFormat","RGBA","UNSIGNED_BYTE","bindTexture","TEXTURE_2D","texImage2D","texParameteri","TEXTURE_MIN_FILTER","LINEAR","TEXTURE_WRAP_S","CLAMP_TO_EDGE","TEXTURE_WRAP_T","framebufferTexture2D","COLOR_ATTACHMENT0","nextPass","activeTexture","TEXTURE0","clearColor","COLOR_BUFFER_BIT","enable","BLEND","blendFunc","ONE","ONE_MINUS_SRC_ALPHA","useProgram","enableVertexAttribArray","vertexAttribPointer","FLOAT","uniform2f","uniform1i","applyUniforms","drawArrays","TRIANGLES","textureSlot","HTMLCanvasElement","ImageData","uniform3f","uniform4f","uniform1f","DefaultUniform","PROJECTION_MATRIX","OFFSET_SCALE_MATRIX","OFFSET_ROTATION_MATRIX","AttributeType","UNSIGNED_SHORT","UNSIGNED_INT","getByteSizeFromType","BYTES_PER_ELEMENT","Uint16Array","boundHandleWebGLContextLost_","handleWebGLContextLost","boundHandleWebGLContextRestored_","handleWebGLContextRestored","bufferCache_","shaderCache_","programCache_","currentProgram_","getSupportedExtensions","getExtension","ContextEventType","offsetRotateMatrix_","offsetScaleMatrix_","tmpMat4_","uniformLocations_","attribLocations_","postProcessPasses_","postProcesses","shaderCompileErrors_","bufferKey","bufferCache","webGlBuffer","flushBufferData","deleteBuffer","buf","bufferCacheEntry","isContextLost","deleteProgram","deleteShader","prepareDraw","getCanvas","applyFrameState","prepareDrawToRenderTarget","renderTarget","opt_disableAlphaBlend","getFramebuffer","getTexture","ZERO","drawElements","elementType","numItems","offsetInBytes","finalizeDraw","offsetScaleMatrix","offsetRotateMatrix","setUniformMatrixValue","HTMLImageElement","program","shader","getProgram","fragmentShaderSource","vertexShaderSource","getShaderInfoLog","getShaderCompileErrors","getAttributeLocation","makeProjectionTransform","setUniformFloatValue","uniformMatrix4fv","enableAttributeArray_","attribName","enableAttributes","attr","computeAttributesStride","opt_data","opt_texture","WebGLWorkerMessageType","GENERATE_BUFFERS","helper","colorEncodeId","radix","blob","createObjectURL","tmpArray4","WebGLRenderTarget","helper_","texture_","framebuffer_","data_","dataCacheDirty_","updateSize_","setSize","clearCachedData","readAll","readPixels","readPixel","projectionMatrixTransform","sourceRevision_","verticesBuffer_","hitVerticesBuffer_","indicesBuffer_","program_","hitDetectionEnabled_","hitFragmentShader","hitVertexShader","hitProgram_","customAttributes","hitDetectionAttributes","previousExtent_","currentTransform_","renderTransform_","invertRenderTransform_","renderInstructions_","hitRenderInstructions_","hitRenderTarget_","worker_","Worker","received","projectionTransform","hitDetection","vertexBuffer","indexBuffer","renderInstructions","renderCount","renderHitDetection","vectorSource","sourceChanged","viewNotMoving","extentChanged","rebuildBuffers_","totalInstructionsCount","totalHitInstructionsCount","hitColor","tmpCoords","tmpColor","renderIndex","hitIndex","customAttributesCount","postMessage","hitMessage","colorDecodeId","terminate","PARSERS","SERVICE_IDENTIFICATION_PARSERS","SERVICE_PROVIDER_PARSERS","OPERATIONS_METADATA_PARSERS","readFromDocument","readFromNode","owsObject","ADDRESS_PARSERS","ALLOWED_VALUES_PARSERS","CONSTRAINT_PARSERS","CONTACT_INFO_PARSERS","PHONE_PARSERS","DCP_PARSERS","HTTP_PARSERS","REQUEST_METHOD_PARSERS","OPERATION_PARSERS","SERVICE_CONTACT_PARSERS","OWS_NAMESPACE_URIS","CONTENTS_PARSERS","owsParser_","WMTSCapabilityObject","LAYER_PARSERS","TMS_PARSERS","isDefault","TMS_LINKS_PARSERS","DIMENSION_PARSERS","resourceType","WGS84_BBOX_READERS","legend","TMS_LIMITS_LIST_PARSERS","TMS_LIMITS_PARSERS","readCoordinates","TM_PARSERS","DEFAULT_RADIUS","opt_radius","deltaLatBy2","deltaLonBy2","getLengthInternal","getAreaInternal","bearing","lon1","dByR","CIRCLE_CIRCUMFERENCE_INDEX","tempExtent","tempSegment","ModifyEventType","ModifyEvent","mapBrowserPointerEvent","Modify","boundHandleFeatureChange_","defaultDeleteCondition_","deleteCondition_","deleteCondition","insertVertexCondition_","insertVertexCondition","vertexFeature_","vertexSegments_","lastPixel_","ignoreNextSingleClick_","modified_","rBush_","pixelTolerance_","pixelTolerance","snappedToVertex_","changingFeature_","dragSegments_","updateWhileAnimating","SEGMENT_WRITERS_","writePointGeometry_","writeLineStringGeometry_","writePolygonGeometry_","writeMultiPointGeometry_","writeMultiLineStringGeometry_","writeMultiPolygonGeometry_","writeCircleGeometry_","writeGeometryCollectionGeometry_","handleSourceAdd_","handleSourceRemove_","handleFeatureAdd_","handleFeatureRemove_","lastPointerEvent_","writer","handlePointerAtPixel_","willModifyFeatures_","removeFeatureSegmentData_","rBush","nodesToRemove","nodeToRemove","segmentData","depth","rings","kk","centerSegmentData","circumferenceSegmentData","featureSegments","createOrUpdateVertexFeature_","vertexFeature","removePoint","vertex","dragSegment","setGeometryCoordinates_","pixelCoordinate","insertVertices","vertexExtent","segmentDataMatches","componentSegments","compareIndexes","segmentDataMatch","closestVertex","closestOnSegmentData","insertVertex_","getCoordinateFromPixel","nodes","pointDistanceToSegmentDataSquared","closestSegment","vertexPixel","dist","vertexSegments","pixel1","pixel2","squaredDist1","squaredDist2","rTree","updateSegmentIndices_","newSegmentData","newSegmentData2","removeVertex_","component","newIndex","dragSegments","segmentsByFeature","deleted","segments","pointCoordinates","circleGeometry","distanceToCenterSquared","distanceToCircumference","getClosestPoint","UNITS_PROP","IMPERIAL","NAUTICAL","METRIC","US","LEADING_DIGITS","ScaleLine","bar","innerElement_","viewState_","minWidth_","minWidth","renderedVisible_","renderedWidth_","renderedHTML_","handleUnitsChanged_","setUnits","scaleBar_","scaleBarSteps_","steps","scaleBarText_","updateElement_","pointResolutionUnits","nominalCount","suffix","metersPerDegree","decimalCount","createScaleBar","mapScale","getScaleForResolution","toLocaleString","scaleSteps","stepWidth","backgroundColor","createMarker","createStepText","isLast","lengthString","getInteriorPointOfArray","flatCentersOffset","intersections","rr","maxSegmentLength","segmentLength","getInteriorPointsOfMultiArray","interiorPoints","TileSource","opaque_","tilePixelRatio_","canUseScreen","screen","availWidth","availHeight","key_","forEachLoadedTile","loaded","useTile","TileSourceEvent","opt_errback","opt_callbackParam","script","cleanup","async","timer","getElementsByTagName","RBush","opt_maxEntries","rbush_","items_","forEach_","toJSON","rbush","TileRange","containsTileRange","RasterEventType","RasterOperationType","PIXEL","RasterSourceEvent","RasterSource","operationType_","operationType","threads_","threads","createLayer","createLayers","tileQueue_","requestedFrameState_","renderedImageCanvas_","frameState_","pixelToCoordinateTransform","postRenderFunctions","tileQueue","wantedTiles","iMax","sourceOrLayer","attributionGetter","sourceAttribution","operation","setOperation","lib","opt_lib","imageOps","updateFrameState_","allSourcesReady_","ready","renderedExtent","processSources_","loadMoreTiles","imageDatas","imageData","process","onWorkerComplete_","sharedContext","layerOrSource","TierSizeCalculation","TRUNCATED","CustomTile","zoomifyImage_","Zoomify","tierSizeCalculation","tierSizeInTiles","tileSizeForTierSizeCalculation","tileCountUpToTier","tileCoordZ","tileIndex","ZoomifyTileClass","matchingChunk","m12","m23","x12","y12","x23","y23","chunkStart","chunkEnd","chunkM","TEXT_ALIGN","declutterGroups_","labels_","fillStates","strokeStates","textStates","textKey_","fillKey_","strokeKey_","TextPlacement","LINE","flatEnd","flatOffset","oo","declutterGroup","drawChars_","geometryWidths","saveTextStates_","strokeKey","textKey","fillKey","baseline","declutterGroups","MousePosition","handleProjectionChanged_","coordinateFormat","setCoordinateFormat","setProjection","undefinedHTML_","undefinedHTML","renderOnMouseOut_","mapProjection_","getCoordinateFormat","handleMouseMove","updateHTML_","getEventPixel","handleMouseOut","twiceArea","linearRingss","CanvasLayerRenderer","tempTransform_","pixelTransform","layerClassName","getClassName","halfWidth","halfHeight","topLeft","bottomRight","bottomLeft","clipUnrotated","inverted","dispatchRenderEvent_","preRender","postRender","ImageBase","JSONFeature","getObject","BaseVectorLayer","renderBuffer","declutter_","renderBuffer_","updateWhileAnimating_","updateWhileInteracting_","getUpdateWhileAnimating","getUpdateWhileInteracting","setRenderOrder","TextFeature","readFeatureFromText","readFeaturesFromText","readGeometryFromText","readProjectionFromText","writeFeatureText","writeFeaturesText","writeGeometryText","ACCURACY","ACCURACY_GEOMETRY","ALTITUDE","ALTITUDE_ACCURACY","HEADING","SPEED","TRACKING","TRACKING_OPTIONS","GeolocationError","Geolocation","position_","watchId_","handleTrackingChanged_","trackingOptions","setTrackingOptions","setTracking","tracking","getTracking","geolocation","watchPosition","positionChange_","positionError_","getTrackingOptions","clearWatch","altitude","altitudeAccuracy","longitude","latitude","projectedPosition","speed","getAccuracy","getAccuracyGeometry","getAltitude","getAltitudeAccuracy","getHeading","getSpeed","read","IconImageCache","cache_","cacheSize_","maxCacheSize_","expire","maxCacheSize","shared","MapEvent","TopoJSON","topoJSONTopology","arcs","transformArc","transformArcs","topoJSONFeatures","objectName","readFeaturesFromGeometryCollection","readFeatureFromGeometry","GEOMETRY_READERS","transformVertex","concatenateArcs","polyArray","ringCoords","indices","geometryReader","drawTextOnPath","startM","previousAngle","numChars","segmentM","angleChanged","charLength","charM","segmentPos","tmpTransform","p3","p4","alignFill_","coordinateCache_","renderedTransform_","widths_","getTextImage","align","lineHeight","renderWidth","leftRight","replayTextBackground_","setStrokeStyle_","replayImage_","snapToPixel","fillStroke","boxW","boxH","boxX","boxY","strokePadding","declutterArgs","repeatSize","groupCount","collides","declutterData","currentAlpha","drawTextImageWithPointPlacement_","execute_","featureCallback","opt_hitExtent","prevX","prevY","roundX","roundY","pendingFill","pendingStroke","lastFillInstruction","lastStrokeInstruction","coordinateCache","batchSize","labelWithAnchor","widthIndex","declutterGroupIndex","measurePixelRatio","pixelRatioScale","cachedWidths","pathLength","textLength","parts","cc","chars","part","executeHitDetection","opt_featureCallback","ORDER","BuilderType","allInstructions","opt_renderBuffer","maxExtent_","resolution_","executorsByZIndex_","hitDetectionContext_","hitDetectionTransform_","createExecutors_","flatClipCoords","executors","instructionByZindex","builderType","candidates","contextSize","hitExtent","circleArrayCache","arraySize","fillCircleArrayRowToMiddle","getCircleArray","executor","zs","zIndexKey","opt_builderTypes","opt_declutterReplays","replays","builderTypes","replayDeclutter","zz","executorData","currentExecutor","ulElement_","collapsed_","collapsed","overrideCollapsible_","collapsible","collapsible_","collapseLabel","collapseLabel_","activeLabel","renderedAttributions_","collectSourceAttributions_","lookup","visibleAttributions","setCollapsible","handleToggle_","getCollapsible","setCollapsed","getCollapsed","lastDistance_","lastScaleDelta_","scaleDelta","Direction","VERTICAL","HORIZONTAL","ZoomSlider","dragListenerKeys_","currentResolution_","direction_","dragging_","heightLimit_","widthLimit_","startX_","startY_","thumbSize_","sliderInitialized_","thumbElement","containerElement","handleDraggerStart_","handleDraggerDrag_","handleDraggerEnd_","handleContainerClick_","initSlider_","containerSize","thumb","computedStyle","thumbWidth","thumbHeight","relativePosition","getRelativePosition_","getResolutionForPosition_","drag","setThumbPosition_","getPositionForResolution_","amount","element_","startPixel_","endPixel_","render_","startPixel","endPixel","setPixels","createOrUpdateGeometry","DragBoxEventType","DragBoxEvent","box_","minArea_","onBoxEnd_","boxEndCondition_","boxEndCondition","defaultBoxEndCondition","PriorityQueue","priorityFunction","keyFunction","priorityFunction_","keyFunction_","elements_","priorities_","queuedElements_","dequeue","elements","priorities","siftUp_","elementKey","enqueue","priority","siftDown_","getLeftChildIndex_","getRightChildIndex_","getParentIndex_","heapify_","isKeyQueued","isQueued","startIndex","lIndex","rIndex","smallerChildIndex","parentIndex","reprioritize","withCredentials","loadFeaturesXhr","success","failure","xhr","responseType","responseXML","Circle","getRadiusSquared_","circleExtent","DragRotateAndZoom","lastMagnitude_","magnitude","angleDelta","getFeatureFromEvent","Snap","vertex_","edge_","featuresListenerKeys_","featureChangeListenerKeys_","indexedFeaturesExtents_","pendingFeatures_","pixelCoordinate_","sortByDistance_","sortByDistance","opt_listen","feature_uid","segmentWriter","forEachFeatureAdd_","forEachFeatureRemove_","getFeatures_","snapTo","snapped","updateFeature_","featuresToUpdate","opt_unlisten","unregister","currentMap","lowerLeft","upperRight","isCircle","events","FullScreen","cssClassName_","labelNode_","labelActive","labelActiveNode_","button_","setClassName_","isFullScreen","isFullScreenSupported","keys_","handleFullScreen_","exitFullscreen","msExitFullscreen","webkitExitFullscreen","webkitRequestFullscreen","requestFullScreen","requestFullScreenWithKeys","handleFullScreenChange_","updateSize","fullscreen","activeClassName","inactiveClassName","nextClassName","msRequestFullscreen","msFullscreenEnabled","requestFullscreen","fullscreenEnabled","webkitIsFullScreen","msFullscreenElement","fullscreenElement","MULTIGEOMETRY_TO_MEMBER_NODENAME","GML2","readFlatCoordinates_","containerSrs","coordsGroups","readBox_","BOX_PARSERS_","innerBoundaryIsParser_","outerBoundaryIsParser_","GEOMETRY_NODE_FACTORY_","multiSurface","surface","multiCurve","writeFeatureElement","writeGeometryElement","writeCurveOrLineString_","createCoordinatesNode_","writeCoordinates_","writeCurveSegments_","writeLineStringOrCurveMember_","line","writeMultiCurveOrLineString_","hasZ","curve","LINESTRINGORCURVEMEMBER_SERIALIZERS_","MULTIGEOMETRY_MEMBER_NODE_FACTORY_","GEOMETRY_SERIALIZERS_","getCoords_","writeSurfaceOrPolygon_","RING_SERIALIZERS_","RING_NODE_FACTORY_","patches","writeSurfacePatches_","exteriorWritten","writeRing_","writeLinearRing_","opt_srsName","opt_hasZ","writePoint_","writeMultiPoint_","POINTMEMBER_SERIALIZERS_","writePointMember_","writeMultiSurfaceOrPolygon_","SURFACEORPOLYGONMEMBER_SERIALIZERS_","writeSurfaceOrPolygonMember_","writeEnvelope","ENVELOPE_SERIALIZERS_","RenderFeature","flatCoordinates_","flatMidpoints_","properties_","pixelExtent","projectedExtent","AssertionError","BaseLayer","className_","opt_managed","managed","setMaxResolution","setMinResolution","zindex","Geometry","extentRevision_","simplifyTransformedInternal","opt_closestPoint","simplify","inCoordinates","outCoordinates","ret","LRUCache","count_","entries_","oldest_","newest_","entry","value_","newer","older","peekLast","peekFirstKey","RenderEvent","opt_inversePixelTransform","opt_context","VectorContext","geometryCollectionGeometry","lineStringGeometry","multiLineStringGeometry","multiPointGeometry","multiPolygonGeometry","pointGeometry","polygonGeometry","opt_declutterGroup","opt_declutterGroups","MapBrowserEvent","pixel_","coordinate_","dragging","TileQueue","tilePriorityFunction","tileChangeCallback","boundHandleTileChange_","tileChangeCallback_","tilesLoading_","tilesLoadingKeys_","added","getTilesLoading","maxTotalLoading","maxNewLoads","newLoads","abortedTiles","CanvasTileLayerRenderer","tileLayer","renderedExtent_","newTiles_","tmpTileRange_","tileState","loadedTileCallback","viewResolution","viewCenter","tileSource","sourceRevision","layerExtent","canvasExtent","tilesToDrawByZ","findLoadedTiles","createLoadedTileFinder","tmpTileRange","childTileRange","canvasScale","currentTilePixelSize","currentScale","originTileCoord","originTileExtent","tileGutter","tilesToDraw","floatX","nextX","floatY","nextY","drawTileImage","updateUsedTiles","manageTilePyramid","updateCacheSize_","scheduleExpireCache","tileAlpha","alphaChanged","postRenderFunction","tileSourceKey","opt_tileCallback","LayerRenderer","boundHandleImageChange_","handleImageChange_","loadImage","getBlankImage","naturalWidth","naturalHeight","pruneExceptNewestZ","errorThreshold","sourceProj_","transformInvCache","transformInv","transformInv_","errorThresholdSquared_","triangles_","wrapsXInSource_","canWrapXInSource_","sourceWorldWidth_","targetWorldWidth_","destinationTopLeft","destinationTopRight","destinationBottomRight","destinationBottomLeft","sourceTopLeft","sourceTopRight","sourceBottomRight","sourceBottomLeft","addQuad_","leftBound","newTriangle","addTriangle_","aSrc","bSrc","cSrc","dSrc","maxSubdivision","sourceQuadExtent","sourceCoverageX","sourceWorldWidth","wrapsX","needsSubdivision","targetQuadExtent","centerSrc","bc","bcSrc","da","daSrc","abSrc","cd","cdSrc","CanvasImageLayerRenderer","imageLayer","imageSource","hints","imageExtent","imagePixelRatio","dw","dh","previousAlpha","_maxEntries","_minEntries","leaf","_all","toBBox","_build","_splitRoot","_insert","_condense","compareMinX","compareMinY","fromJSON","_chooseSubtree","_split","_adjustParentBBoxes","_chooseSplitAxis","_chooseSplitIndex","_allDistMargin","lineStringLength","CanvasVectorLayerRenderer","vectorLayer","renderedResolution_","renderedRenderOrder_","replayGroup_","replayGroupChanged","world","animating","interacting","frameStateExtent","vectorLayerRevision","vectorLayerRenderBuffer","vectorLayerRenderOrder","userExtent","replayGroupInstructions","ImageStyle","opacity_","ImageCanvas","opt_loader","error_","getError","handleLoad_","DragAndDropEventType","DragAndDropEvent","file","opt_features","DragAndDrop","formatConstructors_","formatConstructors","dropListenKeys_","handleResult_","tryReadFeatures_","registerListeners_","dropArea","handleDrop","handleStop","unregisterListeners_","files","dataTransfer","reader","FileReader","readAsText","dropEffect","__importDefault","mod","cloneNode_1","embedWebFonts_1","embedImages_1","createSvgDataURL_1","applyStyleWithOptions_1","utils_1","domNode","toSvgDataURL","_a","default","clonedNode","toCanvas","toPixelData","toPng","toJpeg","quality","GeometryConstructor","TokenType","WKTGeometryType","Lexer","index_","isAlpha_","isNumeric_","opt_decimal","isWhiteSpace_","nextChar_","nextToken","readNumber_","readText_","scientificNotation","lexer","lexer_","token_","layout_","consume_","isTokenType","isMatch","parseGeometry_","parseGeometryLayout_","dimToken","dimInfo","parseGeometryCollectionText_","isEmptyGeometry_","formatErrorMessage_","parsePointText_","parsePoint_","parseLineStringText_","parsePointList_","parsePolygonText_","parseLineStringTextList_","parseMultiPointText_","parsePointTextList_","parseMultiLineStringText_","parseMultiPolygonText_","parsePolygonTextList_","token","geomType","WKT","splitCollection_","splitCollection","parse_","encodePointGeometry","encodeLineStringGeometry","encodePolygonGeometry","GeometryEncoder","components","geoms","enc","geometryEncoder","encodeGeometryLayout","ControlledMap","OverviewMap","boundHandleRotationChanged_","handleRotationChanged_","viewExtent_","ovmapDiv_","ovmap_","ovmap","addLayer","boxSizing","boxOverlay_","addOverlay","scope","overlay","overlayBox","mousePosition","getEventCoordinateInternal","endMoving","oldMap","oldView","unbindView_","handleMapPropertyChange_","bindView_","resetExtent_","newView","validateExtent_","ovmapSize","ovextent","topLeftPixel","bottomRightPixel","boxWidth","boxHeight","ovmapWidth","ovmapHeight","recenter_","ovview","MAX_RATIO","LN2","updateBox_","ovresolution","getOverviewMap","Static","imageExtent_","getImageExtent","targetWidth","getGeometryLayout","paths","GEOMETRY_WRITERS","esriJSON","hasZM","getHasZM","hasM","multiPoint","multiLineString","EsriJSON","esriJSONFeature","idField","esriJSONFeatures","objectIdFieldName","wkid","esriJSONPolygon","flatRing","outerRings","holes","hole","matched","convertRings","geometryWriter","anchorX_","anchorY_","height_","originX_","originY_","drawCoordinates_","myBegin","hitDetectionImage","drawFlatCoordinates_","moveToLineToInstruction","lastStroke","drawFlatCoordinatess_","setFillStrokeStyles_","circleInstruction","BATCH_CONSTRUCTORS","PolygonBuilder","Builder","ImageBuilder","LineStringBuilder","TextBuilder","BuilderGroup","tolerance_","buildersByZIndex_","group","builderInstructions","zKey","builders","builderKey","builderInstruction","geoM","fracA","fracB","fracM","geoA","geoB","geoStack","fractionStack","fractions","maxIterations","INTERVALS","maxLines","targetSize","showLabels","lonLabelFormatter","latLabelFormatter","lonLabelPosition","latLabelPosition","lonLabelStyle","latLabelStyle","intervals","maxLat_","maxLon_","minLat_","minLon_","maxLatP_","maxLonP_","minLatP_","minLonP_","targetSize_","maxLines_","meridians_","parallels_","strokeStyle_","fromLonLatTransform_","toLonLatTransform_","projectionCenterLonLat_","meridiansLabels_","parallelsLabels_","lonLabelFormatter_","latLabelFormatter_","lonLabelPosition_","latLabelPosition_","lonLabelStyleCache_","lonLabelStyle_","latLabelStyleCache_","latLabelStyle_","intervals_","loaderFunction","featurePool_","lineStyle_","renderExtent","updateProjectionInfo_","createGraticule_","featureCount","featuresColl","labelData","poolIndex","addMeridian_","minLat","maxLat","getMeridian_","textPoint","getMeridianPoint_","addParallel_","minLon","maxLon","getParallel_","getParallelPoint_","getInterval_","cnt","centerLonLat","centerLon","centerLat","validExtent","frac","meridian","GeometryLayout","clampedBottom","clampedTop","getMeridians","lon2","parallel","clampedLeft","clampedRight","getParallels","worldExtentP","Vector","generateTileUrlFunction_","tileLoadingKeys_","getTileLoadFunction","getTileUrlFunction","getUrls","TileEventType","setTileLoadFunction","moveTolerance","clickTimeoutId_","moveTolerance_","down_","activePointers_","trackedTouches_","pointerdownListenerKey_","handlePointerDown_","relayedListenerKey_","relayEvent_","emulateClick_","newEvent","updateActivePointers_","handlePointerUp_","isMouseActionButton_","isMoving_","optionsInternal","keyboardEventTarget","overlays","layerGroup","getLayers","MapProperty","View","createOptionsInternal","boundHandleBrowserEvent_","handleBrowserEvent","maxTilesLoading_","maxTilesLoading","postRenderTimeoutHandle_","animationDelayKey_","animationDelay_","renderFrame_","coordinateToPixelTransform_","pixelToCoordinateTransform_","frameIndex_","viewPropertyListenerKey_","viewChangeListenerKey_","layerGroupPropertyListenerKeys_","viewport_","msTouchAction","touchAction","overlayContainer_","overlayContainerStopEvent_","mapBrowserEventHandler_","handleMapBrowserEvent","keyboardEventTarget_","keyHandlerKeys_","labelCache_","labelCacheListenerKey_","overlays_","overlayIdIndex_","handleResize_","postRenderFunctions_","getTilePriority","handleTileChange_","handleLayerGroupChanged_","handleViewChanged_","handleSizeChanged_","handleTargetChanged_","control","CollectionEventType","interaction","addOverlayInternal_","addControl","getControls","addInteraction","getInteractions","getLayerGroup","getOverlays","checkWrapped","getFeaturesAtPixel","forEachLayerAtPixel","hasFeatureAtPixel","hasFeatureAtCoordinate","getEventCoordinate","eventPosition","changedTouches","getTarget","getOverlayById","getLoading","viewCoordinate","tileCenter","HTMLElement","parentElement","interactionsArray","handlePostRender","lowOnFrameBudget","dispatchRenderEvent","targetElement","handleViewPropertyChanged_","ObjectEventType","renderSync","redrawText","layerStates","removeControl","removeInteraction","removeLayer","removeOverlay","previousFrameState","MapEventType","setLayerGroup","setView","expireIconCache","declutterTree_","calculateMatrices2D","thisArg","thisArg2","translatedCoordinate","offsets","numLayers","tmpCoord","scheduleExpireIconCache","labelCacheKey_","children_","previousElement","LayerGroup","layersListenerKeys_","listenerKeys_","handleLayersChanged_","handleLayerChange_","handleLayersAdd_","handleLayersRemove_","layersArray","collectionEvent","ownLayerState","FEATURE_READER","readRte","readTrk","readWpt","GPX_PARSERS","GPX_SERIALIZERS","RTE_SEQUENCE","RTE_SERIALIZERS","TRK_SEQUENCE","TRK_SERIALIZERS","writeWptType","GPX","readExtensions_","readExtensions","handleReadExtensions_","extensionsNode","featureReader","gpx","GPX_NODE_FACTORY","RTE_PARSERS","parseLink","parseExtensions","RTEPT_PARSERS","rteValues","layoutOptions","TRK_PARSERS","TRKSEG_PARSERS","TRKPT_PARSERS","trkValues","WPT_PARSERS","LINK_SEQUENCE","LINK_SERIALIZERS","writeLink","RTEPT_TYPE_SEQUENCE","TRKSEG_SERIALIZERS","TRKSEG_NODE_FACTORY","WPT_TYPE_SEQUENCE","WPT_TYPE_SERIALIZERS","applyLayoutOptions","link","IGCZ","BAROMETRIC","GPS","NONE","B_RECORD_RE","H_RECORD_RE","HFDTE_RECORD_RE","NEWLINE_RE","IGC","altitudeMode_","altitudeMode","year","month","day","lastDateTime","hour","minute","second","UTC","MOUSE_PROPS","MOUSE_DEFAULTS","PointerEvent","inType","inDict","createEvent","initEvent","bubbles","cancelable","buttons","pressure","tiltX","tiltY","twist","tangentialPressure","hwTimestamp","detail","PointerMap","SparseArrayMap","delete","has","CLONE_PROPS","CLONE_DEFAULTS","BOUNDARY_EVENTS","HAS_SVG_INSTANCE","SVGElementInstance","dispatcher","pointermap","eventMap","captureInfo","eventSources","eventSourceList","registerSource","newEvents","contained","ex","down","inEvent","fireEvent","enter","leave","over","cancel","leaveOut","enterOver","eventHandler","_handledByPE","addEvent","unlisten","removeEvent","eventName","boundHandler","makeEvent","relatedTarget","_target","cloneEvent","eventCopy","correspondingUseElement","capture","propagateDown","targets","setCapture","inPointerId","inTarget","skipDispatch","releaseCapture","implicitRelease","asyncDispatchEvent","targeting","shadow","inEl","shadowRoot","webkitShadowRoot","canTarget","elementFromPoint","targetingShadow","olderShadow","os","olderShadowRoot","se","allShadows","shadows","searchRoot","inRoot","sr","ssr","owner","DOCUMENT_NODE","DOCUMENT_FRAGMENT_NODE","findTarget","MO","MutationObserver","WebKitMutationObserver","OBSERVER_INIT","subtree","childList","attributeOldValue","attributeFilter","Installer","binder","addCallback","removeCallback","changedCallback","observer","mutationWatcher","rule","watchSubtree","observe","enableOnSubtree","readyState","installOnLoad","installNewSubtree","findElements","addElement","querySelectorAll","removeElement","elementChanged","concatLists","accum","list","isElement","flattenMutationTree","inNodes","tree","mutations","mutationHandler","addedNodes","removedNodes","attrib2css","hasNativePE","MSPointerEvent","hasShadowRoot","ShadowDOMPolyfill","head","createShadowRoot","BUTTON_TO_BUTTONS","HAS_BUTTONS","MouseEvent","INSTALLER","mouseEvents","POINTER_ID","POINTER_TYPE","lastTouches","isEventSimulatedFromTouch","lts","prepareEvent","pd","webkitForce","WEBKIT_FORCE_AT_MOUSE_DOWN","prepareButtonsForMove","which","mousedown","webkitmouseforcechanged","mousemove","mouseup","mouseover","mouseout","deactivateMouse","pointermap$1","touchEvents","elementAdded","touchActionToScrollType","_scrollType","elementRemoved","evts","oldSt","scrollTypes","firstTouch","isPrimaryTouch","inTouch","identifier","setPrimaryTouch","firstXY","scrolling","removePrimaryPointer","inPointer","typeToButtons","touchToPointer","cte","currentTouchEvent","radiusX","webkitRadiusX","radiusY","webkitRadiusY","force","altitudeAngle","azimuthAngle","touchType","processTouches","inFunction","shouldScroll","currentTarget","dya","dxa","findTouch","inTL","inId","vacuumTouches","touches","cancelOut","touchstart","dedupSynthMouse","overDown","outTarget","touchforcechange","touchmove","touchcancel","moveOverOut","pointer","outEvent","touchend","upOut","cleanUpPointer","lt","pointermap$2","HAS_BITMAP_TYPE","MSPOINTER_TYPE_MOUSE","msEvents","POINTER_TYPES","MSPointerDown","MSPointerMove","MSPointerUp","MSPointerOut","MSPointerOver","MSPointerCancel","MSLostPointerCapture","MSGotPointerCapture","assertActive","assertConnected","ownerDocument","inActiveButtonState","msPointerEnabled","msSetPointerCapture","msReleasePointerCapture","shadowSelector","applyAttributeStyles","msMaxTouchPoints","ontouchstart","applyPolyfill","Element","setPointerCapture","defineProperties","targetFinding","vectorRenderer_","layerImageRatio_","getImageRatio","vectorRenderer","imageFrameState","imageRatio","imageRatio_","getBlobFromURL_1","URL_REGEX","parseURLs","str","raw","quotation","embed","cssString","resourceURL","baseURL","resolvedURL","baseUrl","protocol","createHTMLDocument","base","resolveUrl","RegExp","escape","shouldEmbed","TIMEOUT","cacheBust","getTime","fetch","onloadend","readAsDataURL","req","onreadystatechange","encoder","ontimeout","reason","placeholder","imagePlaceholder","msg","isLE","mLen","nBytes","eLen","eMax","eBias","nBits","rt","Processor","Pbf","ieee754","ArrayBuffer","isView","Varint","Fixed64","Bytes","Fixed32","readPackedEnd","toNum","isSigned","makeRoomForExtraLength","startPos","extraLen","realloc","writePackedVarint","writeVarint","writePackedSVarint","writeSVarint","writePackedFloat","writeFloat","writePackedDouble","writeDouble","writePackedBoolean","writeBoolean","writePackedFixed32","writeFixed32","writePackedSFixed32","writeSFixed32","writePackedFixed64","writeFixed64","writePackedSFixed64","writeSFixed64","readUInt32","writeInt32","readInt32","destroy","readField","skip","readMessage","readFixed32","readSFixed32","readFixed64","readSFixed64","readVarintRemainder","b3","bytesPerSequence","readUtf8","readBytes","subarray","readPackedVarint","readPackedSVarint","readPackedBoolean","readPackedFloat","readPackedDouble","readPackedFixed32","readPackedSFixed32","readPackedFixed64","readPackedSFixed64","writeTag","writeBigVarintLow","lsb","writeBigVarintHigh","writeBigVarint","writeString","lead","writeUtf8","writeBytes","writeRawMessage","writeMessage","writeBytesField","writeFixed32Field","writeSFixed32Field","writeFixed64Field","writeSFixed64Field","writeVarintField","writeSVarintField","writeStringField","writeFloatField","writeDoubleField","writeBooleanField","Cluster","cluster","setDistance","mapDistance","clustered","neighbors","neighbor","createCluster","newImageData","createMinion","workerHasImageData","_","newWorkerImageData","buffers","meta","numBuffers","numBytes","byteLength","images","Uint8ClampedArray","arrays","pixels","createWorker","onMessage","worker","_imageOps","workers","_onWorkerMessage","minion","createFauxWorker","_workers","_queue","_maxQueueLength","_running","_dataLookup","_job","inputs","_enqueue","_dispatch","_destroyed","job","slices","_resolveJob","hasImageData","createImageData","clonePseudoElements_1","cloneSingleNode","nativeNode","cloneNode","decorate","cssText","setProperty","getPropertyPriority","cloneCssStyle","HTMLTextAreaElement","HTMLInputElement","cloneInputValue","isRoot","clonedChild","cloneChildren","getPseudoElementStyle","pseudo","formatCssText","formatCssProperties","styleElement","clonePseudoElement","__importStar","embedResources_1","getCssRules","styleSheets","sheet","cssRules","getWebFontRules","CSSRule","FONT_FACE_RULE","parseWebFontRules","rules","parentStyleSheet","cssStrings","styleNode","sytleContent","embedImages","background","embedBackground","embedImageNode","deferreds","embedChildren","xmlns","foreignObject"],"mappings":"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","file":"common.js","sourcesContent":[" \t// install a JSONP callback for chunk loading\n \tfunction webpackJsonpCallback(data) {\n \t\tvar chunkIds = data[0];\n \t\tvar moreModules = data[1];\n \t\tvar executeModules = data[2];\n\n \t\t// add \"moreModules\" to the modules object,\n \t\t// then flag all \"chunkIds\" as loaded and fire callback\n \t\tvar moduleId, chunkId, i = 0, resolves = [];\n \t\tfor(;i < chunkIds.length; i++) {\n \t\t\tchunkId = chunkIds[i];\n \t\t\tif(Object.prototype.hasOwnProperty.call(installedChunks, chunkId) && installedChunks[chunkId]) {\n \t\t\t\tresolves.push(installedChunks[chunkId][0]);\n \t\t\t}\n \t\t\tinstalledChunks[chunkId] = 0;\n \t\t}\n \t\tfor(moduleId in moreModules) {\n \t\t\tif(Object.prototype.hasOwnProperty.call(moreModules, moduleId)) {\n \t\t\t\tmodules[moduleId] = moreModules[moduleId];\n \t\t\t}\n \t\t}\n \t\tif(parentJsonpFunction) parentJsonpFunction(data);\n\n \t\twhile(resolves.length) {\n \t\t\tresolves.shift()();\n \t\t}\n\n \t\t// add entry modules from loaded chunk to deferred list\n \t\tdeferredModules.push.apply(deferredModules, executeModules || []);\n\n \t\t// run deferred modules when all chunks ready\n \t\treturn checkDeferredModules();\n \t};\n \tfunction checkDeferredModules() {\n \t\tvar result;\n \t\tfor(var i = 0; i < deferredModules.length; i++) {\n \t\t\tvar deferredModule = deferredModules[i];\n \t\t\tvar fulfilled = true;\n \t\t\tfor(var j = 1; j < deferredModule.length; j++) {\n \t\t\t\tvar depId = deferredModule[j];\n \t\t\t\tif(installedChunks[depId] !== 0) fulfilled = false;\n \t\t\t}\n \t\t\tif(fulfilled) {\n \t\t\t\tdeferredModules.splice(i--, 1);\n \t\t\t\tresult = __webpack_require__(__webpack_require__.s = deferredModule[0]);\n \t\t\t}\n \t\t}\n\n \t\treturn result;\n \t}\n\n \t// The module cache\n \tvar installedModules = {};\n\n \t// object to store loaded and loading chunks\n \t// undefined = chunk not loaded, null = chunk preloaded/prefetched\n \t// Promise = chunk loading, 0 = chunk loaded\n \tvar installedChunks = {\n \t\t0: 0\n \t};\n\n \tvar deferredModules = [];\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \tvar jsonpArray = window[\"webpackJsonp\"] = window[\"webpackJsonp\"] || [];\n \tvar oldJsonpFunction = jsonpArray.push.bind(jsonpArray);\n \tjsonpArray.push = webpackJsonpCallback;\n \tjsonpArray = jsonpArray.slice();\n \tfor(var i = 0; i < jsonpArray.length; i++) webpackJsonpCallback(jsonpArray[i]);\n \tvar parentJsonpFunction = oldJsonpFunction;\n\n\n \t// run deferred modules from other chunks\n \tcheckDeferredModules();\n","/**\n * @module ol/xml\n */\nimport {extend} from './array.js';\n\n\n/**\n * When using {@link module:ol/xml~makeChildAppender} or\n * {@link module:ol/xml~makeSimpleNodeFactory}, the top `objectStack` item needs\n * to have this structure.\n * @typedef {Object} NodeStackItem\n * @property {Node} node\n */\n\n\n/**\n * @typedef {function(Element, Array<*>): void} Parser\n */\n\n\n/**\n * @typedef {function(Element, *, Array<*>): void} Serializer\n */\n\n\n/**\n * This document should be used when creating nodes for XML serializations. This\n * document is also used by {@link module:ol/xml~createElementNS}\n * @const\n * @type {Document}\n */\nexport const DOCUMENT = document.implementation.createDocument('', '', null);\n\n\n/**\n * @type {string}\n */\nexport const XML_SCHEMA_INSTANCE_URI = 'http://www.w3.org/2001/XMLSchema-instance';\n\n\n/**\n * @param {string} namespaceURI Namespace URI.\n * @param {string} qualifiedName Qualified name.\n * @return {Element} Node.\n */\nexport function createElementNS(namespaceURI, qualifiedName) {\n  return DOCUMENT.createElementNS(namespaceURI, qualifiedName);\n}\n\n\n/**\n * Recursively grab all text content of child nodes into a single string.\n * @param {Node} node Node.\n * @param {boolean} normalizeWhitespace Normalize whitespace: remove all line\n * breaks.\n * @return {string} All text content.\n * @api\n */\nexport function getAllTextContent(node, normalizeWhitespace) {\n  return getAllTextContent_(node, normalizeWhitespace, []).join('');\n}\n\n\n/**\n * Recursively grab all text content of child nodes into a single string.\n * @param {Node} node Node.\n * @param {boolean} normalizeWhitespace Normalize whitespace: remove all line\n * breaks.\n * @param {Array<string>} accumulator Accumulator.\n * @private\n * @return {Array<string>} Accumulator.\n */\nexport function getAllTextContent_(node, normalizeWhitespace, accumulator) {\n  if (node.nodeType == Node.CDATA_SECTION_NODE ||\n      node.nodeType == Node.TEXT_NODE) {\n    if (normalizeWhitespace) {\n      accumulator.push(String(node.nodeValue).replace(/(\\r\\n|\\r|\\n)/g, ''));\n    } else {\n      accumulator.push(node.nodeValue);\n    }\n  } else {\n    let n;\n    for (n = node.firstChild; n; n = n.nextSibling) {\n      getAllTextContent_(n, normalizeWhitespace, accumulator);\n    }\n  }\n  return accumulator;\n}\n\n\n/**\n * @param {Object} object Object.\n * @return {boolean} Is a document.\n */\nexport function isDocument(object) {\n  return 'documentElement' in object;\n}\n\n\n/**\n * @param {Element} node Node.\n * @param {?string} namespaceURI Namespace URI.\n * @param {string} name Attribute name.\n * @return {string} Value\n */\nexport function getAttributeNS(node, namespaceURI, name) {\n  return node.getAttributeNS(namespaceURI, name) || '';\n}\n\n\n/**\n * Parse an XML string to an XML Document.\n * @param {string} xml XML.\n * @return {Document} Document.\n * @api\n */\nexport function parse(xml) {\n  return new DOMParser().parseFromString(xml, 'application/xml');\n}\n\n\n/**\n * Make an array extender function for extending the array at the top of the\n * object stack.\n * @param {function(this: T, Node, Array<*>): (Array<*>|undefined)} valueReader Value reader.\n * @param {T=} opt_this The object to use as `this` in `valueReader`.\n * @return {Parser} Parser.\n * @template T\n */\nexport function makeArrayExtender(valueReader, opt_this) {\n  return (\n    /**\n     * @param {Node} node Node.\n     * @param {Array<*>} objectStack Object stack.\n     */\n    function(node, objectStack) {\n      const value = valueReader.call(opt_this !== undefined ? opt_this : this, node, objectStack);\n      if (value !== undefined) {\n        const array = /** @type {Array<*>} */ (objectStack[objectStack.length - 1]);\n        extend(array, value);\n      }\n    }\n  );\n}\n\n\n/**\n * Make an array pusher function for pushing to the array at the top of the\n * object stack.\n * @param {function(this: T, Element, Array<*>): *} valueReader Value reader.\n * @param {T=} opt_this The object to use as `this` in `valueReader`.\n * @return {Parser} Parser.\n * @template T\n */\nexport function makeArrayPusher(valueReader, opt_this) {\n  return (\n    /**\n     * @param {Element} node Node.\n     * @param {Array<*>} objectStack Object stack.\n     */\n    function(node, objectStack) {\n      const value = valueReader.call(opt_this !== undefined ? opt_this : this, node, objectStack);\n      if (value !== undefined) {\n        const array = /** @type {Array<*>} */ (objectStack[objectStack.length - 1]);\n        array.push(value);\n      }\n    });\n}\n\n\n/**\n * Make an object stack replacer function for replacing the object at the\n * top of the stack.\n * @param {function(this: T, Node, Array<*>): *} valueReader Value reader.\n * @param {T=} opt_this The object to use as `this` in `valueReader`.\n * @return {Parser} Parser.\n * @template T\n */\nexport function makeReplacer(valueReader, opt_this) {\n  return (\n    /**\n     * @param {Node} node Node.\n     * @param {Array<*>} objectStack Object stack.\n     */\n    function(node, objectStack) {\n      const value = valueReader.call(opt_this !== undefined ? opt_this : this, node, objectStack);\n      if (value !== undefined) {\n        objectStack[objectStack.length - 1] = value;\n      }\n    });\n}\n\n\n/**\n * Make an object property pusher function for adding a property to the\n * object at the top of the stack.\n * @param {function(this: T, Element, Array<*>): *} valueReader Value reader.\n * @param {string=} opt_property Property.\n * @param {T=} opt_this The object to use as `this` in `valueReader`.\n * @return {Parser} Parser.\n * @template T\n */\nexport function makeObjectPropertyPusher(valueReader, opt_property, opt_this) {\n  return (\n    /**\n     * @param {Element} node Node.\n     * @param {Array<*>} objectStack Object stack.\n     */\n    function(node, objectStack) {\n      const value = valueReader.call(opt_this !== undefined ? opt_this : this, node, objectStack);\n      if (value !== undefined) {\n        const object = /** @type {!Object} */ (objectStack[objectStack.length - 1]);\n        const property = opt_property !== undefined ? opt_property : node.localName;\n        let array;\n        if (property in object) {\n          array = object[property];\n        } else {\n          array = object[property] = [];\n        }\n        array.push(value);\n      }\n    });\n}\n\n\n/**\n * Make an object property setter function.\n * @param {function(this: T, Element, Array<*>): *} valueReader Value reader.\n * @param {string=} opt_property Property.\n * @param {T=} opt_this The object to use as `this` in `valueReader`.\n * @return {Parser} Parser.\n * @template T\n */\nexport function makeObjectPropertySetter(valueReader, opt_property, opt_this) {\n  return (\n    /**\n     * @param {Element} node Node.\n     * @param {Array<*>} objectStack Object stack.\n     */\n    function(node, objectStack) {\n      const value = valueReader.call(opt_this !== undefined ? opt_this : this, node, objectStack);\n      if (value !== undefined) {\n        const object = /** @type {!Object} */ (objectStack[objectStack.length - 1]);\n        const property = opt_property !== undefined ? opt_property : node.localName;\n        object[property] = value;\n      }\n    });\n}\n\n\n/**\n * Create a serializer that appends nodes written by its `nodeWriter` to its\n * designated parent. The parent is the `node` of the\n * {@link module:ol/xml~NodeStackItem} at the top of the `objectStack`.\n * @param {function(this: T, Node, V, Array<*>): void} nodeWriter Node writer.\n * @param {T=} opt_this The object to use as `this` in `nodeWriter`.\n * @return {Serializer} Serializer.\n * @template T, V\n */\nexport function makeChildAppender(nodeWriter, opt_this) {\n  return function(node, value, objectStack) {\n    nodeWriter.call(opt_this !== undefined ? opt_this : this, node, value, objectStack);\n    const parent = /** @type {NodeStackItem} */ (objectStack[objectStack.length - 1]);\n    const parentNode = parent.node;\n    parentNode.appendChild(node);\n  };\n}\n\n\n/**\n * Create a serializer that calls the provided `nodeWriter` from\n * {@link module:ol/xml~serialize}. This can be used by the parent writer to have the\n * 'nodeWriter' called with an array of values when the `nodeWriter` was\n * designed to serialize a single item. An example would be a LineString\n * geometry writer, which could be reused for writing MultiLineString\n * geometries.\n * @param {function(this: T, Element, V, Array<*>): void} nodeWriter Node writer.\n * @param {T=} opt_this The object to use as `this` in `nodeWriter`.\n * @return {Serializer} Serializer.\n * @template T, V\n */\nexport function makeArraySerializer(nodeWriter, opt_this) {\n  let serializersNS, nodeFactory;\n  return function(node, value, objectStack) {\n    if (serializersNS === undefined) {\n      serializersNS = {};\n      const serializers = {};\n      serializers[node.localName] = nodeWriter;\n      serializersNS[node.namespaceURI] = serializers;\n      nodeFactory = makeSimpleNodeFactory(node.localName);\n    }\n    serialize(serializersNS, nodeFactory, value, objectStack);\n  };\n}\n\n\n/**\n * Create a node factory which can use the `opt_keys` passed to\n * {@link module:ol/xml~serialize} or {@link module:ol/xml~pushSerializeAndPop} as node names,\n * or a fixed node name. The namespace of the created nodes can either be fixed,\n * or the parent namespace will be used.\n * @param {string=} opt_nodeName Fixed node name which will be used for all\n *     created nodes. If not provided, the 3rd argument to the resulting node\n *     factory needs to be provided and will be the nodeName.\n * @param {string=} opt_namespaceURI Fixed namespace URI which will be used for\n *     all created nodes. If not provided, the namespace of the parent node will\n *     be used.\n * @return {function(*, Array<*>, string=): (Node|undefined)} Node factory.\n */\nexport function makeSimpleNodeFactory(opt_nodeName, opt_namespaceURI) {\n  const fixedNodeName = opt_nodeName;\n  return (\n    /**\n     * @param {*} value Value.\n     * @param {Array<*>} objectStack Object stack.\n     * @param {string=} opt_nodeName Node name.\n     * @return {Node} Node.\n     */\n    function(value, objectStack, opt_nodeName) {\n      const context = /** @type {NodeStackItem} */ (objectStack[objectStack.length - 1]);\n      const node = context.node;\n      let nodeName = fixedNodeName;\n      if (nodeName === undefined) {\n        nodeName = opt_nodeName;\n      }\n\n      const namespaceURI = opt_namespaceURI !== undefined ? opt_namespaceURI : node.namespaceURI;\n      return createElementNS(namespaceURI, /** @type {string} */ (nodeName));\n    }\n  );\n}\n\n\n/**\n * A node factory that creates a node using the parent's `namespaceURI` and the\n * `nodeName` passed by {@link module:ol/xml~serialize} or\n * {@link module:ol/xml~pushSerializeAndPop} to the node factory.\n * @const\n * @type {function(*, Array<*>, string=): (Node|undefined)}\n */\nexport const OBJECT_PROPERTY_NODE_FACTORY = makeSimpleNodeFactory();\n\n\n/**\n * Create an array of `values` to be used with {@link module:ol/xml~serialize} or\n * {@link module:ol/xml~pushSerializeAndPop}, where `orderedKeys` has to be provided as\n * `opt_key` argument.\n * @param {Object<string, *>} object Key-value pairs for the sequence. Keys can\n *     be a subset of the `orderedKeys`.\n * @param {Array<string>} orderedKeys Keys in the order of the sequence.\n * @return {Array<*>} Values in the order of the sequence. The resulting array\n *     has the same length as the `orderedKeys` array. Values that are not\n *     present in `object` will be `undefined` in the resulting array.\n */\nexport function makeSequence(object, orderedKeys) {\n  const length = orderedKeys.length;\n  const sequence = new Array(length);\n  for (let i = 0; i < length; ++i) {\n    sequence[i] = object[orderedKeys[i]];\n  }\n  return sequence;\n}\n\n\n/**\n * Create a namespaced structure, using the same values for each namespace.\n * This can be used as a starting point for versioned parsers, when only a few\n * values are version specific.\n * @param {Array<string>} namespaceURIs Namespace URIs.\n * @param {T} structure Structure.\n * @param {Object<string, T>=} opt_structureNS Namespaced structure to add to.\n * @return {Object<string, T>} Namespaced structure.\n * @template T\n */\nexport function makeStructureNS(namespaceURIs, structure, opt_structureNS) {\n  /**\n   * @type {Object<string, T>}\n   */\n  const structureNS = opt_structureNS !== undefined ? opt_structureNS : {};\n  let i, ii;\n  for (i = 0, ii = namespaceURIs.length; i < ii; ++i) {\n    structureNS[namespaceURIs[i]] = structure;\n  }\n  return structureNS;\n}\n\n\n/**\n * Parse a node using the parsers and object stack.\n * @param {Object<string, Object<string, Parser>>} parsersNS\n *     Parsers by namespace.\n * @param {Element} node Node.\n * @param {Array<*>} objectStack Object stack.\n * @param {*=} opt_this The object to use as `this`.\n */\nexport function parseNode(parsersNS, node, objectStack, opt_this) {\n  let n;\n  for (n = node.firstElementChild; n; n = n.nextElementSibling) {\n    const parsers = parsersNS[n.namespaceURI];\n    if (parsers !== undefined) {\n      const parser = parsers[n.localName];\n      if (parser !== undefined) {\n        parser.call(opt_this, n, objectStack);\n      }\n    }\n  }\n}\n\n\n/**\n * Push an object on top of the stack, parse and return the popped object.\n * @param {T} object Object.\n * @param {Object<string, Object<string, Parser>>} parsersNS\n *     Parsers by namespace.\n * @param {Element} node Node.\n * @param {Array<*>} objectStack Object stack.\n * @param {*=} opt_this The object to use as `this`.\n * @return {T} Object.\n * @template T\n */\nexport function pushParseAndPop(object, parsersNS, node, objectStack, opt_this) {\n  objectStack.push(object);\n  parseNode(parsersNS, node, objectStack, opt_this);\n  return /** @type {T} */ (objectStack.pop());\n}\n\n\n/**\n * Walk through an array of `values` and call a serializer for each value.\n * @param {Object<string, Object<string, Serializer>>} serializersNS\n *     Namespaced serializers.\n * @param {function(this: T, *, Array<*>, (string|undefined)): (Node|undefined)} nodeFactory\n *     Node factory. The `nodeFactory` creates the node whose namespace and name\n *     will be used to choose a node writer from `serializersNS`. This\n *     separation allows us to decide what kind of node to create, depending on\n *     the value we want to serialize. An example for this would be different\n *     geometry writers based on the geometry type.\n * @param {Array<*>} values Values to serialize. An example would be an array\n *     of {@link module:ol/Feature~Feature} instances.\n * @param {Array<*>} objectStack Node stack.\n * @param {Array<string>=} opt_keys Keys of the `values`. Will be passed to the\n *     `nodeFactory`. This is used for serializing object literals where the\n *     node name relates to the property key. The array length of `opt_keys` has\n *     to match the length of `values`. For serializing a sequence, `opt_keys`\n *     determines the order of the sequence.\n * @param {T=} opt_this The object to use as `this` for the node factory and\n *     serializers.\n * @template T\n */\nexport function serialize(\n  serializersNS, nodeFactory, values, objectStack, opt_keys, opt_this) {\n  const length = (opt_keys !== undefined ? opt_keys : values).length;\n  let value, node;\n  for (let i = 0; i < length; ++i) {\n    value = values[i];\n    if (value !== undefined) {\n      node = nodeFactory.call(opt_this !== undefined ? opt_this : this, value, objectStack,\n        opt_keys !== undefined ? opt_keys[i] : undefined);\n      if (node !== undefined) {\n        serializersNS[node.namespaceURI][node.localName]\n          .call(opt_this, node, value, objectStack);\n      }\n    }\n  }\n}\n\n\n/**\n * @param {O} object Object.\n * @param {Object<string, Object<string, Serializer>>} serializersNS\n *     Namespaced serializers.\n * @param {function(this: T, *, Array<*>, (string|undefined)): (Node|undefined)} nodeFactory\n *     Node factory. The `nodeFactory` creates the node whose namespace and name\n *     will be used to choose a node writer from `serializersNS`. This\n *     separation allows us to decide what kind of node to create, depending on\n *     the value we want to serialize. An example for this would be different\n *     geometry writers based on the geometry type.\n * @param {Array<*>} values Values to serialize. An example would be an array\n *     of {@link module:ol/Feature~Feature} instances.\n * @param {Array<*>} objectStack Node stack.\n * @param {Array<string>=} opt_keys Keys of the `values`. Will be passed to the\n *     `nodeFactory`. This is used for serializing object literals where the\n *     node name relates to the property key. The array length of `opt_keys` has\n *     to match the length of `values`. For serializing a sequence, `opt_keys`\n *     determines the order of the sequence.\n * @param {T=} opt_this The object to use as `this` for the node factory and\n *     serializers.\n * @return {O|undefined} Object.\n * @template O, T\n */\nexport function pushSerializeAndPop(object, serializersNS, nodeFactory, values, objectStack, opt_keys, opt_this) {\n  objectStack.push(object);\n  serialize(serializersNS, nodeFactory, values, objectStack, opt_keys, opt_this);\n  return /** @type {O|undefined} */ (objectStack.pop());\n}\n","/**\n * @module ol/extent\n */\nimport {assert} from './asserts.js';\nimport Corner from './extent/Corner.js';\nimport Relationship from './extent/Relationship.js';\n\n\n/**\n * An array of numbers representing an extent: `[minx, miny, maxx, maxy]`.\n * @typedef {Array<number>} Extent\n * @api\n */\n\n/**\n * Build an extent that includes all given coordinates.\n *\n * @param {Array<import(\"./coordinate.js\").Coordinate>} coordinates Coordinates.\n * @return {Extent} Bounding extent.\n * @api\n */\nexport function boundingExtent(coordinates) {\n  const extent = createEmpty();\n  for (let i = 0, ii = coordinates.length; i < ii; ++i) {\n    extendCoordinate(extent, coordinates[i]);\n  }\n  return extent;\n}\n\n\n/**\n * @param {Array<number>} xs Xs.\n * @param {Array<number>} ys Ys.\n * @param {Extent=} opt_extent Destination extent.\n * @private\n * @return {Extent} Extent.\n */\nfunction _boundingExtentXYs(xs, ys, opt_extent) {\n  const minX = Math.min.apply(null, xs);\n  const minY = Math.min.apply(null, ys);\n  const maxX = Math.max.apply(null, xs);\n  const maxY = Math.max.apply(null, ys);\n  return createOrUpdate(minX, minY, maxX, maxY, opt_extent);\n}\n\n\n/**\n * Return extent increased by the provided value.\n * @param {Extent} extent Extent.\n * @param {number} value The amount by which the extent should be buffered.\n * @param {Extent=} opt_extent Extent.\n * @return {Extent} Extent.\n * @api\n */\nexport function buffer(extent, value, opt_extent) {\n  if (opt_extent) {\n    opt_extent[0] = extent[0] - value;\n    opt_extent[1] = extent[1] - value;\n    opt_extent[2] = extent[2] + value;\n    opt_extent[3] = extent[3] + value;\n    return opt_extent;\n  } else {\n    return [\n      extent[0] - value,\n      extent[1] - value,\n      extent[2] + value,\n      extent[3] + value\n    ];\n  }\n}\n\n\n/**\n * Creates a clone of an extent.\n *\n * @param {Extent} extent Extent to clone.\n * @param {Extent=} opt_extent Extent.\n * @return {Extent} The clone.\n */\nexport function clone(extent, opt_extent) {\n  if (opt_extent) {\n    opt_extent[0] = extent[0];\n    opt_extent[1] = extent[1];\n    opt_extent[2] = extent[2];\n    opt_extent[3] = extent[3];\n    return opt_extent;\n  } else {\n    return extent.slice();\n  }\n}\n\n\n/**\n * @param {Extent} extent Extent.\n * @param {number} x X.\n * @param {number} y Y.\n * @return {number} Closest squared distance.\n */\nexport function closestSquaredDistanceXY(extent, x, y) {\n  let dx, dy;\n  if (x < extent[0]) {\n    dx = extent[0] - x;\n  } else if (extent[2] < x) {\n    dx = x - extent[2];\n  } else {\n    dx = 0;\n  }\n  if (y < extent[1]) {\n    dy = extent[1] - y;\n  } else if (extent[3] < y) {\n    dy = y - extent[3];\n  } else {\n    dy = 0;\n  }\n  return dx * dx + dy * dy;\n}\n\n\n/**\n * Check if the passed coordinate is contained or on the edge of the extent.\n *\n * @param {Extent} extent Extent.\n * @param {import(\"./coordinate.js\").Coordinate} coordinate Coordinate.\n * @return {boolean} The coordinate is contained in the extent.\n * @api\n */\nexport function containsCoordinate(extent, coordinate) {\n  return containsXY(extent, coordinate[0], coordinate[1]);\n}\n\n\n/**\n * Check if one extent contains another.\n *\n * An extent is deemed contained if it lies completely within the other extent,\n * including if they share one or more edges.\n *\n * @param {Extent} extent1 Extent 1.\n * @param {Extent} extent2 Extent 2.\n * @return {boolean} The second extent is contained by or on the edge of the\n *     first.\n * @api\n */\nexport function containsExtent(extent1, extent2) {\n  return extent1[0] <= extent2[0] && extent2[2] <= extent1[2] &&\n      extent1[1] <= extent2[1] && extent2[3] <= extent1[3];\n}\n\n\n/**\n * Check if the passed coordinate is contained or on the edge of the extent.\n *\n * @param {Extent} extent Extent.\n * @param {number} x X coordinate.\n * @param {number} y Y coordinate.\n * @return {boolean} The x, y values are contained in the extent.\n * @api\n */\nexport function containsXY(extent, x, y) {\n  return extent[0] <= x && x <= extent[2] && extent[1] <= y && y <= extent[3];\n}\n\n\n/**\n * Get the relationship between a coordinate and extent.\n * @param {Extent} extent The extent.\n * @param {import(\"./coordinate.js\").Coordinate} coordinate The coordinate.\n * @return {Relationship} The relationship (bitwise compare with\n *     import(\"./extent/Relationship.js\").Relationship).\n */\nexport function coordinateRelationship(extent, coordinate) {\n  const minX = extent[0];\n  const minY = extent[1];\n  const maxX = extent[2];\n  const maxY = extent[3];\n  const x = coordinate[0];\n  const y = coordinate[1];\n  let relationship = Relationship.UNKNOWN;\n  if (x < minX) {\n    relationship = relationship | Relationship.LEFT;\n  } else if (x > maxX) {\n    relationship = relationship | Relationship.RIGHT;\n  }\n  if (y < minY) {\n    relationship = relationship | Relationship.BELOW;\n  } else if (y > maxY) {\n    relationship = relationship | Relationship.ABOVE;\n  }\n  if (relationship === Relationship.UNKNOWN) {\n    relationship = Relationship.INTERSECTING;\n  }\n  return relationship;\n}\n\n\n/**\n * Create an empty extent.\n * @return {Extent} Empty extent.\n * @api\n */\nexport function createEmpty() {\n  return [Infinity, Infinity, -Infinity, -Infinity];\n}\n\n\n/**\n * Create a new extent or update the provided extent.\n * @param {number} minX Minimum X.\n * @param {number} minY Minimum Y.\n * @param {number} maxX Maximum X.\n * @param {number} maxY Maximum Y.\n * @param {Extent=} opt_extent Destination extent.\n * @return {Extent} Extent.\n */\nexport function createOrUpdate(minX, minY, maxX, maxY, opt_extent) {\n  if (opt_extent) {\n    opt_extent[0] = minX;\n    opt_extent[1] = minY;\n    opt_extent[2] = maxX;\n    opt_extent[3] = maxY;\n    return opt_extent;\n  } else {\n    return [minX, minY, maxX, maxY];\n  }\n}\n\n\n/**\n * Create a new empty extent or make the provided one empty.\n * @param {Extent=} opt_extent Extent.\n * @return {Extent} Extent.\n */\nexport function createOrUpdateEmpty(opt_extent) {\n  return createOrUpdate(\n    Infinity, Infinity, -Infinity, -Infinity, opt_extent);\n}\n\n\n/**\n * @param {import(\"./coordinate.js\").Coordinate} coordinate Coordinate.\n * @param {Extent=} opt_extent Extent.\n * @return {Extent} Extent.\n */\nexport function createOrUpdateFromCoordinate(coordinate, opt_extent) {\n  const x = coordinate[0];\n  const y = coordinate[1];\n  return createOrUpdate(x, y, x, y, opt_extent);\n}\n\n\n/**\n * @param {Array<import(\"./coordinate.js\").Coordinate>} coordinates Coordinates.\n * @param {Extent=} opt_extent Extent.\n * @return {Extent} Extent.\n */\nexport function createOrUpdateFromCoordinates(coordinates, opt_extent) {\n  const extent = createOrUpdateEmpty(opt_extent);\n  return extendCoordinates(extent, coordinates);\n}\n\n\n/**\n * @param {Array<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {number} end End.\n * @param {number} stride Stride.\n * @param {Extent=} opt_extent Extent.\n * @return {Extent} Extent.\n */\nexport function createOrUpdateFromFlatCoordinates(flatCoordinates, offset, end, stride, opt_extent) {\n  const extent = createOrUpdateEmpty(opt_extent);\n  return extendFlatCoordinates(extent, flatCoordinates, offset, end, stride);\n}\n\n/**\n * @param {Array<Array<import(\"./coordinate.js\").Coordinate>>} rings Rings.\n * @param {Extent=} opt_extent Extent.\n * @return {Extent} Extent.\n */\nexport function createOrUpdateFromRings(rings, opt_extent) {\n  const extent = createOrUpdateEmpty(opt_extent);\n  return extendRings(extent, rings);\n}\n\n\n/**\n * Determine if two extents are equivalent.\n * @param {Extent} extent1 Extent 1.\n * @param {Extent} extent2 Extent 2.\n * @return {boolean} The two extents are equivalent.\n * @api\n */\nexport function equals(extent1, extent2) {\n  return extent1[0] == extent2[0] && extent1[2] == extent2[2] &&\n      extent1[1] == extent2[1] && extent1[3] == extent2[3];\n}\n\n\n/**\n * Modify an extent to include another extent.\n * @param {Extent} extent1 The extent to be modified.\n * @param {Extent} extent2 The extent that will be included in the first.\n * @return {Extent} A reference to the first (extended) extent.\n * @api\n */\nexport function extend(extent1, extent2) {\n  if (extent2[0] < extent1[0]) {\n    extent1[0] = extent2[0];\n  }\n  if (extent2[2] > extent1[2]) {\n    extent1[2] = extent2[2];\n  }\n  if (extent2[1] < extent1[1]) {\n    extent1[1] = extent2[1];\n  }\n  if (extent2[3] > extent1[3]) {\n    extent1[3] = extent2[3];\n  }\n  return extent1;\n}\n\n\n/**\n * @param {Extent} extent Extent.\n * @param {import(\"./coordinate.js\").Coordinate} coordinate Coordinate.\n */\nexport function extendCoordinate(extent, coordinate) {\n  if (coordinate[0] < extent[0]) {\n    extent[0] = coordinate[0];\n  }\n  if (coordinate[0] > extent[2]) {\n    extent[2] = coordinate[0];\n  }\n  if (coordinate[1] < extent[1]) {\n    extent[1] = coordinate[1];\n  }\n  if (coordinate[1] > extent[3]) {\n    extent[3] = coordinate[1];\n  }\n}\n\n\n/**\n * @param {Extent} extent Extent.\n * @param {Array<import(\"./coordinate.js\").Coordinate>} coordinates Coordinates.\n * @return {Extent} Extent.\n */\nexport function extendCoordinates(extent, coordinates) {\n  for (let i = 0, ii = coordinates.length; i < ii; ++i) {\n    extendCoordinate(extent, coordinates[i]);\n  }\n  return extent;\n}\n\n\n/**\n * @param {Extent} extent Extent.\n * @param {Array<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {number} end End.\n * @param {number} stride Stride.\n * @return {Extent} Extent.\n */\nexport function extendFlatCoordinates(extent, flatCoordinates, offset, end, stride) {\n  for (; offset < end; offset += stride) {\n    extendXY(extent, flatCoordinates[offset], flatCoordinates[offset + 1]);\n  }\n  return extent;\n}\n\n\n/**\n * @param {Extent} extent Extent.\n * @param {Array<Array<import(\"./coordinate.js\").Coordinate>>} rings Rings.\n * @return {Extent} Extent.\n */\nexport function extendRings(extent, rings) {\n  for (let i = 0, ii = rings.length; i < ii; ++i) {\n    extendCoordinates(extent, rings[i]);\n  }\n  return extent;\n}\n\n\n/**\n * @param {Extent} extent Extent.\n * @param {number} x X.\n * @param {number} y Y.\n */\nexport function extendXY(extent, x, y) {\n  extent[0] = Math.min(extent[0], x);\n  extent[1] = Math.min(extent[1], y);\n  extent[2] = Math.max(extent[2], x);\n  extent[3] = Math.max(extent[3], y);\n}\n\n\n/**\n * This function calls `callback` for each corner of the extent. If the\n * callback returns a truthy value the function returns that value\n * immediately. Otherwise the function returns `false`.\n * @param {Extent} extent Extent.\n * @param {function(import(\"./coordinate.js\").Coordinate): S} callback Callback.\n * @return {S|boolean} Value.\n * @template S\n */\nexport function forEachCorner(extent, callback) {\n  let val;\n  val = callback(getBottomLeft(extent));\n  if (val) {\n    return val;\n  }\n  val = callback(getBottomRight(extent));\n  if (val) {\n    return val;\n  }\n  val = callback(getTopRight(extent));\n  if (val) {\n    return val;\n  }\n  val = callback(getTopLeft(extent));\n  if (val) {\n    return val;\n  }\n  return false;\n}\n\n\n/**\n * Get the size of an extent.\n * @param {Extent} extent Extent.\n * @return {number} Area.\n * @api\n */\nexport function getArea(extent) {\n  let area = 0;\n  if (!isEmpty(extent)) {\n    area = getWidth(extent) * getHeight(extent);\n  }\n  return area;\n}\n\n\n/**\n * Get the bottom left coordinate of an extent.\n * @param {Extent} extent Extent.\n * @return {import(\"./coordinate.js\").Coordinate} Bottom left coordinate.\n * @api\n */\nexport function getBottomLeft(extent) {\n  return [extent[0], extent[1]];\n}\n\n\n/**\n * Get the bottom right coordinate of an extent.\n * @param {Extent} extent Extent.\n * @return {import(\"./coordinate.js\").Coordinate} Bottom right coordinate.\n * @api\n */\nexport function getBottomRight(extent) {\n  return [extent[2], extent[1]];\n}\n\n\n/**\n * Get the center coordinate of an extent.\n * @param {Extent} extent Extent.\n * @return {import(\"./coordinate.js\").Coordinate} Center.\n * @api\n */\nexport function getCenter(extent) {\n  return [(extent[0] + extent[2]) / 2, (extent[1] + extent[3]) / 2];\n}\n\n\n/**\n * Get a corner coordinate of an extent.\n * @param {Extent} extent Extent.\n * @param {Corner} corner Corner.\n * @return {import(\"./coordinate.js\").Coordinate} Corner coordinate.\n */\nexport function getCorner(extent, corner) {\n  let coordinate;\n  if (corner === Corner.BOTTOM_LEFT) {\n    coordinate = getBottomLeft(extent);\n  } else if (corner === Corner.BOTTOM_RIGHT) {\n    coordinate = getBottomRight(extent);\n  } else if (corner === Corner.TOP_LEFT) {\n    coordinate = getTopLeft(extent);\n  } else if (corner === Corner.TOP_RIGHT) {\n    coordinate = getTopRight(extent);\n  } else {\n    assert(false, 13); // Invalid corner\n  }\n  return coordinate;\n}\n\n\n/**\n * @param {Extent} extent1 Extent 1.\n * @param {Extent} extent2 Extent 2.\n * @return {number} Enlarged area.\n */\nexport function getEnlargedArea(extent1, extent2) {\n  const minX = Math.min(extent1[0], extent2[0]);\n  const minY = Math.min(extent1[1], extent2[1]);\n  const maxX = Math.max(extent1[2], extent2[2]);\n  const maxY = Math.max(extent1[3], extent2[3]);\n  return (maxX - minX) * (maxY - minY);\n}\n\n\n/**\n * @param {import(\"./coordinate.js\").Coordinate} center Center.\n * @param {number} resolution Resolution.\n * @param {number} rotation Rotation.\n * @param {import(\"./size.js\").Size} size Size.\n * @param {Extent=} opt_extent Destination extent.\n * @return {Extent} Extent.\n */\nexport function getForViewAndSize(center, resolution, rotation, size, opt_extent) {\n  const dx = resolution * size[0] / 2;\n  const dy = resolution * size[1] / 2;\n  const cosRotation = Math.cos(rotation);\n  const sinRotation = Math.sin(rotation);\n  const xCos = dx * cosRotation;\n  const xSin = dx * sinRotation;\n  const yCos = dy * cosRotation;\n  const ySin = dy * sinRotation;\n  const x = center[0];\n  const y = center[1];\n  const x0 = x - xCos + ySin;\n  const x1 = x - xCos - ySin;\n  const x2 = x + xCos - ySin;\n  const x3 = x + xCos + ySin;\n  const y0 = y - xSin - yCos;\n  const y1 = y - xSin + yCos;\n  const y2 = y + xSin + yCos;\n  const y3 = y + xSin - yCos;\n  return createOrUpdate(\n    Math.min(x0, x1, x2, x3), Math.min(y0, y1, y2, y3),\n    Math.max(x0, x1, x2, x3), Math.max(y0, y1, y2, y3),\n    opt_extent);\n}\n\n\n/**\n * Get the height of an extent.\n * @param {Extent} extent Extent.\n * @return {number} Height.\n * @api\n */\nexport function getHeight(extent) {\n  return extent[3] - extent[1];\n}\n\n\n/**\n * @param {Extent} extent1 Extent 1.\n * @param {Extent} extent2 Extent 2.\n * @return {number} Intersection area.\n */\nexport function getIntersectionArea(extent1, extent2) {\n  const intersection = getIntersection(extent1, extent2);\n  return getArea(intersection);\n}\n\n\n/**\n * Get the intersection of two extents.\n * @param {Extent} extent1 Extent 1.\n * @param {Extent} extent2 Extent 2.\n * @param {Extent=} opt_extent Optional extent to populate with intersection.\n * @return {Extent} Intersecting extent.\n * @api\n */\nexport function getIntersection(extent1, extent2, opt_extent) {\n  const intersection = opt_extent ? opt_extent : createEmpty();\n  if (intersects(extent1, extent2)) {\n    if (extent1[0] > extent2[0]) {\n      intersection[0] = extent1[0];\n    } else {\n      intersection[0] = extent2[0];\n    }\n    if (extent1[1] > extent2[1]) {\n      intersection[1] = extent1[1];\n    } else {\n      intersection[1] = extent2[1];\n    }\n    if (extent1[2] < extent2[2]) {\n      intersection[2] = extent1[2];\n    } else {\n      intersection[2] = extent2[2];\n    }\n    if (extent1[3] < extent2[3]) {\n      intersection[3] = extent1[3];\n    } else {\n      intersection[3] = extent2[3];\n    }\n  } else {\n    createOrUpdateEmpty(intersection);\n  }\n  return intersection;\n}\n\n\n/**\n * @param {Extent} extent Extent.\n * @return {number} Margin.\n */\nexport function getMargin(extent) {\n  return getWidth(extent) + getHeight(extent);\n}\n\n\n/**\n * Get the size (width, height) of an extent.\n * @param {Extent} extent The extent.\n * @return {import(\"./size.js\").Size} The extent size.\n * @api\n */\nexport function getSize(extent) {\n  return [extent[2] - extent[0], extent[3] - extent[1]];\n}\n\n\n/**\n * Get the top left coordinate of an extent.\n * @param {Extent} extent Extent.\n * @return {import(\"./coordinate.js\").Coordinate} Top left coordinate.\n * @api\n */\nexport function getTopLeft(extent) {\n  return [extent[0], extent[3]];\n}\n\n\n/**\n * Get the top right coordinate of an extent.\n * @param {Extent} extent Extent.\n * @return {import(\"./coordinate.js\").Coordinate} Top right coordinate.\n * @api\n */\nexport function getTopRight(extent) {\n  return [extent[2], extent[3]];\n}\n\n\n/**\n * Get the width of an extent.\n * @param {Extent} extent Extent.\n * @return {number} Width.\n * @api\n */\nexport function getWidth(extent) {\n  return extent[2] - extent[0];\n}\n\n\n/**\n * Determine if one extent intersects another.\n * @param {Extent} extent1 Extent 1.\n * @param {Extent} extent2 Extent.\n * @return {boolean} The two extents intersect.\n * @api\n */\nexport function intersects(extent1, extent2) {\n  return extent1[0] <= extent2[2] &&\n      extent1[2] >= extent2[0] &&\n      extent1[1] <= extent2[3] &&\n      extent1[3] >= extent2[1];\n}\n\n\n/**\n * Determine if an extent is empty.\n * @param {Extent} extent Extent.\n * @return {boolean} Is empty.\n * @api\n */\nexport function isEmpty(extent) {\n  return extent[2] < extent[0] || extent[3] < extent[1];\n}\n\n\n/**\n * @param {Extent} extent Extent.\n * @param {Extent=} opt_extent Extent.\n * @return {Extent} Extent.\n */\nexport function returnOrUpdate(extent, opt_extent) {\n  if (opt_extent) {\n    opt_extent[0] = extent[0];\n    opt_extent[1] = extent[1];\n    opt_extent[2] = extent[2];\n    opt_extent[3] = extent[3];\n    return opt_extent;\n  } else {\n    return extent;\n  }\n}\n\n\n/**\n * @param {Extent} extent Extent.\n * @param {number} value Value.\n */\nexport function scaleFromCenter(extent, value) {\n  const deltaX = ((extent[2] - extent[0]) / 2) * (value - 1);\n  const deltaY = ((extent[3] - extent[1]) / 2) * (value - 1);\n  extent[0] -= deltaX;\n  extent[2] += deltaX;\n  extent[1] -= deltaY;\n  extent[3] += deltaY;\n}\n\n\n/**\n * Determine if the segment between two coordinates intersects (crosses,\n * touches, or is contained by) the provided extent.\n * @param {Extent} extent The extent.\n * @param {import(\"./coordinate.js\").Coordinate} start Segment start coordinate.\n * @param {import(\"./coordinate.js\").Coordinate} end Segment end coordinate.\n * @return {boolean} The segment intersects the extent.\n */\nexport function intersectsSegment(extent, start, end) {\n  let intersects = false;\n  const startRel = coordinateRelationship(extent, start);\n  const endRel = coordinateRelationship(extent, end);\n  if (startRel === Relationship.INTERSECTING ||\n      endRel === Relationship.INTERSECTING) {\n    intersects = true;\n  } else {\n    const minX = extent[0];\n    const minY = extent[1];\n    const maxX = extent[2];\n    const maxY = extent[3];\n    const startX = start[0];\n    const startY = start[1];\n    const endX = end[0];\n    const endY = end[1];\n    const slope = (endY - startY) / (endX - startX);\n    let x, y;\n    if (!!(endRel & Relationship.ABOVE) &&\n        !(startRel & Relationship.ABOVE)) {\n      // potentially intersects top\n      x = endX - ((endY - maxY) / slope);\n      intersects = x >= minX && x <= maxX;\n    }\n    if (!intersects && !!(endRel & Relationship.RIGHT) &&\n        !(startRel & Relationship.RIGHT)) {\n      // potentially intersects right\n      y = endY - ((endX - maxX) * slope);\n      intersects = y >= minY && y <= maxY;\n    }\n    if (!intersects && !!(endRel & Relationship.BELOW) &&\n        !(startRel & Relationship.BELOW)) {\n      // potentially intersects bottom\n      x = endX - ((endY - minY) / slope);\n      intersects = x >= minX && x <= maxX;\n    }\n    if (!intersects && !!(endRel & Relationship.LEFT) &&\n        !(startRel & Relationship.LEFT)) {\n      // potentially intersects left\n      y = endY - ((endX - minX) * slope);\n      intersects = y >= minY && y <= maxY;\n    }\n\n  }\n  return intersects;\n}\n\n\n/**\n * Apply a transform function to the extent.\n * @param {Extent} extent Extent.\n * @param {import(\"./proj.js\").TransformFunction} transformFn Transform function.\n * Called with `[minX, minY, maxX, maxY]` extent coordinates.\n * @param {Extent=} opt_extent Destination extent.\n * @return {Extent} Extent.\n * @api\n */\nexport function applyTransform(extent, transformFn, opt_extent) {\n  const coordinates = [\n    extent[0], extent[1],\n    extent[0], extent[3],\n    extent[2], extent[1],\n    extent[2], extent[3]\n  ];\n  transformFn(coordinates, coordinates, 2);\n  const xs = [coordinates[0], coordinates[2], coordinates[4], coordinates[6]];\n  const ys = [coordinates[1], coordinates[3], coordinates[5], coordinates[7]];\n  return _boundingExtentXYs(xs, ys, opt_extent);\n}\n","/**\n * @module ol/centerconstraint\n */\nimport {clamp} from './math.js';\n\n\n/**\n * @typedef {function((import(\"./coordinate.js\").Coordinate|undefined), number, import(\"./size.js\").Size, boolean=): (import(\"./coordinate.js\").Coordinate|undefined)} Type\n */\n\n\n/**\n * @param {import(\"./extent.js\").Extent} extent Extent.\n * @param {boolean} onlyCenter If true, the constraint will only apply to the view center.\n * @param {boolean} smooth If true, the view will be able to go slightly out of the given extent\n * (only during interaction and animation).\n * @return {Type} The constraint.\n */\nexport function createExtent(extent, onlyCenter, smooth) {\n  return (\n    /**\n     * @param {import(\"./coordinate.js\").Coordinate|undefined} center Center.\n     * @param {number} resolution Resolution.\n     * @param {import(\"./size.js\").Size} size Viewport size; unused if `onlyCenter` was specified.\n     * @param {boolean=} opt_isMoving True if an interaction or animation is in progress.\n     * @return {import(\"./coordinate.js\").Coordinate|undefined} Center.\n     */\n    function(center, resolution, size, opt_isMoving) {\n      if (center) {\n        const viewWidth = onlyCenter ? 0 : size[0] * resolution;\n        const viewHeight = onlyCenter ? 0 : size[1] * resolution;\n        let minX = extent[0] + viewWidth / 2;\n        let maxX = extent[2] - viewWidth / 2;\n        let minY = extent[1] + viewHeight / 2;\n        let maxY = extent[3] - viewHeight / 2;\n\n        // note: when zooming out of bounds, min and max values for x and y may\n        // end up inverted (min > max); this has to be accounted for\n        if (minX > maxX) {\n          minX = maxX = (maxX + minX) / 2;\n        }\n        if (minY > maxY) {\n          minY = maxY = (maxY + minY) / 2;\n        }\n\n        let x = clamp(center[0], minX, maxX);\n        let y = clamp(center[1], minY, maxY);\n        const ratio = 30 * resolution;\n\n        // during an interaction, allow some overscroll\n        if (opt_isMoving && smooth) {\n          x += -ratio * Math.log(1 + Math.max(0, minX - center[0]) / ratio) +\n            ratio * Math.log(1 + Math.max(0, center[0] - maxX) / ratio);\n          y += -ratio * Math.log(1 + Math.max(0, minY - center[1]) / ratio) +\n            ratio * Math.log(1 + Math.max(0, center[1] - maxY) / ratio);\n        }\n\n        return [x, y];\n      } else {\n        return undefined;\n      }\n    }\n  );\n}\n\n\n/**\n * @param {import(\"./coordinate.js\").Coordinate=} center Center.\n * @return {import(\"./coordinate.js\").Coordinate|undefined} Center.\n */\nexport function none(center) {\n  return center;\n}\n","/**\n * @module ol/resolutionconstraint\n */\nimport {linearFindNearest} from './array.js';\nimport {getHeight, getWidth} from './extent.js';\nimport {clamp} from './math.js';\n\n\n/**\n * @typedef {function((number|undefined), number, import(\"./size.js\").Size, boolean=): (number|undefined)} Type\n */\n\n/**\n * Returns a modified resolution taking into acocunt the viewport size and maximum\n * allowed extent.\n * @param {number} resolution Resolution\n * @param {import(\"./extent.js\").Extent=} maxExtent Maximum allowed extent.\n * @param {import(\"./size.js\").Size} viewportSize Viewport size.\n * @return {number} Capped resolution.\n */\nfunction getViewportClampedResolution(resolution, maxExtent, viewportSize) {\n  const xResolution = getWidth(maxExtent) / viewportSize[0];\n  const yResolution = getHeight(maxExtent) / viewportSize[1];\n  return Math.min(resolution, Math.min(xResolution, yResolution));\n}\n\n/**\n * Returns a modified resolution to be between maxResolution and minResolution while\n * still allowing the value to be slightly out of bounds.\n * Note: the computation is based on the logarithm function (ln):\n *  - at 1, ln(x) is 0\n *  - above 1, ln(x) keeps increasing but at a much slower pace than x\n * The final result is clamped to prevent getting too far away from bounds.\n * @param {number} resolution Resolution.\n * @param {number} maxResolution Max resolution.\n * @param {number} minResolution Min resolution.\n * @return {number} Smoothed resolution.\n */\nfunction getSmoothClampedResolution(resolution, maxResolution, minResolution) {\n  let result = Math.min(resolution, maxResolution);\n  const ratio = 50;\n\n  result *= Math.log(1 + ratio * Math.max(0, resolution / maxResolution - 1)) / ratio + 1;\n  if (minResolution) {\n    result = Math.max(result, minResolution);\n    result /= Math.log(1 + ratio * Math.max(0, minResolution / resolution - 1)) / ratio + 1;\n  }\n  return clamp(result, minResolution / 2, maxResolution * 2);\n}\n\n/**\n * @param {Array<number>} resolutions Resolutions.\n * @param {boolean=} opt_smooth If true, the view will be able to slightly exceed resolution limits. Default: true.\n * @param {import(\"./extent.js\").Extent=} opt_maxExtent Maximum allowed extent.\n * @return {Type} Zoom function.\n */\nexport function createSnapToResolutions(resolutions, opt_smooth, opt_maxExtent) {\n  return (\n    /**\n     * @param {number|undefined} resolution Resolution.\n     * @param {number} direction Direction.\n     * @param {import(\"./size.js\").Size} size Viewport size.\n     * @param {boolean=} opt_isMoving True if an interaction or animation is in progress.\n     * @return {number|undefined} Resolution.\n     */\n    function(resolution, direction, size, opt_isMoving) {\n      if (resolution !== undefined) {\n        const maxResolution = resolutions[0];\n        const minResolution = resolutions[resolutions.length - 1];\n        const cappedMaxRes = opt_maxExtent ?\n          getViewportClampedResolution(maxResolution, opt_maxExtent, size) :\n          maxResolution;\n\n        // during interacting or animating, allow intermediary values\n        if (opt_isMoving) {\n          const smooth = opt_smooth !== undefined ? opt_smooth : true;\n          if (!smooth) {\n            return clamp(resolution, minResolution, cappedMaxRes);\n          }\n          return getSmoothClampedResolution(resolution, cappedMaxRes, minResolution);\n        }\n\n        const capped = Math.min(cappedMaxRes, resolution);\n        const z = Math.floor(linearFindNearest(resolutions, capped, direction));\n        if (resolutions[z] > cappedMaxRes && z < resolutions.length - 1) {\n          return resolutions[z + 1];\n        }\n        return resolutions[z];\n      } else {\n        return undefined;\n      }\n    }\n  );\n}\n\n\n/**\n * @param {number} power Power.\n * @param {number} maxResolution Maximum resolution.\n * @param {number=} opt_minResolution Minimum resolution.\n * @param {boolean=} opt_smooth If true, the view will be able to slightly exceed resolution limits. Default: true.\n * @param {import(\"./extent.js\").Extent=} opt_maxExtent Maximum allowed extent.\n * @return {Type} Zoom function.\n */\nexport function createSnapToPower(power, maxResolution, opt_minResolution, opt_smooth, opt_maxExtent) {\n  return (\n    /**\n     * @param {number|undefined} resolution Resolution.\n     * @param {number} direction Direction.\n     * @param {import(\"./size.js\").Size} size Viewport size.\n     * @param {boolean=} opt_isMoving True if an interaction or animation is in progress.\n     * @return {number|undefined} Resolution.\n     */\n    function(resolution, direction, size, opt_isMoving) {\n      if (resolution !== undefined) {\n        const cappedMaxRes = opt_maxExtent ?\n          getViewportClampedResolution(maxResolution, opt_maxExtent, size) :\n          maxResolution;\n        const minResolution = opt_minResolution !== undefined ? opt_minResolution : 0;\n\n        // during interacting or animating, allow intermediary values\n        if (opt_isMoving) {\n          const smooth = opt_smooth !== undefined ? opt_smooth : true;\n          if (!smooth) {\n            return clamp(resolution, minResolution, cappedMaxRes);\n          }\n          return getSmoothClampedResolution(resolution, cappedMaxRes, minResolution);\n        }\n\n        const offset = -direction * (0.5 - 1e-9) + 0.5;\n        const capped = Math.min(cappedMaxRes, resolution);\n        const zoomLevel = Math.floor(\n          Math.log(maxResolution / capped) / Math.log(power) + offset);\n        const newResolution = maxResolution / Math.pow(power, zoomLevel);\n        return clamp(newResolution, minResolution, cappedMaxRes);\n      } else {\n        return undefined;\n      }\n    });\n}\n\n/**\n * @param {number} maxResolution Max resolution.\n * @param {number} minResolution Min resolution.\n * @param {boolean=} opt_smooth If true, the view will be able to slightly exceed resolution limits. Default: true.\n * @param {import(\"./extent.js\").Extent=} opt_maxExtent Maximum allowed extent.\n * @return {Type} Zoom function.\n */\nexport function createMinMaxResolution(maxResolution, minResolution, opt_smooth, opt_maxExtent) {\n  return (\n    /**\n     * @param {number|undefined} resolution Resolution.\n     * @param {number} direction Direction.\n     * @param {import(\"./size.js\").Size} size Viewport size.\n     * @param {boolean=} opt_isMoving True if an interaction or animation is in progress.\n     * @return {number|undefined} Resolution.\n     */\n    function(resolution, direction, size, opt_isMoving) {\n      if (resolution !== undefined) {\n        const cappedMaxRes = opt_maxExtent ?\n          getViewportClampedResolution(maxResolution, opt_maxExtent, size) :\n          maxResolution;\n        const smooth = opt_smooth !== undefined ? opt_smooth : true;\n\n        if (!smooth || !opt_isMoving) {\n          return clamp(resolution, minResolution, cappedMaxRes);\n        }\n        return getSmoothClampedResolution(resolution, cappedMaxRes, minResolution);\n      } else {\n        return undefined;\n      }\n    }\n  );\n}\n","/**\n * @module ol/View\n */\nimport {DEFAULT_TILE_SIZE} from './tilegrid/common.js';\nimport {getUid} from './util.js';\nimport {VOID} from './functions.js';\nimport {createExtent, none as centerNone} from './centerconstraint.js';\nimport BaseObject from './Object.js';\nimport {createSnapToResolutions, createSnapToPower} from './resolutionconstraint.js';\nimport {createSnapToZero, createSnapToN, none as rotationNone, disable} from './rotationconstraint.js';\nimport ViewHint from './ViewHint.js';\nimport ViewProperty from './ViewProperty.js';\nimport {linearFindNearest} from './array.js';\nimport {assert} from './asserts.js';\nimport {add as addCoordinate, rotate as rotateCoordinate, equals as coordinatesEqual} from './coordinate.js';\nimport {inAndOut} from './easing.js';\nimport {getForViewAndSize, getCenter, getHeight, getWidth, isEmpty} from './extent.js';\nimport GeometryType from './geom/GeometryType.js';\nimport {fromExtent as polygonFromExtent} from './geom/Polygon.js';\nimport {clamp, modulo} from './math.js';\nimport {assign} from './obj.js';\nimport {createProjection, METERS_PER_UNIT, toUserCoordinate, toUserExtent, fromUserCoordinate, fromUserExtent, getUserProjection} from './proj.js';\nimport Units from './proj/Units.js';\nimport {equals} from './coordinate.js';\nimport {easeOut} from './easing.js';\nimport {createMinMaxResolution} from './resolutionconstraint.js';\n\n\n/**\n * An animation configuration\n *\n * @typedef {Object} Animation\n * @property {import(\"./coordinate.js\").Coordinate} [sourceCenter]\n * @property {import(\"./coordinate.js\").Coordinate} [targetCenter]\n * @property {number} [sourceResolution]\n * @property {number} [targetResolution]\n * @property {number} [sourceRotation]\n * @property {number} [targetRotation]\n * @property {import(\"./coordinate.js\").Coordinate} [anchor]\n * @property {number} start\n * @property {number} duration\n * @property {boolean} complete\n * @property {function(number):number} easing\n * @property {function(boolean)} callback\n */\n\n\n/**\n * @typedef {Object} Constraints\n * @property {import(\"./centerconstraint.js\").Type} center\n * @property {import(\"./resolutionconstraint.js\").Type} resolution\n * @property {import(\"./rotationconstraint.js\").Type} rotation\n */\n\n\n/**\n * @typedef {Object} FitOptions\n * @property {import(\"./size.js\").Size} [size] The size in pixels of the box to fit\n * the extent into. Default is the current size of the first map in the DOM that\n * uses this view, or `[100, 100]` if no such map is found.\n * @property {!Array<number>} [padding=[0, 0, 0, 0]] Padding (in pixels) to be\n * cleared inside the view. Values in the array are top, right, bottom and left\n * padding.\n * @property {boolean} [nearest=false] If the view `constrainResolution` option is `true`,\n * get the nearest extent instead of the closest that actually fits the view.\n * @property {number} [minResolution=0] Minimum resolution that we zoom to.\n * @property {number} [maxZoom] Maximum zoom level that we zoom to. If\n * `minResolution` is given, this property is ignored.\n * @property {number} [duration] The duration of the animation in milliseconds.\n * By default, there is no animation to the target extent.\n * @property {function(number):number} [easing] The easing function used during\n * the animation (defaults to {@link module:ol/easing~inAndOut}).\n * The function will be called for each frame with a number representing a\n * fraction of the animation's duration.  The function should return a number\n * between 0 and 1 representing the progress toward the destination state.\n * @property {function(boolean)} [callback] Function called when the view is in\n * its final position. The callback will be called with `true` if the animation\n * series completed on its own or `false` if it was cancelled.\n */\n\n\n/**\n * @typedef {Object} ViewOptions\n * @property {import(\"./coordinate.js\").Coordinate} [center] The initial center for\n * the view. If a user projection is not set, the coordinate system for the center is\n * specified with the `projection` option. Layer sources will not be fetched if this\n * is not set, but the center can be set later with {@link #setCenter}.\n * @property {boolean|number} [constrainRotation=true] Rotation constraint.\n * `false` means no constraint. `true` means no constraint, but snap to zero\n * near zero. A number constrains the rotation to that number of values. For\n * example, `4` will constrain the rotation to 0, 90, 180, and 270 degrees.\n * @property {boolean} [enableRotation=true] Enable rotation.\n * If `false`, a rotation constraint that always sets the rotation to zero is\n * used. The `constrainRotation` option has no effect if `enableRotation` is\n * `false`.\n * @property {import(\"./extent.js\").Extent} [extent] The extent that constrains the\n * view, in other words, nothing outside of this extent can be visible on the map.\n * @property {boolean} [constrainOnlyCenter=false] If true, the extent\n * constraint will only apply to the view center and not the whole extent.\n * @property {boolean} [smoothExtentConstraint=true] If true, the extent\n * constraint will be applied smoothly, i.e. allow the view to go slightly outside\n * of the given `extent`.\n * @property {number} [maxResolution] The maximum resolution used to determine\n * the resolution constraint. It is used together with `minResolution` (or\n * `maxZoom`) and `zoomFactor`. If unspecified it is calculated in such a way\n * that the projection's validity extent fits in a 256x256 px tile. If the\n * projection is Spherical Mercator (the default) then `maxResolution` defaults\n * to `40075016.68557849 / 256 = 156543.03392804097`.\n * @property {number} [minResolution] The minimum resolution used to determine\n * the resolution constraint.  It is used together with `maxResolution` (or\n * `minZoom`) and `zoomFactor`.  If unspecified it is calculated assuming 29\n * zoom levels (with a factor of 2). If the projection is Spherical Mercator\n * (the default) then `minResolution` defaults to\n * `40075016.68557849 / 256 / Math.pow(2, 28) = 0.0005831682455839253`.\n * @property {number} [maxZoom=28] The maximum zoom level used to determine the\n * resolution constraint. It is used together with `minZoom` (or\n * `maxResolution`) and `zoomFactor`.  Note that if `minResolution` is also\n * provided, it is given precedence over `maxZoom`.\n * @property {number} [minZoom=0] The minimum zoom level used to determine the\n * resolution constraint. It is used together with `maxZoom` (or\n * `minResolution`) and `zoomFactor`.  Note that if `maxResolution` is also\n * provided, it is given precedence over `minZoom`.\n * @property {boolean} [multiWorld=false] If `false` the view is constrained so\n * only one world is visible, and you cannot pan off the edge.  If `true` the map\n * may show multiple worlds at low zoom levels.  Only used if the `projection` is\n * global.  Note that if `extent` is also provided it is given precedence.\n * @property {boolean} [constrainResolution=false] If true, the view will always\n * animate to the closest zoom level after an interaction; false means\n * intermediary zoom levels are allowed.\n * @property {boolean} [smoothResolutionConstraint=true] If true, the resolution\n * min/max values will be applied smoothly, i. e. allow the view to exceed slightly\n * the given resolution or zoom bounds.\n * @property {import(\"./proj.js\").ProjectionLike} [projection='EPSG:3857'] The\n * projection. The default is Spherical Mercator.\n * @property {number} [resolution] The initial resolution for the view. The\n * units are `projection` units per pixel (e.g. meters per pixel). An\n * alternative to setting this is to set `zoom`. Layer sources will not be\n * fetched if neither this nor `zoom` are defined, but they can be set later\n * with {@link #setZoom} or {@link #setResolution}.\n * @property {Array<number>} [resolutions] Resolutions to determine the\n * resolution constraint. If set the `maxResolution`, `minResolution`,\n * `minZoom`, `maxZoom`, and `zoomFactor` options are ignored.\n * @property {number} [rotation=0] The initial rotation for the view in radians\n * (positive rotation clockwise, 0 means North).\n * @property {number} [zoom] Only used if `resolution` is not defined. Zoom\n * level used to calculate the initial resolution for the view.\n * @property {number} [zoomFactor=2] The zoom factor used to compute the\n * corresponding resolution.\n */\n\n\n/**\n * @typedef {Object} AnimationOptions\n * @property {import(\"./coordinate.js\").Coordinate} [center] The center of the view at the end of\n * the animation.\n * @property {number} [zoom] The zoom level of the view at the end of the\n * animation. This takes precedence over `resolution`.\n * @property {number} [resolution] The resolution of the view at the end\n * of the animation.  If `zoom` is also provided, this option will be ignored.\n * @property {number} [rotation] The rotation of the view at the end of\n * the animation.\n * @property {import(\"./coordinate.js\").Coordinate} [anchor] Optional anchor to remain fixed\n * during a rotation or resolution animation.\n * @property {number} [duration=1000] The duration of the animation in milliseconds.\n * @property {function(number):number} [easing] The easing function used\n * during the animation (defaults to {@link module:ol/easing~inAndOut}).\n * The function will be called for each frame with a number representing a\n * fraction of the animation's duration.  The function should return a number\n * between 0 and 1 representing the progress toward the destination state.\n */\n\n\n/**\n * @typedef {Object} State\n * @property {import(\"./coordinate.js\").Coordinate} center\n * @property {import(\"./proj/Projection.js\").default} projection\n * @property {number} resolution\n * @property {number} rotation\n * @property {number} zoom\n */\n\n\n/**\n * Default min zoom level for the map view.\n * @type {number}\n */\nconst DEFAULT_MIN_ZOOM = 0;\n\n\n/**\n * @classdesc\n * A View object represents a simple 2D view of the map.\n *\n * This is the object to act upon to change the center, resolution,\n * and rotation of the map.\n *\n * A View has a `projection`. The projection determines the\n * coordinate system of the center, and its units determine the units of the\n * resolution (projection units per pixel). The default projection is\n * Spherical Mercator (EPSG:3857).\n *\n * ### The view states\n *\n * A View is determined by three states: `center`, `resolution`,\n * and `rotation`. Each state has a corresponding getter and setter, e.g.\n * `getCenter` and `setCenter` for the `center` state.\n *\n * The `zoom` state is actually not saved on the view: all computations\n * internally use the `resolution` state. Still, the `setZoom` and `getZoom`\n * methods are available, as well as `getResolutionForZoom` and\n * `getZoomForResolution` to switch from one system to the other.\n *\n * ### The constraints\n *\n * `setCenter`, `setResolution` and `setRotation` can be used to change the\n * states of the view, but any constraint defined in the constructor will\n * be applied along the way.\n *\n * A View object can have a *resolution constraint*, a *rotation constraint*\n * and a *center constraint*.\n *\n * The *resolution constraint* typically restricts min/max values and\n * snaps to specific resolutions. It is determined by the following\n * options: `resolutions`, `maxResolution`, `maxZoom` and `zoomFactor`.\n * If `resolutions` is set, the other three options are ignored. See\n * documentation for each option for more information. By default, the view\n * only has a min/max restriction and allow intermediary zoom levels when\n * pinch-zooming for example.\n *\n * The *rotation constraint* snaps to specific angles. It is determined\n * by the following options: `enableRotation` and `constrainRotation`.\n * By default rotation is allowed and its value is snapped to zero when approaching the\n * horizontal.\n *\n * The *center constraint* is determined by the `extent` option. By\n * default the view center is not constrained at all.\n *\n * ### Changing the view state\n *\n * It is important to note that `setZoom`, `setResolution`, `setCenter` and\n * `setRotation` are subject to the above mentioned constraints. As such, it\n * may sometimes not be possible to know in advance the resulting state of the\n * View. For example, calling `setResolution(10)` does not guarantee that\n * `getResolution()` will return `10`.\n *\n * A consequence of this is that, when applying a delta on the view state, one\n * should use `adjustCenter`, `adjustRotation`, `adjustZoom` and `adjustResolution`\n * rather than the corresponding setters. This will let view do its internal\n * computations. Besides, the `adjust*` methods also take an `opt_anchor`\n * argument which allows specifying an origin for the transformation.\n *\n * ### Interacting with the view\n *\n * View constraints are usually only applied when the view is *at rest*, meaning that\n * no interaction or animation is ongoing. As such, if the user puts the view in a\n * state that is not equivalent to a constrained one (e.g. rotating the view when\n * the snap angle is 0), an animation will be triggered at the interaction end to\n * put back the view to a stable state;\n *\n * @api\n */\nclass View extends BaseObject {\n\n  /**\n   * @param {ViewOptions=} opt_options View options.\n   */\n  constructor(opt_options) {\n    super();\n\n    const options = assign({}, opt_options);\n\n    /**\n     * @private\n     * @type {Array<number>}\n     */\n    this.hints_ = [0, 0];\n\n    /**\n     * @private\n     * @type {Array<Array<Animation>>}\n     */\n    this.animations_ = [];\n\n    /**\n     * @private\n     * @type {number|undefined}\n     */\n    this.updateAnimationKey_;\n\n    /**\n     * @private\n     * @const\n     * @type {import(\"./proj/Projection.js\").default}\n     */\n    this.projection_ = createProjection(options.projection, 'EPSG:3857');\n\n    /**\n     * @private\n     * @type {import(\"./coordinate.js\").Coordinate|undefined}\n     */\n    this.targetCenter_ = null;\n\n    /**\n     * @private\n     * @type {number|undefined}\n     */\n    this.targetResolution_;\n\n    /**\n     * @private\n     * @type {number|undefined}\n     */\n    this.targetRotation_;\n\n    if (options.center) {\n      options.center = fromUserCoordinate(options.center, this.projection_);\n    }\n    if (options.extent) {\n      options.extent = fromUserExtent(options.extent, this.projection_);\n    }\n\n    this.applyOptions_(options);\n  }\n\n  /**\n   * Set up the view with the given options.\n   * @param {ViewOptions} options View options.\n   */\n  applyOptions_(options) {\n\n    /**\n     * @type {Object<string, *>}\n     */\n    const properties = {};\n\n    const resolutionConstraintInfo = createResolutionConstraint(options);\n\n    /**\n     * @private\n     * @type {number}\n     */\n    this.maxResolution_ = resolutionConstraintInfo.maxResolution;\n\n    /**\n     * @private\n     * @type {number}\n     */\n    this.minResolution_ = resolutionConstraintInfo.minResolution;\n\n    /**\n     * @private\n     * @type {number}\n     */\n    this.zoomFactor_ = resolutionConstraintInfo.zoomFactor;\n\n    /**\n     * @private\n     * @type {Array<number>|undefined}\n     */\n    this.resolutions_ = options.resolutions;\n\n    /**\n     * @private\n     * @type {number}\n     */\n    this.minZoom_ = resolutionConstraintInfo.minZoom;\n\n    const centerConstraint = createCenterConstraint(options);\n    const resolutionConstraint = resolutionConstraintInfo.constraint;\n    const rotationConstraint = createRotationConstraint(options);\n\n    /**\n     * @private\n     * @type {Constraints}\n     */\n    this.constraints_ = {\n      center: centerConstraint,\n      resolution: resolutionConstraint,\n      rotation: rotationConstraint\n    };\n\n    this.setRotation(options.rotation !== undefined ? options.rotation : 0);\n    this.setCenterInternal(options.center !== undefined ? options.center : null);\n    if (options.resolution !== undefined) {\n      this.setResolution(options.resolution);\n    } else if (options.zoom !== undefined) {\n      this.setZoom(options.zoom);\n    }\n    this.resolveConstraints(0);\n\n    this.setProperties(properties);\n\n\n    /**\n     * @private\n     * @type {ViewOptions}\n     */\n    this.options_ = options;\n\n  }\n\n  /**\n   * Get an updated version of the view options used to construct the view.  The\n   * current resolution (or zoom), center, and rotation are applied to any stored\n   * options.  The provided options can be used to apply new min/max zoom or\n   * resolution limits.\n   * @param {ViewOptions} newOptions New options to be applied.\n   * @return {ViewOptions} New options updated with the current view state.\n   */\n  getUpdatedOptions_(newOptions) {\n    const options = assign({}, this.options_);\n\n    // preserve resolution (or zoom)\n    if (options.resolution !== undefined) {\n      options.resolution = this.getResolution();\n    } else {\n      options.zoom = this.getZoom();\n    }\n\n    // preserve center\n    options.center = this.getCenterInternal();\n\n    // preserve rotation\n    options.rotation = this.getRotation();\n\n    return assign({}, options, newOptions);\n  }\n\n  /**\n   * Animate the view.  The view's center, zoom (or resolution), and rotation\n   * can be animated for smooth transitions between view states.  For example,\n   * to animate the view to a new zoom level:\n   *\n   *     view.animate({zoom: view.getZoom() + 1});\n   *\n   * By default, the animation lasts one second and uses in-and-out easing.  You\n   * can customize this behavior by including `duration` (in milliseconds) and\n   * `easing` options (see {@link module:ol/easing}).\n   *\n   * To chain together multiple animations, call the method with multiple\n   * animation objects.  For example, to first zoom and then pan:\n   *\n   *     view.animate({zoom: 10}, {center: [0, 0]});\n   *\n   * If you provide a function as the last argument to the animate method, it\n   * will get called at the end of an animation series.  The callback will be\n   * called with `true` if the animation series completed on its own or `false`\n   * if it was cancelled.\n   *\n   * Animations are cancelled by user interactions (e.g. dragging the map) or by\n   * calling `view.setCenter()`, `view.setResolution()`, or `view.setRotation()`\n   * (or another method that calls one of these).\n   *\n   * @param {...(AnimationOptions|function(boolean): void)} var_args Animation\n   *     options.  Multiple animations can be run in series by passing multiple\n   *     options objects.  To run multiple animations in parallel, call the method\n   *     multiple times.  An optional callback can be provided as a final\n   *     argument.  The callback will be called with a boolean indicating whether\n   *     the animation completed without being cancelled.\n   * @api\n   */\n  animate(var_args) {\n    if (this.isDef() && !this.getAnimating()) {\n      this.resolveConstraints(0);\n    }\n    const args = new Array(arguments.length);\n    for (let i = 0; i < args.length; ++i) {\n      let options = arguments[i];\n      if (options.center) {\n        options = assign({}, options);\n        options.center = fromUserCoordinate(options.center, this.getProjection());\n      }\n      if (options.anchor) {\n        options = assign({}, options);\n        options.anchor = fromUserCoordinate(options.anchor, this.getProjection());\n      }\n      args[i] = options;\n    }\n    this.animateInternal.apply(this, args);\n  }\n\n  /**\n   * @param {...(AnimationOptions|function(boolean): void)} var_args Animation options.\n   */\n  animateInternal(var_args) {\n    let animationCount = arguments.length;\n    let callback;\n    if (animationCount > 1 && typeof arguments[animationCount - 1] === 'function') {\n      callback = arguments[animationCount - 1];\n      --animationCount;\n    }\n    if (!this.isDef()) {\n      // if view properties are not yet set, shortcut to the final state\n      const state = arguments[animationCount - 1];\n      if (state.center) {\n        this.setCenterInternal(state.center);\n      }\n      if (state.zoom !== undefined) {\n        this.setZoom(state.zoom);\n      }\n      if (state.rotation !== undefined) {\n        this.setRotation(state.rotation);\n      }\n      if (callback) {\n        animationCallback(callback, true);\n      }\n      return;\n    }\n    let start = Date.now();\n    let center = this.targetCenter_.slice();\n    let resolution = this.targetResolution_;\n    let rotation = this.targetRotation_;\n    const series = [];\n    for (let i = 0; i < animationCount; ++i) {\n      const options = /** @type {AnimationOptions} */ (arguments[i]);\n\n      const animation = {\n        start: start,\n        complete: false,\n        anchor: options.anchor,\n        duration: options.duration !== undefined ? options.duration : 1000,\n        easing: options.easing || inAndOut,\n        callback: callback\n      };\n\n      if (options.center) {\n        animation.sourceCenter = center;\n        animation.targetCenter = options.center.slice();\n        center = animation.targetCenter;\n      }\n\n      if (options.zoom !== undefined) {\n        animation.sourceResolution = resolution;\n        animation.targetResolution = this.getResolutionForZoom(options.zoom);\n        resolution = animation.targetResolution;\n      } else if (options.resolution) {\n        animation.sourceResolution = resolution;\n        animation.targetResolution = options.resolution;\n        resolution = animation.targetResolution;\n      }\n\n      if (options.rotation !== undefined) {\n        animation.sourceRotation = rotation;\n        const delta = modulo(options.rotation - rotation + Math.PI, 2 * Math.PI) - Math.PI;\n        animation.targetRotation = rotation + delta;\n        rotation = animation.targetRotation;\n      }\n\n      // check if animation is a no-op\n      if (isNoopAnimation(animation)) {\n        animation.complete = true;\n        // we still push it onto the series for callback handling\n      } else {\n        start += animation.duration;\n      }\n      series.push(animation);\n    }\n    this.animations_.push(series);\n    this.setHint(ViewHint.ANIMATING, 1);\n    this.updateAnimations_();\n  }\n\n  /**\n   * Determine if the view is being animated.\n   * @return {boolean} The view is being animated.\n   * @api\n   */\n  getAnimating() {\n    return this.hints_[ViewHint.ANIMATING] > 0;\n  }\n\n  /**\n   * Determine if the user is interacting with the view, such as panning or zooming.\n   * @return {boolean} The view is being interacted with.\n   * @api\n   */\n  getInteracting() {\n    return this.hints_[ViewHint.INTERACTING] > 0;\n  }\n\n  /**\n   * Cancel any ongoing animations.\n   * @api\n   */\n  cancelAnimations() {\n    this.setHint(ViewHint.ANIMATING, -this.hints_[ViewHint.ANIMATING]);\n    for (let i = 0, ii = this.animations_.length; i < ii; ++i) {\n      const series = this.animations_[i];\n      if (series[0].callback) {\n        animationCallback(series[0].callback, false);\n      }\n    }\n    this.animations_.length = 0;\n  }\n\n  /**\n   * Update all animations.\n   */\n  updateAnimations_() {\n    if (this.updateAnimationKey_ !== undefined) {\n      cancelAnimationFrame(this.updateAnimationKey_);\n      this.updateAnimationKey_ = undefined;\n    }\n    if (!this.getAnimating()) {\n      return;\n    }\n    const now = Date.now();\n    let more = false;\n    for (let i = this.animations_.length - 1; i >= 0; --i) {\n      const series = this.animations_[i];\n      let seriesComplete = true;\n      for (let j = 0, jj = series.length; j < jj; ++j) {\n        const animation = series[j];\n        if (animation.complete) {\n          continue;\n        }\n        const elapsed = now - animation.start;\n        let fraction = animation.duration > 0 ? elapsed / animation.duration : 1;\n        if (fraction >= 1) {\n          animation.complete = true;\n          fraction = 1;\n        } else {\n          seriesComplete = false;\n        }\n        const progress = animation.easing(fraction);\n        if (animation.sourceCenter) {\n          const x0 = animation.sourceCenter[0];\n          const y0 = animation.sourceCenter[1];\n          const x1 = animation.targetCenter[0];\n          const y1 = animation.targetCenter[1];\n          const x = x0 + progress * (x1 - x0);\n          const y = y0 + progress * (y1 - y0);\n          this.targetCenter_ = [x, y];\n        }\n        if (animation.sourceResolution && animation.targetResolution) {\n          const resolution = progress === 1 ?\n            animation.targetResolution :\n            animation.sourceResolution + progress * (animation.targetResolution - animation.sourceResolution);\n          if (animation.anchor) {\n            const size = this.getSizeFromViewport_(this.getRotation());\n            const constrainedResolution = this.constraints_.resolution(resolution, 0, size, true);\n            this.targetCenter_ = this.calculateCenterZoom(constrainedResolution, animation.anchor);\n          }\n          this.targetResolution_ = resolution;\n          this.applyTargetState_(true);\n        }\n        if (animation.sourceRotation !== undefined && animation.targetRotation !== undefined) {\n          const rotation = progress === 1 ?\n            modulo(animation.targetRotation + Math.PI, 2 * Math.PI) - Math.PI :\n            animation.sourceRotation + progress * (animation.targetRotation - animation.sourceRotation);\n          if (animation.anchor) {\n            const constrainedRotation = this.constraints_.rotation(rotation, true);\n            this.targetCenter_ = this.calculateCenterRotate(constrainedRotation, animation.anchor);\n          }\n          this.targetRotation_ = rotation;\n        }\n        this.applyTargetState_(true);\n        more = true;\n        if (!animation.complete) {\n          break;\n        }\n      }\n      if (seriesComplete) {\n        this.animations_[i] = null;\n        this.setHint(ViewHint.ANIMATING, -1);\n        const callback = series[0].callback;\n        if (callback) {\n          animationCallback(callback, true);\n        }\n      }\n    }\n    // prune completed series\n    this.animations_ = this.animations_.filter(Boolean);\n    if (more && this.updateAnimationKey_ === undefined) {\n      this.updateAnimationKey_ = requestAnimationFrame(this.updateAnimations_.bind(this));\n    }\n  }\n\n  /**\n   * @param {number} rotation Target rotation.\n   * @param {import(\"./coordinate.js\").Coordinate} anchor Rotation anchor.\n   * @return {import(\"./coordinate.js\").Coordinate|undefined} Center for rotation and anchor.\n   */\n  calculateCenterRotate(rotation, anchor) {\n    let center;\n    const currentCenter = this.getCenterInternal();\n    if (currentCenter !== undefined) {\n      center = [currentCenter[0] - anchor[0], currentCenter[1] - anchor[1]];\n      rotateCoordinate(center, rotation - this.getRotation());\n      addCoordinate(center, anchor);\n    }\n    return center;\n  }\n\n  /**\n   * @param {number} resolution Target resolution.\n   * @param {import(\"./coordinate.js\").Coordinate} anchor Zoom anchor.\n   * @return {import(\"./coordinate.js\").Coordinate|undefined} Center for resolution and anchor.\n   */\n  calculateCenterZoom(resolution, anchor) {\n    let center;\n    const currentCenter = this.getCenterInternal();\n    const currentResolution = this.getResolution();\n    if (currentCenter !== undefined && currentResolution !== undefined) {\n      const x = anchor[0] - resolution * (anchor[0] - currentCenter[0]) / currentResolution;\n      const y = anchor[1] - resolution * (anchor[1] - currentCenter[1]) / currentResolution;\n      center = [x, y];\n    }\n    return center;\n  }\n\n  /**\n   * @private\n   * @param {number=} opt_rotation Take into account the rotation of the viewport when giving the size\n   * @return {import(\"./size.js\").Size} Viewport size or `[100, 100]` when no viewport is found.\n   */\n  getSizeFromViewport_(opt_rotation) {\n    const size = [100, 100];\n    const selector = '.ol-viewport[data-view=\"' + getUid(this) + '\"]';\n    const element = document.querySelector(selector);\n    if (element) {\n      const metrics = getComputedStyle(element);\n      size[0] = parseInt(metrics.width, 10);\n      size[1] = parseInt(metrics.height, 10);\n    }\n    if (opt_rotation) {\n      const w = size[0];\n      const h = size[1];\n      size[0] = Math.abs(w * Math.cos(opt_rotation)) + Math.abs(h * Math.sin(opt_rotation));\n      size[1] = Math.abs(w * Math.sin(opt_rotation)) + Math.abs(h * Math.cos(opt_rotation));\n    }\n    return size;\n  }\n\n  /**\n   * Get the view center.\n   * @return {import(\"./coordinate.js\").Coordinate|undefined} The center of the view.\n   * @observable\n   * @api\n   */\n  getCenter() {\n    const center = this.getCenterInternal();\n    if (!center) {\n      return center;\n    }\n    return toUserCoordinate(center, this.getProjection());\n  }\n\n  /**\n   * Get the view center without transforming to user projection.\n   * @return {import(\"./coordinate.js\").Coordinate|undefined} The center of the view.\n   */\n  getCenterInternal() {\n    return /** @type {import(\"./coordinate.js\").Coordinate|undefined} */ (this.get(ViewProperty.CENTER));\n  }\n\n  /**\n   * @return {Constraints} Constraints.\n   */\n  getConstraints() {\n    return this.constraints_;\n  }\n\n  /**\n   * @param {Array<number>=} opt_hints Destination array.\n   * @return {Array<number>} Hint.\n   */\n  getHints(opt_hints) {\n    if (opt_hints !== undefined) {\n      opt_hints[0] = this.hints_[0];\n      opt_hints[1] = this.hints_[1];\n      return opt_hints;\n    } else {\n      return this.hints_.slice();\n    }\n  }\n\n  /**\n   * Calculate the extent for the current view state and the passed size.\n   * The size is the pixel dimensions of the box into which the calculated extent\n   * should fit. In most cases you want to get the extent of the entire map,\n   * that is `map.getSize()`.\n   * @param {import(\"./size.js\").Size=} opt_size Box pixel size. If not provided, the size of the\n   * first map that uses this view will be used.\n   * @return {import(\"./extent.js\").Extent} Extent.\n   * @api\n   */\n  calculateExtent(opt_size) {\n    const extent = this.calculateExtentInternal(opt_size);\n    return toUserExtent(extent, this.getProjection());\n  }\n\n  /**\n   * @param {import(\"./size.js\").Size=} opt_size Box pixel size. If not provided, the size of the\n   * first map that uses this view will be used.\n   * @return {import(\"./extent.js\").Extent} Extent.\n   */\n  calculateExtentInternal(opt_size) {\n    const size = opt_size || this.getSizeFromViewport_();\n    const center = /** @type {!import(\"./coordinate.js\").Coordinate} */ (this.getCenterInternal());\n    assert(center, 1); // The view center is not defined\n    const resolution = /** @type {!number} */ (this.getResolution());\n    assert(resolution !== undefined, 2); // The view resolution is not defined\n    const rotation = /** @type {!number} */ (this.getRotation());\n    assert(rotation !== undefined, 3); // The view rotation is not defined\n\n    return getForViewAndSize(center, resolution, rotation, size);\n  }\n\n  /**\n   * Get the maximum resolution of the view.\n   * @return {number} The maximum resolution of the view.\n   * @api\n   */\n  getMaxResolution() {\n    return this.maxResolution_;\n  }\n\n  /**\n   * Get the minimum resolution of the view.\n   * @return {number} The minimum resolution of the view.\n   * @api\n   */\n  getMinResolution() {\n    return this.minResolution_;\n  }\n\n  /**\n   * Get the maximum zoom level for the view.\n   * @return {number} The maximum zoom level.\n   * @api\n   */\n  getMaxZoom() {\n    return /** @type {number} */ (this.getZoomForResolution(this.minResolution_));\n  }\n\n  /**\n   * Set a new maximum zoom level for the view.\n   * @param {number} zoom The maximum zoom level.\n   * @api\n   */\n  setMaxZoom(zoom) {\n    this.applyOptions_(this.getUpdatedOptions_({maxZoom: zoom}));\n  }\n\n  /**\n   * Get the minimum zoom level for the view.\n   * @return {number} The minimum zoom level.\n   * @api\n   */\n  getMinZoom() {\n    return /** @type {number} */ (this.getZoomForResolution(this.maxResolution_));\n  }\n\n  /**\n   * Set a new minimum zoom level for the view.\n   * @param {number} zoom The minimum zoom level.\n   * @api\n   */\n  setMinZoom(zoom) {\n    this.applyOptions_(this.getUpdatedOptions_({minZoom: zoom}));\n  }\n\n  /**\n   * Set whether the view shoud allow intermediary zoom levels.\n   * @param {boolean} enabled Whether the resolution is constrained.\n   * @api\n   */\n  setConstrainResolution(enabled) {\n    this.applyOptions_(this.getUpdatedOptions_({constrainResolution: enabled}));\n  }\n\n  /**\n   * Get the view projection.\n   * @return {import(\"./proj/Projection.js\").default} The projection of the view.\n   * @api\n   */\n  getProjection() {\n    return this.projection_;\n  }\n\n  /**\n   * Get the view resolution.\n   * @return {number|undefined} The resolution of the view.\n   * @observable\n   * @api\n   */\n  getResolution() {\n    return /** @type {number|undefined} */ (this.get(ViewProperty.RESOLUTION));\n  }\n\n  /**\n   * Get the resolutions for the view. This returns the array of resolutions\n   * passed to the constructor of the View, or undefined if none were given.\n   * @return {Array<number>|undefined} The resolutions of the view.\n   * @api\n   */\n  getResolutions() {\n    return this.resolutions_;\n  }\n\n  /**\n   * Get the resolution for a provided extent (in map units) and size (in pixels).\n   * @param {import(\"./extent.js\").Extent} extent Extent.\n   * @param {import(\"./size.js\").Size=} opt_size Box pixel size.\n   * @return {number} The resolution at which the provided extent will render at\n   *     the given size.\n   * @api\n   */\n  getResolutionForExtent(extent, opt_size) {\n    return this.getResolutionForExtentInternal(fromUserExtent(extent, this.getProjection()), opt_size);\n  }\n\n  /**\n   * Get the resolution for a provided extent (in map units) and size (in pixels).\n   * @param {import(\"./extent.js\").Extent} extent Extent.\n   * @param {import(\"./size.js\").Size=} opt_size Box pixel size.\n   * @return {number} The resolution at which the provided extent will render at\n   *     the given size.\n   */\n  getResolutionForExtentInternal(extent, opt_size) {\n    const size = opt_size || this.getSizeFromViewport_();\n    const xResolution = getWidth(extent) / size[0];\n    const yResolution = getHeight(extent) / size[1];\n    return Math.max(xResolution, yResolution);\n  }\n\n  /**\n   * Return a function that returns a value between 0 and 1 for a\n   * resolution. Exponential scaling is assumed.\n   * @param {number=} opt_power Power.\n   * @return {function(number): number} Resolution for value function.\n   */\n  getResolutionForValueFunction(opt_power) {\n    const power = opt_power || 2;\n    const maxResolution = this.maxResolution_;\n    const minResolution = this.minResolution_;\n    const max = Math.log(maxResolution / minResolution) / Math.log(power);\n    return (\n      /**\n       * @param {number} value Value.\n       * @return {number} Resolution.\n       */\n      function(value) {\n        const resolution = maxResolution / Math.pow(power, value * max);\n        return resolution;\n      });\n  }\n\n  /**\n   * Get the view rotation.\n   * @return {number} The rotation of the view in radians.\n   * @observable\n   * @api\n   */\n  getRotation() {\n    return /** @type {number} */ (this.get(ViewProperty.ROTATION));\n  }\n\n  /**\n   * Return a function that returns a resolution for a value between\n   * 0 and 1. Exponential scaling is assumed.\n   * @param {number=} opt_power Power.\n   * @return {function(number): number} Value for resolution function.\n   */\n  getValueForResolutionFunction(opt_power) {\n    const power = opt_power || 2;\n    const maxResolution = this.maxResolution_;\n    const minResolution = this.minResolution_;\n    const max = Math.log(maxResolution / minResolution) / Math.log(power);\n    return (\n      /**\n       * @param {number} resolution Resolution.\n       * @return {number} Value.\n       */\n      function(resolution) {\n        const value = (Math.log(maxResolution / resolution) / Math.log(power)) / max;\n        return value;\n      });\n  }\n\n  /**\n   * @return {State} View state.\n   */\n  getState() {\n    const center = /** @type {import(\"./coordinate.js\").Coordinate} */ (this.getCenterInternal());\n    const projection = this.getProjection();\n    const resolution = /** @type {number} */ (this.getResolution());\n    const rotation = this.getRotation();\n    return {\n      center: center.slice(0),\n      projection: projection !== undefined ? projection : null,\n      resolution: resolution,\n      rotation: rotation,\n      zoom: this.getZoom()\n    };\n  }\n\n  /**\n   * Get the current zoom level. This method may return non-integer zoom levels\n   * if the view does not constrain the resolution, or if an interaction or\n   * animation is underway.\n   * @return {number|undefined} Zoom.\n   * @api\n   */\n  getZoom() {\n    let zoom;\n    const resolution = this.getResolution();\n    if (resolution !== undefined) {\n      zoom = this.getZoomForResolution(resolution);\n    }\n    return zoom;\n  }\n\n  /**\n   * Get the zoom level for a resolution.\n   * @param {number} resolution The resolution.\n   * @return {number|undefined} The zoom level for the provided resolution.\n   * @api\n   */\n  getZoomForResolution(resolution) {\n    let offset = this.minZoom_ || 0;\n    let max, zoomFactor;\n    if (this.resolutions_) {\n      const nearest = linearFindNearest(this.resolutions_, resolution, 1);\n      offset = nearest;\n      max = this.resolutions_[nearest];\n      if (nearest == this.resolutions_.length - 1) {\n        zoomFactor = 2;\n      } else {\n        zoomFactor = max / this.resolutions_[nearest + 1];\n      }\n    } else {\n      max = this.maxResolution_;\n      zoomFactor = this.zoomFactor_;\n    }\n    return offset + Math.log(max / resolution) / Math.log(zoomFactor);\n  }\n\n  /**\n   * Get the resolution for a zoom level.\n   * @param {number} zoom Zoom level.\n   * @return {number} The view resolution for the provided zoom level.\n   * @api\n   */\n  getResolutionForZoom(zoom) {\n    if (this.resolutions_) {\n      if (this.resolutions_.length <= 1) {\n        return 0;\n      }\n      const baseLevel = clamp(Math.floor(zoom), 0, this.resolutions_.length - 2);\n      const zoomFactor = this.resolutions_[baseLevel] / this.resolutions_[baseLevel + 1];\n      return this.resolutions_[baseLevel] / Math.pow(zoomFactor, clamp(zoom - baseLevel, 0, 1));\n    } else {\n      return this.maxResolution_ / Math.pow(this.zoomFactor_, zoom - this.minZoom_);\n    }\n  }\n\n  /**\n   * Fit the given geometry or extent based on the given map size and border.\n   * The size is pixel dimensions of the box to fit the extent into.\n   * In most cases you will want to use the map size, that is `map.getSize()`.\n   * Takes care of the map angle.\n   * @param {import(\"./geom/SimpleGeometry.js\").default|import(\"./extent.js\").Extent} geometryOrExtent The geometry or\n   *     extent to fit the view to.\n   * @param {FitOptions=} opt_options Options.\n   * @api\n   */\n  fit(geometryOrExtent, opt_options) {\n    const options = assign({size: this.getSizeFromViewport_()}, opt_options || {});\n\n    /** @type {import(\"./geom/SimpleGeometry.js\").default} */\n    let geometry;\n    assert(Array.isArray(geometryOrExtent) || typeof /** @type {?} */ (geometryOrExtent).getSimplifiedGeometry === 'function',\n      24); // Invalid extent or geometry provided as `geometry`\n    if (Array.isArray(geometryOrExtent)) {\n      assert(!isEmpty(geometryOrExtent),\n        25); // Cannot fit empty extent provided as `geometry`\n      const extent = fromUserExtent(geometryOrExtent, this.getProjection());\n      geometry = polygonFromExtent(extent);\n    } else if (geometryOrExtent.getType() === GeometryType.CIRCLE) {\n      const extent = fromUserExtent(geometryOrExtent.getExtent(), this.getProjection());\n      geometry = polygonFromExtent(extent);\n      geometry.rotate(this.getRotation(), getCenter(extent));\n    } else {\n      const userProjection = getUserProjection();\n      if (userProjection) {\n        geometry = /** @type {import(\"./geom/SimpleGeometry.js\").default} */ (geometry.clone().transform(userProjection, this.getProjection()));\n      } else {\n        geometry = geometryOrExtent;\n      }\n    }\n\n    this.fitInternal(geometry, options);\n  }\n\n  /**\n   * @param {import(\"./geom/SimpleGeometry.js\").default} geometry The geometry.\n   * @param {FitOptions=} opt_options Options.\n   */\n  fitInternal(geometry, opt_options) {\n    const options = opt_options || {};\n    let size = options.size;\n    if (!size) {\n      size = this.getSizeFromViewport_();\n    }\n    const padding = options.padding !== undefined ? options.padding : [0, 0, 0, 0];\n    const nearest = options.nearest !== undefined ? options.nearest : false;\n    let minResolution;\n    if (options.minResolution !== undefined) {\n      minResolution = options.minResolution;\n    } else if (options.maxZoom !== undefined) {\n      minResolution = this.getResolutionForZoom(options.maxZoom);\n    } else {\n      minResolution = 0;\n    }\n    const coords = geometry.getFlatCoordinates();\n\n    // calculate rotated extent\n    const rotation = this.getRotation();\n    const cosAngle = Math.cos(-rotation);\n    let sinAngle = Math.sin(-rotation);\n    let minRotX = +Infinity;\n    let minRotY = +Infinity;\n    let maxRotX = -Infinity;\n    let maxRotY = -Infinity;\n    const stride = geometry.getStride();\n    for (let i = 0, ii = coords.length; i < ii; i += stride) {\n      const rotX = coords[i] * cosAngle - coords[i + 1] * sinAngle;\n      const rotY = coords[i] * sinAngle + coords[i + 1] * cosAngle;\n      minRotX = Math.min(minRotX, rotX);\n      minRotY = Math.min(minRotY, rotY);\n      maxRotX = Math.max(maxRotX, rotX);\n      maxRotY = Math.max(maxRotY, rotY);\n    }\n\n    // calculate resolution\n    let resolution = this.getResolutionForExtentInternal(\n      [minRotX, minRotY, maxRotX, maxRotY],\n      [size[0] - padding[1] - padding[3], size[1] - padding[0] - padding[2]]);\n    resolution = isNaN(resolution) ? minResolution :\n      Math.max(resolution, minResolution);\n    resolution = this.getConstrainedResolution(resolution, nearest ? 0 : 1);\n\n    // calculate center\n    sinAngle = -sinAngle; // go back to original rotation\n    let centerRotX = (minRotX + maxRotX) / 2;\n    let centerRotY = (minRotY + maxRotY) / 2;\n    centerRotX += (padding[1] - padding[3]) / 2 * resolution;\n    centerRotY += (padding[0] - padding[2]) / 2 * resolution;\n    const centerX = centerRotX * cosAngle - centerRotY * sinAngle;\n    const centerY = centerRotY * cosAngle + centerRotX * sinAngle;\n    const center = [centerX, centerY];\n    const callback = options.callback ? options.callback : VOID;\n\n    if (options.duration !== undefined) {\n      this.animateInternal({\n        resolution: resolution,\n        center: this.getConstrainedCenter(center, resolution),\n        duration: options.duration,\n        easing: options.easing\n      }, callback);\n    } else {\n      this.targetResolution_ = resolution;\n      this.targetCenter_ = center;\n      this.applyTargetState_(false, true);\n      animationCallback(callback, true);\n    }\n  }\n\n  /**\n   * Center on coordinate and view position.\n   * @param {import(\"./coordinate.js\").Coordinate} coordinate Coordinate.\n   * @param {import(\"./size.js\").Size} size Box pixel size.\n   * @param {import(\"./pixel.js\").Pixel} position Position on the view to center on.\n   * @api\n   */\n  centerOn(coordinate, size, position) {\n    this.centerOnInternal(fromUserCoordinate(coordinate, this.getProjection()), size, position);\n  }\n\n  /**\n   * @param {import(\"./coordinate.js\").Coordinate} coordinate Coordinate.\n   * @param {import(\"./size.js\").Size} size Box pixel size.\n   * @param {import(\"./pixel.js\").Pixel} position Position on the view to center on.\n   */\n  centerOnInternal(coordinate, size, position) {\n    // calculate rotated position\n    const rotation = this.getRotation();\n    const cosAngle = Math.cos(-rotation);\n    let sinAngle = Math.sin(-rotation);\n    let rotX = coordinate[0] * cosAngle - coordinate[1] * sinAngle;\n    let rotY = coordinate[1] * cosAngle + coordinate[0] * sinAngle;\n    const resolution = this.getResolution();\n    rotX += (size[0] / 2 - position[0]) * resolution;\n    rotY += (position[1] - size[1] / 2) * resolution;\n\n    // go back to original angle\n    sinAngle = -sinAngle; // go back to original rotation\n    const centerX = rotX * cosAngle - rotY * sinAngle;\n    const centerY = rotY * cosAngle + rotX * sinAngle;\n\n    this.setCenterInternal([centerX, centerY]);\n  }\n\n  /**\n   * @return {boolean} Is defined.\n   */\n  isDef() {\n    return !!this.getCenterInternal() && this.getResolution() !== undefined;\n  }\n\n  /**\n   * Adds relative coordinates to the center of the view. Any extent constraint will apply.\n   * @param {import(\"./coordinate.js\").Coordinate} deltaCoordinates Relative value to add.\n   * @api\n   */\n  adjustCenter(deltaCoordinates) {\n    const center = toUserCoordinate(this.targetCenter_, this.getProjection());\n    this.setCenter([center[0] + deltaCoordinates[0], center[1] + deltaCoordinates[1]]);\n  }\n\n  /**\n   * Adds relative coordinates to the center of the view. Any extent constraint will apply.\n   * @param {import(\"./coordinate.js\").Coordinate} deltaCoordinates Relative value to add.\n   */\n  adjustCenterInternal(deltaCoordinates) {\n    const center = this.targetCenter_;\n    this.setCenterInternal([center[0] + deltaCoordinates[0], center[1] + deltaCoordinates[1]]);\n  }\n\n  /**\n   * Multiply the view resolution by a ratio, optionally using an anchor. Any resolution\n   * constraint will apply.\n   * @param {number} ratio The ratio to apply on the view resolution.\n   * @param {import(\"./coordinate.js\").Coordinate=} opt_anchor The origin of the transformation.\n   * @api\n   */\n  adjustResolution(ratio, opt_anchor) {\n    const anchor = opt_anchor && fromUserCoordinate(opt_anchor, this.getProjection());\n    this.adjustResolutionInternal(ratio, anchor);\n  }\n\n  /**\n   * Multiply the view resolution by a ratio, optionally using an anchor. Any resolution\n   * constraint will apply.\n   * @param {number} ratio The ratio to apply on the view resolution.\n   * @param {import(\"./coordinate.js\").Coordinate=} opt_anchor The origin of the transformation.\n   */\n  adjustResolutionInternal(ratio, opt_anchor) {\n    const isMoving = this.getAnimating() || this.getInteracting();\n    const size = this.getSizeFromViewport_(this.getRotation());\n    const newResolution = this.constraints_.resolution(this.targetResolution_ * ratio, 0, size, isMoving);\n\n    if (opt_anchor !== undefined) {\n      this.targetCenter_ = this.calculateCenterZoom(newResolution, opt_anchor);\n    }\n\n    this.targetResolution_ *= ratio;\n    this.applyTargetState_();\n  }\n\n  /**\n   * Adds a value to the view zoom level, optionally using an anchor. Any resolution\n   * constraint will apply.\n   * @param {number} delta Relative value to add to the zoom level.\n   * @param {import(\"./coordinate.js\").Coordinate=} opt_anchor The origin of the transformation.\n   * @api\n   */\n  adjustZoom(delta, opt_anchor) {\n    this.adjustResolution(Math.pow(this.zoomFactor_, -delta), opt_anchor);\n  }\n\n  /**\n   * Adds a value to the view rotation, optionally using an anchor. Any rotation\n   * constraint will apply.\n   * @param {number} delta Relative value to add to the zoom rotation, in radians.\n   * @param {import(\"./coordinate.js\").Coordinate=} opt_anchor The rotation center.\n   * @api\n   */\n  adjustRotation(delta, opt_anchor) {\n    if (opt_anchor) {\n      opt_anchor = fromUserCoordinate(opt_anchor, this.getProjection());\n    }\n    this.adjustRotationInternal(delta, opt_anchor);\n  }\n\n  /**\n   * @param {number} delta Relative value to add to the zoom rotation, in radians.\n   * @param {import(\"./coordinate.js\").Coordinate=} opt_anchor The rotation center.\n   */\n  adjustRotationInternal(delta, opt_anchor) {\n    const isMoving = this.getAnimating() || this.getInteracting();\n    const newRotation = this.constraints_.rotation(this.targetRotation_ + delta, isMoving);\n    if (opt_anchor !== undefined) {\n      this.targetCenter_ = this.calculateCenterRotate(newRotation, opt_anchor);\n    }\n    this.targetRotation_ += delta;\n    this.applyTargetState_();\n  }\n\n  /**\n   * Set the center of the current view. Any extent constraint will apply.\n   * @param {import(\"./coordinate.js\").Coordinate|undefined} center The center of the view.\n   * @observable\n   * @api\n   */\n  setCenter(center) {\n    this.setCenterInternal(fromUserCoordinate(center, this.getProjection()));\n  }\n\n  /**\n   * Set the center using the view projection (not the user projection).\n   * @param {import(\"./coordinate.js\").Coordinate|undefined} center The center of the view.\n   */\n  setCenterInternal(center) {\n    this.targetCenter_ = center;\n    this.applyTargetState_();\n  }\n\n  /**\n   * @param {ViewHint} hint Hint.\n   * @param {number} delta Delta.\n   * @return {number} New value.\n   */\n  setHint(hint, delta) {\n    this.hints_[hint] += delta;\n    this.changed();\n    return this.hints_[hint];\n  }\n\n  /**\n   * Set the resolution for this view. Any resolution constraint will apply.\n   * @param {number|undefined} resolution The resolution of the view.\n   * @observable\n   * @api\n   */\n  setResolution(resolution) {\n    this.targetResolution_ = resolution;\n    this.applyTargetState_();\n  }\n\n  /**\n   * Set the rotation for this view. Any rotation constraint will apply.\n   * @param {number} rotation The rotation of the view in radians.\n   * @observable\n   * @api\n   */\n  setRotation(rotation) {\n    this.targetRotation_ = rotation;\n    this.applyTargetState_();\n  }\n\n  /**\n   * Zoom to a specific zoom level. Any resolution constrain will apply.\n   * @param {number} zoom Zoom level.\n   * @api\n   */\n  setZoom(zoom) {\n    this.setResolution(this.getResolutionForZoom(zoom));\n  }\n\n  /**\n   * Recompute rotation/resolution/center based on target values.\n   * Note: we have to compute rotation first, then resolution and center considering that\n   * parameters can influence one another in case a view extent constraint is present.\n   * @param {boolean=} opt_doNotCancelAnims Do not cancel animations.\n   * @param {boolean=} opt_forceMoving Apply constraints as if the view is moving.\n   * @private\n   */\n  applyTargetState_(opt_doNotCancelAnims, opt_forceMoving) {\n    const isMoving = this.getAnimating() || this.getInteracting() || opt_forceMoving;\n\n    // compute rotation\n    const newRotation = this.constraints_.rotation(this.targetRotation_, isMoving);\n    const size = this.getSizeFromViewport_(newRotation);\n    const newResolution = this.constraints_.resolution(this.targetResolution_, 0, size, isMoving);\n    const newCenter = this.constraints_.center(this.targetCenter_, newResolution, size, isMoving);\n\n    if (this.get(ViewProperty.ROTATION) !== newRotation) {\n      this.set(ViewProperty.ROTATION, newRotation);\n    }\n    if (this.get(ViewProperty.RESOLUTION) !== newResolution) {\n      this.set(ViewProperty.RESOLUTION, newResolution);\n    }\n    if (!this.get(ViewProperty.CENTER) || !equals(this.get(ViewProperty.CENTER), newCenter)) {\n      this.set(ViewProperty.CENTER, newCenter);\n    }\n\n    if (this.getAnimating() && !opt_doNotCancelAnims) {\n      this.cancelAnimations();\n    }\n  }\n\n  /**\n   * If any constraints need to be applied, an animation will be triggered.\n   * This is typically done on interaction end.\n   * Note: calling this with a duration of 0 will apply the constrained values straight away,\n   * without animation.\n   * @param {number=} opt_duration The animation duration in ms.\n   * @param {number=} opt_resolutionDirection Which direction to zoom.\n   * @param {import(\"./coordinate.js\").Coordinate=} opt_anchor The origin of the transformation.\n   */\n  resolveConstraints(opt_duration, opt_resolutionDirection, opt_anchor) {\n    const duration = opt_duration !== undefined ? opt_duration : 200;\n    const direction = opt_resolutionDirection || 0;\n\n    const newRotation = this.constraints_.rotation(this.targetRotation_);\n    const size = this.getSizeFromViewport_(newRotation);\n    const newResolution = this.constraints_.resolution(this.targetResolution_, direction, size);\n    const newCenter = this.constraints_.center(this.targetCenter_, newResolution, size);\n\n    if (duration === 0) {\n      this.targetResolution_ = newResolution;\n      this.targetRotation_ = newRotation;\n      this.targetCenter_ = newCenter;\n      this.applyTargetState_();\n      return;\n    }\n\n    if (this.getResolution() !== newResolution ||\n      this.getRotation() !== newRotation ||\n      !this.getCenterInternal() ||\n      !equals(this.getCenterInternal(), newCenter)) {\n\n      if (this.getAnimating()) {\n        this.cancelAnimations();\n      }\n\n      this.animateInternal({\n        rotation: newRotation,\n        center: newCenter,\n        resolution: newResolution,\n        duration: duration,\n        easing: easeOut,\n        anchor: opt_anchor\n      });\n    }\n  }\n\n  /**\n   * Notify the View that an interaction has started.\n   * The view state will be resolved to a stable one if needed\n   * (depending on its constraints).\n   * @api\n   */\n  beginInteraction() {\n    this.resolveConstraints(0);\n\n    this.setHint(ViewHint.INTERACTING, 1);\n  }\n\n  /**\n   * Notify the View that an interaction has ended. The view state will be resolved\n   * to a stable one if needed (depending on its constraints).\n   * @param {number=} opt_duration Animation duration in ms.\n   * @param {number=} opt_resolutionDirection Which direction to zoom.\n   * @param {import(\"./coordinate.js\").Coordinate=} opt_anchor The origin of the transformation.\n   * @api\n   */\n  endInteraction(opt_duration, opt_resolutionDirection, opt_anchor) {\n    const anchor = opt_anchor && fromUserCoordinate(opt_anchor, this.getProjection());\n    this.endInteractionInternal(opt_duration, opt_resolutionDirection, anchor);\n  }\n\n  /**\n   * Notify the View that an interaction has ended. The view state will be resolved\n   * to a stable one if needed (depending on its constraints).\n   * @param {number=} opt_duration Animation duration in ms.\n   * @param {number=} opt_resolutionDirection Which direction to zoom.\n   * @param {import(\"./coordinate.js\").Coordinate=} opt_anchor The origin of the transformation.\n   */\n  endInteractionInternal(opt_duration, opt_resolutionDirection, opt_anchor) {\n    this.setHint(ViewHint.INTERACTING, -1);\n\n    this.resolveConstraints(opt_duration, opt_resolutionDirection, opt_anchor);\n  }\n\n  /**\n   * Get a valid position for the view center according to the current constraints.\n   * @param {import(\"./coordinate.js\").Coordinate|undefined} targetCenter Target center position.\n   * @param {number=} opt_targetResolution Target resolution. If not supplied, the current one will be used.\n   * This is useful to guess a valid center position at a different zoom level.\n   * @return {import(\"./coordinate.js\").Coordinate|undefined} Valid center position.\n   */\n  getConstrainedCenter(targetCenter, opt_targetResolution) {\n    const size = this.getSizeFromViewport_(this.getRotation());\n    return this.constraints_.center(targetCenter, opt_targetResolution || this.getResolution(), size);\n  }\n\n  /**\n   * Get a valid zoom level according to the current view constraints.\n   * @param {number|undefined} targetZoom Target zoom.\n   * @param {number=} [opt_direction=0] Indicate which resolution should be used\n   * by a renderer if the view resolution does not match any resolution of the tile source.\n   * If 0, the nearest resolution will be used. If 1, the nearest lower resolution\n   * will be used. If -1, the nearest higher resolution will be used.\n   * @return {number|undefined} Valid zoom level.\n   */\n  getConstrainedZoom(targetZoom, opt_direction) {\n    const targetRes = this.getResolutionForZoom(targetZoom);\n    return this.getZoomForResolution(this.getConstrainedResolution(targetRes, opt_direction));\n  }\n\n  /**\n   * Get a valid resolution according to the current view constraints.\n   * @param {number|undefined} targetResolution Target resolution.\n   * @param {number=} [opt_direction=0] Indicate which resolution should be used\n   * by a renderer if the view resolution does not match any resolution of the tile source.\n   * If 0, the nearest resolution will be used. If 1, the nearest lower resolution\n   * will be used. If -1, the nearest higher resolution will be used.\n   * @return {number|undefined} Valid resolution.\n   */\n  getConstrainedResolution(targetResolution, opt_direction) {\n    const direction = opt_direction || 0;\n    const size = this.getSizeFromViewport_(this.getRotation());\n\n    return this.constraints_.resolution(targetResolution, direction, size);\n  }\n}\n\n\n/**\n * @param {Function} callback Callback.\n * @param {*} returnValue Return value.\n */\nfunction animationCallback(callback, returnValue) {\n  setTimeout(function() {\n    callback(returnValue);\n  }, 0);\n}\n\n\n/**\n * @param {ViewOptions} options View options.\n * @return {import(\"./centerconstraint.js\").Type} The constraint.\n */\nexport function createCenterConstraint(options) {\n  if (options.extent !== undefined) {\n    const smooth = options.smoothExtentConstraint !== undefined ? options.smoothExtentConstraint : true;\n    return createExtent(options.extent, options.constrainOnlyCenter, smooth);\n  }\n\n  const projection = createProjection(options.projection, 'EPSG:3857');\n  if (options.multiWorld !== true && projection.isGlobal()) {\n    const extent = projection.getExtent().slice();\n    extent[0] = -Infinity;\n    extent[2] = Infinity;\n    return createExtent(extent, false, false);\n  }\n\n  return centerNone;\n}\n\n\n/**\n * @param {ViewOptions} options View options.\n * @return {{constraint: import(\"./resolutionconstraint.js\").Type, maxResolution: number,\n *     minResolution: number, minZoom: number, zoomFactor: number}} The constraint.\n */\nexport function createResolutionConstraint(options) {\n  let resolutionConstraint;\n  let maxResolution;\n  let minResolution;\n\n  // TODO: move these to be ol constants\n  // see https://github.com/openlayers/openlayers/issues/2076\n  const defaultMaxZoom = 28;\n  const defaultZoomFactor = 2;\n\n  let minZoom = options.minZoom !== undefined ?\n    options.minZoom : DEFAULT_MIN_ZOOM;\n\n  let maxZoom = options.maxZoom !== undefined ?\n    options.maxZoom : defaultMaxZoom;\n\n  const zoomFactor = options.zoomFactor !== undefined ?\n    options.zoomFactor : defaultZoomFactor;\n\n  const multiWorld = options.multiWorld !== undefined ?\n    options.multiWorld : false;\n\n  const smooth =\n      options.smoothResolutionConstraint !== undefined ? options.smoothResolutionConstraint : true;\n\n  const projection = createProjection(options.projection, 'EPSG:3857');\n  const projExtent = projection.getExtent();\n  let constrainOnlyCenter = options.constrainOnlyCenter;\n  let extent = options.extent;\n  if (!multiWorld && !extent && projection.isGlobal()) {\n    constrainOnlyCenter = false;\n    extent = projExtent;\n  }\n\n  if (options.resolutions !== undefined) {\n    const resolutions = options.resolutions;\n    maxResolution = resolutions[minZoom];\n    minResolution = resolutions[maxZoom] !== undefined ?\n      resolutions[maxZoom] : resolutions[resolutions.length - 1];\n\n    if (options.constrainResolution) {\n      resolutionConstraint = createSnapToResolutions(resolutions, smooth,\n        !constrainOnlyCenter && extent);\n    } else {\n      resolutionConstraint = createMinMaxResolution(maxResolution, minResolution, smooth,\n        !constrainOnlyCenter && extent);\n    }\n  } else {\n    // calculate the default min and max resolution\n    const size = !projExtent ?\n      // use an extent that can fit the whole world if need be\n      360 * METERS_PER_UNIT[Units.DEGREES] /\n            projection.getMetersPerUnit() :\n      Math.max(getWidth(projExtent), getHeight(projExtent));\n\n    const defaultMaxResolution = size / DEFAULT_TILE_SIZE / Math.pow(\n      defaultZoomFactor, DEFAULT_MIN_ZOOM);\n\n    const defaultMinResolution = defaultMaxResolution / Math.pow(\n      defaultZoomFactor, defaultMaxZoom - DEFAULT_MIN_ZOOM);\n\n    // user provided maxResolution takes precedence\n    maxResolution = options.maxResolution;\n    if (maxResolution !== undefined) {\n      minZoom = 0;\n    } else {\n      maxResolution = defaultMaxResolution / Math.pow(zoomFactor, minZoom);\n    }\n\n    // user provided minResolution takes precedence\n    minResolution = options.minResolution;\n    if (minResolution === undefined) {\n      if (options.maxZoom !== undefined) {\n        if (options.maxResolution !== undefined) {\n          minResolution = maxResolution / Math.pow(zoomFactor, maxZoom);\n        } else {\n          minResolution = defaultMaxResolution / Math.pow(zoomFactor, maxZoom);\n        }\n      } else {\n        minResolution = defaultMinResolution;\n      }\n    }\n\n    // given discrete zoom levels, minResolution may be different than provided\n    maxZoom = minZoom + Math.floor(\n      Math.log(maxResolution / minResolution) / Math.log(zoomFactor));\n    minResolution = maxResolution / Math.pow(zoomFactor, maxZoom - minZoom);\n\n    if (options.constrainResolution) {\n      resolutionConstraint = createSnapToPower(\n        zoomFactor, maxResolution, minResolution, smooth,\n        !constrainOnlyCenter && extent);\n    } else {\n      resolutionConstraint = createMinMaxResolution(maxResolution, minResolution, smooth,\n        !constrainOnlyCenter && extent);\n    }\n  }\n  return {constraint: resolutionConstraint, maxResolution: maxResolution,\n    minResolution: minResolution, minZoom: minZoom, zoomFactor: zoomFactor};\n}\n\n\n/**\n * @param {ViewOptions} options View options.\n * @return {import(\"./rotationconstraint.js\").Type} Rotation constraint.\n */\nexport function createRotationConstraint(options) {\n  const enableRotation = options.enableRotation !== undefined ?\n    options.enableRotation : true;\n  if (enableRotation) {\n    const constrainRotation = options.constrainRotation;\n    if (constrainRotation === undefined || constrainRotation === true) {\n      return createSnapToZero();\n    } else if (constrainRotation === false) {\n      return rotationNone;\n    } else if (typeof constrainRotation === 'number') {\n      return createSnapToN(constrainRotation);\n    } else {\n      return rotationNone;\n    }\n  } else {\n    return disable;\n  }\n}\n\n\n/**\n * Determine if an animation involves no view change.\n * @param {Animation} animation The animation.\n * @return {boolean} The animation involves no view change.\n */\nexport function isNoopAnimation(animation) {\n  if (animation.sourceCenter && animation.targetCenter) {\n    if (!coordinatesEqual(animation.sourceCenter, animation.targetCenter)) {\n      return false;\n    }\n  }\n  if (animation.sourceResolution !== animation.targetResolution) {\n    return false;\n  }\n  if (animation.sourceRotation !== animation.targetRotation) {\n    return false;\n  }\n  return true;\n}\n\nexport default View;\n","/**\n * @module ol/Map\n */\nimport PluggableMap from './PluggableMap.js';\nimport {defaults as defaultControls} from './control.js';\nimport {defaults as defaultInteractions} from './interaction.js';\nimport {assign} from './obj.js';\nimport CompositeMapRenderer from './renderer/Composite.js';\n\n/**\n * @classdesc\n * The map is the core component of OpenLayers. For a map to render, a view,\n * one or more layers, and a target container are needed:\n *\n *     import Map from 'ol/Map';\n *     import View from 'ol/View';\n *     import TileLayer from 'ol/layer/Tile';\n *     import OSM from 'ol/source/OSM';\n *\n *     var map = new Map({\n *       view: new View({\n *         center: [0, 0],\n *         zoom: 1\n *       }),\n *       layers: [\n *         new TileLayer({\n *           source: new OSM()\n *         })\n *       ],\n *       target: 'map'\n *     });\n *\n * The above snippet creates a map using a {@link module:ol/layer/Tile} to\n * display {@link module:ol/source/OSM~OSM} OSM data and render it to a DOM\n * element with the id `map`.\n *\n * The constructor places a viewport container (with CSS class name\n * `ol-viewport`) in the target element (see `getViewport()`), and then two\n * further elements within the viewport: one with CSS class name\n * `ol-overlaycontainer-stopevent` for controls and some overlays, and one with\n * CSS class name `ol-overlaycontainer` for other overlays (see the `stopEvent`\n * option of {@link module:ol/Overlay~Overlay} for the difference). The map\n * itself is placed in a further element within the viewport.\n *\n * Layers are stored as a {@link module:ol/Collection~Collection} in\n * layerGroups. A top-level group is provided by the library. This is what is\n * accessed by `getLayerGroup` and `setLayerGroup`. Layers entered in the\n * options are added to this group, and `addLayer` and `removeLayer` change the\n * layer collection in the group. `getLayers` is a convenience function for\n * `getLayerGroup().getLayers()`. Note that {@link module:ol/layer/Group~Group}\n * is a subclass of {@link module:ol/layer/Base}, so layers entered in the\n * options or added with `addLayer` can be groups, which can contain further\n * groups, and so on.\n *\n * @api\n */\nclass Map extends PluggableMap {\n\n  /**\n   * @param {import(\"./PluggableMap.js\").MapOptions} options Map options.\n   */\n  constructor(options) {\n    options = assign({}, options);\n    if (!options.controls) {\n      options.controls = defaultControls();\n    }\n    if (!options.interactions) {\n      options.interactions = defaultInteractions();\n    }\n\n    super(options);\n  }\n\n  createRenderer() {\n    return new CompositeMapRenderer(this);\n  }\n}\n\n\nexport default Map;\n","/**\n * @module ol/proj/epsg3857\n */\nimport {cosh} from '../math.js';\nimport Projection from './Projection.js';\nimport Units from './Units.js';\n\n\n/**\n * Radius of WGS84 sphere\n *\n * @const\n * @type {number}\n */\nexport const RADIUS = 6378137;\n\n\n/**\n * @const\n * @type {number}\n */\nexport const HALF_SIZE = Math.PI * RADIUS;\n\n\n/**\n * @const\n * @type {import(\"../extent.js\").Extent}\n */\nexport const EXTENT = [\n  -HALF_SIZE, -HALF_SIZE,\n  HALF_SIZE, HALF_SIZE\n];\n\n\n/**\n * @const\n * @type {import(\"../extent.js\").Extent}\n */\nexport const WORLD_EXTENT = [-180, -85, 180, 85];\n\n\n/**\n * @classdesc\n * Projection object for web/spherical Mercator (EPSG:3857).\n */\nclass EPSG3857Projection extends Projection {\n\n  /**\n   * @param {string} code Code.\n   */\n  constructor(code) {\n    super({\n      code: code,\n      units: Units.METERS,\n      extent: EXTENT,\n      global: true,\n      worldExtent: WORLD_EXTENT,\n      getPointResolution: function(resolution, point) {\n        return resolution / cosh(point[1] / RADIUS);\n      }\n    });\n\n  }\n\n}\n\n\n/**\n * Projections equal to EPSG:3857.\n *\n * @const\n * @type {Array<import(\"./Projection.js\").default>}\n */\nexport const PROJECTIONS = [\n  new EPSG3857Projection('EPSG:3857'),\n  new EPSG3857Projection('EPSG:102100'),\n  new EPSG3857Projection('EPSG:102113'),\n  new EPSG3857Projection('EPSG:900913'),\n  new EPSG3857Projection('urn:ogc:def:crs:EPSG:6.18:3:3857'),\n  new EPSG3857Projection('urn:ogc:def:crs:EPSG::3857'),\n  new EPSG3857Projection('http://www.opengis.net/gml/srs/epsg.xml#3857')\n];\n\n\n/**\n * Transformation from EPSG:4326 to EPSG:3857.\n *\n * @param {Array<number>} input Input array of coordinate values.\n * @param {Array<number>=} opt_output Output array of coordinate values.\n * @param {number=} opt_dimension Dimension (default is `2`).\n * @return {Array<number>} Output array of coordinate values.\n */\nexport function fromEPSG4326(input, opt_output, opt_dimension) {\n  const length = input.length;\n  const dimension = opt_dimension > 1 ? opt_dimension : 2;\n  let output = opt_output;\n  if (output === undefined) {\n    if (dimension > 2) {\n      // preserve values beyond second dimension\n      output = input.slice();\n    } else {\n      output = new Array(length);\n    }\n  }\n  const halfSize = HALF_SIZE;\n  for (let i = 0; i < length; i += dimension) {\n    output[i] = halfSize * input[i] / 180;\n    let y = RADIUS *\n        Math.log(Math.tan(Math.PI * (+input[i + 1] + 90) / 360));\n    if (y > halfSize) {\n      y = halfSize;\n    } else if (y < -halfSize) {\n      y = -halfSize;\n    }\n    output[i + 1] = y;\n  }\n  return output;\n}\n\n\n/**\n * Transformation from EPSG:3857 to EPSG:4326.\n *\n * @param {Array<number>} input Input array of coordinate values.\n * @param {Array<number>=} opt_output Output array of coordinate values.\n * @param {number=} opt_dimension Dimension (default is `2`).\n * @return {Array<number>} Output array of coordinate values.\n */\nexport function toEPSG4326(input, opt_output, opt_dimension) {\n  const length = input.length;\n  const dimension = opt_dimension > 1 ? opt_dimension : 2;\n  let output = opt_output;\n  if (output === undefined) {\n    if (dimension > 2) {\n      // preserve values beyond second dimension\n      output = input.slice();\n    } else {\n      output = new Array(length);\n    }\n  }\n  for (let i = 0; i < length; i += dimension) {\n    output[i] = 180 * input[i] / HALF_SIZE;\n    output[i + 1] = 360 * Math.atan(\n      Math.exp(input[i + 1] / RADIUS)) / Math.PI - 90;\n  }\n  return output;\n}\n","/**\n * @module ol/proj/epsg4326\n */\nimport Projection from './Projection.js';\nimport Units from './Units.js';\n\n\n/**\n * Semi-major radius of the WGS84 ellipsoid.\n *\n * @const\n * @type {number}\n */\nexport const RADIUS = 6378137;\n\n\n/**\n * Extent of the EPSG:4326 projection which is the whole world.\n *\n * @const\n * @type {import(\"../extent.js\").Extent}\n */\nexport const EXTENT = [-180, -90, 180, 90];\n\n\n/**\n * @const\n * @type {number}\n */\nexport const METERS_PER_UNIT = Math.PI * RADIUS / 180;\n\n\n/**\n * @classdesc\n * Projection object for WGS84 geographic coordinates (EPSG:4326).\n *\n * Note that OpenLayers does not strictly comply with the EPSG definition.\n * The EPSG registry defines 4326 as a CRS for Latitude,Longitude (y,x).\n * OpenLayers treats EPSG:4326 as a pseudo-projection, with x,y coordinates.\n */\nclass EPSG4326Projection extends Projection {\n\n  /**\n   * @param {string} code Code.\n   * @param {string=} opt_axisOrientation Axis orientation.\n   */\n  constructor(code, opt_axisOrientation) {\n    super({\n      code: code,\n      units: Units.DEGREES,\n      extent: EXTENT,\n      axisOrientation: opt_axisOrientation,\n      global: true,\n      metersPerUnit: METERS_PER_UNIT,\n      worldExtent: EXTENT\n    });\n\n  }\n\n}\n\n\n/**\n * Projections equal to EPSG:4326.\n *\n * @const\n * @type {Array<import(\"./Projection.js\").default>}\n */\nexport const PROJECTIONS = [\n  new EPSG4326Projection('CRS:84'),\n  new EPSG4326Projection('EPSG:4326', 'neu'),\n  new EPSG4326Projection('urn:ogc:def:crs:EPSG::4326', 'neu'),\n  new EPSG4326Projection('urn:ogc:def:crs:EPSG:6.6:4326', 'neu'),\n  new EPSG4326Projection('urn:ogc:def:crs:OGC:1.3:CRS84'),\n  new EPSG4326Projection('urn:ogc:def:crs:OGC:2:84'),\n  new EPSG4326Projection('http://www.opengis.net/gml/srs/epsg.xml#4326', 'neu'),\n  new EPSG4326Projection('urn:x-ogc:def:crs:EPSG:4326', 'neu')\n];\n","/**\n * @module ol/proj/projections\n */\n\n\n/**\n * @type {Object<string, import(\"./Projection.js\").default>}\n */\nlet cache = {};\n\n\n/**\n * Clear the projections cache.\n */\nexport function clear() {\n  cache = {};\n}\n\n\n/**\n * Get a cached projection by code.\n * @param {string} code The code for the projection.\n * @return {import(\"./Projection.js\").default} The projection (if cached).\n */\nexport function get(code) {\n  return cache[code] || null;\n}\n\n\n/**\n * Add a projection to the cache.\n * @param {string} code The projection code.\n * @param {import(\"./Projection.js\").default} projection The projection to cache.\n */\nexport function add(code, projection) {\n  cache[code] = projection;\n}\n","/**\n * @module ol/proj\n */\n\n/**\n * The ol/proj module stores:\n * * a list of {@link module:ol/proj/Projection}\n * objects, one for each projection supported by the application\n * * a list of transform functions needed to convert coordinates in one projection\n * into another.\n *\n * The static functions are the methods used to maintain these.\n * Each transform function can handle not only simple coordinate pairs, but also\n * large arrays of coordinates such as vector geometries.\n *\n * When loaded, the library adds projection objects for EPSG:4326 (WGS84\n * geographic coordinates) and EPSG:3857 (Web or Spherical Mercator, as used\n * for example by Bing Maps or OpenStreetMap), together with the relevant\n * transform functions.\n *\n * Additional transforms may be added by using the http://proj4js.org/\n * library (version 2.2 or later). You can use the full build supplied by\n * Proj4js, or create a custom build to support those projections you need; see\n * the Proj4js website for how to do this. You also need the Proj4js definitions\n * for the required projections. These definitions can be obtained from\n * https://epsg.io/, and are a JS function, so can be loaded in a script\n * tag (as in the examples) or pasted into your application.\n *\n * After all required projection definitions are added to proj4's registry (by\n * using `proj4.defs()`), simply call `register(proj4)` from the `ol/proj/proj4`\n * package. Existing transforms are not changed by this function. See\n * examples/wms-image-custom-proj for an example of this.\n *\n * Additional projection definitions can be registered with `proj4.defs()` any\n * time. Just make sure to call `register(proj4)` again; for example, with user-supplied data where you don't\n * know in advance what projections are needed, you can initially load minimal\n * support and then load whichever are requested.\n *\n * Note that Proj4js does not support projection extents. If you want to add\n * one for creating default tile grids, you can add it after the Projection\n * object has been created with `setExtent`, for example,\n * `get('EPSG:1234').setExtent(extent)`.\n *\n * In addition to Proj4js support, any transform functions can be added with\n * {@link module:ol/proj~addCoordinateTransforms}. To use this, you must first create\n * a {@link module:ol/proj/Projection} object for the new projection and add it with\n * {@link module:ol/proj~addProjection}. You can then add the forward and inverse\n * functions with {@link module:ol/proj~addCoordinateTransforms}. See\n * examples/wms-custom-proj for an example of this.\n *\n * Note that if no transforms are needed and you only need to define the\n * projection, just add a {@link module:ol/proj/Projection} with\n * {@link module:ol/proj~addProjection}. See examples/wms-no-proj for an example of\n * this.\n */\nimport {getDistance} from './sphere.js';\nimport {applyTransform} from './extent.js';\nimport {modulo} from './math.js';\nimport {toEPSG4326, fromEPSG4326, PROJECTIONS as EPSG3857_PROJECTIONS} from './proj/epsg3857.js';\nimport {PROJECTIONS as EPSG4326_PROJECTIONS} from './proj/epsg4326.js';\nimport Projection from './proj/Projection.js';\nimport Units, {METERS_PER_UNIT} from './proj/Units.js';\nimport {add as addTransformFunc, clear as clearTransformFuncs, get as getTransformFunc} from './proj/transforms.js';\nimport {add as addProj, clear as clearProj, get as getProj} from './proj/projections.js';\n\n\n/**\n * A projection as {@link module:ol/proj/Projection}, SRS identifier\n * string or undefined.\n * @typedef {Projection|string|undefined} ProjectionLike\n * @api\n */\n\n\n/**\n * A transform function accepts an array of input coordinate values, an optional\n * output array, and an optional dimension (default should be 2).  The function\n * transforms the input coordinate values, populates the output array, and\n * returns the output array.\n *\n * @typedef {function(Array<number>, Array<number>=, number=): Array<number>} TransformFunction\n * @api\n */\n\n\nexport {METERS_PER_UNIT};\n\nexport {Projection};\n\n/**\n * @param {Array<number>} input Input coordinate array.\n * @param {Array<number>=} opt_output Output array of coordinate values.\n * @param {number=} opt_dimension Dimension.\n * @return {Array<number>} Output coordinate array (new array, same coordinate\n *     values).\n */\nexport function cloneTransform(input, opt_output, opt_dimension) {\n  let output;\n  if (opt_output !== undefined) {\n    for (let i = 0, ii = input.length; i < ii; ++i) {\n      opt_output[i] = input[i];\n    }\n    output = opt_output;\n  } else {\n    output = input.slice();\n  }\n  return output;\n}\n\n\n/**\n * @param {Array<number>} input Input coordinate array.\n * @param {Array<number>=} opt_output Output array of coordinate values.\n * @param {number=} opt_dimension Dimension.\n * @return {Array<number>} Input coordinate array (same array as input).\n */\nexport function identityTransform(input, opt_output, opt_dimension) {\n  if (opt_output !== undefined && input !== opt_output) {\n    for (let i = 0, ii = input.length; i < ii; ++i) {\n      opt_output[i] = input[i];\n    }\n    input = opt_output;\n  }\n  return input;\n}\n\n\n/**\n * Add a Projection object to the list of supported projections that can be\n * looked up by their code.\n *\n * @param {Projection} projection Projection instance.\n * @api\n */\nexport function addProjection(projection) {\n  addProj(projection.getCode(), projection);\n  addTransformFunc(projection, projection, cloneTransform);\n}\n\n\n/**\n * @param {Array<Projection>} projections Projections.\n */\nexport function addProjections(projections) {\n  projections.forEach(addProjection);\n}\n\n\n/**\n * Fetches a Projection object for the code specified.\n *\n * @param {ProjectionLike} projectionLike Either a code string which is\n *     a combination of authority and identifier such as \"EPSG:4326\", or an\n *     existing projection object, or undefined.\n * @return {Projection} Projection object, or null if not in list.\n * @api\n */\nexport function get(projectionLike) {\n  return typeof projectionLike === 'string' ?\n    getProj(/** @type {string} */ (projectionLike)) :\n    (/** @type {Projection} */ (projectionLike) || null);\n}\n\n\n/**\n * Get the resolution of the point in degrees or distance units.\n * For projections with degrees as the unit this will simply return the\n * provided resolution. For other projections the point resolution is\n * by default estimated by transforming the 'point' pixel to EPSG:4326,\n * measuring its width and height on the normal sphere,\n * and taking the average of the width and height.\n * A custom function can be provided for a specific projection, either\n * by setting the `getPointResolution` option in the\n * {@link module:ol/proj/Projection~Projection} constructor or by using\n * {@link module:ol/proj/Projection~Projection#setGetPointResolution} to change an existing\n * projection object.\n * @param {ProjectionLike} projection The projection.\n * @param {number} resolution Nominal resolution in projection units.\n * @param {import(\"./coordinate.js\").Coordinate} point Point to find adjusted resolution at.\n * @param {Units=} opt_units Units to get the point resolution in.\n * Default is the projection's units.\n * @return {number} Point resolution.\n * @api\n */\nexport function getPointResolution(projection, resolution, point, opt_units) {\n  projection = get(projection);\n  let pointResolution;\n  const getter = projection.getPointResolutionFunc();\n  if (getter) {\n    pointResolution = getter(resolution, point);\n    if (opt_units && opt_units !== projection.getUnits()) {\n      const metersPerUnit = projection.getMetersPerUnit();\n      if (metersPerUnit) {\n        pointResolution = pointResolution * metersPerUnit / METERS_PER_UNIT[opt_units];\n      }\n    }\n  } else {\n    const units = projection.getUnits();\n    if (units == Units.DEGREES && !opt_units || opt_units == Units.DEGREES) {\n      pointResolution = resolution;\n    } else {\n      // Estimate point resolution by transforming the center pixel to EPSG:4326,\n      // measuring its width and height on the normal sphere, and taking the\n      // average of the width and height.\n      const toEPSG4326 = getTransformFromProjections(projection, get('EPSG:4326'));\n      let vertices = [\n        point[0] - resolution / 2, point[1],\n        point[0] + resolution / 2, point[1],\n        point[0], point[1] - resolution / 2,\n        point[0], point[1] + resolution / 2\n      ];\n      vertices = toEPSG4326(vertices, vertices, 2);\n      const width = getDistance(vertices.slice(0, 2), vertices.slice(2, 4));\n      const height = getDistance(vertices.slice(4, 6), vertices.slice(6, 8));\n      pointResolution = (width + height) / 2;\n      const metersPerUnit = opt_units ?\n        METERS_PER_UNIT[opt_units] :\n        projection.getMetersPerUnit();\n      if (metersPerUnit !== undefined) {\n        pointResolution /= metersPerUnit;\n      }\n    }\n  }\n  return pointResolution;\n}\n\n\n/**\n * Registers transformation functions that don't alter coordinates. Those allow\n * to transform between projections with equal meaning.\n *\n * @param {Array<Projection>} projections Projections.\n * @api\n */\nexport function addEquivalentProjections(projections) {\n  addProjections(projections);\n  projections.forEach(function(source) {\n    projections.forEach(function(destination) {\n      if (source !== destination) {\n        addTransformFunc(source, destination, cloneTransform);\n      }\n    });\n  });\n}\n\n\n/**\n * Registers transformation functions to convert coordinates in any projection\n * in projection1 to any projection in projection2.\n *\n * @param {Array<Projection>} projections1 Projections with equal\n *     meaning.\n * @param {Array<Projection>} projections2 Projections with equal\n *     meaning.\n * @param {TransformFunction} forwardTransform Transformation from any\n *   projection in projection1 to any projection in projection2.\n * @param {TransformFunction} inverseTransform Transform from any projection\n *   in projection2 to any projection in projection1..\n */\nexport function addEquivalentTransforms(projections1, projections2, forwardTransform, inverseTransform) {\n  projections1.forEach(function(projection1) {\n    projections2.forEach(function(projection2) {\n      addTransformFunc(projection1, projection2, forwardTransform);\n      addTransformFunc(projection2, projection1, inverseTransform);\n    });\n  });\n}\n\n\n/**\n * Clear all cached projections and transforms.\n */\nexport function clearAllProjections() {\n  clearProj();\n  clearTransformFuncs();\n}\n\n\n/**\n * @param {Projection|string|undefined} projection Projection.\n * @param {string} defaultCode Default code.\n * @return {Projection} Projection.\n */\nexport function createProjection(projection, defaultCode) {\n  if (!projection) {\n    return get(defaultCode);\n  } else if (typeof projection === 'string') {\n    return get(projection);\n  } else {\n    return (\n      /** @type {Projection} */ (projection)\n    );\n  }\n}\n\n\n/**\n * Creates a {@link module:ol/proj~TransformFunction} from a simple 2D coordinate transform\n * function.\n * @param {function(import(\"./coordinate.js\").Coordinate): import(\"./coordinate.js\").Coordinate} coordTransform Coordinate\n *     transform.\n * @return {TransformFunction} Transform function.\n */\nexport function createTransformFromCoordinateTransform(coordTransform) {\n  return (\n    /**\n     * @param {Array<number>} input Input.\n     * @param {Array<number>=} opt_output Output.\n     * @param {number=} opt_dimension Dimension.\n     * @return {Array<number>} Output.\n     */\n    function(input, opt_output, opt_dimension) {\n      const length = input.length;\n      const dimension = opt_dimension !== undefined ? opt_dimension : 2;\n      const output = opt_output !== undefined ? opt_output : new Array(length);\n      for (let i = 0; i < length; i += dimension) {\n        const point = coordTransform([input[i], input[i + 1]]);\n        output[i] = point[0];\n        output[i + 1] = point[1];\n        for (let j = dimension - 1; j >= 2; --j) {\n          output[i + j] = input[i + j];\n        }\n      }\n      return output;\n    });\n}\n\n\n/**\n * Registers coordinate transform functions to convert coordinates between the\n * source projection and the destination projection.\n * The forward and inverse functions convert coordinate pairs; this function\n * converts these into the functions used internally which also handle\n * extents and coordinate arrays.\n *\n * @param {ProjectionLike} source Source projection.\n * @param {ProjectionLike} destination Destination projection.\n * @param {function(import(\"./coordinate.js\").Coordinate): import(\"./coordinate.js\").Coordinate} forward The forward transform\n *     function (that is, from the source projection to the destination\n *     projection) that takes a {@link module:ol/coordinate~Coordinate} as argument and returns\n *     the transformed {@link module:ol/coordinate~Coordinate}.\n * @param {function(import(\"./coordinate.js\").Coordinate): import(\"./coordinate.js\").Coordinate} inverse The inverse transform\n *     function (that is, from the destination projection to the source\n *     projection) that takes a {@link module:ol/coordinate~Coordinate} as argument and returns\n *     the transformed {@link module:ol/coordinate~Coordinate}.\n * @api\n */\nexport function addCoordinateTransforms(source, destination, forward, inverse) {\n  const sourceProj = get(source);\n  const destProj = get(destination);\n  addTransformFunc(sourceProj, destProj, createTransformFromCoordinateTransform(forward));\n  addTransformFunc(destProj, sourceProj, createTransformFromCoordinateTransform(inverse));\n}\n\n\n/**\n * Transforms a coordinate from longitude/latitude to a different projection.\n * @param {import(\"./coordinate.js\").Coordinate} coordinate Coordinate as longitude and latitude, i.e.\n *     an array with longitude as 1st and latitude as 2nd element.\n * @param {ProjectionLike=} opt_projection Target projection. The\n *     default is Web Mercator, i.e. 'EPSG:3857'.\n * @return {import(\"./coordinate.js\").Coordinate} Coordinate projected to the target projection.\n * @api\n */\nexport function fromLonLat(coordinate, opt_projection) {\n  return transform(coordinate, 'EPSG:4326',\n    opt_projection !== undefined ? opt_projection : 'EPSG:3857');\n}\n\n\n/**\n * Transforms a coordinate to longitude/latitude.\n * @param {import(\"./coordinate.js\").Coordinate} coordinate Projected coordinate.\n * @param {ProjectionLike=} opt_projection Projection of the coordinate.\n *     The default is Web Mercator, i.e. 'EPSG:3857'.\n * @return {import(\"./coordinate.js\").Coordinate} Coordinate as longitude and latitude, i.e. an array\n *     with longitude as 1st and latitude as 2nd element.\n * @api\n */\nexport function toLonLat(coordinate, opt_projection) {\n  const lonLat = transform(coordinate,\n    opt_projection !== undefined ? opt_projection : 'EPSG:3857', 'EPSG:4326');\n  const lon = lonLat[0];\n  if (lon < -180 || lon > 180) {\n    lonLat[0] = modulo(lon + 180, 360) - 180;\n  }\n  return lonLat;\n}\n\n\n/**\n * Checks if two projections are the same, that is every coordinate in one\n * projection does represent the same geographic point as the same coordinate in\n * the other projection.\n *\n * @param {Projection} projection1 Projection 1.\n * @param {Projection} projection2 Projection 2.\n * @return {boolean} Equivalent.\n * @api\n */\nexport function equivalent(projection1, projection2) {\n  if (projection1 === projection2) {\n    return true;\n  }\n  const equalUnits = projection1.getUnits() === projection2.getUnits();\n  if (projection1.getCode() === projection2.getCode()) {\n    return equalUnits;\n  } else {\n    const transformFunc = getTransformFromProjections(projection1, projection2);\n    return transformFunc === cloneTransform && equalUnits;\n  }\n}\n\n\n/**\n * Searches in the list of transform functions for the function for converting\n * coordinates from the source projection to the destination projection.\n *\n * @param {Projection} sourceProjection Source Projection object.\n * @param {Projection} destinationProjection Destination Projection\n *     object.\n * @return {TransformFunction} Transform function.\n */\nexport function getTransformFromProjections(sourceProjection, destinationProjection) {\n  const sourceCode = sourceProjection.getCode();\n  const destinationCode = destinationProjection.getCode();\n  let transformFunc = getTransformFunc(sourceCode, destinationCode);\n  if (!transformFunc) {\n    transformFunc = identityTransform;\n  }\n  return transformFunc;\n}\n\n\n/**\n * Given the projection-like objects, searches for a transformation\n * function to convert a coordinates array from the source projection to the\n * destination projection.\n *\n * @param {ProjectionLike} source Source.\n * @param {ProjectionLike} destination Destination.\n * @return {TransformFunction} Transform function.\n * @api\n */\nexport function getTransform(source, destination) {\n  const sourceProjection = get(source);\n  const destinationProjection = get(destination);\n  return getTransformFromProjections(sourceProjection, destinationProjection);\n}\n\n\n/**\n * Transforms a coordinate from source projection to destination projection.\n * This returns a new coordinate (and does not modify the original).\n *\n * See {@link module:ol/proj~transformExtent} for extent transformation.\n * See the transform method of {@link module:ol/geom/Geometry~Geometry} and its\n * subclasses for geometry transforms.\n *\n * @param {import(\"./coordinate.js\").Coordinate} coordinate Coordinate.\n * @param {ProjectionLike} source Source projection-like.\n * @param {ProjectionLike} destination Destination projection-like.\n * @return {import(\"./coordinate.js\").Coordinate} Coordinate.\n * @api\n */\nexport function transform(coordinate, source, destination) {\n  const transformFunc = getTransform(source, destination);\n  return transformFunc(coordinate, undefined, coordinate.length);\n}\n\n\n/**\n * Transforms an extent from source projection to destination projection.  This\n * returns a new extent (and does not modify the original).\n *\n * @param {import(\"./extent.js\").Extent} extent The extent to transform.\n * @param {ProjectionLike} source Source projection-like.\n * @param {ProjectionLike} destination Destination projection-like.\n * @return {import(\"./extent.js\").Extent} The transformed extent.\n * @api\n */\nexport function transformExtent(extent, source, destination) {\n  const transformFunc = getTransform(source, destination);\n  return applyTransform(extent, transformFunc);\n}\n\n\n/**\n * Transforms the given point to the destination projection.\n *\n * @param {import(\"./coordinate.js\").Coordinate} point Point.\n * @param {Projection} sourceProjection Source projection.\n * @param {Projection} destinationProjection Destination projection.\n * @return {import(\"./coordinate.js\").Coordinate} Point.\n */\nexport function transformWithProjections(point, sourceProjection, destinationProjection) {\n  const transformFunc = getTransformFromProjections(sourceProjection, destinationProjection);\n  return transformFunc(point);\n}\n\n/**\n * @type {Projection}\n */\nlet userProjection = null;\n\n/**\n * Set the projection for coordinates supplied from and returned by API methods.\n * Note that this method is not yet a part of the stable API.  Support for user\n * projections is not yet complete and should be considered experimental.\n * @param {ProjectionLike} projection The user projection.\n */\nexport function setUserProjection(projection) {\n  userProjection = get(projection);\n}\n\n/**\n * Clear the user projection if set.  Note that this method is not yet a part of\n * the stable API.  Support for user projections is not yet complete and should\n * be considered experimental.\n */\nexport function clearUserProjection() {\n  userProjection = null;\n}\n\n/**\n * Get the projection for coordinates supplied from and returned by API methods.\n * Note that this method is not yet a part of the stable API.  Support for user\n * projections is not yet complete and should be considered experimental.\n * @returns {Projection} The user projection (or null if not set).\n */\nexport function getUserProjection() {\n  return userProjection;\n}\n\n/**\n * Use geographic coordinates (WGS-84 datum) in API methods.  Note that this\n * method is not yet a part of the stable API.  Support for user projections is\n * not yet complete and should be considered experimental.\n */\nexport function useGeographic() {\n  setUserProjection('EPSG:4326');\n}\n\n/**\n * Return a coordinate transformed into the user projection.  If no user projection\n * is set, the original coordinate is returned.\n * @param {Array<number>} coordinate Input coordinate.\n * @param {ProjectionLike} sourceProjection The input coordinate projection.\n * @returns {Array<number>} The input coordinate in the user projection.\n */\nexport function toUserCoordinate(coordinate, sourceProjection) {\n  if (!userProjection) {\n    return coordinate;\n  }\n  return transform(coordinate, sourceProjection, userProjection);\n}\n\n/**\n * Return a coordinate transformed from the user projection.  If no user projection\n * is set, the original coordinate is returned.\n * @param {Array<number>} coordinate Input coordinate.\n * @param {ProjectionLike} destProjection The destination projection.\n * @returns {Array<number>} The input coordinate transformed.\n */\nexport function fromUserCoordinate(coordinate, destProjection) {\n  if (!userProjection) {\n    return coordinate;\n  }\n  return transform(coordinate, userProjection, destProjection);\n}\n\n/**\n * Return an extent transformed into the user projection.  If no user projection\n * is set, the original extent is returned.\n * @param {import(\"./extent.js\").Extent} extent Input extent.\n * @param {ProjectionLike} sourceProjection The input extent projection.\n * @returns {import(\"./extent.js\").Extent} The input extent in the user projection.\n */\nexport function toUserExtent(extent, sourceProjection) {\n  if (!userProjection) {\n    return extent;\n  }\n  return transformExtent(extent, sourceProjection, userProjection);\n}\n\n/**\n * Return an extent transformed from the user projection.  If no user projection\n * is set, the original extent is returned.\n * @param {import(\"./extent.js\").Extent} extent Input extent.\n * @param {ProjectionLike} destProjection The destination projection.\n * @returns {import(\"./extent.js\").Extent} The input extent transformed.\n */\nexport function fromUserExtent(extent, destProjection) {\n  if (!userProjection) {\n    return extent;\n  }\n  return transformExtent(extent, userProjection, destProjection);\n}\n\n/**\n * Add transforms to and from EPSG:4326 and EPSG:3857.  This function is called\n * by when this module is executed and should only need to be called again after\n * `clearAllProjections()` is called (e.g. in tests).\n */\nexport function addCommon() {\n  // Add transformations that don't alter coordinates to convert within set of\n  // projections with equal meaning.\n  addEquivalentProjections(EPSG3857_PROJECTIONS);\n  addEquivalentProjections(EPSG4326_PROJECTIONS);\n  // Add transformations to convert EPSG:4326 like coordinates to EPSG:3857 like\n  // coordinates and back.\n  addEquivalentTransforms(EPSG4326_PROJECTIONS, EPSG3857_PROJECTIONS, fromEPSG4326, toEPSG4326);\n}\n\naddCommon();\n","/**\n * @module ol/layer/BaseTile\n */\nimport Layer from './Layer.js';\nimport TileProperty from './TileProperty.js';\nimport {assign} from '../obj.js';\n\n\n/**\n * @typedef {Object} Options\n * @property {string} [className='ol-layer'] A CSS class name to set to the layer element.\n * @property {number} [opacity=1] Opacity (0, 1).\n * @property {boolean} [visible=true] Visibility.\n * @property {import(\"../extent.js\").Extent} [extent] The bounding extent for layer rendering.  The layer will not be\n * rendered outside of this extent.\n * @property {number} [zIndex] The z-index for layer rendering.  At rendering time, the layers\n * will be ordered, first by Z-index and then by position. When `undefined`, a `zIndex` of 0 is assumed\n * for layers that are added to the map's `layers` collection, or `Infinity` when the layer's `setMap()`\n * method was used.\n * @property {number} [minResolution] The minimum resolution (inclusive) at which this layer will be\n * visible.\n * @property {number} [maxResolution] The maximum resolution (exclusive) below which this layer will\n * be visible.\n * @property {number} [preload=0] Preload. Load low-resolution tiles up to `preload` levels. `0`\n * means no preloading.\n * @property {import(\"../source/Tile.js\").default} [source] Source for this layer.\n * @property {import(\"../PluggableMap.js\").default} [map] Sets the layer as overlay on a map. The map will not manage\n * this layer in its layers collection, and the layer will be rendered on top. This is useful for\n * temporary layers. The standard way to add a layer to a map and have it managed by the map is to\n * use {@link module:ol/Map#addLayer}.\n * @property {boolean} [useInterimTilesOnError=true] Use interim tiles on error.\n */\n\n\n/**\n * @classdesc\n * For layer sources that provide pre-rendered, tiled images in grids that are\n * organized by zoom levels for specific resolutions.\n * Note that any property set in the options is set as a {@link module:ol/Object~BaseObject}\n * property on the layer object; for example, setting `title: 'My Title'` in the\n * options means that `title` is observable, and has get/set accessors.\n *\n * @extends {Layer<import(\"../source/Tile.js\").default>}\n * @api\n */\nclass BaseTileLayer extends Layer {\n  /**\n   * @param {Options=} opt_options Tile layer options.\n   */\n  constructor(opt_options) {\n    const options = opt_options ? opt_options : {};\n\n    const baseOptions = assign({}, options);\n\n    delete baseOptions.preload;\n    delete baseOptions.useInterimTilesOnError;\n    super(baseOptions);\n\n    this.setPreload(options.preload !== undefined ? options.preload : 0);\n    this.setUseInterimTilesOnError(options.useInterimTilesOnError !== undefined ?\n      options.useInterimTilesOnError : true);\n\n  }\n\n  /**\n  * Return the level as number to which we will preload tiles up to.\n  * @return {number} The level to preload tiles up to.\n  * @observable\n  * @api\n  */\n  getPreload() {\n    return /** @type {number} */ (this.get(TileProperty.PRELOAD));\n  }\n\n  /**\n  * Set the level as number to which we will preload tiles up to.\n  * @param {number} preload The level to preload tiles up to.\n  * @observable\n  * @api\n  */\n  setPreload(preload) {\n    this.set(TileProperty.PRELOAD, preload);\n  }\n\n  /**\n  * Whether we use interim tiles on error.\n  * @return {boolean} Use interim tiles on error.\n  * @observable\n  * @api\n  */\n  getUseInterimTilesOnError() {\n    return /** @type {boolean} */ (this.get(TileProperty.USE_INTERIM_TILES_ON_ERROR));\n  }\n\n  /**\n  * Set whether we use interim tiles on error.\n  * @param {boolean} useInterimTilesOnError Use interim tiles on error.\n  * @observable\n  * @api\n  */\n  setUseInterimTilesOnError(useInterimTilesOnError) {\n    this.set(TileProperty.USE_INTERIM_TILES_ON_ERROR, useInterimTilesOnError);\n  }\n}\n\n\nexport default BaseTileLayer;\n","/**\n * @module ol/layer/Tile\n */\nimport BaseTileLayer from './BaseTile.js';\nimport CanvasTileLayerRenderer from '../renderer/canvas/TileLayer.js';\n\n\n/**\n * @classdesc\n * For layer sources that provide pre-rendered, tiled images in grids that are\n * organized by zoom levels for specific resolutions.\n * Note that any property set in the options is set as a {@link module:ol/Object~BaseObject}\n * property on the layer object; for example, setting `title: 'My Title'` in the\n * options means that `title` is observable, and has get/set accessors.\n *\n * @api\n */\nclass TileLayer extends BaseTileLayer {\n\n  /**\n   * @param {import(\"./BaseTile.js\").Options=} opt_options Tile layer options.\n   */\n  constructor(opt_options) {\n    super(opt_options);\n  }\n\n  /**\n   * Create a renderer for this layer.\n   * @return {import(\"../renderer/Layer.js\").default} A layer renderer.\n   * @protected\n   */\n  createRenderer() {\n    return new CanvasTileLayerRenderer(this);\n  }\n\n}\n\nexport default TileLayer;\n","/**\n * @module ol/format/xsd\n */\nimport {getAllTextContent, DOCUMENT} from '../xml.js';\nimport {padNumber} from '../string.js';\n\n\n/**\n * @param {Node} node Node.\n * @return {boolean|undefined} Boolean.\n */\nexport function readBoolean(node) {\n  const s = getAllTextContent(node, false);\n  return readBooleanString(s);\n}\n\n\n/**\n * @param {string} string String.\n * @return {boolean|undefined} Boolean.\n */\nexport function readBooleanString(string) {\n  const m = /^\\s*(true|1)|(false|0)\\s*$/.exec(string);\n  if (m) {\n    return m[1] !== undefined || false;\n  } else {\n    return undefined;\n  }\n}\n\n\n/**\n * @param {Node} node Node.\n * @return {number|undefined} DateTime in seconds.\n */\nexport function readDateTime(node) {\n  const s = getAllTextContent(node, false);\n  const dateTime = Date.parse(s);\n  return isNaN(dateTime) ? undefined : dateTime / 1000;\n}\n\n\n/**\n * @param {Node} node Node.\n * @return {number|undefined} Decimal.\n */\nexport function readDecimal(node) {\n  const s = getAllTextContent(node, false);\n  return readDecimalString(s);\n}\n\n\n/**\n * @param {string} string String.\n * @return {number|undefined} Decimal.\n */\nexport function readDecimalString(string) {\n  // FIXME check spec\n  const m = /^\\s*([+\\-]?\\d*\\.?\\d+(?:e[+\\-]?\\d+)?)\\s*$/i.exec(string);\n  if (m) {\n    return parseFloat(m[1]);\n  } else {\n    return undefined;\n  }\n}\n\n\n/**\n * @param {Node} node Node.\n * @return {number|undefined} Non negative integer.\n */\nexport function readNonNegativeInteger(node) {\n  const s = getAllTextContent(node, false);\n  return readNonNegativeIntegerString(s);\n}\n\n\n/**\n * @param {string} string String.\n * @return {number|undefined} Non negative integer.\n */\nexport function readNonNegativeIntegerString(string) {\n  const m = /^\\s*(\\d+)\\s*$/.exec(string);\n  if (m) {\n    return parseInt(m[1], 10);\n  } else {\n    return undefined;\n  }\n}\n\n\n/**\n * @param {Node} node Node.\n * @return {string|undefined} String.\n */\nexport function readString(node) {\n  return getAllTextContent(node, false).trim();\n}\n\n\n/**\n * @param {Node} node Node to append a TextNode with the boolean to.\n * @param {boolean} bool Boolean.\n */\nexport function writeBooleanTextNode(node, bool) {\n  writeStringTextNode(node, (bool) ? '1' : '0');\n}\n\n\n/**\n * @param {Node} node Node to append a CDATA Section with the string to.\n * @param {string} string String.\n */\nexport function writeCDATASection(node, string) {\n  node.appendChild(DOCUMENT.createCDATASection(string));\n}\n\n\n/**\n * @param {Node} node Node to append a TextNode with the dateTime to.\n * @param {number} dateTime DateTime in seconds.\n */\nexport function writeDateTimeTextNode(node, dateTime) {\n  const date = new Date(dateTime * 1000);\n  const string = date.getUTCFullYear() + '-' +\n      padNumber(date.getUTCMonth() + 1, 2) + '-' +\n      padNumber(date.getUTCDate(), 2) + 'T' +\n      padNumber(date.getUTCHours(), 2) + ':' +\n      padNumber(date.getUTCMinutes(), 2) + ':' +\n      padNumber(date.getUTCSeconds(), 2) + 'Z';\n  node.appendChild(DOCUMENT.createTextNode(string));\n}\n\n\n/**\n * @param {Node} node Node to append a TextNode with the decimal to.\n * @param {number} decimal Decimal.\n */\nexport function writeDecimalTextNode(node, decimal) {\n  const string = decimal.toPrecision();\n  node.appendChild(DOCUMENT.createTextNode(string));\n}\n\n\n/**\n * @param {Node} node Node to append a TextNode with the decimal to.\n * @param {number} nonNegativeInteger Non negative integer.\n */\nexport function writeNonNegativeIntegerTextNode(node, nonNegativeInteger) {\n  const string = nonNegativeInteger.toString();\n  node.appendChild(DOCUMENT.createTextNode(string));\n}\n\n\n/**\n * @param {Node} node Node to append a TextNode with the string to.\n * @param {string} string String.\n */\nexport function writeStringTextNode(node, string) {\n  node.appendChild(DOCUMENT.createTextNode(string));\n}\n","/**\n * @module ol/geom/GeometryType\n */\n\n/**\n * The geometry type. One of `'Point'`, `'LineString'`, `'LinearRing'`,\n * `'Polygon'`, `'MultiPoint'`, `'MultiLineString'`, `'MultiPolygon'`,\n * `'GeometryCollection'`, `'Circle'`.\n * @enum {string}\n */\nexport default {\n  POINT: 'Point',\n  LINE_STRING: 'LineString',\n  LINEAR_RING: 'LinearRing',\n  POLYGON: 'Polygon',\n  MULTI_POINT: 'MultiPoint',\n  MULTI_LINE_STRING: 'MultiLineString',\n  MULTI_POLYGON: 'MultiPolygon',\n  GEOMETRY_COLLECTION: 'GeometryCollection',\n  CIRCLE: 'Circle'\n};\n","/**\n * @module ol/util\n */\n\n/**\n * @return {?} Any return.\n */\nexport function abstract() {\n  return /** @type {?} */ ((function() {\n    throw new Error('Unimplemented abstract method.');\n  })());\n}\n\n/**\n * Counter for getUid.\n * @type {number}\n * @private\n */\nlet uidCounter_ = 0;\n\n/**\n * Gets a unique ID for an object. This mutates the object so that further calls\n * with the same object as a parameter returns the same value. Unique IDs are generated\n * as a strictly increasing sequence. Adapted from goog.getUid.\n *\n * @param {Object} obj The object to get the unique ID for.\n * @return {string} The unique ID for the object.\n * @api\n */\nexport function getUid(obj) {\n  return obj.ol_uid || (obj.ol_uid = String(++uidCounter_));\n}\n\n/**\n * OpenLayers version.\n * @type {string}\n */\nexport const VERSION = 'latest';\n","/**\n * @module ol/source/OSM\n */\n\nimport XYZ from './XYZ.js';\n\n\n/**\n * The attribution containing a link to the OpenStreetMap Copyright and License\n * page.\n * @const\n * @type {string}\n * @api\n */\nexport const ATTRIBUTION = '&#169; ' +\n      '<a href=\"https://www.openstreetmap.org/copyright\">OpenStreetMap</a> ' +\n      'contributors.';\n\n\n/**\n * @typedef {Object} Options\n * @property {import(\"./Source.js\").AttributionLike} [attributions] Attributions.\n * @property {number} [cacheSize] Tile cache size. The default depends on the screen size. Will increase if too small.\n * @property {null|string} [crossOrigin] The `crossOrigin` attribute for loaded images.  Note that\n * you must provide a `crossOrigin` value if you want to access pixel data with the Canvas renderer.\n * See https://developer.mozilla.org/en-US/docs/Web/HTML/CORS_enabled_image for more detail.\n * @property {number} [maxZoom=19] Max zoom.\n * @property {boolean} [opaque=true] Whether the layer is opaque.\n * @property {number} [reprojectionErrorThreshold=1.5] Maximum allowed reprojection error (in pixels).\n * Higher values can increase reprojection performance, but decrease precision.\n * @property {import(\"../Tile.js\").LoadFunction} [tileLoadFunction] Optional function to load a tile given a URL. The default is\n * ```js\n * function(imageTile, src) {\n *   imageTile.getImage().src = src;\n * };\n * ```\n * @property {string} [url='https://{a-c}.tile.openstreetmap.org/{z}/{x}/{y}.png'] URL template.\n * Must include `{x}`, `{y}` or `{-y}`, and `{z}` placeholders.\n * @property {boolean} [wrapX=true] Whether to wrap the world horizontally.\n */\n\n\n/**\n * @classdesc\n * Layer source for the OpenStreetMap tile server.\n * @api\n */\nclass OSM extends XYZ {\n  /**\n   * @param {Options=} [opt_options] Open Street Map options.\n   */\n  constructor(opt_options) {\n\n    const options = opt_options || {};\n\n    let attributions;\n    if (options.attributions !== undefined) {\n      attributions = options.attributions;\n    } else {\n      attributions = [ATTRIBUTION];\n    }\n\n    const crossOrigin = options.crossOrigin !== undefined ?\n      options.crossOrigin : 'anonymous';\n\n    const url = options.url !== undefined ?\n      options.url : 'https://{a-c}.tile.openstreetmap.org/{z}/{x}/{y}.png';\n\n    super({\n      attributions: attributions,\n      cacheSize: options.cacheSize,\n      crossOrigin: crossOrigin,\n      opaque: options.opaque !== undefined ? options.opaque : true,\n      maxZoom: options.maxZoom !== undefined ? options.maxZoom : 19,\n      reprojectionErrorThreshold: options.reprojectionErrorThreshold,\n      tileLoadFunction: options.tileLoadFunction,\n      url: url,\n      wrapX: options.wrapX,\n      attributionsCollapsible: false\n    });\n\n  }\n\n}\n\nexport default OSM;\n","/**\n * @module ol/source/Vector\n */\n\nimport {getUid} from '../util.js';\nimport Collection from '../Collection.js';\nimport CollectionEventType from '../CollectionEventType.js';\nimport ObjectEventType from '../ObjectEventType.js';\nimport {extend} from '../array.js';\nimport {assert} from '../asserts.js';\nimport {listen, unlistenByKey} from '../events.js';\nimport Event from '../events/Event.js';\nimport EventType from '../events/EventType.js';\nimport {containsExtent, equals} from '../extent.js';\nimport {xhr} from '../featureloader.js';\nimport {TRUE, VOID} from '../functions.js';\nimport {all as allStrategy} from '../loadingstrategy.js';\nimport {isEmpty, getValues} from '../obj.js';\nimport Source from './Source.js';\nimport SourceState from './State.js';\nimport VectorEventType from './VectorEventType.js';\nimport RBush from '../structs/RBush.js';\n\n/**\n * A function that takes an {@link module:ol/extent~Extent} and a resolution as arguments, and\n * returns an array of {@link module:ol/extent~Extent} with the extents to load. Usually this\n * is one of the standard {@link module:ol/loadingstrategy} strategies.\n *\n * @typedef {function(import(\"../extent.js\").Extent, number): Array<import(\"../extent.js\").Extent>} LoadingStrategy\n * @api\n */\n\n\n/**\n * @classdesc\n * Events emitted by {@link module:ol/source/Vector} instances are instances of this\n * type.\n * @template {import(\"../geom/Geometry.js\").default} Geometry\n */\nexport class VectorSourceEvent extends Event {\n\n  /**\n   * @param {string} type Type.\n   * @param {import(\"../Feature.js\").default<Geometry>=} opt_feature Feature.\n   */\n  constructor(type, opt_feature) {\n\n    super(type);\n\n    /**\n     * The feature being added or removed.\n     * @type {import(\"../Feature.js\").default<Geometry>|undefined}\n     * @api\n     */\n    this.feature = opt_feature;\n\n  }\n\n}\n\n\n/**\n * @typedef {Object} Options\n * @property {import(\"./Source.js\").AttributionLike} [attributions] Attributions.\n * @property {Array<import(\"../Feature.js\").default>|Collection<import(\"../Feature.js\").default>} [features]\n * Features. If provided as {@link module:ol/Collection}, the features in the source\n * and the collection will stay in sync.\n * @property {import(\"../format/Feature.js\").default} [format] The feature format used by the XHR\n * feature loader when `url` is set. Required if `url` is set, otherwise ignored.\n * @property {import(\"../featureloader.js\").FeatureLoader} [loader]\n * The loader function used to load features, from a remote source for example.\n * If this is not set and `url` is set, the source will create and use an XHR\n * feature loader.\n *\n * Example:\n *\n * ```js\n * import {Vector} from 'ol/source';\n * import {GeoJSON} from 'ol/format';\n * import {bbox} from 'ol/loadingstrategy';\n *\n * var vectorSource = new Vector({\n *   format: new GeoJSON(),\n *   loader: function(extent, resolution, projection) {\n *      var proj = projection.getCode();\n *      var url = 'https://ahocevar.com/geoserver/wfs?service=WFS&' +\n *          'version=1.1.0&request=GetFeature&typename=osm:water_areas&' +\n *          'outputFormat=application/json&srsname=' + proj + '&' +\n *          'bbox=' + extent.join(',') + ',' + proj;\n *      var xhr = new XMLHttpRequest();\n *      xhr.open('GET', url);\n *      var onError = function() {\n *        vectorSource.removeLoadedExtent(extent);\n *      }\n *      xhr.onerror = onError;\n *      xhr.onload = function() {\n *        if (xhr.status == 200) {\n *          vectorSource.addFeatures(\n *              vectorSource.getFormat().readFeatures(xhr.responseText));\n *        } else {\n *          onError();\n *        }\n *      }\n *      xhr.send();\n *    },\n *    strategy: bbox\n *  });\n * ```\n * @property {boolean} [overlaps=true] This source may have overlapping geometries.\n * Setting this to `false` (e.g. for sources with polygons that represent administrative\n * boundaries or TopoJSON sources) allows the renderer to optimise fill and\n * stroke operations.\n * @property {LoadingStrategy} [strategy] The loading strategy to use.\n * By default an {@link module:ol/loadingstrategy~all}\n * strategy is used, a one-off strategy which loads all features at once.\n * @property {string|import(\"../featureloader.js\").FeatureUrlFunction} [url]\n * Setting this option instructs the source to load features using an XHR loader\n * (see {@link module:ol/featureloader~xhr}). Use a `string` and an\n * {@link module:ol/loadingstrategy~all} for a one-off download of all features from\n * the given URL. Use a {@link module:ol/featureloader~FeatureUrlFunction} to generate the url with\n * other loading strategies.\n * Requires `format` to be set as well.\n * When default XHR feature loader is provided, the features will\n * be transformed from the data projection to the view projection\n * during parsing. If your remote data source does not advertise its projection\n * properly, this transformation will be incorrect. For some formats, the\n * default projection (usually EPSG:4326) can be overridden by setting the\n * dataProjection constructor option on the format.\n * Note that if a source contains non-feature data, such as a GeoJSON geometry\n * or a KML NetworkLink, these will be ignored. Use a custom loader to load these.\n * @property {boolean} [useSpatialIndex=true]\n * By default, an RTree is used as spatial index. When features are removed and\n * added frequently, and the total number of features is low, setting this to\n * `false` may improve performance.\n *\n * Note that\n * {@link module:ol/source/Vector~VectorSource#getFeaturesInExtent},\n * {@link module:ol/source/Vector~VectorSource#getClosestFeatureToCoordinate} and\n * {@link module:ol/source/Vector~VectorSource#getExtent} cannot be used when `useSpatialIndex` is\n * set to `false`, and {@link module:ol/source/Vector~VectorSource#forEachFeatureInExtent} will loop\n * through all features.\n *\n * When set to `false`, the features will be maintained in an\n * {@link module:ol/Collection}, which can be retrieved through\n * {@link module:ol/source/Vector~VectorSource#getFeaturesCollection}.\n * @property {boolean} [wrapX=true] Wrap the world horizontally. For vector editing across the\n * -180° and 180° meridians to work properly, this should be set to `false`. The\n * resulting geometry coordinates will then exceed the world bounds.\n */\n\n\n/**\n * @classdesc\n * Provides a source of features for vector layers. Vector features provided\n * by this source are suitable for editing. See {@link module:ol/source/VectorTile~VectorTile} for\n * vector data that is optimized for rendering.\n *\n * @fires VectorSourceEvent\n * @api\n * @template {import(\"../geom/Geometry.js\").default} Geometry\n */\nclass VectorSource extends Source {\n  /**\n   * @param {Options=} opt_options Vector source options.\n   */\n  constructor(opt_options) {\n\n    const options = opt_options || {};\n\n    super({\n      attributions: options.attributions,\n      projection: undefined,\n      state: SourceState.READY,\n      wrapX: options.wrapX !== undefined ? options.wrapX : true\n    });\n\n    /**\n     * @private\n     * @type {import(\"../featureloader.js\").FeatureLoader}\n     */\n    this.loader_ = VOID;\n\n    /**\n     * @private\n     * @type {import(\"../format/Feature.js\").default|undefined}\n     */\n    this.format_ = options.format;\n\n    /**\n     * @private\n     * @type {boolean}\n     */\n    this.overlaps_ = options.overlaps == undefined ? true : options.overlaps;\n\n    /**\n     * @private\n     * @type {string|import(\"../featureloader.js\").FeatureUrlFunction|undefined}\n     */\n    this.url_ = options.url;\n\n    if (options.loader !== undefined) {\n      this.loader_ = options.loader;\n    } else if (this.url_ !== undefined) {\n      assert(this.format_, 7); // `format` must be set when `url` is set\n      // create a XHR feature loader for \"url\" and \"format\"\n      this.loader_ = xhr(this.url_, /** @type {import(\"../format/Feature.js\").default} */ (this.format_));\n    }\n\n    /**\n     * @private\n     * @type {LoadingStrategy}\n     */\n    this.strategy_ = options.strategy !== undefined ? options.strategy : allStrategy;\n\n    const useSpatialIndex =\n        options.useSpatialIndex !== undefined ? options.useSpatialIndex : true;\n\n    /**\n     * @private\n     * @type {RBush<import(\"../Feature.js\").default<Geometry>>}\n     */\n    this.featuresRtree_ = useSpatialIndex ? new RBush() : null;\n\n    /**\n     * @private\n     * @type {RBush<{extent: import(\"../extent.js\").Extent}>}\n     */\n    this.loadedExtentsRtree_ = new RBush();\n\n    /**\n     * @private\n     * @type {!Object<string, import(\"../Feature.js\").default<Geometry>>}\n     */\n    this.nullGeometryFeatures_ = {};\n\n    /**\n     * A lookup of features by id (the return from feature.getId()).\n     * @private\n     * @type {!Object<string, import(\"../Feature.js\").default<Geometry>>}\n     */\n    this.idIndex_ = {};\n\n    /**\n     * A lookup of features by uid (using getUid(feature)).\n     * @private\n     * @type {!Object<string, import(\"../Feature.js\").default<Geometry>>}\n     */\n    this.uidIndex_ = {};\n\n    /**\n     * @private\n     * @type {Object<string, Array<import(\"../events.js\").EventsKey>>}\n     */\n    this.featureChangeKeys_ = {};\n\n    /**\n     * @private\n     * @type {Collection<import(\"../Feature.js\").default<Geometry>>}\n     */\n    this.featuresCollection_ = null;\n\n    let collection, features;\n    if (Array.isArray(options.features)) {\n      features = options.features;\n    } else if (options.features) {\n      collection = options.features;\n      features = collection.getArray();\n    }\n    if (!useSpatialIndex && collection === undefined) {\n      collection = new Collection(features);\n    }\n    if (features !== undefined) {\n      this.addFeaturesInternal(features);\n    }\n    if (collection !== undefined) {\n      this.bindFeaturesCollection_(collection);\n    }\n\n  }\n\n  /**\n   * Add a single feature to the source.  If you want to add a batch of features\n   * at once, call {@link module:ol/source/Vector~VectorSource#addFeatures #addFeatures()}\n   * instead. A feature will not be added to the source if feature with\n   * the same id is already there. The reason for this behavior is to avoid\n   * feature duplication when using bbox or tile loading strategies.\n   * Note: this also applies if an {@link module:ol/Collection} is used for features,\n   * meaning that if a feature with a duplicate id is added in the collection, it will\n   * be removed from it right away.\n   * @param {import(\"../Feature.js\").default<Geometry>} feature Feature to add.\n   * @api\n   */\n  addFeature(feature) {\n    this.addFeatureInternal(feature);\n    this.changed();\n  }\n\n\n  /**\n   * Add a feature without firing a `change` event.\n   * @param {import(\"../Feature.js\").default<Geometry>} feature Feature.\n   * @protected\n   */\n  addFeatureInternal(feature) {\n    const featureKey = getUid(feature);\n\n    if (!this.addToIndex_(featureKey, feature)) {\n      if (this.featuresCollection_) {\n        this.featuresCollection_.remove(feature);\n      }\n      return;\n    }\n\n    this.setupChangeEvents_(featureKey, feature);\n\n    const geometry = feature.getGeometry();\n    if (geometry) {\n      const extent = geometry.getExtent();\n      if (this.featuresRtree_) {\n        this.featuresRtree_.insert(extent, feature);\n      }\n    } else {\n      this.nullGeometryFeatures_[featureKey] = feature;\n    }\n\n    this.dispatchEvent(\n      new VectorSourceEvent(VectorEventType.ADDFEATURE, feature));\n  }\n\n\n  /**\n   * @param {string} featureKey Unique identifier for the feature.\n   * @param {import(\"../Feature.js\").default<Geometry>} feature The feature.\n   * @private\n   */\n  setupChangeEvents_(featureKey, feature) {\n    this.featureChangeKeys_[featureKey] = [\n      listen(feature, EventType.CHANGE,\n        this.handleFeatureChange_, this),\n      listen(feature, ObjectEventType.PROPERTYCHANGE,\n        this.handleFeatureChange_, this)\n    ];\n  }\n\n\n  /**\n   * @param {string} featureKey Unique identifier for the feature.\n   * @param {import(\"../Feature.js\").default<Geometry>} feature The feature.\n   * @return {boolean} The feature is \"valid\", in the sense that it is also a\n   *     candidate for insertion into the Rtree.\n   * @private\n   */\n  addToIndex_(featureKey, feature) {\n    let valid = true;\n    const id = feature.getId();\n    if (id !== undefined) {\n      if (!(id.toString() in this.idIndex_)) {\n        this.idIndex_[id.toString()] = feature;\n      } else {\n        valid = false;\n      }\n    }\n    if (valid) {\n      assert(!(featureKey in this.uidIndex_),\n        30); // The passed `feature` was already added to the source\n      this.uidIndex_[featureKey] = feature;\n    }\n    return valid;\n  }\n\n\n  /**\n   * Add a batch of features to the source.\n   * @param {Array<import(\"../Feature.js\").default<Geometry>>} features Features to add.\n   * @api\n   */\n  addFeatures(features) {\n    this.addFeaturesInternal(features);\n    this.changed();\n  }\n\n\n  /**\n   * Add features without firing a `change` event.\n   * @param {Array<import(\"../Feature.js\").default<Geometry>>} features Features.\n   * @protected\n   */\n  addFeaturesInternal(features) {\n    const extents = [];\n    const newFeatures = [];\n    const geometryFeatures = [];\n\n    for (let i = 0, length = features.length; i < length; i++) {\n      const feature = features[i];\n      const featureKey = getUid(feature);\n      if (this.addToIndex_(featureKey, feature)) {\n        newFeatures.push(feature);\n      }\n    }\n\n    for (let i = 0, length = newFeatures.length; i < length; i++) {\n      const feature = newFeatures[i];\n      const featureKey = getUid(feature);\n      this.setupChangeEvents_(featureKey, feature);\n\n      const geometry = feature.getGeometry();\n      if (geometry) {\n        const extent = geometry.getExtent();\n        extents.push(extent);\n        geometryFeatures.push(feature);\n      } else {\n        this.nullGeometryFeatures_[featureKey] = feature;\n      }\n    }\n    if (this.featuresRtree_) {\n      this.featuresRtree_.load(extents, geometryFeatures);\n    }\n\n    for (let i = 0, length = newFeatures.length; i < length; i++) {\n      this.dispatchEvent(new VectorSourceEvent(VectorEventType.ADDFEATURE, newFeatures[i]));\n    }\n  }\n\n\n  /**\n   * @param {!Collection<import(\"../Feature.js\").default<Geometry>>} collection Collection.\n   * @private\n   */\n  bindFeaturesCollection_(collection) {\n    let modifyingCollection = false;\n    this.addEventListener(VectorEventType.ADDFEATURE,\n      /**\n       * @param {VectorSourceEvent<Geometry>} evt The vector source event\n       */\n      function(evt) {\n        if (!modifyingCollection) {\n          modifyingCollection = true;\n          collection.push(evt.feature);\n          modifyingCollection = false;\n        }\n      });\n    this.addEventListener(VectorEventType.REMOVEFEATURE,\n      /**\n       * @param {VectorSourceEvent<Geometry>} evt The vector source event\n       */\n      function(evt) {\n        if (!modifyingCollection) {\n          modifyingCollection = true;\n          collection.remove(evt.feature);\n          modifyingCollection = false;\n        }\n      });\n    collection.addEventListener(CollectionEventType.ADD,\n      /**\n       * @param {import(\"../Collection.js\").CollectionEvent} evt The collection event\n       */\n      function(evt) {\n        if (!modifyingCollection) {\n          modifyingCollection = true;\n          this.addFeature(/** @type {import(\"../Feature.js\").default<Geometry>} */ (evt.element));\n          modifyingCollection = false;\n        }\n      }.bind(this));\n    collection.addEventListener(CollectionEventType.REMOVE,\n      /**\n       * @param {import(\"../Collection.js\").CollectionEvent} evt The collection event\n       */\n      function(evt) {\n        if (!modifyingCollection) {\n          modifyingCollection = true;\n          this.removeFeature(/** @type {import(\"../Feature.js\").default<Geometry>} */ (evt.element));\n          modifyingCollection = false;\n        }\n      }.bind(this));\n    this.featuresCollection_ = collection;\n  }\n\n\n  /**\n   * Remove all features from the source.\n   * @param {boolean=} opt_fast Skip dispatching of {@link module:ol/source/Vector.VectorSourceEvent#removefeature} events.\n   * @api\n   */\n  clear(opt_fast) {\n    if (opt_fast) {\n      for (const featureId in this.featureChangeKeys_) {\n        const keys = this.featureChangeKeys_[featureId];\n        keys.forEach(unlistenByKey);\n      }\n      if (!this.featuresCollection_) {\n        this.featureChangeKeys_ = {};\n        this.idIndex_ = {};\n        this.uidIndex_ = {};\n      }\n    } else {\n      if (this.featuresRtree_) {\n        this.featuresRtree_.forEach(this.removeFeatureInternal.bind(this));\n        for (const id in this.nullGeometryFeatures_) {\n          this.removeFeatureInternal(this.nullGeometryFeatures_[id]);\n        }\n      }\n    }\n    if (this.featuresCollection_) {\n      this.featuresCollection_.clear();\n    }\n\n    if (this.featuresRtree_) {\n      this.featuresRtree_.clear();\n    }\n    this.nullGeometryFeatures_ = {};\n\n    const clearEvent = new VectorSourceEvent(VectorEventType.CLEAR);\n    this.dispatchEvent(clearEvent);\n    this.changed();\n  }\n\n\n  /**\n   * Iterate through all features on the source, calling the provided callback\n   * with each one.  If the callback returns any \"truthy\" value, iteration will\n   * stop and the function will return the same value.\n   * Note: this function only iterate through the feature that have a defined geometry.\n   *\n   * @param {function(import(\"../Feature.js\").default<Geometry>): T} callback Called with each feature\n   *     on the source.  Return a truthy value to stop iteration.\n   * @return {T|undefined} The return value from the last call to the callback.\n   * @template T\n   * @api\n   */\n  forEachFeature(callback) {\n    if (this.featuresRtree_) {\n      return this.featuresRtree_.forEach(callback);\n    } else if (this.featuresCollection_) {\n      this.featuresCollection_.forEach(callback);\n    }\n  }\n\n\n  /**\n   * Iterate through all features whose geometries contain the provided\n   * coordinate, calling the callback with each feature.  If the callback returns\n   * a \"truthy\" value, iteration will stop and the function will return the same\n   * value.\n   *\n   * @param {import(\"../coordinate.js\").Coordinate} coordinate Coordinate.\n   * @param {function(import(\"../Feature.js\").default<Geometry>): T} callback Called with each feature\n   *     whose goemetry contains the provided coordinate.\n   * @return {T|undefined} The return value from the last call to the callback.\n   * @template T\n   */\n  forEachFeatureAtCoordinateDirect(coordinate, callback) {\n    const extent = [coordinate[0], coordinate[1], coordinate[0], coordinate[1]];\n    return this.forEachFeatureInExtent(extent, function(feature) {\n      const geometry = feature.getGeometry();\n      if (geometry.intersectsCoordinate(coordinate)) {\n        return callback(feature);\n      } else {\n        return undefined;\n      }\n    });\n  }\n\n\n  /**\n   * Iterate through all features whose bounding box intersects the provided\n   * extent (note that the feature's geometry may not intersect the extent),\n   * calling the callback with each feature.  If the callback returns a \"truthy\"\n   * value, iteration will stop and the function will return the same value.\n   *\n   * If you are interested in features whose geometry intersects an extent, call\n   * the {@link module:ol/source/Vector~VectorSource#forEachFeatureIntersectingExtent #forEachFeatureIntersectingExtent()} method instead.\n   *\n   * When `useSpatialIndex` is set to false, this method will loop through all\n   * features, equivalent to {@link module:ol/source/Vector~VectorSource#forEachFeature #forEachFeature()}.\n   *\n   * @param {import(\"../extent.js\").Extent} extent Extent.\n   * @param {function(import(\"../Feature.js\").default<Geometry>): T} callback Called with each feature\n   *     whose bounding box intersects the provided extent.\n   * @return {T|undefined} The return value from the last call to the callback.\n   * @template T\n   * @api\n   */\n  forEachFeatureInExtent(extent, callback) {\n    if (this.featuresRtree_) {\n      return this.featuresRtree_.forEachInExtent(extent, callback);\n    } else if (this.featuresCollection_) {\n      this.featuresCollection_.forEach(callback);\n    }\n  }\n\n\n  /**\n   * Iterate through all features whose geometry intersects the provided extent,\n   * calling the callback with each feature.  If the callback returns a \"truthy\"\n   * value, iteration will stop and the function will return the same value.\n   *\n   * If you only want to test for bounding box intersection, call the\n   * {@link module:ol/source/Vector~VectorSource#forEachFeatureInExtent #forEachFeatureInExtent()} method instead.\n   *\n   * @param {import(\"../extent.js\").Extent} extent Extent.\n   * @param {function(import(\"../Feature.js\").default<Geometry>): T} callback Called with each feature\n   *     whose geometry intersects the provided extent.\n   * @return {T|undefined} The return value from the last call to the callback.\n   * @template T\n   * @api\n   */\n  forEachFeatureIntersectingExtent(extent, callback) {\n    return this.forEachFeatureInExtent(extent,\n      /**\n       * @param {import(\"../Feature.js\").default<Geometry>} feature Feature.\n       * @return {T|undefined} The return value from the last call to the callback.\n       */\n      function(feature) {\n        const geometry = feature.getGeometry();\n        if (geometry.intersectsExtent(extent)) {\n          const result = callback(feature);\n          if (result) {\n            return result;\n          }\n        }\n      });\n  }\n\n\n  /**\n   * Get the features collection associated with this source. Will be `null`\n   * unless the source was configured with `useSpatialIndex` set to `false`, or\n   * with an {@link module:ol/Collection} as `features`.\n   * @return {Collection<import(\"../Feature.js\").default<Geometry>>} The collection of features.\n   * @api\n   */\n  getFeaturesCollection() {\n    return this.featuresCollection_;\n  }\n\n\n  /**\n   * Get all features on the source in random order.\n   * @return {Array<import(\"../Feature.js\").default<Geometry>>} Features.\n   * @api\n   */\n  getFeatures() {\n    let features;\n    if (this.featuresCollection_) {\n      features = this.featuresCollection_.getArray();\n    } else if (this.featuresRtree_) {\n      features = this.featuresRtree_.getAll();\n      if (!isEmpty(this.nullGeometryFeatures_)) {\n        extend(features, getValues(this.nullGeometryFeatures_));\n      }\n    }\n    return (\n      /** @type {Array<import(\"../Feature.js\").default<Geometry>>} */ (features)\n    );\n  }\n\n\n  /**\n   * Get all features whose geometry intersects the provided coordinate.\n   * @param {import(\"../coordinate.js\").Coordinate} coordinate Coordinate.\n   * @return {Array<import(\"../Feature.js\").default<Geometry>>} Features.\n   * @api\n   */\n  getFeaturesAtCoordinate(coordinate) {\n    const features = [];\n    this.forEachFeatureAtCoordinateDirect(coordinate, function(feature) {\n      features.push(feature);\n    });\n    return features;\n  }\n\n\n  /**\n   * Get all features whose bounding box intersects the provided extent.  Note that this returns an array of\n   * all features intersecting the given extent in random order (so it may include\n   * features whose geometries do not intersect the extent).\n   *\n   * This method is not available when the source is configured with\n   * `useSpatialIndex` set to `false`.\n   * @param {import(\"../extent.js\").Extent} extent Extent.\n   * @return {Array<import(\"../Feature.js\").default<Geometry>>} Features.\n   * @api\n   */\n  getFeaturesInExtent(extent) {\n    return this.featuresRtree_.getInExtent(extent);\n  }\n\n\n  /**\n   * Get the closest feature to the provided coordinate.\n   *\n   * This method is not available when the source is configured with\n   * `useSpatialIndex` set to `false`.\n   * @param {import(\"../coordinate.js\").Coordinate} coordinate Coordinate.\n   * @param {function(import(\"../Feature.js\").default<Geometry>):boolean=} opt_filter Feature filter function.\n   *     The filter function will receive one argument, the {@link module:ol/Feature feature}\n   *     and it should return a boolean value. By default, no filtering is made.\n   * @return {import(\"../Feature.js\").default<Geometry>} Closest feature.\n   * @api\n   */\n  getClosestFeatureToCoordinate(coordinate, opt_filter) {\n    // Find the closest feature using branch and bound.  We start searching an\n    // infinite extent, and find the distance from the first feature found.  This\n    // becomes the closest feature.  We then compute a smaller extent which any\n    // closer feature must intersect.  We continue searching with this smaller\n    // extent, trying to find a closer feature.  Every time we find a closer\n    // feature, we update the extent being searched so that any even closer\n    // feature must intersect it.  We continue until we run out of features.\n    const x = coordinate[0];\n    const y = coordinate[1];\n    let closestFeature = null;\n    const closestPoint = [NaN, NaN];\n    let minSquaredDistance = Infinity;\n    const extent = [-Infinity, -Infinity, Infinity, Infinity];\n    const filter = opt_filter ? opt_filter : TRUE;\n    this.featuresRtree_.forEachInExtent(extent,\n      /**\n       * @param {import(\"../Feature.js\").default<Geometry>} feature Feature.\n       */\n      function(feature) {\n        if (filter(feature)) {\n          const geometry = feature.getGeometry();\n          const previousMinSquaredDistance = minSquaredDistance;\n          minSquaredDistance = geometry.closestPointXY(\n            x, y, closestPoint, minSquaredDistance);\n          if (minSquaredDistance < previousMinSquaredDistance) {\n            closestFeature = feature;\n            // This is sneaky.  Reduce the extent that it is currently being\n            // searched while the R-Tree traversal using this same extent object\n            // is still in progress.  This is safe because the new extent is\n            // strictly contained by the old extent.\n            const minDistance = Math.sqrt(minSquaredDistance);\n            extent[0] = x - minDistance;\n            extent[1] = y - minDistance;\n            extent[2] = x + minDistance;\n            extent[3] = y + minDistance;\n          }\n        }\n      });\n    return closestFeature;\n  }\n\n\n  /**\n   * Get the extent of the features currently in the source.\n   *\n   * This method is not available when the source is configured with\n   * `useSpatialIndex` set to `false`.\n   * @param {import(\"../extent.js\").Extent=} opt_extent Destination extent. If provided, no new extent\n   *     will be created. Instead, that extent's coordinates will be overwritten.\n   * @return {import(\"../extent.js\").Extent} Extent.\n   * @api\n   */\n  getExtent(opt_extent) {\n    return this.featuresRtree_.getExtent(opt_extent);\n  }\n\n\n  /**\n   * Get a feature by its identifier (the value returned by feature.getId()).\n   * Note that the index treats string and numeric identifiers as the same.  So\n   * `source.getFeatureById(2)` will return a feature with id `'2'` or `2`.\n   *\n   * @param {string|number} id Feature identifier.\n   * @return {import(\"../Feature.js\").default<Geometry>} The feature (or `null` if not found).\n   * @api\n   */\n  getFeatureById(id) {\n    const feature = this.idIndex_[id.toString()];\n    return feature !== undefined ? feature : null;\n  }\n\n\n  /**\n   * Get a feature by its internal unique identifier (using `getUid`).\n   *\n   * @param {string} uid Feature identifier.\n   * @return {import(\"../Feature.js\").default<Geometry>} The feature (or `null` if not found).\n   */\n  getFeatureByUid(uid) {\n    const feature = this.uidIndex_[uid];\n    return feature !== undefined ? feature : null;\n  }\n\n\n  /**\n   * Get the format associated with this source.\n   *\n   * @return {import(\"../format/Feature.js\").default|undefined} The feature format.\n   * @api\n   */\n  getFormat() {\n    return this.format_;\n  }\n\n\n  /**\n   * @return {boolean} The source can have overlapping geometries.\n   */\n  getOverlaps() {\n    return this.overlaps_;\n  }\n\n\n  /**\n   * Get the url associated with this source.\n   *\n   * @return {string|import(\"../featureloader.js\").FeatureUrlFunction|undefined} The url.\n   * @api\n   */\n  getUrl() {\n    return this.url_;\n  }\n\n\n  /**\n   * @param {Event} event Event.\n   * @private\n   */\n  handleFeatureChange_(event) {\n    const feature = /** @type {import(\"../Feature.js\").default<Geometry>} */ (event.target);\n    const featureKey = getUid(feature);\n    const geometry = feature.getGeometry();\n    if (!geometry) {\n      if (!(featureKey in this.nullGeometryFeatures_)) {\n        if (this.featuresRtree_) {\n          this.featuresRtree_.remove(feature);\n        }\n        this.nullGeometryFeatures_[featureKey] = feature;\n      }\n    } else {\n      const extent = geometry.getExtent();\n      if (featureKey in this.nullGeometryFeatures_) {\n        delete this.nullGeometryFeatures_[featureKey];\n        if (this.featuresRtree_) {\n          this.featuresRtree_.insert(extent, feature);\n        }\n      } else {\n        if (this.featuresRtree_) {\n          this.featuresRtree_.update(extent, feature);\n        }\n      }\n    }\n    const id = feature.getId();\n    if (id !== undefined) {\n      const sid = id.toString();\n      if (this.idIndex_[sid] !== feature) {\n        this.removeFromIdIndex_(feature);\n        this.idIndex_[sid] = feature;\n      }\n    } else {\n      this.removeFromIdIndex_(feature);\n      this.uidIndex_[featureKey] = feature;\n    }\n    this.changed();\n    this.dispatchEvent(new VectorSourceEvent(\n      VectorEventType.CHANGEFEATURE, feature));\n  }\n\n  /**\n   * Returns true if the feature is contained within the source.\n   * @param {import(\"../Feature.js\").default<Geometry>} feature Feature.\n   * @return {boolean} Has feature.\n   * @api\n   */\n  hasFeature(feature) {\n    const id = feature.getId();\n    if (id !== undefined) {\n      return id in this.idIndex_;\n    } else {\n      return getUid(feature) in this.uidIndex_;\n    }\n  }\n\n  /**\n   * @return {boolean} Is empty.\n   */\n  isEmpty() {\n    return this.featuresRtree_.isEmpty() && isEmpty(this.nullGeometryFeatures_);\n  }\n\n\n  /**\n   * @param {import(\"../extent.js\").Extent} extent Extent.\n   * @param {number} resolution Resolution.\n   * @param {import(\"../proj/Projection.js\").default} projection Projection.\n   */\n  loadFeatures(extent, resolution, projection) {\n    const loadedExtentsRtree = this.loadedExtentsRtree_;\n    const extentsToLoad = this.strategy_(extent, resolution);\n    this.loading = false;\n    for (let i = 0, ii = extentsToLoad.length; i < ii; ++i) {\n      const extentToLoad = extentsToLoad[i];\n      const alreadyLoaded = loadedExtentsRtree.forEachInExtent(extentToLoad,\n        /**\n         * @param {{extent: import(\"../extent.js\").Extent}} object Object.\n         * @return {boolean} Contains.\n         */\n        function(object) {\n          return containsExtent(object.extent, extentToLoad);\n        });\n      if (!alreadyLoaded) {\n        this.loader_.call(this, extentToLoad, resolution, projection);\n        loadedExtentsRtree.insert(extentToLoad, {extent: extentToLoad.slice()});\n        this.loading = this.loader_ !== VOID;\n      }\n    }\n  }\n\n  /**\n   * @inheritDoc\n   */\n  refresh() {\n    this.clear(true);\n    this.loadedExtentsRtree_.clear();\n    super.refresh();\n  }\n\n\n  /**\n   * Remove an extent from the list of loaded extents.\n   * @param {import(\"../extent.js\").Extent} extent Extent.\n   * @api\n   */\n  removeLoadedExtent(extent) {\n    const loadedExtentsRtree = this.loadedExtentsRtree_;\n    let obj;\n    loadedExtentsRtree.forEachInExtent(extent, function(object) {\n      if (equals(object.extent, extent)) {\n        obj = object;\n        return true;\n      }\n    });\n    if (obj) {\n      loadedExtentsRtree.remove(obj);\n    }\n  }\n\n\n  /**\n   * Remove a single feature from the source.  If you want to remove all features\n   * at once, use the {@link module:ol/source/Vector~VectorSource#clear #clear()} method\n   * instead.\n   * @param {import(\"../Feature.js\").default<Geometry>} feature Feature to remove.\n   * @api\n   */\n  removeFeature(feature) {\n    const featureKey = getUid(feature);\n    if (featureKey in this.nullGeometryFeatures_) {\n      delete this.nullGeometryFeatures_[featureKey];\n    } else {\n      if (this.featuresRtree_) {\n        this.featuresRtree_.remove(feature);\n      }\n    }\n    this.removeFeatureInternal(feature);\n    this.changed();\n  }\n\n\n  /**\n   * Remove feature without firing a `change` event.\n   * @param {import(\"../Feature.js\").default<Geometry>} feature Feature.\n   * @protected\n   */\n  removeFeatureInternal(feature) {\n    const featureKey = getUid(feature);\n    this.featureChangeKeys_[featureKey].forEach(unlistenByKey);\n    delete this.featureChangeKeys_[featureKey];\n    const id = feature.getId();\n    if (id !== undefined) {\n      delete this.idIndex_[id.toString()];\n    }\n    delete this.uidIndex_[featureKey];\n    this.dispatchEvent(new VectorSourceEvent(\n      VectorEventType.REMOVEFEATURE, feature));\n  }\n\n\n  /**\n   * Remove a feature from the id index.  Called internally when the feature id\n   * may have changed.\n   * @param {import(\"../Feature.js\").default<Geometry>} feature The feature.\n   * @return {boolean} Removed the feature from the index.\n   * @private\n   */\n  removeFromIdIndex_(feature) {\n    let removed = false;\n    for (const id in this.idIndex_) {\n      if (this.idIndex_[id] === feature) {\n        delete this.idIndex_[id];\n        removed = true;\n        break;\n      }\n    }\n    return removed;\n  }\n\n\n  /**\n   * Set the new loader of the source. The next render cycle will use the\n   * new loader.\n   * @param {import(\"../featureloader.js\").FeatureLoader} loader The loader to set.\n   * @api\n   */\n  setLoader(loader) {\n    this.loader_ = loader;\n  }\n\n  /**\n   * Points the source to a new url. The next render cycle will use the new url.\n   * @param {string|import(\"../featureloader.js\").FeatureUrlFunction} url Url.\n   * @api\n   */\n  setUrl(url) {\n    assert(this.format_, 7); // `format` must be set when `url` is set\n    this.setLoader(xhr(url, this.format_));\n  }\n\n}\n\n\nexport default VectorSource;\n","/**\n * @module ol/obj\n */\n\n\n/**\n * Polyfill for Object.assign().  Assigns enumerable and own properties from\n * one or more source objects to a target object.\n * See https://developer.mozilla.org/en/docs/Web/JavaScript/Reference/Global_Objects/Object/assign.\n *\n * @param {!Object} target The target object.\n * @param {...Object} var_sources The source object(s).\n * @return {!Object} The modified target object.\n */\nexport const assign = (typeof Object.assign === 'function') ? Object.assign : function(target, var_sources) {\n  if (target === undefined || target === null) {\n    throw new TypeError('Cannot convert undefined or null to object');\n  }\n\n  const output = Object(target);\n  for (let i = 1, ii = arguments.length; i < ii; ++i) {\n    const source = arguments[i];\n    if (source !== undefined && source !== null) {\n      for (const key in source) {\n        if (source.hasOwnProperty(key)) {\n          output[key] = source[key];\n        }\n      }\n    }\n  }\n  return output;\n};\n\n\n/**\n * Removes all properties from an object.\n * @param {Object} object The object to clear.\n */\nexport function clear(object) {\n  for (const property in object) {\n    delete object[property];\n  }\n}\n\n\n/**\n * Polyfill for Object.values().  Get an array of property values from an object.\n * See https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/values\n *\n * @param {!Object<K,V>} object The object from which to get the values.\n * @return {!Array<V>} The property values.\n * @template K,V\n */\nexport const getValues = (typeof Object.values === 'function') ? Object.values : function(object) {\n  const values = [];\n  for (const property in object) {\n    values.push(object[property]);\n  }\n  return values;\n};\n\n\n/**\n * Determine if an object has any properties.\n * @param {Object} object The object to check.\n * @return {boolean} The object is empty.\n */\nexport function isEmpty(object) {\n  let property;\n  for (property in object) {\n    return false;\n  }\n  return !property;\n}\n","/**\n * @module ol/style/Style\n */\n\nimport {assert} from '../asserts.js';\nimport GeometryType from '../geom/GeometryType.js';\nimport CircleStyle from './Circle.js';\nimport Fill from './Fill.js';\nimport Stroke from './Stroke.js';\n\n\n/**\n * A function that takes an {@link module:ol/Feature} and a `{number}`\n * representing the view's resolution. The function should return a\n * {@link module:ol/style/Style} or an array of them. This way e.g. a\n * vector layer can be styled.\n *\n * @typedef {function(import(\"../Feature.js\").FeatureLike, number):(Style|Array<Style>)} StyleFunction\n */\n\n/**\n * A {@link Style}, an array of {@link Style}, or a {@link StyleFunction}.\n * @typedef {Style|Array<Style>|StyleFunction} StyleLike\n */\n\n/**\n * A function that takes an {@link module:ol/Feature} as argument and returns an\n * {@link module:ol/geom/Geometry} that will be rendered and styled for the feature.\n *\n * @typedef {function(import(\"../Feature.js\").FeatureLike):\n *     (import(\"../geom/Geometry.js\").default|import(\"../render/Feature.js\").default|undefined)} GeometryFunction\n */\n\n\n/**\n * Custom renderer function. Takes two arguments:\n *\n * 1. The pixel coordinates of the geometry in GeoJSON notation.\n * 2. The {@link module:ol/render~State} of the layer renderer.\n *\n * @typedef {function((import(\"../coordinate.js\").Coordinate|Array<import(\"../coordinate.js\").Coordinate>|Array<Array<import(\"../coordinate.js\").Coordinate>>),import(\"../render.js\").State): void}\n * RenderFunction\n */\n\n\n/**\n * @typedef {Object} Options\n * @property {string|import(\"../geom/Geometry.js\").default|GeometryFunction} [geometry] Feature property or geometry\n * or function returning a geometry to render for this style.\n * @property {import(\"./Fill.js\").default} [fill] Fill style.\n * @property {import(\"./Image.js\").default} [image] Image style.\n * @property {RenderFunction} [renderer] Custom renderer. When configured, `fill`, `stroke` and `image` will be\n * ignored, and the provided function will be called with each render frame for each geometry.\n * @property {import(\"./Stroke.js\").default} [stroke] Stroke style.\n * @property {import(\"./Text.js\").default} [text] Text style.\n * @property {number} [zIndex] Z index.\n */\n\n/**\n * @classdesc\n * Container for vector feature rendering styles. Any changes made to the style\n * or its children through `set*()` methods will not take effect until the\n * feature or layer that uses the style is re-rendered.\n *\n * ## Feature styles\n *\n * If no style is defined, the following default style is used:\n * ```js\n *  import {Fill, Stroke, Circle, Style} from 'ol/style';\n *\n *  var fill = new Fill({\n *    color: 'rgba(255,255,255,0.4)'\n *  });\n *  var stroke = new Stroke({\n *    color: '#3399CC',\n *    width: 1.25\n *  });\n *  var styles = [\n *    new Style({\n *      image: new Circle({\n *        fill: fill,\n *        stroke: stroke,\n *        radius: 5\n *      }),\n *      fill: fill,\n *      stroke: stroke\n *    })\n *  ];\n * ```\n *\n * A separate editing style has the following defaults:\n * ```js\n *  import {Fill, Stroke, Circle, Style} from 'ol/style';\n *  import GeometryType from 'ol/geom/GeometryType';\n *\n *  var white = [255, 255, 255, 1];\n *  var blue = [0, 153, 255, 1];\n *  var width = 3;\n *  styles[GeometryType.POLYGON] = [\n *    new Style({\n *      fill: new Fill({\n *        color: [255, 255, 255, 0.5]\n *      })\n *    })\n *  ];\n *  styles[GeometryType.MULTI_POLYGON] =\n *      styles[GeometryType.POLYGON];\n *  styles[GeometryType.LINE_STRING] = [\n *    new Style({\n *      stroke: new Stroke({\n *        color: white,\n *        width: width + 2\n *      })\n *    }),\n *    new Style({\n *      stroke: new Stroke({\n *        color: blue,\n *        width: width\n *      })\n *    })\n *  ];\n *  styles[GeometryType.MULTI_LINE_STRING] =\n *      styles[GeometryType.LINE_STRING];\n *  styles[GeometryType.POINT] = [\n *    new Style({\n *      image: new Circle({\n *        radius: width * 2,\n *        fill: new Fill({\n *          color: blue\n *        }),\n *        stroke: new Stroke({\n *          color: white,\n *          width: width / 2\n *        })\n *      }),\n *      zIndex: Infinity\n *    })\n *  ];\n *  styles[GeometryType.MULTI_POINT] =\n *      styles[GeometryType.POINT];\n *  styles[GeometryType.GEOMETRY_COLLECTION] =\n *      styles[GeometryType.POLYGON].concat(\n *          styles[GeometryType.LINE_STRING],\n *          styles[GeometryType.POINT]\n *      );\n * ```\n *\n * @api\n */\nclass Style {\n  /**\n   * @param {Options=} opt_options Style options.\n   */\n  constructor(opt_options) {\n\n    const options = opt_options || {};\n\n    /**\n     * @private\n     * @type {string|import(\"../geom/Geometry.js\").default|GeometryFunction}\n     */\n    this.geometry_ = null;\n\n    /**\n     * @private\n     * @type {!GeometryFunction}\n     */\n    this.geometryFunction_ = defaultGeometryFunction;\n\n    if (options.geometry !== undefined) {\n      this.setGeometry(options.geometry);\n    }\n\n    /**\n     * @private\n     * @type {import(\"./Fill.js\").default}\n     */\n    this.fill_ = options.fill !== undefined ? options.fill : null;\n\n    /**\n       * @private\n       * @type {import(\"./Image.js\").default}\n       */\n    this.image_ = options.image !== undefined ? options.image : null;\n\n    /**\n     * @private\n     * @type {RenderFunction|null}\n     */\n    this.renderer_ = options.renderer !== undefined ? options.renderer : null;\n\n    /**\n     * @private\n     * @type {import(\"./Stroke.js\").default}\n     */\n    this.stroke_ = options.stroke !== undefined ? options.stroke : null;\n\n    /**\n     * @private\n     * @type {import(\"./Text.js\").default}\n     */\n    this.text_ = options.text !== undefined ? options.text : null;\n\n    /**\n     * @private\n     * @type {number|undefined}\n     */\n    this.zIndex_ = options.zIndex;\n\n  }\n\n  /**\n   * Clones the style.\n   * @return {Style} The cloned style.\n   * @api\n   */\n  clone() {\n    let geometry = this.getGeometry();\n    if (geometry && typeof geometry === 'object') {\n      geometry = /** @type {import(\"../geom/Geometry.js\").default} */ (geometry).clone();\n    }\n    return new Style({\n      geometry: geometry,\n      fill: this.getFill() ? this.getFill().clone() : undefined,\n      image: this.getImage() ? this.getImage().clone() : undefined,\n      stroke: this.getStroke() ? this.getStroke().clone() : undefined,\n      text: this.getText() ? this.getText().clone() : undefined,\n      zIndex: this.getZIndex()\n    });\n  }\n\n  /**\n   * Get the custom renderer function that was configured with\n   * {@link #setRenderer} or the `renderer` constructor option.\n   * @return {RenderFunction|null} Custom renderer function.\n   * @api\n   */\n  getRenderer() {\n    return this.renderer_;\n  }\n\n  /**\n   * Sets a custom renderer function for this style. When set, `fill`, `stroke`\n   * and `image` options of the style will be ignored.\n   * @param {RenderFunction|null} renderer Custom renderer function.\n   * @api\n   */\n  setRenderer(renderer) {\n    this.renderer_ = renderer;\n  }\n\n  /**\n   * Get the geometry to be rendered.\n   * @return {string|import(\"../geom/Geometry.js\").default|GeometryFunction}\n   * Feature property or geometry or function that returns the geometry that will\n   * be rendered with this style.\n   * @api\n   */\n  getGeometry() {\n    return this.geometry_;\n  }\n\n  /**\n   * Get the function used to generate a geometry for rendering.\n   * @return {!GeometryFunction} Function that is called with a feature\n   * and returns the geometry to render instead of the feature's geometry.\n   * @api\n   */\n  getGeometryFunction() {\n    return this.geometryFunction_;\n  }\n\n  /**\n   * Get the fill style.\n   * @return {import(\"./Fill.js\").default} Fill style.\n   * @api\n   */\n  getFill() {\n    return this.fill_;\n  }\n\n  /**\n   * Set the fill style.\n   * @param {import(\"./Fill.js\").default} fill Fill style.\n   * @api\n   */\n  setFill(fill) {\n    this.fill_ = fill;\n  }\n\n  /**\n   * Get the image style.\n   * @return {import(\"./Image.js\").default} Image style.\n   * @api\n   */\n  getImage() {\n    return this.image_;\n  }\n\n  /**\n   * Set the image style.\n   * @param {import(\"./Image.js\").default} image Image style.\n   * @api\n   */\n  setImage(image) {\n    this.image_ = image;\n  }\n\n  /**\n   * Get the stroke style.\n   * @return {import(\"./Stroke.js\").default} Stroke style.\n   * @api\n   */\n  getStroke() {\n    return this.stroke_;\n  }\n\n  /**\n   * Set the stroke style.\n   * @param {import(\"./Stroke.js\").default} stroke Stroke style.\n   * @api\n   */\n  setStroke(stroke) {\n    this.stroke_ = stroke;\n  }\n\n  /**\n   * Get the text style.\n   * @return {import(\"./Text.js\").default} Text style.\n   * @api\n   */\n  getText() {\n    return this.text_;\n  }\n\n  /**\n   * Set the text style.\n   * @param {import(\"./Text.js\").default} text Text style.\n   * @api\n   */\n  setText(text) {\n    this.text_ = text;\n  }\n\n  /**\n   * Get the z-index for the style.\n   * @return {number|undefined} ZIndex.\n   * @api\n   */\n  getZIndex() {\n    return this.zIndex_;\n  }\n\n  /**\n   * Set a geometry that is rendered instead of the feature's geometry.\n   *\n   * @param {string|import(\"../geom/Geometry.js\").default|GeometryFunction} geometry\n   *     Feature property or geometry or function returning a geometry to render\n   *     for this style.\n   * @api\n   */\n  setGeometry(geometry) {\n    if (typeof geometry === 'function') {\n      this.geometryFunction_ = geometry;\n    } else if (typeof geometry === 'string') {\n      this.geometryFunction_ = function(feature) {\n        return (\n          /** @type {import(\"../geom/Geometry.js\").default} */ (feature.get(geometry))\n        );\n      };\n    } else if (!geometry) {\n      this.geometryFunction_ = defaultGeometryFunction;\n    } else if (geometry !== undefined) {\n      this.geometryFunction_ = function() {\n        return (\n          /** @type {import(\"../geom/Geometry.js\").default} */ (geometry)\n        );\n      };\n    }\n    this.geometry_ = geometry;\n  }\n\n  /**\n   * Set the z-index.\n   *\n   * @param {number|undefined} zIndex ZIndex.\n   * @api\n   */\n  setZIndex(zIndex) {\n    this.zIndex_ = zIndex;\n  }\n}\n\n\n/**\n * Convert the provided object into a style function.  Functions passed through\n * unchanged.  Arrays of Style or single style objects wrapped in a\n * new style function.\n * @param {StyleFunction|Array<Style>|Style} obj\n *     A style function, a single style, or an array of styles.\n * @return {StyleFunction} A style function.\n */\nexport function toFunction(obj) {\n  let styleFunction;\n\n  if (typeof obj === 'function') {\n    styleFunction = obj;\n  } else {\n    /**\n     * @type {Array<Style>}\n     */\n    let styles;\n    if (Array.isArray(obj)) {\n      styles = obj;\n    } else {\n      assert(typeof /** @type {?} */ (obj).getZIndex === 'function',\n        41); // Expected an `Style` or an array of `Style`\n      const style = /** @type {Style} */ (obj);\n      styles = [style];\n    }\n    styleFunction = function() {\n      return styles;\n    };\n  }\n  return styleFunction;\n}\n\n\n/**\n * @type {Array<Style>}\n */\nlet defaultStyles = null;\n\n\n/**\n * @param {import(\"../Feature.js\").FeatureLike} feature Feature.\n * @param {number} resolution Resolution.\n * @return {Array<Style>} Style.\n */\nexport function createDefaultStyle(feature, resolution) {\n  // We don't use an immediately-invoked function\n  // and a closure so we don't get an error at script evaluation time in\n  // browsers that do not support Canvas. (import(\"./Circle.js\").CircleStyle does\n  // canvas.getContext('2d') at construction time, which will cause an.error\n  // in such browsers.)\n  if (!defaultStyles) {\n    const fill = new Fill({\n      color: 'rgba(255,255,255,0.4)'\n    });\n    const stroke = new Stroke({\n      color: '#3399CC',\n      width: 1.25\n    });\n    defaultStyles = [\n      new Style({\n        image: new CircleStyle({\n          fill: fill,\n          stroke: stroke,\n          radius: 5\n        }),\n        fill: fill,\n        stroke: stroke\n      })\n    ];\n  }\n  return defaultStyles;\n}\n\n\n/**\n * Default styles for editing features.\n * @return {Object<import(\"../geom/GeometryType.js\").default, Array<Style>>} Styles\n */\nexport function createEditingStyle() {\n  /** @type {Object<import(\"../geom/GeometryType.js\").default, Array<Style>>} */\n  const styles = {};\n  const white = [255, 255, 255, 1];\n  const blue = [0, 153, 255, 1];\n  const width = 3;\n  styles[GeometryType.POLYGON] = [\n    new Style({\n      fill: new Fill({\n        color: [255, 255, 255, 0.5]\n      })\n    })\n  ];\n  styles[GeometryType.MULTI_POLYGON] =\n      styles[GeometryType.POLYGON];\n\n  styles[GeometryType.LINE_STRING] = [\n    new Style({\n      stroke: new Stroke({\n        color: white,\n        width: width + 2\n      })\n    }),\n    new Style({\n      stroke: new Stroke({\n        color: blue,\n        width: width\n      })\n    })\n  ];\n  styles[GeometryType.MULTI_LINE_STRING] =\n      styles[GeometryType.LINE_STRING];\n\n  styles[GeometryType.CIRCLE] =\n      styles[GeometryType.POLYGON].concat(\n        styles[GeometryType.LINE_STRING]\n      );\n\n\n  styles[GeometryType.POINT] = [\n    new Style({\n      image: new CircleStyle({\n        radius: width * 2,\n        fill: new Fill({\n          color: blue\n        }),\n        stroke: new Stroke({\n          color: white,\n          width: width / 2\n        })\n      }),\n      zIndex: Infinity\n    })\n  ];\n  styles[GeometryType.MULTI_POINT] =\n      styles[GeometryType.POINT];\n\n  styles[GeometryType.GEOMETRY_COLLECTION] =\n      styles[GeometryType.POLYGON].concat(\n        styles[GeometryType.LINE_STRING],\n        styles[GeometryType.POINT]\n      );\n\n  return styles;\n}\n\n\n/**\n * Function that is called with a feature and returns its default geometry.\n * @param {import(\"../Feature.js\").FeatureLike} feature Feature to get the geometry for.\n * @return {import(\"../geom/Geometry.js\").default|import(\"../render/Feature.js\").default|undefined} Geometry to render.\n */\nfunction defaultGeometryFunction(feature) {\n  return feature.getGeometry();\n}\n\nexport default Style;\n","/**\n * @module ol/events/EventType\n */\n\n/**\n * @enum {string}\n * @const\n */\nexport default {\n  /**\n   * Generic change event. Triggered when the revision counter is increased.\n   * @event module:ol/events/Event~Event#change\n   * @api\n   */\n  CHANGE: 'change',\n\n  /**\n   * Generic error event. Triggered when an error occurs.\n   * @event module:ol/events/Event~Event#error\n   * @api\n   */\n  ERROR: 'error',\n\n  CLEAR: 'clear',\n  CONTEXTMENU: 'contextmenu',\n  CLICK: 'click',\n  DBLCLICK: 'dblclick',\n  DRAGENTER: 'dragenter',\n  DRAGOVER: 'dragover',\n  DROP: 'drop',\n  KEYDOWN: 'keydown',\n  KEYPRESS: 'keypress',\n  LOAD: 'load',\n  RESIZE: 'resize',\n  WHEEL: 'wheel'\n};\n","/**\n * @module ol/array\n */\n\n\n/**\n * Performs a binary search on the provided sorted list and returns the index of the item if found. If it can't be found it'll return -1.\n * https://github.com/darkskyapp/binary-search\n *\n * @param {Array<*>} haystack Items to search through.\n * @param {*} needle The item to look for.\n * @param {Function=} opt_comparator Comparator function.\n * @return {number} The index of the item if found, -1 if not.\n */\nexport function binarySearch(haystack, needle, opt_comparator) {\n  let mid, cmp;\n  const comparator = opt_comparator || numberSafeCompareFunction;\n  let low = 0;\n  let high = haystack.length;\n  let found = false;\n\n  while (low < high) {\n    /* Note that \"(low + high) >>> 1\" may overflow, and results in a typecast\n     * to double (which gives the wrong results). */\n    mid = low + (high - low >> 1);\n    cmp = +comparator(haystack[mid], needle);\n\n    if (cmp < 0.0) { /* Too low. */\n      low = mid + 1;\n\n    } else { /* Key found or too high */\n      high = mid;\n      found = !cmp;\n    }\n  }\n\n  /* Key not found. */\n  return found ? low : ~low;\n}\n\n\n/**\n * Compare function for array sort that is safe for numbers.\n * @param {*} a The first object to be compared.\n * @param {*} b The second object to be compared.\n * @return {number} A negative number, zero, or a positive number as the first\n *     argument is less than, equal to, or greater than the second.\n */\nexport function numberSafeCompareFunction(a, b) {\n  return a > b ? 1 : a < b ? -1 : 0;\n}\n\n\n/**\n * Whether the array contains the given object.\n * @param {Array<*>} arr The array to test for the presence of the element.\n * @param {*} obj The object for which to test.\n * @return {boolean} The object is in the array.\n */\nexport function includes(arr, obj) {\n  return arr.indexOf(obj) >= 0;\n}\n\n\n/**\n * @param {Array<number>} arr Array.\n * @param {number} target Target.\n * @param {number} direction 0 means return the nearest, > 0\n *    means return the largest nearest, < 0 means return the\n *    smallest nearest.\n * @return {number} Index.\n */\nexport function linearFindNearest(arr, target, direction) {\n  const n = arr.length;\n  if (arr[0] <= target) {\n    return 0;\n  } else if (target <= arr[n - 1]) {\n    return n - 1;\n  } else {\n    let i;\n    if (direction > 0) {\n      for (i = 1; i < n; ++i) {\n        if (arr[i] < target) {\n          return i - 1;\n        }\n      }\n    } else if (direction < 0) {\n      for (i = 1; i < n; ++i) {\n        if (arr[i] <= target) {\n          return i;\n        }\n      }\n    } else {\n      for (i = 1; i < n; ++i) {\n        if (arr[i] == target) {\n          return i;\n        } else if (arr[i] < target) {\n          if (arr[i - 1] - target < target - arr[i]) {\n            return i - 1;\n          } else {\n            return i;\n          }\n        }\n      }\n    }\n    return n - 1;\n  }\n}\n\n\n/**\n * @param {Array<*>} arr Array.\n * @param {number} begin Begin index.\n * @param {number} end End index.\n */\nexport function reverseSubArray(arr, begin, end) {\n  while (begin < end) {\n    const tmp = arr[begin];\n    arr[begin] = arr[end];\n    arr[end] = tmp;\n    ++begin;\n    --end;\n  }\n}\n\n\n/**\n * @param {Array<VALUE>} arr The array to modify.\n * @param {!Array<VALUE>|VALUE} data The elements or arrays of elements to add to arr.\n * @template VALUE\n */\nexport function extend(arr, data) {\n  const extension = Array.isArray(data) ? data : [data];\n  const length = extension.length;\n  for (let i = 0; i < length; i++) {\n    arr[arr.length] = extension[i];\n  }\n}\n\n\n/**\n * @param {Array<VALUE>} arr The array to modify.\n * @param {VALUE} obj The element to remove.\n * @template VALUE\n * @return {boolean} If the element was removed.\n */\nexport function remove(arr, obj) {\n  const i = arr.indexOf(obj);\n  const found = i > -1;\n  if (found) {\n    arr.splice(i, 1);\n  }\n  return found;\n}\n\n\n/**\n * @param {Array<VALUE>} arr The array to search in.\n * @param {function(VALUE, number, ?) : boolean} func The function to compare.\n * @template VALUE\n * @return {VALUE|null} The element found or null.\n */\nexport function find(arr, func) {\n  const length = arr.length >>> 0;\n  let value;\n\n  for (let i = 0; i < length; i++) {\n    value = arr[i];\n    if (func(value, i, arr)) {\n      return value;\n    }\n  }\n  return null;\n}\n\n\n/**\n * @param {Array|Uint8ClampedArray} arr1 The first array to compare.\n * @param {Array|Uint8ClampedArray} arr2 The second array to compare.\n * @return {boolean} Whether the two arrays are equal.\n */\nexport function equals(arr1, arr2) {\n  const len1 = arr1.length;\n  if (len1 !== arr2.length) {\n    return false;\n  }\n  for (let i = 0; i < len1; i++) {\n    if (arr1[i] !== arr2[i]) {\n      return false;\n    }\n  }\n  return true;\n}\n\n\n/**\n * Sort the passed array such that the relative order of equal elements is preverved.\n * See https://en.wikipedia.org/wiki/Sorting_algorithm#Stability for details.\n * @param {Array<*>} arr The array to sort (modifies original).\n * @param {!function(*, *): number} compareFnc Comparison function.\n * @api\n */\nexport function stableSort(arr, compareFnc) {\n  const length = arr.length;\n  const tmp = Array(arr.length);\n  let i;\n  for (i = 0; i < length; i++) {\n    tmp[i] = {index: i, value: arr[i]};\n  }\n  tmp.sort(function(a, b) {\n    return compareFnc(a.value, b.value) || a.index - b.index;\n  });\n  for (i = 0; i < arr.length; i++) {\n    arr[i] = tmp[i].value;\n  }\n}\n\n\n/**\n * @param {Array<*>} arr The array to search in.\n * @param {Function} func Comparison function.\n * @return {number} Return index.\n */\nexport function findIndex(arr, func) {\n  let index;\n  const found = !arr.every(function(el, idx) {\n    index = idx;\n    return !func(el, idx, arr);\n  });\n  return found ? index : -1;\n}\n\n\n/**\n * @param {Array<*>} arr The array to test.\n * @param {Function=} opt_func Comparison function.\n * @param {boolean=} opt_strict Strictly sorted (default false).\n * @return {boolean} Return index.\n */\nexport function isSorted(arr, opt_func, opt_strict) {\n  const compare = opt_func || numberSafeCompareFunction;\n  return arr.every(function(currentVal, index) {\n    if (index === 0) {\n      return true;\n    }\n    const res = compare(arr[index - 1], currentVal);\n    return !(res > 0 || opt_strict && res === 0);\n  });\n}\n","/**\n * @module ol/math\n */\n\n/**\n * Takes a number and clamps it to within the provided bounds.\n * @param {number} value The input number.\n * @param {number} min The minimum value to return.\n * @param {number} max The maximum value to return.\n * @return {number} The input number if it is within bounds, or the nearest\n *     number within the bounds.\n */\nexport function clamp(value, min, max) {\n  return Math.min(Math.max(value, min), max);\n}\n\n\n/**\n * Return the hyperbolic cosine of a given number. The method will use the\n * native `Math.cosh` function if it is available, otherwise the hyperbolic\n * cosine will be calculated via the reference implementation of the Mozilla\n * developer network.\n *\n * @param {number} x X.\n * @return {number} Hyperbolic cosine of x.\n */\nexport const cosh = (function() {\n  // Wrapped in a iife, to save the overhead of checking for the native\n  // implementation on every invocation.\n  let cosh;\n  if ('cosh' in Math) {\n    // The environment supports the native Math.cosh function, use it…\n    cosh = Math.cosh;\n  } else {\n    // … else, use the reference implementation of MDN:\n    cosh = function(x) {\n      const y = /** @type {Math} */ (Math).exp(x);\n      return (y + 1 / y) / 2;\n    };\n  }\n  return cosh;\n}());\n\n\n/**\n * Returns the square of the closest distance between the point (x, y) and the\n * line segment (x1, y1) to (x2, y2).\n * @param {number} x X.\n * @param {number} y Y.\n * @param {number} x1 X1.\n * @param {number} y1 Y1.\n * @param {number} x2 X2.\n * @param {number} y2 Y2.\n * @return {number} Squared distance.\n */\nexport function squaredSegmentDistance(x, y, x1, y1, x2, y2) {\n  const dx = x2 - x1;\n  const dy = y2 - y1;\n  if (dx !== 0 || dy !== 0) {\n    const t = ((x - x1) * dx + (y - y1) * dy) / (dx * dx + dy * dy);\n    if (t > 1) {\n      x1 = x2;\n      y1 = y2;\n    } else if (t > 0) {\n      x1 += dx * t;\n      y1 += dy * t;\n    }\n  }\n  return squaredDistance(x, y, x1, y1);\n}\n\n\n/**\n * Returns the square of the distance between the points (x1, y1) and (x2, y2).\n * @param {number} x1 X1.\n * @param {number} y1 Y1.\n * @param {number} x2 X2.\n * @param {number} y2 Y2.\n * @return {number} Squared distance.\n */\nexport function squaredDistance(x1, y1, x2, y2) {\n  const dx = x2 - x1;\n  const dy = y2 - y1;\n  return dx * dx + dy * dy;\n}\n\n\n/**\n * Solves system of linear equations using Gaussian elimination method.\n *\n * @param {Array<Array<number>>} mat Augmented matrix (n x n + 1 column)\n *                                     in row-major order.\n * @return {Array<number>} The resulting vector.\n */\nexport function solveLinearSystem(mat) {\n  const n = mat.length;\n\n  for (let i = 0; i < n; i++) {\n    // Find max in the i-th column (ignoring i - 1 first rows)\n    let maxRow = i;\n    let maxEl = Math.abs(mat[i][i]);\n    for (let r = i + 1; r < n; r++) {\n      const absValue = Math.abs(mat[r][i]);\n      if (absValue > maxEl) {\n        maxEl = absValue;\n        maxRow = r;\n      }\n    }\n\n    if (maxEl === 0) {\n      return null; // matrix is singular\n    }\n\n    // Swap max row with i-th (current) row\n    const tmp = mat[maxRow];\n    mat[maxRow] = mat[i];\n    mat[i] = tmp;\n\n    // Subtract the i-th row to make all the remaining rows 0 in the i-th column\n    for (let j = i + 1; j < n; j++) {\n      const coef = -mat[j][i] / mat[i][i];\n      for (let k = i; k < n + 1; k++) {\n        if (i == k) {\n          mat[j][k] = 0;\n        } else {\n          mat[j][k] += coef * mat[i][k];\n        }\n      }\n    }\n  }\n\n  // Solve Ax=b for upper triangular matrix A (mat)\n  const x = new Array(n);\n  for (let l = n - 1; l >= 0; l--) {\n    x[l] = mat[l][n] / mat[l][l];\n    for (let m = l - 1; m >= 0; m--) {\n      mat[m][n] -= mat[m][l] * x[l];\n    }\n  }\n  return x;\n}\n\n\n/**\n * Converts radians to to degrees.\n *\n * @param {number} angleInRadians Angle in radians.\n * @return {number} Angle in degrees.\n */\nexport function toDegrees(angleInRadians) {\n  return angleInRadians * 180 / Math.PI;\n}\n\n\n/**\n * Converts degrees to radians.\n *\n * @param {number} angleInDegrees Angle in degrees.\n * @return {number} Angle in radians.\n */\nexport function toRadians(angleInDegrees) {\n  return angleInDegrees * Math.PI / 180;\n}\n\n/**\n * Returns the modulo of a / b, depending on the sign of b.\n *\n * @param {number} a Dividend.\n * @param {number} b Divisor.\n * @return {number} Modulo.\n */\nexport function modulo(a, b) {\n  const r = a % b;\n  return r * b < 0 ? r + b : r;\n}\n\n/**\n * Calculates the linearly interpolated value of x between a and b.\n *\n * @param {number} a Number\n * @param {number} b Number\n * @param {number} x Value to be interpolated.\n * @return {number} Interpolated value.\n */\nexport function lerp(a, b, x) {\n  return a + x * (b - a);\n}\n","/**\n * @module ol/events\n */\nimport {clear} from './obj.js';\n\n\n/**\n * Key to use with {@link module:ol/Observable~Observable#unByKey}.\n * @typedef {Object} EventsKey\n * @property {ListenerFunction} listener\n * @property {import(\"./events/Target.js\").EventTargetLike} target\n * @property {string} type\n * @api\n */\n\n\n/**\n * Listener function. This function is called with an event object as argument.\n * When the function returns `false`, event propagation will stop.\n *\n * @typedef {function((Event|import(\"./events/Event.js\").default)): (void|boolean)} ListenerFunction\n * @api\n */\n\n\n/**\n * Registers an event listener on an event target. Inspired by\n * https://google.github.io/closure-library/api/source/closure/goog/events/events.js.src.html\n *\n * This function efficiently binds a `listener` to a `this` object, and returns\n * a key for use with {@link module:ol/events~unlistenByKey}.\n *\n * @param {import(\"./events/Target.js\").EventTargetLike} target Event target.\n * @param {string} type Event type.\n * @param {ListenerFunction} listener Listener.\n * @param {Object=} opt_this Object referenced by the `this` keyword in the\n *     listener. Default is the `target`.\n * @param {boolean=} opt_once If true, add the listener as one-off listener.\n * @return {EventsKey} Unique key for the listener.\n */\nexport function listen(target, type, listener, opt_this, opt_once) {\n  if (opt_this && opt_this !== target) {\n    listener = listener.bind(opt_this);\n  }\n  if (opt_once) {\n    const originalListener = listener;\n    listener = function() {\n      target.removeEventListener(type, listener);\n      originalListener.apply(this, arguments);\n    };\n  }\n  const eventsKey = {\n    target: target,\n    type: type,\n    listener: listener\n  };\n  target.addEventListener(type, listener);\n  return eventsKey;\n}\n\n\n/**\n * Registers a one-off event listener on an event target. Inspired by\n * https://google.github.io/closure-library/api/source/closure/goog/events/events.js.src.html\n *\n * This function efficiently binds a `listener` as self-unregistering listener\n * to a `this` object, and returns a key for use with\n * {@link module:ol/events~unlistenByKey} in case the listener needs to be\n * unregistered before it is called.\n *\n * When {@link module:ol/events~listen} is called with the same arguments after this\n * function, the self-unregistering listener will be turned into a permanent\n * listener.\n *\n * @param {import(\"./events/Target.js\").EventTargetLike} target Event target.\n * @param {string} type Event type.\n * @param {ListenerFunction} listener Listener.\n * @param {Object=} opt_this Object referenced by the `this` keyword in the\n *     listener. Default is the `target`.\n * @return {EventsKey} Key for unlistenByKey.\n */\nexport function listenOnce(target, type, listener, opt_this) {\n  return listen(target, type, listener, opt_this, true);\n}\n\n\n/**\n * Unregisters event listeners on an event target. Inspired by\n * https://google.github.io/closure-library/api/source/closure/goog/events/events.js.src.html\n *\n * The argument passed to this function is the key returned from\n * {@link module:ol/events~listen} or {@link module:ol/events~listenOnce}.\n *\n * @param {EventsKey} key The key.\n */\nexport function unlistenByKey(key) {\n  if (key && key.target) {\n    key.target.removeEventListener(key.type, key.listener);\n    clear(key);\n  }\n}\n","/**\n * @module ol/TileState\n */\n\n/**\n * @enum {number}\n */\nexport default {\n  IDLE: 0,\n  LOADING: 1,\n  LOADED: 2,\n  /**\n   * Indicates that tile loading failed\n   * @type {number}\n   */\n  ERROR: 3,\n  EMPTY: 4,\n  ABORT: 5\n};\n","/**\n * @module ol/transform\n */\nimport {assert} from './asserts.js';\n\n\n/**\n * An array representing an affine 2d transformation for use with\n * {@link module:ol/transform} functions. The array has 6 elements.\n * @typedef {!Array<number>} Transform\n */\n\n\n/**\n * Collection of affine 2d transformation functions. The functions work on an\n * array of 6 elements. The element order is compatible with the [SVGMatrix\n * interface](https://developer.mozilla.org/en-US/docs/Web/API/SVGMatrix) and is\n * a subset (elements a to f) of a 3×3 matrix:\n * ```\n * [ a c e ]\n * [ b d f ]\n * [ 0 0 1 ]\n * ```\n */\n\n\n/**\n * @private\n * @type {Transform}\n */\nconst tmp_ = new Array(6);\n\n\n/**\n * Create an identity transform.\n * @return {!Transform} Identity transform.\n */\nexport function create() {\n  return [1, 0, 0, 1, 0, 0];\n}\n\n\n/**\n * Resets the given transform to an identity transform.\n * @param {!Transform} transform Transform.\n * @return {!Transform} Transform.\n */\nexport function reset(transform) {\n  return set(transform, 1, 0, 0, 1, 0, 0);\n}\n\n\n/**\n * Multiply the underlying matrices of two transforms and return the result in\n * the first transform.\n * @param {!Transform} transform1 Transform parameters of matrix 1.\n * @param {!Transform} transform2 Transform parameters of matrix 2.\n * @return {!Transform} transform1 multiplied with transform2.\n */\nexport function multiply(transform1, transform2) {\n  const a1 = transform1[0];\n  const b1 = transform1[1];\n  const c1 = transform1[2];\n  const d1 = transform1[3];\n  const e1 = transform1[4];\n  const f1 = transform1[5];\n  const a2 = transform2[0];\n  const b2 = transform2[1];\n  const c2 = transform2[2];\n  const d2 = transform2[3];\n  const e2 = transform2[4];\n  const f2 = transform2[5];\n\n  transform1[0] = a1 * a2 + c1 * b2;\n  transform1[1] = b1 * a2 + d1 * b2;\n  transform1[2] = a1 * c2 + c1 * d2;\n  transform1[3] = b1 * c2 + d1 * d2;\n  transform1[4] = a1 * e2 + c1 * f2 + e1;\n  transform1[5] = b1 * e2 + d1 * f2 + f1;\n\n  return transform1;\n}\n\n/**\n * Set the transform components a-f on a given transform.\n * @param {!Transform} transform Transform.\n * @param {number} a The a component of the transform.\n * @param {number} b The b component of the transform.\n * @param {number} c The c component of the transform.\n * @param {number} d The d component of the transform.\n * @param {number} e The e component of the transform.\n * @param {number} f The f component of the transform.\n * @return {!Transform} Matrix with transform applied.\n */\nexport function set(transform, a, b, c, d, e, f) {\n  transform[0] = a;\n  transform[1] = b;\n  transform[2] = c;\n  transform[3] = d;\n  transform[4] = e;\n  transform[5] = f;\n  return transform;\n}\n\n\n/**\n * Set transform on one matrix from another matrix.\n * @param {!Transform} transform1 Matrix to set transform to.\n * @param {!Transform} transform2 Matrix to set transform from.\n * @return {!Transform} transform1 with transform from transform2 applied.\n */\nexport function setFromArray(transform1, transform2) {\n  transform1[0] = transform2[0];\n  transform1[1] = transform2[1];\n  transform1[2] = transform2[2];\n  transform1[3] = transform2[3];\n  transform1[4] = transform2[4];\n  transform1[5] = transform2[5];\n  return transform1;\n}\n\n\n/**\n * Transforms the given coordinate with the given transform returning the\n * resulting, transformed coordinate. The coordinate will be modified in-place.\n *\n * @param {Transform} transform The transformation.\n * @param {import(\"./coordinate.js\").Coordinate|import(\"./pixel.js\").Pixel} coordinate The coordinate to transform.\n * @return {import(\"./coordinate.js\").Coordinate|import(\"./pixel.js\").Pixel} return coordinate so that operations can be\n *     chained together.\n */\nexport function apply(transform, coordinate) {\n  const x = coordinate[0];\n  const y = coordinate[1];\n  coordinate[0] = transform[0] * x + transform[2] * y + transform[4];\n  coordinate[1] = transform[1] * x + transform[3] * y + transform[5];\n  return coordinate;\n}\n\n\n/**\n * Applies rotation to the given transform.\n * @param {!Transform} transform Transform.\n * @param {number} angle Angle in radians.\n * @return {!Transform} The rotated transform.\n */\nexport function rotate(transform, angle) {\n  const cos = Math.cos(angle);\n  const sin = Math.sin(angle);\n  return multiply(transform, set(tmp_, cos, sin, -sin, cos, 0, 0));\n}\n\n\n/**\n * Applies scale to a given transform.\n * @param {!Transform} transform Transform.\n * @param {number} x Scale factor x.\n * @param {number} y Scale factor y.\n * @return {!Transform} The scaled transform.\n */\nexport function scale(transform, x, y) {\n  return multiply(transform, set(tmp_, x, 0, 0, y, 0, 0));\n}\n\n/**\n * Creates a scale transform.\n * @param {!Transform} target Transform to overwrite.\n * @param {number} x Scale factor x.\n * @param {number} y Scale factor y.\n * @return {!Transform} The scale transform.\n */\nexport function makeScale(target, x, y) {\n  return set(target, x, 0, 0, y, 0, 0);\n}\n\n/**\n * Applies translation to the given transform.\n * @param {!Transform} transform Transform.\n * @param {number} dx Translation x.\n * @param {number} dy Translation y.\n * @return {!Transform} The translated transform.\n */\nexport function translate(transform, dx, dy) {\n  return multiply(transform, set(tmp_, 1, 0, 0, 1, dx, dy));\n}\n\n\n/**\n * Creates a composite transform given an initial translation, scale, rotation, and\n * final translation (in that order only, not commutative).\n * @param {!Transform} transform The transform (will be modified in place).\n * @param {number} dx1 Initial translation x.\n * @param {number} dy1 Initial translation y.\n * @param {number} sx Scale factor x.\n * @param {number} sy Scale factor y.\n * @param {number} angle Rotation (in counter-clockwise radians).\n * @param {number} dx2 Final translation x.\n * @param {number} dy2 Final translation y.\n * @return {!Transform} The composite transform.\n */\nexport function compose(transform, dx1, dy1, sx, sy, angle, dx2, dy2) {\n  const sin = Math.sin(angle);\n  const cos = Math.cos(angle);\n  transform[0] = sx * cos;\n  transform[1] = sy * sin;\n  transform[2] = -sx * sin;\n  transform[3] = sy * cos;\n  transform[4] = dx2 * sx * cos - dy2 * sx * sin + dx1;\n  transform[5] = dx2 * sy * sin + dy2 * sy * cos + dy1;\n  return transform;\n}\n\n\n/**\n * Invert the given transform.\n * @param {!Transform} source The source transform to invert.\n * @return {!Transform} The inverted (source) transform.\n */\nexport function invert(source) {\n  return makeInverse(source, source);\n}\n\n/**\n * Invert the given transform.\n * @param {!Transform} target Transform to be set as the inverse of\n *     the source transform.\n * @param {!Transform} source The source transform to invert.\n * @return {!Transform} The inverted (target) transform.\n */\nexport function makeInverse(target, source) {\n  const det = determinant(source);\n  assert(det !== 0, 32); // Transformation matrix cannot be inverted\n\n  const a = source[0];\n  const b = source[1];\n  const c = source[2];\n  const d = source[3];\n  const e = source[4];\n  const f = source[5];\n\n  target[0] = d / det;\n  target[1] = -b / det;\n  target[2] = -c / det;\n  target[3] = a / det;\n  target[4] = (c * f - d * e) / det;\n  target[5] = -(a * f - b * e) / det;\n\n  return target;\n}\n\n/**\n * Returns the determinant of the given matrix.\n * @param {!Transform} mat Matrix.\n * @return {number} Determinant.\n */\nexport function determinant(mat) {\n  return mat[0] * mat[3] - mat[1] * mat[2];\n}\n\n/**\n * A string version of the transform.  This can be used\n * for CSS transforms.\n * @param {!Transform} mat Matrix.\n * @return {string} The transform as a string.\n */\nexport function toString(mat) {\n  return 'matrix(' + mat.join(', ') + ')';\n}\n","/**\n * @module ol/style/Stroke\n */\n\n\n/**\n * @typedef {Object} Options\n * @property {import(\"../color.js\").Color|import(\"../colorlike.js\").ColorLike} [color] A color, gradient or pattern.\n * See {@link module:ol/color~Color} and {@link module:ol/colorlike~ColorLike} for possible formats.\n * Default null; if null, the Canvas/renderer default black will be used.\n * @property {CanvasLineCap} [lineCap='round'] Line cap style: `butt`, `round`, or `square`.\n * @property {CanvasLineJoin} [lineJoin='round'] Line join style: `bevel`, `round`, or `miter`.\n * @property {Array<number>} [lineDash] Line dash pattern. Default is `undefined` (no dash).\n * Please note that Internet Explorer 10 and lower do not support the `setLineDash` method on\n * the `CanvasRenderingContext2D` and therefore this option will have no visual effect in these browsers.\n * @property {number} [lineDashOffset=0] Line dash offset.\n * @property {number} [miterLimit=10] Miter limit.\n * @property {number} [width] Width.\n */\n\n\n/**\n * @classdesc\n * Set stroke style for vector features.\n * Note that the defaults given are the Canvas defaults, which will be used if\n * option is not defined. The `get` functions return whatever was entered in\n * the options; they will not return the default.\n * @api\n */\nclass Stroke {\n  /**\n   * @param {Options=} opt_options Options.\n   */\n  constructor(opt_options) {\n\n    const options = opt_options || {};\n\n    /**\n     * @private\n     * @type {import(\"../color.js\").Color|import(\"../colorlike.js\").ColorLike}\n     */\n    this.color_ = options.color !== undefined ? options.color : null;\n\n    /**\n     * @private\n     * @type {CanvasLineCap|undefined}\n     */\n    this.lineCap_ = options.lineCap;\n\n    /**\n     * @private\n     * @type {Array<number>}\n     */\n    this.lineDash_ = options.lineDash !== undefined ? options.lineDash : null;\n\n    /**\n     * @private\n     * @type {number|undefined}\n     */\n    this.lineDashOffset_ = options.lineDashOffset;\n\n    /**\n     * @private\n     * @type {CanvasLineJoin|undefined}\n     */\n    this.lineJoin_ = options.lineJoin;\n\n    /**\n     * @private\n     * @type {number|undefined}\n     */\n    this.miterLimit_ = options.miterLimit;\n\n    /**\n     * @private\n     * @type {number|undefined}\n     */\n    this.width_ = options.width;\n  }\n\n  /**\n   * Clones the style.\n   * @return {Stroke} The cloned style.\n   * @api\n   */\n  clone() {\n    const color = this.getColor();\n    return new Stroke({\n      color: Array.isArray(color) ? color.slice() : color || undefined,\n      lineCap: this.getLineCap(),\n      lineDash: this.getLineDash() ? this.getLineDash().slice() : undefined,\n      lineDashOffset: this.getLineDashOffset(),\n      lineJoin: this.getLineJoin(),\n      miterLimit: this.getMiterLimit(),\n      width: this.getWidth()\n    });\n  }\n\n  /**\n   * Get the stroke color.\n   * @return {import(\"../color.js\").Color|import(\"../colorlike.js\").ColorLike} Color.\n   * @api\n   */\n  getColor() {\n    return this.color_;\n  }\n\n  /**\n   * Get the line cap type for the stroke.\n   * @return {CanvasLineCap|undefined} Line cap.\n   * @api\n   */\n  getLineCap() {\n    return this.lineCap_;\n  }\n\n  /**\n   * Get the line dash style for the stroke.\n   * @return {Array<number>} Line dash.\n   * @api\n   */\n  getLineDash() {\n    return this.lineDash_;\n  }\n\n  /**\n   * Get the line dash offset for the stroke.\n   * @return {number|undefined} Line dash offset.\n   * @api\n   */\n  getLineDashOffset() {\n    return this.lineDashOffset_;\n  }\n\n  /**\n   * Get the line join type for the stroke.\n   * @return {CanvasLineJoin|undefined} Line join.\n   * @api\n   */\n  getLineJoin() {\n    return this.lineJoin_;\n  }\n\n  /**\n   * Get the miter limit for the stroke.\n   * @return {number|undefined} Miter limit.\n   * @api\n   */\n  getMiterLimit() {\n    return this.miterLimit_;\n  }\n\n  /**\n   * Get the stroke width.\n   * @return {number|undefined} Width.\n   * @api\n   */\n  getWidth() {\n    return this.width_;\n  }\n\n  /**\n   * Set the color.\n   *\n   * @param {import(\"../color.js\").Color|import(\"../colorlike.js\").ColorLike} color Color.\n   * @api\n   */\n  setColor(color) {\n    this.color_ = color;\n  }\n\n  /**\n   * Set the line cap.\n   *\n   * @param {CanvasLineCap|undefined} lineCap Line cap.\n   * @api\n   */\n  setLineCap(lineCap) {\n    this.lineCap_ = lineCap;\n  }\n\n  /**\n   * Set the line dash.\n   *\n   * Please note that Internet Explorer 10 and lower [do not support][mdn] the\n   * `setLineDash` method on the `CanvasRenderingContext2D` and therefore this\n   * property will have no visual effect in these browsers.\n   *\n   * [mdn]: https://developer.mozilla.org/en-US/docs/Web/API/CanvasRenderingContext2D/setLineDash#Browser_compatibility\n   *\n   * @param {Array<number>} lineDash Line dash.\n   * @api\n   */\n  setLineDash(lineDash) {\n    this.lineDash_ = lineDash;\n  }\n\n  /**\n   * Set the line dash offset.\n   *\n   * @param {number|undefined} lineDashOffset Line dash offset.\n   * @api\n   */\n  setLineDashOffset(lineDashOffset) {\n    this.lineDashOffset_ = lineDashOffset;\n  }\n\n  /**\n   * Set the line join.\n   *\n   * @param {CanvasLineJoin|undefined} lineJoin Line join.\n   * @api\n   */\n  setLineJoin(lineJoin) {\n    this.lineJoin_ = lineJoin;\n  }\n\n  /**\n   * Set the miter limit.\n   *\n   * @param {number|undefined} miterLimit Miter limit.\n   * @api\n   */\n  setMiterLimit(miterLimit) {\n    this.miterLimit_ = miterLimit;\n  }\n\n  /**\n   * Set the width.\n   *\n   * @param {number|undefined} width Width.\n   * @api\n   */\n  setWidth(width) {\n    this.width_ = width;\n  }\n\n}\n\nexport default Stroke;\n","/**\n * @module ol/asserts\n */\nimport AssertionError from './AssertionError.js';\n\n/**\n * @param {*} assertion Assertion we expected to be truthy.\n * @param {number} errorCode Error code.\n */\nexport function assert(assertion, errorCode) {\n  if (!assertion) {\n    throw new AssertionError(errorCode);\n  }\n}\n","/**\n * @module ol/geom/GeometryLayout\n */\n\n/**\n * The coordinate layout for geometries, indicating whether a 3rd or 4th z ('Z')\n * or measure ('M') coordinate is available. Supported values are `'XY'`,\n * `'XYZ'`, `'XYM'`, `'XYZM'`.\n * @enum {string}\n */\nexport default {\n  XY: 'XY',\n  XYZ: 'XYZ',\n  XYM: 'XYM',\n  XYZM: 'XYZM'\n};\n","/**\n * @module ol/layer/Vector\n */\nimport BaseVectorLayer from './BaseVector.js';\nimport CanvasVectorLayerRenderer from '../renderer/canvas/VectorLayer.js';\n\n\n/**\n * @classdesc\n * Vector data that is rendered client-side.\n * Note that any property set in the options is set as a {@link module:ol/Object~BaseObject}\n * property on the layer object; for example, setting `title: 'My Title'` in the\n * options means that `title` is observable, and has get/set accessors.\n *\n * @extends {BaseVectorLayer<import(\"../source/Vector.js\").default>}\n * @api\n */\nclass VectorLayer extends BaseVectorLayer {\n  /**\n   * @param {import(\"./BaseVector.js\").Options=} opt_options Options.\n   */\n  constructor(opt_options) {\n    super(opt_options);\n  }\n\n  /**\n   * Create a renderer for this layer.\n   * @return {import(\"../renderer/Layer.js\").default} A layer renderer.\n   * @protected\n   */\n  createRenderer() {\n    return new CanvasVectorLayerRenderer(this);\n  }\n}\n\n\nexport default VectorLayer;\n","/**\n * @module ol/style/Fill\n */\n\n\n/**\n * @typedef {Object} Options\n * @property {import(\"../color.js\").Color|import(\"../colorlike.js\").ColorLike} [color=null] A color, gradient or pattern.\n * See {@link module:ol/color~Color} and {@link module:ol/colorlike~ColorLike} for possible formats.\n * Default null; if null, the Canvas/renderer default black will be used.\n */\n\n\n/**\n * @classdesc\n * Set fill style for vector features.\n * @api\n */\nclass Fill {\n  /**\n   * @param {Options=} opt_options Options.\n   */\n  constructor(opt_options) {\n\n    const options = opt_options || {};\n\n    /**\n     * @private\n     * @type {import(\"../color.js\").Color|import(\"../colorlike.js\").ColorLike}\n     */\n    this.color_ = options.color !== undefined ? options.color : null;\n  }\n\n  /**\n   * Clones the style. The color is not cloned if it is an {@link module:ol/colorlike~ColorLike}.\n   * @return {Fill} The cloned style.\n   * @api\n   */\n  clone() {\n    const color = this.getColor();\n    return new Fill({\n      color: Array.isArray(color) ? color.slice() : color || undefined\n    });\n  }\n\n  /**\n   * Get the fill color.\n   * @return {import(\"../color.js\").Color|import(\"../colorlike.js\").ColorLike} Color.\n   * @api\n   */\n  getColor() {\n    return this.color_;\n  }\n\n  /**\n   * Set the color.\n   *\n   * @param {import(\"../color.js\").Color|import(\"../colorlike.js\").ColorLike} color Color.\n   * @api\n   */\n  setColor(color) {\n    this.color_ = color;\n  }\n\n}\n\nexport default Fill;\n","/**\n * @module ol/Feature\n */\nimport {assert} from './asserts.js';\nimport {listen, unlistenByKey} from './events.js';\nimport EventType from './events/EventType.js';\nimport BaseObject, {getChangeEventType} from './Object.js';\n\n/**\n * @typedef {typeof Feature|typeof import(\"./render/Feature.js\").default} FeatureClass\n */\n\n/**\n * @typedef {Feature|import(\"./render/Feature.js\").default} FeatureLike\n */\n\n/**\n * @classdesc\n * A vector object for geographic features with a geometry and other\n * attribute properties, similar to the features in vector file formats like\n * GeoJSON.\n *\n * Features can be styled individually with `setStyle`; otherwise they use the\n * style of their vector layer.\n *\n * Note that attribute properties are set as {@link module:ol/Object} properties on\n * the feature object, so they are observable, and have get/set accessors.\n *\n * Typically, a feature has a single geometry property. You can set the\n * geometry using the `setGeometry` method and get it with `getGeometry`.\n * It is possible to store more than one geometry on a feature using attribute\n * properties. By default, the geometry used for rendering is identified by\n * the property name `geometry`. If you want to use another geometry property\n * for rendering, use the `setGeometryName` method to change the attribute\n * property associated with the geometry for the feature.  For example:\n *\n * ```js\n *\n * import Feature from 'ol/Feature';\n * import Polygon from 'ol/geom/Polygon';\n * import Point from 'ol/geom/Point';\n *\n * var feature = new Feature({\n *   geometry: new Polygon(polyCoords),\n *   labelPoint: new Point(labelCoords),\n *   name: 'My Polygon'\n * });\n *\n * // get the polygon geometry\n * var poly = feature.getGeometry();\n *\n * // Render the feature as a point using the coordinates from labelPoint\n * feature.setGeometryName('labelPoint');\n *\n * // get the point geometry\n * var point = feature.getGeometry();\n * ```\n *\n * @api\n * @template {import(\"./geom/Geometry.js\").default} Geometry\n */\nclass Feature extends BaseObject {\n  /**\n   * @param {Geometry|Object<string, *>=} opt_geometryOrProperties\n   *     You may pass a Geometry object directly, or an object literal containing\n   *     properties. If you pass an object literal, you may include a Geometry\n   *     associated with a `geometry` key.\n   */\n  constructor(opt_geometryOrProperties) {\n\n    super();\n\n    /**\n     * @private\n     * @type {number|string|undefined}\n     */\n    this.id_ = undefined;\n\n    /**\n     * @type {string}\n     * @private\n     */\n    this.geometryName_ = 'geometry';\n\n    /**\n     * User provided style.\n     * @private\n     * @type {import(\"./style/Style.js\").StyleLike}\n     */\n    this.style_ = null;\n\n    /**\n     * @private\n     * @type {import(\"./style/Style.js\").StyleFunction|undefined}\n     */\n    this.styleFunction_ = undefined;\n\n    /**\n     * @private\n     * @type {?import(\"./events.js\").EventsKey}\n     */\n    this.geometryChangeKey_ = null;\n\n    this.addEventListener(getChangeEventType(this.geometryName_), this.handleGeometryChanged_);\n\n    if (opt_geometryOrProperties) {\n      if (typeof /** @type {?} */ (opt_geometryOrProperties).getSimplifiedGeometry === 'function') {\n        const geometry = /** @type {Geometry} */ (opt_geometryOrProperties);\n        this.setGeometry(geometry);\n      } else {\n        /** @type {Object<string, *>} */\n        const properties = opt_geometryOrProperties;\n        this.setProperties(properties);\n      }\n    }\n  }\n\n  /**\n   * Clone this feature. If the original feature has a geometry it\n   * is also cloned. The feature id is not set in the clone.\n   * @return {Feature} The clone.\n   * @api\n   */\n  clone() {\n    const clone = new Feature(this.getProperties());\n    clone.setGeometryName(this.getGeometryName());\n    const geometry = this.getGeometry();\n    if (geometry) {\n      clone.setGeometry(geometry.clone());\n    }\n    const style = this.getStyle();\n    if (style) {\n      clone.setStyle(style);\n    }\n    return clone;\n  }\n\n  /**\n   * Get the feature's default geometry.  A feature may have any number of named\n   * geometries.  The \"default\" geometry (the one that is rendered by default) is\n   * set when calling {@link module:ol/Feature~Feature#setGeometry}.\n   * @return {Geometry|undefined} The default geometry for the feature.\n   * @api\n   * @observable\n   */\n  getGeometry() {\n    return (\n      /** @type {Geometry|undefined} */ (this.get(this.geometryName_))\n    );\n  }\n\n  /**\n   * Get the feature identifier.  This is a stable identifier for the feature and\n   * is either set when reading data from a remote source or set explicitly by\n   * calling {@link module:ol/Feature~Feature#setId}.\n   * @return {number|string|undefined} Id.\n   * @api\n   */\n  getId() {\n    return this.id_;\n  }\n\n  /**\n   * Get the name of the feature's default geometry.  By default, the default\n   * geometry is named `geometry`.\n   * @return {string} Get the property name associated with the default geometry\n   *     for this feature.\n   * @api\n   */\n  getGeometryName() {\n    return this.geometryName_;\n  }\n\n  /**\n   * Get the feature's style. Will return what was provided to the\n   * {@link module:ol/Feature~Feature#setStyle} method.\n   * @return {import(\"./style/Style.js\").StyleLike} The feature style.\n   * @api\n   */\n  getStyle() {\n    return this.style_;\n  }\n\n  /**\n   * Get the feature's style function.\n   * @return {import(\"./style/Style.js\").StyleFunction|undefined} Return a function\n   * representing the current style of this feature.\n   * @api\n   */\n  getStyleFunction() {\n    return this.styleFunction_;\n  }\n\n  /**\n   * @private\n   */\n  handleGeometryChange_() {\n    this.changed();\n  }\n\n  /**\n   * @private\n   */\n  handleGeometryChanged_() {\n    if (this.geometryChangeKey_) {\n      unlistenByKey(this.geometryChangeKey_);\n      this.geometryChangeKey_ = null;\n    }\n    const geometry = this.getGeometry();\n    if (geometry) {\n      this.geometryChangeKey_ = listen(geometry,\n        EventType.CHANGE, this.handleGeometryChange_, this);\n    }\n    this.changed();\n  }\n\n  /**\n   * Set the default geometry for the feature.  This will update the property\n   * with the name returned by {@link module:ol/Feature~Feature#getGeometryName}.\n   * @param {Geometry|undefined} geometry The new geometry.\n   * @api\n   * @observable\n   */\n  setGeometry(geometry) {\n    this.set(this.geometryName_, geometry);\n  }\n\n  /**\n   * Set the style for the feature.  This can be a single style object, an array\n   * of styles, or a function that takes a resolution and returns an array of\n   * styles. If it is `null` the feature has no style (a `null` style).\n   * @param {import(\"./style/Style.js\").StyleLike} style Style for this feature.\n   * @api\n   * @fires module:ol/events/Event~Event#event:change\n   */\n  setStyle(style) {\n    this.style_ = style;\n    this.styleFunction_ = !style ? undefined : createStyleFunction(style);\n    this.changed();\n  }\n\n  /**\n   * Set the feature id.  The feature id is considered stable and may be used when\n   * requesting features or comparing identifiers returned from a remote source.\n   * The feature id can be used with the\n   * {@link module:ol/source/Vector~VectorSource#getFeatureById} method.\n   * @param {number|string|undefined} id The feature id.\n   * @api\n   * @fires module:ol/events/Event~Event#event:change\n   */\n  setId(id) {\n    this.id_ = id;\n    this.changed();\n  }\n\n  /**\n   * Set the property name to be used when getting the feature's default geometry.\n   * When calling {@link module:ol/Feature~Feature#getGeometry}, the value of the property with\n   * this name will be returned.\n   * @param {string} name The property name of the default geometry.\n   * @api\n   */\n  setGeometryName(name) {\n    this.removeEventListener(getChangeEventType(this.geometryName_), this.handleGeometryChanged_);\n    this.geometryName_ = name;\n    this.addEventListener(getChangeEventType(this.geometryName_), this.handleGeometryChanged_);\n    this.handleGeometryChanged_();\n  }\n}\n\n\n/**\n * Convert the provided object into a feature style function.  Functions passed\n * through unchanged.  Arrays of Style or single style objects wrapped\n * in a new feature style function.\n * @param {!import(\"./style/Style.js\").StyleFunction|!Array<import(\"./style/Style.js\").default>|!import(\"./style/Style.js\").default} obj\n *     A feature style function, a single style, or an array of styles.\n * @return {import(\"./style/Style.js\").StyleFunction} A style function.\n */\nexport function createStyleFunction(obj) {\n  if (typeof obj === 'function') {\n    return obj;\n  } else {\n    /**\n     * @type {Array<import(\"./style/Style.js\").default>}\n     */\n    let styles;\n    if (Array.isArray(obj)) {\n      styles = obj;\n    } else {\n      assert(typeof /** @type {?} */ (obj).getZIndex === 'function',\n        41); // Expected an `import(\"./style/Style.js\").Style` or an array of `import(\"./style/Style.js\").Style`\n      const style = /** @type {import(\"./style/Style.js\").default} */ (obj);\n      styles = [style];\n    }\n    return function() {\n      return styles;\n    };\n  }\n}\nexport default Feature;\n","import {getUid} from '../../util.js';\nimport LRUCache from '../../structs/LRUCache.js';\n\n/**\n * @module ol/render/canvas/LabelCache\n */\n\n/**\n * @classdesc\n * Cache of pre-rendered labels.\n */\nclass LabelCache extends LRUCache {\n\n  /**\n   * @inheritDoc\n   */\n  constructor(opt_highWaterMark) {\n    super(opt_highWaterMark);\n    this.consumers = {};\n  }\n\n  clear() {\n    this.consumers = {};\n    super.clear();\n  }\n\n  /**\n   * @override\n   * @param {string} key Label key.\n   * @param {import(\"./Executor.js\").default} consumer Label consumer.\n   * @return {HTMLCanvasElement} Label.\n   */\n  get(key, consumer) {\n    const canvas = super.get(key);\n    const consumerId = getUid(consumer);\n    if (!(consumerId in this.consumers)) {\n      this.consumers[consumerId] = {};\n    }\n    this.consumers[consumerId][key] = true;\n    return canvas;\n  }\n\n  prune() {\n    outer:\n    while (this.canExpireCache()) {\n      const key = this.peekLastKey();\n      for (const consumerId in this.consumers) {\n        if (key in this.consumers[consumerId]) {\n          break outer;\n        }\n      }\n      const canvas = this.pop();\n      canvas.width = canvas.height = 0;\n      for (const consumerId in this.consumers) {\n        delete this.consumers[consumerId][key];\n      }\n    }\n  }\n\n  /**\n   * @param {import(\"./Executor.js\").default} consumer Label consumer.\n   */\n  release(consumer) {\n    delete this.consumers[getUid(consumer)];\n  }\n}\n\nexport default LabelCache;\n","/**\n * @module ol/render/canvas\n */\nimport {getFontParameters} from '../css.js';\nimport {createCanvasContext2D} from '../dom.js';\nimport {clear} from '../obj.js';\nimport {create as createTransform} from '../transform.js';\nimport LabelCache from './canvas/LabelCache.js';\n\n\n/**\n * @typedef {Object} FillState\n * @property {import(\"../colorlike.js\").ColorLike} fillStyle\n */\n\n\n/**\n * @typedef {Object} FillStrokeState\n * @property {import(\"../colorlike.js\").ColorLike} [currentFillStyle]\n * @property {import(\"../colorlike.js\").ColorLike} [currentStrokeStyle]\n * @property {CanvasLineCap} [currentLineCap]\n * @property {Array<number>} currentLineDash\n * @property {number} [currentLineDashOffset]\n * @property {CanvasLineJoin} [currentLineJoin]\n * @property {number} [currentLineWidth]\n * @property {number} [currentMiterLimit]\n * @property {number} [lastStroke]\n * @property {import(\"../colorlike.js\").ColorLike} [fillStyle]\n * @property {import(\"../colorlike.js\").ColorLike} [strokeStyle]\n * @property {CanvasLineCap} [lineCap]\n * @property {Array<number>} lineDash\n * @property {number} [lineDashOffset]\n * @property {CanvasLineJoin} [lineJoin]\n * @property {number} [lineWidth]\n * @property {number} [miterLimit]\n */\n\n\n/**\n * @typedef {Object} StrokeState\n * @property {CanvasLineCap} lineCap\n * @property {Array<number>} lineDash\n * @property {number} lineDashOffset\n * @property {CanvasLineJoin} lineJoin\n * @property {number} lineWidth\n * @property {number} miterLimit\n * @property {import(\"../colorlike.js\").ColorLike} strokeStyle\n */\n\n\n/**\n * @typedef {Object} TextState\n * @property {string} font\n * @property {string} [textAlign]\n * @property {string} textBaseline\n * @property {string} [placement]\n * @property {number} [maxAngle]\n * @property {boolean} [overflow]\n * @property {import(\"../style/Fill.js\").default} [backgroundFill]\n * @property {import(\"../style/Stroke.js\").default} [backgroundStroke]\n * @property {number} [scale]\n * @property {Array<number>} [padding]\n */\n\n/**\n * Container for decluttered replay instructions that need to be rendered or\n * omitted together, i.e. when styles render both an image and text, or for the\n * characters that form text along lines. The basic elements of this array are\n * `[minX, minY, maxX, maxY, count]`, where the first four entries are the\n * rendered extent of the group in pixel space. `count` is the number of styles\n * in the group, i.e. 2 when an image and a text are grouped, or 1 otherwise.\n * In addition to these four elements, declutter instruction arrays (i.e. the\n * arguments to {@link module:ol/render/canvas~drawImage} are appended to the array.\n * @typedef {Array<*>} DeclutterGroup\n */\n\n\n/**\n * Declutter groups for support of multi geometries.\n * @typedef {Array<DeclutterGroup>} DeclutterGroups\n */\n\n\n/**\n * @const\n * @type {string}\n */\nexport const defaultFont = '10px sans-serif';\n\n\n/**\n * @const\n * @type {import(\"../colorlike.js\").ColorLike}\n */\nexport const defaultFillStyle = '#000';\n\n\n/**\n * @const\n * @type {CanvasLineCap}\n */\nexport const defaultLineCap = 'round';\n\n\n/**\n * @const\n * @type {Array<number>}\n */\nexport const defaultLineDash = [];\n\n\n/**\n * @const\n * @type {number}\n */\nexport const defaultLineDashOffset = 0;\n\n\n/**\n * @const\n * @type {CanvasLineJoin}\n */\nexport const defaultLineJoin = 'round';\n\n\n/**\n * @const\n * @type {number}\n */\nexport const defaultMiterLimit = 10;\n\n\n/**\n * @const\n * @type {import(\"../colorlike.js\").ColorLike}\n */\nexport const defaultStrokeStyle = '#000';\n\n\n/**\n * @const\n * @type {string}\n */\nexport const defaultTextAlign = 'center';\n\n\n/**\n * @const\n * @type {string}\n */\nexport const defaultTextBaseline = 'middle';\n\n\n/**\n * @const\n * @type {Array<number>}\n */\nexport const defaultPadding = [0, 0, 0, 0];\n\n\n/**\n * @const\n * @type {number}\n */\nexport const defaultLineWidth = 1;\n\n\n/**\n * The label cache for text rendering. To change the default cache size of 2048\n * entries, use {@link module:ol/structs/LRUCache#setSize}.\n * @type {LabelCache}\n * @api\n */\nexport const labelCache = new LabelCache();\n\n\n/**\n * @type {!Object<string, number>}\n */\nexport const checkedFonts = {};\n\n\n/**\n * @type {CanvasRenderingContext2D}\n */\nlet measureContext = null;\n\n/**\n * @type {string}\n */\nlet measureFont;\n\n/**\n * @type {!Object<string, number>}\n */\nexport const textHeights = {};\n\n\n/**\n * Clears the label cache when a font becomes available.\n * @param {string} fontSpec CSS font spec.\n */\nexport const checkFont = (function() {\n  const retries = 100;\n  const checked = checkedFonts;\n  const size = '32px ';\n  const referenceFonts = ['monospace', 'serif'];\n  const len = referenceFonts.length;\n  const text = 'wmytzilWMYTZIL@#/&?$%10\\uF013';\n  let interval, referenceWidth;\n\n  /**\n   * @param {string} fontStyle Css font-style\n   * @param {string} fontWeight Css font-weight\n   * @param {*} fontFamily Css font-family\n   * @return {boolean} Font with style and weight is available\n   */\n  function isAvailable(fontStyle, fontWeight, fontFamily) {\n    const context = getMeasureContext();\n    let available = true;\n    for (let i = 0; i < len; ++i) {\n      const referenceFont = referenceFonts[i];\n      context.font = fontStyle + ' ' + fontWeight + ' ' + size + referenceFont;\n      referenceWidth = context.measureText(text).width;\n      if (fontFamily != referenceFont) {\n        context.font = fontStyle + ' ' + fontWeight + ' ' + size + fontFamily + ',' + referenceFont;\n        const width = context.measureText(text).width;\n        // If width and referenceWidth are the same, then the fallback was used\n        // instead of the font we wanted, so the font is not available.\n        available = available && width != referenceWidth;\n      }\n    }\n    if (available) {\n      return true;\n    }\n    return false;\n  }\n\n  function check() {\n    let done = true;\n    for (const font in checked) {\n      if (checked[font] < retries) {\n        if (isAvailable.apply(this, font.split('\\n'))) {\n          checked[font] = retries;\n          clear(textHeights);\n          // Make sure that loaded fonts are picked up by Safari\n          measureContext = null;\n          measureFont = undefined;\n          if (labelCache.getCount()) {\n            labelCache.clear();\n          }\n        } else {\n          ++checked[font];\n          done = false;\n        }\n      }\n    }\n    if (done) {\n      clearInterval(interval);\n      interval = undefined;\n    }\n  }\n\n  return function(fontSpec) {\n    const font = getFontParameters(fontSpec);\n    if (!font) {\n      return;\n    }\n    const families = font.families;\n    for (let i = 0, ii = families.length; i < ii; ++i) {\n      const family = families[i];\n      const key = font.style + '\\n' + font.weight + '\\n' + family;\n      if (!(key in checked)) {\n        checked[key] = retries;\n        if (!isAvailable(font.style, font.weight, family)) {\n          checked[key] = 0;\n          if (interval === undefined) {\n            interval = setInterval(check, 32);\n          }\n        }\n      }\n    }\n  };\n})();\n\n\n/**\n * @return {CanvasRenderingContext2D} Measure context.\n */\nfunction getMeasureContext() {\n  if (!measureContext) {\n    measureContext = createCanvasContext2D(1, 1);\n  }\n  return measureContext;\n}\n\n\n/**\n * @param {string} font Font to use for measuring.\n * @return {import(\"../size.js\").Size} Measurement.\n */\nexport const measureTextHeight = (function() {\n  let div;\n  const heights = textHeights;\n  return function(font) {\n    let height = heights[font];\n    if (height == undefined) {\n      if (!div) {\n        div = document.createElement('div');\n        div.innerHTML = 'M';\n        div.style.margin = div.style.padding = '0 !important';\n        div.style.position = 'absolute !important';\n        div.style.left = '-99999px !important';\n      }\n      div.style.font = font;\n      document.body.appendChild(div);\n      height = heights[font] = div.offsetHeight;\n      document.body.removeChild(div);\n    }\n    return height;\n  };\n})();\n\n\n/**\n * @param {string} font Font.\n * @param {string} text Text.\n * @return {number} Width.\n */\nexport function measureTextWidth(font, text) {\n  const measureContext = getMeasureContext();\n  if (font != measureFont) {\n    measureContext.font = measureFont = font;\n  }\n  return measureContext.measureText(text).width;\n}\n\n\n/**\n * Measure text width using a cache.\n * @param {string} font The font.\n * @param {string} text The text to measure.\n * @param {Object<string, number>} cache A lookup of cached widths by text.\n * @returns {number} The text width.\n */\nexport function measureAndCacheTextWidth(font, text, cache) {\n  if (text in cache) {\n    return cache[text];\n  }\n  const width = cache[text] = measureTextWidth(font, text);\n  return width;\n}\n\n\n/**\n * @param {string} font Font to use for measuring.\n * @param {Array<string>} lines Lines to measure.\n * @param {Array<number>} widths Array will be populated with the widths of\n * each line.\n * @return {number} Width of the whole text.\n */\nexport function measureTextWidths(font, lines, widths) {\n  const numLines = lines.length;\n  let width = 0;\n  for (let i = 0; i < numLines; ++i) {\n    const currentWidth = measureTextWidth(font, lines[i]);\n    width = Math.max(width, currentWidth);\n    widths.push(currentWidth);\n  }\n  return width;\n}\n\n\n/**\n * @param {CanvasRenderingContext2D} context Context.\n * @param {number} rotation Rotation.\n * @param {number} offsetX X offset.\n * @param {number} offsetY Y offset.\n */\nexport function rotateAtOffset(context, rotation, offsetX, offsetY) {\n  if (rotation !== 0) {\n    context.translate(offsetX, offsetY);\n    context.rotate(rotation);\n    context.translate(-offsetX, -offsetY);\n  }\n}\n\n\nexport const resetTransform = createTransform();\n\n\n/**\n * @param {CanvasRenderingContext2D} context Context.\n * @param {import(\"../transform.js\").Transform|null} transform Transform.\n * @param {number} opacity Opacity.\n * @param {HTMLImageElement|HTMLCanvasElement|HTMLVideoElement} image Image.\n * @param {number} originX Origin X.\n * @param {number} originY Origin Y.\n * @param {number} w Width.\n * @param {number} h Height.\n * @param {number} x X.\n * @param {number} y Y.\n * @param {number} scale Scale.\n */\nexport function drawImage(context,\n  transform, opacity, image, originX, originY, w, h, x, y, scale) {\n  let alpha;\n  if (opacity != 1) {\n    alpha = context.globalAlpha;\n    context.globalAlpha = alpha * opacity;\n  }\n  if (transform) {\n    context.setTransform.apply(context, transform);\n  }\n\n  context.drawImage(image, originX, originY, w, h, x, y, w * scale, h * scale);\n\n  if (opacity != 1) {\n    context.globalAlpha = alpha;\n  }\n  if (transform) {\n    context.setTransform.apply(context, resetTransform);\n  }\n}\n","/**\n * @module ol/geom/Point\n */\nimport {createOrUpdateFromCoordinate, containsXY} from '../extent.js';\nimport GeometryType from './GeometryType.js';\nimport SimpleGeometry from './SimpleGeometry.js';\nimport {deflateCoordinate} from './flat/deflate.js';\nimport {squaredDistance as squaredDx} from '../math.js';\n\n/**\n * @classdesc\n * Point geometry.\n *\n * @api\n */\nclass Point extends SimpleGeometry {\n\n  /**\n   * @param {import(\"../coordinate.js\").Coordinate} coordinates Coordinates.\n   * @param {import(\"./GeometryLayout.js\").default=} opt_layout Layout.\n   */\n  constructor(coordinates, opt_layout) {\n    super();\n    this.setCoordinates(coordinates, opt_layout);\n  }\n\n  /**\n   * Make a complete copy of the geometry.\n   * @return {!Point} Clone.\n   * @override\n   * @api\n   */\n  clone() {\n    const point = new Point(this.flatCoordinates.slice(), this.layout);\n    return point;\n  }\n\n  /**\n   * @inheritDoc\n   */\n  closestPointXY(x, y, closestPoint, minSquaredDistance) {\n    const flatCoordinates = this.flatCoordinates;\n    const squaredDistance = squaredDx(x, y, flatCoordinates[0], flatCoordinates[1]);\n    if (squaredDistance < minSquaredDistance) {\n      const stride = this.stride;\n      for (let i = 0; i < stride; ++i) {\n        closestPoint[i] = flatCoordinates[i];\n      }\n      closestPoint.length = stride;\n      return squaredDistance;\n    } else {\n      return minSquaredDistance;\n    }\n  }\n\n  /**\n   * Return the coordinate of the point.\n   * @return {import(\"../coordinate.js\").Coordinate} Coordinates.\n   * @override\n   * @api\n   */\n  getCoordinates() {\n    return !this.flatCoordinates ? [] : this.flatCoordinates.slice();\n  }\n\n  /**\n   * @inheritDoc\n   */\n  computeExtent(extent) {\n    return createOrUpdateFromCoordinate(this.flatCoordinates, extent);\n  }\n\n  /**\n   * @inheritDoc\n   * @api\n   */\n  getType() {\n    return GeometryType.POINT;\n  }\n\n  /**\n   * @inheritDoc\n   * @api\n   */\n  intersectsExtent(extent) {\n    return containsXY(extent, this.flatCoordinates[0], this.flatCoordinates[1]);\n  }\n\n  /**\n   * @inheritDoc\n   * @api\n   */\n  setCoordinates(coordinates, opt_layout) {\n    this.setLayout(opt_layout, coordinates, 0);\n    if (!this.flatCoordinates) {\n      this.flatCoordinates = [];\n    }\n    this.flatCoordinates.length = deflateCoordinate(\n      this.flatCoordinates, 0, coordinates, this.stride);\n    this.changed();\n  }\n}\n\n\nexport default Point;\n","/**\n * @module ol/render/canvas/Instruction\n */\n\n/**\n * @enum {number}\n */\nconst Instruction = {\n  BEGIN_GEOMETRY: 0,\n  BEGIN_PATH: 1,\n  CIRCLE: 2,\n  CLOSE_PATH: 3,\n  CUSTOM: 4,\n  DRAW_CHARS: 5,\n  DRAW_IMAGE: 6,\n  END_GEOMETRY: 7,\n  FILL: 8,\n  MOVE_TO_LINE_TO: 9,\n  SET_FILL_STYLE: 10,\n  SET_STROKE_STYLE: 11,\n  STROKE: 12\n};\n\n\n/**\n * @type {Array<Instruction>}\n */\nexport const fillInstruction = [Instruction.FILL];\n\n\n/**\n * @type {Array<Instruction>}\n */\nexport const strokeInstruction = [Instruction.STROKE];\n\n\n/**\n * @type {Array<Instruction>}\n */\nexport const beginPathInstruction = [Instruction.BEGIN_PATH];\n\n\n/**\n * @type {Array<Instruction>}\n */\nexport const closePathInstruction = [Instruction.CLOSE_PATH];\n\n\nexport default Instruction;\n","/**\n * @module ol/coordinate\n */\nimport {modulo} from './math.js';\nimport {padNumber} from './string.js';\n\n\n/**\n * An array of numbers representing an xy coordinate. Example: `[16, 48]`.\n * @typedef {Array<number>} Coordinate\n * @api\n */\n\n\n/**\n * A function that takes a {@link module:ol/coordinate~Coordinate} and\n * transforms it into a `{string}`.\n *\n * @typedef {function((Coordinate|undefined)): string} CoordinateFormat\n * @api\n */\n\n\n/**\n * Add `delta` to `coordinate`. `coordinate` is modified in place and returned\n * by the function.\n *\n * Example:\n *\n *     import {add} from 'ol/coordinate';\n *\n *     var coord = [7.85, 47.983333];\n *     add(coord, [-2, 4]);\n *     // coord is now [5.85, 51.983333]\n *\n * @param {Coordinate} coordinate Coordinate.\n * @param {Coordinate} delta Delta.\n * @return {Coordinate} The input coordinate adjusted by\n * the given delta.\n * @api\n */\nexport function add(coordinate, delta) {\n  coordinate[0] += +delta[0];\n  coordinate[1] += +delta[1];\n  return coordinate;\n}\n\n\n/**\n * Calculates the point closest to the passed coordinate on the passed circle.\n *\n * @param {Coordinate} coordinate The coordinate.\n * @param {import(\"./geom/Circle.js\").default} circle The circle.\n * @return {Coordinate} Closest point on the circumference.\n */\nexport function closestOnCircle(coordinate, circle) {\n  const r = circle.getRadius();\n  const center = circle.getCenter();\n  const x0 = center[0];\n  const y0 = center[1];\n  const x1 = coordinate[0];\n  const y1 = coordinate[1];\n\n  let dx = x1 - x0;\n  const dy = y1 - y0;\n  if (dx === 0 && dy === 0) {\n    dx = 1;\n  }\n  const d = Math.sqrt(dx * dx + dy * dy);\n\n  const x = x0 + r * dx / d;\n  const y = y0 + r * dy / d;\n\n  return [x, y];\n}\n\n\n/**\n * Calculates the point closest to the passed coordinate on the passed segment.\n * This is the foot of the perpendicular of the coordinate to the segment when\n * the foot is on the segment, or the closest segment coordinate when the foot\n * is outside the segment.\n *\n * @param {Coordinate} coordinate The coordinate.\n * @param {Array<Coordinate>} segment The two coordinates\n * of the segment.\n * @return {Coordinate} The foot of the perpendicular of\n * the coordinate to the segment.\n */\nexport function closestOnSegment(coordinate, segment) {\n  const x0 = coordinate[0];\n  const y0 = coordinate[1];\n  const start = segment[0];\n  const end = segment[1];\n  const x1 = start[0];\n  const y1 = start[1];\n  const x2 = end[0];\n  const y2 = end[1];\n  const dx = x2 - x1;\n  const dy = y2 - y1;\n  const along = (dx === 0 && dy === 0) ? 0 :\n    ((dx * (x0 - x1)) + (dy * (y0 - y1))) / ((dx * dx + dy * dy) || 0);\n  let x, y;\n  if (along <= 0) {\n    x = x1;\n    y = y1;\n  } else if (along >= 1) {\n    x = x2;\n    y = y2;\n  } else {\n    x = x1 + along * dx;\n    y = y1 + along * dy;\n  }\n  return [x, y];\n}\n\n\n/**\n * Returns a {@link module:ol/coordinate~CoordinateFormat} function that can be\n * used to format\n * a {Coordinate} to a string.\n *\n * Example without specifying the fractional digits:\n *\n *     import {createStringXY} from 'ol/coordinate';\n *\n *     var coord = [7.85, 47.983333];\n *     var stringifyFunc = createStringXY();\n *     var out = stringifyFunc(coord);\n *     // out is now '8, 48'\n *\n * Example with explicitly specifying 2 fractional digits:\n *\n *     import {createStringXY} from 'ol/coordinate';\n *\n *     var coord = [7.85, 47.983333];\n *     var stringifyFunc = createStringXY(2);\n *     var out = stringifyFunc(coord);\n *     // out is now '7.85, 47.98'\n *\n * @param {number=} opt_fractionDigits The number of digits to include\n *    after the decimal point. Default is `0`.\n * @return {CoordinateFormat} Coordinate format.\n * @api\n */\nexport function createStringXY(opt_fractionDigits) {\n  return (\n    /**\n     * @param {Coordinate} coordinate Coordinate.\n     * @return {string} String XY.\n     */\n    function(coordinate) {\n      return toStringXY(coordinate, opt_fractionDigits);\n    }\n  );\n}\n\n\n/**\n * @param {string} hemispheres Hemispheres.\n * @param {number} degrees Degrees.\n * @param {number=} opt_fractionDigits The number of digits to include\n *    after the decimal point. Default is `0`.\n * @return {string} String.\n */\nexport function degreesToStringHDMS(hemispheres, degrees, opt_fractionDigits) {\n  const normalizedDegrees = modulo(degrees + 180, 360) - 180;\n  const x = Math.abs(3600 * normalizedDegrees);\n  const dflPrecision = opt_fractionDigits || 0;\n  const precision = Math.pow(10, dflPrecision);\n\n  let deg = Math.floor(x / 3600);\n  let min = Math.floor((x - deg * 3600) / 60);\n  let sec = x - (deg * 3600) - (min * 60);\n  sec = Math.ceil(sec * precision) / precision;\n\n  if (sec >= 60) {\n    sec = 0;\n    min += 1;\n  }\n\n  if (min >= 60) {\n    min = 0;\n    deg += 1;\n  }\n\n  return deg + '\\u00b0 ' + padNumber(min, 2) + '\\u2032 ' +\n    padNumber(sec, 2, dflPrecision) + '\\u2033' +\n    (normalizedDegrees == 0 ? '' : ' ' + hemispheres.charAt(normalizedDegrees < 0 ? 1 : 0));\n}\n\n\n/**\n * Transforms the given {@link module:ol/coordinate~Coordinate} to a string\n * using the given string template. The strings `{x}` and `{y}` in the template\n * will be replaced with the first and second coordinate values respectively.\n *\n * Example without specifying the fractional digits:\n *\n *     import {format} from 'ol/coordinate';\n *\n *     var coord = [7.85, 47.983333];\n *     var template = 'Coordinate is ({x}|{y}).';\n *     var out = format(coord, template);\n *     // out is now 'Coordinate is (8|48).'\n *\n * Example explicitly specifying the fractional digits:\n *\n *     import {format} from 'ol/coordinate';\n *\n *     var coord = [7.85, 47.983333];\n *     var template = 'Coordinate is ({x}|{y}).';\n *     var out = format(coord, template, 2);\n *     // out is now 'Coordinate is (7.85|47.98).'\n *\n * @param {Coordinate} coordinate Coordinate.\n * @param {string} template A template string with `{x}` and `{y}` placeholders\n *     that will be replaced by first and second coordinate values.\n * @param {number=} opt_fractionDigits The number of digits to include\n *    after the decimal point. Default is `0`.\n * @return {string} Formatted coordinate.\n * @api\n */\nexport function format(coordinate, template, opt_fractionDigits) {\n  if (coordinate) {\n    return template\n      .replace('{x}', coordinate[0].toFixed(opt_fractionDigits))\n      .replace('{y}', coordinate[1].toFixed(opt_fractionDigits));\n  } else {\n    return '';\n  }\n}\n\n\n/**\n * @param {Coordinate} coordinate1 First coordinate.\n * @param {Coordinate} coordinate2 Second coordinate.\n * @return {boolean} The two coordinates are equal.\n */\nexport function equals(coordinate1, coordinate2) {\n  let equals = true;\n  for (let i = coordinate1.length - 1; i >= 0; --i) {\n    if (coordinate1[i] != coordinate2[i]) {\n      equals = false;\n      break;\n    }\n  }\n  return equals;\n}\n\n\n/**\n * Rotate `coordinate` by `angle`. `coordinate` is modified in place and\n * returned by the function.\n *\n * Example:\n *\n *     import {rotate} from 'ol/coordinate';\n *\n *     var coord = [7.85, 47.983333];\n *     var rotateRadians = Math.PI / 2; // 90 degrees\n *     rotate(coord, rotateRadians);\n *     // coord is now [-47.983333, 7.85]\n *\n * @param {Coordinate} coordinate Coordinate.\n * @param {number} angle Angle in radian.\n * @return {Coordinate} Coordinate.\n * @api\n */\nexport function rotate(coordinate, angle) {\n  const cosAngle = Math.cos(angle);\n  const sinAngle = Math.sin(angle);\n  const x = coordinate[0] * cosAngle - coordinate[1] * sinAngle;\n  const y = coordinate[1] * cosAngle + coordinate[0] * sinAngle;\n  coordinate[0] = x;\n  coordinate[1] = y;\n  return coordinate;\n}\n\n\n/**\n * Scale `coordinate` by `scale`. `coordinate` is modified in place and returned\n * by the function.\n *\n * Example:\n *\n *     import {scale as scaleCoordinate} from 'ol/coordinate';\n *\n *     var coord = [7.85, 47.983333];\n *     var scale = 1.2;\n *     scaleCoordinate(coord, scale);\n *     // coord is now [9.42, 57.5799996]\n *\n * @param {Coordinate} coordinate Coordinate.\n * @param {number} scale Scale factor.\n * @return {Coordinate} Coordinate.\n */\nexport function scale(coordinate, scale) {\n  coordinate[0] *= scale;\n  coordinate[1] *= scale;\n  return coordinate;\n}\n\n\n/**\n * @param {Coordinate} coord1 First coordinate.\n * @param {Coordinate} coord2 Second coordinate.\n * @return {number} Squared distance between coord1 and coord2.\n */\nexport function squaredDistance(coord1, coord2) {\n  const dx = coord1[0] - coord2[0];\n  const dy = coord1[1] - coord2[1];\n  return dx * dx + dy * dy;\n}\n\n\n/**\n * @param {Coordinate} coord1 First coordinate.\n * @param {Coordinate} coord2 Second coordinate.\n * @return {number} Distance between coord1 and coord2.\n */\nexport function distance(coord1, coord2) {\n  return Math.sqrt(squaredDistance(coord1, coord2));\n}\n\n\n/**\n * Calculate the squared distance from a coordinate to a line segment.\n *\n * @param {Coordinate} coordinate Coordinate of the point.\n * @param {Array<Coordinate>} segment Line segment (2\n * coordinates).\n * @return {number} Squared distance from the point to the line segment.\n */\nexport function squaredDistanceToSegment(coordinate, segment) {\n  return squaredDistance(coordinate,\n    closestOnSegment(coordinate, segment));\n}\n\n\n/**\n * Format a geographic coordinate with the hemisphere, degrees, minutes, and\n * seconds.\n *\n * Example without specifying fractional digits:\n *\n *     import {toStringHDMS} from 'ol/coordinate';\n *\n *     var coord = [7.85, 47.983333];\n *     var out = toStringHDMS(coord);\n *     // out is now '47° 58′ 60″ N 7° 50′ 60″ E'\n *\n * Example explicitly specifying 1 fractional digit:\n *\n *     import {toStringHDMS} from 'ol/coordinate';\n *\n *     var coord = [7.85, 47.983333];\n *     var out = toStringHDMS(coord, 1);\n *     // out is now '47° 58′ 60.0″ N 7° 50′ 60.0″ E'\n *\n * @param {Coordinate} coordinate Coordinate.\n * @param {number=} opt_fractionDigits The number of digits to include\n *    after the decimal point. Default is `0`.\n * @return {string} Hemisphere, degrees, minutes and seconds.\n * @api\n */\nexport function toStringHDMS(coordinate, opt_fractionDigits) {\n  if (coordinate) {\n    return degreesToStringHDMS('NS', coordinate[1], opt_fractionDigits) + ' ' +\n        degreesToStringHDMS('EW', coordinate[0], opt_fractionDigits);\n  } else {\n    return '';\n  }\n}\n\n\n/**\n * Format a coordinate as a comma delimited string.\n *\n * Example without specifying fractional digits:\n *\n *     import {toStringXY} from 'ol/coordinate';\n *\n *     var coord = [7.85, 47.983333];\n *     var out = toStringXY(coord);\n *     // out is now '8, 48'\n *\n * Example explicitly specifying 1 fractional digit:\n *\n *     import {toStringXY} from 'ol/coordinate';\n *\n *     var coord = [7.85, 47.983333];\n *     var out = toStringXY(coord, 1);\n *     // out is now '7.8, 48.0'\n *\n * @param {Coordinate} coordinate Coordinate.\n * @param {number=} opt_fractionDigits The number of digits to include\n *    after the decimal point. Default is `0`.\n * @return {string} XY.\n * @api\n */\nexport function toStringXY(coordinate, opt_fractionDigits) {\n  return format(coordinate, '{x}, {y}', opt_fractionDigits);\n}\n","/**\n * @module ol/dom\n */\n\n\n/**\n * Create an html canvas element and returns its 2d context.\n * @param {number=} opt_width Canvas width.\n * @param {number=} opt_height Canvas height.\n * @return {CanvasRenderingContext2D} The context.\n */\nexport function createCanvasContext2D(opt_width, opt_height) {\n  const canvas = document.createElement('canvas');\n  if (opt_width) {\n    canvas.width = opt_width;\n  }\n  if (opt_height) {\n    canvas.height = opt_height;\n  }\n  return canvas.getContext('2d');\n}\n\n\n/**\n * Get the current computed width for the given element including margin,\n * padding and border.\n * Equivalent to jQuery's `$(el).outerWidth(true)`.\n * @param {!HTMLElement} element Element.\n * @return {number} The width.\n */\nexport function outerWidth(element) {\n  let width = element.offsetWidth;\n  const style = getComputedStyle(element);\n  width += parseInt(style.marginLeft, 10) + parseInt(style.marginRight, 10);\n\n  return width;\n}\n\n\n/**\n * Get the current computed height for the given element including margin,\n * padding and border.\n * Equivalent to jQuery's `$(el).outerHeight(true)`.\n * @param {!HTMLElement} element Element.\n * @return {number} The height.\n */\nexport function outerHeight(element) {\n  let height = element.offsetHeight;\n  const style = getComputedStyle(element);\n  height += parseInt(style.marginTop, 10) + parseInt(style.marginBottom, 10);\n\n  return height;\n}\n\n/**\n * @param {Node} newNode Node to replace old node\n * @param {Node} oldNode The node to be replaced\n */\nexport function replaceNode(newNode, oldNode) {\n  const parent = oldNode.parentNode;\n  if (parent) {\n    parent.replaceChild(newNode, oldNode);\n  }\n}\n\n/**\n * @param {Node} node The node to remove.\n * @returns {Node} The node that was removed or null.\n */\nexport function removeNode(node) {\n  return node && node.parentNode ? node.parentNode.removeChild(node) : null;\n}\n\n/**\n * @param {Node} node The node to remove the children from.\n */\nexport function removeChildren(node) {\n  while (node.lastChild) {\n    node.removeChild(node.lastChild);\n  }\n}\n\n/**\n * Transform the children of a parent node so they match the\n * provided list of children.  This function aims to efficiently\n * remove, add, and reorder child nodes while maintaining a simple\n * implementation (it is not guaranteed to minimize DOM operations).\n * @param {Node} node The parent node whose children need reworking.\n * @param {Array<Node>} children The desired children.\n */\nexport function replaceChildren(node, children) {\n  const oldChildren = node.childNodes;\n\n  for (let i = 0; true; ++i) {\n    const oldChild = oldChildren[i];\n    const newChild = children[i];\n\n    // check if our work is done\n    if (!oldChild && !newChild) {\n      break;\n    }\n\n    // check if children match\n    if (oldChild === newChild) {\n      continue;\n    }\n\n    // check if a new child needs to be added\n    if (!oldChild) {\n      node.appendChild(newChild);\n      continue;\n    }\n\n    // check if an old child needs to be removed\n    if (!newChild) {\n      node.removeChild(oldChild);\n      --i;\n      continue;\n    }\n\n    // reorder\n    node.insertBefore(newChild, oldChild);\n  }\n}\n","/**\n * @module ol/ImageState\n */\n\n/**\n * @enum {number}\n */\nexport default {\n  IDLE: 0,\n  LOADING: 1,\n  LOADED: 2,\n  ERROR: 3,\n  EMPTY: 4\n};\n","/**\n * @module ol/format/GeoJSON\n */\n\nimport {assert} from '../asserts.js';\nimport Feature from '../Feature.js';\nimport {transformGeometryWithOptions} from './Feature.js';\nimport JSONFeature from './JSONFeature.js';\nimport GeometryCollection from '../geom/GeometryCollection.js';\nimport LineString from '../geom/LineString.js';\nimport MultiLineString from '../geom/MultiLineString.js';\nimport MultiPoint from '../geom/MultiPoint.js';\nimport MultiPolygon from '../geom/MultiPolygon.js';\nimport Point from '../geom/Point.js';\nimport Polygon from '../geom/Polygon.js';\nimport {assign, isEmpty} from '../obj.js';\nimport {get as getProjection} from '../proj.js';\nimport GeometryType from '../geom/GeometryType.js';\n\n/**\n * @typedef {import(\"geojson\").GeoJSON} GeoJSONObject\n * @typedef {import(\"geojson\").Feature} GeoJSONFeature\n * @typedef {import(\"geojson\").FeatureCollection} GeoJSONFeatureCollection\n * @typedef {import(\"geojson\").Geometry} GeoJSONGeometry\n * @typedef {import(\"geojson\").Point} GeoJSONPoint\n * @typedef {import(\"geojson\").LineString} GeoJSONLineString\n * @typedef {import(\"geojson\").Polygon} GeoJSONPolygon\n * @typedef {import(\"geojson\").MultiPoint} GeoJSONMultiPoint\n * @typedef {import(\"geojson\").MultiLineString} GeoJSONMultiLineString\n * @typedef {import(\"geojson\").MultiPolygon} GeoJSONMultiPolygon\n * @typedef {import(\"geojson\").GeometryCollection} GeoJSONGeometryCollection\n */\n\n\n/**\n * @typedef {Object} Options\n * @property {import(\"../proj.js\").ProjectionLike} [dataProjection='EPSG:4326'] Default data projection.\n * @property {import(\"../proj.js\").ProjectionLike} [featureProjection] Projection for features read or\n * written by the format.  Options passed to read or write methods will take precedence.\n * @property {string} [geometryName] Geometry name to use when creating features.\n * @property {boolean} [extractGeometryName=false] Certain GeoJSON providers include\n * the geometry_name field in the feature GeoJSON. If set to `true` the GeoJSON reader\n * will look for that field to set the geometry name. If both this field is set to `true`\n * and a `geometryName` is provided, the `geometryName` will take precedence.\n */\n\n\n/**\n * @classdesc\n * Feature format for reading and writing data in the GeoJSON format.\n *\n  * @api\n */\nclass GeoJSON extends JSONFeature {\n\n  /**\n   * @param {Options=} opt_options Options.\n   */\n  constructor(opt_options) {\n\n    const options = opt_options ? opt_options : {};\n\n    super();\n\n    /**\n     * @inheritDoc\n     */\n    this.dataProjection = getProjection(\n      options.dataProjection ?\n        options.dataProjection : 'EPSG:4326');\n\n    if (options.featureProjection) {\n      this.defaultFeatureProjection = getProjection(options.featureProjection);\n    }\n\n    /**\n     * Name of the geometry attribute for features.\n     * @type {string|undefined}\n     * @private\n     */\n    this.geometryName_ = options.geometryName;\n\n    /**\n     * Look for the geometry name in the feature GeoJSON\n     * @type {boolean|undefined}\n     * @private\n     */\n    this.extractGeometryName_ = options.extractGeometryName;\n\n  }\n\n  /**\n   * @inheritDoc\n   */\n  readFeatureFromObject(object, opt_options) {\n    /**\n     * @type {GeoJSONFeature}\n     */\n    let geoJSONFeature = null;\n    if (object['type'] === 'Feature') {\n      geoJSONFeature = /** @type {GeoJSONFeature} */ (object);\n    } else {\n      geoJSONFeature = {\n        'type': 'Feature',\n        'geometry': /** @type {GeoJSONGeometry} */ (object),\n        'properties': null\n      };\n    }\n\n    const geometry = readGeometry(geoJSONFeature['geometry'], opt_options);\n    const feature = new Feature();\n    if (this.geometryName_) {\n      feature.setGeometryName(this.geometryName_);\n    } else if (this.extractGeometryName_ && 'geometry_name' in geoJSONFeature !== undefined) {\n      feature.setGeometryName(geoJSONFeature['geometry_name']);\n    }\n    feature.setGeometry(geometry);\n\n    if ('id' in geoJSONFeature) {\n      feature.setId(geoJSONFeature['id']);\n    }\n\n    if (geoJSONFeature['properties']) {\n      feature.setProperties(geoJSONFeature['properties'], true);\n    }\n    return feature;\n  }\n\n  /**\n   * @inheritDoc\n   */\n  readFeaturesFromObject(object, opt_options) {\n    const geoJSONObject = /** @type {GeoJSONObject} */ (object);\n    /** @type {Array<import(\"../Feature.js\").default>} */\n    let features = null;\n    if (geoJSONObject['type'] === 'FeatureCollection') {\n      const geoJSONFeatureCollection = /** @type {GeoJSONFeatureCollection} */ (object);\n      features = [];\n      const geoJSONFeatures = geoJSONFeatureCollection['features'];\n      for (let i = 0, ii = geoJSONFeatures.length; i < ii; ++i) {\n        features.push(this.readFeatureFromObject(geoJSONFeatures[i], opt_options));\n      }\n    } else {\n      features = [this.readFeatureFromObject(object, opt_options)];\n    }\n    return features;\n  }\n\n  /**\n   * @inheritDoc\n   */\n  readGeometryFromObject(object, opt_options) {\n    return readGeometry(/** @type {GeoJSONGeometry} */ (object), opt_options);\n  }\n\n  /**\n   * @inheritDoc\n   */\n  readProjectionFromObject(object) {\n    const crs = object['crs'];\n    let projection;\n    if (crs) {\n      if (crs['type'] == 'name') {\n        projection = getProjection(crs['properties']['name']);\n      } else {\n        assert(false, 36); // Unknown SRS type\n      }\n    } else {\n      projection = this.dataProjection;\n    }\n    return (\n      /** @type {import(\"../proj/Projection.js\").default} */ (projection)\n    );\n  }\n\n  /**\n   * Encode a feature as a GeoJSON Feature object.\n   *\n   * @param {import(\"../Feature.js\").default} feature Feature.\n   * @param {import(\"./Feature.js\").WriteOptions=} opt_options Write options.\n   * @return {GeoJSONFeature} Object.\n   * @override\n   * @api\n   */\n  writeFeatureObject(feature, opt_options) {\n    opt_options = this.adaptOptions(opt_options);\n\n    /** @type {GeoJSONFeature} */\n    const object = {\n      'type': 'Feature',\n      geometry: null,\n      properties: null\n    };\n\n    const id = feature.getId();\n    if (id !== undefined) {\n      object.id = id;\n    }\n\n    const geometry = feature.getGeometry();\n    if (geometry) {\n      object.geometry = writeGeometry(geometry, opt_options);\n    }\n\n    const properties = feature.getProperties();\n    delete properties[feature.getGeometryName()];\n    if (!isEmpty(properties)) {\n      object.properties = properties;\n    }\n    return object;\n  }\n\n  /**\n   * Encode an array of features as a GeoJSON object.\n   *\n   * @param {Array<import(\"../Feature.js\").default>} features Features.\n   * @param {import(\"./Feature.js\").WriteOptions=} opt_options Write options.\n   * @return {GeoJSONFeatureCollection} GeoJSON Object.\n   * @override\n   * @api\n   */\n  writeFeaturesObject(features, opt_options) {\n    opt_options = this.adaptOptions(opt_options);\n    const objects = [];\n    for (let i = 0, ii = features.length; i < ii; ++i) {\n      objects.push(this.writeFeatureObject(features[i], opt_options));\n    }\n    return {\n      type: 'FeatureCollection',\n      features: objects\n    };\n  }\n\n  /**\n   * Encode a geometry as a GeoJSON object.\n   *\n   * @param {import(\"../geom/Geometry.js\").default} geometry Geometry.\n   * @param {import(\"./Feature.js\").WriteOptions=} opt_options Write options.\n   * @return {GeoJSONGeometry|GeoJSONGeometryCollection} Object.\n   * @override\n   * @api\n   */\n  writeGeometryObject(geometry, opt_options) {\n    return writeGeometry(geometry, this.adaptOptions(opt_options));\n  }\n}\n\n\n/**\n * @param {GeoJSONGeometry|GeoJSONGeometryCollection} object Object.\n * @param {import(\"./Feature.js\").ReadOptions=} opt_options Read options.\n * @return {import(\"../geom/Geometry.js\").default} Geometry.\n */\nfunction readGeometry(object, opt_options) {\n  if (!object) {\n    return null;\n  }\n\n  /**\n   * @type {import(\"../geom/Geometry.js\").default}\n   */\n  let geometry;\n  switch (object['type']) {\n    case GeometryType.POINT: {\n      geometry = readPointGeometry(/** @type {GeoJSONPoint} */ (object));\n      break;\n    }\n    case GeometryType.LINE_STRING: {\n      geometry = readLineStringGeometry(/** @type {GeoJSONLineString} */ (object));\n      break;\n    }\n    case GeometryType.POLYGON: {\n      geometry = readPolygonGeometry(/** @type {GeoJSONPolygon} */ (object));\n      break;\n    }\n    case GeometryType.MULTI_POINT: {\n      geometry = readMultiPointGeometry(/** @type {GeoJSONMultiPoint} */ (object));\n      break;\n    }\n    case GeometryType.MULTI_LINE_STRING: {\n      geometry = readMultiLineStringGeometry(/** @type {GeoJSONMultiLineString} */ (object));\n      break;\n    }\n    case GeometryType.MULTI_POLYGON: {\n      geometry = readMultiPolygonGeometry(/** @type {GeoJSONMultiPolygon} */ (object));\n      break;\n    }\n    case GeometryType.GEOMETRY_COLLECTION: {\n      geometry = readGeometryCollectionGeometry(/** @type {GeoJSONGeometryCollection} */ (object));\n      break;\n    }\n    default: {\n      throw new Error('Unsupported GeoJSON type: ' + object.type);\n    }\n  }\n  return transformGeometryWithOptions(geometry, false, opt_options);\n}\n\n\n/**\n * @param {GeoJSONGeometryCollection} object Object.\n * @param {import(\"./Feature.js\").ReadOptions=} opt_options Read options.\n * @return {GeometryCollection} Geometry collection.\n */\nfunction readGeometryCollectionGeometry(object, opt_options) {\n  const geometries = object['geometries'].map(\n    /**\n     * @param {GeoJSONGeometry} geometry Geometry.\n     * @return {import(\"../geom/Geometry.js\").default} geometry Geometry.\n     */\n    function(geometry) {\n      return readGeometry(geometry, opt_options);\n    });\n  return new GeometryCollection(geometries);\n}\n\n\n/**\n * @param {GeoJSONPoint} object Object.\n * @return {Point} Point.\n */\nfunction readPointGeometry(object) {\n  return new Point(object['coordinates']);\n}\n\n\n/**\n * @param {GeoJSONLineString} object Object.\n * @return {LineString} LineString.\n */\nfunction readLineStringGeometry(object) {\n  return new LineString(object['coordinates']);\n}\n\n\n/**\n * @param {GeoJSONMultiLineString} object Object.\n * @return {MultiLineString} MultiLineString.\n */\nfunction readMultiLineStringGeometry(object) {\n  return new MultiLineString(object['coordinates']);\n}\n\n\n/**\n * @param {GeoJSONMultiPoint} object Object.\n * @return {MultiPoint} MultiPoint.\n */\nfunction readMultiPointGeometry(object) {\n  return new MultiPoint(object['coordinates']);\n}\n\n\n/**\n * @param {GeoJSONMultiPolygon} object Object.\n * @return {MultiPolygon} MultiPolygon.\n */\nfunction readMultiPolygonGeometry(object) {\n  return new MultiPolygon(object['coordinates']);\n}\n\n\n/**\n * @param {GeoJSONPolygon} object Object.\n * @return {Polygon} Polygon.\n */\nfunction readPolygonGeometry(object) {\n  return new Polygon(object['coordinates']);\n}\n\n\n/**\n * @param {import(\"../geom/Geometry.js\").default} geometry Geometry.\n * @param {import(\"./Feature.js\").WriteOptions=} opt_options Write options.\n * @return {GeoJSONGeometry} GeoJSON geometry.\n */\nfunction writeGeometry(geometry, opt_options) {\n  geometry = transformGeometryWithOptions(geometry, true, opt_options);\n  const type = geometry.getType();\n\n  /** @type {GeoJSONGeometry} */\n  let geoJSON;\n  switch (type) {\n    case GeometryType.POINT: {\n      geoJSON = writePointGeometry(/** @type {Point} */ (geometry), opt_options);\n      break;\n    }\n    case GeometryType.LINE_STRING: {\n      geoJSON = writeLineStringGeometry(/** @type {LineString} */ (geometry), opt_options);\n      break;\n    }\n    case GeometryType.POLYGON: {\n      geoJSON = writePolygonGeometry(/** @type {Polygon} */ (geometry), opt_options);\n      break;\n    }\n    case GeometryType.MULTI_POINT: {\n      geoJSON = writeMultiPointGeometry(/** @type {MultiPoint} */ (geometry), opt_options);\n      break;\n    }\n    case GeometryType.MULTI_LINE_STRING: {\n      geoJSON = writeMultiLineStringGeometry(/** @type {MultiLineString} */ (geometry), opt_options);\n      break;\n    }\n    case GeometryType.MULTI_POLYGON: {\n      geoJSON = writeMultiPolygonGeometry(/** @type {MultiPolygon} */ (geometry), opt_options);\n      break;\n    }\n    case GeometryType.GEOMETRY_COLLECTION: {\n      geoJSON = writeGeometryCollectionGeometry(/** @type {GeometryCollection} */ (geometry), opt_options);\n      break;\n    }\n    case GeometryType.CIRCLE: {\n      geoJSON = {\n        type: 'GeometryCollection',\n        geometries: []\n      };\n      break;\n    }\n    default: {\n      throw new Error('Unsupported geometry type: ' + type);\n    }\n  }\n  return geoJSON;\n}\n\n\n/**\n * @param {GeometryCollection} geometry Geometry.\n * @param {import(\"./Feature.js\").WriteOptions=} opt_options Write options.\n * @return {GeoJSONGeometryCollection} GeoJSON geometry collection.\n */\nfunction writeGeometryCollectionGeometry(geometry, opt_options) {\n  const geometries = geometry.getGeometriesArray().map(function(geometry) {\n    const options = assign({}, opt_options);\n    delete options.featureProjection;\n    return writeGeometry(geometry, options);\n  });\n  return {\n    type: 'GeometryCollection',\n    geometries: geometries\n  };\n}\n\n\n/**\n * @param {LineString} geometry Geometry.\n * @param {import(\"./Feature.js\").WriteOptions=} opt_options Write options.\n * @return {GeoJSONGeometry} GeoJSON geometry.\n */\nfunction writeLineStringGeometry(geometry, opt_options) {\n  return {\n    type: 'LineString',\n    coordinates: geometry.getCoordinates()\n  };\n}\n\n\n/**\n * @param {MultiLineString} geometry Geometry.\n * @param {import(\"./Feature.js\").WriteOptions=} opt_options Write options.\n * @return {GeoJSONGeometry} GeoJSON geometry.\n */\nfunction writeMultiLineStringGeometry(geometry, opt_options) {\n  return {\n    type: 'MultiLineString',\n    coordinates: geometry.getCoordinates()\n  };\n}\n\n\n/**\n * @param {MultiPoint} geometry Geometry.\n * @param {import(\"./Feature.js\").WriteOptions=} opt_options Write options.\n * @return {GeoJSONGeometry} GeoJSON geometry.\n */\nfunction writeMultiPointGeometry(geometry, opt_options) {\n  return {\n    type: 'MultiPoint',\n    coordinates: geometry.getCoordinates()\n  };\n}\n\n\n/**\n * @param {MultiPolygon} geometry Geometry.\n * @param {import(\"./Feature.js\").WriteOptions=} opt_options Write options.\n * @return {GeoJSONGeometry} GeoJSON geometry.\n */\nfunction writeMultiPolygonGeometry(geometry, opt_options) {\n  let right;\n  if (opt_options) {\n    right = opt_options.rightHanded;\n  }\n  return {\n    type: 'MultiPolygon',\n    coordinates: geometry.getCoordinates(right)\n  };\n}\n\n\n/**\n * @param {Point} geometry Geometry.\n * @param {import(\"./Feature.js\").WriteOptions=} opt_options Write options.\n * @return {GeoJSONGeometry} GeoJSON geometry.\n */\nfunction writePointGeometry(geometry, opt_options) {\n  return {\n    type: 'Point',\n    coordinates: geometry.getCoordinates()\n  };\n}\n\n\n/**\n * @param {Polygon} geometry Geometry.\n * @param {import(\"./Feature.js\").WriteOptions=} opt_options Write options.\n * @return {GeoJSONGeometry} GeoJSON geometry.\n */\nfunction writePolygonGeometry(geometry, opt_options) {\n  let right;\n  if (opt_options) {\n    right = opt_options.rightHanded;\n  }\n  return {\n    type: 'Polygon',\n    coordinates: geometry.getCoordinates(right)\n  };\n}\n\n\nexport default GeoJSON;\n","/**\n * @module ol/geom/Polygon\n */\nimport {extend} from '../array.js';\nimport {closestSquaredDistanceXY, getCenter} from '../extent.js';\nimport GeometryLayout from './GeometryLayout.js';\nimport GeometryType from './GeometryType.js';\nimport LinearRing from './LinearRing.js';\nimport Point from './Point.js';\nimport SimpleGeometry from './SimpleGeometry.js';\nimport {offset as sphereOffset} from '../sphere.js';\nimport {linearRings as linearRingsArea} from './flat/area.js';\nimport {assignClosestArrayPoint, arrayMaxSquaredDelta} from './flat/closest.js';\nimport {linearRingsContainsXY} from './flat/contains.js';\nimport {deflateCoordinatesArray} from './flat/deflate.js';\nimport {inflateCoordinatesArray} from './flat/inflate.js';\nimport {getInteriorPointOfArray} from './flat/interiorpoint.js';\nimport {intersectsLinearRingArray} from './flat/intersectsextent.js';\nimport {linearRingsAreOriented, orientLinearRings} from './flat/orient.js';\nimport {quantizeArray} from './flat/simplify.js';\nimport {modulo} from '../math.js';\n\n/**\n * @classdesc\n * Polygon geometry.\n *\n * @api\n */\nclass Polygon extends SimpleGeometry {\n\n  /**\n   * @param {!Array<Array<import(\"../coordinate.js\").Coordinate>>|!Array<number>} coordinates\n   *     Array of linear rings that define the polygon. The first linear ring of the\n   *     array defines the outer-boundary or surface of the polygon. Each subsequent\n   *     linear ring defines a hole in the surface of the polygon. A linear ring is\n   *     an array of vertices' coordinates where the first coordinate and the last are\n   *     equivalent. (For internal use, flat coordinates in combination with\n   *     `opt_layout` and `opt_ends` are also accepted.)\n   * @param {GeometryLayout=} opt_layout Layout.\n   * @param {Array<number>=} opt_ends Ends (for internal use with flat coordinates).\n   */\n  constructor(coordinates, opt_layout, opt_ends) {\n\n    super();\n\n    /**\n     * @type {Array<number>}\n     * @private\n     */\n    this.ends_ = [];\n\n    /**\n     * @private\n     * @type {number}\n     */\n    this.flatInteriorPointRevision_ = -1;\n\n    /**\n     * @private\n     * @type {import(\"../coordinate.js\").Coordinate}\n     */\n    this.flatInteriorPoint_ = null;\n\n    /**\n     * @private\n     * @type {number}\n     */\n    this.maxDelta_ = -1;\n\n    /**\n     * @private\n     * @type {number}\n     */\n    this.maxDeltaRevision_ = -1;\n\n    /**\n     * @private\n     * @type {number}\n     */\n    this.orientedRevision_ = -1;\n\n    /**\n     * @private\n     * @type {Array<number>}\n     */\n    this.orientedFlatCoordinates_ = null;\n\n    if (opt_layout !== undefined && opt_ends) {\n      this.setFlatCoordinates(opt_layout, /** @type {Array<number>} */ (coordinates));\n      this.ends_ = opt_ends;\n    } else {\n      this.setCoordinates(/** @type {Array<Array<import(\"../coordinate.js\").Coordinate>>} */ (coordinates), opt_layout);\n    }\n\n  }\n\n  /**\n   * Append the passed linear ring to this polygon.\n   * @param {LinearRing} linearRing Linear ring.\n   * @api\n   */\n  appendLinearRing(linearRing) {\n    if (!this.flatCoordinates) {\n      this.flatCoordinates = linearRing.getFlatCoordinates().slice();\n    } else {\n      extend(this.flatCoordinates, linearRing.getFlatCoordinates());\n    }\n    this.ends_.push(this.flatCoordinates.length);\n    this.changed();\n  }\n\n  /**\n   * Make a complete copy of the geometry.\n   * @return {!Polygon} Clone.\n   * @override\n   * @api\n   */\n  clone() {\n    return new Polygon(this.flatCoordinates.slice(), this.layout, this.ends_.slice());\n  }\n\n  /**\n   * @inheritDoc\n   */\n  closestPointXY(x, y, closestPoint, minSquaredDistance) {\n    if (minSquaredDistance < closestSquaredDistanceXY(this.getExtent(), x, y)) {\n      return minSquaredDistance;\n    }\n    if (this.maxDeltaRevision_ != this.getRevision()) {\n      this.maxDelta_ = Math.sqrt(arrayMaxSquaredDelta(\n        this.flatCoordinates, 0, this.ends_, this.stride, 0));\n      this.maxDeltaRevision_ = this.getRevision();\n    }\n    return assignClosestArrayPoint(\n      this.flatCoordinates, 0, this.ends_, this.stride,\n      this.maxDelta_, true, x, y, closestPoint, minSquaredDistance);\n  }\n\n  /**\n   * @inheritDoc\n   */\n  containsXY(x, y) {\n    return linearRingsContainsXY(this.getOrientedFlatCoordinates(), 0, this.ends_, this.stride, x, y);\n  }\n\n  /**\n   * Return the area of the polygon on projected plane.\n   * @return {number} Area (on projected plane).\n   * @api\n   */\n  getArea() {\n    return linearRingsArea(this.getOrientedFlatCoordinates(), 0, this.ends_, this.stride);\n  }\n\n  /**\n   * Get the coordinate array for this geometry.  This array has the structure\n   * of a GeoJSON coordinate array for polygons.\n   *\n   * @param {boolean=} opt_right Orient coordinates according to the right-hand\n   *     rule (counter-clockwise for exterior and clockwise for interior rings).\n   *     If `false`, coordinates will be oriented according to the left-hand rule\n   *     (clockwise for exterior and counter-clockwise for interior rings).\n   *     By default, coordinate orientation will depend on how the geometry was\n   *     constructed.\n   * @return {Array<Array<import(\"../coordinate.js\").Coordinate>>} Coordinates.\n   * @override\n   * @api\n   */\n  getCoordinates(opt_right) {\n    let flatCoordinates;\n    if (opt_right !== undefined) {\n      flatCoordinates = this.getOrientedFlatCoordinates().slice();\n      orientLinearRings(\n        flatCoordinates, 0, this.ends_, this.stride, opt_right);\n    } else {\n      flatCoordinates = this.flatCoordinates;\n    }\n\n    return inflateCoordinatesArray(\n      flatCoordinates, 0, this.ends_, this.stride);\n  }\n\n  /**\n   * @return {Array<number>} Ends.\n   */\n  getEnds() {\n    return this.ends_;\n  }\n\n  /**\n   * @return {Array<number>} Interior point.\n   */\n  getFlatInteriorPoint() {\n    if (this.flatInteriorPointRevision_ != this.getRevision()) {\n      const flatCenter = getCenter(this.getExtent());\n      this.flatInteriorPoint_ = getInteriorPointOfArray(\n        this.getOrientedFlatCoordinates(), 0, this.ends_, this.stride,\n        flatCenter, 0);\n      this.flatInteriorPointRevision_ = this.getRevision();\n    }\n    return this.flatInteriorPoint_;\n  }\n\n  /**\n   * Return an interior point of the polygon.\n   * @return {Point} Interior point as XYM coordinate, where M is the\n   * length of the horizontal intersection that the point belongs to.\n   * @api\n   */\n  getInteriorPoint() {\n    return new Point(this.getFlatInteriorPoint(), GeometryLayout.XYM);\n  }\n\n  /**\n   * Return the number of rings of the polygon,  this includes the exterior\n   * ring and any interior rings.\n   *\n   * @return {number} Number of rings.\n   * @api\n   */\n  getLinearRingCount() {\n    return this.ends_.length;\n  }\n\n  /**\n   * Return the Nth linear ring of the polygon geometry. Return `null` if the\n   * given index is out of range.\n   * The exterior linear ring is available at index `0` and the interior rings\n   * at index `1` and beyond.\n   *\n   * @param {number} index Index.\n   * @return {LinearRing} Linear ring.\n   * @api\n   */\n  getLinearRing(index) {\n    if (index < 0 || this.ends_.length <= index) {\n      return null;\n    }\n    return new LinearRing(this.flatCoordinates.slice(\n      index === 0 ? 0 : this.ends_[index - 1], this.ends_[index]), this.layout);\n  }\n\n  /**\n   * Return the linear rings of the polygon.\n   * @return {Array<LinearRing>} Linear rings.\n   * @api\n   */\n  getLinearRings() {\n    const layout = this.layout;\n    const flatCoordinates = this.flatCoordinates;\n    const ends = this.ends_;\n    const linearRings = [];\n    let offset = 0;\n    for (let i = 0, ii = ends.length; i < ii; ++i) {\n      const end = ends[i];\n      const linearRing = new LinearRing(flatCoordinates.slice(offset, end), layout);\n      linearRings.push(linearRing);\n      offset = end;\n    }\n    return linearRings;\n  }\n\n  /**\n   * @return {Array<number>} Oriented flat coordinates.\n   */\n  getOrientedFlatCoordinates() {\n    if (this.orientedRevision_ != this.getRevision()) {\n      const flatCoordinates = this.flatCoordinates;\n      if (linearRingsAreOriented(\n        flatCoordinates, 0, this.ends_, this.stride)) {\n        this.orientedFlatCoordinates_ = flatCoordinates;\n      } else {\n        this.orientedFlatCoordinates_ = flatCoordinates.slice();\n        this.orientedFlatCoordinates_.length =\n            orientLinearRings(\n              this.orientedFlatCoordinates_, 0, this.ends_, this.stride);\n      }\n      this.orientedRevision_ = this.getRevision();\n    }\n    return this.orientedFlatCoordinates_;\n  }\n\n  /**\n   * @inheritDoc\n   */\n  getSimplifiedGeometryInternal(squaredTolerance) {\n    const simplifiedFlatCoordinates = [];\n    const simplifiedEnds = [];\n    simplifiedFlatCoordinates.length = quantizeArray(\n      this.flatCoordinates, 0, this.ends_, this.stride,\n      Math.sqrt(squaredTolerance),\n      simplifiedFlatCoordinates, 0, simplifiedEnds);\n    return new Polygon(simplifiedFlatCoordinates, GeometryLayout.XY, simplifiedEnds);\n  }\n\n  /**\n   * @inheritDoc\n   * @api\n   */\n  getType() {\n    return GeometryType.POLYGON;\n  }\n\n  /**\n   * @inheritDoc\n   * @api\n   */\n  intersectsExtent(extent) {\n    return intersectsLinearRingArray(\n      this.getOrientedFlatCoordinates(), 0, this.ends_, this.stride, extent);\n  }\n\n  /**\n   * Set the coordinates of the polygon.\n   * @param {!Array<Array<import(\"../coordinate.js\").Coordinate>>} coordinates Coordinates.\n   * @param {GeometryLayout=} opt_layout Layout.\n   * @override\n   * @api\n   */\n  setCoordinates(coordinates, opt_layout) {\n    this.setLayout(opt_layout, coordinates, 2);\n    if (!this.flatCoordinates) {\n      this.flatCoordinates = [];\n    }\n    const ends = deflateCoordinatesArray(\n      this.flatCoordinates, 0, coordinates, this.stride, this.ends_);\n    this.flatCoordinates.length = ends.length === 0 ? 0 : ends[ends.length - 1];\n    this.changed();\n  }\n}\n\n\nexport default Polygon;\n\n\n/**\n * Create an approximation of a circle on the surface of a sphere.\n * @param {import(\"../coordinate.js\").Coordinate} center Center (`[lon, lat]` in degrees).\n * @param {number} radius The great-circle distance from the center to\n *     the polygon vertices.\n * @param {number=} opt_n Optional number of vertices for the resulting\n *     polygon. Default is `32`.\n * @param {number=} opt_sphereRadius Optional radius for the sphere (defaults to\n *     the Earth's mean radius using the WGS84 ellipsoid).\n * @return {Polygon} The \"circular\" polygon.\n * @api\n */\nexport function circular(center, radius, opt_n, opt_sphereRadius) {\n  const n = opt_n ? opt_n : 32;\n  /** @type {Array<number>} */\n  const flatCoordinates = [];\n  for (let i = 0; i < n; ++i) {\n    extend(flatCoordinates, sphereOffset(center, radius, 2 * Math.PI * i / n, opt_sphereRadius));\n  }\n  flatCoordinates.push(flatCoordinates[0], flatCoordinates[1]);\n  return new Polygon(flatCoordinates, GeometryLayout.XY, [flatCoordinates.length]);\n}\n\n\n/**\n * Create a polygon from an extent. The layout used is `XY`.\n * @param {import(\"../extent.js\").Extent} extent The extent.\n * @return {Polygon} The polygon.\n * @api\n */\nexport function fromExtent(extent) {\n  const minX = extent[0];\n  const minY = extent[1];\n  const maxX = extent[2];\n  const maxY = extent[3];\n  const flatCoordinates =\n      [minX, minY, minX, maxY, maxX, maxY, maxX, minY, minX, minY];\n  return new Polygon(flatCoordinates, GeometryLayout.XY, [flatCoordinates.length]);\n}\n\n\n/**\n * Create a regular polygon from a circle.\n * @param {import(\"./Circle.js\").default} circle Circle geometry.\n * @param {number=} opt_sides Number of sides of the polygon. Default is 32.\n * @param {number=} opt_angle Start angle for the first vertex of the polygon in\n *     radians. Default is 0.\n * @return {Polygon} Polygon geometry.\n * @api\n */\nexport function fromCircle(circle, opt_sides, opt_angle) {\n  const sides = opt_sides ? opt_sides : 32;\n  const stride = circle.getStride();\n  const layout = circle.getLayout();\n  const center = circle.getCenter();\n  const arrayLength = stride * (sides + 1);\n  const flatCoordinates = new Array(arrayLength);\n  for (let i = 0; i < arrayLength; i += stride) {\n    flatCoordinates[i] = 0;\n    flatCoordinates[i + 1] = 0;\n    for (let j = 2; j < stride; j++) {\n      flatCoordinates[i + j] = center[j];\n    }\n  }\n  const ends = [flatCoordinates.length];\n  const polygon = new Polygon(flatCoordinates, layout, ends);\n  makeRegular(polygon, center, circle.getRadius(), opt_angle);\n  return polygon;\n}\n\n\n/**\n * Modify the coordinates of a polygon to make it a regular polygon.\n * @param {Polygon} polygon Polygon geometry.\n * @param {import(\"../coordinate.js\").Coordinate} center Center of the regular polygon.\n * @param {number} radius Radius of the regular polygon.\n * @param {number=} opt_angle Start angle for the first vertex of the polygon in\n *     radians. Default is 0.\n */\nexport function makeRegular(polygon, center, radius, opt_angle) {\n  const flatCoordinates = polygon.getFlatCoordinates();\n  const stride = polygon.getStride();\n  const sides = flatCoordinates.length / stride - 1;\n  const startAngle = opt_angle ? opt_angle : 0;\n  for (let i = 0; i <= sides; ++i) {\n    const offset = i * stride;\n    const angle = startAngle + (modulo(i, sides) * 2 * Math.PI / sides);\n    flatCoordinates[offset] = center[0] + (radius * Math.cos(angle));\n    flatCoordinates[offset + 1] = center[1] + (radius * Math.sin(angle));\n  }\n  polygon.changed();\n}\n","/**\n * @module ol/geom/LineString\n */\nimport {extend} from '../array.js';\nimport {closestSquaredDistanceXY} from '../extent.js';\nimport GeometryLayout from './GeometryLayout.js';\nimport GeometryType from './GeometryType.js';\nimport SimpleGeometry from './SimpleGeometry.js';\nimport {assignClosestPoint, maxSquaredDelta} from './flat/closest.js';\nimport {deflateCoordinates} from './flat/deflate.js';\nimport {inflateCoordinates} from './flat/inflate.js';\nimport {interpolatePoint, lineStringCoordinateAtM} from './flat/interpolate.js';\nimport {intersectsLineString} from './flat/intersectsextent.js';\nimport {lineStringLength} from './flat/length.js';\nimport {forEach as forEachSegment} from './flat/segments.js';\nimport {douglasPeucker} from './flat/simplify.js';\n\n/**\n * @classdesc\n * Linestring geometry.\n *\n * @api\n */\nclass LineString extends SimpleGeometry {\n\n  /**\n   * @param {Array<import(\"../coordinate.js\").Coordinate>|Array<number>} coordinates Coordinates.\n   *     For internal use, flat coordinates in combination with `opt_layout` are also accepted.\n   * @param {GeometryLayout=} opt_layout Layout.\n   */\n  constructor(coordinates, opt_layout) {\n\n    super();\n\n    /**\n     * @private\n     * @type {import(\"../coordinate.js\").Coordinate}\n     */\n    this.flatMidpoint_ = null;\n\n    /**\n     * @private\n     * @type {number}\n     */\n    this.flatMidpointRevision_ = -1;\n\n    /**\n     * @private\n     * @type {number}\n     */\n    this.maxDelta_ = -1;\n\n    /**\n     * @private\n     * @type {number}\n     */\n    this.maxDeltaRevision_ = -1;\n\n    if (opt_layout !== undefined && !Array.isArray(coordinates[0])) {\n      this.setFlatCoordinates(opt_layout, /** @type {Array<number>} */ (coordinates));\n    } else {\n      this.setCoordinates(/** @type {Array<import(\"../coordinate.js\").Coordinate>} */ (coordinates), opt_layout);\n    }\n\n  }\n\n  /**\n   * Append the passed coordinate to the coordinates of the linestring.\n   * @param {import(\"../coordinate.js\").Coordinate} coordinate Coordinate.\n   * @api\n   */\n  appendCoordinate(coordinate) {\n    if (!this.flatCoordinates) {\n      this.flatCoordinates = coordinate.slice();\n    } else {\n      extend(this.flatCoordinates, coordinate);\n    }\n    this.changed();\n  }\n\n  /**\n   * Make a complete copy of the geometry.\n   * @return {!LineString} Clone.\n   * @override\n   * @api\n   */\n  clone() {\n    return new LineString(this.flatCoordinates.slice(), this.layout);\n  }\n\n  /**\n   * @inheritDoc\n   */\n  closestPointXY(x, y, closestPoint, minSquaredDistance) {\n    if (minSquaredDistance < closestSquaredDistanceXY(this.getExtent(), x, y)) {\n      return minSquaredDistance;\n    }\n    if (this.maxDeltaRevision_ != this.getRevision()) {\n      this.maxDelta_ = Math.sqrt(maxSquaredDelta(\n        this.flatCoordinates, 0, this.flatCoordinates.length, this.stride, 0));\n      this.maxDeltaRevision_ = this.getRevision();\n    }\n    return assignClosestPoint(\n      this.flatCoordinates, 0, this.flatCoordinates.length, this.stride,\n      this.maxDelta_, false, x, y, closestPoint, minSquaredDistance);\n  }\n\n  /**\n   * Iterate over each segment, calling the provided callback.\n   * If the callback returns a truthy value the function returns that\n   * value immediately. Otherwise the function returns `false`.\n   *\n   * @param {function(this: S, import(\"../coordinate.js\").Coordinate, import(\"../coordinate.js\").Coordinate): T} callback Function\n   *     called for each segment. The function will receive two arguments, the start and end coordinates of the segment.\n   * @return {T|boolean} Value.\n   * @template T,S\n   * @api\n   */\n  forEachSegment(callback) {\n    return forEachSegment(this.flatCoordinates, 0, this.flatCoordinates.length, this.stride, callback);\n  }\n\n  /**\n   * Returns the coordinate at `m` using linear interpolation, or `null` if no\n   * such coordinate exists.\n   *\n   * `opt_extrapolate` controls extrapolation beyond the range of Ms in the\n   * MultiLineString. If `opt_extrapolate` is `true` then Ms less than the first\n   * M will return the first coordinate and Ms greater than the last M will\n   * return the last coordinate.\n   *\n   * @param {number} m M.\n   * @param {boolean=} opt_extrapolate Extrapolate. Default is `false`.\n   * @return {import(\"../coordinate.js\").Coordinate} Coordinate.\n   * @api\n   */\n  getCoordinateAtM(m, opt_extrapolate) {\n    if (this.layout != GeometryLayout.XYM &&\n        this.layout != GeometryLayout.XYZM) {\n      return null;\n    }\n    const extrapolate = opt_extrapolate !== undefined ? opt_extrapolate : false;\n    return lineStringCoordinateAtM(this.flatCoordinates, 0,\n      this.flatCoordinates.length, this.stride, m, extrapolate);\n  }\n\n  /**\n   * Return the coordinates of the linestring.\n   * @return {Array<import(\"../coordinate.js\").Coordinate>} Coordinates.\n   * @override\n   * @api\n   */\n  getCoordinates() {\n    return inflateCoordinates(\n      this.flatCoordinates, 0, this.flatCoordinates.length, this.stride);\n  }\n\n  /**\n   * Return the coordinate at the provided fraction along the linestring.\n   * The `fraction` is a number between 0 and 1, where 0 is the start of the\n   * linestring and 1 is the end.\n   * @param {number} fraction Fraction.\n   * @param {import(\"../coordinate.js\").Coordinate=} opt_dest Optional coordinate whose values will\n   *     be modified. If not provided, a new coordinate will be returned.\n   * @return {import(\"../coordinate.js\").Coordinate} Coordinate of the interpolated point.\n   * @api\n   */\n  getCoordinateAt(fraction, opt_dest) {\n    return interpolatePoint(\n      this.flatCoordinates, 0, this.flatCoordinates.length, this.stride,\n      fraction, opt_dest);\n  }\n\n  /**\n   * Return the length of the linestring on projected plane.\n   * @return {number} Length (on projected plane).\n   * @api\n   */\n  getLength() {\n    return lineStringLength(\n      this.flatCoordinates, 0, this.flatCoordinates.length, this.stride);\n  }\n\n  /**\n   * @return {Array<number>} Flat midpoint.\n   */\n  getFlatMidpoint() {\n    if (this.flatMidpointRevision_ != this.getRevision()) {\n      this.flatMidpoint_ = this.getCoordinateAt(0.5, this.flatMidpoint_);\n      this.flatMidpointRevision_ = this.getRevision();\n    }\n    return this.flatMidpoint_;\n  }\n\n  /**\n   * @inheritDoc\n   */\n  getSimplifiedGeometryInternal(squaredTolerance) {\n    const simplifiedFlatCoordinates = [];\n    simplifiedFlatCoordinates.length = douglasPeucker(\n      this.flatCoordinates, 0, this.flatCoordinates.length, this.stride,\n      squaredTolerance, simplifiedFlatCoordinates, 0);\n    return new LineString(simplifiedFlatCoordinates, GeometryLayout.XY);\n  }\n\n  /**\n   * @inheritDoc\n   * @api\n   */\n  getType() {\n    return GeometryType.LINE_STRING;\n  }\n\n  /**\n   * @inheritDoc\n   * @api\n   */\n  intersectsExtent(extent) {\n    return intersectsLineString(\n      this.flatCoordinates, 0, this.flatCoordinates.length, this.stride,\n      extent);\n  }\n\n  /**\n   * Set the coordinates of the linestring.\n   * @param {!Array<import(\"../coordinate.js\").Coordinate>} coordinates Coordinates.\n   * @param {GeometryLayout=} opt_layout Layout.\n   * @override\n   * @api\n   */\n  setCoordinates(coordinates, opt_layout) {\n    this.setLayout(opt_layout, coordinates, 1);\n    if (!this.flatCoordinates) {\n      this.flatCoordinates = [];\n    }\n    this.flatCoordinates.length = deflateCoordinates(\n      this.flatCoordinates, 0, coordinates, this.stride);\n    this.changed();\n  }\n}\n\n\nexport default LineString;\n","/**\n * @module ol/Object\n */\nimport {getUid} from './util.js';\nimport ObjectEventType from './ObjectEventType.js';\nimport Observable from './Observable.js';\nimport Event from './events/Event.js';\nimport {assign} from './obj.js';\n\n\n/**\n * @classdesc\n * Events emitted by {@link module:ol/Object~BaseObject} instances are instances of this type.\n */\nexport class ObjectEvent extends Event {\n\n  /**\n   * @param {string} type The event type.\n   * @param {string} key The property name.\n   * @param {*} oldValue The old value for `key`.\n   */\n  constructor(type, key, oldValue) {\n    super(type);\n\n    /**\n     * The name of the property whose value is changing.\n     * @type {string}\n     * @api\n     */\n    this.key = key;\n\n    /**\n     * The old value. To get the new value use `e.target.get(e.key)` where\n     * `e` is the event object.\n     * @type {*}\n     * @api\n     */\n    this.oldValue = oldValue;\n\n  }\n\n}\n\n\n/**\n * @classdesc\n * Abstract base class; normally only used for creating subclasses and not\n * instantiated in apps.\n * Most non-trivial classes inherit from this.\n *\n * This extends {@link module:ol/Observable} with observable\n * properties, where each property is observable as well as the object as a\n * whole.\n *\n * Classes that inherit from this have pre-defined properties, to which you can\n * add your owns. The pre-defined properties are listed in this documentation as\n * 'Observable Properties', and have their own accessors; for example,\n * {@link module:ol/Map~Map} has a `target` property, accessed with\n * `getTarget()` and changed with `setTarget()`. Not all properties are however\n * settable. There are also general-purpose accessors `get()` and `set()`. For\n * example, `get('target')` is equivalent to `getTarget()`.\n *\n * The `set` accessors trigger a change event, and you can monitor this by\n * registering a listener. For example, {@link module:ol/View~View} has a\n * `center` property, so `view.on('change:center', function(evt) {...});` would\n * call the function whenever the value of the center property changes. Within\n * the function, `evt.target` would be the view, so `evt.target.getCenter()`\n * would return the new center.\n *\n * You can add your own observable properties with\n * `object.set('prop', 'value')`, and retrieve that with `object.get('prop')`.\n * You can listen for changes on that property value with\n * `object.on('change:prop', listener)`. You can get a list of all\n * properties with {@link module:ol/Object~BaseObject#getProperties}.\n *\n * Note that the observable properties are separate from standard JS properties.\n * You can, for example, give your map object a title with\n * `map.title='New title'` and with `map.set('title', 'Another title')`. The\n * first will be a `hasOwnProperty`; the second will appear in\n * `getProperties()`. Only the second is observable.\n *\n * Properties can be deleted by using the unset method. E.g.\n * object.unset('foo').\n *\n * @fires ObjectEvent\n * @api\n */\nclass BaseObject extends Observable {\n\n  /**\n   * @param {Object<string, *>=} opt_values An object with key-value pairs.\n   */\n  constructor(opt_values) {\n    super();\n\n    // Call {@link module:ol/util~getUid} to ensure that the order of objects' ids is\n    // the same as the order in which they were created.  This also helps to\n    // ensure that object properties are always added in the same order, which\n    // helps many JavaScript engines generate faster code.\n    getUid(this);\n\n    /**\n     * @private\n     * @type {!Object<string, *>}\n     */\n    this.values_ = {};\n\n    if (opt_values !== undefined) {\n      this.setProperties(opt_values);\n    }\n  }\n\n  /**\n   * Gets a value.\n   * @param {string} key Key name.\n   * @return {*} Value.\n   * @api\n   */\n  get(key) {\n    let value;\n    if (this.values_.hasOwnProperty(key)) {\n      value = this.values_[key];\n    }\n    return value;\n  }\n\n  /**\n   * Get a list of object property names.\n   * @return {Array<string>} List of property names.\n   * @api\n   */\n  getKeys() {\n    return Object.keys(this.values_);\n  }\n\n  /**\n   * Get an object of all property names and values.\n   * @return {Object<string, *>} Object.\n   * @api\n   */\n  getProperties() {\n    return assign({}, this.values_);\n  }\n\n  /**\n   * @param {string} key Key name.\n   * @param {*} oldValue Old value.\n   */\n  notify(key, oldValue) {\n    let eventType;\n    eventType = getChangeEventType(key);\n    this.dispatchEvent(new ObjectEvent(eventType, key, oldValue));\n    eventType = ObjectEventType.PROPERTYCHANGE;\n    this.dispatchEvent(new ObjectEvent(eventType, key, oldValue));\n  }\n\n  /**\n   * Sets a value.\n   * @param {string} key Key name.\n   * @param {*} value Value.\n   * @param {boolean=} opt_silent Update without triggering an event.\n   * @api\n   */\n  set(key, value, opt_silent) {\n    if (opt_silent) {\n      this.values_[key] = value;\n    } else {\n      const oldValue = this.values_[key];\n      this.values_[key] = value;\n      if (oldValue !== value) {\n        this.notify(key, oldValue);\n      }\n    }\n  }\n\n  /**\n   * Sets a collection of key-value pairs.  Note that this changes any existing\n   * properties and adds new ones (it does not remove any existing properties).\n   * @param {Object<string, *>} values Values.\n   * @param {boolean=} opt_silent Update without triggering an event.\n   * @api\n   */\n  setProperties(values, opt_silent) {\n    for (const key in values) {\n      this.set(key, values[key], opt_silent);\n    }\n  }\n\n  /**\n   * Unsets a property.\n   * @param {string} key Key name.\n   * @param {boolean=} opt_silent Unset without triggering an event.\n   * @api\n   */\n  unset(key, opt_silent) {\n    if (key in this.values_) {\n      const oldValue = this.values_[key];\n      delete this.values_[key];\n      if (!opt_silent) {\n        this.notify(key, oldValue);\n      }\n    }\n  }\n}\n\n\n/**\n * @type {Object<string, string>}\n */\nconst changeEventTypeCache = {};\n\n\n/**\n * @param {string} key Key name.\n * @return {string} Change name.\n */\nexport function getChangeEventType(key) {\n  return changeEventTypeCache.hasOwnProperty(key) ?\n    changeEventTypeCache[key] :\n    (changeEventTypeCache[key] = 'change:' + key);\n}\n\n\nexport default BaseObject;\n","/**\n * @module ol/functions\n */\n\nimport {equals as arrayEquals} from './array.js';\n\n/**\n * Always returns true.\n * @returns {boolean} true.\n */\nexport function TRUE() {\n  return true;\n}\n\n/**\n * Always returns false.\n * @returns {boolean} false.\n */\nexport function FALSE() {\n  return false;\n}\n\n/**\n * A reusable function, used e.g. as a default for callbacks.\n *\n * @return {void} Nothing.\n */\nexport function VOID() {}\n\n/**\n * Wrap a function in another function that remembers the last return.  If the\n * returned function is called twice in a row with the same arguments and the same\n * this object, it will return the value from the first call in the second call.\n *\n * @param {function(...any): ReturnType} fn The function to memoize.\n * @return {function(...any): ReturnType} The memoized function.\n * @template ReturnType\n */\nexport function memoizeOne(fn) {\n  let called = false;\n\n  /** @type ReturnType */\n  let lastResult;\n\n  /** @type Array<any> */\n  let lastArgs;\n\n  let lastThis;\n\n  return function() {\n    const nextArgs = Array.prototype.slice.call(arguments);\n    if (!called || this !== lastThis || !arrayEquals(nextArgs, lastArgs)) {\n      called = true;\n      lastThis = this;\n      lastArgs = nextArgs;\n      lastResult = fn.apply(this, arguments);\n    }\n    return lastResult;\n  };\n}\n","/**\n * @module ol/events/condition\n */\nimport MapBrowserEventType from '../MapBrowserEventType.js';\nimport {assert} from '../asserts.js';\nimport {TRUE, FALSE} from '../functions.js';\nimport {WEBKIT, MAC} from '../has.js';\n\n\n/**\n * A function that takes an {@link module:ol/MapBrowserEvent} and returns a\n * `{boolean}`. If the condition is met, true should be returned.\n *\n * @typedef {function(this: ?, import(\"../MapBrowserEvent.js\").default): boolean} Condition\n */\n\n\n/**\n * Return `true` if only the alt-key is pressed, `false` otherwise (e.g. when\n * additionally the shift-key is pressed).\n *\n * @param {import(\"../MapBrowserEvent.js\").default} mapBrowserEvent Map browser event.\n * @return {boolean} True if only the alt key is pressed.\n * @api\n */\nexport const altKeyOnly = function(mapBrowserEvent) {\n  const originalEvent = /** @type {KeyboardEvent|MouseEvent|TouchEvent} */ (mapBrowserEvent.originalEvent);\n  return (\n    originalEvent.altKey &&\n      !(originalEvent.metaKey || originalEvent.ctrlKey) &&\n      !originalEvent.shiftKey);\n};\n\n\n/**\n * Return `true` if only the alt-key and shift-key is pressed, `false` otherwise\n * (e.g. when additionally the platform-modifier-key is pressed).\n *\n * @param {import(\"../MapBrowserEvent.js\").default} mapBrowserEvent Map browser event.\n * @return {boolean} True if only the alt and shift keys are pressed.\n * @api\n */\nexport const altShiftKeysOnly = function(mapBrowserEvent) {\n  const originalEvent = /** @type {KeyboardEvent|MouseEvent|TouchEvent} */ (mapBrowserEvent.originalEvent);\n  return (\n    originalEvent.altKey &&\n      !(originalEvent.metaKey || originalEvent.ctrlKey) &&\n      originalEvent.shiftKey);\n};\n\n\n/**\n * Return `true` if the map has the focus. This condition requires a map target\n * element with a `tabindex` attribute, e.g. `<div id=\"map\" tabindex=\"1\">`.\n *\n * @param {import(\"../MapBrowserEvent.js\").default} event Map browser event.\n * @return {boolean} The map has the focus.\n * @api\n */\nexport const focus = function(event) {\n  return event.target.getTargetElement() === document.activeElement;\n};\n\n\n/**\n * Return always true.\n *\n * @param {import(\"../MapBrowserEvent.js\").default} mapBrowserEvent Map browser event.\n * @return {boolean} True.\n * @api\n */\nexport const always = TRUE;\n\n\n/**\n * Return `true` if the event is a `click` event, `false` otherwise.\n *\n * @param {import(\"../MapBrowserEvent.js\").default} mapBrowserEvent Map browser event.\n * @return {boolean} True if the event is a map `click` event.\n * @api\n */\nexport const click = function(mapBrowserEvent) {\n  return mapBrowserEvent.type == MapBrowserEventType.CLICK;\n};\n\n\n/**\n * Return `true` if the event has an \"action\"-producing mouse button.\n *\n * By definition, this includes left-click on windows/linux, and left-click\n * without the ctrl key on Macs.\n *\n * @param {import(\"../MapBrowserEvent.js\").default} mapBrowserEvent Map browser event.\n * @return {boolean} The result.\n */\nexport const mouseActionButton = function(mapBrowserEvent) {\n  const originalEvent = /** @type {MouseEvent} */ (mapBrowserEvent.originalEvent);\n  return originalEvent.button == 0 &&\n      !(WEBKIT && MAC && originalEvent.ctrlKey);\n};\n\n\n/**\n * Return always false.\n *\n * @param {import(\"../MapBrowserEvent.js\").default} mapBrowserEvent Map browser event.\n * @return {boolean} False.\n * @api\n */\nexport const never = FALSE;\n\n\n/**\n * Return `true` if the browser event is a `pointermove` event, `false`\n * otherwise.\n *\n * @param {import(\"../MapBrowserEvent.js\").default} mapBrowserEvent Map browser event.\n * @return {boolean} True if the browser event is a `pointermove` event.\n * @api\n */\nexport const pointerMove = function(mapBrowserEvent) {\n  return mapBrowserEvent.type == 'pointermove';\n};\n\n\n/**\n * Return `true` if the event is a map `singleclick` event, `false` otherwise.\n *\n * @param {import(\"../MapBrowserEvent.js\").default} mapBrowserEvent Map browser event.\n * @return {boolean} True if the event is a map `singleclick` event.\n * @api\n */\nexport const singleClick = function(mapBrowserEvent) {\n  return mapBrowserEvent.type == MapBrowserEventType.SINGLECLICK;\n};\n\n\n/**\n * Return `true` if the event is a map `dblclick` event, `false` otherwise.\n *\n * @param {import(\"../MapBrowserEvent.js\").default} mapBrowserEvent Map browser event.\n * @return {boolean} True if the event is a map `dblclick` event.\n * @api\n */\nexport const doubleClick = function(mapBrowserEvent) {\n  return mapBrowserEvent.type == MapBrowserEventType.DBLCLICK;\n};\n\n\n/**\n * Return `true` if no modifier key (alt-, shift- or platform-modifier-key) is\n * pressed.\n *\n * @param {import(\"../MapBrowserEvent.js\").default} mapBrowserEvent Map browser event.\n * @return {boolean} True only if there no modifier keys are pressed.\n * @api\n */\nexport const noModifierKeys = function(mapBrowserEvent) {\n  const originalEvent = /** @type {KeyboardEvent|MouseEvent|TouchEvent} */ (mapBrowserEvent.originalEvent);\n  return (\n    !originalEvent.altKey &&\n      !(originalEvent.metaKey || originalEvent.ctrlKey) &&\n      !originalEvent.shiftKey);\n};\n\n\n/**\n * Return `true` if only the platform-modifier-key (the meta-key on Mac,\n * ctrl-key otherwise) is pressed, `false` otherwise (e.g. when additionally\n * the shift-key is pressed).\n *\n * @param {import(\"../MapBrowserEvent.js\").default} mapBrowserEvent Map browser event.\n * @return {boolean} True if only the platform modifier key is pressed.\n * @api\n */\nexport const platformModifierKeyOnly = function(mapBrowserEvent) {\n  const originalEvent = /** @type {KeyboardEvent|MouseEvent|TouchEvent} */ (mapBrowserEvent.originalEvent);\n  return !originalEvent.altKey &&\n    (MAC ? originalEvent.metaKey : originalEvent.ctrlKey) &&\n    !originalEvent.shiftKey;\n};\n\n\n/**\n * Return `true` if only the shift-key is pressed, `false` otherwise (e.g. when\n * additionally the alt-key is pressed).\n *\n * @param {import(\"../MapBrowserEvent.js\").default} mapBrowserEvent Map browser event.\n * @return {boolean} True if only the shift key is pressed.\n * @api\n */\nexport const shiftKeyOnly = function(mapBrowserEvent) {\n  const originalEvent = /** @type {KeyboardEvent|MouseEvent|TouchEvent} */ (mapBrowserEvent.originalEvent);\n  return (\n    !originalEvent.altKey &&\n      !(originalEvent.metaKey || originalEvent.ctrlKey) &&\n      originalEvent.shiftKey);\n};\n\n\n/**\n * Return `true` if the target element is not editable, i.e. not a `<input>`-,\n * `<select>`- or `<textarea>`-element, `false` otherwise.\n *\n * @param {import(\"../MapBrowserEvent.js\").default} mapBrowserEvent Map browser event.\n * @return {boolean} True only if the target element is not editable.\n * @api\n */\nexport const targetNotEditable = function(mapBrowserEvent) {\n  const target = mapBrowserEvent.target;\n  const tagName = /** @type {Element} */ (target).tagName;\n  return (\n    tagName !== 'INPUT' &&\n      tagName !== 'SELECT' &&\n      tagName !== 'TEXTAREA');\n};\n\n\n/**\n * Return `true` if the event originates from a mouse device.\n *\n * @param {import(\"../MapBrowserEvent.js\").default} mapBrowserEvent Map browser event.\n * @return {boolean} True if the event originates from a mouse device.\n * @api\n */\nexport const mouseOnly = function(mapBrowserEvent) {\n  const pointerEvent = /** @type {import(\"../MapBrowserPointerEvent\").default} */ (mapBrowserEvent).pointerEvent;\n  assert(pointerEvent !== undefined, 56); // mapBrowserEvent must originate from a pointer event\n  // see http://www.w3.org/TR/pointerevents/#widl-PointerEvent-pointerType\n  return pointerEvent.pointerType == 'mouse';\n};\n\n/**\n * Return `true` if the event originates from a touchable device.\n *\n * @param {import(\"../MapBrowserEvent.js\").default} mapBrowserEvent Map browser event.\n * @return {boolean} True if the event originates from a touchable device.\n * @api\n */\nexport const touchOnly = function(mapBrowserEvent) {\n  const pointerEvt = /** @type {import(\"../MapBrowserPointerEvent\").default} */ (mapBrowserEvent).pointerEvent;\n  assert(pointerEvt !== undefined, 56); // mapBrowserEvent must originate from a pointer event\n  // see http://www.w3.org/TR/pointerevents/#widl-PointerEvent-pointerType\n  return pointerEvt.pointerType === 'touch';\n};\n\n/**\n * Return `true` if the event originates from a digital pen.\n *\n * @param {import(\"../MapBrowserEvent.js\").default} mapBrowserEvent Map browser event.\n * @return {boolean} True if the event originates from a digital pen.\n * @api\n */\nexport const penOnly = function(mapBrowserEvent) {\n  const pointerEvt = /** @type {import(\"../MapBrowserPointerEvent\").default} */ (mapBrowserEvent).pointerEvent;\n  assert(pointerEvt !== undefined, 56); // mapBrowserEvent must originate from a pointer event\n  // see http://www.w3.org/TR/pointerevents/#widl-PointerEvent-pointerType\n  return pointerEvt.pointerType === 'pen';\n};\n\n/**\n * Return `true` if the event originates from a primary pointer in\n * contact with the surface or if the left mouse button is pressed.\n * See http://www.w3.org/TR/pointerevents/#button-states.\n *\n * @param {import(\"../MapBrowserEvent.js\").default} mapBrowserEvent Map browser event.\n * @return {boolean} True if the event originates from a primary pointer.\n * @api\n */\nexport const primaryAction = function(mapBrowserEvent) {\n  const pointerEvent = /** @type {import(\"../MapBrowserPointerEvent\").default} */ (mapBrowserEvent).pointerEvent;\n  assert(pointerEvent !== undefined, 56); // mapBrowserEvent must originate from a pointer event\n  return pointerEvent.isPrimary && pointerEvent.button === 0;\n};\n","/**\n * @module ol/MapBrowserEventType\n */\nimport EventType from './events/EventType.js';\n\n/**\n * Constants for event names.\n * @enum {string}\n */\nexport default {\n\n  /**\n   * A true single click with no dragging and no double click. Note that this\n   * event is delayed by 250 ms to ensure that it is not a double click.\n   * @event module:ol/MapBrowserEvent~MapBrowserEvent#singleclick\n   * @api\n   */\n  SINGLECLICK: 'singleclick',\n\n  /**\n   * A click with no dragging. A double click will fire two of this.\n   * @event module:ol/MapBrowserEvent~MapBrowserEvent#click\n   * @api\n   */\n  CLICK: EventType.CLICK,\n\n  /**\n   * A true double click, with no dragging.\n   * @event module:ol/MapBrowserEvent~MapBrowserEvent#dblclick\n   * @api\n   */\n  DBLCLICK: EventType.DBLCLICK,\n\n  /**\n   * Triggered when a pointer is dragged.\n   * @event module:ol/MapBrowserEvent~MapBrowserEvent#pointerdrag\n   * @api\n   */\n  POINTERDRAG: 'pointerdrag',\n\n  /**\n   * Triggered when a pointer is moved. Note that on touch devices this is\n   * triggered when the map is panned, so is not the same as mousemove.\n   * @event module:ol/MapBrowserEvent~MapBrowserEvent#pointermove\n   * @api\n   */\n  POINTERMOVE: 'pointermove',\n\n  POINTERDOWN: 'pointerdown',\n  POINTERUP: 'pointerup',\n  POINTEROVER: 'pointerover',\n  POINTEROUT: 'pointerout',\n  POINTERENTER: 'pointerenter',\n  POINTERLEAVE: 'pointerleave',\n  POINTERCANCEL: 'pointercancel'\n};\n","/**\n * @module ol/format/Feature\n */\nimport {assign} from '../obj.js';\nimport {abstract} from '../util.js';\nimport {get as getProjection, equivalent as equivalentProjection, transformExtent} from '../proj.js';\nimport Units from '../proj/Units.js';\n\n\n/**\n * @typedef {Object} ReadOptions\n * @property {import(\"../proj.js\").ProjectionLike} [dataProjection] Projection of the data we are reading.\n * If not provided, the projection will be derived from the data (where possible) or\n * the `dataProjection` of the format is assigned (where set). If the projection\n * can not be derived from the data and if no `dataProjection` is set for a format,\n * the features will not be reprojected.\n * @property {import(\"../extent.js\").Extent} [extent] Tile extent in map units of the tile being read.\n * This is only required when reading data with tile pixels as geometry units. When configured,\n * a `dataProjection` with `TILE_PIXELS` as `units` and the tile's pixel extent as `extent` needs to be\n * provided.\n * @property {import(\"../proj.js\").ProjectionLike} [featureProjection] Projection of the feature geometries\n * created by the format reader. If not provided, features will be returned in the\n * `dataProjection`.\n */\n\n\n/**\n * @typedef {Object} WriteOptions\n * @property {import(\"../proj.js\").ProjectionLike} [dataProjection] Projection of the data we are writing.\n * If not provided, the `dataProjection` of the format is assigned (where set).\n * If no `dataProjection` is set for a format, the features will be returned\n * in the `featureProjection`.\n * @property {import(\"../proj.js\").ProjectionLike} [featureProjection] Projection of the feature geometries\n * that will be serialized by the format writer. If not provided, geometries are assumed\n * to be in the `dataProjection` if that is set; in other words, they are not transformed.\n * @property {boolean} [rightHanded] When writing geometries, follow the right-hand\n * rule for linear ring orientation.  This means that polygons will have counter-clockwise\n * exterior rings and clockwise interior rings.  By default, coordinates are serialized\n * as they are provided at construction.  If `true`, the right-hand rule will\n * be applied.  If `false`, the left-hand rule will be applied (clockwise for\n * exterior and counter-clockwise for interior rings).  Note that not all\n * formats support this.  The GeoJSON format does use this property when writing\n * geometries.\n * @property {number} [decimals] Maximum number of decimal places for coordinates.\n * Coordinates are stored internally as floats, but floating-point arithmetic can create\n * coordinates with a large number of decimal places, not generally wanted on output.\n * Set a number here to round coordinates. Can also be used to ensure that\n * coordinates read in can be written back out with the same number of decimals.\n * Default is no rounding.\n */\n\n\n/**\n * @classdesc\n * Abstract base class; normally only used for creating subclasses and not\n * instantiated in apps.\n * Base class for feature formats.\n * {@link module:ol/format/Feature~FeatureFormat} subclasses provide the ability to decode and encode\n * {@link module:ol/Feature~Feature} objects from a variety of commonly used geospatial\n * file formats.  See the documentation for each format for more details.\n *\n * @abstract\n * @api\n */\nclass FeatureFormat {\n  constructor() {\n\n    /**\n     * @protected\n     * @type {import(\"../proj/Projection.js\").default}\n     */\n    this.dataProjection = null;\n\n    /**\n     * @protected\n     * @type {import(\"../proj/Projection.js\").default}\n     */\n    this.defaultFeatureProjection = null;\n\n  }\n\n  /**\n   * Adds the data projection to the read options.\n   * @param {Document|Node|Object|string} source Source.\n   * @param {ReadOptions=} opt_options Options.\n   * @return {ReadOptions|undefined} Options.\n   * @protected\n   */\n  getReadOptions(source, opt_options) {\n    let options;\n    if (opt_options) {\n      let dataProjection = opt_options.dataProjection ?\n        getProjection(opt_options.dataProjection) : this.readProjection(source);\n      if (opt_options.extent &&\n          dataProjection && dataProjection.getUnits() === Units.TILE_PIXELS) {\n        dataProjection = getProjection(dataProjection);\n        dataProjection.setWorldExtent(opt_options.extent);\n      }\n      options = {\n        dataProjection: dataProjection,\n        featureProjection: opt_options.featureProjection\n      };\n    }\n    return this.adaptOptions(options);\n  }\n\n  /**\n   * Sets the `dataProjection` on the options, if no `dataProjection`\n   * is set.\n   * @param {WriteOptions|ReadOptions|undefined} options\n   *     Options.\n   * @protected\n   * @return {WriteOptions|ReadOptions|undefined}\n   *     Updated options.\n   */\n  adaptOptions(options) {\n    return assign({\n      dataProjection: this.dataProjection,\n      featureProjection: this.defaultFeatureProjection\n    }, options);\n  }\n\n  /**\n   * @abstract\n   * @return {import(\"./FormatType.js\").default} Format.\n   */\n  getType() {\n    return abstract();\n  }\n\n  /**\n   * Read a single feature from a source.\n   *\n   * @abstract\n   * @param {Document|Node|Object|string} source Source.\n   * @param {ReadOptions=} opt_options Read options.\n   * @return {import(\"../Feature.js\").FeatureLike} Feature.\n   */\n  readFeature(source, opt_options) {\n    return abstract();\n  }\n\n  /**\n   * Read all features from a source.\n   *\n   * @abstract\n   * @param {Document|Node|ArrayBuffer|Object|string} source Source.\n   * @param {ReadOptions=} opt_options Read options.\n   * @return {Array<import(\"../Feature.js\").FeatureLike>} Features.\n   */\n  readFeatures(source, opt_options) {\n    return abstract();\n  }\n\n  /**\n   * Read a single geometry from a source.\n   *\n   * @abstract\n   * @param {Document|Node|Object|string} source Source.\n   * @param {ReadOptions=} opt_options Read options.\n   * @return {import(\"../geom/Geometry.js\").default} Geometry.\n   */\n  readGeometry(source, opt_options) {\n    return abstract();\n  }\n\n  /**\n   * Read the projection from a source.\n   *\n   * @abstract\n   * @param {Document|Node|Object|string} source Source.\n   * @return {import(\"../proj/Projection.js\").default} Projection.\n   */\n  readProjection(source) {\n    return abstract();\n  }\n\n  /**\n   * Encode a feature in this format.\n   *\n   * @abstract\n   * @param {import(\"../Feature.js\").default} feature Feature.\n   * @param {WriteOptions=} opt_options Write options.\n   * @return {string} Result.\n   */\n  writeFeature(feature, opt_options) {\n    return abstract();\n  }\n\n  /**\n   * Encode an array of features in this format.\n   *\n   * @abstract\n   * @param {Array<import(\"../Feature.js\").default>} features Features.\n   * @param {WriteOptions=} opt_options Write options.\n   * @return {string} Result.\n   */\n  writeFeatures(features, opt_options) {\n    return abstract();\n  }\n\n  /**\n   * Write a single geometry in this format.\n   *\n   * @abstract\n   * @param {import(\"../geom/Geometry.js\").default} geometry Geometry.\n   * @param {WriteOptions=} opt_options Write options.\n   * @return {string} Result.\n   */\n  writeGeometry(geometry, opt_options) {\n    return abstract();\n  }\n}\n\nexport default FeatureFormat;\n\n/**\n * @param {import(\"../geom/Geometry.js\").default} geometry Geometry.\n * @param {boolean} write Set to true for writing, false for reading.\n * @param {(WriteOptions|ReadOptions)=} opt_options Options.\n * @return {import(\"../geom/Geometry.js\").default} Transformed geometry.\n */\nexport function transformGeometryWithOptions(geometry, write, opt_options) {\n  const featureProjection = opt_options ? getProjection(opt_options.featureProjection) : null;\n  const dataProjection = opt_options ? getProjection(opt_options.dataProjection) : null;\n\n  let transformed;\n  if (featureProjection && dataProjection && !equivalentProjection(featureProjection, dataProjection)) {\n    transformed = (write ? geometry.clone() : geometry).transform(\n      write ? featureProjection : dataProjection,\n      write ? dataProjection : featureProjection);\n  } else {\n    transformed = geometry;\n  }\n  if (write && opt_options && /** @type {WriteOptions} */ (opt_options).decimals !== undefined) {\n    const power = Math.pow(10, /** @type {WriteOptions} */ (opt_options).decimals);\n    // if decimals option on write, round each coordinate appropriately\n    /**\n     * @param {Array<number>} coordinates Coordinates.\n     * @return {Array<number>} Transformed coordinates.\n     */\n    const transform = function(coordinates) {\n      for (let i = 0, ii = coordinates.length; i < ii; ++i) {\n        coordinates[i] = Math.round(coordinates[i] * power) / power;\n      }\n      return coordinates;\n    };\n    if (transformed === geometry) {\n      transformed = geometry.clone();\n    }\n    transformed.applyTransform(transform);\n  }\n  return transformed;\n}\n\n\n/**\n * @param {import(\"../extent.js\").Extent} extent Extent.\n * @param {ReadOptions=} opt_options Read options.\n * @return {import(\"../extent.js\").Extent} Transformed extent.\n */\nexport function transformExtentWithOptions(extent, opt_options) {\n  const featureProjection = opt_options ? getProjection(opt_options.featureProjection) : null;\n  const dataProjection = opt_options ? getProjection(opt_options.dataProjection) : null;\n\n  if (featureProjection && dataProjection && !equivalentProjection(featureProjection, dataProjection)) {\n    return transformExtent(extent, dataProjection, featureProjection);\n  } else {\n    return extent;\n  }\n}\n","/**\n * @module ol/source/BingMaps\n */\n\nimport {createFromTileUrlFunctions} from '../tileurlfunction.js';\nimport {applyTransform, intersects} from '../extent.js';\nimport {jsonp as requestJSONP} from '../net.js';\nimport {get as getProjection, getTransformFromProjections} from '../proj.js';\nimport SourceState from './State.js';\nimport TileImage from './TileImage.js';\nimport {createOrUpdate} from '../tilecoord.js';\nimport {createXYZ, extentFromProjection} from '../tilegrid.js';\n\n\n/**\n * @param {import('../tilecoord.js').TileCoord} tileCoord Tile coord.\n * @return {string} Quad key.\n */\nexport function quadKey(tileCoord) {\n  const z = tileCoord[0];\n  const digits = new Array(z);\n  let mask = 1 << (z - 1);\n  let i, charCode;\n  for (i = 0; i < z; ++i) {\n    // 48 is charCode for 0 - '0'.charCodeAt(0)\n    charCode = 48;\n    if (tileCoord[1] & mask) {\n      charCode += 1;\n    }\n    if (tileCoord[2] & mask) {\n      charCode += 2;\n    }\n    digits[i] = String.fromCharCode(charCode);\n    mask >>= 1;\n  }\n  return digits.join('');\n}\n\n\n/**\n * The attribution containing a link to the Microsoft® Bing™ Maps Platform APIs’\n * Terms Of Use.\n * @const\n * @type {string}\n */\nconst TOS_ATTRIBUTION = '<a class=\"ol-attribution-bing-tos\" ' +\n      'href=\"https://www.microsoft.com/maps/product/terms.html\">' +\n      'Terms of Use</a>';\n\n\n/**\n * @typedef {Object} Options\n * @property {number} [cacheSize] Tile cache size. The default depends on the screen size. Will increase if too small.\n * @property {boolean} [hidpi=false] If `true` hidpi tiles will be requested.\n * @property {string} [culture='en-us'] Culture code.\n * @property {string} key Bing Maps API key. Get yours at http://www.bingmapsportal.com/.\n * @property {string} imagerySet Type of imagery.\n * @property {number} [maxZoom=21] Max zoom. Default is what's advertized by the BingMaps service.\n * @property {number} [reprojectionErrorThreshold=0.5] Maximum allowed reprojection error (in pixels).\n * Higher values can increase reprojection performance, but decrease precision.\n * @property {import(\"../Tile.js\").LoadFunction} [tileLoadFunction] Optional function to load a tile given a URL. The default is\n * ```js\n * function(imageTile, src) {\n *   imageTile.getImage().src = src;\n * };\n * ```\n * @property {boolean} [wrapX=true] Whether to wrap the world horizontally.\n * @property {number} [transition] Duration of the opacity transition for rendering.\n * To disable the opacity transition, pass `transition: 0`.\n */\n\n\n/**\n * @typedef {Object} BingMapsImageryMetadataResponse\n * @property {number} statusCode The response status code\n * @property {string} statusDescription The response status description\n * @property {string} authenticationResultCode The authentication result code\n * @property {Array<ResourceSet>} resourceSets The array of resource sets\n */\n\n\n/**\n * @typedef {Object} ResourceSet\n * @property {Array<Resource>} resources\n */\n\n\n/**\n * @typedef {Object} Resource\n * @property {number} imageHeight The image height\n * @property {number} imageWidth The image width\n * @property {number} zoomMin The minimum zoom level\n * @property {number} zoomMax The maximum zoom level\n * @property {string} imageUrl The image URL\n * @property {Array<string>} imageUrlSubdomains The image URL subdomains for rotation\n * @property {Array<ImageryProvider>} [imageryProviders] The array of ImageryProviders\n */\n\n\n/**\n * @typedef {Object} ImageryProvider\n * @property {Array<CoverageArea>} coverageAreas The coverage areas\n * @property {string} [attribution] The attribution\n */\n\n\n/**\n * @typedef {Object} CoverageArea\n * @property {number} zoomMin The minimum zoom\n * @property {number} zoomMax The maximum zoom\n * @property {Array<number>} bbox The coverage bounding box\n */\n\n\n/**\n * @classdesc\n * Layer source for Bing Maps tile data.\n * @api\n */\nclass BingMaps extends TileImage {\n  /**\n   * @param {Options} options Bing Maps options.\n   */\n  constructor(options) {\n\n    const hidpi = options.hidpi !== undefined ? options.hidpi : false;\n\n    super({\n      cacheSize: options.cacheSize,\n      crossOrigin: 'anonymous',\n      opaque: true,\n      projection: getProjection('EPSG:3857'),\n      reprojectionErrorThreshold: options.reprojectionErrorThreshold,\n      state: SourceState.LOADING,\n      tileLoadFunction: options.tileLoadFunction,\n      tilePixelRatio: hidpi ? 2 : 1,\n      wrapX: options.wrapX !== undefined ? options.wrapX : true,\n      transition: options.transition\n    });\n\n    /**\n     * @private\n     * @type {boolean}\n     */\n    this.hidpi_ = hidpi;\n\n\n    /**\n     * @private\n     * @type {string}\n     */\n    this.culture_ = options.culture !== undefined ? options.culture : 'en-us';\n\n    /**\n     * @private\n     * @type {number}\n     */\n    this.maxZoom_ = options.maxZoom !== undefined ? options.maxZoom : -1;\n\n    /**\n     * @private\n     * @type {string}\n     */\n    this.apiKey_ = options.key;\n\n    /**\n     * @private\n     * @type {string}\n     */\n    this.imagerySet_ = options.imagerySet;\n\n    const url = 'https://dev.virtualearth.net/REST/v1/Imagery/Metadata/' +\n        this.imagerySet_ +\n        '?uriScheme=https&include=ImageryProviders&key=' + this.apiKey_ +\n        '&c=' + this.culture_;\n\n    requestJSONP(url, this.handleImageryMetadataResponse.bind(this), undefined,\n      'jsonp');\n\n  }\n\n  /**\n   * Get the api key used for this source.\n   *\n   * @return {string} The api key.\n   * @api\n   */\n  getApiKey() {\n    return this.apiKey_;\n  }\n\n  /**\n   * Get the imagery set associated with this source.\n   *\n   * @return {string} The imagery set.\n   * @api\n   */\n  getImagerySet() {\n    return this.imagerySet_;\n  }\n\n  /**\n   * @param {BingMapsImageryMetadataResponse} response Response.\n   */\n  handleImageryMetadataResponse(response) {\n    if (response.statusCode != 200 ||\n        response.statusDescription != 'OK' ||\n        response.authenticationResultCode != 'ValidCredentials' ||\n        response.resourceSets.length != 1 ||\n        response.resourceSets[0].resources.length != 1) {\n      this.setState(SourceState.ERROR);\n      return;\n    }\n\n    const resource = response.resourceSets[0].resources[0];\n    const maxZoom = this.maxZoom_ == -1 ? resource.zoomMax : this.maxZoom_;\n\n    const sourceProjection = this.getProjection();\n    const extent = extentFromProjection(sourceProjection);\n    const scale = this.hidpi_ ? 2 : 1;\n    const tileSize = resource.imageWidth == resource.imageHeight ?\n      resource.imageWidth / scale :\n      [resource.imageWidth / scale, resource.imageHeight / scale];\n\n    const tileGrid = createXYZ({\n      extent: extent,\n      minZoom: resource.zoomMin,\n      maxZoom: maxZoom,\n      tileSize: tileSize\n    });\n    this.tileGrid = tileGrid;\n\n    const culture = this.culture_;\n    const hidpi = this.hidpi_;\n    this.tileUrlFunction = createFromTileUrlFunctions(\n      resource.imageUrlSubdomains.map(function(subdomain) {\n        /** @type {import('../tilecoord.js').TileCoord} */\n        const quadKeyTileCoord = [0, 0, 0];\n        const imageUrl = resource.imageUrl\n          .replace('{subdomain}', subdomain)\n          .replace('{culture}', culture);\n        return (\n          /**\n           * @param {import(\"../tilecoord.js\").TileCoord} tileCoord Tile coordinate.\n           * @param {number} pixelRatio Pixel ratio.\n           * @param {import(\"../proj/Projection.js\").default} projection Projection.\n           * @return {string|undefined} Tile URL.\n           */\n          function(tileCoord, pixelRatio, projection) {\n            if (!tileCoord) {\n              return undefined;\n            } else {\n              createOrUpdate(tileCoord[0], tileCoord[1], tileCoord[2], quadKeyTileCoord);\n              let url = imageUrl;\n              if (hidpi) {\n                url += '&dpi=d1&device=mobile';\n              }\n              return url.replace('{quadkey}', quadKey(quadKeyTileCoord));\n            }\n          }\n        );\n      }));\n\n    if (resource.imageryProviders) {\n      const transform = getTransformFromProjections(\n        getProjection('EPSG:4326'), this.getProjection());\n\n      this.setAttributions(function(frameState) {\n        const attributions = [];\n        const viewState = frameState.viewState;\n        const tileGrid = this.getTileGrid();\n        const z = tileGrid.getZForResolution(viewState.resolution, this.zDirection);\n        const tileCoord = tileGrid.getTileCoordForCoordAndZ(viewState.center, z);\n        const zoom = tileCoord[0];\n        resource.imageryProviders.map(function(imageryProvider) {\n          let intersecting = false;\n          const coverageAreas = imageryProvider.coverageAreas;\n          for (let i = 0, ii = coverageAreas.length; i < ii; ++i) {\n            const coverageArea = coverageAreas[i];\n            if (zoom >= coverageArea.zoomMin && zoom <= coverageArea.zoomMax) {\n              const bbox = coverageArea.bbox;\n              const epsg4326Extent = [bbox[1], bbox[0], bbox[3], bbox[2]];\n              const extent = applyTransform(epsg4326Extent, transform);\n              if (intersects(extent, frameState.extent)) {\n                intersecting = true;\n                break;\n              }\n            }\n          }\n          if (intersecting) {\n            attributions.push(imageryProvider.attribution);\n          }\n        });\n\n        attributions.push(TOS_ATTRIBUTION);\n        return attributions;\n      }.bind(this));\n    }\n\n    this.setState(SourceState.READY);\n  }\n}\n\nexport default BingMaps;\n","/**\n * @module ol/css\n */\n\n/**\n * @typedef {Object} FontParameters\n * @property {Array<string>} families\n * @property {string} style\n * @property {string} weight\n */\n\n\n/**\n * The CSS class for hidden feature.\n *\n * @const\n * @type {string}\n */\nexport const CLASS_HIDDEN = 'ol-hidden';\n\n\n/**\n * The CSS class that we'll give the DOM elements to have them selectable.\n *\n * @const\n * @type {string}\n */\nexport const CLASS_SELECTABLE = 'ol-selectable';\n\n\n/**\n * The CSS class that we'll give the DOM elements to have them unselectable.\n *\n * @const\n * @type {string}\n */\nexport const CLASS_UNSELECTABLE = 'ol-unselectable';\n\n\n/**\n * The CSS class for unsupported feature.\n *\n * @const\n * @type {string}\n */\nexport const CLASS_UNSUPPORTED = 'ol-unsupported';\n\n\n/**\n * The CSS class for controls.\n *\n * @const\n * @type {string}\n */\nexport const CLASS_CONTROL = 'ol-control';\n\n\n/**\n * The CSS class that we'll give the DOM elements that are collapsed, i.e.\n * to those elements which usually can be expanded.\n *\n * @const\n * @type {string}\n */\nexport const CLASS_COLLAPSED = 'ol-collapsed';\n\n\n/**\n * Get the list of font families from a font spec.  Note that this doesn't work\n * for font families that have commas in them.\n * @param {string} The CSS font property.\n * @return {FontParameters} The font families (or null if the input spec is invalid).\n */\nexport const getFontParameters = (function() {\n  let style;\n  /**\n   * @type {Object<string, FontParameters>}\n   */\n  const cache = {};\n  return function(font) {\n    if (!style) {\n      style = document.createElement('div').style;\n    }\n    if (!(font in cache)) {\n      style.font = font;\n      const family = style.fontFamily;\n      const fontWeight = style.fontWeight;\n      const fontStyle = style.fontStyle;\n      style.font = '';\n      if (!family) {\n        return null;\n      }\n      const families = family.split(/,\\s?/);\n      cache[font] = {\n        families: families,\n        weight: fontWeight,\n        style: fontStyle\n      };\n    }\n    return cache[font];\n  };\n})();\n","/**\n * @module ol/render/canvas/BuilderType\n */\n\n/**\n * @enum {string}\n */\nexport default {\n  CIRCLE: 'Circle',\n  DEFAULT: 'Default',\n  IMAGE: 'Image',\n  LINE_STRING: 'LineString',\n  POLYGON: 'Polygon',\n  TEXT: 'Text'\n};\n","/**\n * @module ol/events/Event\n */\n\n/**\n * @classdesc\n * Stripped down implementation of the W3C DOM Level 2 Event interface.\n * See https://www.w3.org/TR/DOM-Level-2-Events/events.html#Events-interface.\n *\n * This implementation only provides `type` and `target` properties, and\n * `stopPropagation` and `preventDefault` methods. It is meant as base class\n * for higher level events defined in the library, and works with\n * {@link module:ol/events/Target~Target}.\n */\nclass BaseEvent {\n\n  /**\n   * @param {string} type Type.\n   */\n  constructor(type) {\n\n    /**\n     * @type {boolean}\n     */\n    this.propagationStopped;\n\n    /**\n     * The event type.\n     * @type {string}\n     * @api\n     */\n    this.type = type;\n\n    /**\n     * The event target.\n     * @type {Object}\n     * @api\n     */\n    this.target = null;\n  }\n\n  /**\n   * Stop event propagation.\n   * @api\n   */\n  preventDefault() {\n    this.propagationStopped = true;\n  }\n\n  /**\n   * Stop event propagation.\n   * @api\n   */\n  stopPropagation() {\n    this.propagationStopped = true;\n  }\n\n}\n\n\n/**\n * @param {Event|import(\"./Event.js\").default} evt Event\n */\nexport function stopPropagation(evt) {\n  evt.stopPropagation();\n}\n\n\n/**\n * @param {Event|import(\"./Event.js\").default} evt Event\n */\nexport function preventDefault(evt) {\n  evt.preventDefault();\n}\n\nexport default BaseEvent;\n","/**\n * @module ol/source/State\n */\n\n/**\n * @enum {string}\n * State of the source, one of 'undefined', 'loading', 'ready' or 'error'.\n */\nexport default {\n  UNDEFINED: 'undefined',\n  LOADING: 'loading',\n  READY: 'ready',\n  ERROR: 'error'\n};\n","/**\n * @module ol/ViewHint\n */\n\n/**\n * @enum {number}\n */\nexport default {\n  ANIMATING: 0,\n  INTERACTING: 1\n};\n","/**\n * @module ol/source/XYZ\n */\n\nimport TileImage from './TileImage.js';\nimport {createXYZ, extentFromProjection} from '../tilegrid.js';\n\n/**\n * @typedef {Object} Options\n * @property {import(\"./Source.js\").AttributionLike} [attributions] Attributions.\n * @property {boolean} [attributionsCollapsible=true] Attributions are collapsible.\n * @property {number} [cacheSize] Tile cache size. The default depends on the screen size. Will increase if too small.\n * @property {null|string} [crossOrigin] The `crossOrigin` attribute for loaded images.  Note that\n * you must provide a `crossOrigin` value if you want to access pixel data with the Canvas renderer.\n * See https://developer.mozilla.org/en-US/docs/Web/HTML/CORS_enabled_image for more detail.\n * @property {boolean} [opaque=true] Whether the layer is opaque.\n * @property {import(\"../proj.js\").ProjectionLike} [projection='EPSG:3857'] Projection.\n * @property {number} [reprojectionErrorThreshold=0.5] Maximum allowed reprojection error (in pixels).\n * Higher values can increase reprojection performance, but decrease precision.\n * @property {number} [maxZoom=18] Optional max zoom level.\n * @property {number} [minZoom=0] Optional min zoom level.\n * @property {import(\"../tilegrid/TileGrid.js\").default} [tileGrid] Tile grid.\n * @property {import(\"../Tile.js\").LoadFunction} [tileLoadFunction] Optional function to load a tile given a URL. The default is\n * ```js\n * function(imageTile, src) {\n *   imageTile.getImage().src = src;\n * };\n * ```\n * @property {number} [tilePixelRatio=1] The pixel ratio used by the tile service.\n * For example, if the tile service advertizes 256px by 256px tiles but actually sends 512px\n * by 512px images (for retina/hidpi devices) then `tilePixelRatio`\n * should be set to `2`.\n * @property {number|import(\"../size.js\").Size} [tileSize=[256, 256]] The tile size used by the tile service.\n * @property {import(\"../Tile.js\").UrlFunction} [tileUrlFunction] Optional function to get\n * tile URL given a tile coordinate and the projection.\n * Required if url or urls are not provided.\n * @property {string} [url] URL template. Must include `{x}`, `{y}` or `{-y}`,\n * and `{z}` placeholders. A `{?-?}` template pattern, for example `subdomain{a-f}.domain.com`,\n * may be used instead of defining each one separately in the `urls` option.\n * @property {Array<string>} [urls] An array of URL templates.\n * @property {boolean} [wrapX=true] Whether to wrap the world horizontally.\n * @property {number} [transition] Duration of the opacity transition for rendering.\n * To disable the opacity transition, pass `transition: 0`.\n * @property {number} [zDirection=0] Indicate which resolution should be used\n * by a renderer if the view resolution does not match any resolution of the tile source.\n * If 0, the nearest resolution will be used. If 1, the nearest lower resolution\n * will be used. If -1, the nearest higher resolution will be used.\n */\n\n\n/**\n * @classdesc\n * Layer source for tile data with URLs in a set XYZ format that are\n * defined in a URL template. By default, this follows the widely-used\n * Google grid where `x` 0 and `y` 0 are in the top left. Grids like\n * TMS where `x` 0 and `y` 0 are in the bottom left can be used by\n * using the `{-y}` placeholder in the URL template, so long as the\n * source does not have a custom tile grid. In this case,\n * {@link module:ol/source/TileImage} can be used with a `tileUrlFunction`\n * such as:\n *\n *  tileUrlFunction: function(coordinate) {\n *    return 'http://mapserver.com/' + coordinate[0] + '/' +\n *        coordinate[1] + '/' + coordinate[2] + '.png';\n *    }\n *\n * @api\n */\nclass XYZ extends TileImage {\n  /**\n   * @param {Options=} opt_options XYZ options.\n   */\n  constructor(opt_options) {\n    const options = opt_options || {};\n    const projection = options.projection !== undefined ?\n      options.projection : 'EPSG:3857';\n\n    const tileGrid = options.tileGrid !== undefined ? options.tileGrid :\n      createXYZ({\n        extent: extentFromProjection(projection),\n        maxZoom: options.maxZoom,\n        minZoom: options.minZoom,\n        tileSize: options.tileSize\n      });\n\n    super({\n      attributions: options.attributions,\n      cacheSize: options.cacheSize,\n      crossOrigin: options.crossOrigin,\n      opaque: options.opaque,\n      projection: projection,\n      reprojectionErrorThreshold: options.reprojectionErrorThreshold,\n      tileGrid: tileGrid,\n      tileLoadFunction: options.tileLoadFunction,\n      tilePixelRatio: options.tilePixelRatio,\n      tileUrlFunction: options.tileUrlFunction,\n      url: options.url,\n      urls: options.urls,\n      wrapX: options.wrapX !== undefined ? options.wrapX : true,\n      transition: options.transition,\n      attributionsCollapsible: options.attributionsCollapsible,\n      zDirection: options.zDirection\n    });\n\n  }\n\n}\n\nexport default XYZ;\n","/**\n * @module ol/style/Circle\n */\n\nimport RegularShape from './RegularShape.js';\n\n\n/**\n * @typedef {Object} Options\n * @property {import(\"./Fill.js\").default} [fill] Fill style.\n * @property {number} radius Circle radius.\n * @property {import(\"./Stroke.js\").default} [stroke] Stroke style.\n */\n\n\n/**\n * @classdesc\n * Set circle style for vector features.\n * @api\n */\nclass CircleStyle extends RegularShape {\n  /**\n   * @param {Options=} opt_options Options.\n   */\n  constructor(opt_options) {\n\n    const options = opt_options ? opt_options : {};\n\n    super({\n      points: Infinity,\n      fill: options.fill,\n      radius: options.radius,\n      stroke: options.stroke\n    });\n\n  }\n\n  /**\n  * Clones the style.\n  * @return {CircleStyle} The cloned style.\n  * @override\n  * @api\n  */\n  clone() {\n    const style = new CircleStyle({\n      fill: this.getFill() ? this.getFill().clone() : undefined,\n      stroke: this.getStroke() ? this.getStroke().clone() : undefined,\n      radius: this.getRadius()\n    });\n    style.setOpacity(this.getOpacity());\n    style.setScale(this.getScale());\n    return style;\n  }\n\n  /**\n   * Set the circle radius.\n   *\n   * @param {number} radius Circle radius.\n   * @api\n   */\n  setRadius(radius) {\n    this.radius_ = radius;\n    this.render();\n  }\n}\n\n\nexport default CircleStyle;\n","/**\n * @module ol/Kinetic\n */\n\n/**\n * @classdesc\n * Implementation of inertial deceleration for map movement.\n *\n * @api\n */\nclass Kinetic {\n\n  /**\n   * @param {number} decay Rate of decay (must be negative).\n   * @param {number} minVelocity Minimum velocity (pixels/millisecond).\n   * @param {number} delay Delay to consider to calculate the kinetic\n   *     initial values (milliseconds).\n   */\n  constructor(decay, minVelocity, delay) {\n\n    /**\n     * @private\n     * @type {number}\n     */\n    this.decay_ = decay;\n\n    /**\n     * @private\n     * @type {number}\n     */\n    this.minVelocity_ = minVelocity;\n\n    /**\n     * @private\n     * @type {number}\n     */\n    this.delay_ = delay;\n\n    /**\n     * @private\n     * @type {Array<number>}\n     */\n    this.points_ = [];\n\n    /**\n     * @private\n     * @type {number}\n     */\n    this.angle_ = 0;\n\n    /**\n     * @private\n     * @type {number}\n     */\n    this.initialVelocity_ = 0;\n  }\n\n  /**\n   * FIXME empty description for jsdoc\n   */\n  begin() {\n    this.points_.length = 0;\n    this.angle_ = 0;\n    this.initialVelocity_ = 0;\n  }\n\n  /**\n   * @param {number} x X.\n   * @param {number} y Y.\n   */\n  update(x, y) {\n    this.points_.push(x, y, Date.now());\n  }\n\n  /**\n   * @return {boolean} Whether we should do kinetic animation.\n   */\n  end() {\n    if (this.points_.length < 6) {\n      // at least 2 points are required (i.e. there must be at least 6 elements\n      // in the array)\n      return false;\n    }\n    const delay = Date.now() - this.delay_;\n    const lastIndex = this.points_.length - 3;\n    if (this.points_[lastIndex + 2] < delay) {\n      // the last tracked point is too old, which means that the user stopped\n      // panning before releasing the map\n      return false;\n    }\n\n    // get the first point which still falls into the delay time\n    let firstIndex = lastIndex - 3;\n    while (firstIndex > 0 && this.points_[firstIndex + 2] > delay) {\n      firstIndex -= 3;\n    }\n\n    const duration = this.points_[lastIndex + 2] - this.points_[firstIndex + 2];\n    // we don't want a duration of 0 (divide by zero)\n    // we also make sure the user panned for a duration of at least one frame\n    // (1/60s) to compute sane displacement values\n    if (duration < 1000 / 60) {\n      return false;\n    }\n\n    const dx = this.points_[lastIndex] - this.points_[firstIndex];\n    const dy = this.points_[lastIndex + 1] - this.points_[firstIndex + 1];\n    this.angle_ = Math.atan2(dy, dx);\n    this.initialVelocity_ = Math.sqrt(dx * dx + dy * dy) / duration;\n    return this.initialVelocity_ > this.minVelocity_;\n  }\n\n  /**\n   * @return {number} Total distance travelled (pixels).\n   */\n  getDistance() {\n    return (this.minVelocity_ - this.initialVelocity_) / this.decay_;\n  }\n\n  /**\n   * @return {number} Angle of the kinetic panning animation (radians).\n   */\n  getAngle() {\n    return this.angle_;\n  }\n}\n\nexport default Kinetic;\n","/**\n * @module ol/interaction/DoubleClickZoom\n */\nimport MapBrowserEventType from '../MapBrowserEventType.js';\nimport Interaction, {zoomByDelta} from './Interaction.js';\n\n\n/**\n * @typedef {Object} Options\n * @property {number} [duration=250] Animation duration in milliseconds.\n * @property {number} [delta=1] The zoom delta applied on each double click.\n */\n\n\n/**\n * @classdesc\n * Allows the user to zoom by double-clicking on the map.\n * @api\n */\nclass DoubleClickZoom extends Interaction {\n\n  /**\n   * @param {Options=} opt_options Options.\n   */\n  constructor(opt_options) {\n    super({\n      handleEvent: handleEvent\n    });\n\n    const options = opt_options ? opt_options : {};\n\n    /**\n     * @private\n     * @type {number}\n     */\n    this.delta_ = options.delta ? options.delta : 1;\n\n    /**\n     * @private\n     * @type {number}\n     */\n    this.duration_ = options.duration !== undefined ? options.duration : 250;\n\n  }\n\n}\n\n\n/**\n * Handles the {@link module:ol/MapBrowserEvent map browser event} (if it was a\n * doubleclick) and eventually zooms the map.\n * @param {import(\"../MapBrowserEvent.js\").default} mapBrowserEvent Map browser event.\n * @return {boolean} `false` to stop event propagation.\n * @this {DoubleClickZoom}\n */\nfunction handleEvent(mapBrowserEvent) {\n  let stopEvent = false;\n  if (mapBrowserEvent.type == MapBrowserEventType.DBLCLICK) {\n    const browserEvent = /** @type {MouseEvent} */ (mapBrowserEvent.originalEvent);\n    const map = mapBrowserEvent.map;\n    const anchor = mapBrowserEvent.coordinate;\n    const delta = browserEvent.shiftKey ? -this.delta_ : this.delta_;\n    const view = map.getView();\n    zoomByDelta(view, delta, anchor, this.duration_);\n    mapBrowserEvent.preventDefault();\n    stopEvent = true;\n  }\n  return !stopEvent;\n}\n\nexport default DoubleClickZoom;\n","/**\n * @module ol/interaction/DragPan\n */\nimport {scale as scaleCoordinate, rotate as rotateCoordinate} from '../coordinate.js';\nimport {easeOut} from '../easing.js';\nimport {noModifierKeys, primaryAction} from '../events/condition.js';\nimport {FALSE} from '../functions.js';\nimport PointerInteraction, {centroid as centroidFromPointers} from './Pointer.js';\n\n\n/**\n * @typedef {Object} Options\n * @property {import(\"../events/condition.js\").Condition} [condition] A function that takes an {@link module:ol/MapBrowserEvent~MapBrowserEvent} and returns a boolean\n * to indicate whether that event should be handled.\n * Default is {@link module:ol/events/condition~noModifierKeys} and {@link module:ol/events/condition~primaryAction}.\n * @property {import(\"../Kinetic.js\").default} [kinetic] Kinetic inertia to apply to the pan.\n */\n\n\n/**\n * @classdesc\n * Allows the user to pan the map by dragging the map.\n * @api\n */\nclass DragPan extends PointerInteraction {\n  /**\n   * @param {Options=} opt_options Options.\n   */\n  constructor(opt_options) {\n\n    super({\n      stopDown: FALSE\n    });\n\n    const options = opt_options ? opt_options : {};\n\n    /**\n     * @private\n     * @type {import(\"../Kinetic.js\").default|undefined}\n     */\n    this.kinetic_ = options.kinetic;\n\n    /**\n     * @type {import(\"../pixel.js\").Pixel}\n     */\n    this.lastCentroid = null;\n\n    /**\n     * @type {number}\n     */\n    this.lastPointersCount_;\n\n    /**\n     * @type {boolean}\n     */\n    this.panning_ = false;\n\n    /**\n     * @private\n     * @type {import(\"../events/condition.js\").Condition}\n     */\n    this.condition_ = options.condition ? options.condition : defaultCondition;\n\n    /**\n     * @private\n     * @type {boolean}\n     */\n    this.noKinetic_ = false;\n\n  }\n\n  /**\n   * @inheritDoc\n   */\n  handleDragEvent(mapBrowserEvent) {\n    if (!this.panning_) {\n      this.panning_ = true;\n      this.getMap().getView().beginInteraction();\n    }\n    const targetPointers = this.targetPointers;\n    const centroid = centroidFromPointers(targetPointers);\n    if (targetPointers.length == this.lastPointersCount_) {\n      if (this.kinetic_) {\n        this.kinetic_.update(centroid[0], centroid[1]);\n      }\n      if (this.lastCentroid) {\n        const delta = [\n          this.lastCentroid[0] - centroid[0],\n          centroid[1] - this.lastCentroid[1]\n        ];\n        const map = mapBrowserEvent.map;\n        const view = map.getView();\n        scaleCoordinate(delta, view.getResolution());\n        rotateCoordinate(delta, view.getRotation());\n        view.adjustCenterInternal(delta);\n      }\n    } else if (this.kinetic_) {\n      // reset so we don't overestimate the kinetic energy after\n      // after one finger down, tiny drag, second finger down\n      this.kinetic_.begin();\n    }\n    this.lastCentroid = centroid;\n    this.lastPointersCount_ = targetPointers.length;\n  }\n\n  /**\n   * @inheritDoc\n   */\n  handleUpEvent(mapBrowserEvent) {\n    const map = mapBrowserEvent.map;\n    const view = map.getView();\n    if (this.targetPointers.length === 0) {\n      if (!this.noKinetic_ && this.kinetic_ && this.kinetic_.end()) {\n        const distance = this.kinetic_.getDistance();\n        const angle = this.kinetic_.getAngle();\n        const center = view.getCenterInternal();\n        const centerpx = map.getPixelFromCoordinateInternal(center);\n        const dest = map.getCoordinateFromPixelInternal([\n          centerpx[0] - distance * Math.cos(angle),\n          centerpx[1] - distance * Math.sin(angle)\n        ]);\n        view.animateInternal({\n          center: view.getConstrainedCenter(dest),\n          duration: 500,\n          easing: easeOut\n        });\n      }\n      if (this.panning_) {\n        this.panning_ = false;\n        view.endInteraction();\n      }\n      return false;\n    } else {\n      if (this.kinetic_) {\n        // reset so we don't overestimate the kinetic energy after\n        // after one finger up, tiny drag, second finger up\n        this.kinetic_.begin();\n      }\n      this.lastCentroid = null;\n      return true;\n    }\n  }\n\n  /**\n   * @inheritDoc\n   */\n  handleDownEvent(mapBrowserEvent) {\n    if (this.targetPointers.length > 0 && this.condition_(mapBrowserEvent)) {\n      const map = mapBrowserEvent.map;\n      const view = map.getView();\n      this.lastCentroid = null;\n      // stop any current animation\n      if (view.getAnimating()) {\n        view.cancelAnimations();\n      }\n      if (this.kinetic_) {\n        this.kinetic_.begin();\n      }\n      // No kinetic as soon as more than one pointer on the screen is\n      // detected. This is to prevent nasty pans after pinch.\n      this.noKinetic_ = this.targetPointers.length > 1;\n      return true;\n    } else {\n      return false;\n    }\n  }\n}\n\n/**\n * @param {import(\"../MapBrowserPointerEvent.js\").default} mapBrowserEvent Browser event.\n * @return {boolean} Combined condition result.\n */\nfunction defaultCondition(mapBrowserEvent) {\n  return noModifierKeys(mapBrowserEvent) && primaryAction(mapBrowserEvent);\n}\n\nexport default DragPan;\n","/**\n * @module ol/interaction/DragRotate\n */\nimport {disable} from '../rotationconstraint.js';\nimport {altShiftKeysOnly, mouseOnly, mouseActionButton} from '../events/condition.js';\nimport {FALSE} from '../functions.js';\nimport PointerInteraction from './Pointer.js';\n\n\n/**\n * @typedef {Object} Options\n * @property {import(\"../events/condition.js\").Condition} [condition] A function that takes an\n * {@link module:ol/MapBrowserEvent~MapBrowserEvent} and returns a boolean\n * to indicate whether that event should be handled.\n * Default is {@link module:ol/events/condition~altShiftKeysOnly}.\n * @property {number} [duration=250] Animation duration in milliseconds.\n */\n\n\n/**\n * @classdesc\n * Allows the user to rotate the map by clicking and dragging on the map,\n * normally combined with an {@link module:ol/events/condition} that limits\n * it to when the alt and shift keys are held down.\n *\n * This interaction is only supported for mouse devices.\n * @api\n */\nclass DragRotate extends PointerInteraction {\n\n  /**\n   * @param {Options=} opt_options Options.\n   */\n  constructor(opt_options) {\n\n    const options = opt_options ? opt_options : {};\n\n    super({\n      stopDown: FALSE\n    });\n\n    /**\n     * @private\n     * @type {import(\"../events/condition.js\").Condition}\n     */\n    this.condition_ = options.condition ? options.condition : altShiftKeysOnly;\n\n    /**\n     * @private\n     * @type {number|undefined}\n     */\n    this.lastAngle_ = undefined;\n\n    /**\n     * @private\n     * @type {number}\n     */\n    this.duration_ = options.duration !== undefined ? options.duration : 250;\n\n  }\n\n  /**\n   * @inheritDoc\n   */\n  handleDragEvent(mapBrowserEvent) {\n    if (!mouseOnly(mapBrowserEvent)) {\n      return;\n    }\n\n    const map = mapBrowserEvent.map;\n    const view = map.getView();\n    if (view.getConstraints().rotation === disable) {\n      return;\n    }\n    const size = map.getSize();\n    const offset = mapBrowserEvent.pixel;\n    const theta =\n        Math.atan2(size[1] / 2 - offset[1], offset[0] - size[0] / 2);\n    if (this.lastAngle_ !== undefined) {\n      const delta = theta - this.lastAngle_;\n      view.adjustRotationInternal(-delta);\n    }\n    this.lastAngle_ = theta;\n  }\n\n\n  /**\n   * @inheritDoc\n   */\n  handleUpEvent(mapBrowserEvent) {\n    if (!mouseOnly(mapBrowserEvent)) {\n      return true;\n    }\n\n    const map = mapBrowserEvent.map;\n    const view = map.getView();\n    view.endInteraction(this.duration_);\n    return false;\n  }\n\n\n  /**\n   * @inheritDoc\n   */\n  handleDownEvent(mapBrowserEvent) {\n    if (!mouseOnly(mapBrowserEvent)) {\n      return false;\n    }\n\n    if (mouseActionButton(mapBrowserEvent) && this.condition_(mapBrowserEvent)) {\n      const map = mapBrowserEvent.map;\n      map.getView().beginInteraction();\n      this.lastAngle_ = undefined;\n      return true;\n    } else {\n      return false;\n    }\n  }\n}\n\nexport default DragRotate;\n","/**\n * @module ol/interaction/DragZoom\n */\nimport {easeOut} from '../easing.js';\nimport {shiftKeyOnly} from '../events/condition.js';\nimport {createOrUpdateFromCoordinates, getBottomLeft, getCenter, getTopRight, scaleFromCenter} from '../extent.js';\nimport DragBox from './DragBox.js';\n\n\n/**\n * @typedef {Object} Options\n * @property {string} [className='ol-dragzoom'] CSS class name for styling the\n * box.\n * @property {import(\"../events/condition.js\").Condition} [condition] A function that\n * takes an {@link module:ol/MapBrowserEvent~MapBrowserEvent} and returns a\n * boolean to indicate whether that event should be handled.\n * Default is {@link module:ol/events/condition~shiftKeyOnly}.\n * @property {number} [duration=200] Animation duration in milliseconds.\n * @property {boolean} [out=false] Use interaction for zooming out.\n * @property {number} [minArea=64] The minimum area of the box in pixel, this value is used by the parent default\n * `boxEndCondition` function.\n */\n\n\n/**\n * @classdesc\n * Allows the user to zoom the map by clicking and dragging on the map,\n * normally combined with an {@link module:ol/events/condition} that limits\n * it to when a key, shift by default, is held down.\n *\n * To change the style of the box, use CSS and the `.ol-dragzoom` selector, or\n * your custom one configured with `className`.\n * @api\n */\nclass DragZoom extends DragBox {\n  /**\n   * @param {Options=} opt_options Options.\n   */\n  constructor(opt_options) {\n    const options = opt_options ? opt_options : {};\n\n    const condition = options.condition ? options.condition : shiftKeyOnly;\n\n    super({\n      condition: condition,\n      className: options.className || 'ol-dragzoom',\n      minArea: options.minArea,\n      onBoxEnd: onBoxEnd\n    });\n\n    /**\n     * @private\n     * @type {number}\n     */\n    this.duration_ = options.duration !== undefined ? options.duration : 200;\n\n    /**\n     * @private\n     * @type {boolean}\n     */\n    this.out_ = options.out !== undefined ? options.out : false;\n  }\n}\n\n\n/**\n * @this {DragZoom}\n */\nfunction onBoxEnd() {\n  const map = this.getMap();\n  const view = /** @type {!import(\"../View.js\").default} */ (map.getView());\n  const size = /** @type {!import(\"../size.js\").Size} */ (map.getSize());\n  let extent = this.getGeometry().getExtent();\n\n  if (this.out_) {\n    const mapExtent = view.calculateExtentInternal(size);\n    const boxPixelExtent = createOrUpdateFromCoordinates([\n      map.getPixelFromCoordinateInternal(getBottomLeft(extent)),\n      map.getPixelFromCoordinateInternal(getTopRight(extent))]);\n    const factor = view.getResolutionForExtentInternal(boxPixelExtent, size);\n\n    scaleFromCenter(mapExtent, 1 / factor);\n    extent = mapExtent;\n  }\n\n  const resolution = view.getConstrainedResolution(view.getResolutionForExtentInternal(extent, size));\n  const center = view.getConstrainedCenter(getCenter(extent), resolution);\n\n  view.animateInternal({\n    resolution: resolution,\n    center: center,\n    duration: this.duration_,\n    easing: easeOut\n  });\n}\n\n\nexport default DragZoom;\n","/**\n * @module ol/events/KeyCode\n */\n\n/**\n * @enum {number}\n * @const\n */\nexport default {\n  LEFT: 37,\n  UP: 38,\n  RIGHT: 39,\n  DOWN: 40\n};\n","/**\n * @module ol/interaction/KeyboardPan\n */\nimport {rotate as rotateCoordinate} from '../coordinate.js';\nimport EventType from '../events/EventType.js';\nimport KeyCode from '../events/KeyCode.js';\nimport {noModifierKeys, targetNotEditable} from '../events/condition.js';\nimport Interaction, {pan} from './Interaction.js';\n\n\n/**\n * @typedef {Object} Options\n * @property {import(\"../events/condition.js\").Condition} [condition] A function that\n * takes an {@link module:ol/MapBrowserEvent~MapBrowserEvent} and returns a\n * boolean to indicate whether that event should be handled. Default is\n * {@link module:ol/events/condition~noModifierKeys} and\n * {@link module:ol/events/condition~targetNotEditable}.\n * @property {number} [duration=100] Animation duration in milliseconds.\n * @property {number} [pixelDelta=128] The amount of pixels to pan on each key\n * press.\n */\n\n\n/**\n * @classdesc\n * Allows the user to pan the map using keyboard arrows.\n * Note that, although this interaction is by default included in maps,\n * the keys can only be used when browser focus is on the element to which\n * the keyboard events are attached. By default, this is the map div,\n * though you can change this with the `keyboardEventTarget` in\n * {@link module:ol/Map~Map}. `document` never loses focus but, for any other\n * element, focus will have to be on, and returned to, this element if the keys\n * are to function.\n * See also {@link module:ol/interaction/KeyboardZoom~KeyboardZoom}.\n * @api\n */\nclass KeyboardPan extends Interaction {\n  /**\n   * @param {Options=} opt_options Options.\n   */\n  constructor(opt_options) {\n\n    super({\n      handleEvent: handleEvent\n    });\n\n    const options = opt_options || {};\n\n    /**\n     * @private\n     * @param {import(\"../MapBrowserEvent.js\").default} mapBrowserEvent Browser event.\n     * @return {boolean} Combined condition result.\n     */\n    this.defaultCondition_ = function(mapBrowserEvent) {\n      return noModifierKeys(mapBrowserEvent) &&\n        targetNotEditable(mapBrowserEvent);\n    };\n\n    /**\n     * @private\n     * @type {import(\"../events/condition.js\").Condition}\n     */\n    this.condition_ = options.condition !== undefined ?\n      options.condition : this.defaultCondition_;\n\n    /**\n     * @private\n     * @type {number}\n     */\n    this.duration_ = options.duration !== undefined ? options.duration : 100;\n\n    /**\n     * @private\n     * @type {number}\n     */\n    this.pixelDelta_ = options.pixelDelta !== undefined ?\n      options.pixelDelta : 128;\n\n  }\n\n}\n\n\n/**\n * Handles the {@link module:ol/MapBrowserEvent map browser event} if it was a\n * `KeyEvent`, and decides the direction to pan to (if an arrow key was\n * pressed).\n * @param {import(\"../MapBrowserEvent.js\").default} mapBrowserEvent Map browser event.\n * @return {boolean} `false` to stop event propagation.\n * @this {KeyboardPan}\n */\nfunction handleEvent(mapBrowserEvent) {\n  let stopEvent = false;\n  if (mapBrowserEvent.type == EventType.KEYDOWN) {\n    const keyEvent = /** @type {KeyboardEvent} */ (mapBrowserEvent.originalEvent);\n    const keyCode = keyEvent.keyCode;\n    if (this.condition_(mapBrowserEvent) &&\n        (keyCode == KeyCode.DOWN ||\n        keyCode == KeyCode.LEFT ||\n        keyCode == KeyCode.RIGHT ||\n        keyCode == KeyCode.UP)) {\n      const map = mapBrowserEvent.map;\n      const view = map.getView();\n      const mapUnitsDelta = view.getResolution() * this.pixelDelta_;\n      let deltaX = 0, deltaY = 0;\n      if (keyCode == KeyCode.DOWN) {\n        deltaY = -mapUnitsDelta;\n      } else if (keyCode == KeyCode.LEFT) {\n        deltaX = -mapUnitsDelta;\n      } else if (keyCode == KeyCode.RIGHT) {\n        deltaX = mapUnitsDelta;\n      } else {\n        deltaY = mapUnitsDelta;\n      }\n      const delta = [deltaX, deltaY];\n      rotateCoordinate(delta, view.getRotation());\n      pan(view, delta, this.duration_);\n      mapBrowserEvent.preventDefault();\n      stopEvent = true;\n    }\n  }\n  return !stopEvent;\n}\n\nexport default KeyboardPan;\n","/**\n * @module ol/interaction/KeyboardZoom\n */\nimport EventType from '../events/EventType.js';\nimport {targetNotEditable} from '../events/condition.js';\nimport Interaction, {zoomByDelta} from './Interaction.js';\n\n\n/**\n * @typedef {Object} Options\n * @property {number} [duration=100] Animation duration in milliseconds.\n * @property {import(\"../events/condition.js\").Condition} [condition] A function that\n * takes an {@link module:ol/MapBrowserEvent~MapBrowserEvent} and returns a\n * boolean to indicate whether that event should be handled. Default is\n * {@link module:ol/events/condition~targetNotEditable}.\n * @property {number} [delta=1] The zoom level delta on each key press.\n */\n\n\n/**\n * @classdesc\n * Allows the user to zoom the map using keyboard + and -.\n * Note that, although this interaction is by default included in maps,\n * the keys can only be used when browser focus is on the element to which\n * the keyboard events are attached. By default, this is the map div,\n * though you can change this with the `keyboardEventTarget` in\n * {@link module:ol/Map~Map}. `document` never loses focus but, for any other\n * element, focus will have to be on, and returned to, this element if the keys\n * are to function.\n * See also {@link module:ol/interaction/KeyboardPan~KeyboardPan}.\n * @api\n */\nclass KeyboardZoom extends Interaction {\n  /**\n   * @param {Options=} opt_options Options.\n   */\n  constructor(opt_options) {\n\n    super({\n      handleEvent: handleEvent\n    });\n\n    const options = opt_options ? opt_options : {};\n\n    /**\n     * @private\n     * @type {import(\"../events/condition.js\").Condition}\n     */\n    this.condition_ = options.condition ? options.condition : targetNotEditable;\n\n    /**\n     * @private\n     * @type {number}\n     */\n    this.delta_ = options.delta ? options.delta : 1;\n\n    /**\n     * @private\n     * @type {number}\n     */\n    this.duration_ = options.duration !== undefined ? options.duration : 100;\n\n  }\n\n}\n\n\n/**\n * Handles the {@link module:ol/MapBrowserEvent map browser event} if it was a\n * `KeyEvent`, and decides whether to zoom in or out (depending on whether the\n * key pressed was '+' or '-').\n * @param {import(\"../MapBrowserEvent.js\").default} mapBrowserEvent Map browser event.\n * @return {boolean} `false` to stop event propagation.\n * @this {KeyboardZoom}\n */\nfunction handleEvent(mapBrowserEvent) {\n  let stopEvent = false;\n  if (mapBrowserEvent.type == EventType.KEYDOWN ||\n      mapBrowserEvent.type == EventType.KEYPRESS) {\n    const keyEvent = /** @type {KeyboardEvent} */ (mapBrowserEvent.originalEvent);\n    const charCode = keyEvent.charCode;\n    if (this.condition_(mapBrowserEvent) &&\n        (charCode == '+'.charCodeAt(0) || charCode == '-'.charCodeAt(0))) {\n      const map = mapBrowserEvent.map;\n      const delta = (charCode == '+'.charCodeAt(0)) ? this.delta_ : -this.delta_;\n      const view = map.getView();\n      zoomByDelta(view, delta, undefined, this.duration_);\n      mapBrowserEvent.preventDefault();\n      stopEvent = true;\n    }\n  }\n  return !stopEvent;\n}\n\nexport default KeyboardZoom;\n","/**\n * @module ol/interaction/MouseWheelZoom\n */\nimport {always} from '../events/condition.js';\nimport EventType from '../events/EventType.js';\nimport {DEVICE_PIXEL_RATIO, FIREFOX} from '../has.js';\nimport Interaction, {zoomByDelta} from './Interaction.js';\nimport {clamp} from '../math.js';\n\n\n/**\n * @enum {string}\n */\nexport const Mode = {\n  TRACKPAD: 'trackpad',\n  WHEEL: 'wheel'\n};\n\n\n/**\n * @typedef {Object} Options\n * @property {import(\"../events/condition.js\").Condition} [condition] A function that\n * takes an {@link module:ol/MapBrowserEvent~MapBrowserEvent} and returns a\n * boolean to indicate whether that event should be handled. Default is\n * {@link module:ol/events/condition~always}.\n * @property {number} [maxDelta=1] Maximum mouse wheel delta.\n * @property {number} [duration=250] Animation duration in milliseconds.\n * @property {number} [timeout=80] Mouse wheel timeout duration in milliseconds.\n * @property {boolean} [useAnchor=true] Enable zooming using the mouse's\n * location as the anchor. When set to `false`, zooming in and out will zoom to\n * the center of the screen instead of zooming on the mouse's location.\n */\n\n\n/**\n * @classdesc\n * Allows the user to zoom the map by scrolling the mouse wheel.\n * @api\n */\nclass MouseWheelZoom extends Interaction {\n  /**\n   * @param {Options=} opt_options Options.\n   */\n  constructor(opt_options) {\n\n    const options = opt_options ? opt_options : {};\n\n    super(/** @type {import(\"./Interaction.js\").InteractionOptions} */ (options));\n\n    /**\n     * @private\n     * @type {number}\n     */\n    this.totalDelta_ = 0;\n\n    /**\n     * @private\n     * @type {number}\n     */\n    this.lastDelta_ = 0;\n\n    /**\n     * @private\n     * @type {number}\n     */\n    this.maxDelta_ = options.maxDelta !== undefined ? options.maxDelta : 1;\n\n    /**\n     * @private\n     * @type {number}\n     */\n    this.duration_ = options.duration !== undefined ? options.duration : 250;\n\n    /**\n     * @private\n     * @type {number}\n     */\n    this.timeout_ = options.timeout !== undefined ? options.timeout : 80;\n\n    /**\n     * @private\n     * @type {boolean}\n     */\n    this.useAnchor_ = options.useAnchor !== undefined ? options.useAnchor : true;\n\n    /**\n     * @private\n     * @type {import(\"../events/condition.js\").Condition}\n     */\n    this.condition_ = options.condition ? options.condition : always;\n\n    /**\n     * @private\n     * @type {?import(\"../coordinate.js\").Coordinate}\n     */\n    this.lastAnchor_ = null;\n\n    /**\n     * @private\n     * @type {number|undefined}\n     */\n    this.startTime_ = undefined;\n\n    /**\n     * @private\n     * @type {?}\n     */\n    this.timeoutId_;\n\n    /**\n     * @private\n     * @type {Mode|undefined}\n     */\n    this.mode_ = undefined;\n\n    /**\n     * Trackpad events separated by this delay will be considered separate\n     * interactions.\n     * @type {number}\n     */\n    this.trackpadEventGap_ = 400;\n\n    /**\n     * @type {?}\n     */\n    this.trackpadTimeoutId_;\n\n    /**\n     * The number of delta values per zoom level\n     * @private\n     * @type {number}\n     */\n    this.trackpadDeltaPerZoom_ = 300;\n\n  }\n\n  /**\n   * @private\n   */\n  endInteraction_() {\n    this.trackpadTimeoutId_ = undefined;\n    const view = this.getMap().getView();\n    view.endInteraction(undefined, Math.sign(this.lastDelta_), this.lastAnchor_);\n  }\n\n  /**\n   * Handles the {@link module:ol/MapBrowserEvent map browser event} (if it was a mousewheel-event) and eventually\n   * zooms the map.\n   * @override\n   */\n  handleEvent(mapBrowserEvent) {\n    if (!this.condition_(mapBrowserEvent)) {\n      return true;\n    }\n    const type = mapBrowserEvent.type;\n    if (type !== EventType.WHEEL) {\n      return true;\n    }\n\n    mapBrowserEvent.preventDefault();\n\n    const map = mapBrowserEvent.map;\n    const wheelEvent = /** @type {WheelEvent} */ (mapBrowserEvent.originalEvent);\n\n    if (this.useAnchor_) {\n      this.lastAnchor_ = mapBrowserEvent.coordinate;\n    }\n\n    // Delta normalisation inspired by\n    // https://github.com/mapbox/mapbox-gl-js/blob/001c7b9/js/ui/handler/scroll_zoom.js\n    let delta;\n    if (mapBrowserEvent.type == EventType.WHEEL) {\n      delta = wheelEvent.deltaY;\n      if (FIREFOX &&\n          wheelEvent.deltaMode === WheelEvent.DOM_DELTA_PIXEL) {\n        delta /= DEVICE_PIXEL_RATIO;\n      }\n      if (wheelEvent.deltaMode === WheelEvent.DOM_DELTA_LINE) {\n        delta *= 40;\n      }\n    }\n\n    if (delta === 0) {\n      return false;\n    } else {\n      this.lastDelta_ = delta;\n    }\n\n    const now = Date.now();\n\n    if (this.startTime_ === undefined) {\n      this.startTime_ = now;\n    }\n\n    if (!this.mode_ || now - this.startTime_ > this.trackpadEventGap_) {\n      this.mode_ = Math.abs(delta) < 4 ?\n        Mode.TRACKPAD :\n        Mode.WHEEL;\n    }\n\n    if (this.mode_ === Mode.TRACKPAD) {\n      const view = map.getView();\n      if (this.trackpadTimeoutId_) {\n        clearTimeout(this.trackpadTimeoutId_);\n      } else {\n        view.beginInteraction();\n      }\n      this.trackpadTimeoutId_ = setTimeout(this.endInteraction_.bind(this), this.trackpadEventGap_);\n      view.adjustZoom(-delta / this.trackpadDeltaPerZoom_, this.lastAnchor_);\n      this.startTime_ = now;\n      return false;\n    }\n\n    this.totalDelta_ += delta;\n\n    const timeLeft = Math.max(this.timeout_ - (now - this.startTime_), 0);\n\n    clearTimeout(this.timeoutId_);\n    this.timeoutId_ = setTimeout(this.handleWheelZoom_.bind(this, map), timeLeft);\n\n    return false;\n  }\n\n  /**\n   * @private\n   * @param {import(\"../PluggableMap.js\").default} map Map.\n   */\n  handleWheelZoom_(map) {\n    const view = map.getView();\n    if (view.getAnimating()) {\n      view.cancelAnimations();\n    }\n    const delta = clamp(this.totalDelta_, -this.maxDelta_, this.maxDelta_);\n    zoomByDelta(view, -delta, this.lastAnchor_, this.duration_);\n    this.mode_ = undefined;\n    this.totalDelta_ = 0;\n    this.lastAnchor_ = null;\n    this.startTime_ = undefined;\n    this.timeoutId_ = undefined;\n  }\n\n  /**\n   * Enable or disable using the mouse's location as an anchor when zooming\n   * @param {boolean} useAnchor true to zoom to the mouse's location, false\n   * to zoom to the center of the map\n   * @api\n   */\n  setMouseAnchor(useAnchor) {\n    this.useAnchor_ = useAnchor;\n    if (!useAnchor) {\n      this.lastAnchor_ = null;\n    }\n  }\n}\n\nexport default MouseWheelZoom;\n","/**\n * @module ol/interaction/PinchRotate\n */\nimport {FALSE} from '../functions.js';\nimport PointerInteraction, {centroid as centroidFromPointers} from './Pointer.js';\nimport {disable} from '../rotationconstraint.js';\n\n\n/**\n * @typedef {Object} Options\n * @property {number} [duration=250] The duration of the animation in\n * milliseconds.\n * @property {number} [threshold=0.3] Minimal angle in radians to start a rotation.\n */\n\n\n/**\n * @classdesc\n * Allows the user to rotate the map by twisting with two fingers\n * on a touch screen.\n * @api\n */\nclass PinchRotate extends PointerInteraction {\n  /**\n   * @param {Options=} opt_options Options.\n   */\n  constructor(opt_options) {\n\n    const options = opt_options ? opt_options : {};\n\n    const pointerOptions = /** @type {import(\"./Pointer.js\").Options} */ (options);\n\n    if (!pointerOptions.stopDown) {\n      pointerOptions.stopDown = FALSE;\n    }\n\n    super(pointerOptions);\n\n    /**\n     * @private\n     * @type {import(\"../coordinate.js\").Coordinate}\n     */\n    this.anchor_ = null;\n\n    /**\n     * @private\n     * @type {number|undefined}\n     */\n    this.lastAngle_ = undefined;\n\n    /**\n     * @private\n     * @type {boolean}\n     */\n    this.rotating_ = false;\n\n    /**\n     * @private\n     * @type {number}\n     */\n    this.rotationDelta_ = 0.0;\n\n    /**\n     * @private\n     * @type {number}\n     */\n    this.threshold_ = options.threshold !== undefined ? options.threshold : 0.3;\n\n    /**\n     * @private\n     * @type {number}\n     */\n    this.duration_ = options.duration !== undefined ? options.duration : 250;\n\n  }\n\n  /**\n   * @inheritDoc\n   */\n  handleDragEvent(mapBrowserEvent) {\n    let rotationDelta = 0.0;\n\n    const touch0 = this.targetPointers[0];\n    const touch1 = this.targetPointers[1];\n\n    // angle between touches\n    const angle = Math.atan2(\n      touch1.clientY - touch0.clientY,\n      touch1.clientX - touch0.clientX);\n\n    if (this.lastAngle_ !== undefined) {\n      const delta = angle - this.lastAngle_;\n      this.rotationDelta_ += delta;\n      if (!this.rotating_ &&\n          Math.abs(this.rotationDelta_) > this.threshold_) {\n        this.rotating_ = true;\n      }\n      rotationDelta = delta;\n    }\n    this.lastAngle_ = angle;\n\n    const map = mapBrowserEvent.map;\n    const view = map.getView();\n    if (view.getConstraints().rotation === disable) {\n      return;\n    }\n\n    // rotate anchor point.\n    // FIXME: should be the intersection point between the lines:\n    //     touch0,touch1 and previousTouch0,previousTouch1\n    const viewportPosition = map.getViewport().getBoundingClientRect();\n    const centroid = centroidFromPointers(this.targetPointers);\n    centroid[0] -= viewportPosition.left;\n    centroid[1] -= viewportPosition.top;\n    this.anchor_ = map.getCoordinateFromPixelInternal(centroid);\n\n    // rotate\n    if (this.rotating_) {\n      map.render();\n      view.adjustRotationInternal(rotationDelta, this.anchor_);\n    }\n  }\n\n  /**\n   * @inheritDoc\n   */\n  handleUpEvent(mapBrowserEvent) {\n    if (this.targetPointers.length < 2) {\n      const map = mapBrowserEvent.map;\n      const view = map.getView();\n      view.endInteraction(this.duration_);\n      return false;\n    } else {\n      return true;\n    }\n  }\n\n  /**\n   * @inheritDoc\n   */\n  handleDownEvent(mapBrowserEvent) {\n    if (this.targetPointers.length >= 2) {\n      const map = mapBrowserEvent.map;\n      this.anchor_ = null;\n      this.lastAngle_ = undefined;\n      this.rotating_ = false;\n      this.rotationDelta_ = 0.0;\n      if (!this.handlingDownUpSequence) {\n        map.getView().beginInteraction();\n      }\n      return true;\n    } else {\n      return false;\n    }\n  }\n}\n\nexport default PinchRotate;\n","/**\n * @module ol/interaction\n */\nimport Collection from './Collection.js';\nimport Kinetic from './Kinetic.js';\nimport DoubleClickZoom from './interaction/DoubleClickZoom.js';\nimport DragPan from './interaction/DragPan.js';\nimport DragRotate from './interaction/DragRotate.js';\nimport DragZoom from './interaction/DragZoom.js';\nimport KeyboardPan from './interaction/KeyboardPan.js';\nimport KeyboardZoom from './interaction/KeyboardZoom.js';\nimport MouseWheelZoom from './interaction/MouseWheelZoom.js';\nimport PinchRotate from './interaction/PinchRotate.js';\nimport PinchZoom from './interaction/PinchZoom.js';\nimport {focus} from './events/condition.js';\n\nexport {default as DoubleClickZoom} from './interaction/DoubleClickZoom.js';\nexport {default as DragAndDrop} from './interaction/DragAndDrop.js';\nexport {default as DragBox} from './interaction/DragBox.js';\nexport {default as DragPan} from './interaction/DragPan.js';\nexport {default as DragRotate} from './interaction/DragRotate.js';\nexport {default as DragRotateAndZoom} from './interaction/DragRotateAndZoom.js';\nexport {default as DragZoom} from './interaction/DragZoom.js';\nexport {default as Draw} from './interaction/Draw.js';\nexport {default as Extent} from './interaction/Extent.js';\nexport {default as Interaction} from './interaction/Interaction.js';\nexport {default as KeyboardPan} from './interaction/KeyboardPan.js';\nexport {default as KeyboardZoom} from './interaction/KeyboardZoom.js';\nexport {default as Modify} from './interaction/Modify.js';\nexport {default as MouseWheelZoom} from './interaction/MouseWheelZoom.js';\nexport {default as PinchRotate} from './interaction/PinchRotate.js';\nexport {default as PinchZoom} from './interaction/PinchZoom.js';\nexport {default as Pointer} from './interaction/Pointer.js';\nexport {default as Select} from './interaction/Select.js';\nexport {default as Snap} from './interaction/Snap.js';\nexport {default as Translate} from './interaction/Translate.js';\n\n\n/**\n * @typedef {Object} DefaultsOptions\n * @property {boolean} [altShiftDragRotate=true] Whether Alt-Shift-drag rotate is\n * desired.\n * @property {boolean} [onFocusOnly=false] Interact only when the map has the\n * focus. This affects the `MouseWheelZoom` and `DragPan` interactions and is\n * useful when page scroll is desired for maps that do not have the browser's\n * focus.\n * @property {boolean} [doubleClickZoom=true] Whether double click zoom is\n * desired.\n * @property {boolean} [keyboard=true] Whether keyboard interaction is desired.\n * @property {boolean} [mouseWheelZoom=true] Whether mousewheel zoom is desired.\n * @property {boolean} [shiftDragZoom=true] Whether Shift-drag zoom is desired.\n * @property {boolean} [dragPan=true] Whether drag pan is desired.\n * @property {boolean} [pinchRotate=true] Whether pinch rotate is desired.\n * @property {boolean} [pinchZoom=true] Whether pinch zoom is desired.\n * @property {number} [zoomDelta] Zoom level delta when using keyboard or double click zoom.\n * @property {number} [zoomDuration] Duration of the zoom animation in\n * milliseconds.\n */\n\n\n/**\n * Set of interactions included in maps by default. Specific interactions can be\n * excluded by setting the appropriate option to false in the constructor\n * options, but the order of the interactions is fixed.  If you want to specify\n * a different order for interactions, you will need to create your own\n * {@link module:ol/interaction/Interaction} instances and insert\n * them into a {@link module:ol/Collection} in the order you want\n * before creating your {@link module:ol/Map~Map} instance. Changing the order can\n * be of interest if the event propagation needs to be stopped at a point.\n * The default set of interactions, in sequence, is:\n * * {@link module:ol/interaction/DragRotate~DragRotate}\n * * {@link module:ol/interaction/DoubleClickZoom~DoubleClickZoom}\n * * {@link module:ol/interaction/DragPan~DragPan}\n * * {@link module:ol/interaction/PinchRotate~PinchRotate}\n * * {@link module:ol/interaction/PinchZoom~PinchZoom}\n * * {@link module:ol/interaction/KeyboardPan~KeyboardPan}\n * * {@link module:ol/interaction/KeyboardZoom~KeyboardZoom}\n * * {@link module:ol/interaction/MouseWheelZoom~MouseWheelZoom}\n * * {@link module:ol/interaction/DragZoom~DragZoom}\n *\n * @param {DefaultsOptions=} opt_options Defaults options.\n * @return {import(\"./Collection.js\").default<import(\"./interaction/Interaction.js\").default>}\n * A collection of interactions to be used with the {@link module:ol/Map~Map}\n * constructor's `interactions` option.\n * @api\n */\nexport function defaults(opt_options) {\n\n  const options = opt_options ? opt_options : {};\n\n  const interactions = new Collection();\n\n  const kinetic = new Kinetic(-0.005, 0.05, 100);\n\n  const altShiftDragRotate = options.altShiftDragRotate !== undefined ?\n    options.altShiftDragRotate : true;\n  if (altShiftDragRotate) {\n    interactions.push(new DragRotate());\n  }\n\n  const doubleClickZoom = options.doubleClickZoom !== undefined ?\n    options.doubleClickZoom : true;\n  if (doubleClickZoom) {\n    interactions.push(new DoubleClickZoom({\n      delta: options.zoomDelta,\n      duration: options.zoomDuration\n    }));\n  }\n\n  const dragPan = options.dragPan !== undefined ? options.dragPan : true;\n  if (dragPan) {\n    interactions.push(new DragPan({\n      condition: options.onFocusOnly ? focus : undefined,\n      kinetic: kinetic\n    }));\n  }\n\n  const pinchRotate = options.pinchRotate !== undefined ? options.pinchRotate :\n    true;\n  if (pinchRotate) {\n    interactions.push(new PinchRotate());\n  }\n\n  const pinchZoom = options.pinchZoom !== undefined ? options.pinchZoom : true;\n  if (pinchZoom) {\n    interactions.push(new PinchZoom({\n      duration: options.zoomDuration\n    }));\n  }\n\n  const keyboard = options.keyboard !== undefined ? options.keyboard : true;\n  if (keyboard) {\n    interactions.push(new KeyboardPan());\n    interactions.push(new KeyboardZoom({\n      delta: options.zoomDelta,\n      duration: options.zoomDuration\n    }));\n  }\n\n  const mouseWheelZoom = options.mouseWheelZoom !== undefined ?\n    options.mouseWheelZoom : true;\n  if (mouseWheelZoom) {\n    interactions.push(new MouseWheelZoom({\n      condition: options.onFocusOnly ? focus : undefined,\n      duration: options.zoomDuration\n    }));\n  }\n\n  const shiftDragZoom = options.shiftDragZoom !== undefined ?\n    options.shiftDragZoom : true;\n  if (shiftDragZoom) {\n    interactions.push(new DragZoom({\n      duration: options.zoomDuration\n    }));\n  }\n\n  return interactions;\n\n}\n","/**\n * @module ol/control/Rotate\n */\nimport Control from './Control.js';\nimport {CLASS_CONTROL, CLASS_HIDDEN, CLASS_UNSELECTABLE} from '../css.js';\nimport {easeOut} from '../easing.js';\nimport EventType from '../events/EventType.js';\n\n\n/**\n * @typedef {Object} Options\n * @property {string} [className='ol-rotate'] CSS class name.\n * @property {string|HTMLElement} [label='⇧'] Text label to use for the rotate button.\n * Instead of text, also an element (e.g. a `span` element) can be used.\n * @property {string} [tipLabel='Reset rotation'] Text label to use for the rotate tip.\n * @property {number} [duration=250] Animation duration in milliseconds.\n * @property {boolean} [autoHide=true] Hide the control when rotation is 0.\n * @property {function(import(\"../MapEvent.js\").default)} [render] Function called when the control should\n * be re-rendered. This is called in a `requestAnimationFrame` callback.\n * @property {function()} [resetNorth] Function called when the control is clicked.\n * This will override the default `resetNorth`.\n * @property {HTMLElement|string} [target] Specify a target if you want the control to be\n * rendered outside of the map's viewport.\n */\n\n\n/**\n * @classdesc\n * A button control to reset rotation to 0.\n * To style this control use css selector `.ol-rotate`. A `.ol-hidden` css\n * selector is added to the button when the rotation is 0.\n *\n * @api\n */\nclass Rotate extends Control {\n\n  /**\n   * @param {Options=} opt_options Rotate options.\n   */\n  constructor(opt_options) {\n\n    const options = opt_options ? opt_options : {};\n\n    super({\n      element: document.createElement('div'),\n      render: options.render || render,\n      target: options.target\n    });\n\n    const className = options.className !== undefined ? options.className : 'ol-rotate';\n\n    const label = options.label !== undefined ? options.label : '\\u21E7';\n\n    /**\n     * @type {HTMLElement}\n     * @private\n     */\n    this.label_ = null;\n\n    if (typeof label === 'string') {\n      this.label_ = document.createElement('span');\n      this.label_.className = 'ol-compass';\n      this.label_.textContent = label;\n    } else {\n      this.label_ = label;\n      this.label_.classList.add('ol-compass');\n    }\n\n    const tipLabel = options.tipLabel ? options.tipLabel : 'Reset rotation';\n\n    const button = document.createElement('button');\n    button.className = className + '-reset';\n    button.setAttribute('type', 'button');\n    button.title = tipLabel;\n    button.appendChild(this.label_);\n\n    button.addEventListener(EventType.CLICK, this.handleClick_.bind(this), false);\n\n    const cssClasses = className + ' ' + CLASS_UNSELECTABLE + ' ' + CLASS_CONTROL;\n    const element = this.element;\n    element.className = cssClasses;\n    element.appendChild(button);\n\n    this.callResetNorth_ = options.resetNorth ? options.resetNorth : undefined;\n\n    /**\n     * @type {number}\n     * @private\n     */\n    this.duration_ = options.duration !== undefined ? options.duration : 250;\n\n    /**\n     * @type {boolean}\n     * @private\n     */\n    this.autoHide_ = options.autoHide !== undefined ? options.autoHide : true;\n\n    /**\n     * @private\n     * @type {number|undefined}\n     */\n    this.rotation_ = undefined;\n\n    if (this.autoHide_) {\n      this.element.classList.add(CLASS_HIDDEN);\n    }\n\n  }\n\n  /**\n   * @param {MouseEvent} event The event to handle\n   * @private\n   */\n  handleClick_(event) {\n    event.preventDefault();\n    if (this.callResetNorth_ !== undefined) {\n      this.callResetNorth_();\n    } else {\n      this.resetNorth_();\n    }\n  }\n\n  /**\n   * @private\n   */\n  resetNorth_() {\n    const map = this.getMap();\n    const view = map.getView();\n    if (!view) {\n      // the map does not have a view, so we can't act\n      // upon it\n      return;\n    }\n    if (view.getRotation() !== undefined) {\n      if (this.duration_ > 0) {\n        view.animate({\n          rotation: 0,\n          duration: this.duration_,\n          easing: easeOut\n        });\n      } else {\n        view.setRotation(0);\n      }\n    }\n  }\n}\n\n\n/**\n * Update the rotate control element.\n * @param {import(\"../MapEvent.js\").default} mapEvent Map event.\n * @this {Rotate}\n * @api\n */\nexport function render(mapEvent) {\n  const frameState = mapEvent.frameState;\n  if (!frameState) {\n    return;\n  }\n  const rotation = frameState.viewState.rotation;\n  if (rotation != this.rotation_) {\n    const transform = 'rotate(' + rotation + 'rad)';\n    if (this.autoHide_) {\n      const contains = this.element.classList.contains(CLASS_HIDDEN);\n      if (!contains && rotation === 0) {\n        this.element.classList.add(CLASS_HIDDEN);\n      } else if (contains && rotation !== 0) {\n        this.element.classList.remove(CLASS_HIDDEN);\n      }\n    }\n    this.label_.style.transform = transform;\n  }\n  this.rotation_ = rotation;\n}\n\nexport default Rotate;\n","/**\n * @module ol/control/Zoom\n */\nimport EventType from '../events/EventType.js';\nimport Control from './Control.js';\nimport {CLASS_CONTROL, CLASS_UNSELECTABLE} from '../css.js';\nimport {easeOut} from '../easing.js';\n\n\n/**\n * @typedef {Object} Options\n * @property {number} [duration=250] Animation duration in milliseconds.\n * @property {string} [className='ol-zoom'] CSS class name.\n * @property {string|HTMLElement} [zoomInLabel='+'] Text label to use for the zoom-in\n * button. Instead of text, also an element (e.g. a `span` element) can be used.\n * @property {string|HTMLElement} [zoomOutLabel='-'] Text label to use for the zoom-out button.\n * Instead of text, also an element (e.g. a `span` element) can be used.\n * @property {string} [zoomInTipLabel='Zoom in'] Text label to use for the button tip.\n * @property {string} [zoomOutTipLabel='Zoom out'] Text label to use for the button tip.\n * @property {number} [delta=1] The zoom delta applied on each click.\n * @property {HTMLElement|string} [target] Specify a target if you want the control to be\n * rendered outside of the map's viewport.\n */\n\n\n/**\n * @classdesc\n * A control with 2 buttons, one for zoom in and one for zoom out.\n * This control is one of the default controls of a map. To style this control\n * use css selectors `.ol-zoom-in` and `.ol-zoom-out`.\n *\n * @api\n */\nclass Zoom extends Control {\n\n  /**\n   * @param {Options=} opt_options Zoom options.\n   */\n  constructor(opt_options) {\n\n    const options = opt_options ? opt_options : {};\n\n    super({\n      element: document.createElement('div'),\n      target: options.target\n    });\n\n    const className = options.className !== undefined ? options.className : 'ol-zoom';\n\n    const delta = options.delta !== undefined ? options.delta : 1;\n\n    const zoomInLabel = options.zoomInLabel !== undefined ? options.zoomInLabel : '+';\n    const zoomOutLabel = options.zoomOutLabel !== undefined ? options.zoomOutLabel : '\\u2212';\n\n    const zoomInTipLabel = options.zoomInTipLabel !== undefined ?\n      options.zoomInTipLabel : 'Zoom in';\n    const zoomOutTipLabel = options.zoomOutTipLabel !== undefined ?\n      options.zoomOutTipLabel : 'Zoom out';\n\n    const inElement = document.createElement('button');\n    inElement.className = className + '-in';\n    inElement.setAttribute('type', 'button');\n    inElement.title = zoomInTipLabel;\n    inElement.appendChild(\n      typeof zoomInLabel === 'string' ? document.createTextNode(zoomInLabel) : zoomInLabel\n    );\n\n    inElement.addEventListener(EventType.CLICK, this.handleClick_.bind(this, delta), false);\n\n    const outElement = document.createElement('button');\n    outElement.className = className + '-out';\n    outElement.setAttribute('type', 'button');\n    outElement.title = zoomOutTipLabel;\n    outElement.appendChild(\n      typeof zoomOutLabel === 'string' ? document.createTextNode(zoomOutLabel) : zoomOutLabel\n    );\n\n    outElement.addEventListener(EventType.CLICK, this.handleClick_.bind(this, -delta), false);\n\n    const cssClasses = className + ' ' + CLASS_UNSELECTABLE + ' ' + CLASS_CONTROL;\n    const element = this.element;\n    element.className = cssClasses;\n    element.appendChild(inElement);\n    element.appendChild(outElement);\n\n    /**\n     * @type {number}\n     * @private\n     */\n    this.duration_ = options.duration !== undefined ? options.duration : 250;\n\n  }\n\n  /**\n   * @param {number} delta Zoom delta.\n   * @param {MouseEvent} event The event to handle\n   * @private\n   */\n  handleClick_(delta, event) {\n    event.preventDefault();\n    this.zoomByDelta_(delta);\n  }\n\n  /**\n   * @param {number} delta Zoom delta.\n   * @private\n   */\n  zoomByDelta_(delta) {\n    const map = this.getMap();\n    const view = map.getView();\n    if (!view) {\n      // the map does not have a view, so we can't act\n      // upon it\n      return;\n    }\n    const currentZoom = view.getZoom();\n    if (currentZoom !== undefined) {\n      const newZoom = view.getConstrainedZoom(currentZoom + delta);\n      if (this.duration_ > 0) {\n        if (view.getAnimating()) {\n          view.cancelAnimations();\n        }\n        view.animate({\n          zoom: newZoom,\n          duration: this.duration_,\n          easing: easeOut\n        });\n      } else {\n        view.setZoom(newZoom);\n      }\n    }\n  }\n}\n\n\nexport default Zoom;\n","/**\n * @module ol/control\n */\nimport Collection from './Collection.js';\nimport Attribution from './control/Attribution.js';\nimport Rotate from './control/Rotate.js';\nimport Zoom from './control/Zoom.js';\n\nexport {default as Attribution} from './control/Attribution.js';\nexport {default as Control} from './control/Control.js';\nexport {default as FullScreen} from './control/FullScreen.js';\nexport {default as MousePosition} from './control/MousePosition.js';\nexport {default as OverviewMap} from './control/OverviewMap.js';\nexport {default as Rotate} from './control/Rotate.js';\nexport {default as ScaleLine} from './control/ScaleLine.js';\nexport {default as Zoom} from './control/Zoom.js';\nexport {default as ZoomSlider} from './control/ZoomSlider.js';\nexport {default as ZoomToExtent} from './control/ZoomToExtent.js';\n\n/**\n * @typedef {Object} DefaultsOptions\n * @property {boolean} [attribution=true] Include\n * {@link module:ol/control/Attribution~Attribution}.\n * @property {import(\"./control/Attribution.js\").Options} [attributionOptions]\n * Options for {@link module:ol/control/Attribution~Attribution}.\n * @property {boolean} [rotate=true] Include\n * {@link module:ol/control/Rotate~Rotate}.\n * @property {import(\"./control/Rotate.js\").Options} [rotateOptions] Options\n * for {@link module:ol/control/Rotate~Rotate}.\n * @property {boolean} [zoom] Include {@link module:ol/control/Zoom~Zoom}.\n * @property {import(\"./control/Zoom.js\").Options} [zoomOptions] Options for\n * {@link module:ol/control/Zoom~Zoom}.\n * @api\n */\n\n\n/**\n * Set of controls included in maps by default. Unless configured otherwise,\n * this returns a collection containing an instance of each of the following\n * controls:\n * * {@link module:ol/control/Zoom~Zoom}\n * * {@link module:ol/control/Rotate~Rotate}\n * * {@link module:ol/control/Attribution~Attribution}\n *\n * @param {DefaultsOptions=} opt_options\n * Defaults options.\n * @return {Collection<import(\"./control/Control.js\").default>}\n * Controls.\n * @api\n */\nexport function defaults(opt_options) {\n\n  const options = opt_options ? opt_options : {};\n\n  const controls = new Collection();\n\n  const zoomControl = options.zoom !== undefined ? options.zoom : true;\n  if (zoomControl) {\n    controls.push(new Zoom(options.zoomOptions));\n  }\n\n  const rotateControl = options.rotate !== undefined ? options.rotate : true;\n  if (rotateControl) {\n    controls.push(new Rotate(options.rotateOptions));\n  }\n\n  const attributionControl = options.attribution !== undefined ?\n    options.attribution : true;\n  if (attributionControl) {\n    controls.push(new Attribution(options.attributionOptions));\n  }\n\n  return controls;\n}\n","/**\n * @module ol/format/GMLBase\n */\n// FIXME Envelopes should not be treated as geometries! readEnvelope_ is part\n// of GEOMETRY_PARSERS_ and methods using GEOMETRY_PARSERS_ do not expect\n// envelopes/extents, only geometries!\nimport {extend} from '../array.js';\nimport Feature from '../Feature.js';\nimport {transformGeometryWithOptions, transformExtentWithOptions} from './Feature.js';\nimport XMLFeature from './XMLFeature.js';\nimport GeometryLayout from '../geom/GeometryLayout.js';\nimport LineString from '../geom/LineString.js';\nimport LinearRing from '../geom/LinearRing.js';\nimport MultiLineString from '../geom/MultiLineString.js';\nimport MultiPoint from '../geom/MultiPoint.js';\nimport MultiPolygon from '../geom/MultiPolygon.js';\nimport Point from '../geom/Point.js';\nimport Polygon from '../geom/Polygon.js';\nimport {assign} from '../obj.js';\nimport {get as getProjection} from '../proj.js';\nimport {getAllTextContent, getAttributeNS, makeArrayPusher, makeReplacer, parseNode, pushParseAndPop} from '../xml.js';\n\n\n/**\n * @const\n * @type {string}\n */\nexport const GMLNS = 'http://www.opengis.net/gml';\n\n\n/**\n * A regular expression that matches if a string only contains whitespace\n * characters. It will e.g. match `''`, `' '`, `'\\n'` etc. The non-breaking\n * space (0xa0) is explicitly included as IE doesn't include it in its\n * definition of `\\s`.\n *\n * Information from `goog.string.isEmptyOrWhitespace`: https://github.com/google/closure-library/blob/e877b1e/closure/goog/string/string.js#L156-L160\n *\n * @const\n * @type {RegExp}\n */\nconst ONLY_WHITESPACE_RE = /^[\\s\\xa0]*$/;\n\n\n/**\n * @typedef {Object} Options\n * @property {Object<string, string>|string} [featureNS] Feature\n * namespace. If not defined will be derived from GML. If multiple\n * feature types have been configured which come from different feature\n * namespaces, this will be an object with the keys being the prefixes used\n * in the entries of featureType array. The values of the object will be the\n * feature namespaces themselves. So for instance there might be a featureType\n * item `topp:states` in the `featureType` array and then there will be a key\n * `topp` in the featureNS object with value `http://www.openplans.org/topp`.\n * @property {Array<string>|string} [featureType] Feature type(s) to parse.\n * If multiple feature types need to be configured\n * which come from different feature namespaces, `featureNS` will be an object\n * with the keys being the prefixes used in the entries of featureType array.\n * The values of the object will be the feature namespaces themselves.\n * So for instance there might be a featureType item `topp:states` and then\n * there will be a key named `topp` in the featureNS object with value\n * `http://www.openplans.org/topp`.\n * @property {string} srsName srsName to use when writing geometries.\n * @property {boolean} [surface=false] Write gml:Surface instead of gml:Polygon\n * elements. This also affects the elements in multi-part geometries.\n * @property {boolean} [curve=false] Write gml:Curve instead of gml:LineString\n * elements. This also affects the elements in multi-part geometries.\n * @property {boolean} [multiCurve=true] Write gml:MultiCurve instead of gml:MultiLineString.\n * Since the latter is deprecated in GML 3.\n * @property {boolean} [multiSurface=true] Write gml:multiSurface instead of\n * gml:MultiPolygon. Since the latter is deprecated in GML 3.\n * @property {string} [schemaLocation] Optional schemaLocation to use when\n * writing out the GML, this will override the default provided.\n * @property {boolean} [hasZ=false] If coordinates have a Z value.\n */\n\n\n/**\n * @classdesc\n * Abstract base class; normally only used for creating subclasses and not\n * instantiated in apps.\n * Feature base format for reading and writing data in the GML format.\n * This class cannot be instantiated, it contains only base content that\n * is shared with versioned format classes GML2 and GML3.\n *\n * @abstract\n */\nclass GMLBase extends XMLFeature {\n\n  /**\n   * @param {Options=} opt_options Optional configuration object.\n   */\n  constructor(opt_options) {\n    super();\n\n    const options = /** @type {Options} */ (opt_options ? opt_options : {});\n\n    /**\n     * @protected\n     * @type {Array<string>|string|undefined}\n     */\n    this.featureType = options.featureType;\n\n    /**\n     * @protected\n     * @type {Object<string, string>|string|undefined}\n     */\n    this.featureNS = options.featureNS;\n\n    /**\n     * @protected\n     * @type {string}\n     */\n    this.srsName = options.srsName;\n\n    /**\n     * @protected\n     * @type {string}\n     */\n    this.schemaLocation = '';\n\n    /**\n     * @type {Object<string, Object<string, Object>>}\n     */\n    this.FEATURE_COLLECTION_PARSERS = {};\n    this.FEATURE_COLLECTION_PARSERS[this.namespace] = {\n      'featureMember': makeArrayPusher(this.readFeaturesInternal),\n      'featureMembers': makeReplacer(this.readFeaturesInternal)\n    };\n  }\n\n  /**\n   * @param {Element} node Node.\n   * @param {Array<*>} objectStack Object stack.\n   * @return {Array<Feature> | undefined} Features.\n   */\n  readFeaturesInternal(node, objectStack) {\n    const localName = node.localName;\n    let features = null;\n    if (localName == 'FeatureCollection') {\n      features = pushParseAndPop([],\n        this.FEATURE_COLLECTION_PARSERS, node,\n        objectStack, this);\n    } else if (localName == 'featureMembers' || localName == 'featureMember') {\n      const context = objectStack[0];\n      let featureType = context['featureType'];\n      let featureNS = context['featureNS'];\n      const prefix = 'p';\n      const defaultPrefix = 'p0';\n      if (!featureType && node.childNodes) {\n        featureType = [], featureNS = {};\n        for (let i = 0, ii = node.childNodes.length; i < ii; ++i) {\n          const child = node.childNodes[i];\n          if (child.nodeType === 1) {\n            const ft = child.nodeName.split(':').pop();\n            if (featureType.indexOf(ft) === -1) {\n              let key = '';\n              let count = 0;\n              const uri = child.namespaceURI;\n              for (const candidate in featureNS) {\n                if (featureNS[candidate] === uri) {\n                  key = candidate;\n                  break;\n                }\n                ++count;\n              }\n              if (!key) {\n                key = prefix + count;\n                featureNS[key] = uri;\n              }\n              featureType.push(key + ':' + ft);\n            }\n          }\n        }\n        if (localName != 'featureMember') {\n          // recheck featureType for each featureMember\n          context['featureType'] = featureType;\n          context['featureNS'] = featureNS;\n        }\n      }\n      if (typeof featureNS === 'string') {\n        const ns = featureNS;\n        featureNS = {};\n        featureNS[defaultPrefix] = ns;\n      }\n      /** @type {Object<string, Object<string, import(\"../xml.js\").Parser>>} */\n      const parsersNS = {};\n      const featureTypes = Array.isArray(featureType) ? featureType : [featureType];\n      for (const p in featureNS) {\n        /** @type {Object<string, import(\"../xml.js\").Parser>} */\n        const parsers = {};\n        for (let i = 0, ii = featureTypes.length; i < ii; ++i) {\n          const featurePrefix = featureTypes[i].indexOf(':') === -1 ?\n            defaultPrefix : featureTypes[i].split(':')[0];\n          if (featurePrefix === p) {\n            parsers[featureTypes[i].split(':').pop()] =\n                (localName == 'featureMembers') ?\n                  makeArrayPusher(this.readFeatureElement, this) :\n                  makeReplacer(this.readFeatureElement, this);\n          }\n        }\n        parsersNS[featureNS[p]] = parsers;\n      }\n      if (localName == 'featureMember') {\n        features = pushParseAndPop(undefined, parsersNS, node, objectStack);\n      } else {\n        features = pushParseAndPop([], parsersNS, node, objectStack);\n      }\n    }\n    if (features === null) {\n      features = [];\n    }\n    return features;\n  }\n\n  /**\n   * @param {Element} node Node.\n   * @param {Array<*>} objectStack Object stack.\n   * @return {import(\"../geom/Geometry.js\").default|import(\"../extent.js\").Extent|undefined} Geometry.\n   */\n  readGeometryElement(node, objectStack) {\n    const context = /** @type {Object} */ (objectStack[0]);\n    context['srsName'] = node.firstElementChild.getAttribute('srsName');\n    context['srsDimension'] = node.firstElementChild.getAttribute('srsDimension');\n    const geometry = pushParseAndPop(null, this.GEOMETRY_PARSERS, node, objectStack, this);\n    if (geometry) {\n      if (Array.isArray(geometry)) {\n        return transformExtentWithOptions(/** @type {import(\"../extent.js\").Extent} */ (geometry), context);\n      } else {\n        return transformGeometryWithOptions(/** @type {import(\"../geom/Geometry.js\").default} */ (geometry), false, context);\n      }\n    } else {\n      return undefined;\n    }\n  }\n\n  /**\n   * @param {Element} node Node.\n   * @param {Array<*>} objectStack Object stack.\n   * @param {boolean} asFeature whether result should be wrapped as a feature.\n   * @return {Feature|Object} Feature\n   */\n  readFeatureElementInternal(node, objectStack, asFeature) {\n    let geometryName;\n    const values = {};\n    for (let n = node.firstElementChild; n; n = n.nextElementSibling) {\n      let value;\n      const localName = n.localName;\n      // first, check if it is simple attribute\n      if (n.childNodes.length === 0\n              || (n.childNodes.length === 1 && (n.firstChild.nodeType === 3 || n.firstChild.nodeType === 4))) {\n        value = getAllTextContent(n, false);\n        if (ONLY_WHITESPACE_RE.test(value)) {\n          value = undefined;\n        }\n      } else {\n        if (asFeature) {\n          //if feature, try it as a geometry\n          value = this.readGeometryElement(n, objectStack);\n        }\n        if (!value) { //if not a geometry or not a feature, treat it as a complex attribute\n          value = this.readFeatureElementInternal(n, objectStack, false);\n        } else if (localName !== 'boundedBy') {\n          // boundedBy is an extent and must not be considered as a geometry\n          geometryName = localName;\n        }\n      }\n\n      if (values[localName]) {\n        if (!(values[localName] instanceof Array)) {\n          values[localName] = [values[localName]];\n        }\n        values[localName].push(value);\n      } else {\n        values[localName] = value;\n      }\n\n      const len = n.attributes.length;\n      if (len > 0) {\n        values[localName] = {_content_: values[localName]};\n        for (let i = 0; i < len; i++) {\n          const attName = n.attributes[i].name;\n          values[localName][attName] = n.attributes[i].value;\n        }\n      }\n    }\n    if (!asFeature) {\n      return values;\n    } else {\n      const feature = new Feature(values);\n      if (geometryName) {\n        feature.setGeometryName(geometryName);\n      }\n      const fid = node.getAttribute('fid') ||\n           getAttributeNS(node, this.namespace, 'id');\n      if (fid) {\n        feature.setId(fid);\n      }\n      return feature;\n    }\n  }\n\n\n  /**\n   * @param {Element} node Node.\n   * @param {Array<*>} objectStack Object stack.\n   * @return {Feature} Feature.\n   */\n  readFeatureElement(node, objectStack) {\n    return this.readFeatureElementInternal(node, objectStack, true);\n  }\n\n  /**\n   * @param {Element} node Node.\n   * @param {Array<*>} objectStack Object stack.\n   * @return {Point|undefined} Point.\n   */\n  readPoint(node, objectStack) {\n    const flatCoordinates = this.readFlatCoordinatesFromNode_(node, objectStack);\n    if (flatCoordinates) {\n      return new Point(flatCoordinates, GeometryLayout.XYZ);\n    }\n  }\n\n  /**\n   * @param {Element} node Node.\n   * @param {Array<*>} objectStack Object stack.\n   * @return {MultiPoint|undefined} MultiPoint.\n   */\n  readMultiPoint(node, objectStack) {\n    /** @type {Array<Array<number>>} */\n    const coordinates = pushParseAndPop([],\n      this.MULTIPOINT_PARSERS_, node, objectStack, this);\n    if (coordinates) {\n      return new MultiPoint(coordinates);\n    } else {\n      return undefined;\n    }\n  }\n\n  /**\n   * @param {Element} node Node.\n   * @param {Array<*>} objectStack Object stack.\n   * @return {MultiLineString|undefined} MultiLineString.\n   */\n  readMultiLineString(node, objectStack) {\n    /** @type {Array<LineString>} */\n    const lineStrings = pushParseAndPop([],\n      this.MULTILINESTRING_PARSERS_, node, objectStack, this);\n    if (lineStrings) {\n      return new MultiLineString(lineStrings);\n    }\n  }\n\n  /**\n   * @param {Element} node Node.\n   * @param {Array<*>} objectStack Object stack.\n   * @return {MultiPolygon|undefined} MultiPolygon.\n   */\n  readMultiPolygon(node, objectStack) {\n    /** @type {Array<Polygon>} */\n    const polygons = pushParseAndPop([], this.MULTIPOLYGON_PARSERS_, node, objectStack, this);\n    if (polygons) {\n      return new MultiPolygon(polygons);\n    }\n  }\n\n  /**\n   * @param {Element} node Node.\n   * @param {Array<*>} objectStack Object stack.\n   * @private\n   */\n  pointMemberParser_(node, objectStack) {\n    parseNode(this.POINTMEMBER_PARSERS_, node, objectStack, this);\n  }\n\n  /**\n   * @param {Element} node Node.\n   * @param {Array<*>} objectStack Object stack.\n   * @private\n   */\n  lineStringMemberParser_(node, objectStack) {\n    parseNode(this.LINESTRINGMEMBER_PARSERS_, node, objectStack, this);\n  }\n\n  /**\n   * @param {Element} node Node.\n   * @param {Array<*>} objectStack Object stack.\n   * @private\n   */\n  polygonMemberParser_(node, objectStack) {\n    parseNode(this.POLYGONMEMBER_PARSERS_, node, objectStack, this);\n  }\n\n  /**\n   * @param {Element} node Node.\n   * @param {Array<*>} objectStack Object stack.\n   * @return {LineString|undefined} LineString.\n   */\n  readLineString(node, objectStack) {\n    const flatCoordinates = this.readFlatCoordinatesFromNode_(node, objectStack);\n    if (flatCoordinates) {\n      const lineString = new LineString(flatCoordinates, GeometryLayout.XYZ);\n      return lineString;\n    } else {\n      return undefined;\n    }\n  }\n\n  /**\n   * @param {Element} node Node.\n   * @param {Array<*>} objectStack Object stack.\n   * @private\n   * @return {Array<number>|undefined} LinearRing flat coordinates.\n   */\n  readFlatLinearRing_(node, objectStack) {\n    const ring = pushParseAndPop(null,\n      this.GEOMETRY_FLAT_COORDINATES_PARSERS, node,\n      objectStack, this);\n    if (ring) {\n      return ring;\n    } else {\n      return undefined;\n    }\n  }\n\n  /**\n   * @param {Element} node Node.\n   * @param {Array<*>} objectStack Object stack.\n   * @return {LinearRing|undefined} LinearRing.\n   */\n  readLinearRing(node, objectStack) {\n    const flatCoordinates = this.readFlatCoordinatesFromNode_(node, objectStack);\n    if (flatCoordinates) {\n      return new LinearRing(flatCoordinates, GeometryLayout.XYZ);\n    }\n  }\n\n  /**\n   * @param {Element} node Node.\n   * @param {Array<*>} objectStack Object stack.\n   * @return {Polygon|undefined} Polygon.\n   */\n  readPolygon(node, objectStack) {\n    /** @type {Array<Array<number>>} */\n    const flatLinearRings = pushParseAndPop([null],\n      this.FLAT_LINEAR_RINGS_PARSERS, node, objectStack, this);\n    if (flatLinearRings && flatLinearRings[0]) {\n      const flatCoordinates = flatLinearRings[0];\n      const ends = [flatCoordinates.length];\n      let i, ii;\n      for (i = 1, ii = flatLinearRings.length; i < ii; ++i) {\n        extend(flatCoordinates, flatLinearRings[i]);\n        ends.push(flatCoordinates.length);\n      }\n      return new Polygon(flatCoordinates, GeometryLayout.XYZ, ends);\n    } else {\n      return undefined;\n    }\n  }\n\n  /**\n   * @param {Element} node Node.\n   * @param {Array<*>} objectStack Object stack.\n   * @private\n   * @return {Array<number>} Flat coordinates.\n   */\n  readFlatCoordinatesFromNode_(node, objectStack) {\n    return pushParseAndPop(null, this.GEOMETRY_FLAT_COORDINATES_PARSERS, node, objectStack, this);\n  }\n\n  /**\n   * @inheritDoc\n   */\n  //@ts-ignore\n  readGeometryFromNode(node, opt_options) {\n    const geometry = this.readGeometryElement(node,\n      [this.getReadOptions(node, opt_options ? opt_options : {})]);\n    return geometry ? geometry : null;\n  }\n\n  /**\n   * @inheritDoc\n   */\n  readFeaturesFromNode(node, opt_options) {\n    const options = {\n      featureType: this.featureType,\n      featureNS: this.featureNS\n    };\n    if (opt_options) {\n      assign(options, this.getReadOptions(node, opt_options));\n    }\n    const features = this.readFeaturesInternal(node, [options]);\n    return features || [];\n  }\n\n  /**\n   * @inheritDoc\n   */\n  readProjectionFromNode(node) {\n    return getProjection(this.srsName ? this.srsName : node.firstElementChild.getAttribute('srsName'));\n  }\n}\n\n\nGMLBase.prototype.namespace = GMLNS;\n\n\n/**\n * @const\n * @type {Object<string, Object<string, import(\"../xml.js\").Parser>>}\n * @protected\n */\nGMLBase.prototype.FLAT_LINEAR_RINGS_PARSERS = {\n  'http://www.opengis.net/gml': {}\n};\n\n\n/**\n * @const\n * @type {Object<string, Object<string, import(\"../xml.js\").Parser>>}\n * @protected\n */\nGMLBase.prototype.GEOMETRY_FLAT_COORDINATES_PARSERS = {\n  'http://www.opengis.net/gml': {}\n};\n\n\n/**\n * @const\n * @type {Object<string, Object<string, import(\"../xml.js\").Parser>>}\n * @protected\n */\nGMLBase.prototype.GEOMETRY_PARSERS = {\n  'http://www.opengis.net/gml': {}\n};\n\n\n/**\n * @const\n * @type {Object<string, Object<string, import(\"../xml.js\").Parser>>}\n * @private\n */\nGMLBase.prototype.MULTIPOINT_PARSERS_ = {\n  'http://www.opengis.net/gml': {\n    'pointMember': makeArrayPusher(GMLBase.prototype.pointMemberParser_),\n    'pointMembers': makeArrayPusher(GMLBase.prototype.pointMemberParser_)\n  }\n};\n\n\n/**\n * @const\n * @type {Object<string, Object<string, import(\"../xml.js\").Parser>>}\n * @private\n */\nGMLBase.prototype.MULTILINESTRING_PARSERS_ = {\n  'http://www.opengis.net/gml': {\n    'lineStringMember': makeArrayPusher(GMLBase.prototype.lineStringMemberParser_),\n    'lineStringMembers': makeArrayPusher(GMLBase.prototype.lineStringMemberParser_)\n  }\n};\n\n\n/**\n * @const\n * @type {Object<string, Object<string, import(\"../xml.js\").Parser>>}\n * @private\n */\nGMLBase.prototype.MULTIPOLYGON_PARSERS_ = {\n  'http://www.opengis.net/gml': {\n    'polygonMember': makeArrayPusher(GMLBase.prototype.polygonMemberParser_),\n    'polygonMembers': makeArrayPusher(GMLBase.prototype.polygonMemberParser_)\n  }\n};\n\n\n/**\n * @const\n * @type {Object<string, Object<string, import(\"../xml.js\").Parser>>}\n * @private\n */\nGMLBase.prototype.POINTMEMBER_PARSERS_ = {\n  'http://www.opengis.net/gml': {\n    'Point': makeArrayPusher(GMLBase.prototype.readFlatCoordinatesFromNode_)\n  }\n};\n\n\n/**\n * @const\n * @type {Object<string, Object<string, import(\"../xml.js\").Parser>>}\n * @private\n */\nGMLBase.prototype.LINESTRINGMEMBER_PARSERS_ = {\n  'http://www.opengis.net/gml': {\n    'LineString': makeArrayPusher(GMLBase.prototype.readLineString)\n  }\n};\n\n\n/**\n * @const\n * @type {Object<string, Object<string, import(\"../xml.js\").Parser>>}\n * @private\n */\nGMLBase.prototype.POLYGONMEMBER_PARSERS_ = {\n  'http://www.opengis.net/gml': {\n    'Polygon': makeArrayPusher(GMLBase.prototype.readPolygon)\n  }\n};\n\n\n/**\n * @const\n * @type {Object<string, Object<string, import(\"../xml.js\").Parser>>}\n * @protected\n */\nGMLBase.prototype.RING_PARSERS = {\n  'http://www.opengis.net/gml': {\n    'LinearRing': makeReplacer(GMLBase.prototype.readFlatLinearRing_)\n  }\n};\n\nexport default GMLBase;\n","/**\n * @module ol/source/TileJSON\n */\n// FIXME check order of async callbacks\n\n/**\n * See https://mapbox.com/developers/api/.\n */\n\n\nimport {createFromTemplates} from '../tileurlfunction.js';\nimport {assert} from '../asserts.js';\nimport {applyTransform, intersects} from '../extent.js';\nimport {jsonp as requestJSONP} from '../net.js';\nimport {get as getProjection, getTransformFromProjections} from '../proj.js';\nimport SourceState from './State.js';\nimport TileImage from './TileImage.js';\nimport {createXYZ, extentFromProjection} from '../tilegrid.js';\n\n\n/**\n * @typedef {Object} Config\n * @property {string} [name] The name.\n * @property {string} [description] The description.\n * @property {string} [version] The version.\n * @property {string} [attribution] The attribution.\n * @property {string} [template] The template.\n * @property {string} [legend] The legend.\n * @property {string} [scheme] The scheme.\n * @property {Array<string>} tiles The tile URL templates.\n * @property {Array<string>} [grids] Optional grids.\n * @property {number} [minzoom] Minimum zoom level.\n * @property {number} [maxzoom] Maximum zoom level.\n * @property {Array<number>} [bounds] Optional bounds.\n * @property {Array<number>} [center] Optional center.\n */\n\n\n/**\n * @typedef {Object} Options\n * @property {import(\"./Source.js\").AttributionLike} [attributions] Attributions.\n * @property {number} [cacheSize] Tile cache size. The default depends on the screen size. Will increase if too small.\n * @property {null|string} [crossOrigin] The `crossOrigin` attribute for loaded images.  Note that\n * you must provide a `crossOrigin` value if you want to access pixel data with the Canvas renderer.\n * See https://developer.mozilla.org/en-US/docs/Web/HTML/CORS_enabled_image for more detail.\n * @property {boolean} [jsonp=false] Use JSONP with callback to load the TileJSON.\n * Useful when the server does not support CORS..\n * @property {number} [reprojectionErrorThreshold=0.5] Maximum allowed reprojection error (in pixels).\n * Higher values can increase reprojection performance, but decrease precision.\n * @property {Config} [tileJSON] TileJSON configuration for this source.\n * If not provided, `url` must be configured.\n * @property {import(\"../Tile.js\").LoadFunction} [tileLoadFunction] Optional function to load a tile given a URL. The default is\n * ```js\n * function(imageTile, src) {\n *   imageTile.getImage().src = src;\n * };\n * ```\n * @property {number|import(\"../size.js\").Size} [tileSize=[256, 256]] The tile size used by the tile service.\n * Note: `tileSize` and other non-standard TileJSON properties are currently ignored.\n * @property {string} [url] URL to the TileJSON file. If not provided, `tileJSON` must be configured.\n * @property {boolean} [wrapX=true] Whether to wrap the world horizontally.\n * @property {number} [transition] Duration of the opacity transition for rendering.\n * To disable the opacity transition, pass `transition: 0`.\n */\n\n\n/**\n * @classdesc\n * Layer source for tile data in TileJSON format.\n * @api\n */\nclass TileJSON extends TileImage {\n  /**\n   * @param {Options} options TileJSON options.\n   */\n  constructor(options) {\n    super({\n      attributions: options.attributions,\n      cacheSize: options.cacheSize,\n      crossOrigin: options.crossOrigin,\n      projection: getProjection('EPSG:3857'),\n      reprojectionErrorThreshold: options.reprojectionErrorThreshold,\n      state: SourceState.LOADING,\n      tileLoadFunction: options.tileLoadFunction,\n      wrapX: options.wrapX !== undefined ? options.wrapX : true,\n      transition: options.transition\n    });\n\n    /**\n     * @type {Config}\n     * @private\n     */\n    this.tileJSON_ = null;\n\n    /**\n     * @type {number|import(\"../size.js\").Size}\n     * @private\n     */\n    this.tileSize_ = options.tileSize;\n\n\n    if (options.url) {\n      if (options.jsonp) {\n        requestJSONP(options.url, this.handleTileJSONResponse.bind(this),\n          this.handleTileJSONError.bind(this));\n      } else {\n        const client = new XMLHttpRequest();\n        client.addEventListener('load', this.onXHRLoad_.bind(this));\n        client.addEventListener('error', this.onXHRError_.bind(this));\n        client.open('GET', options.url);\n        client.send();\n      }\n    } else if (options.tileJSON) {\n      this.handleTileJSONResponse(options.tileJSON);\n    } else {\n      assert(false, 51); // Either `url` or `tileJSON` options must be provided\n    }\n\n  }\n\n  /**\n   * @private\n   * @param {Event} event The load event.\n   */\n  onXHRLoad_(event) {\n    const client = /** @type {XMLHttpRequest} */ (event.target);\n    // status will be 0 for file:// urls\n    if (!client.status || client.status >= 200 && client.status < 300) {\n      let response;\n      try {\n        response = /** @type {TileJSON} */(JSON.parse(client.responseText));\n      } catch (err) {\n        this.handleTileJSONError();\n        return;\n      }\n      this.handleTileJSONResponse(response);\n    } else {\n      this.handleTileJSONError();\n    }\n  }\n\n  /**\n   * @private\n   * @param {Event} event The error event.\n   */\n  onXHRError_(event) {\n    this.handleTileJSONError();\n  }\n\n  /**\n   * @return {Config} The tilejson object.\n   * @api\n   */\n  getTileJSON() {\n    return this.tileJSON_;\n  }\n\n  /**\n   * @protected\n   * @param {Config} tileJSON Tile JSON.\n   */\n  handleTileJSONResponse(tileJSON) {\n\n    const epsg4326Projection = getProjection('EPSG:4326');\n\n    const sourceProjection = this.getProjection();\n    let extent;\n    if (tileJSON['bounds'] !== undefined) {\n      const transform = getTransformFromProjections(\n        epsg4326Projection, sourceProjection);\n      extent = applyTransform(tileJSON['bounds'], transform);\n    }\n\n    const minZoom = tileJSON['minzoom'] || 0;\n    const maxZoom = tileJSON['maxzoom'] || 22;\n    const tileGrid = createXYZ({\n      extent: extentFromProjection(sourceProjection),\n      maxZoom: maxZoom,\n      minZoom: minZoom,\n      tileSize: this.tileSize_\n    });\n    this.tileGrid = tileGrid;\n\n    this.tileUrlFunction = createFromTemplates(tileJSON['tiles'], tileGrid);\n\n    if (tileJSON['attribution'] !== undefined && !this.getAttributions()) {\n      const attributionExtent = extent !== undefined ?\n        extent : epsg4326Projection.getExtent();\n\n      this.setAttributions(function(frameState) {\n        if (intersects(attributionExtent, frameState.extent)) {\n          return [tileJSON['attribution']];\n        }\n        return null;\n      });\n\n    }\n    this.tileJSON_ = tileJSON;\n    this.setState(SourceState.READY);\n\n  }\n\n  /**\n   * @protected\n   */\n  handleTileJSONError() {\n    this.setState(SourceState.ERROR);\n  }\n}\n\n\nexport default TileJSON;\n","/**\n * @module ol/tilecoord\n */\n\n\n/**\n * An array of three numbers representing the location of a tile in a tile\n * grid. The order is `z` (zoom level), `x` (column), and `y` (row).\n * @typedef {Array<number>} TileCoord\n * @api\n */\n\n\n/**\n * @param {number} z Z.\n * @param {number} x X.\n * @param {number} y Y.\n * @param {TileCoord=} opt_tileCoord Tile coordinate.\n * @return {TileCoord} Tile coordinate.\n */\nexport function createOrUpdate(z, x, y, opt_tileCoord) {\n  if (opt_tileCoord !== undefined) {\n    opt_tileCoord[0] = z;\n    opt_tileCoord[1] = x;\n    opt_tileCoord[2] = y;\n    return opt_tileCoord;\n  } else {\n    return [z, x, y];\n  }\n}\n\n\n/**\n * @param {number} z Z.\n * @param {number} x X.\n * @param {number} y Y.\n * @return {string} Key.\n */\nexport function getKeyZXY(z, x, y) {\n  return z + '/' + x + '/' + y;\n}\n\n\n/**\n * Get the key for a tile coord.\n * @param {TileCoord} tileCoord The tile coord.\n * @return {string} Key.\n */\nexport function getKey(tileCoord) {\n  return getKeyZXY(tileCoord[0], tileCoord[1], tileCoord[2]);\n}\n\n\n/**\n * Get a tile coord given a key.\n * @param {string} key The tile coord key.\n * @return {TileCoord} The tile coord.\n */\nexport function fromKey(key) {\n  return key.split('/').map(Number);\n}\n\n\n/**\n * @param {TileCoord} tileCoord Tile coord.\n * @return {number} Hash.\n */\nexport function hash(tileCoord) {\n  return (tileCoord[1] << tileCoord[0]) + tileCoord[2];\n}\n\n\n/**\n * @param {TileCoord} tileCoord Tile coordinate.\n * @param {!import(\"./tilegrid/TileGrid.js\").default} tileGrid Tile grid.\n * @return {boolean} Tile coordinate is within extent and zoom level range.\n */\nexport function withinExtentAndZ(tileCoord, tileGrid) {\n  const z = tileCoord[0];\n  const x = tileCoord[1];\n  const y = tileCoord[2];\n\n  if (tileGrid.getMinZoom() > z || z > tileGrid.getMaxZoom()) {\n    return false;\n  }\n  const extent = tileGrid.getExtent();\n  let tileRange;\n  if (!extent) {\n    tileRange = tileGrid.getFullTileRange(z);\n  } else {\n    tileRange = tileGrid.getTileRangeForExtentAndZ(extent, z);\n  }\n  if (!tileRange) {\n    return true;\n  } else {\n    return tileRange.containsXY(x, y);\n  }\n}\n","/**\n * @module ol/size\n */\n\n\n/**\n * An array of numbers representing a size: `[width, height]`.\n * @typedef {Array<number>} Size\n * @api\n */\n\n\n/**\n * Returns a buffered size.\n * @param {Size} size Size.\n * @param {number} num The amount by which to buffer.\n * @param {Size=} opt_size Optional reusable size array.\n * @return {Size} The buffered size.\n */\nexport function buffer(size, num, opt_size) {\n  if (opt_size === undefined) {\n    opt_size = [0, 0];\n  }\n  opt_size[0] = size[0] + 2 * num;\n  opt_size[1] = size[1] + 2 * num;\n  return opt_size;\n}\n\n\n/**\n * Determines if a size has a positive area.\n * @param {Size} size The size to test.\n * @return {boolean} The size has a positive area.\n */\nexport function hasArea(size) {\n  return size[0] > 0 && size[1] > 0;\n}\n\n\n/**\n * Returns a size scaled by a ratio. The result will be an array of integers.\n * @param {Size} size Size.\n * @param {number} ratio Ratio.\n * @param {Size=} opt_size Optional reusable size array.\n * @return {Size} The scaled size.\n */\nexport function scale(size, ratio, opt_size) {\n  if (opt_size === undefined) {\n    opt_size = [0, 0];\n  }\n  opt_size[0] = (size[0] * ratio + 0.5) | 0;\n  opt_size[1] = (size[1] * ratio + 0.5) | 0;\n  return opt_size;\n}\n\n\n/**\n * Returns an `Size` array for the passed in number (meaning: square) or\n * `Size` array.\n * (meaning: non-square),\n * @param {number|Size} size Width and height.\n * @param {Size=} opt_size Optional reusable size array.\n * @return {Size} Size.\n * @api\n */\nexport function toSize(size, opt_size) {\n  if (Array.isArray(size)) {\n    return size;\n  } else {\n    if (opt_size === undefined) {\n      opt_size = [size, size];\n    } else {\n      opt_size[0] = opt_size[1] = /** @type {number} */ (size);\n    }\n    return opt_size;\n  }\n}\n","/**\n * @module ol/layer/Property\n */\n\n/**\n * @enum {string}\n */\nexport default {\n  OPACITY: 'opacity',\n  VISIBLE: 'visible',\n  EXTENT: 'extent',\n  Z_INDEX: 'zIndex',\n  MAX_RESOLUTION: 'maxResolution',\n  MIN_RESOLUTION: 'minResolution',\n  MAX_ZOOM: 'maxZoom',\n  MIN_ZOOM: 'minZoom',\n  SOURCE: 'source'\n};\n","/**\n * @module ol/interaction/Pointer\n */\nimport MapBrowserEventType from '../MapBrowserEventType.js';\nimport Interaction from './Interaction.js';\nimport {getValues} from '../obj.js';\n\n\n/**\n * @typedef {Object} Options\n * @property {function(import(\"../MapBrowserPointerEvent.js\").default):boolean} [handleDownEvent]\n * Function handling \"down\" events. If the function returns `true` then a drag\n * sequence is started.\n * @property {function(import(\"../MapBrowserPointerEvent.js\").default)} [handleDragEvent]\n * Function handling \"drag\" events. This function is called on \"move\" events\n * during a drag sequence.\n * @property {function(import(\"../MapBrowserEvent.js\").default):boolean} [handleEvent]\n * Method called by the map to notify the interaction that a browser event was\n * dispatched to the map. The function may return `false` to prevent the\n * propagation of the event to other interactions in the map's interactions\n * chain.\n * @property {function(import(\"../MapBrowserPointerEvent.js\").default)} [handleMoveEvent]\n * Function handling \"move\" events. This function is called on \"move\" events,\n * also during a drag sequence (so during a drag sequence both the\n * `handleDragEvent` function and this function are called).\n * @property {function(import(\"../MapBrowserPointerEvent.js\").default):boolean} [handleUpEvent]\n *  Function handling \"up\" events. If the function returns `false` then the\n * current drag sequence is stopped.\n * @property {function(boolean):boolean} [stopDown]\n * Should the down event be propagated to other interactions, or should be\n * stopped?\n */\n\n\n/**\n * @classdesc\n * Base class that calls user-defined functions on `down`, `move` and `up`\n * events. This class also manages \"drag sequences\".\n *\n * When the `handleDownEvent` user function returns `true` a drag sequence is\n * started. During a drag sequence the `handleDragEvent` user function is\n * called on `move` events. The drag sequence ends when the `handleUpEvent`\n * user function is called and returns `false`.\n * @api\n */\nclass PointerInteraction extends Interaction {\n  /**\n   * @param {Options=} opt_options Options.\n   */\n  constructor(opt_options) {\n\n    const options = opt_options ? opt_options : {};\n\n    super(/** @type {import(\"./Interaction.js\").InteractionOptions} */ (options));\n\n    if (options.handleDownEvent) {\n      this.handleDownEvent = options.handleDownEvent;\n    }\n\n    if (options.handleDragEvent) {\n      this.handleDragEvent = options.handleDragEvent;\n    }\n\n    if (options.handleMoveEvent) {\n      this.handleMoveEvent = options.handleMoveEvent;\n    }\n\n    if (options.handleUpEvent) {\n      this.handleUpEvent = options.handleUpEvent;\n    }\n\n    if (options.stopDown) {\n      this.stopDown = options.stopDown;\n    }\n\n    /**\n     * @type {boolean}\n     * @protected\n     */\n    this.handlingDownUpSequence = false;\n\n    /**\n     * @type {!Object<string, PointerEvent>}\n     * @private\n     */\n    this.trackedPointers_ = {};\n\n    /**\n     * @type {Array<PointerEvent>}\n     * @protected\n     */\n    this.targetPointers = [];\n\n  }\n\n  /**\n   * Handle pointer down events.\n   * @param {import(\"../MapBrowserPointerEvent.js\").default} mapBrowserEvent Event.\n   * @return {boolean} If the event was consumed.\n   * @protected\n   */\n  handleDownEvent(mapBrowserEvent) {\n    return false;\n  }\n\n  /**\n   * Handle pointer drag events.\n   * @param {import(\"../MapBrowserPointerEvent.js\").default} mapBrowserEvent Event.\n   * @protected\n   */\n  handleDragEvent(mapBrowserEvent) {}\n\n  /**\n   * Handles the {@link module:ol/MapBrowserEvent map browser event} and may call into\n   * other functions, if event sequences like e.g. 'drag' or 'down-up' etc. are\n   * detected.\n   * @override\n   * @api\n   */\n  handleEvent(mapBrowserEvent) {\n    if (!(/** @type {import(\"../MapBrowserPointerEvent.js\").default} */ (mapBrowserEvent).pointerEvent)) {\n      return true;\n    }\n\n    let stopEvent = false;\n    this.updateTrackedPointers_(mapBrowserEvent);\n    if (this.handlingDownUpSequence) {\n      if (mapBrowserEvent.type == MapBrowserEventType.POINTERDRAG) {\n        this.handleDragEvent(mapBrowserEvent);\n      } else if (mapBrowserEvent.type == MapBrowserEventType.POINTERUP) {\n        const handledUp = this.handleUpEvent(mapBrowserEvent);\n        this.handlingDownUpSequence = handledUp && this.targetPointers.length > 0;\n      }\n    } else {\n      if (mapBrowserEvent.type == MapBrowserEventType.POINTERDOWN) {\n        const handled = this.handleDownEvent(mapBrowserEvent);\n        if (handled) {\n          mapBrowserEvent.preventDefault();\n        }\n        this.handlingDownUpSequence = handled;\n        stopEvent = this.stopDown(handled);\n      } else if (mapBrowserEvent.type == MapBrowserEventType.POINTERMOVE) {\n        this.handleMoveEvent(mapBrowserEvent);\n      }\n    }\n    return !stopEvent;\n  }\n\n  /**\n   * Handle pointer move events.\n   * @param {import(\"../MapBrowserPointerEvent.js\").default} mapBrowserEvent Event.\n   * @protected\n   */\n  handleMoveEvent(mapBrowserEvent) {}\n\n  /**\n   * Handle pointer up events.\n   * @param {import(\"../MapBrowserPointerEvent.js\").default} mapBrowserEvent Event.\n   * @return {boolean} If the event was consumed.\n   * @protected\n   */\n  handleUpEvent(mapBrowserEvent) {\n    return false;\n  }\n\n  /**\n   * This function is used to determine if \"down\" events should be propagated\n   * to other interactions or should be stopped.\n   * @param {boolean} handled Was the event handled by the interaction?\n   * @return {boolean} Should the `down` event be stopped?\n   */\n  stopDown(handled) {\n    return handled;\n  }\n\n  /**\n   * @param {import(\"../MapBrowserPointerEvent.js\").default} mapBrowserEvent Event.\n   * @private\n   */\n  updateTrackedPointers_(mapBrowserEvent) {\n    if (isPointerDraggingEvent(mapBrowserEvent)) {\n      const event = mapBrowserEvent.pointerEvent;\n\n      const id = event.pointerId.toString();\n      if (mapBrowserEvent.type == MapBrowserEventType.POINTERUP) {\n        delete this.trackedPointers_[id];\n      } else if (mapBrowserEvent.type ==\n          MapBrowserEventType.POINTERDOWN) {\n        this.trackedPointers_[id] = event;\n      } else if (id in this.trackedPointers_) {\n        // update only when there was a pointerdown event for this pointer\n        this.trackedPointers_[id] = event;\n      }\n      this.targetPointers = getValues(this.trackedPointers_);\n    }\n  }\n\n}\n\n\n/**\n * @param {Array<PointerEvent>} pointerEvents List of events.\n * @return {import(\"../pixel.js\").Pixel} Centroid pixel.\n */\nexport function centroid(pointerEvents) {\n  const length = pointerEvents.length;\n  let clientX = 0;\n  let clientY = 0;\n  for (let i = 0; i < length; i++) {\n    clientX += pointerEvents[i].clientX;\n    clientY += pointerEvents[i].clientY;\n  }\n  return [clientX / length, clientY / length];\n}\n\n\n/**\n * @param {import(\"../MapBrowserPointerEvent.js\").default} mapBrowserEvent Event.\n * @return {boolean} Whether the event is a pointerdown, pointerdrag\n *     or pointerup event.\n */\nfunction isPointerDraggingEvent(mapBrowserEvent) {\n  const type = mapBrowserEvent.type;\n  return type === MapBrowserEventType.POINTERDOWN ||\n    type === MapBrowserEventType.POINTERDRAG ||\n    type === MapBrowserEventType.POINTERUP;\n}\n\n\nexport default PointerInteraction;\n","/**\n * @module ol/proj/Units\n */\n\n/**\n * Projection units: `'degrees'`, `'ft'`, `'m'`, `'pixels'`, `'tile-pixels'` or\n * `'us-ft'`.\n * @enum {string}\n */\nconst Units = {\n  DEGREES: 'degrees',\n  FEET: 'ft',\n  METERS: 'm',\n  PIXELS: 'pixels',\n  TILE_PIXELS: 'tile-pixels',\n  USFEET: 'us-ft'\n};\n\n\n/**\n * Meters per unit lookup table.\n * @const\n * @type {Object<Units, number>}\n * @api\n */\nexport const METERS_PER_UNIT = {};\n// use the radius of the Normal sphere\nMETERS_PER_UNIT[Units.DEGREES] = 2 * Math.PI * 6370997 / 360;\nMETERS_PER_UNIT[Units.FEET] = 0.3048;\nMETERS_PER_UNIT[Units.METERS] = 1;\nMETERS_PER_UNIT[Units.USFEET] = 1200 / 3937;\n\nexport default Units;\n","/**\n * @module ol/easing\n */\n\n\n/**\n * Start slow and speed up.\n * @param {number} t Input between 0 and 1.\n * @return {number} Output between 0 and 1.\n * @api\n */\nexport function easeIn(t) {\n  return Math.pow(t, 3);\n}\n\n\n/**\n * Start fast and slow down.\n * @param {number} t Input between 0 and 1.\n * @return {number} Output between 0 and 1.\n * @api\n */\nexport function easeOut(t) {\n  return 1 - easeIn(1 - t);\n}\n\n\n/**\n * Start slow, speed up, and then slow down again.\n * @param {number} t Input between 0 and 1.\n * @return {number} Output between 0 and 1.\n * @api\n */\nexport function inAndOut(t) {\n  return 3 * t * t - 2 * t * t * t;\n}\n\n\n/**\n * Maintain a constant speed over time.\n * @param {number} t Input between 0 and 1.\n * @return {number} Output between 0 and 1.\n * @api\n */\nexport function linear(t) {\n  return t;\n}\n\n\n/**\n * Start slow, speed up, and at the very end slow down again.  This has the\n * same general behavior as {@link module:ol/easing~inAndOut}, but the final\n * slowdown is delayed.\n * @param {number} t Input between 0 and 1.\n * @return {number} Output between 0 and 1.\n * @api\n */\nexport function upAndDown(t) {\n  if (t < 0.5) {\n    return inAndOut(2 * t);\n  } else {\n    return 1 - inAndOut(2 * (t - 0.5));\n  }\n}\n","/**\n * @module ol/tilegrid\n */\nimport {DEFAULT_MAX_ZOOM, DEFAULT_TILE_SIZE} from './tilegrid/common.js';\nimport {toSize} from './size.js';\nimport {containsCoordinate, createOrUpdate, getCorner, getHeight, getWidth} from './extent.js';\nimport Corner from './extent/Corner.js';\nimport {get as getProjection, METERS_PER_UNIT} from './proj.js';\nimport Units from './proj/Units.js';\nimport TileGrid from './tilegrid/TileGrid.js';\n\n\n/**\n * @param {import(\"./proj/Projection.js\").default} projection Projection.\n * @return {!TileGrid} Default tile grid for the\n * passed projection.\n */\nexport function getForProjection(projection) {\n  let tileGrid = projection.getDefaultTileGrid();\n  if (!tileGrid) {\n    tileGrid = createForProjection(projection);\n    projection.setDefaultTileGrid(tileGrid);\n  }\n  return tileGrid;\n}\n\n\n/**\n * @param {TileGrid} tileGrid Tile grid.\n * @param {import(\"./tilecoord.js\").TileCoord} tileCoord Tile coordinate.\n * @param {import(\"./proj/Projection.js\").default} projection Projection.\n * @return {import(\"./tilecoord.js\").TileCoord} Tile coordinate.\n */\nexport function wrapX(tileGrid, tileCoord, projection) {\n  const z = tileCoord[0];\n  const center = tileGrid.getTileCoordCenter(tileCoord);\n  const projectionExtent = extentFromProjection(projection);\n  if (!containsCoordinate(projectionExtent, center)) {\n    const worldWidth = getWidth(projectionExtent);\n    const worldsAway = Math.ceil((projectionExtent[0] - center[0]) / worldWidth);\n    center[0] += worldWidth * worldsAway;\n    return tileGrid.getTileCoordForCoordAndZ(center, z);\n  } else {\n    return tileCoord;\n  }\n}\n\n\n/**\n * @param {import(\"./extent.js\").Extent} extent Extent.\n * @param {number=} opt_maxZoom Maximum zoom level (default is\n *     DEFAULT_MAX_ZOOM).\n * @param {number|import(\"./size.js\").Size=} opt_tileSize Tile size (default uses\n *     DEFAULT_TILE_SIZE).\n * @param {Corner=} opt_corner Extent corner (default is `'top-left'`).\n * @return {!TileGrid} TileGrid instance.\n */\nexport function createForExtent(extent, opt_maxZoom, opt_tileSize, opt_corner) {\n  const corner = opt_corner !== undefined ? opt_corner : Corner.TOP_LEFT;\n\n  const resolutions = resolutionsFromExtent(extent, opt_maxZoom, opt_tileSize);\n\n  return new TileGrid({\n    extent: extent,\n    origin: getCorner(extent, corner),\n    resolutions: resolutions,\n    tileSize: opt_tileSize\n  });\n}\n\n\n/**\n * @typedef {Object} XYZOptions\n * @property {import(\"./extent.js\").Extent} [extent] Extent for the tile grid. The origin for an XYZ tile grid is the\n * top-left corner of the extent. The zero level of the grid is defined by the resolution at which one tile fits in the\n * provided extent. If not provided, the extent of the EPSG:3857 projection is used.\n * @property {number} [maxZoom] Maximum zoom. The default is `42`. This determines the number of levels\n * in the grid set. For example, a `maxZoom` of 21 means there are 22 levels in the grid set.\n * @property {number} [minZoom=0] Minimum zoom.\n * @property {number|import(\"./size.js\").Size} [tileSize=[256, 256]] Tile size in pixels.\n */\n\n\n/**\n * Creates a tile grid with a standard XYZ tiling scheme.\n * @param {XYZOptions=} opt_options Tile grid options.\n * @return {!TileGrid} Tile grid instance.\n * @api\n */\nexport function createXYZ(opt_options) {\n  /** @type {XYZOptions} */\n  const xyzOptions = opt_options || {};\n\n  const extent = xyzOptions.extent || getProjection('EPSG:3857').getExtent();\n\n  /** @type {import(\"./tilegrid/TileGrid.js\").Options} */\n  const gridOptions = {\n    extent: extent,\n    minZoom: xyzOptions.minZoom,\n    tileSize: xyzOptions.tileSize,\n    resolutions: resolutionsFromExtent(\n      extent,\n      xyzOptions.maxZoom,\n      xyzOptions.tileSize\n    )\n  };\n  return new TileGrid(gridOptions);\n}\n\n\n/**\n * Create a resolutions array from an extent.  A zoom factor of 2 is assumed.\n * @param {import(\"./extent.js\").Extent} extent Extent.\n * @param {number=} opt_maxZoom Maximum zoom level (default is\n *     DEFAULT_MAX_ZOOM).\n * @param {number|import(\"./size.js\").Size=} opt_tileSize Tile size (default uses\n *     DEFAULT_TILE_SIZE).\n * @return {!Array<number>} Resolutions array.\n */\nfunction resolutionsFromExtent(extent, opt_maxZoom, opt_tileSize) {\n  const maxZoom = opt_maxZoom !== undefined ?\n    opt_maxZoom : DEFAULT_MAX_ZOOM;\n\n  const height = getHeight(extent);\n  const width = getWidth(extent);\n\n  const tileSize = toSize(opt_tileSize !== undefined ?\n    opt_tileSize : DEFAULT_TILE_SIZE);\n  const maxResolution = Math.max(\n    width / tileSize[0], height / tileSize[1]);\n\n  const length = maxZoom + 1;\n  const resolutions = new Array(length);\n  for (let z = 0; z < length; ++z) {\n    resolutions[z] = maxResolution / Math.pow(2, z);\n  }\n  return resolutions;\n}\n\n\n/**\n * @param {import(\"./proj.js\").ProjectionLike} projection Projection.\n * @param {number=} opt_maxZoom Maximum zoom level (default is\n *     DEFAULT_MAX_ZOOM).\n * @param {number|import(\"./size.js\").Size=} opt_tileSize Tile size (default uses\n *     DEFAULT_TILE_SIZE).\n * @param {Corner=} opt_corner Extent corner (default is `'top-left'`).\n * @return {!TileGrid} TileGrid instance.\n */\nexport function createForProjection(projection, opt_maxZoom, opt_tileSize, opt_corner) {\n  const extent = extentFromProjection(projection);\n  return createForExtent(extent, opt_maxZoom, opt_tileSize, opt_corner);\n}\n\n\n/**\n * Generate a tile grid extent from a projection.  If the projection has an\n * extent, it is used.  If not, a global extent is assumed.\n * @param {import(\"./proj.js\").ProjectionLike} projection Projection.\n * @return {import(\"./extent.js\").Extent} Extent.\n */\nexport function extentFromProjection(projection) {\n  projection = getProjection(projection);\n  let extent = projection.getExtent();\n  if (!extent) {\n    const half = 180 * METERS_PER_UNIT[Units.DEGREES] / projection.getMetersPerUnit();\n    extent = createOrUpdate(-half, -half, half, half);\n  }\n  return extent;\n}\n","/**\n * @module ol/CollectionEventType\n */\n\n/**\n * @enum {string}\n */\nexport default {\n  /**\n   * Triggered when an item is added to the collection.\n   * @event module:ol/Collection.CollectionEvent#add\n   * @api\n   */\n  ADD: 'add',\n  /**\n   * Triggered when an item is removed from the collection.\n   * @event module:ol/Collection.CollectionEvent#remove\n   * @api\n   */\n  REMOVE: 'remove'\n};\n","/**\n * @module ol/Collection\n */\nimport AssertionError from './AssertionError.js';\nimport CollectionEventType from './CollectionEventType.js';\nimport BaseObject from './Object.js';\nimport Event from './events/Event.js';\n\n\n/**\n * @enum {string}\n * @private\n */\nconst Property = {\n  LENGTH: 'length'\n};\n\n\n/**\n * @classdesc\n * Events emitted by {@link module:ol/Collection~Collection} instances are instances of this\n * type.\n */\nexport class CollectionEvent extends Event {\n\n  /**\n   * @param {CollectionEventType} type Type.\n   * @param {*=} opt_element Element.\n   * @param {number} opt_index The index of the added or removed element.\n   */\n  constructor(type, opt_element, opt_index) {\n    super(type);\n\n    /**\n     * The element that is added to or removed from the collection.\n     * @type {*}\n     * @api\n     */\n    this.element = opt_element;\n\n    /**\n     * The index of the added or removed element.\n     * @type {number}\n     * @api\n     */\n    this.index = opt_index;\n  }\n\n}\n\n\n/**\n * @typedef {Object} Options\n * @property {boolean} [unique=false] Disallow the same item from being added to\n * the collection twice.\n */\n\n/**\n * @classdesc\n * An expanded version of standard JS Array, adding convenience methods for\n * manipulation. Add and remove changes to the Collection trigger a Collection\n * event. Note that this does not cover changes to the objects _within_ the\n * Collection; they trigger events on the appropriate object, not on the\n * Collection as a whole.\n *\n * @fires CollectionEvent\n *\n * @template T\n * @api\n */\nclass Collection extends BaseObject {\n\n  /**\n   * @param {Array<T>=} opt_array Array.\n   * @param {Options=} opt_options Collection options.\n   */\n  constructor(opt_array, opt_options) {\n\n    super();\n\n    const options = opt_options || {};\n\n    /**\n     * @private\n     * @type {boolean}\n     */\n    this.unique_ = !!options.unique;\n\n    /**\n     * @private\n     * @type {!Array<T>}\n     */\n    this.array_ = opt_array ? opt_array : [];\n\n    if (this.unique_) {\n      for (let i = 0, ii = this.array_.length; i < ii; ++i) {\n        this.assertUnique_(this.array_[i], i);\n      }\n    }\n\n    this.updateLength_();\n\n  }\n\n  /**\n   * Remove all elements from the collection.\n   * @api\n   */\n  clear() {\n    while (this.getLength() > 0) {\n      this.pop();\n    }\n  }\n\n  /**\n   * Add elements to the collection.  This pushes each item in the provided array\n   * to the end of the collection.\n   * @param {!Array<T>} arr Array.\n   * @return {Collection<T>} This collection.\n   * @api\n   */\n  extend(arr) {\n    for (let i = 0, ii = arr.length; i < ii; ++i) {\n      this.push(arr[i]);\n    }\n    return this;\n  }\n\n  /**\n   * Iterate over each element, calling the provided callback.\n   * @param {function(T, number, Array<T>): *} f The function to call\n   *     for every element. This function takes 3 arguments (the element, the\n   *     index and the array). The return value is ignored.\n   * @api\n   */\n  forEach(f) {\n    const array = this.array_;\n    for (let i = 0, ii = array.length; i < ii; ++i) {\n      f(array[i], i, array);\n    }\n  }\n\n  /**\n   * Get a reference to the underlying Array object. Warning: if the array\n   * is mutated, no events will be dispatched by the collection, and the\n   * collection's \"length\" property won't be in sync with the actual length\n   * of the array.\n   * @return {!Array<T>} Array.\n   * @api\n   */\n  getArray() {\n    return this.array_;\n  }\n\n  /**\n   * Get the element at the provided index.\n   * @param {number} index Index.\n   * @return {T} Element.\n   * @api\n   */\n  item(index) {\n    return this.array_[index];\n  }\n\n  /**\n   * Get the length of this collection.\n   * @return {number} The length of the array.\n   * @observable\n   * @api\n   */\n  getLength() {\n    return this.get(Property.LENGTH);\n  }\n\n  /**\n   * Insert an element at the provided index.\n   * @param {number} index Index.\n   * @param {T} elem Element.\n   * @api\n   */\n  insertAt(index, elem) {\n    if (this.unique_) {\n      this.assertUnique_(elem);\n    }\n    this.array_.splice(index, 0, elem);\n    this.updateLength_();\n    this.dispatchEvent(\n      new CollectionEvent(CollectionEventType.ADD, elem, index));\n  }\n\n  /**\n   * Remove the last element of the collection and return it.\n   * Return `undefined` if the collection is empty.\n   * @return {T|undefined} Element.\n   * @api\n   */\n  pop() {\n    return this.removeAt(this.getLength() - 1);\n  }\n\n  /**\n   * Insert the provided element at the end of the collection.\n   * @param {T} elem Element.\n   * @return {number} New length of the collection.\n   * @api\n   */\n  push(elem) {\n    if (this.unique_) {\n      this.assertUnique_(elem);\n    }\n    const n = this.getLength();\n    this.insertAt(n, elem);\n    return this.getLength();\n  }\n\n  /**\n   * Remove the first occurrence of an element from the collection.\n   * @param {T} elem Element.\n   * @return {T|undefined} The removed element or undefined if none found.\n   * @api\n   */\n  remove(elem) {\n    const arr = this.array_;\n    for (let i = 0, ii = arr.length; i < ii; ++i) {\n      if (arr[i] === elem) {\n        return this.removeAt(i);\n      }\n    }\n    return undefined;\n  }\n\n  /**\n   * Remove the element at the provided index and return it.\n   * Return `undefined` if the collection does not contain this index.\n   * @param {number} index Index.\n   * @return {T|undefined} Value.\n   * @api\n   */\n  removeAt(index) {\n    const prev = this.array_[index];\n    this.array_.splice(index, 1);\n    this.updateLength_();\n    this.dispatchEvent(new CollectionEvent(CollectionEventType.REMOVE, prev, index));\n    return prev;\n  }\n\n  /**\n   * Set the element at the provided index.\n   * @param {number} index Index.\n   * @param {T} elem Element.\n   * @api\n   */\n  setAt(index, elem) {\n    const n = this.getLength();\n    if (index < n) {\n      if (this.unique_) {\n        this.assertUnique_(elem, index);\n      }\n      const prev = this.array_[index];\n      this.array_[index] = elem;\n      this.dispatchEvent(\n        new CollectionEvent(CollectionEventType.REMOVE, prev, index));\n      this.dispatchEvent(\n        new CollectionEvent(CollectionEventType.ADD, elem, index));\n    } else {\n      for (let j = n; j < index; ++j) {\n        this.insertAt(j, undefined);\n      }\n      this.insertAt(index, elem);\n    }\n  }\n\n  /**\n   * @private\n   */\n  updateLength_() {\n    this.set(Property.LENGTH, this.array_.length);\n  }\n\n  /**\n   * @private\n   * @param {T} elem Element.\n   * @param {number=} opt_except Optional index to ignore.\n   */\n  assertUnique_(elem, opt_except) {\n    for (let i = 0, ii = this.array_.length; i < ii; ++i) {\n      if (this.array_[i] === elem && i !== opt_except) {\n        throw new AssertionError(58);\n      }\n    }\n  }\n}\n\n\nexport default Collection;\n","/**\n * @module ol/interaction/Draw\n */\nimport EventType from '../events/EventType.js';\nimport Feature from '../Feature.js';\nimport MapBrowserEventType from '../MapBrowserEventType.js';\nimport MapBrowserPointerEvent from '../MapBrowserPointerEvent.js';\nimport {getChangeEventType} from '../Object.js';\nimport {squaredDistance as squaredCoordinateDistance} from '../coordinate.js';\nimport Event from '../events/Event.js';\nimport {noModifierKeys, always, shiftKeyOnly} from '../events/condition.js';\nimport {boundingExtent, getBottomLeft, getBottomRight, getTopLeft, getTopRight} from '../extent.js';\nimport {TRUE, FALSE} from '../functions.js';\nimport Circle from '../geom/Circle.js';\nimport GeometryType from '../geom/GeometryType.js';\nimport LineString from '../geom/LineString.js';\nimport MultiLineString from '../geom/MultiLineString.js';\nimport MultiPoint from '../geom/MultiPoint.js';\nimport MultiPolygon from '../geom/MultiPolygon.js';\nimport Point from '../geom/Point.js';\nimport Polygon, {fromCircle, makeRegular} from '../geom/Polygon.js';\nimport PointerInteraction from './Pointer.js';\nimport InteractionProperty from './Property.js';\nimport VectorLayer from '../layer/Vector.js';\nimport VectorSource from '../source/Vector.js';\nimport {createEditingStyle} from '../style/Style.js';\n\n\n/**\n * @typedef {Object} Options\n * @property {GeometryType} type Geometry type of\n * the geometries being drawn with this instance.\n * @property {number} [clickTolerance=6] The maximum distance in pixels between\n * \"down\" and \"up\" for a \"up\" event to be considered a \"click\" event and\n * actually add a point/vertex to the geometry being drawn.  The default of `6`\n * was chosen for the draw interaction to behave correctly on mouse as well as\n * on touch devices.\n * @property {import(\"../Collection.js\").default<Feature>} [features]\n * Destination collection for the drawn features.\n * @property {VectorSource} [source] Destination source for\n * the drawn features.\n * @property {number} [dragVertexDelay=500] Delay in milliseconds after pointerdown\n * before the current vertex can be dragged to its exact position.\n * @property {number} [snapTolerance=12] Pixel distance for snapping to the\n * drawing finish.\n * @property {boolean} [stopClick=false] Stop click, singleclick, and\n * doubleclick events from firing during drawing.\n * @property {number} [maxPoints] The number of points that can be drawn before\n * a polygon ring or line string is finished. By default there is no\n * restriction.\n * @property {number} [minPoints] The number of points that must be drawn\n * before a polygon ring or line string can be finished. Default is `3` for\n * polygon rings and `2` for line strings.\n * @property {import(\"../events/condition.js\").Condition} [finishCondition] A function\n * that takes an {@link module:ol/MapBrowserEvent~MapBrowserEvent} and returns a\n * boolean to indicate whether the drawing can be finished.\n * @property {import(\"../style/Style.js\").StyleLike} [style]\n * Style for sketch features.\n * @property {GeometryFunction} [geometryFunction]\n * Function that is called when a geometry's coordinates are updated.\n * @property {string} [geometryName] Geometry name to use for features created\n * by the draw interaction.\n * @property {import(\"../events/condition.js\").Condition} [condition] A function that\n * takes an {@link module:ol/MapBrowserEvent~MapBrowserEvent} and returns a\n * boolean to indicate whether that event should be handled.\n * By default {@link module:ol/events/condition~noModifierKeys}, i.e. a click,\n * adds a vertex or deactivates freehand drawing.\n * @property {boolean} [freehand=false] Operate in freehand mode for lines,\n * polygons, and circles.  This makes the interaction always operate in freehand\n * mode and takes precedence over any `freehandCondition` option.\n * @property {import(\"../events/condition.js\").Condition} [freehandCondition]\n * Condition that activates freehand drawing for lines and polygons. This\n * function takes an {@link module:ol/MapBrowserEvent~MapBrowserEvent} and\n * returns a boolean to indicate whether that event should be handled. The\n * default is {@link module:ol/events/condition~shiftKeyOnly}, meaning that the\n * Shift key activates freehand drawing.\n * @property {boolean} [wrapX=false] Wrap the world horizontally on the sketch\n * overlay.\n */\n\n\n/**\n * Coordinate type when drawing points.\n * @typedef {import(\"../coordinate.js\").Coordinate} PointCoordType\n */\n\n\n/**\n * Coordinate type when drawing lines.\n * @typedef {Array<import(\"../coordinate.js\").Coordinate>} LineCoordType\n */\n\n\n/**\n * Coordinate type when drawing polygons.\n * @typedef {Array<Array<import(\"../coordinate.js\").Coordinate>>} PolyCoordType\n */\n\n\n/**\n * Types used for drawing coordinates.\n * @typedef {PointCoordType|LineCoordType|PolyCoordType} SketchCoordType\n */\n\n\n/**\n * Function that takes an array of coordinates and an optional existing geometry as\n * arguments, and returns a geometry. The optional existing geometry is the\n * geometry that is returned when the function is called without a second\n * argument.\n * @typedef {function(!SketchCoordType, import(\"../geom/SimpleGeometry.js\").default=):\n *     import(\"../geom/SimpleGeometry.js\").default} GeometryFunction\n */\n\n\n/**\n * Draw mode.  This collapses multi-part geometry types with their single-part\n * cousins.\n * @enum {string}\n */\nconst Mode = {\n  POINT: 'Point',\n  LINE_STRING: 'LineString',\n  POLYGON: 'Polygon',\n  CIRCLE: 'Circle'\n};\n\n\n/**\n * @enum {string}\n */\nconst DrawEventType = {\n  /**\n   * Triggered upon feature draw start\n   * @event DrawEvent#drawstart\n   * @api\n   */\n  DRAWSTART: 'drawstart',\n  /**\n   * Triggered upon feature draw end\n   * @event DrawEvent#drawend\n   * @api\n   */\n  DRAWEND: 'drawend'\n};\n\n\n/**\n * @classdesc\n * Events emitted by {@link module:ol/interaction/Draw~Draw} instances are\n * instances of this type.\n */\nclass DrawEvent extends Event {\n  /**\n   * @param {DrawEventType} type Type.\n   * @param {Feature} feature The feature drawn.\n   */\n  constructor(type, feature) {\n\n    super(type);\n\n    /**\n     * The feature being drawn.\n     * @type {Feature}\n     * @api\n     */\n    this.feature = feature;\n\n  }\n\n}\n\n\n/**\n * @classdesc\n * Interaction for drawing feature geometries.\n *\n * @fires DrawEvent\n * @api\n */\nclass Draw extends PointerInteraction {\n  /**\n   * @param {Options} options Options.\n   */\n  constructor(options) {\n\n    const pointerOptions = /** @type {import(\"./Pointer.js\").Options} */ (options);\n    if (!pointerOptions.stopDown) {\n      pointerOptions.stopDown = FALSE;\n    }\n\n    super(pointerOptions);\n\n    /**\n     * @type {boolean}\n     * @private\n     */\n    this.shouldHandle_ = false;\n\n    /**\n     * @type {import(\"../pixel.js\").Pixel}\n     * @private\n     */\n    this.downPx_ = null;\n\n    /**\n     * @type {?}\n     * @private\n     */\n    this.downTimeout_;\n\n    /**\n     * @type {number|undefined}\n     * @private\n     */\n    this.lastDragTime_;\n\n    /**\n     * @type {boolean}\n     * @private\n     */\n    this.freehand_ = false;\n\n    /**\n     * Target source for drawn features.\n     * @type {VectorSource}\n     * @private\n     */\n    this.source_ = options.source ? options.source : null;\n\n    /**\n     * Target collection for drawn features.\n     * @type {import(\"../Collection.js\").default<Feature>}\n     * @private\n     */\n    this.features_ = options.features ? options.features : null;\n\n    /**\n     * Pixel distance for snapping.\n     * @type {number}\n     * @private\n     */\n    this.snapTolerance_ = options.snapTolerance ? options.snapTolerance : 12;\n\n    /**\n     * Geometry type.\n     * @type {GeometryType}\n     * @private\n     */\n    this.type_ = /** @type {GeometryType} */ (options.type);\n\n    /**\n     * Drawing mode (derived from geometry type.\n     * @type {Mode}\n     * @private\n     */\n    this.mode_ = getMode(this.type_);\n\n    /**\n     * Stop click, singleclick, and doubleclick events from firing during drawing.\n     * Default is `false`.\n     * @type {boolean}\n     * @private\n     */\n    this.stopClick_ = !!options.stopClick;\n\n    /**\n     * The number of points that must be drawn before a polygon ring or line\n     * string can be finished.  The default is 3 for polygon rings and 2 for\n     * line strings.\n     * @type {number}\n     * @private\n     */\n    this.minPoints_ = options.minPoints ?\n      options.minPoints :\n      (this.mode_ === Mode.POLYGON ? 3 : 2);\n\n    /**\n     * The number of points that can be drawn before a polygon ring or line string\n     * is finished. The default is no restriction.\n     * @type {number}\n     * @private\n     */\n    this.maxPoints_ = options.maxPoints ? options.maxPoints : Infinity;\n\n    /**\n     * A function to decide if a potential finish coordinate is permissible\n     * @private\n     * @type {import(\"../events/condition.js\").Condition}\n     */\n    this.finishCondition_ = options.finishCondition ? options.finishCondition : TRUE;\n\n    let geometryFunction = options.geometryFunction;\n    if (!geometryFunction) {\n      if (this.type_ === GeometryType.CIRCLE) {\n        /**\n         * @param {!LineCoordType} coordinates The coordinates.\n         * @param {import(\"../geom/SimpleGeometry.js\").default=} opt_geometry Optional geometry.\n         * @return {import(\"../geom/SimpleGeometry.js\").default} A geometry.\n         */\n        geometryFunction = function(coordinates, opt_geometry) {\n          const circle = opt_geometry ? /** @type {Circle} */ (opt_geometry) :\n            new Circle([NaN, NaN]);\n          const squaredLength = squaredCoordinateDistance(\n            coordinates[0], coordinates[1]);\n          circle.setCenterAndRadius(coordinates[0], Math.sqrt(squaredLength));\n          return circle;\n        };\n      } else {\n        let Constructor;\n        const mode = this.mode_;\n        if (mode === Mode.POINT) {\n          Constructor = Point;\n        } else if (mode === Mode.LINE_STRING) {\n          Constructor = LineString;\n        } else if (mode === Mode.POLYGON) {\n          Constructor = Polygon;\n        }\n        /**\n         * @param {!LineCoordType} coordinates The coordinates.\n         * @param {import(\"../geom/SimpleGeometry.js\").default=} opt_geometry Optional geometry.\n         * @return {import(\"../geom/SimpleGeometry.js\").default} A geometry.\n         */\n        geometryFunction = function(coordinates, opt_geometry) {\n          let geometry = opt_geometry;\n          if (geometry) {\n            if (mode === Mode.POLYGON) {\n              if (coordinates[0].length) {\n                // Add a closing coordinate to match the first\n                geometry.setCoordinates([coordinates[0].concat([coordinates[0][0]])]);\n              } else {\n                geometry.setCoordinates([]);\n              }\n            } else {\n              geometry.setCoordinates(coordinates);\n            }\n          } else {\n            geometry = new Constructor(coordinates);\n          }\n          return geometry;\n        };\n      }\n    }\n\n    /**\n     * @type {GeometryFunction}\n     * @private\n     */\n    this.geometryFunction_ = geometryFunction;\n\n    /**\n     * @type {number}\n     * @private\n     */\n    this.dragVertexDelay_ = options.dragVertexDelay !== undefined ? options.dragVertexDelay : 500;\n\n    /**\n     * Finish coordinate for the feature (first point for polygons, last point for\n     * linestrings).\n     * @type {import(\"../coordinate.js\").Coordinate}\n     * @private\n     */\n    this.finishCoordinate_ = null;\n\n    /**\n     * Sketch feature.\n     * @type {Feature}\n     * @private\n     */\n    this.sketchFeature_ = null;\n\n    /**\n     * Sketch point.\n     * @type {Feature<Point>}\n     * @private\n     */\n    this.sketchPoint_ = null;\n\n    /**\n     * Sketch coordinates. Used when drawing a line or polygon.\n     * @type {SketchCoordType}\n     * @private\n     */\n    this.sketchCoords_ = null;\n\n    /**\n     * Sketch line. Used when drawing polygon.\n     * @type {Feature<LineString>}\n     * @private\n     */\n    this.sketchLine_ = null;\n\n    /**\n     * Sketch line coordinates. Used when drawing a polygon or circle.\n     * @type {LineCoordType}\n     * @private\n     */\n    this.sketchLineCoords_ = null;\n\n    /**\n     * Squared tolerance for handling up events.  If the squared distance\n     * between a down and up event is greater than this tolerance, up events\n     * will not be handled.\n     * @type {number}\n     * @private\n     */\n    this.squaredClickTolerance_ = options.clickTolerance ?\n      options.clickTolerance * options.clickTolerance : 36;\n\n    /**\n     * Draw overlay where our sketch features are drawn.\n     * @type {VectorLayer}\n     * @private\n     */\n    this.overlay_ = new VectorLayer({\n      source: new VectorSource({\n        useSpatialIndex: false,\n        wrapX: options.wrapX ? options.wrapX : false\n      }),\n      style: options.style ? options.style : getDefaultStyleFunction(),\n      updateWhileInteracting: true\n    });\n\n    /**\n     * Name of the geometry attribute for newly created features.\n     * @type {string|undefined}\n     * @private\n     */\n    this.geometryName_ = options.geometryName;\n\n    /**\n     * @private\n     * @type {import(\"../events/condition.js\").Condition}\n     */\n    this.condition_ = options.condition ? options.condition : noModifierKeys;\n\n    /**\n     * @private\n     * @type {import(\"../events/condition.js\").Condition}\n     */\n    this.freehandCondition_;\n    if (options.freehand) {\n      this.freehandCondition_ = always;\n    } else {\n      this.freehandCondition_ = options.freehandCondition ? options.freehandCondition : shiftKeyOnly;\n    }\n\n    this.addEventListener(getChangeEventType(InteractionProperty.ACTIVE), this.updateState_);\n\n  }\n\n  /**\n   * @inheritDoc\n   */\n  setMap(map) {\n    super.setMap(map);\n    this.updateState_();\n  }\n\n  /**\n   * Get the overlay layer that this interaction renders sketch features to.\n   * @return {VectorLayer} Overlay layer.\n   * @api\n   */\n  getOverlay() {\n    return this.overlay_;\n  }\n\n  /**\n   * Handles the {@link module:ol/MapBrowserEvent map browser event} and may actually draw or finish the drawing.\n   * @override\n   * @api\n   */\n  handleEvent(event) {\n    if (event.originalEvent.type === EventType.CONTEXTMENU) {\n      // Avoid context menu for long taps when drawing on mobile\n      event.preventDefault();\n    }\n    this.freehand_ = this.mode_ !== Mode.POINT && this.freehandCondition_(event);\n    let move = event.type === MapBrowserEventType.POINTERMOVE;\n    let pass = true;\n    if (!this.freehand_ && this.lastDragTime_ && event.type === MapBrowserEventType.POINTERDRAG) {\n      const now = Date.now();\n      if (now - this.lastDragTime_ >= this.dragVertexDelay_) {\n        this.downPx_ = event.pixel;\n        this.shouldHandle_ = !this.freehand_;\n        move = true;\n      } else {\n        this.lastDragTime_ = undefined;\n      }\n      if (this.shouldHandle_ && this.downTimeout_ !== undefined) {\n        clearTimeout(this.downTimeout_);\n        this.downTimeout_ = undefined;\n      }\n    }\n    if (this.freehand_ &&\n        event.type === MapBrowserEventType.POINTERDRAG &&\n        this.sketchFeature_ !== null) {\n      this.addToDrawing_(event);\n      pass = false;\n    } else if (this.freehand_ &&\n        event.type === MapBrowserEventType.POINTERDOWN) {\n      pass = false;\n    } else if (move) {\n      pass = event.type === MapBrowserEventType.POINTERMOVE;\n      if (pass && this.freehand_) {\n        pass = this.handlePointerMove_(event);\n      } else if (/** @type {MapBrowserPointerEvent} */ (event).pointerEvent.pointerType == 'mouse' ||\n          (event.type === MapBrowserEventType.POINTERDRAG && this.downTimeout_ === undefined)) {\n        this.handlePointerMove_(event);\n      }\n    } else if (event.type === MapBrowserEventType.DBLCLICK) {\n      pass = false;\n    }\n\n    return super.handleEvent(event) && pass;\n  }\n\n  /**\n   * @inheritDoc\n   */\n  handleDownEvent(event) {\n    this.shouldHandle_ = !this.freehand_;\n\n    if (this.freehand_) {\n      this.downPx_ = event.pixel;\n      if (!this.finishCoordinate_) {\n        this.startDrawing_(event);\n      }\n      return true;\n    } else if (this.condition_(event)) {\n      this.lastDragTime_ = Date.now();\n      this.downTimeout_ = setTimeout(function() {\n        this.handlePointerMove_(new MapBrowserPointerEvent(\n          MapBrowserEventType.POINTERMOVE, event.map, event.pointerEvent, false, event.frameState));\n      }.bind(this), this.dragVertexDelay_);\n      this.downPx_ = event.pixel;\n      return true;\n    } else {\n      this.lastDragTime_ = undefined;\n      return false;\n    }\n  }\n\n\n  /**\n   * @inheritDoc\n   */\n  handleUpEvent(event) {\n    let pass = true;\n\n    if (this.downTimeout_) {\n      clearTimeout(this.downTimeout_);\n      this.downTimeout_ = undefined;\n    }\n\n    this.handlePointerMove_(event);\n\n    const circleMode = this.mode_ === Mode.CIRCLE;\n\n    if (this.shouldHandle_) {\n      if (!this.finishCoordinate_) {\n        this.startDrawing_(event);\n        if (this.mode_ === Mode.POINT) {\n          this.finishDrawing();\n        }\n      } else if (this.freehand_ || circleMode) {\n        this.finishDrawing();\n      } else if (this.atFinish_(event)) {\n        if (this.finishCondition_(event)) {\n          this.finishDrawing();\n        }\n      } else {\n        this.addToDrawing_(event);\n      }\n      pass = false;\n    } else if (this.freehand_) {\n      this.finishCoordinate_ = null;\n      this.abortDrawing_();\n    }\n    if (!pass && this.stopClick_) {\n      event.stopPropagation();\n    }\n    return pass;\n  }\n\n  /**\n   * Handle move events.\n   * @param {import(\"../MapBrowserEvent.js\").default} event A move event.\n   * @return {boolean} Pass the event to other interactions.\n   * @private\n   */\n  handlePointerMove_(event) {\n    if (this.downPx_ &&\n        ((!this.freehand_ && this.shouldHandle_) ||\n        (this.freehand_ && !this.shouldHandle_))) {\n      const downPx = this.downPx_;\n      const clickPx = event.pixel;\n      const dx = downPx[0] - clickPx[0];\n      const dy = downPx[1] - clickPx[1];\n      const squaredDistance = dx * dx + dy * dy;\n      this.shouldHandle_ = this.freehand_ ?\n        squaredDistance > this.squaredClickTolerance_ :\n        squaredDistance <= this.squaredClickTolerance_;\n      if (!this.shouldHandle_) {\n        return true;\n      }\n    }\n\n    if (this.finishCoordinate_) {\n      this.modifyDrawing_(event);\n    } else {\n      this.createOrUpdateSketchPoint_(event);\n    }\n    return true;\n  }\n\n  /**\n   * Determine if an event is within the snapping tolerance of the start coord.\n   * @param {import(\"../MapBrowserEvent.js\").default} event Event.\n   * @return {boolean} The event is within the snapping tolerance of the start.\n   * @private\n   */\n  atFinish_(event) {\n    let at = false;\n    if (this.sketchFeature_) {\n      let potentiallyDone = false;\n      let potentiallyFinishCoordinates = [this.finishCoordinate_];\n      if (this.mode_ === Mode.LINE_STRING) {\n        potentiallyDone = this.sketchCoords_.length > this.minPoints_;\n      } else if (this.mode_ === Mode.POLYGON) {\n        const sketchCoords = /** @type {PolyCoordType} */ (this.sketchCoords_);\n        potentiallyDone = sketchCoords[0].length > this.minPoints_;\n        potentiallyFinishCoordinates = [sketchCoords[0][0], sketchCoords[0][sketchCoords[0].length - 2]];\n      }\n      if (potentiallyDone) {\n        const map = event.map;\n        for (let i = 0, ii = potentiallyFinishCoordinates.length; i < ii; i++) {\n          const finishCoordinate = potentiallyFinishCoordinates[i];\n          const finishPixel = map.getPixelFromCoordinate(finishCoordinate);\n          const pixel = event.pixel;\n          const dx = pixel[0] - finishPixel[0];\n          const dy = pixel[1] - finishPixel[1];\n          const snapTolerance = this.freehand_ ? 1 : this.snapTolerance_;\n          at = Math.sqrt(dx * dx + dy * dy) <= snapTolerance;\n          if (at) {\n            this.finishCoordinate_ = finishCoordinate;\n            break;\n          }\n        }\n      }\n    }\n    return at;\n  }\n\n  /**\n   * @param {import(\"../MapBrowserEvent.js\").default} event Event.\n   * @private\n   */\n  createOrUpdateSketchPoint_(event) {\n    const coordinates = event.coordinate.slice();\n    if (!this.sketchPoint_) {\n      this.sketchPoint_ = new Feature(new Point(coordinates));\n      this.updateSketchFeatures_();\n    } else {\n      const sketchPointGeom = this.sketchPoint_.getGeometry();\n      sketchPointGeom.setCoordinates(coordinates);\n    }\n  }\n\n  /**\n   * Start the drawing.\n   * @param {import(\"../MapBrowserEvent.js\").default} event Event.\n   * @private\n   */\n  startDrawing_(event) {\n    const start = event.coordinate;\n    this.finishCoordinate_ = start;\n    if (this.mode_ === Mode.POINT) {\n      this.sketchCoords_ = start.slice();\n    } else if (this.mode_ === Mode.POLYGON) {\n      this.sketchCoords_ = [[start.slice(), start.slice()]];\n      this.sketchLineCoords_ = this.sketchCoords_[0];\n    } else {\n      this.sketchCoords_ = [start.slice(), start.slice()];\n    }\n    if (this.sketchLineCoords_) {\n      this.sketchLine_ = new Feature(\n        new LineString(this.sketchLineCoords_));\n    }\n    const geometry = this.geometryFunction_(this.sketchCoords_);\n    this.sketchFeature_ = new Feature();\n    if (this.geometryName_) {\n      this.sketchFeature_.setGeometryName(this.geometryName_);\n    }\n    this.sketchFeature_.setGeometry(geometry);\n    this.updateSketchFeatures_();\n    this.dispatchEvent(new DrawEvent(DrawEventType.DRAWSTART, this.sketchFeature_));\n  }\n\n  /**\n   * Modify the drawing.\n   * @param {import(\"../MapBrowserEvent.js\").default} event Event.\n   * @private\n   */\n  modifyDrawing_(event) {\n    let coordinate = event.coordinate;\n    const geometry = this.sketchFeature_.getGeometry();\n    let coordinates, last;\n    if (this.mode_ === Mode.POINT) {\n      last = this.sketchCoords_;\n    } else if (this.mode_ === Mode.POLYGON) {\n      coordinates = /** @type {PolyCoordType} */ (this.sketchCoords_)[0];\n      last = coordinates[coordinates.length - 1];\n      if (this.atFinish_(event)) {\n        // snap to finish\n        coordinate = this.finishCoordinate_.slice();\n      }\n    } else {\n      coordinates = this.sketchCoords_;\n      last = coordinates[coordinates.length - 1];\n    }\n    last[0] = coordinate[0];\n    last[1] = coordinate[1];\n    this.geometryFunction_(/** @type {!LineCoordType} */ (this.sketchCoords_), geometry);\n    if (this.sketchPoint_) {\n      const sketchPointGeom = this.sketchPoint_.getGeometry();\n      sketchPointGeom.setCoordinates(coordinate);\n    }\n    /** @type {LineString} */\n    let sketchLineGeom;\n    if (geometry.getType() == GeometryType.POLYGON &&\n        this.mode_ !== Mode.POLYGON) {\n      if (!this.sketchLine_) {\n        this.sketchLine_ = new Feature();\n      }\n      const ring = geometry.getLinearRing(0);\n      sketchLineGeom = this.sketchLine_.getGeometry();\n      if (!sketchLineGeom) {\n        sketchLineGeom = new LineString(ring.getFlatCoordinates(), ring.getLayout());\n        this.sketchLine_.setGeometry(sketchLineGeom);\n      } else {\n        sketchLineGeom.setFlatCoordinates(\n          ring.getLayout(), ring.getFlatCoordinates());\n        sketchLineGeom.changed();\n      }\n    } else if (this.sketchLineCoords_) {\n      sketchLineGeom = this.sketchLine_.getGeometry();\n      sketchLineGeom.setCoordinates(this.sketchLineCoords_);\n    }\n    this.updateSketchFeatures_();\n  }\n\n  /**\n   * Add a new coordinate to the drawing.\n   * @param {import(\"../MapBrowserEvent.js\").default} event Event.\n   * @private\n   */\n  addToDrawing_(event) {\n    const coordinate = event.coordinate;\n    const geometry = this.sketchFeature_.getGeometry();\n    let done;\n    let coordinates;\n    if (this.mode_ === Mode.LINE_STRING) {\n      this.finishCoordinate_ = coordinate.slice();\n      coordinates = /** @type {LineCoordType} */ (this.sketchCoords_);\n      if (coordinates.length >= this.maxPoints_) {\n        if (this.freehand_) {\n          coordinates.pop();\n        } else {\n          done = true;\n        }\n      }\n      coordinates.push(coordinate.slice());\n      this.geometryFunction_(coordinates, geometry);\n    } else if (this.mode_ === Mode.POLYGON) {\n      coordinates = /** @type {PolyCoordType} */ (this.sketchCoords_)[0];\n      if (coordinates.length >= this.maxPoints_) {\n        if (this.freehand_) {\n          coordinates.pop();\n        } else {\n          done = true;\n        }\n      }\n      coordinates.push(coordinate.slice());\n      if (done) {\n        this.finishCoordinate_ = coordinates[0];\n      }\n      this.geometryFunction_(this.sketchCoords_, geometry);\n    }\n    this.updateSketchFeatures_();\n    if (done) {\n      this.finishDrawing();\n    }\n  }\n\n  /**\n   * Remove last point of the feature currently being drawn.\n   * @api\n   */\n  removeLastPoint() {\n    if (!this.sketchFeature_) {\n      return;\n    }\n    const geometry = this.sketchFeature_.getGeometry();\n    let coordinates;\n    /** @type {LineString} */\n    let sketchLineGeom;\n    if (this.mode_ === Mode.LINE_STRING) {\n      coordinates = /** @type {LineCoordType} */ (this.sketchCoords_);\n      coordinates.splice(-2, 1);\n      this.geometryFunction_(coordinates, geometry);\n      if (coordinates.length >= 2) {\n        this.finishCoordinate_ = coordinates[coordinates.length - 2].slice();\n      }\n    } else if (this.mode_ === Mode.POLYGON) {\n      coordinates = /** @type {PolyCoordType} */ (this.sketchCoords_)[0];\n      coordinates.splice(-2, 1);\n      sketchLineGeom = this.sketchLine_.getGeometry();\n      sketchLineGeom.setCoordinates(coordinates);\n      this.geometryFunction_(this.sketchCoords_, geometry);\n    }\n\n    if (coordinates.length === 0) {\n      this.finishCoordinate_ = null;\n    }\n\n    this.updateSketchFeatures_();\n  }\n\n  /**\n   * Stop drawing and add the sketch feature to the target layer.\n   * The {@link module:ol/interaction/Draw~DrawEventType.DRAWEND} event is\n   * dispatched before inserting the feature.\n   * @api\n   */\n  finishDrawing() {\n    const sketchFeature = this.abortDrawing_();\n    if (!sketchFeature) {\n      return;\n    }\n    let coordinates = this.sketchCoords_;\n    const geometry = sketchFeature.getGeometry();\n    if (this.mode_ === Mode.LINE_STRING) {\n      // remove the redundant last point\n      coordinates.pop();\n      this.geometryFunction_(coordinates, geometry);\n    } else if (this.mode_ === Mode.POLYGON) {\n      // remove the redundant last point in ring\n      /** @type {PolyCoordType} */ (coordinates)[0].pop();\n      this.geometryFunction_(coordinates, geometry);\n      coordinates = geometry.getCoordinates();\n    }\n\n    // cast multi-part geometries\n    if (this.type_ === GeometryType.MULTI_POINT) {\n      sketchFeature.setGeometry(new MultiPoint([/** @type {PointCoordType} */(coordinates)]));\n    } else if (this.type_ === GeometryType.MULTI_LINE_STRING) {\n      sketchFeature.setGeometry(new MultiLineString([/** @type {LineCoordType} */(coordinates)]));\n    } else if (this.type_ === GeometryType.MULTI_POLYGON) {\n      sketchFeature.setGeometry(new MultiPolygon([/** @type {PolyCoordType} */(coordinates)]));\n    }\n\n    // First dispatch event to allow full set up of feature\n    this.dispatchEvent(new DrawEvent(DrawEventType.DRAWEND, sketchFeature));\n\n    // Then insert feature\n    if (this.features_) {\n      this.features_.push(sketchFeature);\n    }\n    if (this.source_) {\n      this.source_.addFeature(sketchFeature);\n    }\n  }\n\n  /**\n   * Stop drawing without adding the sketch feature to the target layer.\n   * @return {Feature} The sketch feature (or null if none).\n   * @private\n   */\n  abortDrawing_() {\n    this.finishCoordinate_ = null;\n    const sketchFeature = this.sketchFeature_;\n    if (sketchFeature) {\n      this.sketchFeature_ = null;\n      this.sketchPoint_ = null;\n      this.sketchLine_ = null;\n      this.overlay_.getSource().clear(true);\n    }\n    return sketchFeature;\n  }\n\n  /**\n   * Extend an existing geometry by adding additional points. This only works\n   * on features with `LineString` geometries, where the interaction will\n   * extend lines by adding points to the end of the coordinates array.\n   * @param {!Feature<LineString>} feature Feature to be extended.\n   * @api\n   */\n  extend(feature) {\n    const geometry = feature.getGeometry();\n    const lineString = geometry;\n    this.sketchFeature_ = feature;\n    this.sketchCoords_ = lineString.getCoordinates();\n    const last = this.sketchCoords_[this.sketchCoords_.length - 1];\n    this.finishCoordinate_ = last.slice();\n    this.sketchCoords_.push(last.slice());\n    this.updateSketchFeatures_();\n    this.dispatchEvent(new DrawEvent(DrawEventType.DRAWSTART, this.sketchFeature_));\n  }\n\n  /**\n   * Redraw the sketch features.\n   * @private\n   */\n  updateSketchFeatures_() {\n    const sketchFeatures = [];\n    if (this.sketchFeature_) {\n      sketchFeatures.push(this.sketchFeature_);\n    }\n    if (this.sketchLine_) {\n      sketchFeatures.push(this.sketchLine_);\n    }\n    if (this.sketchPoint_) {\n      sketchFeatures.push(this.sketchPoint_);\n    }\n    const overlaySource = this.overlay_.getSource();\n    overlaySource.clear(true);\n    overlaySource.addFeatures(sketchFeatures);\n  }\n\n  /**\n   * @private\n   */\n  updateState_() {\n    const map = this.getMap();\n    const active = this.getActive();\n    if (!map || !active) {\n      this.abortDrawing_();\n    }\n    this.overlay_.setMap(active ? map : null);\n  }\n}\n\n\n/**\n * @return {import(\"../style/Style.js\").StyleFunction} Styles.\n */\nfunction getDefaultStyleFunction() {\n  const styles = createEditingStyle();\n  return function(feature, resolution) {\n    return styles[feature.getGeometry().getType()];\n  };\n}\n\n\n/**\n * Create a `geometryFunction` for `type: 'Circle'` that will create a regular\n * polygon with a user specified number of sides and start angle instead of an\n * `import(\"../geom/Circle.js\").Circle` geometry.\n * @param {number=} opt_sides Number of sides of the regular polygon. Default is\n *     32.\n * @param {number=} opt_angle Angle of the first point in radians. 0 means East.\n *     Default is the angle defined by the heading from the center of the\n *     regular polygon to the current pointer position.\n * @return {GeometryFunction} Function that draws a\n *     polygon.\n * @api\n */\nexport function createRegularPolygon(opt_sides, opt_angle) {\n  return function(coordinates, opt_geometry) {\n    const center = /** @type {LineCoordType} */ (coordinates)[0];\n    const end = /** @type {LineCoordType} */ (coordinates)[1];\n    const radius = Math.sqrt(\n      squaredCoordinateDistance(center, end));\n    const geometry = opt_geometry ? /** @type {Polygon} */ (opt_geometry) :\n      fromCircle(new Circle(center), opt_sides);\n    let angle = opt_angle;\n    if (!opt_angle) {\n      const x = end[0] - center[0];\n      const y = end[1] - center[1];\n      angle = Math.atan(y / x) - (x < 0 ? Math.PI : 0);\n    }\n    makeRegular(geometry, center, radius, angle);\n    return geometry;\n  };\n}\n\n\n/**\n * Create a `geometryFunction` that will create a box-shaped polygon (aligned\n * with the coordinate system axes).  Use this with the draw interaction and\n * `type: 'Circle'` to return a box instead of a circle geometry.\n * @return {GeometryFunction} Function that draws a box-shaped polygon.\n * @api\n */\nexport function createBox() {\n  return (\n    function(coordinates, opt_geometry) {\n      const extent = boundingExtent(/** @type {LineCoordType} */ (coordinates));\n      const boxCoordinates = [[\n        getBottomLeft(extent),\n        getBottomRight(extent),\n        getTopRight(extent),\n        getTopLeft(extent),\n        getBottomLeft(extent)\n      ]];\n      let geometry = opt_geometry;\n      if (geometry) {\n        geometry.setCoordinates(boxCoordinates);\n      } else {\n        geometry = new Polygon(boxCoordinates);\n      }\n      return geometry;\n    }\n  );\n}\n\n\n/**\n * Get the drawing mode.  The mode for mult-part geometries is the same as for\n * their single-part cousins.\n * @param {GeometryType} type Geometry type.\n * @return {Mode} Drawing mode.\n */\nfunction getMode(type) {\n  let mode;\n  if (type === GeometryType.POINT ||\n      type === GeometryType.MULTI_POINT) {\n    mode = Mode.POINT;\n  } else if (type === GeometryType.LINE_STRING ||\n      type === GeometryType.MULTI_LINE_STRING) {\n    mode = Mode.LINE_STRING;\n  } else if (type === GeometryType.POLYGON ||\n      type === GeometryType.MULTI_POLYGON) {\n    mode = Mode.POLYGON;\n  } else if (type === GeometryType.CIRCLE) {\n    mode = Mode.CIRCLE;\n  }\n  return (\n    /** @type {!Mode} */ (mode)\n  );\n}\n\n\nexport default Draw;\n","export default function(defs) {\n  defs('EPSG:4326', \"+title=WGS 84 (long/lat) +proj=longlat +ellps=WGS84 +datum=WGS84 +units=degrees\");\n  defs('EPSG:4269', \"+title=NAD83 (long/lat) +proj=longlat +a=6378137.0 +b=6356752.31414036 +ellps=GRS80 +datum=NAD83 +units=degrees\");\n  defs('EPSG:3857', \"+title=WGS 84 / Pseudo-Mercator +proj=merc +a=6378137 +b=6378137 +lat_ts=0.0 +lon_0=0.0 +x_0=0.0 +y_0=0 +k=1.0 +units=m +nadgrids=@null +no_defs\");\n\n  defs.WGS84 = defs['EPSG:4326'];\n  defs['EPSG:3785'] = defs['EPSG:3857']; // maintain backward compat, official code is 3857\n  defs.GOOGLE = defs['EPSG:3857'];\n  defs['EPSG:900913'] = defs['EPSG:3857'];\n  defs['EPSG:102113'] = defs['EPSG:3857'];\n}\n","export var PJD_3PARAM = 1;\nexport var PJD_7PARAM = 2;\nexport var PJD_WGS84 = 4; // WGS84 or equivalent\nexport var PJD_NODATUM = 5; // WGS84 or equivalent\nexport var SEC_TO_RAD = 4.84813681109535993589914102357e-6;\nexport var HALF_PI = Math.PI/2;\n// ellipoid pj_set_ell.c\nexport var SIXTH = 0.1666666666666666667;\n/* 1/6 */\nexport var RA4 = 0.04722222222222222222;\n/* 17/360 */\nexport var RA6 = 0.02215608465608465608;\nexport var EPSLN = 1.0e-10;\n// you'd think you could use Number.EPSILON above but that makes\n// Mollweide get into an infinate loop.\n\nexport var D2R = 0.01745329251994329577;\nexport var R2D = 57.29577951308232088;\nexport var FORTPI = Math.PI/4;\nexport var TWO_PI = Math.PI * 2;\n// SPI is slightly greater than Math.PI, so values that exceed the -180..180\n// degree range by a tiny amount don't get wrapped. This prevents points that\n// have drifted from their original location along the 180th meridian (due to\n// floating point error) from changing their sign.\nexport var SPI = 3.14159265359;\n","var exports = {};\nexport {exports as default};\n\nexports.greenwich = 0.0; //\"0dE\",\nexports.lisbon = -9.131906111111; //\"9d07'54.862\\\"W\",\nexports.paris = 2.337229166667; //\"2d20'14.025\\\"E\",\nexports.bogota = -74.080916666667; //\"74d04'51.3\\\"W\",\nexports.madrid = -3.687938888889; //\"3d41'16.58\\\"W\",\nexports.rome = 12.452333333333; //\"12d27'8.4\\\"E\",\nexports.bern = 7.439583333333; //\"7d26'22.5\\\"E\",\nexports.jakarta = 106.807719444444; //\"106d48'27.79\\\"E\",\nexports.ferro = -17.666666666667; //\"17d40'W\",\nexports.brussels = 4.367975; //\"4d22'4.71\\\"E\",\nexports.stockholm = 18.058277777778; //\"18d3'29.8\\\"E\",\nexports.athens = 23.7163375; //\"23d42'58.815\\\"E\",\nexports.oslo = 10.722916666667; //\"10d43'22.5\\\"E\"\n","export default {\n  ft: {to_meter: 0.3048},\n  'us-ft': {to_meter: 1200 / 3937}\n};\n","var ignoredChar = /[\\s_\\-\\/\\(\\)]/g;\nexport default function match(obj, key) {\n  if (obj[key]) {\n    return obj[key];\n  }\n  var keys = Object.keys(obj);\n  var lkey = key.toLowerCase().replace(ignoredChar, '');\n  var i = -1;\n  var testkey, processedKey;\n  while (++i < keys.length) {\n    testkey = keys[i];\n    processedKey = testkey.toLowerCase().replace(ignoredChar, '');\n    if (processedKey === lkey) {\n      return obj[testkey];\n    }\n  }\n}\n","import {D2R} from './constants/values';\nimport PrimeMeridian from './constants/PrimeMeridian';\nimport units from './constants/units';\nimport match from './match';\n\nexport default function(defData) {\n  var self = {};\n  var paramObj = defData.split('+').map(function(v) {\n    return v.trim();\n  }).filter(function(a) {\n    return a;\n  }).reduce(function(p, a) {\n    var split = a.split('=');\n    split.push(true);\n    p[split[0].toLowerCase()] = split[1];\n    return p;\n  }, {});\n  var paramName, paramVal, paramOutname;\n  var params = {\n    proj: 'projName',\n    datum: 'datumCode',\n    rf: function(v) {\n      self.rf = parseFloat(v);\n    },\n    lat_0: function(v) {\n      self.lat0 = v * D2R;\n    },\n    lat_1: function(v) {\n      self.lat1 = v * D2R;\n    },\n    lat_2: function(v) {\n      self.lat2 = v * D2R;\n    },\n    lat_ts: function(v) {\n      self.lat_ts = v * D2R;\n    },\n    lon_0: function(v) {\n      self.long0 = v * D2R;\n    },\n    lon_1: function(v) {\n      self.long1 = v * D2R;\n    },\n    lon_2: function(v) {\n      self.long2 = v * D2R;\n    },\n    alpha: function(v) {\n      self.alpha = parseFloat(v) * D2R;\n    },\n    lonc: function(v) {\n      self.longc = v * D2R;\n    },\n    x_0: function(v) {\n      self.x0 = parseFloat(v);\n    },\n    y_0: function(v) {\n      self.y0 = parseFloat(v);\n    },\n    k_0: function(v) {\n      self.k0 = parseFloat(v);\n    },\n    k: function(v) {\n      self.k0 = parseFloat(v);\n    },\n    a: function(v) {\n      self.a = parseFloat(v);\n    },\n    b: function(v) {\n      self.b = parseFloat(v);\n    },\n    r_a: function() {\n      self.R_A = true;\n    },\n    zone: function(v) {\n      self.zone = parseInt(v, 10);\n    },\n    south: function() {\n      self.utmSouth = true;\n    },\n    towgs84: function(v) {\n      self.datum_params = v.split(\",\").map(function(a) {\n        return parseFloat(a);\n      });\n    },\n    to_meter: function(v) {\n      self.to_meter = parseFloat(v);\n    },\n    units: function(v) {\n      self.units = v;\n      var unit = match(units, v);\n      if (unit) {\n        self.to_meter = unit.to_meter;\n      }\n    },\n    from_greenwich: function(v) {\n      self.from_greenwich = v * D2R;\n    },\n    pm: function(v) {\n      var pm = match(PrimeMeridian, v);\n      self.from_greenwich = (pm ? pm : parseFloat(v)) * D2R;\n    },\n    nadgrids: function(v) {\n      if (v === '@null') {\n        self.datumCode = 'none';\n      }\n      else {\n        self.nadgrids = v;\n      }\n    },\n    axis: function(v) {\n      var legalAxis = \"ewnsud\";\n      if (v.length === 3 && legalAxis.indexOf(v.substr(0, 1)) !== -1 && legalAxis.indexOf(v.substr(1, 1)) !== -1 && legalAxis.indexOf(v.substr(2, 1)) !== -1) {\n        self.axis = v;\n      }\n    }\n  };\n  for (paramName in paramObj) {\n    paramVal = paramObj[paramName];\n    if (paramName in params) {\n      paramOutname = params[paramName];\n      if (typeof paramOutname === 'function') {\n        paramOutname(paramVal);\n      }\n      else {\n        self[paramOutname] = paramVal;\n      }\n    }\n    else {\n      self[paramName] = paramVal;\n    }\n  }\n  if(typeof self.datumCode === 'string' && self.datumCode !== \"WGS84\"){\n    self.datumCode = self.datumCode.toLowerCase();\n  }\n  return self;\n}\n","export default parseString;\n\nvar NEUTRAL = 1;\nvar KEYWORD = 2;\nvar NUMBER = 3;\nvar QUOTED = 4;\nvar AFTERQUOTE = 5;\nvar ENDED = -1;\nvar whitespace = /\\s/;\nvar latin = /[A-Za-z]/;\nvar keyword = /[A-Za-z84]/;\nvar endThings = /[,\\]]/;\nvar digets = /[\\d\\.E\\-\\+]/;\n// const ignoredChar = /[\\s_\\-\\/\\(\\)]/g;\nfunction Parser(text) {\n  if (typeof text !== 'string') {\n    throw new Error('not a string');\n  }\n  this.text = text.trim();\n  this.level = 0;\n  this.place = 0;\n  this.root = null;\n  this.stack = [];\n  this.currentObject = null;\n  this.state = NEUTRAL;\n}\nParser.prototype.readCharicter = function() {\n  var char = this.text[this.place++];\n  if (this.state !== QUOTED) {\n    while (whitespace.test(char)) {\n      if (this.place >= this.text.length) {\n        return;\n      }\n      char = this.text[this.place++];\n    }\n  }\n  switch (this.state) {\n    case NEUTRAL:\n      return this.neutral(char);\n    case KEYWORD:\n      return this.keyword(char)\n    case QUOTED:\n      return this.quoted(char);\n    case AFTERQUOTE:\n      return this.afterquote(char);\n    case NUMBER:\n      return this.number(char);\n    case ENDED:\n      return;\n  }\n};\nParser.prototype.afterquote = function(char) {\n  if (char === '\"') {\n    this.word += '\"';\n    this.state = QUOTED;\n    return;\n  }\n  if (endThings.test(char)) {\n    this.word = this.word.trim();\n    this.afterItem(char);\n    return;\n  }\n  throw new Error('havn\\'t handled \"' +char + '\" in afterquote yet, index ' + this.place);\n};\nParser.prototype.afterItem = function(char) {\n  if (char === ',') {\n    if (this.word !== null) {\n      this.currentObject.push(this.word);\n    }\n    this.word = null;\n    this.state = NEUTRAL;\n    return;\n  }\n  if (char === ']') {\n    this.level--;\n    if (this.word !== null) {\n      this.currentObject.push(this.word);\n      this.word = null;\n    }\n    this.state = NEUTRAL;\n    this.currentObject = this.stack.pop();\n    if (!this.currentObject) {\n      this.state = ENDED;\n    }\n\n    return;\n  }\n};\nParser.prototype.number = function(char) {\n  if (digets.test(char)) {\n    this.word += char;\n    return;\n  }\n  if (endThings.test(char)) {\n    this.word = parseFloat(this.word);\n    this.afterItem(char);\n    return;\n  }\n  throw new Error('havn\\'t handled \"' +char + '\" in number yet, index ' + this.place);\n};\nParser.prototype.quoted = function(char) {\n  if (char === '\"') {\n    this.state = AFTERQUOTE;\n    return;\n  }\n  this.word += char;\n  return;\n};\nParser.prototype.keyword = function(char) {\n  if (keyword.test(char)) {\n    this.word += char;\n    return;\n  }\n  if (char === '[') {\n    var newObjects = [];\n    newObjects.push(this.word);\n    this.level++;\n    if (this.root === null) {\n      this.root = newObjects;\n    } else {\n      this.currentObject.push(newObjects);\n    }\n    this.stack.push(this.currentObject);\n    this.currentObject = newObjects;\n    this.state = NEUTRAL;\n    return;\n  }\n  if (endThings.test(char)) {\n    this.afterItem(char);\n    return;\n  }\n  throw new Error('havn\\'t handled \"' +char + '\" in keyword yet, index ' + this.place);\n};\nParser.prototype.neutral = function(char) {\n  if (latin.test(char)) {\n    this.word = char;\n    this.state = KEYWORD;\n    return;\n  }\n  if (char === '\"') {\n    this.word = '';\n    this.state = QUOTED;\n    return;\n  }\n  if (digets.test(char)) {\n    this.word = char;\n    this.state = NUMBER;\n    return;\n  }\n  if (endThings.test(char)) {\n    this.afterItem(char);\n    return;\n  }\n  throw new Error('havn\\'t handled \"' +char + '\" in neutral yet, index ' + this.place);\n};\nParser.prototype.output = function() {\n  while (this.place < this.text.length) {\n    this.readCharicter();\n  }\n  if (this.state === ENDED) {\n    return this.root;\n  }\n  throw new Error('unable to parse string \"' +this.text + '\". State is ' + this.state);\n};\n\nfunction parseString(txt) {\n  var parser = new Parser(txt);\n  return parser.output();\n}\n","\n\nfunction mapit(obj, key, value) {\n  if (Array.isArray(key)) {\n    value.unshift(key);\n    key = null;\n  }\n  var thing = key ? {} : obj;\n\n  var out = value.reduce(function(newObj, item) {\n    sExpr(item, newObj);\n    return newObj\n  }, thing);\n  if (key) {\n    obj[key] = out;\n  }\n}\n\nexport function sExpr(v, obj) {\n  if (!Array.isArray(v)) {\n    obj[v] = true;\n    return;\n  }\n  var key = v.shift();\n  if (key === 'PARAMETER') {\n    key = v.shift();\n  }\n  if (v.length === 1) {\n    if (Array.isArray(v[0])) {\n      obj[key] = {};\n      sExpr(v[0], obj[key]);\n      return;\n    }\n    obj[key] = v[0];\n    return;\n  }\n  if (!v.length) {\n    obj[key] = true;\n    return;\n  }\n  if (key === 'TOWGS84') {\n    obj[key] = v;\n    return;\n  }\n  if (!Array.isArray(key)) {\n    obj[key] = {};\n  }\n\n  var i;\n  switch (key) {\n    case 'UNIT':\n    case 'PRIMEM':\n    case 'VERT_DATUM':\n      obj[key] = {\n        name: v[0].toLowerCase(),\n        convert: v[1]\n      };\n      if (v.length === 3) {\n        sExpr(v[2], obj[key]);\n      }\n      return;\n    case 'SPHEROID':\n    case 'ELLIPSOID':\n      obj[key] = {\n        name: v[0],\n        a: v[1],\n        rf: v[2]\n      };\n      if (v.length === 4) {\n        sExpr(v[3], obj[key]);\n      }\n      return;\n    case 'PROJECTEDCRS':\n    case 'PROJCRS':\n    case 'GEOGCS':\n    case 'GEOCCS':\n    case 'PROJCS':\n    case 'LOCAL_CS':\n    case 'GEODCRS':\n    case 'GEODETICCRS':\n    case 'GEODETICDATUM':\n    case 'EDATUM':\n    case 'ENGINEERINGDATUM':\n    case 'VERT_CS':\n    case 'VERTCRS':\n    case 'VERTICALCRS':\n    case 'COMPD_CS':\n    case 'COMPOUNDCRS':\n    case 'ENGINEERINGCRS':\n    case 'ENGCRS':\n    case 'FITTED_CS':\n    case 'LOCAL_DATUM':\n    case 'DATUM':\n      v[0] = ['name', v[0]];\n      mapit(obj, key, v);\n      return;\n    default:\n      i = -1;\n      while (++i < v.length) {\n        if (!Array.isArray(v[i])) {\n          return sExpr(v, obj[key]);\n        }\n      }\n      return mapit(obj, key, v);\n  }\n}\n","var D2R = 0.01745329251994329577;\nimport parser from './parser';\nimport {sExpr} from './process';\n\n\n\nfunction rename(obj, params) {\n  var outName = params[0];\n  var inName = params[1];\n  if (!(outName in obj) && (inName in obj)) {\n    obj[outName] = obj[inName];\n    if (params.length === 3) {\n      obj[outName] = params[2](obj[outName]);\n    }\n  }\n}\n\nfunction d2r(input) {\n  return input * D2R;\n}\n\nfunction cleanWKT(wkt) {\n  if (wkt.type === 'GEOGCS') {\n    wkt.projName = 'longlat';\n  } else if (wkt.type === 'LOCAL_CS') {\n    wkt.projName = 'identity';\n    wkt.local = true;\n  } else {\n    if (typeof wkt.PROJECTION === 'object') {\n      wkt.projName = Object.keys(wkt.PROJECTION)[0];\n    } else {\n      wkt.projName = wkt.PROJECTION;\n    }\n  }\n  if (wkt.UNIT) {\n    wkt.units = wkt.UNIT.name.toLowerCase();\n    if (wkt.units === 'metre') {\n      wkt.units = 'meter';\n    }\n    if (wkt.UNIT.convert) {\n      if (wkt.type === 'GEOGCS') {\n        if (wkt.DATUM && wkt.DATUM.SPHEROID) {\n          wkt.to_meter = wkt.UNIT.convert*wkt.DATUM.SPHEROID.a;\n        }\n      } else {\n        wkt.to_meter = wkt.UNIT.convert;\n      }\n    }\n  }\n  var geogcs = wkt.GEOGCS;\n  if (wkt.type === 'GEOGCS') {\n    geogcs = wkt;\n  }\n  if (geogcs) {\n    //if(wkt.GEOGCS.PRIMEM&&wkt.GEOGCS.PRIMEM.convert){\n    //  wkt.from_greenwich=wkt.GEOGCS.PRIMEM.convert*D2R;\n    //}\n    if (geogcs.DATUM) {\n      wkt.datumCode = geogcs.DATUM.name.toLowerCase();\n    } else {\n      wkt.datumCode = geogcs.name.toLowerCase();\n    }\n    if (wkt.datumCode.slice(0, 2) === 'd_') {\n      wkt.datumCode = wkt.datumCode.slice(2);\n    }\n    if (wkt.datumCode === 'new_zealand_geodetic_datum_1949' || wkt.datumCode === 'new_zealand_1949') {\n      wkt.datumCode = 'nzgd49';\n    }\n    if (wkt.datumCode === 'wgs_1984') {\n      if (wkt.PROJECTION === 'Mercator_Auxiliary_Sphere') {\n        wkt.sphere = true;\n      }\n      wkt.datumCode = 'wgs84';\n    }\n    if (wkt.datumCode.slice(-6) === '_ferro') {\n      wkt.datumCode = wkt.datumCode.slice(0, - 6);\n    }\n    if (wkt.datumCode.slice(-8) === '_jakarta') {\n      wkt.datumCode = wkt.datumCode.slice(0, - 8);\n    }\n    if (~wkt.datumCode.indexOf('belge')) {\n      wkt.datumCode = 'rnb72';\n    }\n    if (geogcs.DATUM && geogcs.DATUM.SPHEROID) {\n      wkt.ellps = geogcs.DATUM.SPHEROID.name.replace('_19', '').replace(/[Cc]larke\\_18/, 'clrk');\n      if (wkt.ellps.toLowerCase().slice(0, 13) === 'international') {\n        wkt.ellps = 'intl';\n      }\n\n      wkt.a = geogcs.DATUM.SPHEROID.a;\n      wkt.rf = parseFloat(geogcs.DATUM.SPHEROID.rf, 10);\n    }\n\n    if (geogcs.DATUM && geogcs.DATUM.TOWGS84) {\n      wkt.datum_params = geogcs.DATUM.TOWGS84;\n    }\n    if (~wkt.datumCode.indexOf('osgb_1936')) {\n      wkt.datumCode = 'osgb36';\n    }\n    if (~wkt.datumCode.indexOf('osni_1952')) {\n      wkt.datumCode = 'osni52';\n    }\n    if (~wkt.datumCode.indexOf('tm65')\n      || ~wkt.datumCode.indexOf('geodetic_datum_of_1965')) {\n      wkt.datumCode = 'ire65';\n    }\n    if (wkt.datumCode === 'ch1903+') {\n      wkt.datumCode = 'ch1903';\n    }\n    if (~wkt.datumCode.indexOf('israel')) {\n      wkt.datumCode = 'isr93';\n    }\n  }\n  if (wkt.b && !isFinite(wkt.b)) {\n    wkt.b = wkt.a;\n  }\n\n  function toMeter(input) {\n    var ratio = wkt.to_meter || 1;\n    return input * ratio;\n  }\n  var renamer = function(a) {\n    return rename(wkt, a);\n  };\n  var list = [\n    ['standard_parallel_1', 'Standard_Parallel_1'],\n    ['standard_parallel_2', 'Standard_Parallel_2'],\n    ['false_easting', 'False_Easting'],\n    ['false_northing', 'False_Northing'],\n    ['central_meridian', 'Central_Meridian'],\n    ['latitude_of_origin', 'Latitude_Of_Origin'],\n    ['latitude_of_origin', 'Central_Parallel'],\n    ['scale_factor', 'Scale_Factor'],\n    ['k0', 'scale_factor'],\n    ['latitude_of_center', 'Latitude_Of_Center'],\n    ['latitude_of_center', 'Latitude_of_center'],\n    ['lat0', 'latitude_of_center', d2r],\n    ['longitude_of_center', 'Longitude_Of_Center'],\n    ['longitude_of_center', 'Longitude_of_center'],\n    ['longc', 'longitude_of_center', d2r],\n    ['x0', 'false_easting', toMeter],\n    ['y0', 'false_northing', toMeter],\n    ['long0', 'central_meridian', d2r],\n    ['lat0', 'latitude_of_origin', d2r],\n    ['lat0', 'standard_parallel_1', d2r],\n    ['lat1', 'standard_parallel_1', d2r],\n    ['lat2', 'standard_parallel_2', d2r],\n    ['azimuth', 'Azimuth'],\n    ['alpha', 'azimuth', d2r],\n    ['srsCode', 'name']\n  ];\n  list.forEach(renamer);\n  if (!wkt.long0 && wkt.longc && (wkt.projName === 'Albers_Conic_Equal_Area' || wkt.projName === 'Lambert_Azimuthal_Equal_Area')) {\n    wkt.long0 = wkt.longc;\n  }\n  if (!wkt.lat_ts && wkt.lat1 && (wkt.projName === 'Stereographic_South_Pole' || wkt.projName === 'Polar Stereographic (variant B)')) {\n    wkt.lat0 = d2r(wkt.lat1 > 0 ? 90 : -90);\n    wkt.lat_ts = wkt.lat1;\n  }\n}\nexport default function(wkt) {\n  var lisp = parser(wkt);\n  var type = lisp.shift();\n  var name = lisp.shift();\n  lisp.unshift(['name', name]);\n  lisp.unshift(['type', type]);\n  var obj = {};\n  sExpr(lisp, obj);\n  cleanWKT(obj);\n  return obj;\n}\n","import globals from './global';\nimport parseProj from './projString';\nimport wkt from 'wkt-parser';\n\nfunction defs(name) {\n  /*global console*/\n  var that = this;\n  if (arguments.length === 2) {\n    var def = arguments[1];\n    if (typeof def === 'string') {\n      if (def.charAt(0) === '+') {\n        defs[name] = parseProj(arguments[1]);\n      }\n      else {\n        defs[name] = wkt(arguments[1]);\n      }\n    } else {\n      defs[name] = def;\n    }\n  }\n  else if (arguments.length === 1) {\n    if (Array.isArray(name)) {\n      return name.map(function(v) {\n        if (Array.isArray(v)) {\n          defs.apply(that, v);\n        }\n        else {\n          defs(v);\n        }\n      });\n    }\n    else if (typeof name === 'string') {\n      if (name in defs) {\n        return defs[name];\n      }\n    }\n    else if ('EPSG' in name) {\n      defs['EPSG:' + name.EPSG] = name;\n    }\n    else if ('ESRI' in name) {\n      defs['ESRI:' + name.ESRI] = name;\n    }\n    else if ('IAU2000' in name) {\n      defs['IAU2000:' + name.IAU2000] = name;\n    }\n    else {\n      console.log(name);\n    }\n    return;\n  }\n\n\n}\nglobals(defs);\nexport default defs;\n","import defs from './defs';\nimport wkt from 'wkt-parser';\nimport projStr from './projString';\nimport match from './match';\nfunction testObj(code){\n  return typeof code === 'string';\n}\nfunction testDef(code){\n  return code in defs;\n}\n var codeWords = ['PROJECTEDCRS', 'PROJCRS', 'GEOGCS','GEOCCS','PROJCS','LOCAL_CS', 'GEODCRS', 'GEODETICCRS', 'GEODETICDATUM', 'ENGCRS', 'ENGINEERINGCRS'];\nfunction testWKT(code){\n  return codeWords.some(function (word) {\n    return code.indexOf(word) > -1;\n  });\n}\nvar codes = ['3857', '900913', '3785', '102113'];\nfunction checkMercator(item) {\n  var auth = match(item, 'authority');\n  if (!auth) {\n    return;\n  }\n  var code = match(auth, 'epsg');\n  return code && codes.indexOf(code) > -1;\n}\nfunction checkProjStr(item) {\n  var ext = match(item, 'extension');\n  if (!ext) {\n    return;\n  }\n  return match(ext, 'proj4');\n}\nfunction testProj(code){\n  return code[0] === '+';\n}\nfunction parse(code){\n  if (testObj(code)) {\n    //check to see if this is a WKT string\n    if (testDef(code)) {\n      return defs[code];\n    }\n    if (testWKT(code)) {\n      var out = wkt(code);\n      // test of spetial case, due to this being a very common and often malformed\n      if (checkMercator(out)) {\n        return defs['EPSG:3857'];\n      }\n      var maybeProjStr = checkProjStr(out);\n      if (maybeProjStr) {\n        return projStr(maybeProjStr);\n      }\n      return out;\n    }\n    if (testProj(code)) {\n      return projStr(code);\n    }\n  }else{\n    return code;\n  }\n}\n\nexport default parse;\n","export default function(destination, source) {\n  destination = destination || {};\n  var value, property;\n  if (!source) {\n    return destination;\n  }\n  for (property in source) {\n    value = source[property];\n    if (value !== undefined) {\n      destination[property] = value;\n    }\n  }\n  return destination;\n}\n","export default function(eccent, sinphi, cosphi) {\n  var con = eccent * sinphi;\n  return cosphi / (Math.sqrt(1 - con * con));\n}","export default function(x) {\n  return x<0 ? -1 : 1;\n}","\nimport {TWO_PI, SPI} from '../constants/values';\nimport sign from './sign';\n\nexport default function(x) {\n  return (Math.abs(x) <= SPI) ? x : (x - (sign(x) * TWO_PI));\n}\n","import {HALF_PI} from '../constants/values';\n\nexport default function(eccent, phi, sinphi) {\n  var con = eccent * sinphi;\n  var com = 0.5 * eccent;\n  con = Math.pow(((1 - con) / (1 + con)), com);\n  return (Math.tan(0.5 * (HALF_PI - phi)) / con);\n}\n","import {HALF_PI} from '../constants/values';\n\nexport default function(eccent, ts) {\n  var eccnth = 0.5 * eccent;\n  var con, dphi;\n  var phi = HALF_PI - 2 * Math.atan(ts);\n  for (var i = 0; i <= 15; i++) {\n    con = eccent * Math.sin(phi);\n    dphi = HALF_PI - 2 * Math.atan(ts * (Math.pow(((1 - con) / (1 + con)), eccnth))) - phi;\n    phi += dphi;\n    if (Math.abs(dphi) <= 0.0000000001) {\n      return phi;\n    }\n  }\n  //console.log(\"phi2z has NoConvergence\");\n  return -9999;\n}\n","export function init() {\n  //no-op for longlat\n}\n\nfunction identity(pt) {\n  return pt;\n}\nexport {identity as forward};\nexport {identity as inverse};\nexport var names = [\"longlat\", \"identity\"];\nexport default {\n  init: init,\n  forward: identity,\n  inverse: identity,\n  names: names\n};\n","import merc from \"./projections/merc\";\nimport longlat from \"./projections/longlat\";\nvar projs = [merc, longlat];\nvar names = {};\nvar projStore = [];\n\nfunction add(proj, i) {\n  var len = projStore.length;\n  if (!proj.names) {\n    console.log(i);\n    return true;\n  }\n  projStore[len] = proj;\n  proj.names.forEach(function(n) {\n    names[n.toLowerCase()] = len;\n  });\n  return this;\n}\n\nexport {add};\n\nexport function get(name) {\n  if (!name) {\n    return false;\n  }\n  var n = name.toLowerCase();\n  if (typeof names[n] !== 'undefined' && projStore[names[n]]) {\n    return projStore[names[n]];\n  }\n}\n\nexport function start() {\n  projs.forEach(add);\n}\nexport default {\n  start: start,\n  add: add,\n  get: get\n};\n","import msfnz from '../common/msfnz';\n\nimport adjust_lon from '../common/adjust_lon';\nimport tsfnz from '../common/tsfnz';\nimport phi2z from '../common/phi2z';\nimport {FORTPI, R2D, EPSLN, HALF_PI} from '../constants/values';\nexport function init() {\n  var con = this.b / this.a;\n  this.es = 1 - con * con;\n  if(!('x0' in this)){\n    this.x0 = 0;\n  }\n  if(!('y0' in this)){\n    this.y0 = 0;\n  }\n  this.e = Math.sqrt(this.es);\n  if (this.lat_ts) {\n    if (this.sphere) {\n      this.k0 = Math.cos(this.lat_ts);\n    }\n    else {\n      this.k0 = msfnz(this.e, Math.sin(this.lat_ts), Math.cos(this.lat_ts));\n    }\n  }\n  else {\n    if (!this.k0) {\n      if (this.k) {\n        this.k0 = this.k;\n      }\n      else {\n        this.k0 = 1;\n      }\n    }\n  }\n}\n\n/* Mercator forward equations--mapping lat,long to x,y\n  --------------------------------------------------*/\n\nexport function forward(p) {\n  var lon = p.x;\n  var lat = p.y;\n  // convert to radians\n  if (lat * R2D > 90 && lat * R2D < -90 && lon * R2D > 180 && lon * R2D < -180) {\n    return null;\n  }\n\n  var x, y;\n  if (Math.abs(Math.abs(lat) - HALF_PI) <= EPSLN) {\n    return null;\n  }\n  else {\n    if (this.sphere) {\n      x = this.x0 + this.a * this.k0 * adjust_lon(lon - this.long0);\n      y = this.y0 + this.a * this.k0 * Math.log(Math.tan(FORTPI + 0.5 * lat));\n    }\n    else {\n      var sinphi = Math.sin(lat);\n      var ts = tsfnz(this.e, lat, sinphi);\n      x = this.x0 + this.a * this.k0 * adjust_lon(lon - this.long0);\n      y = this.y0 - this.a * this.k0 * Math.log(ts);\n    }\n    p.x = x;\n    p.y = y;\n    return p;\n  }\n}\n\n/* Mercator inverse equations--mapping x,y to lat/long\n  --------------------------------------------------*/\nexport function inverse(p) {\n\n  var x = p.x - this.x0;\n  var y = p.y - this.y0;\n  var lon, lat;\n\n  if (this.sphere) {\n    lat = HALF_PI - 2 * Math.atan(Math.exp(-y / (this.a * this.k0)));\n  }\n  else {\n    var ts = Math.exp(-y / (this.a * this.k0));\n    lat = phi2z(this.e, ts);\n    if (lat === -9999) {\n      return null;\n    }\n  }\n  lon = adjust_lon(this.long0 + x / (this.a * this.k0));\n\n  p.x = lon;\n  p.y = lat;\n  return p;\n}\n\nexport var names = [\"Mercator\", \"Popular Visualisation Pseudo Mercator\", \"Mercator_1SP\", \"Mercator_Auxiliary_Sphere\", \"merc\"];\nexport default {\n  init: init,\n  forward: forward,\n  inverse: inverse,\n  names: names\n};\n","var exports = {};\nexport {exports as default};\nexports.MERIT = {\n  a: 6378137.0,\n  rf: 298.257,\n  ellipseName: \"MERIT 1983\"\n};\n\nexports.SGS85 = {\n  a: 6378136.0,\n  rf: 298.257,\n  ellipseName: \"Soviet Geodetic System 85\"\n};\n\nexports.GRS80 = {\n  a: 6378137.0,\n  rf: 298.257222101,\n  ellipseName: \"GRS 1980(IUGG, 1980)\"\n};\n\nexports.IAU76 = {\n  a: 6378140.0,\n  rf: 298.257,\n  ellipseName: \"IAU 1976\"\n};\n\nexports.airy = {\n  a: 6377563.396,\n  b: 6356256.910,\n  ellipseName: \"Airy 1830\"\n};\n\nexports.APL4 = {\n  a: 6378137,\n  rf: 298.25,\n  ellipseName: \"Appl. Physics. 1965\"\n};\n\nexports.NWL9D = {\n  a: 6378145.0,\n  rf: 298.25,\n  ellipseName: \"Naval Weapons Lab., 1965\"\n};\n\nexports.mod_airy = {\n  a: 6377340.189,\n  b: 6356034.446,\n  ellipseName: \"Modified Airy\"\n};\n\nexports.andrae = {\n  a: 6377104.43,\n  rf: 300.0,\n  ellipseName: \"Andrae 1876 (Den., Iclnd.)\"\n};\n\nexports.aust_SA = {\n  a: 6378160.0,\n  rf: 298.25,\n  ellipseName: \"Australian Natl & S. Amer. 1969\"\n};\n\nexports.GRS67 = {\n  a: 6378160.0,\n  rf: 298.2471674270,\n  ellipseName: \"GRS 67(IUGG 1967)\"\n};\n\nexports.bessel = {\n  a: 6377397.155,\n  rf: 299.1528128,\n  ellipseName: \"Bessel 1841\"\n};\n\nexports.bess_nam = {\n  a: 6377483.865,\n  rf: 299.1528128,\n  ellipseName: \"Bessel 1841 (Namibia)\"\n};\n\nexports.clrk66 = {\n  a: 6378206.4,\n  b: 6356583.8,\n  ellipseName: \"Clarke 1866\"\n};\n\nexports.clrk80 = {\n  a: 6378249.145,\n  rf: 293.4663,\n  ellipseName: \"Clarke 1880 mod.\"\n};\n\nexports.clrk58 = {\n  a: 6378293.645208759,\n  rf: 294.2606763692654,\n  ellipseName: \"Clarke 1858\"\n};\n\nexports.CPM = {\n  a: 6375738.7,\n  rf: 334.29,\n  ellipseName: \"Comm. des Poids et Mesures 1799\"\n};\n\nexports.delmbr = {\n  a: 6376428.0,\n  rf: 311.5,\n  ellipseName: \"Delambre 1810 (Belgium)\"\n};\n\nexports.engelis = {\n  a: 6378136.05,\n  rf: 298.2566,\n  ellipseName: \"Engelis 1985\"\n};\n\nexports.evrst30 = {\n  a: 6377276.345,\n  rf: 300.8017,\n  ellipseName: \"Everest 1830\"\n};\n\nexports.evrst48 = {\n  a: 6377304.063,\n  rf: 300.8017,\n  ellipseName: \"Everest 1948\"\n};\n\nexports.evrst56 = {\n  a: 6377301.243,\n  rf: 300.8017,\n  ellipseName: \"Everest 1956\"\n};\n\nexports.evrst69 = {\n  a: 6377295.664,\n  rf: 300.8017,\n  ellipseName: \"Everest 1969\"\n};\n\nexports.evrstSS = {\n  a: 6377298.556,\n  rf: 300.8017,\n  ellipseName: \"Everest (Sabah & Sarawak)\"\n};\n\nexports.fschr60 = {\n  a: 6378166.0,\n  rf: 298.3,\n  ellipseName: \"Fischer (Mercury Datum) 1960\"\n};\n\nexports.fschr60m = {\n  a: 6378155.0,\n  rf: 298.3,\n  ellipseName: \"Fischer 1960\"\n};\n\nexports.fschr68 = {\n  a: 6378150.0,\n  rf: 298.3,\n  ellipseName: \"Fischer 1968\"\n};\n\nexports.helmert = {\n  a: 6378200.0,\n  rf: 298.3,\n  ellipseName: \"Helmert 1906\"\n};\n\nexports.hough = {\n  a: 6378270.0,\n  rf: 297.0,\n  ellipseName: \"Hough\"\n};\n\nexports.intl = {\n  a: 6378388.0,\n  rf: 297.0,\n  ellipseName: \"International 1909 (Hayford)\"\n};\n\nexports.kaula = {\n  a: 6378163.0,\n  rf: 298.24,\n  ellipseName: \"Kaula 1961\"\n};\n\nexports.lerch = {\n  a: 6378139.0,\n  rf: 298.257,\n  ellipseName: \"Lerch 1979\"\n};\n\nexports.mprts = {\n  a: 6397300.0,\n  rf: 191.0,\n  ellipseName: \"Maupertius 1738\"\n};\n\nexports.new_intl = {\n  a: 6378157.5,\n  b: 6356772.2,\n  ellipseName: \"New International 1967\"\n};\n\nexports.plessis = {\n  a: 6376523.0,\n  rf: 6355863.0,\n  ellipseName: \"Plessis 1817 (France)\"\n};\n\nexports.krass = {\n  a: 6378245.0,\n  rf: 298.3,\n  ellipseName: \"Krassovsky, 1942\"\n};\n\nexports.SEasia = {\n  a: 6378155.0,\n  b: 6356773.3205,\n  ellipseName: \"Southeast Asia\"\n};\n\nexports.walbeck = {\n  a: 6376896.0,\n  b: 6355834.8467,\n  ellipseName: \"Walbeck\"\n};\n\nexports.WGS60 = {\n  a: 6378165.0,\n  rf: 298.3,\n  ellipseName: \"WGS 60\"\n};\n\nexports.WGS66 = {\n  a: 6378145.0,\n  rf: 298.25,\n  ellipseName: \"WGS 66\"\n};\n\nexports.WGS7 = {\n  a: 6378135.0,\n  rf: 298.26,\n  ellipseName: \"WGS 72\"\n};\n\nexport var WGS84 = exports.WGS84 = {\n  a: 6378137.0,\n  rf: 298.257223563,\n  ellipseName: \"WGS 84\"\n};\n\nexports.sphere = {\n  a: 6370997.0,\n  b: 6370997.0,\n  ellipseName: \"Normal Sphere (r=6370997)\"\n};\n","var exports = {};\nexport {exports as default};\nexports.wgs84 = {\n  towgs84: \"0,0,0\",\n  ellipse: \"WGS84\",\n  datumName: \"WGS84\"\n};\n\nexports.ch1903 = {\n  towgs84: \"674.374,15.056,405.346\",\n  ellipse: \"bessel\",\n  datumName: \"swiss\"\n};\n\nexports.ggrs87 = {\n  towgs84: \"-199.87,74.79,246.62\",\n  ellipse: \"GRS80\",\n  datumName: \"Greek_Geodetic_Reference_System_1987\"\n};\n\nexports.nad83 = {\n  towgs84: \"0,0,0\",\n  ellipse: \"GRS80\",\n  datumName: \"North_American_Datum_1983\"\n};\n\nexports.nad27 = {\n  nadgrids: \"@conus,@alaska,@ntv2_0.gsb,@ntv1_can.dat\",\n  ellipse: \"clrk66\",\n  datumName: \"North_American_Datum_1927\"\n};\n\nexports.potsdam = {\n  towgs84: \"606.0,23.0,413.0\",\n  ellipse: \"bessel\",\n  datumName: \"Potsdam Rauenberg 1950 DHDN\"\n};\n\nexports.carthage = {\n  towgs84: \"-263.0,6.0,431.0\",\n  ellipse: \"clark80\",\n  datumName: \"Carthage 1934 Tunisia\"\n};\n\nexports.hermannskogel = {\n  towgs84: \"653.0,-212.0,449.0\",\n  ellipse: \"bessel\",\n  datumName: \"Hermannskogel\"\n};\n\nexports.osni52 = {\n  towgs84: \"482.530,-130.596,564.557,-1.042,-0.214,-0.631,8.15\",\n  ellipse: \"airy\",\n  datumName: \"Irish National\"\n};\n\nexports.ire65 = {\n  towgs84: \"482.530,-130.596,564.557,-1.042,-0.214,-0.631,8.15\",\n  ellipse: \"mod_airy\",\n  datumName: \"Ireland 1965\"\n};\n\nexports.rassadiran = {\n  towgs84: \"-133.63,-157.5,-158.62\",\n  ellipse: \"intl\",\n  datumName: \"Rassadiran\"\n};\n\nexports.nzgd49 = {\n  towgs84: \"59.47,-5.04,187.44,0.47,-0.1,1.024,-4.5993\",\n  ellipse: \"intl\",\n  datumName: \"New Zealand Geodetic Datum 1949\"\n};\n\nexports.osgb36 = {\n  towgs84: \"446.448,-125.157,542.060,0.1502,0.2470,0.8421,-20.4894\",\n  ellipse: \"airy\",\n  datumName: \"Airy 1830\"\n};\n\nexports.s_jtsk = {\n  towgs84: \"589,76,480\",\n  ellipse: 'bessel',\n  datumName: 'S-JTSK (Ferro)'\n};\n\nexports.beduaram = {\n  towgs84: '-106,-87,188',\n  ellipse: 'clrk80',\n  datumName: 'Beduaram'\n};\n\nexports.gunung_segara = {\n  towgs84: '-403,684,41',\n  ellipse: 'bessel',\n  datumName: 'Gunung Segara Jakarta'\n};\n\nexports.rnb72 = {\n  towgs84: \"106.869,-52.2978,103.724,-0.33657,0.456955,-1.84218,1\",\n  ellipse: \"intl\",\n  datumName: \"Reseau National Belge 1972\"\n};\n","import {PJD_3PARAM, PJD_7PARAM, PJD_WGS84, PJD_NODATUM, SEC_TO_RAD} from './constants/values';\n\nfunction datum(datumCode, datum_params, a, b, es, ep2) {\n  var out = {};\n\n  if (datumCode === undefined || datumCode === 'none') {\n    out.datum_type = PJD_NODATUM;\n  } else {\n    out.datum_type = PJD_WGS84;\n  }\n\n  if (datum_params) {\n    out.datum_params = datum_params.map(parseFloat);\n    if (out.datum_params[0] !== 0 || out.datum_params[1] !== 0 || out.datum_params[2] !== 0) {\n      out.datum_type = PJD_3PARAM;\n    }\n    if (out.datum_params.length > 3) {\n      if (out.datum_params[3] !== 0 || out.datum_params[4] !== 0 || out.datum_params[5] !== 0 || out.datum_params[6] !== 0) {\n        out.datum_type = PJD_7PARAM;\n        out.datum_params[3] *= SEC_TO_RAD;\n        out.datum_params[4] *= SEC_TO_RAD;\n        out.datum_params[5] *= SEC_TO_RAD;\n        out.datum_params[6] = (out.datum_params[6] / 1000000.0) + 1.0;\n      }\n    }\n  }\n\n  out.a = a; //datum object also uses these values\n  out.b = b;\n  out.es = es;\n  out.ep2 = ep2;\n  return out;\n}\n\nexport default datum;\n","import parseCode from './parseCode';\nimport extend from './extend';\nimport projections from './projections';\nimport {sphere as dc_sphere, eccentricity as dc_eccentricity} from './deriveConstants';\nimport Datum from './constants/Datum';\nimport datum from './datum';\nimport match from './match';\n\nfunction Projection(srsCode,callback) {\n  if (!(this instanceof Projection)) {\n    return new Projection(srsCode);\n  }\n  callback = callback || function(error){\n    if(error){\n      throw error;\n    }\n  };\n  var json = parseCode(srsCode);\n  if(typeof json !== 'object'){\n    callback(srsCode);\n    return;\n  }\n  var ourProj = Projection.projections.get(json.projName);\n  if(!ourProj){\n    callback(srsCode);\n    return;\n  }\n  if (json.datumCode && json.datumCode !== 'none') {\n    var datumDef = match(Datum, json.datumCode);\n    if (datumDef) {\n      json.datum_params = datumDef.towgs84 ? datumDef.towgs84.split(',') : null;\n      json.ellps = datumDef.ellipse;\n      json.datumName = datumDef.datumName ? datumDef.datumName : json.datumCode;\n    }\n  }\n  json.k0 = json.k0 || 1.0;\n  json.axis = json.axis || 'enu';\n  json.ellps = json.ellps || 'wgs84';\n  var sphere_ = dc_sphere(json.a, json.b, json.rf, json.ellps, json.sphere);\n  var ecc = dc_eccentricity(sphere_.a, sphere_.b, sphere_.rf, json.R_A);\n  var datumObj = json.datum || datum(json.datumCode, json.datum_params, sphere_.a, sphere_.b, ecc.es, ecc.ep2);\n\n  extend(this, json); // transfer everything over from the projection because we don't know what we'll need\n  extend(this, ourProj); // transfer all the methods from the projection\n\n  // copy the 4 things over we calulated in deriveConstants.sphere\n  this.a = sphere_.a;\n  this.b = sphere_.b;\n  this.rf = sphere_.rf;\n  this.sphere = sphere_.sphere;\n\n  // copy the 3 things we calculated in deriveConstants.eccentricity\n  this.es = ecc.es;\n  this.e = ecc.e;\n  this.ep2 = ecc.ep2;\n\n  // add in the datum object\n  this.datum = datumObj;\n\n  // init the projection\n  this.init();\n\n  // legecy callback from back in the day when it went to spatialreference.org\n  callback(null, this);\n\n}\nProjection.projections = projections;\nProjection.projections.start();\nexport default Projection;\n","import {SIXTH, RA4, RA6, EPSLN} from './constants/values';\nimport {default as Ellipsoid, WGS84} from './constants/Ellipsoid';\nimport match from './match';\n\nexport function eccentricity(a, b, rf, R_A) {\n  var a2 = a * a; // used in geocentric\n  var b2 = b * b; // used in geocentric\n  var es = (a2 - b2) / a2; // e ^ 2\n  var e = 0;\n  if (R_A) {\n    a *= 1 - es * (SIXTH + es * (RA4 + es * RA6));\n    a2 = a * a;\n    es = 0;\n  } else {\n    e = Math.sqrt(es); // eccentricity\n  }\n  var ep2 = (a2 - b2) / b2; // used in geocentric\n  return {\n    es: es,\n    e: e,\n    ep2: ep2\n  };\n}\nexport function sphere(a, b, rf, ellps, sphere) {\n  if (!a) { // do we have an ellipsoid?\n    var ellipse = match(Ellipsoid, ellps);\n    if (!ellipse) {\n      ellipse = WGS84;\n    }\n    a = ellipse.a;\n    b = ellipse.b;\n    rf = ellipse.rf;\n  }\n\n  if (rf && !b) {\n    b = (1.0 - 1.0 / rf) * a;\n  }\n  if (rf === 0 || Math.abs(a - b) < EPSLN) {\n    sphere = true;\n    b = a;\n  }\n  return {\n    a: a,\n    b: b,\n    rf: rf,\n    sphere: sphere\n  };\n}\n","import {PJD_3PARAM, PJD_7PARAM, PJD_NODATUM} from './constants/values';\n\nimport {geodeticToGeocentric, geocentricToGeodetic, geocentricToWgs84, geocentricFromWgs84, compareDatums} from './datumUtils';\nfunction checkParams(type) {\n  return (type === PJD_3PARAM || type === PJD_7PARAM);\n}\n\nexport default function(source, dest, point) {\n  // Short cut if the datums are identical.\n  if (compareDatums(source, dest)) {\n    return point; // in this case, zero is sucess,\n    // whereas cs_compare_datums returns 1 to indicate TRUE\n    // confusing, should fix this\n  }\n\n  // Explicitly skip datum transform by setting 'datum=none' as parameter for either source or dest\n  if (source.datum_type === PJD_NODATUM || dest.datum_type === PJD_NODATUM) {\n    return point;\n  }\n\n  // If this datum requires grid shifts, then apply it to geodetic coordinates.\n\n  // Do we need to go through geocentric coordinates?\n  if (source.es === dest.es && source.a === dest.a && !checkParams(source.datum_type) &&  !checkParams(dest.datum_type)) {\n    return point;\n  }\n\n  // Convert to geocentric coordinates.\n  point = geodeticToGeocentric(point, source.es, source.a);\n  // Convert between datums\n  if (checkParams(source.datum_type)) {\n    point = geocentricToWgs84(point, source.datum_type, source.datum_params);\n  }\n  if (checkParams(dest.datum_type)) {\n    point = geocentricFromWgs84(point, dest.datum_type, dest.datum_params);\n  }\n  return geocentricToGeodetic(point, dest.es, dest.a, dest.b);\n\n}\n","'use strict';\nimport {PJD_3PARAM, PJD_7PARAM, HALF_PI} from './constants/values';\nexport function compareDatums(source, dest) {\n  if (source.datum_type !== dest.datum_type) {\n    return false; // false, datums are not equal\n  } else if (source.a !== dest.a || Math.abs(source.es - dest.es) > 0.000000000050) {\n    // the tolerance for es is to ensure that GRS80 and WGS84\n    // are considered identical\n    return false;\n  } else if (source.datum_type === PJD_3PARAM) {\n    return (source.datum_params[0] === dest.datum_params[0] && source.datum_params[1] === dest.datum_params[1] && source.datum_params[2] === dest.datum_params[2]);\n  } else if (source.datum_type === PJD_7PARAM) {\n    return (source.datum_params[0] === dest.datum_params[0] && source.datum_params[1] === dest.datum_params[1] && source.datum_params[2] === dest.datum_params[2] && source.datum_params[3] === dest.datum_params[3] && source.datum_params[4] === dest.datum_params[4] && source.datum_params[5] === dest.datum_params[5] && source.datum_params[6] === dest.datum_params[6]);\n  } else {\n    return true; // datums are equal\n  }\n} // cs_compare_datums()\n\n/*\n * The function Convert_Geodetic_To_Geocentric converts geodetic coordinates\n * (latitude, longitude, and height) to geocentric coordinates (X, Y, Z),\n * according to the current ellipsoid parameters.\n *\n *    Latitude  : Geodetic latitude in radians                     (input)\n *    Longitude : Geodetic longitude in radians                    (input)\n *    Height    : Geodetic height, in meters                       (input)\n *    X         : Calculated Geocentric X coordinate, in meters    (output)\n *    Y         : Calculated Geocentric Y coordinate, in meters    (output)\n *    Z         : Calculated Geocentric Z coordinate, in meters    (output)\n *\n */\nexport function geodeticToGeocentric(p, es, a) {\n  var Longitude = p.x;\n  var Latitude = p.y;\n  var Height = p.z ? p.z : 0; //Z value not always supplied\n\n  var Rn; /*  Earth radius at location  */\n  var Sin_Lat; /*  Math.sin(Latitude)  */\n  var Sin2_Lat; /*  Square of Math.sin(Latitude)  */\n  var Cos_Lat; /*  Math.cos(Latitude)  */\n\n  /*\n   ** Don't blow up if Latitude is just a little out of the value\n   ** range as it may just be a rounding issue.  Also removed longitude\n   ** test, it should be wrapped by Math.cos() and Math.sin().  NFW for PROJ.4, Sep/2001.\n   */\n  if (Latitude < -HALF_PI && Latitude > -1.001 * HALF_PI) {\n    Latitude = -HALF_PI;\n  } else if (Latitude > HALF_PI && Latitude < 1.001 * HALF_PI) {\n    Latitude = HALF_PI;\n  } else if (Latitude < -HALF_PI) {\n    /* Latitude out of range */\n    //..reportError('geocent:lat out of range:' + Latitude);\n    return { x: -Infinity, y: -Infinity, z: p.z };\n  } else if (Latitude > HALF_PI) {\n    /* Latitude out of range */\n    return { x: Infinity, y: Infinity, z: p.z };\n  }\n\n  if (Longitude > Math.PI) {\n    Longitude -= (2 * Math.PI);\n  }\n  Sin_Lat = Math.sin(Latitude);\n  Cos_Lat = Math.cos(Latitude);\n  Sin2_Lat = Sin_Lat * Sin_Lat;\n  Rn = a / (Math.sqrt(1.0e0 - es * Sin2_Lat));\n  return {\n    x: (Rn + Height) * Cos_Lat * Math.cos(Longitude),\n    y: (Rn + Height) * Cos_Lat * Math.sin(Longitude),\n    z: ((Rn * (1 - es)) + Height) * Sin_Lat\n  };\n} // cs_geodetic_to_geocentric()\n\nexport function geocentricToGeodetic(p, es, a, b) {\n  /* local defintions and variables */\n  /* end-criterium of loop, accuracy of sin(Latitude) */\n  var genau = 1e-12;\n  var genau2 = (genau * genau);\n  var maxiter = 30;\n\n  var P; /* distance between semi-minor axis and location */\n  var RR; /* distance between center and location */\n  var CT; /* sin of geocentric latitude */\n  var ST; /* cos of geocentric latitude */\n  var RX;\n  var RK;\n  var RN; /* Earth radius at location */\n  var CPHI0; /* cos of start or old geodetic latitude in iterations */\n  var SPHI0; /* sin of start or old geodetic latitude in iterations */\n  var CPHI; /* cos of searched geodetic latitude */\n  var SPHI; /* sin of searched geodetic latitude */\n  var SDPHI; /* end-criterium: addition-theorem of sin(Latitude(iter)-Latitude(iter-1)) */\n  var iter; /* # of continous iteration, max. 30 is always enough (s.a.) */\n\n  var X = p.x;\n  var Y = p.y;\n  var Z = p.z ? p.z : 0.0; //Z value not always supplied\n  var Longitude;\n  var Latitude;\n  var Height;\n\n  P = Math.sqrt(X * X + Y * Y);\n  RR = Math.sqrt(X * X + Y * Y + Z * Z);\n\n  /*      special cases for latitude and longitude */\n  if (P / a < genau) {\n\n    /*  special case, if P=0. (X=0., Y=0.) */\n    Longitude = 0.0;\n\n    /*  if (X,Y,Z)=(0.,0.,0.) then Height becomes semi-minor axis\n     *  of ellipsoid (=center of mass), Latitude becomes PI/2 */\n    if (RR / a < genau) {\n      Latitude = HALF_PI;\n      Height = -b;\n      return {\n        x: p.x,\n        y: p.y,\n        z: p.z\n      };\n    }\n  } else {\n    /*  ellipsoidal (geodetic) longitude\n     *  interval: -PI < Longitude <= +PI */\n    Longitude = Math.atan2(Y, X);\n  }\n\n  /* --------------------------------------------------------------\n   * Following iterative algorithm was developped by\n   * \"Institut for Erdmessung\", University of Hannover, July 1988.\n   * Internet: www.ife.uni-hannover.de\n   * Iterative computation of CPHI,SPHI and Height.\n   * Iteration of CPHI and SPHI to 10**-12 radian resp.\n   * 2*10**-7 arcsec.\n   * --------------------------------------------------------------\n   */\n  CT = Z / RR;\n  ST = P / RR;\n  RX = 1.0 / Math.sqrt(1.0 - es * (2.0 - es) * ST * ST);\n  CPHI0 = ST * (1.0 - es) * RX;\n  SPHI0 = CT * RX;\n  iter = 0;\n\n  /* loop to find sin(Latitude) resp. Latitude\n   * until |sin(Latitude(iter)-Latitude(iter-1))| < genau */\n  do {\n    iter++;\n    RN = a / Math.sqrt(1.0 - es * SPHI0 * SPHI0);\n\n    /*  ellipsoidal (geodetic) height */\n    Height = P * CPHI0 + Z * SPHI0 - RN * (1.0 - es * SPHI0 * SPHI0);\n\n    RK = es * RN / (RN + Height);\n    RX = 1.0 / Math.sqrt(1.0 - RK * (2.0 - RK) * ST * ST);\n    CPHI = ST * (1.0 - RK) * RX;\n    SPHI = CT * RX;\n    SDPHI = SPHI * CPHI0 - CPHI * SPHI0;\n    CPHI0 = CPHI;\n    SPHI0 = SPHI;\n  }\n  while (SDPHI * SDPHI > genau2 && iter < maxiter);\n\n  /*      ellipsoidal (geodetic) latitude */\n  Latitude = Math.atan(SPHI / Math.abs(CPHI));\n  return {\n    x: Longitude,\n    y: Latitude,\n    z: Height\n  };\n} // cs_geocentric_to_geodetic()\n\n/****************************************************************/\n// pj_geocentic_to_wgs84( p )\n//  p = point to transform in geocentric coordinates (x,y,z)\n\n\n/** point object, nothing fancy, just allows values to be\n    passed back and forth by reference rather than by value.\n    Other point classes may be used as long as they have\n    x and y properties, which will get modified in the transform method.\n*/\nexport function geocentricToWgs84(p, datum_type, datum_params) {\n\n  if (datum_type === PJD_3PARAM) {\n    // if( x[io] === HUGE_VAL )\n    //    continue;\n    return {\n      x: p.x + datum_params[0],\n      y: p.y + datum_params[1],\n      z: p.z + datum_params[2],\n    };\n  } else if (datum_type === PJD_7PARAM) {\n    var Dx_BF = datum_params[0];\n    var Dy_BF = datum_params[1];\n    var Dz_BF = datum_params[2];\n    var Rx_BF = datum_params[3];\n    var Ry_BF = datum_params[4];\n    var Rz_BF = datum_params[5];\n    var M_BF = datum_params[6];\n    // if( x[io] === HUGE_VAL )\n    //    continue;\n    return {\n      x: M_BF * (p.x - Rz_BF * p.y + Ry_BF * p.z) + Dx_BF,\n      y: M_BF * (Rz_BF * p.x + p.y - Rx_BF * p.z) + Dy_BF,\n      z: M_BF * (-Ry_BF * p.x + Rx_BF * p.y + p.z) + Dz_BF\n    };\n  }\n} // cs_geocentric_to_wgs84\n\n/****************************************************************/\n// pj_geocentic_from_wgs84()\n//  coordinate system definition,\n//  point to transform in geocentric coordinates (x,y,z)\nexport function geocentricFromWgs84(p, datum_type, datum_params) {\n\n  if (datum_type === PJD_3PARAM) {\n    //if( x[io] === HUGE_VAL )\n    //    continue;\n    return {\n      x: p.x - datum_params[0],\n      y: p.y - datum_params[1],\n      z: p.z - datum_params[2],\n    };\n\n  } else if (datum_type === PJD_7PARAM) {\n    var Dx_BF = datum_params[0];\n    var Dy_BF = datum_params[1];\n    var Dz_BF = datum_params[2];\n    var Rx_BF = datum_params[3];\n    var Ry_BF = datum_params[4];\n    var Rz_BF = datum_params[5];\n    var M_BF = datum_params[6];\n    var x_tmp = (p.x - Dx_BF) / M_BF;\n    var y_tmp = (p.y - Dy_BF) / M_BF;\n    var z_tmp = (p.z - Dz_BF) / M_BF;\n    //if( x[io] === HUGE_VAL )\n    //    continue;\n\n    return {\n      x: x_tmp + Rz_BF * y_tmp - Ry_BF * z_tmp,\n      y: -Rz_BF * x_tmp + y_tmp + Rx_BF * z_tmp,\n      z: Ry_BF * x_tmp - Rx_BF * y_tmp + z_tmp\n    };\n  } //cs_geocentric_from_wgs84()\n}\n","export default function(crs, denorm, point) {\n  var xin = point.x,\n    yin = point.y,\n    zin = point.z || 0.0;\n  var v, t, i;\n  var out = {};\n  for (i = 0; i < 3; i++) {\n    if (denorm && i === 2 && point.z === undefined) {\n      continue;\n    }\n    if (i === 0) {\n      v = xin;\n      t = 'x';\n    }\n    else if (i === 1) {\n      v = yin;\n      t = 'y';\n    }\n    else {\n      v = zin;\n      t = 'z';\n    }\n    switch (crs.axis[i]) {\n    case 'e':\n      out[t] = v;\n      break;\n    case 'w':\n      out[t] = -v;\n      break;\n    case 'n':\n      out[t] = v;\n      break;\n    case 's':\n      out[t] = -v;\n      break;\n    case 'u':\n      if (point[t] !== undefined) {\n        out.z = v;\n      }\n      break;\n    case 'd':\n      if (point[t] !== undefined) {\n        out.z = -v;\n      }\n      break;\n    default:\n      //console.log(\"ERROR: unknow axis (\"+crs.axis[i]+\") - check definition of \"+crs.projName);\n      return null;\n    }\n  }\n  return out;\n}\n","export default function (array){\n  var out = {\n    x: array[0],\n    y: array[1]\n  };\n  if (array.length>2) {\n    out.z = array[2];\n  }\n  if (array.length>3) {\n    out.m = array[3];\n  }\n  return out;\n}","export default function (point) {\n  checkCoord(point.x);\n  checkCoord(point.y);\n}\nfunction checkCoord(num) {\n  if (typeof Number.isFinite === 'function') {\n    if (Number.isFinite(num)) {\n      return;\n    }\n    throw new TypeError('coordinates must be finite numbers');\n  }\n  if (typeof num !== 'number' || num !== num || !isFinite(num)) {\n    throw new TypeError('coordinates must be finite numbers');\n  }\n}\n","import {D2R, R2D, PJD_3PARAM, PJD_7PARAM} from './constants/values';\nimport datum_transform from './datum_transform';\nimport adjust_axis from './adjust_axis';\nimport proj from './Proj';\nimport toPoint from './common/toPoint';\nimport checkSanity from './checkSanity';\n\nfunction checkNotWGS(source, dest) {\n  return ((source.datum.datum_type === PJD_3PARAM || source.datum.datum_type === PJD_7PARAM) && dest.datumCode !== 'WGS84') || ((dest.datum.datum_type === PJD_3PARAM || dest.datum.datum_type === PJD_7PARAM) && source.datumCode !== 'WGS84');\n}\n\nexport default function transform(source, dest, point) {\n  var wgs84;\n  if (Array.isArray(point)) {\n    point = toPoint(point);\n  }\n  checkSanity(point);\n  // Workaround for datum shifts towgs84, if either source or destination projection is not wgs84\n  if (source.datum && dest.datum && checkNotWGS(source, dest)) {\n    wgs84 = new proj('WGS84');\n    point = transform(source, wgs84, point);\n    source = wgs84;\n  }\n  // DGR, 2010/11/12\n  if (source.axis !== 'enu') {\n    point = adjust_axis(source, false, point);\n  }\n  // Transform source points to long/lat, if they aren't already.\n  if (source.projName === 'longlat') {\n    point = {\n      x: point.x * D2R,\n      y: point.y * D2R\n    };\n  }\n  else {\n    if (source.to_meter) {\n      point = {\n        x: point.x * source.to_meter,\n        y: point.y * source.to_meter\n      };\n    }\n    point = source.inverse(point); // Convert Cartesian to longlat\n  }\n  // Adjust for the prime meridian if necessary\n  if (source.from_greenwich) {\n    point.x += source.from_greenwich;\n  }\n\n  // Convert datums if needed, and if possible.\n  point = datum_transform(source.datum, dest.datum, point);\n\n  // Adjust for the prime meridian if necessary\n  if (dest.from_greenwich) {\n    point = {\n      x: point.x - dest.from_greenwich,\n      y: point.y\n    };\n  }\n\n  if (dest.projName === 'longlat') {\n    // convert radians to decimal degrees\n    point = {\n      x: point.x * R2D,\n      y: point.y * R2D\n    };\n  } else { // else project\n    point = dest.forward(point);\n    if (dest.to_meter) {\n      point = {\n        x: point.x / dest.to_meter,\n        y: point.y / dest.to_meter\n      };\n    }\n  }\n\n  // DGR, 2010/11/12\n  if (dest.axis !== 'enu') {\n    return adjust_axis(dest, true, point);\n  }\n\n  return point;\n}\n","import proj from './Proj';\nimport transform from './transform';\nvar wgs84 = proj('WGS84');\n\nfunction transformer(from, to, coords) {\n  var transformedArray, out, keys;\n  if (Array.isArray(coords)) {\n    transformedArray = transform(from, to, coords);\n    if (coords.length === 3) {\n      return [transformedArray.x, transformedArray.y, transformedArray.z];\n    }\n    else {\n      return [transformedArray.x, transformedArray.y];\n    }\n  }\n  else {\n    out = transform(from, to, coords);\n    keys = Object.keys(coords);\n    if (keys.length === 2) {\n      return out;\n    }\n    keys.forEach(function (key) {\n      if (key === 'x' || key === 'y') {\n        return;\n      }\n      out[key] = coords[key];\n    });\n    return out;\n  }\n}\n\nfunction checkProj(item) {\n  if (item instanceof proj) {\n    return item;\n  }\n  if (item.oProj) {\n    return item.oProj;\n  }\n  return proj(item);\n}\nfunction proj4(fromProj, toProj, coord) {\n  fromProj = checkProj(fromProj);\n  var single = false;\n  var obj;\n  if (typeof toProj === 'undefined') {\n    toProj = fromProj;\n    fromProj = wgs84;\n    single = true;\n  }\n  else if (typeof toProj.x !== 'undefined' || Array.isArray(toProj)) {\n    coord = toProj;\n    toProj = fromProj;\n    fromProj = wgs84;\n    single = true;\n  }\n  toProj = checkProj(toProj);\n  if (coord) {\n    return transformer(fromProj, toProj, coord);\n  }\n  else {\n    obj = {\n      forward: function(coords) {\n        return transformer(fromProj, toProj, coords);\n      },\n      inverse: function(coords) {\n        return transformer(toProj, fromProj, coords);\n      }\n    };\n    if (single) {\n      obj.oProj = toProj;\n    }\n    return obj;\n  }\n}\nexport default proj4;\n","\n\n\n/**\n * UTM zones are grouped, and assigned to one of a group of 6\n * sets.\n *\n * {int} @private\n */\nvar NUM_100K_SETS = 6;\n\n/**\n * The column letters (for easting) of the lower left value, per\n * set.\n *\n * {string} @private\n */\nvar SET_ORIGIN_COLUMN_LETTERS = 'AJSAJS';\n\n/**\n * The row letters (for northing) of the lower left value, per\n * set.\n *\n * {string} @private\n */\nvar SET_ORIGIN_ROW_LETTERS = 'AFAFAF';\n\nvar A = 65; // A\nvar I = 73; // I\nvar O = 79; // O\nvar V = 86; // V\nvar Z = 90; // Z\nexport default {\n  forward: forward,\n  inverse: inverse,\n  toPoint: toPoint\n};\n/**\n * Conversion of lat/lon to MGRS.\n *\n * @param {object} ll Object literal with lat and lon properties on a\n *     WGS84 ellipsoid.\n * @param {int} accuracy Accuracy in digits (5 for 1 m, 4 for 10 m, 3 for\n *      100 m, 2 for 1000 m or 1 for 10000 m). Optional, default is 5.\n * @return {string} the MGRS string for the given location and accuracy.\n */\nexport function forward(ll, accuracy) {\n  accuracy = accuracy || 5; // default accuracy 1m\n  return encode(LLtoUTM({\n    lat: ll[1],\n    lon: ll[0]\n  }), accuracy);\n};\n\n/**\n * Conversion of MGRS to lat/lon.\n *\n * @param {string} mgrs MGRS string.\n * @return {array} An array with left (longitude), bottom (latitude), right\n *     (longitude) and top (latitude) values in WGS84, representing the\n *     bounding box for the provided MGRS reference.\n */\nexport function inverse(mgrs) {\n  var bbox = UTMtoLL(decode(mgrs.toUpperCase()));\n  if (bbox.lat && bbox.lon) {\n    return [bbox.lon, bbox.lat, bbox.lon, bbox.lat];\n  }\n  return [bbox.left, bbox.bottom, bbox.right, bbox.top];\n};\n\nexport function toPoint(mgrs) {\n  var bbox = UTMtoLL(decode(mgrs.toUpperCase()));\n  if (bbox.lat && bbox.lon) {\n    return [bbox.lon, bbox.lat];\n  }\n  return [(bbox.left + bbox.right) / 2, (bbox.top + bbox.bottom) / 2];\n};\n/**\n * Conversion from degrees to radians.\n *\n * @private\n * @param {number} deg the angle in degrees.\n * @return {number} the angle in radians.\n */\nfunction degToRad(deg) {\n  return (deg * (Math.PI / 180.0));\n}\n\n/**\n * Conversion from radians to degrees.\n *\n * @private\n * @param {number} rad the angle in radians.\n * @return {number} the angle in degrees.\n */\nfunction radToDeg(rad) {\n  return (180.0 * (rad / Math.PI));\n}\n\n/**\n * Converts a set of Longitude and Latitude co-ordinates to UTM\n * using the WGS84 ellipsoid.\n *\n * @private\n * @param {object} ll Object literal with lat and lon properties\n *     representing the WGS84 coordinate to be converted.\n * @return {object} Object literal containing the UTM value with easting,\n *     northing, zoneNumber and zoneLetter properties, and an optional\n *     accuracy property in digits. Returns null if the conversion failed.\n */\nfunction LLtoUTM(ll) {\n  var Lat = ll.lat;\n  var Long = ll.lon;\n  var a = 6378137.0; //ellip.radius;\n  var eccSquared = 0.00669438; //ellip.eccsq;\n  var k0 = 0.9996;\n  var LongOrigin;\n  var eccPrimeSquared;\n  var N, T, C, A, M;\n  var LatRad = degToRad(Lat);\n  var LongRad = degToRad(Long);\n  var LongOriginRad;\n  var ZoneNumber;\n  // (int)\n  ZoneNumber = Math.floor((Long + 180) / 6) + 1;\n\n  //Make sure the longitude 180.00 is in Zone 60\n  if (Long === 180) {\n    ZoneNumber = 60;\n  }\n\n  // Special zone for Norway\n  if (Lat >= 56.0 && Lat < 64.0 && Long >= 3.0 && Long < 12.0) {\n    ZoneNumber = 32;\n  }\n\n  // Special zones for Svalbard\n  if (Lat >= 72.0 && Lat < 84.0) {\n    if (Long >= 0.0 && Long < 9.0) {\n      ZoneNumber = 31;\n    }\n    else if (Long >= 9.0 && Long < 21.0) {\n      ZoneNumber = 33;\n    }\n    else if (Long >= 21.0 && Long < 33.0) {\n      ZoneNumber = 35;\n    }\n    else if (Long >= 33.0 && Long < 42.0) {\n      ZoneNumber = 37;\n    }\n  }\n\n  LongOrigin = (ZoneNumber - 1) * 6 - 180 + 3; //+3 puts origin\n  // in middle of\n  // zone\n  LongOriginRad = degToRad(LongOrigin);\n\n  eccPrimeSquared = (eccSquared) / (1 - eccSquared);\n\n  N = a / Math.sqrt(1 - eccSquared * Math.sin(LatRad) * Math.sin(LatRad));\n  T = Math.tan(LatRad) * Math.tan(LatRad);\n  C = eccPrimeSquared * Math.cos(LatRad) * Math.cos(LatRad);\n  A = Math.cos(LatRad) * (LongRad - LongOriginRad);\n\n  M = a * ((1 - eccSquared / 4 - 3 * eccSquared * eccSquared / 64 - 5 * eccSquared * eccSquared * eccSquared / 256) * LatRad - (3 * eccSquared / 8 + 3 * eccSquared * eccSquared / 32 + 45 * eccSquared * eccSquared * eccSquared / 1024) * Math.sin(2 * LatRad) + (15 * eccSquared * eccSquared / 256 + 45 * eccSquared * eccSquared * eccSquared / 1024) * Math.sin(4 * LatRad) - (35 * eccSquared * eccSquared * eccSquared / 3072) * Math.sin(6 * LatRad));\n\n  var UTMEasting = (k0 * N * (A + (1 - T + C) * A * A * A / 6.0 + (5 - 18 * T + T * T + 72 * C - 58 * eccPrimeSquared) * A * A * A * A * A / 120.0) + 500000.0);\n\n  var UTMNorthing = (k0 * (M + N * Math.tan(LatRad) * (A * A / 2 + (5 - T + 9 * C + 4 * C * C) * A * A * A * A / 24.0 + (61 - 58 * T + T * T + 600 * C - 330 * eccPrimeSquared) * A * A * A * A * A * A / 720.0)));\n  if (Lat < 0.0) {\n    UTMNorthing += 10000000.0; //10000000 meter offset for\n    // southern hemisphere\n  }\n\n  return {\n    northing: Math.round(UTMNorthing),\n    easting: Math.round(UTMEasting),\n    zoneNumber: ZoneNumber,\n    zoneLetter: getLetterDesignator(Lat)\n  };\n}\n\n/**\n * Converts UTM coords to lat/long, using the WGS84 ellipsoid. This is a convenience\n * class where the Zone can be specified as a single string eg.\"60N\" which\n * is then broken down into the ZoneNumber and ZoneLetter.\n *\n * @private\n * @param {object} utm An object literal with northing, easting, zoneNumber\n *     and zoneLetter properties. If an optional accuracy property is\n *     provided (in meters), a bounding box will be returned instead of\n *     latitude and longitude.\n * @return {object} An object literal containing either lat and lon values\n *     (if no accuracy was provided), or top, right, bottom and left values\n *     for the bounding box calculated according to the provided accuracy.\n *     Returns null if the conversion failed.\n */\nfunction UTMtoLL(utm) {\n\n  var UTMNorthing = utm.northing;\n  var UTMEasting = utm.easting;\n  var zoneLetter = utm.zoneLetter;\n  var zoneNumber = utm.zoneNumber;\n  // check the ZoneNummber is valid\n  if (zoneNumber < 0 || zoneNumber > 60) {\n    return null;\n  }\n\n  var k0 = 0.9996;\n  var a = 6378137.0; //ellip.radius;\n  var eccSquared = 0.00669438; //ellip.eccsq;\n  var eccPrimeSquared;\n  var e1 = (1 - Math.sqrt(1 - eccSquared)) / (1 + Math.sqrt(1 - eccSquared));\n  var N1, T1, C1, R1, D, M;\n  var LongOrigin;\n  var mu, phi1Rad;\n\n  // remove 500,000 meter offset for longitude\n  var x = UTMEasting - 500000.0;\n  var y = UTMNorthing;\n\n  // We must know somehow if we are in the Northern or Southern\n  // hemisphere, this is the only time we use the letter So even\n  // if the Zone letter isn't exactly correct it should indicate\n  // the hemisphere correctly\n  if (zoneLetter < 'N') {\n    y -= 10000000.0; // remove 10,000,000 meter offset used\n    // for southern hemisphere\n  }\n\n  // There are 60 zones with zone 1 being at West -180 to -174\n  LongOrigin = (zoneNumber - 1) * 6 - 180 + 3; // +3 puts origin\n  // in middle of\n  // zone\n\n  eccPrimeSquared = (eccSquared) / (1 - eccSquared);\n\n  M = y / k0;\n  mu = M / (a * (1 - eccSquared / 4 - 3 * eccSquared * eccSquared / 64 - 5 * eccSquared * eccSquared * eccSquared / 256));\n\n  phi1Rad = mu + (3 * e1 / 2 - 27 * e1 * e1 * e1 / 32) * Math.sin(2 * mu) + (21 * e1 * e1 / 16 - 55 * e1 * e1 * e1 * e1 / 32) * Math.sin(4 * mu) + (151 * e1 * e1 * e1 / 96) * Math.sin(6 * mu);\n  // double phi1 = ProjMath.radToDeg(phi1Rad);\n\n  N1 = a / Math.sqrt(1 - eccSquared * Math.sin(phi1Rad) * Math.sin(phi1Rad));\n  T1 = Math.tan(phi1Rad) * Math.tan(phi1Rad);\n  C1 = eccPrimeSquared * Math.cos(phi1Rad) * Math.cos(phi1Rad);\n  R1 = a * (1 - eccSquared) / Math.pow(1 - eccSquared * Math.sin(phi1Rad) * Math.sin(phi1Rad), 1.5);\n  D = x / (N1 * k0);\n\n  var lat = phi1Rad - (N1 * Math.tan(phi1Rad) / R1) * (D * D / 2 - (5 + 3 * T1 + 10 * C1 - 4 * C1 * C1 - 9 * eccPrimeSquared) * D * D * D * D / 24 + (61 + 90 * T1 + 298 * C1 + 45 * T1 * T1 - 252 * eccPrimeSquared - 3 * C1 * C1) * D * D * D * D * D * D / 720);\n  lat = radToDeg(lat);\n\n  var lon = (D - (1 + 2 * T1 + C1) * D * D * D / 6 + (5 - 2 * C1 + 28 * T1 - 3 * C1 * C1 + 8 * eccPrimeSquared + 24 * T1 * T1) * D * D * D * D * D / 120) / Math.cos(phi1Rad);\n  lon = LongOrigin + radToDeg(lon);\n\n  var result;\n  if (utm.accuracy) {\n    var topRight = UTMtoLL({\n      northing: utm.northing + utm.accuracy,\n      easting: utm.easting + utm.accuracy,\n      zoneLetter: utm.zoneLetter,\n      zoneNumber: utm.zoneNumber\n    });\n    result = {\n      top: topRight.lat,\n      right: topRight.lon,\n      bottom: lat,\n      left: lon\n    };\n  }\n  else {\n    result = {\n      lat: lat,\n      lon: lon\n    };\n  }\n  return result;\n}\n\n/**\n * Calculates the MGRS letter designator for the given latitude.\n *\n * @private\n * @param {number} lat The latitude in WGS84 to get the letter designator\n *     for.\n * @return {char} The letter designator.\n */\nfunction getLetterDesignator(lat) {\n  //This is here as an error flag to show that the Latitude is\n  //outside MGRS limits\n  var LetterDesignator = 'Z';\n\n  if ((84 >= lat) && (lat >= 72)) {\n    LetterDesignator = 'X';\n  }\n  else if ((72 > lat) && (lat >= 64)) {\n    LetterDesignator = 'W';\n  }\n  else if ((64 > lat) && (lat >= 56)) {\n    LetterDesignator = 'V';\n  }\n  else if ((56 > lat) && (lat >= 48)) {\n    LetterDesignator = 'U';\n  }\n  else if ((48 > lat) && (lat >= 40)) {\n    LetterDesignator = 'T';\n  }\n  else if ((40 > lat) && (lat >= 32)) {\n    LetterDesignator = 'S';\n  }\n  else if ((32 > lat) && (lat >= 24)) {\n    LetterDesignator = 'R';\n  }\n  else if ((24 > lat) && (lat >= 16)) {\n    LetterDesignator = 'Q';\n  }\n  else if ((16 > lat) && (lat >= 8)) {\n    LetterDesignator = 'P';\n  }\n  else if ((8 > lat) && (lat >= 0)) {\n    LetterDesignator = 'N';\n  }\n  else if ((0 > lat) && (lat >= -8)) {\n    LetterDesignator = 'M';\n  }\n  else if ((-8 > lat) && (lat >= -16)) {\n    LetterDesignator = 'L';\n  }\n  else if ((-16 > lat) && (lat >= -24)) {\n    LetterDesignator = 'K';\n  }\n  else if ((-24 > lat) && (lat >= -32)) {\n    LetterDesignator = 'J';\n  }\n  else if ((-32 > lat) && (lat >= -40)) {\n    LetterDesignator = 'H';\n  }\n  else if ((-40 > lat) && (lat >= -48)) {\n    LetterDesignator = 'G';\n  }\n  else if ((-48 > lat) && (lat >= -56)) {\n    LetterDesignator = 'F';\n  }\n  else if ((-56 > lat) && (lat >= -64)) {\n    LetterDesignator = 'E';\n  }\n  else if ((-64 > lat) && (lat >= -72)) {\n    LetterDesignator = 'D';\n  }\n  else if ((-72 > lat) && (lat >= -80)) {\n    LetterDesignator = 'C';\n  }\n  return LetterDesignator;\n}\n\n/**\n * Encodes a UTM location as MGRS string.\n *\n * @private\n * @param {object} utm An object literal with easting, northing,\n *     zoneLetter, zoneNumber\n * @param {number} accuracy Accuracy in digits (1-5).\n * @return {string} MGRS string for the given UTM location.\n */\nfunction encode(utm, accuracy) {\n  // prepend with leading zeroes\n  var seasting = \"00000\" + utm.easting,\n    snorthing = \"00000\" + utm.northing;\n\n  return utm.zoneNumber + utm.zoneLetter + get100kID(utm.easting, utm.northing, utm.zoneNumber) + seasting.substr(seasting.length - 5, accuracy) + snorthing.substr(snorthing.length - 5, accuracy);\n}\n\n/**\n * Get the two letter 100k designator for a given UTM easting,\n * northing and zone number value.\n *\n * @private\n * @param {number} easting\n * @param {number} northing\n * @param {number} zoneNumber\n * @return the two letter 100k designator for the given UTM location.\n */\nfunction get100kID(easting, northing, zoneNumber) {\n  var setParm = get100kSetForZone(zoneNumber);\n  var setColumn = Math.floor(easting / 100000);\n  var setRow = Math.floor(northing / 100000) % 20;\n  return getLetter100kID(setColumn, setRow, setParm);\n}\n\n/**\n * Given a UTM zone number, figure out the MGRS 100K set it is in.\n *\n * @private\n * @param {number} i An UTM zone number.\n * @return {number} the 100k set the UTM zone is in.\n */\nfunction get100kSetForZone(i) {\n  var setParm = i % NUM_100K_SETS;\n  if (setParm === 0) {\n    setParm = NUM_100K_SETS;\n  }\n\n  return setParm;\n}\n\n/**\n * Get the two-letter MGRS 100k designator given information\n * translated from the UTM northing, easting and zone number.\n *\n * @private\n * @param {number} column the column index as it relates to the MGRS\n *        100k set spreadsheet, created from the UTM easting.\n *        Values are 1-8.\n * @param {number} row the row index as it relates to the MGRS 100k set\n *        spreadsheet, created from the UTM northing value. Values\n *        are from 0-19.\n * @param {number} parm the set block, as it relates to the MGRS 100k set\n *        spreadsheet, created from the UTM zone. Values are from\n *        1-60.\n * @return two letter MGRS 100k code.\n */\nfunction getLetter100kID(column, row, parm) {\n  // colOrigin and rowOrigin are the letters at the origin of the set\n  var index = parm - 1;\n  var colOrigin = SET_ORIGIN_COLUMN_LETTERS.charCodeAt(index);\n  var rowOrigin = SET_ORIGIN_ROW_LETTERS.charCodeAt(index);\n\n  // colInt and rowInt are the letters to build to return\n  var colInt = colOrigin + column - 1;\n  var rowInt = rowOrigin + row;\n  var rollover = false;\n\n  if (colInt > Z) {\n    colInt = colInt - Z + A - 1;\n    rollover = true;\n  }\n\n  if (colInt === I || (colOrigin < I && colInt > I) || ((colInt > I || colOrigin < I) && rollover)) {\n    colInt++;\n  }\n\n  if (colInt === O || (colOrigin < O && colInt > O) || ((colInt > O || colOrigin < O) && rollover)) {\n    colInt++;\n\n    if (colInt === I) {\n      colInt++;\n    }\n  }\n\n  if (colInt > Z) {\n    colInt = colInt - Z + A - 1;\n  }\n\n  if (rowInt > V) {\n    rowInt = rowInt - V + A - 1;\n    rollover = true;\n  }\n  else {\n    rollover = false;\n  }\n\n  if (((rowInt === I) || ((rowOrigin < I) && (rowInt > I))) || (((rowInt > I) || (rowOrigin < I)) && rollover)) {\n    rowInt++;\n  }\n\n  if (((rowInt === O) || ((rowOrigin < O) && (rowInt > O))) || (((rowInt > O) || (rowOrigin < O)) && rollover)) {\n    rowInt++;\n\n    if (rowInt === I) {\n      rowInt++;\n    }\n  }\n\n  if (rowInt > V) {\n    rowInt = rowInt - V + A - 1;\n  }\n\n  var twoLetter = String.fromCharCode(colInt) + String.fromCharCode(rowInt);\n  return twoLetter;\n}\n\n/**\n * Decode the UTM parameters from a MGRS string.\n *\n * @private\n * @param {string} mgrsString an UPPERCASE coordinate string is expected.\n * @return {object} An object literal with easting, northing, zoneLetter,\n *     zoneNumber and accuracy (in meters) properties.\n */\nfunction decode(mgrsString) {\n\n  if (mgrsString && mgrsString.length === 0) {\n    throw (\"MGRSPoint coverting from nothing\");\n  }\n\n  var length = mgrsString.length;\n\n  var hunK = null;\n  var sb = \"\";\n  var testChar;\n  var i = 0;\n\n  // get Zone number\n  while (!(/[A-Z]/).test(testChar = mgrsString.charAt(i))) {\n    if (i >= 2) {\n      throw (\"MGRSPoint bad conversion from: \" + mgrsString);\n    }\n    sb += testChar;\n    i++;\n  }\n\n  var zoneNumber = parseInt(sb, 10);\n\n  if (i === 0 || i + 3 > length) {\n    // A good MGRS string has to be 4-5 digits long,\n    // ##AAA/#AAA at least.\n    throw (\"MGRSPoint bad conversion from: \" + mgrsString);\n  }\n\n  var zoneLetter = mgrsString.charAt(i++);\n\n  // Should we check the zone letter here? Why not.\n  if (zoneLetter <= 'A' || zoneLetter === 'B' || zoneLetter === 'Y' || zoneLetter >= 'Z' || zoneLetter === 'I' || zoneLetter === 'O') {\n    throw (\"MGRSPoint zone letter \" + zoneLetter + \" not handled: \" + mgrsString);\n  }\n\n  hunK = mgrsString.substring(i, i += 2);\n\n  var set = get100kSetForZone(zoneNumber);\n\n  var east100k = getEastingFromChar(hunK.charAt(0), set);\n  var north100k = getNorthingFromChar(hunK.charAt(1), set);\n\n  // We have a bug where the northing may be 2000000 too low.\n  // How\n  // do we know when to roll over?\n\n  while (north100k < getMinNorthing(zoneLetter)) {\n    north100k += 2000000;\n  }\n\n  // calculate the char index for easting/northing separator\n  var remainder = length - i;\n\n  if (remainder % 2 !== 0) {\n    throw (\"MGRSPoint has to have an even number \\nof digits after the zone letter and two 100km letters - front \\nhalf for easting meters, second half for \\nnorthing meters\" + mgrsString);\n  }\n\n  var sep = remainder / 2;\n\n  var sepEasting = 0.0;\n  var sepNorthing = 0.0;\n  var accuracyBonus, sepEastingString, sepNorthingString, easting, northing;\n  if (sep > 0) {\n    accuracyBonus = 100000.0 / Math.pow(10, sep);\n    sepEastingString = mgrsString.substring(i, i + sep);\n    sepEasting = parseFloat(sepEastingString) * accuracyBonus;\n    sepNorthingString = mgrsString.substring(i + sep);\n    sepNorthing = parseFloat(sepNorthingString) * accuracyBonus;\n  }\n\n  easting = sepEasting + east100k;\n  northing = sepNorthing + north100k;\n\n  return {\n    easting: easting,\n    northing: northing,\n    zoneLetter: zoneLetter,\n    zoneNumber: zoneNumber,\n    accuracy: accuracyBonus\n  };\n}\n\n/**\n * Given the first letter from a two-letter MGRS 100k zone, and given the\n * MGRS table set for the zone number, figure out the easting value that\n * should be added to the other, secondary easting value.\n *\n * @private\n * @param {char} e The first letter from a two-letter MGRS 100´k zone.\n * @param {number} set The MGRS table set for the zone number.\n * @return {number} The easting value for the given letter and set.\n */\nfunction getEastingFromChar(e, set) {\n  // colOrigin is the letter at the origin of the set for the\n  // column\n  var curCol = SET_ORIGIN_COLUMN_LETTERS.charCodeAt(set - 1);\n  var eastingValue = 100000.0;\n  var rewindMarker = false;\n\n  while (curCol !== e.charCodeAt(0)) {\n    curCol++;\n    if (curCol === I) {\n      curCol++;\n    }\n    if (curCol === O) {\n      curCol++;\n    }\n    if (curCol > Z) {\n      if (rewindMarker) {\n        throw (\"Bad character: \" + e);\n      }\n      curCol = A;\n      rewindMarker = true;\n    }\n    eastingValue += 100000.0;\n  }\n\n  return eastingValue;\n}\n\n/**\n * Given the second letter from a two-letter MGRS 100k zone, and given the\n * MGRS table set for the zone number, figure out the northing value that\n * should be added to the other, secondary northing value. You have to\n * remember that Northings are determined from the equator, and the vertical\n * cycle of letters mean a 2000000 additional northing meters. This happens\n * approx. every 18 degrees of latitude. This method does *NOT* count any\n * additional northings. You have to figure out how many 2000000 meters need\n * to be added for the zone letter of the MGRS coordinate.\n *\n * @private\n * @param {char} n Second letter of the MGRS 100k zone\n * @param {number} set The MGRS table set number, which is dependent on the\n *     UTM zone number.\n * @return {number} The northing value for the given letter and set.\n */\nfunction getNorthingFromChar(n, set) {\n\n  if (n > 'V') {\n    throw (\"MGRSPoint given invalid Northing \" + n);\n  }\n\n  // rowOrigin is the letter at the origin of the set for the\n  // column\n  var curRow = SET_ORIGIN_ROW_LETTERS.charCodeAt(set - 1);\n  var northingValue = 0.0;\n  var rewindMarker = false;\n\n  while (curRow !== n.charCodeAt(0)) {\n    curRow++;\n    if (curRow === I) {\n      curRow++;\n    }\n    if (curRow === O) {\n      curRow++;\n    }\n    // fixing a bug making whole application hang in this loop\n    // when 'n' is a wrong character\n    if (curRow > V) {\n      if (rewindMarker) { // making sure that this loop ends\n        throw (\"Bad character: \" + n);\n      }\n      curRow = A;\n      rewindMarker = true;\n    }\n    northingValue += 100000.0;\n  }\n\n  return northingValue;\n}\n\n/**\n * The function getMinNorthing returns the minimum northing value of a MGRS\n * zone.\n *\n * Ported from Geotrans' c Lattitude_Band_Value structure table.\n *\n * @private\n * @param {char} zoneLetter The MGRS zone to get the min northing for.\n * @return {number}\n */\nfunction getMinNorthing(zoneLetter) {\n  var northing;\n  switch (zoneLetter) {\n  case 'C':\n    northing = 1100000.0;\n    break;\n  case 'D':\n    northing = 2000000.0;\n    break;\n  case 'E':\n    northing = 2800000.0;\n    break;\n  case 'F':\n    northing = 3700000.0;\n    break;\n  case 'G':\n    northing = 4600000.0;\n    break;\n  case 'H':\n    northing = 5500000.0;\n    break;\n  case 'J':\n    northing = 6400000.0;\n    break;\n  case 'K':\n    northing = 7300000.0;\n    break;\n  case 'L':\n    northing = 8200000.0;\n    break;\n  case 'M':\n    northing = 9100000.0;\n    break;\n  case 'N':\n    northing = 0.0;\n    break;\n  case 'P':\n    northing = 800000.0;\n    break;\n  case 'Q':\n    northing = 1700000.0;\n    break;\n  case 'R':\n    northing = 2600000.0;\n    break;\n  case 'S':\n    northing = 3500000.0;\n    break;\n  case 'T':\n    northing = 4400000.0;\n    break;\n  case 'U':\n    northing = 5300000.0;\n    break;\n  case 'V':\n    northing = 6200000.0;\n    break;\n  case 'W':\n    northing = 7000000.0;\n    break;\n  case 'X':\n    northing = 7900000.0;\n    break;\n  default:\n    northing = -1.0;\n  }\n  if (northing >= 0.0) {\n    return northing;\n  }\n  else {\n    throw (\"Invalid zone letter: \" + zoneLetter);\n  }\n\n}\n","import {toPoint, forward} from 'mgrs';\n\nfunction Point(x, y, z) {\n  if (!(this instanceof Point)) {\n    return new Point(x, y, z);\n  }\n  if (Array.isArray(x)) {\n    this.x = x[0];\n    this.y = x[1];\n    this.z = x[2] || 0.0;\n  } else if(typeof x === 'object') {\n    this.x = x.x;\n    this.y = x.y;\n    this.z = x.z || 0.0;\n  } else if (typeof x === 'string' && typeof y === 'undefined') {\n    var coords = x.split(',');\n    this.x = parseFloat(coords[0], 10);\n    this.y = parseFloat(coords[1], 10);\n    this.z = parseFloat(coords[2], 10) || 0.0;\n  } else {\n    this.x = x;\n    this.y = y;\n    this.z = z || 0.0;\n  }\n  console.warn('proj4.Point will be removed in version 3, use proj4.toPoint');\n}\n\nPoint.fromMGRS = function(mgrsStr) {\n  return new Point(toPoint(mgrsStr));\n};\nPoint.prototype.toMGRS = function(accuracy) {\n  return forward([this.x, this.y], accuracy);\n};\nexport default Point;\n","var C00 = 1;\nvar C02 = 0.25;\nvar C04 = 0.046875;\nvar C06 = 0.01953125;\nvar C08 = 0.01068115234375;\nvar C22 = 0.75;\nvar C44 = 0.46875;\nvar C46 = 0.01302083333333333333;\nvar C48 = 0.00712076822916666666;\nvar C66 = 0.36458333333333333333;\nvar C68 = 0.00569661458333333333;\nvar C88 = 0.3076171875;\n\nexport default function(es) {\n  var en = [];\n  en[0] = C00 - es * (C02 + es * (C04 + es * (C06 + es * C08)));\n  en[1] = es * (C22 - es * (C04 + es * (C06 + es * C08)));\n  var t = es * es;\n  en[2] = t * (C44 - es * (C46 + es * C48));\n  t *= es;\n  en[3] = t * (C66 - es * C68);\n  en[4] = t * es * C88;\n  return en;\n}","export default function(phi, sphi, cphi, en) {\n  cphi *= sphi;\n  sphi *= sphi;\n  return (en[0] * phi - cphi * (en[1] + sphi * (en[2] + sphi * (en[3] + sphi * en[4]))));\n}","import pj_mlfn from \"./pj_mlfn\";\nimport {EPSLN} from '../constants/values';\n\nvar MAX_ITER = 20;\n\nexport default function(arg, es, en) {\n  var k = 1 / (1 - es);\n  var phi = arg;\n  for (var i = MAX_ITER; i; --i) { /* rarely goes over 2 iterations */\n    var s = Math.sin(phi);\n    var t = 1 - es * s * s;\n    //t = this.pj_mlfn(phi, s, Math.cos(phi), en) - arg;\n    //phi -= t * (t * Math.sqrt(t)) * k;\n    t = (pj_mlfn(phi, s, Math.cos(phi), en) - arg) * (t * Math.sqrt(t)) * k;\n    phi -= t;\n    if (Math.abs(t) < EPSLN) {\n      return phi;\n    }\n  }\n  //..reportError(\"cass:pj_inv_mlfn: Convergence error\");\n  return phi;\n}\n","// Heavily based on this tmerc projection implementation\n// https://github.com/mbloch/mapshaper-proj/blob/master/src/projections/tmerc.js\n\nimport pj_enfn from '../common/pj_enfn';\nimport pj_mlfn from '../common/pj_mlfn';\nimport pj_inv_mlfn from '../common/pj_inv_mlfn';\nimport adjust_lon from '../common/adjust_lon';\n\nimport {EPSLN, HALF_PI} from '../constants/values';\nimport sign from '../common/sign';\n\nexport function init() {\n  this.x0 = this.x0 !== undefined ? this.x0 : 0;\n  this.y0 = this.y0 !== undefined ? this.y0 : 0;\n  this.long0 = this.long0 !== undefined ? this.long0 : 0;\n  this.lat0 = this.lat0 !== undefined ? this.lat0 : 0;\n\n  if (this.es) {\n    this.en = pj_enfn(this.es);\n    this.ml0 = pj_mlfn(this.lat0, Math.sin(this.lat0), Math.cos(this.lat0), this.en);\n  }\n}\n\n/**\n    Transverse Mercator Forward  - long/lat to x/y\n    long/lat in radians\n  */\nexport function forward(p) {\n  var lon = p.x;\n  var lat = p.y;\n\n  var delta_lon = adjust_lon(lon - this.long0);\n  var con;\n  var x, y;\n  var sin_phi = Math.sin(lat);\n  var cos_phi = Math.cos(lat);\n\n  if (!this.es) {\n    var b = cos_phi * Math.sin(delta_lon);\n\n    if ((Math.abs(Math.abs(b) - 1)) < EPSLN) {\n      return (93);\n    }\n    else {\n      x = 0.5 * this.a * this.k0 * Math.log((1 + b) / (1 - b)) + this.x0;\n      y = cos_phi * Math.cos(delta_lon) / Math.sqrt(1 - Math.pow(b, 2));\n      b = Math.abs(y);\n\n      if (b >= 1) {\n        if ((b - 1) > EPSLN) {\n          return (93);\n        }\n        else {\n          y = 0;\n        }\n      }\n      else {\n        y = Math.acos(y);\n      }\n\n      if (lat < 0) {\n        y = -y;\n      }\n\n      y = this.a * this.k0 * (y - this.lat0) + this.y0;\n    }\n  }\n  else {\n    var al = cos_phi * delta_lon;\n    var als = Math.pow(al, 2);\n    var c = this.ep2 * Math.pow(cos_phi, 2);\n    var cs = Math.pow(c, 2);\n    var tq = Math.abs(cos_phi) > EPSLN ? Math.tan(lat) : 0;\n    var t = Math.pow(tq, 2);\n    var ts = Math.pow(t, 2);\n    con = 1 - this.es * Math.pow(sin_phi, 2);\n    al = al / Math.sqrt(con);\n    var ml = pj_mlfn(lat, sin_phi, cos_phi, this.en);\n\n    x = this.a * (this.k0 * al * (1 +\n      als / 6 * (1 - t + c +\n      als / 20 * (5 - 18 * t + ts + 14 * c - 58 * t * c +\n      als / 42 * (61 + 179 * ts - ts * t - 479 * t))))) +\n      this.x0;\n\n    y = this.a * (this.k0 * (ml - this.ml0 +\n      sin_phi * delta_lon * al / 2 * (1 +\n      als / 12 * (5 - t + 9 * c + 4 * cs +\n      als / 30 * (61 + ts - 58 * t + 270 * c - 330 * t * c +\n      als / 56 * (1385 + 543 * ts - ts * t - 3111 * t)))))) +\n      this.y0;\n  }\n\n  p.x = x;\n  p.y = y;\n\n  return p;\n}\n\n/**\n    Transverse Mercator Inverse  -  x/y to long/lat\n  */\nexport function inverse(p) {\n  var con, phi;\n  var lat, lon;\n  var x = (p.x - this.x0) * (1 / this.a);\n  var y = (p.y - this.y0) * (1 / this.a);\n\n  if (!this.es) {\n    var f = Math.exp(x / this.k0);\n    var g = 0.5 * (f - 1 / f);\n    var temp = this.lat0 + y / this.k0;\n    var h = Math.cos(temp);\n    con = Math.sqrt((1 - Math.pow(h, 2)) / (1 + Math.pow(g, 2)));\n    lat = Math.asin(con);\n\n    if (y < 0) {\n      lat = -lat;\n    }\n\n    if ((g === 0) && (h === 0)) {\n      lon = 0;\n    }\n    else {\n      lon = adjust_lon(Math.atan2(g, h) + this.long0);\n    }\n  }\n  else { // ellipsoidal form\n    con = this.ml0 + y / this.k0;\n    phi = pj_inv_mlfn(con, this.es, this.en);\n\n    if (Math.abs(phi) < HALF_PI) {\n      var sin_phi = Math.sin(phi);\n      var cos_phi = Math.cos(phi);\n      var tan_phi = Math.abs(cos_phi) > EPSLN ? Math.tan(phi) : 0;\n      var c = this.ep2 * Math.pow(cos_phi, 2);\n      var cs = Math.pow(c, 2);\n      var t = Math.pow(tan_phi, 2);\n      var ts = Math.pow(t, 2);\n      con = 1 - this.es * Math.pow(sin_phi, 2);\n      var d = x * Math.sqrt(con) / this.k0;\n      var ds = Math.pow(d, 2);\n      con = con * tan_phi;\n\n      lat = phi - (con * ds / (1 - this.es)) * 0.5 * (1 -\n        ds / 12 * (5 + 3 * t - 9 * c * t + c - 4 * cs -\n        ds / 30 * (61 + 90 * t - 252 * c * t + 45 * ts + 46 * c -\n        ds / 56 * (1385 + 3633 * t + 4095 * ts + 1574 * ts * t))));\n\n      lon = adjust_lon(this.long0 + (d * (1 -\n        ds / 6 * (1 + 2 * t + c -\n        ds / 20 * (5 + 28 * t + 24 * ts + 8 * c * t + 6 * c -\n        ds / 42 * (61 + 662 * t + 1320 * ts + 720 * ts * t)))) / cos_phi));\n    }\n    else {\n      lat = HALF_PI * sign(y);\n      lon = 0;\n    }\n  }\n\n  p.x = lon;\n  p.y = lat;\n\n  return p;\n}\n\nexport var names = [\"Transverse_Mercator\", \"Transverse Mercator\", \"tmerc\"];\nexport default {\n  init: init,\n  forward: forward,\n  inverse: inverse,\n  names: names\n};\n","export default function(x) {\n  var r = Math.exp(x);\n  r = (r - 1 / r) / 2;\n  return r;\n}","export default function(x, y) {\n  x = Math.abs(x);\n  y = Math.abs(y);\n  var a = Math.max(x, y);\n  var b = Math.min(x, y) / (a ? a : 1);\n\n  return a * Math.sqrt(1 + Math.pow(b, 2));\n}\n","import hypot from './hypot';\nimport log1py from './log1py';\n\nexport default function(x) {\n  var y = Math.abs(x);\n  y = log1py(y * (1 + y / (hypot(1, y) + 1)));\n\n  return x < 0 ? -y : y;\n}\n","export default function(x) {\n  var y = 1 + x;\n  var z = y - 1;\n\n  return z === 0 ? x : x * Math.log(y) / z;\n}\n","export default function(pp, B) {\n  var cos_2B = 2 * Math.cos(2 * B);\n  var i = pp.length - 1;\n  var h1 = pp[i];\n  var h2 = 0;\n  var h;\n\n  while (--i >= 0) {\n    h = -h2 + cos_2B * h1 + pp[i];\n    h2 = h1;\n    h1 = h;\n  }\n\n  return (B + h * Math.sin(2 * B));\n}\n","export default function(pp, arg_r) {\n  var r = 2 * Math.cos(arg_r);\n  var i = pp.length - 1;\n  var hr1 = pp[i];\n  var hr2 = 0;\n  var hr;\n\n  while (--i >= 0) {\n    hr = -hr2 + r * hr1 + pp[i];\n    hr2 = hr1;\n    hr1 = hr;\n  }\n\n  return Math.sin(arg_r) * hr;\n}\n","import sinh from './sinh';\nimport cosh from './cosh';\n\nexport default function(pp, arg_r, arg_i) {\n  var sin_arg_r = Math.sin(arg_r);\n  var cos_arg_r = Math.cos(arg_r);\n  var sinh_arg_i = sinh(arg_i);\n  var cosh_arg_i = cosh(arg_i);\n  var r = 2 * cos_arg_r * cosh_arg_i;\n  var i = -2 * sin_arg_r * sinh_arg_i;\n  var j = pp.length - 1;\n  var hr = pp[j];\n  var hi1 = 0;\n  var hr1 = 0;\n  var hi = 0;\n  var hr2;\n  var hi2;\n\n  while (--j >= 0) {\n    hr2 = hr1;\n    hi2 = hi1;\n    hr1 = hr;\n    hi1 = hi;\n    hr = -hr2 + r * hr1 - i * hi1 + pp[j];\n    hi = -hi2 + i * hr1 + r * hi1;\n  }\n\n  r = sin_arg_r * cosh_arg_i;\n  i = cos_arg_r * sinh_arg_i;\n\n  return [r * hr - i * hi, r * hi + i * hr];\n}\n","export default function(x) {\n  var r = Math.exp(x);\n  r = (r + 1 / r) / 2;\n  return r;\n}","// Heavily based on this etmerc projection implementation\n// https://github.com/mbloch/mapshaper-proj/blob/master/src/projections/etmerc.js\n\nimport sinh from '../common/sinh';\nimport hypot from '../common/hypot';\nimport asinhy from '../common/asinhy';\nimport gatg from '../common/gatg';\nimport clens from '../common/clens';\nimport clens_cmplx from '../common/clens_cmplx';\nimport adjust_lon from '../common/adjust_lon';\n\nexport function init() {\n  if (this.es === undefined || this.es <= 0) {\n    throw new Error('incorrect elliptical usage');\n  }\n\n  this.x0 = this.x0 !== undefined ? this.x0 : 0;\n  this.y0 = this.y0 !== undefined ? this.y0 : 0;\n  this.long0 = this.long0 !== undefined ? this.long0 : 0;\n  this.lat0 = this.lat0 !== undefined ? this.lat0 : 0;\n\n  this.cgb = [];\n  this.cbg = [];\n  this.utg = [];\n  this.gtu = [];\n\n  var f = this.es / (1 + Math.sqrt(1 - this.es));\n  var n = f / (2 - f);\n  var np = n;\n\n  this.cgb[0] = n * (2 + n * (-2 / 3 + n * (-2 + n * (116 / 45 + n * (26 / 45 + n * (-2854 / 675 ))))));\n  this.cbg[0] = n * (-2 + n * ( 2 / 3 + n * ( 4 / 3 + n * (-82 / 45 + n * (32 / 45 + n * (4642 / 4725))))));\n\n  np = np * n;\n  this.cgb[1] = np * (7 / 3 + n * (-8 / 5 + n * (-227 / 45 + n * (2704 / 315 + n * (2323 / 945)))));\n  this.cbg[1] = np * (5 / 3 + n * (-16 / 15 + n * ( -13 / 9 + n * (904 / 315 + n * (-1522 / 945)))));\n\n  np = np * n;\n  this.cgb[2] = np * (56 / 15 + n * (-136 / 35 + n * (-1262 / 105 + n * (73814 / 2835))));\n  this.cbg[2] = np * (-26 / 15 + n * (34 / 21 + n * (8 / 5 + n * (-12686 / 2835))));\n\n  np = np * n;\n  this.cgb[3] = np * (4279 / 630 + n * (-332 / 35 + n * (-399572 / 14175)));\n  this.cbg[3] = np * (1237 / 630 + n * (-12 / 5 + n * ( -24832 / 14175)));\n\n  np = np * n;\n  this.cgb[4] = np * (4174 / 315 + n * (-144838 / 6237));\n  this.cbg[4] = np * (-734 / 315 + n * (109598 / 31185));\n\n  np = np * n;\n  this.cgb[5] = np * (601676 / 22275);\n  this.cbg[5] = np * (444337 / 155925);\n\n  np = Math.pow(n, 2);\n  this.Qn = this.k0 / (1 + n) * (1 + np * (1 / 4 + np * (1 / 64 + np / 256)));\n\n  this.utg[0] = n * (-0.5 + n * ( 2 / 3 + n * (-37 / 96 + n * ( 1 / 360 + n * (81 / 512 + n * (-96199 / 604800))))));\n  this.gtu[0] = n * (0.5 + n * (-2 / 3 + n * (5 / 16 + n * (41 / 180 + n * (-127 / 288 + n * (7891 / 37800))))));\n\n  this.utg[1] = np * (-1 / 48 + n * (-1 / 15 + n * (437 / 1440 + n * (-46 / 105 + n * (1118711 / 3870720)))));\n  this.gtu[1] = np * (13 / 48 + n * (-3 / 5 + n * (557 / 1440 + n * (281 / 630 + n * (-1983433 / 1935360)))));\n\n  np = np * n;\n  this.utg[2] = np * (-17 / 480 + n * (37 / 840 + n * (209 / 4480 + n * (-5569 / 90720 ))));\n  this.gtu[2] = np * (61 / 240 + n * (-103 / 140 + n * (15061 / 26880 + n * (167603 / 181440))));\n\n  np = np * n;\n  this.utg[3] = np * (-4397 / 161280 + n * (11 / 504 + n * (830251 / 7257600)));\n  this.gtu[3] = np * (49561 / 161280 + n * (-179 / 168 + n * (6601661 / 7257600)));\n\n  np = np * n;\n  this.utg[4] = np * (-4583 / 161280 + n * (108847 / 3991680));\n  this.gtu[4] = np * (34729 / 80640 + n * (-3418889 / 1995840));\n\n  np = np * n;\n  this.utg[5] = np * (-20648693 / 638668800);\n  this.gtu[5] = np * (212378941 / 319334400);\n\n  var Z = gatg(this.cbg, this.lat0);\n  this.Zb = -this.Qn * (Z + clens(this.gtu, 2 * Z));\n}\n\nexport function forward(p) {\n  var Ce = adjust_lon(p.x - this.long0);\n  var Cn = p.y;\n\n  Cn = gatg(this.cbg, Cn);\n  var sin_Cn = Math.sin(Cn);\n  var cos_Cn = Math.cos(Cn);\n  var sin_Ce = Math.sin(Ce);\n  var cos_Ce = Math.cos(Ce);\n\n  Cn = Math.atan2(sin_Cn, cos_Ce * cos_Cn);\n  Ce = Math.atan2(sin_Ce * cos_Cn, hypot(sin_Cn, cos_Cn * cos_Ce));\n  Ce = asinhy(Math.tan(Ce));\n\n  var tmp = clens_cmplx(this.gtu, 2 * Cn, 2 * Ce);\n\n  Cn = Cn + tmp[0];\n  Ce = Ce + tmp[1];\n\n  var x;\n  var y;\n\n  if (Math.abs(Ce) <= 2.623395162778) {\n    x = this.a * (this.Qn * Ce) + this.x0;\n    y = this.a * (this.Qn * Cn + this.Zb) + this.y0;\n  }\n  else {\n    x = Infinity;\n    y = Infinity;\n  }\n\n  p.x = x;\n  p.y = y;\n\n  return p;\n}\n\nexport function inverse(p) {\n  var Ce = (p.x - this.x0) * (1 / this.a);\n  var Cn = (p.y - this.y0) * (1 / this.a);\n\n  Cn = (Cn - this.Zb) / this.Qn;\n  Ce = Ce / this.Qn;\n\n  var lon;\n  var lat;\n\n  if (Math.abs(Ce) <= 2.623395162778) {\n    var tmp = clens_cmplx(this.utg, 2 * Cn, 2 * Ce);\n\n    Cn = Cn + tmp[0];\n    Ce = Ce + tmp[1];\n    Ce = Math.atan(sinh(Ce));\n\n    var sin_Cn = Math.sin(Cn);\n    var cos_Cn = Math.cos(Cn);\n    var sin_Ce = Math.sin(Ce);\n    var cos_Ce = Math.cos(Ce);\n\n    Cn = Math.atan2(sin_Cn * cos_Ce, hypot(sin_Ce, cos_Ce * cos_Cn));\n    Ce = Math.atan2(sin_Ce, cos_Ce * cos_Cn);\n\n    lon = adjust_lon(Ce + this.long0);\n    lat = gatg(this.cgb, Cn);\n  }\n  else {\n    lon = Infinity;\n    lat = Infinity;\n  }\n\n  p.x = lon;\n  p.y = lat;\n\n  return p;\n}\n\nexport var names = [\"Extended_Transverse_Mercator\", \"Extended Transverse Mercator\", \"etmerc\"];\nexport default {\n  init: init,\n  forward: forward,\n  inverse: inverse,\n  names: names\n};\n","import adjust_lon from './adjust_lon';\n\nexport default function(zone, lon) {\n  if (zone === undefined) {\n    zone = Math.floor((adjust_lon(lon) + Math.PI) * 30 / Math.PI) + 1;\n\n    if (zone < 0) {\n      return 0;\n    } else if (zone > 60) {\n      return 60;\n    }\n  }\n  return zone;\n}\n","import adjust_zone from '../common/adjust_zone';\nimport etmerc from './etmerc';\nexport var dependsOn = 'etmerc';\nimport {D2R} from '../constants/values';\n\n\nexport function init() {\n  var zone = adjust_zone(this.zone, this.long0);\n  if (zone === undefined) {\n    throw new Error('unknown utm zone');\n  }\n  this.lat0 = 0;\n  this.long0 =  ((6 * Math.abs(zone)) - 183) * D2R;\n  this.x0 = 500000;\n  this.y0 = this.utmSouth ? 10000000 : 0;\n  this.k0 = 0.9996;\n\n  etmerc.init.apply(this);\n  this.forward = etmerc.forward;\n  this.inverse = etmerc.inverse;\n}\n\nexport var names = [\"Universal Transverse Mercator System\", \"utm\"];\nexport default {\n  init: init,\n  names: names,\n  dependsOn: dependsOn\n};\n","export default function(esinp, exp) {\n  return (Math.pow((1 - esinp) / (1 + esinp), exp));\n}","import srat from '../common/srat';\nvar MAX_ITER = 20;\nimport {HALF_PI, FORTPI} from '../constants/values';\n\nexport function init() {\n  var sphi = Math.sin(this.lat0);\n  var cphi = Math.cos(this.lat0);\n  cphi *= cphi;\n  this.rc = Math.sqrt(1 - this.es) / (1 - this.es * sphi * sphi);\n  this.C = Math.sqrt(1 + this.es * cphi * cphi / (1 - this.es));\n  this.phic0 = Math.asin(sphi / this.C);\n  this.ratexp = 0.5 * this.C * this.e;\n  this.K = Math.tan(0.5 * this.phic0 + FORTPI) / (Math.pow(Math.tan(0.5 * this.lat0 + FORTPI), this.C) * srat(this.e * sphi, this.ratexp));\n}\n\nexport function forward(p) {\n  var lon = p.x;\n  var lat = p.y;\n\n  p.y = 2 * Math.atan(this.K * Math.pow(Math.tan(0.5 * lat + FORTPI), this.C) * srat(this.e * Math.sin(lat), this.ratexp)) - HALF_PI;\n  p.x = this.C * lon;\n  return p;\n}\n\nexport function inverse(p) {\n  var DEL_TOL = 1e-14;\n  var lon = p.x / this.C;\n  var lat = p.y;\n  var num = Math.pow(Math.tan(0.5 * lat + FORTPI) / this.K, 1 / this.C);\n  for (var i = MAX_ITER; i > 0; --i) {\n    lat = 2 * Math.atan(num * srat(this.e * Math.sin(p.y), - 0.5 * this.e)) - HALF_PI;\n    if (Math.abs(lat - p.y) < DEL_TOL) {\n      break;\n    }\n    p.y = lat;\n  }\n  /* convergence failed */\n  if (!i) {\n    return null;\n  }\n  p.x = lon;\n  p.y = lat;\n  return p;\n}\n\nexport var names = [\"gauss\"];\nexport default {\n  init: init,\n  forward: forward,\n  inverse: inverse,\n  names: names\n};\n","import gauss from './gauss';\nimport adjust_lon from '../common/adjust_lon';\n\nexport function init() {\n  gauss.init.apply(this);\n  if (!this.rc) {\n    return;\n  }\n  this.sinc0 = Math.sin(this.phic0);\n  this.cosc0 = Math.cos(this.phic0);\n  this.R2 = 2 * this.rc;\n  if (!this.title) {\n    this.title = \"Oblique Stereographic Alternative\";\n  }\n}\n\nexport function forward(p) {\n  var sinc, cosc, cosl, k;\n  p.x = adjust_lon(p.x - this.long0);\n  gauss.forward.apply(this, [p]);\n  sinc = Math.sin(p.y);\n  cosc = Math.cos(p.y);\n  cosl = Math.cos(p.x);\n  k = this.k0 * this.R2 / (1 + this.sinc0 * sinc + this.cosc0 * cosc * cosl);\n  p.x = k * cosc * Math.sin(p.x);\n  p.y = k * (this.cosc0 * sinc - this.sinc0 * cosc * cosl);\n  p.x = this.a * p.x + this.x0;\n  p.y = this.a * p.y + this.y0;\n  return p;\n}\n\nexport function inverse(p) {\n  var sinc, cosc, lon, lat, rho;\n  p.x = (p.x - this.x0) / this.a;\n  p.y = (p.y - this.y0) / this.a;\n\n  p.x /= this.k0;\n  p.y /= this.k0;\n  if ((rho = Math.sqrt(p.x * p.x + p.y * p.y))) {\n    var c = 2 * Math.atan2(rho, this.R2);\n    sinc = Math.sin(c);\n    cosc = Math.cos(c);\n    lat = Math.asin(cosc * this.sinc0 + p.y * sinc * this.cosc0 / rho);\n    lon = Math.atan2(p.x * sinc, rho * this.cosc0 * cosc - p.y * this.sinc0 * sinc);\n  }\n  else {\n    lat = this.phic0;\n    lon = 0;\n  }\n\n  p.x = lon;\n  p.y = lat;\n  gauss.inverse.apply(this, [p]);\n  p.x = adjust_lon(p.x + this.long0);\n  return p;\n}\n\nexport var names = [\"Stereographic_North_Pole\", \"Oblique_Stereographic\", \"Polar_Stereographic\", \"sterea\",\"Oblique Stereographic Alternative\",\"Double_Stereographic\"];\nexport default {\n  init: init,\n  forward: forward,\n  inverse: inverse,\n  names: names\n};\n","import {EPSLN, HALF_PI} from '../constants/values';\n\nimport sign from '../common/sign';\nimport msfnz from '../common/msfnz';\nimport tsfnz from '../common/tsfnz';\nimport phi2z from '../common/phi2z';\nimport adjust_lon from '../common/adjust_lon';\n\nexport function ssfn_(phit, sinphi, eccen) {\n  sinphi *= eccen;\n  return (Math.tan(0.5 * (HALF_PI + phit)) * Math.pow((1 - sinphi) / (1 + sinphi), 0.5 * eccen));\n}\n\nexport function init() {\n  this.coslat0 = Math.cos(this.lat0);\n  this.sinlat0 = Math.sin(this.lat0);\n  if (this.sphere) {\n    if (this.k0 === 1 && !isNaN(this.lat_ts) && Math.abs(this.coslat0) <= EPSLN) {\n      this.k0 = 0.5 * (1 + sign(this.lat0) * Math.sin(this.lat_ts));\n    }\n  }\n  else {\n    if (Math.abs(this.coslat0) <= EPSLN) {\n      if (this.lat0 > 0) {\n        //North pole\n        //trace('stere:north pole');\n        this.con = 1;\n      }\n      else {\n        //South pole\n        //trace('stere:south pole');\n        this.con = -1;\n      }\n    }\n    this.cons = Math.sqrt(Math.pow(1 + this.e, 1 + this.e) * Math.pow(1 - this.e, 1 - this.e));\n    if (this.k0 === 1 && !isNaN(this.lat_ts) && Math.abs(this.coslat0) <= EPSLN) {\n      this.k0 = 0.5 * this.cons * msfnz(this.e, Math.sin(this.lat_ts), Math.cos(this.lat_ts)) / tsfnz(this.e, this.con * this.lat_ts, this.con * Math.sin(this.lat_ts));\n    }\n    this.ms1 = msfnz(this.e, this.sinlat0, this.coslat0);\n    this.X0 = 2 * Math.atan(this.ssfn_(this.lat0, this.sinlat0, this.e)) - HALF_PI;\n    this.cosX0 = Math.cos(this.X0);\n    this.sinX0 = Math.sin(this.X0);\n  }\n}\n\n// Stereographic forward equations--mapping lat,long to x,y\nexport function forward(p) {\n  var lon = p.x;\n  var lat = p.y;\n  var sinlat = Math.sin(lat);\n  var coslat = Math.cos(lat);\n  var A, X, sinX, cosX, ts, rh;\n  var dlon = adjust_lon(lon - this.long0);\n\n  if (Math.abs(Math.abs(lon - this.long0) - Math.PI) <= EPSLN && Math.abs(lat + this.lat0) <= EPSLN) {\n    //case of the origine point\n    //trace('stere:this is the origin point');\n    p.x = NaN;\n    p.y = NaN;\n    return p;\n  }\n  if (this.sphere) {\n    //trace('stere:sphere case');\n    A = 2 * this.k0 / (1 + this.sinlat0 * sinlat + this.coslat0 * coslat * Math.cos(dlon));\n    p.x = this.a * A * coslat * Math.sin(dlon) + this.x0;\n    p.y = this.a * A * (this.coslat0 * sinlat - this.sinlat0 * coslat * Math.cos(dlon)) + this.y0;\n    return p;\n  }\n  else {\n    X = 2 * Math.atan(this.ssfn_(lat, sinlat, this.e)) - HALF_PI;\n    cosX = Math.cos(X);\n    sinX = Math.sin(X);\n    if (Math.abs(this.coslat0) <= EPSLN) {\n      ts = tsfnz(this.e, lat * this.con, this.con * sinlat);\n      rh = 2 * this.a * this.k0 * ts / this.cons;\n      p.x = this.x0 + rh * Math.sin(lon - this.long0);\n      p.y = this.y0 - this.con * rh * Math.cos(lon - this.long0);\n      //trace(p.toString());\n      return p;\n    }\n    else if (Math.abs(this.sinlat0) < EPSLN) {\n      //Eq\n      //trace('stere:equateur');\n      A = 2 * this.a * this.k0 / (1 + cosX * Math.cos(dlon));\n      p.y = A * sinX;\n    }\n    else {\n      //other case\n      //trace('stere:normal case');\n      A = 2 * this.a * this.k0 * this.ms1 / (this.cosX0 * (1 + this.sinX0 * sinX + this.cosX0 * cosX * Math.cos(dlon)));\n      p.y = A * (this.cosX0 * sinX - this.sinX0 * cosX * Math.cos(dlon)) + this.y0;\n    }\n    p.x = A * cosX * Math.sin(dlon) + this.x0;\n  }\n  //trace(p.toString());\n  return p;\n}\n\n//* Stereographic inverse equations--mapping x,y to lat/long\nexport function inverse(p) {\n  p.x -= this.x0;\n  p.y -= this.y0;\n  var lon, lat, ts, ce, Chi;\n  var rh = Math.sqrt(p.x * p.x + p.y * p.y);\n  if (this.sphere) {\n    var c = 2 * Math.atan(rh / (2 * this.a * this.k0));\n    lon = this.long0;\n    lat = this.lat0;\n    if (rh <= EPSLN) {\n      p.x = lon;\n      p.y = lat;\n      return p;\n    }\n    lat = Math.asin(Math.cos(c) * this.sinlat0 + p.y * Math.sin(c) * this.coslat0 / rh);\n    if (Math.abs(this.coslat0) < EPSLN) {\n      if (this.lat0 > 0) {\n        lon = adjust_lon(this.long0 + Math.atan2(p.x, - 1 * p.y));\n      }\n      else {\n        lon = adjust_lon(this.long0 + Math.atan2(p.x, p.y));\n      }\n    }\n    else {\n      lon = adjust_lon(this.long0 + Math.atan2(p.x * Math.sin(c), rh * this.coslat0 * Math.cos(c) - p.y * this.sinlat0 * Math.sin(c)));\n    }\n    p.x = lon;\n    p.y = lat;\n    return p;\n  }\n  else {\n    if (Math.abs(this.coslat0) <= EPSLN) {\n      if (rh <= EPSLN) {\n        lat = this.lat0;\n        lon = this.long0;\n        p.x = lon;\n        p.y = lat;\n        //trace(p.toString());\n        return p;\n      }\n      p.x *= this.con;\n      p.y *= this.con;\n      ts = rh * this.cons / (2 * this.a * this.k0);\n      lat = this.con * phi2z(this.e, ts);\n      lon = this.con * adjust_lon(this.con * this.long0 + Math.atan2(p.x, - 1 * p.y));\n    }\n    else {\n      ce = 2 * Math.atan(rh * this.cosX0 / (2 * this.a * this.k0 * this.ms1));\n      lon = this.long0;\n      if (rh <= EPSLN) {\n        Chi = this.X0;\n      }\n      else {\n        Chi = Math.asin(Math.cos(ce) * this.sinX0 + p.y * Math.sin(ce) * this.cosX0 / rh);\n        lon = adjust_lon(this.long0 + Math.atan2(p.x * Math.sin(ce), rh * this.cosX0 * Math.cos(ce) - p.y * this.sinX0 * Math.sin(ce)));\n      }\n      lat = -1 * phi2z(this.e, Math.tan(0.5 * (HALF_PI + Chi)));\n    }\n  }\n  p.x = lon;\n  p.y = lat;\n\n  //trace(p.toString());\n  return p;\n\n}\n\nexport var names = [\"stere\", \"Stereographic_South_Pole\", \"Polar Stereographic (variant B)\"];\nexport default {\n  init: init,\n  forward: forward,\n  inverse: inverse,\n  names: names,\n  ssfn_: ssfn_\n};\n","/*\n  references:\n    Formules et constantes pour le Calcul pour la\n    projection cylindrique conforme à axe oblique et pour la transformation entre\n    des systèmes de référence.\n    http://www.swisstopo.admin.ch/internet/swisstopo/fr/home/topics/survey/sys/refsys/switzerland.parsysrelated1.31216.downloadList.77004.DownloadFile.tmp/swissprojectionfr.pdf\n  */\n\nexport function init() {\n  var phy0 = this.lat0;\n  this.lambda0 = this.long0;\n  var sinPhy0 = Math.sin(phy0);\n  var semiMajorAxis = this.a;\n  var invF = this.rf;\n  var flattening = 1 / invF;\n  var e2 = 2 * flattening - Math.pow(flattening, 2);\n  var e = this.e = Math.sqrt(e2);\n  this.R = this.k0 * semiMajorAxis * Math.sqrt(1 - e2) / (1 - e2 * Math.pow(sinPhy0, 2));\n  this.alpha = Math.sqrt(1 + e2 / (1 - e2) * Math.pow(Math.cos(phy0), 4));\n  this.b0 = Math.asin(sinPhy0 / this.alpha);\n  var k1 = Math.log(Math.tan(Math.PI / 4 + this.b0 / 2));\n  var k2 = Math.log(Math.tan(Math.PI / 4 + phy0 / 2));\n  var k3 = Math.log((1 + e * sinPhy0) / (1 - e * sinPhy0));\n  this.K = k1 - this.alpha * k2 + this.alpha * e / 2 * k3;\n}\n\nexport function forward(p) {\n  var Sa1 = Math.log(Math.tan(Math.PI / 4 - p.y / 2));\n  var Sa2 = this.e / 2 * Math.log((1 + this.e * Math.sin(p.y)) / (1 - this.e * Math.sin(p.y)));\n  var S = -this.alpha * (Sa1 + Sa2) + this.K;\n\n  // spheric latitude\n  var b = 2 * (Math.atan(Math.exp(S)) - Math.PI / 4);\n\n  // spheric longitude\n  var I = this.alpha * (p.x - this.lambda0);\n\n  // psoeudo equatorial rotation\n  var rotI = Math.atan(Math.sin(I) / (Math.sin(this.b0) * Math.tan(b) + Math.cos(this.b0) * Math.cos(I)));\n\n  var rotB = Math.asin(Math.cos(this.b0) * Math.sin(b) - Math.sin(this.b0) * Math.cos(b) * Math.cos(I));\n\n  p.y = this.R / 2 * Math.log((1 + Math.sin(rotB)) / (1 - Math.sin(rotB))) + this.y0;\n  p.x = this.R * rotI + this.x0;\n  return p;\n}\n\nexport function inverse(p) {\n  var Y = p.x - this.x0;\n  var X = p.y - this.y0;\n\n  var rotI = Y / this.R;\n  var rotB = 2 * (Math.atan(Math.exp(X / this.R)) - Math.PI / 4);\n\n  var b = Math.asin(Math.cos(this.b0) * Math.sin(rotB) + Math.sin(this.b0) * Math.cos(rotB) * Math.cos(rotI));\n  var I = Math.atan(Math.sin(rotI) / (Math.cos(this.b0) * Math.cos(rotI) - Math.sin(this.b0) * Math.tan(rotB)));\n\n  var lambda = this.lambda0 + I / this.alpha;\n\n  var S = 0;\n  var phy = b;\n  var prevPhy = -1000;\n  var iteration = 0;\n  while (Math.abs(phy - prevPhy) > 0.0000001) {\n    if (++iteration > 20) {\n      //...reportError(\"omercFwdInfinity\");\n      return;\n    }\n    //S = Math.log(Math.tan(Math.PI / 4 + phy / 2));\n    S = 1 / this.alpha * (Math.log(Math.tan(Math.PI / 4 + b / 2)) - this.K) + this.e * Math.log(Math.tan(Math.PI / 4 + Math.asin(this.e * Math.sin(phy)) / 2));\n    prevPhy = phy;\n    phy = 2 * Math.atan(Math.exp(S)) - Math.PI / 2;\n  }\n\n  p.x = lambda;\n  p.y = phy;\n  return p;\n}\n\nexport var names = [\"somerc\"];\nexport default {\n  init: init,\n  forward: forward,\n  inverse: inverse,\n  names: names\n};\n","import tsfnz from '../common/tsfnz';\nimport adjust_lon from '../common/adjust_lon';\nimport phi2z from '../common/phi2z';\nimport {EPSLN, HALF_PI, FORTPI} from '../constants/values';\n\n/* Initialize the Oblique Mercator  projection\n    ------------------------------------------*/\nexport function init() {\n  this.no_off = this.no_off || false;\n  this.no_rot = this.no_rot || false;\n\n  if (isNaN(this.k0)) {\n    this.k0 = 1;\n  }\n  var sinlat = Math.sin(this.lat0);\n  var coslat = Math.cos(this.lat0);\n  var con = this.e * sinlat;\n\n  this.bl = Math.sqrt(1 + this.es / (1 - this.es) * Math.pow(coslat, 4));\n  this.al = this.a * this.bl * this.k0 * Math.sqrt(1 - this.es) / (1 - con * con);\n  var t0 = tsfnz(this.e, this.lat0, sinlat);\n  var dl = this.bl / coslat * Math.sqrt((1 - this.es) / (1 - con * con));\n  if (dl * dl < 1) {\n    dl = 1;\n  }\n  var fl;\n  var gl;\n  if (!isNaN(this.longc)) {\n    //Central point and azimuth method\n\n    if (this.lat0 >= 0) {\n      fl = dl + Math.sqrt(dl * dl - 1);\n    }\n    else {\n      fl = dl - Math.sqrt(dl * dl - 1);\n    }\n    this.el = fl * Math.pow(t0, this.bl);\n    gl = 0.5 * (fl - 1 / fl);\n    this.gamma0 = Math.asin(Math.sin(this.alpha) / dl);\n    this.long0 = this.longc - Math.asin(gl * Math.tan(this.gamma0)) / this.bl;\n\n  }\n  else {\n    //2 points method\n    var t1 = tsfnz(this.e, this.lat1, Math.sin(this.lat1));\n    var t2 = tsfnz(this.e, this.lat2, Math.sin(this.lat2));\n    if (this.lat0 >= 0) {\n      this.el = (dl + Math.sqrt(dl * dl - 1)) * Math.pow(t0, this.bl);\n    }\n    else {\n      this.el = (dl - Math.sqrt(dl * dl - 1)) * Math.pow(t0, this.bl);\n    }\n    var hl = Math.pow(t1, this.bl);\n    var ll = Math.pow(t2, this.bl);\n    fl = this.el / hl;\n    gl = 0.5 * (fl - 1 / fl);\n    var jl = (this.el * this.el - ll * hl) / (this.el * this.el + ll * hl);\n    var pl = (ll - hl) / (ll + hl);\n    var dlon12 = adjust_lon(this.long1 - this.long2);\n    this.long0 = 0.5 * (this.long1 + this.long2) - Math.atan(jl * Math.tan(0.5 * this.bl * (dlon12)) / pl) / this.bl;\n    this.long0 = adjust_lon(this.long0);\n    var dlon10 = adjust_lon(this.long1 - this.long0);\n    this.gamma0 = Math.atan(Math.sin(this.bl * (dlon10)) / gl);\n    this.alpha = Math.asin(dl * Math.sin(this.gamma0));\n  }\n\n  if (this.no_off) {\n    this.uc = 0;\n  }\n  else {\n    if (this.lat0 >= 0) {\n      this.uc = this.al / this.bl * Math.atan2(Math.sqrt(dl * dl - 1), Math.cos(this.alpha));\n    }\n    else {\n      this.uc = -1 * this.al / this.bl * Math.atan2(Math.sqrt(dl * dl - 1), Math.cos(this.alpha));\n    }\n  }\n\n}\n\n/* Oblique Mercator forward equations--mapping lat,long to x,y\n    ----------------------------------------------------------*/\nexport function forward(p) {\n  var lon = p.x;\n  var lat = p.y;\n  var dlon = adjust_lon(lon - this.long0);\n  var us, vs;\n  var con;\n  if (Math.abs(Math.abs(lat) - HALF_PI) <= EPSLN) {\n    if (lat > 0) {\n      con = -1;\n    }\n    else {\n      con = 1;\n    }\n    vs = this.al / this.bl * Math.log(Math.tan(FORTPI + con * this.gamma0 * 0.5));\n    us = -1 * con * HALF_PI * this.al / this.bl;\n  }\n  else {\n    var t = tsfnz(this.e, lat, Math.sin(lat));\n    var ql = this.el / Math.pow(t, this.bl);\n    var sl = 0.5 * (ql - 1 / ql);\n    var tl = 0.5 * (ql + 1 / ql);\n    var vl = Math.sin(this.bl * (dlon));\n    var ul = (sl * Math.sin(this.gamma0) - vl * Math.cos(this.gamma0)) / tl;\n    if (Math.abs(Math.abs(ul) - 1) <= EPSLN) {\n      vs = Number.POSITIVE_INFINITY;\n    }\n    else {\n      vs = 0.5 * this.al * Math.log((1 - ul) / (1 + ul)) / this.bl;\n    }\n    if (Math.abs(Math.cos(this.bl * (dlon))) <= EPSLN) {\n      us = this.al * this.bl * (dlon);\n    }\n    else {\n      us = this.al * Math.atan2(sl * Math.cos(this.gamma0) + vl * Math.sin(this.gamma0), Math.cos(this.bl * dlon)) / this.bl;\n    }\n  }\n\n  if (this.no_rot) {\n    p.x = this.x0 + us;\n    p.y = this.y0 + vs;\n  }\n  else {\n\n    us -= this.uc;\n    p.x = this.x0 + vs * Math.cos(this.alpha) + us * Math.sin(this.alpha);\n    p.y = this.y0 + us * Math.cos(this.alpha) - vs * Math.sin(this.alpha);\n  }\n  return p;\n}\n\nexport function inverse(p) {\n  var us, vs;\n  if (this.no_rot) {\n    vs = p.y - this.y0;\n    us = p.x - this.x0;\n  }\n  else {\n    vs = (p.x - this.x0) * Math.cos(this.alpha) - (p.y - this.y0) * Math.sin(this.alpha);\n    us = (p.y - this.y0) * Math.cos(this.alpha) + (p.x - this.x0) * Math.sin(this.alpha);\n    us += this.uc;\n  }\n  var qp = Math.exp(-1 * this.bl * vs / this.al);\n  var sp = 0.5 * (qp - 1 / qp);\n  var tp = 0.5 * (qp + 1 / qp);\n  var vp = Math.sin(this.bl * us / this.al);\n  var up = (vp * Math.cos(this.gamma0) + sp * Math.sin(this.gamma0)) / tp;\n  var ts = Math.pow(this.el / Math.sqrt((1 + up) / (1 - up)), 1 / this.bl);\n  if (Math.abs(up - 1) < EPSLN) {\n    p.x = this.long0;\n    p.y = HALF_PI;\n  }\n  else if (Math.abs(up + 1) < EPSLN) {\n    p.x = this.long0;\n    p.y = -1 * HALF_PI;\n  }\n  else {\n    p.y = phi2z(this.e, ts);\n    p.x = adjust_lon(this.long0 - Math.atan2(sp * Math.cos(this.gamma0) - vp * Math.sin(this.gamma0), Math.cos(this.bl * us / this.al)) / this.bl);\n  }\n  return p;\n}\n\nexport var names = [\"Hotine_Oblique_Mercator\", \"Hotine Oblique Mercator\", \"Hotine_Oblique_Mercator_Azimuth_Natural_Origin\", \"Hotine_Oblique_Mercator_Azimuth_Center\", \"omerc\"];\nexport default {\n  init: init,\n  forward: forward,\n  inverse: inverse,\n  names: names\n};\n","import msfnz from '../common/msfnz';\nimport tsfnz from '../common/tsfnz';\nimport sign from '../common/sign';\nimport adjust_lon from '../common/adjust_lon';\nimport phi2z from '../common/phi2z';\nimport {HALF_PI, EPSLN} from '../constants/values';\nexport function init() {\n\n  // array of:  r_maj,r_min,lat1,lat2,c_lon,c_lat,false_east,false_north\n  //double c_lat;                   /* center latitude                      */\n  //double c_lon;                   /* center longitude                     */\n  //double lat1;                    /* first standard parallel              */\n  //double lat2;                    /* second standard parallel             */\n  //double r_maj;                   /* major axis                           */\n  //double r_min;                   /* minor axis                           */\n  //double false_east;              /* x offset in meters                   */\n  //double false_north;             /* y offset in meters                   */\n\n  if (!this.lat2) {\n    this.lat2 = this.lat1;\n  } //if lat2 is not defined\n  if (!this.k0) {\n    this.k0 = 1;\n  }\n  this.x0 = this.x0 || 0;\n  this.y0 = this.y0 || 0;\n  // Standard Parallels cannot be equal and on opposite sides of the equator\n  if (Math.abs(this.lat1 + this.lat2) < EPSLN) {\n    return;\n  }\n\n  var temp = this.b / this.a;\n  this.e = Math.sqrt(1 - temp * temp);\n\n  var sin1 = Math.sin(this.lat1);\n  var cos1 = Math.cos(this.lat1);\n  var ms1 = msfnz(this.e, sin1, cos1);\n  var ts1 = tsfnz(this.e, this.lat1, sin1);\n\n  var sin2 = Math.sin(this.lat2);\n  var cos2 = Math.cos(this.lat2);\n  var ms2 = msfnz(this.e, sin2, cos2);\n  var ts2 = tsfnz(this.e, this.lat2, sin2);\n\n  var ts0 = tsfnz(this.e, this.lat0, Math.sin(this.lat0));\n\n  if (Math.abs(this.lat1 - this.lat2) > EPSLN) {\n    this.ns = Math.log(ms1 / ms2) / Math.log(ts1 / ts2);\n  }\n  else {\n    this.ns = sin1;\n  }\n  if (isNaN(this.ns)) {\n    this.ns = sin1;\n  }\n  this.f0 = ms1 / (this.ns * Math.pow(ts1, this.ns));\n  this.rh = this.a * this.f0 * Math.pow(ts0, this.ns);\n  if (!this.title) {\n    this.title = \"Lambert Conformal Conic\";\n  }\n}\n\n// Lambert Conformal conic forward equations--mapping lat,long to x,y\n// -----------------------------------------------------------------\nexport function forward(p) {\n\n  var lon = p.x;\n  var lat = p.y;\n\n  // singular cases :\n  if (Math.abs(2 * Math.abs(lat) - Math.PI) <= EPSLN) {\n    lat = sign(lat) * (HALF_PI - 2 * EPSLN);\n  }\n\n  var con = Math.abs(Math.abs(lat) - HALF_PI);\n  var ts, rh1;\n  if (con > EPSLN) {\n    ts = tsfnz(this.e, lat, Math.sin(lat));\n    rh1 = this.a * this.f0 * Math.pow(ts, this.ns);\n  }\n  else {\n    con = lat * this.ns;\n    if (con <= 0) {\n      return null;\n    }\n    rh1 = 0;\n  }\n  var theta = this.ns * adjust_lon(lon - this.long0);\n  p.x = this.k0 * (rh1 * Math.sin(theta)) + this.x0;\n  p.y = this.k0 * (this.rh - rh1 * Math.cos(theta)) + this.y0;\n\n  return p;\n}\n\n// Lambert Conformal Conic inverse equations--mapping x,y to lat/long\n// -----------------------------------------------------------------\nexport function inverse(p) {\n\n  var rh1, con, ts;\n  var lat, lon;\n  var x = (p.x - this.x0) / this.k0;\n  var y = (this.rh - (p.y - this.y0) / this.k0);\n  if (this.ns > 0) {\n    rh1 = Math.sqrt(x * x + y * y);\n    con = 1;\n  }\n  else {\n    rh1 = -Math.sqrt(x * x + y * y);\n    con = -1;\n  }\n  var theta = 0;\n  if (rh1 !== 0) {\n    theta = Math.atan2((con * x), (con * y));\n  }\n  if ((rh1 !== 0) || (this.ns > 0)) {\n    con = 1 / this.ns;\n    ts = Math.pow((rh1 / (this.a * this.f0)), con);\n    lat = phi2z(this.e, ts);\n    if (lat === -9999) {\n      return null;\n    }\n  }\n  else {\n    lat = -HALF_PI;\n  }\n  lon = adjust_lon(theta / this.ns + this.long0);\n\n  p.x = lon;\n  p.y = lat;\n  return p;\n}\n\nexport var names = [\"Lambert Tangential Conformal Conic Projection\", \"Lambert_Conformal_Conic\", \"Lambert_Conformal_Conic_2SP\", \"lcc\"];\nexport default {\n  init: init,\n  forward: forward,\n  inverse: inverse,\n  names: names\n};\n","import adjust_lon from '../common/adjust_lon';\n\nexport function init() {\n  this.a = 6377397.155;\n  this.es = 0.006674372230614;\n  this.e = Math.sqrt(this.es);\n  if (!this.lat0) {\n    this.lat0 = 0.863937979737193;\n  }\n  if (!this.long0) {\n    this.long0 = 0.7417649320975901 - 0.308341501185665;\n  }\n  /* if scale not set default to 0.9999 */\n  if (!this.k0) {\n    this.k0 = 0.9999;\n  }\n  this.s45 = 0.785398163397448; /* 45 */\n  this.s90 = 2 * this.s45;\n  this.fi0 = this.lat0;\n  this.e2 = this.es;\n  this.e = Math.sqrt(this.e2);\n  this.alfa = Math.sqrt(1 + (this.e2 * Math.pow(Math.cos(this.fi0), 4)) / (1 - this.e2));\n  this.uq = 1.04216856380474;\n  this.u0 = Math.asin(Math.sin(this.fi0) / this.alfa);\n  this.g = Math.pow((1 + this.e * Math.sin(this.fi0)) / (1 - this.e * Math.sin(this.fi0)), this.alfa * this.e / 2);\n  this.k = Math.tan(this.u0 / 2 + this.s45) / Math.pow(Math.tan(this.fi0 / 2 + this.s45), this.alfa) * this.g;\n  this.k1 = this.k0;\n  this.n0 = this.a * Math.sqrt(1 - this.e2) / (1 - this.e2 * Math.pow(Math.sin(this.fi0), 2));\n  this.s0 = 1.37008346281555;\n  this.n = Math.sin(this.s0);\n  this.ro0 = this.k1 * this.n0 / Math.tan(this.s0);\n  this.ad = this.s90 - this.uq;\n}\n\n/* ellipsoid */\n/* calculate xy from lat/lon */\n/* Constants, identical to inverse transform function */\nexport function forward(p) {\n  var gfi, u, deltav, s, d, eps, ro;\n  var lon = p.x;\n  var lat = p.y;\n  var delta_lon = adjust_lon(lon - this.long0);\n  /* Transformation */\n  gfi = Math.pow(((1 + this.e * Math.sin(lat)) / (1 - this.e * Math.sin(lat))), (this.alfa * this.e / 2));\n  u = 2 * (Math.atan(this.k * Math.pow(Math.tan(lat / 2 + this.s45), this.alfa) / gfi) - this.s45);\n  deltav = -delta_lon * this.alfa;\n  s = Math.asin(Math.cos(this.ad) * Math.sin(u) + Math.sin(this.ad) * Math.cos(u) * Math.cos(deltav));\n  d = Math.asin(Math.cos(u) * Math.sin(deltav) / Math.cos(s));\n  eps = this.n * d;\n  ro = this.ro0 * Math.pow(Math.tan(this.s0 / 2 + this.s45), this.n) / Math.pow(Math.tan(s / 2 + this.s45), this.n);\n  p.y = ro * Math.cos(eps) / 1;\n  p.x = ro * Math.sin(eps) / 1;\n\n  if (!this.czech) {\n    p.y *= -1;\n    p.x *= -1;\n  }\n  return (p);\n}\n\n/* calculate lat/lon from xy */\nexport function inverse(p) {\n  var u, deltav, s, d, eps, ro, fi1;\n  var ok;\n\n  /* Transformation */\n  /* revert y, x*/\n  var tmp = p.x;\n  p.x = p.y;\n  p.y = tmp;\n  if (!this.czech) {\n    p.y *= -1;\n    p.x *= -1;\n  }\n  ro = Math.sqrt(p.x * p.x + p.y * p.y);\n  eps = Math.atan2(p.y, p.x);\n  d = eps / Math.sin(this.s0);\n  s = 2 * (Math.atan(Math.pow(this.ro0 / ro, 1 / this.n) * Math.tan(this.s0 / 2 + this.s45)) - this.s45);\n  u = Math.asin(Math.cos(this.ad) * Math.sin(s) - Math.sin(this.ad) * Math.cos(s) * Math.cos(d));\n  deltav = Math.asin(Math.cos(s) * Math.sin(d) / Math.cos(u));\n  p.x = this.long0 - deltav / this.alfa;\n  fi1 = u;\n  ok = 0;\n  var iter = 0;\n  do {\n    p.y = 2 * (Math.atan(Math.pow(this.k, - 1 / this.alfa) * Math.pow(Math.tan(u / 2 + this.s45), 1 / this.alfa) * Math.pow((1 + this.e * Math.sin(fi1)) / (1 - this.e * Math.sin(fi1)), this.e / 2)) - this.s45);\n    if (Math.abs(fi1 - p.y) < 0.0000000001) {\n      ok = 1;\n    }\n    fi1 = p.y;\n    iter += 1;\n  } while (ok === 0 && iter < 15);\n  if (iter >= 15) {\n    return null;\n  }\n\n  return (p);\n}\n\nexport var names = [\"Krovak\", \"krovak\"];\nexport default {\n  init: init,\n  forward: forward,\n  inverse: inverse,\n  names: names\n};\n","export default function(e0, e1, e2, e3, phi) {\n  return (e0 * phi - e1 * Math.sin(2 * phi) + e2 * Math.sin(4 * phi) - e3 * Math.sin(6 * phi));\n}","export default function(x) {\n  return (1 - 0.25 * x * (1 + x / 16 * (3 + 1.25 * x)));\n}","export default function(x) {\n  return (0.375 * x * (1 + 0.25 * x * (1 + 0.46875 * x)));\n}","export default function(x) {\n  return (0.05859375 * x * x * (1 + 0.75 * x));\n}","export default function(x) {\n  return (x * x * x * (35 / 3072));\n}","export default function(a, e, sinphi) {\n  var temp = e * sinphi;\n  return a / Math.sqrt(1 - temp * temp);\n}","import {HALF_PI} from '../constants/values';\nimport sign from './sign';\n\nexport default function(x) {\n  return (Math.abs(x) < HALF_PI) ? x : (x - (sign(x) * Math.PI));\n}\n","export default function(ml, e0, e1, e2, e3) {\n  var phi;\n  var dphi;\n\n  phi = ml / e0;\n  for (var i = 0; i < 15; i++) {\n    dphi = (ml - (e0 * phi - e1 * Math.sin(2 * phi) + e2 * Math.sin(4 * phi) - e3 * Math.sin(6 * phi))) / (e0 - 2 * e1 * Math.cos(2 * phi) + 4 * e2 * Math.cos(4 * phi) - 6 * e3 * Math.cos(6 * phi));\n    phi += dphi;\n    if (Math.abs(dphi) <= 0.0000000001) {\n      return phi;\n    }\n  }\n\n  //..reportError(\"IMLFN-CONV:Latitude failed to converge after 15 iterations\");\n  return NaN;\n}","import mlfn from '../common/mlfn';\nimport e0fn from '../common/e0fn';\nimport e1fn from '../common/e1fn';\nimport e2fn from '../common/e2fn';\nimport e3fn from '../common/e3fn';\nimport gN from '../common/gN';\nimport adjust_lon from '../common/adjust_lon';\nimport adjust_lat from '../common/adjust_lat';\nimport imlfn from '../common/imlfn';\nimport {HALF_PI, EPSLN} from '../constants/values';\n\nexport function init() {\n  if (!this.sphere) {\n    this.e0 = e0fn(this.es);\n    this.e1 = e1fn(this.es);\n    this.e2 = e2fn(this.es);\n    this.e3 = e3fn(this.es);\n    this.ml0 = this.a * mlfn(this.e0, this.e1, this.e2, this.e3, this.lat0);\n  }\n}\n\n/* Cassini forward equations--mapping lat,long to x,y\n  -----------------------------------------------------------------------*/\nexport function forward(p) {\n\n  /* Forward equations\n      -----------------*/\n  var x, y;\n  var lam = p.x;\n  var phi = p.y;\n  lam = adjust_lon(lam - this.long0);\n\n  if (this.sphere) {\n    x = this.a * Math.asin(Math.cos(phi) * Math.sin(lam));\n    y = this.a * (Math.atan2(Math.tan(phi), Math.cos(lam)) - this.lat0);\n  }\n  else {\n    //ellipsoid\n    var sinphi = Math.sin(phi);\n    var cosphi = Math.cos(phi);\n    var nl = gN(this.a, this.e, sinphi);\n    var tl = Math.tan(phi) * Math.tan(phi);\n    var al = lam * Math.cos(phi);\n    var asq = al * al;\n    var cl = this.es * cosphi * cosphi / (1 - this.es);\n    var ml = this.a * mlfn(this.e0, this.e1, this.e2, this.e3, phi);\n\n    x = nl * al * (1 - asq * tl * (1 / 6 - (8 - tl + 8 * cl) * asq / 120));\n    y = ml - this.ml0 + nl * sinphi / cosphi * asq * (0.5 + (5 - tl + 6 * cl) * asq / 24);\n\n\n  }\n\n  p.x = x + this.x0;\n  p.y = y + this.y0;\n  return p;\n}\n\n/* Inverse equations\n  -----------------*/\nexport function inverse(p) {\n  p.x -= this.x0;\n  p.y -= this.y0;\n  var x = p.x / this.a;\n  var y = p.y / this.a;\n  var phi, lam;\n\n  if (this.sphere) {\n    var dd = y + this.lat0;\n    phi = Math.asin(Math.sin(dd) * Math.cos(x));\n    lam = Math.atan2(Math.tan(x), Math.cos(dd));\n  }\n  else {\n    /* ellipsoid */\n    var ml1 = this.ml0 / this.a + y;\n    var phi1 = imlfn(ml1, this.e0, this.e1, this.e2, this.e3);\n    if (Math.abs(Math.abs(phi1) - HALF_PI) <= EPSLN) {\n      p.x = this.long0;\n      p.y = HALF_PI;\n      if (y < 0) {\n        p.y *= -1;\n      }\n      return p;\n    }\n    var nl1 = gN(this.a, this.e, Math.sin(phi1));\n\n    var rl1 = nl1 * nl1 * nl1 / this.a / this.a * (1 - this.es);\n    var tl1 = Math.pow(Math.tan(phi1), 2);\n    var dl = x * this.a / nl1;\n    var dsq = dl * dl;\n    phi = phi1 - nl1 * Math.tan(phi1) / rl1 * dl * dl * (0.5 - (1 + 3 * tl1) * dl * dl / 24);\n    lam = dl * (1 - dsq * (tl1 / 3 + (1 + 3 * tl1) * tl1 * dsq / 15)) / Math.cos(phi1);\n\n  }\n\n  p.x = adjust_lon(lam + this.long0);\n  p.y = adjust_lat(phi);\n  return p;\n\n}\n\nexport var names = [\"Cassini\", \"Cassini_Soldner\", \"cass\"];\nexport default {\n  init: init,\n  forward: forward,\n  inverse: inverse,\n  names: names\n};\n","export default function(eccent, sinphi) {\n  var con;\n  if (eccent > 1.0e-7) {\n    con = eccent * sinphi;\n    return ((1 - eccent * eccent) * (sinphi / (1 - con * con) - (0.5 / eccent) * Math.log((1 - con) / (1 + con))));\n  }\n  else {\n    return (2 * sinphi);\n  }\n}","\nimport {HALF_PI, EPSLN, FORTPI} from '../constants/values';\n\nimport qsfnz from '../common/qsfnz';\nimport adjust_lon from '../common/adjust_lon';\n\n/*\n  reference\n    \"New Equal-Area Map Projections for Noncircular Regions\", John P. Snyder,\n    The American Cartographer, Vol 15, No. 4, October 1988, pp. 341-355.\n  */\n\nexport var S_POLE = 1;\n\nexport var N_POLE = 2;\nexport var EQUIT = 3;\nexport var OBLIQ = 4;\n\n/* Initialize the Lambert Azimuthal Equal Area projection\n  ------------------------------------------------------*/\nexport function init() {\n  var t = Math.abs(this.lat0);\n  if (Math.abs(t - HALF_PI) < EPSLN) {\n    this.mode = this.lat0 < 0 ? this.S_POLE : this.N_POLE;\n  }\n  else if (Math.abs(t) < EPSLN) {\n    this.mode = this.EQUIT;\n  }\n  else {\n    this.mode = this.OBLIQ;\n  }\n  if (this.es > 0) {\n    var sinphi;\n\n    this.qp = qsfnz(this.e, 1);\n    this.mmf = 0.5 / (1 - this.es);\n    this.apa = authset(this.es);\n    switch (this.mode) {\n    case this.N_POLE:\n      this.dd = 1;\n      break;\n    case this.S_POLE:\n      this.dd = 1;\n      break;\n    case this.EQUIT:\n      this.rq = Math.sqrt(0.5 * this.qp);\n      this.dd = 1 / this.rq;\n      this.xmf = 1;\n      this.ymf = 0.5 * this.qp;\n      break;\n    case this.OBLIQ:\n      this.rq = Math.sqrt(0.5 * this.qp);\n      sinphi = Math.sin(this.lat0);\n      this.sinb1 = qsfnz(this.e, sinphi) / this.qp;\n      this.cosb1 = Math.sqrt(1 - this.sinb1 * this.sinb1);\n      this.dd = Math.cos(this.lat0) / (Math.sqrt(1 - this.es * sinphi * sinphi) * this.rq * this.cosb1);\n      this.ymf = (this.xmf = this.rq) / this.dd;\n      this.xmf *= this.dd;\n      break;\n    }\n  }\n  else {\n    if (this.mode === this.OBLIQ) {\n      this.sinph0 = Math.sin(this.lat0);\n      this.cosph0 = Math.cos(this.lat0);\n    }\n  }\n}\n\n/* Lambert Azimuthal Equal Area forward equations--mapping lat,long to x,y\n  -----------------------------------------------------------------------*/\nexport function forward(p) {\n\n  /* Forward equations\n      -----------------*/\n  var x, y, coslam, sinlam, sinphi, q, sinb, cosb, b, cosphi;\n  var lam = p.x;\n  var phi = p.y;\n\n  lam = adjust_lon(lam - this.long0);\n  if (this.sphere) {\n    sinphi = Math.sin(phi);\n    cosphi = Math.cos(phi);\n    coslam = Math.cos(lam);\n    if (this.mode === this.OBLIQ || this.mode === this.EQUIT) {\n      y = (this.mode === this.EQUIT) ? 1 + cosphi * coslam : 1 + this.sinph0 * sinphi + this.cosph0 * cosphi * coslam;\n      if (y <= EPSLN) {\n        return null;\n      }\n      y = Math.sqrt(2 / y);\n      x = y * cosphi * Math.sin(lam);\n      y *= (this.mode === this.EQUIT) ? sinphi : this.cosph0 * sinphi - this.sinph0 * cosphi * coslam;\n    }\n    else if (this.mode === this.N_POLE || this.mode === this.S_POLE) {\n      if (this.mode === this.N_POLE) {\n        coslam = -coslam;\n      }\n      if (Math.abs(phi + this.phi0) < EPSLN) {\n        return null;\n      }\n      y = FORTPI - phi * 0.5;\n      y = 2 * ((this.mode === this.S_POLE) ? Math.cos(y) : Math.sin(y));\n      x = y * Math.sin(lam);\n      y *= coslam;\n    }\n  }\n  else {\n    sinb = 0;\n    cosb = 0;\n    b = 0;\n    coslam = Math.cos(lam);\n    sinlam = Math.sin(lam);\n    sinphi = Math.sin(phi);\n    q = qsfnz(this.e, sinphi);\n    if (this.mode === this.OBLIQ || this.mode === this.EQUIT) {\n      sinb = q / this.qp;\n      cosb = Math.sqrt(1 - sinb * sinb);\n    }\n    switch (this.mode) {\n    case this.OBLIQ:\n      b = 1 + this.sinb1 * sinb + this.cosb1 * cosb * coslam;\n      break;\n    case this.EQUIT:\n      b = 1 + cosb * coslam;\n      break;\n    case this.N_POLE:\n      b = HALF_PI + phi;\n      q = this.qp - q;\n      break;\n    case this.S_POLE:\n      b = phi - HALF_PI;\n      q = this.qp + q;\n      break;\n    }\n    if (Math.abs(b) < EPSLN) {\n      return null;\n    }\n    switch (this.mode) {\n    case this.OBLIQ:\n    case this.EQUIT:\n      b = Math.sqrt(2 / b);\n      if (this.mode === this.OBLIQ) {\n        y = this.ymf * b * (this.cosb1 * sinb - this.sinb1 * cosb * coslam);\n      }\n      else {\n        y = (b = Math.sqrt(2 / (1 + cosb * coslam))) * sinb * this.ymf;\n      }\n      x = this.xmf * b * cosb * sinlam;\n      break;\n    case this.N_POLE:\n    case this.S_POLE:\n      if (q >= 0) {\n        x = (b = Math.sqrt(q)) * sinlam;\n        y = coslam * ((this.mode === this.S_POLE) ? b : -b);\n      }\n      else {\n        x = y = 0;\n      }\n      break;\n    }\n  }\n\n  p.x = this.a * x + this.x0;\n  p.y = this.a * y + this.y0;\n  return p;\n}\n\n/* Inverse equations\n  -----------------*/\nexport function inverse(p) {\n  p.x -= this.x0;\n  p.y -= this.y0;\n  var x = p.x / this.a;\n  var y = p.y / this.a;\n  var lam, phi, cCe, sCe, q, rho, ab;\n  if (this.sphere) {\n    var cosz = 0,\n      rh, sinz = 0;\n\n    rh = Math.sqrt(x * x + y * y);\n    phi = rh * 0.5;\n    if (phi > 1) {\n      return null;\n    }\n    phi = 2 * Math.asin(phi);\n    if (this.mode === this.OBLIQ || this.mode === this.EQUIT) {\n      sinz = Math.sin(phi);\n      cosz = Math.cos(phi);\n    }\n    switch (this.mode) {\n    case this.EQUIT:\n      phi = (Math.abs(rh) <= EPSLN) ? 0 : Math.asin(y * sinz / rh);\n      x *= sinz;\n      y = cosz * rh;\n      break;\n    case this.OBLIQ:\n      phi = (Math.abs(rh) <= EPSLN) ? this.phi0 : Math.asin(cosz * this.sinph0 + y * sinz * this.cosph0 / rh);\n      x *= sinz * this.cosph0;\n      y = (cosz - Math.sin(phi) * this.sinph0) * rh;\n      break;\n    case this.N_POLE:\n      y = -y;\n      phi = HALF_PI - phi;\n      break;\n    case this.S_POLE:\n      phi -= HALF_PI;\n      break;\n    }\n    lam = (y === 0 && (this.mode === this.EQUIT || this.mode === this.OBLIQ)) ? 0 : Math.atan2(x, y);\n  }\n  else {\n    ab = 0;\n    if (this.mode === this.OBLIQ || this.mode === this.EQUIT) {\n      x /= this.dd;\n      y *= this.dd;\n      rho = Math.sqrt(x * x + y * y);\n      if (rho < EPSLN) {\n        p.x = 0;\n        p.y = this.phi0;\n        return p;\n      }\n      sCe = 2 * Math.asin(0.5 * rho / this.rq);\n      cCe = Math.cos(sCe);\n      x *= (sCe = Math.sin(sCe));\n      if (this.mode === this.OBLIQ) {\n        ab = cCe * this.sinb1 + y * sCe * this.cosb1 / rho;\n        q = this.qp * ab;\n        y = rho * this.cosb1 * cCe - y * this.sinb1 * sCe;\n      }\n      else {\n        ab = y * sCe / rho;\n        q = this.qp * ab;\n        y = rho * cCe;\n      }\n    }\n    else if (this.mode === this.N_POLE || this.mode === this.S_POLE) {\n      if (this.mode === this.N_POLE) {\n        y = -y;\n      }\n      q = (x * x + y * y);\n      if (!q) {\n        p.x = 0;\n        p.y = this.phi0;\n        return p;\n      }\n      ab = 1 - q / this.qp;\n      if (this.mode === this.S_POLE) {\n        ab = -ab;\n      }\n    }\n    lam = Math.atan2(x, y);\n    phi = authlat(Math.asin(ab), this.apa);\n  }\n\n  p.x = adjust_lon(this.long0 + lam);\n  p.y = phi;\n  return p;\n}\n\n/* determine latitude from authalic latitude */\nvar P00 = 0.33333333333333333333;\n\nvar P01 = 0.17222222222222222222;\nvar P02 = 0.10257936507936507936;\nvar P10 = 0.06388888888888888888;\nvar P11 = 0.06640211640211640211;\nvar P20 = 0.01641501294219154443;\n\nfunction authset(es) {\n  var t;\n  var APA = [];\n  APA[0] = es * P00;\n  t = es * es;\n  APA[0] += t * P01;\n  APA[1] = t * P10;\n  t *= es;\n  APA[0] += t * P02;\n  APA[1] += t * P11;\n  APA[2] = t * P20;\n  return APA;\n}\n\nfunction authlat(beta, APA) {\n  var t = beta + beta;\n  return (beta + APA[0] * Math.sin(t) + APA[1] * Math.sin(t + t) + APA[2] * Math.sin(t + t + t));\n}\n\nexport var names = [\"Lambert Azimuthal Equal Area\", \"Lambert_Azimuthal_Equal_Area\", \"laea\"];\nexport default {\n  init: init,\n  forward: forward,\n  inverse: inverse,\n  names: names,\n  S_POLE: S_POLE,\n  N_POLE: N_POLE,\n  EQUIT: EQUIT,\n  OBLIQ: OBLIQ\n};\n","export default function(x) {\n  if (Math.abs(x) > 1) {\n    x = (x > 1) ? 1 : -1;\n  }\n  return Math.asin(x);\n}","import msfnz from '../common/msfnz';\nimport qsfnz from '../common/qsfnz';\nimport adjust_lon from '../common/adjust_lon';\nimport asinz from '../common/asinz';\nimport {EPSLN} from '../constants/values';\n\nexport function init() {\n\n  if (Math.abs(this.lat1 + this.lat2) < EPSLN) {\n    return;\n  }\n  this.temp = this.b / this.a;\n  this.es = 1 - Math.pow(this.temp, 2);\n  this.e3 = Math.sqrt(this.es);\n\n  this.sin_po = Math.sin(this.lat1);\n  this.cos_po = Math.cos(this.lat1);\n  this.t1 = this.sin_po;\n  this.con = this.sin_po;\n  this.ms1 = msfnz(this.e3, this.sin_po, this.cos_po);\n  this.qs1 = qsfnz(this.e3, this.sin_po, this.cos_po);\n\n  this.sin_po = Math.sin(this.lat2);\n  this.cos_po = Math.cos(this.lat2);\n  this.t2 = this.sin_po;\n  this.ms2 = msfnz(this.e3, this.sin_po, this.cos_po);\n  this.qs2 = qsfnz(this.e3, this.sin_po, this.cos_po);\n\n  this.sin_po = Math.sin(this.lat0);\n  this.cos_po = Math.cos(this.lat0);\n  this.t3 = this.sin_po;\n  this.qs0 = qsfnz(this.e3, this.sin_po, this.cos_po);\n\n  if (Math.abs(this.lat1 - this.lat2) > EPSLN) {\n    this.ns0 = (this.ms1 * this.ms1 - this.ms2 * this.ms2) / (this.qs2 - this.qs1);\n  }\n  else {\n    this.ns0 = this.con;\n  }\n  this.c = this.ms1 * this.ms1 + this.ns0 * this.qs1;\n  this.rh = this.a * Math.sqrt(this.c - this.ns0 * this.qs0) / this.ns0;\n}\n\n/* Albers Conical Equal Area forward equations--mapping lat,long to x,y\n  -------------------------------------------------------------------*/\nexport function forward(p) {\n\n  var lon = p.x;\n  var lat = p.y;\n\n  this.sin_phi = Math.sin(lat);\n  this.cos_phi = Math.cos(lat);\n\n  var qs = qsfnz(this.e3, this.sin_phi, this.cos_phi);\n  var rh1 = this.a * Math.sqrt(this.c - this.ns0 * qs) / this.ns0;\n  var theta = this.ns0 * adjust_lon(lon - this.long0);\n  var x = rh1 * Math.sin(theta) + this.x0;\n  var y = this.rh - rh1 * Math.cos(theta) + this.y0;\n\n  p.x = x;\n  p.y = y;\n  return p;\n}\n\nexport function inverse(p) {\n  var rh1, qs, con, theta, lon, lat;\n\n  p.x -= this.x0;\n  p.y = this.rh - p.y + this.y0;\n  if (this.ns0 >= 0) {\n    rh1 = Math.sqrt(p.x * p.x + p.y * p.y);\n    con = 1;\n  }\n  else {\n    rh1 = -Math.sqrt(p.x * p.x + p.y * p.y);\n    con = -1;\n  }\n  theta = 0;\n  if (rh1 !== 0) {\n    theta = Math.atan2(con * p.x, con * p.y);\n  }\n  con = rh1 * this.ns0 / this.a;\n  if (this.sphere) {\n    lat = Math.asin((this.c - con * con) / (2 * this.ns0));\n  }\n  else {\n    qs = (this.c - con * con) / this.ns0;\n    lat = this.phi1z(this.e3, qs);\n  }\n\n  lon = adjust_lon(theta / this.ns0 + this.long0);\n  p.x = lon;\n  p.y = lat;\n  return p;\n}\n\n/* Function to compute phi1, the latitude for the inverse of the\n   Albers Conical Equal-Area projection.\n-------------------------------------------*/\nexport function phi1z(eccent, qs) {\n  var sinphi, cosphi, con, com, dphi;\n  var phi = asinz(0.5 * qs);\n  if (eccent < EPSLN) {\n    return phi;\n  }\n\n  var eccnts = eccent * eccent;\n  for (var i = 1; i <= 25; i++) {\n    sinphi = Math.sin(phi);\n    cosphi = Math.cos(phi);\n    con = eccent * sinphi;\n    com = 1 - con * con;\n    dphi = 0.5 * com * com / cosphi * (qs / (1 - eccnts) - sinphi / com + 0.5 / eccent * Math.log((1 - con) / (1 + con)));\n    phi = phi + dphi;\n    if (Math.abs(dphi) <= 1e-7) {\n      return phi;\n    }\n  }\n  return null;\n}\n\nexport var names = [\"Albers_Conic_Equal_Area\", \"Albers\", \"aea\"];\nexport default {\n  init: init,\n  forward: forward,\n  inverse: inverse,\n  names: names,\n  phi1z: phi1z\n};\n","import adjust_lon from '../common/adjust_lon';\nimport asinz from '../common/asinz';\nimport {EPSLN} from '../constants/values';\n\n/*\n  reference:\n    Wolfram Mathworld \"Gnomonic Projection\"\n    http://mathworld.wolfram.com/GnomonicProjection.html\n    Accessed: 12th November 2009\n  */\nexport function init() {\n\n  /* Place parameters in static storage for common use\n      -------------------------------------------------*/\n  this.sin_p14 = Math.sin(this.lat0);\n  this.cos_p14 = Math.cos(this.lat0);\n  // Approximation for projecting points to the horizon (infinity)\n  this.infinity_dist = 1000 * this.a;\n  this.rc = 1;\n}\n\n/* Gnomonic forward equations--mapping lat,long to x,y\n    ---------------------------------------------------*/\nexport function forward(p) {\n  var sinphi, cosphi; /* sin and cos value        */\n  var dlon; /* delta longitude value      */\n  var coslon; /* cos of longitude        */\n  var ksp; /* scale factor          */\n  var g;\n  var x, y;\n  var lon = p.x;\n  var lat = p.y;\n  /* Forward equations\n      -----------------*/\n  dlon = adjust_lon(lon - this.long0);\n\n  sinphi = Math.sin(lat);\n  cosphi = Math.cos(lat);\n\n  coslon = Math.cos(dlon);\n  g = this.sin_p14 * sinphi + this.cos_p14 * cosphi * coslon;\n  ksp = 1;\n  if ((g > 0) || (Math.abs(g) <= EPSLN)) {\n    x = this.x0 + this.a * ksp * cosphi * Math.sin(dlon) / g;\n    y = this.y0 + this.a * ksp * (this.cos_p14 * sinphi - this.sin_p14 * cosphi * coslon) / g;\n  }\n  else {\n\n    // Point is in the opposing hemisphere and is unprojectable\n    // We still need to return a reasonable point, so we project\n    // to infinity, on a bearing\n    // equivalent to the northern hemisphere equivalent\n    // This is a reasonable approximation for short shapes and lines that\n    // straddle the horizon.\n\n    x = this.x0 + this.infinity_dist * cosphi * Math.sin(dlon);\n    y = this.y0 + this.infinity_dist * (this.cos_p14 * sinphi - this.sin_p14 * cosphi * coslon);\n\n  }\n  p.x = x;\n  p.y = y;\n  return p;\n}\n\nexport function inverse(p) {\n  var rh; /* Rho */\n  var sinc, cosc;\n  var c;\n  var lon, lat;\n\n  /* Inverse equations\n      -----------------*/\n  p.x = (p.x - this.x0) / this.a;\n  p.y = (p.y - this.y0) / this.a;\n\n  p.x /= this.k0;\n  p.y /= this.k0;\n\n  if ((rh = Math.sqrt(p.x * p.x + p.y * p.y))) {\n    c = Math.atan2(rh, this.rc);\n    sinc = Math.sin(c);\n    cosc = Math.cos(c);\n\n    lat = asinz(cosc * this.sin_p14 + (p.y * sinc * this.cos_p14) / rh);\n    lon = Math.atan2(p.x * sinc, rh * this.cos_p14 * cosc - p.y * this.sin_p14 * sinc);\n    lon = adjust_lon(this.long0 + lon);\n  }\n  else {\n    lat = this.phic0;\n    lon = 0;\n  }\n\n  p.x = lon;\n  p.y = lat;\n  return p;\n}\n\nexport var names = [\"gnom\"];\nexport default {\n  init: init,\n  forward: forward,\n  inverse: inverse,\n  names: names\n};\n","import {HALF_PI} from '../constants/values';\n\nexport default function(eccent, q) {\n  var temp = 1 - (1 - eccent * eccent) / (2 * eccent) * Math.log((1 - eccent) / (1 + eccent));\n  if (Math.abs(Math.abs(q) - temp) < 1.0E-6) {\n    if (q < 0) {\n      return (-1 * HALF_PI);\n    }\n    else {\n      return HALF_PI;\n    }\n  }\n  //var phi = 0.5* q/(1-eccent*eccent);\n  var phi = Math.asin(0.5 * q);\n  var dphi;\n  var sin_phi;\n  var cos_phi;\n  var con;\n  for (var i = 0; i < 30; i++) {\n    sin_phi = Math.sin(phi);\n    cos_phi = Math.cos(phi);\n    con = eccent * sin_phi;\n    dphi = Math.pow(1 - con * con, 2) / (2 * cos_phi) * (q / (1 - eccent * eccent) - sin_phi / (1 - con * con) + 0.5 / eccent * Math.log((1 - con) / (1 + con)));\n    phi += dphi;\n    if (Math.abs(dphi) <= 0.0000000001) {\n      return phi;\n    }\n  }\n\n  //console.log(\"IQSFN-CONV:Latitude failed to converge after 30 iterations\");\n  return NaN;\n}\n","import adjust_lon from '../common/adjust_lon';\nimport qsfnz from '../common/qsfnz';\nimport msfnz from '../common/msfnz';\nimport iqsfnz from '../common/iqsfnz';\n\n/*\n  reference:\n    \"Cartographic Projection Procedures for the UNIX Environment-\n    A User's Manual\" by Gerald I. Evenden,\n    USGS Open File Report 90-284and Release 4 Interim Reports (2003)\n*/\nexport function init() {\n  //no-op\n  if (!this.sphere) {\n    this.k0 = msfnz(this.e, Math.sin(this.lat_ts), Math.cos(this.lat_ts));\n  }\n}\n\n/* Cylindrical Equal Area forward equations--mapping lat,long to x,y\n    ------------------------------------------------------------*/\nexport function forward(p) {\n  var lon = p.x;\n  var lat = p.y;\n  var x, y;\n  /* Forward equations\n      -----------------*/\n  var dlon = adjust_lon(lon - this.long0);\n  if (this.sphere) {\n    x = this.x0 + this.a * dlon * Math.cos(this.lat_ts);\n    y = this.y0 + this.a * Math.sin(lat) / Math.cos(this.lat_ts);\n  }\n  else {\n    var qs = qsfnz(this.e, Math.sin(lat));\n    x = this.x0 + this.a * this.k0 * dlon;\n    y = this.y0 + this.a * qs * 0.5 / this.k0;\n  }\n\n  p.x = x;\n  p.y = y;\n  return p;\n}\n\n/* Cylindrical Equal Area inverse equations--mapping x,y to lat/long\n    ------------------------------------------------------------*/\nexport function inverse(p) {\n  p.x -= this.x0;\n  p.y -= this.y0;\n  var lon, lat;\n\n  if (this.sphere) {\n    lon = adjust_lon(this.long0 + (p.x / this.a) / Math.cos(this.lat_ts));\n    lat = Math.asin((p.y / this.a) * Math.cos(this.lat_ts));\n  }\n  else {\n    lat = iqsfnz(this.e, 2 * p.y * this.k0 / this.a);\n    lon = adjust_lon(this.long0 + p.x / (this.a * this.k0));\n  }\n\n  p.x = lon;\n  p.y = lat;\n  return p;\n}\n\nexport var names = [\"cea\"];\nexport default {\n  init: init,\n  forward: forward,\n  inverse: inverse,\n  names: names\n};\n","import adjust_lon from '../common/adjust_lon';\nimport adjust_lat from '../common/adjust_lat';\n\nexport function init() {\n\n  this.x0 = this.x0 || 0;\n  this.y0 = this.y0 || 0;\n  this.lat0 = this.lat0 || 0;\n  this.long0 = this.long0 || 0;\n  this.lat_ts = this.lat_ts || 0;\n  this.title = this.title || \"Equidistant Cylindrical (Plate Carre)\";\n\n  this.rc = Math.cos(this.lat_ts);\n}\n\n// forward equations--mapping lat,long to x,y\n// -----------------------------------------------------------------\nexport function forward(p) {\n\n  var lon = p.x;\n  var lat = p.y;\n\n  var dlon = adjust_lon(lon - this.long0);\n  var dlat = adjust_lat(lat - this.lat0);\n  p.x = this.x0 + (this.a * dlon * this.rc);\n  p.y = this.y0 + (this.a * dlat);\n  return p;\n}\n\n// inverse equations--mapping x,y to lat/long\n// -----------------------------------------------------------------\nexport function inverse(p) {\n\n  var x = p.x;\n  var y = p.y;\n\n  p.x = adjust_lon(this.long0 + ((x - this.x0) / (this.a * this.rc)));\n  p.y = adjust_lat(this.lat0 + ((y - this.y0) / (this.a)));\n  return p;\n}\n\nexport var names = [\"Equirectangular\", \"Equidistant_Cylindrical\", \"eqc\"];\nexport default {\n  init: init,\n  forward: forward,\n  inverse: inverse,\n  names: names\n};\n","import e0fn from '../common/e0fn';\nimport e1fn from '../common/e1fn';\nimport e2fn from '../common/e2fn';\nimport e3fn from '../common/e3fn';\nimport adjust_lon from '../common/adjust_lon';\nimport adjust_lat from '../common/adjust_lat';\nimport mlfn from '../common/mlfn';\nimport {EPSLN} from '../constants/values';\n\nimport gN from '../common/gN';\nvar MAX_ITER = 20;\n\nexport function init() {\n  /* Place parameters in static storage for common use\n      -------------------------------------------------*/\n  this.temp = this.b / this.a;\n  this.es = 1 - Math.pow(this.temp, 2); // devait etre dans tmerc.js mais n y est pas donc je commente sinon retour de valeurs nulles\n  this.e = Math.sqrt(this.es);\n  this.e0 = e0fn(this.es);\n  this.e1 = e1fn(this.es);\n  this.e2 = e2fn(this.es);\n  this.e3 = e3fn(this.es);\n  this.ml0 = this.a * mlfn(this.e0, this.e1, this.e2, this.e3, this.lat0); //si que des zeros le calcul ne se fait pas\n}\n\n/* Polyconic forward equations--mapping lat,long to x,y\n    ---------------------------------------------------*/\nexport function forward(p) {\n  var lon = p.x;\n  var lat = p.y;\n  var x, y, el;\n  var dlon = adjust_lon(lon - this.long0);\n  el = dlon * Math.sin(lat);\n  if (this.sphere) {\n    if (Math.abs(lat) <= EPSLN) {\n      x = this.a * dlon;\n      y = -1 * this.a * this.lat0;\n    }\n    else {\n      x = this.a * Math.sin(el) / Math.tan(lat);\n      y = this.a * (adjust_lat(lat - this.lat0) + (1 - Math.cos(el)) / Math.tan(lat));\n    }\n  }\n  else {\n    if (Math.abs(lat) <= EPSLN) {\n      x = this.a * dlon;\n      y = -1 * this.ml0;\n    }\n    else {\n      var nl = gN(this.a, this.e, Math.sin(lat)) / Math.tan(lat);\n      x = nl * Math.sin(el);\n      y = this.a * mlfn(this.e0, this.e1, this.e2, this.e3, lat) - this.ml0 + nl * (1 - Math.cos(el));\n    }\n\n  }\n  p.x = x + this.x0;\n  p.y = y + this.y0;\n  return p;\n}\n\n/* Inverse equations\n  -----------------*/\nexport function inverse(p) {\n  var lon, lat, x, y, i;\n  var al, bl;\n  var phi, dphi;\n  x = p.x - this.x0;\n  y = p.y - this.y0;\n\n  if (this.sphere) {\n    if (Math.abs(y + this.a * this.lat0) <= EPSLN) {\n      lon = adjust_lon(x / this.a + this.long0);\n      lat = 0;\n    }\n    else {\n      al = this.lat0 + y / this.a;\n      bl = x * x / this.a / this.a + al * al;\n      phi = al;\n      var tanphi;\n      for (i = MAX_ITER; i; --i) {\n        tanphi = Math.tan(phi);\n        dphi = -1 * (al * (phi * tanphi + 1) - phi - 0.5 * (phi * phi + bl) * tanphi) / ((phi - al) / tanphi - 1);\n        phi += dphi;\n        if (Math.abs(dphi) <= EPSLN) {\n          lat = phi;\n          break;\n        }\n      }\n      lon = adjust_lon(this.long0 + (Math.asin(x * Math.tan(phi) / this.a)) / Math.sin(lat));\n    }\n  }\n  else {\n    if (Math.abs(y + this.ml0) <= EPSLN) {\n      lat = 0;\n      lon = adjust_lon(this.long0 + x / this.a);\n    }\n    else {\n\n      al = (this.ml0 + y) / this.a;\n      bl = x * x / this.a / this.a + al * al;\n      phi = al;\n      var cl, mln, mlnp, ma;\n      var con;\n      for (i = MAX_ITER; i; --i) {\n        con = this.e * Math.sin(phi);\n        cl = Math.sqrt(1 - con * con) * Math.tan(phi);\n        mln = this.a * mlfn(this.e0, this.e1, this.e2, this.e3, phi);\n        mlnp = this.e0 - 2 * this.e1 * Math.cos(2 * phi) + 4 * this.e2 * Math.cos(4 * phi) - 6 * this.e3 * Math.cos(6 * phi);\n        ma = mln / this.a;\n        dphi = (al * (cl * ma + 1) - ma - 0.5 * cl * (ma * ma + bl)) / (this.es * Math.sin(2 * phi) * (ma * ma + bl - 2 * al * ma) / (4 * cl) + (al - ma) * (cl * mlnp - 2 / Math.sin(2 * phi)) - mlnp);\n        phi -= dphi;\n        if (Math.abs(dphi) <= EPSLN) {\n          lat = phi;\n          break;\n        }\n      }\n\n      //lat=phi4z(this.e,this.e0,this.e1,this.e2,this.e3,al,bl,0,0);\n      cl = Math.sqrt(1 - this.es * Math.pow(Math.sin(lat), 2)) * Math.tan(lat);\n      lon = adjust_lon(this.long0 + Math.asin(x * cl / this.a) / Math.sin(lat));\n    }\n  }\n\n  p.x = lon;\n  p.y = lat;\n  return p;\n}\n\nexport var names = [\"Polyconic\", \"poly\"];\nexport default {\n  init: init,\n  forward: forward,\n  inverse: inverse,\n  names: names\n};\n","import {SEC_TO_RAD} from '../constants/values';\n\n/*\n  reference\n    Department of Land and Survey Technical Circular 1973/32\n      http://www.linz.govt.nz/docs/miscellaneous/nz-map-definition.pdf\n    OSG Technical Report 4.1\n      http://www.linz.govt.nz/docs/miscellaneous/nzmg.pdf\n  */\n\n/**\n * iterations: Number of iterations to refine inverse transform.\n *     0 -> km accuracy\n *     1 -> m accuracy -- suitable for most mapping applications\n *     2 -> mm accuracy\n */\nexport var iterations = 1;\n\nexport function init() {\n  this.A = [];\n  this.A[1] = 0.6399175073;\n  this.A[2] = -0.1358797613;\n  this.A[3] = 0.063294409;\n  this.A[4] = -0.02526853;\n  this.A[5] = 0.0117879;\n  this.A[6] = -0.0055161;\n  this.A[7] = 0.0026906;\n  this.A[8] = -0.001333;\n  this.A[9] = 0.00067;\n  this.A[10] = -0.00034;\n\n  this.B_re = [];\n  this.B_im = [];\n  this.B_re[1] = 0.7557853228;\n  this.B_im[1] = 0;\n  this.B_re[2] = 0.249204646;\n  this.B_im[2] = 0.003371507;\n  this.B_re[3] = -0.001541739;\n  this.B_im[3] = 0.041058560;\n  this.B_re[4] = -0.10162907;\n  this.B_im[4] = 0.01727609;\n  this.B_re[5] = -0.26623489;\n  this.B_im[5] = -0.36249218;\n  this.B_re[6] = -0.6870983;\n  this.B_im[6] = -1.1651967;\n\n  this.C_re = [];\n  this.C_im = [];\n  this.C_re[1] = 1.3231270439;\n  this.C_im[1] = 0;\n  this.C_re[2] = -0.577245789;\n  this.C_im[2] = -0.007809598;\n  this.C_re[3] = 0.508307513;\n  this.C_im[3] = -0.112208952;\n  this.C_re[4] = -0.15094762;\n  this.C_im[4] = 0.18200602;\n  this.C_re[5] = 1.01418179;\n  this.C_im[5] = 1.64497696;\n  this.C_re[6] = 1.9660549;\n  this.C_im[6] = 2.5127645;\n\n  this.D = [];\n  this.D[1] = 1.5627014243;\n  this.D[2] = 0.5185406398;\n  this.D[3] = -0.03333098;\n  this.D[4] = -0.1052906;\n  this.D[5] = -0.0368594;\n  this.D[6] = 0.007317;\n  this.D[7] = 0.01220;\n  this.D[8] = 0.00394;\n  this.D[9] = -0.0013;\n}\n\n/**\n    New Zealand Map Grid Forward  - long/lat to x/y\n    long/lat in radians\n  */\nexport function forward(p) {\n  var n;\n  var lon = p.x;\n  var lat = p.y;\n\n  var delta_lat = lat - this.lat0;\n  var delta_lon = lon - this.long0;\n\n  // 1. Calculate d_phi and d_psi    ...                          // and d_lambda\n  // For this algorithm, delta_latitude is in seconds of arc x 10-5, so we need to scale to those units. Longitude is radians.\n  var d_phi = delta_lat / SEC_TO_RAD * 1E-5;\n  var d_lambda = delta_lon;\n  var d_phi_n = 1; // d_phi^0\n\n  var d_psi = 0;\n  for (n = 1; n <= 10; n++) {\n    d_phi_n = d_phi_n * d_phi;\n    d_psi = d_psi + this.A[n] * d_phi_n;\n  }\n\n  // 2. Calculate theta\n  var th_re = d_psi;\n  var th_im = d_lambda;\n\n  // 3. Calculate z\n  var th_n_re = 1;\n  var th_n_im = 0; // theta^0\n  var th_n_re1;\n  var th_n_im1;\n\n  var z_re = 0;\n  var z_im = 0;\n  for (n = 1; n <= 6; n++) {\n    th_n_re1 = th_n_re * th_re - th_n_im * th_im;\n    th_n_im1 = th_n_im * th_re + th_n_re * th_im;\n    th_n_re = th_n_re1;\n    th_n_im = th_n_im1;\n    z_re = z_re + this.B_re[n] * th_n_re - this.B_im[n] * th_n_im;\n    z_im = z_im + this.B_im[n] * th_n_re + this.B_re[n] * th_n_im;\n  }\n\n  // 4. Calculate easting and northing\n  p.x = (z_im * this.a) + this.x0;\n  p.y = (z_re * this.a) + this.y0;\n\n  return p;\n}\n\n/**\n    New Zealand Map Grid Inverse  -  x/y to long/lat\n  */\nexport function inverse(p) {\n  var n;\n  var x = p.x;\n  var y = p.y;\n\n  var delta_x = x - this.x0;\n  var delta_y = y - this.y0;\n\n  // 1. Calculate z\n  var z_re = delta_y / this.a;\n  var z_im = delta_x / this.a;\n\n  // 2a. Calculate theta - first approximation gives km accuracy\n  var z_n_re = 1;\n  var z_n_im = 0; // z^0\n  var z_n_re1;\n  var z_n_im1;\n\n  var th_re = 0;\n  var th_im = 0;\n  for (n = 1; n <= 6; n++) {\n    z_n_re1 = z_n_re * z_re - z_n_im * z_im;\n    z_n_im1 = z_n_im * z_re + z_n_re * z_im;\n    z_n_re = z_n_re1;\n    z_n_im = z_n_im1;\n    th_re = th_re + this.C_re[n] * z_n_re - this.C_im[n] * z_n_im;\n    th_im = th_im + this.C_im[n] * z_n_re + this.C_re[n] * z_n_im;\n  }\n\n  // 2b. Iterate to refine the accuracy of the calculation\n  //        0 iterations gives km accuracy\n  //        1 iteration gives m accuracy -- good enough for most mapping applications\n  //        2 iterations bives mm accuracy\n  for (var i = 0; i < this.iterations; i++) {\n    var th_n_re = th_re;\n    var th_n_im = th_im;\n    var th_n_re1;\n    var th_n_im1;\n\n    var num_re = z_re;\n    var num_im = z_im;\n    for (n = 2; n <= 6; n++) {\n      th_n_re1 = th_n_re * th_re - th_n_im * th_im;\n      th_n_im1 = th_n_im * th_re + th_n_re * th_im;\n      th_n_re = th_n_re1;\n      th_n_im = th_n_im1;\n      num_re = num_re + (n - 1) * (this.B_re[n] * th_n_re - this.B_im[n] * th_n_im);\n      num_im = num_im + (n - 1) * (this.B_im[n] * th_n_re + this.B_re[n] * th_n_im);\n    }\n\n    th_n_re = 1;\n    th_n_im = 0;\n    var den_re = this.B_re[1];\n    var den_im = this.B_im[1];\n    for (n = 2; n <= 6; n++) {\n      th_n_re1 = th_n_re * th_re - th_n_im * th_im;\n      th_n_im1 = th_n_im * th_re + th_n_re * th_im;\n      th_n_re = th_n_re1;\n      th_n_im = th_n_im1;\n      den_re = den_re + n * (this.B_re[n] * th_n_re - this.B_im[n] * th_n_im);\n      den_im = den_im + n * (this.B_im[n] * th_n_re + this.B_re[n] * th_n_im);\n    }\n\n    // Complex division\n    var den2 = den_re * den_re + den_im * den_im;\n    th_re = (num_re * den_re + num_im * den_im) / den2;\n    th_im = (num_im * den_re - num_re * den_im) / den2;\n  }\n\n  // 3. Calculate d_phi              ...                                    // and d_lambda\n  var d_psi = th_re;\n  var d_lambda = th_im;\n  var d_psi_n = 1; // d_psi^0\n\n  var d_phi = 0;\n  for (n = 1; n <= 9; n++) {\n    d_psi_n = d_psi_n * d_psi;\n    d_phi = d_phi + this.D[n] * d_psi_n;\n  }\n\n  // 4. Calculate latitude and longitude\n  // d_phi is calcuated in second of arc * 10^-5, so we need to scale back to radians. d_lambda is in radians.\n  var lat = this.lat0 + (d_phi * SEC_TO_RAD * 1E5);\n  var lon = this.long0 + d_lambda;\n\n  p.x = lon;\n  p.y = lat;\n\n  return p;\n}\n\nexport var names = [\"New_Zealand_Map_Grid\", \"nzmg\"];\nexport default {\n  init: init,\n  forward: forward,\n  inverse: inverse,\n  names: names\n};\n","import adjust_lon from '../common/adjust_lon';\n\n/*\n  reference\n    \"New Equal-Area Map Projections for Noncircular Regions\", John P. Snyder,\n    The American Cartographer, Vol 15, No. 4, October 1988, pp. 341-355.\n  */\n\n\n/* Initialize the Miller Cylindrical projection\n  -------------------------------------------*/\nexport function init() {\n  //no-op\n}\n\n/* Miller Cylindrical forward equations--mapping lat,long to x,y\n    ------------------------------------------------------------*/\nexport function forward(p) {\n  var lon = p.x;\n  var lat = p.y;\n  /* Forward equations\n      -----------------*/\n  var dlon = adjust_lon(lon - this.long0);\n  var x = this.x0 + this.a * dlon;\n  var y = this.y0 + this.a * Math.log(Math.tan((Math.PI / 4) + (lat / 2.5))) * 1.25;\n\n  p.x = x;\n  p.y = y;\n  return p;\n}\n\n/* Miller Cylindrical inverse equations--mapping x,y to lat/long\n    ------------------------------------------------------------*/\nexport function inverse(p) {\n  p.x -= this.x0;\n  p.y -= this.y0;\n\n  var lon = adjust_lon(this.long0 + p.x / this.a);\n  var lat = 2.5 * (Math.atan(Math.exp(0.8 * p.y / this.a)) - Math.PI / 4);\n\n  p.x = lon;\n  p.y = lat;\n  return p;\n}\n\nexport var names = [\"Miller_Cylindrical\", \"mill\"];\nexport default {\n  init: init,\n  forward: forward,\n  inverse: inverse,\n  names: names\n};\n","import adjust_lon from '../common/adjust_lon';\nimport adjust_lat from '../common/adjust_lat';\nimport pj_enfn from '../common/pj_enfn';\nvar MAX_ITER = 20;\nimport pj_mlfn from '../common/pj_mlfn';\nimport pj_inv_mlfn from '../common/pj_inv_mlfn';\nimport {EPSLN, HALF_PI} from '../constants/values';\n\nimport asinz from '../common/asinz';\n\n\nexport function init() {\n  /* Place parameters in static storage for common use\n    -------------------------------------------------*/\n\n\n  if (!this.sphere) {\n    this.en = pj_enfn(this.es);\n  }\n  else {\n    this.n = 1;\n    this.m = 0;\n    this.es = 0;\n    this.C_y = Math.sqrt((this.m + 1) / this.n);\n    this.C_x = this.C_y / (this.m + 1);\n  }\n\n}\n\n/* Sinusoidal forward equations--mapping lat,long to x,y\n  -----------------------------------------------------*/\nexport function forward(p) {\n  var x, y;\n  var lon = p.x;\n  var lat = p.y;\n  /* Forward equations\n    -----------------*/\n  lon = adjust_lon(lon - this.long0);\n\n  if (this.sphere) {\n    if (!this.m) {\n      lat = this.n !== 1 ? Math.asin(this.n * Math.sin(lat)) : lat;\n    }\n    else {\n      var k = this.n * Math.sin(lat);\n      for (var i = MAX_ITER; i; --i) {\n        var V = (this.m * lat + Math.sin(lat) - k) / (this.m + Math.cos(lat));\n        lat -= V;\n        if (Math.abs(V) < EPSLN) {\n          break;\n        }\n      }\n    }\n    x = this.a * this.C_x * lon * (this.m + Math.cos(lat));\n    y = this.a * this.C_y * lat;\n\n  }\n  else {\n\n    var s = Math.sin(lat);\n    var c = Math.cos(lat);\n    y = this.a * pj_mlfn(lat, s, c, this.en);\n    x = this.a * lon * c / Math.sqrt(1 - this.es * s * s);\n  }\n\n  p.x = x;\n  p.y = y;\n  return p;\n}\n\nexport function inverse(p) {\n  var lat, temp, lon, s;\n\n  p.x -= this.x0;\n  lon = p.x / this.a;\n  p.y -= this.y0;\n  lat = p.y / this.a;\n\n  if (this.sphere) {\n    lat /= this.C_y;\n    lon = lon / (this.C_x * (this.m + Math.cos(lat)));\n    if (this.m) {\n      lat = asinz((this.m * lat + Math.sin(lat)) / this.n);\n    }\n    else if (this.n !== 1) {\n      lat = asinz(Math.sin(lat) / this.n);\n    }\n    lon = adjust_lon(lon + this.long0);\n    lat = adjust_lat(lat);\n  }\n  else {\n    lat = pj_inv_mlfn(p.y / this.a, this.es, this.en);\n    s = Math.abs(lat);\n    if (s < HALF_PI) {\n      s = Math.sin(lat);\n      temp = this.long0 + p.x * Math.sqrt(1 - this.es * s * s) / (this.a * Math.cos(lat));\n      //temp = this.long0 + p.x / (this.a * Math.cos(lat));\n      lon = adjust_lon(temp);\n    }\n    else if ((s - EPSLN) < HALF_PI) {\n      lon = this.long0;\n    }\n  }\n  p.x = lon;\n  p.y = lat;\n  return p;\n}\n\nexport var names = [\"Sinusoidal\", \"sinu\"];\nexport default {\n  init: init,\n  forward: forward,\n  inverse: inverse,\n  names: names\n};\n","import adjust_lon from '../common/adjust_lon';\nexport function init() {}\nimport {EPSLN} from '../constants/values';\n/* Mollweide forward equations--mapping lat,long to x,y\n    ----------------------------------------------------*/\nexport function forward(p) {\n\n  /* Forward equations\n      -----------------*/\n  var lon = p.x;\n  var lat = p.y;\n\n  var delta_lon = adjust_lon(lon - this.long0);\n  var theta = lat;\n  var con = Math.PI * Math.sin(lat);\n\n  /* Iterate using the Newton-Raphson method to find theta\n      -----------------------------------------------------*/\n  while (true) {\n    var delta_theta = -(theta + Math.sin(theta) - con) / (1 + Math.cos(theta));\n    theta += delta_theta;\n    if (Math.abs(delta_theta) < EPSLN) {\n      break;\n    }\n  }\n  theta /= 2;\n\n  /* If the latitude is 90 deg, force the x coordinate to be \"0 + false easting\"\n       this is done here because of precision problems with \"cos(theta)\"\n       --------------------------------------------------------------------------*/\n  if (Math.PI / 2 - Math.abs(lat) < EPSLN) {\n    delta_lon = 0;\n  }\n  var x = 0.900316316158 * this.a * delta_lon * Math.cos(theta) + this.x0;\n  var y = 1.4142135623731 * this.a * Math.sin(theta) + this.y0;\n\n  p.x = x;\n  p.y = y;\n  return p;\n}\n\nexport function inverse(p) {\n  var theta;\n  var arg;\n\n  /* Inverse equations\n      -----------------*/\n  p.x -= this.x0;\n  p.y -= this.y0;\n  arg = p.y / (1.4142135623731 * this.a);\n\n  /* Because of division by zero problems, 'arg' can not be 1.  Therefore\n       a number very close to one is used instead.\n       -------------------------------------------------------------------*/\n  if (Math.abs(arg) > 0.999999999999) {\n    arg = 0.999999999999;\n  }\n  theta = Math.asin(arg);\n  var lon = adjust_lon(this.long0 + (p.x / (0.900316316158 * this.a * Math.cos(theta))));\n  if (lon < (-Math.PI)) {\n    lon = -Math.PI;\n  }\n  if (lon > Math.PI) {\n    lon = Math.PI;\n  }\n  arg = (2 * theta + Math.sin(2 * theta)) / Math.PI;\n  if (Math.abs(arg) > 1) {\n    arg = 1;\n  }\n  var lat = Math.asin(arg);\n\n  p.x = lon;\n  p.y = lat;\n  return p;\n}\n\nexport var names = [\"Mollweide\", \"moll\"];\nexport default {\n  init: init,\n  forward: forward,\n  inverse: inverse,\n  names: names\n};\n","import e0fn from '../common/e0fn';\nimport e1fn from '../common/e1fn';\nimport e2fn from '../common/e2fn';\nimport e3fn from '../common/e3fn';\nimport msfnz from '../common/msfnz';\nimport mlfn from '../common/mlfn';\nimport adjust_lon from '../common/adjust_lon';\nimport adjust_lat from '../common/adjust_lat';\nimport imlfn from '../common/imlfn';\nimport {EPSLN} from '../constants/values';\n\nexport function init() {\n\n  /* Place parameters in static storage for common use\n      -------------------------------------------------*/\n  // Standard Parallels cannot be equal and on opposite sides of the equator\n  if (Math.abs(this.lat1 + this.lat2) < EPSLN) {\n    return;\n  }\n  this.lat2 = this.lat2 || this.lat1;\n  this.temp = this.b / this.a;\n  this.es = 1 - Math.pow(this.temp, 2);\n  this.e = Math.sqrt(this.es);\n  this.e0 = e0fn(this.es);\n  this.e1 = e1fn(this.es);\n  this.e2 = e2fn(this.es);\n  this.e3 = e3fn(this.es);\n\n  this.sinphi = Math.sin(this.lat1);\n  this.cosphi = Math.cos(this.lat1);\n\n  this.ms1 = msfnz(this.e, this.sinphi, this.cosphi);\n  this.ml1 = mlfn(this.e0, this.e1, this.e2, this.e3, this.lat1);\n\n  if (Math.abs(this.lat1 - this.lat2) < EPSLN) {\n    this.ns = this.sinphi;\n  }\n  else {\n    this.sinphi = Math.sin(this.lat2);\n    this.cosphi = Math.cos(this.lat2);\n    this.ms2 = msfnz(this.e, this.sinphi, this.cosphi);\n    this.ml2 = mlfn(this.e0, this.e1, this.e2, this.e3, this.lat2);\n    this.ns = (this.ms1 - this.ms2) / (this.ml2 - this.ml1);\n  }\n  this.g = this.ml1 + this.ms1 / this.ns;\n  this.ml0 = mlfn(this.e0, this.e1, this.e2, this.e3, this.lat0);\n  this.rh = this.a * (this.g - this.ml0);\n}\n\n/* Equidistant Conic forward equations--mapping lat,long to x,y\n  -----------------------------------------------------------*/\nexport function forward(p) {\n  var lon = p.x;\n  var lat = p.y;\n  var rh1;\n\n  /* Forward equations\n      -----------------*/\n  if (this.sphere) {\n    rh1 = this.a * (this.g - lat);\n  }\n  else {\n    var ml = mlfn(this.e0, this.e1, this.e2, this.e3, lat);\n    rh1 = this.a * (this.g - ml);\n  }\n  var theta = this.ns * adjust_lon(lon - this.long0);\n  var x = this.x0 + rh1 * Math.sin(theta);\n  var y = this.y0 + this.rh - rh1 * Math.cos(theta);\n  p.x = x;\n  p.y = y;\n  return p;\n}\n\n/* Inverse equations\n  -----------------*/\nexport function inverse(p) {\n  p.x -= this.x0;\n  p.y = this.rh - p.y + this.y0;\n  var con, rh1, lat, lon;\n  if (this.ns >= 0) {\n    rh1 = Math.sqrt(p.x * p.x + p.y * p.y);\n    con = 1;\n  }\n  else {\n    rh1 = -Math.sqrt(p.x * p.x + p.y * p.y);\n    con = -1;\n  }\n  var theta = 0;\n  if (rh1 !== 0) {\n    theta = Math.atan2(con * p.x, con * p.y);\n  }\n\n  if (this.sphere) {\n    lon = adjust_lon(this.long0 + theta / this.ns);\n    lat = adjust_lat(this.g - rh1 / this.a);\n    p.x = lon;\n    p.y = lat;\n    return p;\n  }\n  else {\n    var ml = this.g - rh1 / this.a;\n    lat = imlfn(ml, this.e0, this.e1, this.e2, this.e3);\n    lon = adjust_lon(this.long0 + theta / this.ns);\n    p.x = lon;\n    p.y = lat;\n    return p;\n  }\n\n}\n\nexport var names = [\"Equidistant_Conic\", \"eqdc\"];\nexport default {\n  init: init,\n  forward: forward,\n  inverse: inverse,\n  names: names\n};\n","import adjust_lon from '../common/adjust_lon';\n\nimport {HALF_PI, EPSLN} from '../constants/values';\n\nimport asinz from '../common/asinz';\n\n/* Initialize the Van Der Grinten projection\n  ----------------------------------------*/\nexport function init() {\n  //this.R = 6370997; //Radius of earth\n  this.R = this.a;\n}\n\nexport function forward(p) {\n\n  var lon = p.x;\n  var lat = p.y;\n\n  /* Forward equations\n    -----------------*/\n  var dlon = adjust_lon(lon - this.long0);\n  var x, y;\n\n  if (Math.abs(lat) <= EPSLN) {\n    x = this.x0 + this.R * dlon;\n    y = this.y0;\n  }\n  var theta = asinz(2 * Math.abs(lat / Math.PI));\n  if ((Math.abs(dlon) <= EPSLN) || (Math.abs(Math.abs(lat) - HALF_PI) <= EPSLN)) {\n    x = this.x0;\n    if (lat >= 0) {\n      y = this.y0 + Math.PI * this.R * Math.tan(0.5 * theta);\n    }\n    else {\n      y = this.y0 + Math.PI * this.R * -Math.tan(0.5 * theta);\n    }\n    //  return(OK);\n  }\n  var al = 0.5 * Math.abs((Math.PI / dlon) - (dlon / Math.PI));\n  var asq = al * al;\n  var sinth = Math.sin(theta);\n  var costh = Math.cos(theta);\n\n  var g = costh / (sinth + costh - 1);\n  var gsq = g * g;\n  var m = g * (2 / sinth - 1);\n  var msq = m * m;\n  var con = Math.PI * this.R * (al * (g - msq) + Math.sqrt(asq * (g - msq) * (g - msq) - (msq + asq) * (gsq - msq))) / (msq + asq);\n  if (dlon < 0) {\n    con = -con;\n  }\n  x = this.x0 + con;\n  //con = Math.abs(con / (Math.PI * this.R));\n  var q = asq + g;\n  con = Math.PI * this.R * (m * q - al * Math.sqrt((msq + asq) * (asq + 1) - q * q)) / (msq + asq);\n  if (lat >= 0) {\n    //y = this.y0 + Math.PI * this.R * Math.sqrt(1 - con * con - 2 * al * con);\n    y = this.y0 + con;\n  }\n  else {\n    //y = this.y0 - Math.PI * this.R * Math.sqrt(1 - con * con - 2 * al * con);\n    y = this.y0 - con;\n  }\n  p.x = x;\n  p.y = y;\n  return p;\n}\n\n/* Van Der Grinten inverse equations--mapping x,y to lat/long\n  ---------------------------------------------------------*/\nexport function inverse(p) {\n  var lon, lat;\n  var xx, yy, xys, c1, c2, c3;\n  var a1;\n  var m1;\n  var con;\n  var th1;\n  var d;\n\n  /* inverse equations\n    -----------------*/\n  p.x -= this.x0;\n  p.y -= this.y0;\n  con = Math.PI * this.R;\n  xx = p.x / con;\n  yy = p.y / con;\n  xys = xx * xx + yy * yy;\n  c1 = -Math.abs(yy) * (1 + xys);\n  c2 = c1 - 2 * yy * yy + xx * xx;\n  c3 = -2 * c1 + 1 + 2 * yy * yy + xys * xys;\n  d = yy * yy / c3 + (2 * c2 * c2 * c2 / c3 / c3 / c3 - 9 * c1 * c2 / c3 / c3) / 27;\n  a1 = (c1 - c2 * c2 / 3 / c3) / c3;\n  m1 = 2 * Math.sqrt(-a1 / 3);\n  con = ((3 * d) / a1) / m1;\n  if (Math.abs(con) > 1) {\n    if (con >= 0) {\n      con = 1;\n    }\n    else {\n      con = -1;\n    }\n  }\n  th1 = Math.acos(con) / 3;\n  if (p.y >= 0) {\n    lat = (-m1 * Math.cos(th1 + Math.PI / 3) - c2 / 3 / c3) * Math.PI;\n  }\n  else {\n    lat = -(-m1 * Math.cos(th1 + Math.PI / 3) - c2 / 3 / c3) * Math.PI;\n  }\n\n  if (Math.abs(xx) < EPSLN) {\n    lon = this.long0;\n  }\n  else {\n    lon = adjust_lon(this.long0 + Math.PI * (xys - 1 + Math.sqrt(1 + 2 * (xx * xx - yy * yy) + xys * xys)) / 2 / xx);\n  }\n\n  p.x = lon;\n  p.y = lat;\n  return p;\n}\n\nexport var names = [\"Van_der_Grinten_I\", \"VanDerGrinten\", \"vandg\"];\nexport default {\n  init: init,\n  forward: forward,\n  inverse: inverse,\n  names: names\n};\n","import adjust_lon from '../common/adjust_lon';\nimport {HALF_PI, EPSLN} from '../constants/values';\n\nimport mlfn from '../common/mlfn';\nimport e0fn from '../common/e0fn';\nimport e1fn from '../common/e1fn';\nimport e2fn from '../common/e2fn';\nimport e3fn from '../common/e3fn';\nimport gN from '../common/gN';\nimport asinz from '../common/asinz';\nimport imlfn from '../common/imlfn';\n\n\n\nexport function init() {\n  this.sin_p12 = Math.sin(this.lat0);\n  this.cos_p12 = Math.cos(this.lat0);\n}\n\nexport function forward(p) {\n  var lon = p.x;\n  var lat = p.y;\n  var sinphi = Math.sin(p.y);\n  var cosphi = Math.cos(p.y);\n  var dlon = adjust_lon(lon - this.long0);\n  var e0, e1, e2, e3, Mlp, Ml, tanphi, Nl1, Nl, psi, Az, G, H, GH, Hs, c, kp, cos_c, s, s2, s3, s4, s5;\n  if (this.sphere) {\n    if (Math.abs(this.sin_p12 - 1) <= EPSLN) {\n      //North Pole case\n      p.x = this.x0 + this.a * (HALF_PI - lat) * Math.sin(dlon);\n      p.y = this.y0 - this.a * (HALF_PI - lat) * Math.cos(dlon);\n      return p;\n    }\n    else if (Math.abs(this.sin_p12 + 1) <= EPSLN) {\n      //South Pole case\n      p.x = this.x0 + this.a * (HALF_PI + lat) * Math.sin(dlon);\n      p.y = this.y0 + this.a * (HALF_PI + lat) * Math.cos(dlon);\n      return p;\n    }\n    else {\n      //default case\n      cos_c = this.sin_p12 * sinphi + this.cos_p12 * cosphi * Math.cos(dlon);\n      c = Math.acos(cos_c);\n      kp = c / Math.sin(c);\n      p.x = this.x0 + this.a * kp * cosphi * Math.sin(dlon);\n      p.y = this.y0 + this.a * kp * (this.cos_p12 * sinphi - this.sin_p12 * cosphi * Math.cos(dlon));\n      return p;\n    }\n  }\n  else {\n    e0 = e0fn(this.es);\n    e1 = e1fn(this.es);\n    e2 = e2fn(this.es);\n    e3 = e3fn(this.es);\n    if (Math.abs(this.sin_p12 - 1) <= EPSLN) {\n      //North Pole case\n      Mlp = this.a * mlfn(e0, e1, e2, e3, HALF_PI);\n      Ml = this.a * mlfn(e0, e1, e2, e3, lat);\n      p.x = this.x0 + (Mlp - Ml) * Math.sin(dlon);\n      p.y = this.y0 - (Mlp - Ml) * Math.cos(dlon);\n      return p;\n    }\n    else if (Math.abs(this.sin_p12 + 1) <= EPSLN) {\n      //South Pole case\n      Mlp = this.a * mlfn(e0, e1, e2, e3, HALF_PI);\n      Ml = this.a * mlfn(e0, e1, e2, e3, lat);\n      p.x = this.x0 + (Mlp + Ml) * Math.sin(dlon);\n      p.y = this.y0 + (Mlp + Ml) * Math.cos(dlon);\n      return p;\n    }\n    else {\n      //Default case\n      tanphi = sinphi / cosphi;\n      Nl1 = gN(this.a, this.e, this.sin_p12);\n      Nl = gN(this.a, this.e, sinphi);\n      psi = Math.atan((1 - this.es) * tanphi + this.es * Nl1 * this.sin_p12 / (Nl * cosphi));\n      Az = Math.atan2(Math.sin(dlon), this.cos_p12 * Math.tan(psi) - this.sin_p12 * Math.cos(dlon));\n      if (Az === 0) {\n        s = Math.asin(this.cos_p12 * Math.sin(psi) - this.sin_p12 * Math.cos(psi));\n      }\n      else if (Math.abs(Math.abs(Az) - Math.PI) <= EPSLN) {\n        s = -Math.asin(this.cos_p12 * Math.sin(psi) - this.sin_p12 * Math.cos(psi));\n      }\n      else {\n        s = Math.asin(Math.sin(dlon) * Math.cos(psi) / Math.sin(Az));\n      }\n      G = this.e * this.sin_p12 / Math.sqrt(1 - this.es);\n      H = this.e * this.cos_p12 * Math.cos(Az) / Math.sqrt(1 - this.es);\n      GH = G * H;\n      Hs = H * H;\n      s2 = s * s;\n      s3 = s2 * s;\n      s4 = s3 * s;\n      s5 = s4 * s;\n      c = Nl1 * s * (1 - s2 * Hs * (1 - Hs) / 6 + s3 / 8 * GH * (1 - 2 * Hs) + s4 / 120 * (Hs * (4 - 7 * Hs) - 3 * G * G * (1 - 7 * Hs)) - s5 / 48 * GH);\n      p.x = this.x0 + c * Math.sin(Az);\n      p.y = this.y0 + c * Math.cos(Az);\n      return p;\n    }\n  }\n\n\n}\n\nexport function inverse(p) {\n  p.x -= this.x0;\n  p.y -= this.y0;\n  var rh, z, sinz, cosz, lon, lat, con, e0, e1, e2, e3, Mlp, M, N1, psi, Az, cosAz, tmp, A, B, D, Ee, F;\n  if (this.sphere) {\n    rh = Math.sqrt(p.x * p.x + p.y * p.y);\n    if (rh > (2 * HALF_PI * this.a)) {\n      return;\n    }\n    z = rh / this.a;\n\n    sinz = Math.sin(z);\n    cosz = Math.cos(z);\n\n    lon = this.long0;\n    if (Math.abs(rh) <= EPSLN) {\n      lat = this.lat0;\n    }\n    else {\n      lat = asinz(cosz * this.sin_p12 + (p.y * sinz * this.cos_p12) / rh);\n      con = Math.abs(this.lat0) - HALF_PI;\n      if (Math.abs(con) <= EPSLN) {\n        if (this.lat0 >= 0) {\n          lon = adjust_lon(this.long0 + Math.atan2(p.x, - p.y));\n        }\n        else {\n          lon = adjust_lon(this.long0 - Math.atan2(-p.x, p.y));\n        }\n      }\n      else {\n        /*con = cosz - this.sin_p12 * Math.sin(lat);\n        if ((Math.abs(con) < EPSLN) && (Math.abs(p.x) < EPSLN)) {\n          //no-op, just keep the lon value as is\n        } else {\n          var temp = Math.atan2((p.x * sinz * this.cos_p12), (con * rh));\n          lon = adjust_lon(this.long0 + Math.atan2((p.x * sinz * this.cos_p12), (con * rh)));\n        }*/\n        lon = adjust_lon(this.long0 + Math.atan2(p.x * sinz, rh * this.cos_p12 * cosz - p.y * this.sin_p12 * sinz));\n      }\n    }\n\n    p.x = lon;\n    p.y = lat;\n    return p;\n  }\n  else {\n    e0 = e0fn(this.es);\n    e1 = e1fn(this.es);\n    e2 = e2fn(this.es);\n    e3 = e3fn(this.es);\n    if (Math.abs(this.sin_p12 - 1) <= EPSLN) {\n      //North pole case\n      Mlp = this.a * mlfn(e0, e1, e2, e3, HALF_PI);\n      rh = Math.sqrt(p.x * p.x + p.y * p.y);\n      M = Mlp - rh;\n      lat = imlfn(M / this.a, e0, e1, e2, e3);\n      lon = adjust_lon(this.long0 + Math.atan2(p.x, - 1 * p.y));\n      p.x = lon;\n      p.y = lat;\n      return p;\n    }\n    else if (Math.abs(this.sin_p12 + 1) <= EPSLN) {\n      //South pole case\n      Mlp = this.a * mlfn(e0, e1, e2, e3, HALF_PI);\n      rh = Math.sqrt(p.x * p.x + p.y * p.y);\n      M = rh - Mlp;\n\n      lat = imlfn(M / this.a, e0, e1, e2, e3);\n      lon = adjust_lon(this.long0 + Math.atan2(p.x, p.y));\n      p.x = lon;\n      p.y = lat;\n      return p;\n    }\n    else {\n      //default case\n      rh = Math.sqrt(p.x * p.x + p.y * p.y);\n      Az = Math.atan2(p.x, p.y);\n      N1 = gN(this.a, this.e, this.sin_p12);\n      cosAz = Math.cos(Az);\n      tmp = this.e * this.cos_p12 * cosAz;\n      A = -tmp * tmp / (1 - this.es);\n      B = 3 * this.es * (1 - A) * this.sin_p12 * this.cos_p12 * cosAz / (1 - this.es);\n      D = rh / N1;\n      Ee = D - A * (1 + A) * Math.pow(D, 3) / 6 - B * (1 + 3 * A) * Math.pow(D, 4) / 24;\n      F = 1 - A * Ee * Ee / 2 - D * Ee * Ee * Ee / 6;\n      psi = Math.asin(this.sin_p12 * Math.cos(Ee) + this.cos_p12 * Math.sin(Ee) * cosAz);\n      lon = adjust_lon(this.long0 + Math.asin(Math.sin(Az) * Math.sin(Ee) / Math.cos(psi)));\n      lat = Math.atan((1 - this.es * F * this.sin_p12 / Math.sin(psi)) * Math.tan(psi) / (1 - this.es));\n      p.x = lon;\n      p.y = lat;\n      return p;\n    }\n  }\n\n}\n\nexport var names = [\"Azimuthal_Equidistant\", \"aeqd\"];\nexport default {\n  init: init,\n  forward: forward,\n  inverse: inverse,\n  names: names\n};\n","import adjust_lon from '../common/adjust_lon';\nimport asinz from '../common/asinz';\nimport {EPSLN, HALF_PI} from '../constants/values';\n\nexport function init() {\n  //double temp;      /* temporary variable    */\n\n  /* Place parameters in static storage for common use\n      -------------------------------------------------*/\n  this.sin_p14 = Math.sin(this.lat0);\n  this.cos_p14 = Math.cos(this.lat0);\n}\n\n/* Orthographic forward equations--mapping lat,long to x,y\n    ---------------------------------------------------*/\nexport function forward(p) {\n  var sinphi, cosphi; /* sin and cos value        */\n  var dlon; /* delta longitude value      */\n  var coslon; /* cos of longitude        */\n  var ksp; /* scale factor          */\n  var g, x, y;\n  var lon = p.x;\n  var lat = p.y;\n  /* Forward equations\n      -----------------*/\n  dlon = adjust_lon(lon - this.long0);\n\n  sinphi = Math.sin(lat);\n  cosphi = Math.cos(lat);\n\n  coslon = Math.cos(dlon);\n  g = this.sin_p14 * sinphi + this.cos_p14 * cosphi * coslon;\n  ksp = 1;\n  if ((g > 0) || (Math.abs(g) <= EPSLN)) {\n    x = this.a * ksp * cosphi * Math.sin(dlon);\n    y = this.y0 + this.a * ksp * (this.cos_p14 * sinphi - this.sin_p14 * cosphi * coslon);\n  }\n  p.x = x;\n  p.y = y;\n  return p;\n}\n\nexport function inverse(p) {\n  var rh; /* height above ellipsoid      */\n  var z; /* angle          */\n  var sinz, cosz; /* sin of z and cos of z      */\n  var con;\n  var lon, lat;\n  /* Inverse equations\n      -----------------*/\n  p.x -= this.x0;\n  p.y -= this.y0;\n  rh = Math.sqrt(p.x * p.x + p.y * p.y);\n  z = asinz(rh / this.a);\n\n  sinz = Math.sin(z);\n  cosz = Math.cos(z);\n\n  lon = this.long0;\n  if (Math.abs(rh) <= EPSLN) {\n    lat = this.lat0;\n    p.x = lon;\n    p.y = lat;\n    return p;\n  }\n  lat = asinz(cosz * this.sin_p14 + (p.y * sinz * this.cos_p14) / rh);\n  con = Math.abs(this.lat0) - HALF_PI;\n  if (Math.abs(con) <= EPSLN) {\n    if (this.lat0 >= 0) {\n      lon = adjust_lon(this.long0 + Math.atan2(p.x, - p.y));\n    }\n    else {\n      lon = adjust_lon(this.long0 - Math.atan2(-p.x, p.y));\n    }\n    p.x = lon;\n    p.y = lat;\n    return p;\n  }\n  lon = adjust_lon(this.long0 + Math.atan2((p.x * sinz), rh * this.cos_p14 * cosz - p.y * this.sin_p14 * sinz));\n  p.x = lon;\n  p.y = lat;\n  return p;\n}\n\nexport var names = [\"ortho\"];\nexport default {\n  init: init,\n  forward: forward,\n  inverse: inverse,\n  names: names\n};\n","// QSC projection rewritten from the original PROJ4\n// https://github.com/OSGeo/proj.4/blob/master/src/PJ_qsc.c\n\nimport {EPSLN, TWO_PI, SPI, HALF_PI, FORTPI} from '../constants/values';\n\n/* constants */\nvar FACE_ENUM = {\n    FRONT: 1,\n    RIGHT: 2,\n    BACK: 3,\n    LEFT: 4,\n    TOP: 5,\n    BOTTOM: 6\n};\n\nvar AREA_ENUM = {\n    AREA_0: 1,\n    AREA_1: 2,\n    AREA_2: 3,\n    AREA_3: 4\n};\n\nexport function init() {\n\n  this.x0 = this.x0 || 0;\n  this.y0 = this.y0 || 0;\n  this.lat0 = this.lat0 || 0;\n  this.long0 = this.long0 || 0;\n  this.lat_ts = this.lat_ts || 0;\n  this.title = this.title || \"Quadrilateralized Spherical Cube\";\n\n  /* Determine the cube face from the center of projection. */\n  if (this.lat0 >= HALF_PI - FORTPI / 2.0) {\n    this.face = FACE_ENUM.TOP;\n  } else if (this.lat0 <= -(HALF_PI - FORTPI / 2.0)) {\n    this.face = FACE_ENUM.BOTTOM;\n  } else if (Math.abs(this.long0) <= FORTPI) {\n    this.face = FACE_ENUM.FRONT;\n  } else if (Math.abs(this.long0) <= HALF_PI + FORTPI) {\n    this.face = this.long0 > 0.0 ? FACE_ENUM.RIGHT : FACE_ENUM.LEFT;\n  } else {\n    this.face = FACE_ENUM.BACK;\n  }\n\n  /* Fill in useful values for the ellipsoid <-> sphere shift\n   * described in [LK12]. */\n  if (this.es !== 0) {\n    this.one_minus_f = 1 - (this.a - this.b) / this.a;\n    this.one_minus_f_squared = this.one_minus_f * this.one_minus_f;\n  }\n}\n\n// QSC forward equations--mapping lat,long to x,y\n// -----------------------------------------------------------------\nexport function forward(p) {\n  var xy = {x: 0, y: 0};\n  var lat, lon;\n  var theta, phi;\n  var t, mu;\n  /* nu; */\n  var area = {value: 0};\n\n  // move lon according to projection's lon\n  p.x -= this.long0;\n\n  /* Convert the geodetic latitude to a geocentric latitude.\n   * This corresponds to the shift from the ellipsoid to the sphere\n   * described in [LK12]. */\n  if (this.es !== 0) {//if (P->es != 0) {\n    lat = Math.atan(this.one_minus_f_squared * Math.tan(p.y));\n  } else {\n    lat = p.y;\n  }\n\n  /* Convert the input lat, lon into theta, phi as used by QSC.\n   * This depends on the cube face and the area on it.\n   * For the top and bottom face, we can compute theta and phi\n   * directly from phi, lam. For the other faces, we must use\n   * unit sphere cartesian coordinates as an intermediate step. */\n  lon = p.x; //lon = lp.lam;\n  if (this.face === FACE_ENUM.TOP) {\n    phi = HALF_PI - lat;\n    if (lon >= FORTPI && lon <= HALF_PI + FORTPI) {\n      area.value = AREA_ENUM.AREA_0;\n      theta = lon - HALF_PI;\n    } else if (lon > HALF_PI + FORTPI || lon <= -(HALF_PI + FORTPI)) {\n      area.value = AREA_ENUM.AREA_1;\n      theta = (lon > 0.0 ? lon - SPI : lon + SPI);\n    } else if (lon > -(HALF_PI + FORTPI) && lon <= -FORTPI) {\n      area.value = AREA_ENUM.AREA_2;\n      theta = lon + HALF_PI;\n    } else {\n      area.value = AREA_ENUM.AREA_3;\n      theta = lon;\n    }\n  } else if (this.face === FACE_ENUM.BOTTOM) {\n    phi = HALF_PI + lat;\n    if (lon >= FORTPI && lon <= HALF_PI + FORTPI) {\n      area.value = AREA_ENUM.AREA_0;\n      theta = -lon + HALF_PI;\n    } else if (lon < FORTPI && lon >= -FORTPI) {\n      area.value = AREA_ENUM.AREA_1;\n      theta = -lon;\n    } else if (lon < -FORTPI && lon >= -(HALF_PI + FORTPI)) {\n      area.value = AREA_ENUM.AREA_2;\n      theta = -lon - HALF_PI;\n    } else {\n      area.value = AREA_ENUM.AREA_3;\n      theta = (lon > 0.0 ? -lon + SPI : -lon - SPI);\n    }\n  } else {\n    var q, r, s;\n    var sinlat, coslat;\n    var sinlon, coslon;\n\n    if (this.face === FACE_ENUM.RIGHT) {\n      lon = qsc_shift_lon_origin(lon, +HALF_PI);\n    } else if (this.face === FACE_ENUM.BACK) {\n      lon = qsc_shift_lon_origin(lon, +SPI);\n    } else if (this.face === FACE_ENUM.LEFT) {\n      lon = qsc_shift_lon_origin(lon, -HALF_PI);\n    }\n    sinlat = Math.sin(lat);\n    coslat = Math.cos(lat);\n    sinlon = Math.sin(lon);\n    coslon = Math.cos(lon);\n    q = coslat * coslon;\n    r = coslat * sinlon;\n    s = sinlat;\n\n    if (this.face === FACE_ENUM.FRONT) {\n      phi = Math.acos(q);\n      theta = qsc_fwd_equat_face_theta(phi, s, r, area);\n    } else if (this.face === FACE_ENUM.RIGHT) {\n      phi = Math.acos(r);\n      theta = qsc_fwd_equat_face_theta(phi, s, -q, area);\n    } else if (this.face === FACE_ENUM.BACK) {\n      phi = Math.acos(-q);\n      theta = qsc_fwd_equat_face_theta(phi, s, -r, area);\n    } else if (this.face === FACE_ENUM.LEFT) {\n      phi = Math.acos(-r);\n      theta = qsc_fwd_equat_face_theta(phi, s, q, area);\n    } else {\n      /* Impossible */\n      phi = theta = 0;\n      area.value = AREA_ENUM.AREA_0;\n    }\n  }\n\n  /* Compute mu and nu for the area of definition.\n   * For mu, see Eq. (3-21) in [OL76], but note the typos:\n   * compare with Eq. (3-14). For nu, see Eq. (3-38). */\n  mu = Math.atan((12 / SPI) * (theta + Math.acos(Math.sin(theta) * Math.cos(FORTPI)) - HALF_PI));\n  t = Math.sqrt((1 - Math.cos(phi)) / (Math.cos(mu) * Math.cos(mu)) / (1 - Math.cos(Math.atan(1 / Math.cos(theta)))));\n\n  /* Apply the result to the real area. */\n  if (area.value === AREA_ENUM.AREA_1) {\n    mu += HALF_PI;\n  } else if (area.value === AREA_ENUM.AREA_2) {\n    mu += SPI;\n  } else if (area.value === AREA_ENUM.AREA_3) {\n    mu += 1.5 * SPI;\n  }\n\n  /* Now compute x, y from mu and nu */\n  xy.x = t * Math.cos(mu);\n  xy.y = t * Math.sin(mu);\n  xy.x = xy.x * this.a + this.x0;\n  xy.y = xy.y * this.a + this.y0;\n\n  p.x = xy.x;\n  p.y = xy.y;\n  return p;\n}\n\n// QSC inverse equations--mapping x,y to lat/long\n// -----------------------------------------------------------------\nexport function inverse(p) {\n  var lp = {lam: 0, phi: 0};\n  var mu, nu, cosmu, tannu;\n  var tantheta, theta, cosphi, phi;\n  var t;\n  var area = {value: 0};\n\n  /* de-offset */\n  p.x = (p.x - this.x0) / this.a;\n  p.y = (p.y - this.y0) / this.a;\n\n  /* Convert the input x, y to the mu and nu angles as used by QSC.\n   * This depends on the area of the cube face. */\n  nu = Math.atan(Math.sqrt(p.x * p.x + p.y * p.y));\n  mu = Math.atan2(p.y, p.x);\n  if (p.x >= 0.0 && p.x >= Math.abs(p.y)) {\n    area.value = AREA_ENUM.AREA_0;\n  } else if (p.y >= 0.0 && p.y >= Math.abs(p.x)) {\n    area.value = AREA_ENUM.AREA_1;\n    mu -= HALF_PI;\n  } else if (p.x < 0.0 && -p.x >= Math.abs(p.y)) {\n    area.value = AREA_ENUM.AREA_2;\n    mu = (mu < 0.0 ? mu + SPI : mu - SPI);\n  } else {\n    area.value = AREA_ENUM.AREA_3;\n    mu += HALF_PI;\n  }\n\n  /* Compute phi and theta for the area of definition.\n   * The inverse projection is not described in the original paper, but some\n   * good hints can be found here (as of 2011-12-14):\n   * http://fits.gsfc.nasa.gov/fitsbits/saf.93/saf.9302\n   * (search for \"Message-Id: <9302181759.AA25477 at fits.cv.nrao.edu>\") */\n  t = (SPI / 12) * Math.tan(mu);\n  tantheta = Math.sin(t) / (Math.cos(t) - (1 / Math.sqrt(2)));\n  theta = Math.atan(tantheta);\n  cosmu = Math.cos(mu);\n  tannu = Math.tan(nu);\n  cosphi = 1 - cosmu * cosmu * tannu * tannu * (1 - Math.cos(Math.atan(1 / Math.cos(theta))));\n  if (cosphi < -1) {\n    cosphi = -1;\n  } else if (cosphi > +1) {\n    cosphi = +1;\n  }\n\n  /* Apply the result to the real area on the cube face.\n   * For the top and bottom face, we can compute phi and lam directly.\n   * For the other faces, we must use unit sphere cartesian coordinates\n   * as an intermediate step. */\n  if (this.face === FACE_ENUM.TOP) {\n    phi = Math.acos(cosphi);\n    lp.phi = HALF_PI - phi;\n    if (area.value === AREA_ENUM.AREA_0) {\n      lp.lam = theta + HALF_PI;\n    } else if (area.value === AREA_ENUM.AREA_1) {\n      lp.lam = (theta < 0.0 ? theta + SPI : theta - SPI);\n    } else if (area.value === AREA_ENUM.AREA_2) {\n      lp.lam = theta - HALF_PI;\n    } else /* area.value == AREA_ENUM.AREA_3 */ {\n      lp.lam = theta;\n    }\n  } else if (this.face === FACE_ENUM.BOTTOM) {\n    phi = Math.acos(cosphi);\n    lp.phi = phi - HALF_PI;\n    if (area.value === AREA_ENUM.AREA_0) {\n      lp.lam = -theta + HALF_PI;\n    } else if (area.value === AREA_ENUM.AREA_1) {\n      lp.lam = -theta;\n    } else if (area.value === AREA_ENUM.AREA_2) {\n      lp.lam = -theta - HALF_PI;\n    } else /* area.value == AREA_ENUM.AREA_3 */ {\n      lp.lam = (theta < 0.0 ? -theta - SPI : -theta + SPI);\n    }\n  } else {\n    /* Compute phi and lam via cartesian unit sphere coordinates. */\n    var q, r, s;\n    q = cosphi;\n    t = q * q;\n    if (t >= 1) {\n      s = 0;\n    } else {\n      s = Math.sqrt(1 - t) * Math.sin(theta);\n    }\n    t += s * s;\n    if (t >= 1) {\n      r = 0;\n    } else {\n      r = Math.sqrt(1 - t);\n    }\n    /* Rotate q,r,s into the correct area. */\n    if (area.value === AREA_ENUM.AREA_1) {\n      t = r;\n      r = -s;\n      s = t;\n    } else if (area.value === AREA_ENUM.AREA_2) {\n      r = -r;\n      s = -s;\n    } else if (area.value === AREA_ENUM.AREA_3) {\n      t = r;\n      r = s;\n      s = -t;\n    }\n    /* Rotate q,r,s into the correct cube face. */\n    if (this.face === FACE_ENUM.RIGHT) {\n      t = q;\n      q = -r;\n      r = t;\n    } else if (this.face === FACE_ENUM.BACK) {\n      q = -q;\n      r = -r;\n    } else if (this.face === FACE_ENUM.LEFT) {\n      t = q;\n      q = r;\n      r = -t;\n    }\n    /* Now compute phi and lam from the unit sphere coordinates. */\n    lp.phi = Math.acos(-s) - HALF_PI;\n    lp.lam = Math.atan2(r, q);\n    if (this.face === FACE_ENUM.RIGHT) {\n      lp.lam = qsc_shift_lon_origin(lp.lam, -HALF_PI);\n    } else if (this.face === FACE_ENUM.BACK) {\n      lp.lam = qsc_shift_lon_origin(lp.lam, -SPI);\n    } else if (this.face === FACE_ENUM.LEFT) {\n      lp.lam = qsc_shift_lon_origin(lp.lam, +HALF_PI);\n    }\n  }\n\n  /* Apply the shift from the sphere to the ellipsoid as described\n   * in [LK12]. */\n  if (this.es !== 0) {\n    var invert_sign;\n    var tanphi, xa;\n    invert_sign = (lp.phi < 0 ? 1 : 0);\n    tanphi = Math.tan(lp.phi);\n    xa = this.b / Math.sqrt(tanphi * tanphi + this.one_minus_f_squared);\n    lp.phi = Math.atan(Math.sqrt(this.a * this.a - xa * xa) / (this.one_minus_f * xa));\n    if (invert_sign) {\n      lp.phi = -lp.phi;\n    }\n  }\n\n  lp.lam += this.long0;\n  p.x = lp.lam;\n  p.y = lp.phi;\n  return p;\n}\n\n/* Helper function for forward projection: compute the theta angle\n * and determine the area number. */\nfunction qsc_fwd_equat_face_theta(phi, y, x, area) {\n  var theta;\n  if (phi < EPSLN) {\n    area.value = AREA_ENUM.AREA_0;\n    theta = 0.0;\n  } else {\n    theta = Math.atan2(y, x);\n    if (Math.abs(theta) <= FORTPI) {\n      area.value = AREA_ENUM.AREA_0;\n    } else if (theta > FORTPI && theta <= HALF_PI + FORTPI) {\n      area.value = AREA_ENUM.AREA_1;\n      theta -= HALF_PI;\n    } else if (theta > HALF_PI + FORTPI || theta <= -(HALF_PI + FORTPI)) {\n      area.value = AREA_ENUM.AREA_2;\n      theta = (theta >= 0.0 ? theta - SPI : theta + SPI);\n    } else {\n      area.value = AREA_ENUM.AREA_3;\n      theta += HALF_PI;\n    }\n  }\n  return theta;\n}\n\n/* Helper function: shift the longitude. */\nfunction qsc_shift_lon_origin(lon, offset) {\n  var slon = lon + offset;\n  if (slon < -SPI) {\n    slon += TWO_PI;\n  } else if (slon > +SPI) {\n    slon -= TWO_PI;\n  }\n  return slon;\n}\n\nexport var names = [\"Quadrilateralized Spherical Cube\", \"Quadrilateralized_Spherical_Cube\", \"qsc\"];\nexport default {\n  init: init,\n  forward: forward,\n  inverse: inverse,\n  names: names\n};\n\n","// Robinson projection\n// Based on https://github.com/OSGeo/proj.4/blob/master/src/PJ_robin.c\n// Polynomial coeficients from http://article.gmane.org/gmane.comp.gis.proj-4.devel/6039\n\nimport {HALF_PI, D2R, R2D, EPSLN} from '../constants/values';\nimport adjust_lon from '../common/adjust_lon';\n\nvar COEFS_X = [\n    [1.0000, 2.2199e-17, -7.15515e-05, 3.1103e-06],\n    [0.9986, -0.000482243, -2.4897e-05, -1.3309e-06],\n    [0.9954, -0.00083103, -4.48605e-05, -9.86701e-07],\n    [0.9900, -0.00135364, -5.9661e-05, 3.6777e-06],\n    [0.9822, -0.00167442, -4.49547e-06, -5.72411e-06],\n    [0.9730, -0.00214868, -9.03571e-05, 1.8736e-08],\n    [0.9600, -0.00305085, -9.00761e-05, 1.64917e-06],\n    [0.9427, -0.00382792, -6.53386e-05, -2.6154e-06],\n    [0.9216, -0.00467746, -0.00010457, 4.81243e-06],\n    [0.8962, -0.00536223, -3.23831e-05, -5.43432e-06],\n    [0.8679, -0.00609363, -0.000113898, 3.32484e-06],\n    [0.8350, -0.00698325, -6.40253e-05, 9.34959e-07],\n    [0.7986, -0.00755338, -5.00009e-05, 9.35324e-07],\n    [0.7597, -0.00798324, -3.5971e-05, -2.27626e-06],\n    [0.7186, -0.00851367, -7.01149e-05, -8.6303e-06],\n    [0.6732, -0.00986209, -0.000199569, 1.91974e-05],\n    [0.6213, -0.010418, 8.83923e-05, 6.24051e-06],\n    [0.5722, -0.00906601, 0.000182, 6.24051e-06],\n    [0.5322, -0.00677797, 0.000275608, 6.24051e-06]\n];\n\nvar COEFS_Y = [\n    [-5.20417e-18, 0.0124, 1.21431e-18, -8.45284e-11],\n    [0.0620, 0.0124, -1.26793e-09, 4.22642e-10],\n    [0.1240, 0.0124, 5.07171e-09, -1.60604e-09],\n    [0.1860, 0.0123999, -1.90189e-08, 6.00152e-09],\n    [0.2480, 0.0124002, 7.10039e-08, -2.24e-08],\n    [0.3100, 0.0123992, -2.64997e-07, 8.35986e-08],\n    [0.3720, 0.0124029, 9.88983e-07, -3.11994e-07],\n    [0.4340, 0.0123893, -3.69093e-06, -4.35621e-07],\n    [0.4958, 0.0123198, -1.02252e-05, -3.45523e-07],\n    [0.5571, 0.0121916, -1.54081e-05, -5.82288e-07],\n    [0.6176, 0.0119938, -2.41424e-05, -5.25327e-07],\n    [0.6769, 0.011713, -3.20223e-05, -5.16405e-07],\n    [0.7346, 0.0113541, -3.97684e-05, -6.09052e-07],\n    [0.7903, 0.0109107, -4.89042e-05, -1.04739e-06],\n    [0.8435, 0.0103431, -6.4615e-05, -1.40374e-09],\n    [0.8936, 0.00969686, -6.4636e-05, -8.547e-06],\n    [0.9394, 0.00840947, -0.000192841, -4.2106e-06],\n    [0.9761, 0.00616527, -0.000256, -4.2106e-06],\n    [1.0000, 0.00328947, -0.000319159, -4.2106e-06]\n];\n\nvar FXC = 0.8487;\nvar FYC = 1.3523;\nvar C1 = R2D/5; // rad to 5-degree interval\nvar RC1 = 1/C1;\nvar NODES = 18;\n\nvar poly3_val = function(coefs, x) {\n    return coefs[0] + x * (coefs[1] + x * (coefs[2] + x * coefs[3]));\n};\n\nvar poly3_der = function(coefs, x) {\n    return coefs[1] + x * (2 * coefs[2] + x * 3 * coefs[3]);\n};\n\nfunction newton_rapshon(f_df, start, max_err, iters) {\n    var x = start;\n    for (; iters; --iters) {\n        var upd = f_df(x);\n        x -= upd;\n        if (Math.abs(upd) < max_err) {\n            break;\n        }\n    }\n    return x;\n}\n\nexport function init() {\n    this.x0 = this.x0 || 0;\n    this.y0 = this.y0 || 0;\n    this.long0 = this.long0 || 0;\n    this.es = 0;\n    this.title = this.title || \"Robinson\";\n}\n\nexport function forward(ll) {\n    var lon = adjust_lon(ll.x - this.long0);\n\n    var dphi = Math.abs(ll.y);\n    var i = Math.floor(dphi * C1);\n    if (i < 0) {\n        i = 0;\n    } else if (i >= NODES) {\n        i = NODES - 1;\n    }\n    dphi = R2D * (dphi - RC1 * i);\n    var xy = {\n        x: poly3_val(COEFS_X[i], dphi) * lon,\n        y: poly3_val(COEFS_Y[i], dphi)\n    };\n    if (ll.y < 0) {\n        xy.y = -xy.y;\n    }\n\n    xy.x = xy.x * this.a * FXC + this.x0;\n    xy.y = xy.y * this.a * FYC + this.y0;\n    return xy;\n}\n\nexport function inverse(xy) {\n    var ll = {\n        x: (xy.x - this.x0) / (this.a * FXC),\n        y: Math.abs(xy.y - this.y0) / (this.a * FYC)\n    };\n\n    if (ll.y >= 1) { // pathologic case\n        ll.x /= COEFS_X[NODES][0];\n        ll.y = xy.y < 0 ? -HALF_PI : HALF_PI;\n    } else {\n        // find table interval\n        var i = Math.floor(ll.y * NODES);\n        if (i < 0) {\n            i = 0;\n        } else if (i >= NODES) {\n            i = NODES - 1;\n        }\n        for (;;) {\n            if (COEFS_Y[i][0] > ll.y) {\n                --i;\n            } else if (COEFS_Y[i+1][0] <= ll.y) {\n                ++i;\n            } else {\n                break;\n            }\n        }\n        // linear interpolation in 5 degree interval\n        var coefs = COEFS_Y[i];\n        var t = 5 * (ll.y - coefs[0]) / (COEFS_Y[i+1][0] - coefs[0]);\n        // find t so that poly3_val(coefs, t) = ll.y\n        t = newton_rapshon(function(x) {\n            return (poly3_val(coefs, x) - ll.y) / poly3_der(coefs, x);\n        }, t, EPSLN, 100);\n\n        ll.x /= poly3_val(COEFS_X[i], t);\n        ll.y = (5 * i + t) * D2R;\n        if (xy.y < 0) {\n            ll.y = -ll.y;\n        }\n    }\n\n    ll.x = adjust_lon(ll.x + this.long0);\n    return ll;\n}\n\nexport var names = [\"Robinson\", \"robin\"];\nexport default {\n  init: init,\n  forward: forward,\n  inverse: inverse,\n  names: names\n};\n","import tmerc from './lib/projections/tmerc';\nimport etmerc from './lib/projections/etmerc';\nimport utm from './lib/projections/utm';\nimport sterea from './lib/projections/sterea';\nimport stere from './lib/projections/stere';\nimport somerc from './lib/projections/somerc';\nimport omerc from './lib/projections/omerc';\nimport lcc from './lib/projections/lcc';\nimport krovak from './lib/projections/krovak';\nimport cass from './lib/projections/cass';\nimport laea from './lib/projections/laea';\nimport aea from './lib/projections/aea';\nimport gnom from './lib/projections/gnom';\nimport cea from './lib/projections/cea';\nimport eqc from './lib/projections/eqc';\nimport poly from './lib/projections/poly';\nimport nzmg from './lib/projections/nzmg';\nimport mill from './lib/projections/mill';\nimport sinu from './lib/projections/sinu';\nimport moll from './lib/projections/moll';\nimport eqdc from './lib/projections/eqdc';\nimport vandg from './lib/projections/vandg';\nimport aeqd from './lib/projections/aeqd';\nimport ortho from './lib/projections/ortho';\nimport qsc from './lib/projections/qsc';\nimport robin from './lib/projections/robin';\nexport default function(proj4){\n  proj4.Proj.projections.add(tmerc);\n  proj4.Proj.projections.add(etmerc);\n  proj4.Proj.projections.add(utm);\n  proj4.Proj.projections.add(sterea);\n  proj4.Proj.projections.add(stere);\n  proj4.Proj.projections.add(somerc);\n  proj4.Proj.projections.add(omerc);\n  proj4.Proj.projections.add(lcc);\n  proj4.Proj.projections.add(krovak);\n  proj4.Proj.projections.add(cass);\n  proj4.Proj.projections.add(laea);\n  proj4.Proj.projections.add(aea);\n  proj4.Proj.projections.add(gnom);\n  proj4.Proj.projections.add(cea);\n  proj4.Proj.projections.add(eqc);\n  proj4.Proj.projections.add(poly);\n  proj4.Proj.projections.add(nzmg);\n  proj4.Proj.projections.add(mill);\n  proj4.Proj.projections.add(sinu);\n  proj4.Proj.projections.add(moll);\n  proj4.Proj.projections.add(eqdc);\n  proj4.Proj.projections.add(vandg);\n  proj4.Proj.projections.add(aeqd);\n  proj4.Proj.projections.add(ortho);\n  proj4.Proj.projections.add(qsc);\n  proj4.Proj.projections.add(robin);\n}","import proj4 from './core';\nimport Proj from \"./Proj\";\nimport Point from \"./Point\";\nimport common from \"./common/toPoint\";\nimport defs from \"./defs\";\nimport transform from \"./transform\";\nimport mgrs from \"mgrs\";\nimport version from \"./version\";\nimport includedProjections from \"../projs\";\n\nproj4.defaultDatum = 'WGS84'; //default datum\nproj4.Proj = Proj;\nproj4.WGS84 = new proj4.Proj('WGS84');\nproj4.Point = Point;\nproj4.toPoint = common;\nproj4.defs = defs;\nproj4.transform = transform;\nproj4.mgrs = mgrs;\nproj4.version = version;\nincludedProjections(proj4);\nexport default proj4;\n","/**\n * @module ol/render/canvas/Immediate\n */\n// FIXME test, especially polygons with holes and multipolygons\n// FIXME need to handle large thick features (where pixel size matters)\n// FIXME add offset and end to ol/geom/flat/transform~transform2D?\n\nimport {equals} from '../../array.js';\nimport {asColorLike} from '../../colorlike.js';\nimport {intersects} from '../../extent.js';\nimport GeometryType from '../../geom/GeometryType.js';\nimport {transformGeom2D} from '../../geom/SimpleGeometry.js';\nimport {transform2D} from '../../geom/flat/transform.js';\nimport VectorContext from '../VectorContext.js';\nimport {defaultTextAlign, defaultFillStyle, defaultLineCap, defaultLineDash, defaultLineDashOffset, defaultLineJoin, defaultLineWidth, defaultMiterLimit, defaultStrokeStyle, defaultTextBaseline, defaultFont} from '../canvas.js';\nimport {create as createTransform, compose as composeTransform} from '../../transform.js';\n\n/**\n * @classdesc\n * A concrete subclass of {@link module:ol/render/VectorContext} that implements\n * direct rendering of features and geometries to an HTML5 Canvas context.\n * Instances of this class are created internally by the library and\n * provided to application code as vectorContext member of the\n * {@link module:ol/render/Event~RenderEvent} object associated with postcompose, precompose and\n * render events emitted by layers and maps.\n */\nclass CanvasImmediateRenderer extends VectorContext {\n  /**\n   * @param {CanvasRenderingContext2D} context Context.\n   * @param {number} pixelRatio Pixel ratio.\n   * @param {import(\"../../extent.js\").Extent} extent Extent.\n   * @param {import(\"../../transform.js\").Transform} transform Transform.\n   * @param {number} viewRotation View rotation.\n   */\n  constructor(context, pixelRatio, extent, transform, viewRotation) {\n    super();\n\n    /**\n     * @private\n     * @type {CanvasRenderingContext2D}\n     */\n    this.context_ = context;\n\n    /**\n     * @private\n     * @type {number}\n     */\n    this.pixelRatio_ = pixelRatio;\n\n    /**\n     * @private\n     * @type {import(\"../../extent.js\").Extent}\n     */\n    this.extent_ = extent;\n\n    /**\n     * @private\n     * @type {import(\"../../transform.js\").Transform}\n     */\n    this.transform_ = transform;\n\n    /**\n     * @private\n     * @type {number}\n     */\n    this.viewRotation_ = viewRotation;\n\n    /**\n     * @private\n     * @type {?import(\"../canvas.js\").FillState}\n     */\n    this.contextFillState_ = null;\n\n    /**\n     * @private\n     * @type {?import(\"../canvas.js\").StrokeState}\n     */\n    this.contextStrokeState_ = null;\n\n    /**\n     * @private\n     * @type {?import(\"../canvas.js\").TextState}\n     */\n    this.contextTextState_ = null;\n\n    /**\n     * @private\n     * @type {?import(\"../canvas.js\").FillState}\n     */\n    this.fillState_ = null;\n\n    /**\n     * @private\n     * @type {?import(\"../canvas.js\").StrokeState}\n     */\n    this.strokeState_ = null;\n\n    /**\n     * @private\n     * @type {HTMLCanvasElement|HTMLVideoElement|HTMLImageElement}\n     */\n    this.image_ = null;\n\n    /**\n     * @private\n     * @type {number}\n     */\n    this.imageAnchorX_ = 0;\n\n    /**\n     * @private\n     * @type {number}\n     */\n    this.imageAnchorY_ = 0;\n\n    /**\n     * @private\n     * @type {number}\n     */\n    this.imageHeight_ = 0;\n\n    /**\n     * @private\n     * @type {number}\n     */\n    this.imageOpacity_ = 0;\n\n    /**\n     * @private\n     * @type {number}\n     */\n    this.imageOriginX_ = 0;\n\n    /**\n     * @private\n     * @type {number}\n     */\n    this.imageOriginY_ = 0;\n\n    /**\n     * @private\n     * @type {boolean}\n     */\n    this.imageRotateWithView_ = false;\n\n    /**\n     * @private\n     * @type {number}\n     */\n    this.imageRotation_ = 0;\n\n    /**\n     * @private\n     * @type {number}\n     */\n    this.imageScale_ = 0;\n\n    /**\n     * @private\n     * @type {number}\n     */\n    this.imageWidth_ = 0;\n\n    /**\n     * @private\n     * @type {string}\n     */\n    this.text_ = '';\n\n    /**\n     * @private\n     * @type {number}\n     */\n    this.textOffsetX_ = 0;\n\n    /**\n     * @private\n     * @type {number}\n     */\n    this.textOffsetY_ = 0;\n\n    /**\n     * @private\n     * @type {boolean}\n     */\n    this.textRotateWithView_ = false;\n\n    /**\n     * @private\n     * @type {number}\n     */\n    this.textRotation_ = 0;\n\n    /**\n     * @private\n     * @type {number}\n     */\n    this.textScale_ = 0;\n\n    /**\n     * @private\n     * @type {?import(\"../canvas.js\").FillState}\n     */\n    this.textFillState_ = null;\n\n    /**\n     * @private\n     * @type {?import(\"../canvas.js\").StrokeState}\n     */\n    this.textStrokeState_ = null;\n\n    /**\n     * @private\n     * @type {?import(\"../canvas.js\").TextState}\n     */\n    this.textState_ = null;\n\n    /**\n     * @private\n     * @type {Array<number>}\n     */\n    this.pixelCoordinates_ = [];\n\n    /**\n     * @private\n     * @type {import(\"../../transform.js\").Transform}\n     */\n    this.tmpLocalTransform_ = createTransform();\n\n  }\n\n  /**\n   * @param {Array<number>} flatCoordinates Flat coordinates.\n   * @param {number} offset Offset.\n   * @param {number} end End.\n   * @param {number} stride Stride.\n   * @private\n   */\n  drawImages_(flatCoordinates, offset, end, stride) {\n    if (!this.image_) {\n      return;\n    }\n    const pixelCoordinates = transform2D(\n      flatCoordinates, offset, end, 2, this.transform_,\n      this.pixelCoordinates_);\n    const context = this.context_;\n    const localTransform = this.tmpLocalTransform_;\n    const alpha = context.globalAlpha;\n    if (this.imageOpacity_ != 1) {\n      context.globalAlpha = alpha * this.imageOpacity_;\n    }\n    let rotation = this.imageRotation_;\n    if (this.imageRotateWithView_) {\n      rotation += this.viewRotation_;\n    }\n    for (let i = 0, ii = pixelCoordinates.length; i < ii; i += 2) {\n      const x = pixelCoordinates[i] - this.imageAnchorX_;\n      const y = pixelCoordinates[i + 1] - this.imageAnchorY_;\n      if (rotation !== 0 || this.imageScale_ != 1) {\n        const centerX = x + this.imageAnchorX_;\n        const centerY = y + this.imageAnchorY_;\n        composeTransform(localTransform,\n          centerX, centerY,\n          this.imageScale_, this.imageScale_,\n          rotation,\n          -centerX, -centerY);\n        context.setTransform.apply(context, localTransform);\n      }\n      context.drawImage(this.image_, this.imageOriginX_, this.imageOriginY_,\n        this.imageWidth_, this.imageHeight_, x, y,\n        this.imageWidth_, this.imageHeight_);\n    }\n    if (rotation !== 0 || this.imageScale_ != 1) {\n      context.setTransform(1, 0, 0, 1, 0, 0);\n    }\n    if (this.imageOpacity_ != 1) {\n      context.globalAlpha = alpha;\n    }\n  }\n\n  /**\n   * @param {Array<number>} flatCoordinates Flat coordinates.\n   * @param {number} offset Offset.\n   * @param {number} end End.\n   * @param {number} stride Stride.\n   * @private\n   */\n  drawText_(flatCoordinates, offset, end, stride) {\n    if (!this.textState_ || this.text_ === '') {\n      return;\n    }\n    if (this.textFillState_) {\n      this.setContextFillState_(this.textFillState_);\n    }\n    if (this.textStrokeState_) {\n      this.setContextStrokeState_(this.textStrokeState_);\n    }\n    this.setContextTextState_(this.textState_);\n    const pixelCoordinates = transform2D(\n      flatCoordinates, offset, end, stride, this.transform_,\n      this.pixelCoordinates_);\n    const context = this.context_;\n    let rotation = this.textRotation_;\n    if (this.textRotateWithView_) {\n      rotation += this.viewRotation_;\n    }\n    for (; offset < end; offset += stride) {\n      const x = pixelCoordinates[offset] + this.textOffsetX_;\n      const y = pixelCoordinates[offset + 1] + this.textOffsetY_;\n      if (rotation !== 0 || this.textScale_ != 1) {\n        const localTransform = composeTransform(this.tmpLocalTransform_,\n          x, y,\n          this.textScale_, this.textScale_,\n          rotation,\n          -x, -y);\n        context.setTransform.apply(context, localTransform);\n      }\n      if (this.textStrokeState_) {\n        context.strokeText(this.text_, x, y);\n      }\n      if (this.textFillState_) {\n        context.fillText(this.text_, x, y);\n      }\n    }\n    if (rotation !== 0 || this.textScale_ != 1) {\n      context.setTransform(1, 0, 0, 1, 0, 0);\n    }\n  }\n\n  /**\n   * @param {Array<number>} flatCoordinates Flat coordinates.\n   * @param {number} offset Offset.\n   * @param {number} end End.\n   * @param {number} stride Stride.\n   * @param {boolean} close Close.\n   * @private\n   * @return {number} end End.\n   */\n  moveToLineTo_(flatCoordinates, offset, end, stride, close) {\n    const context = this.context_;\n    const pixelCoordinates = transform2D(\n      flatCoordinates, offset, end, stride, this.transform_,\n      this.pixelCoordinates_);\n    context.moveTo(pixelCoordinates[0], pixelCoordinates[1]);\n    let length = pixelCoordinates.length;\n    if (close) {\n      length -= 2;\n    }\n    for (let i = 2; i < length; i += 2) {\n      context.lineTo(pixelCoordinates[i], pixelCoordinates[i + 1]);\n    }\n    if (close) {\n      context.closePath();\n    }\n    return end;\n  }\n\n  /**\n   * @param {Array<number>} flatCoordinates Flat coordinates.\n   * @param {number} offset Offset.\n   * @param {Array<number>} ends Ends.\n   * @param {number} stride Stride.\n   * @private\n   * @return {number} End.\n   */\n  drawRings_(flatCoordinates, offset, ends, stride) {\n    for (let i = 0, ii = ends.length; i < ii; ++i) {\n      offset = this.moveToLineTo_(flatCoordinates, offset, ends[i], stride, true);\n    }\n    return offset;\n  }\n\n  /**\n   * Render a circle geometry into the canvas.  Rendering is immediate and uses\n   * the current fill and stroke styles.\n   *\n   * @param {import(\"../../geom/Circle.js\").default} geometry Circle geometry.\n   * @override\n   * @api\n   */\n  drawCircle(geometry) {\n    if (!intersects(this.extent_, geometry.getExtent())) {\n      return;\n    }\n    if (this.fillState_ || this.strokeState_) {\n      if (this.fillState_) {\n        this.setContextFillState_(this.fillState_);\n      }\n      if (this.strokeState_) {\n        this.setContextStrokeState_(this.strokeState_);\n      }\n      const pixelCoordinates = transformGeom2D(\n        geometry, this.transform_, this.pixelCoordinates_);\n      const dx = pixelCoordinates[2] - pixelCoordinates[0];\n      const dy = pixelCoordinates[3] - pixelCoordinates[1];\n      const radius = Math.sqrt(dx * dx + dy * dy);\n      const context = this.context_;\n      context.beginPath();\n      context.arc(\n        pixelCoordinates[0], pixelCoordinates[1], radius, 0, 2 * Math.PI);\n      if (this.fillState_) {\n        context.fill();\n      }\n      if (this.strokeState_) {\n        context.stroke();\n      }\n    }\n    if (this.text_ !== '') {\n      this.drawText_(geometry.getCenter(), 0, 2, 2);\n    }\n  }\n\n  /**\n   * Set the rendering style.  Note that since this is an immediate rendering API,\n   * any `zIndex` on the provided style will be ignored.\n   *\n   * @param {import(\"../../style/Style.js\").default} style The rendering style.\n   * @override\n   * @api\n   */\n  setStyle(style) {\n    this.setFillStrokeStyle(style.getFill(), style.getStroke());\n    this.setImageStyle(style.getImage());\n    this.setTextStyle(style.getText());\n  }\n\n  /**\n   * Render a geometry into the canvas.  Call\n   * {@link module:ol/render/canvas/Immediate#setStyle} first to set the rendering style.\n   *\n   * @param {import(\"../../geom/Geometry.js\").default|import(\"../Feature.js\").default} geometry The geometry to render.\n   * @override\n   * @api\n   */\n  drawGeometry(geometry) {\n    const type = geometry.getType();\n    switch (type) {\n      case GeometryType.POINT:\n        this.drawPoint(/** @type {import(\"../../geom/Point.js\").default} */ (geometry));\n        break;\n      case GeometryType.LINE_STRING:\n        this.drawLineString(/** @type {import(\"../../geom/LineString.js\").default} */ (geometry));\n        break;\n      case GeometryType.POLYGON:\n        this.drawPolygon(/** @type {import(\"../../geom/Polygon.js\").default} */ (geometry));\n        break;\n      case GeometryType.MULTI_POINT:\n        this.drawMultiPoint(/** @type {import(\"../../geom/MultiPoint.js\").default} */ (geometry));\n        break;\n      case GeometryType.MULTI_LINE_STRING:\n        this.drawMultiLineString(/** @type {import(\"../../geom/MultiLineString.js\").default} */ (geometry));\n        break;\n      case GeometryType.MULTI_POLYGON:\n        this.drawMultiPolygon(/** @type {import(\"../../geom/MultiPolygon.js\").default} */ (geometry));\n        break;\n      case GeometryType.GEOMETRY_COLLECTION:\n        this.drawGeometryCollection(/** @type {import(\"../../geom/GeometryCollection.js\").default} */ (geometry));\n        break;\n      case GeometryType.CIRCLE:\n        this.drawCircle(/** @type {import(\"../../geom/Circle.js\").default} */ (geometry));\n        break;\n      default:\n    }\n  }\n\n  /**\n   * Render a feature into the canvas.  Note that any `zIndex` on the provided\n   * style will be ignored - features are rendered immediately in the order that\n   * this method is called.  If you need `zIndex` support, you should be using an\n   * {@link module:ol/layer/Vector~VectorLayer} instead.\n   *\n   * @param {import(\"../../Feature.js\").default} feature Feature.\n   * @param {import(\"../../style/Style.js\").default} style Style.\n   * @override\n   * @api\n   */\n  drawFeature(feature, style) {\n    const geometry = style.getGeometryFunction()(feature);\n    if (!geometry || !intersects(this.extent_, geometry.getExtent())) {\n      return;\n    }\n    this.setStyle(style);\n    this.drawGeometry(geometry);\n  }\n\n  /**\n   * Render a GeometryCollection to the canvas.  Rendering is immediate and\n   * uses the current styles appropriate for each geometry in the collection.\n   *\n   * @param {import(\"../../geom/GeometryCollection.js\").default} geometry Geometry collection.\n   * @override\n   */\n  drawGeometryCollection(geometry) {\n    const geometries = geometry.getGeometriesArray();\n    for (let i = 0, ii = geometries.length; i < ii; ++i) {\n      this.drawGeometry(geometries[i]);\n    }\n  }\n\n  /**\n   * Render a Point geometry into the canvas.  Rendering is immediate and uses\n   * the current style.\n   *\n   * @param {import(\"../../geom/Point.js\").default|import(\"../Feature.js\").default} geometry Point geometry.\n   * @override\n   */\n  drawPoint(geometry) {\n    const flatCoordinates = geometry.getFlatCoordinates();\n    const stride = geometry.getStride();\n    if (this.image_) {\n      this.drawImages_(flatCoordinates, 0, flatCoordinates.length, stride);\n    }\n    if (this.text_ !== '') {\n      this.drawText_(flatCoordinates, 0, flatCoordinates.length, stride);\n    }\n  }\n\n  /**\n   * Render a MultiPoint geometry  into the canvas.  Rendering is immediate and\n   * uses the current style.\n   *\n   * @param {import(\"../../geom/MultiPoint.js\").default|import(\"../Feature.js\").default} geometry MultiPoint geometry.\n   * @override\n   */\n  drawMultiPoint(geometry) {\n    const flatCoordinates = geometry.getFlatCoordinates();\n    const stride = geometry.getStride();\n    if (this.image_) {\n      this.drawImages_(flatCoordinates, 0, flatCoordinates.length, stride);\n    }\n    if (this.text_ !== '') {\n      this.drawText_(flatCoordinates, 0, flatCoordinates.length, stride);\n    }\n  }\n\n  /**\n   * Render a LineString into the canvas.  Rendering is immediate and uses\n   * the current style.\n   *\n   * @param {import(\"../../geom/LineString.js\").default|import(\"../Feature.js\").default} geometry LineString geometry.\n   * @override\n   */\n  drawLineString(geometry) {\n    if (!intersects(this.extent_, geometry.getExtent())) {\n      return;\n    }\n    if (this.strokeState_) {\n      this.setContextStrokeState_(this.strokeState_);\n      const context = this.context_;\n      const flatCoordinates = geometry.getFlatCoordinates();\n      context.beginPath();\n      this.moveToLineTo_(flatCoordinates, 0, flatCoordinates.length,\n        geometry.getStride(), false);\n      context.stroke();\n    }\n    if (this.text_ !== '') {\n      const flatMidpoint = geometry.getFlatMidpoint();\n      this.drawText_(flatMidpoint, 0, 2, 2);\n    }\n  }\n\n  /**\n   * Render a MultiLineString geometry into the canvas.  Rendering is immediate\n   * and uses the current style.\n   *\n   * @param {import(\"../../geom/MultiLineString.js\").default|import(\"../Feature.js\").default} geometry MultiLineString geometry.\n   * @override\n   */\n  drawMultiLineString(geometry) {\n    const geometryExtent = geometry.getExtent();\n    if (!intersects(this.extent_, geometryExtent)) {\n      return;\n    }\n    if (this.strokeState_) {\n      this.setContextStrokeState_(this.strokeState_);\n      const context = this.context_;\n      const flatCoordinates = geometry.getFlatCoordinates();\n      let offset = 0;\n      const ends = /** @type {Array<number>} */ (geometry.getEnds());\n      const stride = geometry.getStride();\n      context.beginPath();\n      for (let i = 0, ii = ends.length; i < ii; ++i) {\n        offset = this.moveToLineTo_(flatCoordinates, offset, ends[i], stride, false);\n      }\n      context.stroke();\n    }\n    if (this.text_ !== '') {\n      const flatMidpoints = geometry.getFlatMidpoints();\n      this.drawText_(flatMidpoints, 0, flatMidpoints.length, 2);\n    }\n  }\n\n  /**\n   * Render a Polygon geometry into the canvas.  Rendering is immediate and uses\n   * the current style.\n   *\n   * @param {import(\"../../geom/Polygon.js\").default|import(\"../Feature.js\").default} geometry Polygon geometry.\n   * @override\n   */\n  drawPolygon(geometry) {\n    if (!intersects(this.extent_, geometry.getExtent())) {\n      return;\n    }\n    if (this.strokeState_ || this.fillState_) {\n      if (this.fillState_) {\n        this.setContextFillState_(this.fillState_);\n      }\n      if (this.strokeState_) {\n        this.setContextStrokeState_(this.strokeState_);\n      }\n      const context = this.context_;\n      context.beginPath();\n      this.drawRings_(geometry.getOrientedFlatCoordinates(),\n        0, /** @type {Array<number>} */ (geometry.getEnds()), geometry.getStride());\n      if (this.fillState_) {\n        context.fill();\n      }\n      if (this.strokeState_) {\n        context.stroke();\n      }\n    }\n    if (this.text_ !== '') {\n      const flatInteriorPoint = geometry.getFlatInteriorPoint();\n      this.drawText_(flatInteriorPoint, 0, 2, 2);\n    }\n  }\n\n  /**\n   * Render MultiPolygon geometry into the canvas.  Rendering is immediate and\n   * uses the current style.\n   * @param {import(\"../../geom/MultiPolygon.js\").default} geometry MultiPolygon geometry.\n   * @override\n   */\n  drawMultiPolygon(geometry) {\n    if (!intersects(this.extent_, geometry.getExtent())) {\n      return;\n    }\n    if (this.strokeState_ || this.fillState_) {\n      if (this.fillState_) {\n        this.setContextFillState_(this.fillState_);\n      }\n      if (this.strokeState_) {\n        this.setContextStrokeState_(this.strokeState_);\n      }\n      const context = this.context_;\n      const flatCoordinates = geometry.getOrientedFlatCoordinates();\n      let offset = 0;\n      const endss = geometry.getEndss();\n      const stride = geometry.getStride();\n      context.beginPath();\n      for (let i = 0, ii = endss.length; i < ii; ++i) {\n        const ends = endss[i];\n        offset = this.drawRings_(flatCoordinates, offset, ends, stride);\n      }\n      if (this.fillState_) {\n        context.fill();\n      }\n      if (this.strokeState_) {\n        context.stroke();\n      }\n    }\n    if (this.text_ !== '') {\n      const flatInteriorPoints = geometry.getFlatInteriorPoints();\n      this.drawText_(flatInteriorPoints, 0, flatInteriorPoints.length, 2);\n    }\n  }\n\n  /**\n   * @param {import(\"../canvas.js\").FillState} fillState Fill state.\n   * @private\n   */\n  setContextFillState_(fillState) {\n    const context = this.context_;\n    const contextFillState = this.contextFillState_;\n    if (!contextFillState) {\n      context.fillStyle = fillState.fillStyle;\n      this.contextFillState_ = {\n        fillStyle: fillState.fillStyle\n      };\n    } else {\n      if (contextFillState.fillStyle != fillState.fillStyle) {\n        contextFillState.fillStyle = context.fillStyle = fillState.fillStyle;\n      }\n    }\n  }\n\n  /**\n   * @param {import(\"../canvas.js\").StrokeState} strokeState Stroke state.\n   * @private\n   */\n  setContextStrokeState_(strokeState) {\n    const context = this.context_;\n    const contextStrokeState = this.contextStrokeState_;\n    if (!contextStrokeState) {\n      context.lineCap = strokeState.lineCap;\n      if (context.setLineDash) {\n        context.setLineDash(strokeState.lineDash);\n        context.lineDashOffset = strokeState.lineDashOffset;\n      }\n      context.lineJoin = strokeState.lineJoin;\n      context.lineWidth = strokeState.lineWidth;\n      context.miterLimit = strokeState.miterLimit;\n      context.strokeStyle = strokeState.strokeStyle;\n      this.contextStrokeState_ = {\n        lineCap: strokeState.lineCap,\n        lineDash: strokeState.lineDash,\n        lineDashOffset: strokeState.lineDashOffset,\n        lineJoin: strokeState.lineJoin,\n        lineWidth: strokeState.lineWidth,\n        miterLimit: strokeState.miterLimit,\n        strokeStyle: strokeState.strokeStyle\n      };\n    } else {\n      if (contextStrokeState.lineCap != strokeState.lineCap) {\n        contextStrokeState.lineCap = context.lineCap = strokeState.lineCap;\n      }\n      if (context.setLineDash) {\n        if (!equals(contextStrokeState.lineDash, strokeState.lineDash)) {\n          context.setLineDash(contextStrokeState.lineDash = strokeState.lineDash);\n        }\n        if (contextStrokeState.lineDashOffset != strokeState.lineDashOffset) {\n          contextStrokeState.lineDashOffset = context.lineDashOffset =\n              strokeState.lineDashOffset;\n        }\n      }\n      if (contextStrokeState.lineJoin != strokeState.lineJoin) {\n        contextStrokeState.lineJoin = context.lineJoin = strokeState.lineJoin;\n      }\n      if (contextStrokeState.lineWidth != strokeState.lineWidth) {\n        contextStrokeState.lineWidth = context.lineWidth = strokeState.lineWidth;\n      }\n      if (contextStrokeState.miterLimit != strokeState.miterLimit) {\n        contextStrokeState.miterLimit = context.miterLimit =\n            strokeState.miterLimit;\n      }\n      if (contextStrokeState.strokeStyle != strokeState.strokeStyle) {\n        contextStrokeState.strokeStyle = context.strokeStyle =\n            strokeState.strokeStyle;\n      }\n    }\n  }\n\n  /**\n   * @param {import(\"../canvas.js\").TextState} textState Text state.\n   * @private\n   */\n  setContextTextState_(textState) {\n    const context = this.context_;\n    const contextTextState = this.contextTextState_;\n    const textAlign = textState.textAlign ?\n      textState.textAlign : defaultTextAlign;\n    if (!contextTextState) {\n      context.font = textState.font;\n      context.textAlign = /** @type {CanvasTextAlign} */ (textAlign);\n      context.textBaseline = /** @type {CanvasTextBaseline} */ (textState.textBaseline);\n      this.contextTextState_ = {\n        font: textState.font,\n        textAlign: textAlign,\n        textBaseline: textState.textBaseline\n      };\n    } else {\n      if (contextTextState.font != textState.font) {\n        contextTextState.font = context.font = textState.font;\n      }\n      if (contextTextState.textAlign != textAlign) {\n        contextTextState.textAlign = context.textAlign = /** @type {CanvasTextAlign} */ (textAlign);\n      }\n      if (contextTextState.textBaseline != textState.textBaseline) {\n        contextTextState.textBaseline = context.textBaseline =\n          /** @type {CanvasTextBaseline} */ (textState.textBaseline);\n      }\n    }\n  }\n\n  /**\n   * Set the fill and stroke style for subsequent draw operations.  To clear\n   * either fill or stroke styles, pass null for the appropriate parameter.\n   *\n   * @param {import(\"../../style/Fill.js\").default} fillStyle Fill style.\n   * @param {import(\"../../style/Stroke.js\").default} strokeStyle Stroke style.\n   * @override\n   */\n  setFillStrokeStyle(fillStyle, strokeStyle) {\n    if (!fillStyle) {\n      this.fillState_ = null;\n    } else {\n      const fillStyleColor = fillStyle.getColor();\n      this.fillState_ = {\n        fillStyle: asColorLike(fillStyleColor ?\n          fillStyleColor : defaultFillStyle)\n      };\n    }\n    if (!strokeStyle) {\n      this.strokeState_ = null;\n    } else {\n      const strokeStyleColor = strokeStyle.getColor();\n      const strokeStyleLineCap = strokeStyle.getLineCap();\n      const strokeStyleLineDash = strokeStyle.getLineDash();\n      const strokeStyleLineDashOffset = strokeStyle.getLineDashOffset();\n      const strokeStyleLineJoin = strokeStyle.getLineJoin();\n      const strokeStyleWidth = strokeStyle.getWidth();\n      const strokeStyleMiterLimit = strokeStyle.getMiterLimit();\n      this.strokeState_ = {\n        lineCap: strokeStyleLineCap !== undefined ?\n          strokeStyleLineCap : defaultLineCap,\n        lineDash: strokeStyleLineDash ?\n          strokeStyleLineDash : defaultLineDash,\n        lineDashOffset: strokeStyleLineDashOffset ?\n          strokeStyleLineDashOffset : defaultLineDashOffset,\n        lineJoin: strokeStyleLineJoin !== undefined ?\n          strokeStyleLineJoin : defaultLineJoin,\n        lineWidth: this.pixelRatio_ * (strokeStyleWidth !== undefined ?\n          strokeStyleWidth : defaultLineWidth),\n        miterLimit: strokeStyleMiterLimit !== undefined ?\n          strokeStyleMiterLimit : defaultMiterLimit,\n        strokeStyle: asColorLike(strokeStyleColor ?\n          strokeStyleColor : defaultStrokeStyle)\n      };\n    }\n  }\n\n  /**\n   * Set the image style for subsequent draw operations.  Pass null to remove\n   * the image style.\n   *\n   * @param {import(\"../../style/Image.js\").default} imageStyle Image style.\n   * @override\n   */\n  setImageStyle(imageStyle) {\n    if (!imageStyle) {\n      this.image_ = null;\n    } else {\n      const imageAnchor = imageStyle.getAnchor();\n      // FIXME pixel ratio\n      const imageImage = imageStyle.getImage(1);\n      const imageOrigin = imageStyle.getOrigin();\n      const imageSize = imageStyle.getSize();\n      this.imageAnchorX_ = imageAnchor[0];\n      this.imageAnchorY_ = imageAnchor[1];\n      this.imageHeight_ = imageSize[1];\n      this.image_ = imageImage;\n      this.imageOpacity_ = imageStyle.getOpacity();\n      this.imageOriginX_ = imageOrigin[0];\n      this.imageOriginY_ = imageOrigin[1];\n      this.imageRotateWithView_ = imageStyle.getRotateWithView();\n      this.imageRotation_ = imageStyle.getRotation();\n      this.imageScale_ = imageStyle.getScale() * this.pixelRatio_;\n      this.imageWidth_ = imageSize[0];\n    }\n  }\n\n  /**\n   * Set the text style for subsequent draw operations.  Pass null to\n   * remove the text style.\n   *\n   * @param {import(\"../../style/Text.js\").default} textStyle Text style.\n   * @override\n   */\n  setTextStyle(textStyle) {\n    if (!textStyle) {\n      this.text_ = '';\n    } else {\n      const textFillStyle = textStyle.getFill();\n      if (!textFillStyle) {\n        this.textFillState_ = null;\n      } else {\n        const textFillStyleColor = textFillStyle.getColor();\n        this.textFillState_ = {\n          fillStyle: asColorLike(textFillStyleColor ?\n            textFillStyleColor : defaultFillStyle)\n        };\n      }\n      const textStrokeStyle = textStyle.getStroke();\n      if (!textStrokeStyle) {\n        this.textStrokeState_ = null;\n      } else {\n        const textStrokeStyleColor = textStrokeStyle.getColor();\n        const textStrokeStyleLineCap = textStrokeStyle.getLineCap();\n        const textStrokeStyleLineDash = textStrokeStyle.getLineDash();\n        const textStrokeStyleLineDashOffset = textStrokeStyle.getLineDashOffset();\n        const textStrokeStyleLineJoin = textStrokeStyle.getLineJoin();\n        const textStrokeStyleWidth = textStrokeStyle.getWidth();\n        const textStrokeStyleMiterLimit = textStrokeStyle.getMiterLimit();\n        this.textStrokeState_ = {\n          lineCap: textStrokeStyleLineCap !== undefined ?\n            textStrokeStyleLineCap : defaultLineCap,\n          lineDash: textStrokeStyleLineDash ?\n            textStrokeStyleLineDash : defaultLineDash,\n          lineDashOffset: textStrokeStyleLineDashOffset ?\n            textStrokeStyleLineDashOffset : defaultLineDashOffset,\n          lineJoin: textStrokeStyleLineJoin !== undefined ?\n            textStrokeStyleLineJoin : defaultLineJoin,\n          lineWidth: textStrokeStyleWidth !== undefined ?\n            textStrokeStyleWidth : defaultLineWidth,\n          miterLimit: textStrokeStyleMiterLimit !== undefined ?\n            textStrokeStyleMiterLimit : defaultMiterLimit,\n          strokeStyle: asColorLike(textStrokeStyleColor ?\n            textStrokeStyleColor : defaultStrokeStyle)\n        };\n      }\n      const textFont = textStyle.getFont();\n      const textOffsetX = textStyle.getOffsetX();\n      const textOffsetY = textStyle.getOffsetY();\n      const textRotateWithView = textStyle.getRotateWithView();\n      const textRotation = textStyle.getRotation();\n      const textScale = textStyle.getScale();\n      const textText = textStyle.getText();\n      const textTextAlign = textStyle.getTextAlign();\n      const textTextBaseline = textStyle.getTextBaseline();\n      this.textState_ = {\n        font: textFont !== undefined ?\n          textFont : defaultFont,\n        textAlign: textTextAlign !== undefined ?\n          textTextAlign : defaultTextAlign,\n        textBaseline: textTextBaseline !== undefined ?\n          textTextBaseline : defaultTextBaseline\n      };\n      this.text_ = textText !== undefined ? textText : '';\n      this.textOffsetX_ =\n          textOffsetX !== undefined ? (this.pixelRatio_ * textOffsetX) : 0;\n      this.textOffsetY_ =\n          textOffsetY !== undefined ? (this.pixelRatio_ * textOffsetY) : 0;\n      this.textRotateWithView_ = textRotateWithView !== undefined ? textRotateWithView : false;\n      this.textRotation_ = textRotation !== undefined ? textRotation : 0;\n      this.textScale_ = this.pixelRatio_ * (textScale !== undefined ?\n        textScale : 1);\n    }\n  }\n}\n\n\nexport default CanvasImmediateRenderer;\n","/**\n * @module ol/render\n */\nimport {DEVICE_PIXEL_RATIO} from './has.js';\nimport {\n  apply as applyTransform,\n  create as createTransform,\n  multiply as multiplyTransform,\n  scale as scaleTransform\n} from './transform.js';\nimport CanvasImmediateRenderer from './render/canvas/Immediate.js';\n\n\n/**\n * @typedef {Object} State\n * @property {CanvasRenderingContext2D} context Canvas context that the layer is being rendered to.\n * @property {import(\"./Feature.js\").FeatureLike} feature\n * @property {import(\"./geom/SimpleGeometry.js\").default} geometry\n * @property {number} pixelRatio Pixel ratio used by the layer renderer.\n * @property {number} resolution Resolution that the render batch was created and optimized for.\n * This is not the view's resolution that is being rendered.\n * @property {number} rotation Rotation of the rendered layer in radians.\n */\n\n\n/**\n * A function to be used when sorting features before rendering.\n * It takes two instances of {@link module:ol/Feature} or\n * {@link module:ol/render/Feature} and returns a `{number}`.\n *\n * @typedef {function(import(\"./Feature.js\").FeatureLike, import(\"./Feature.js\").FeatureLike):number} OrderFunction\n */\n\n\n/**\n * @typedef {Object} ToContextOptions\n * @property {import(\"./size.js\").Size} [size] Desired size of the canvas in css\n * pixels. When provided, both canvas and css size will be set according to the\n * `pixelRatio`. If not provided, the current canvas and css sizes will not be\n * altered.\n * @property {number} [pixelRatio=window.devicePixelRatio] Pixel ratio (canvas\n * pixel to css pixel ratio) for the canvas.\n */\n\n\n/**\n * Binds a Canvas Immediate API to a canvas context, to allow drawing geometries\n * to the context's canvas.\n *\n * The units for geometry coordinates are css pixels relative to the top left\n * corner of the canvas element.\n * ```js\n * import {toContext} from 'ol/render';\n * import Fill from 'ol/style/Fill';\n * import Polygon from 'ol/geom/Polygon';\n *\n * var canvas = document.createElement('canvas');\n * var render = toContext(canvas.getContext('2d'),\n *     { size: [100, 100] });\n * render.setFillStrokeStyle(new Fill({ color: blue }));\n * render.drawPolygon(\n *     new Polygon([[[0, 0], [100, 100], [100, 0], [0, 0]]]));\n * ```\n *\n * @param {CanvasRenderingContext2D} context Canvas context.\n * @param {ToContextOptions=} opt_options Options.\n * @return {CanvasImmediateRenderer} Canvas Immediate.\n * @api\n */\nexport function toContext(context, opt_options) {\n  const canvas = context.canvas;\n  const options = opt_options ? opt_options : {};\n  const pixelRatio = options.pixelRatio || DEVICE_PIXEL_RATIO;\n  const size = options.size;\n  if (size) {\n    canvas.width = size[0] * pixelRatio;\n    canvas.height = size[1] * pixelRatio;\n    canvas.style.width = size[0] + 'px';\n    canvas.style.height = size[1] + 'px';\n  }\n  const extent = [0, 0, canvas.width, canvas.height];\n  const transform = scaleTransform(createTransform(), pixelRatio, pixelRatio);\n  return new CanvasImmediateRenderer(context, pixelRatio, extent, transform, 0);\n}\n\n/**\n * Gets a vector context for drawing to the event's canvas.\n * @param {import(\"./render/Event.js\").default} event Render event.\n * @returns {CanvasImmediateRenderer} Vector context.\n * @api\n */\nexport function getVectorContext(event) {\n  const frameState = event.frameState;\n  const transform = multiplyTransform(event.inversePixelTransform.slice(), frameState.coordinateToPixelTransform);\n  return new CanvasImmediateRenderer(\n    event.context, frameState.pixelRatio, frameState.extent, transform,\n    frameState.viewState.rotation);\n}\n\n/**\n * Gets the pixel of the event's canvas context from the map viewport's CSS pixel.\n * @param {import(\"./render/Event.js\").default} event Render event.\n * @param {import(\"./pixel.js\").Pixel} pixel CSS pixel relative to the top-left\n * corner of the map viewport.\n * @returns {import(\"./pixel.js\").Pixel} Pixel on the event's canvas context.\n * @api\n */\nexport function getRenderPixel(event, pixel) {\n  const result = pixel.slice(0);\n  applyTransform(event.inversePixelTransform.slice(), result);\n  return result;\n}\n\n/**\n * @param {import(\"./PluggableMap.js\").FrameState} frameState Frame state.\n * @param {?} declutterTree Declutter tree.\n * @returns {?} Declutter tree.\n */\nexport function renderDeclutterItems(frameState, declutterTree) {\n  if (declutterTree) {\n    declutterTree.clear();\n  }\n  const items = frameState.declutterItems;\n  for (let z = items.length - 1; z >= 0; --z) {\n    const item = items[z];\n    const zIndexItems = item.items;\n    for (let i = 0, ii = zIndexItems.length; i < ii; i += 3) {\n      declutterTree = zIndexItems[i].renderDeclutter(zIndexItems[i + 1], zIndexItems[i + 2], item.opacity, declutterTree);\n    }\n  }\n  items.length = 0;\n  return declutterTree;\n}\n","/**\n * @module ol/source/Stamen\n */\n\nimport {ATTRIBUTION as OSM_ATTRIBUTION} from './OSM.js';\nimport XYZ from './XYZ.js';\n\n\n/**\n * @const\n * @type {Array<string>}\n */\nconst ATTRIBUTIONS = [\n  'Map tiles by <a href=\"https://stamen.com/\">Stamen Design</a>, ' +\n        'under <a href=\"https://creativecommons.org/licenses/by/3.0/\">CC BY' +\n        ' 3.0</a>.',\n  OSM_ATTRIBUTION\n];\n\n\n/**\n * @type {Object<string, {extension: string, opaque: boolean}>}\n */\nconst LayerConfig = {\n  'terrain': {\n    extension: 'jpg',\n    opaque: true\n  },\n  'terrain-background': {\n    extension: 'jpg',\n    opaque: true\n  },\n  'terrain-labels': {\n    extension: 'png',\n    opaque: false\n  },\n  'terrain-lines': {\n    extension: 'png',\n    opaque: false\n  },\n  'toner-background': {\n    extension: 'png',\n    opaque: true\n  },\n  'toner': {\n    extension: 'png',\n    opaque: true\n  },\n  'toner-hybrid': {\n    extension: 'png',\n    opaque: false\n  },\n  'toner-labels': {\n    extension: 'png',\n    opaque: false\n  },\n  'toner-lines': {\n    extension: 'png',\n    opaque: false\n  },\n  'toner-lite': {\n    extension: 'png',\n    opaque: true\n  },\n  'watercolor': {\n    extension: 'jpg',\n    opaque: true\n  }\n};\n\n\n/**\n * @type {Object<string, {minZoom: number, maxZoom: number}>}\n */\nconst ProviderConfig = {\n  'terrain': {\n    minZoom: 0,\n    maxZoom: 18\n  },\n  'toner': {\n    minZoom: 0,\n    maxZoom: 20\n  },\n  'watercolor': {\n    minZoom: 0,\n    maxZoom: 18\n  }\n};\n\n\n/**\n * @typedef {Object} Options\n * @property {number} [cacheSize] Tile cache size. The default depends on the screen size. Will increase if too small.\n * @property {string} layer Layer name.\n * @property {number} [minZoom] Minimum zoom.\n * @property {number} [maxZoom] Maximum zoom.\n * @property {number} [reprojectionErrorThreshold=0.5] Maximum allowed reprojection error (in pixels).\n * Higher values can increase reprojection performance, but decrease precision.\n * @property {import(\"../Tile.js\").LoadFunction} [tileLoadFunction]\n * Optional function to load a tile given a URL. The default is\n * ```js\n * function(imageTile, src) {\n *   imageTile.getImage().src = src;\n * };\n * ```\n * @property {number} [transition] Duration of the opacity transition for rendering.\n * To disable the opacity transition, pass `transition: 0`.\n * @property {string} [url] URL template. Must include `{x}`, `{y}` or `{-y}`, and `{z}` placeholders.\n * @property {boolean} [wrapX=true] Whether to wrap the world horizontally.\n */\n\n\n/**\n * @classdesc\n * Layer source for the Stamen tile server.\n * @api\n */\nclass Stamen extends XYZ {\n  /**\n   * @param {Options} options Stamen options.\n   */\n  constructor(options) {\n    const i = options.layer.indexOf('-');\n    const provider = i == -1 ? options.layer : options.layer.slice(0, i);\n    const providerConfig = ProviderConfig[provider];\n\n    const layerConfig = LayerConfig[options.layer];\n\n    const url = options.url !== undefined ? options.url :\n      'https://stamen-tiles-{a-d}.a.ssl.fastly.net/' + options.layer +\n        '/{z}/{x}/{y}.' + layerConfig.extension;\n\n    super({\n      attributions: ATTRIBUTIONS,\n      cacheSize: options.cacheSize,\n      crossOrigin: 'anonymous',\n      maxZoom: options.maxZoom != undefined ? options.maxZoom : providerConfig.maxZoom,\n      minZoom: options.minZoom != undefined ? options.minZoom : providerConfig.minZoom,\n      opaque: layerConfig.opaque,\n      reprojectionErrorThreshold: options.reprojectionErrorThreshold,\n      tileLoadFunction: options.tileLoadFunction,\n      transition: options.transition,\n      url: url,\n      wrapX: options.wrapX\n    });\n\n  }\n\n}\n\nexport default Stamen;\n","/**\n * @module ol/source/TileWMS\n */\n\nimport {DEFAULT_WMS_VERSION} from './common.js';\n\nimport {assert} from '../asserts.js';\nimport {buffer, createEmpty} from '../extent.js';\nimport {assign} from '../obj.js';\nimport {modulo} from '../math.js';\nimport {get as getProjection, transform, transformExtent} from '../proj.js';\nimport {calculateSourceResolution} from '../reproj.js';\nimport {toSize, buffer as bufferSize, scale as scaleSize} from '../size.js';\nimport TileImage from './TileImage.js';\nimport WMSServerType from './WMSServerType.js';\nimport {hash as tileCoordHash} from '../tilecoord.js';\nimport {compareVersions} from '../string.js';\nimport {appendParams} from '../uri.js';\n\n/**\n * @typedef {Object} Options\n * @property {import(\"./Source.js\").AttributionLike} [attributions] Attributions.\n * @property {number} [cacheSize] Tile cache size. The default depends on the screen size. Will increase if too small.\n * @property {null|string} [crossOrigin] The `crossOrigin` attribute for loaded images.  Note that\n * you must provide a `crossOrigin` value if you want to access pixel data with the Canvas renderer.\n * See https://developer.mozilla.org/en-US/docs/Web/HTML/CORS_enabled_image for more detail.\n * @property {Object<string,*>} params WMS request parameters.\n * At least a `LAYERS` param is required. `STYLES` is\n * `''` by default. `VERSION` is `1.3.0` by default. `WIDTH`, `HEIGHT`, `BBOX`\n * and `CRS` (`SRS` for WMS version < 1.3.0) will be set dynamically.\n * @property {number} [gutter=0]\n * The size in pixels of the gutter around image tiles to ignore. By setting\n * this property to a non-zero value, images will be requested that are wider\n * and taller than the tile size by a value of `2 x gutter`.\n * Using a non-zero value allows artifacts of rendering at tile edges to be\n * ignored. If you control the WMS service it is recommended to address\n * \"artifacts at tile edges\" issues by properly configuring the WMS service. For\n * example, MapServer has a `tile_map_edge_buffer` configuration parameter for\n * this. See http://mapserver.org/output/tile_mode.html.\n * @property {boolean} [hidpi=true] Use the `ol/Map#pixelRatio` value when requesting\n * the image from the remote server.\n * @property {import(\"../proj.js\").ProjectionLike} [projection] Projection. Default is the view projection.\n * @property {number} [reprojectionErrorThreshold=0.5] Maximum allowed reprojection error (in pixels).\n * Higher values can increase reprojection performance, but decrease precision.\n * @property {typeof import(\"../ImageTile.js\").default} [tileClass] Class used to instantiate image tiles.\n * Default is {@link module:ol/ImageTile~ImageTile}.\n * @property {import(\"../tilegrid/TileGrid.js\").default} [tileGrid] Tile grid. Base this on the resolutions,\n * tilesize and extent supported by the server.\n * If this is not defined, a default grid will be used: if there is a projection\n * extent, the grid will be based on that; if not, a grid based on a global\n * extent with origin at 0,0 will be used..\n * @property {import(\"./WMSServerType.js\").default|string} [serverType]\n * The type of the remote WMS server. Currently only used when `hidpi` is\n * `true`.\n * @property {import(\"../Tile.js\").LoadFunction} [tileLoadFunction] Optional function to load a tile given a URL. The default is\n * ```js\n * function(imageTile, src) {\n *   imageTile.getImage().src = src;\n * };\n * ```\n * @property {string} [url] WMS service URL.\n * @property {Array<string>} [urls] WMS service urls.\n * Use this instead of `url` when the WMS supports multiple urls for GetMap requests.\n * @property {boolean} [wrapX=true] Whether to wrap the world horizontally.\n * When set to `false`, only one world\n * will be rendered. When `true`, tiles will be requested for one world only,\n * but they will be wrapped horizontally to render multiple worlds.\n * @property {number} [transition] Duration of the opacity transition for rendering.\n * To disable the opacity transition, pass `transition: 0`.\n */\n\n\n/**\n * @classdesc\n * Layer source for tile data from WMS servers.\n * @api\n */\nclass TileWMS extends TileImage {\n  /**\n   * @param {Options=} [opt_options] Tile WMS options.\n   */\n  constructor(opt_options) {\n\n    const options = opt_options ? opt_options : {};\n\n    const params = options.params || {};\n\n    const transparent = 'TRANSPARENT' in params ? params['TRANSPARENT'] : true;\n\n    super({\n      attributions: options.attributions,\n      cacheSize: options.cacheSize,\n      crossOrigin: options.crossOrigin,\n      opaque: !transparent,\n      projection: options.projection,\n      reprojectionErrorThreshold: options.reprojectionErrorThreshold,\n      tileClass: options.tileClass,\n      tileGrid: options.tileGrid,\n      tileLoadFunction: options.tileLoadFunction,\n      tileUrlFunction: tileUrlFunction,\n      url: options.url,\n      urls: options.urls,\n      wrapX: options.wrapX !== undefined ? options.wrapX : true,\n      transition: options.transition\n    });\n\n    /**\n     * @private\n     * @type {number}\n     */\n    this.gutter_ = options.gutter !== undefined ? options.gutter : 0;\n\n    /**\n     * @private\n     * @type {!Object}\n     */\n    this.params_ = params;\n\n    /**\n     * @private\n     * @type {boolean}\n     */\n    this.v13_ = true;\n\n    /**\n     * @private\n     * @type {import(\"./WMSServerType.js\").default|undefined}\n     */\n    this.serverType_ = /** @type {import(\"./WMSServerType.js\").default|undefined} */ (options.serverType);\n\n    /**\n     * @private\n     * @type {boolean}\n     */\n    this.hidpi_ = options.hidpi !== undefined ? options.hidpi : true;\n\n    /**\n     * @private\n     * @type {import(\"../extent.js\").Extent}\n     */\n    this.tmpExtent_ = createEmpty();\n\n    this.updateV13_();\n    this.setKey(this.getKeyForParams_());\n\n  }\n\n  /**\n   * Return the GetFeatureInfo URL for the passed coordinate, resolution, and\n   * projection. Return `undefined` if the GetFeatureInfo URL cannot be\n   * constructed.\n   * @param {import(\"../coordinate.js\").Coordinate} coordinate Coordinate.\n   * @param {number} resolution Resolution.\n   * @param {import(\"../proj.js\").ProjectionLike} projection Projection.\n   * @param {!Object} params GetFeatureInfo params. `INFO_FORMAT` at least should\n   *     be provided. If `QUERY_LAYERS` is not provided then the layers specified\n   *     in the `LAYERS` parameter will be used. `VERSION` should not be\n   *     specified here.\n   * @return {string|undefined} GetFeatureInfo URL.\n   * @api\n   */\n  getFeatureInfoUrl(coordinate, resolution, projection, params) {\n    const projectionObj = getProjection(projection);\n    const sourceProjectionObj = this.getProjection();\n\n    let tileGrid = this.getTileGrid();\n    if (!tileGrid) {\n      tileGrid = this.getTileGridForProjection(projectionObj);\n    }\n\n    const z = tileGrid.getZForResolution(resolution, this.zDirection);\n    const tileCoord = tileGrid.getTileCoordForCoordAndZ(coordinate, z);\n\n    if (tileGrid.getResolutions().length <= tileCoord[0]) {\n      return undefined;\n    }\n\n    let tileResolution = tileGrid.getResolution(tileCoord[0]);\n    let tileExtent = tileGrid.getTileCoordExtent(tileCoord, this.tmpExtent_);\n    let tileSize = toSize(tileGrid.getTileSize(tileCoord[0]), this.tmpSize);\n\n\n    const gutter = this.gutter_;\n    if (gutter !== 0) {\n      tileSize = bufferSize(tileSize, gutter, this.tmpSize);\n      tileExtent = buffer(tileExtent, tileResolution * gutter, tileExtent);\n    }\n\n    if (sourceProjectionObj && sourceProjectionObj !== projectionObj) {\n      tileResolution = calculateSourceResolution(sourceProjectionObj, projectionObj, coordinate, tileResolution);\n      tileExtent = transformExtent(tileExtent, projectionObj, sourceProjectionObj);\n      coordinate = transform(coordinate, projectionObj, sourceProjectionObj);\n    }\n\n    const baseParams = {\n      'SERVICE': 'WMS',\n      'VERSION': DEFAULT_WMS_VERSION,\n      'REQUEST': 'GetFeatureInfo',\n      'FORMAT': 'image/png',\n      'TRANSPARENT': true,\n      'QUERY_LAYERS': this.params_['LAYERS']\n    };\n    assign(baseParams, this.params_, params);\n\n    const x = Math.floor((coordinate[0] - tileExtent[0]) / tileResolution);\n    const y = Math.floor((tileExtent[3] - coordinate[1]) / tileResolution);\n\n    baseParams[this.v13_ ? 'I' : 'X'] = x;\n    baseParams[this.v13_ ? 'J' : 'Y'] = y;\n\n    return this.getRequestUrl_(tileCoord, tileSize, tileExtent,\n      1, sourceProjectionObj || projectionObj, baseParams);\n  }\n\n  /**\n   * Return the GetLegendGraphic URL, optionally optimized for the passed\n   * resolution and possibly including any passed specific parameters. Returns\n   * `undefined` if the GetLegendGraphic URL cannot be constructed.\n   *\n   * @param {number} [resolution] Resolution. If set to undefined, `SCALE`\n   *     will not be calculated and included in URL.\n   * @param {Object} [params] GetLegendGraphic params. If `LAYER` is set, the\n   *     request is generated for this wms layer, else it will try to use the\n   *     configured wms layer. Default `FORMAT` is `image/png`.\n   *     `VERSION` should not be specified here.\n   * @return {string|undefined} GetLegendGraphic URL.\n   * @api\n   */\n  getLegendUrl(resolution, params) {\n    if (this.urls[0] === undefined) {\n      return undefined;\n    }\n\n    const baseParams = {\n      'SERVICE': 'WMS',\n      'VERSION': DEFAULT_WMS_VERSION,\n      'REQUEST': 'GetLegendGraphic',\n      'FORMAT': 'image/png'\n    };\n\n    if (params === undefined || params['LAYER'] === undefined) {\n      const layers = this.params_.LAYERS;\n      const isSingleLayer = !Array.isArray(layers) || layers.length === 1;\n      if (!isSingleLayer) {\n        return undefined;\n      }\n      baseParams['LAYER'] = layers;\n    }\n\n    if (resolution !== undefined) {\n      const mpu = this.getProjection() ? this.getProjection().getMetersPerUnit() : 1;\n      const dpi = 25.4 / 0.28;\n      const inchesPerMeter = 39.37;\n      baseParams['SCALE'] = resolution * mpu * inchesPerMeter * dpi;\n    }\n\n    assign(baseParams, params);\n\n    return appendParams(/** @type {string} */ (this.urls[0]), baseParams);\n  }\n\n  /**\n   * @inheritDoc\n   */\n  getGutter() {\n    return this.gutter_;\n  }\n\n  /**\n   * Get the user-provided params, i.e. those passed to the constructor through\n   * the \"params\" option, and possibly updated using the updateParams method.\n   * @return {Object} Params.\n   * @api\n   */\n  getParams() {\n    return this.params_;\n  }\n\n  /**\n   * @param {import(\"../tilecoord.js\").TileCoord} tileCoord Tile coordinate.\n   * @param {import(\"../size.js\").Size} tileSize Tile size.\n   * @param {import(\"../extent.js\").Extent} tileExtent Tile extent.\n   * @param {number} pixelRatio Pixel ratio.\n   * @param {import(\"../proj/Projection.js\").default} projection Projection.\n   * @param {Object} params Params.\n   * @return {string|undefined} Request URL.\n   * @private\n   */\n  getRequestUrl_(tileCoord, tileSize, tileExtent, pixelRatio, projection, params) {\n\n    const urls = this.urls;\n    if (!urls) {\n      return undefined;\n    }\n\n    params['WIDTH'] = tileSize[0];\n    params['HEIGHT'] = tileSize[1];\n\n    params[this.v13_ ? 'CRS' : 'SRS'] = projection.getCode();\n\n    if (!('STYLES' in this.params_)) {\n      params['STYLES'] = '';\n    }\n\n    if (pixelRatio != 1) {\n      switch (this.serverType_) {\n        case WMSServerType.GEOSERVER:\n          const dpi = (90 * pixelRatio + 0.5) | 0;\n          if ('FORMAT_OPTIONS' in params) {\n            params['FORMAT_OPTIONS'] += ';dpi:' + dpi;\n          } else {\n            params['FORMAT_OPTIONS'] = 'dpi:' + dpi;\n          }\n          break;\n        case WMSServerType.MAPSERVER:\n          params['MAP_RESOLUTION'] = 90 * pixelRatio;\n          break;\n        case WMSServerType.CARMENTA_SERVER:\n        case WMSServerType.QGIS:\n          params['DPI'] = 90 * pixelRatio;\n          break;\n        default:\n          assert(false, 52); // Unknown `serverType` configured\n          break;\n      }\n    }\n\n    const axisOrientation = projection.getAxisOrientation();\n    const bbox = tileExtent;\n    if (this.v13_ && axisOrientation.substr(0, 2) == 'ne') {\n      let tmp;\n      tmp = tileExtent[0];\n      bbox[0] = tileExtent[1];\n      bbox[1] = tmp;\n      tmp = tileExtent[2];\n      bbox[2] = tileExtent[3];\n      bbox[3] = tmp;\n    }\n    params['BBOX'] = bbox.join(',');\n\n    let url;\n    if (urls.length == 1) {\n      url = urls[0];\n    } else {\n      const index = modulo(tileCoordHash(tileCoord), urls.length);\n      url = urls[index];\n    }\n    return appendParams(url, params);\n  }\n\n  /**\n   * @inheritDoc\n   */\n  getTilePixelRatio(pixelRatio) {\n    return (!this.hidpi_ || this.serverType_ === undefined) ? 1 :\n    /** @type {number} */ (pixelRatio);\n  }\n\n  /**\n   * @private\n   * @return {string} The key for the current params.\n   */\n  getKeyForParams_() {\n    let i = 0;\n    const res = [];\n    for (const key in this.params_) {\n      res[i++] = key + '-' + this.params_[key];\n    }\n    return res.join('/');\n  }\n\n  /**\n   * Update the user-provided params.\n   * @param {Object} params Params.\n   * @api\n   */\n  updateParams(params) {\n    assign(this.params_, params);\n    this.updateV13_();\n    this.setKey(this.getKeyForParams_());\n  }\n\n  /**\n   * @private\n   */\n  updateV13_() {\n    const version = this.params_['VERSION'] || DEFAULT_WMS_VERSION;\n    this.v13_ = compareVersions(version, '1.3') >= 0;\n  }\n}\n\n/**\n * @param {import(\"../tilecoord.js\").TileCoord} tileCoord The tile coordinate\n * @param {number} pixelRatio The pixel ratio\n * @param {import(\"../proj/Projection.js\").default} projection The projection\n * @return {string|undefined} The tile URL\n * @this {TileWMS}\n */\nfunction tileUrlFunction(tileCoord, pixelRatio, projection) {\n\n  let tileGrid = this.getTileGrid();\n  if (!tileGrid) {\n    tileGrid = this.getTileGridForProjection(projection);\n  }\n\n  if (tileGrid.getResolutions().length <= tileCoord[0]) {\n    return undefined;\n  }\n\n  if (pixelRatio != 1 && (!this.hidpi_ || this.serverType_ === undefined)) {\n    pixelRatio = 1;\n  }\n\n  const tileResolution = tileGrid.getResolution(tileCoord[0]);\n  let tileExtent = tileGrid.getTileCoordExtent(tileCoord, this.tmpExtent_);\n  let tileSize = toSize(\n    tileGrid.getTileSize(tileCoord[0]), this.tmpSize);\n\n  const gutter = this.gutter_;\n  if (gutter !== 0) {\n    tileSize = bufferSize(tileSize, gutter, this.tmpSize);\n    tileExtent = buffer(tileExtent, tileResolution * gutter, tileExtent);\n  }\n\n  if (pixelRatio != 1) {\n    tileSize = scaleSize(tileSize, pixelRatio, this.tmpSize);\n  }\n\n  const baseParams = {\n    'SERVICE': 'WMS',\n    'VERSION': DEFAULT_WMS_VERSION,\n    'REQUEST': 'GetMap',\n    'FORMAT': 'image/png',\n    'TRANSPARENT': true\n  };\n  assign(baseParams, this.params_);\n\n  return this.getRequestUrl_(tileCoord, tileSize, tileExtent,\n    pixelRatio, projection, baseParams);\n}\n\n\nexport default TileWMS;\n","/**\n * @module ol/layer/BaseImage\n */\nimport Layer from './Layer.js';\n\n\n/**\n * @typedef {Object} Options\n * @property {string} [className='ol-layer'] A CSS class name to set to the layer element.\n * @property {number} [opacity=1] Opacity (0, 1).\n * @property {boolean} [visible=true] Visibility.\n * @property {import(\"../extent.js\").Extent} [extent] The bounding extent for layer rendering.  The layer will not be\n * rendered outside of this extent.\n * @property {number} [zIndex] The z-index for layer rendering.  At rendering time, the layers\n * will be ordered, first by Z-index and then by position. When `undefined`, a `zIndex` of 0 is assumed\n * for layers that are added to the map's `layers` collection, or `Infinity` when the layer's `setMap()`\n * method was used.\n * @property {number} [minResolution] The minimum resolution (inclusive) at which this layer will be\n * visible.\n * @property {number} [maxResolution] The maximum resolution (exclusive) below which this layer will\n * be visible.\n * @property {import(\"../PluggableMap.js\").default} [map] Sets the layer as overlay on a map. The map will not manage\n * this layer in its layers collection, and the layer will be rendered on top. This is useful for\n * temporary layers. The standard way to add a layer to a map and have it managed by the map is to\n * use {@link module:ol/Map#addLayer}.\n * @property {import(\"../source/Image.js\").default} [source] Source for this layer.\n */\n\n\n/**\n * @classdesc\n * Server-rendered images that are available for arbitrary extents and\n * resolutions.\n * Note that any property set in the options is set as a {@link module:ol/Object~BaseObject}\n * property on the layer object; for example, setting `title: 'My Title'` in the\n * options means that `title` is observable, and has get/set accessors.\n *\n * @extends {Layer<import(\"../source/Image.js\").default>}\n * @api\n */\nclass BaseImageLayer extends Layer {\n\n  /**\n   * @param {Options=} opt_options Layer options.\n   */\n  constructor(opt_options) {\n    const options = opt_options ? opt_options : {};\n    super(options);\n  }\n\n}\n\nexport default BaseImageLayer;\n","/**\n * @module ol/layer/Image\n */\nimport BaseImageLayer from './BaseImage.js';\nimport CanvasImageLayerRenderer from '../renderer/canvas/ImageLayer.js';\n\n\n/**\n * @typedef {import(\"./BaseImage.js\").Options} Options\n */\n\n\n/**\n * @classdesc\n * Server-rendered images that are available for arbitrary extents and\n * resolutions.\n * Note that any property set in the options is set as a {@link module:ol/Object~BaseObject}\n * property on the layer object; for example, setting `title: 'My Title'` in the\n * options means that `title` is observable, and has get/set accessors.\n *\n * @api\n */\nclass ImageLayer extends BaseImageLayer {\n\n  /**\n   * @param {Options=} opt_options Layer options.\n   */\n  constructor(opt_options) {\n    super(opt_options);\n  }\n\n  /**\n   * Create a renderer for this layer.\n   * @return {import(\"../renderer/Layer.js\").default} A layer renderer.\n   * @protected\n   */\n  createRenderer() {\n    return new CanvasImageLayerRenderer(this);\n  }\n\n}\n\nexport default ImageLayer;\n","/**\n * @module ol/proj/Projection\n */\nimport {METERS_PER_UNIT} from './Units.js';\n\n\n/**\n * @typedef {Object} Options\n * @property {string} code The SRS identifier code, e.g. `EPSG:4326`.\n * @property {import(\"./Units.js\").default|string} [units] Units. Required unless a\n * proj4 projection is defined for `code`.\n * @property {import(\"../extent.js\").Extent} [extent] The validity extent for the SRS.\n * @property {string} [axisOrientation='enu'] The axis orientation as specified in Proj4.\n * @property {boolean} [global=false] Whether the projection is valid for the whole globe.\n * @property {number} [metersPerUnit] The meters per unit for the SRS.\n * If not provided, the `units` are used to get the meters per unit from the {@link module:ol/proj/Units~METERS_PER_UNIT}\n * lookup table.\n * @property {import(\"../extent.js\").Extent} [worldExtent] The world extent for the SRS.\n * @property {function(number, import(\"../coordinate.js\").Coordinate):number} [getPointResolution]\n * Function to determine resolution at a point. The function is called with a\n * `{number}` view resolution and an `{import(\"../coordinate.js\").Coordinate}` as arguments, and returns\n * the `{number}` resolution in projection units at the passed coordinate. If this is `undefined`,\n * the default {@link module:ol/proj#getPointResolution} function will be used.\n */\n\n\n/**\n * @classdesc\n * Projection definition class. One of these is created for each projection\n * supported in the application and stored in the {@link module:ol/proj} namespace.\n * You can use these in applications, but this is not required, as API params\n * and options use {@link module:ol/proj~ProjectionLike} which means the simple string\n * code will suffice.\n *\n * You can use {@link module:ol/proj~get} to retrieve the object for a particular\n * projection.\n *\n * The library includes definitions for `EPSG:4326` and `EPSG:3857`, together\n * with the following aliases:\n * * `EPSG:4326`: CRS:84, urn:ogc:def:crs:EPSG:6.6:4326,\n *     urn:ogc:def:crs:OGC:1.3:CRS84, urn:ogc:def:crs:OGC:2:84,\n *     http://www.opengis.net/gml/srs/epsg.xml#4326,\n *     urn:x-ogc:def:crs:EPSG:4326\n * * `EPSG:3857`: EPSG:102100, EPSG:102113, EPSG:900913,\n *     urn:ogc:def:crs:EPSG:6.18:3:3857,\n *     http://www.opengis.net/gml/srs/epsg.xml#3857\n *\n * If you use [proj4js](https://github.com/proj4js/proj4js), aliases can\n * be added using `proj4.defs()`. After all required projection definitions are\n * added, call the {@link module:ol/proj/proj4~register} function.\n *\n * @api\n */\nclass Projection {\n\n  /**\n   * @param {Options} options Projection options.\n   */\n  constructor(options) {\n    /**\n     * @private\n     * @type {string}\n     */\n    this.code_ = options.code;\n\n    /**\n     * Units of projected coordinates. When set to `TILE_PIXELS`, a\n     * `this.extent_` and `this.worldExtent_` must be configured properly for each\n     * tile.\n     * @private\n     * @type {import(\"./Units.js\").default}\n     */\n    this.units_ = /** @type {import(\"./Units.js\").default} */ (options.units);\n\n    /**\n     * Validity extent of the projection in projected coordinates. For projections\n     * with `TILE_PIXELS` units, this is the extent of the tile in\n     * tile pixel space.\n     * @private\n     * @type {import(\"../extent.js\").Extent}\n     */\n    this.extent_ = options.extent !== undefined ? options.extent : null;\n\n    /**\n     * Extent of the world in EPSG:4326. For projections with\n     * `TILE_PIXELS` units, this is the extent of the tile in\n     * projected coordinate space.\n     * @private\n     * @type {import(\"../extent.js\").Extent}\n     */\n    this.worldExtent_ = options.worldExtent !== undefined ?\n      options.worldExtent : null;\n\n    /**\n     * @private\n     * @type {string}\n     */\n    this.axisOrientation_ = options.axisOrientation !== undefined ?\n      options.axisOrientation : 'enu';\n\n    /**\n     * @private\n     * @type {boolean}\n     */\n    this.global_ = options.global !== undefined ? options.global : false;\n\n    /**\n     * @private\n     * @type {boolean}\n     */\n    this.canWrapX_ = !!(this.global_ && this.extent_);\n\n    /**\n     * @private\n     * @type {function(number, import(\"../coordinate.js\").Coordinate):number|undefined}\n     */\n    this.getPointResolutionFunc_ = options.getPointResolution;\n\n    /**\n     * @private\n     * @type {import(\"../tilegrid/TileGrid.js\").default}\n     */\n    this.defaultTileGrid_ = null;\n\n    /**\n     * @private\n     * @type {number|undefined}\n     */\n    this.metersPerUnit_ = options.metersPerUnit;\n  }\n\n  /**\n   * @return {boolean} The projection is suitable for wrapping the x-axis\n   */\n  canWrapX() {\n    return this.canWrapX_;\n  }\n\n  /**\n   * Get the code for this projection, e.g. 'EPSG:4326'.\n   * @return {string} Code.\n   * @api\n   */\n  getCode() {\n    return this.code_;\n  }\n\n  /**\n   * Get the validity extent for this projection.\n   * @return {import(\"../extent.js\").Extent} Extent.\n   * @api\n   */\n  getExtent() {\n    return this.extent_;\n  }\n\n  /**\n   * Get the units of this projection.\n   * @return {import(\"./Units.js\").default} Units.\n   * @api\n   */\n  getUnits() {\n    return this.units_;\n  }\n\n  /**\n   * Get the amount of meters per unit of this projection.  If the projection is\n   * not configured with `metersPerUnit` or a units identifier, the return is\n   * `undefined`.\n   * @return {number|undefined} Meters.\n   * @api\n   */\n  getMetersPerUnit() {\n    return this.metersPerUnit_ || METERS_PER_UNIT[this.units_];\n  }\n\n  /**\n   * Get the world extent for this projection.\n   * @return {import(\"../extent.js\").Extent} Extent.\n   * @api\n   */\n  getWorldExtent() {\n    return this.worldExtent_;\n  }\n\n  /**\n   * Get the axis orientation of this projection.\n   * Example values are:\n   * enu - the default easting, northing, elevation.\n   * neu - northing, easting, up - useful for \"lat/long\" geographic coordinates,\n   *     or south orientated transverse mercator.\n   * wnu - westing, northing, up - some planetary coordinate systems have\n   *     \"west positive\" coordinate systems\n   * @return {string} Axis orientation.\n   * @api\n   */\n  getAxisOrientation() {\n    return this.axisOrientation_;\n  }\n\n  /**\n   * Is this projection a global projection which spans the whole world?\n   * @return {boolean} Whether the projection is global.\n   * @api\n   */\n  isGlobal() {\n    return this.global_;\n  }\n\n  /**\n   * Set if the projection is a global projection which spans the whole world\n   * @param {boolean} global Whether the projection is global.\n   * @api\n   */\n  setGlobal(global) {\n    this.global_ = global;\n    this.canWrapX_ = !!(global && this.extent_);\n  }\n\n  /**\n   * @return {import(\"../tilegrid/TileGrid.js\").default} The default tile grid.\n   */\n  getDefaultTileGrid() {\n    return this.defaultTileGrid_;\n  }\n\n  /**\n   * @param {import(\"../tilegrid/TileGrid.js\").default} tileGrid The default tile grid.\n   */\n  setDefaultTileGrid(tileGrid) {\n    this.defaultTileGrid_ = tileGrid;\n  }\n\n  /**\n   * Set the validity extent for this projection.\n   * @param {import(\"../extent.js\").Extent} extent Extent.\n   * @api\n   */\n  setExtent(extent) {\n    this.extent_ = extent;\n    this.canWrapX_ = !!(this.global_ && extent);\n  }\n\n  /**\n   * Set the world extent for this projection.\n   * @param {import(\"../extent.js\").Extent} worldExtent World extent\n   *     [minlon, minlat, maxlon, maxlat].\n   * @api\n   */\n  setWorldExtent(worldExtent) {\n    this.worldExtent_ = worldExtent;\n  }\n\n  /**\n   * Set the getPointResolution function (see {@link module:ol/proj~getPointResolution}\n   * for this projection.\n   * @param {function(number, import(\"../coordinate.js\").Coordinate):number} func Function\n   * @api\n   */\n  setGetPointResolution(func) {\n    this.getPointResolutionFunc_ = func;\n  }\n\n  /**\n   * Get the custom point resolution function for this projection (if set).\n   * @return {function(number, import(\"../coordinate.js\").Coordinate):number|undefined} The custom point\n   * resolution function (if set).\n   */\n  getPointResolutionFunc() {\n    return this.getPointResolutionFunc_;\n  }\n}\n\nexport default Projection;\n","/**\n * @module ol/geom/MultiLineString\n */\nimport {extend} from '../array.js';\nimport {closestSquaredDistanceXY} from '../extent.js';\nimport GeometryLayout from './GeometryLayout.js';\nimport GeometryType from './GeometryType.js';\nimport LineString from './LineString.js';\nimport SimpleGeometry from './SimpleGeometry.js';\nimport {assignClosestArrayPoint, arrayMaxSquaredDelta} from './flat/closest.js';\nimport {deflateCoordinatesArray} from './flat/deflate.js';\nimport {inflateCoordinatesArray} from './flat/inflate.js';\nimport {interpolatePoint, lineStringsCoordinateAtM} from './flat/interpolate.js';\nimport {intersectsLineStringArray} from './flat/intersectsextent.js';\nimport {douglasPeuckerArray} from './flat/simplify.js';\n\n/**\n * @classdesc\n * Multi-linestring geometry.\n *\n * @api\n */\nclass MultiLineString extends SimpleGeometry {\n\n  /**\n   * @param {Array<Array<import(\"../coordinate.js\").Coordinate>|LineString>|Array<number>} coordinates\n   *     Coordinates or LineString geometries. (For internal use, flat coordinates in\n   *     combination with `opt_layout` and `opt_ends` are also accepted.)\n   * @param {GeometryLayout=} opt_layout Layout.\n   * @param {Array<number>=} opt_ends Flat coordinate ends for internal use.\n   */\n  constructor(coordinates, opt_layout, opt_ends) {\n\n    super();\n\n    /**\n     * @type {Array<number>}\n     * @private\n     */\n    this.ends_ = [];\n\n    /**\n     * @private\n     * @type {number}\n     */\n    this.maxDelta_ = -1;\n\n    /**\n     * @private\n     * @type {number}\n     */\n    this.maxDeltaRevision_ = -1;\n\n    if (Array.isArray(coordinates[0])) {\n      this.setCoordinates(/** @type {Array<Array<import(\"../coordinate.js\").Coordinate>>} */ (coordinates), opt_layout);\n    } else if (opt_layout !== undefined && opt_ends) {\n      this.setFlatCoordinates(opt_layout, /** @type {Array<number>} */ (coordinates));\n      this.ends_ = opt_ends;\n    } else {\n      let layout = this.getLayout();\n      const lineStrings = /** @type {Array<LineString>} */ (coordinates);\n      const flatCoordinates = [];\n      const ends = [];\n      for (let i = 0, ii = lineStrings.length; i < ii; ++i) {\n        const lineString = lineStrings[i];\n        if (i === 0) {\n          layout = lineString.getLayout();\n        }\n        extend(flatCoordinates, lineString.getFlatCoordinates());\n        ends.push(flatCoordinates.length);\n      }\n      this.setFlatCoordinates(layout, flatCoordinates);\n      this.ends_ = ends;\n    }\n\n  }\n\n  /**\n   * Append the passed linestring to the multilinestring.\n   * @param {LineString} lineString LineString.\n   * @api\n   */\n  appendLineString(lineString) {\n    if (!this.flatCoordinates) {\n      this.flatCoordinates = lineString.getFlatCoordinates().slice();\n    } else {\n      extend(this.flatCoordinates, lineString.getFlatCoordinates().slice());\n    }\n    this.ends_.push(this.flatCoordinates.length);\n    this.changed();\n  }\n\n  /**\n   * Make a complete copy of the geometry.\n   * @return {!MultiLineString} Clone.\n   * @override\n   * @api\n   */\n  clone() {\n    return new MultiLineString(this.flatCoordinates.slice(), this.layout, this.ends_.slice());\n  }\n\n  /**\n   * @inheritDoc\n   */\n  closestPointXY(x, y, closestPoint, minSquaredDistance) {\n    if (minSquaredDistance < closestSquaredDistanceXY(this.getExtent(), x, y)) {\n      return minSquaredDistance;\n    }\n    if (this.maxDeltaRevision_ != this.getRevision()) {\n      this.maxDelta_ = Math.sqrt(arrayMaxSquaredDelta(\n        this.flatCoordinates, 0, this.ends_, this.stride, 0));\n      this.maxDeltaRevision_ = this.getRevision();\n    }\n    return assignClosestArrayPoint(\n      this.flatCoordinates, 0, this.ends_, this.stride,\n      this.maxDelta_, false, x, y, closestPoint, minSquaredDistance);\n  }\n\n  /**\n   * Returns the coordinate at `m` using linear interpolation, or `null` if no\n   * such coordinate exists.\n   *\n   * `opt_extrapolate` controls extrapolation beyond the range of Ms in the\n   * MultiLineString. If `opt_extrapolate` is `true` then Ms less than the first\n   * M will return the first coordinate and Ms greater than the last M will\n   * return the last coordinate.\n   *\n   * `opt_interpolate` controls interpolation between consecutive LineStrings\n   * within the MultiLineString. If `opt_interpolate` is `true` the coordinates\n   * will be linearly interpolated between the last coordinate of one LineString\n   * and the first coordinate of the next LineString.  If `opt_interpolate` is\n   * `false` then the function will return `null` for Ms falling between\n   * LineStrings.\n   *\n   * @param {number} m M.\n   * @param {boolean=} opt_extrapolate Extrapolate. Default is `false`.\n   * @param {boolean=} opt_interpolate Interpolate. Default is `false`.\n   * @return {import(\"../coordinate.js\").Coordinate} Coordinate.\n   * @api\n   */\n  getCoordinateAtM(m, opt_extrapolate, opt_interpolate) {\n    if ((this.layout != GeometryLayout.XYM &&\n         this.layout != GeometryLayout.XYZM) ||\n        this.flatCoordinates.length === 0) {\n      return null;\n    }\n    const extrapolate = opt_extrapolate !== undefined ? opt_extrapolate : false;\n    const interpolate = opt_interpolate !== undefined ? opt_interpolate : false;\n    return lineStringsCoordinateAtM(this.flatCoordinates, 0,\n      this.ends_, this.stride, m, extrapolate, interpolate);\n  }\n\n  /**\n   * Return the coordinates of the multilinestring.\n   * @return {Array<Array<import(\"../coordinate.js\").Coordinate>>} Coordinates.\n   * @override\n   * @api\n   */\n  getCoordinates() {\n    return inflateCoordinatesArray(\n      this.flatCoordinates, 0, this.ends_, this.stride);\n  }\n\n  /**\n   * @return {Array<number>} Ends.\n   */\n  getEnds() {\n    return this.ends_;\n  }\n\n  /**\n   * Return the linestring at the specified index.\n   * @param {number} index Index.\n   * @return {LineString} LineString.\n   * @api\n   */\n  getLineString(index) {\n    if (index < 0 || this.ends_.length <= index) {\n      return null;\n    }\n    return new LineString(this.flatCoordinates.slice(\n      index === 0 ? 0 : this.ends_[index - 1], this.ends_[index]), this.layout);\n  }\n\n  /**\n   * Return the linestrings of this multilinestring.\n   * @return {Array<LineString>} LineStrings.\n   * @api\n   */\n  getLineStrings() {\n    const flatCoordinates = this.flatCoordinates;\n    const ends = this.ends_;\n    const layout = this.layout;\n    /** @type {Array<LineString>} */\n    const lineStrings = [];\n    let offset = 0;\n    for (let i = 0, ii = ends.length; i < ii; ++i) {\n      const end = ends[i];\n      const lineString = new LineString(flatCoordinates.slice(offset, end), layout);\n      lineStrings.push(lineString);\n      offset = end;\n    }\n    return lineStrings;\n  }\n\n  /**\n   * @return {Array<number>} Flat midpoints.\n   */\n  getFlatMidpoints() {\n    const midpoints = [];\n    const flatCoordinates = this.flatCoordinates;\n    let offset = 0;\n    const ends = this.ends_;\n    const stride = this.stride;\n    for (let i = 0, ii = ends.length; i < ii; ++i) {\n      const end = ends[i];\n      const midpoint = interpolatePoint(\n        flatCoordinates, offset, end, stride, 0.5);\n      extend(midpoints, midpoint);\n      offset = end;\n    }\n    return midpoints;\n  }\n\n  /**\n   * @inheritDoc\n   */\n  getSimplifiedGeometryInternal(squaredTolerance) {\n    const simplifiedFlatCoordinates = [];\n    const simplifiedEnds = [];\n    simplifiedFlatCoordinates.length = douglasPeuckerArray(\n      this.flatCoordinates, 0, this.ends_, this.stride, squaredTolerance,\n      simplifiedFlatCoordinates, 0, simplifiedEnds);\n    return new MultiLineString(simplifiedFlatCoordinates, GeometryLayout.XY, simplifiedEnds);\n  }\n\n  /**\n   * @inheritDoc\n   * @api\n   */\n  getType() {\n    return GeometryType.MULTI_LINE_STRING;\n  }\n\n  /**\n   * @inheritDoc\n   * @api\n   */\n  intersectsExtent(extent) {\n    return intersectsLineStringArray(\n      this.flatCoordinates, 0, this.ends_, this.stride, extent);\n  }\n\n  /**\n   * Set the coordinates of the multilinestring.\n   * @param {!Array<Array<import(\"../coordinate.js\").Coordinate>>} coordinates Coordinates.\n   * @param {GeometryLayout=} opt_layout Layout.\n   * @override\n   * @api\n   */\n  setCoordinates(coordinates, opt_layout) {\n    this.setLayout(opt_layout, coordinates, 2);\n    if (!this.flatCoordinates) {\n      this.flatCoordinates = [];\n    }\n    const ends = deflateCoordinatesArray(\n      this.flatCoordinates, 0, coordinates, this.stride, this.ends_);\n    this.flatCoordinates.length = ends.length === 0 ? 0 : ends[ends.length - 1];\n    this.changed();\n  }\n}\n\n\nexport default MultiLineString;\n","/**\n * @module ol/geom/MultiPoint\n */\nimport {extend} from '../array.js';\nimport {closestSquaredDistanceXY, containsXY} from '../extent.js';\nimport GeometryType from './GeometryType.js';\nimport Point from './Point.js';\nimport SimpleGeometry from './SimpleGeometry.js';\nimport {deflateCoordinates} from './flat/deflate.js';\nimport {inflateCoordinates} from './flat/inflate.js';\nimport {squaredDistance as squaredDx} from '../math.js';\n\n/**\n * @classdesc\n * Multi-point geometry.\n *\n * @api\n */\nclass MultiPoint extends SimpleGeometry {\n\n  /**\n   * @param {Array<import(\"../coordinate.js\").Coordinate>|Array<number>} coordinates Coordinates.\n   *     For internal use, flat coordinates in combination with `opt_layout` are also accepted.\n   * @param {import(\"./GeometryLayout.js\").default=} opt_layout Layout.\n   */\n  constructor(coordinates, opt_layout) {\n    super();\n    if (opt_layout && !Array.isArray(coordinates[0])) {\n      this.setFlatCoordinates(opt_layout, /** @type {Array<number>} */ (coordinates));\n    } else {\n      this.setCoordinates(/** @type {Array<import(\"../coordinate.js\").Coordinate>} */ (coordinates), opt_layout);\n    }\n  }\n\n  /**\n   * Append the passed point to this multipoint.\n   * @param {Point} point Point.\n   * @api\n   */\n  appendPoint(point) {\n    if (!this.flatCoordinates) {\n      this.flatCoordinates = point.getFlatCoordinates().slice();\n    } else {\n      extend(this.flatCoordinates, point.getFlatCoordinates());\n    }\n    this.changed();\n  }\n\n  /**\n   * Make a complete copy of the geometry.\n   * @return {!MultiPoint} Clone.\n   * @override\n   * @api\n   */\n  clone() {\n    const multiPoint = new MultiPoint(this.flatCoordinates.slice(), this.layout);\n    return multiPoint;\n  }\n\n  /**\n   * @inheritDoc\n   */\n  closestPointXY(x, y, closestPoint, minSquaredDistance) {\n    if (minSquaredDistance < closestSquaredDistanceXY(this.getExtent(), x, y)) {\n      return minSquaredDistance;\n    }\n    const flatCoordinates = this.flatCoordinates;\n    const stride = this.stride;\n    for (let i = 0, ii = flatCoordinates.length; i < ii; i += stride) {\n      const squaredDistance = squaredDx(\n        x, y, flatCoordinates[i], flatCoordinates[i + 1]);\n      if (squaredDistance < minSquaredDistance) {\n        minSquaredDistance = squaredDistance;\n        for (let j = 0; j < stride; ++j) {\n          closestPoint[j] = flatCoordinates[i + j];\n        }\n        closestPoint.length = stride;\n      }\n    }\n    return minSquaredDistance;\n  }\n\n  /**\n   * Return the coordinates of the multipoint.\n   * @return {Array<import(\"../coordinate.js\").Coordinate>} Coordinates.\n   * @override\n   * @api\n   */\n  getCoordinates() {\n    return inflateCoordinates(\n      this.flatCoordinates, 0, this.flatCoordinates.length, this.stride);\n  }\n\n  /**\n   * Return the point at the specified index.\n   * @param {number} index Index.\n   * @return {Point} Point.\n   * @api\n   */\n  getPoint(index) {\n    const n = !this.flatCoordinates ? 0 : this.flatCoordinates.length / this.stride;\n    if (index < 0 || n <= index) {\n      return null;\n    }\n    return new Point(this.flatCoordinates.slice(\n      index * this.stride, (index + 1) * this.stride), this.layout);\n  }\n\n  /**\n   * Return the points of this multipoint.\n   * @return {Array<Point>} Points.\n   * @api\n   */\n  getPoints() {\n    const flatCoordinates = this.flatCoordinates;\n    const layout = this.layout;\n    const stride = this.stride;\n    /** @type {Array<Point>} */\n    const points = [];\n    for (let i = 0, ii = flatCoordinates.length; i < ii; i += stride) {\n      const point = new Point(flatCoordinates.slice(i, i + stride), layout);\n      points.push(point);\n    }\n    return points;\n  }\n\n  /**\n   * @inheritDoc\n   * @api\n   */\n  getType() {\n    return GeometryType.MULTI_POINT;\n  }\n\n  /**\n   * @inheritDoc\n   * @api\n   */\n  intersectsExtent(extent) {\n    const flatCoordinates = this.flatCoordinates;\n    const stride = this.stride;\n    for (let i = 0, ii = flatCoordinates.length; i < ii; i += stride) {\n      const x = flatCoordinates[i];\n      const y = flatCoordinates[i + 1];\n      if (containsXY(extent, x, y)) {\n        return true;\n      }\n    }\n    return false;\n  }\n\n  /**\n   * Set the coordinates of the multipoint.\n   * @param {!Array<import(\"../coordinate.js\").Coordinate>} coordinates Coordinates.\n   * @param {import(\"./GeometryLayout.js\").default=} opt_layout Layout.\n   * @override\n   * @api\n   */\n  setCoordinates(coordinates, opt_layout) {\n    this.setLayout(opt_layout, coordinates, 1);\n    if (!this.flatCoordinates) {\n      this.flatCoordinates = [];\n    }\n    this.flatCoordinates.length = deflateCoordinates(\n      this.flatCoordinates, 0, coordinates, this.stride);\n    this.changed();\n  }\n}\n\n\nexport default MultiPoint;\n","/**\n * @module ol/control/Control\n */\nimport {VOID} from '../functions.js';\nimport MapEventType from '../MapEventType.js';\nimport BaseObject from '../Object.js';\nimport {removeNode} from '../dom.js';\nimport {listen, unlistenByKey} from '../events.js';\n\n\n/**\n * @typedef {Object} Options\n * @property {HTMLElement} [element] The element is the control's\n * container element. This only needs to be specified if you're developing\n * a custom control.\n * @property {function(import(\"../MapEvent.js\").default)} [render] Function called when\n * the control should be re-rendered. This is called in a `requestAnimationFrame`\n * callback.\n * @property {HTMLElement|string} [target] Specify a target if you want\n * the control to be rendered outside of the map's viewport.\n */\n\n\n/**\n * @classdesc\n * A control is a visible widget with a DOM element in a fixed position on the\n * screen. They can involve user input (buttons), or be informational only;\n * the position is determined using CSS. By default these are placed in the\n * container with CSS class name `ol-overlaycontainer-stopevent`, but can use\n * any outside DOM element.\n *\n * This is the base class for controls. You can use it for simple custom\n * controls by creating the element with listeners, creating an instance:\n * ```js\n * var myControl = new Control({element: myElement});\n * ```\n * and then adding this to the map.\n *\n * The main advantage of having this as a control rather than a simple separate\n * DOM element is that preventing propagation is handled for you. Controls\n * will also be objects in a {@link module:ol/Collection~Collection}, so you can use their methods.\n *\n * You can also extend this base for your own control class. See\n * examples/custom-controls for an example of how to do this.\n *\n * @api\n */\nclass Control extends BaseObject {\n\n  /**\n   * @param {Options} options Control options.\n   */\n  constructor(options) {\n\n    super();\n\n    /**\n     * @protected\n     * @type {HTMLElement}\n     */\n    this.element = options.element ? options.element : null;\n\n    /**\n     * @private\n     * @type {HTMLElement}\n     */\n    this.target_ = null;\n\n    /**\n     * @private\n     * @type {import(\"../PluggableMap.js\").default}\n     */\n    this.map_ = null;\n\n    /**\n     * @protected\n     * @type {!Array<import(\"../events.js\").EventsKey>}\n     */\n    this.listenerKeys = [];\n\n    /**\n     * @type {function(import(\"../MapEvent.js\").default): void}\n     */\n    this.render = options.render ? options.render : VOID;\n\n    if (options.target) {\n      this.setTarget(options.target);\n    }\n\n  }\n\n  /**\n   * @inheritDoc\n   */\n  disposeInternal() {\n    removeNode(this.element);\n    super.disposeInternal();\n  }\n\n  /**\n   * Get the map associated with this control.\n   * @return {import(\"../PluggableMap.js\").default} Map.\n   * @api\n   */\n  getMap() {\n    return this.map_;\n  }\n\n  /**\n   * Remove the control from its current map and attach it to the new map.\n   * Subclasses may set up event handlers to get notified about changes to\n   * the map here.\n   * @param {import(\"../PluggableMap.js\").default} map Map.\n   * @api\n   */\n  setMap(map) {\n    if (this.map_) {\n      removeNode(this.element);\n    }\n    for (let i = 0, ii = this.listenerKeys.length; i < ii; ++i) {\n      unlistenByKey(this.listenerKeys[i]);\n    }\n    this.listenerKeys.length = 0;\n    this.map_ = map;\n    if (this.map_) {\n      const target = this.target_ ?\n        this.target_ : map.getOverlayContainerStopEvent();\n      target.appendChild(this.element);\n      if (this.render !== VOID) {\n        this.listenerKeys.push(listen(map,\n          MapEventType.POSTRENDER, this.render, this));\n      }\n      map.render();\n    }\n  }\n\n  /**\n   * This function is used to set a target element for the control. It has no\n   * effect if it is called after the control has been added to the map (i.e.\n   * after `setMap` is called on the control). If no `target` is set in the\n   * options passed to the control constructor and if `setTarget` is not called\n   * then the control is added to the map's overlay container.\n   * @param {HTMLElement|string} target Target.\n   * @api\n   */\n  setTarget(target) {\n    this.target_ = typeof target === 'string' ?\n      document.getElementById(target) :\n      target;\n  }\n}\n\n\nexport default Control;\n","/**\n * @module ol/has\n */\n\nconst ua = typeof navigator !== 'undefined' ?\n  navigator.userAgent.toLowerCase() : '';\n\n/**\n * User agent string says we are dealing with Firefox as browser.\n * @type {boolean}\n */\nexport const FIREFOX = ua.indexOf('firefox') !== -1;\n\n/**\n * User agent string says we are dealing with Safari as browser.\n * @type {boolean}\n */\nexport const SAFARI = ua.indexOf('safari') !== -1 && ua.indexOf('chrom') == -1;\n\n/**\n * User agent string says we are dealing with a WebKit engine.\n * @type {boolean}\n */\nexport const WEBKIT = ua.indexOf('webkit') !== -1 && ua.indexOf('edge') == -1;\n\n/**\n * User agent string says we are dealing with a Mac as platform.\n * @type {boolean}\n */\nexport const MAC = ua.indexOf('macintosh') !== -1;\n\n\n/**\n * The ratio between physical pixels and device-independent pixels\n * (dips) on the device (`window.devicePixelRatio`).\n * @const\n * @type {number}\n * @api\n */\nexport const DEVICE_PIXEL_RATIO = window.devicePixelRatio || 1;\n\n/**\n * Image.prototype.decode() is supported.\n * @type {boolean}\n */\nexport const IMAGE_DECODE = typeof Image !== 'undefined' && Image.prototype.decode;\n","/**\n * @module ol/style/Text\n */\nimport Fill from './Fill.js';\nimport TextPlacement from './TextPlacement.js';\n\n\n/**\n * The default fill color to use if no fill was set at construction time; a\n * blackish `#333`.\n *\n * @const {string}\n */\nconst DEFAULT_FILL_COLOR = '#333';\n\n\n/**\n * @typedef {Object} Options\n * @property {string} [font] Font style as CSS 'font' value, see:\n * https://developer.mozilla.org/en-US/docs/Web/API/CanvasRenderingContext2D/font. Default is '10px sans-serif'\n * @property {number} [maxAngle=Math.PI/4] When `placement` is set to `'line'`, allow a maximum angle between adjacent characters.\n * The expected value is in radians, and the default is 45° (`Math.PI / 4`).\n * @property {number} [offsetX=0] Horizontal text offset in pixels. A positive will shift the text right.\n * @property {number} [offsetY=0] Vertical text offset in pixels. A positive will shift the text down.\n * @property {boolean} [overflow=false] For polygon labels or when `placement` is set to `'line'`, allow text to exceed\n * the width of the polygon at the label position or the length of the path that it follows.\n * @property {import(\"./TextPlacement.js\").default|string} [placement='point'] Text placement.\n * @property {number} [scale] Scale.\n * @property {boolean} [rotateWithView=false] Whether to rotate the text with the view.\n * @property {number} [rotation=0] Rotation in radians (positive rotation clockwise).\n * @property {string} [text] Text content.\n * @property {string} [textAlign] Text alignment. Possible values: 'left', 'right', 'center', 'end' or 'start'.\n * Default is 'center' for `placement: 'point'`. For `placement: 'line'`, the default is to let the renderer choose a\n * placement where `maxAngle` is not exceeded.\n * @property {string} [textBaseline='middle'] Text base line. Possible values: 'bottom', 'top', 'middle', 'alphabetic',\n * 'hanging', 'ideographic'.\n * @property {import(\"./Fill.js\").default} [fill] Fill style. If none is provided, we'll use a dark fill-style (#333).\n * @property {import(\"./Stroke.js\").default} [stroke] Stroke style.\n * @property {import(\"./Fill.js\").default} [backgroundFill] Fill style for the text background when `placement` is\n * `'point'`. Default is no fill.\n * @property {import(\"./Stroke.js\").default} [backgroundStroke] Stroke style for the text background  when `placement`\n * is `'point'`. Default is no stroke.\n * @property {Array<number>} [padding=[0, 0, 0, 0]] Padding in pixels around the text for decluttering and background. The order of\n * values in the array is `[top, right, bottom, left]`.\n */\n\n\n/**\n * @classdesc\n * Set text style for vector features.\n * @api\n */\nclass Text {\n  /**\n   * @param {Options=} opt_options Options.\n   */\n  constructor(opt_options) {\n\n    const options = opt_options || {};\n\n    /**\n     * @private\n     * @type {string|undefined}\n     */\n    this.font_ = options.font;\n\n    /**\n     * @private\n     * @type {number|undefined}\n     */\n    this.rotation_ = options.rotation;\n\n    /**\n     * @private\n     * @type {boolean|undefined}\n     */\n    this.rotateWithView_ = options.rotateWithView;\n\n    /**\n     * @private\n     * @type {number|undefined}\n     */\n    this.scale_ = options.scale;\n\n    /**\n     * @private\n     * @type {string|undefined}\n     */\n    this.text_ = options.text;\n\n    /**\n     * @private\n     * @type {string|undefined}\n     */\n    this.textAlign_ = options.textAlign;\n\n    /**\n     * @private\n     * @type {string|undefined}\n     */\n    this.textBaseline_ = options.textBaseline;\n\n    /**\n     * @private\n     * @type {import(\"./Fill.js\").default}\n     */\n    this.fill_ = options.fill !== undefined ? options.fill :\n      new Fill({color: DEFAULT_FILL_COLOR});\n\n    /**\n     * @private\n     * @type {number}\n     */\n    this.maxAngle_ = options.maxAngle !== undefined ? options.maxAngle : Math.PI / 4;\n\n    /**\n     * @private\n     * @type {import(\"./TextPlacement.js\").default|string}\n     */\n    this.placement_ = options.placement !== undefined ? options.placement : TextPlacement.POINT;\n\n    /**\n     * @private\n     * @type {boolean}\n     */\n    this.overflow_ = !!options.overflow;\n\n    /**\n     * @private\n     * @type {import(\"./Stroke.js\").default}\n     */\n    this.stroke_ = options.stroke !== undefined ? options.stroke : null;\n\n    /**\n     * @private\n     * @type {number}\n     */\n    this.offsetX_ = options.offsetX !== undefined ? options.offsetX : 0;\n\n    /**\n     * @private\n     * @type {number}\n     */\n    this.offsetY_ = options.offsetY !== undefined ? options.offsetY : 0;\n\n    /**\n     * @private\n     * @type {import(\"./Fill.js\").default}\n     */\n    this.backgroundFill_ = options.backgroundFill ? options.backgroundFill : null;\n\n    /**\n     * @private\n     * @type {import(\"./Stroke.js\").default}\n     */\n    this.backgroundStroke_ = options.backgroundStroke ? options.backgroundStroke : null;\n\n    /**\n     * @private\n     * @type {Array<number>}\n     */\n    this.padding_ = options.padding === undefined ? null : options.padding;\n  }\n\n  /**\n   * Clones the style.\n   * @return {Text} The cloned style.\n   * @api\n   */\n  clone() {\n    return new Text({\n      font: this.getFont(),\n      placement: this.getPlacement(),\n      maxAngle: this.getMaxAngle(),\n      overflow: this.getOverflow(),\n      rotation: this.getRotation(),\n      rotateWithView: this.getRotateWithView(),\n      scale: this.getScale(),\n      text: this.getText(),\n      textAlign: this.getTextAlign(),\n      textBaseline: this.getTextBaseline(),\n      fill: this.getFill() ? this.getFill().clone() : undefined,\n      stroke: this.getStroke() ? this.getStroke().clone() : undefined,\n      offsetX: this.getOffsetX(),\n      offsetY: this.getOffsetY(),\n      backgroundFill: this.getBackgroundFill() ? this.getBackgroundFill().clone() : undefined,\n      backgroundStroke: this.getBackgroundStroke() ? this.getBackgroundStroke().clone() : undefined,\n      padding: this.getPadding()\n    });\n  }\n\n  /**\n   * Get the `overflow` configuration.\n   * @return {boolean} Let text overflow the length of the path they follow.\n   * @api\n   */\n  getOverflow() {\n    return this.overflow_;\n  }\n\n  /**\n   * Get the font name.\n   * @return {string|undefined} Font.\n   * @api\n   */\n  getFont() {\n    return this.font_;\n  }\n\n  /**\n   * Get the maximum angle between adjacent characters.\n   * @return {number} Angle in radians.\n   * @api\n   */\n  getMaxAngle() {\n    return this.maxAngle_;\n  }\n\n  /**\n   * Get the label placement.\n   * @return {import(\"./TextPlacement.js\").default|string} Text placement.\n   * @api\n   */\n  getPlacement() {\n    return this.placement_;\n  }\n\n  /**\n   * Get the x-offset for the text.\n   * @return {number} Horizontal text offset.\n   * @api\n   */\n  getOffsetX() {\n    return this.offsetX_;\n  }\n\n  /**\n   * Get the y-offset for the text.\n   * @return {number} Vertical text offset.\n   * @api\n   */\n  getOffsetY() {\n    return this.offsetY_;\n  }\n\n  /**\n   * Get the fill style for the text.\n   * @return {import(\"./Fill.js\").default} Fill style.\n   * @api\n   */\n  getFill() {\n    return this.fill_;\n  }\n\n  /**\n   * Determine whether the text rotates with the map.\n   * @return {boolean|undefined} Rotate with map.\n   * @api\n   */\n  getRotateWithView() {\n    return this.rotateWithView_;\n  }\n\n  /**\n   * Get the text rotation.\n   * @return {number|undefined} Rotation.\n   * @api\n   */\n  getRotation() {\n    return this.rotation_;\n  }\n\n  /**\n   * Get the text scale.\n   * @return {number|undefined} Scale.\n   * @api\n   */\n  getScale() {\n    return this.scale_;\n  }\n\n  /**\n   * Get the stroke style for the text.\n   * @return {import(\"./Stroke.js\").default} Stroke style.\n   * @api\n   */\n  getStroke() {\n    return this.stroke_;\n  }\n\n  /**\n   * Get the text to be rendered.\n   * @return {string|undefined} Text.\n   * @api\n   */\n  getText() {\n    return this.text_;\n  }\n\n  /**\n   * Get the text alignment.\n   * @return {string|undefined} Text align.\n   * @api\n   */\n  getTextAlign() {\n    return this.textAlign_;\n  }\n\n  /**\n   * Get the text baseline.\n   * @return {string|undefined} Text baseline.\n   * @api\n   */\n  getTextBaseline() {\n    return this.textBaseline_;\n  }\n\n  /**\n   * Get the background fill style for the text.\n   * @return {import(\"./Fill.js\").default} Fill style.\n   * @api\n   */\n  getBackgroundFill() {\n    return this.backgroundFill_;\n  }\n\n  /**\n   * Get the background stroke style for the text.\n   * @return {import(\"./Stroke.js\").default} Stroke style.\n   * @api\n   */\n  getBackgroundStroke() {\n    return this.backgroundStroke_;\n  }\n\n  /**\n   * Get the padding for the text.\n   * @return {Array<number>} Padding.\n   * @api\n   */\n  getPadding() {\n    return this.padding_;\n  }\n\n  /**\n   * Set the `overflow` property.\n   *\n   * @param {boolean} overflow Let text overflow the path that it follows.\n   * @api\n   */\n  setOverflow(overflow) {\n    this.overflow_ = overflow;\n  }\n\n  /**\n   * Set the font.\n   *\n   * @param {string|undefined} font Font.\n   * @api\n   */\n  setFont(font) {\n    this.font_ = font;\n  }\n\n  /**\n   * Set the maximum angle between adjacent characters.\n   *\n   * @param {number} maxAngle Angle in radians.\n   * @api\n   */\n  setMaxAngle(maxAngle) {\n    this.maxAngle_ = maxAngle;\n  }\n\n  /**\n   * Set the x offset.\n   *\n   * @param {number} offsetX Horizontal text offset.\n   * @api\n   */\n  setOffsetX(offsetX) {\n    this.offsetX_ = offsetX;\n  }\n\n  /**\n   * Set the y offset.\n   *\n   * @param {number} offsetY Vertical text offset.\n   * @api\n   */\n  setOffsetY(offsetY) {\n    this.offsetY_ = offsetY;\n  }\n\n  /**\n   * Set the text placement.\n   *\n   * @param {import(\"./TextPlacement.js\").default|string} placement Placement.\n   * @api\n   */\n  setPlacement(placement) {\n    this.placement_ = placement;\n  }\n\n  /**\n   * Set whether to rotate the text with the view.\n   *\n   * @param {boolean} rotateWithView Rotate with map.\n   * @api\n   */\n  setRotateWithView(rotateWithView) {\n    this.rotateWithView_ = rotateWithView;\n  }\n\n  /**\n   * Set the fill.\n   *\n   * @param {import(\"./Fill.js\").default} fill Fill style.\n   * @api\n   */\n  setFill(fill) {\n    this.fill_ = fill;\n  }\n\n  /**\n   * Set the rotation.\n   *\n   * @param {number|undefined} rotation Rotation.\n   * @api\n   */\n  setRotation(rotation) {\n    this.rotation_ = rotation;\n  }\n\n  /**\n   * Set the scale.\n   *\n   * @param {number|undefined} scale Scale.\n   * @api\n   */\n  setScale(scale) {\n    this.scale_ = scale;\n  }\n\n  /**\n   * Set the stroke.\n   *\n   * @param {import(\"./Stroke.js\").default} stroke Stroke style.\n   * @api\n   */\n  setStroke(stroke) {\n    this.stroke_ = stroke;\n  }\n\n  /**\n   * Set the text.\n   *\n   * @param {string|undefined} text Text.\n   * @api\n   */\n  setText(text) {\n    this.text_ = text;\n  }\n\n  /**\n   * Set the text alignment.\n   *\n   * @param {string|undefined} textAlign Text align.\n   * @api\n   */\n  setTextAlign(textAlign) {\n    this.textAlign_ = textAlign;\n  }\n\n  /**\n   * Set the text baseline.\n   *\n   * @param {string|undefined} textBaseline Text baseline.\n   * @api\n   */\n  setTextBaseline(textBaseline) {\n    this.textBaseline_ = textBaseline;\n  }\n\n  /**\n   * Set the background fill.\n   *\n   * @param {import(\"./Fill.js\").default} fill Fill style.\n   * @api\n   */\n  setBackgroundFill(fill) {\n    this.backgroundFill_ = fill;\n  }\n\n  /**\n   * Set the background stroke.\n   *\n   * @param {import(\"./Stroke.js\").default} stroke Stroke style.\n   * @api\n   */\n  setBackgroundStroke(stroke) {\n    this.backgroundStroke_ = stroke;\n  }\n\n  /**\n   * Set the padding (`[top, right, bottom, left]`).\n   *\n   * @param {!Array<number>} padding Padding.\n   * @api\n   */\n  setPadding(padding) {\n    this.padding_ = padding;\n  }\n}\n\nexport default Text;\n","/**\n * @module ol/style/IconOrigin\n */\n\n/**\n * Icon origin. One of 'bottom-left', 'bottom-right', 'top-left', 'top-right'.\n * @enum {string}\n */\nexport default {\n  BOTTOM_LEFT: 'bottom-left',\n  BOTTOM_RIGHT: 'bottom-right',\n  TOP_LEFT: 'top-left',\n  TOP_RIGHT: 'top-right'\n};\n","/**\n * @module ol/geom/SimpleGeometry\n */\nimport {abstract} from '../util.js';\nimport {createOrUpdateFromFlatCoordinates, getCenter} from '../extent.js';\nimport Geometry from './Geometry.js';\nimport GeometryLayout from './GeometryLayout.js';\nimport {rotate, scale, translate, transform2D} from './flat/transform.js';\n\n/**\n * @classdesc\n * Abstract base class; only used for creating subclasses; do not instantiate\n * in apps, as cannot be rendered.\n *\n * @abstract\n * @api\n */\nclass SimpleGeometry extends Geometry {\n  constructor() {\n\n    super();\n\n    /**\n     * @protected\n     * @type {GeometryLayout}\n     */\n    this.layout = GeometryLayout.XY;\n\n    /**\n     * @protected\n     * @type {number}\n     */\n    this.stride = 2;\n\n    /**\n     * @protected\n     * @type {Array<number>}\n     */\n    this.flatCoordinates = null;\n\n  }\n\n  /**\n   * @inheritDoc\n   */\n  computeExtent(extent) {\n    return createOrUpdateFromFlatCoordinates(this.flatCoordinates,\n      0, this.flatCoordinates.length, this.stride, extent);\n  }\n\n  /**\n   * @abstract\n   * @return {Array<*>} Coordinates.\n   */\n  getCoordinates() {\n    return abstract();\n  }\n\n  /**\n   * Return the first coordinate of the geometry.\n   * @return {import(\"../coordinate.js\").Coordinate} First coordinate.\n   * @api\n   */\n  getFirstCoordinate() {\n    return this.flatCoordinates.slice(0, this.stride);\n  }\n\n  /**\n   * @return {Array<number>} Flat coordinates.\n   */\n  getFlatCoordinates() {\n    return this.flatCoordinates;\n  }\n\n  /**\n   * Return the last coordinate of the geometry.\n   * @return {import(\"../coordinate.js\").Coordinate} Last point.\n   * @api\n   */\n  getLastCoordinate() {\n    return this.flatCoordinates.slice(this.flatCoordinates.length - this.stride);\n  }\n\n  /**\n   * Return the {@link module:ol/geom/GeometryLayout layout} of the geometry.\n   * @return {GeometryLayout} Layout.\n   * @api\n   */\n  getLayout() {\n    return this.layout;\n  }\n\n  /**\n   * @inheritDoc\n   */\n  getSimplifiedGeometry(squaredTolerance) {\n    if (this.simplifiedGeometryRevision !== this.getRevision()) {\n      this.simplifiedGeometryMaxMinSquaredTolerance = 0;\n      this.simplifiedGeometryRevision = this.getRevision();\n    }\n    // If squaredTolerance is negative or if we know that simplification will not\n    // have any effect then just return this.\n    if (squaredTolerance < 0 ||\n        (this.simplifiedGeometryMaxMinSquaredTolerance !== 0 &&\n         squaredTolerance <= this.simplifiedGeometryMaxMinSquaredTolerance)) {\n      return this;\n    }\n\n    const simplifiedGeometry =\n        this.getSimplifiedGeometryInternal(squaredTolerance);\n    const simplifiedFlatCoordinates = simplifiedGeometry.getFlatCoordinates();\n    if (simplifiedFlatCoordinates.length < this.flatCoordinates.length) {\n      return simplifiedGeometry;\n    } else {\n      // Simplification did not actually remove any coordinates.  We now know\n      // that any calls to getSimplifiedGeometry with a squaredTolerance less\n      // than or equal to the current squaredTolerance will also not have any\n      // effect.  This allows us to short circuit simplification (saving CPU\n      // cycles) and prevents the cache of simplified geometries from filling\n      // up with useless identical copies of this geometry (saving memory).\n      this.simplifiedGeometryMaxMinSquaredTolerance = squaredTolerance;\n      return this;\n    }\n  }\n\n  /**\n   * @param {number} squaredTolerance Squared tolerance.\n   * @return {SimpleGeometry} Simplified geometry.\n   * @protected\n   */\n  getSimplifiedGeometryInternal(squaredTolerance) {\n    return this;\n  }\n\n  /**\n   * @return {number} Stride.\n   */\n  getStride() {\n    return this.stride;\n  }\n\n  /**\n   * @param {GeometryLayout} layout Layout.\n   * @param {Array<number>} flatCoordinates Flat coordinates.\n   */\n  setFlatCoordinates(layout, flatCoordinates) {\n    this.stride = getStrideForLayout(layout);\n    this.layout = layout;\n    this.flatCoordinates = flatCoordinates;\n  }\n\n  /**\n   * @abstract\n   * @param {!Array<*>} coordinates Coordinates.\n   * @param {GeometryLayout=} opt_layout Layout.\n   */\n  setCoordinates(coordinates, opt_layout) {\n    abstract();\n  }\n\n  /**\n   * @param {GeometryLayout|undefined} layout Layout.\n   * @param {Array<*>} coordinates Coordinates.\n   * @param {number} nesting Nesting.\n   * @protected\n   */\n  setLayout(layout, coordinates, nesting) {\n    /** @type {number} */\n    let stride;\n    if (layout) {\n      stride = getStrideForLayout(layout);\n    } else {\n      for (let i = 0; i < nesting; ++i) {\n        if (coordinates.length === 0) {\n          this.layout = GeometryLayout.XY;\n          this.stride = 2;\n          return;\n        } else {\n          coordinates = /** @type {Array} */ (coordinates[0]);\n        }\n      }\n      stride = coordinates.length;\n      layout = getLayoutForStride(stride);\n    }\n    this.layout = layout;\n    this.stride = stride;\n  }\n\n  /**\n   * @inheritDoc\n   * @api\n   */\n  applyTransform(transformFn) {\n    if (this.flatCoordinates) {\n      transformFn(this.flatCoordinates, this.flatCoordinates, this.stride);\n      this.changed();\n    }\n  }\n\n  /**\n   * @inheritDoc\n   * @api\n   */\n  rotate(angle, anchor) {\n    const flatCoordinates = this.getFlatCoordinates();\n    if (flatCoordinates) {\n      const stride = this.getStride();\n      rotate(\n        flatCoordinates, 0, flatCoordinates.length,\n        stride, angle, anchor, flatCoordinates);\n      this.changed();\n    }\n  }\n\n  /**\n   * @inheritDoc\n   * @api\n   */\n  scale(sx, opt_sy, opt_anchor) {\n    let sy = opt_sy;\n    if (sy === undefined) {\n      sy = sx;\n    }\n    let anchor = opt_anchor;\n    if (!anchor) {\n      anchor = getCenter(this.getExtent());\n    }\n    const flatCoordinates = this.getFlatCoordinates();\n    if (flatCoordinates) {\n      const stride = this.getStride();\n      scale(\n        flatCoordinates, 0, flatCoordinates.length,\n        stride, sx, sy, anchor, flatCoordinates);\n      this.changed();\n    }\n  }\n\n  /**\n   * @inheritDoc\n   * @api\n   */\n  translate(deltaX, deltaY) {\n    const flatCoordinates = this.getFlatCoordinates();\n    if (flatCoordinates) {\n      const stride = this.getStride();\n      translate(\n        flatCoordinates, 0, flatCoordinates.length, stride,\n        deltaX, deltaY, flatCoordinates);\n      this.changed();\n    }\n  }\n}\n\n\n/**\n * @param {number} stride Stride.\n * @return {GeometryLayout} layout Layout.\n */\nfunction getLayoutForStride(stride) {\n  let layout;\n  if (stride == 2) {\n    layout = GeometryLayout.XY;\n  } else if (stride == 3) {\n    layout = GeometryLayout.XYZ;\n  } else if (stride == 4) {\n    layout = GeometryLayout.XYZM;\n  }\n  return (\n    /** @type {GeometryLayout} */ (layout)\n  );\n}\n\n\n/**\n * @param {GeometryLayout} layout Layout.\n * @return {number} Stride.\n */\nexport function getStrideForLayout(layout) {\n  let stride;\n  if (layout == GeometryLayout.XY) {\n    stride = 2;\n  } else if (layout == GeometryLayout.XYZ || layout == GeometryLayout.XYM) {\n    stride = 3;\n  } else if (layout == GeometryLayout.XYZM) {\n    stride = 4;\n  }\n  return /** @type {number} */ (stride);\n}\n\n\n/**\n * @param {SimpleGeometry} simpleGeometry Simple geometry.\n * @param {import(\"../transform.js\").Transform} transform Transform.\n * @param {Array<number>=} opt_dest Destination.\n * @return {Array<number>} Transformed flat coordinates.\n */\nexport function transformGeom2D(simpleGeometry, transform, opt_dest) {\n  const flatCoordinates = simpleGeometry.getFlatCoordinates();\n  if (!flatCoordinates) {\n    return null;\n  } else {\n    const stride = simpleGeometry.getStride();\n    return transform2D(\n      flatCoordinates, 0, flatCoordinates.length, stride,\n      transform, opt_dest);\n  }\n}\n\nexport default SimpleGeometry;\n","/**\n * @module ol/interaction/Interaction\n */\nimport BaseObject from '../Object.js';\nimport {easeOut, linear} from '../easing.js';\nimport InteractionProperty from './Property.js';\n\n\n/**\n * Object literal with config options for interactions.\n * @typedef {Object} InteractionOptions\n * @property {function(import(\"../MapBrowserEvent.js\").default):boolean} handleEvent\n * Method called by the map to notify the interaction that a browser event was\n * dispatched to the map. If the function returns a falsy value, propagation of\n * the event to other interactions in the map's interactions chain will be\n * prevented (this includes functions with no explicit return). The interactions\n * are traversed in reverse order of the interactions collection of the map.\n */\n\n\n/**\n * @classdesc\n * Abstract base class; normally only used for creating subclasses and not\n * instantiated in apps.\n * User actions that change the state of the map. Some are similar to controls,\n * but are not associated with a DOM element.\n * For example, {@link module:ol/interaction/KeyboardZoom~KeyboardZoom} is\n * functionally the same as {@link module:ol/control/Zoom~Zoom}, but triggered\n * by a keyboard event not a button element event.\n * Although interactions do not have a DOM element, some of them do render\n * vectors and so are visible on the screen.\n * @api\n */\nclass Interaction extends BaseObject {\n  /**\n   * @param {InteractionOptions} options Options.\n   */\n  constructor(options) {\n    super();\n\n    if (options.handleEvent) {\n      this.handleEvent = options.handleEvent;\n    }\n\n    /**\n     * @private\n     * @type {import(\"../PluggableMap.js\").default}\n     */\n    this.map_ = null;\n\n    this.setActive(true);\n  }\n\n  /**\n   * Return whether the interaction is currently active.\n   * @return {boolean} `true` if the interaction is active, `false` otherwise.\n   * @observable\n   * @api\n   */\n  getActive() {\n    return /** @type {boolean} */ (this.get(InteractionProperty.ACTIVE));\n  }\n\n  /**\n   * Get the map associated with this interaction.\n   * @return {import(\"../PluggableMap.js\").default} Map.\n   * @api\n   */\n  getMap() {\n    return this.map_;\n  }\n\n  /**\n   * Handles the {@link module:ol/MapBrowserEvent map browser event}.\n   * @param {import(\"../MapBrowserEvent.js\").default} mapBrowserEvent Map browser event.\n   * @return {boolean} `false` to stop event propagation.\n   * @api\n   */\n  handleEvent(mapBrowserEvent) {\n    return true;\n  }\n\n  /**\n   * Activate or deactivate the interaction.\n   * @param {boolean} active Active.\n   * @observable\n   * @api\n   */\n  setActive(active) {\n    this.set(InteractionProperty.ACTIVE, active);\n  }\n\n  /**\n   * Remove the interaction from its current map and attach it to the new map.\n   * Subclasses may set up event handlers to get notified about changes to\n   * the map here.\n   * @param {import(\"../PluggableMap.js\").default} map Map.\n   */\n  setMap(map) {\n    this.map_ = map;\n  }\n}\n\n\n/**\n * @param {import(\"../View.js\").default} view View.\n * @param {import(\"../coordinate.js\").Coordinate} delta Delta.\n * @param {number=} opt_duration Duration.\n */\nexport function pan(view, delta, opt_duration) {\n  const currentCenter = view.getCenterInternal();\n  if (currentCenter) {\n    const center = [currentCenter[0] + delta[0], currentCenter[1] + delta[1]];\n    view.animateInternal({\n      duration: opt_duration !== undefined ? opt_duration : 250,\n      easing: linear,\n      center: view.getConstrainedCenter(center)\n    });\n  }\n}\n\n/**\n * @param {import(\"../View.js\").default} view View.\n * @param {number} delta Delta from previous zoom level.\n * @param {import(\"../coordinate.js\").Coordinate=} opt_anchor Anchor coordinate in the user projection.\n * @param {number=} opt_duration Duration.\n */\nexport function zoomByDelta(view, delta, opt_anchor, opt_duration) {\n  const currentZoom = view.getZoom();\n\n  if (currentZoom === undefined) {\n    return;\n  }\n\n  const newZoom = view.getConstrainedZoom(currentZoom + delta);\n  const newResolution = view.getResolutionForZoom(newZoom);\n\n  if (view.getAnimating()) {\n    view.cancelAnimations();\n  }\n  view.animate({\n    resolution: newResolution,\n    anchor: opt_anchor,\n    duration: opt_duration !== undefined ? opt_duration : 250,\n    easing: easeOut\n  });\n}\n\nexport default Interaction;\n","/**\n * @module ol/Overlay\n */\nimport MapEventType from './MapEventType.js';\nimport BaseObject, {getChangeEventType} from './Object.js';\nimport OverlayPositioning from './OverlayPositioning.js';\nimport {CLASS_SELECTABLE} from './css.js';\nimport {removeNode, removeChildren, outerWidth, outerHeight} from './dom.js';\nimport {listen, unlistenByKey} from './events.js';\nimport {containsExtent} from './extent.js';\n\n\n/**\n * @typedef {Object} Options\n * @property {number|string} [id] Set the overlay id. The overlay id can be used\n * with the {@link module:ol/Map~Map#getOverlayById} method.\n * @property {HTMLElement} [element] The overlay element.\n * @property {Array<number>} [offset=[0, 0]] Offsets in pixels used when positioning\n * the overlay. The first element in the\n * array is the horizontal offset. A positive value shifts the overlay right.\n * The second element in the array is the vertical offset. A positive value\n * shifts the overlay down.\n * @property {import(\"./coordinate.js\").Coordinate} [position] The overlay position\n * in map projection.\n * @property {OverlayPositioning} [positioning='top-left'] Defines how\n * the overlay is actually positioned with respect to its `position` property.\n * Possible values are `'bottom-left'`, `'bottom-center'`, `'bottom-right'`,\n * `'center-left'`, `'center-center'`, `'center-right'`, `'top-left'`,\n * `'top-center'`, and `'top-right'`.\n * @property {boolean} [stopEvent=true] Whether event propagation to the map\n * viewport should be stopped. If `true` the overlay is placed in the same\n * container as that of the controls (CSS class name\n * `ol-overlaycontainer-stopevent`); if `false` it is placed in the container\n * with CSS class name specified by the `className` property.\n * @property {boolean} [insertFirst=true] Whether the overlay is inserted first\n * in the overlay container, or appended. If the overlay is placed in the same\n * container as that of the controls (see the `stopEvent` option) you will\n * probably set `insertFirst` to `true` so the overlay is displayed below the\n * controls.\n * @property {boolean} [autoPan=false] If set to `true` the map is panned when\n * calling `setPosition`, so that the overlay is entirely visible in the current\n * viewport.\n * @property {PanOptions} [autoPanAnimation] The\n * animation options used to pan the overlay into view. This animation is only\n * used when `autoPan` is enabled. A `duration` and `easing` may be provided to\n * customize the animation.\n * @property {number} [autoPanMargin=20] The margin (in pixels) between the\n * overlay and the borders of the map when autopanning.\n * @property {string} [className='ol-overlay-container ol-selectable'] CSS class\n * name.\n */\n\n\n/**\n * @typedef {Object} PanOptions\n * @property {number} [duration=1000] The duration of the animation in\n * milliseconds.\n * @property {function(number):number} [easing] The easing function to use. Can\n * be one from {@link module:ol/easing} or a custom function.\n * Default is {@link module:ol/easing~inAndOut}.\n */\n\n\n/**\n * @enum {string}\n * @protected\n */\nconst Property = {\n  ELEMENT: 'element',\n  MAP: 'map',\n  OFFSET: 'offset',\n  POSITION: 'position',\n  POSITIONING: 'positioning'\n};\n\n\n/**\n * @classdesc\n * An element to be displayed over the map and attached to a single map\n * location.  Like {@link module:ol/control/Control~Control}, Overlays are\n * visible widgets. Unlike Controls, they are not in a fixed position on the\n * screen, but are tied to a geographical coordinate, so panning the map will\n * move an Overlay but not a Control.\n *\n * Example:\n *\n *     import Overlay from 'ol/Overlay';\n *\n *     var popup = new Overlay({\n *       element: document.getElementById('popup')\n *     });\n *     popup.setPosition(coordinate);\n *     map.addOverlay(popup);\n *\n * @api\n */\nclass Overlay extends BaseObject {\n\n  /**\n   * @param {Options} options Overlay options.\n   */\n  constructor(options) {\n\n    super();\n\n    /**\n     * @protected\n     * @type {Options}\n     */\n    this.options = options;\n\n    /**\n     * @protected\n     * @type {number|string|undefined}\n     */\n    this.id = options.id;\n\n    /**\n     * @protected\n     * @type {boolean}\n     */\n    this.insertFirst = options.insertFirst !== undefined ?\n      options.insertFirst : true;\n\n    /**\n     * @protected\n     * @type {boolean}\n     */\n    this.stopEvent = options.stopEvent !== undefined ? options.stopEvent : true;\n\n    /**\n     * @protected\n     * @type {HTMLElement}\n     */\n    this.element = document.createElement('div');\n    this.element.className = options.className !== undefined ?\n      options.className : 'ol-overlay-container ' + CLASS_SELECTABLE;\n    this.element.style.position = 'absolute';\n\n    /**\n     * @protected\n     * @type {boolean}\n     */\n    this.autoPan = options.autoPan !== undefined ? options.autoPan : false;\n\n    /**\n     * @protected\n     * @type {PanOptions}\n     */\n    this.autoPanAnimation = options.autoPanAnimation || /** @type {PanOptions} */ ({});\n\n    /**\n     * @protected\n     * @type {number}\n     */\n    this.autoPanMargin = options.autoPanMargin !== undefined ?\n      options.autoPanMargin : 20;\n\n    /**\n     * @protected\n     * @type {{bottom_: string,\n     *         left_: string,\n     *         right_: string,\n     *         top_: string,\n     *         visible: boolean}}\n     */\n    this.rendered = {\n      bottom_: '',\n      left_: '',\n      right_: '',\n      top_: '',\n      visible: true\n    };\n\n    /**\n     * @protected\n     * @type {?import(\"./events.js\").EventsKey}\n     */\n    this.mapPostrenderListenerKey = null;\n\n    this.addEventListener(getChangeEventType(Property.ELEMENT), this.handleElementChanged);\n    this.addEventListener(getChangeEventType(Property.MAP), this.handleMapChanged);\n    this.addEventListener(getChangeEventType(Property.OFFSET), this.handleOffsetChanged);\n    this.addEventListener(getChangeEventType(Property.POSITION), this.handlePositionChanged);\n    this.addEventListener(getChangeEventType(Property.POSITIONING), this.handlePositioningChanged);\n\n    if (options.element !== undefined) {\n      this.setElement(options.element);\n    }\n\n    this.setOffset(options.offset !== undefined ? options.offset : [0, 0]);\n\n    this.setPositioning(options.positioning !== undefined ?\n      /** @type {OverlayPositioning} */ (options.positioning) :\n      OverlayPositioning.TOP_LEFT);\n\n    if (options.position !== undefined) {\n      this.setPosition(options.position);\n    }\n\n  }\n\n  /**\n   * Get the DOM element of this overlay.\n   * @return {HTMLElement|undefined} The Element containing the overlay.\n   * @observable\n   * @api\n   */\n  getElement() {\n    return /** @type {HTMLElement|undefined} */ (this.get(Property.ELEMENT));\n  }\n\n  /**\n   * Get the overlay identifier which is set on constructor.\n   * @return {number|string|undefined} Id.\n   * @api\n   */\n  getId() {\n    return this.id;\n  }\n\n  /**\n   * Get the map associated with this overlay.\n   * @return {import(\"./PluggableMap.js\").default|undefined} The map that the\n   * overlay is part of.\n   * @observable\n   * @api\n   */\n  getMap() {\n    return (\n      /** @type {import(\"./PluggableMap.js\").default|undefined} */ (this.get(Property.MAP))\n    );\n  }\n\n  /**\n   * Get the offset of this overlay.\n   * @return {Array<number>} The offset.\n   * @observable\n   * @api\n   */\n  getOffset() {\n    return /** @type {Array<number>} */ (this.get(Property.OFFSET));\n  }\n\n  /**\n   * Get the current position of this overlay.\n   * @return {import(\"./coordinate.js\").Coordinate|undefined} The spatial point that the overlay is\n   *     anchored at.\n   * @observable\n   * @api\n   */\n  getPosition() {\n    return (\n      /** @type {import(\"./coordinate.js\").Coordinate|undefined} */ (this.get(Property.POSITION))\n    );\n  }\n\n  /**\n   * Get the current positioning of this overlay.\n   * @return {OverlayPositioning} How the overlay is positioned\n   *     relative to its point on the map.\n   * @observable\n   * @api\n   */\n  getPositioning() {\n    return (\n      /** @type {OverlayPositioning} */ (this.get(Property.POSITIONING))\n    );\n  }\n\n  /**\n   * @protected\n   */\n  handleElementChanged() {\n    removeChildren(this.element);\n    const element = this.getElement();\n    if (element) {\n      this.element.appendChild(element);\n    }\n  }\n\n  /**\n   * @protected\n   */\n  handleMapChanged() {\n    if (this.mapPostrenderListenerKey) {\n      removeNode(this.element);\n      unlistenByKey(this.mapPostrenderListenerKey);\n      this.mapPostrenderListenerKey = null;\n    }\n    const map = this.getMap();\n    if (map) {\n      this.mapPostrenderListenerKey = listen(map,\n        MapEventType.POSTRENDER, this.render, this);\n      this.updatePixelPosition();\n      const container = this.stopEvent ?\n        map.getOverlayContainerStopEvent() : map.getOverlayContainer();\n      if (this.insertFirst) {\n        container.insertBefore(this.element, container.childNodes[0] || null);\n      } else {\n        container.appendChild(this.element);\n      }\n    }\n  }\n\n  /**\n   * @protected\n   */\n  render() {\n    this.updatePixelPosition();\n  }\n\n  /**\n   * @protected\n   */\n  handleOffsetChanged() {\n    this.updatePixelPosition();\n  }\n\n  /**\n   * @protected\n   */\n  handlePositionChanged() {\n    this.updatePixelPosition();\n    if (this.get(Property.POSITION) && this.autoPan) {\n      this.panIntoView();\n    }\n  }\n\n  /**\n   * @protected\n   */\n  handlePositioningChanged() {\n    this.updatePixelPosition();\n  }\n\n  /**\n   * Set the DOM element to be associated with this overlay.\n   * @param {HTMLElement|undefined} element The Element containing the overlay.\n   * @observable\n   * @api\n   */\n  setElement(element) {\n    this.set(Property.ELEMENT, element);\n  }\n\n  /**\n   * Set the map to be associated with this overlay.\n   * @param {import(\"./PluggableMap.js\").default|undefined} map The map that the\n   * overlay is part of.\n   * @observable\n   * @api\n   */\n  setMap(map) {\n    this.set(Property.MAP, map);\n  }\n\n  /**\n   * Set the offset for this overlay.\n   * @param {Array<number>} offset Offset.\n   * @observable\n   * @api\n   */\n  setOffset(offset) {\n    this.set(Property.OFFSET, offset);\n  }\n\n  /**\n   * Set the position for this overlay. If the position is `undefined` the\n   * overlay is hidden.\n   * @param {import(\"./coordinate.js\").Coordinate|undefined} position The spatial point that the overlay\n   *     is anchored at.\n   * @observable\n   * @api\n   */\n  setPosition(position) {\n    this.set(Property.POSITION, position);\n  }\n\n  /**\n   * Pan the map so that the overlay is entirely visible in the current viewport\n   * (if necessary).\n   * @protected\n   */\n  panIntoView() {\n    const map = this.getMap();\n\n    if (!map || !map.getTargetElement()) {\n      return;\n    }\n\n    const mapRect = this.getRect(map.getTargetElement(), map.getSize());\n    const element = this.getElement();\n    const overlayRect = this.getRect(element, [outerWidth(element), outerHeight(element)]);\n\n    const margin = this.autoPanMargin;\n    if (!containsExtent(mapRect, overlayRect)) {\n      // the overlay is not completely inside the viewport, so pan the map\n      const offsetLeft = overlayRect[0] - mapRect[0];\n      const offsetRight = mapRect[2] - overlayRect[2];\n      const offsetTop = overlayRect[1] - mapRect[1];\n      const offsetBottom = mapRect[3] - overlayRect[3];\n\n      const delta = [0, 0];\n      if (offsetLeft < 0) {\n        // move map to the left\n        delta[0] = offsetLeft - margin;\n      } else if (offsetRight < 0) {\n        // move map to the right\n        delta[0] = Math.abs(offsetRight) + margin;\n      }\n      if (offsetTop < 0) {\n        // move map up\n        delta[1] = offsetTop - margin;\n      } else if (offsetBottom < 0) {\n        // move map down\n        delta[1] = Math.abs(offsetBottom) + margin;\n      }\n\n      if (delta[0] !== 0 || delta[1] !== 0) {\n        const center = /** @type {import(\"./coordinate.js\").Coordinate} */ (map.getView().getCenterInternal());\n        const centerPx = map.getPixelFromCoordinateInternal(center);\n        const newCenterPx = [\n          centerPx[0] + delta[0],\n          centerPx[1] + delta[1]\n        ];\n\n        map.getView().animateInternal({\n          center: map.getCoordinateFromPixelInternal(newCenterPx),\n          duration: this.autoPanAnimation.duration,\n          easing: this.autoPanAnimation.easing\n        });\n      }\n    }\n  }\n\n  /**\n   * Get the extent of an element relative to the document\n   * @param {HTMLElement|undefined} element The element.\n   * @param {import(\"./size.js\").Size|undefined} size The size of the element.\n   * @return {import(\"./extent.js\").Extent} The extent.\n   * @protected\n   */\n  getRect(element, size) {\n    const box = element.getBoundingClientRect();\n    const offsetX = box.left + window.pageXOffset;\n    const offsetY = box.top + window.pageYOffset;\n    return [\n      offsetX,\n      offsetY,\n      offsetX + size[0],\n      offsetY + size[1]\n    ];\n  }\n\n  /**\n   * Set the positioning for this overlay.\n   * @param {OverlayPositioning} positioning how the overlay is\n   *     positioned relative to its point on the map.\n   * @observable\n   * @api\n   */\n  setPositioning(positioning) {\n    this.set(Property.POSITIONING, positioning);\n  }\n\n  /**\n   * Modify the visibility of the element.\n   * @param {boolean} visible Element visibility.\n   * @protected\n   */\n  setVisible(visible) {\n    if (this.rendered.visible !== visible) {\n      this.element.style.display = visible ? '' : 'none';\n      this.rendered.visible = visible;\n    }\n  }\n\n  /**\n   * Update pixel position.\n   * @protected\n   */\n  updatePixelPosition() {\n    const map = this.getMap();\n    const position = this.getPosition();\n    if (!map || !map.isRendered() || !position) {\n      this.setVisible(false);\n      return;\n    }\n\n    const pixel = map.getPixelFromCoordinate(position);\n    const mapSize = map.getSize();\n    this.updateRenderedPosition(pixel, mapSize);\n  }\n\n  /**\n   * @param {import(\"./pixel.js\").Pixel} pixel The pixel location.\n   * @param {import(\"./size.js\").Size|undefined} mapSize The map size.\n   * @protected\n   */\n  updateRenderedPosition(pixel, mapSize) {\n    const style = this.element.style;\n    const offset = this.getOffset();\n\n    const positioning = this.getPositioning();\n\n    this.setVisible(true);\n\n    let offsetX = offset[0];\n    let offsetY = offset[1];\n    if (positioning == OverlayPositioning.BOTTOM_RIGHT ||\n        positioning == OverlayPositioning.CENTER_RIGHT ||\n        positioning == OverlayPositioning.TOP_RIGHT) {\n      if (this.rendered.left_ !== '') {\n        this.rendered.left_ = style.left = '';\n      }\n      const right = Math.round(mapSize[0] - pixel[0] - offsetX) + 'px';\n      if (this.rendered.right_ != right) {\n        this.rendered.right_ = style.right = right;\n      }\n    } else {\n      if (this.rendered.right_ !== '') {\n        this.rendered.right_ = style.right = '';\n      }\n      if (positioning == OverlayPositioning.BOTTOM_CENTER ||\n          positioning == OverlayPositioning.CENTER_CENTER ||\n          positioning == OverlayPositioning.TOP_CENTER) {\n        offsetX -= this.element.offsetWidth / 2;\n      }\n      const left = Math.round(pixel[0] + offsetX) + 'px';\n      if (this.rendered.left_ != left) {\n        this.rendered.left_ = style.left = left;\n      }\n    }\n    if (positioning == OverlayPositioning.BOTTOM_LEFT ||\n        positioning == OverlayPositioning.BOTTOM_CENTER ||\n        positioning == OverlayPositioning.BOTTOM_RIGHT) {\n      if (this.rendered.top_ !== '') {\n        this.rendered.top_ = style.top = '';\n      }\n      const bottom = Math.round(mapSize[1] - pixel[1] - offsetY) + 'px';\n      if (this.rendered.bottom_ != bottom) {\n        this.rendered.bottom_ = style.bottom = bottom;\n      }\n    } else {\n      if (this.rendered.bottom_ !== '') {\n        this.rendered.bottom_ = style.bottom = '';\n      }\n      if (positioning == OverlayPositioning.CENTER_LEFT ||\n          positioning == OverlayPositioning.CENTER_CENTER ||\n          positioning == OverlayPositioning.CENTER_RIGHT) {\n        offsetY -= this.element.offsetHeight / 2;\n      }\n      const top = Math.round(pixel[1] + offsetY) + 'px';\n      if (this.rendered.top_ != top) {\n        this.rendered.top_ = style.top = top;\n      }\n    }\n  }\n\n  /**\n   * returns the options this Overlay has been created with\n   * @return {Options} overlay options\n   */\n  getOptions() {\n    return this.options;\n  }\n}\n\n\nexport default Overlay;\n","/**\n * @module ol/geom/flat/transform\n */\n\n\n/**\n * @param {Array<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {number} end End.\n * @param {number} stride Stride.\n * @param {import(\"../../transform.js\").Transform} transform Transform.\n * @param {Array<number>=} opt_dest Destination.\n * @return {Array<number>} Transformed coordinates.\n */\nexport function transform2D(flatCoordinates, offset, end, stride, transform, opt_dest) {\n  const dest = opt_dest ? opt_dest : [];\n  let i = 0;\n  for (let j = offset; j < end; j += stride) {\n    const x = flatCoordinates[j];\n    const y = flatCoordinates[j + 1];\n    dest[i++] = transform[0] * x + transform[2] * y + transform[4];\n    dest[i++] = transform[1] * x + transform[3] * y + transform[5];\n  }\n  if (opt_dest && dest.length != i) {\n    dest.length = i;\n  }\n  return dest;\n}\n\n\n/**\n * @param {Array<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {number} end End.\n * @param {number} stride Stride.\n * @param {number} angle Angle.\n * @param {Array<number>} anchor Rotation anchor point.\n * @param {Array<number>=} opt_dest Destination.\n * @return {Array<number>} Transformed coordinates.\n */\nexport function rotate(flatCoordinates, offset, end, stride, angle, anchor, opt_dest) {\n  const dest = opt_dest ? opt_dest : [];\n  const cos = Math.cos(angle);\n  const sin = Math.sin(angle);\n  const anchorX = anchor[0];\n  const anchorY = anchor[1];\n  let i = 0;\n  for (let j = offset; j < end; j += stride) {\n    const deltaX = flatCoordinates[j] - anchorX;\n    const deltaY = flatCoordinates[j + 1] - anchorY;\n    dest[i++] = anchorX + deltaX * cos - deltaY * sin;\n    dest[i++] = anchorY + deltaX * sin + deltaY * cos;\n    for (let k = j + 2; k < j + stride; ++k) {\n      dest[i++] = flatCoordinates[k];\n    }\n  }\n  if (opt_dest && dest.length != i) {\n    dest.length = i;\n  }\n  return dest;\n}\n\n\n/**\n * Scale the coordinates.\n * @param {Array<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {number} end End.\n * @param {number} stride Stride.\n * @param {number} sx Scale factor in the x-direction.\n * @param {number} sy Scale factor in the y-direction.\n * @param {Array<number>} anchor Scale anchor point.\n * @param {Array<number>=} opt_dest Destination.\n * @return {Array<number>} Transformed coordinates.\n */\nexport function scale(flatCoordinates, offset, end, stride, sx, sy, anchor, opt_dest) {\n  const dest = opt_dest ? opt_dest : [];\n  const anchorX = anchor[0];\n  const anchorY = anchor[1];\n  let i = 0;\n  for (let j = offset; j < end; j += stride) {\n    const deltaX = flatCoordinates[j] - anchorX;\n    const deltaY = flatCoordinates[j + 1] - anchorY;\n    dest[i++] = anchorX + sx * deltaX;\n    dest[i++] = anchorY + sy * deltaY;\n    for (let k = j + 2; k < j + stride; ++k) {\n      dest[i++] = flatCoordinates[k];\n    }\n  }\n  if (opt_dest && dest.length != i) {\n    dest.length = i;\n  }\n  return dest;\n}\n\n\n/**\n * @param {Array<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {number} end End.\n * @param {number} stride Stride.\n * @param {number} deltaX Delta X.\n * @param {number} deltaY Delta Y.\n * @param {Array<number>=} opt_dest Destination.\n * @return {Array<number>} Transformed coordinates.\n */\nexport function translate(flatCoordinates, offset, end, stride, deltaX, deltaY, opt_dest) {\n  const dest = opt_dest ? opt_dest : [];\n  let i = 0;\n  for (let j = offset; j < end; j += stride) {\n    dest[i++] = flatCoordinates[j] + deltaX;\n    dest[i++] = flatCoordinates[j + 1] + deltaY;\n    for (let k = j + 2; k < j + stride; ++k) {\n      dest[i++] = flatCoordinates[k];\n    }\n  }\n  if (opt_dest && dest.length != i) {\n    dest.length = i;\n  }\n  return dest;\n}\n","/**\n * @module ol/extent/Relationship\n */\n\n/**\n * Relationship to an extent.\n * @enum {number}\n */\nexport default {\n  UNKNOWN: 0,\n  INTERSECTING: 1,\n  ABOVE: 2,\n  RIGHT: 4,\n  BELOW: 8,\n  LEFT: 16\n};\n","/**\n * @module ol/geom/MultiPolygon\n */\nimport {extend} from '../array.js';\nimport {closestSquaredDistanceXY} from '../extent.js';\nimport GeometryLayout from './GeometryLayout.js';\nimport GeometryType from './GeometryType.js';\nimport MultiPoint from './MultiPoint.js';\nimport Polygon from './Polygon.js';\nimport SimpleGeometry from './SimpleGeometry.js';\nimport {linearRingss as linearRingssArea} from './flat/area.js';\nimport {linearRingss as linearRingssCenter} from './flat/center.js';\nimport {assignClosestMultiArrayPoint, multiArrayMaxSquaredDelta} from './flat/closest.js';\nimport {linearRingssContainsXY} from './flat/contains.js';\nimport {deflateMultiCoordinatesArray} from './flat/deflate.js';\nimport {inflateMultiCoordinatesArray} from './flat/inflate.js';\nimport {getInteriorPointsOfMultiArray} from './flat/interiorpoint.js';\nimport {intersectsLinearRingMultiArray} from './flat/intersectsextent.js';\nimport {linearRingssAreOriented, orientLinearRingsArray} from './flat/orient.js';\nimport {quantizeMultiArray} from './flat/simplify.js';\n\n/**\n * @classdesc\n * Multi-polygon geometry.\n *\n * @api\n */\nclass MultiPolygon extends SimpleGeometry {\n\n  /**\n   * @param {Array<Array<Array<import(\"../coordinate.js\").Coordinate>>|Polygon>|Array<number>} coordinates Coordinates.\n   *     For internal use, flat coordinates in combination with `opt_layout` and `opt_endss` are also accepted.\n   * @param {GeometryLayout=} opt_layout Layout.\n   * @param {Array<Array<number>>=} opt_endss Array of ends for internal use with flat coordinates.\n   */\n  constructor(coordinates, opt_layout, opt_endss) {\n\n    super();\n\n    /**\n     * @type {Array<Array<number>>}\n     * @private\n     */\n    this.endss_ = [];\n\n    /**\n     * @private\n     * @type {number}\n     */\n    this.flatInteriorPointsRevision_ = -1;\n\n    /**\n     * @private\n     * @type {Array<number>}\n     */\n    this.flatInteriorPoints_ = null;\n\n    /**\n     * @private\n     * @type {number}\n     */\n    this.maxDelta_ = -1;\n\n    /**\n     * @private\n     * @type {number}\n     */\n    this.maxDeltaRevision_ = -1;\n\n    /**\n     * @private\n     * @type {number}\n     */\n    this.orientedRevision_ = -1;\n\n    /**\n     * @private\n     * @type {Array<number>}\n     */\n    this.orientedFlatCoordinates_ = null;\n\n    if (!opt_endss && !Array.isArray(coordinates[0])) {\n      let layout = this.getLayout();\n      const polygons = /** @type {Array<Polygon>} */ (coordinates);\n      const flatCoordinates = [];\n      const endss = [];\n      for (let i = 0, ii = polygons.length; i < ii; ++i) {\n        const polygon = polygons[i];\n        if (i === 0) {\n          layout = polygon.getLayout();\n        }\n        const offset = flatCoordinates.length;\n        const ends = polygon.getEnds();\n        for (let j = 0, jj = ends.length; j < jj; ++j) {\n          ends[j] += offset;\n        }\n        extend(flatCoordinates, polygon.getFlatCoordinates());\n        endss.push(ends);\n      }\n      opt_layout = layout;\n      coordinates = flatCoordinates;\n      opt_endss = endss;\n    }\n    if (opt_layout !== undefined && opt_endss) {\n      this.setFlatCoordinates(opt_layout, /** @type {Array<number>} */ (coordinates));\n      this.endss_ = opt_endss;\n    } else {\n      this.setCoordinates(/** @type {Array<Array<Array<import(\"../coordinate.js\").Coordinate>>>} */ (coordinates),\n        opt_layout);\n    }\n\n  }\n\n  /**\n   * Append the passed polygon to this multipolygon.\n   * @param {Polygon} polygon Polygon.\n   * @api\n   */\n  appendPolygon(polygon) {\n    /** @type {Array<number>} */\n    let ends;\n    if (!this.flatCoordinates) {\n      this.flatCoordinates = polygon.getFlatCoordinates().slice();\n      ends = polygon.getEnds().slice();\n      this.endss_.push();\n    } else {\n      const offset = this.flatCoordinates.length;\n      extend(this.flatCoordinates, polygon.getFlatCoordinates());\n      ends = polygon.getEnds().slice();\n      for (let i = 0, ii = ends.length; i < ii; ++i) {\n        ends[i] += offset;\n      }\n    }\n    this.endss_.push(ends);\n    this.changed();\n  }\n\n  /**\n   * Make a complete copy of the geometry.\n   * @return {!MultiPolygon} Clone.\n   * @override\n   * @api\n   */\n  clone() {\n    const len = this.endss_.length;\n    const newEndss = new Array(len);\n    for (let i = 0; i < len; ++i) {\n      newEndss[i] = this.endss_[i].slice();\n    }\n\n    return new MultiPolygon(\n      this.flatCoordinates.slice(), this.layout, newEndss);\n  }\n\n  /**\n   * @inheritDoc\n   */\n  closestPointXY(x, y, closestPoint, minSquaredDistance) {\n    if (minSquaredDistance < closestSquaredDistanceXY(this.getExtent(), x, y)) {\n      return minSquaredDistance;\n    }\n    if (this.maxDeltaRevision_ != this.getRevision()) {\n      this.maxDelta_ = Math.sqrt(multiArrayMaxSquaredDelta(\n        this.flatCoordinates, 0, this.endss_, this.stride, 0));\n      this.maxDeltaRevision_ = this.getRevision();\n    }\n    return assignClosestMultiArrayPoint(\n      this.getOrientedFlatCoordinates(), 0, this.endss_, this.stride,\n      this.maxDelta_, true, x, y, closestPoint, minSquaredDistance);\n  }\n\n  /**\n   * @inheritDoc\n   */\n  containsXY(x, y) {\n    return linearRingssContainsXY(this.getOrientedFlatCoordinates(), 0, this.endss_, this.stride, x, y);\n  }\n\n  /**\n   * Return the area of the multipolygon on projected plane.\n   * @return {number} Area (on projected plane).\n   * @api\n   */\n  getArea() {\n    return linearRingssArea(this.getOrientedFlatCoordinates(), 0, this.endss_, this.stride);\n  }\n\n  /**\n   * Get the coordinate array for this geometry.  This array has the structure\n   * of a GeoJSON coordinate array for multi-polygons.\n   *\n   * @param {boolean=} opt_right Orient coordinates according to the right-hand\n   *     rule (counter-clockwise for exterior and clockwise for interior rings).\n   *     If `false`, coordinates will be oriented according to the left-hand rule\n   *     (clockwise for exterior and counter-clockwise for interior rings).\n   *     By default, coordinate orientation will depend on how the geometry was\n   *     constructed.\n   * @return {Array<Array<Array<import(\"../coordinate.js\").Coordinate>>>} Coordinates.\n   * @override\n   * @api\n   */\n  getCoordinates(opt_right) {\n    let flatCoordinates;\n    if (opt_right !== undefined) {\n      flatCoordinates = this.getOrientedFlatCoordinates().slice();\n      orientLinearRingsArray(\n        flatCoordinates, 0, this.endss_, this.stride, opt_right);\n    } else {\n      flatCoordinates = this.flatCoordinates;\n    }\n\n    return inflateMultiCoordinatesArray(\n      flatCoordinates, 0, this.endss_, this.stride);\n  }\n\n  /**\n   * @return {Array<Array<number>>} Endss.\n   */\n  getEndss() {\n    return this.endss_;\n  }\n\n  /**\n   * @return {Array<number>} Flat interior points.\n   */\n  getFlatInteriorPoints() {\n    if (this.flatInteriorPointsRevision_ != this.getRevision()) {\n      const flatCenters = linearRingssCenter(\n        this.flatCoordinates, 0, this.endss_, this.stride);\n      this.flatInteriorPoints_ = getInteriorPointsOfMultiArray(\n        this.getOrientedFlatCoordinates(), 0, this.endss_, this.stride,\n        flatCenters);\n      this.flatInteriorPointsRevision_ = this.getRevision();\n    }\n    return this.flatInteriorPoints_;\n  }\n\n  /**\n   * Return the interior points as {@link module:ol/geom/MultiPoint multipoint}.\n   * @return {MultiPoint} Interior points as XYM coordinates, where M is\n   * the length of the horizontal intersection that the point belongs to.\n   * @api\n   */\n  getInteriorPoints() {\n    return new MultiPoint(this.getFlatInteriorPoints().slice(), GeometryLayout.XYM);\n  }\n\n  /**\n   * @return {Array<number>} Oriented flat coordinates.\n   */\n  getOrientedFlatCoordinates() {\n    if (this.orientedRevision_ != this.getRevision()) {\n      const flatCoordinates = this.flatCoordinates;\n      if (linearRingssAreOriented(\n        flatCoordinates, 0, this.endss_, this.stride)) {\n        this.orientedFlatCoordinates_ = flatCoordinates;\n      } else {\n        this.orientedFlatCoordinates_ = flatCoordinates.slice();\n        this.orientedFlatCoordinates_.length =\n            orientLinearRingsArray(\n              this.orientedFlatCoordinates_, 0, this.endss_, this.stride);\n      }\n      this.orientedRevision_ = this.getRevision();\n    }\n    return this.orientedFlatCoordinates_;\n  }\n\n  /**\n   * @inheritDoc\n   */\n  getSimplifiedGeometryInternal(squaredTolerance) {\n    const simplifiedFlatCoordinates = [];\n    const simplifiedEndss = [];\n    simplifiedFlatCoordinates.length = quantizeMultiArray(\n      this.flatCoordinates, 0, this.endss_, this.stride,\n      Math.sqrt(squaredTolerance),\n      simplifiedFlatCoordinates, 0, simplifiedEndss);\n    return new MultiPolygon(simplifiedFlatCoordinates, GeometryLayout.XY, simplifiedEndss);\n  }\n\n  /**\n   * Return the polygon at the specified index.\n   * @param {number} index Index.\n   * @return {Polygon} Polygon.\n   * @api\n   */\n  getPolygon(index) {\n    if (index < 0 || this.endss_.length <= index) {\n      return null;\n    }\n    let offset;\n    if (index === 0) {\n      offset = 0;\n    } else {\n      const prevEnds = this.endss_[index - 1];\n      offset = prevEnds[prevEnds.length - 1];\n    }\n    const ends = this.endss_[index].slice();\n    const end = ends[ends.length - 1];\n    if (offset !== 0) {\n      for (let i = 0, ii = ends.length; i < ii; ++i) {\n        ends[i] -= offset;\n      }\n    }\n    return new Polygon(this.flatCoordinates.slice(offset, end), this.layout, ends);\n  }\n\n  /**\n   * Return the polygons of this multipolygon.\n   * @return {Array<Polygon>} Polygons.\n   * @api\n   */\n  getPolygons() {\n    const layout = this.layout;\n    const flatCoordinates = this.flatCoordinates;\n    const endss = this.endss_;\n    const polygons = [];\n    let offset = 0;\n    for (let i = 0, ii = endss.length; i < ii; ++i) {\n      const ends = endss[i].slice();\n      const end = ends[ends.length - 1];\n      if (offset !== 0) {\n        for (let j = 0, jj = ends.length; j < jj; ++j) {\n          ends[j] -= offset;\n        }\n      }\n      const polygon = new Polygon(flatCoordinates.slice(offset, end), layout, ends);\n      polygons.push(polygon);\n      offset = end;\n    }\n    return polygons;\n  }\n\n  /**\n   * @inheritDoc\n   * @api\n   */\n  getType() {\n    return GeometryType.MULTI_POLYGON;\n  }\n\n  /**\n   * @inheritDoc\n   * @api\n   */\n  intersectsExtent(extent) {\n    return intersectsLinearRingMultiArray(\n      this.getOrientedFlatCoordinates(), 0, this.endss_, this.stride, extent);\n  }\n\n  /**\n   * Set the coordinates of the multipolygon.\n   * @param {!Array<Array<Array<import(\"../coordinate.js\").Coordinate>>>} coordinates Coordinates.\n   * @param {GeometryLayout=} opt_layout Layout.\n   * @override\n   * @api\n   */\n  setCoordinates(coordinates, opt_layout) {\n    this.setLayout(opt_layout, coordinates, 3);\n    if (!this.flatCoordinates) {\n      this.flatCoordinates = [];\n    }\n    const endss = deflateMultiCoordinatesArray(\n      this.flatCoordinates, 0, coordinates, this.stride, this.endss_);\n    if (endss.length === 0) {\n      this.flatCoordinates.length = 0;\n    } else {\n      const lastEnds = endss[endss.length - 1];\n      this.flatCoordinates.length = lastEnds.length === 0 ?\n        0 : lastEnds[lastEnds.length - 1];\n    }\n    this.changed();\n  }\n}\n\n\nexport default MultiPolygon;\n","/**\n * @module ol/reproj/Tile\n */\nimport {ERROR_THRESHOLD} from './common.js';\n\nimport Tile from '../Tile.js';\nimport TileState from '../TileState.js';\nimport {listen, unlistenByKey} from '../events.js';\nimport EventType from '../events/EventType.js';\nimport {getArea, getCenter, getIntersection} from '../extent.js';\nimport {clamp} from '../math.js';\nimport {calculateSourceResolution, render as renderReprojected} from '../reproj.js';\nimport Triangulation from './Triangulation.js';\n\n\n/**\n * @typedef {function(number, number, number, number) : import(\"../Tile.js\").default} FunctionType\n */\n\n\n/**\n * @classdesc\n * Class encapsulating single reprojected tile.\n * See {@link module:ol/source/TileImage~TileImage}.\n *\n */\nclass ReprojTile extends Tile {\n  /**\n   * @param {import(\"../proj/Projection.js\").default} sourceProj Source projection.\n   * @param {import(\"../tilegrid/TileGrid.js\").default} sourceTileGrid Source tile grid.\n   * @param {import(\"../proj/Projection.js\").default} targetProj Target projection.\n   * @param {import(\"../tilegrid/TileGrid.js\").default} targetTileGrid Target tile grid.\n   * @param {import(\"../tilecoord.js\").TileCoord} tileCoord Coordinate of the tile.\n   * @param {import(\"../tilecoord.js\").TileCoord} wrappedTileCoord Coordinate of the tile wrapped in X.\n   * @param {number} pixelRatio Pixel ratio.\n   * @param {number} gutter Gutter of the source tiles.\n   * @param {FunctionType} getTileFunction\n   *     Function returning source tiles (z, x, y, pixelRatio).\n   * @param {number=} opt_errorThreshold Acceptable reprojection error (in px).\n   * @param {boolean=} opt_renderEdges Render reprojection edges.\n   */\n  constructor(\n    sourceProj,\n    sourceTileGrid,\n    targetProj,\n    targetTileGrid,\n    tileCoord,\n    wrappedTileCoord,\n    pixelRatio,\n    gutter,\n    getTileFunction,\n    opt_errorThreshold,\n    opt_renderEdges\n  ) {\n    super(tileCoord, TileState.IDLE);\n\n    /**\n     * @private\n     * @type {boolean}\n     */\n    this.renderEdges_ = opt_renderEdges !== undefined ? opt_renderEdges : false;\n\n    /**\n     * @private\n     * @type {number}\n     */\n    this.pixelRatio_ = pixelRatio;\n\n    /**\n     * @private\n     * @type {number}\n     */\n    this.gutter_ = gutter;\n\n    /**\n     * @private\n     * @type {HTMLCanvasElement}\n     */\n    this.canvas_ = null;\n\n    /**\n     * @private\n     * @type {import(\"../tilegrid/TileGrid.js\").default}\n     */\n    this.sourceTileGrid_ = sourceTileGrid;\n\n    /**\n     * @private\n     * @type {import(\"../tilegrid/TileGrid.js\").default}\n     */\n    this.targetTileGrid_ = targetTileGrid;\n\n    /**\n     * @private\n     * @type {import(\"../tilecoord.js\").TileCoord}\n     */\n    this.wrappedTileCoord_ = wrappedTileCoord ? wrappedTileCoord : tileCoord;\n\n    /**\n     * @private\n     * @type {!Array<import(\"../Tile.js\").default>}\n     */\n    this.sourceTiles_ = [];\n\n    /**\n     * @private\n     * @type {Array<import(\"../events.js\").EventsKey>}\n     */\n    this.sourcesListenerKeys_ = null;\n\n    /**\n     * @private\n     * @type {number}\n     */\n    this.sourceZ_ = 0;\n\n    const targetExtent = targetTileGrid.getTileCoordExtent(this.wrappedTileCoord_);\n    const maxTargetExtent = this.targetTileGrid_.getExtent();\n    let maxSourceExtent = this.sourceTileGrid_.getExtent();\n\n    const limitedTargetExtent = maxTargetExtent ?\n      getIntersection(targetExtent, maxTargetExtent) : targetExtent;\n\n    if (getArea(limitedTargetExtent) === 0) {\n      // Tile is completely outside range -> EMPTY\n      // TODO: is it actually correct that the source even creates the tile ?\n      this.state = TileState.EMPTY;\n      return;\n    }\n\n    const sourceProjExtent = sourceProj.getExtent();\n    if (sourceProjExtent) {\n      if (!maxSourceExtent) {\n        maxSourceExtent = sourceProjExtent;\n      } else {\n        maxSourceExtent = getIntersection(maxSourceExtent, sourceProjExtent);\n      }\n    }\n\n    const targetResolution = targetTileGrid.getResolution(\n      this.wrappedTileCoord_[0]);\n\n    const targetCenter = getCenter(limitedTargetExtent);\n    const sourceResolution = calculateSourceResolution(\n      sourceProj, targetProj, targetCenter, targetResolution);\n\n    if (!isFinite(sourceResolution) || sourceResolution <= 0) {\n      // invalid sourceResolution -> EMPTY\n      // probably edges of the projections when no extent is defined\n      this.state = TileState.EMPTY;\n      return;\n    }\n\n    const errorThresholdInPixels = opt_errorThreshold !== undefined ?\n      opt_errorThreshold : ERROR_THRESHOLD;\n\n    /**\n     * @private\n     * @type {!import(\"./Triangulation.js\").default}\n     */\n    this.triangulation_ = new Triangulation(\n      sourceProj, targetProj, limitedTargetExtent, maxSourceExtent,\n      sourceResolution * errorThresholdInPixels);\n\n    if (this.triangulation_.getTriangles().length === 0) {\n      // no valid triangles -> EMPTY\n      this.state = TileState.EMPTY;\n      return;\n    }\n\n    this.sourceZ_ = sourceTileGrid.getZForResolution(sourceResolution);\n    let sourceExtent = this.triangulation_.calculateSourceExtent();\n\n    if (maxSourceExtent) {\n      if (sourceProj.canWrapX()) {\n        sourceExtent[1] = clamp(\n          sourceExtent[1], maxSourceExtent[1], maxSourceExtent[3]);\n        sourceExtent[3] = clamp(\n          sourceExtent[3], maxSourceExtent[1], maxSourceExtent[3]);\n      } else {\n        sourceExtent = getIntersection(sourceExtent, maxSourceExtent);\n      }\n    }\n\n    if (!getArea(sourceExtent)) {\n      this.state = TileState.EMPTY;\n    } else {\n      const sourceRange = sourceTileGrid.getTileRangeForExtentAndZ(\n        sourceExtent, this.sourceZ_);\n\n      for (let srcX = sourceRange.minX; srcX <= sourceRange.maxX; srcX++) {\n        for (let srcY = sourceRange.minY; srcY <= sourceRange.maxY; srcY++) {\n          const tile = getTileFunction(this.sourceZ_, srcX, srcY, pixelRatio);\n          if (tile) {\n            this.sourceTiles_.push(tile);\n          }\n        }\n      }\n\n      if (this.sourceTiles_.length === 0) {\n        this.state = TileState.EMPTY;\n      }\n    }\n  }\n\n  /**\n   * @inheritDoc\n   */\n  disposeInternal() {\n    if (this.state == TileState.LOADING) {\n      this.unlistenSources_();\n    }\n    super.disposeInternal();\n  }\n\n  /**\n   * Get the HTML Canvas element for this tile.\n   * @return {HTMLCanvasElement} Canvas.\n   */\n  getImage() {\n    return this.canvas_;\n  }\n\n  /**\n   * @private\n   */\n  reproject_() {\n    const sources = [];\n    this.sourceTiles_.forEach(function(tile, i, arr) {\n      if (tile && tile.getState() == TileState.LOADED) {\n        sources.push({\n          extent: this.sourceTileGrid_.getTileCoordExtent(tile.tileCoord),\n          image: tile.getImage()\n        });\n      }\n    }.bind(this));\n    this.sourceTiles_.length = 0;\n\n    if (sources.length === 0) {\n      this.state = TileState.ERROR;\n    } else {\n      const z = this.wrappedTileCoord_[0];\n      const size = this.targetTileGrid_.getTileSize(z);\n      const width = typeof size === 'number' ? size : size[0];\n      const height = typeof size === 'number' ? size : size[1];\n      const targetResolution = this.targetTileGrid_.getResolution(z);\n      const sourceResolution = this.sourceTileGrid_.getResolution(this.sourceZ_);\n\n      const targetExtent = this.targetTileGrid_.getTileCoordExtent(\n        this.wrappedTileCoord_);\n      this.canvas_ = renderReprojected(width, height, this.pixelRatio_,\n        sourceResolution, this.sourceTileGrid_.getExtent(),\n        targetResolution, targetExtent, this.triangulation_, sources,\n        this.gutter_, this.renderEdges_);\n\n      this.state = TileState.LOADED;\n    }\n    this.changed();\n  }\n\n  /**\n   * @inheritDoc\n   */\n  load() {\n    if (this.state == TileState.IDLE) {\n      this.state = TileState.LOADING;\n      this.changed();\n\n      let leftToLoad = 0;\n\n      this.sourcesListenerKeys_ = [];\n      this.sourceTiles_.forEach(function(tile, i, arr) {\n        const state = tile.getState();\n        if (state == TileState.IDLE || state == TileState.LOADING) {\n          leftToLoad++;\n\n          const sourceListenKey = listen(tile, EventType.CHANGE,\n            function(e) {\n              const state = tile.getState();\n              if (state == TileState.LOADED ||\n                    state == TileState.ERROR ||\n                    state == TileState.EMPTY) {\n                unlistenByKey(sourceListenKey);\n                leftToLoad--;\n                if (leftToLoad === 0) {\n                  this.unlistenSources_();\n                  this.reproject_();\n                }\n              }\n            }, this);\n          this.sourcesListenerKeys_.push(sourceListenKey);\n        }\n      }.bind(this));\n\n      this.sourceTiles_.forEach(function(tile, i, arr) {\n        const state = tile.getState();\n        if (state == TileState.IDLE) {\n          tile.load();\n        }\n      });\n\n      if (leftToLoad === 0) {\n        setTimeout(this.reproject_.bind(this), 0);\n      }\n    }\n  }\n\n  /**\n   * @private\n   */\n  unlistenSources_() {\n    this.sourcesListenerKeys_.forEach(unlistenByKey);\n    this.sourcesListenerKeys_ = null;\n  }\n}\n\n\nexport default ReprojTile;\n","/**\n * @module ol/source/TileImage\n */\nimport {ENABLE_RASTER_REPROJECTION} from '../reproj/common.js';\nimport {getUid} from '../util.js';\nimport ImageTile from '../ImageTile.js';\nimport TileCache from '../TileCache.js';\nimport TileState from '../TileState.js';\nimport EventType from '../events/EventType.js';\nimport {equivalent, get as getProjection} from '../proj.js';\nimport ReprojTile from '../reproj/Tile.js';\nimport UrlTile from './UrlTile.js';\nimport {getKey, getKeyZXY} from '../tilecoord.js';\nimport {getForProjection as getTileGridForProjection} from '../tilegrid.js';\n\n/**\n * @typedef {Object} Options\n * @property {import(\"./Source.js\").AttributionLike} [attributions] Attributions.\n * @property {boolean} [attributionsCollapsible=true] Attributions are collapsible.\n * @property {number} [cacheSize] Tile cache size. The default depends on the screen size. Will increase if too small.\n * @property {null|string} [crossOrigin] The `crossOrigin` attribute for loaded images.  Note that\n * you must provide a `crossOrigin` value if you want to access pixel data with the Canvas renderer.\n * See https://developer.mozilla.org/en-US/docs/Web/HTML/CORS_enabled_image for more detail.\n * @property {boolean} [opaque=true] Whether the layer is opaque.\n * @property {import(\"../proj.js\").ProjectionLike} [projection] Projection. Default is the view projection.\n * @property {number} [reprojectionErrorThreshold=0.5] Maximum allowed reprojection error (in pixels).\n * Higher values can increase reprojection performance, but decrease precision.\n * @property {import(\"./State.js\").default} [state] Source state.\n * @property {typeof import(\"../ImageTile.js\").default} [tileClass] Class used to instantiate image tiles.\n * Default is {@link module:ol/ImageTile~ImageTile}.\n * @property {import(\"../tilegrid/TileGrid.js\").default} [tileGrid] Tile grid.\n * @property {import(\"../Tile.js\").LoadFunction} [tileLoadFunction] Optional function to load a tile given a URL. The default is\n * ```js\n * function(imageTile, src) {\n *   imageTile.getImage().src = src;\n * };\n * ```\n * @property {number} [tilePixelRatio=1] The pixel ratio used by the tile service. For example, if the tile\n * service advertizes 256px by 256px tiles but actually sends 512px\n * by 512px images (for retina/hidpi devices) then `tilePixelRatio`\n * should be set to `2`.\n * @property {import(\"../Tile.js\").UrlFunction} [tileUrlFunction] Optional function to get tile URL given a tile coordinate and the projection.\n * @property {string} [url] URL template. Must include `{x}`, `{y}` or `{-y}`, and `{z}` placeholders.\n * A `{?-?}` template pattern, for example `subdomain{a-f}.domain.com`, may be\n * used instead of defining each one separately in the `urls` option.\n * @property {Array<string>} [urls] An array of URL templates.\n * @property {boolean} [wrapX] Whether to wrap the world horizontally. The default, is to\n * request out-of-bounds tiles from the server. When set to `false`, only one\n * world will be rendered. When set to `true`, tiles will be requested for one\n * world only, but they will be wrapped horizontally to render multiple worlds.\n * @property {number} [transition] Duration of the opacity transition for rendering.\n * To disable the opacity transition, pass `transition: 0`.\n * @property {string} [key] Optional tile key for proper cache fetching\n * @property {number} [zDirection=0] Indicate which resolution should be used\n * by a renderer if the view resolution does not match any resolution of the tile source.\n * If 0, the nearest resolution will be used. If 1, the nearest lower resolution\n * will be used. If -1, the nearest higher resolution will be used.\n */\n\n\n/**\n * @classdesc\n * Base class for sources providing images divided into a tile grid.\n *\n * @fires import(\"./Tile.js\").TileSourceEvent\n * @api\n */\nclass TileImage extends UrlTile {\n  /**\n   * @param {!Options} options Image tile options.\n   */\n  constructor(options) {\n\n    super({\n      attributions: options.attributions,\n      cacheSize: options.cacheSize,\n      opaque: options.opaque,\n      projection: options.projection,\n      state: options.state,\n      tileGrid: options.tileGrid,\n      tileLoadFunction: options.tileLoadFunction ?\n        options.tileLoadFunction : defaultTileLoadFunction,\n      tilePixelRatio: options.tilePixelRatio,\n      tileUrlFunction: options.tileUrlFunction,\n      url: options.url,\n      urls: options.urls,\n      wrapX: options.wrapX,\n      transition: options.transition,\n      key: options.key,\n      attributionsCollapsible: options.attributionsCollapsible,\n      zDirection: options.zDirection\n    });\n\n    /**\n     * @protected\n     * @type {?string}\n     */\n    this.crossOrigin =\n        options.crossOrigin !== undefined ? options.crossOrigin : null;\n\n    /**\n     * @protected\n     * @type {typeof ImageTile}\n     */\n    this.tileClass = options.tileClass !== undefined ?\n      options.tileClass : ImageTile;\n\n    /**\n     * @protected\n     * @type {!Object<string, TileCache>}\n     */\n    this.tileCacheForProjection = {};\n\n    /**\n     * @protected\n     * @type {!Object<string, import(\"../tilegrid/TileGrid.js\").default>}\n     */\n    this.tileGridForProjection = {};\n\n    /**\n     * @private\n     * @type {number|undefined}\n     */\n    this.reprojectionErrorThreshold_ = options.reprojectionErrorThreshold;\n\n    /**\n     * @private\n     * @type {boolean}\n     */\n    this.renderReprojectionEdges_ = false;\n  }\n\n  /**\n   * @inheritDoc\n   */\n  canExpireCache() {\n    if (!ENABLE_RASTER_REPROJECTION) {\n      return super.canExpireCache();\n    }\n    if (this.tileCache.canExpireCache()) {\n      return true;\n    } else {\n      for (const key in this.tileCacheForProjection) {\n        if (this.tileCacheForProjection[key].canExpireCache()) {\n          return true;\n        }\n      }\n    }\n    return false;\n  }\n\n  /**\n   * @inheritDoc\n   */\n  expireCache(projection, usedTiles) {\n    if (!ENABLE_RASTER_REPROJECTION) {\n      super.expireCache(projection, usedTiles);\n      return;\n    }\n    const usedTileCache = this.getTileCacheForProjection(projection);\n\n    this.tileCache.expireCache(this.tileCache == usedTileCache ? usedTiles : {});\n    for (const id in this.tileCacheForProjection) {\n      const tileCache = this.tileCacheForProjection[id];\n      tileCache.expireCache(tileCache == usedTileCache ? usedTiles : {});\n    }\n  }\n\n  /**\n   * @inheritDoc\n   */\n  getGutterForProjection(projection) {\n    if (ENABLE_RASTER_REPROJECTION &&\n        this.getProjection() && projection && !equivalent(this.getProjection(), projection)) {\n      return 0;\n    } else {\n      return this.getGutter();\n    }\n  }\n\n  /**\n   * @return {number} Gutter.\n   */\n  getGutter() {\n    return 0;\n  }\n\n  /**\n   * @inheritDoc\n   */\n  getOpaque(projection) {\n    if (ENABLE_RASTER_REPROJECTION &&\n        this.getProjection() && projection && !equivalent(this.getProjection(), projection)) {\n      return false;\n    } else {\n      return super.getOpaque(projection);\n    }\n  }\n\n  /**\n   * @inheritDoc\n   */\n  getTileGridForProjection(projection) {\n    if (!ENABLE_RASTER_REPROJECTION) {\n      return super.getTileGridForProjection(projection);\n    }\n    const thisProj = this.getProjection();\n    if (this.tileGrid && (!thisProj || equivalent(thisProj, projection))) {\n      return this.tileGrid;\n    } else {\n      const projKey = getUid(projection);\n      if (!(projKey in this.tileGridForProjection)) {\n        this.tileGridForProjection[projKey] = getTileGridForProjection(projection);\n      }\n      return (\n        /** @type {!import(\"../tilegrid/TileGrid.js\").default} */ (this.tileGridForProjection[projKey])\n      );\n    }\n  }\n\n  /**\n   * @inheritDoc\n   */\n  getTileCacheForProjection(projection) {\n    if (!ENABLE_RASTER_REPROJECTION) {\n      return super.getTileCacheForProjection(projection);\n    }\n    const thisProj = this.getProjection(); if (!thisProj || equivalent(thisProj, projection)) {\n      return this.tileCache;\n    } else {\n      const projKey = getUid(projection);\n      if (!(projKey in this.tileCacheForProjection)) {\n        this.tileCacheForProjection[projKey] = new TileCache(this.tileCache.highWaterMark);\n      }\n      return this.tileCacheForProjection[projKey];\n    }\n  }\n\n  /**\n   * @param {number} z Tile coordinate z.\n   * @param {number} x Tile coordinate x.\n   * @param {number} y Tile coordinate y.\n   * @param {number} pixelRatio Pixel ratio.\n   * @param {import(\"../proj/Projection.js\").default} projection Projection.\n   * @param {string} key The key set on the tile.\n   * @return {!import(\"../Tile.js\").default} Tile.\n   * @private\n   */\n  createTile_(z, x, y, pixelRatio, projection, key) {\n    const tileCoord = [z, x, y];\n    const urlTileCoord = this.getTileCoordForTileUrlFunction(\n      tileCoord, projection);\n    const tileUrl = urlTileCoord ?\n      this.tileUrlFunction(urlTileCoord, pixelRatio, projection) : undefined;\n    const tile = new this.tileClass(\n      tileCoord,\n      tileUrl !== undefined ? TileState.IDLE : TileState.EMPTY,\n      tileUrl !== undefined ? tileUrl : '',\n      this.crossOrigin,\n      this.tileLoadFunction,\n      this.tileOptions);\n    tile.key = key;\n    tile.addEventListener(EventType.CHANGE, this.handleTileChange.bind(this));\n    return tile;\n  }\n\n  /**\n   * @inheritDoc\n   */\n  getTile(z, x, y, pixelRatio, projection) {\n    const sourceProjection = /** @type {!import(\"../proj/Projection.js\").default} */ (this.getProjection());\n    if (!ENABLE_RASTER_REPROJECTION ||\n        !sourceProjection || !projection || equivalent(sourceProjection, projection)) {\n      return this.getTileInternal(z, x, y, pixelRatio, sourceProjection || projection);\n    } else {\n      const cache = this.getTileCacheForProjection(projection);\n      const tileCoord = [z, x, y];\n      let tile;\n      const tileCoordKey = getKey(tileCoord);\n      if (cache.containsKey(tileCoordKey)) {\n        tile = /** @type {!import(\"../Tile.js\").default} */ (cache.get(tileCoordKey));\n      }\n      const key = this.getKey();\n      if (tile && tile.key == key) {\n        return tile;\n      } else {\n        const sourceTileGrid = this.getTileGridForProjection(sourceProjection);\n        const targetTileGrid = this.getTileGridForProjection(projection);\n        const wrappedTileCoord =\n            this.getTileCoordForTileUrlFunction(tileCoord, projection);\n        const newTile = new ReprojTile(\n          sourceProjection, sourceTileGrid,\n          projection, targetTileGrid,\n          tileCoord, wrappedTileCoord, this.getTilePixelRatio(pixelRatio),\n          this.getGutter(),\n          function(z, x, y, pixelRatio) {\n            return this.getTileInternal(z, x, y, pixelRatio, sourceProjection);\n          }.bind(this), this.reprojectionErrorThreshold_,\n          this.renderReprojectionEdges_);\n        newTile.key = key;\n\n        if (tile) {\n          newTile.interimTile = tile;\n          newTile.refreshInterimChain();\n          cache.replace(tileCoordKey, newTile);\n        } else {\n          cache.set(tileCoordKey, newTile);\n        }\n        return newTile;\n      }\n    }\n  }\n\n  /**\n   * @param {number} z Tile coordinate z.\n   * @param {number} x Tile coordinate x.\n   * @param {number} y Tile coordinate y.\n   * @param {number} pixelRatio Pixel ratio.\n   * @param {!import(\"../proj/Projection.js\").default} projection Projection.\n   * @return {!import(\"../Tile.js\").default} Tile.\n   * @protected\n   */\n  getTileInternal(z, x, y, pixelRatio, projection) {\n    let tile = null;\n    const tileCoordKey = getKeyZXY(z, x, y);\n    const key = this.getKey();\n    if (!this.tileCache.containsKey(tileCoordKey)) {\n      tile = this.createTile_(z, x, y, pixelRatio, projection, key);\n      this.tileCache.set(tileCoordKey, tile);\n    } else {\n      tile = this.tileCache.get(tileCoordKey);\n      if (tile.key != key) {\n        // The source's params changed. If the tile has an interim tile and if we\n        // can use it then we use it. Otherwise we create a new tile.  In both\n        // cases we attempt to assign an interim tile to the new tile.\n        const interimTile = tile;\n        tile = this.createTile_(z, x, y, pixelRatio, projection, key);\n\n        //make the new tile the head of the list,\n        if (interimTile.getState() == TileState.IDLE) {\n          //the old tile hasn't begun loading yet, and is now outdated, so we can simply discard it\n          tile.interimTile = interimTile.interimTile;\n        } else {\n          tile.interimTile = interimTile;\n        }\n        tile.refreshInterimChain();\n        this.tileCache.replace(tileCoordKey, tile);\n      }\n    }\n    return tile;\n  }\n\n  /**\n   * Sets whether to render reprojection edges or not (usually for debugging).\n   * @param {boolean} render Render the edges.\n   * @api\n   */\n  setRenderReprojectionEdges(render) {\n    if (!ENABLE_RASTER_REPROJECTION ||\n        this.renderReprojectionEdges_ == render) {\n      return;\n    }\n    this.renderReprojectionEdges_ = render;\n    for (const id in this.tileCacheForProjection) {\n      this.tileCacheForProjection[id].clear();\n    }\n    this.changed();\n  }\n\n  /**\n   * Sets the tile grid to use when reprojecting the tiles to the given\n   * projection instead of the default tile grid for the projection.\n   *\n   * This can be useful when the default tile grid cannot be created\n   * (e.g. projection has no extent defined) or\n   * for optimization reasons (custom tile size, resolutions, ...).\n   *\n   * @param {import(\"../proj.js\").ProjectionLike} projection Projection.\n   * @param {import(\"../tilegrid/TileGrid.js\").default} tilegrid Tile grid to use for the projection.\n   * @api\n   */\n  setTileGridForProjection(projection, tilegrid) {\n    if (ENABLE_RASTER_REPROJECTION) {\n      const proj = getProjection(projection);\n      if (proj) {\n        const projKey = getUid(proj);\n        if (!(projKey in this.tileGridForProjection)) {\n          this.tileGridForProjection[projKey] = tilegrid;\n        }\n      }\n    }\n  }\n}\n\n\n/**\n * @param {ImageTile} imageTile Image tile.\n * @param {string} src Source.\n */\nfunction defaultTileLoadFunction(imageTile, src) {\n  /** @type {HTMLImageElement|HTMLVideoElement} */ (imageTile.getImage()).src = src;\n}\n\nexport default TileImage;\n","/**\n * @module ol/tileurlfunction\n */\nimport {assert} from './asserts.js';\nimport {modulo} from './math.js';\nimport {hash as tileCoordHash} from './tilecoord.js';\n\n\n/**\n * @param {string} template Template.\n * @param {import(\"./tilegrid/TileGrid.js\").default} tileGrid Tile grid.\n * @return {import(\"./Tile.js\").UrlFunction} Tile URL function.\n */\nexport function createFromTemplate(template, tileGrid) {\n  const zRegEx = /\\{z\\}/g;\n  const xRegEx = /\\{x\\}/g;\n  const yRegEx = /\\{y\\}/g;\n  const dashYRegEx = /\\{-y\\}/g;\n  return (\n    /**\n     * @param {import(\"./tilecoord.js\").TileCoord} tileCoord Tile Coordinate.\n     * @param {number} pixelRatio Pixel ratio.\n     * @param {import(\"./proj/Projection.js\").default} projection Projection.\n     * @return {string|undefined} Tile URL.\n     */\n    function(tileCoord, pixelRatio, projection) {\n      if (!tileCoord) {\n        return undefined;\n      } else {\n        return template.replace(zRegEx, tileCoord[0].toString())\n          .replace(xRegEx, tileCoord[1].toString())\n          .replace(yRegEx, tileCoord[2].toString())\n          .replace(dashYRegEx, function() {\n            const z = tileCoord[0];\n            const range = tileGrid.getFullTileRange(z);\n            assert(range, 55); // The {-y} placeholder requires a tile grid with extent\n            const y = range.getHeight() - tileCoord[2] - 1;\n            return y.toString();\n          });\n      }\n    }\n  );\n}\n\n\n/**\n * @param {Array<string>} templates Templates.\n * @param {import(\"./tilegrid/TileGrid.js\").default} tileGrid Tile grid.\n * @return {import(\"./Tile.js\").UrlFunction} Tile URL function.\n */\nexport function createFromTemplates(templates, tileGrid) {\n  const len = templates.length;\n  const tileUrlFunctions = new Array(len);\n  for (let i = 0; i < len; ++i) {\n    tileUrlFunctions[i] = createFromTemplate(templates[i], tileGrid);\n  }\n  return createFromTileUrlFunctions(tileUrlFunctions);\n}\n\n\n/**\n * @param {Array<import(\"./Tile.js\").UrlFunction>} tileUrlFunctions Tile URL Functions.\n * @return {import(\"./Tile.js\").UrlFunction} Tile URL function.\n */\nexport function createFromTileUrlFunctions(tileUrlFunctions) {\n  if (tileUrlFunctions.length === 1) {\n    return tileUrlFunctions[0];\n  }\n  return (\n    /**\n     * @param {import(\"./tilecoord.js\").TileCoord} tileCoord Tile Coordinate.\n     * @param {number} pixelRatio Pixel ratio.\n     * @param {import(\"./proj/Projection.js\").default} projection Projection.\n     * @return {string|undefined} Tile URL.\n     */\n    function(tileCoord, pixelRatio, projection) {\n      if (!tileCoord) {\n        return undefined;\n      } else {\n        const h = tileCoordHash(tileCoord);\n        const index = modulo(h, tileUrlFunctions.length);\n        return tileUrlFunctions[index](tileCoord, pixelRatio, projection);\n      }\n    }\n  );\n}\n\n\n/**\n * @param {import(\"./tilecoord.js\").TileCoord} tileCoord Tile coordinate.\n * @param {number} pixelRatio Pixel ratio.\n * @param {import(\"./proj/Projection.js\").default} projection Projection.\n * @return {string|undefined} Tile URL.\n */\nexport function nullTileUrlFunction(tileCoord, pixelRatio, projection) {\n  return undefined;\n}\n\n\n/**\n * @param {string} url URL.\n * @return {Array<string>} Array of urls.\n */\nexport function expandUrl(url) {\n  const urls = [];\n  let match = /\\{([a-z])-([a-z])\\}/.exec(url);\n  if (match) {\n    // char range\n    const startCharCode = match[1].charCodeAt(0);\n    const stopCharCode = match[2].charCodeAt(0);\n    let charCode;\n    for (charCode = startCharCode; charCode <= stopCharCode; ++charCode) {\n      urls.push(url.replace(match[0], String.fromCharCode(charCode)));\n    }\n    return urls;\n  }\n  match = match = /\\{(\\d+)-(\\d+)\\}/.exec(url);\n  if (match) {\n    // number range\n    const stop = parseInt(match[2], 10);\n    for (let i = parseInt(match[1], 10); i <= stop; i++) {\n      urls.push(url.replace(match[0], i.toString()));\n    }\n    return urls;\n  }\n  urls.push(url);\n  return urls;\n}\n","/**\n * @module ol/geom/flat/deflate\n */\n\n\n/**\n * @param {Array<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {import(\"../../coordinate.js\").Coordinate} coordinate Coordinate.\n * @param {number} stride Stride.\n * @return {number} offset Offset.\n */\nexport function deflateCoordinate(flatCoordinates, offset, coordinate, stride) {\n  for (let i = 0, ii = coordinate.length; i < ii; ++i) {\n    flatCoordinates[offset++] = coordinate[i];\n  }\n  return offset;\n}\n\n\n/**\n * @param {Array<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {Array<import(\"../../coordinate.js\").Coordinate>} coordinates Coordinates.\n * @param {number} stride Stride.\n * @return {number} offset Offset.\n */\nexport function deflateCoordinates(flatCoordinates, offset, coordinates, stride) {\n  for (let i = 0, ii = coordinates.length; i < ii; ++i) {\n    const coordinate = coordinates[i];\n    for (let j = 0; j < stride; ++j) {\n      flatCoordinates[offset++] = coordinate[j];\n    }\n  }\n  return offset;\n}\n\n\n/**\n * @param {Array<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {Array<Array<import(\"../../coordinate.js\").Coordinate>>} coordinatess Coordinatess.\n * @param {number} stride Stride.\n * @param {Array<number>=} opt_ends Ends.\n * @return {Array<number>} Ends.\n */\nexport function deflateCoordinatesArray(flatCoordinates, offset, coordinatess, stride, opt_ends) {\n  const ends = opt_ends ? opt_ends : [];\n  let i = 0;\n  for (let j = 0, jj = coordinatess.length; j < jj; ++j) {\n    const end = deflateCoordinates(\n      flatCoordinates, offset, coordinatess[j], stride);\n    ends[i++] = end;\n    offset = end;\n  }\n  ends.length = i;\n  return ends;\n}\n\n\n/**\n * @param {Array<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {Array<Array<Array<import(\"../../coordinate.js\").Coordinate>>>} coordinatesss Coordinatesss.\n * @param {number} stride Stride.\n * @param {Array<Array<number>>=} opt_endss Endss.\n * @return {Array<Array<number>>} Endss.\n */\nexport function deflateMultiCoordinatesArray(flatCoordinates, offset, coordinatesss, stride, opt_endss) {\n  const endss = opt_endss ? opt_endss : [];\n  let i = 0;\n  for (let j = 0, jj = coordinatesss.length; j < jj; ++j) {\n    const ends = deflateCoordinatesArray(\n      flatCoordinates, offset, coordinatesss[j], stride, endss[i]);\n    endss[i++] = ends;\n    offset = ends[ends.length - 1];\n  }\n  endss.length = i;\n  return endss;\n}\n","/**\n * @module ol/layer/Layer\n */\nimport {listen, unlistenByKey} from '../events.js';\nimport EventType from '../events/EventType.js';\nimport {getChangeEventType} from '../Object.js';\nimport BaseLayer from './Base.js';\nimport LayerProperty from './Property.js';\nimport {assign} from '../obj.js';\nimport RenderEventType from '../render/EventType.js';\nimport SourceState from '../source/State.js';\n\n/**\n * @typedef {function(import(\"../PluggableMap.js\").FrameState):HTMLElement} RenderFunction\n */\n\n\n/**\n * @typedef {Object} Options\n * @property {string} [className='ol-layer'] A CSS class name to set to the layer element.\n * @property {number} [opacity=1] Opacity (0, 1).\n * @property {boolean} [visible=true] Visibility.\n * @property {import(\"../extent.js\").Extent} [extent] The bounding extent for layer rendering.  The layer will not be\n * rendered outside of this extent.\n * @property {number} [zIndex] The z-index for layer rendering.  At rendering time, the layers\n * will be ordered, first by Z-index and then by position. When `undefined`, a `zIndex` of 0 is assumed\n * for layers that are added to the map's `layers` collection, or `Infinity` when the layer's `setMap()`\n * method was used.\n * @property {number} [minResolution] The minimum resolution (inclusive) at which this layer will be\n * visible.\n * @property {number} [maxResolution] The maximum resolution (exclusive) below which this layer will\n * be visible.\n * @property {import(\"../source/Source.js\").default} [source] Source for this layer.  If not provided to the constructor,\n * the source can be set by calling {@link module:ol/layer/Layer#setSource layer.setSource(source)} after\n * construction.\n * @property {import(\"../PluggableMap.js\").default} [map] Map.\n * @property {RenderFunction} [render] Render function. Takes the frame state as input and is expected to return an\n * HTML element. Will overwrite the default rendering for the layer.\n */\n\n\n/**\n * @typedef {Object} State\n * @property {import(\"./Base.js\").default} layer\n * @property {number} opacity Opacity, the value is rounded to two digits to appear after the decimal point.\n * @property {SourceState} sourceState\n * @property {boolean} visible\n * @property {boolean} managed\n * @property {boolean} hasOverlay Set by the renderer when an overlay for points and text is used.\n * @property {import(\"../extent.js\").Extent} [extent]\n * @property {number} zIndex\n * @property {number} maxResolution\n * @property {number} minResolution\n * @property {number} minZoom\n * @property {number} maxZoom\n */\n\n/**\n * @classdesc\n * Base class from which all layer types are derived. This should only be instantiated\n * in the case where a custom layer is be added to the map with a custom `render` function.\n * Such a function can be specified in the `options` object, and is expected to return an HTML element.\n *\n * A visual representation of raster or vector map data.\n * Layers group together those properties that pertain to how the data is to be\n * displayed, irrespective of the source of that data.\n *\n * Layers are usually added to a map with {@link module:ol/Map#addLayer}. Components\n * like {@link module:ol/interaction/Select~Select} use unmanaged layers\n * internally. These unmanaged layers are associated with the map using\n * {@link module:ol/layer/Layer~Layer#setMap} instead.\n *\n * A generic `change` event is fired when the state of the source changes.\n *\n * Please note that for performance reasons several layers might get rendered to\n * the same HTML element, which will cause {@link module:ol/Map~Map#forEachLayerAtPixel} to\n * give false positives. To avoid this, apply different `className` properties to the\n * layers at creation time.\n *\n * @fires import(\"../render/Event.js\").RenderEvent#prerender\n * @fires import(\"../render/Event.js\").RenderEvent#postrender\n *\n * @template {import(\"../source/Source.js\").default} SourceType\n * @api\n */\nclass Layer extends BaseLayer {\n  /**\n   * @param {Options} options Layer options.\n   */\n  constructor(options) {\n\n    const baseOptions = assign({}, options);\n    delete baseOptions.source;\n\n    super(baseOptions);\n\n    /**\n     * @private\n     * @type {?import(\"../events.js\").EventsKey}\n     */\n    this.mapPrecomposeKey_ = null;\n\n    /**\n     * @private\n     * @type {?import(\"../events.js\").EventsKey}\n     */\n    this.mapRenderKey_ = null;\n\n    /**\n     * @private\n     * @type {?import(\"../events.js\").EventsKey}\n     */\n    this.sourceChangeKey_ = null;\n\n    /**\n     * @private\n     * @type {import(\"../renderer/Layer.js\").default}\n     */\n    this.renderer_ = null;\n\n    // Overwrite default render method with a custom one\n    if (options.render) {\n      this.render = options.render;\n    }\n\n    if (options.map) {\n      this.setMap(options.map);\n    }\n\n    this.addEventListener(getChangeEventType(LayerProperty.SOURCE), this.handleSourcePropertyChange_);\n\n    const source = options.source ? /** @type {SourceType} */ (options.source) : null;\n    this.setSource(source);\n  }\n\n  /**\n   * @inheritDoc\n   */\n  getLayersArray(opt_array) {\n    const array = opt_array ? opt_array : [];\n    array.push(this);\n    return array;\n  }\n\n  /**\n   * @inheritDoc\n   */\n  getLayerStatesArray(opt_states) {\n    const states = opt_states ? opt_states : [];\n    states.push(this.getLayerState());\n    return states;\n  }\n\n  /**\n   * Get the layer source.\n   * @return {SourceType} The layer source (or `null` if not yet set).\n   * @observable\n   * @api\n   */\n  getSource() {\n    return /** @type {SourceType} */ (this.get(LayerProperty.SOURCE)) || null;\n  }\n\n  /**\n    * @inheritDoc\n    */\n  getSourceState() {\n    const source = this.getSource();\n    return !source ? SourceState.UNDEFINED : source.getState();\n  }\n\n  /**\n   * @private\n   */\n  handleSourceChange_() {\n    this.changed();\n  }\n\n  /**\n   * @private\n   */\n  handleSourcePropertyChange_() {\n    if (this.sourceChangeKey_) {\n      unlistenByKey(this.sourceChangeKey_);\n      this.sourceChangeKey_ = null;\n    }\n    const source = this.getSource();\n    if (source) {\n      this.sourceChangeKey_ = listen(source,\n        EventType.CHANGE, this.handleSourceChange_, this);\n    }\n    this.changed();\n  }\n\n  /**\n   * In charge to manage the rendering of the layer. One layer type is\n   * bounded with one layer renderer.\n   * @param {?import(\"../PluggableMap.js\").FrameState} frameState Frame state.\n   * @param {HTMLElement} target Target which the renderer may (but need not) use\n   * for rendering its content.\n   * @return {HTMLElement} The rendered element.\n   */\n  render(frameState, target) {\n    const layerRenderer = this.getRenderer();\n\n    if (layerRenderer.prepareFrame(frameState)) {\n      return layerRenderer.renderFrame(frameState, target);\n    }\n  }\n\n  /**\n   * Sets the layer to be rendered on top of other layers on a map. The map will\n   * not manage this layer in its layers collection, and the callback in\n   * {@link module:ol/Map#forEachLayerAtPixel} will receive `null` as layer. This\n   * is useful for temporary layers. To remove an unmanaged layer from the map,\n   * use `#setMap(null)`.\n   *\n   * To add the layer to a map and have it managed by the map, use\n   * {@link module:ol/Map#addLayer} instead.\n   * @param {import(\"../PluggableMap.js\").default} map Map.\n   * @api\n   */\n  setMap(map) {\n    if (this.mapPrecomposeKey_) {\n      unlistenByKey(this.mapPrecomposeKey_);\n      this.mapPrecomposeKey_ = null;\n    }\n    if (!map) {\n      this.changed();\n    }\n    if (this.mapRenderKey_) {\n      unlistenByKey(this.mapRenderKey_);\n      this.mapRenderKey_ = null;\n    }\n    if (map) {\n      this.mapPrecomposeKey_ = listen(map, RenderEventType.PRECOMPOSE, function(evt) {\n        const renderEvent = /** @type {import(\"../render/Event.js\").default} */ (evt);\n        renderEvent.frameState.layerStatesArray.push(this.getLayerState(false));\n      }, this);\n      this.mapRenderKey_ = listen(this, EventType.CHANGE, map.render, map);\n      this.changed();\n    }\n  }\n\n  /**\n   * Set the layer source.\n   * @param {SourceType} source The layer source.\n   * @observable\n   * @api\n   */\n  setSource(source) {\n    this.set(LayerProperty.SOURCE, source);\n  }\n\n  /**\n   * Get the renderer for this layer.\n   * @return {import(\"../renderer/Layer.js\").default} The layer renderer.\n   */\n  getRenderer() {\n    if (!this.renderer_) {\n      this.renderer_ = this.createRenderer();\n    }\n    return this.renderer_;\n  }\n\n  /**\n   * @return {boolean} The layer has a renderer.\n   */\n  hasRenderer() {\n    return !!this.renderer_;\n  }\n\n  /**\n   * Create a renderer for this layer.\n   * @return {import(\"../renderer/Layer.js\").default} A layer renderer.\n   * @protected\n   */\n  createRenderer() {\n    return null;\n  }\n\n}\n\n\n/**\n * Return `true` if the layer is visible and if the provided view state\n * has resolution and zoom levels that are in range of the layer's min/max.\n * @param {State} layerState Layer state.\n * @param {import(\"../View.js\").State} viewState View state.\n * @return {boolean} The layer is visible at the given view state.\n */\nexport function inView(layerState, viewState) {\n  if (!layerState.visible) {\n    return false;\n  }\n  const resolution = viewState.resolution;\n  if (resolution < layerState.minResolution || resolution >= layerState.maxResolution) {\n    return false;\n  }\n  const zoom = viewState.zoom;\n  return zoom > layerState.minZoom && zoom <= layerState.maxZoom;\n}\n\nexport default Layer;\n","/**\n * @module ol/geom/flat/inflate\n */\n\n\n/**\n * @param {Array<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {number} end End.\n * @param {number} stride Stride.\n * @param {Array<import(\"../../coordinate.js\").Coordinate>=} opt_coordinates Coordinates.\n * @return {Array<import(\"../../coordinate.js\").Coordinate>} Coordinates.\n */\nexport function inflateCoordinates(flatCoordinates, offset, end, stride, opt_coordinates) {\n  const coordinates = opt_coordinates !== undefined ? opt_coordinates : [];\n  let i = 0;\n  for (let j = offset; j < end; j += stride) {\n    coordinates[i++] = flatCoordinates.slice(j, j + stride);\n  }\n  coordinates.length = i;\n  return coordinates;\n}\n\n\n/**\n * @param {Array<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {Array<number>} ends Ends.\n * @param {number} stride Stride.\n * @param {Array<Array<import(\"../../coordinate.js\").Coordinate>>=} opt_coordinatess Coordinatess.\n * @return {Array<Array<import(\"../../coordinate.js\").Coordinate>>} Coordinatess.\n */\nexport function inflateCoordinatesArray(flatCoordinates, offset, ends, stride, opt_coordinatess) {\n  const coordinatess = opt_coordinatess !== undefined ? opt_coordinatess : [];\n  let i = 0;\n  for (let j = 0, jj = ends.length; j < jj; ++j) {\n    const end = ends[j];\n    coordinatess[i++] = inflateCoordinates(\n      flatCoordinates, offset, end, stride, coordinatess[i]);\n    offset = end;\n  }\n  coordinatess.length = i;\n  return coordinatess;\n}\n\n\n/**\n * @param {Array<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {Array<Array<number>>} endss Endss.\n * @param {number} stride Stride.\n * @param {Array<Array<Array<import(\"../../coordinate.js\").Coordinate>>>=} opt_coordinatesss\n *     Coordinatesss.\n * @return {Array<Array<Array<import(\"../../coordinate.js\").Coordinate>>>} Coordinatesss.\n */\nexport function inflateMultiCoordinatesArray(flatCoordinates, offset, endss, stride, opt_coordinatesss) {\n  const coordinatesss = opt_coordinatesss !== undefined ? opt_coordinatesss : [];\n  let i = 0;\n  for (let j = 0, jj = endss.length; j < jj; ++j) {\n    const ends = endss[j];\n    coordinatesss[i++] = inflateCoordinatesArray(\n      flatCoordinates, offset, ends, stride, coordinatesss[i]);\n    offset = ends[ends.length - 1];\n  }\n  coordinatesss.length = i;\n  return coordinatesss;\n}\n","/**\n * @module ol/tilegrid/TileGrid\n */\nimport {DEFAULT_TILE_SIZE} from './common.js';\nimport {assert} from '../asserts.js';\nimport TileRange, {createOrUpdate as createOrUpdateTileRange} from '../TileRange.js';\nimport {isSorted, linearFindNearest} from '../array.js';\nimport {createOrUpdate, getTopLeft} from '../extent.js';\nimport {clamp} from '../math.js';\nimport {toSize} from '../size.js';\nimport {createOrUpdate as createOrUpdateTileCoord} from '../tilecoord.js';\n\n\n/**\n * @private\n * @type {import(\"../tilecoord.js\").TileCoord}\n */\nconst tmpTileCoord = [0, 0, 0];\n\n\n/**\n * @typedef {Object} Options\n * @property {import(\"../extent.js\").Extent} [extent] Extent for the tile grid. No tiles outside this\n * extent will be requested by {@link module:ol/source/Tile} sources. When no `origin` or\n * `origins` are configured, the `origin` will be set to the top-left corner of the extent.\n * @property {number} [minZoom=0] Minimum zoom.\n * @property {import(\"../coordinate.js\").Coordinate} [origin] The tile grid origin, i.e. where the `x`\n * and `y` axes meet (`[z, 0, 0]`). Tile coordinates increase left to right and upwards. If not\n * specified, `extent` or `origins` must be provided.\n * @property {Array<import(\"../coordinate.js\").Coordinate>} [origins] Tile grid origins, i.e. where\n * the `x` and `y` axes meet (`[z, 0, 0]`), for each zoom level. If given, the array length\n * should match the length of the `resolutions` array, i.e. each resolution can have a different\n * origin. Tile coordinates increase left to right and upwards. If not specified, `extent` or\n * `origin` must be provided.\n * @property {!Array<number>} resolutions Resolutions. The array index of each resolution needs\n * to match the zoom level. This means that even if a `minZoom` is configured, the resolutions\n * array will have a length of `maxZoom + 1`.\n * @property {Array<import(\"../size.js\").Size>} [sizes] Sizes.\n * @property {number|import(\"../size.js\").Size} [tileSize] Tile size.\n * Default is `[256, 256]`.\n * @property {Array<import(\"../size.js\").Size>} [tileSizes] Tile sizes. If given, the array length\n * should match the length of the `resolutions` array, i.e. each resolution can have a different\n * tile size.\n */\n\n\n/**\n * @classdesc\n * Base class for setting the grid pattern for sources accessing tiled-image\n * servers.\n * @api\n */\nclass TileGrid {\n  /**\n   * @param {Options} options Tile grid options.\n   */\n  constructor(options) {\n\n    /**\n     * @protected\n     * @type {number}\n     */\n    this.minZoom = options.minZoom !== undefined ? options.minZoom : 0;\n\n    /**\n     * @private\n     * @type {!Array<number>}\n     */\n    this.resolutions_ = options.resolutions;\n    assert(isSorted(this.resolutions_, function(a, b) {\n      return b - a;\n    }, true), 17); // `resolutions` must be sorted in descending order\n\n\n    // check if we've got a consistent zoom factor and origin\n    let zoomFactor;\n    if (!options.origins) {\n      for (let i = 0, ii = this.resolutions_.length - 1; i < ii; ++i) {\n        if (!zoomFactor) {\n          zoomFactor = this.resolutions_[i] / this.resolutions_[i + 1];\n        } else {\n          if (this.resolutions_[i] / this.resolutions_[i + 1] !== zoomFactor) {\n            zoomFactor = undefined;\n            break;\n          }\n        }\n      }\n    }\n\n\n    /**\n     * @private\n     * @type {number|undefined}\n     */\n    this.zoomFactor_ = zoomFactor;\n\n\n    /**\n     * @protected\n     * @type {number}\n     */\n    this.maxZoom = this.resolutions_.length - 1;\n\n    /**\n     * @private\n     * @type {import(\"../coordinate.js\").Coordinate}\n     */\n    this.origin_ = options.origin !== undefined ? options.origin : null;\n\n    /**\n     * @private\n     * @type {Array<import(\"../coordinate.js\").Coordinate>}\n     */\n    this.origins_ = null;\n    if (options.origins !== undefined) {\n      this.origins_ = options.origins;\n      assert(this.origins_.length == this.resolutions_.length,\n        20); // Number of `origins` and `resolutions` must be equal\n    }\n\n    const extent = options.extent;\n\n    if (extent !== undefined &&\n        !this.origin_ && !this.origins_) {\n      this.origin_ = getTopLeft(extent);\n    }\n\n    assert(\n      (!this.origin_ && this.origins_) || (this.origin_ && !this.origins_),\n      18); // Either `origin` or `origins` must be configured, never both\n\n    /**\n     * @private\n     * @type {Array<number|import(\"../size.js\").Size>}\n     */\n    this.tileSizes_ = null;\n    if (options.tileSizes !== undefined) {\n      this.tileSizes_ = options.tileSizes;\n      assert(this.tileSizes_.length == this.resolutions_.length,\n        19); // Number of `tileSizes` and `resolutions` must be equal\n    }\n\n    /**\n     * @private\n     * @type {number|import(\"../size.js\").Size}\n     */\n    this.tileSize_ = options.tileSize !== undefined ?\n      options.tileSize :\n      !this.tileSizes_ ? DEFAULT_TILE_SIZE : null;\n    assert(\n      (!this.tileSize_ && this.tileSizes_) ||\n        (this.tileSize_ && !this.tileSizes_),\n      22); // Either `tileSize` or `tileSizes` must be configured, never both\n\n    /**\n     * @private\n     * @type {import(\"../extent.js\").Extent}\n     */\n    this.extent_ = extent !== undefined ? extent : null;\n\n\n    /**\n     * @private\n     * @type {Array<import(\"../TileRange.js\").default>}\n     */\n    this.fullTileRanges_ = null;\n\n    /**\n     * @private\n     * @type {import(\"../size.js\").Size}\n     */\n    this.tmpSize_ = [0, 0];\n\n    if (options.sizes !== undefined) {\n      this.fullTileRanges_ = options.sizes.map(function(size, z) {\n        const tileRange = new TileRange(\n          Math.min(0, size[0]), Math.max(size[0] - 1, -1),\n          Math.min(0, size[1]), Math.max(size[1] - 1, -1));\n        return tileRange;\n      }, this);\n    } else if (extent) {\n      this.calculateTileRanges_(extent);\n    }\n\n  }\n\n  /**\n   * Call a function with each tile coordinate for a given extent and zoom level.\n   *\n   * @param {import(\"../extent.js\").Extent} extent Extent.\n   * @param {number} zoom Integer zoom level.\n   * @param {function(import(\"../tilecoord.js\").TileCoord): void} callback Function called with each tile coordinate.\n   * @api\n   */\n  forEachTileCoord(extent, zoom, callback) {\n    const tileRange = this.getTileRangeForExtentAndZ(extent, zoom);\n    for (let i = tileRange.minX, ii = tileRange.maxX; i <= ii; ++i) {\n      for (let j = tileRange.minY, jj = tileRange.maxY; j <= jj; ++j) {\n        callback([zoom, i, j]);\n      }\n    }\n  }\n\n  /**\n   * @param {import(\"../tilecoord.js\").TileCoord} tileCoord Tile coordinate.\n   * @param {function(number, import(\"../TileRange.js\").default): boolean} callback Callback.\n   * @param {import(\"../TileRange.js\").default=} opt_tileRange Temporary import(\"../TileRange.js\").default object.\n   * @param {import(\"../extent.js\").Extent=} opt_extent Temporary import(\"../extent.js\").Extent object.\n   * @return {boolean} Callback succeeded.\n   */\n  forEachTileCoordParentTileRange(tileCoord, callback, opt_tileRange, opt_extent) {\n    let tileRange, x, y;\n    let tileCoordExtent = null;\n    let z = tileCoord[0] - 1;\n    if (this.zoomFactor_ === 2) {\n      x = tileCoord[1];\n      y = tileCoord[2];\n    } else {\n      tileCoordExtent = this.getTileCoordExtent(tileCoord, opt_extent);\n    }\n    while (z >= this.minZoom) {\n      if (this.zoomFactor_ === 2) {\n        x = Math.floor(x / 2);\n        y = Math.floor(y / 2);\n        tileRange = createOrUpdateTileRange(x, x, y, y, opt_tileRange);\n      } else {\n        tileRange = this.getTileRangeForExtentAndZ(tileCoordExtent, z, opt_tileRange);\n      }\n      if (callback(z, tileRange)) {\n        return true;\n      }\n      --z;\n    }\n    return false;\n  }\n\n  /**\n   * Get the extent for this tile grid, if it was configured.\n   * @return {import(\"../extent.js\").Extent} Extent.\n   * @api\n   */\n  getExtent() {\n    return this.extent_;\n  }\n\n  /**\n   * Get the maximum zoom level for the grid.\n   * @return {number} Max zoom.\n   * @api\n   */\n  getMaxZoom() {\n    return this.maxZoom;\n  }\n\n  /**\n   * Get the minimum zoom level for the grid.\n   * @return {number} Min zoom.\n   * @api\n   */\n  getMinZoom() {\n    return this.minZoom;\n  }\n\n  /**\n   * Get the origin for the grid at the given zoom level.\n   * @param {number} z Integer zoom level.\n   * @return {import(\"../coordinate.js\").Coordinate} Origin.\n   * @api\n   */\n  getOrigin(z) {\n    if (this.origin_) {\n      return this.origin_;\n    } else {\n      return this.origins_[z];\n    }\n  }\n\n  /**\n   * Get the resolution for the given zoom level.\n   * @param {number} z Integer zoom level.\n   * @return {number} Resolution.\n   * @api\n   */\n  getResolution(z) {\n    return this.resolutions_[z];\n  }\n\n  /**\n   * Get the list of resolutions for the tile grid.\n   * @return {Array<number>} Resolutions.\n   * @api\n   */\n  getResolutions() {\n    return this.resolutions_;\n  }\n\n  /**\n   * @param {import(\"../tilecoord.js\").TileCoord} tileCoord Tile coordinate.\n   * @param {import(\"../TileRange.js\").default=} opt_tileRange Temporary import(\"../TileRange.js\").default object.\n   * @param {import(\"../extent.js\").Extent=} opt_extent Temporary import(\"../extent.js\").Extent object.\n   * @return {import(\"../TileRange.js\").default} Tile range.\n   */\n  getTileCoordChildTileRange(tileCoord, opt_tileRange, opt_extent) {\n    if (tileCoord[0] < this.maxZoom) {\n      if (this.zoomFactor_ === 2) {\n        const minX = tileCoord[1] * 2;\n        const minY = tileCoord[2] * 2;\n        return createOrUpdateTileRange(minX, minX + 1, minY, minY + 1, opt_tileRange);\n      }\n      const tileCoordExtent = this.getTileCoordExtent(tileCoord, opt_extent);\n      return this.getTileRangeForExtentAndZ(\n        tileCoordExtent, tileCoord[0] + 1, opt_tileRange);\n    }\n    return null;\n  }\n\n  /**\n   * Get the extent for a tile range.\n   * @param {number} z Integer zoom level.\n   * @param {import(\"../TileRange.js\").default} tileRange Tile range.\n   * @param {import(\"../extent.js\").Extent=} opt_extent Temporary import(\"../extent.js\").Extent object.\n   * @return {import(\"../extent.js\").Extent} Extent.\n   */\n  getTileRangeExtent(z, tileRange, opt_extent) {\n    const origin = this.getOrigin(z);\n    const resolution = this.getResolution(z);\n    const tileSize = toSize(this.getTileSize(z), this.tmpSize_);\n    const minX = origin[0] + tileRange.minX * tileSize[0] * resolution;\n    const maxX = origin[0] + (tileRange.maxX + 1) * tileSize[0] * resolution;\n    const minY = origin[1] + tileRange.minY * tileSize[1] * resolution;\n    const maxY = origin[1] + (tileRange.maxY + 1) * tileSize[1] * resolution;\n    return createOrUpdate(minX, minY, maxX, maxY, opt_extent);\n  }\n\n  /**\n   * Get a tile range for the given extent and integer zoom level.\n   * @param {import(\"../extent.js\").Extent} extent Extent.\n   * @param {number} z Integer zoom level.\n   * @param {import(\"../TileRange.js\").default=} opt_tileRange Temporary tile range object.\n   * @return {import(\"../TileRange.js\").default} Tile range.\n   */\n  getTileRangeForExtentAndZ(extent, z, opt_tileRange) {\n    const tileCoord = tmpTileCoord;\n    this.getTileCoordForXYAndZ_(extent[0], extent[3], z, false, tileCoord);\n    const minX = tileCoord[1];\n    const minY = tileCoord[2];\n    this.getTileCoordForXYAndZ_(extent[2], extent[1], z, true, tileCoord);\n    return createOrUpdateTileRange(minX, tileCoord[1], minY, tileCoord[2], opt_tileRange);\n  }\n\n  /**\n   * @param {import(\"../tilecoord.js\").TileCoord} tileCoord Tile coordinate.\n   * @return {import(\"../coordinate.js\").Coordinate} Tile center.\n   */\n  getTileCoordCenter(tileCoord) {\n    const origin = this.getOrigin(tileCoord[0]);\n    const resolution = this.getResolution(tileCoord[0]);\n    const tileSize = toSize(this.getTileSize(tileCoord[0]), this.tmpSize_);\n    return [\n      origin[0] + (tileCoord[1] + 0.5) * tileSize[0] * resolution,\n      origin[1] - (tileCoord[2] + 0.5) * tileSize[1] * resolution\n    ];\n  }\n\n  /**\n   * Get the extent of a tile coordinate.\n   *\n   * @param {import(\"../tilecoord.js\").TileCoord} tileCoord Tile coordinate.\n   * @param {import(\"../extent.js\").Extent=} opt_extent Temporary extent object.\n   * @return {import(\"../extent.js\").Extent} Extent.\n   * @api\n   */\n  getTileCoordExtent(tileCoord, opt_extent) {\n    const origin = this.getOrigin(tileCoord[0]);\n    const resolution = this.getResolution(tileCoord[0]);\n    const tileSize = toSize(this.getTileSize(tileCoord[0]), this.tmpSize_);\n    const minX = origin[0] + tileCoord[1] * tileSize[0] * resolution;\n    const minY = origin[1] - (tileCoord[2] + 1) * tileSize[1] * resolution;\n    const maxX = minX + tileSize[0] * resolution;\n    const maxY = minY + tileSize[1] * resolution;\n    return createOrUpdate(minX, minY, maxX, maxY, opt_extent);\n  }\n\n  /**\n   * Get the tile coordinate for the given map coordinate and resolution.  This\n   * method considers that coordinates that intersect tile boundaries should be\n   * assigned the higher tile coordinate.\n   *\n   * @param {import(\"../coordinate.js\").Coordinate} coordinate Coordinate.\n   * @param {number} resolution Resolution.\n   * @param {import(\"../tilecoord.js\").TileCoord=} opt_tileCoord Destination import(\"../tilecoord.js\").TileCoord object.\n   * @return {import(\"../tilecoord.js\").TileCoord} Tile coordinate.\n   * @api\n   */\n  getTileCoordForCoordAndResolution(coordinate, resolution, opt_tileCoord) {\n    return this.getTileCoordForXYAndResolution_(\n      coordinate[0], coordinate[1], resolution, false, opt_tileCoord);\n  }\n\n  /**\n   * Note that this method should not be called for resolutions that correspond\n   * to an integer zoom level.  Instead call the `getTileCoordForXYAndZ_` method.\n   * @param {number} x X.\n   * @param {number} y Y.\n   * @param {number} resolution Resolution (for a non-integer zoom level).\n   * @param {boolean} reverseIntersectionPolicy Instead of letting edge\n   *     intersections go to the higher tile coordinate, let edge intersections\n   *     go to the lower tile coordinate.\n   * @param {import(\"../tilecoord.js\").TileCoord=} opt_tileCoord Temporary import(\"../tilecoord.js\").TileCoord object.\n   * @return {import(\"../tilecoord.js\").TileCoord} Tile coordinate.\n   * @private\n   */\n  getTileCoordForXYAndResolution_(x, y, resolution, reverseIntersectionPolicy, opt_tileCoord) {\n    const z = this.getZForResolution(resolution);\n    const scale = resolution / this.getResolution(z);\n    const origin = this.getOrigin(z);\n    const tileSize = toSize(this.getTileSize(z), this.tmpSize_);\n\n    const adjustX = reverseIntersectionPolicy ? 0.5 : 0;\n    const adjustY = reverseIntersectionPolicy ? 0.5 : 0;\n    const xFromOrigin = Math.floor((x - origin[0]) / resolution + adjustX);\n    const yFromOrigin = Math.floor((origin[1] - y) / resolution + adjustY);\n    let tileCoordX = scale * xFromOrigin / tileSize[0];\n    let tileCoordY = scale * yFromOrigin / tileSize[1];\n\n    if (reverseIntersectionPolicy) {\n      tileCoordX = Math.ceil(tileCoordX) - 1;\n      tileCoordY = Math.ceil(tileCoordY) - 1;\n    } else {\n      tileCoordX = Math.floor(tileCoordX);\n      tileCoordY = Math.floor(tileCoordY);\n    }\n\n    return createOrUpdateTileCoord(z, tileCoordX, tileCoordY, opt_tileCoord);\n  }\n\n  /**\n   * Although there is repetition between this method and `getTileCoordForXYAndResolution_`,\n   * they should have separate implementations.  This method is for integer zoom\n   * levels.  The other method should only be called for resolutions corresponding\n   * to non-integer zoom levels.\n   * @param {number} x Map x coordinate.\n   * @param {number} y Map y coordinate.\n   * @param {number} z Integer zoom level.\n   * @param {boolean} reverseIntersectionPolicy Instead of letting edge\n   *     intersections go to the higher tile coordinate, let edge intersections\n   *     go to the lower tile coordinate.\n   * @param {import(\"../tilecoord.js\").TileCoord=} opt_tileCoord Temporary import(\"../tilecoord.js\").TileCoord object.\n   * @return {import(\"../tilecoord.js\").TileCoord} Tile coordinate.\n   * @private\n   */\n  getTileCoordForXYAndZ_(x, y, z, reverseIntersectionPolicy, opt_tileCoord) {\n    const origin = this.getOrigin(z);\n    const resolution = this.getResolution(z);\n    const tileSize = toSize(this.getTileSize(z), this.tmpSize_);\n\n    const adjustX = reverseIntersectionPolicy ? 0.5 : 0;\n    const adjustY = reverseIntersectionPolicy ? 0.5 : 0;\n    const xFromOrigin = Math.floor((x - origin[0]) / resolution + adjustX);\n    const yFromOrigin = Math.floor((origin[1] - y) / resolution + adjustY);\n    let tileCoordX = xFromOrigin / tileSize[0];\n    let tileCoordY = yFromOrigin / tileSize[1];\n\n    if (reverseIntersectionPolicy) {\n      tileCoordX = Math.ceil(tileCoordX) - 1;\n      tileCoordY = Math.ceil(tileCoordY) - 1;\n    } else {\n      tileCoordX = Math.floor(tileCoordX);\n      tileCoordY = Math.floor(tileCoordY);\n    }\n\n    return createOrUpdateTileCoord(z, tileCoordX, tileCoordY, opt_tileCoord);\n  }\n\n  /**\n   * Get a tile coordinate given a map coordinate and zoom level.\n   * @param {import(\"../coordinate.js\").Coordinate} coordinate Coordinate.\n   * @param {number} z Zoom level.\n   * @param {import(\"../tilecoord.js\").TileCoord=} opt_tileCoord Destination import(\"../tilecoord.js\").TileCoord object.\n   * @return {import(\"../tilecoord.js\").TileCoord} Tile coordinate.\n   * @api\n   */\n  getTileCoordForCoordAndZ(coordinate, z, opt_tileCoord) {\n    return this.getTileCoordForXYAndZ_(\n      coordinate[0], coordinate[1], z, false, opt_tileCoord);\n  }\n\n  /**\n   * @param {import(\"../tilecoord.js\").TileCoord} tileCoord Tile coordinate.\n   * @return {number} Tile resolution.\n   */\n  getTileCoordResolution(tileCoord) {\n    return this.resolutions_[tileCoord[0]];\n  }\n\n  /**\n   * Get the tile size for a zoom level. The type of the return value matches the\n   * `tileSize` or `tileSizes` that the tile grid was configured with. To always\n   * get an `import(\"../size.js\").Size`, run the result through `import(\"../size.js\").Size.toSize()`.\n   * @param {number} z Z.\n   * @return {number|import(\"../size.js\").Size} Tile size.\n   * @api\n   */\n  getTileSize(z) {\n    if (this.tileSize_) {\n      return this.tileSize_;\n    } else {\n      return this.tileSizes_[z];\n    }\n  }\n\n  /**\n   * @param {number} z Zoom level.\n   * @return {import(\"../TileRange.js\").default} Extent tile range for the specified zoom level.\n   */\n  getFullTileRange(z) {\n    if (!this.fullTileRanges_) {\n      return null;\n    } else {\n      return this.fullTileRanges_[z];\n    }\n  }\n\n  /**\n   * @param {number} resolution Resolution.\n   * @param {number=} opt_direction If 0, the nearest resolution will be used.\n   *     If 1, the nearest lower resolution will be used. If -1, the nearest\n   *     higher resolution will be used. Default is 0.\n   * @return {number} Z.\n   * @api\n   */\n  getZForResolution(resolution, opt_direction) {\n    const z = linearFindNearest(this.resolutions_, resolution, opt_direction || 0);\n    return clamp(z, this.minZoom, this.maxZoom);\n  }\n\n  /**\n   * @param {!import(\"../extent.js\").Extent} extent Extent for this tile grid.\n   * @private\n   */\n  calculateTileRanges_(extent) {\n    const length = this.resolutions_.length;\n    const fullTileRanges = new Array(length);\n    for (let z = this.minZoom; z < length; ++z) {\n      fullTileRanges[z] = this.getTileRangeForExtentAndZ(extent, z);\n    }\n    this.fullTileRanges_ = fullTileRanges;\n  }\n}\n\n\nexport default TileGrid;\n","/**\n * @module ol/reproj/common\n */\n\n/**\n * Default maximum allowed threshold  (in pixels) for reprojection\n * triangulation.\n * @type {number}\n */\nexport const ERROR_THRESHOLD = 0.5;\n\n/**\n * Enable automatic reprojection of raster sources. Default is `true`.\n * TODO: decide if we want to expose this as a build flag or remove it\n * @type {boolean}\n */\nexport const ENABLE_RASTER_REPROJECTION = true;\n","/**\n * Utilities for generating shaders from literal style objects\n * @module ol/webgl/ShaderBuilder\n */\n\nimport {asArray} from '../color.js';\n\n/**\n * Will return the number as a float with a dot separator, which is required by GLSL.\n * @param {number} v Numerical value.\n * @returns {string} The value as string.\n */\nexport function formatNumber(v) {\n  const s = v.toString();\n  return s.indexOf('.') === -1 ? s + '.0' : s;\n}\n\n/**\n * Will return the number array as a float with a dot separator, concatenated with ', '.\n * @param {Array<number>} array Numerical values array.\n * @returns {string} The array as string, e. g.: `1.0, 2.0, 3.0`.\n */\nexport function formatArray(array) {\n  return array.map(formatNumber).join(', ');\n}\n\n/**\n * Will normalize and converts to string a color array compatible with GLSL.\n * @param {Array<number>} colorArray Color in [r, g, b, a] array form, with RGB components in the\n * 0..255 range and the alpha component in the 0..1 range. Note that if the A component is\n * missing, only 3 values will be output.\n * @returns {string} The color components concatenated in `1.0, 1.0, 1.0, 1.0` form.\n */\nexport function formatColor(colorArray) {\n  return colorArray.map(function(c, i) {\n    return i < 3 ? c / 255 : c;\n  }).map(formatNumber).join(', ');\n}\n\n/**\n * @typedef {Object} VaryingDescription\n * @property {string} name Varying name, as will be declared in the header.\n * @property {string} type Varying type, either `float`, `vec2`, `vec4`...\n * @property {string} expression Expression which will be assigned to the varying in the vertex shader, and\n * passed on to the fragment shader.\n */\n\n/**\n * @typedef {Object} ShaderParameters\n * @property {Array<string>} [uniforms] Uniforms; these will be declared in the header (should include the type).\n * @property {Array<string>} [attributes] Attributes; these will be declared in the header (should include the type).\n * @property {Array<VaryingDescription>} [varyings] Varyings with a name, a type and an expression.\n * @property {string} sizeExpression This will be assigned to a `vec2 size` variable.\n * @property {string} offsetExpression This will be assigned to a `vec2 offset` variable.\n * @property {string} colorExpression This will be the value assigned to gl_FragColor\n * @property {string} texCoordExpression This will be the value assigned to the `vec4 v_texCoord` varying.\n * @property {boolean} [rotateWithView=false] Whether symbols should rotate with view\n */\n\n/**\n * Generates a symbol vertex shader from a set of parameters,\n * intended to be used on point geometries.\n *\n * Three uniforms are hardcoded in all shaders: `u_projectionMatrix`, `u_offsetScaleMatrix` and\n * `u_offsetRotateMatrix`.\n *\n * The following attributes are hardcoded and expected to be present in the vertex buffers:\n * `vec2 a_position`, `float a_index` (being the index of the vertex in the quad, 0 to 3).\n *\n * The following varyings are hardcoded and gives the coordinate of the pixel both in the quad on the texture:\n * `vec2 v_quadCoord`, `vec2 v_texCoord`\n *\n * @param {ShaderParameters} parameters Parameters for the shader.\n * @returns {string} The full shader as a string.\n */\nexport function getSymbolVertexShader(parameters) {\n  const offsetMatrix = parameters.rotateWithView ?\n    'u_offsetScaleMatrix * u_offsetRotateMatrix' :\n    'u_offsetScaleMatrix';\n\n  const uniforms = parameters.uniforms || [];\n  const attributes = parameters.attributes || [];\n  const varyings = parameters.varyings || [];\n\n  const body = `precision mediump float;\nuniform mat4 u_projectionMatrix;\nuniform mat4 u_offsetScaleMatrix;\nuniform mat4 u_offsetRotateMatrix;\n${uniforms.map(function(uniform) {\n    return 'uniform ' + uniform + ';';\n  }).join('\\n')}\nattribute vec2 a_position;\nattribute float a_index;\n${attributes.map(function(attribute) {\n    return 'attribute ' + attribute + ';';\n  }).join('\\n')}\nvarying vec2 v_texCoord;\nvarying vec2 v_quadCoord;\n${varyings.map(function(varying) {\n    return 'varying ' + varying.type + ' ' + varying.name + ';';\n  }).join('\\n')}\nvoid main(void) {\n  mat4 offsetMatrix = ${offsetMatrix};\n  vec2 size = ${parameters.sizeExpression};\n  vec2 offset = ${parameters.offsetExpression};\n  float offsetX = a_index == 0.0 || a_index == 3.0 ? offset.x - size.x / 2.0 : offset.x + size.x / 2.0;\n  float offsetY = a_index == 0.0 || a_index == 1.0 ? offset.y - size.y / 2.0 : offset.y + size.y / 2.0;\n  vec4 offsets = offsetMatrix * vec4(offsetX, offsetY, 0.0, 0.0);\n  gl_Position = u_projectionMatrix * vec4(a_position, 0.0, 1.0) + offsets;\n  vec4 texCoord = ${parameters.texCoordExpression};\n  float u = a_index == 0.0 || a_index == 3.0 ? texCoord.s : texCoord.q;\n  float v = a_index == 2.0 || a_index == 3.0 ? texCoord.t : texCoord.p;\n  v_texCoord = vec2(u, v);\n  u = a_index == 0.0 || a_index == 3.0 ? 0.0 : 1.0;\n  v = a_index == 2.0 || a_index == 3.0 ? 0.0 : 1.0;\n  v_quadCoord = vec2(u, v);\n${varyings.map(function(varying) {\n    return '  ' + varying.name + ' = ' + varying.expression + ';';\n  }).join('\\n')}\n}`;\n\n  return body;\n}\n\n/**\n * Generates a symbol fragment shader intended to be used on point geometries.\n *\n * Expected the following varyings to be transmitted by the vertex shader:\n * `vec2 v_texCoord`\n *\n * @param {ShaderParameters} parameters Parameters for the shader.\n * @returns {string} The full shader as a string.\n */\nexport function getSymbolFragmentShader(parameters) {\n  const uniforms = parameters.uniforms || [];\n  const varyings = parameters.varyings || [];\n\n  const body = `precision mediump float;\n${uniforms.map(function(uniform) {\n    return 'uniform ' + uniform + ';';\n  }).join('\\n')}\nvarying vec2 v_texCoord;\nvarying vec2 v_quadCoord;\n${varyings.map(function(varying) {\n    return 'varying ' + varying.type + ' ' + varying.name + ';';\n  }).join('\\n')}\nvoid main(void) {\n  gl_FragColor = ${parameters.colorExpression};\n  gl_FragColor.rgb *= gl_FragColor.a;\n}`;\n\n  return body;\n}\n\n/**\n * Base type for values fed to operators; can be a number literal or the output of another operator\n * @typedef {Array<*>|number} OperatorValue\n */\n\n/**\n * Parses the provided expressions and produces a GLSL-compatible assignment string, such as:\n * `['add', ['*', ['get', 'size'], 0.001], 12] => '(a_size * (0.001)) + (12.0)'\n *\n * The following operators can be used:\n * * `['get', 'attributeName']` fetches a feature attribute (it will be prefixed by `a_` in the shader)\n * * `['*', value1, value1]` multiplies value1 by value2\n * * `['+', value1, value1]` adds value1 and value2\n * * `['clamp', value1, value2, value3]` clamps value1 between values2 and value3\n * * `['stretch', value1, value2, value3, value4, value5]` maps value1 from [value2, value3] range to\n *   [value4, value5] range, clamping values along the way\n *\n * Values can either be literals (numbers) or another operator, as they will be evaluated recursively.\n *\n * Also takes in an array where new attributes will be pushed, so that the user of the `parse` function\n * knows which attributes are expected to be available at evaluation time.\n *\n * A prefix must be specified so that the attributes can either be written as `a_name` or `v_name` in\n * the final assignment string.\n *\n * @param {OperatorValue} value Either literal or an operator.\n * @param {Array<string>} attributes Array containing the attribute names prefixed with `a_`; it\n * it passed along recursively\n * @param {string} attributePrefix Prefix added to attribute names in the final output (typically `a_` or `v_`).\n * @returns {string} Assignment string.\n */\nexport function parse(value, attributes, attributePrefix) {\n  const v = value;\n  function p(value) {\n    return parse(value, attributes, attributePrefix);\n  }\n  if (Array.isArray(v)) {\n    switch (v[0]) {\n      case 'get':\n        if (attributes.indexOf(v[1]) === -1) {\n          attributes.push(v[1]);\n        }\n        return attributePrefix + v[1];\n      case '*': return `(${p(v[1])} * ${p(v[2])})`;\n      case '+': return `(${p(v[1])} + ${p(v[2])})`;\n      case 'clamp': return `clamp(${p(v[1])}, ${p(v[2])}, ${p(v[3])})`;\n      case 'stretch': return `(clamp(${p(v[1])}, ${p(v[2])}, ${p(v[3])}) * ((${p(v[5])} - ${p(v[4])}) / (${p(v[3])} - ${p(v[2])})) + ${p(v[4])})`;\n      default: throw new Error('Unrecognized literal style expression: ' + JSON.stringify(value));\n    }\n  } else if (typeof value === 'number') {\n    return formatNumber(value);\n  } else {\n    throw new Error('Invalid value type in expression: ' + JSON.stringify(value));\n  }\n}\n\n/**\n * @typedef {Object} StyleParseResult\n * @property {ShaderParameters} params Symbol shader params.\n * @property {Object.<string,import(\"./Helper\").UniformValue>} uniforms Uniform definitions.\n * @property {Array<import(\"../renderer/webgl/PointsLayer\").CustomAttribute>} attributes Attribute descriptions.\n */\n\n/**\n * Parses a {@link import(\"../style/LiteralStyle\").LiteralSymbolStyle} object and outputs shader parameters to be\n * then fed to {@link getSymbolVertexShader} and {@link getSymbolFragmentShader}.\n *\n * Also returns `uniforms` and `attributes` properties as expected by the\n * {@link module:ol/renderer/webgl/PointsLayer~WebGLPointsLayerRenderer}.\n *\n * @param {import(\"../style/LiteralStyle\").LiteralSymbolStyle} style Symbol style.\n * @returns {StyleParseResult} Result containing shader params, attributes and uniforms.\n */\nexport function parseSymbolStyle(style) {\n  const size = Array.isArray(style.size) && typeof style.size[0] == 'number' ?\n    style.size : [style.size, style.size];\n  const color = (typeof style.color === 'string' ?\n    asArray(style.color).map(function(c, i) {\n      return i < 3 ? c / 255 : c;\n    }) :\n    style.color || [255, 255, 255, 1]);\n  const texCoord = style.textureCoord || [0, 0, 1, 1];\n  const offset = style.offset || [0, 0];\n  const opacity = style.opacity !== undefined ? style.opacity : 1;\n\n  let attributes = [];\n  const varyings = [];\n  function pA(value) {\n    return parse(value, attributes, 'a_');\n  }\n  function pV(value) {\n    return parse(value, varyings, 'v_');\n  }\n\n  let opacityFilter = '1.0';\n  const visibleSize = pV(size[0]);\n  switch (style.symbolType) {\n    case 'square': break;\n    case 'image': break;\n    // taken from https://thebookofshaders.com/07/\n    case 'circle':\n      opacityFilter = `(1.0-smoothstep(1.-4./${visibleSize},1.,dot(v_quadCoord-.5,v_quadCoord-.5)*4.))`;\n      break;\n    case 'triangle':\n      const st = '(v_quadCoord*2.-1.)';\n      const a = `(atan(${st}.x,${st}.y))`;\n      opacityFilter = `(1.0-smoothstep(.5-3./${visibleSize},.5,cos(floor(.5+${a}/2.094395102)*2.094395102-${a})*length(${st})))`;\n      break;\n\n    default: throw new Error('Unexpected symbol type: ' + style.symbolType);\n  }\n\n  /** @type {import('../webgl/ShaderBuilder.js').ShaderParameters} */\n  const params = {\n    uniforms: [],\n    colorExpression: `vec4(${pV(color[0])}, ${pV(color[1])}, ${pV(color[2])}, ${pV(color[3])})` +\n      ` * vec4(1.0, 1.0, 1.0, ${pV(opacity)} * ${opacityFilter})`,\n    sizeExpression: `vec2(${pA(size[0])}, ${pA(size[1])})`,\n    offsetExpression: `vec2(${pA(offset[0])}, ${pA(offset[1])})`,\n    texCoordExpression: `vec4(${pA(texCoord[0])}, ${pA(texCoord[1])}, ${pA(texCoord[2])}, ${pA(texCoord[3])})`,\n    rotateWithView: !!style.rotateWithView\n  };\n\n  attributes = attributes.concat(varyings).filter(function(attrName, index, arr) {\n    return arr.indexOf(attrName) === index;\n  });\n  params.attributes = attributes.map(function(attributeName) {\n    return `float a_${attributeName}`;\n  });\n  params.varyings = varyings.map(function(attributeName) {\n    return {\n      name: `v_${attributeName}`,\n      type: 'float',\n      expression: `a_${attributeName}`\n    };\n  });\n\n  /** @type {Object.<string,import(\"../webgl/Helper\").UniformValue>} */\n  const uniforms = {};\n\n  if (style.symbolType === 'image' && style.src) {\n    const texture = new Image();\n    texture.src = style.src;\n    params.uniforms.push('sampler2D u_texture');\n    params.colorExpression = params.colorExpression +\n      ' * texture2D(u_texture, v_texCoord)';\n    uniforms['u_texture'] = texture;\n  }\n\n  return {\n    params: params,\n    attributes: attributes.map(function(attributeName) {\n      return {\n        name: attributeName,\n        callback: function(feature) {\n          return feature.get(attributeName) || 0;\n        }\n      };\n    }),\n    uniforms: uniforms\n  };\n}\n","/**\n * @module ol/MapProperty\n */\n\n/**\n * @enum {string}\n */\nexport default {\n  LAYERGROUP: 'layergroup',\n  SIZE: 'size',\n  TARGET: 'target',\n  VIEW: 'view'\n};\n","/**\n * @module ol/style/IconAnchorUnits\n */\n\n/**\n * Icon anchor units. One of 'fraction', 'pixels'.\n * @enum {string}\n */\nexport default {\n  FRACTION: 'fraction',\n  PIXELS: 'pixels'\n};\n","/**\n * @module ol/OverlayPositioning\n */\n\n/**\n * Overlay position: `'bottom-left'`, `'bottom-center'`,  `'bottom-right'`,\n * `'center-left'`, `'center-center'`, `'center-right'`, `'top-left'`,\n * `'top-center'`, `'top-right'`\n * @enum {string}\n */\nexport default {\n  BOTTOM_LEFT: 'bottom-left',\n  BOTTOM_CENTER: 'bottom-center',\n  BOTTOM_RIGHT: 'bottom-right',\n  CENTER_LEFT: 'center-left',\n  CENTER_CENTER: 'center-center',\n  CENTER_RIGHT: 'center-right',\n  TOP_LEFT: 'top-left',\n  TOP_CENTER: 'top-center',\n  TOP_RIGHT: 'top-right'\n};\n","/**\n * @module ol/style/IconImage\n */\n\nimport {createCanvasContext2D} from '../dom.js';\nimport EventTarget from '../events/Target.js';\nimport EventType from '../events/EventType.js';\nimport ImageState from '../ImageState.js';\nimport {shared as iconImageCache} from './IconImageCache.js';\nimport {listenImage} from '../Image.js';\n\n\nclass IconImage extends EventTarget {\n  /**\n   * @param {HTMLImageElement|HTMLCanvasElement} image Image.\n   * @param {string|undefined} src Src.\n   * @param {import(\"../size.js\").Size} size Size.\n   * @param {?string} crossOrigin Cross origin.\n   * @param {import(\"../ImageState.js\").default} imageState Image state.\n   * @param {import(\"../color.js\").Color} color Color.\n   */\n  constructor(image, src, size, crossOrigin, imageState, color) {\n\n    super();\n\n    /**\n     * @private\n     * @type {HTMLImageElement|HTMLCanvasElement}\n     */\n    this.hitDetectionImage_ = null;\n\n    /**\n     * @private\n     * @type {HTMLImageElement|HTMLCanvasElement}\n     */\n    this.image_ = !image ? new Image() : image;\n\n    if (crossOrigin !== null) {\n      /** @type {HTMLImageElement} */ (this.image_).crossOrigin = crossOrigin;\n    }\n\n    /**\n     * @private\n     * @type {HTMLCanvasElement}\n     */\n    this.canvas_ = color ? document.createElement('canvas') : null;\n\n    /**\n     * @private\n     * @type {import(\"../color.js\").Color}\n     */\n    this.color_ = color;\n\n    /**\n     * @private\n     * @type {function():void}\n     */\n    this.unlisten_ = null;\n\n    /**\n     * @private\n     * @type {import(\"../ImageState.js\").default}\n     */\n    this.imageState_ = imageState;\n\n    /**\n     * @private\n     * @type {import(\"../size.js\").Size}\n     */\n    this.size_ = size;\n\n    /**\n     * @private\n     * @type {string|undefined}\n     */\n    this.src_ = src;\n\n    /**\n     * @private\n     * @type {boolean|undefined}\n     */\n    this.tainted_;\n\n  }\n\n  /**\n   * @private\n   * @return {boolean} The image canvas is tainted.\n   */\n  isTainted_() {\n    if (this.tainted_ === undefined && this.imageState_ === ImageState.LOADED) {\n      this.tainted_ = false;\n      const context = createCanvasContext2D(1, 1);\n      try {\n        context.drawImage(this.image_, 0, 0);\n        context.getImageData(0, 0, 1, 1);\n      } catch (e) {\n        this.tainted_ = true;\n      }\n    }\n    return this.tainted_ === true;\n  }\n\n  /**\n   * @private\n   */\n  dispatchChangeEvent_() {\n    this.dispatchEvent(EventType.CHANGE);\n  }\n\n  /**\n   * @private\n   */\n  handleImageError_() {\n    this.imageState_ = ImageState.ERROR;\n    this.unlistenImage_();\n    this.dispatchChangeEvent_();\n  }\n\n  /**\n   * @private\n   */\n  handleImageLoad_() {\n    this.imageState_ = ImageState.LOADED;\n    if (this.size_) {\n      this.image_.width = this.size_[0];\n      this.image_.height = this.size_[1];\n    }\n    this.size_ = [this.image_.width, this.image_.height];\n    this.unlistenImage_();\n    this.replaceColor_();\n    this.dispatchChangeEvent_();\n  }\n\n  /**\n   * @param {number} pixelRatio Pixel ratio.\n   * @return {HTMLImageElement|HTMLCanvasElement} Image or Canvas element.\n   */\n  getImage(pixelRatio) {\n    return this.canvas_ ? this.canvas_ : this.image_;\n  }\n\n  /**\n   * @return {import(\"../ImageState.js\").default} Image state.\n   */\n  getImageState() {\n    return this.imageState_;\n  }\n\n  /**\n   * @param {number} pixelRatio Pixel ratio.\n   * @return {HTMLImageElement|HTMLCanvasElement} Image element.\n   */\n  getHitDetectionImage(pixelRatio) {\n    if (!this.hitDetectionImage_) {\n      if (this.isTainted_()) {\n        const width = this.size_[0];\n        const height = this.size_[1];\n        const context = createCanvasContext2D(width, height);\n        context.fillRect(0, 0, width, height);\n        this.hitDetectionImage_ = context.canvas;\n      } else {\n        this.hitDetectionImage_ = this.image_;\n      }\n    }\n    return this.hitDetectionImage_;\n  }\n\n  /**\n   * @return {import(\"../size.js\").Size} Image size.\n   */\n  getSize() {\n    return this.size_;\n  }\n\n  /**\n   * @return {string|undefined} Image src.\n   */\n  getSrc() {\n    return this.src_;\n  }\n\n  /**\n   * Load not yet loaded URI.\n   */\n  load() {\n    if (this.imageState_ == ImageState.IDLE) {\n      this.imageState_ = ImageState.LOADING;\n      try {\n        /** @type {HTMLImageElement} */ (this.image_).src = this.src_;\n      } catch (e) {\n        this.handleImageError_();\n      }\n      this.unlisten_ = listenImage(\n        this.image_,\n        this.handleImageLoad_.bind(this),\n        this.handleImageError_.bind(this)\n      );\n    }\n  }\n\n  /**\n   * @private\n   */\n  replaceColor_() {\n    if (!this.color_ || this.isTainted_()) {\n      return;\n    }\n\n    this.canvas_.width = this.image_.width;\n    this.canvas_.height = this.image_.height;\n\n    const ctx = this.canvas_.getContext('2d');\n    ctx.drawImage(this.image_, 0, 0);\n\n    const imgData = ctx.getImageData(0, 0, this.image_.width, this.image_.height);\n    const data = imgData.data;\n    const r = this.color_[0] / 255.0;\n    const g = this.color_[1] / 255.0;\n    const b = this.color_[2] / 255.0;\n\n    for (let i = 0, ii = data.length; i < ii; i += 4) {\n      data[i] *= r;\n      data[i + 1] *= g;\n      data[i + 2] *= b;\n    }\n    ctx.putImageData(imgData, 0, 0);\n  }\n\n  /**\n   * Discards event handlers which listen for load completion or errors.\n   *\n   * @private\n   */\n  unlistenImage_() {\n    if (this.unlisten_) {\n      this.unlisten_();\n      this.unlisten_ = null;\n    }\n  }\n}\n\n\n/**\n * @param {HTMLImageElement|HTMLCanvasElement} image Image.\n * @param {string} src Src.\n * @param {import(\"../size.js\").Size} size Size.\n * @param {?string} crossOrigin Cross origin.\n * @param {import(\"../ImageState.js\").default} imageState Image state.\n * @param {import(\"../color.js\").Color} color Color.\n * @return {IconImage} Icon image.\n */\nexport function get(image, src, size, crossOrigin, imageState, color) {\n  let iconImage = iconImageCache.get(src, crossOrigin, color);\n  if (!iconImage) {\n    iconImage = new IconImage(image, src, size, crossOrigin, imageState, color);\n    iconImageCache.set(src, crossOrigin, color, iconImage);\n  }\n  return iconImage;\n}\n\n\nexport default IconImage;\n","/**\n * @module ol/style/Icon\n */\nimport {getUid} from '../util.js';\nimport ImageState from '../ImageState.js';\nimport {assert} from '../asserts.js';\nimport {asArray} from '../color.js';\nimport EventType from '../events/EventType.js';\nimport IconAnchorUnits from './IconAnchorUnits.js';\nimport {get as getIconImage} from './IconImage.js';\nimport IconOrigin from './IconOrigin.js';\nimport ImageStyle from './Image.js';\n\n\n/**\n * @typedef {Object} Options\n * @property {Array<number>} [anchor=[0.5, 0.5]] Anchor. Default value is the icon center.\n * @property {import(\"./IconOrigin.js\").default} [anchorOrigin='top-left'] Origin of the anchor: `bottom-left`, `bottom-right`,\n * `top-left` or `top-right`.\n * @property {import(\"./IconAnchorUnits.js\").default} [anchorXUnits='fraction'] Units in which the anchor x value is\n * specified. A value of `'fraction'` indicates the x value is a fraction of the icon. A value of `'pixels'` indicates\n * the x value in pixels.\n * @property {import(\"./IconAnchorUnits.js\").default} [anchorYUnits='fraction'] Units in which the anchor y value is\n * specified. A value of `'fraction'` indicates the y value is a fraction of the icon. A value of `'pixels'` indicates\n * the y value in pixels.\n * @property {import(\"../color.js\").Color|string} [color] Color to tint the icon. If not specified,\n * the icon will be left as is.\n * @property {null|string} [crossOrigin] The `crossOrigin` attribute for loaded images. Note that you must provide a\n * `crossOrigin` value if you want to access pixel data with the Canvas renderer.\n * See https://developer.mozilla.org/en-US/docs/Web/HTML/CORS_enabled_image for more detail.\n * @property {HTMLImageElement|HTMLCanvasElement} [img] Image object for the icon. If the `src` option is not provided then the\n * provided image must already be loaded. And in that case, it is required\n * to provide the size of the image, with the `imgSize` option.\n * @property {Array<number>} [offset=[0, 0]] Offset, which, together with the size and the offset origin, define the\n * sub-rectangle to use from the original icon image.\n * @property {import(\"./IconOrigin.js\").default} [offsetOrigin='top-left'] Origin of the offset: `bottom-left`, `bottom-right`,\n * `top-left` or `top-right`.\n * @property {number} [opacity=1] Opacity of the icon.\n * @property {number} [scale=1] Scale.\n * @property {boolean} [rotateWithView=false] Whether to rotate the icon with the view.\n * @property {number} [rotation=0] Rotation in radians (positive rotation clockwise).\n * @property {import(\"../size.js\").Size} [size] Icon size in pixel. Can be used together with `offset` to define the\n * sub-rectangle to use from the origin (sprite) icon image.\n * @property {import(\"../size.js\").Size} [imgSize] Image size in pixels. Only required if `img` is set and `src` is not, and\n * for SVG images in Internet Explorer 11. The provided `imgSize` needs to match the actual size of the image.\n * @property {string} [src] Image source URI.\n */\n\n\n/**\n * @classdesc\n * Set icon style for vector features.\n * @api\n */\nclass Icon extends ImageStyle {\n  /**\n   * @param {Options=} opt_options Options.\n   */\n  constructor(opt_options) {\n    const options = opt_options || {};\n\n    /**\n     * @type {number}\n     */\n    const opacity = options.opacity !== undefined ? options.opacity : 1;\n\n    /**\n     * @type {number}\n     */\n    const rotation = options.rotation !== undefined ? options.rotation : 0;\n\n    /**\n     * @type {number}\n     */\n    const scale = options.scale !== undefined ? options.scale : 1;\n\n    /**\n     * @type {boolean}\n     */\n    const rotateWithView = options.rotateWithView !== undefined ?\n      options.rotateWithView : false;\n\n    super({\n      opacity: opacity,\n      rotation: rotation,\n      scale: scale,\n      rotateWithView: rotateWithView\n    });\n\n    /**\n     * @private\n     * @type {Array<number>}\n     */\n    this.anchor_ = options.anchor !== undefined ? options.anchor : [0.5, 0.5];\n\n    /**\n     * @private\n     * @type {Array<number>}\n     */\n    this.normalizedAnchor_ = null;\n\n    /**\n     * @private\n     * @type {import(\"./IconOrigin.js\").default}\n     */\n    this.anchorOrigin_ = options.anchorOrigin !== undefined ?\n      options.anchorOrigin : IconOrigin.TOP_LEFT;\n\n    /**\n     * @private\n     * @type {import(\"./IconAnchorUnits.js\").default}\n     */\n    this.anchorXUnits_ = options.anchorXUnits !== undefined ?\n      options.anchorXUnits : IconAnchorUnits.FRACTION;\n\n    /**\n     * @private\n     * @type {import(\"./IconAnchorUnits.js\").default}\n     */\n    this.anchorYUnits_ = options.anchorYUnits !== undefined ?\n      options.anchorYUnits : IconAnchorUnits.FRACTION;\n\n    /**\n     * @private\n     * @type {?string}\n     */\n    this.crossOrigin_ =\n        options.crossOrigin !== undefined ? options.crossOrigin : null;\n\n    /**\n     * @type {HTMLImageElement|HTMLCanvasElement}\n     */\n    const image = options.img !== undefined ? options.img : null;\n\n    /**\n     * @type {import(\"../size.js\").Size}\n     */\n    const imgSize = options.imgSize !== undefined ? options.imgSize : null;\n\n    /**\n     * @type {string|undefined}\n     */\n    let src = options.src;\n\n    assert(!(src !== undefined && image),\n      4); // `image` and `src` cannot be provided at the same time\n    assert(!image || (image && imgSize),\n      5); // `imgSize` must be set when `image` is provided\n\n    if ((src === undefined || src.length === 0) && image) {\n      src = /** @type {HTMLImageElement} */ (image).src || getUid(image);\n    }\n    assert(src !== undefined && src.length > 0,\n      6); // A defined and non-empty `src` or `image` must be provided\n\n    /**\n     * @type {import(\"../ImageState.js\").default}\n     */\n    const imageState = options.src !== undefined ?\n      ImageState.IDLE : ImageState.LOADED;\n\n    /**\n     * @private\n     * @type {import(\"../color.js\").Color}\n     */\n    this.color_ = options.color !== undefined ? asArray(options.color) : null;\n\n    /**\n     * @private\n     * @type {import(\"./IconImage.js\").default}\n     */\n    this.iconImage_ = getIconImage(\n      image, /** @type {string} */ (src), imgSize, this.crossOrigin_, imageState, this.color_);\n\n    /**\n     * @private\n     * @type {Array<number>}\n     */\n    this.offset_ = options.offset !== undefined ? options.offset : [0, 0];\n\n    /**\n     * @private\n     * @type {import(\"./IconOrigin.js\").default}\n     */\n    this.offsetOrigin_ = options.offsetOrigin !== undefined ?\n      options.offsetOrigin : IconOrigin.TOP_LEFT;\n\n    /**\n     * @private\n     * @type {Array<number>}\n     */\n    this.origin_ = null;\n\n    /**\n     * @private\n     * @type {import(\"../size.js\").Size}\n     */\n    this.size_ = options.size !== undefined ? options.size : null;\n\n  }\n\n  /**\n   * Clones the style. The underlying Image/HTMLCanvasElement is not cloned.\n   * @return {Icon} The cloned style.\n   * @api\n   */\n  clone() {\n    return new Icon({\n      anchor: this.anchor_.slice(),\n      anchorOrigin: this.anchorOrigin_,\n      anchorXUnits: this.anchorXUnits_,\n      anchorYUnits: this.anchorYUnits_,\n      crossOrigin: this.crossOrigin_,\n      color: (this.color_ && this.color_.slice) ? this.color_.slice() : this.color_ || undefined,\n      src: this.getSrc(),\n      offset: this.offset_.slice(),\n      offsetOrigin: this.offsetOrigin_,\n      size: this.size_ !== null ? this.size_.slice() : undefined,\n      opacity: this.getOpacity(),\n      scale: this.getScale(),\n      rotation: this.getRotation(),\n      rotateWithView: this.getRotateWithView()\n    });\n  }\n\n  /**\n   * @inheritDoc\n   * @api\n   */\n  getAnchor() {\n    if (this.normalizedAnchor_) {\n      return this.normalizedAnchor_;\n    }\n    let anchor = this.anchor_;\n    const size = this.getSize();\n    if (this.anchorXUnits_ == IconAnchorUnits.FRACTION ||\n        this.anchorYUnits_ == IconAnchorUnits.FRACTION) {\n      if (!size) {\n        return null;\n      }\n      anchor = this.anchor_.slice();\n      if (this.anchorXUnits_ == IconAnchorUnits.FRACTION) {\n        anchor[0] *= size[0];\n      }\n      if (this.anchorYUnits_ == IconAnchorUnits.FRACTION) {\n        anchor[1] *= size[1];\n      }\n    }\n\n    if (this.anchorOrigin_ != IconOrigin.TOP_LEFT) {\n      if (!size) {\n        return null;\n      }\n      if (anchor === this.anchor_) {\n        anchor = this.anchor_.slice();\n      }\n      if (this.anchorOrigin_ == IconOrigin.TOP_RIGHT ||\n          this.anchorOrigin_ == IconOrigin.BOTTOM_RIGHT) {\n        anchor[0] = -anchor[0] + size[0];\n      }\n      if (this.anchorOrigin_ == IconOrigin.BOTTOM_LEFT ||\n          this.anchorOrigin_ == IconOrigin.BOTTOM_RIGHT) {\n        anchor[1] = -anchor[1] + size[1];\n      }\n    }\n    this.normalizedAnchor_ = anchor;\n    return this.normalizedAnchor_;\n  }\n\n  /**\n   * Set the anchor point. The anchor determines the center point for the\n   * symbolizer.\n   *\n   * @param {Array<number>} anchor Anchor.\n   * @api\n   */\n  setAnchor(anchor) {\n    this.anchor_ = anchor;\n    this.normalizedAnchor_ = null;\n  }\n\n  /**\n   * Get the icon color.\n   * @return {import(\"../color.js\").Color} Color.\n   * @api\n   */\n  getColor() {\n    return this.color_;\n  }\n\n  /**\n   * Get the image icon.\n   * @param {number} pixelRatio Pixel ratio.\n   * @return {HTMLImageElement|HTMLCanvasElement} Image or Canvas element.\n   * @override\n   * @api\n   */\n  getImage(pixelRatio) {\n    return this.iconImage_.getImage(pixelRatio);\n  }\n\n  /**\n   * @override\n   */\n  getImageSize() {\n    return this.iconImage_.getSize();\n  }\n\n  /**\n   * @override\n   */\n  getHitDetectionImageSize() {\n    return this.getImageSize();\n  }\n\n  /**\n   * @override\n   */\n  getImageState() {\n    return this.iconImage_.getImageState();\n  }\n\n  /**\n   * @override\n   */\n  getHitDetectionImage(pixelRatio) {\n    return this.iconImage_.getHitDetectionImage(pixelRatio);\n  }\n\n  /**\n   * @inheritDoc\n   * @api\n   */\n  getOrigin() {\n    if (this.origin_) {\n      return this.origin_;\n    }\n    let offset = this.offset_;\n\n    if (this.offsetOrigin_ != IconOrigin.TOP_LEFT) {\n      const size = this.getSize();\n      const iconImageSize = this.iconImage_.getSize();\n      if (!size || !iconImageSize) {\n        return null;\n      }\n      offset = offset.slice();\n      if (this.offsetOrigin_ == IconOrigin.TOP_RIGHT ||\n          this.offsetOrigin_ == IconOrigin.BOTTOM_RIGHT) {\n        offset[0] = iconImageSize[0] - size[0] - offset[0];\n      }\n      if (this.offsetOrigin_ == IconOrigin.BOTTOM_LEFT ||\n          this.offsetOrigin_ == IconOrigin.BOTTOM_RIGHT) {\n        offset[1] = iconImageSize[1] - size[1] - offset[1];\n      }\n    }\n    this.origin_ = offset;\n    return this.origin_;\n  }\n\n  /**\n   * Get the image URL.\n   * @return {string|undefined} Image src.\n   * @api\n   */\n  getSrc() {\n    return this.iconImage_.getSrc();\n  }\n\n  /**\n   * @inheritDoc\n   * @api\n   */\n  getSize() {\n    return !this.size_ ? this.iconImage_.getSize() : this.size_;\n  }\n\n  /**\n   * @override\n   */\n  listenImageChange(listener) {\n    this.iconImage_.addEventListener(EventType.CHANGE, listener);\n  }\n\n  /**\n   * Load not yet loaded URI.\n   * When rendering a feature with an icon style, the vector renderer will\n   * automatically call this method. However, you might want to call this\n   * method yourself for preloading or other purposes.\n   * @override\n   * @api\n   */\n  load() {\n    this.iconImage_.load();\n  }\n\n  /**\n   * @override\n   */\n  unlistenImageChange(listener) {\n    this.iconImage_.removeEventListener(EventType.CHANGE, listener);\n  }\n}\n\n\nexport default Icon;\n","/**\n * @module ol/VectorRenderTile\n */\nimport {getUid} from './util.js';\nimport Tile from './Tile.js';\nimport TileState from './TileState.js';\nimport {createCanvasContext2D} from './dom.js';\n\n\n/**\n * @typedef {Object} ReplayState\n * @property {boolean} dirty\n * @property {null|import(\"./render.js\").OrderFunction} renderedRenderOrder\n * @property {number} renderedTileRevision\n * @property {number} renderedResolution\n * @property {number} renderedRevision\n * @property {number} renderedZ\n * @property {number} renderedTileResolution\n * @property {number} renderedTileZ\n */\n\n\nclass VectorRenderTile extends Tile {\n\n  /**\n   * @param {import(\"./tilecoord.js\").TileCoord} tileCoord Tile coordinate.\n   * @param {TileState} state State.\n   * @param {import(\"./tilecoord.js\").TileCoord} urlTileCoord Wrapped tile coordinate for source urls.\n   * @param {import(\"./tilegrid/TileGrid.js\").default} sourceTileGrid Tile grid of the source.\n   * @param {function(VectorRenderTile):Array<import(\"./VectorTile\").default>} getSourceTiles Function\n   * to get an source tiles for this tile.\n   * @param {function(VectorRenderTile):void} removeSourceTiles Function to remove this tile from its\n   * source tiles's consumer count.\n   */\n  constructor(tileCoord, state, urlTileCoord, sourceTileGrid, getSourceTiles, removeSourceTiles) {\n\n    super(tileCoord, state, {transition: 0});\n\n    /**\n     * @private\n     * @type {!Object<string, CanvasRenderingContext2D>}\n     */\n    this.context_ = {};\n\n    /**\n     * Executor groups by layer uid. Entries are read/written by the renderer.\n     * @type {Object<string, Array<import(\"./render/canvas/ExecutorGroup.js\").default>>}\n     */\n    this.executorGroups = {};\n\n    /**\n     * Number of loading source tiles. Read/written by the source.\n     * @type {number}\n     */\n    this.loadingSourceTiles = 0;\n\n    /**\n     * Tile keys of error source tiles. Read/written by the source.\n     * @type {Object<string, boolean>}\n     */\n    this.errorSourceTileKeys = {};\n\n    /**\n     * @private\n     * @type {!Object<string, ReplayState>}\n     */\n    this.replayState_ = {};\n\n    /**\n     * @type {number}\n     */\n    this.wantedResolution;\n\n    /**\n     * @type {!function(import(\"./VectorRenderTile.js\").default):Array<import(\"./VectorTile.js\").default>}\n     */\n    this.getSourceTiles_ = getSourceTiles;\n\n    /**\n     * @type {!function(import(\"./VectorRenderTile.js\").default):void}\n     */\n    this.removeSourceTiles_ = removeSourceTiles;\n\n    /**\n     * @private\n     * @type {import(\"./tilegrid/TileGrid.js\").default}\n     */\n    this.sourceTileGrid_ = sourceTileGrid;\n\n    /**\n     * z of the source tiles of the last getSourceTiles call.\n     * @type {number}\n     */\n    this.sourceZ = -1;\n\n    /**\n     * True when all tiles for this tile's nominal resolution are available.\n     * @type {boolean}\n     */\n    this.hifi = false;\n\n    /**\n     * @type {import(\"./tilecoord.js\").TileCoord}\n     */\n    this.wrappedTileCoord = urlTileCoord;\n  }\n\n  /**\n   * @inheritDoc\n   */\n  disposeInternal() {\n    this.removeSourceTiles_(this);\n    for (const key in this.context_) {\n      const canvas = this.context_[key].canvas;\n      canvas.width = canvas.height = 0;\n    }\n    for (const key in this.executorGroups) {\n      const executorGroups = this.executorGroups[key];\n      for (let i = 0, ii = executorGroups.length; i < ii; ++i) {\n        executorGroups[i].disposeInternal();\n      }\n    }\n    this.setState(TileState.ABORT);\n    super.disposeInternal();\n  }\n\n  /**\n   * @param {import(\"./layer/Layer.js\").default} layer Layer.\n   * @return {CanvasRenderingContext2D} The rendering context.\n   */\n  getContext(layer) {\n    const key = getUid(layer);\n    if (!(key in this.context_)) {\n      this.context_[key] = createCanvasContext2D();\n    }\n    return this.context_[key];\n  }\n\n  /**\n   * @param {import(\"./layer/Layer.js\").default} layer Layer.\n   * @return {boolean} Tile has a rendering context for the given layer.\n   */\n  hasContext(layer) {\n    return getUid(layer) in this.context_;\n  }\n\n  /**\n   * Get the Canvas for this tile.\n   * @param {import(\"./layer/Layer.js\").default} layer Layer.\n   * @return {HTMLCanvasElement} Canvas.\n   */\n  getImage(layer) {\n    return this.hasContext(layer) ? this.getContext(layer).canvas : null;\n  }\n\n  /**\n   * @param {import(\"./layer/Layer.js\").default} layer Layer.\n   * @return {ReplayState} The replay state.\n   */\n  getReplayState(layer) {\n    const key = getUid(layer);\n    if (!(key in this.replayState_)) {\n      this.replayState_[key] = {\n        dirty: false,\n        renderedRenderOrder: null,\n        renderedResolution: NaN,\n        renderedRevision: -1,\n        renderedTileResolution: NaN,\n        renderedTileRevision: -1,\n        renderedZ: -1,\n        renderedTileZ: -1\n      };\n    }\n    return this.replayState_[key];\n  }\n\n  /**\n   * @inheritDoc\n   */\n  load() {\n    this.getSourceTiles_(this);\n  }\n}\n\n\nexport default VectorRenderTile;\n","/**\n * @module ol/VectorTile\n */\nimport Tile from './Tile.js';\nimport TileState from './TileState.js';\n\nclass VectorTile extends Tile {\n\n  /**\n   * @param {import(\"./tilecoord.js\").TileCoord} tileCoord Tile coordinate.\n   * @param {TileState} state State.\n   * @param {string} src Data source url.\n   * @param {import(\"./format/Feature.js\").default} format Feature format.\n   * @param {import(\"./Tile.js\").LoadFunction} tileLoadFunction Tile load function.\n   * @param {import(\"./Tile.js\").Options=} opt_options Tile options.\n   */\n  constructor(tileCoord, state, src, format, tileLoadFunction, opt_options) {\n\n    super(tileCoord, state, opt_options);\n\n    /**\n     * @type {number}\n     */\n    this.consumers = 0;\n\n    /**\n     * Extent of this tile; set by the source.\n     * @type {import(\"./extent.js\").Extent}\n     */\n    this.extent = null;\n\n    /**\n     * @private\n     * @type {import(\"./format/Feature.js\").default}\n     */\n    this.format_ = format;\n\n    /**\n     * @private\n     * @type {Array<import(\"./Feature.js\").default>}\n     */\n    this.features_ = null;\n\n    /**\n     * @private\n     * @type {import(\"./featureloader.js\").FeatureLoader}\n     */\n    this.loader_;\n\n    /**\n     * Feature projection of this tile; set by the source.\n     * @type {import(\"./proj/Projection.js\").default}\n     */\n    this.projection = null;\n\n    /**\n     * Resolution of this tile; set by the source.\n     * @type {number}\n     */\n    this.resolution;\n\n    /**\n     * @private\n     * @type {import(\"./Tile.js\").LoadFunction}\n     */\n    this.tileLoadFunction_ = tileLoadFunction;\n\n    /**\n     * @private\n     * @type {string}\n     */\n    this.url_ = src;\n\n  }\n\n  /**\n   * @inheritDoc\n   */\n  disposeInternal() {\n    this.setState(TileState.ABORT);\n    super.disposeInternal();\n  }\n\n  /**\n   * Get the feature format assigned for reading this tile's features.\n   * @return {import(\"./format/Feature.js\").default} Feature format.\n   * @api\n   */\n  getFormat() {\n    return this.format_;\n  }\n\n  /**\n   * Get the features for this tile. Geometries will be in the view projection.\n   * @return {Array<import(\"./Feature.js\").FeatureLike>} Features.\n   * @api\n   */\n  getFeatures() {\n    return this.features_;\n  }\n\n  /**\n   * @inheritDoc\n   */\n  getKey() {\n    return this.url_;\n  }\n\n  /**\n   * @inheritDoc\n   */\n  load() {\n    if (this.state == TileState.IDLE) {\n      this.setState(TileState.LOADING);\n      this.tileLoadFunction_(this, this.url_);\n      this.loader_(this.extent, this.resolution, this.projection);\n    }\n  }\n\n  /**\n   * Handler for successful tile load.\n   * @param {Array<import(\"./Feature.js\").default>} features The loaded features.\n   * @param {import(\"./proj/Projection.js\").default} dataProjection Data projection.\n   */\n  onLoad(features, dataProjection) {\n    this.setFeatures(features);\n  }\n\n  /**\n   * Handler for tile load errors.\n   */\n  onError() {\n    this.setState(TileState.ERROR);\n  }\n\n  /**\n   * Function for use in an {@link module:ol/source/VectorTile~VectorTile}'s `tileLoadFunction`.\n   * Sets the features for the tile.\n   * @param {Array<import(\"./Feature.js\").default>} features Features.\n   * @api\n   */\n  setFeatures(features) {\n    this.features_ = features;\n    this.setState(TileState.LOADED);\n  }\n\n  /**\n   * Set the feature loader for reading this tile's features.\n   * @param {import(\"./featureloader.js\").FeatureLoader} loader Feature loader.\n   * @api\n   */\n  setLoader(loader) {\n    this.loader_ = loader;\n  }\n}\n\nexport default VectorTile;\n","/**\n * @module ol/source/VectorTile\n */\n\nimport TileState from '../TileState.js';\nimport VectorRenderTile from '../VectorRenderTile.js';\nimport Tile from '../VectorTile.js';\nimport {toSize} from '../size.js';\nimport UrlTile from './UrlTile.js';\nimport {getKeyZXY, getKey} from '../tilecoord.js';\nimport {createXYZ, extentFromProjection, createForProjection} from '../tilegrid.js';\nimport {buffer as bufferExtent, getIntersection, intersects} from '../extent.js';\nimport {listen, unlistenByKey} from '../events.js';\nimport EventType from '../events/EventType.js';\nimport {loadFeaturesXhr} from '../featureloader.js';\nimport {isEmpty} from '../obj.js';\nimport {equals} from '../array.js';\n\n/**\n * @typedef {Object} Options\n * @property {import(\"./Source.js\").AttributionLike} [attributions] Attributions.\n * @property {boolean} [attributionsCollapsible=true] Attributions are collapsible.\n * @property {number} [cacheSize=128] Cache size.\n * @property {import(\"../extent.js\").Extent} [extent]\n * @property {import(\"../format/Feature.js\").default} [format] Feature format for tiles. Used and required by the default.\n * @property {boolean} [overlaps=true] This source may have overlapping geometries. Setting this\n * to `false` (e.g. for sources with polygons that represent administrative\n * boundaries or TopoJSON sources) allows the renderer to optimise fill and\n * stroke operations.\n * @property {import(\"../proj.js\").ProjectionLike} [projection='EPSG:3857'] Projection of the tile grid.\n * @property {import(\"./State.js\").default} [state] Source state.\n * @property {typeof import(\"../VectorTile.js\").default} [tileClass] Class used to instantiate image tiles.\n * Default is {@link module:ol/VectorTile}.\n * @property {number} [maxZoom=22] Optional max zoom level.\n * @property {number} [minZoom] Optional min zoom level.\n * @property {number|import(\"../size.js\").Size} [tileSize=512] Optional tile size.\n * @property {import(\"../tilegrid/TileGrid.js\").default} [tileGrid] Tile grid.\n * @property {import(\"../Tile.js\").LoadFunction} [tileLoadFunction]\n * Optional function to load a tile given a URL. Could look like this for pbf tiles:\n * ```js\n * function(tile, url) {\n *   tile.setLoader(function(extent, resolution, projection) {\n *     fetch(url).then(function(response) {\n *       response.arrayBuffer().then(function(data) {\n *         const format = tile.getFormat() // ol/format/MVT configured as source format\n *         const features = format.readFeatures(data, {\n *           extent: extent,\n *           featureProjection: projection\n *         });\n *         tile.setFeatures(features);\n *       });\n *     });\n *   });\n * }\n * ```\n * @property {import(\"../Tile.js\").UrlFunction} [tileUrlFunction] Optional function to get tile URL given a tile coordinate and the projection.\n * @property {string} [url] URL template. Must include `{x}`, `{y}` or `{-y}`, and `{z}` placeholders.\n * A `{?-?}` template pattern, for example `subdomain{a-f}.domain.com`, may be\n * used instead of defining each one separately in the `urls` option.\n * @property {number} [transition] A duration for tile opacity\n * transitions in milliseconds. A duration of 0 disables the opacity transition.\n * @property {Array<string>} [urls] An array of URL templates.\n * @property {boolean} [wrapX=true] Whether to wrap the world horizontally.\n * When set to `false`, only one world\n * will be rendered. When set to `true`, tiles will be wrapped horizontally to\n * render multiple worlds.\n * @property {number} [zDirection=1] Indicate which resolution should be used\n * by a renderer if the view resolution does not match any resolution of the tile source.\n * If 0, the nearest resolution will be used. If 1, the nearest lower resolution\n * will be used. If -1, the nearest higher resolution will be used.\n */\n\n\n/**\n * @classdesc\n * Class for layer sources providing vector data divided into a tile grid, to be\n * used with {@link module:ol/layer/VectorTile~VectorTile}. Although this source receives tiles\n * with vector features from the server, it is not meant for feature editing.\n * Features are optimized for rendering, their geometries are clipped at or near\n * tile boundaries and simplified for a view resolution. See\n * {@link module:ol/source/Vector} for vector sources that are suitable for feature\n * editing.\n *\n * @fires import(\"./Tile.js\").TileSourceEvent\n * @api\n */\nclass VectorTile extends UrlTile {\n  /**\n   * @param {!Options} options Vector tile options.\n   */\n  constructor(options) {\n    const projection = options.projection || 'EPSG:3857';\n\n    const extent = options.extent || extentFromProjection(projection);\n\n    const tileGrid = options.tileGrid || createXYZ({\n      extent: extent,\n      maxZoom: options.maxZoom || 22,\n      minZoom: options.minZoom,\n      tileSize: options.tileSize || 512\n    });\n\n    super({\n      attributions: options.attributions,\n      attributionsCollapsible: options.attributionsCollapsible,\n      cacheSize: options.cacheSize,\n      opaque: false,\n      projection: projection,\n      state: options.state,\n      tileGrid: tileGrid,\n      tileLoadFunction: options.tileLoadFunction ? options.tileLoadFunction : defaultLoadFunction,\n      tileUrlFunction: options.tileUrlFunction,\n      url: options.url,\n      urls: options.urls,\n      wrapX: options.wrapX === undefined ? true : options.wrapX,\n      transition: options.transition,\n      zDirection: options.zDirection === undefined ? 1 : options.zDirection\n    });\n\n    /**\n     * @private\n     * @type {import(\"../format/Feature.js\").default}\n     */\n    this.format_ = options.format ? options.format : null;\n\n    /**\n     * @type {Object<string, import(\"./VectorTile\").default>}\n     */\n    this.loadingTiles_ = {};\n\n    /**\n     * @private\n     * @type {Object<string, import(\"../VectorTile.js\").default>}\n     */\n    this.sourceTileByCoordKey_ = {};\n\n    /**\n     * @private\n     * @type {Object<string, Array<import(\"../VectorTile.js\").default>>}\n     */\n    this.sourceTilesByTileKey_ = {};\n\n    /**\n     * @private\n     * @type {boolean}\n     */\n    this.overlaps_ = options.overlaps == undefined ? true : options.overlaps;\n\n    /**\n     * @protected\n     * @type {typeof import(\"../VectorTile.js\").default}\n     */\n    this.tileClass = options.tileClass ? options.tileClass : Tile;\n\n    /**\n     * @private\n     * @type {Object<string, import(\"../tilegrid/TileGrid.js\").default>}\n     */\n    this.tileGrids_ = {};\n\n  }\n\n  /**\n   * @return {boolean} The source can have overlapping geometries.\n   */\n  getOverlaps() {\n    return this.overlaps_;\n  }\n\n  /**\n   * clear {@link module:ol/TileCache~TileCache} and delete all source tiles\n   * @api\n   */\n  clear() {\n    this.tileCache.clear();\n    this.sourceTileByCoordKey_ = {};\n    this.sourceTilesByTileKey_ = {};\n  }\n\n  /**\n   * @param {number} pixelRatio Pixel ratio.\n   * @param {import(\"../proj/Projection\").default} projection Projection.\n   * @param {VectorRenderTile} tile Vector image tile.\n   * @return {Array<import(\"../VectorTile\").default>} Tile keys.\n   */\n  getSourceTiles(pixelRatio, projection, tile) {\n    const urlTileCoord = tile.wrappedTileCoord;\n    const tileGrid = this.getTileGridForProjection(projection);\n    const extent = tileGrid.getTileCoordExtent(urlTileCoord);\n    const z = urlTileCoord[0];\n    const resolution = tileGrid.getResolution(z);\n    // make extent 1 pixel smaller so we don't load tiles for < 0.5 pixel render space\n    bufferExtent(extent, -resolution, extent);\n    const sourceTileGrid = this.tileGrid;\n    const sourceExtent = sourceTileGrid.getExtent();\n    if (sourceExtent) {\n      getIntersection(extent, sourceExtent, extent);\n    }\n    const sourceZ = sourceTileGrid.getZForResolution(resolution, 1);\n    const minZoom = sourceTileGrid.getMinZoom();\n\n    const previousSourceTiles = this.sourceTilesByTileKey_[tile.getKey()];\n    let sourceTiles, covered, empty, loadedZ;\n    if (previousSourceTiles && previousSourceTiles.length > 0 && previousSourceTiles[0].tileCoord[0] === sourceZ) {\n      sourceTiles = previousSourceTiles;\n      covered = true;\n      empty = false;\n      loadedZ = sourceZ;\n    } else {\n      sourceTiles = [];\n      loadedZ = sourceZ + 1;\n      do {\n        --loadedZ;\n        covered = true;\n        empty = true;\n        sourceTileGrid.forEachTileCoord(extent, loadedZ, function(sourceTileCoord) {\n          const coordKey = getKey(sourceTileCoord);\n          let sourceTile;\n          if (coordKey in this.sourceTileByCoordKey_) {\n            sourceTile = this.sourceTileByCoordKey_[coordKey];\n            const state = sourceTile.getState();\n            if (state === TileState.LOADED || state === TileState.ERROR || state === TileState.EMPTY) {\n              empty = empty && state === TileState.EMPTY;\n              sourceTiles.push(sourceTile);\n              return;\n            }\n          } else if (loadedZ === sourceZ) {\n            const tileUrl = this.tileUrlFunction(sourceTileCoord, pixelRatio, projection);\n            if (tileUrl !== undefined) {\n              sourceTile = new this.tileClass(sourceTileCoord, TileState.IDLE, tileUrl,\n                this.format_, this.tileLoadFunction);\n              sourceTile.extent = sourceTileGrid.getTileCoordExtent(sourceTileCoord);\n              sourceTile.projection = projection;\n              sourceTile.resolution = sourceTileGrid.getResolution(sourceTileCoord[0]);\n              this.sourceTileByCoordKey_[coordKey] = sourceTile;\n              empty = false;\n              sourceTile.addEventListener(EventType.CHANGE, this.handleTileChange.bind(this));\n              sourceTile.load();\n            } else {\n              sourceTile = null;\n            }\n          } else {\n            empty = false;\n          }\n          covered = false;\n          if (sourceTile === undefined) {\n            return;\n          }\n          if (sourceTile !== null && tile.getState() === TileState.IDLE) {\n            tile.loadingSourceTiles++;\n            const key = listen(sourceTile, EventType.CHANGE, function() {\n              const state = sourceTile.getState();\n              const sourceTileKey = sourceTile.getKey();\n              if (state === TileState.LOADED || state === TileState.ERROR) {\n                if (state === TileState.LOADED) {\n                  unlistenByKey(key);\n                  tile.loadingSourceTiles--;\n                  delete tile.errorSourceTileKeys[sourceTileKey];\n                } else if (state === TileState.ERROR) {\n                  tile.errorSourceTileKeys[sourceTileKey] = true;\n                }\n                if (tile.loadingSourceTiles - Object.keys(tile.errorSourceTileKeys).length === 0) {\n                  tile.hifi = true;\n                  tile.sourceZ = sourceZ;\n                  tile.setState(isEmpty(tile.errorSourceTileKeys) ? TileState.LOADED : TileState.ERROR);\n                }\n              }\n            });\n          }\n        }.bind(this));\n        if (!covered) {\n          sourceTiles.length = 0;\n        }\n      } while (!covered && loadedZ > minZoom);\n    }\n\n    if (!empty && tile.getState() === TileState.IDLE) {\n      tile.setState(TileState.LOADING);\n    }\n    if (covered || empty) {\n      tile.hifi = sourceZ === loadedZ;\n      tile.sourceZ = loadedZ;\n      if (tile.getState() < TileState.LOADED) {\n        tile.setState(empty ? TileState.EMPTY : TileState.LOADED);\n      } else if (!previousSourceTiles || !equals(sourceTiles, previousSourceTiles)) {\n        this.removeSourceTiles(tile);\n        this.addSourceTiles(tile, sourceTiles);\n      }\n    }\n    return sourceTiles;\n  }\n\n  /**\n   * @param {VectorRenderTile} tile Tile.\n   * @param {Array<import(\"../VectorTile\").default>} sourceTiles Source tiles.\n   */\n  addSourceTiles(tile, sourceTiles) {\n    this.sourceTilesByTileKey_[tile.getKey()] = sourceTiles;\n    for (let i = 0, ii = sourceTiles.length; i < ii; ++i) {\n      sourceTiles[i].consumers++;\n    }\n  }\n\n  /**\n   * @param {VectorRenderTile} tile Tile.\n   */\n  removeSourceTiles(tile) {\n    const tileKey = tile.getKey();\n    if (tileKey in this.sourceTilesByTileKey_) {\n      const sourceTiles = this.sourceTilesByTileKey_[tileKey];\n      for (let i = 0, ii = sourceTiles.length; i < ii; ++i) {\n        const sourceTile = sourceTiles[i];\n        sourceTile.consumers--;\n        if (sourceTile.consumers === 0) {\n          sourceTile.dispose();\n          delete this.sourceTileByCoordKey_[getKey(sourceTile.tileCoord)];\n        }\n      }\n    }\n    delete this.sourceTilesByTileKey_[tileKey];\n  }\n\n  /**\n   * @inheritDoc\n   */\n  getTile(z, x, y, pixelRatio, projection) {\n    const coordKey = getKeyZXY(z, x, y);\n    const key = this.getKey();\n    let tile;\n    if (this.tileCache.containsKey(coordKey)) {\n      tile = /** @type {!import(\"../Tile.js\").default} */ (this.tileCache.get(coordKey));\n      if (tile.key === key) {\n        return tile;\n      }\n    }\n    const tileCoord = [z, x, y];\n    let urlTileCoord = this.getTileCoordForTileUrlFunction(tileCoord, projection);\n    const sourceExtent = this.getTileGrid().getExtent();\n    if (urlTileCoord && sourceExtent) {\n      const tileGrid = this.getTileGridForProjection(projection);\n      const tileExtent = tileGrid.getTileCoordExtent(urlTileCoord);\n      // make extent 1 pixel smaller so we don't load tiles for < 0.5 pixel render space\n      bufferExtent(tileExtent, -tileGrid.getResolution(z), tileExtent);\n      if (!intersects(sourceExtent, tileExtent)) {\n        urlTileCoord = null;\n      }\n    }\n    const newTile = new VectorRenderTile(\n      tileCoord,\n      urlTileCoord !== null ? TileState.IDLE : TileState.EMPTY,\n      urlTileCoord,\n      this.tileGrid,\n      this.getSourceTiles.bind(this, pixelRatio, projection),\n      this.removeSourceTiles.bind(this));\n\n    newTile.key = key;\n    if (tile) {\n      newTile.interimTile = tile;\n      newTile.refreshInterimChain();\n      this.tileCache.replace(coordKey, newTile);\n    } else {\n      this.tileCache.set(coordKey, newTile);\n    }\n    return newTile;\n  }\n\n  /**\n   * @inheritDoc\n   */\n  getTileGridForProjection(projection) {\n    const code = projection.getCode();\n    let tileGrid = this.tileGrids_[code];\n    if (!tileGrid) {\n      // A tile grid that matches the tile size of the source tile grid is more\n      // likely to have 1:1 relationships between source tiles and rendered tiles.\n      const sourceTileGrid = this.tileGrid;\n      tileGrid = this.tileGrids_[code] = createForProjection(projection, undefined,\n        sourceTileGrid ? sourceTileGrid.getTileSize(sourceTileGrid.getMinZoom()) : undefined);\n    }\n    return tileGrid;\n  }\n\n  /**\n   * @inheritDoc\n   */\n  getTilePixelRatio(pixelRatio) {\n    return pixelRatio;\n  }\n\n  /**\n   * @inheritDoc\n   */\n  getTilePixelSize(z, pixelRatio, projection) {\n    const tileGrid = this.getTileGridForProjection(projection);\n    const tileSize = toSize(tileGrid.getTileSize(z), this.tmpSize);\n    return [Math.round(tileSize[0] * pixelRatio), Math.round(tileSize[1] * pixelRatio)];\n  }\n}\n\n\nexport default VectorTile;\n\n\n/**\n * Sets the loader for a tile.\n * @param {import(\"../VectorTile.js\").default} tile Vector tile.\n * @param {string} url URL.\n */\nexport function defaultLoadFunction(tile, url) {\n  const loader = loadFeaturesXhr(url, tile.getFormat(), tile.onLoad.bind(tile), tile.onError.bind(tile));\n  tile.setLoader(loader);\n}\n","/**\n * @module ol/uri\n */\n\n\n/**\n * Appends query parameters to a URI.\n *\n * @param {string} uri The original URI, which may already have query data.\n * @param {!Object} params An object where keys are URI-encoded parameter keys,\n *     and the values are arbitrary types or arrays.\n * @return {string} The new URI.\n */\nexport function appendParams(uri, params) {\n  const keyParams = [];\n  // Skip any null or undefined parameter values\n  Object.keys(params).forEach(function(k) {\n    if (params[k] !== null && params[k] !== undefined) {\n      keyParams.push(k + '=' + encodeURIComponent(params[k]));\n    }\n  });\n  const qs = keyParams.join('&');\n  // remove any trailing ? or &\n  uri = uri.replace(/[?&]$/, '');\n  // append ? or & depending on whether uri has existing parameters\n  uri = uri.indexOf('?') === -1 ? uri + '?' : uri + '&';\n  return uri + qs;\n}\n","/**\n * @module ol/source/WMTSRequestEncoding\n */\n\n/**\n * Request encoding. One of 'KVP', 'REST'.\n * @enum {string}\n */\nexport default {\n  KVP: 'KVP', // see spec §8\n  REST: 'REST' // see spec §10\n};\n","/**\n * @module ol/source/WMTS\n */\n\nimport {expandUrl, createFromTileUrlFunctions, nullTileUrlFunction} from '../tileurlfunction.js';\nimport {find, findIndex, includes} from '../array.js';\nimport {containsExtent} from '../extent.js';\nimport {assign} from '../obj.js';\nimport {get as getProjection, equivalent, transformExtent} from '../proj.js';\nimport TileImage from './TileImage.js';\nimport WMTSRequestEncoding from './WMTSRequestEncoding.js';\nimport {createFromCapabilitiesMatrixSet} from '../tilegrid/WMTS.js';\nimport {appendParams} from '../uri.js';\n\n/**\n * @typedef {Object} Options\n * @property {import(\"./Source.js\").AttributionLike} [attributions] Attributions.\n * @property {number} [cacheSize] Tile cache size. The default depends on the screen size. Will increase if too small.\n * @property {null|string} [crossOrigin] The `crossOrigin` attribute for loaded images.  Note that\n * you must provide a `crossOrigin` value if you want to access pixel data with the Canvas renderer.\n * See https://developer.mozilla.org/en-US/docs/Web/HTML/CORS_enabled_image for more detail.\n * @property {import(\"../tilegrid/WMTS.js\").default} tileGrid Tile grid.\n * @property {import(\"../proj.js\").ProjectionLike} [projection] Projection. Default is the view projection.\n * @property {number} [reprojectionErrorThreshold=0.5] Maximum allowed reprojection error (in pixels).\n * Higher values can increase reprojection performance, but decrease precision.\n * @property {import(\"./WMTSRequestEncoding.js\").default|string} [requestEncoding='KVP'] Request encoding.\n * @property {string} layer Layer name as advertised in the WMTS capabilities.\n * @property {string} style Style name as advertised in the WMTS capabilities.\n * @property {typeof import(\"../ImageTile.js\").default} [tileClass]  Class used to instantiate image tiles. Default is {@link module:ol/ImageTile~ImageTile}.\n * @property {number} [tilePixelRatio=1] The pixel ratio used by the tile service.\n * For example, if the tile service advertizes 256px by 256px tiles but actually sends 512px\n * by 512px images (for retina/hidpi devices) then `tilePixelRatio`\n * should be set to `2`.\n * @property {string} [format='image/jpeg'] Image format. Only used when `requestEncoding` is `'KVP'`.\n * @property {string} [version='1.0.0'] WMTS version.\n * @property {string} matrixSet Matrix set.\n * @property {!Object} [dimensions] Additional \"dimensions\" for tile requests.\n * This is an object with properties named like the advertised WMTS dimensions.\n * @property {string} [url]  A URL for the service.\n * For the RESTful request encoding, this is a URL\n * template.  For KVP encoding, it is normal URL. A `{?-?}` template pattern,\n * for example `subdomain{a-f}.domain.com`, may be used instead of defining\n * each one separately in the `urls` option.\n * @property {import(\"../Tile.js\").LoadFunction} [tileLoadFunction] Optional function to load a tile given a URL. The default is\n * ```js\n * function(imageTile, src) {\n *   imageTile.getImage().src = src;\n * };\n * ```\n * @property {Array<string>} [urls] An array of URLs.\n * Requests will be distributed among the URLs in this array.\n * @property {boolean} [wrapX=false] Whether to wrap the world horizontally.\n * @property {number} [transition] Duration of the opacity transition for rendering.\n * To disable the opacity transition, pass `transition: 0`.\n */\n\n\n/**\n * @classdesc\n * Layer source for tile data from WMTS servers.\n * @api\n */\nclass WMTS extends TileImage {\n  /**\n   * @param {Options} options WMTS options.\n   */\n  constructor(options) {\n\n    // TODO: add support for TileMatrixLimits\n\n    const requestEncoding = options.requestEncoding !== undefined ?\n      /** @type {import(\"./WMTSRequestEncoding.js\").default} */ (options.requestEncoding) :\n      WMTSRequestEncoding.KVP;\n\n    // FIXME: should we create a default tileGrid?\n    // we could issue a getCapabilities xhr to retrieve missing configuration\n    const tileGrid = options.tileGrid;\n\n    let urls = options.urls;\n    if (urls === undefined && options.url !== undefined) {\n      urls = expandUrl(options.url);\n    }\n\n    super({\n      attributions: options.attributions,\n      cacheSize: options.cacheSize,\n      crossOrigin: options.crossOrigin,\n      projection: options.projection,\n      reprojectionErrorThreshold: options.reprojectionErrorThreshold,\n      tileClass: options.tileClass,\n      tileGrid: tileGrid,\n      tileLoadFunction: options.tileLoadFunction,\n      tilePixelRatio: options.tilePixelRatio,\n      tileUrlFunction: nullTileUrlFunction,\n      urls: urls,\n      wrapX: options.wrapX !== undefined ? options.wrapX : false,\n      transition: options.transition\n    });\n\n    /**\n     * @private\n     * @type {string}\n     */\n    this.version_ = options.version !== undefined ? options.version : '1.0.0';\n\n    /**\n     * @private\n     * @type {string}\n     */\n    this.format_ = options.format !== undefined ? options.format : 'image/jpeg';\n\n    /**\n     * @private\n     * @type {!Object}\n     */\n    this.dimensions_ = options.dimensions !== undefined ? options.dimensions : {};\n\n    /**\n     * @private\n     * @type {string}\n     */\n    this.layer_ = options.layer;\n\n    /**\n     * @private\n     * @type {string}\n     */\n    this.matrixSet_ = options.matrixSet;\n\n    /**\n     * @private\n     * @type {string}\n     */\n    this.style_ = options.style;\n\n    // FIXME: should we guess this requestEncoding from options.url(s)\n    //        structure? that would mean KVP only if a template is not provided.\n\n    /**\n     * @private\n     * @type {import(\"./WMTSRequestEncoding.js\").default}\n     */\n    this.requestEncoding_ = requestEncoding;\n\n    this.setKey(this.getKeyForDimensions_());\n\n    if (urls && urls.length > 0) {\n      this.tileUrlFunction = createFromTileUrlFunctions(urls.map(createFromWMTSTemplate.bind(this)));\n    }\n\n  }\n\n  /**\n   * Set the URLs to use for requests.\n   * URLs may contain OCG conform URL Template Variables: {TileMatrix}, {TileRow}, {TileCol}.\n   * @override\n   */\n  setUrls(urls) {\n    this.urls = urls;\n    const key = urls.join('\\n');\n    this.setTileUrlFunction(createFromTileUrlFunctions(urls.map(createFromWMTSTemplate.bind(this))), key);\n  }\n\n  /**\n   * Get the dimensions, i.e. those passed to the constructor through the\n   * \"dimensions\" option, and possibly updated using the updateDimensions\n   * method.\n   * @return {!Object} Dimensions.\n   * @api\n   */\n  getDimensions() {\n    return this.dimensions_;\n  }\n\n\n  /**\n   * Return the image format of the WMTS source.\n   * @return {string} Format.\n   * @api\n   */\n  getFormat() {\n    return this.format_;\n  }\n\n\n  /**\n   * Return the layer of the WMTS source.\n   * @return {string} Layer.\n   * @api\n   */\n  getLayer() {\n    return this.layer_;\n  }\n\n\n  /**\n   * Return the matrix set of the WMTS source.\n   * @return {string} MatrixSet.\n   * @api\n   */\n  getMatrixSet() {\n    return this.matrixSet_;\n  }\n\n\n  /**\n   * Return the request encoding, either \"KVP\" or \"REST\".\n   * @return {import(\"./WMTSRequestEncoding.js\").default} Request encoding.\n   * @api\n   */\n  getRequestEncoding() {\n    return this.requestEncoding_;\n  }\n\n\n  /**\n   * Return the style of the WMTS source.\n   * @return {string} Style.\n   * @api\n   */\n  getStyle() {\n    return this.style_;\n  }\n\n\n  /**\n   * Return the version of the WMTS source.\n   * @return {string} Version.\n   * @api\n   */\n  getVersion() {\n    return this.version_;\n  }\n\n\n  /**\n   * @private\n   * @return {string} The key for the current dimensions.\n   */\n  getKeyForDimensions_() {\n    let i = 0;\n    const res = [];\n    for (const key in this.dimensions_) {\n      res[i++] = key + '-' + this.dimensions_[key];\n    }\n    return res.join('/');\n  }\n\n\n  /**\n   * Update the dimensions.\n   * @param {Object} dimensions Dimensions.\n   * @api\n   */\n  updateDimensions(dimensions) {\n    assign(this.dimensions_, dimensions);\n    this.setKey(this.getKeyForDimensions_());\n  }\n\n}\n\nexport default WMTS;\n\n/**\n * Generate source options from a capabilities object.\n * @param {Object} wmtsCap An object representing the capabilities document.\n * @param {!Object} config Configuration properties for the layer.  Defaults for\n *                  the layer will apply if not provided.\n *\n * Required config properties:\n *  - layer - {string} The layer identifier.\n *\n * Optional config properties:\n *  - matrixSet - {string} The matrix set identifier, required if there is\n *       more than one matrix set in the layer capabilities.\n *  - projection - {string} The desired CRS when no matrixSet is specified.\n *       eg: \"EPSG:3857\". If the desired projection is not available,\n *       an error is thrown.\n *  - requestEncoding - {string} url encoding format for the layer. Default is\n *       the first tile url format found in the GetCapabilities response.\n *  - style - {string} The name of the style\n *  - format - {string} Image format for the layer. Default is the first\n *       format returned in the GetCapabilities response.\n *  - crossOrigin - {string|null|undefined} Cross origin. Default is `undefined`.\n * @return {?Options} WMTS source options object or `null` if the layer was not found.\n * @api\n */\nexport function optionsFromCapabilities(wmtsCap, config) {\n  const layers = wmtsCap['Contents']['Layer'];\n  const l = find(layers, function(elt, index, array) {\n    return elt['Identifier'] == config['layer'];\n  });\n  if (l === null) {\n    return null;\n  }\n  const tileMatrixSets = wmtsCap['Contents']['TileMatrixSet'];\n  let idx;\n  if (l['TileMatrixSetLink'].length > 1) {\n    if ('projection' in config) {\n      idx = findIndex(l['TileMatrixSetLink'],\n        function(elt, index, array) {\n          const tileMatrixSet = find(tileMatrixSets, function(el) {\n            return el['Identifier'] == elt['TileMatrixSet'];\n          });\n          const supportedCRS = tileMatrixSet['SupportedCRS'];\n          const proj1 = getProjection(supportedCRS.replace(/urn:ogc:def:crs:(\\w+):(.*:)?(\\w+)$/, '$1:$3')) ||\n                getProjection(supportedCRS);\n          const proj2 = getProjection(config['projection']);\n          if (proj1 && proj2) {\n            return equivalent(proj1, proj2);\n          } else {\n            return supportedCRS == config['projection'];\n          }\n        });\n    } else {\n      idx = findIndex(l['TileMatrixSetLink'],\n        function(elt, index, array) {\n          return elt['TileMatrixSet'] == config['matrixSet'];\n        });\n    }\n  } else {\n    idx = 0;\n  }\n  if (idx < 0) {\n    idx = 0;\n  }\n  const matrixSet = /** @type {string} */\n    (l['TileMatrixSetLink'][idx]['TileMatrixSet']);\n  const matrixLimits = /** @type {Array<Object>} */\n    (l['TileMatrixSetLink'][idx]['TileMatrixSetLimits']);\n\n  let format = /** @type {string} */ (l['Format'][0]);\n  if ('format' in config) {\n    format = config['format'];\n  }\n  idx = findIndex(l['Style'], function(elt, index, array) {\n    if ('style' in config) {\n      return elt['Title'] == config['style'];\n    } else {\n      return elt['isDefault'];\n    }\n  });\n  if (idx < 0) {\n    idx = 0;\n  }\n  const style = /** @type {string} */ (l['Style'][idx]['Identifier']);\n\n  const dimensions = {};\n  if ('Dimension' in l) {\n    l['Dimension'].forEach(function(elt, index, array) {\n      const key = elt['Identifier'];\n      let value = elt['Default'];\n      if (value === undefined) {\n        value = elt['Value'][0];\n      }\n      dimensions[key] = value;\n    });\n  }\n\n  const matrixSets = wmtsCap['Contents']['TileMatrixSet'];\n  const matrixSetObj = find(matrixSets, function(elt, index, array) {\n    return elt['Identifier'] == matrixSet;\n  });\n\n  let projection;\n  const code = matrixSetObj['SupportedCRS'];\n  if (code) {\n    projection = getProjection(code.replace(/urn:ogc:def:crs:(\\w+):(.*:)?(\\w+)$/, '$1:$3')) ||\n        getProjection(code);\n  }\n  if ('projection' in config) {\n    const projConfig = getProjection(config['projection']);\n    if (projConfig) {\n      if (!projection || equivalent(projConfig, projection)) {\n        projection = projConfig;\n      }\n    }\n  }\n\n  const wgs84BoundingBox = l['WGS84BoundingBox'];\n  let extent, wrapX;\n  if (wgs84BoundingBox !== undefined) {\n    const wgs84ProjectionExtent = getProjection('EPSG:4326').getExtent();\n    wrapX = (wgs84BoundingBox[0] == wgs84ProjectionExtent[0] &&\n        wgs84BoundingBox[2] == wgs84ProjectionExtent[2]);\n    extent = transformExtent(\n      wgs84BoundingBox, 'EPSG:4326', projection);\n    const projectionExtent = projection.getExtent();\n    if (projectionExtent) {\n      // If possible, do a sanity check on the extent - it should never be\n      // bigger than the validity extent of the projection of a matrix set.\n      if (!containsExtent(projectionExtent, extent)) {\n        extent = undefined;\n      }\n    }\n  }\n\n  const tileGrid = createFromCapabilitiesMatrixSet(matrixSetObj, extent, matrixLimits);\n\n  /** @type {!Array<string>} */\n  const urls = [];\n  let requestEncoding = config['requestEncoding'];\n  requestEncoding = requestEncoding !== undefined ? requestEncoding : '';\n\n  if ('OperationsMetadata' in wmtsCap && 'GetTile' in wmtsCap['OperationsMetadata']) {\n    const gets = wmtsCap['OperationsMetadata']['GetTile']['DCP']['HTTP']['Get'];\n\n    for (let i = 0, ii = gets.length; i < ii; ++i) {\n      if (gets[i]['Constraint']) {\n        const constraint = find(gets[i]['Constraint'], function(element) {\n          return element['name'] == 'GetEncoding';\n        });\n        const encodings = constraint['AllowedValues']['Value'];\n\n        if (requestEncoding === '') {\n          // requestEncoding not provided, use the first encoding from the list\n          requestEncoding = encodings[0];\n        }\n        if (requestEncoding === WMTSRequestEncoding.KVP) {\n          if (includes(encodings, WMTSRequestEncoding.KVP)) {\n            urls.push(/** @type {string} */ (gets[i]['href']));\n          }\n        } else {\n          break;\n        }\n      } else if (gets[i]['href']) {\n        requestEncoding = WMTSRequestEncoding.KVP;\n        urls.push(/** @type {string} */ (gets[i]['href']));\n      }\n    }\n  }\n  if (urls.length === 0) {\n    requestEncoding = WMTSRequestEncoding.REST;\n    l['ResourceURL'].forEach(function(element) {\n      if (element['resourceType'] === 'tile') {\n        format = element['format'];\n        urls.push(/** @type {string} */ (element['template']));\n      }\n    });\n  }\n\n  return {\n    urls: urls,\n    layer: config['layer'],\n    matrixSet: matrixSet,\n    format: format,\n    projection: projection,\n    requestEncoding: requestEncoding,\n    tileGrid: tileGrid,\n    style: style,\n    dimensions: dimensions,\n    wrapX: wrapX,\n    crossOrigin: config['crossOrigin']\n  };\n}\n\n/**\n * @param {string} template Template.\n * @return {import(\"../Tile.js\").UrlFunction} Tile URL function.\n * @this {WMTS}\n */\nfunction createFromWMTSTemplate(template) {\n  const requestEncoding = this.requestEncoding_;\n\n  // context property names are lower case to allow for a case insensitive\n  // replacement as some services use different naming conventions\n  const context = {\n    'layer': this.layer_,\n    'style': this.style_,\n    'tilematrixset': this.matrixSet_\n  };\n\n  if (requestEncoding == WMTSRequestEncoding.KVP) {\n    assign(context, {\n      'Service': 'WMTS',\n      'Request': 'GetTile',\n      'Version': this.version_,\n      'Format': this.format_\n    });\n  }\n\n  // TODO: we may want to create our own appendParams function so that params\n  // order conforms to wmts spec guidance, and so that we can avoid to escape\n  // special template params\n\n  template = (requestEncoding == WMTSRequestEncoding.KVP) ?\n    appendParams(template, context) :\n    template.replace(/\\{(\\w+?)\\}/g, function(m, p) {\n      return (p.toLowerCase() in context) ? context[p.toLowerCase()] : m;\n    });\n\n  const tileGrid = /** @type {import(\"../tilegrid/WMTS.js\").default} */ (\n    this.tileGrid);\n  const dimensions = this.dimensions_;\n\n  return (\n    /**\n     * @param {import(\"../tilecoord.js\").TileCoord} tileCoord Tile coordinate.\n     * @param {number} pixelRatio Pixel ratio.\n     * @param {import(\"../proj/Projection.js\").default} projection Projection.\n     * @return {string|undefined} Tile URL.\n     */\n    function(tileCoord, pixelRatio, projection) {\n      if (!tileCoord) {\n        return undefined;\n      } else {\n        const localContext = {\n          'TileMatrix': tileGrid.getMatrixId(tileCoord[0]),\n          'TileCol': tileCoord[1],\n          'TileRow': tileCoord[2]\n        };\n        assign(localContext, dimensions);\n        let url = template;\n        if (requestEncoding == WMTSRequestEncoding.KVP) {\n          url = appendParams(url, localContext);\n        } else {\n          url = url.replace(/\\{(\\w+?)\\}/g, function(m, p) {\n            return localContext[p];\n          });\n        }\n        return url;\n      }\n    }\n  );\n}\n","/**\n * @module ol/geom/flat/closest\n */\nimport {lerp, squaredDistance as squaredDx} from '../../math.js';\n\n\n/**\n * Returns the point on the 2D line segment flatCoordinates[offset1] to\n * flatCoordinates[offset2] that is closest to the point (x, y).  Extra\n * dimensions are linearly interpolated.\n * @param {Array<number>} flatCoordinates Flat coordinates.\n * @param {number} offset1 Offset 1.\n * @param {number} offset2 Offset 2.\n * @param {number} stride Stride.\n * @param {number} x X.\n * @param {number} y Y.\n * @param {Array<number>} closestPoint Closest point.\n */\nfunction assignClosest(flatCoordinates, offset1, offset2, stride, x, y, closestPoint) {\n  const x1 = flatCoordinates[offset1];\n  const y1 = flatCoordinates[offset1 + 1];\n  const dx = flatCoordinates[offset2] - x1;\n  const dy = flatCoordinates[offset2 + 1] - y1;\n  let offset;\n  if (dx === 0 && dy === 0) {\n    offset = offset1;\n  } else {\n    const t = ((x - x1) * dx + (y - y1) * dy) / (dx * dx + dy * dy);\n    if (t > 1) {\n      offset = offset2;\n    } else if (t > 0) {\n      for (let i = 0; i < stride; ++i) {\n        closestPoint[i] = lerp(flatCoordinates[offset1 + i],\n          flatCoordinates[offset2 + i], t);\n      }\n      closestPoint.length = stride;\n      return;\n    } else {\n      offset = offset1;\n    }\n  }\n  for (let i = 0; i < stride; ++i) {\n    closestPoint[i] = flatCoordinates[offset + i];\n  }\n  closestPoint.length = stride;\n}\n\n\n/**\n * Return the squared of the largest distance between any pair of consecutive\n * coordinates.\n * @param {Array<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {number} end End.\n * @param {number} stride Stride.\n * @param {number} max Max squared delta.\n * @return {number} Max squared delta.\n */\nexport function maxSquaredDelta(flatCoordinates, offset, end, stride, max) {\n  let x1 = flatCoordinates[offset];\n  let y1 = flatCoordinates[offset + 1];\n  for (offset += stride; offset < end; offset += stride) {\n    const x2 = flatCoordinates[offset];\n    const y2 = flatCoordinates[offset + 1];\n    const squaredDelta = squaredDx(x1, y1, x2, y2);\n    if (squaredDelta > max) {\n      max = squaredDelta;\n    }\n    x1 = x2;\n    y1 = y2;\n  }\n  return max;\n}\n\n\n/**\n * @param {Array<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {Array<number>} ends Ends.\n * @param {number} stride Stride.\n * @param {number} max Max squared delta.\n * @return {number} Max squared delta.\n */\nexport function arrayMaxSquaredDelta(flatCoordinates, offset, ends, stride, max) {\n  for (let i = 0, ii = ends.length; i < ii; ++i) {\n    const end = ends[i];\n    max = maxSquaredDelta(\n      flatCoordinates, offset, end, stride, max);\n    offset = end;\n  }\n  return max;\n}\n\n\n/**\n * @param {Array<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {Array<Array<number>>} endss Endss.\n * @param {number} stride Stride.\n * @param {number} max Max squared delta.\n * @return {number} Max squared delta.\n */\nexport function multiArrayMaxSquaredDelta(flatCoordinates, offset, endss, stride, max) {\n  for (let i = 0, ii = endss.length; i < ii; ++i) {\n    const ends = endss[i];\n    max = arrayMaxSquaredDelta(\n      flatCoordinates, offset, ends, stride, max);\n    offset = ends[ends.length - 1];\n  }\n  return max;\n}\n\n\n/**\n * @param {Array<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {number} end End.\n * @param {number} stride Stride.\n * @param {number} maxDelta Max delta.\n * @param {boolean} isRing Is ring.\n * @param {number} x X.\n * @param {number} y Y.\n * @param {Array<number>} closestPoint Closest point.\n * @param {number} minSquaredDistance Minimum squared distance.\n * @param {Array<number>=} opt_tmpPoint Temporary point object.\n * @return {number} Minimum squared distance.\n */\nexport function assignClosestPoint(flatCoordinates, offset, end,\n  stride, maxDelta, isRing, x, y, closestPoint, minSquaredDistance,\n  opt_tmpPoint) {\n  if (offset == end) {\n    return minSquaredDistance;\n  }\n  let i, squaredDistance;\n  if (maxDelta === 0) {\n    // All points are identical, so just test the first point.\n    squaredDistance = squaredDx(\n      x, y, flatCoordinates[offset], flatCoordinates[offset + 1]);\n    if (squaredDistance < minSquaredDistance) {\n      for (i = 0; i < stride; ++i) {\n        closestPoint[i] = flatCoordinates[offset + i];\n      }\n      closestPoint.length = stride;\n      return squaredDistance;\n    } else {\n      return minSquaredDistance;\n    }\n  }\n  const tmpPoint = opt_tmpPoint ? opt_tmpPoint : [NaN, NaN];\n  let index = offset + stride;\n  while (index < end) {\n    assignClosest(\n      flatCoordinates, index - stride, index, stride, x, y, tmpPoint);\n    squaredDistance = squaredDx(x, y, tmpPoint[0], tmpPoint[1]);\n    if (squaredDistance < minSquaredDistance) {\n      minSquaredDistance = squaredDistance;\n      for (i = 0; i < stride; ++i) {\n        closestPoint[i] = tmpPoint[i];\n      }\n      closestPoint.length = stride;\n      index += stride;\n    } else {\n      // Skip ahead multiple points, because we know that all the skipped\n      // points cannot be any closer than the closest point we have found so\n      // far.  We know this because we know how close the current point is, how\n      // close the closest point we have found so far is, and the maximum\n      // distance between consecutive points.  For example, if we're currently\n      // at distance 10, the best we've found so far is 3, and that the maximum\n      // distance between consecutive points is 2, then we'll need to skip at\n      // least (10 - 3) / 2 == 3 (rounded down) points to have any chance of\n      // finding a closer point.  We use Math.max(..., 1) to ensure that we\n      // always advance at least one point, to avoid an infinite loop.\n      index += stride * Math.max(\n        ((Math.sqrt(squaredDistance) -\n            Math.sqrt(minSquaredDistance)) / maxDelta) | 0, 1);\n    }\n  }\n  if (isRing) {\n    // Check the closing segment.\n    assignClosest(\n      flatCoordinates, end - stride, offset, stride, x, y, tmpPoint);\n    squaredDistance = squaredDx(x, y, tmpPoint[0], tmpPoint[1]);\n    if (squaredDistance < minSquaredDistance) {\n      minSquaredDistance = squaredDistance;\n      for (i = 0; i < stride; ++i) {\n        closestPoint[i] = tmpPoint[i];\n      }\n      closestPoint.length = stride;\n    }\n  }\n  return minSquaredDistance;\n}\n\n\n/**\n * @param {Array<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {Array<number>} ends Ends.\n * @param {number} stride Stride.\n * @param {number} maxDelta Max delta.\n * @param {boolean} isRing Is ring.\n * @param {number} x X.\n * @param {number} y Y.\n * @param {Array<number>} closestPoint Closest point.\n * @param {number} minSquaredDistance Minimum squared distance.\n * @param {Array<number>=} opt_tmpPoint Temporary point object.\n * @return {number} Minimum squared distance.\n */\nexport function assignClosestArrayPoint(flatCoordinates, offset, ends,\n  stride, maxDelta, isRing, x, y, closestPoint, minSquaredDistance,\n  opt_tmpPoint) {\n  const tmpPoint = opt_tmpPoint ? opt_tmpPoint : [NaN, NaN];\n  for (let i = 0, ii = ends.length; i < ii; ++i) {\n    const end = ends[i];\n    minSquaredDistance = assignClosestPoint(\n      flatCoordinates, offset, end, stride,\n      maxDelta, isRing, x, y, closestPoint, minSquaredDistance, tmpPoint);\n    offset = end;\n  }\n  return minSquaredDistance;\n}\n\n\n/**\n * @param {Array<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {Array<Array<number>>} endss Endss.\n * @param {number} stride Stride.\n * @param {number} maxDelta Max delta.\n * @param {boolean} isRing Is ring.\n * @param {number} x X.\n * @param {number} y Y.\n * @param {Array<number>} closestPoint Closest point.\n * @param {number} minSquaredDistance Minimum squared distance.\n * @param {Array<number>=} opt_tmpPoint Temporary point object.\n * @return {number} Minimum squared distance.\n */\nexport function assignClosestMultiArrayPoint(flatCoordinates, offset,\n  endss, stride, maxDelta, isRing, x, y, closestPoint, minSquaredDistance,\n  opt_tmpPoint) {\n  const tmpPoint = opt_tmpPoint ? opt_tmpPoint : [NaN, NaN];\n  for (let i = 0, ii = endss.length; i < ii; ++i) {\n    const ends = endss[i];\n    minSquaredDistance = assignClosestArrayPoint(\n      flatCoordinates, offset, ends, stride,\n      maxDelta, isRing, x, y, closestPoint, minSquaredDistance, tmpPoint);\n    offset = ends[ends.length - 1];\n  }\n  return minSquaredDistance;\n}\n","/**\n * @module ol/reproj/Image\n */\nimport {ERROR_THRESHOLD} from './common.js';\n\nimport ImageBase from '../ImageBase.js';\nimport ImageState from '../ImageState.js';\nimport {listen, unlistenByKey} from '../events.js';\nimport EventType from '../events/EventType.js';\nimport {getCenter, getIntersection, getHeight, getWidth} from '../extent.js';\nimport {calculateSourceResolution, render as renderReprojected} from '../reproj.js';\nimport Triangulation from './Triangulation.js';\n\n\n/**\n * @typedef {function(import(\"../extent.js\").Extent, number, number) : import(\"../ImageBase.js\").default} FunctionType\n */\n\n\n/**\n * @classdesc\n * Class encapsulating single reprojected image.\n * See {@link module:ol/source/Image~ImageSource}.\n */\nclass ReprojImage extends ImageBase {\n  /**\n   * @param {import(\"../proj/Projection.js\").default} sourceProj Source projection (of the data).\n   * @param {import(\"../proj/Projection.js\").default} targetProj Target projection.\n   * @param {import(\"../extent.js\").Extent} targetExtent Target extent.\n   * @param {number} targetResolution Target resolution.\n   * @param {number} pixelRatio Pixel ratio.\n   * @param {FunctionType} getImageFunction\n   *     Function returning source images (extent, resolution, pixelRatio).\n   */\n  constructor(sourceProj, targetProj, targetExtent, targetResolution, pixelRatio, getImageFunction) {\n    const maxSourceExtent = sourceProj.getExtent();\n    const maxTargetExtent = targetProj.getExtent();\n\n    const limitedTargetExtent = maxTargetExtent ?\n      getIntersection(targetExtent, maxTargetExtent) : targetExtent;\n\n    const targetCenter = getCenter(limitedTargetExtent);\n    const sourceResolution = calculateSourceResolution(\n      sourceProj, targetProj, targetCenter, targetResolution);\n\n    const errorThresholdInPixels = ERROR_THRESHOLD;\n\n    const triangulation = new Triangulation(\n      sourceProj, targetProj, limitedTargetExtent, maxSourceExtent,\n      sourceResolution * errorThresholdInPixels);\n\n    const sourceExtent = triangulation.calculateSourceExtent();\n    const sourceImage = getImageFunction(sourceExtent, sourceResolution, pixelRatio);\n    const state = sourceImage ? ImageState.IDLE : ImageState.EMPTY;\n    const sourcePixelRatio = sourceImage ? sourceImage.getPixelRatio() : 1;\n\n    super(targetExtent, targetResolution, sourcePixelRatio, state);\n\n    /**\n     * @private\n     * @type {import(\"../proj/Projection.js\").default}\n     */\n    this.targetProj_ = targetProj;\n\n    /**\n     * @private\n     * @type {import(\"../extent.js\").Extent}\n     */\n    this.maxSourceExtent_ = maxSourceExtent;\n\n    /**\n     * @private\n     * @type {!import(\"./Triangulation.js\").default}\n     */\n    this.triangulation_ = triangulation;\n\n    /**\n     * @private\n     * @type {number}\n     */\n    this.targetResolution_ = targetResolution;\n\n    /**\n     * @private\n     * @type {import(\"../extent.js\").Extent}\n     */\n    this.targetExtent_ = targetExtent;\n\n    /**\n     * @private\n     * @type {import(\"../ImageBase.js\").default}\n     */\n    this.sourceImage_ = sourceImage;\n\n    /**\n     * @private\n     * @type {number}\n     */\n    this.sourcePixelRatio_ = sourcePixelRatio;\n\n    /**\n     * @private\n     * @type {HTMLCanvasElement}\n     */\n    this.canvas_ = null;\n\n    /**\n     * @private\n     * @type {?import(\"../events.js\").EventsKey}\n     */\n    this.sourceListenerKey_ = null;\n  }\n\n  /**\n   * @inheritDoc\n   */\n  disposeInternal() {\n    if (this.state == ImageState.LOADING) {\n      this.unlistenSource_();\n    }\n    super.disposeInternal();\n  }\n\n  /**\n   * @inheritDoc\n   */\n  getImage() {\n    return this.canvas_;\n  }\n\n  /**\n   * @return {import(\"../proj/Projection.js\").default} Projection.\n   */\n  getProjection() {\n    return this.targetProj_;\n  }\n\n  /**\n   * @private\n   */\n  reproject_() {\n    const sourceState = this.sourceImage_.getState();\n    if (sourceState == ImageState.LOADED) {\n      const width = getWidth(this.targetExtent_) / this.targetResolution_;\n      const height = getHeight(this.targetExtent_) / this.targetResolution_;\n\n      this.canvas_ = renderReprojected(width, height, this.sourcePixelRatio_,\n        this.sourceImage_.getResolution(), this.maxSourceExtent_,\n        this.targetResolution_, this.targetExtent_, this.triangulation_, [{\n          extent: this.sourceImage_.getExtent(),\n          image: this.sourceImage_.getImage()\n        }], 0);\n    }\n    this.state = sourceState;\n    this.changed();\n  }\n\n  /**\n   * @inheritDoc\n   */\n  load() {\n    if (this.state == ImageState.IDLE) {\n      this.state = ImageState.LOADING;\n      this.changed();\n\n      const sourceState = this.sourceImage_.getState();\n      if (sourceState == ImageState.LOADED || sourceState == ImageState.ERROR) {\n        this.reproject_();\n      } else {\n        this.sourceListenerKey_ = listen(this.sourceImage_,\n          EventType.CHANGE, function(e) {\n            const sourceState = this.sourceImage_.getState();\n            if (sourceState == ImageState.LOADED || sourceState == ImageState.ERROR) {\n              this.unlistenSource_();\n              this.reproject_();\n            }\n          }, this);\n        this.sourceImage_.load();\n      }\n    }\n  }\n\n  /**\n   * @private\n   */\n  unlistenSource_() {\n    unlistenByKey(/** @type {!import(\"../events.js\").EventsKey} */ (this.sourceListenerKey_));\n    this.sourceListenerKey_ = null;\n  }\n}\n\n\nexport default ReprojImage;\n","/**\n * @module ol/source/Image\n */\nimport {abstract} from '../util.js';\nimport {ENABLE_RASTER_REPROJECTION} from '../reproj/common.js';\nimport ImageState from '../ImageState.js';\nimport {linearFindNearest} from '../array.js';\nimport Event from '../events/Event.js';\nimport {equals} from '../extent.js';\nimport {equivalent} from '../proj.js';\nimport ReprojImage from '../reproj/Image.js';\nimport Source from './Source.js';\n\n\n/**\n * @enum {string}\n */\nconst ImageSourceEventType = {\n\n  /**\n   * Triggered when an image starts loading.\n   * @event module:ol/source/Image.ImageSourceEvent#imageloadstart\n   * @api\n   */\n  IMAGELOADSTART: 'imageloadstart',\n\n  /**\n   * Triggered when an image finishes loading.\n   * @event module:ol/source/Image.ImageSourceEvent#imageloadend\n   * @api\n   */\n  IMAGELOADEND: 'imageloadend',\n\n  /**\n   * Triggered if image loading results in an error.\n   * @event module:ol/source/Image.ImageSourceEvent#imageloaderror\n   * @api\n   */\n  IMAGELOADERROR: 'imageloaderror'\n\n};\n\n\n/**\n * @classdesc\n * Events emitted by {@link module:ol/source/Image~ImageSource} instances are instances of this\n * type.\n */\nexport class ImageSourceEvent extends Event {\n  /**\n   * @param {string} type Type.\n   * @param {import(\"../Image.js\").default} image The image.\n   */\n  constructor(type, image) {\n\n    super(type);\n\n    /**\n     * The image related to the event.\n     * @type {import(\"../Image.js\").default}\n     * @api\n     */\n    this.image = image;\n\n  }\n\n}\n\n\n/**\n * @typedef {Object} Options\n * @property {import(\"./Source.js\").AttributionLike} [attributions]\n * @property {import(\"../proj.js\").ProjectionLike} [projection]\n * @property {Array<number>} [resolutions]\n * @property {import(\"./State.js\").default} [state]\n */\n\n\n/**\n * @classdesc\n * Abstract base class; normally only used for creating subclasses and not\n * instantiated in apps.\n * Base class for sources providing a single image.\n * @abstract\n * @fires module:ol/source/Image.ImageSourceEvent\n * @api\n */\nclass ImageSource extends Source {\n  /**\n   * @param {Options} options Single image source options.\n   */\n  constructor(options) {\n    super({\n      attributions: options.attributions,\n      projection: options.projection,\n      state: options.state\n    });\n\n    /**\n     * @private\n     * @type {Array<number>}\n     */\n    this.resolutions_ = options.resolutions !== undefined ?\n      options.resolutions : null;\n\n\n    /**\n     * @private\n     * @type {import(\"../reproj/Image.js\").default}\n     */\n    this.reprojectedImage_ = null;\n\n\n    /**\n     * @private\n     * @type {number}\n     */\n    this.reprojectedRevision_ = 0;\n  }\n\n  /**\n   * @return {Array<number>} Resolutions.\n   * @override\n   */\n  getResolutions() {\n    return this.resolutions_;\n  }\n\n  /**\n   * @protected\n   * @param {number} resolution Resolution.\n   * @return {number} Resolution.\n   */\n  findNearestResolution(resolution) {\n    if (this.resolutions_) {\n      const idx = linearFindNearest(this.resolutions_, resolution, 0);\n      resolution = this.resolutions_[idx];\n    }\n    return resolution;\n  }\n\n  /**\n   * @param {import(\"../extent.js\").Extent} extent Extent.\n   * @param {number} resolution Resolution.\n   * @param {number} pixelRatio Pixel ratio.\n   * @param {import(\"../proj/Projection.js\").default} projection Projection.\n   * @return {import(\"../ImageBase.js\").default} Single image.\n   */\n  getImage(extent, resolution, pixelRatio, projection) {\n    const sourceProjection = this.getProjection();\n    if (!ENABLE_RASTER_REPROJECTION ||\n        !sourceProjection ||\n        !projection ||\n        equivalent(sourceProjection, projection)) {\n      if (sourceProjection) {\n        projection = sourceProjection;\n      }\n      return this.getImageInternal(extent, resolution, pixelRatio, projection);\n    } else {\n      if (this.reprojectedImage_) {\n        if (this.reprojectedRevision_ == this.getRevision() &&\n            equivalent(\n              this.reprojectedImage_.getProjection(), projection) &&\n            this.reprojectedImage_.getResolution() == resolution &&\n            equals(this.reprojectedImage_.getExtent(), extent)) {\n          return this.reprojectedImage_;\n        }\n        this.reprojectedImage_.dispose();\n        this.reprojectedImage_ = null;\n      }\n\n      this.reprojectedImage_ = new ReprojImage(\n        sourceProjection, projection, extent, resolution, pixelRatio,\n        function(extent, resolution, pixelRatio) {\n          return this.getImageInternal(extent, resolution,\n            pixelRatio, sourceProjection);\n        }.bind(this));\n      this.reprojectedRevision_ = this.getRevision();\n\n      return this.reprojectedImage_;\n    }\n  }\n\n  /**\n   * @abstract\n   * @param {import(\"../extent.js\").Extent} extent Extent.\n   * @param {number} resolution Resolution.\n   * @param {number} pixelRatio Pixel ratio.\n   * @param {import(\"../proj/Projection.js\").default} projection Projection.\n   * @return {import(\"../ImageBase.js\").default} Single image.\n   * @protected\n   */\n  getImageInternal(extent, resolution, pixelRatio, projection) {\n    return abstract();\n  }\n\n  /**\n   * Handle image change events.\n   * @param {import(\"../events/Event.js\").default} event Event.\n   * @protected\n   */\n  handleImageChange(event) {\n    const image = /** @type {import(\"../Image.js\").default} */ (event.target);\n    switch (image.getState()) {\n      case ImageState.LOADING:\n        this.loading = true;\n        this.dispatchEvent(\n          new ImageSourceEvent(ImageSourceEventType.IMAGELOADSTART,\n            image));\n        break;\n      case ImageState.LOADED:\n        this.loading = false;\n        this.dispatchEvent(\n          new ImageSourceEvent(ImageSourceEventType.IMAGELOADEND,\n            image));\n        break;\n      case ImageState.ERROR:\n        this.loading = false;\n        this.dispatchEvent(\n          new ImageSourceEvent(ImageSourceEventType.IMAGELOADERROR,\n            image));\n        break;\n      default:\n        // pass\n    }\n  }\n}\n\n\n/**\n * Default image load function for image sources that use import(\"../Image.js\").Image image\n * instances.\n * @param {import(\"../Image.js\").default} image Image.\n * @param {string} src Source.\n */\nexport function defaultImageLoadFunction(image, src) {\n  /** @type {HTMLImageElement|HTMLVideoElement} */ (image.getImage()).src = src;\n}\n\nexport default ImageSource;\n","/**\n * @module ol/format/KML\n */\nimport Feature from '../Feature.js';\nimport {extend, includes} from '../array.js';\nimport {assert} from '../asserts.js';\nimport {asArray} from '../color.js';\nimport {transformGeometryWithOptions} from './Feature.js';\nimport XMLFeature from './XMLFeature.js';\nimport {readDecimal, readBoolean, readString, writeStringTextNode, writeCDATASection, writeDecimalTextNode, writeBooleanTextNode} from './xsd.js';\nimport GeometryCollection from '../geom/GeometryCollection.js';\nimport GeometryLayout from '../geom/GeometryLayout.js';\nimport GeometryType from '../geom/GeometryType.js';\nimport LineString from '../geom/LineString.js';\nimport MultiLineString from '../geom/MultiLineString.js';\nimport MultiPoint from '../geom/MultiPoint.js';\nimport MultiPolygon from '../geom/MultiPolygon.js';\nimport Point from '../geom/Point.js';\nimport Polygon from '../geom/Polygon.js';\nimport {toRadians} from '../math.js';\nimport {get as getProjection} from '../proj.js';\nimport Fill from '../style/Fill.js';\nimport Icon from '../style/Icon.js';\nimport IconAnchorUnits from '../style/IconAnchorUnits.js';\nimport IconOrigin from '../style/IconOrigin.js';\nimport Stroke from '../style/Stroke.js';\nimport Style from '../style/Style.js';\nimport Text from '../style/Text.js';\nimport {createElementNS, getAllTextContent, isDocument, makeArrayExtender,\n  makeArrayPusher, makeChildAppender, makeObjectPropertySetter,\n  makeReplacer, makeSequence, makeSimpleNodeFactory, makeStructureNS,\n  OBJECT_PROPERTY_NODE_FACTORY, parse, parseNode, pushParseAndPop,\n  pushSerializeAndPop, XML_SCHEMA_INSTANCE_URI} from '../xml.js';\n\n/**\n * @typedef {Object} Vec2\n * @property {number} x\n * @property {IconAnchorUnits} xunits\n * @property {number} y\n * @property {IconAnchorUnits} yunits\n * @property {IconOrigin} origin\n */\n\n/**\n * @typedef {Object} GxTrackObject\n * @property {Array<number>} flatCoordinates\n * @property {Array<number>} whens\n */\n\n\n/**\n * @const\n * @type {Array<string>}\n */\nconst GX_NAMESPACE_URIS = [\n  'http://www.google.com/kml/ext/2.2'\n];\n\n\n/**\n * @const\n * @type {Array<null|string>}\n */\nconst NAMESPACE_URIS = [\n  null,\n  'http://earth.google.com/kml/2.0',\n  'http://earth.google.com/kml/2.1',\n  'http://earth.google.com/kml/2.2',\n  'http://www.opengis.net/kml/2.2'\n];\n\n\n/**\n * @const\n * @type {string}\n */\nconst SCHEMA_LOCATION = 'http://www.opengis.net/kml/2.2 ' +\n    'https://developers.google.com/kml/schema/kml22gx.xsd';\n\n\n/**\n * @type {Object<string, IconAnchorUnits>}\n */\nconst ICON_ANCHOR_UNITS_MAP = {\n  'fraction': IconAnchorUnits.FRACTION,\n  'pixels': IconAnchorUnits.PIXELS,\n  'insetPixels': IconAnchorUnits.PIXELS\n};\n\n/**\n * @const\n * @type {Object<string, Object<string, import(\"../xml.js\").Parser>>}\n */\n// @ts-ignore\nconst PLACEMARK_PARSERS = makeStructureNS(\n  NAMESPACE_URIS, {\n    'ExtendedData': extendedDataParser,\n    'Region': regionParser,\n    'MultiGeometry': makeObjectPropertySetter(\n      readMultiGeometry, 'geometry'),\n    'LineString': makeObjectPropertySetter(\n      readLineString, 'geometry'),\n    'LinearRing': makeObjectPropertySetter(\n      readLinearRing, 'geometry'),\n    'Point': makeObjectPropertySetter(\n      readPoint, 'geometry'),\n    'Polygon': makeObjectPropertySetter(\n      readPolygon, 'geometry'),\n    'Style': makeObjectPropertySetter(readStyle),\n    'StyleMap': placemarkStyleMapParser,\n    'address': makeObjectPropertySetter(readString),\n    'description': makeObjectPropertySetter(readString),\n    'name': makeObjectPropertySetter(readString),\n    'open': makeObjectPropertySetter(readBoolean),\n    'phoneNumber': makeObjectPropertySetter(readString),\n    'styleUrl': makeObjectPropertySetter(readURI),\n    'visibility': makeObjectPropertySetter(readBoolean)\n  }, makeStructureNS(\n    GX_NAMESPACE_URIS, {\n      'MultiTrack': makeObjectPropertySetter(\n        readGxMultiTrack, 'geometry'),\n      'Track': makeObjectPropertySetter(\n        readGxTrack, 'geometry')\n    }\n  ));\n\n\n/**\n * @const\n * @type {Object<string, Object<string, import(\"../xml.js\").Parser>>}\n */\n// @ts-ignore\nconst NETWORK_LINK_PARSERS = makeStructureNS(\n  NAMESPACE_URIS, {\n    'ExtendedData': extendedDataParser,\n    'Region': regionParser,\n    'Link': linkParser,\n    'address': makeObjectPropertySetter(readString),\n    'description': makeObjectPropertySetter(readString),\n    'name': makeObjectPropertySetter(readString),\n    'open': makeObjectPropertySetter(readBoolean),\n    'phoneNumber': makeObjectPropertySetter(readString),\n    'visibility': makeObjectPropertySetter(readBoolean)\n  });\n\n\n/**\n * @const\n * @type {Object<string, Object<string, import(\"../xml.js\").Parser>>}\n */\n// @ts-ignore\nconst LINK_PARSERS = makeStructureNS(\n  NAMESPACE_URIS, {\n    'href': makeObjectPropertySetter(readURI)\n  });\n\n\n/**\n * @const\n * @type {Object<string, Object<string, import(\"../xml.js\").Parser>>}\n */\n// @ts-ignore\nconst REGION_PARSERS = makeStructureNS(\n  NAMESPACE_URIS, {\n    'LatLonAltBox': latLonAltBoxParser,\n    'Lod': lodParser\n  });\n\n\n/**\n * @const\n * @type {Object<string, Array<string>>}\n */\n// @ts-ignore\nconst KML_SEQUENCE = makeStructureNS(\n  NAMESPACE_URIS, [\n    'Document', 'Placemark'\n  ]);\n\n\n/**\n * @const\n * @type {Object<string, Object<string, import(\"../xml.js\").Serializer>>}\n */\n// @ts-ignore\nconst KML_SERIALIZERS = makeStructureNS(\n  NAMESPACE_URIS, {\n    'Document': makeChildAppender(writeDocument),\n    'Placemark': makeChildAppender(writePlacemark)\n  });\n\n\n/**\n * @type {import(\"../color.js\").Color}\n */\nlet DEFAULT_COLOR;\n\n/**\n * @type {Fill}\n */\nlet DEFAULT_FILL_STYLE = null;\n\n/**\n * Get the default fill style (or null if not yet set).\n * @return {Fill} The default fill style.\n */\nexport function getDefaultFillStyle() {\n  return DEFAULT_FILL_STYLE;\n}\n\n/**\n * @type {import(\"../size.js\").Size}\n */\nlet DEFAULT_IMAGE_STYLE_ANCHOR;\n\n/**\n * @type {IconAnchorUnits}\n */\nlet DEFAULT_IMAGE_STYLE_ANCHOR_X_UNITS;\n\n/**\n * @type {IconAnchorUnits}\n */\nlet DEFAULT_IMAGE_STYLE_ANCHOR_Y_UNITS;\n\n/**\n * @type {import(\"../size.js\").Size}\n */\nlet DEFAULT_IMAGE_STYLE_SIZE;\n\n/**\n * @type {string}\n */\nlet DEFAULT_IMAGE_STYLE_SRC;\n\n/**\n * @type {number}\n */\nlet DEFAULT_IMAGE_SCALE_MULTIPLIER;\n\n/**\n * @type {import(\"../style/Image.js\").default}\n */\nlet DEFAULT_IMAGE_STYLE = null;\n\n/**\n * Get the default image style (or null if not yet set).\n * @return {import(\"../style/Image.js\").default} The default image style.\n */\nexport function getDefaultImageStyle() {\n  return DEFAULT_IMAGE_STYLE;\n}\n\n/**\n * @type {string}\n */\nlet DEFAULT_NO_IMAGE_STYLE;\n\n/**\n * @type {Stroke}\n */\nlet DEFAULT_STROKE_STYLE = null;\n\n/**\n * Get the default stroke style (or null if not yet set).\n * @return {Stroke} The default stroke style.\n */\nexport function getDefaultStrokeStyle() {\n  return DEFAULT_STROKE_STYLE;\n}\n\n/**\n * @type {Stroke}\n */\nlet DEFAULT_TEXT_STROKE_STYLE;\n\n/**\n * @type {Text}\n */\nlet DEFAULT_TEXT_STYLE = null;\n\n/**\n * Get the default text style (or null if not yet set).\n * @return {Text} The default text style.\n */\nexport function getDefaultTextStyle() {\n  return DEFAULT_TEXT_STYLE;\n}\n\n/**\n * @type {Style}\n */\nlet DEFAULT_STYLE = null;\n\n/**\n * Get the default style (or null if not yet set).\n * @return {Style} The default style.\n */\nexport function getDefaultStyle() {\n  return DEFAULT_STYLE;\n}\n\n/**\n * @type {Array<Style>}\n */\nlet DEFAULT_STYLE_ARRAY = null;\n\n/**\n * Get the default style array (or null if not yet set).\n * @return {Array<Style>} The default style.\n */\nexport function getDefaultStyleArray() {\n  return DEFAULT_STYLE_ARRAY;\n}\n\n\nfunction createStyleDefaults() {\n\n  DEFAULT_COLOR = [255, 255, 255, 1];\n\n  DEFAULT_FILL_STYLE = new Fill({\n    color: DEFAULT_COLOR\n  });\n\n  DEFAULT_IMAGE_STYLE_ANCHOR = [20, 2]; // FIXME maybe [8, 32] ?\n\n  DEFAULT_IMAGE_STYLE_ANCHOR_X_UNITS = IconAnchorUnits.PIXELS;\n\n  DEFAULT_IMAGE_STYLE_ANCHOR_Y_UNITS = IconAnchorUnits.PIXELS;\n\n  DEFAULT_IMAGE_STYLE_SIZE = [64, 64];\n\n  DEFAULT_IMAGE_STYLE_SRC =\n      'https://maps.google.com/mapfiles/kml/pushpin/ylw-pushpin.png';\n\n  DEFAULT_IMAGE_SCALE_MULTIPLIER = 0.5;\n\n  DEFAULT_IMAGE_STYLE = new Icon({\n    anchor: DEFAULT_IMAGE_STYLE_ANCHOR,\n    anchorOrigin: IconOrigin.BOTTOM_LEFT,\n    anchorXUnits: DEFAULT_IMAGE_STYLE_ANCHOR_X_UNITS,\n    anchorYUnits: DEFAULT_IMAGE_STYLE_ANCHOR_Y_UNITS,\n    crossOrigin: 'anonymous',\n    rotation: 0,\n    scale: DEFAULT_IMAGE_SCALE_MULTIPLIER,\n    size: DEFAULT_IMAGE_STYLE_SIZE,\n    src: DEFAULT_IMAGE_STYLE_SRC\n  });\n\n  DEFAULT_NO_IMAGE_STYLE = 'NO_IMAGE';\n\n  DEFAULT_STROKE_STYLE = new Stroke({\n    color: DEFAULT_COLOR,\n    width: 1\n  });\n\n  DEFAULT_TEXT_STROKE_STYLE = new Stroke({\n    color: [51, 51, 51, 1],\n    width: 2\n  });\n\n  DEFAULT_TEXT_STYLE = new Text({\n    font: 'bold 16px Helvetica',\n    fill: DEFAULT_FILL_STYLE,\n    stroke: DEFAULT_TEXT_STROKE_STYLE,\n    scale: 0.8\n  });\n\n  DEFAULT_STYLE = new Style({\n    fill: DEFAULT_FILL_STYLE,\n    image: DEFAULT_IMAGE_STYLE,\n    text: DEFAULT_TEXT_STYLE,\n    stroke: DEFAULT_STROKE_STYLE,\n    zIndex: 0\n  });\n\n  DEFAULT_STYLE_ARRAY = [DEFAULT_STYLE];\n\n}\n\n\n/**\n * @typedef {Object} Options\n * @property {boolean} [extractStyles=true] Extract styles from the KML.\n * @property {boolean} [showPointNames=true] Show names as labels for placemarks which contain points.\n * @property {Array<Style>} [defaultStyle] Default style. The\n * default default style is the same as Google Earth.\n * @property {boolean} [writeStyles=true] Write styles into KML.\n */\n\n\n/**\n * @classdesc\n * Feature format for reading and writing data in the KML format.\n *\n * {@link module:ol/format/KML~KML#readFeature} will read the first feature from\n * a KML source.\n *\n * MultiGeometries are converted into GeometryCollections if they are a mix of\n * geometry types, and into MultiPoint/MultiLineString/MultiPolygon if they are\n * all of the same type.\n *\n * Note that the KML format uses the URL() constructor. Older browsers such as IE\n * which do not support this will need a URL polyfill to be loaded before use.\n *\n * @api\n */\nclass KML extends XMLFeature {\n\n  /**\n   * @param {Options=} opt_options Options.\n   */\n  constructor(opt_options) {\n    super();\n\n    const options = opt_options ? opt_options : {};\n\n    if (!DEFAULT_STYLE_ARRAY) {\n      createStyleDefaults();\n    }\n\n    /**\n     * @inheritDoc\n     */\n    this.dataProjection = getProjection('EPSG:4326');\n\n    /**\n     * @private\n     * @type {Array<Style>}\n     */\n    this.defaultStyle_ = options.defaultStyle ?\n      options.defaultStyle : DEFAULT_STYLE_ARRAY;\n\n    /**\n     * @private\n     * @type {boolean}\n     */\n    this.extractStyles_ = options.extractStyles !== undefined ?\n      options.extractStyles : true;\n\n    /**\n     * @private\n     * @type {boolean}\n     */\n    this.writeStyles_ = options.writeStyles !== undefined ?\n      options.writeStyles : true;\n\n    /**\n     * @private\n     * @type {!Object<string, (Array<Style>|string)>}\n     */\n    this.sharedStyles_ = {};\n\n    /**\n     * @private\n     * @type {boolean}\n     */\n    this.showPointNames_ = options.showPointNames !== undefined ?\n      options.showPointNames : true;\n\n  }\n\n  /**\n   * @param {Node} node Node.\n   * @param {Array<*>} objectStack Object stack.\n   * @private\n   * @return {Array<Feature>|undefined} Features.\n   */\n  readDocumentOrFolder_(node, objectStack) {\n    // FIXME use scope somehow\n    const parsersNS = makeStructureNS(\n      NAMESPACE_URIS, {\n        'Document': makeArrayExtender(this.readDocumentOrFolder_, this),\n        'Folder': makeArrayExtender(this.readDocumentOrFolder_, this),\n        'Placemark': makeArrayPusher(this.readPlacemark_, this),\n        'Style': this.readSharedStyle_.bind(this),\n        'StyleMap': this.readSharedStyleMap_.bind(this)\n      });\n    /** @type {Array<Feature>} */\n    // @ts-ignore\n    const features = pushParseAndPop([], parsersNS, node, objectStack, this);\n    if (features) {\n      return features;\n    } else {\n      return undefined;\n    }\n  }\n\n  /**\n   * @param {Element} node Node.\n   * @param {Array<*>} objectStack Object stack.\n   * @private\n   * @return {Feature|undefined} Feature.\n   */\n  readPlacemark_(node, objectStack) {\n    const object = pushParseAndPop({'geometry': null},\n      PLACEMARK_PARSERS, node, objectStack);\n    if (!object) {\n      return undefined;\n    }\n    const feature = new Feature();\n    const id = node.getAttribute('id');\n    if (id !== null) {\n      feature.setId(id);\n    }\n    const options = /** @type {import(\"./Feature.js\").ReadOptions} */ (objectStack[0]);\n\n    const geometry = object['geometry'];\n    if (geometry) {\n      transformGeometryWithOptions(geometry, false, options);\n    }\n    feature.setGeometry(geometry);\n    delete object['geometry'];\n\n    if (this.extractStyles_) {\n      const style = object['Style'];\n      const styleUrl = object['styleUrl'];\n      const styleFunction = createFeatureStyleFunction(\n        style, styleUrl, this.defaultStyle_, this.sharedStyles_,\n        this.showPointNames_);\n      feature.setStyle(styleFunction);\n    }\n    delete object['Style'];\n    // we do not remove the styleUrl property from the object, so it\n    // gets stored on feature when setProperties is called\n\n    feature.setProperties(object, true);\n\n    return feature;\n  }\n\n  /**\n   * @param {Element} node Node.\n   * @param {Array<*>} objectStack Object stack.\n   * @private\n   */\n  readSharedStyle_(node, objectStack) {\n    const id = node.getAttribute('id');\n    if (id !== null) {\n      const style = readStyle(node, objectStack);\n      if (style) {\n        let styleUri;\n        let baseURI = node.baseURI;\n        if (!baseURI || baseURI == 'about:blank') {\n          baseURI = window.location.href;\n        }\n        if (baseURI) {\n          const url = new URL('#' + id, baseURI);\n          styleUri = url.href;\n        } else {\n          styleUri = '#' + id;\n        }\n        this.sharedStyles_[styleUri] = style;\n      }\n    }\n  }\n\n  /**\n   * @param {Element} node Node.\n   * @param {Array<*>} objectStack Object stack.\n   * @private\n   */\n  readSharedStyleMap_(node, objectStack) {\n    const id = node.getAttribute('id');\n    if (id === null) {\n      return;\n    }\n    const styleMapValue = readStyleMapValue(node, objectStack);\n    if (!styleMapValue) {\n      return;\n    }\n    let styleUri;\n    let baseURI = node.baseURI;\n    if (!baseURI || baseURI == 'about:blank') {\n      baseURI = window.location.href;\n    }\n    if (baseURI) {\n      const url = new URL('#' + id, baseURI);\n      styleUri = url.href;\n    } else {\n      styleUri = '#' + id;\n    }\n    this.sharedStyles_[styleUri] = styleMapValue;\n  }\n\n  /**\n   * @inheritDoc\n   */\n  readFeatureFromNode(node, opt_options) {\n    if (!includes(NAMESPACE_URIS, node.namespaceURI)) {\n      return null;\n    }\n    const feature = this.readPlacemark_(\n      node, [this.getReadOptions(node, opt_options)]);\n    if (feature) {\n      return feature;\n    } else {\n      return null;\n    }\n  }\n\n  /**\n   * @inheritDoc\n   */\n  readFeaturesFromNode(node, opt_options) {\n    if (!includes(NAMESPACE_URIS, node.namespaceURI)) {\n      return [];\n    }\n    let features;\n    const localName = node.localName;\n    if (localName == 'Document' || localName == 'Folder') {\n      features = this.readDocumentOrFolder_(\n        node, [this.getReadOptions(node, opt_options)]);\n      if (features) {\n        return features;\n      } else {\n        return [];\n      }\n    } else if (localName == 'Placemark') {\n      const feature = this.readPlacemark_(\n        node, [this.getReadOptions(node, opt_options)]);\n      if (feature) {\n        return [feature];\n      } else {\n        return [];\n      }\n    } else if (localName == 'kml') {\n      features = [];\n      for (let n = node.firstElementChild; n; n = n.nextElementSibling) {\n        const fs = this.readFeaturesFromNode(n, opt_options);\n        if (fs) {\n          extend(features, fs);\n        }\n      }\n      return features;\n    } else {\n      return [];\n    }\n  }\n\n  /**\n   * Read the name of the KML.\n   *\n   * @param {Document|Element|string} source Source.\n   * @return {string|undefined} Name.\n   * @api\n   */\n  readName(source) {\n    if (!source) {\n      return undefined;\n    } else if (typeof source === 'string') {\n      const doc = parse(source);\n      return this.readNameFromDocument(doc);\n    } else if (isDocument(source)) {\n      return this.readNameFromDocument(/** @type {Document} */ (source));\n    } else {\n      return this.readNameFromNode(/** @type {Element} */ (source));\n    }\n  }\n\n  /**\n   * @param {Document} doc Document.\n   * @return {string|undefined} Name.\n   */\n  readNameFromDocument(doc) {\n    for (let n = /** @type {Node} */ (doc.firstChild); n; n = n.nextSibling) {\n      if (n.nodeType == Node.ELEMENT_NODE) {\n        const name = this.readNameFromNode(/** @type {Element} */ (n));\n        if (name) {\n          return name;\n        }\n      }\n    }\n    return undefined;\n  }\n\n  /**\n   * @param {Element} node Node.\n   * @return {string|undefined} Name.\n   */\n  readNameFromNode(node) {\n    for (let n = node.firstElementChild; n; n = n.nextElementSibling) {\n      if (includes(NAMESPACE_URIS, n.namespaceURI) &&\n          n.localName == 'name') {\n        return readString(n);\n      }\n    }\n    for (let n = node.firstElementChild; n; n = n.nextElementSibling) {\n      const localName = n.localName;\n      if (includes(NAMESPACE_URIS, n.namespaceURI) &&\n          (localName == 'Document' ||\n            localName == 'Folder' ||\n            localName == 'Placemark' ||\n            localName == 'kml')) {\n        const name = this.readNameFromNode(n);\n        if (name) {\n          return name;\n        }\n      }\n    }\n    return undefined;\n  }\n\n  /**\n   * Read the network links of the KML.\n   *\n   * @param {Document|Element|string} source Source.\n   * @return {Array<Object>} Network links.\n   * @api\n   */\n  readNetworkLinks(source) {\n    const networkLinks = [];\n    if (typeof source === 'string') {\n      const doc = parse(source);\n      extend(networkLinks, this.readNetworkLinksFromDocument(doc));\n    } else if (isDocument(source)) {\n      extend(networkLinks, this.readNetworkLinksFromDocument(\n        /** @type {Document} */ (source)));\n    } else {\n      extend(networkLinks, this.readNetworkLinksFromNode(\n        /** @type {Element} */ (source)));\n    }\n    return networkLinks;\n  }\n\n  /**\n   * @param {Document} doc Document.\n   * @return {Array<Object>} Network links.\n   */\n  readNetworkLinksFromDocument(doc) {\n    const networkLinks = [];\n    for (let n = /** @type {Node} */ (doc.firstChild); n; n = n.nextSibling) {\n      if (n.nodeType == Node.ELEMENT_NODE) {\n        extend(networkLinks, this.readNetworkLinksFromNode(/** @type {Element} */ (n)));\n      }\n    }\n    return networkLinks;\n  }\n\n  /**\n   * @param {Element} node Node.\n   * @return {Array<Object>} Network links.\n   */\n  readNetworkLinksFromNode(node) {\n    const networkLinks = [];\n    for (let n = node.firstElementChild; n; n = n.nextElementSibling) {\n      if (includes(NAMESPACE_URIS, n.namespaceURI) &&\n          n.localName == 'NetworkLink') {\n        const obj = pushParseAndPop({}, NETWORK_LINK_PARSERS,\n          n, []);\n        networkLinks.push(obj);\n      }\n    }\n    for (let n = node.firstElementChild; n; n = n.nextElementSibling) {\n      const localName = n.localName;\n      if (includes(NAMESPACE_URIS, n.namespaceURI) &&\n          (localName == 'Document' ||\n            localName == 'Folder' ||\n            localName == 'kml')) {\n        extend(networkLinks, this.readNetworkLinksFromNode(n));\n      }\n    }\n    return networkLinks;\n  }\n\n  /**\n   * Read the regions of the KML.\n   *\n   * @param {Document|Element|string} source Source.\n   * @return {Array<Object>} Regions.\n   * @api\n   */\n  readRegion(source) {\n    const regions = [];\n    if (typeof source === 'string') {\n      const doc = parse(source);\n      extend(regions, this.readRegionFromDocument(doc));\n    } else if (isDocument(source)) {\n      extend(regions, this.readRegionFromDocument(\n        /** @type {Document} */ (source)));\n    } else {\n      extend(regions, this.readRegionFromNode(\n        /** @type {Element} */ (source)));\n    }\n    return regions;\n  }\n\n  /**\n   * @param {Document} doc Document.\n   * @return {Array<Object>} Region.\n   */\n  readRegionFromDocument(doc) {\n    const regions = [];\n    for (let n = /** @type {Node} */ (doc.firstChild); n; n = n.nextSibling) {\n      if (n.nodeType == Node.ELEMENT_NODE) {\n        extend(regions, this.readRegionFromNode(/** @type {Element} */ (n)));\n      }\n    }\n    return regions;\n  }\n\n  /**\n   * @param {Element} node Node.\n   * @return {Array<Object>} Region.\n   * @api\n   */\n  readRegionFromNode(node) {\n    const regions = [];\n    for (let n = node.firstElementChild; n; n = n.nextElementSibling) {\n      if (includes(NAMESPACE_URIS, n.namespaceURI) &&\n          n.localName == 'Region') {\n        const obj = pushParseAndPop({}, REGION_PARSERS,\n          n, []);\n        regions.push(obj);\n      }\n    }\n    for (let n = node.firstElementChild; n; n = n.nextElementSibling) {\n      const localName = n.localName;\n      if (includes(NAMESPACE_URIS, n.namespaceURI) &&\n          (localName == 'Document' ||\n            localName == 'Folder' ||\n            localName == 'kml')) {\n        extend(regions, this.readRegionFromNode(n));\n      }\n    }\n    return regions;\n  }\n\n  /**\n   * Encode an array of features in the KML format as an XML node. GeometryCollections,\n   * MultiPoints, MultiLineStrings, and MultiPolygons are output as MultiGeometries.\n   *\n   * @param {Array<Feature>} features Features.\n   * @param {import(\"./Feature.js\").WriteOptions=} opt_options Options.\n   * @return {Node} Node.\n   * @override\n   * @api\n   */\n  writeFeaturesNode(features, opt_options) {\n    opt_options = this.adaptOptions(opt_options);\n    const kml = createElementNS(NAMESPACE_URIS[4], 'kml');\n    const xmlnsUri = 'http://www.w3.org/2000/xmlns/';\n    kml.setAttributeNS(xmlnsUri, 'xmlns:gx', GX_NAMESPACE_URIS[0]);\n    kml.setAttributeNS(xmlnsUri, 'xmlns:xsi', XML_SCHEMA_INSTANCE_URI);\n    kml.setAttributeNS(XML_SCHEMA_INSTANCE_URI, 'xsi:schemaLocation', SCHEMA_LOCATION);\n\n    const /** @type {import(\"../xml.js\").NodeStackItem} */ context = {node: kml};\n    /** @type {!Object<string, (Array<Feature>|Feature|undefined)>} */\n    const properties = {};\n    if (features.length > 1) {\n      properties['Document'] = features;\n    } else if (features.length == 1) {\n      properties['Placemark'] = features[0];\n    }\n    const orderedKeys = KML_SEQUENCE[kml.namespaceURI];\n    const values = makeSequence(properties, orderedKeys);\n    pushSerializeAndPop(context, KML_SERIALIZERS,\n      OBJECT_PROPERTY_NODE_FACTORY, values, [opt_options], orderedKeys,\n      this);\n    return kml;\n  }\n}\n\n\n/**\n * @param {Style|undefined} foundStyle Style.\n * @param {string} name Name.\n * @return {Style} style Style.\n */\nfunction createNameStyleFunction(foundStyle, name) {\n  let textStyle = null;\n  const textOffset = [0, 0];\n  let textAlign = 'start';\n  if (foundStyle.getImage()) {\n    let imageSize = foundStyle.getImage().getImageSize();\n    if (imageSize === null) {\n      imageSize = DEFAULT_IMAGE_STYLE_SIZE;\n    }\n    if (imageSize.length == 2) {\n      const imageScale = foundStyle.getImage().getScale();\n      // Offset the label to be centered to the right of the icon, if there is\n      // one.\n      textOffset[0] = imageScale * imageSize[0] / 2;\n      textOffset[1] = -imageScale * imageSize[1] / 2;\n      textAlign = 'left';\n    }\n  }\n  if (foundStyle.getText() !== null) {\n    // clone the text style, customizing it with name, alignments and offset.\n    // Note that kml does not support many text options that OpenLayers does (rotation, textBaseline).\n    const foundText = foundStyle.getText();\n    textStyle = foundText.clone();\n    textStyle.setFont(foundText.getFont() || DEFAULT_TEXT_STYLE.getFont());\n    textStyle.setScale(foundText.getScale() || DEFAULT_TEXT_STYLE.getScale());\n    textStyle.setFill(foundText.getFill() || DEFAULT_TEXT_STYLE.getFill());\n    textStyle.setStroke(foundText.getStroke() || DEFAULT_TEXT_STROKE_STYLE);\n  } else {\n    textStyle = DEFAULT_TEXT_STYLE.clone();\n  }\n  textStyle.setText(name);\n  textStyle.setOffsetX(textOffset[0]);\n  textStyle.setOffsetY(textOffset[1]);\n  textStyle.setTextAlign(textAlign);\n\n  const nameStyle = new Style({\n    text: textStyle\n  });\n  return nameStyle;\n}\n\n\n/**\n * @param {Array<Style>|undefined} style Style.\n * @param {string} styleUrl Style URL.\n * @param {Array<Style>} defaultStyle Default style.\n * @param {!Object<string, (Array<Style>|string)>} sharedStyles Shared styles.\n * @param {boolean|undefined} showPointNames true to show names for point placemarks.\n * @return {import(\"../style/Style.js\").StyleFunction} Feature style function.\n */\nfunction createFeatureStyleFunction(style, styleUrl, defaultStyle, sharedStyles, showPointNames) {\n\n  return (\n    /**\n     * @param {Feature} feature feature.\n     * @param {number} resolution Resolution.\n     * @return {Array<Style>} Style.\n     */\n    function(feature, resolution) {\n      let drawName = showPointNames;\n      /** @type {Style|undefined} */\n      let nameStyle;\n      let name = '';\n      if (drawName) {\n        const geometry = feature.getGeometry();\n        if (geometry) {\n          drawName = geometry.getType() === GeometryType.POINT;\n        }\n      }\n\n      if (drawName) {\n        name = /** @type {string} */ (feature.get('name'));\n        drawName = drawName && !!name;\n      }\n\n      if (style) {\n        if (drawName) {\n          nameStyle = createNameStyleFunction(style[0], name);\n          return style.concat(nameStyle);\n        }\n        return style;\n      }\n      if (styleUrl) {\n        const foundStyle = findStyle(styleUrl, defaultStyle, sharedStyles);\n        if (drawName) {\n          nameStyle = createNameStyleFunction(foundStyle[0], name);\n          return foundStyle.concat(nameStyle);\n        }\n        return foundStyle;\n      }\n      if (drawName) {\n        nameStyle = createNameStyleFunction(defaultStyle[0], name);\n        return defaultStyle.concat(nameStyle);\n      }\n      return defaultStyle;\n    }\n  );\n}\n\n\n/**\n * @param {Array<Style>|string|undefined} styleValue Style value.\n * @param {Array<Style>} defaultStyle Default style.\n * @param {!Object<string, (Array<Style>|string)>} sharedStyles\n * Shared styles.\n * @return {Array<Style>} Style.\n */\nfunction findStyle(styleValue, defaultStyle, sharedStyles) {\n  if (Array.isArray(styleValue)) {\n    return styleValue;\n  } else if (typeof styleValue === 'string') {\n    // KML files in the wild occasionally forget the leading `#` on styleUrls\n    // defined in the same document.  Add a leading `#` if it enables to find\n    // a style.\n    if (!(styleValue in sharedStyles) && ('#' + styleValue in sharedStyles)) {\n      styleValue = '#' + styleValue;\n    }\n    return findStyle(sharedStyles[styleValue], defaultStyle, sharedStyles);\n  } else {\n    return defaultStyle;\n  }\n}\n\n\n/**\n * @param {Node} node Node.\n * @return {import(\"../color.js\").Color|undefined} Color.\n */\nfunction readColor(node) {\n  const s = getAllTextContent(node, false);\n  // The KML specification states that colors should not include a leading `#`\n  // but we tolerate them.\n  const m = /^\\s*#?\\s*([0-9A-Fa-f]{8})\\s*$/.exec(s);\n  if (m) {\n    const hexColor = m[1];\n    return [\n      parseInt(hexColor.substr(6, 2), 16),\n      parseInt(hexColor.substr(4, 2), 16),\n      parseInt(hexColor.substr(2, 2), 16),\n      parseInt(hexColor.substr(0, 2), 16) / 255\n    ];\n\n  } else {\n    return undefined;\n  }\n}\n\n\n/**\n * @param {Node} node Node.\n * @return {Array<number>|undefined} Flat coordinates.\n */\nexport function readFlatCoordinates(node) {\n  let s = getAllTextContent(node, false);\n  const flatCoordinates = [];\n  // The KML specification states that coordinate tuples should not include\n  // spaces, but we tolerate them.\n  const re =\n      /^\\s*([+\\-]?\\d*\\.?\\d+(?:e[+\\-]?\\d+)?)\\s*,\\s*([+\\-]?\\d*\\.?\\d+(?:e[+\\-]?\\d+)?)(?:\\s*,\\s*([+\\-]?\\d*\\.?\\d+(?:e[+\\-]?\\d+)?))?\\s*/i;\n  let m;\n  while ((m = re.exec(s))) {\n    const x = parseFloat(m[1]);\n    const y = parseFloat(m[2]);\n    const z = m[3] ? parseFloat(m[3]) : 0;\n    flatCoordinates.push(x, y, z);\n    s = s.substr(m[0].length);\n  }\n  if (s !== '') {\n    return undefined;\n  }\n  return flatCoordinates;\n}\n\n\n/**\n * @param {Node} node Node.\n * @return {string} URI.\n */\nfunction readURI(node) {\n  const s = getAllTextContent(node, false).trim();\n  let baseURI = node.baseURI;\n  if (!baseURI || baseURI == 'about:blank') {\n    baseURI = window.location.href;\n  }\n  if (baseURI) {\n    const url = new URL(s, baseURI);\n    return url.href;\n  } else {\n    return s;\n  }\n}\n\n\n/**\n * @param {Element} node Node.\n * @return {Vec2} Vec2.\n */\nfunction readVec2(node) {\n  const xunits = node.getAttribute('xunits');\n  const yunits = node.getAttribute('yunits');\n  let origin;\n  if (xunits !== 'insetPixels') {\n    if (yunits !== 'insetPixels') {\n      origin = IconOrigin.BOTTOM_LEFT;\n    } else {\n      origin = IconOrigin.TOP_LEFT;\n    }\n  } else {\n    if (yunits !== 'insetPixels') {\n      origin = IconOrigin.BOTTOM_RIGHT;\n    } else {\n      origin = IconOrigin.TOP_RIGHT;\n    }\n  }\n  return {\n    x: parseFloat(node.getAttribute('x')),\n    xunits: ICON_ANCHOR_UNITS_MAP[xunits],\n    y: parseFloat(node.getAttribute('y')),\n    yunits: ICON_ANCHOR_UNITS_MAP[yunits],\n    origin: origin\n  };\n}\n\n\n/**\n * @param {Node} node Node.\n * @return {number|undefined} Scale.\n */\nfunction readScale(node) {\n  return readDecimal(node);\n}\n\n\n/**\n * @const\n * @type {Object<string, Object<string, import(\"../xml.js\").Parser>>}\n */\n// @ts-ignore\nconst STYLE_MAP_PARSERS = makeStructureNS(\n  NAMESPACE_URIS, {\n    'Pair': pairDataParser\n  });\n\n\n/**\n * @param {Element} node Node.\n * @param {Array<*>} objectStack Object stack.\n * @return {Array<Style>|string|undefined} StyleMap.\n */\nfunction readStyleMapValue(node, objectStack) {\n  return pushParseAndPop(undefined,\n    STYLE_MAP_PARSERS, node, objectStack);\n}\n\n\n/**\n * @const\n * @type {Object<string, Object<string, import(\"../xml.js\").Parser>>}\n */\n// @ts-ignore\nconst ICON_STYLE_PARSERS = makeStructureNS(\n  NAMESPACE_URIS, {\n    'Icon': makeObjectPropertySetter(readIcon),\n    'heading': makeObjectPropertySetter(readDecimal),\n    'hotSpot': makeObjectPropertySetter(readVec2),\n    'scale': makeObjectPropertySetter(readScale)\n  });\n\n\n/**\n * @param {Element} node Node.\n * @param {Array<*>} objectStack Object stack.\n */\nfunction iconStyleParser(node, objectStack) {\n  // FIXME refreshMode\n  // FIXME refreshInterval\n  // FIXME viewRefreshTime\n  // FIXME viewBoundScale\n  // FIXME viewFormat\n  // FIXME httpQuery\n  const object = pushParseAndPop(\n    {}, ICON_STYLE_PARSERS, node, objectStack);\n  if (!object) {\n    return;\n  }\n  const styleObject = /** @type {Object} */ (objectStack[objectStack.length - 1]);\n  const IconObject = 'Icon' in object ? object['Icon'] : {};\n  const drawIcon = (!('Icon' in object) || Object.keys(IconObject).length > 0);\n  let src;\n  const href = /** @type {string|undefined} */\n      (IconObject['href']);\n  if (href) {\n    src = href;\n  } else if (drawIcon) {\n    src = DEFAULT_IMAGE_STYLE_SRC;\n  }\n  let anchor, anchorXUnits, anchorYUnits;\n  let anchorOrigin = IconOrigin.BOTTOM_LEFT;\n  const hotSpot = /** @type {Vec2|undefined} */\n      (object['hotSpot']);\n  if (hotSpot) {\n    anchor = [hotSpot.x, hotSpot.y];\n    anchorXUnits = hotSpot.xunits;\n    anchorYUnits = hotSpot.yunits;\n    anchorOrigin = hotSpot.origin;\n  } else if (src === DEFAULT_IMAGE_STYLE_SRC) {\n    anchor = DEFAULT_IMAGE_STYLE_ANCHOR;\n    anchorXUnits = DEFAULT_IMAGE_STYLE_ANCHOR_X_UNITS;\n    anchorYUnits = DEFAULT_IMAGE_STYLE_ANCHOR_Y_UNITS;\n  } else if (/^http:\\/\\/maps\\.(?:google|gstatic)\\.com\\//.test(src)) {\n    anchor = [0.5, 0];\n    anchorXUnits = IconAnchorUnits.FRACTION;\n    anchorYUnits = IconAnchorUnits.FRACTION;\n  }\n\n  let offset;\n  const x = /** @type {number|undefined} */\n      (IconObject['x']);\n  const y = /** @type {number|undefined} */\n      (IconObject['y']);\n  if (x !== undefined && y !== undefined) {\n    offset = [x, y];\n  }\n\n  let size;\n  const w = /** @type {number|undefined} */\n      (IconObject['w']);\n  const h = /** @type {number|undefined} */\n      (IconObject['h']);\n  if (w !== undefined && h !== undefined) {\n    size = [w, h];\n  }\n\n  let rotation;\n  const heading = /** @type {number} */\n      (object['heading']);\n  if (heading !== undefined) {\n    rotation = toRadians(heading);\n  }\n\n  let scale = /** @type {number|undefined} */\n      (object['scale']);\n\n  if (drawIcon) {\n    if (src == DEFAULT_IMAGE_STYLE_SRC) {\n      size = DEFAULT_IMAGE_STYLE_SIZE;\n      if (scale === undefined) {\n        scale = DEFAULT_IMAGE_SCALE_MULTIPLIER;\n      }\n    }\n\n    const imageStyle = new Icon({\n      anchor: anchor,\n      anchorOrigin: anchorOrigin,\n      anchorXUnits: anchorXUnits,\n      anchorYUnits: anchorYUnits,\n      crossOrigin: 'anonymous', // FIXME should this be configurable?\n      offset: offset,\n      offsetOrigin: IconOrigin.BOTTOM_LEFT,\n      rotation: rotation,\n      scale: scale,\n      size: size,\n      src: src\n    });\n    styleObject['imageStyle'] = imageStyle;\n  } else {\n    // handle the case when we explicitly want to draw no icon.\n    styleObject['imageStyle'] = DEFAULT_NO_IMAGE_STYLE;\n  }\n}\n\n\n/**\n * @const\n * @type {Object<string, Object<string, import(\"../xml.js\").Parser>>}\n */\n// @ts-ignore\nconst LABEL_STYLE_PARSERS = makeStructureNS(\n  NAMESPACE_URIS, {\n    'color': makeObjectPropertySetter(readColor),\n    'scale': makeObjectPropertySetter(readScale)\n  });\n\n\n/**\n * @param {Element} node Node.\n * @param {Array<*>} objectStack Object stack.\n */\nfunction labelStyleParser(node, objectStack) {\n  // FIXME colorMode\n  const object = pushParseAndPop(\n    {}, LABEL_STYLE_PARSERS, node, objectStack);\n  if (!object) {\n    return;\n  }\n  const styleObject = objectStack[objectStack.length - 1];\n  const textStyle = new Text({\n    fill: new Fill({\n      color: /** @type {import(\"../color.js\").Color} */\n          ('color' in object ? object['color'] : DEFAULT_COLOR)\n    }),\n    scale: /** @type {number|undefined} */\n        (object['scale'])\n  });\n  styleObject['textStyle'] = textStyle;\n}\n\n\n/**\n * @const\n * @type {Object<string, Object<string, import(\"../xml.js\").Parser>>}\n */\n// @ts-ignore\nconst LINE_STYLE_PARSERS = makeStructureNS(\n  NAMESPACE_URIS, {\n    'color': makeObjectPropertySetter(readColor),\n    'width': makeObjectPropertySetter(readDecimal)\n  });\n\n\n/**\n * @param {Element} node Node.\n * @param {Array<*>} objectStack Object stack.\n */\nfunction lineStyleParser(node, objectStack) {\n  // FIXME colorMode\n  // FIXME gx:outerColor\n  // FIXME gx:outerWidth\n  // FIXME gx:physicalWidth\n  // FIXME gx:labelVisibility\n  const object = pushParseAndPop(\n    {}, LINE_STYLE_PARSERS, node, objectStack);\n  if (!object) {\n    return;\n  }\n  const styleObject = objectStack[objectStack.length - 1];\n  const strokeStyle = new Stroke({\n    color: /** @type {import(\"../color.js\").Color} */\n        ('color' in object ? object['color'] : DEFAULT_COLOR),\n    width: /** @type {number} */ ('width' in object ? object['width'] : 1)\n  });\n  styleObject['strokeStyle'] = strokeStyle;\n}\n\n\n/**\n * @const\n * @type {Object<string, Object<string, import(\"../xml.js\").Parser>>}\n */\n// @ts-ignore\nconst POLY_STYLE_PARSERS = makeStructureNS(\n  NAMESPACE_URIS, {\n    'color': makeObjectPropertySetter(readColor),\n    'fill': makeObjectPropertySetter(readBoolean),\n    'outline': makeObjectPropertySetter(readBoolean)\n  });\n\n\n/**\n * @param {Element} node Node.\n * @param {Array<*>} objectStack Object stack.\n */\nfunction polyStyleParser(node, objectStack) {\n  // FIXME colorMode\n  const object = pushParseAndPop(\n    {}, POLY_STYLE_PARSERS, node, objectStack);\n  if (!object) {\n    return;\n  }\n  const styleObject = objectStack[objectStack.length - 1];\n  const fillStyle = new Fill({\n    color: /** @type {import(\"../color.js\").Color} */\n        ('color' in object ? object['color'] : DEFAULT_COLOR)\n  });\n  styleObject['fillStyle'] = fillStyle;\n  const fill = /** @type {boolean|undefined} */ (object['fill']);\n  if (fill !== undefined) {\n    styleObject['fill'] = fill;\n  }\n  const outline = /** @type {boolean|undefined} */ (object['outline']);\n  if (outline !== undefined) {\n    styleObject['outline'] = outline;\n  }\n}\n\n\n/**\n * @const\n * @type {Object<string, Object<string, import(\"../xml.js\").Parser>>}\n */\n// @ts-ignore\nconst FLAT_LINEAR_RING_PARSERS = makeStructureNS(\n  NAMESPACE_URIS, {\n    'coordinates': makeReplacer(readFlatCoordinates)\n  });\n\n\n/**\n * @param {Element} node Node.\n * @param {Array<*>} objectStack Object stack.\n * @return {Array<number>} LinearRing flat coordinates.\n */\nfunction readFlatLinearRing(node, objectStack) {\n  return pushParseAndPop(null,\n    FLAT_LINEAR_RING_PARSERS, node, objectStack);\n}\n\n\n/**\n * @param {Node} node Node.\n * @param {Array<*>} objectStack Object stack.\n */\nfunction gxCoordParser(node, objectStack) {\n  const gxTrackObject = /** @type {GxTrackObject} */\n      (objectStack[objectStack.length - 1]);\n  const flatCoordinates = gxTrackObject.flatCoordinates;\n  const s = getAllTextContent(node, false);\n  const re =\n      /^\\s*([+\\-]?\\d+(?:\\.\\d*)?(?:e[+\\-]?\\d*)?)\\s+([+\\-]?\\d+(?:\\.\\d*)?(?:e[+\\-]?\\d*)?)\\s+([+\\-]?\\d+(?:\\.\\d*)?(?:e[+\\-]?\\d*)?)\\s*$/i;\n  const m = re.exec(s);\n  if (m) {\n    const x = parseFloat(m[1]);\n    const y = parseFloat(m[2]);\n    const z = parseFloat(m[3]);\n    flatCoordinates.push(x, y, z, 0);\n  } else {\n    flatCoordinates.push(0, 0, 0, 0);\n  }\n}\n\n\n/**\n * @const\n * @type {Object<string, Object<string, import(\"../xml.js\").Parser>>}\n */\n// @ts-ignore\nconst GX_MULTITRACK_GEOMETRY_PARSERS = makeStructureNS(\n  GX_NAMESPACE_URIS, {\n    'Track': makeArrayPusher(readGxTrack)\n  });\n\n\n/**\n * @param {Element} node Node.\n * @param {Array<*>} objectStack Object stack.\n * @return {MultiLineString|undefined} MultiLineString.\n */\nfunction readGxMultiTrack(node, objectStack) {\n  const lineStrings = pushParseAndPop([],\n    GX_MULTITRACK_GEOMETRY_PARSERS, node, objectStack);\n  if (!lineStrings) {\n    return undefined;\n  }\n  return new MultiLineString(lineStrings);\n}\n\n\n/**\n * @const\n * @type {Object<string, Object<string, import(\"../xml.js\").Parser>>}\n */\n// @ts-ignore\nconst GX_TRACK_PARSERS = makeStructureNS(\n  NAMESPACE_URIS, {\n    'when': whenParser\n  }, makeStructureNS(\n    GX_NAMESPACE_URIS, {\n      'coord': gxCoordParser\n    }));\n\n\n/**\n * @param {Element} node Node.\n * @param {Array<*>} objectStack Object stack.\n * @return {LineString|undefined} LineString.\n */\nfunction readGxTrack(node, objectStack) {\n  const gxTrackObject = pushParseAndPop(\n    /** @type {GxTrackObject} */ ({\n      flatCoordinates: [],\n      whens: []\n    }), GX_TRACK_PARSERS, node, objectStack);\n  if (!gxTrackObject) {\n    return undefined;\n  }\n  const flatCoordinates = gxTrackObject.flatCoordinates;\n  const whens = gxTrackObject.whens;\n  for (let i = 0, ii = Math.min(flatCoordinates.length, whens.length); i < ii; ++i) {\n    flatCoordinates[4 * i + 3] = whens[i];\n  }\n  return new LineString(flatCoordinates, GeometryLayout.XYZM);\n}\n\n\n/**\n * @const\n * @type {Object<string, Object<string, import(\"../xml.js\").Parser>>}\n */\n// @ts-ignore\nconst ICON_PARSERS = makeStructureNS(\n  NAMESPACE_URIS, {\n    'href': makeObjectPropertySetter(readURI)\n  }, makeStructureNS(\n    GX_NAMESPACE_URIS, {\n      'x': makeObjectPropertySetter(readDecimal),\n      'y': makeObjectPropertySetter(readDecimal),\n      'w': makeObjectPropertySetter(readDecimal),\n      'h': makeObjectPropertySetter(readDecimal)\n    }));\n\n\n/**\n * @param {Element} node Node.\n * @param {Array<*>} objectStack Object stack.\n * @return {Object} Icon object.\n */\nfunction readIcon(node, objectStack) {\n  const iconObject = pushParseAndPop(\n    {}, ICON_PARSERS, node, objectStack);\n  if (iconObject) {\n    return iconObject;\n  } else {\n    return null;\n  }\n}\n\n\n/**\n * @const\n * @type {Object<string, Object<string, import(\"../xml.js\").Parser>>}\n */\n// @ts-ignore\nconst GEOMETRY_FLAT_COORDINATES_PARSERS = makeStructureNS(\n  NAMESPACE_URIS, {\n    'coordinates': makeReplacer(readFlatCoordinates)\n  });\n\n\n/**\n * @param {Element} node Node.\n * @param {Array<*>} objectStack Object stack.\n * @return {Array<number>} Flat coordinates.\n */\nfunction readFlatCoordinatesFromNode(node, objectStack) {\n  return pushParseAndPop(null,\n    GEOMETRY_FLAT_COORDINATES_PARSERS, node, objectStack);\n}\n\n\n/**\n * @const\n * @type {Object<string, Object<string, import(\"../xml.js\").Parser>>}\n */\n// @ts-ignore\nconst EXTRUDE_AND_ALTITUDE_MODE_PARSERS = makeStructureNS(\n  NAMESPACE_URIS, {\n    'extrude': makeObjectPropertySetter(readBoolean),\n    'tessellate': makeObjectPropertySetter(readBoolean),\n    'altitudeMode': makeObjectPropertySetter(readString)\n  });\n\n\n/**\n * @param {Element} node Node.\n * @param {Array<*>} objectStack Object stack.\n * @return {LineString|undefined} LineString.\n */\nfunction readLineString(node, objectStack) {\n  const properties = pushParseAndPop({},\n    EXTRUDE_AND_ALTITUDE_MODE_PARSERS, node,\n    objectStack);\n  const flatCoordinates =\n      readFlatCoordinatesFromNode(node, objectStack);\n  if (flatCoordinates) {\n    const lineString = new LineString(flatCoordinates, GeometryLayout.XYZ);\n    lineString.setProperties(properties, true);\n    return lineString;\n  } else {\n    return undefined;\n  }\n}\n\n\n/**\n * @param {Element} node Node.\n * @param {Array<*>} objectStack Object stack.\n * @return {Polygon|undefined} Polygon.\n */\nfunction readLinearRing(node, objectStack) {\n  const properties = pushParseAndPop({},\n    EXTRUDE_AND_ALTITUDE_MODE_PARSERS, node,\n    objectStack);\n  const flatCoordinates =\n      readFlatCoordinatesFromNode(node, objectStack);\n  if (flatCoordinates) {\n    const polygon = new Polygon(flatCoordinates, GeometryLayout.XYZ, [flatCoordinates.length]);\n    polygon.setProperties(properties, true);\n    return polygon;\n  } else {\n    return undefined;\n  }\n}\n\n\n/**\n * @const\n * @type {Object<string, Object<string, import(\"../xml.js\").Parser>>}\n */\n// @ts-ignore\nconst MULTI_GEOMETRY_PARSERS = makeStructureNS(\n  NAMESPACE_URIS, {\n    'LineString': makeArrayPusher(readLineString),\n    'LinearRing': makeArrayPusher(readLinearRing),\n    'MultiGeometry': makeArrayPusher(readMultiGeometry),\n    'Point': makeArrayPusher(readPoint),\n    'Polygon': makeArrayPusher(readPolygon)\n  });\n\n\n/**\n * @param {Element} node Node.\n * @param {Array<*>} objectStack Object stack.\n * @return {import(\"../geom/Geometry.js\").default} Geometry.\n */\nfunction readMultiGeometry(node, objectStack) {\n  const geometries = pushParseAndPop([],\n    MULTI_GEOMETRY_PARSERS, node, objectStack);\n  if (!geometries) {\n    return null;\n  }\n  if (geometries.length === 0) {\n    return new GeometryCollection(geometries);\n  }\n  let multiGeometry;\n  let homogeneous = true;\n  const type = geometries[0].getType();\n  let geometry;\n  for (let i = 1, ii = geometries.length; i < ii; ++i) {\n    geometry = geometries[i];\n    if (geometry.getType() != type) {\n      homogeneous = false;\n      break;\n    }\n  }\n  if (homogeneous) {\n    let layout;\n    let flatCoordinates;\n    if (type == GeometryType.POINT) {\n      const point = geometries[0];\n      layout = point.getLayout();\n      flatCoordinates = point.getFlatCoordinates();\n      for (let i = 1, ii = geometries.length; i < ii; ++i) {\n        geometry = geometries[i];\n        extend(flatCoordinates, geometry.getFlatCoordinates());\n      }\n      multiGeometry = new MultiPoint(flatCoordinates, layout);\n      setCommonGeometryProperties(multiGeometry, geometries);\n    } else if (type == GeometryType.LINE_STRING) {\n      multiGeometry = new MultiLineString(geometries);\n      setCommonGeometryProperties(multiGeometry, geometries);\n    } else if (type == GeometryType.POLYGON) {\n      multiGeometry = new MultiPolygon(geometries);\n      setCommonGeometryProperties(multiGeometry, geometries);\n    } else if (type == GeometryType.GEOMETRY_COLLECTION) {\n      multiGeometry = new GeometryCollection(geometries);\n    } else {\n      assert(false, 37); // Unknown geometry type found\n    }\n  } else {\n    multiGeometry = new GeometryCollection(geometries);\n  }\n  return (\n    /** @type {import(\"../geom/Geometry.js\").default} */ (multiGeometry)\n  );\n}\n\n\n/**\n * @param {Element} node Node.\n * @param {Array<*>} objectStack Object stack.\n * @return {Point|undefined} Point.\n */\nfunction readPoint(node, objectStack) {\n  const properties = pushParseAndPop({},\n    EXTRUDE_AND_ALTITUDE_MODE_PARSERS, node,\n    objectStack);\n  const flatCoordinates =\n      readFlatCoordinatesFromNode(node, objectStack);\n  if (flatCoordinates) {\n    const point = new Point(flatCoordinates, GeometryLayout.XYZ);\n    point.setProperties(properties, true);\n    return point;\n  } else {\n    return undefined;\n  }\n}\n\n\n/**\n * @const\n * @type {Object<string, Object<string, import(\"../xml.js\").Parser>>}\n */\n// @ts-ignore\nconst FLAT_LINEAR_RINGS_PARSERS = makeStructureNS(\n  NAMESPACE_URIS, {\n    'innerBoundaryIs': innerBoundaryIsParser,\n    'outerBoundaryIs': outerBoundaryIsParser\n  });\n\n\n/**\n * @param {Element} node Node.\n * @param {Array<*>} objectStack Object stack.\n * @return {Polygon|undefined} Polygon.\n */\nfunction readPolygon(node, objectStack) {\n  const properties = pushParseAndPop(/** @type {Object<string,*>} */ ({}),\n    EXTRUDE_AND_ALTITUDE_MODE_PARSERS, node,\n    objectStack);\n  const flatLinearRings = pushParseAndPop([null],\n    FLAT_LINEAR_RINGS_PARSERS, node, objectStack);\n  if (flatLinearRings && flatLinearRings[0]) {\n    const flatCoordinates = flatLinearRings[0];\n    const ends = [flatCoordinates.length];\n    for (let i = 1, ii = flatLinearRings.length; i < ii; ++i) {\n      extend(flatCoordinates, flatLinearRings[i]);\n      ends.push(flatCoordinates.length);\n    }\n    const polygon = new Polygon(flatCoordinates, GeometryLayout.XYZ, ends);\n    polygon.setProperties(properties, true);\n    return polygon;\n  } else {\n    return undefined;\n  }\n}\n\n\n/**\n * @const\n * @type {Object<string, Object<string, import(\"../xml.js\").Parser>>}\n */\n// @ts-ignore\nconst STYLE_PARSERS = makeStructureNS(\n  NAMESPACE_URIS, {\n    'IconStyle': iconStyleParser,\n    'LabelStyle': labelStyleParser,\n    'LineStyle': lineStyleParser,\n    'PolyStyle': polyStyleParser\n  });\n\n\n/**\n * @param {Element} node Node.\n * @param {Array<*>} objectStack Object stack.\n * @return {Array<Style>} Style.\n */\nfunction readStyle(node, objectStack) {\n  const styleObject = pushParseAndPop(\n    {}, STYLE_PARSERS, node, objectStack);\n  if (!styleObject) {\n    return null;\n  }\n  let fillStyle = /** @type {Fill} */\n      ('fillStyle' in styleObject ?\n        styleObject['fillStyle'] : DEFAULT_FILL_STYLE);\n  const fill = /** @type {boolean|undefined} */ (styleObject['fill']);\n  if (fill !== undefined && !fill) {\n    fillStyle = null;\n  }\n  let imageStyle;\n  if ('imageStyle' in styleObject) {\n    if (styleObject['imageStyle'] != DEFAULT_NO_IMAGE_STYLE) {\n      imageStyle = styleObject['imageStyle'];\n    }\n  } else {\n    imageStyle = DEFAULT_IMAGE_STYLE;\n  }\n  const textStyle = /** @type {Text} */\n      ('textStyle' in styleObject ?\n        styleObject['textStyle'] : DEFAULT_TEXT_STYLE);\n  let strokeStyle = /** @type {Stroke} */\n      ('strokeStyle' in styleObject ?\n        styleObject['strokeStyle'] : DEFAULT_STROKE_STYLE);\n  const outline = /** @type {boolean|undefined} */\n      (styleObject['outline']);\n  if (outline !== undefined && !outline) {\n    strokeStyle = null;\n  }\n  return [new Style({\n    fill: fillStyle,\n    image: imageStyle,\n    stroke: strokeStyle,\n    text: textStyle,\n    zIndex: undefined // FIXME\n  })];\n}\n\n\n/**\n * Reads an array of geometries and creates arrays for common geometry\n * properties. Then sets them to the multi geometry.\n * @param {MultiPoint|MultiLineString|MultiPolygon} multiGeometry A multi-geometry.\n * @param {Array<import(\"../geom/Geometry.js\").default>} geometries List of geometries.\n */\nfunction setCommonGeometryProperties(multiGeometry, geometries) {\n  const ii = geometries.length;\n  const extrudes = new Array(geometries.length);\n  const tessellates = new Array(geometries.length);\n  const altitudeModes = new Array(geometries.length);\n  let hasExtrude, hasTessellate, hasAltitudeMode;\n  hasExtrude = hasTessellate = hasAltitudeMode = false;\n  for (let i = 0; i < ii; ++i) {\n    const geometry = geometries[i];\n    extrudes[i] = geometry.get('extrude');\n    tessellates[i] = geometry.get('tessellate');\n    altitudeModes[i] = geometry.get('altitudeMode');\n    hasExtrude = hasExtrude || extrudes[i] !== undefined;\n    hasTessellate = hasTessellate || tessellates[i] !== undefined;\n    hasAltitudeMode = hasAltitudeMode || altitudeModes[i];\n  }\n  if (hasExtrude) {\n    multiGeometry.set('extrude', extrudes);\n  }\n  if (hasTessellate) {\n    multiGeometry.set('tessellate', tessellates);\n  }\n  if (hasAltitudeMode) {\n    multiGeometry.set('altitudeMode', altitudeModes);\n  }\n}\n\n\n/**\n * @const\n * @type {Object<string, Object<string, import(\"../xml.js\").Parser>>}\n */\n// @ts-ignore\nconst DATA_PARSERS = makeStructureNS(\n  NAMESPACE_URIS, {\n    'displayName': makeObjectPropertySetter(readString),\n    'value': makeObjectPropertySetter(readString)\n  });\n\n\n/**\n * @param {Element} node Node.\n * @param {Array<*>} objectStack Object stack.\n */\nfunction dataParser(node, objectStack) {\n  const name = node.getAttribute('name');\n  parseNode(DATA_PARSERS, node, objectStack);\n  const featureObject = /** @type {Object} */ (objectStack[objectStack.length - 1]);\n  if (name && featureObject.displayName) {\n    featureObject[name] = {\n      value: featureObject.value,\n      displayName: featureObject.displayName,\n      toString: function() {\n        return featureObject.value;\n      }\n    };\n  } else if (name !== null) {\n    featureObject[name] = featureObject.value;\n  } else if (featureObject.displayName !== null) {\n    featureObject[featureObject.displayName] = featureObject.value;\n  }\n  delete featureObject['value'];\n}\n\n\n/**\n * @const\n * @type {Object<string, Object<string, import(\"../xml.js\").Parser>>}\n */\n// @ts-ignore\nconst EXTENDED_DATA_PARSERS = makeStructureNS(\n  NAMESPACE_URIS, {\n    'Data': dataParser,\n    'SchemaData': schemaDataParser\n  });\n\n\n/**\n * @param {Element} node Node.\n * @param {Array<*>} objectStack Object stack.\n */\nfunction extendedDataParser(node, objectStack) {\n  parseNode(EXTENDED_DATA_PARSERS, node, objectStack);\n}\n\n/**\n * @param {Element} node Node.\n * @param {Array<*>} objectStack Object stack.\n */\nfunction regionParser(node, objectStack) {\n  parseNode(REGION_PARSERS, node, objectStack);\n}\n\n/**\n * @const\n * @type {Object<string, Object<string, import(\"../xml.js\").Parser>>}\n */\n// @ts-ignore\nconst PAIR_PARSERS = makeStructureNS(\n  NAMESPACE_URIS, {\n    'Style': makeObjectPropertySetter(readStyle),\n    'key': makeObjectPropertySetter(readString),\n    'styleUrl': makeObjectPropertySetter(readURI)\n  });\n\n\n/**\n * @param {Element} node Node.\n * @param {Array<*>} objectStack Object stack.\n */\nfunction pairDataParser(node, objectStack) {\n  const pairObject = pushParseAndPop(\n    {}, PAIR_PARSERS, node, objectStack);\n  if (!pairObject) {\n    return;\n  }\n  const key = /** @type {string|undefined} */\n      (pairObject['key']);\n  if (key && key == 'normal') {\n    const styleUrl = /** @type {string|undefined} */\n        (pairObject['styleUrl']);\n    if (styleUrl) {\n      objectStack[objectStack.length - 1] = styleUrl;\n    }\n    const style = /** @type {Style} */\n        (pairObject['Style']);\n    if (style) {\n      objectStack[objectStack.length - 1] = style;\n    }\n  }\n}\n\n\n/**\n * @param {Element} node Node.\n * @param {Array<*>} objectStack Object stack.\n */\nfunction placemarkStyleMapParser(node, objectStack) {\n  const styleMapValue = readStyleMapValue(node, objectStack);\n  if (!styleMapValue) {\n    return;\n  }\n  const placemarkObject = objectStack[objectStack.length - 1];\n  if (Array.isArray(styleMapValue)) {\n    placemarkObject['Style'] = styleMapValue;\n  } else if (typeof styleMapValue === 'string') {\n    placemarkObject['styleUrl'] = styleMapValue;\n  } else {\n    assert(false, 38); // `styleMapValue` has an unknown type\n  }\n}\n\n\n/**\n * @const\n * @type {Object<string, Object<string, import(\"../xml.js\").Parser>>}\n */\n// @ts-ignore\nconst SCHEMA_DATA_PARSERS = makeStructureNS(\n  NAMESPACE_URIS, {\n    'SimpleData': simpleDataParser\n  });\n\n\n/**\n * @param {Element} node Node.\n * @param {Array<*>} objectStack Object stack.\n */\nfunction schemaDataParser(node, objectStack) {\n  parseNode(SCHEMA_DATA_PARSERS, node, objectStack);\n}\n\n\n/**\n * @param {Element} node Node.\n * @param {Array<*>} objectStack Object stack.\n */\nfunction simpleDataParser(node, objectStack) {\n  const name = node.getAttribute('name');\n  if (name !== null) {\n    const data = readString(node);\n    const featureObject = /** @type {Object} */ (objectStack[objectStack.length - 1]);\n    featureObject[name] = data;\n  }\n}\n\n\n/**\n * @const\n * @type {Object<string, Object<string, import(\"../xml.js\").Parser>>}\n */\n// @ts-ignore\nconst LAT_LON_ALT_BOX_PARSERS = makeStructureNS(\n  NAMESPACE_URIS, {\n    'altitudeMode': makeObjectPropertySetter(readString),\n    'minAltitude': makeObjectPropertySetter(readDecimal),\n    'maxAltitude': makeObjectPropertySetter(readDecimal),\n    'north': makeObjectPropertySetter(readDecimal),\n    'south': makeObjectPropertySetter(readDecimal),\n    'east': makeObjectPropertySetter(readDecimal),\n    'west': makeObjectPropertySetter(readDecimal)\n  });\n\n\n/**\n * @param {Element} node Node.\n * @param {Array<*>} objectStack Object stack.\n */\nfunction latLonAltBoxParser(node, objectStack) {\n  const object = pushParseAndPop({}, LAT_LON_ALT_BOX_PARSERS, node, objectStack);\n  if (!object) {\n    return;\n  }\n  const regionObject = /** @type {Object} */ (objectStack[objectStack.length - 1]);\n  const extent = [\n    parseFloat(object['west']),\n    parseFloat(object['south']),\n    parseFloat(object['east']),\n    parseFloat(object['north'])\n  ];\n  regionObject['extent'] = extent;\n  regionObject['altitudeMode'] = object['altitudeMode'];\n  regionObject['minAltitude'] = parseFloat(object['minAltitude']);\n  regionObject['maxAltitude'] = parseFloat(object['maxAltitude']);\n}\n\n\n/**\n * @const\n * @type {Object<string, Object<string, import(\"../xml.js\").Parser>>}\n */\n// @ts-ignore\nconst LOD_PARSERS = makeStructureNS(\n  NAMESPACE_URIS, {\n    'minLodPixels': makeObjectPropertySetter(readDecimal),\n    'maxLodPixels': makeObjectPropertySetter(readDecimal),\n    'minFadeExtent': makeObjectPropertySetter(readDecimal),\n    'maxFadeExtent': makeObjectPropertySetter(readDecimal)\n  });\n\n\n/**\n * @param {Element} node Node.\n * @param {Array<*>} objectStack Object stack.\n */\nfunction lodParser(node, objectStack) {\n  const object = pushParseAndPop({}, LOD_PARSERS, node, objectStack);\n  if (!object) {\n    return;\n  }\n  const lodObject = /** @type {Object} */ (objectStack[objectStack.length - 1]);\n  lodObject['minLodPixels'] = parseFloat(object['minLodPixels']);\n  lodObject['maxLodPixels'] = parseFloat(object['maxLodPixels']);\n  lodObject['minFadeExtent'] = parseFloat(object['minFadeExtent']);\n  lodObject['maxFadeExtent'] = parseFloat(object['maxFadeExtent']);\n}\n\n\n/**\n * @const\n * @type {Object<string, Object<string, import(\"../xml.js\").Parser>>}\n */\n// @ts-ignore\nconst INNER_BOUNDARY_IS_PARSERS = makeStructureNS(\n  NAMESPACE_URIS, {\n    'LinearRing': makeReplacer(readFlatLinearRing)\n  });\n\n\n/**\n * @param {Element} node Node.\n * @param {Array<*>} objectStack Object stack.\n */\nfunction innerBoundaryIsParser(node, objectStack) {\n  /** @type {Array<number>|undefined} */\n  const flatLinearRing = pushParseAndPop(undefined,\n    INNER_BOUNDARY_IS_PARSERS, node, objectStack);\n  if (flatLinearRing) {\n    const flatLinearRings = /** @type {Array<Array<number>>} */\n        (objectStack[objectStack.length - 1]);\n    flatLinearRings.push(flatLinearRing);\n  }\n}\n\n\n/**\n * @const\n * @type {Object<string, Object<string, import(\"../xml.js\").Parser>>}\n */\n// @ts-ignore\nconst OUTER_BOUNDARY_IS_PARSERS = makeStructureNS(\n  NAMESPACE_URIS, {\n    'LinearRing': makeReplacer(readFlatLinearRing)\n  });\n\n\n/**\n * @param {Element} node Node.\n * @param {Array<*>} objectStack Object stack.\n */\nfunction outerBoundaryIsParser(node, objectStack) {\n  /** @type {Array<number>|undefined} */\n  const flatLinearRing = pushParseAndPop(undefined,\n    OUTER_BOUNDARY_IS_PARSERS, node, objectStack);\n  if (flatLinearRing) {\n    const flatLinearRings = /** @type {Array<Array<number>>} */\n        (objectStack[objectStack.length - 1]);\n    flatLinearRings[0] = flatLinearRing;\n  }\n}\n\n\n/**\n * @param {Element} node Node.\n * @param {Array<*>} objectStack Object stack.\n */\nfunction linkParser(node, objectStack) {\n  parseNode(LINK_PARSERS, node, objectStack);\n}\n\n\n/**\n * @param {Node} node Node.\n * @param {Array<*>} objectStack Object stack.\n */\nfunction whenParser(node, objectStack) {\n  const gxTrackObject = /** @type {GxTrackObject} */\n      (objectStack[objectStack.length - 1]);\n  const whens = gxTrackObject.whens;\n  const s = getAllTextContent(node, false);\n  const when = Date.parse(s);\n  whens.push(isNaN(when) ? 0 : when);\n}\n\n\n/**\n * @param {Node} node Node to append a TextNode with the color to.\n * @param {import(\"../color.js\").Color|string} color Color.\n */\nfunction writeColorTextNode(node, color) {\n  const rgba = asArray(color);\n  const opacity = (rgba.length == 4) ? rgba[3] : 1;\n  /** @type {Array<string|number>} */\n  const abgr = [opacity * 255, rgba[2], rgba[1], rgba[0]];\n  for (let i = 0; i < 4; ++i) {\n    const hex = Math.floor(/** @type {number} */ (abgr[i])).toString(16);\n    abgr[i] = (hex.length == 1) ? '0' + hex : hex;\n  }\n  writeStringTextNode(node, abgr.join(''));\n}\n\n\n/**\n * @param {Node} node Node to append a TextNode with the coordinates to.\n * @param {Array<number>} coordinates Coordinates.\n * @param {Array<*>} objectStack Object stack.\n */\nfunction writeCoordinatesTextNode(node, coordinates, objectStack) {\n  const context = objectStack[objectStack.length - 1];\n\n  const layout = context['layout'];\n  const stride = context['stride'];\n\n  let dimension;\n  if (layout == GeometryLayout.XY ||\n      layout == GeometryLayout.XYM) {\n    dimension = 2;\n  } else if (layout == GeometryLayout.XYZ ||\n      layout == GeometryLayout.XYZM) {\n    dimension = 3;\n  } else {\n    assert(false, 34); // Invalid geometry layout\n  }\n\n  const ii = coordinates.length;\n  let text = '';\n  if (ii > 0) {\n    text += coordinates[0];\n    for (let d = 1; d < dimension; ++d) {\n      text += ',' + coordinates[d];\n    }\n    for (let i = stride; i < ii; i += stride) {\n      text += ' ' + coordinates[i];\n      for (let d = 1; d < dimension; ++d) {\n        text += ',' + coordinates[i + d];\n      }\n    }\n  }\n  writeStringTextNode(node, text);\n}\n\n\n/**\n * @const\n * @type {Object<string, Object<string, import(\"../xml.js\").Serializer>>}\n */\n// @ts-ignore\nconst EXTENDEDDATA_NODE_SERIALIZERS = makeStructureNS(\n  NAMESPACE_URIS, {\n    'Data': makeChildAppender(writeDataNode),\n    'value': makeChildAppender(writeDataNodeValue),\n    'displayName': makeChildAppender(writeDataNodeName)\n  });\n\n\n/**\n * @param {Element} node Node.\n * @param {{name: *, value: *}} pair Name value pair.\n * @param {Array<*>} objectStack Object stack.\n */\nfunction writeDataNode(node, pair, objectStack) {\n  node.setAttribute('name', pair.name);\n  const /** @type {import(\"../xml.js\").NodeStackItem} */ context = {node: node};\n  const value = pair.value;\n\n  if (typeof value == 'object') {\n    if (value !== null && value.displayName) {\n      pushSerializeAndPop(context, EXTENDEDDATA_NODE_SERIALIZERS,\n        OBJECT_PROPERTY_NODE_FACTORY, [value.displayName], objectStack, ['displayName']);\n    }\n\n    if (value !== null && value.value) {\n      pushSerializeAndPop(context, EXTENDEDDATA_NODE_SERIALIZERS,\n        OBJECT_PROPERTY_NODE_FACTORY, [value.value], objectStack, ['value']);\n    }\n  } else {\n    pushSerializeAndPop(context, EXTENDEDDATA_NODE_SERIALIZERS,\n      OBJECT_PROPERTY_NODE_FACTORY, [value], objectStack, ['value']);\n  }\n}\n\n\n/**\n * @param {Node} node Node to append a TextNode with the name to.\n * @param {string} name DisplayName.\n */\nfunction writeDataNodeName(node, name) {\n  writeCDATASection(node, name);\n}\n\n\n/**\n * @param {Node} node Node to append a CDATA Section with the value to.\n * @param {string} value Value.\n */\nfunction writeDataNodeValue(node, value) {\n  writeStringTextNode(node, value);\n}\n\n\n/**\n * @const\n * @type {Object<string, Object<string, import(\"../xml.js\").Serializer>>}\n */\n// @ts-ignore\nconst DOCUMENT_SERIALIZERS = makeStructureNS(\n  NAMESPACE_URIS, {\n    'Placemark': makeChildAppender(writePlacemark)\n  });\n\n\n/**\n * @const\n * @param {*} value Value.\n * @param {Array<*>} objectStack Object stack.\n * @param {string=} opt_nodeName Node name.\n * @return {Node|undefined} Node.\n */\nconst DOCUMENT_NODE_FACTORY = function(value, objectStack, opt_nodeName) {\n  const parentNode = objectStack[objectStack.length - 1].node;\n  return createElementNS(parentNode.namespaceURI, 'Placemark');\n};\n\n\n/**\n * @param {Node} node Node.\n * @param {Array<Feature>} features Features.\n * @param {Array<*>} objectStack Object stack.\n * @this {KML}\n */\nfunction writeDocument(node, features, objectStack) {\n  const /** @type {import(\"../xml.js\").NodeStackItem} */ context = {node: node};\n  pushSerializeAndPop(context, DOCUMENT_SERIALIZERS,\n    DOCUMENT_NODE_FACTORY, features, objectStack, undefined,\n    this);\n}\n\n\n/**\n * A factory for creating Data nodes.\n * @const\n * @type {function(*, Array<*>): (Node|undefined)}\n */\nconst DATA_NODE_FACTORY = makeSimpleNodeFactory('Data');\n\n\n/**\n * @param {Node} node Node.\n * @param {{names: Array<string>, values: (Array<*>)}} namesAndValues Names and values.\n * @param {Array<*>} objectStack Object stack.\n */\nfunction writeExtendedData(node, namesAndValues, objectStack) {\n  const /** @type {import(\"../xml.js\").NodeStackItem} */ context = {node: node};\n  const names = namesAndValues.names;\n  const values = namesAndValues.values;\n  const length = names.length;\n\n  for (let i = 0; i < length; i++) {\n    pushSerializeAndPop(context, EXTENDEDDATA_NODE_SERIALIZERS,\n      DATA_NODE_FACTORY, [{name: names[i], value: values[i]}], objectStack);\n  }\n}\n\n\n/**\n * @const\n * @type {Object<string, Array<string>>}\n */\n// @ts-ignore\nconst ICON_SEQUENCE = makeStructureNS(\n  NAMESPACE_URIS, [\n    'href'\n  ],\n  makeStructureNS(GX_NAMESPACE_URIS, [\n    'x', 'y', 'w', 'h'\n  ]));\n\n\n/**\n * @const\n * @type {Object<string, Object<string, import(\"../xml.js\").Serializer>>}\n */\n// @ts-ignore\nconst ICON_SERIALIZERS = makeStructureNS(\n  NAMESPACE_URIS, {\n    'href': makeChildAppender(writeStringTextNode)\n  }, makeStructureNS(\n    GX_NAMESPACE_URIS, {\n      'x': makeChildAppender(writeDecimalTextNode),\n      'y': makeChildAppender(writeDecimalTextNode),\n      'w': makeChildAppender(writeDecimalTextNode),\n      'h': makeChildAppender(writeDecimalTextNode)\n    }));\n\n\n/**\n * @const\n * @param {*} value Value.\n * @param {Array<*>} objectStack Object stack.\n * @param {string=} opt_nodeName Node name.\n * @return {Node|undefined} Node.\n */\nconst GX_NODE_FACTORY = function(value, objectStack, opt_nodeName) {\n  return createElementNS(GX_NAMESPACE_URIS[0],\n    'gx:' + opt_nodeName);\n};\n\n\n/**\n * @param {Node} node Node.\n * @param {Object} icon Icon object.\n * @param {Array<*>} objectStack Object stack.\n */\nfunction writeIcon(node, icon, objectStack) {\n  const /** @type {import(\"../xml.js\").NodeStackItem} */ context = {node: node};\n  const parentNode = objectStack[objectStack.length - 1].node;\n  let orderedKeys = ICON_SEQUENCE[parentNode.namespaceURI];\n  let values = makeSequence(icon, orderedKeys);\n  pushSerializeAndPop(context,\n    ICON_SERIALIZERS, OBJECT_PROPERTY_NODE_FACTORY,\n    values, objectStack, orderedKeys);\n  orderedKeys =\n      ICON_SEQUENCE[GX_NAMESPACE_URIS[0]];\n  values = makeSequence(icon, orderedKeys);\n  pushSerializeAndPop(context, ICON_SERIALIZERS,\n    GX_NODE_FACTORY, values, objectStack, orderedKeys);\n}\n\n\n/**\n * @const\n * @type {Object<string, Array<string>>}\n */\n// @ts-ignore\nconst ICON_STYLE_SEQUENCE = makeStructureNS(\n  NAMESPACE_URIS, [\n    'scale', 'heading', 'Icon', 'hotSpot'\n  ]);\n\n\n/**\n * @const\n * @type {Object<string, Object<string, import(\"../xml.js\").Serializer>>}\n */\n// @ts-ignore\nconst ICON_STYLE_SERIALIZERS = makeStructureNS(\n  NAMESPACE_URIS, {\n    'Icon': makeChildAppender(writeIcon),\n    'heading': makeChildAppender(writeDecimalTextNode),\n    'hotSpot': makeChildAppender(writeVec2),\n    'scale': makeChildAppender(writeScaleTextNode)\n  });\n\n\n/**\n * @param {Node} node Node.\n * @param {import(\"../style/Icon.js\").default} style Icon style.\n * @param {Array<*>} objectStack Object stack.\n */\nfunction writeIconStyle(node, style, objectStack) {\n  const /** @type {import(\"../xml.js\").NodeStackItem} */ context = {node: node};\n  const /** @type {Object<string, any>} */ properties = {};\n  const src = style.getSrc();\n  const size = style.getSize();\n  const iconImageSize = style.getImageSize();\n  const iconProperties = {\n    'href': src\n  };\n\n  if (size) {\n    iconProperties['w'] = size[0];\n    iconProperties['h'] = size[1];\n    const anchor = style.getAnchor(); // top-left\n    const origin = style.getOrigin(); // top-left\n\n    if (origin && iconImageSize && origin[0] !== 0 && origin[1] !== size[1]) {\n      iconProperties['x'] = origin[0];\n      iconProperties['y'] = iconImageSize[1] - (origin[1] + size[1]);\n    }\n\n    if (anchor && (anchor[0] !== size[0] / 2 || anchor[1] !== size[1] / 2)) {\n      const /** @type {Vec2} */ hotSpot = {\n        x: anchor[0],\n        xunits: IconAnchorUnits.PIXELS,\n        y: size[1] - anchor[1],\n        yunits: IconAnchorUnits.PIXELS\n      };\n      properties['hotSpot'] = hotSpot;\n    }\n  }\n\n  properties['Icon'] = iconProperties;\n\n  const scale = style.getScale();\n  if (scale !== 1) {\n    properties['scale'] = scale;\n  }\n\n  const rotation = style.getRotation();\n  if (rotation !== 0) {\n    properties['heading'] = rotation; // 0-360\n  }\n\n  const parentNode = objectStack[objectStack.length - 1].node;\n  const orderedKeys = ICON_STYLE_SEQUENCE[parentNode.namespaceURI];\n  const values = makeSequence(properties, orderedKeys);\n  pushSerializeAndPop(context, ICON_STYLE_SERIALIZERS,\n    OBJECT_PROPERTY_NODE_FACTORY, values, objectStack, orderedKeys);\n}\n\n\n/**\n * @const\n * @type {Object<string, Array<string>>}\n */\n// @ts-ignore\nconst LABEL_STYLE_SEQUENCE = makeStructureNS(\n  NAMESPACE_URIS, [\n    'color', 'scale'\n  ]);\n\n\n/**\n * @const\n * @type {Object<string, Object<string, import(\"../xml.js\").Serializer>>}\n */\n// @ts-ignore\nconst LABEL_STYLE_SERIALIZERS = makeStructureNS(\n  NAMESPACE_URIS, {\n    'color': makeChildAppender(writeColorTextNode),\n    'scale': makeChildAppender(writeScaleTextNode)\n  });\n\n\n/**\n * @param {Node} node Node.\n * @param {Text} style style.\n * @param {Array<*>} objectStack Object stack.\n */\nfunction writeLabelStyle(node, style, objectStack) {\n  const /** @type {import(\"../xml.js\").NodeStackItem} */ context = {node: node};\n  const properties = {};\n  const fill = style.getFill();\n  if (fill) {\n    properties['color'] = fill.getColor();\n  }\n  const scale = style.getScale();\n  if (scale && scale !== 1) {\n    properties['scale'] = scale;\n  }\n  const parentNode = objectStack[objectStack.length - 1].node;\n  const orderedKeys =\n      LABEL_STYLE_SEQUENCE[parentNode.namespaceURI];\n  const values = makeSequence(properties, orderedKeys);\n  pushSerializeAndPop(context, LABEL_STYLE_SERIALIZERS,\n    OBJECT_PROPERTY_NODE_FACTORY, values, objectStack, orderedKeys);\n}\n\n\n/**\n * @const\n * @type {Object<string, Array<string>>}\n */\n// @ts-ignore\nconst LINE_STYLE_SEQUENCE = makeStructureNS(\n  NAMESPACE_URIS, [\n    'color', 'width'\n  ]);\n\n\n/**\n * @const\n * @type {Object<string, Object<string, import(\"../xml.js\").Serializer>>}\n */\n// @ts-ignore\nconst LINE_STYLE_SERIALIZERS = makeStructureNS(\n  NAMESPACE_URIS, {\n    'color': makeChildAppender(writeColorTextNode),\n    'width': makeChildAppender(writeDecimalTextNode)\n  });\n\n\n/**\n * @param {Node} node Node.\n * @param {Stroke} style style.\n * @param {Array<*>} objectStack Object stack.\n */\nfunction writeLineStyle(node, style, objectStack) {\n  const /** @type {import(\"../xml.js\").NodeStackItem} */ context = {node: node};\n  const properties = {\n    'color': style.getColor(),\n    'width': style.getWidth()\n  };\n  const parentNode = objectStack[objectStack.length - 1].node;\n  const orderedKeys = LINE_STYLE_SEQUENCE[parentNode.namespaceURI];\n  const values = makeSequence(properties, orderedKeys);\n  pushSerializeAndPop(context, LINE_STYLE_SERIALIZERS,\n    OBJECT_PROPERTY_NODE_FACTORY, values, objectStack, orderedKeys);\n}\n\n\n/**\n * @const\n * @type {Object<string, string>}\n */\nconst GEOMETRY_TYPE_TO_NODENAME = {\n  'Point': 'Point',\n  'LineString': 'LineString',\n  'LinearRing': 'LinearRing',\n  'Polygon': 'Polygon',\n  'MultiPoint': 'MultiGeometry',\n  'MultiLineString': 'MultiGeometry',\n  'MultiPolygon': 'MultiGeometry',\n  'GeometryCollection': 'MultiGeometry'\n};\n\n\n/**\n * @const\n * @param {*} value Value.\n * @param {Array<*>} objectStack Object stack.\n * @param {string=} opt_nodeName Node name.\n * @return {Node|undefined} Node.\n */\nconst GEOMETRY_NODE_FACTORY = function(value, objectStack, opt_nodeName) {\n  if (value) {\n    const parentNode = objectStack[objectStack.length - 1].node;\n    return createElementNS(parentNode.namespaceURI,\n      GEOMETRY_TYPE_TO_NODENAME[/** @type {import(\"../geom/Geometry.js\").default} */ (value).getType()]);\n  }\n};\n\n\n/**\n * A factory for creating Point nodes.\n * @const\n * @type {function(*, Array<*>, string=): (Node|undefined)}\n */\nconst POINT_NODE_FACTORY = makeSimpleNodeFactory('Point');\n\n\n/**\n * A factory for creating LineString nodes.\n * @const\n * @type {function(*, Array<*>, string=): (Node|undefined)}\n */\nconst LINE_STRING_NODE_FACTORY = makeSimpleNodeFactory('LineString');\n\n\n/**\n * A factory for creating LinearRing nodes.\n * @const\n * @type {function(*, Array<*>, string=): (Node|undefined)}\n */\nconst LINEAR_RING_NODE_FACTORY = makeSimpleNodeFactory('LinearRing');\n\n\n/**\n * A factory for creating Polygon nodes.\n * @const\n * @type {function(*, Array<*>, string=): (Node|undefined)}\n */\nconst POLYGON_NODE_FACTORY = makeSimpleNodeFactory('Polygon');\n\n\n/**\n * @const\n * @type {Object<string, Object<string, import(\"../xml.js\").Serializer>>}\n */\n// @ts-ignore\nconst MULTI_GEOMETRY_SERIALIZERS = makeStructureNS(\n  NAMESPACE_URIS, {\n    'LineString': makeChildAppender(\n      writePrimitiveGeometry),\n    'Point': makeChildAppender(\n      writePrimitiveGeometry),\n    'Polygon': makeChildAppender(writePolygon),\n    'GeometryCollection': makeChildAppender(\n      writeMultiGeometry)\n  });\n\n\n/**\n * @param {Node} node Node.\n * @param {import(\"../geom/Geometry.js\").default} geometry Geometry.\n * @param {Array<*>} objectStack Object stack.\n */\nfunction writeMultiGeometry(node, geometry, objectStack) {\n  /** @type {import(\"../xml.js\").NodeStackItem} */\n  const context = {node: node};\n  const type = geometry.getType();\n  /** @type {Array<import(\"../geom/Geometry.js\").default>} */\n  let geometries;\n  /** @type {function(*, Array<*>, string=): (Node|undefined)} */\n  let factory;\n  if (type == GeometryType.GEOMETRY_COLLECTION) {\n    geometries = /** @type {GeometryCollection} */ (geometry).getGeometries();\n    factory = GEOMETRY_NODE_FACTORY;\n  } else if (type == GeometryType.MULTI_POINT) {\n    geometries = /** @type {MultiPoint} */ (geometry).getPoints();\n    factory = POINT_NODE_FACTORY;\n  } else if (type == GeometryType.MULTI_LINE_STRING) {\n    geometries =\n        (/** @type {MultiLineString} */ (geometry)).getLineStrings();\n    factory = LINE_STRING_NODE_FACTORY;\n  } else if (type == GeometryType.MULTI_POLYGON) {\n    geometries =\n        (/** @type {MultiPolygon} */ (geometry)).getPolygons();\n    factory = POLYGON_NODE_FACTORY;\n  } else {\n    assert(false, 39); // Unknown geometry type\n  }\n  pushSerializeAndPop(context,\n    MULTI_GEOMETRY_SERIALIZERS, factory,\n    geometries, objectStack);\n}\n\n\n/**\n * @const\n * @type {Object<string, Object<string, import(\"../xml.js\").Serializer>>}\n */\n// @ts-ignore\nconst BOUNDARY_IS_SERIALIZERS = makeStructureNS(\n  NAMESPACE_URIS, {\n    'LinearRing': makeChildAppender(\n      writePrimitiveGeometry)\n  });\n\n\n/**\n * @param {Node} node Node.\n * @param {import(\"../geom/LinearRing.js\").default} linearRing Linear ring.\n * @param {Array<*>} objectStack Object stack.\n */\nfunction writeBoundaryIs(node, linearRing, objectStack) {\n  const /** @type {import(\"../xml.js\").NodeStackItem} */ context = {node: node};\n  pushSerializeAndPop(context,\n    BOUNDARY_IS_SERIALIZERS,\n    LINEAR_RING_NODE_FACTORY, [linearRing], objectStack);\n}\n\n\n/**\n * @const\n * @type {Object<string, Object<string, import(\"../xml.js\").Serializer>>}\n */\n// @ts-ignore\nconst PLACEMARK_SERIALIZERS = makeStructureNS(\n  NAMESPACE_URIS, {\n    'ExtendedData': makeChildAppender(writeExtendedData),\n    'MultiGeometry': makeChildAppender(writeMultiGeometry),\n    'LineString': makeChildAppender(writePrimitiveGeometry),\n    'LinearRing': makeChildAppender(writePrimitiveGeometry),\n    'Point': makeChildAppender(writePrimitiveGeometry),\n    'Polygon': makeChildAppender(writePolygon),\n    'Style': makeChildAppender(writeStyle),\n    'address': makeChildAppender(writeStringTextNode),\n    'description': makeChildAppender(writeStringTextNode),\n    'name': makeChildAppender(writeStringTextNode),\n    'open': makeChildAppender(writeBooleanTextNode),\n    'phoneNumber': makeChildAppender(writeStringTextNode),\n    'styleUrl': makeChildAppender(writeStringTextNode),\n    'visibility': makeChildAppender(writeBooleanTextNode)\n  });\n\n\n/**\n * @const\n * @type {Object<string, Array<string>>}\n */\n// @ts-ignore\nconst PLACEMARK_SEQUENCE = makeStructureNS(\n  NAMESPACE_URIS, [\n    'name', 'open', 'visibility', 'address', 'phoneNumber', 'description',\n    'styleUrl', 'Style'\n  ]);\n\n\n/**\n * A factory for creating ExtendedData nodes.\n * @const\n * @type {function(*, Array<*>): (Node|undefined)}\n */\nconst EXTENDEDDATA_NODE_FACTORY = makeSimpleNodeFactory('ExtendedData');\n\n\n/**\n * FIXME currently we do serialize arbitrary/custom feature properties\n * (ExtendedData).\n * @param {Element} node Node.\n * @param {Feature} feature Feature.\n * @param {Array<*>} objectStack Object stack.\n * @this {KML}\n */\nfunction writePlacemark(node, feature, objectStack) {\n  const /** @type {import(\"../xml.js\").NodeStackItem} */ context = {node: node};\n\n  // set id\n  if (feature.getId()) {\n    node.setAttribute('id', /** @type {string} */ (feature.getId()));\n  }\n\n  // serialize properties (properties unknown to KML are not serialized)\n  const properties = feature.getProperties();\n\n  // don't export these to ExtendedData\n  const filter = {'address': 1, 'description': 1, 'name': 1, 'open': 1,\n    'phoneNumber': 1, 'styleUrl': 1, 'visibility': 1};\n  filter[feature.getGeometryName()] = 1;\n  const keys = Object.keys(properties || {}).sort().filter(function(v) {\n    return !filter[v];\n  });\n\n  const styleFunction = feature.getStyleFunction();\n  if (styleFunction) {\n    // FIXME the styles returned by the style function are supposed to be\n    // resolution-independent here\n    const styles = styleFunction(feature, 0);\n    if (styles) {\n      const style = Array.isArray(styles) ? styles[0] : styles;\n      if (this.writeStyles_) {\n        properties['Style'] = style;\n      }\n      const textStyle = style.getText();\n      if (textStyle) {\n        properties['name'] = textStyle.getText();\n      }\n    }\n  }\n  const parentNode = objectStack[objectStack.length - 1].node;\n  const orderedKeys = PLACEMARK_SEQUENCE[parentNode.namespaceURI];\n  const values = makeSequence(properties, orderedKeys);\n  pushSerializeAndPop(context, PLACEMARK_SERIALIZERS,\n    OBJECT_PROPERTY_NODE_FACTORY, values, objectStack, orderedKeys);\n\n  if (keys.length > 0) {\n    const sequence = makeSequence(properties, keys);\n    const namesAndValues = {names: keys, values: sequence};\n    pushSerializeAndPop(context, PLACEMARK_SERIALIZERS,\n      EXTENDEDDATA_NODE_FACTORY, [namesAndValues], objectStack);\n  }\n\n  // serialize geometry\n  const options = /** @type {import(\"./Feature.js\").WriteOptions} */ (objectStack[0]);\n  let geometry = feature.getGeometry();\n  if (geometry) {\n    geometry = transformGeometryWithOptions(geometry, true, options);\n  }\n  pushSerializeAndPop(context, PLACEMARK_SERIALIZERS,\n    GEOMETRY_NODE_FACTORY, [geometry], objectStack);\n}\n\n\n/**\n * @const\n * @type {Object<string, Array<string>>}\n */\n// @ts-ignore\nconst PRIMITIVE_GEOMETRY_SEQUENCE = makeStructureNS(\n  NAMESPACE_URIS, [\n    'extrude', 'tessellate', 'altitudeMode', 'coordinates'\n  ]);\n\n\n/**\n * @const\n * @type {Object<string, Object<string, import(\"../xml.js\").Serializer>>}\n */\n// @ts-ignore\nconst PRIMITIVE_GEOMETRY_SERIALIZERS = makeStructureNS(\n  NAMESPACE_URIS, {\n    'extrude': makeChildAppender(writeBooleanTextNode),\n    'tessellate': makeChildAppender(writeBooleanTextNode),\n    'altitudeMode': makeChildAppender(writeStringTextNode),\n    'coordinates': makeChildAppender(writeCoordinatesTextNode)\n  });\n\n\n/**\n * @param {Node} node Node.\n * @param {import(\"../geom/SimpleGeometry.js\").default} geometry Geometry.\n * @param {Array<*>} objectStack Object stack.\n */\nfunction writePrimitiveGeometry(node, geometry, objectStack) {\n  const flatCoordinates = geometry.getFlatCoordinates();\n  const /** @type {import(\"../xml.js\").NodeStackItem} */ context = {node: node};\n  context['layout'] = geometry.getLayout();\n  context['stride'] = geometry.getStride();\n\n  // serialize properties (properties unknown to KML are not serialized)\n  const properties = geometry.getProperties();\n  properties.coordinates = flatCoordinates;\n\n  const parentNode = objectStack[objectStack.length - 1].node;\n  const orderedKeys = PRIMITIVE_GEOMETRY_SEQUENCE[parentNode.namespaceURI];\n  const values = makeSequence(properties, orderedKeys);\n  pushSerializeAndPop(context, PRIMITIVE_GEOMETRY_SERIALIZERS,\n    OBJECT_PROPERTY_NODE_FACTORY, values, objectStack, orderedKeys);\n}\n\n\n/**\n * @const\n * @type {Object<string, Object<string, import(\"../xml.js\").Serializer>>}\n */\n// @ts-ignore\nconst POLYGON_SERIALIZERS = makeStructureNS(\n  NAMESPACE_URIS, {\n    'outerBoundaryIs': makeChildAppender(\n      writeBoundaryIs),\n    'innerBoundaryIs': makeChildAppender(\n      writeBoundaryIs)\n  });\n\n\n/**\n * A factory for creating innerBoundaryIs nodes.\n * @const\n * @type {function(*, Array<*>, string=): (Node|undefined)}\n */\nconst INNER_BOUNDARY_NODE_FACTORY = makeSimpleNodeFactory('innerBoundaryIs');\n\n\n/**\n * A factory for creating outerBoundaryIs nodes.\n * @const\n * @type {function(*, Array<*>, string=): (Node|undefined)}\n */\nconst OUTER_BOUNDARY_NODE_FACTORY = makeSimpleNodeFactory('outerBoundaryIs');\n\n\n/**\n * @param {Node} node Node.\n * @param {Polygon} polygon Polygon.\n * @param {Array<*>} objectStack Object stack.\n */\nfunction writePolygon(node, polygon, objectStack) {\n  const linearRings = polygon.getLinearRings();\n  const outerRing = linearRings.shift();\n  const /** @type {import(\"../xml.js\").NodeStackItem} */ context = {node: node};\n  // inner rings\n  pushSerializeAndPop(context,\n    POLYGON_SERIALIZERS,\n    INNER_BOUNDARY_NODE_FACTORY,\n    linearRings, objectStack);\n  // outer ring\n  pushSerializeAndPop(context,\n    POLYGON_SERIALIZERS,\n    OUTER_BOUNDARY_NODE_FACTORY,\n    [outerRing], objectStack);\n}\n\n\n/**\n * @const\n * @type {Object<string, Object<string, import(\"../xml.js\").Serializer>>}\n */\n// @ts-ignore\nconst POLY_STYLE_SERIALIZERS = makeStructureNS(\n  NAMESPACE_URIS, {\n    'color': makeChildAppender(writeColorTextNode)\n  });\n\n\n/**\n * A factory for creating coordinates nodes.\n * @const\n * @type {function(*, Array<*>, string=): (Node|undefined)}\n */\nconst COLOR_NODE_FACTORY = makeSimpleNodeFactory('color');\n\n\n/**\n * @param {Node} node Node.\n * @param {Fill} style Style.\n * @param {Array<*>} objectStack Object stack.\n */\nfunction writePolyStyle(node, style, objectStack) {\n  const /** @type {import(\"../xml.js\").NodeStackItem} */ context = {node: node};\n  pushSerializeAndPop(context, POLY_STYLE_SERIALIZERS,\n    COLOR_NODE_FACTORY, [style.getColor()], objectStack);\n}\n\n\n/**\n * @param {Node} node Node to append a TextNode with the scale to.\n * @param {number|undefined} scale Scale.\n */\nfunction writeScaleTextNode(node, scale) {\n  // the Math is to remove any excess decimals created by float arithmetic\n  writeDecimalTextNode(node,\n    Math.round(scale * 1e6) / 1e6);\n}\n\n\n/**\n * @const\n * @type {Object<string, Array<string>>}\n */\n// @ts-ignore\nconst STYLE_SEQUENCE = makeStructureNS(\n  NAMESPACE_URIS, [\n    'IconStyle', 'LabelStyle', 'LineStyle', 'PolyStyle'\n  ]);\n\n\n/**\n * @const\n * @type {Object<string, Object<string, import(\"../xml.js\").Serializer>>}\n */\n// @ts-ignore\nconst STYLE_SERIALIZERS = makeStructureNS(\n  NAMESPACE_URIS, {\n    'IconStyle': makeChildAppender(writeIconStyle),\n    'LabelStyle': makeChildAppender(writeLabelStyle),\n    'LineStyle': makeChildAppender(writeLineStyle),\n    'PolyStyle': makeChildAppender(writePolyStyle)\n  });\n\n\n/**\n * @param {Node} node Node.\n * @param {Style} style Style.\n * @param {Array<*>} objectStack Object stack.\n */\nfunction writeStyle(node, style, objectStack) {\n  const /** @type {import(\"../xml.js\").NodeStackItem} */ context = {node: node};\n  const properties = {};\n  const fillStyle = style.getFill();\n  const strokeStyle = style.getStroke();\n  const imageStyle = style.getImage();\n  const textStyle = style.getText();\n  if (imageStyle && typeof /** @type {?} */ (imageStyle).getSrc === 'function') {\n    properties['IconStyle'] = imageStyle;\n  }\n  if (textStyle) {\n    properties['LabelStyle'] = textStyle;\n  }\n  if (strokeStyle) {\n    properties['LineStyle'] = strokeStyle;\n  }\n  if (fillStyle) {\n    properties['PolyStyle'] = fillStyle;\n  }\n  const parentNode = objectStack[objectStack.length - 1].node;\n  const orderedKeys = STYLE_SEQUENCE[parentNode.namespaceURI];\n  const values = makeSequence(properties, orderedKeys);\n  pushSerializeAndPop(context, STYLE_SERIALIZERS,\n    OBJECT_PROPERTY_NODE_FACTORY, values, objectStack, orderedKeys);\n}\n\n\n/**\n * @param {Element} node Node to append a TextNode with the Vec2 to.\n * @param {Vec2} vec2 Vec2.\n */\nfunction writeVec2(node, vec2) {\n  node.setAttribute('x', String(vec2.x));\n  node.setAttribute('y', String(vec2.y));\n  node.setAttribute('xunits', vec2.xunits);\n  node.setAttribute('yunits', vec2.yunits);\n}\n\n\nexport default KML;\n","/**\n * @module ol/layer/VectorTileRenderType\n */\n\n/**\n * @enum {string}\n * Render mode for vector tiles:\n *  * `'image'`: Vector tiles are rendered as images. Great performance, but\n *    point symbols and texts are always rotated with the view and pixels are\n *    scaled during zoom animations.\n *  * `'hybrid'`: Polygon and line elements are rendered as images, so pixels\n *    are scaled during zoom animations. Point symbols and texts are accurately\n *    rendered as vectors and can stay upright on rotated views.\n * @api\n */\nexport default {\n  IMAGE: 'image',\n  HYBRID: 'hybrid'\n};\n","/**\n * @module ol/renderer/canvas/VectorTileLayer\n */\nimport {getUid} from '../../util.js';\nimport {createCanvasContext2D} from '../../dom.js';\nimport TileState from '../../TileState.js';\nimport ViewHint from '../../ViewHint.js';\nimport {listen, unlistenByKey} from '../../events.js';\nimport EventType from '../../events/EventType.js';\nimport {buffer, containsCoordinate, equals, getIntersection, intersects} from '../../extent.js';\nimport VectorTileRenderType from '../../layer/VectorTileRenderType.js';\nimport ReplayType from '../../render/canvas/BuilderType.js';\nimport CanvasBuilderGroup from '../../render/canvas/BuilderGroup.js';\nimport CanvasTileLayerRenderer from './TileLayer.js';\nimport {getSquaredTolerance as getSquaredRenderTolerance, renderFeature} from '../vector.js';\nimport {\n  apply as applyTransform,\n  create as createTransform,\n  reset as resetTransform,\n  scale as scaleTransform,\n  translate as translateTransform,\n  toString as transformToString,\n  makeScale,\n  makeInverse\n} from '../../transform.js';\nimport CanvasExecutorGroup, {replayDeclutter} from '../../render/canvas/ExecutorGroup.js';\nimport {clear} from '../../obj.js';\n\n\n/**\n * @type {!Object<string, Array<import(\"../../render/canvas/BuilderType.js\").default>>}\n */\nconst IMAGE_REPLAYS = {\n  'image': [ReplayType.POLYGON, ReplayType.CIRCLE,\n    ReplayType.LINE_STRING, ReplayType.IMAGE, ReplayType.TEXT],\n  'hybrid': [ReplayType.POLYGON, ReplayType.LINE_STRING]\n};\n\n\n/**\n * @type {!Object<string, Array<import(\"../../render/canvas/BuilderType.js\").default>>}\n */\nconst VECTOR_REPLAYS = {\n  'image': [ReplayType.DEFAULT],\n  'hybrid': [ReplayType.IMAGE, ReplayType.TEXT, ReplayType.DEFAULT]\n};\n\n\n/**\n * @classdesc\n * Canvas renderer for vector tile layers.\n * @api\n */\nclass CanvasVectorTileLayerRenderer extends CanvasTileLayerRenderer {\n\n  /**\n   * @param {import(\"../../layer/VectorTile.js\").default} layer VectorTile layer.\n   */\n  constructor(layer) {\n    super(layer);\n\n    /** @private */\n    this.boundHandleStyleImageChange_ = this.handleStyleImageChange_.bind(this);\n\n    /**\n     * @private\n     * @type {CanvasRenderingContext2D}\n     */\n    this.overlayContext_ = null;\n\n    /**\n     * @type {string}\n     */\n    this.overlayContextUid_;\n\n    /**\n     * The transform for rendered pixels to viewport CSS pixels for the overlay canvas.\n     * @private\n     * @type {import(\"../../transform.js\").Transform}\n     */\n    this.overlayPixelTransform_ = createTransform();\n\n    /**\n     * The transform for viewport CSS pixels to rendered pixels for the overlay canvas.\n     * @private\n     * @type {import(\"../../transform.js\").Transform}\n     */\n    this.inverseOverlayPixelTransform_ = createTransform();\n\n    /**\n     * @private\n     * @type {boolean}\n     */\n    this.dirty_ = false;\n\n    /**\n     * @private\n     * @type {number}\n     */\n    this.renderedLayerRevision_;\n\n    /**\n     * @private\n     * @type {!Object<string, import(\"../../VectorRenderTile.js\").default>}\n     */\n    this.renderTileImageQueue_ = {};\n\n    /**\n     * @type {Object<string, import(\"../../events.js\").EventsKey>}\n     */\n    this.tileListenerKeys_ = {};\n\n    /**\n     * @private\n     * @type {import(\"../../transform.js\").Transform}\n     */\n    this.tmpTransform_ = createTransform();\n  }\n\n  /**\n   * @inheritDoc\n   */\n  useContainer(target, transform, opacity) {\n    let overlayContext;\n    if (target && target.childElementCount === 2) {\n      overlayContext = target.lastElementChild.getContext('2d');\n      if (!overlayContext) {\n        target = null;\n      }\n    }\n    const containerReused = this.containerReused;\n    super.useContainer(target, transform, opacity);\n    if (containerReused) {\n      this.overlayContext_ = overlayContext || null;\n      this.overlayContextUid_ = overlayContext ? getUid(overlayContext) : undefined;\n    }\n    if (!this.overlayContext_) {\n      const overlayContext = createCanvasContext2D();\n      const style = overlayContext.canvas.style;\n      style.position = 'absolute';\n      style.transformOrigin = 'top left';\n      this.overlayContext_ = overlayContext;\n      this.overlayContextUid_ = getUid(overlayContext);\n    }\n    if (this.container.childElementCount === 1) {\n      this.container.appendChild(this.overlayContext_.canvas);\n    }\n  }\n\n  /**\n   * @param {import(\"../../VectorRenderTile.js\").default} tile Tile.\n   * @param {number} pixelRatio Pixel ratio.\n   * @param {import(\"../../proj/Projection\").default} projection Projection.\n   * @param {boolean} queue Queue tile for rendering.\n   * @return {boolean} Tile needs to be rendered.\n   */\n  prepareTile(tile, pixelRatio, projection, queue) {\n    let render = false;\n    const tileUid = getUid(tile);\n    const state = tile.getState();\n    if (((state === TileState.LOADED && tile.hifi) ||\n        state === TileState.ERROR || state === TileState.ABORT) &&\n        tileUid in this.tileListenerKeys_) {\n      unlistenByKey(this.tileListenerKeys_[tileUid]);\n      delete this.tileListenerKeys_[tileUid];\n    }\n    if (state === TileState.LOADED || state === TileState.ERROR) {\n      this.updateExecutorGroup_(tile, pixelRatio, projection);\n      if (this.tileImageNeedsRender_(tile, pixelRatio, projection)) {\n        render = true;\n        if (queue) {\n          this.renderTileImageQueue_[tileUid] = tile;\n        }\n      }\n    }\n    return render;\n  }\n\n  /**\n   * @inheritDoc\n   */\n  getTile(z, x, y, frameState) {\n    const tile = /** @type {import(\"../../VectorRenderTile.js\").default} */ (super.getTile(z, x, y, frameState));\n    const pixelRatio = frameState.pixelRatio;\n    const viewState = frameState.viewState;\n    const resolution = viewState.resolution;\n    const projection = viewState.projection;\n    if (tile.getState() < TileState.LOADED) {\n      tile.wantedResolution = resolution;\n      const tileUid = getUid(tile);\n      if (!(tileUid in this.tileListenerKeys_)) {\n        const listenerKey = listen(tile, EventType.CHANGE, this.prepareTile.bind(this, tile, pixelRatio, projection, true));\n        this.tileListenerKeys_[tileUid] = listenerKey;\n      }\n    } else {\n      const viewHints = frameState.viewHints;\n      const hifi = !(viewHints[ViewHint.ANIMATING] || viewHints[ViewHint.INTERACTING]);\n      if (hifi || !tile.wantedResolution) {\n        tile.wantedResolution = resolution;\n      }\n      const render = this.prepareTile(tile, pixelRatio, projection, false);\n      if (render) {\n        this.renderTileImage_(tile, frameState);\n      }\n    }\n    return tile;\n  }\n\n  /**\n   * @inheritdoc\n   */\n  isDrawableTile(tile) {\n    return super.isDrawableTile(tile) && tile.hasContext(this.getLayer());\n  }\n\n  /**\n   * @inheritDoc\n   */\n  getTileImage(tile) {\n    return tile.getImage(this.getLayer());\n  }\n\n  /**\n   * @inheritDoc\n   */\n  prepareFrame(frameState) {\n    const layerState = frameState.layerStatesArray[frameState.layerIndex];\n    layerState.hasOverlay = true;\n    const layerRevision = this.getLayer().getRevision();\n    if (this.renderedLayerRevision_ != layerRevision) {\n      this.renderedTiles.length = 0;\n    }\n    this.renderedLayerRevision_ = layerRevision;\n    return super.prepareFrame(frameState);\n  }\n\n  /**\n   * @param {import(\"../../VectorRenderTile.js\").default} tile Tile.\n   * @param {number} pixelRatio Pixel ratio.\n   * @param {import(\"../../proj/Projection.js\").default} projection Projection.\n   * @private\n   */\n  updateExecutorGroup_(tile, pixelRatio, projection) {\n    const layer = /** @type {import(\"../../layer/VectorTile.js\").default} */ (this.getLayer());\n    const revision = layer.getRevision();\n    const renderOrder = layer.getRenderOrder() || null;\n\n    const resolution = tile.wantedResolution;\n    const builderState = tile.getReplayState(layer);\n    if (!builderState.dirty && builderState.renderedResolution === resolution &&\n        builderState.renderedRevision == revision &&\n        builderState.renderedRenderOrder == renderOrder && builderState.renderedZ === tile.sourceZ) {\n      return;\n    }\n\n    const source = layer.getSource();\n    const sourceTileGrid = source.getTileGrid();\n    const tileGrid = source.getTileGridForProjection(projection);\n    const tileExtent = tileGrid.getTileCoordExtent(tile.wrappedTileCoord);\n\n    const sourceTiles = source.getSourceTiles(pixelRatio, projection, tile);\n    const layerUid = getUid(layer);\n    const executorGroups = tile.executorGroups[layerUid];\n    if (executorGroups) {\n      for (let i = 0, ii = executorGroups.length; i < ii; ++i) {\n        executorGroups[i].dispose();\n      }\n    }\n    tile.executorGroups[layerUid] = [];\n    for (let t = 0, tt = sourceTiles.length; t < tt; ++t) {\n      const sourceTile = sourceTiles[t];\n      if (sourceTile.getState() != TileState.LOADED) {\n        continue;\n      }\n      const sourceTileCoord = sourceTile.tileCoord;\n      const sourceTileExtent = sourceTileGrid.getTileCoordExtent(sourceTileCoord);\n      const sharedExtent = getIntersection(tileExtent, sourceTileExtent);\n      const bufferedExtent = equals(sourceTileExtent, sharedExtent) ? null :\n        buffer(sharedExtent, layer.getRenderBuffer() * resolution, this.tmpExtent);\n      builderState.dirty = false;\n      const builderGroup = new CanvasBuilderGroup(0, sharedExtent, resolution,\n        pixelRatio, layer.getDeclutter());\n      const squaredTolerance = getSquaredRenderTolerance(resolution, pixelRatio);\n\n      /**\n       * @param {import(\"../../Feature.js\").FeatureLike} feature Feature.\n       * @this {CanvasVectorTileLayerRenderer}\n       */\n      const render = function(feature) {\n        let styles;\n        const styleFunction = feature.getStyleFunction() || layer.getStyleFunction();\n        if (styleFunction) {\n          styles = styleFunction(feature, resolution);\n        }\n        if (styles) {\n          const dirty = this.renderFeature(feature, squaredTolerance, styles, builderGroup);\n          this.dirty_ = this.dirty_ || dirty;\n          builderState.dirty = builderState.dirty || dirty;\n        }\n      };\n\n      const features = sourceTile.getFeatures();\n      if (renderOrder && renderOrder !== builderState.renderedRenderOrder) {\n        features.sort(renderOrder);\n      }\n      for (let i = 0, ii = features.length; i < ii; ++i) {\n        const feature = features[i];\n        if (!bufferedExtent || intersects(bufferedExtent, feature.getGeometry().getExtent())) {\n          render.call(this, feature);\n        }\n      }\n      const executorGroupInstructions = builderGroup.finish();\n      // no need to clip when the render tile is covered by a single source tile\n      const replayExtent = layer.getDeclutter() && sourceTiles.length === 1 ?\n        null :\n        sharedExtent;\n      const renderingReplayGroup = new CanvasExecutorGroup(replayExtent, resolution,\n        pixelRatio, source.getOverlaps(), executorGroupInstructions, layer.getRenderBuffer());\n      tile.executorGroups[layerUid].push(renderingReplayGroup);\n    }\n    builderState.renderedRevision = revision;\n    builderState.renderedZ = tile.sourceZ;\n    builderState.renderedRenderOrder = renderOrder;\n    builderState.renderedResolution = resolution;\n  }\n\n  /**\n   * @inheritDoc\n   */\n  forEachFeatureAtCoordinate(coordinate, frameState, hitTolerance, callback, declutteredFeatures) {\n    const resolution = frameState.viewState.resolution;\n    const rotation = frameState.viewState.rotation;\n    hitTolerance = hitTolerance == undefined ? 0 : hitTolerance;\n    const layer = /** @type {import(\"../../layer/VectorTile.js\").default} */ (this.getLayer());\n    const declutter = layer.getDeclutter();\n    const source = layer.getSource();\n    const tileGrid = source.getTileGridForProjection(frameState.viewState.projection);\n    /** @type {!Object<string, boolean>} */\n    const features = {};\n\n    const renderedTiles = /** @type {Array<import(\"../../VectorRenderTile.js\").default>} */ (this.renderedTiles);\n\n    let found;\n    let i, ii;\n    for (i = 0, ii = renderedTiles.length; i < ii; ++i) {\n      const tile = renderedTiles[i];\n      const tileExtent = tileGrid.getTileCoordExtent(tile.wrappedTileCoord);\n      const tileContainsCoordinate = containsCoordinate(tileExtent, coordinate);\n\n      if (!declutter) {\n        // When not decluttering, we only need to consider the tile that contains the given\n        // coordinate, because each feature will be rendered for each tile that contains it.\n        if (!tileContainsCoordinate) {\n          continue;\n        }\n      }\n      const executorGroups = tile.executorGroups[getUid(layer)];\n      for (let t = 0, tt = executorGroups.length; t < tt; ++t) {\n        const executorGroup = executorGroups[t];\n        found = found || executorGroup.forEachFeatureAtCoordinate(coordinate, resolution, rotation, hitTolerance,\n          /**\n           * @param {import(\"../../Feature.js\").FeatureLike} feature Feature.\n           * @return {?} Callback result.\n           */\n          function(feature) {\n            if (tileContainsCoordinate || (declutteredFeatures && declutteredFeatures.indexOf(feature) !== -1)) {\n              let key = feature.getId();\n              if (key === undefined) {\n                key = getUid(feature);\n              }\n              if (!(key in features)) {\n                features[key] = true;\n                return callback(feature, layer);\n              }\n            }\n          }, layer.getDeclutter() ? declutteredFeatures : null);\n      }\n    }\n    return found;\n  }\n\n  /**\n   * @inheritDoc\n   */\n  handleFontsChanged() {\n    clear(this.renderTileImageQueue_);\n    const layer = this.getLayer();\n    if (layer.getVisible() && this.renderedLayerRevision_ !== undefined) {\n      layer.changed();\n    }\n  }\n\n  /**\n   * Handle changes in image style state.\n   * @param {import(\"../../events/Event.js\").default} event Image style change event.\n   * @private\n   */\n  handleStyleImageChange_(event) {\n    this.renderIfReadyAndVisible();\n  }\n\n  /**\n   * @inheritDoc\n   */\n  renderFrame(frameState, target) {\n    const viewHints = frameState.viewHints;\n    const hifi = !(viewHints[ViewHint.ANIMATING] || viewHints[ViewHint.INTERACTING]);\n    this.renderQueuedTileImages_(hifi, frameState);\n\n    super.renderFrame(frameState, target);\n\n    const layer = /** @type {import(\"../../layer/VectorTile.js\").default} */ (this.getLayer());\n    const renderMode = layer.getRenderMode();\n    if (renderMode === VectorTileRenderType.IMAGE) {\n      return this.container;\n    }\n\n    const source = layer.getSource();\n    // Unqueue tiles from the image queue when we don't need any more\n    const usedTiles = frameState.usedTiles[getUid(source)];\n    for (const tileUid in this.renderTileImageQueue_) {\n      if (!usedTiles || !(tileUid in usedTiles)) {\n        delete this.renderTileImageQueue_[tileUid];\n      }\n    }\n\n    const context = this.overlayContext_;\n    const declutterReplays = layer.getDeclutter() ? {} : null;\n    const replayTypes = VECTOR_REPLAYS[renderMode];\n    const pixelRatio = frameState.pixelRatio;\n    const rotation = frameState.viewState.rotation;\n    const size = frameState.size;\n\n    // set forward and inverse pixel transforms\n    makeScale(this.overlayPixelTransform_, 1 / pixelRatio, 1 / pixelRatio);\n    makeInverse(this.inverseOverlayPixelTransform_, this.overlayPixelTransform_);\n\n    // resize and clear\n    const canvas = context.canvas;\n    const width = Math.round(size[0] * pixelRatio);\n    const height = Math.round(size[1] * pixelRatio);\n    if (canvas.width != width || canvas.height != height) {\n      canvas.width = width;\n      canvas.height = height;\n      const canvasTransform = transformToString(this.overlayPixelTransform_);\n      if (canvas.style.transform !== canvasTransform) {\n        canvas.style.transform = canvasTransform;\n      }\n    } else if (getUid(context) === this.overlayContextUid_) {\n      context.clearRect(0, 0, width, height);\n    }\n\n    const tiles = this.renderedTiles;\n    const tileGrid = source.getTileGridForProjection(frameState.viewState.projection);\n    const clips = [];\n    const clipZs = [];\n    for (let i = tiles.length - 1; i >= 0; --i) {\n      const tile = /** @type {import(\"../../VectorRenderTile.js\").default} */ (tiles[i]);\n      if (tile.getState() == TileState.ABORT) {\n        continue;\n      }\n      const tileCoord = tile.tileCoord;\n      const tileExtent = tileGrid.getTileCoordExtent(tile.wrappedTileCoord);\n      const worldOffset = tileGrid.getTileCoordExtent(tileCoord, this.tmpExtent)[0] - tileExtent[0];\n      const transform = this.getRenderTransform(frameState, width, height, worldOffset);\n      const executorGroups = tile.executorGroups[getUid(layer)];\n      let clipped = false;\n      for (let t = 0, tt = executorGroups.length; t < tt; ++t) {\n        const executorGroup = executorGroups[t];\n        if (!executorGroup.hasExecutors(replayTypes)) {\n          // sourceTile has no instructions of the types we want to render\n          continue;\n        }\n        const currentZ = tile.tileCoord[0];\n        let currentClip;\n        if (!declutterReplays && !clipped) {\n          currentClip = executorGroup.getClipCoords(transform);\n          context.save();\n\n          // Create a clip mask for regions in this low resolution tile that are\n          // already filled by a higher resolution tile\n          for (let j = 0, jj = clips.length; j < jj; ++j) {\n            const clip = clips[j];\n            if (currentZ < clipZs[j]) {\n              context.beginPath();\n              // counter-clockwise (outer ring) for current tile\n              context.moveTo(currentClip[0], currentClip[1]);\n              context.lineTo(currentClip[2], currentClip[3]);\n              context.lineTo(currentClip[4], currentClip[5]);\n              context.lineTo(currentClip[6], currentClip[7]);\n              // clockwise (inner ring) for higher resolution tile\n              context.moveTo(clip[6], clip[7]);\n              context.lineTo(clip[4], clip[5]);\n              context.lineTo(clip[2], clip[3]);\n              context.lineTo(clip[0], clip[1]);\n              context.clip();\n            }\n          }\n        }\n        executorGroup.execute(context, transform, rotation, hifi, replayTypes, declutterReplays);\n        if (!declutterReplays && !clipped) {\n          context.restore();\n          clips.push(currentClip);\n          clipZs.push(currentZ);\n          clipped = true;\n        }\n      }\n    }\n    if (declutterReplays) {\n      const layerState = frameState.layerStatesArray[frameState.layerIndex];\n      replayDeclutter(declutterReplays, context, rotation, layerState.opacity, hifi, frameState.declutterItems);\n    }\n\n    return this.container;\n  }\n\n  /**\n   * @param {boolean} hifi We have time to render a high fidelity map image.\n   * @param {import('../../PluggableMap.js').FrameState} frameState Frame state.\n   */\n  renderQueuedTileImages_(hifi, frameState) {\n    // When we don't have time to render hifi, only render tiles until we have used up\n    // half of the frame budget of 16 ms\n    for (const uid in this.renderTileImageQueue_) {\n      if (!hifi && Date.now() - frameState.time > 8) {\n        frameState.animate = true;\n        break;\n      }\n      const tile = this.renderTileImageQueue_[uid];\n      delete this.renderTileImageQueue_[uid];\n      this.renderTileImage_(tile, frameState);\n    }\n  }\n\n  /**\n   * @param {import(\"../../Feature.js\").FeatureLike} feature Feature.\n   * @param {number} squaredTolerance Squared tolerance.\n   * @param {import(\"../../style/Style.js\").default|Array<import(\"../../style/Style.js\").default>} styles The style or array of styles.\n   * @param {import(\"../../render/canvas/BuilderGroup.js\").default} executorGroup Replay group.\n   * @return {boolean} `true` if an image is loading.\n   */\n  renderFeature(feature, squaredTolerance, styles, executorGroup) {\n    if (!styles) {\n      return false;\n    }\n    let loading = false;\n    if (Array.isArray(styles)) {\n      for (let i = 0, ii = styles.length; i < ii; ++i) {\n        loading = renderFeature(\n          executorGroup, feature, styles[i], squaredTolerance,\n          this.boundHandleStyleImageChange_) || loading;\n      }\n    } else {\n      loading = renderFeature(\n        executorGroup, feature, styles, squaredTolerance,\n        this.boundHandleStyleImageChange_);\n    }\n    return loading;\n  }\n\n  /**\n   * @param {import(\"../../VectorRenderTile.js\").default} tile Tile.\n   * @param {number} pixelRatio Pixel ratio.\n   * @param {import(\"../../proj/Projection.js\").default} projection Projection.\n   * @return {boolean} A new tile image was rendered.\n   * @private\n   */\n  tileImageNeedsRender_(tile, pixelRatio, projection) {\n    const layer = /** @type {import(\"../../layer/VectorTile.js\").default} */ (this.getLayer());\n    const replayState = tile.getReplayState(layer);\n    const revision = layer.getRevision();\n    const sourceZ = tile.sourceZ;\n    const resolution = tile.wantedResolution;\n    return replayState.renderedTileResolution !== resolution || replayState.renderedTileRevision !== revision || replayState.renderedTileZ !== sourceZ;\n  }\n\n  /**\n   * @param {import(\"../../VectorRenderTile.js\").default} tile Tile.\n   * @param {import(\"../../PluggableMap\").FrameState} frameState Frame state.\n   * @private\n   */\n  renderTileImage_(tile, frameState) {\n    const layer = /** @type {import(\"../../layer/VectorTile.js\").default} */ (this.getLayer());\n    const replayState = tile.getReplayState(layer);\n    const revision = layer.getRevision();\n    const executorGroups = tile.executorGroups[getUid(layer)];\n    replayState.renderedTileRevision = revision;\n    replayState.renderedTileZ = tile.sourceZ;\n\n    const tileCoord = tile.wrappedTileCoord;\n    const z = tileCoord[0];\n    const source = layer.getSource();\n    let pixelRatio = frameState.pixelRatio;\n    const viewState = frameState.viewState;\n    const projection = viewState.projection;\n    const tileGrid = source.getTileGridForProjection(projection);\n    const tileResolution = tileGrid.getResolution(tile.tileCoord[0]);\n    const renderPixelRatio = frameState.pixelRatio / tile.wantedResolution * tileResolution;\n    const resolution = tileGrid.getResolution(z);\n    const context = tile.getContext(layer);\n\n    // Increase tile size when overzooming for low pixel ratio, to avoid blurry tiles\n    pixelRatio = Math.max(pixelRatio, renderPixelRatio / pixelRatio);\n    const size = source.getTilePixelSize(z, pixelRatio, projection);\n    context.canvas.width = size[0];\n    context.canvas.height = size[1];\n    const renderScale = pixelRatio / renderPixelRatio;\n    if (renderScale !== 1) {\n      const canvasTransform = resetTransform(this.tmpTransform_);\n      scaleTransform(canvasTransform, renderScale, renderScale);\n      context.setTransform.apply(context, canvasTransform);\n    }\n    const tileExtent = tileGrid.getTileCoordExtent(tileCoord, this.tmpExtent);\n    const pixelScale = renderPixelRatio / resolution;\n    const transform = resetTransform(this.tmpTransform_);\n    scaleTransform(transform, pixelScale, -pixelScale);\n    translateTransform(transform, -tileExtent[0], -tileExtent[3]);\n    for (let i = 0, ii = executorGroups.length; i < ii; ++i) {\n      const executorGroup = executorGroups[i];\n      executorGroup.execute(context, transform, 0, true, IMAGE_REPLAYS[layer.getRenderMode()]);\n    }\n    replayState.renderedTileResolution = tile.wantedResolution;\n  }\n\n  /**\n   * @inheritDoc\n   */\n  getDataAtPixel(pixel, frameState, hitTolerance) {\n    let data = super.getDataAtPixel(pixel, frameState, hitTolerance);\n    if (data) {\n      return data;\n    }\n\n    const renderPixel = applyTransform(this.inverseOverlayPixelTransform_, pixel.slice());\n    const context = this.overlayContext_;\n\n    try {\n      data = context.getImageData(Math.round(renderPixel[0]), Math.round(renderPixel[1]), 1, 1).data;\n    } catch (err) {\n      if (err.name === 'SecurityError') {\n        // tainted canvas, we assume there is data at the given pixel (although there might not be)\n        return new Uint8Array();\n      }\n      return data;\n    }\n\n    if (data[3] === 0) {\n      return null;\n    }\n    return data;\n  }\n\n}\n\n\nexport default CanvasVectorTileLayerRenderer;\n","/**\n * @module ol/layer/VectorTile\n */\nimport {assert} from '../asserts.js';\nimport TileProperty from './TileProperty.js';\nimport BaseVectorLayer from './BaseVector.js';\nimport VectorTileRenderType from './VectorTileRenderType.js';\nimport CanvasVectorTileLayerRenderer from '../renderer/canvas/VectorTileLayer.js';\nimport {assign} from '../obj.js';\n\n\n/**\n * @typedef {Object} Options\n * @property {string} [className='ol-layer'] A CSS class name to set to the layer element.\n * @property {number} [opacity=1] Opacity (0, 1).\n * @property {boolean} [visible=true] Visibility.\n * @property {import(\"../extent.js\").Extent} [extent] The bounding extent for layer rendering.  The layer will not be\n * rendered outside of this extent.\n * @property {number} [zIndex] The z-index for layer rendering.  At rendering time, the layers\n * will be ordered, first by Z-index and then by position. When `undefined`, a `zIndex` of 0 is assumed\n * for layers that are added to the map's `layers` collection, or `Infinity` when the layer's `setMap()`\n * method was used.\n * @property {number} [minResolution] The minimum resolution (inclusive) at which this layer will be\n * visible.\n * @property {number} [maxResolution] The maximum resolution (exclusive) below which this layer will\n * be visible.\n * @property {import(\"../render.js\").OrderFunction} [renderOrder] Render order. Function to be used when sorting\n * features before rendering. By default features are drawn in the order that they are created. Use\n * `null` to avoid the sort, but get an undefined draw order.\n * @property {number} [renderBuffer=100] The buffer in pixels around the tile extent used by the\n * renderer when getting features from the vector tile for the rendering or hit-detection.\n * Recommended value: Vector tiles are usually generated with a buffer, so this value should match\n * the largest possible buffer of the used tiles. It should be at least the size of the largest\n * point symbol or line width.\n * @property {import(\"./VectorTileRenderType.js\").default|string} [renderMode='hybrid'] Render mode for vector tiles:\n *  * `'image'`: Vector tiles are rendered as images. Great performance, but point symbols and texts\n *    are always rotated with the view and pixels are scaled during zoom animations. When `declutter`\n *    is set to `true`, the decluttering is done per tile resulting in labels and point symbols getting\n *    cut off at tile boundaries.\n *  * `'hybrid'`: Polygon and line elements are rendered as images, so pixels are scaled during zoom\n *    animations. Point symbols and texts are accurately rendered as vectors and can stay upright on\n *    rotated views.\n *\n * @property {import(\"../source/VectorTile.js\").default} [source] Source.\n * @property {import(\"../PluggableMap.js\").default} [map] Sets the layer as overlay on a map. The map will not manage\n * this layer in its layers collection, and the layer will be rendered on top. This is useful for\n * temporary layers. The standard way to add a layer to a map and have it managed by the map is to\n * use {@link module:ol/Map#addLayer}.\n * @property {boolean} [declutter=false] Declutter images and text. Decluttering is applied to all\n * image and text styles of all Vector and VectorTile layers that have set this to `true`. The priority\n * is defined by the z-index of the layer, the `zIndex` of the style and the render order of features.\n * Higher z-index means higher priority. Within the same z-index, a feature rendered before another has\n * higher priority.\n * @property {import(\"../style/Style.js\").StyleLike} [style] Layer style. See\n * {@link module:ol/style} for default style which will be used if this is not defined.\n * @property {boolean} [updateWhileAnimating=false] When set to `true`, feature batches will be\n * recreated during animations. This means that no vectors will be shown clipped, but the setting\n * will have a performance impact for large amounts of vector data. When set to `false`, batches\n * will be recreated when no animation is active.\n * @property {boolean} [updateWhileInteracting=false] When set to `true`, feature batches will be\n * recreated during interactions. See also `updateWhileAnimating`.\n * @property {number} [preload=0] Preload. Load low-resolution tiles up to `preload` levels. `0`\n * means no preloading.\n * @property {boolean} [useInterimTilesOnError=true] Use interim tiles on error.\n */\n\n\n/**\n * @classdesc\n * Layer for vector tile data that is rendered client-side.\n * Note that any property set in the options is set as a {@link module:ol/Object~BaseObject}\n * property on the layer object; for example, setting `title: 'My Title'` in the\n * options means that `title` is observable, and has get/set accessors.\n *\n * @param {Options=} opt_options Options.\n * @extends {BaseVectorLayer<import(\"../source/VectorTile.js\").default>}\n * @api\n */\nclass VectorTileLayer extends BaseVectorLayer {\n  /**\n   * @param {Options=} opt_options Options.\n   */\n  constructor(opt_options) {\n    const options = opt_options ? opt_options : {};\n\n    const baseOptions = /** @type {Object} */ (assign({}, options));\n    delete baseOptions.preload;\n    delete baseOptions.useInterimTilesOnError;\n\n    super(/** @type {import(\"./BaseVector.js\").Options} */ (baseOptions));\n\n    const renderMode = options.renderMode || VectorTileRenderType.HYBRID;\n    assert(renderMode == undefined ||\n        renderMode == VectorTileRenderType.IMAGE ||\n        renderMode == VectorTileRenderType.HYBRID,\n    28); // `renderMode` must be `'image'` or `'hybrid'`\n\n    /**\n     * @private\n     * @type {VectorTileRenderType}\n     */\n    this.renderMode_ = renderMode;\n\n    this.setPreload(options.preload ? options.preload : 0);\n    this.setUseInterimTilesOnError(options.useInterimTilesOnError !== undefined ?\n      options.useInterimTilesOnError : true);\n\n  }\n\n  /**\n   * Create a renderer for this layer.\n   * @return {import(\"../renderer/Layer.js\").default} A layer renderer.\n   * @protected\n   */\n  createRenderer() {\n    return new CanvasVectorTileLayerRenderer(this);\n  }\n\n  /**\n   * @return {VectorTileRenderType} The render mode.\n   */\n  getRenderMode() {\n    return this.renderMode_;\n  }\n\n  /**\n   * Return the level as number to which we will preload tiles up to.\n   * @return {number} The level to preload tiles up to.\n   * @observable\n   * @api\n   */\n  getPreload() {\n    return /** @type {number} */ (this.get(TileProperty.PRELOAD));\n  }\n\n  /**\n   * Whether we use interim tiles on error.\n   * @return {boolean} Use interim tiles on error.\n   * @observable\n   * @api\n   */\n  getUseInterimTilesOnError() {\n    return /** @type {boolean} */ (this.get(TileProperty.USE_INTERIM_TILES_ON_ERROR));\n  }\n\n  /**\n   * Set the level as number to which we will preload tiles up to.\n   * @param {number} preload The level to preload tiles up to.\n   * @observable\n   * @api\n   */\n  setPreload(preload) {\n    this.set(TileProperty.PRELOAD, preload);\n  }\n\n  /**\n   * Set whether we use interim tiles on error.\n   * @param {boolean} useInterimTilesOnError Use interim tiles on error.\n   * @observable\n   * @api\n   */\n  setUseInterimTilesOnError(useInterimTilesOnError) {\n    this.set(TileProperty.USE_INTERIM_TILES_ON_ERROR, useInterimTilesOnError);\n  }\n}\n\n\nexport default VectorTileLayer;\n","/**\n * @module ol/format/FormatType\n */\n\n/**\n * @enum {string}\n */\nexport default {\n  ARRAY_BUFFER: 'arraybuffer',\n  JSON: 'json',\n  TEXT: 'text',\n  XML: 'xml'\n};\n","/**\n * @module ol/colorlike\n */\nimport {toString} from './color.js';\n\n\n/**\n * A type accepted by CanvasRenderingContext2D.fillStyle\n * or CanvasRenderingContext2D.strokeStyle.\n * Represents a color, pattern, or gradient. The origin for patterns and\n * gradients as fill style is an increment of 512 css pixels from map coordinate\n * `[0, 0]`. For seamless repeat patterns, width and height of the pattern image\n * must be a factor of two (2, 4, 8, ..., 512).\n *\n * @typedef {string|CanvasPattern|CanvasGradient} ColorLike\n * @api\n */\n\n\n/**\n * @param {import(\"./color.js\").Color|ColorLike} color Color.\n * @return {ColorLike} The color as an {@link ol/colorlike~ColorLike}.\n * @api\n */\nexport function asColorLike(color) {\n  if (Array.isArray(color)) {\n    return toString(color);\n  } else {\n    return color;\n  }\n}\n","/**\n * @module ol/source/VectorEventType\n */\n\n/**\n * @enum {string}\n */\nexport default {\n  /**\n   * Triggered when a feature is added to the source.\n   * @event module:ol/source/Vector.VectorSourceEvent#addfeature\n   * @api\n   */\n  ADDFEATURE: 'addfeature',\n\n  /**\n   * Triggered when a feature is updated.\n   * @event module:ol/source/Vector.VectorSourceEvent#changefeature\n   * @api\n   */\n  CHANGEFEATURE: 'changefeature',\n\n  /**\n   * Triggered when the clear method is called on the source.\n   * @event module:ol/source/Vector.VectorSourceEvent#clear\n   * @api\n   */\n  CLEAR: 'clear',\n\n  /**\n   * Triggered when a feature is removed from the source.\n   * See {@link module:ol/source/Vector#clear source.clear()} for exceptions.\n   * @event module:ol/source/Vector.VectorSourceEvent#removefeature\n   * @api\n   */\n  REMOVEFEATURE: 'removefeature'\n};\n","/**\n * @module ol/ViewProperty\n */\n\n/**\n * @enum {string}\n */\nexport default {\n  CENTER: 'center',\n  RESOLUTION: 'resolution',\n  ROTATION: 'rotation'\n};\n","/**\n * @module ol/source/ImageWMS\n */\n\nimport {DEFAULT_WMS_VERSION} from './common.js';\n\nimport ImageWrapper from '../Image.js';\nimport {assert} from '../asserts.js';\nimport EventType from '../events/EventType.js';\nimport {containsExtent, getCenter, getForViewAndSize, getHeight, getWidth} from '../extent.js';\nimport {assign} from '../obj.js';\nimport {get as getProjection, transform} from '../proj.js';\nimport {calculateSourceResolution} from '../reproj.js';\nimport ImageSource, {defaultImageLoadFunction} from './Image.js';\nimport WMSServerType from './WMSServerType.js';\nimport {compareVersions} from '../string.js';\nimport {appendParams} from '../uri.js';\n\n\n/**\n * @const\n * @type {import(\"../size.js\").Size}\n */\nconst GETFEATUREINFO_IMAGE_SIZE = [101, 101];\n\n\n/**\n * @typedef {Object} Options\n * @property {import(\"./Source.js\").AttributionLike} [attributions] Attributions.\n * @property {null|string} [crossOrigin] The `crossOrigin` attribute for loaded images.  Note that\n * you must provide a `crossOrigin` value if you want to access pixel data with the Canvas renderer.\n * See https://developer.mozilla.org/en-US/docs/Web/HTML/CORS_enabled_image for more detail.\n * @property {boolean} [hidpi=true] Use the `ol/Map#pixelRatio` value when requesting\n * the image from the remote server.\n * @property {import(\"./WMSServerType.js\").default|string} [serverType] The type of\n * the remote WMS server: `mapserver`, `geoserver` or `qgis`. Only needed if `hidpi` is `true`.\n * @property {import(\"../Image.js\").LoadFunction} [imageLoadFunction] Optional function to load an image given a URL.\n * @property {Object<string,*>} params WMS request parameters.\n * At least a `LAYERS` param is required. `STYLES` is\n * `''` by default. `VERSION` is `1.3.0` by default. `WIDTH`, `HEIGHT`, `BBOX`\n * and `CRS` (`SRS` for WMS version < 1.3.0) will be set dynamically.\n * @property {import(\"../proj.js\").ProjectionLike} [projection] Projection. Default is the view projection.\n * @property {number} [ratio=1.5] Ratio. `1` means image requests are the size of the map viewport, `2` means\n * twice the width and height of the map viewport, and so on. Must be `1` or\n * higher.\n * @property {Array<number>} [resolutions] Resolutions.\n * If specified, requests will be made for these resolutions only.\n * @property {string} url WMS service URL.\n */\n\n\n/**\n * @classdesc\n * Source for WMS servers providing single, untiled images.\n *\n * @fires module:ol/source/Image.ImageSourceEvent\n * @api\n */\nclass ImageWMS extends ImageSource {\n  /**\n   * @param {Options=} [opt_options] ImageWMS options.\n   */\n  constructor(opt_options) {\n\n    const options = opt_options ? opt_options : {};\n\n    super({\n      attributions: options.attributions,\n      projection: options.projection,\n      resolutions: options.resolutions\n    });\n\n    /**\n     * @private\n     * @type {?string}\n     */\n    this.crossOrigin_ =\n        options.crossOrigin !== undefined ? options.crossOrigin : null;\n\n    /**\n     * @private\n     * @type {string|undefined}\n     */\n    this.url_ = options.url;\n\n    /**\n     * @private\n     * @type {import(\"../Image.js\").LoadFunction}\n     */\n    this.imageLoadFunction_ = options.imageLoadFunction !== undefined ?\n      options.imageLoadFunction : defaultImageLoadFunction;\n\n    /**\n     * @private\n     * @type {!Object}\n     */\n    this.params_ = options.params || {};\n\n    /**\n     * @private\n     * @type {boolean}\n     */\n    this.v13_ = true;\n    this.updateV13_();\n\n    /**\n     * @private\n     * @type {import(\"./WMSServerType.js\").default|undefined}\n     */\n    this.serverType_ = /** @type {import(\"./WMSServerType.js\").default|undefined} */ (options.serverType);\n\n    /**\n     * @private\n     * @type {boolean}\n     */\n    this.hidpi_ = options.hidpi !== undefined ? options.hidpi : true;\n\n    /**\n     * @private\n     * @type {import(\"../Image.js\").default}\n     */\n    this.image_ = null;\n\n    /**\n     * @private\n     * @type {import(\"../size.js\").Size}\n     */\n    this.imageSize_ = [0, 0];\n\n    /**\n     * @private\n     * @type {number}\n     */\n    this.renderedRevision_ = 0;\n\n    /**\n     * @private\n     * @type {number}\n     */\n    this.ratio_ = options.ratio !== undefined ? options.ratio : 1.5;\n\n  }\n\n  /**\n   * Return the GetFeatureInfo URL for the passed coordinate, resolution, and\n   * projection. Return `undefined` if the GetFeatureInfo URL cannot be\n   * constructed.\n   * @param {import(\"../coordinate.js\").Coordinate} coordinate Coordinate.\n   * @param {number} resolution Resolution.\n   * @param {import(\"../proj.js\").ProjectionLike} projection Projection.\n   * @param {!Object} params GetFeatureInfo params. `INFO_FORMAT` at least should\n   *     be provided. If `QUERY_LAYERS` is not provided then the layers specified\n   *     in the `LAYERS` parameter will be used. `VERSION` should not be\n   *     specified here.\n   * @return {string|undefined} GetFeatureInfo URL.\n   * @api\n   */\n  getFeatureInfoUrl(coordinate, resolution, projection, params) {\n    if (this.url_ === undefined) {\n      return undefined;\n    }\n    const projectionObj = getProjection(projection);\n    const sourceProjectionObj = this.getProjection();\n\n    if (sourceProjectionObj && sourceProjectionObj !== projectionObj) {\n      resolution = calculateSourceResolution(sourceProjectionObj, projectionObj, coordinate, resolution);\n      coordinate = transform(coordinate, projectionObj, sourceProjectionObj);\n    }\n\n    const extent = getForViewAndSize(coordinate, resolution, 0,\n      GETFEATUREINFO_IMAGE_SIZE);\n\n    const baseParams = {\n      'SERVICE': 'WMS',\n      'VERSION': DEFAULT_WMS_VERSION,\n      'REQUEST': 'GetFeatureInfo',\n      'FORMAT': 'image/png',\n      'TRANSPARENT': true,\n      'QUERY_LAYERS': this.params_['LAYERS']\n    };\n    assign(baseParams, this.params_, params);\n\n    const x = Math.floor((coordinate[0] - extent[0]) / resolution);\n    const y = Math.floor((extent[3] - coordinate[1]) / resolution);\n    baseParams[this.v13_ ? 'I' : 'X'] = x;\n    baseParams[this.v13_ ? 'J' : 'Y'] = y;\n\n    return this.getRequestUrl_(\n      extent, GETFEATUREINFO_IMAGE_SIZE,\n      1, sourceProjectionObj || projectionObj, baseParams);\n  }\n\n  /**\n   * Return the GetLegendGraphic URL, optionally optimized for the passed\n   * resolution and possibly including any passed specific parameters. Returns\n   * `undefined` if the GetLegendGraphic URL cannot be constructed.\n   *\n   * @param {number} [resolution] Resolution. If set to undefined, `SCALE`\n   *     will not be calculated and included in URL.\n   * @param {Object} [params] GetLegendGraphic params. If `LAYER` is set, the\n   *     request is generated for this wms layer, else it will try to use the\n   *     configured wms layer. Default `FORMAT` is `image/png`.\n   *     `VERSION` should not be specified here.\n   * @return {string|undefined} GetLegendGraphic URL.\n   * @api\n   */\n  getLegendUrl(resolution, params) {\n    if (this.url_ === undefined) {\n      return undefined;\n    }\n\n    const baseParams = {\n      'SERVICE': 'WMS',\n      'VERSION': DEFAULT_WMS_VERSION,\n      'REQUEST': 'GetLegendGraphic',\n      'FORMAT': 'image/png'\n    };\n\n    if (params === undefined || params['LAYER'] === undefined) {\n      const layers = this.params_.LAYERS;\n      const isSingleLayer = !Array.isArray(layers) || layers.length === 1;\n      if (!isSingleLayer) {\n        return undefined;\n      }\n      baseParams['LAYER'] = layers;\n    }\n\n    if (resolution !== undefined) {\n      const mpu = this.getProjection() ? this.getProjection().getMetersPerUnit() : 1;\n      const dpi = 25.4 / 0.28;\n      const inchesPerMeter = 39.37;\n      baseParams['SCALE'] = resolution * mpu * inchesPerMeter * dpi;\n    }\n\n    assign(baseParams, params);\n\n    return appendParams(/** @type {string} */ (this.url_), baseParams);\n  }\n\n  /**\n   * Get the user-provided params, i.e. those passed to the constructor through\n   * the \"params\" option, and possibly updated using the updateParams method.\n   * @return {Object} Params.\n   * @api\n   */\n  getParams() {\n    return this.params_;\n  }\n\n  /**\n   * @inheritDoc\n   */\n  getImageInternal(extent, resolution, pixelRatio, projection) {\n\n    if (this.url_ === undefined) {\n      return null;\n    }\n\n    resolution = this.findNearestResolution(resolution);\n\n    if (pixelRatio != 1 && (!this.hidpi_ || this.serverType_ === undefined)) {\n      pixelRatio = 1;\n    }\n\n    const imageResolution = resolution / pixelRatio;\n\n    const center = getCenter(extent);\n    const viewWidth = Math.ceil(getWidth(extent) / imageResolution);\n    const viewHeight = Math.ceil(getHeight(extent) / imageResolution);\n    const viewExtent = getForViewAndSize(center, imageResolution, 0,\n      [viewWidth, viewHeight]);\n    const requestWidth = Math.ceil(this.ratio_ * getWidth(extent) / imageResolution);\n    const requestHeight = Math.ceil(this.ratio_ * getHeight(extent) / imageResolution);\n    const requestExtent = getForViewAndSize(center, imageResolution, 0,\n      [requestWidth, requestHeight]);\n\n    const image = this.image_;\n    if (image &&\n        this.renderedRevision_ == this.getRevision() &&\n        image.getResolution() == resolution &&\n        image.getPixelRatio() == pixelRatio &&\n        containsExtent(image.getExtent(), viewExtent)) {\n      return image;\n    }\n\n    const params = {\n      'SERVICE': 'WMS',\n      'VERSION': DEFAULT_WMS_VERSION,\n      'REQUEST': 'GetMap',\n      'FORMAT': 'image/png',\n      'TRANSPARENT': true\n    };\n    assign(params, this.params_);\n\n    this.imageSize_[0] = Math.round(getWidth(requestExtent) / imageResolution);\n    this.imageSize_[1] = Math.round(getHeight(requestExtent) / imageResolution);\n\n    const url = this.getRequestUrl_(requestExtent, this.imageSize_, pixelRatio,\n      projection, params);\n\n    this.image_ = new ImageWrapper(requestExtent, resolution, pixelRatio,\n      url, this.crossOrigin_, this.imageLoadFunction_);\n\n    this.renderedRevision_ = this.getRevision();\n\n    this.image_.addEventListener(EventType.CHANGE, this.handleImageChange.bind(this));\n\n    return this.image_;\n\n  }\n\n  /**\n   * Return the image load function of the source.\n   * @return {import(\"../Image.js\").LoadFunction} The image load function.\n   * @api\n   */\n  getImageLoadFunction() {\n    return this.imageLoadFunction_;\n  }\n\n  /**\n   * @param {import(\"../extent.js\").Extent} extent Extent.\n   * @param {import(\"../size.js\").Size} size Size.\n   * @param {number} pixelRatio Pixel ratio.\n   * @param {import(\"../proj/Projection.js\").default} projection Projection.\n   * @param {Object} params Params.\n   * @return {string} Request URL.\n   * @private\n   */\n  getRequestUrl_(extent, size, pixelRatio, projection, params) {\n\n    assert(this.url_ !== undefined, 9); // `url` must be configured or set using `#setUrl()`\n\n    params[this.v13_ ? 'CRS' : 'SRS'] = projection.getCode();\n\n    if (!('STYLES' in this.params_)) {\n      params['STYLES'] = '';\n    }\n\n    if (pixelRatio != 1) {\n      switch (this.serverType_) {\n        case WMSServerType.GEOSERVER:\n          const dpi = (90 * pixelRatio + 0.5) | 0;\n          if ('FORMAT_OPTIONS' in params) {\n            params['FORMAT_OPTIONS'] += ';dpi:' + dpi;\n          } else {\n            params['FORMAT_OPTIONS'] = 'dpi:' + dpi;\n          }\n          break;\n        case WMSServerType.MAPSERVER:\n          params['MAP_RESOLUTION'] = 90 * pixelRatio;\n          break;\n        case WMSServerType.CARMENTA_SERVER:\n        case WMSServerType.QGIS:\n          params['DPI'] = 90 * pixelRatio;\n          break;\n        default:\n          assert(false, 8); // Unknown `serverType` configured\n          break;\n      }\n    }\n\n    params['WIDTH'] = size[0];\n    params['HEIGHT'] = size[1];\n\n    const axisOrientation = projection.getAxisOrientation();\n    let bbox;\n    if (this.v13_ && axisOrientation.substr(0, 2) == 'ne') {\n      bbox = [extent[1], extent[0], extent[3], extent[2]];\n    } else {\n      bbox = extent;\n    }\n    params['BBOX'] = bbox.join(',');\n\n    return appendParams(/** @type {string} */ (this.url_), params);\n  }\n\n  /**\n   * Return the URL used for this WMS source.\n   * @return {string|undefined} URL.\n   * @api\n   */\n  getUrl() {\n    return this.url_;\n  }\n\n  /**\n   * Set the image load function of the source.\n   * @param {import(\"../Image.js\").LoadFunction} imageLoadFunction Image load function.\n   * @api\n   */\n  setImageLoadFunction(imageLoadFunction) {\n    this.image_ = null;\n    this.imageLoadFunction_ = imageLoadFunction;\n    this.changed();\n  }\n\n  /**\n   * Set the URL to use for requests.\n   * @param {string|undefined} url URL.\n   * @api\n   */\n  setUrl(url) {\n    if (url != this.url_) {\n      this.url_ = url;\n      this.image_ = null;\n      this.changed();\n    }\n  }\n\n  /**\n   * Update the user-provided params.\n   * @param {Object} params Params.\n   * @api\n   */\n  updateParams(params) {\n    assign(this.params_, params);\n    this.updateV13_();\n    this.image_ = null;\n    this.changed();\n  }\n\n  /**\n   * @private\n   */\n  updateV13_() {\n    const version = this.params_['VERSION'] || DEFAULT_WMS_VERSION;\n    this.v13_ = compareVersions(version, '1.3') >= 0;\n  }\n}\n\n\nexport default ImageWMS;\n","/**\n * @module ol/Observable\n */\nimport {listen, unlistenByKey, listenOnce} from './events.js';\nimport EventTarget from './events/Target.js';\nimport EventType from './events/EventType.js';\n\n/**\n * @classdesc\n * Abstract base class; normally only used for creating subclasses and not\n * instantiated in apps.\n * An event target providing convenient methods for listener registration\n * and unregistration. A generic `change` event is always available through\n * {@link module:ol/Observable~Observable#changed}.\n *\n * @fires import(\"./events/Event.js\").Event\n * @api\n */\nclass Observable extends EventTarget {\n  constructor() {\n\n    super();\n\n    /**\n     * @private\n     * @type {number}\n     */\n    this.revision_ = 0;\n\n  }\n\n  /**\n   * Increases the revision counter and dispatches a 'change' event.\n   * @api\n   */\n  changed() {\n    ++this.revision_;\n    this.dispatchEvent(EventType.CHANGE);\n  }\n\n  /**\n   * Get the version number for this object.  Each time the object is modified,\n   * its version number will be incremented.\n   * @return {number} Revision.\n   * @api\n   */\n  getRevision() {\n    return this.revision_;\n  }\n\n  /**\n   * Listen for a certain type of event.\n   * @param {string|Array<string>} type The event type or array of event types.\n   * @param {function(?): ?} listener The listener function.\n   * @return {import(\"./events.js\").EventsKey|Array<import(\"./events.js\").EventsKey>} Unique key for the listener. If\n   *     called with an array of event types as the first argument, the return\n   *     will be an array of keys.\n   * @api\n   */\n  on(type, listener) {\n    if (Array.isArray(type)) {\n      const len = type.length;\n      const keys = new Array(len);\n      for (let i = 0; i < len; ++i) {\n        keys[i] = listen(this, type[i], listener);\n      }\n      return keys;\n    } else {\n      return listen(this, /** @type {string} */ (type), listener);\n    }\n  }\n\n  /**\n   * Listen once for a certain type of event.\n   * @param {string|Array<string>} type The event type or array of event types.\n   * @param {function(?): ?} listener The listener function.\n   * @return {import(\"./events.js\").EventsKey|Array<import(\"./events.js\").EventsKey>} Unique key for the listener. If\n   *     called with an array of event types as the first argument, the return\n   *     will be an array of keys.\n   * @api\n   */\n  once(type, listener) {\n    if (Array.isArray(type)) {\n      const len = type.length;\n      const keys = new Array(len);\n      for (let i = 0; i < len; ++i) {\n        keys[i] = listenOnce(this, type[i], listener);\n      }\n      return keys;\n    } else {\n      return listenOnce(this, /** @type {string} */ (type), listener);\n    }\n  }\n\n  /**\n   * Unlisten for a certain type of event.\n   * @param {string|Array<string>} type The event type or array of event types.\n   * @param {function(?): ?} listener The listener function.\n   * @api\n   */\n  un(type, listener) {\n    if (Array.isArray(type)) {\n      for (let i = 0, ii = type.length; i < ii; ++i) {\n        this.removeEventListener(type[i], listener);\n      }\n    } else {\n      this.removeEventListener(type, listener);\n    }\n  }\n}\n\n\n/**\n * Removes an event listener using the key returned by `on()` or `once()`.\n * @param {import(\"./events.js\").EventsKey|Array<import(\"./events.js\").EventsKey>} key The key returned by `on()`\n *     or `once()` (or an array of keys).\n * @api\n */\nexport function unByKey(key) {\n  if (Array.isArray(key)) {\n    for (let i = 0, ii = key.length; i < ii; ++i) {\n      unlistenByKey(key[i]);\n    }\n  } else {\n    unlistenByKey(/** @type {import(\"./events.js\").EventsKey} */ (key));\n  }\n}\n\n\nexport default Observable;\n","/**\n * @module ol/string\n */\n\n/**\n * @param {number} number Number to be formatted\n * @param {number} width The desired width\n * @param {number=} opt_precision Precision of the output string (i.e. number of decimal places)\n * @returns {string} Formatted string\n */\nexport function padNumber(number, width, opt_precision) {\n  const numberString = opt_precision !== undefined ? number.toFixed(opt_precision) : '' + number;\n  let decimal = numberString.indexOf('.');\n  decimal = decimal === -1 ? numberString.length : decimal;\n  return decimal > width ? numberString : new Array(1 + width - decimal).join('0') + numberString;\n}\n\n\n/**\n * Adapted from https://github.com/omichelsen/compare-versions/blob/master/index.js\n * @param {string|number} v1 First version\n * @param {string|number} v2 Second version\n * @returns {number} Value\n */\nexport function compareVersions(v1, v2) {\n  const s1 = ('' + v1).split('.');\n  const s2 = ('' + v2).split('.');\n\n  for (let i = 0; i < Math.max(s1.length, s2.length); i++) {\n    const n1 = parseInt(s1[i] || '0', 10);\n    const n2 = parseInt(s2[i] || '0', 10);\n\n    if (n1 > n2) {\n      return 1;\n    }\n    if (n2 > n1) {\n      return -1;\n    }\n  }\n\n  return 0;\n}\n","/**\n * @module ol/events/Target\n */\nimport Disposable from '../Disposable.js';\nimport {VOID} from '../functions.js';\nimport Event from './Event.js';\nimport {clear} from '../obj.js';\n\n\n/**\n * @typedef {EventTarget|Target} EventTargetLike\n */\n\n\n/**\n * @classdesc\n * A simplified implementation of the W3C DOM Level 2 EventTarget interface.\n * See https://www.w3.org/TR/2000/REC-DOM-Level-2-Events-20001113/events.html#Events-EventTarget.\n *\n * There are two important simplifications compared to the specification:\n *\n * 1. The handling of `useCapture` in `addEventListener` and\n *    `removeEventListener`. There is no real capture model.\n * 2. The handling of `stopPropagation` and `preventDefault` on `dispatchEvent`.\n *    There is no event target hierarchy. When a listener calls\n *    `stopPropagation` or `preventDefault` on an event object, it means that no\n *    more listeners after this one will be called. Same as when the listener\n *    returns false.\n */\nclass Target extends Disposable {\n\n  /**\n   * @param {*=} opt_target Default event target for dispatched events.\n   */\n  constructor(opt_target) {\n\n    super();\n\n    /**\n     * @private\n     * @type {*}\n     */\n    this.target_ = opt_target;\n\n    /**\n     * @private\n     * @type {!Object<string, number>}\n     */\n    this.pendingRemovals_ = {};\n\n    /**\n     * @private\n     * @type {!Object<string, number>}\n     */\n    this.dispatching_ = {};\n\n    /**\n     * @private\n     * @type {!Object<string, Array<import(\"../events.js\").ListenerFunction>>}\n     */\n    this.listeners_ = {};\n\n  }\n\n  /**\n   * @param {string} type Type.\n   * @param {import(\"../events.js\").ListenerFunction} listener Listener.\n   */\n  addEventListener(type, listener) {\n    if (!type || !listener) {\n      return;\n    }\n    let listeners = this.listeners_[type];\n    if (!listeners) {\n      listeners = this.listeners_[type] = [];\n    }\n    if (listeners.indexOf(listener) === -1) {\n      listeners.push(listener);\n    }\n  }\n\n  /**\n   * Dispatches an event and calls all listeners listening for events\n   * of this type. The event parameter can either be a string or an\n   * Object with a `type` property.\n   *\n   * @param {{type: string,\n   *     target: (EventTargetLike|undefined),\n   *     propagationStopped: (boolean|undefined)}|\n   *     import(\"./Event.js\").default|string} event Event object.\n   * @return {boolean|undefined} `false` if anyone called preventDefault on the\n   *     event object or if any of the listeners returned false.\n   * @api\n   */\n  dispatchEvent(event) {\n    const evt = typeof event === 'string' ? new Event(event) : event;\n    const type = evt.type;\n    if (!evt.target) {\n      evt.target = this.target_ || this;\n    }\n    const listeners = this.listeners_[type];\n    let propagate;\n    if (listeners) {\n      if (!(type in this.dispatching_)) {\n        this.dispatching_[type] = 0;\n        this.pendingRemovals_[type] = 0;\n      }\n      ++this.dispatching_[type];\n      for (let i = 0, ii = listeners.length; i < ii; ++i) {\n        if (listeners[i].call(this, evt) === false || evt.propagationStopped) {\n          propagate = false;\n          break;\n        }\n      }\n      --this.dispatching_[type];\n      if (this.dispatching_[type] === 0) {\n        let pendingRemovals = this.pendingRemovals_[type];\n        delete this.pendingRemovals_[type];\n        while (pendingRemovals--) {\n          this.removeEventListener(type, VOID);\n        }\n        delete this.dispatching_[type];\n      }\n      return propagate;\n    }\n  }\n\n  /**\n   * @inheritDoc\n   */\n  disposeInternal() {\n    clear(this.listeners_);\n  }\n\n  /**\n   * Get the listeners for a specified event type. Listeners are returned in the\n   * order that they will be called in.\n   *\n   * @param {string} type Type.\n   * @return {Array<import(\"../events.js\").ListenerFunction>} Listeners.\n   */\n  getListeners(type) {\n    return this.listeners_[type];\n  }\n\n  /**\n   * @param {string=} opt_type Type. If not provided,\n   *     `true` will be returned if this event target has any listeners.\n   * @return {boolean} Has listeners.\n   */\n  hasListener(opt_type) {\n    return opt_type ?\n      opt_type in this.listeners_ :\n      Object.keys(this.listeners_).length > 0;\n  }\n\n  /**\n   * @param {string} type Type.\n   * @param {import(\"../events.js\").ListenerFunction} listener Listener.\n   */\n  removeEventListener(type, listener) {\n    const listeners = this.listeners_[type];\n    if (listeners) {\n      const index = listeners.indexOf(listener);\n      if (index !== -1) {\n        if (type in this.pendingRemovals_) {\n          // make listener a no-op, and remove later in #dispatchEvent()\n          listeners[index] = VOID;\n          ++this.pendingRemovals_[type];\n        } else {\n          listeners.splice(index, 1);\n          if (listeners.length === 0) {\n            delete this.listeners_[type];\n          }\n        }\n      }\n    }\n  }\n}\n\n\nexport default Target;\n","/**\n * @module ol/Disposable\n */\n\n/**\n * @classdesc\n * Objects that need to clean up after themselves.\n */\nclass Disposable {\n\n  constructor() {\n    /**\n     * The object has already been disposed.\n     * @type {boolean}\n     * @private\n     */\n    this.disposed_ = false;\n  }\n\n  /**\n   * Clean up.\n   */\n  dispose() {\n    if (!this.disposed_) {\n      this.disposed_ = true;\n      this.disposeInternal();\n    }\n  }\n\n  /**\n   * Extension point for disposable objects.\n   * @protected\n   */\n  disposeInternal() {}\n}\n\nexport default Disposable;\n","/**\n * @module ol/geom/flat/simplify\n */\n// Based on simplify-js https://github.com/mourner/simplify-js\n// Copyright (c) 2012, Vladimir Agafonkin\n// All rights reserved.\n//\n// Redistribution and use in source and binary forms, with or without\n// modification, are permitted provided that the following conditions are met:\n//\n//    1. Redistributions of source code must retain the above copyright notice,\n//       this list of conditions and the following disclaimer.\n//\n//    2. Redistributions in binary form must reproduce the above copyright\n//       notice, this list of conditions and the following disclaimer in the\n//       documentation and/or other materials provided with the distribution.\n//\n// THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\"\n// AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE\n// IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE\n// ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE\n// LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR\n// CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF\n// SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS\n// INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN\n// CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)\n// ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE\n// POSSIBILITY OF SUCH DAMAGE.\n\nimport {squaredSegmentDistance, squaredDistance} from '../../math.js';\n\n\n/**\n * @param {Array<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {number} end End.\n * @param {number} stride Stride.\n * @param {number} squaredTolerance Squared tolerance.\n * @param {boolean} highQuality Highest quality.\n * @param {Array<number>=} opt_simplifiedFlatCoordinates Simplified flat\n *     coordinates.\n * @return {Array<number>} Simplified line string.\n */\nexport function simplifyLineString(flatCoordinates, offset, end,\n  stride, squaredTolerance, highQuality, opt_simplifiedFlatCoordinates) {\n  const simplifiedFlatCoordinates = opt_simplifiedFlatCoordinates !== undefined ?\n    opt_simplifiedFlatCoordinates : [];\n  if (!highQuality) {\n    end = radialDistance(flatCoordinates, offset, end,\n      stride, squaredTolerance,\n      simplifiedFlatCoordinates, 0);\n    flatCoordinates = simplifiedFlatCoordinates;\n    offset = 0;\n    stride = 2;\n  }\n  simplifiedFlatCoordinates.length = douglasPeucker(\n    flatCoordinates, offset, end, stride, squaredTolerance,\n    simplifiedFlatCoordinates, 0);\n  return simplifiedFlatCoordinates;\n}\n\n\n/**\n * @param {Array<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {number} end End.\n * @param {number} stride Stride.\n * @param {number} squaredTolerance Squared tolerance.\n * @param {Array<number>} simplifiedFlatCoordinates Simplified flat\n *     coordinates.\n * @param {number} simplifiedOffset Simplified offset.\n * @return {number} Simplified offset.\n */\nexport function douglasPeucker(flatCoordinates, offset, end,\n  stride, squaredTolerance, simplifiedFlatCoordinates, simplifiedOffset) {\n  const n = (end - offset) / stride;\n  if (n < 3) {\n    for (; offset < end; offset += stride) {\n      simplifiedFlatCoordinates[simplifiedOffset++] =\n          flatCoordinates[offset];\n      simplifiedFlatCoordinates[simplifiedOffset++] =\n          flatCoordinates[offset + 1];\n    }\n    return simplifiedOffset;\n  }\n  /** @type {Array<number>} */\n  const markers = new Array(n);\n  markers[0] = 1;\n  markers[n - 1] = 1;\n  /** @type {Array<number>} */\n  const stack = [offset, end - stride];\n  let index = 0;\n  while (stack.length > 0) {\n    const last = stack.pop();\n    const first = stack.pop();\n    let maxSquaredDistance = 0;\n    const x1 = flatCoordinates[first];\n    const y1 = flatCoordinates[first + 1];\n    const x2 = flatCoordinates[last];\n    const y2 = flatCoordinates[last + 1];\n    for (let i = first + stride; i < last; i += stride) {\n      const x = flatCoordinates[i];\n      const y = flatCoordinates[i + 1];\n      const squaredDistance = squaredSegmentDistance(\n        x, y, x1, y1, x2, y2);\n      if (squaredDistance > maxSquaredDistance) {\n        index = i;\n        maxSquaredDistance = squaredDistance;\n      }\n    }\n    if (maxSquaredDistance > squaredTolerance) {\n      markers[(index - offset) / stride] = 1;\n      if (first + stride < index) {\n        stack.push(first, index);\n      }\n      if (index + stride < last) {\n        stack.push(index, last);\n      }\n    }\n  }\n  for (let i = 0; i < n; ++i) {\n    if (markers[i]) {\n      simplifiedFlatCoordinates[simplifiedOffset++] =\n          flatCoordinates[offset + i * stride];\n      simplifiedFlatCoordinates[simplifiedOffset++] =\n          flatCoordinates[offset + i * stride + 1];\n    }\n  }\n  return simplifiedOffset;\n}\n\n\n/**\n * @param {Array<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {Array<number>} ends Ends.\n * @param {number} stride Stride.\n * @param {number} squaredTolerance Squared tolerance.\n * @param {Array<number>} simplifiedFlatCoordinates Simplified flat\n *     coordinates.\n * @param {number} simplifiedOffset Simplified offset.\n * @param {Array<number>} simplifiedEnds Simplified ends.\n * @return {number} Simplified offset.\n */\nexport function douglasPeuckerArray(flatCoordinates, offset,\n  ends, stride, squaredTolerance, simplifiedFlatCoordinates,\n  simplifiedOffset, simplifiedEnds) {\n  for (let i = 0, ii = ends.length; i < ii; ++i) {\n    const end = ends[i];\n    simplifiedOffset = douglasPeucker(\n      flatCoordinates, offset, end, stride, squaredTolerance,\n      simplifiedFlatCoordinates, simplifiedOffset);\n    simplifiedEnds.push(simplifiedOffset);\n    offset = end;\n  }\n  return simplifiedOffset;\n}\n\n\n/**\n * @param {Array<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {Array<Array<number>>} endss Endss.\n * @param {number} stride Stride.\n * @param {number} squaredTolerance Squared tolerance.\n * @param {Array<number>} simplifiedFlatCoordinates Simplified flat\n *     coordinates.\n * @param {number} simplifiedOffset Simplified offset.\n * @param {Array<Array<number>>} simplifiedEndss Simplified endss.\n * @return {number} Simplified offset.\n */\nexport function douglasPeuckerMultiArray(\n  flatCoordinates, offset, endss, stride, squaredTolerance,\n  simplifiedFlatCoordinates, simplifiedOffset, simplifiedEndss) {\n  for (let i = 0, ii = endss.length; i < ii; ++i) {\n    const ends = endss[i];\n    const simplifiedEnds = [];\n    simplifiedOffset = douglasPeuckerArray(\n      flatCoordinates, offset, ends, stride, squaredTolerance,\n      simplifiedFlatCoordinates, simplifiedOffset, simplifiedEnds);\n    simplifiedEndss.push(simplifiedEnds);\n    offset = ends[ends.length - 1];\n  }\n  return simplifiedOffset;\n}\n\n\n/**\n * @param {Array<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {number} end End.\n * @param {number} stride Stride.\n * @param {number} squaredTolerance Squared tolerance.\n * @param {Array<number>} simplifiedFlatCoordinates Simplified flat\n *     coordinates.\n * @param {number} simplifiedOffset Simplified offset.\n * @return {number} Simplified offset.\n */\nexport function radialDistance(flatCoordinates, offset, end,\n  stride, squaredTolerance, simplifiedFlatCoordinates, simplifiedOffset) {\n  if (end <= offset + stride) {\n    // zero or one point, no simplification possible, so copy and return\n    for (; offset < end; offset += stride) {\n      simplifiedFlatCoordinates[simplifiedOffset++] = flatCoordinates[offset];\n      simplifiedFlatCoordinates[simplifiedOffset++] =\n          flatCoordinates[offset + 1];\n    }\n    return simplifiedOffset;\n  }\n  let x1 = flatCoordinates[offset];\n  let y1 = flatCoordinates[offset + 1];\n  // copy first point\n  simplifiedFlatCoordinates[simplifiedOffset++] = x1;\n  simplifiedFlatCoordinates[simplifiedOffset++] = y1;\n  let x2 = x1;\n  let y2 = y1;\n  for (offset += stride; offset < end; offset += stride) {\n    x2 = flatCoordinates[offset];\n    y2 = flatCoordinates[offset + 1];\n    if (squaredDistance(x1, y1, x2, y2) > squaredTolerance) {\n      // copy point at offset\n      simplifiedFlatCoordinates[simplifiedOffset++] = x2;\n      simplifiedFlatCoordinates[simplifiedOffset++] = y2;\n      x1 = x2;\n      y1 = y2;\n    }\n  }\n  if (x2 != x1 || y2 != y1) {\n    // copy last point\n    simplifiedFlatCoordinates[simplifiedOffset++] = x2;\n    simplifiedFlatCoordinates[simplifiedOffset++] = y2;\n  }\n  return simplifiedOffset;\n}\n\n\n/**\n * @param {number} value Value.\n * @param {number} tolerance Tolerance.\n * @return {number} Rounded value.\n */\nexport function snap(value, tolerance) {\n  return tolerance * Math.round(value / tolerance);\n}\n\n\n/**\n * Simplifies a line string using an algorithm designed by Tim Schaub.\n * Coordinates are snapped to the nearest value in a virtual grid and\n * consecutive duplicate coordinates are discarded.  This effectively preserves\n * topology as the simplification of any subsection of a line string is\n * independent of the rest of the line string.  This means that, for examples,\n * the common edge between two polygons will be simplified to the same line\n * string independently in both polygons.  This implementation uses a single\n * pass over the coordinates and eliminates intermediate collinear points.\n * @param {Array<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {number} end End.\n * @param {number} stride Stride.\n * @param {number} tolerance Tolerance.\n * @param {Array<number>} simplifiedFlatCoordinates Simplified flat\n *     coordinates.\n * @param {number} simplifiedOffset Simplified offset.\n * @return {number} Simplified offset.\n */\nexport function quantize(flatCoordinates, offset, end, stride,\n  tolerance, simplifiedFlatCoordinates, simplifiedOffset) {\n  // do nothing if the line is empty\n  if (offset == end) {\n    return simplifiedOffset;\n  }\n  // snap the first coordinate (P1)\n  let x1 = snap(flatCoordinates[offset], tolerance);\n  let y1 = snap(flatCoordinates[offset + 1], tolerance);\n  offset += stride;\n  // add the first coordinate to the output\n  simplifiedFlatCoordinates[simplifiedOffset++] = x1;\n  simplifiedFlatCoordinates[simplifiedOffset++] = y1;\n  // find the next coordinate that does not snap to the same value as the first\n  // coordinate (P2)\n  let x2, y2;\n  do {\n    x2 = snap(flatCoordinates[offset], tolerance);\n    y2 = snap(flatCoordinates[offset + 1], tolerance);\n    offset += stride;\n    if (offset == end) {\n      // all coordinates snap to the same value, the line collapses to a point\n      // push the last snapped value anyway to ensure that the output contains\n      // at least two points\n      // FIXME should we really return at least two points anyway?\n      simplifiedFlatCoordinates[simplifiedOffset++] = x2;\n      simplifiedFlatCoordinates[simplifiedOffset++] = y2;\n      return simplifiedOffset;\n    }\n  } while (x2 == x1 && y2 == y1);\n  while (offset < end) {\n    // snap the next coordinate (P3)\n    const x3 = snap(flatCoordinates[offset], tolerance);\n    const y3 = snap(flatCoordinates[offset + 1], tolerance);\n    offset += stride;\n    // skip P3 if it is equal to P2\n    if (x3 == x2 && y3 == y2) {\n      continue;\n    }\n    // calculate the delta between P1 and P2\n    const dx1 = x2 - x1;\n    const dy1 = y2 - y1;\n    // calculate the delta between P3 and P1\n    const dx2 = x3 - x1;\n    const dy2 = y3 - y1;\n    // if P1, P2, and P3 are colinear and P3 is further from P1 than P2 is from\n    // P1 in the same direction then P2 is on the straight line between P1 and\n    // P3\n    if ((dx1 * dy2 == dy1 * dx2) &&\n        ((dx1 < 0 && dx2 < dx1) || dx1 == dx2 || (dx1 > 0 && dx2 > dx1)) &&\n        ((dy1 < 0 && dy2 < dy1) || dy1 == dy2 || (dy1 > 0 && dy2 > dy1))) {\n      // discard P2 and set P2 = P3\n      x2 = x3;\n      y2 = y3;\n      continue;\n    }\n    // either P1, P2, and P3 are not colinear, or they are colinear but P3 is\n    // between P3 and P1 or on the opposite half of the line to P2.  add P2,\n    // and continue with P1 = P2 and P2 = P3\n    simplifiedFlatCoordinates[simplifiedOffset++] = x2;\n    simplifiedFlatCoordinates[simplifiedOffset++] = y2;\n    x1 = x2;\n    y1 = y2;\n    x2 = x3;\n    y2 = y3;\n  }\n  // add the last point (P2)\n  simplifiedFlatCoordinates[simplifiedOffset++] = x2;\n  simplifiedFlatCoordinates[simplifiedOffset++] = y2;\n  return simplifiedOffset;\n}\n\n\n/**\n * @param {Array<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {Array<number>} ends Ends.\n * @param {number} stride Stride.\n * @param {number} tolerance Tolerance.\n * @param {Array<number>} simplifiedFlatCoordinates Simplified flat\n *     coordinates.\n * @param {number} simplifiedOffset Simplified offset.\n * @param {Array<number>} simplifiedEnds Simplified ends.\n * @return {number} Simplified offset.\n */\nexport function quantizeArray(\n  flatCoordinates, offset, ends, stride,\n  tolerance,\n  simplifiedFlatCoordinates, simplifiedOffset, simplifiedEnds) {\n  for (let i = 0, ii = ends.length; i < ii; ++i) {\n    const end = ends[i];\n    simplifiedOffset = quantize(\n      flatCoordinates, offset, end, stride,\n      tolerance,\n      simplifiedFlatCoordinates, simplifiedOffset);\n    simplifiedEnds.push(simplifiedOffset);\n    offset = end;\n  }\n  return simplifiedOffset;\n}\n\n\n/**\n * @param {Array<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {Array<Array<number>>} endss Endss.\n * @param {number} stride Stride.\n * @param {number} tolerance Tolerance.\n * @param {Array<number>} simplifiedFlatCoordinates Simplified flat\n *     coordinates.\n * @param {number} simplifiedOffset Simplified offset.\n * @param {Array<Array<number>>} simplifiedEndss Simplified endss.\n * @return {number} Simplified offset.\n */\nexport function quantizeMultiArray(\n  flatCoordinates, offset, endss, stride,\n  tolerance,\n  simplifiedFlatCoordinates, simplifiedOffset, simplifiedEndss) {\n  for (let i = 0, ii = endss.length; i < ii; ++i) {\n    const ends = endss[i];\n    const simplifiedEnds = [];\n    simplifiedOffset = quantizeArray(\n      flatCoordinates, offset, ends, stride,\n      tolerance,\n      simplifiedFlatCoordinates, simplifiedOffset, simplifiedEnds);\n    simplifiedEndss.push(simplifiedEnds);\n    offset = ends[ends.length - 1];\n  }\n  return simplifiedOffset;\n}\n","/**\n * @module ol/color\n */\nimport {assert} from './asserts.js';\nimport {clamp} from './math.js';\n\n\n/**\n * A color represented as a short array [red, green, blue, alpha].\n * red, green, and blue should be integers in the range 0..255 inclusive.\n * alpha should be a float in the range 0..1 inclusive. If no alpha value is\n * given then `1` will be used.\n * @typedef {Array<number>} Color\n * @api\n */\n\n\n/**\n * This RegExp matches # followed by 3, 4, 6, or 8 hex digits.\n * @const\n * @type {RegExp}\n * @private\n */\nconst HEX_COLOR_RE_ = /^#([a-f0-9]{3}|[a-f0-9]{4}(?:[a-f0-9]{2}){0,2})$/i;\n\n\n/**\n * Regular expression for matching potential named color style strings.\n * @const\n * @type {RegExp}\n * @private\n */\nconst NAMED_COLOR_RE_ = /^([a-z]*)$/i;\n\n\n/**\n * Return the color as an rgba string.\n * @param {Color|string} color Color.\n * @return {string} Rgba string.\n * @api\n */\nexport function asString(color) {\n  if (typeof color === 'string') {\n    return color;\n  } else {\n    return toString(color);\n  }\n}\n\n/**\n * Return named color as an rgba string.\n * @param {string} color Named color.\n * @return {string} Rgb string.\n */\nfunction fromNamed(color) {\n  const el = document.createElement('div');\n  el.style.color = color;\n  if (el.style.color !== '') {\n    document.body.appendChild(el);\n    const rgb = getComputedStyle(el).color;\n    document.body.removeChild(el);\n    return rgb;\n  } else {\n    return '';\n  }\n}\n\n\n/**\n * @param {string} s String.\n * @return {Color} Color.\n */\nexport const fromString = (\n  function() {\n\n    // We maintain a small cache of parsed strings.  To provide cheap LRU-like\n    // semantics, whenever the cache grows too large we simply delete an\n    // arbitrary 25% of the entries.\n\n    /**\n     * @const\n     * @type {number}\n     */\n    const MAX_CACHE_SIZE = 1024;\n\n    /**\n     * @type {Object<string, Color>}\n     */\n    const cache = {};\n\n    /**\n     * @type {number}\n     */\n    let cacheSize = 0;\n\n    return (\n      /**\n       * @param {string} s String.\n       * @return {Color} Color.\n       */\n      function(s) {\n        let color;\n        if (cache.hasOwnProperty(s)) {\n          color = cache[s];\n        } else {\n          if (cacheSize >= MAX_CACHE_SIZE) {\n            let i = 0;\n            for (const key in cache) {\n              if ((i++ & 3) === 0) {\n                delete cache[key];\n                --cacheSize;\n              }\n            }\n          }\n          color = fromStringInternal_(s);\n          cache[s] = color;\n          ++cacheSize;\n        }\n        return color;\n      }\n    );\n\n  })();\n\n/**\n * Return the color as an array. This function maintains a cache of calculated\n * arrays which means the result should not be modified.\n * @param {Color|string} color Color.\n * @return {Color} Color.\n * @api\n */\nexport function asArray(color) {\n  if (Array.isArray(color)) {\n    return color;\n  } else {\n    return fromString(color);\n  }\n}\n\n/**\n * @param {string} s String.\n * @private\n * @return {Color} Color.\n */\nfunction fromStringInternal_(s) {\n  let r, g, b, a, color;\n\n  if (NAMED_COLOR_RE_.exec(s)) {\n    s = fromNamed(s);\n  }\n\n  if (HEX_COLOR_RE_.exec(s)) { // hex\n    const n = s.length - 1; // number of hex digits\n    let d; // number of digits per channel\n    if (n <= 4) {\n      d = 1;\n    } else {\n      d = 2;\n    }\n    const hasAlpha = n === 4 || n === 8;\n    r = parseInt(s.substr(1 + 0 * d, d), 16);\n    g = parseInt(s.substr(1 + 1 * d, d), 16);\n    b = parseInt(s.substr(1 + 2 * d, d), 16);\n    if (hasAlpha) {\n      a = parseInt(s.substr(1 + 3 * d, d), 16);\n    } else {\n      a = 255;\n    }\n    if (d == 1) {\n      r = (r << 4) + r;\n      g = (g << 4) + g;\n      b = (b << 4) + b;\n      if (hasAlpha) {\n        a = (a << 4) + a;\n      }\n    }\n    color = [r, g, b, a / 255];\n  } else if (s.indexOf('rgba(') == 0) { // rgba()\n    color = s.slice(5, -1).split(',').map(Number);\n    normalize(color);\n  } else if (s.indexOf('rgb(') == 0) { // rgb()\n    color = s.slice(4, -1).split(',').map(Number);\n    color.push(1);\n    normalize(color);\n  } else {\n    assert(false, 14); // Invalid color\n  }\n  return color;\n}\n\n\n/**\n * TODO this function is only used in the test, we probably shouldn't export it\n * @param {Color} color Color.\n * @return {Color} Clamped color.\n */\nexport function normalize(color) {\n  color[0] = clamp((color[0] + 0.5) | 0, 0, 255);\n  color[1] = clamp((color[1] + 0.5) | 0, 0, 255);\n  color[2] = clamp((color[2] + 0.5) | 0, 0, 255);\n  color[3] = clamp(color[3], 0, 1);\n  return color;\n}\n\n\n/**\n * @param {Color} color Color.\n * @return {string} String.\n */\nexport function toString(color) {\n  let r = color[0];\n  if (r != (r | 0)) {\n    r = (r + 0.5) | 0;\n  }\n  let g = color[1];\n  if (g != (g | 0)) {\n    g = (g + 0.5) | 0;\n  }\n  let b = color[2];\n  if (b != (b | 0)) {\n    b = (b + 0.5) | 0;\n  }\n  const a = color[3] === undefined ? 1 : color[3];\n  return 'rgba(' + r + ',' + g + ',' + b + ',' + a + ')';\n}\n","/**\n * @module ol/Image\n */\nimport ImageBase from './ImageBase.js';\nimport ImageState from './ImageState.js';\nimport {listenOnce, unlistenByKey} from './events.js';\nimport EventType from './events/EventType.js';\nimport {getHeight} from './extent.js';\nimport {IMAGE_DECODE} from './has.js';\n\n\n/**\n * A function that takes an {@link module:ol/Image~Image} for the image and a\n * `{string}` for the src as arguments. It is supposed to make it so the\n * underlying image {@link module:ol/Image~Image#getImage} is assigned the\n * content specified by the src. If not specified, the default is\n *\n *     function(image, src) {\n *       image.getImage().src = src;\n *     }\n *\n * Providing a custom `imageLoadFunction` can be useful to load images with\n * post requests or - in general - through XHR requests, where the src of the\n * image element would be set to a data URI when the content is loaded.\n *\n * @typedef {function(ImageWrapper, string): void} LoadFunction\n * @api\n */\n\n\nclass ImageWrapper extends ImageBase {\n\n  /**\n   * @param {import(\"./extent.js\").Extent} extent Extent.\n   * @param {number|undefined} resolution Resolution.\n   * @param {number} pixelRatio Pixel ratio.\n   * @param {string} src Image source URI.\n   * @param {?string} crossOrigin Cross origin.\n   * @param {LoadFunction} imageLoadFunction Image load function.\n   */\n  constructor(extent, resolution, pixelRatio, src, crossOrigin, imageLoadFunction) {\n\n    super(extent, resolution, pixelRatio, ImageState.IDLE);\n\n    /**\n     * @private\n     * @type {string}\n     */\n    this.src_ = src;\n\n    /**\n     * @private\n     * @type {HTMLCanvasElement|HTMLImageElement|HTMLVideoElement}\n     */\n    this.image_ = new Image();\n    if (crossOrigin !== null) {\n      this.image_.crossOrigin = crossOrigin;\n    }\n\n    /**\n     * @private\n     * @type {function():void}\n     */\n    this.unlisten_ = null;\n\n    /**\n     * @protected\n     * @type {ImageState}\n     */\n    this.state = ImageState.IDLE;\n\n    /**\n     * @private\n     * @type {LoadFunction}\n     */\n    this.imageLoadFunction_ = imageLoadFunction;\n\n  }\n\n  /**\n   * @inheritDoc\n   * @api\n   */\n  getImage() {\n    return this.image_;\n  }\n\n  /**\n   * Tracks loading or read errors.\n   *\n   * @private\n   */\n  handleImageError_() {\n    this.state = ImageState.ERROR;\n    this.unlistenImage_();\n    this.changed();\n  }\n\n  /**\n   * Tracks successful image load.\n   *\n   * @private\n   */\n  handleImageLoad_() {\n    if (this.resolution === undefined) {\n      this.resolution = getHeight(this.extent) / this.image_.height;\n    }\n    this.state = ImageState.LOADED;\n    this.unlistenImage_();\n    this.changed();\n  }\n\n  /**\n   * Load the image or retry if loading previously failed.\n   * Loading is taken care of by the tile queue, and calling this method is\n   * only needed for preloading or for reloading in case of an error.\n   * @override\n   * @api\n   */\n  load() {\n    if (this.state == ImageState.IDLE || this.state == ImageState.ERROR) {\n      this.state = ImageState.LOADING;\n      this.changed();\n      this.imageLoadFunction_(this, this.src_);\n      this.unlisten_ = listenImage(\n        this.image_,\n        this.handleImageLoad_.bind(this),\n        this.handleImageError_.bind(this)\n      );\n    }\n  }\n\n  /**\n   * @param {HTMLCanvasElement|HTMLImageElement|HTMLVideoElement} image Image.\n   */\n  setImage(image) {\n    this.image_ = image;\n  }\n\n  /**\n   * Discards event handlers which listen for load completion or errors.\n   *\n   * @private\n   */\n  unlistenImage_() {\n    if (this.unlisten_) {\n      this.unlisten_();\n      this.unlisten_ = null;\n    }\n  }\n}\n\n/**\n * @param {HTMLCanvasElement|HTMLImageElement|HTMLVideoElement} image Image element.\n * @param {function():any} loadHandler Load callback function.\n * @param {function():any} errorHandler Error callback function.\n * @return {function():void} Callback to stop listening.\n */\nexport function listenImage(image, loadHandler, errorHandler) {\n  const img = /** @type {HTMLImageElement} */ (image);\n\n  if (img.src && IMAGE_DECODE) {\n    const promise = img.decode();\n    let listening = true;\n    const unlisten = function() {\n      listening = false;\n    };\n    promise.then(function() {\n      if (listening) {\n        loadHandler();\n      }\n    }).catch(function(error) {\n      if (listening) {\n        // FIXME: Unconditionally call errorHandler() when this bug is fixed upstream:\n        //        https://bugs.webkit.org/show_bug.cgi?id=198527\n        if (error.name === 'EncodingError' && error.message === 'Invalid image type.') {\n          loadHandler();\n        } else {\n          errorHandler();\n        }\n      }\n    });\n    return unlisten;\n  }\n\n  const listenerKeys = [\n    listenOnce(img, EventType.LOAD, loadHandler),\n    listenOnce(img, EventType.ERROR, errorHandler)\n  ];\n  return function unlisten() {\n    listenerKeys.forEach(unlistenByKey);\n  };\n}\n\n\nexport default ImageWrapper;\n","/**\n * @module ol/Tile\n */\nimport TileState from './TileState.js';\nimport {easeIn} from './easing.js';\nimport EventTarget from './events/Target.js';\nimport EventType from './events/EventType.js';\nimport {abstract} from './util.js';\n\n\n/**\n * A function that takes an {@link module:ol/Tile} for the tile and a\n * `{string}` for the url as arguments. The default is\n * ```js\n * source.setTileLoadFunction(function(tile, src) {\n *   tile.getImage().src = src;\n * });\n * ```\n * For more fine grained control, the load function can use fetch or XMLHttpRequest and involve\n * error handling:\n *\n * ```js\n * import TileState from 'ol/TileState';\n *\n * source.setTileLoadFunction(function(tile, src) {\n *   var xhr = new XMLHttpRequest();\n *   xhr.responseType = 'blob';\n *   xhr.addEventListener('loadend', function (evt) {\n *     var data = this.response;\n *     if (data !== undefined) {\n *       tile.getImage().src = URL.createObjectURL(data);\n *     } else {\n *       tile.setState(TileState.ERROR);\n *     }\n *   });\n *   xhr.addEventListener('error', function () {\n *     tile.setState(TileState.ERROR);\n *   });\n *   xhr.open('GET', src);\n *   xhr.send();\n * });\n * ```\n *\n * @typedef {function(Tile, string): void} LoadFunction\n * @api\n */\n\n/**\n * {@link module:ol/source/Tile~Tile} sources use a function of this type to get\n * the url that provides a tile for a given tile coordinate.\n *\n * This function takes an {@link module:ol/tilecoord~TileCoord} for the tile\n * coordinate, a `{number}` representing the pixel ratio and a\n * {@link module:ol/proj/Projection} for the projection  as arguments\n * and returns a `{string}` representing the tile URL, or undefined if no tile\n * should be requested for the passed tile coordinate.\n *\n * @typedef {function(import(\"./tilecoord.js\").TileCoord, number,\n *           import(\"./proj/Projection.js\").default): (string|undefined)} UrlFunction\n * @api\n */\n\n\n/**\n * @typedef {Object} Options\n * @property {number} [transition=250] A duration for tile opacity\n * transitions in milliseconds. A duration of 0 disables the opacity transition.\n * @api\n */\n\n\n/**\n * @classdesc\n * Base class for tiles.\n *\n * @abstract\n */\nclass Tile extends EventTarget {\n\n  /**\n   * @param {import(\"./tilecoord.js\").TileCoord} tileCoord Tile coordinate.\n   * @param {TileState} state State.\n   * @param {Options=} opt_options Tile options.\n   */\n  constructor(tileCoord, state, opt_options) {\n    super();\n\n    const options = opt_options ? opt_options : {};\n\n    /**\n     * @type {import(\"./tilecoord.js\").TileCoord}\n     */\n    this.tileCoord = tileCoord;\n\n    /**\n     * @protected\n     * @type {TileState}\n     */\n    this.state = state;\n\n    /**\n     * An \"interim\" tile for this tile. The interim tile may be used while this\n     * one is loading, for \"smooth\" transitions when changing params/dimensions\n     * on the source.\n     * @type {Tile}\n     */\n    this.interimTile = null;\n\n    /**\n     * The tile is available at the highest possible resolution. Subclasses can\n     * set this to `false` initially. Tile load listeners will not be\n     * unregistered before this is set to `true` and a `#changed()` is called.\n     * @type {boolean}\n     */\n    this.hifi = true;\n\n    /**\n     * A key assigned to the tile. This is used by the tile source to determine\n     * if this tile can effectively be used, or if a new tile should be created\n     * and this one be used as an interim tile for this new tile.\n     * @type {string}\n     */\n    this.key = '';\n\n    /**\n     * The duration for the opacity transition.\n     * @type {number}\n     */\n    this.transition_ = options.transition === undefined ? 250 : options.transition;\n\n    /**\n     * Lookup of start times for rendering transitions.  If the start time is\n     * equal to -1, the transition is complete.\n     * @type {Object<string, number>}\n     */\n    this.transitionStarts_ = {};\n\n  }\n\n  /**\n   * @protected\n   */\n  changed() {\n    this.dispatchEvent(EventType.CHANGE);\n  }\n\n  /**\n   * @return {string} Key.\n   */\n  getKey() {\n    return this.key + '/' + this.tileCoord;\n  }\n\n  /**\n   * Get the interim tile most suitable for rendering using the chain of interim\n   * tiles. This corresponds to the  most recent tile that has been loaded, if no\n   * such tile exists, the original tile is returned.\n   * @return {!Tile} Best tile for rendering.\n   */\n  getInterimTile() {\n    if (!this.interimTile) {\n      //empty chain\n      return this;\n    }\n    let tile = this.interimTile;\n\n    // find the first loaded tile and return it. Since the chain is sorted in\n    // decreasing order of creation time, there is no need to search the remainder\n    // of the list (all those tiles correspond to older requests and will be\n    // cleaned up by refreshInterimChain)\n    do {\n      if (tile.getState() == TileState.LOADED) {\n        // Show tile immediately instead of fading it in after loading, because\n        // the interim tile is in place already\n        this.transition_ = 0;\n        return tile;\n      }\n      tile = tile.interimTile;\n    } while (tile);\n\n    // we can not find a better tile\n    return this;\n  }\n\n  /**\n   * Goes through the chain of interim tiles and discards sections of the chain\n   * that are no longer relevant.\n   */\n  refreshInterimChain() {\n    if (!this.interimTile) {\n      return;\n    }\n\n    let tile = this.interimTile;\n    let prev = /** @type {Tile} */ (this);\n\n    do {\n      if (tile.getState() == TileState.LOADED) {\n        //we have a loaded tile, we can discard the rest of the list\n        //we would could abort any LOADING tile request\n        //older than this tile (i.e. any LOADING tile following this entry in the chain)\n        tile.interimTile = null;\n        break;\n      } else if (tile.getState() == TileState.LOADING) {\n        //keep this LOADING tile any loaded tiles later in the chain are\n        //older than this tile, so we're still interested in the request\n        prev = tile;\n      } else if (tile.getState() == TileState.IDLE) {\n        //the head of the list is the most current tile, we don't need\n        //to start any other requests for this chain\n        prev.interimTile = tile.interimTile;\n      } else {\n        prev = tile;\n      }\n      tile = prev.interimTile;\n    } while (tile);\n  }\n\n  /**\n   * Get the tile coordinate for this tile.\n   * @return {import(\"./tilecoord.js\").TileCoord} The tile coordinate.\n   * @api\n   */\n  getTileCoord() {\n    return this.tileCoord;\n  }\n\n  /**\n   * @return {TileState} State.\n   */\n  getState() {\n    return this.state;\n  }\n\n  /**\n   * Sets the state of this tile. If you write your own {@link module:ol/Tile~LoadFunction tileLoadFunction} ,\n   * it is important to set the state correctly to {@link module:ol/TileState~ERROR}\n   * when the tile cannot be loaded. Otherwise the tile cannot be removed from\n   * the tile queue and will block other requests.\n   * @param {TileState} state State.\n   * @api\n   */\n  setState(state) {\n    this.state = state;\n    this.changed();\n  }\n\n  /**\n   * Load the image or retry if loading previously failed.\n   * Loading is taken care of by the tile queue, and calling this method is\n   * only needed for preloading or for reloading in case of an error.\n   * @abstract\n   * @api\n   */\n  load() {\n    abstract();\n  }\n\n  /**\n   * Get the alpha value for rendering.\n   * @param {string} id An id for the renderer.\n   * @param {number} time The render frame time.\n   * @return {number} A number between 0 and 1.\n   */\n  getAlpha(id, time) {\n    if (!this.transition_) {\n      return 1;\n    }\n\n    let start = this.transitionStarts_[id];\n    if (!start) {\n      start = time;\n      this.transitionStarts_[id] = start;\n    } else if (start === -1) {\n      return 1;\n    }\n\n    const delta = time - start + (1000 / 60); // avoid rendering at 0\n    if (delta >= this.transition_) {\n      return 1;\n    }\n    return easeIn(delta / this.transition_);\n  }\n\n  /**\n   * Determine if a tile is in an alpha transition.  A tile is considered in\n   * transition if tile.getAlpha() has not yet been called or has been called\n   * and returned 1.\n   * @param {string} id An id for the renderer.\n   * @return {boolean} The tile is in transition.\n   */\n  inTransition(id) {\n    if (!this.transition_) {\n      return false;\n    }\n    return this.transitionStarts_[id] !== -1;\n  }\n\n  /**\n   * Mark a transition as complete.\n   * @param {string} id An id for the renderer.\n   */\n  endTransition(id) {\n    if (this.transition_) {\n      this.transitionStarts_[id] = -1;\n    }\n  }\n}\n\n\nexport default Tile;\n","/**\n * @module ol/loadingstrategy\n */\n\n\n/**\n * Strategy function for loading all features with a single request.\n * @param {import(\"./extent.js\").Extent} extent Extent.\n * @param {number} resolution Resolution.\n * @return {Array<import(\"./extent.js\").Extent>} Extents.\n * @api\n */\nexport function all(extent, resolution) {\n  return [[-Infinity, -Infinity, Infinity, Infinity]];\n}\n\n\n/**\n * Strategy function for loading features based on the view's extent and\n * resolution.\n * @param {import(\"./extent.js\").Extent} extent Extent.\n * @param {number} resolution Resolution.\n * @return {Array<import(\"./extent.js\").Extent>} Extents.\n * @api\n */\nexport function bbox(extent, resolution) {\n  return [extent];\n}\n\n\n/**\n * Creates a strategy function for loading features based on a tile grid.\n * @param {import(\"./tilegrid/TileGrid.js\").default} tileGrid Tile grid.\n * @return {function(import(\"./extent.js\").Extent, number): Array<import(\"./extent.js\").Extent>} Loading strategy.\n * @api\n */\nexport function tile(tileGrid) {\n  return (\n    /**\n     * @param {import(\"./extent.js\").Extent} extent Extent.\n     * @param {number} resolution Resolution.\n     * @return {Array<import(\"./extent.js\").Extent>} Extents.\n     */\n    function(extent, resolution) {\n      const z = tileGrid.getZForResolution(resolution);\n      const tileRange = tileGrid.getTileRangeForExtentAndZ(extent, z);\n      /** @type {Array<import(\"./extent.js\").Extent>} */\n      const extents = [];\n      /** @type {import(\"./tilecoord.js\").TileCoord} */\n      const tileCoord = [z, 0, 0];\n      for (tileCoord[1] = tileRange.minX; tileCoord[1] <= tileRange.maxX; ++tileCoord[1]) {\n        for (tileCoord[2] = tileRange.minY; tileCoord[2] <= tileRange.maxY; ++tileCoord[2]) {\n          extents.push(tileGrid.getTileCoordExtent(tileCoord));\n        }\n      }\n      return extents;\n    }\n  );\n}\n","/**\n * @module ol/format/XMLFeature\n */\nimport {abstract} from '../util.js';\nimport {extend} from '../array.js';\nimport FeatureFormat from '../format/Feature.js';\nimport FormatType from '../format/FormatType.js';\nimport {isDocument, parse} from '../xml.js';\n\n/**\n * @classdesc\n * Abstract base class; normally only used for creating subclasses and not\n * instantiated in apps.\n * Base class for XML feature formats.\n *\n * @abstract\n */\nclass XMLFeature extends FeatureFormat {\n  constructor() {\n    super();\n\n    /**\n     * @type {XMLSerializer}\n     * @private\n     */\n    this.xmlSerializer_ = new XMLSerializer();\n  }\n\n  /**\n   * @inheritDoc\n   */\n  getType() {\n    return FormatType.XML;\n  }\n\n  /**\n   * Read a single feature.\n   *\n   * @param {Document|Node|Object|string} source Source.\n   * @param {import(\"./Feature.js\").ReadOptions=} opt_options Read options.\n   * @return {import(\"../Feature.js\").default} Feature.\n   * @api\n   */\n  readFeature(source, opt_options) {\n    if (!source) {\n      return null;\n    } else if (typeof source === 'string') {\n      const doc = parse(source);\n      return this.readFeatureFromDocument(doc, opt_options);\n    } else if (isDocument(source)) {\n      return this.readFeatureFromDocument(/** @type {Document} */ (source), opt_options);\n    } else {\n      return this.readFeatureFromNode(/** @type {Node} */ (source), opt_options);\n    }\n  }\n\n  /**\n   * @param {Document} doc Document.\n   * @param {import(\"./Feature.js\").ReadOptions=} opt_options Options.\n   * @return {import(\"../Feature.js\").default} Feature.\n   */\n  readFeatureFromDocument(doc, opt_options) {\n    const features = this.readFeaturesFromDocument(doc, opt_options);\n    if (features.length > 0) {\n      return features[0];\n    } else {\n      return null;\n    }\n  }\n\n  /**\n   * @param {Node} node Node.\n   * @param {import(\"./Feature.js\").ReadOptions=} opt_options Options.\n   * @return {import(\"../Feature.js\").default} Feature.\n   */\n  readFeatureFromNode(node, opt_options) {\n    return null; // not implemented\n  }\n\n  /**\n   * Read all features from a feature collection.\n   *\n   * @param {Document|Node|Object|string} source Source.\n   * @param {import(\"./Feature.js\").ReadOptions=} opt_options Options.\n   * @return {Array<import(\"../Feature.js\").default>} Features.\n   * @api\n   */\n  readFeatures(source, opt_options) {\n    if (!source) {\n      return [];\n    } else if (typeof source === 'string') {\n      const doc = parse(source);\n      return this.readFeaturesFromDocument(doc, opt_options);\n    } else if (isDocument(source)) {\n      return this.readFeaturesFromDocument(\n        /** @type {Document} */ (source), opt_options);\n    } else {\n      return this.readFeaturesFromNode(/** @type {Node} */ (source), opt_options);\n    }\n  }\n\n  /**\n   * @param {Document} doc Document.\n   * @param {import(\"./Feature.js\").ReadOptions=} opt_options Options.\n   * @protected\n   * @return {Array<import(\"../Feature.js\").default>} Features.\n   */\n  readFeaturesFromDocument(doc, opt_options) {\n    /** @type {Array<import(\"../Feature.js\").default>} */\n    const features = [];\n    for (let n = /** @type {Node} */ (doc.firstChild); n; n = n.nextSibling) {\n      if (n.nodeType == Node.ELEMENT_NODE) {\n        extend(features, this.readFeaturesFromNode(n, opt_options));\n      }\n    }\n    return features;\n  }\n\n  /**\n   * @abstract\n   * @param {Node} node Node.\n   * @param {import(\"./Feature.js\").ReadOptions=} opt_options Options.\n   * @protected\n   * @return {Array<import(\"../Feature.js\").default>} Features.\n   */\n  readFeaturesFromNode(node, opt_options) {\n    return abstract();\n  }\n\n  /**\n   * @inheritDoc\n   */\n  readGeometry(source, opt_options) {\n    if (!source) {\n      return null;\n    } else if (typeof source === 'string') {\n      const doc = parse(source);\n      return this.readGeometryFromDocument(doc, opt_options);\n    } else if (isDocument(source)) {\n      return this.readGeometryFromDocument(\n        /** @type {Document} */ (source), opt_options);\n    } else {\n      return this.readGeometryFromNode(/** @type {Node} */ (source), opt_options);\n    }\n  }\n\n  /**\n   * @param {Document} doc Document.\n   * @param {import(\"./Feature.js\").ReadOptions=} opt_options Options.\n   * @protected\n   * @return {import(\"../geom/Geometry.js\").default} Geometry.\n   */\n  readGeometryFromDocument(doc, opt_options) {\n    return null; // not implemented\n  }\n\n  /**\n   * @param {Node} node Node.\n   * @param {import(\"./Feature.js\").ReadOptions=} opt_options Options.\n   * @protected\n   * @return {import(\"../geom/Geometry.js\").default} Geometry.\n   */\n  readGeometryFromNode(node, opt_options) {\n    return null; // not implemented\n  }\n\n  /**\n   * Read the projection from the source.\n   *\n   * @param {Document|Node|Object|string} source Source.\n   * @return {import(\"../proj/Projection.js\").default} Projection.\n   * @api\n   */\n  readProjection(source) {\n    if (!source) {\n      return null;\n    } else if (typeof source === 'string') {\n      const doc = parse(source);\n      return this.readProjectionFromDocument(doc);\n    } else if (isDocument(source)) {\n      return this.readProjectionFromDocument(/** @type {Document} */ (source));\n    } else {\n      return this.readProjectionFromNode(/** @type {Node} */ (source));\n    }\n  }\n\n  /**\n   * @param {Document} doc Document.\n   * @protected\n   * @return {import(\"../proj/Projection.js\").default} Projection.\n   */\n  readProjectionFromDocument(doc) {\n    return this.dataProjection;\n  }\n\n  /**\n   * @param {Node} node Node.\n   * @protected\n   * @return {import(\"../proj/Projection.js\").default} Projection.\n   */\n  readProjectionFromNode(node) {\n    return this.dataProjection;\n  }\n\n  /**\n   * @inheritDoc\n   */\n  writeFeature(feature, opt_options) {\n    const node = this.writeFeatureNode(feature, opt_options);\n    return this.xmlSerializer_.serializeToString(node);\n  }\n\n  /**\n   * @param {import(\"../Feature.js\").default} feature Feature.\n   * @param {import(\"./Feature.js\").WriteOptions=} opt_options Options.\n   * @protected\n   * @return {Node} Node.\n   */\n  writeFeatureNode(feature, opt_options) {\n    return null; // not implemented\n  }\n\n  /**\n   * Encode an array of features as string.\n   *\n   * @param {Array<import(\"../Feature.js\").default>} features Features.\n   * @param {import(\"./Feature.js\").WriteOptions=} opt_options Write options.\n   * @return {string} Result.\n   * @api\n   */\n  writeFeatures(features, opt_options) {\n    const node = this.writeFeaturesNode(features, opt_options);\n    return this.xmlSerializer_.serializeToString(node);\n  }\n\n  /**\n   * @param {Array<import(\"../Feature.js\").default>} features Features.\n   * @param {import(\"./Feature.js\").WriteOptions=} opt_options Options.\n   * @return {Node} Node.\n   */\n  writeFeaturesNode(features, opt_options) {\n    return null; // not implemented\n  }\n\n  /**\n   * @inheritDoc\n   */\n  writeGeometry(geometry, opt_options) {\n    const node = this.writeGeometryNode(geometry, opt_options);\n    return this.xmlSerializer_.serializeToString(node);\n  }\n\n  /**\n   * @param {import(\"../geom/Geometry.js\").default} geometry Geometry.\n   * @param {import(\"./Feature.js\").WriteOptions=} opt_options Options.\n   * @return {Node} Node.\n   */\n  writeGeometryNode(geometry, opt_options) {\n    return null; // not implemented\n  }\n}\n\n\nexport default XMLFeature;\n","/**\n * @module ol/proj/proj4\n */\nimport {addCoordinateTransforms, addProjection, addEquivalentProjections, get} from '../proj.js';\nimport {get as getTransform} from './transforms.js';\nimport Projection from './Projection.js';\n\n/**\n * Make projections defined in proj4 (with `proj4.defs()`) available in\n * OpenLayers.\n *\n * This function should be called whenever changes are made to the proj4\n * registry, e.g. after calling `proj4.defs()`. Existing transforms will not be\n * modified by this function.\n *\n * @param {?} proj4 Proj4.\n * @api\n */\nexport function register(proj4) {\n  const projCodes = Object.keys(proj4.defs);\n  const len = projCodes.length;\n  let i, j;\n  for (i = 0; i < len; ++i) {\n    const code = projCodes[i];\n    if (!get(code)) {\n      const def = proj4.defs(code);\n      addProjection(new Projection({\n        code: code,\n        axisOrientation: def.axis,\n        metersPerUnit: def.to_meter,\n        units: def.units\n      }));\n    }\n  }\n  for (i = 0; i < len; ++i) {\n    const code1 = projCodes[i];\n    const proj1 = get(code1);\n    for (j = 0; j < len; ++j) {\n      const code2 = projCodes[j];\n      const proj2 = get(code2);\n      if (!getTransform(code1, code2)) {\n        if (proj4.defs[code1] === proj4.defs[code2]) {\n          addEquivalentProjections([proj1, proj2]);\n        } else {\n          const transform = proj4(code1, code2);\n          addCoordinateTransforms(proj1, proj2, transform.forward, transform.inverse);\n        }\n      }\n    }\n  }\n}\n","/**\n * @module ol/ObjectEventType\n */\n\n/**\n * @enum {string}\n */\nexport default {\n  /**\n   * Triggered when a property is changed.\n   * @event module:ol/Object.ObjectEvent#propertychange\n   * @api\n   */\n  PROPERTYCHANGE: 'propertychange'\n};\n","/**\n * @module ol/tilegrid/common\n */\n\n/**\n * Default maximum zoom for default tile grids.\n * @type {number}\n */\nexport const DEFAULT_MAX_ZOOM = 42;\n\n/**\n * Default tile size.\n * @type {number}\n */\nexport const DEFAULT_TILE_SIZE = 256;\n","/**\n * @module ol/geom/flat/contains\n */\nimport {forEachCorner} from '../../extent.js';\n\n\n/**\n * @param {Array<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {number} end End.\n * @param {number} stride Stride.\n * @param {import(\"../../extent.js\").Extent} extent Extent.\n * @return {boolean} Contains extent.\n */\nexport function linearRingContainsExtent(flatCoordinates, offset, end, stride, extent) {\n  const outside = forEachCorner(extent,\n    /**\n     * @param {import(\"../../coordinate.js\").Coordinate} coordinate Coordinate.\n     * @return {boolean} Contains (x, y).\n     */\n    function(coordinate) {\n      return !linearRingContainsXY(flatCoordinates, offset, end, stride, coordinate[0], coordinate[1]);\n    });\n  return !outside;\n}\n\n\n/**\n * @param {Array<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {number} end End.\n * @param {number} stride Stride.\n * @param {number} x X.\n * @param {number} y Y.\n * @return {boolean} Contains (x, y).\n */\nexport function linearRingContainsXY(flatCoordinates, offset, end, stride, x, y) {\n  // http://geomalgorithms.com/a03-_inclusion.html\n  // Copyright 2000 softSurfer, 2012 Dan Sunday\n  // This code may be freely used and modified for any purpose\n  // providing that this copyright notice is included with it.\n  // SoftSurfer makes no warranty for this code, and cannot be held\n  // liable for any real or imagined damage resulting from its use.\n  // Users of this code must verify correctness for their application.\n  let wn = 0;\n  let x1 = flatCoordinates[end - stride];\n  let y1 = flatCoordinates[end - stride + 1];\n  for (; offset < end; offset += stride) {\n    const x2 = flatCoordinates[offset];\n    const y2 = flatCoordinates[offset + 1];\n    if (y1 <= y) {\n      if (y2 > y && ((x2 - x1) * (y - y1)) - ((x - x1) * (y2 - y1)) > 0) {\n        wn++;\n      }\n    } else if (y2 <= y && ((x2 - x1) * (y - y1)) - ((x - x1) * (y2 - y1)) < 0) {\n      wn--;\n    }\n    x1 = x2;\n    y1 = y2;\n  }\n  return wn !== 0;\n}\n\n\n/**\n * @param {Array<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {Array<number>} ends Ends.\n * @param {number} stride Stride.\n * @param {number} x X.\n * @param {number} y Y.\n * @return {boolean} Contains (x, y).\n */\nexport function linearRingsContainsXY(flatCoordinates, offset, ends, stride, x, y) {\n  if (ends.length === 0) {\n    return false;\n  }\n  if (!linearRingContainsXY(flatCoordinates, offset, ends[0], stride, x, y)) {\n    return false;\n  }\n  for (let i = 1, ii = ends.length; i < ii; ++i) {\n    if (linearRingContainsXY(flatCoordinates, ends[i - 1], ends[i], stride, x, y)) {\n      return false;\n    }\n  }\n  return true;\n}\n\n\n/**\n * @param {Array<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {Array<Array<number>>} endss Endss.\n * @param {number} stride Stride.\n * @param {number} x X.\n * @param {number} y Y.\n * @return {boolean} Contains (x, y).\n */\nexport function linearRingssContainsXY(flatCoordinates, offset, endss, stride, x, y) {\n  if (endss.length === 0) {\n    return false;\n  }\n  for (let i = 0, ii = endss.length; i < ii; ++i) {\n    const ends = endss[i];\n    if (linearRingsContainsXY(flatCoordinates, offset, ends, stride, x, y)) {\n      return true;\n    }\n    offset = ends[ends.length - 1];\n  }\n  return false;\n}\n","/**\n * @module ol/geom/flat/reverse\n */\n\n\n/**\n * @param {Array<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {number} end End.\n * @param {number} stride Stride.\n */\nexport function coordinates(flatCoordinates, offset, end, stride) {\n  while (offset < end - stride) {\n    for (let i = 0; i < stride; ++i) {\n      const tmp = flatCoordinates[offset + i];\n      flatCoordinates[offset + i] = flatCoordinates[end - stride + i];\n      flatCoordinates[end - stride + i] = tmp;\n    }\n    offset += stride;\n    end -= stride;\n  }\n}\n","/**\n * @module ol/geom/flat/orient\n */\nimport {coordinates as reverseCoordinates} from './reverse.js';\n\n\n/**\n * @param {Array<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {number} end End.\n * @param {number} stride Stride.\n * @return {boolean} Is clockwise.\n */\nexport function linearRingIsClockwise(flatCoordinates, offset, end, stride) {\n  // http://tinyurl.com/clockwise-method\n  // https://github.com/OSGeo/gdal/blob/trunk/gdal/ogr/ogrlinearring.cpp\n  let edge = 0;\n  let x1 = flatCoordinates[end - stride];\n  let y1 = flatCoordinates[end - stride + 1];\n  for (; offset < end; offset += stride) {\n    const x2 = flatCoordinates[offset];\n    const y2 = flatCoordinates[offset + 1];\n    edge += (x2 - x1) * (y2 + y1);\n    x1 = x2;\n    y1 = y2;\n  }\n  return edge > 0;\n}\n\n\n/**\n * Determines if linear rings are oriented.  By default, left-hand orientation\n * is tested (first ring must be clockwise, remaining rings counter-clockwise).\n * To test for right-hand orientation, use the `opt_right` argument.\n *\n * @param {Array<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {Array<number>} ends Array of end indexes.\n * @param {number} stride Stride.\n * @param {boolean=} opt_right Test for right-hand orientation\n *     (counter-clockwise exterior ring and clockwise interior rings).\n * @return {boolean} Rings are correctly oriented.\n */\nexport function linearRingsAreOriented(flatCoordinates, offset, ends, stride, opt_right) {\n  const right = opt_right !== undefined ? opt_right : false;\n  for (let i = 0, ii = ends.length; i < ii; ++i) {\n    const end = ends[i];\n    const isClockwise = linearRingIsClockwise(\n      flatCoordinates, offset, end, stride);\n    if (i === 0) {\n      if ((right && isClockwise) || (!right && !isClockwise)) {\n        return false;\n      }\n    } else {\n      if ((right && !isClockwise) || (!right && isClockwise)) {\n        return false;\n      }\n    }\n    offset = end;\n  }\n  return true;\n}\n\n\n/**\n * Determines if linear rings are oriented.  By default, left-hand orientation\n * is tested (first ring must be clockwise, remaining rings counter-clockwise).\n * To test for right-hand orientation, use the `opt_right` argument.\n *\n * @param {Array<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {Array<Array<number>>} endss Array of array of end indexes.\n * @param {number} stride Stride.\n * @param {boolean=} opt_right Test for right-hand orientation\n *     (counter-clockwise exterior ring and clockwise interior rings).\n * @return {boolean} Rings are correctly oriented.\n */\nexport function linearRingssAreOriented(flatCoordinates, offset, endss, stride, opt_right) {\n  for (let i = 0, ii = endss.length; i < ii; ++i) {\n    const ends = endss[i];\n    if (!linearRingsAreOriented(\n      flatCoordinates, offset, ends, stride, opt_right)) {\n      return false;\n    }\n    if (ends.length) {\n      offset = ends[ends.length - 1];\n    }\n  }\n  return true;\n}\n\n\n/**\n * Orient coordinates in a flat array of linear rings.  By default, rings\n * are oriented following the left-hand rule (clockwise for exterior and\n * counter-clockwise for interior rings).  To orient according to the\n * right-hand rule, use the `opt_right` argument.\n *\n * @param {Array<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {Array<number>} ends Ends.\n * @param {number} stride Stride.\n * @param {boolean=} opt_right Follow the right-hand rule for orientation.\n * @return {number} End.\n */\nexport function orientLinearRings(flatCoordinates, offset, ends, stride, opt_right) {\n  const right = opt_right !== undefined ? opt_right : false;\n  for (let i = 0, ii = ends.length; i < ii; ++i) {\n    const end = ends[i];\n    const isClockwise = linearRingIsClockwise(\n      flatCoordinates, offset, end, stride);\n    const reverse = i === 0 ?\n      (right && isClockwise) || (!right && !isClockwise) :\n      (right && !isClockwise) || (!right && isClockwise);\n    if (reverse) {\n      reverseCoordinates(flatCoordinates, offset, end, stride);\n    }\n    offset = end;\n  }\n  return offset;\n}\n\n\n/**\n * Orient coordinates in a flat array of linear rings.  By default, rings\n * are oriented following the left-hand rule (clockwise for exterior and\n * counter-clockwise for interior rings).  To orient according to the\n * right-hand rule, use the `opt_right` argument.\n *\n * @param {Array<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {Array<Array<number>>} endss Array of array of end indexes.\n * @param {number} stride Stride.\n * @param {boolean=} opt_right Follow the right-hand rule for orientation.\n * @return {number} End.\n */\nexport function orientLinearRingsArray(flatCoordinates, offset, endss, stride, opt_right) {\n  for (let i = 0, ii = endss.length; i < ii; ++i) {\n    offset = orientLinearRings(\n      flatCoordinates, offset, endss[i], stride, opt_right);\n  }\n  return offset;\n}\n","/**\n * @module ol/pointer/EventType\n */\n\n/**\n * Constants for event names.\n * @enum {string}\n */\nexport default {\n  POINTERMOVE: 'pointermove',\n  POINTERDOWN: 'pointerdown',\n  POINTERUP: 'pointerup',\n  POINTEROVER: 'pointerover',\n  POINTEROUT: 'pointerout',\n  POINTERENTER: 'pointerenter',\n  POINTERLEAVE: 'pointerleave',\n  POINTERCANCEL: 'pointercancel'\n};\n","/**\n * @module ol/interaction/Select\n */\nimport {getUid} from '../util.js';\nimport CollectionEventType from '../CollectionEventType.js';\nimport {extend, includes} from '../array.js';\nimport Event from '../events/Event.js';\nimport {singleClick, never, shiftKeyOnly, pointerMove} from '../events/condition.js';\nimport {TRUE} from '../functions.js';\nimport GeometryType from '../geom/GeometryType.js';\nimport Interaction from './Interaction.js';\nimport {clear} from '../obj.js';\nimport {createEditingStyle} from '../style/Style.js';\nimport Collection from '../Collection.js';\n\n\n/**\n * @enum {string}\n */\nconst SelectEventType = {\n  /**\n   * Triggered when feature(s) has been (de)selected.\n   * @event SelectEvent#select\n   * @api\n   */\n  SELECT: 'select'\n};\n\n\n/**\n * A function that takes an {@link module:ol/Feature} or\n * {@link module:ol/render/Feature} and an\n * {@link module:ol/layer/Layer} and returns `true` if the feature may be\n * selected or `false` otherwise.\n * @typedef {function(import(\"../Feature.js\").FeatureLike, import(\"../layer/Layer.js\").default):boolean} FilterFunction\n */\n\n\n/**\n * @typedef {Object} Options\n * @property {import(\"../events/condition.js\").Condition} [addCondition] A function\n * that takes an {@link module:ol/MapBrowserEvent~MapBrowserEvent} and returns a\n * boolean to indicate whether that event should be handled.\n * By default, this is {@link module:ol/events/condition~never}. Use this if you\n * want to use different events for add and remove instead of `toggle`.\n * @property {import(\"../events/condition.js\").Condition} [condition] A function that\n * takes an {@link module:ol/MapBrowserEvent~MapBrowserEvent} and returns a\n * boolean to indicate whether that event should be handled. This is the event\n * for the selected features as a whole. By default, this is\n * {@link module:ol/events/condition~singleClick}. Clicking on a feature selects that\n * feature and removes any that were in the selection. Clicking outside any\n * feature removes all from the selection.\n * See `toggle`, `add`, `remove` options for adding/removing extra features to/\n * from the selection.\n * @property {Array<import(\"../layer/Layer.js\").default>|function(import(\"../layer/Layer.js\").default): boolean} [layers]\n * A list of layers from which features should be selected. Alternatively, a\n * filter function can be provided. The function will be called for each layer\n * in the map and should return `true` for layers that you want to be\n * selectable. If the option is absent, all visible layers will be considered\n * selectable.\n * @property {import(\"../style/Style.js\").StyleLike} [style]\n * Style for the selected features. By default the default edit style is used\n * (see {@link module:ol/style}).\n * @property {import(\"../events/condition.js\").Condition} [removeCondition] A function\n * that takes an {@link module:ol/MapBrowserEvent~MapBrowserEvent} and returns a\n * boolean to indicate whether that event should be handled.\n * By default, this is {@link module:ol/events/condition~never}. Use this if you\n * want to use different events for add and remove instead of `toggle`.\n * @property {import(\"../events/condition.js\").Condition} [toggleCondition] A function\n * that takes an {@link module:ol/MapBrowserEvent~MapBrowserEvent} and returns a\n * boolean to indicate whether that event should be handled. This is in addition\n * to the `condition` event. By default,\n * {@link module:ol/events/condition~shiftKeyOnly}, i.e. pressing `shift` as\n * well as the `condition` event, adds that feature to the current selection if\n * it is not currently selected, and removes it if it is. See `add` and `remove`\n * if you want to use different events instead of a toggle.\n * @property {boolean} [multi=false] A boolean that determines if the default\n * behaviour should select only single features or all (overlapping) features at\n * the clicked map position. The default of `false` means single select.\n * @property {import(\"../Collection.js\").default<import(\"../Feature.js\").default>} [features]\n * Collection where the interaction will place selected features. Optional. If\n * not set the interaction will create a collection. In any case the collection\n * used by the interaction is returned by\n * {@link module:ol/interaction/Select~Select#getFeatures}.\n * @property {FilterFunction} [filter] A function\n * that takes an {@link module:ol/Feature} and an\n * {@link module:ol/layer/Layer} and returns `true` if the feature may be\n * selected or `false` otherwise.\n * @property {number} [hitTolerance=0] Hit-detection tolerance. Pixels inside\n * the radius around the given position will be checked for features.\n */\n\n\n/**\n * @classdesc\n * Events emitted by {@link module:ol/interaction/Select~Select} instances are instances of\n * this type.\n */\nclass SelectEvent extends Event {\n  /**\n   * @param {SelectEventType} type The event type.\n   * @param {Array<import(\"../Feature.js\").default>} selected Selected features.\n   * @param {Array<import(\"../Feature.js\").default>} deselected Deselected features.\n   * @param {import(\"../MapBrowserEvent.js\").default} mapBrowserEvent Associated\n   *     {@link module:ol/MapBrowserEvent}.\n   */\n  constructor(type, selected, deselected, mapBrowserEvent) {\n    super(type);\n\n    /**\n     * Selected features array.\n     * @type {Array<import(\"../Feature.js\").default>}\n     * @api\n     */\n    this.selected = selected;\n\n    /**\n     * Deselected features array.\n     * @type {Array<import(\"../Feature.js\").default>}\n     * @api\n     */\n    this.deselected = deselected;\n\n    /**\n     * Associated {@link module:ol/MapBrowserEvent}.\n     * @type {import(\"../MapBrowserEvent.js\").default}\n     * @api\n     */\n    this.mapBrowserEvent = mapBrowserEvent;\n\n  }\n\n}\n\n\n/**\n * @classdesc\n * Interaction for selecting vector features. By default, selected features are\n * styled differently, so this interaction can be used for visual highlighting,\n * as well as selecting features for other actions, such as modification or\n * output. There are three ways of controlling which features are selected:\n * using the browser event as defined by the `condition` and optionally the\n * `toggle`, `add`/`remove`, and `multi` options; a `layers` filter; and a\n * further feature filter using the `filter` option.\n *\n * Selected features are added to an internal unmanaged layer.\n *\n * @fires SelectEvent\n * @api\n */\nclass Select extends Interaction {\n  /**\n   * @param {Options=} opt_options Options.\n   */\n  constructor(opt_options) {\n\n    super({\n      handleEvent: handleEvent\n    });\n\n    const options = opt_options ? opt_options : {};\n\n    /**\n     * @private\n     * @type {import(\"../events/condition.js\").Condition}\n     */\n    this.condition_ = options.condition ? options.condition : singleClick;\n\n    /**\n     * @private\n     * @type {import(\"../events/condition.js\").Condition}\n     */\n    this.addCondition_ = options.addCondition ? options.addCondition : never;\n\n    /**\n     * @private\n     * @type {import(\"../events/condition.js\").Condition}\n     */\n    this.removeCondition_ = options.removeCondition ? options.removeCondition : never;\n\n    /**\n     * @private\n     * @type {import(\"../events/condition.js\").Condition}\n     */\n    this.toggleCondition_ = options.toggleCondition ? options.toggleCondition : shiftKeyOnly;\n\n    /**\n     * @private\n     * @type {boolean}\n     */\n    this.multi_ = options.multi ? options.multi : false;\n\n    /**\n     * @private\n     * @type {FilterFunction}\n     */\n    this.filter_ = options.filter ? options.filter : TRUE;\n\n    /**\n     * @private\n     * @type {number}\n     */\n    this.hitTolerance_ = options.hitTolerance ? options.hitTolerance : 0;\n\n    /**\n     * @private\n     * @type {import(\"../style/Style.js\").default|Array.<import(\"../style/Style.js\").default>|import(\"../style/Style.js\").StyleFunction|null}\n     */\n    this.style_ = options.style ? options.style : getDefaultStyleFunction();\n\n    /**\n     * An association between selected feature (key)\n     * and original style (value)\n     * @private\n     * @type {Object.<number, import(\"../style/Style.js\").default|Array.<import(\"../style/Style.js\").default>|import(\"../style/Style.js\").StyleFunction>}\n     */\n    this.featureStyleAssociation_ = {};\n\n    /**\n     * @private\n     * @type {import(\"../Collection.js\").default}\n     */\n    this.features_ = options.features || new Collection();\n\n    /** @type {function(import(\"../layer/Layer.js\").default): boolean} */\n    let layerFilter;\n    if (options.layers) {\n      if (typeof options.layers === 'function') {\n        layerFilter = options.layers;\n      } else {\n        const layers = options.layers;\n        layerFilter = function(layer) {\n          return includes(layers, layer);\n        };\n      }\n    } else {\n      layerFilter = TRUE;\n    }\n\n    /**\n     * @private\n     * @type {function(import(\"../layer/Layer.js\").default): boolean}\n     */\n    this.layerFilter_ = layerFilter;\n\n    /**\n     * An association between selected feature (key)\n     * and layer (value)\n     * @private\n     * @type {Object<string, import(\"../layer/Layer.js\").default>}\n     */\n    this.featureLayerAssociation_ = {};\n\n    const features = this.getFeatures();\n    features.addEventListener(CollectionEventType.ADD, this.addFeature_.bind(this));\n    features.addEventListener(CollectionEventType.REMOVE, this.removeFeature_.bind(this));\n  }\n\n  /**\n   * @param {import(\"../Feature.js\").FeatureLike} feature Feature.\n   * @param {import(\"../layer/Layer.js\").default} layer Layer.\n   * @private\n   */\n  addFeatureLayerAssociation_(feature, layer) {\n    this.featureLayerAssociation_[getUid(feature)] = layer;\n  }\n\n  /**\n   * Get the selected features.\n   * @return {import(\"../Collection.js\").default<import(\"../Feature.js\").default>} Features collection.\n   * @api\n   */\n  getFeatures() {\n    return this.features_;\n  }\n\n  /**\n   * Returns the Hit-detection tolerance.\n   * @returns {number} Hit tolerance in pixels.\n   * @api\n   */\n  getHitTolerance() {\n    return this.hitTolerance_;\n  }\n\n  /**\n   * Returns the associated {@link module:ol/layer/Vector~Vector vectorlayer} of\n   * the (last) selected feature. Note that this will not work with any\n   * programmatic method like pushing features to\n   * {@link module:ol/interaction/Select~Select#getFeatures collection}.\n   * @param {import(\"../Feature.js\").FeatureLike} feature Feature\n   * @return {import('../layer/Vector.js').default} Layer.\n   * @api\n   */\n  getLayer(feature) {\n    return (\n      /** @type {import('../layer/Vector.js').default} */ (this.featureLayerAssociation_[getUid(feature)])\n    );\n  }\n\n  /**\n   * Hit-detection tolerance. Pixels inside the radius around the given position\n   * will be checked for features.\n   * @param {number} hitTolerance Hit tolerance in pixels.\n   * @api\n   */\n  setHitTolerance(hitTolerance) {\n    this.hitTolerance_ = hitTolerance;\n  }\n\n  /**\n   * Remove the interaction from its current map, if any,  and attach it to a new\n   * map, if any. Pass `null` to just remove the interaction from the current map.\n   * @param {import(\"../PluggableMap.js\").default} map Map.\n   * @override\n   * @api\n   */\n  setMap(map) {\n    const currentMap = this.getMap();\n    if (currentMap && this.style_) {\n      this.features_.forEach(this.removeSelectedStyle_.bind(this));\n    }\n    super.setMap(map);\n    if (map && this.style_) {\n      this.features_.forEach(this.giveSelectedStyle_.bind(this));\n    }\n  }\n\n  /**\n   * @param {import(\"../Collection.js\").CollectionEvent} evt Event.\n   * @private\n   */\n  addFeature_(evt) {\n    const feature = evt.element;\n    if (this.style_) {\n      this.giveSelectedStyle_(feature);\n    }\n  }\n\n  /**\n   * @param {import(\"../Collection.js\").CollectionEvent} evt Event.\n   * @private\n   */\n  removeFeature_(evt) {\n    const feature = evt.element;\n    if (this.style_) {\n      this.removeSelectedStyle_(feature);\n    }\n  }\n\n  /**\n   * @param {import(\"../Feature.js\").default} feature Feature\n   * @private\n   */\n  giveSelectedStyle_(feature) {\n    const key = getUid(feature);\n    this.featureStyleAssociation_[key] = feature.getStyle();\n    feature.setStyle(this.style_);\n  }\n\n  /**\n   * @param {import(\"../Feature.js\").default} feature Feature\n   * @private\n   */\n  removeSelectedStyle_(feature) {\n    const key = getUid(feature);\n    feature.setStyle(this.featureStyleAssociation_[key]);\n    delete this.featureStyleAssociation_[key];\n  }\n\n  /**\n   * @param {import(\"../Feature.js\").FeatureLike} feature Feature.\n   * @private\n   */\n  removeFeatureLayerAssociation_(feature) {\n    delete this.featureLayerAssociation_[getUid(feature)];\n  }\n}\n\n\n/**\n * Handles the {@link module:ol/MapBrowserEvent map browser event} and may change the\n * selected state of features.\n * @param {import(\"../MapBrowserEvent.js\").default} mapBrowserEvent Map browser event.\n * @return {boolean} `false` to stop event propagation.\n * @this {Select}\n */\nfunction handleEvent(mapBrowserEvent) {\n  if (!this.condition_(mapBrowserEvent)) {\n    return true;\n  }\n  const add = this.addCondition_(mapBrowserEvent);\n  const remove = this.removeCondition_(mapBrowserEvent);\n  const toggle = this.toggleCondition_(mapBrowserEvent);\n  const set = !add && !remove && !toggle;\n  const map = mapBrowserEvent.map;\n  const features = this.getFeatures();\n  const deselected = [];\n  const selected = [];\n  if (set) {\n    // Replace the currently selected feature(s) with the feature(s) at the\n    // pixel, or clear the selected feature(s) if there is no feature at\n    // the pixel.\n    clear(this.featureLayerAssociation_);\n    map.forEachFeatureAtPixel(mapBrowserEvent.pixel,\n      (\n        /**\n         * @param {import(\"../Feature.js\").FeatureLike} feature Feature.\n         * @param {import(\"../layer/Layer.js\").default} layer Layer.\n         * @return {boolean|undefined} Continue to iterate over the features.\n         */\n        function(feature, layer) {\n          if (this.filter_(feature, layer)) {\n            selected.push(feature);\n            this.addFeatureLayerAssociation_(feature, layer);\n            return !this.multi_;\n          }\n        }).bind(this), {\n        layerFilter: this.layerFilter_,\n        hitTolerance: this.hitTolerance_\n      });\n    for (let i = features.getLength() - 1; i >= 0; --i) {\n      const feature = features.item(i);\n      const index = selected.indexOf(feature);\n      if (index > -1) {\n        // feature is already selected\n        selected.splice(index, 1);\n      } else {\n        features.remove(feature);\n        deselected.push(feature);\n      }\n    }\n    if (selected.length !== 0) {\n      features.extend(selected);\n    }\n  } else {\n    // Modify the currently selected feature(s).\n    map.forEachFeatureAtPixel(mapBrowserEvent.pixel,\n      (\n        /**\n         * @param {import(\"../Feature.js\").FeatureLike} feature Feature.\n         * @param {import(\"../layer/Layer.js\").default} layer Layer.\n         * @return {boolean|undefined} Continue to iterate over the features.\n         */\n        function(feature, layer) {\n          if (this.filter_(feature, layer)) {\n            if ((add || toggle) && !includes(features.getArray(), feature)) {\n              selected.push(feature);\n              this.addFeatureLayerAssociation_(feature, layer);\n            } else if ((remove || toggle) && includes(features.getArray(), feature)) {\n              deselected.push(feature);\n              this.removeFeatureLayerAssociation_(feature);\n            }\n            return !this.multi_;\n          }\n        }).bind(this), {\n        layerFilter: this.layerFilter_,\n        hitTolerance: this.hitTolerance_\n      });\n    for (let j = deselected.length - 1; j >= 0; --j) {\n      features.remove(deselected[j]);\n    }\n    features.extend(selected);\n  }\n  if (selected.length > 0 || deselected.length > 0) {\n    this.dispatchEvent(\n      new SelectEvent(SelectEventType.SELECT,\n        selected, deselected, mapBrowserEvent));\n  }\n  return pointerMove(mapBrowserEvent);\n}\n\n\n/**\n * @return {import(\"../style/Style.js\").StyleFunction} Styles.\n */\nfunction getDefaultStyleFunction() {\n  const styles = createEditingStyle();\n  extend(styles[GeometryType.POLYGON], styles[GeometryType.LINE_STRING]);\n  extend(styles[GeometryType.GEOMETRY_COLLECTION], styles[GeometryType.LINE_STRING]);\n\n  return function(feature) {\n    if (!feature.getGeometry()) {\n      return null;\n    }\n    return styles[feature.getGeometry().getType()];\n  };\n}\n\n\nexport default Select;\n","/**\n * @module ol/render/EventType\n */\n\n/**\n * @enum {string}\n */\nexport default {\n\n  /**\n   * Triggered before a layer is rendered.\n   * @event module:ol/render/Event~RenderEvent#prerender\n   * @api\n   */\n  PRERENDER: 'prerender',\n\n  /**\n   * Triggered after a layer is rendered.\n   * @event module:ol/render/Event~RenderEvent#postrender\n   * @api\n   */\n  POSTRENDER: 'postrender',\n\n  /**\n   * Triggered before layers are rendered.\n   * @event module:ol/render/Event~RenderEvent#precompose\n   * @api\n   */\n  PRECOMPOSE: 'precompose',\n\n  /**\n   * Triggered after all layers are rendered.\n   * @event module:ol/render/Event~RenderEvent#postcompose\n   * @api\n   */\n  POSTCOMPOSE: 'postcompose',\n\n  /**\n   * Triggered when rendering is complete, i.e. all sources and tiles have\n   * finished loading for the current viewport, and all tiles are faded in.\n   * @event module:ol/render/Event~RenderEvent#rendercomplete\n   * @api\n   */\n  RENDERCOMPLETE: 'rendercomplete'\n\n};\n","/**\n * @module ol/proj/transforms\n */\nimport {isEmpty} from '../obj.js';\n\n\n/**\n * @private\n * @type {!Object<string, Object<string, import(\"../proj.js\").TransformFunction>>}\n */\nlet transforms = {};\n\n\n/**\n * Clear the transform cache.\n */\nexport function clear() {\n  transforms = {};\n}\n\n\n/**\n * Registers a conversion function to convert coordinates from the source\n * projection to the destination projection.\n *\n * @param {import(\"./Projection.js\").default} source Source.\n * @param {import(\"./Projection.js\").default} destination Destination.\n * @param {import(\"../proj.js\").TransformFunction} transformFn Transform.\n */\nexport function add(source, destination, transformFn) {\n  const sourceCode = source.getCode();\n  const destinationCode = destination.getCode();\n  if (!(sourceCode in transforms)) {\n    transforms[sourceCode] = {};\n  }\n  transforms[sourceCode][destinationCode] = transformFn;\n}\n\n\n/**\n * Unregisters the conversion function to convert coordinates from the source\n * projection to the destination projection.  This method is used to clean up\n * cached transforms during testing.\n *\n * @param {import(\"./Projection.js\").default} source Source projection.\n * @param {import(\"./Projection.js\").default} destination Destination projection.\n * @return {import(\"../proj.js\").TransformFunction} transformFn The unregistered transform.\n */\nexport function remove(source, destination) {\n  const sourceCode = source.getCode();\n  const destinationCode = destination.getCode();\n  const transform = transforms[sourceCode][destinationCode];\n  delete transforms[sourceCode][destinationCode];\n  if (isEmpty(transforms[sourceCode])) {\n    delete transforms[sourceCode];\n  }\n  return transform;\n}\n\n\n/**\n * Get a transform given a source code and a destination code.\n * @param {string} sourceCode The code for the source projection.\n * @param {string} destinationCode The code for the destination projection.\n * @return {import(\"../proj.js\").TransformFunction|undefined} The transform function (if found).\n */\nexport function get(sourceCode, destinationCode) {\n  let transform;\n  if (sourceCode in transforms && destinationCode in transforms[sourceCode]) {\n    transform = transforms[sourceCode][destinationCode];\n  }\n  return transform;\n}\n","/**\n * @module ol/style/RegularShape\n */\n\nimport {asArray} from '../color.js';\nimport {asColorLike} from '../colorlike.js';\nimport {createCanvasContext2D} from '../dom.js';\nimport ImageState from '../ImageState.js';\nimport {defaultStrokeStyle, defaultFillStyle, defaultLineCap, defaultLineWidth, defaultLineJoin, defaultMiterLimit} from '../render/canvas.js';\nimport ImageStyle from './Image.js';\n\n\n/**\n * Specify radius for regular polygons, or radius1 and radius2 for stars.\n * @typedef {Object} Options\n * @property {import(\"./Fill.js\").default} [fill] Fill style.\n * @property {number} points Number of points for stars and regular polygons. In case of a polygon, the number of points\n * is the number of sides.\n * @property {number} [radius] Radius of a regular polygon.\n * @property {number} [radius1] Outer radius of a star.\n * @property {number} [radius2] Inner radius of a star.\n * @property {number} [angle=0] Shape's angle in radians. A value of 0 will have one of the shape's point facing up.\n * @property {import(\"./Stroke.js\").default} [stroke] Stroke style.\n * @property {number} [rotation=0] Rotation in radians (positive rotation clockwise).\n * @property {boolean} [rotateWithView=false] Whether to rotate the shape with the view.\n */\n\n\n/**\n * @typedef {Object} RenderOptions\n * @property {import(\"../colorlike.js\").ColorLike} [strokeStyle]\n * @property {number} strokeWidth\n * @property {number} size\n * @property {CanvasLineCap} lineCap\n * @property {Array<number>} lineDash\n * @property {number} lineDashOffset\n * @property {CanvasLineJoin} lineJoin\n * @property {number} miterLimit\n */\n\n\n/**\n * @classdesc\n * Set regular shape style for vector features. The resulting shape will be\n * a regular polygon when `radius` is provided, or a star when `radius1` and\n * `radius2` are provided.\n * @api\n */\nclass RegularShape extends ImageStyle {\n  /**\n   * @param {Options} options Options.\n   */\n  constructor(options) {\n    /**\n     * @type {boolean}\n     */\n    const rotateWithView = options.rotateWithView !== undefined ?\n      options.rotateWithView : false;\n\n    super({\n      opacity: 1,\n      rotateWithView: rotateWithView,\n      rotation: options.rotation !== undefined ? options.rotation : 0,\n      scale: 1\n    });\n\n    /**\n     * @private\n     * @type {HTMLCanvasElement}\n     */\n    this.canvas_ = null;\n\n    /**\n     * @private\n     * @type {HTMLCanvasElement}\n     */\n    this.hitDetectionCanvas_ = null;\n\n    /**\n     * @private\n     * @type {import(\"./Fill.js\").default}\n     */\n    this.fill_ = options.fill !== undefined ? options.fill : null;\n\n    /**\n     * @private\n     * @type {Array<number>}\n     */\n    this.origin_ = [0, 0];\n\n    /**\n     * @private\n     * @type {number}\n     */\n    this.points_ = options.points;\n\n    /**\n     * @protected\n     * @type {number}\n     */\n    this.radius_ = /** @type {number} */ (options.radius !== undefined ?\n      options.radius : options.radius1);\n\n    /**\n     * @private\n     * @type {number|undefined}\n     */\n    this.radius2_ = options.radius2;\n\n    /**\n     * @private\n     * @type {number}\n     */\n    this.angle_ = options.angle !== undefined ? options.angle : 0;\n\n    /**\n     * @private\n     * @type {import(\"./Stroke.js\").default}\n     */\n    this.stroke_ = options.stroke !== undefined ? options.stroke : null;\n\n    /**\n     * @private\n     * @type {Array<number>}\n     */\n    this.anchor_ = null;\n\n    /**\n     * @private\n     * @type {import(\"../size.js\").Size}\n     */\n    this.size_ = null;\n\n    /**\n     * @private\n     * @type {import(\"../size.js\").Size}\n     */\n    this.imageSize_ = null;\n\n    /**\n     * @private\n     * @type {import(\"../size.js\").Size}\n     */\n    this.hitDetectionImageSize_ = null;\n\n    this.render();\n\n  }\n\n  /**\n   * Clones the style.\n   * @return {RegularShape} The cloned style.\n   * @api\n   */\n  clone() {\n    const style = new RegularShape({\n      fill: this.getFill() ? this.getFill().clone() : undefined,\n      points: this.getPoints(),\n      radius: this.getRadius(),\n      radius2: this.getRadius2(),\n      angle: this.getAngle(),\n      stroke: this.getStroke() ? this.getStroke().clone() : undefined,\n      rotation: this.getRotation(),\n      rotateWithView: this.getRotateWithView()\n    });\n    style.setOpacity(this.getOpacity());\n    style.setScale(this.getScale());\n    return style;\n  }\n\n  /**\n   * @inheritDoc\n   * @api\n   */\n  getAnchor() {\n    return this.anchor_;\n  }\n\n  /**\n   * Get the angle used in generating the shape.\n   * @return {number} Shape's rotation in radians.\n   * @api\n   */\n  getAngle() {\n    return this.angle_;\n  }\n\n  /**\n   * Get the fill style for the shape.\n   * @return {import(\"./Fill.js\").default} Fill style.\n   * @api\n   */\n  getFill() {\n    return this.fill_;\n  }\n\n  /**\n   * @inheritDoc\n   */\n  getHitDetectionImage(pixelRatio) {\n    return this.hitDetectionCanvas_;\n  }\n\n  /**\n   * @inheritDoc\n   * @api\n   */\n  getImage(pixelRatio) {\n    return this.canvas_;\n  }\n\n  /**\n   * @inheritDoc\n   */\n  getImageSize() {\n    return this.imageSize_;\n  }\n\n  /**\n   * @inheritDoc\n   */\n  getHitDetectionImageSize() {\n    return this.hitDetectionImageSize_;\n  }\n\n  /**\n   * @inheritDoc\n   */\n  getImageState() {\n    return ImageState.LOADED;\n  }\n\n  /**\n   * @inheritDoc\n   * @api\n   */\n  getOrigin() {\n    return this.origin_;\n  }\n\n  /**\n   * Get the number of points for generating the shape.\n   * @return {number} Number of points for stars and regular polygons.\n   * @api\n   */\n  getPoints() {\n    return this.points_;\n  }\n\n  /**\n   * Get the (primary) radius for the shape.\n   * @return {number} Radius.\n   * @api\n   */\n  getRadius() {\n    return this.radius_;\n  }\n\n  /**\n   * Get the secondary radius for the shape.\n   * @return {number|undefined} Radius2.\n   * @api\n   */\n  getRadius2() {\n    return this.radius2_;\n  }\n\n  /**\n   * @inheritDoc\n   * @api\n   */\n  getSize() {\n    return this.size_;\n  }\n\n  /**\n   * Get the stroke style for the shape.\n   * @return {import(\"./Stroke.js\").default} Stroke style.\n   * @api\n   */\n  getStroke() {\n    return this.stroke_;\n  }\n\n  /**\n   * @inheritDoc\n   */\n  listenImageChange(listener) {}\n\n  /**\n   * @inheritDoc\n   */\n  load() {}\n\n  /**\n   * @inheritDoc\n   */\n  unlistenImageChange(listener) {}\n\n  /**\n   * @protected\n   */\n  render() {\n    let lineCap = defaultLineCap;\n    let lineJoin = defaultLineJoin;\n    let miterLimit = 0;\n    let lineDash = null;\n    let lineDashOffset = 0;\n    let strokeStyle;\n    let strokeWidth = 0;\n\n    if (this.stroke_) {\n      strokeStyle = this.stroke_.getColor();\n      if (strokeStyle === null) {\n        strokeStyle = defaultStrokeStyle;\n      }\n      strokeStyle = asColorLike(strokeStyle);\n      strokeWidth = this.stroke_.getWidth();\n      if (strokeWidth === undefined) {\n        strokeWidth = defaultLineWidth;\n      }\n      lineDash = this.stroke_.getLineDash();\n      lineDashOffset = this.stroke_.getLineDashOffset();\n      lineJoin = this.stroke_.getLineJoin();\n      if (lineJoin === undefined) {\n        lineJoin = defaultLineJoin;\n      }\n      lineCap = this.stroke_.getLineCap();\n      if (lineCap === undefined) {\n        lineCap = defaultLineCap;\n      }\n      miterLimit = this.stroke_.getMiterLimit();\n      if (miterLimit === undefined) {\n        miterLimit = defaultMiterLimit;\n      }\n    }\n\n    let size = 2 * (this.radius_ + strokeWidth) + 1;\n\n    const renderOptions = {\n      strokeStyle: strokeStyle,\n      strokeWidth: strokeWidth,\n      size: size,\n      lineCap: lineCap,\n      lineDash: lineDash,\n      lineDashOffset: lineDashOffset,\n      lineJoin: lineJoin,\n      miterLimit: miterLimit\n    };\n\n    const context = createCanvasContext2D(size, size);\n    this.canvas_ = context.canvas;\n\n    // canvas.width and height are rounded to the closest integer\n    size = this.canvas_.width;\n    const imageSize = size;\n\n    this.draw_(renderOptions, context, 0, 0);\n\n    this.createHitDetectionCanvas_(renderOptions);\n\n    this.anchor_ = [size / 2, size / 2];\n    this.size_ = [size, size];\n    this.imageSize_ = [imageSize, imageSize];\n  }\n\n  /**\n   * @private\n   * @param {RenderOptions} renderOptions Render options.\n   * @param {CanvasRenderingContext2D} context The rendering context.\n   * @param {number} x The origin for the symbol (x).\n   * @param {number} y The origin for the symbol (y).\n   */\n  draw_(renderOptions, context, x, y) {\n    let i, angle0, radiusC;\n    // reset transform\n    context.setTransform(1, 0, 0, 1, 0, 0);\n\n    // then move to (x, y)\n    context.translate(x, y);\n\n    context.beginPath();\n\n    let points = this.points_;\n    if (points === Infinity) {\n      context.arc(\n        renderOptions.size / 2, renderOptions.size / 2,\n        this.radius_, 0, 2 * Math.PI, true);\n    } else {\n      const radius2 = (this.radius2_ !== undefined) ? this.radius2_\n        : this.radius_;\n      if (radius2 !== this.radius_) {\n        points = 2 * points;\n      }\n      for (i = 0; i <= points; i++) {\n        angle0 = i * 2 * Math.PI / points - Math.PI / 2 + this.angle_;\n        radiusC = i % 2 === 0 ? this.radius_ : radius2;\n        context.lineTo(renderOptions.size / 2 + radiusC * Math.cos(angle0),\n          renderOptions.size / 2 + radiusC * Math.sin(angle0));\n      }\n    }\n\n\n    if (this.fill_) {\n      let color = this.fill_.getColor();\n      if (color === null) {\n        color = defaultFillStyle;\n      }\n      context.fillStyle = asColorLike(color);\n      context.fill();\n    }\n    if (this.stroke_) {\n      context.strokeStyle = renderOptions.strokeStyle;\n      context.lineWidth = renderOptions.strokeWidth;\n      if (context.setLineDash && renderOptions.lineDash) {\n        context.setLineDash(renderOptions.lineDash);\n        context.lineDashOffset = renderOptions.lineDashOffset;\n      }\n      context.lineCap = renderOptions.lineCap;\n      context.lineJoin = renderOptions.lineJoin;\n      context.miterLimit = renderOptions.miterLimit;\n      context.stroke();\n    }\n    context.closePath();\n  }\n\n  /**\n   * @private\n   * @param {RenderOptions} renderOptions Render options.\n   */\n  createHitDetectionCanvas_(renderOptions) {\n    this.hitDetectionImageSize_ = [renderOptions.size, renderOptions.size];\n    this.hitDetectionCanvas_ = this.canvas_;\n    if (this.fill_) {\n      let color = this.fill_.getColor();\n\n      // determine if fill is transparent (or pattern or gradient)\n      let opacity = 0;\n      if (typeof color === 'string') {\n        color = asArray(color);\n      }\n      if (color === null) {\n        opacity = 1;\n      } else if (Array.isArray(color)) {\n        opacity = color.length === 4 ? color[3] : 1;\n      }\n      if (opacity === 0) {\n\n        // if a transparent fill style is set, create an extra hit-detection image\n        // with a default fill style\n        const context = createCanvasContext2D(renderOptions.size, renderOptions.size);\n        this.hitDetectionCanvas_ = context.canvas;\n\n        this.drawHitDetectionCanvas_(renderOptions, context, 0, 0);\n      }\n    }\n\n  }\n\n  /**\n   * @private\n   * @param {RenderOptions} renderOptions Render options.\n   * @param {CanvasRenderingContext2D} context The context.\n   * @param {number} x The origin for the symbol (x).\n   * @param {number} y The origin for the symbol (y).\n   */\n  drawHitDetectionCanvas_(renderOptions, context, x, y) {\n    // reset transform\n    context.setTransform(1, 0, 0, 1, 0, 0);\n\n    // then move to (x, y)\n    context.translate(x, y);\n\n    context.beginPath();\n\n    let points = this.points_;\n    if (points === Infinity) {\n      context.arc(\n        renderOptions.size / 2, renderOptions.size / 2,\n        this.radius_, 0, 2 * Math.PI, true);\n    } else {\n      const radius2 = (this.radius2_ !== undefined) ? this.radius2_\n        : this.radius_;\n      if (radius2 !== this.radius_) {\n        points = 2 * points;\n      }\n      let i, radiusC, angle0;\n      for (i = 0; i <= points; i++) {\n        angle0 = i * 2 * Math.PI / points - Math.PI / 2 + this.angle_;\n        radiusC = i % 2 === 0 ? this.radius_ : radius2;\n        context.lineTo(renderOptions.size / 2 + radiusC * Math.cos(angle0),\n          renderOptions.size / 2 + radiusC * Math.sin(angle0));\n      }\n    }\n\n    context.fillStyle = defaultFillStyle;\n    context.fill();\n    if (this.stroke_) {\n      context.strokeStyle = renderOptions.strokeStyle;\n      context.lineWidth = renderOptions.strokeWidth;\n      if (renderOptions.lineDash) {\n        context.setLineDash(renderOptions.lineDash);\n        context.lineDashOffset = renderOptions.lineDashOffset;\n      }\n      context.stroke();\n    }\n    context.closePath();\n  }\n\n}\n\n\nexport default RegularShape;\n","/**\n * @module ol/render/canvas/Builder\n */\nimport {equals, reverseSubArray} from '../../array.js';\nimport {asColorLike} from '../../colorlike.js';\nimport {buffer, clone, coordinateRelationship} from '../../extent.js';\nimport Relationship from '../../extent/Relationship.js';\nimport GeometryType from '../../geom/GeometryType.js';\nimport {inflateCoordinates, inflateCoordinatesArray, inflateMultiCoordinatesArray} from '../../geom/flat/inflate.js';\nimport VectorContext from '../VectorContext.js';\nimport {defaultFillStyle, defaultStrokeStyle,\n  defaultMiterLimit, defaultLineWidth, defaultLineJoin, defaultLineDashOffset,\n  defaultLineDash, defaultLineCap} from '../canvas.js';\nimport CanvasInstruction from './Instruction.js';\n\n\n/**\n * @typedef {Object} SerializableInstructions\n * @property {Array<*>} instructions The rendering instructions.\n * @property {Array<*>} hitDetectionInstructions The rendering hit detection instructions.\n * @property {Array<number>} coordinates The array of all coordinates.\n * @property {!Object<string, import(\"../canvas.js\").TextState>} [textStates] The text states (decluttering).\n * @property {!Object<string, import(\"../canvas.js\").FillState>} [fillStates] The fill states (decluttering).\n * @property {!Object<string, import(\"../canvas.js\").StrokeState>} [strokeStates] The stroke states (decluttering).\n */\n\n\nclass CanvasBuilder extends VectorContext {\n  /**\n   * @param {number} tolerance Tolerance.\n   * @param {import(\"../../extent.js\").Extent} maxExtent Maximum extent.\n   * @param {number} resolution Resolution.\n   * @param {number} pixelRatio Pixel ratio.\n   */\n  constructor(tolerance, maxExtent, resolution, pixelRatio) {\n    super();\n\n    /**\n     * @protected\n     * @type {number}\n     */\n    this.tolerance = tolerance;\n\n    /**\n     * @protected\n     * @const\n     * @type {import(\"../../extent.js\").Extent}\n     */\n    this.maxExtent = maxExtent;\n\n    /**\n     * @protected\n     * @type {number}\n     */\n    this.pixelRatio = pixelRatio;\n\n    /**\n     * @protected\n     * @type {number}\n     */\n    this.maxLineWidth = 0;\n\n    /**\n     * @protected\n     * @const\n     * @type {number}\n     */\n    this.resolution = resolution;\n\n    /**\n     * @private\n     * @type {Array<*>}\n     */\n    this.beginGeometryInstruction1_ = null;\n\n    /**\n     * @private\n     * @type {Array<*>}\n     */\n    this.beginGeometryInstruction2_ = null;\n\n    /**\n     * @private\n     * @type {import(\"../../extent.js\").Extent}\n     */\n    this.bufferedMaxExtent_ = null;\n\n    /**\n     * @protected\n     * @type {Array<*>}\n     */\n    this.instructions = [];\n\n    /**\n     * @protected\n     * @type {Array<number>}\n     */\n    this.coordinates = [];\n\n    /**\n     * @private\n     * @type {import(\"../../coordinate.js\").Coordinate}\n     */\n    this.tmpCoordinate_ = [];\n\n    /**\n     * @protected\n     * @type {Array<*>}\n     */\n    this.hitDetectionInstructions = [];\n\n    /**\n     * @protected\n     * @type {import(\"../canvas.js\").FillStrokeState}\n     */\n    this.state = /** @type {import(\"../canvas.js\").FillStrokeState} */ ({});\n\n  }\n\n  /**\n   * @protected\n   * @param {Array<number>} dashArray Dash array.\n   * @return {Array<number>} Dash array with pixel ratio applied\n   */\n  applyPixelRatio(dashArray) {\n    const pixelRatio = this.pixelRatio;\n    return pixelRatio == 1 ? dashArray : dashArray.map(function(dash) {\n      return dash * pixelRatio;\n    });\n  }\n\n  /**\n   * @param {Array<number>} flatCoordinates Flat coordinates.\n   * @param {number} offset Offset.\n   * @param {number} end End.\n   * @param {number} stride Stride.\n   * @param {boolean} closed Last input coordinate equals first.\n   * @param {boolean} skipFirst Skip first coordinate.\n   * @protected\n   * @return {number} My end.\n   */\n  appendFlatCoordinates(flatCoordinates, offset, end, stride, closed, skipFirst) {\n\n    let myEnd = this.coordinates.length;\n    const extent = this.getBufferedMaxExtent();\n    if (skipFirst) {\n      offset += stride;\n    }\n    let lastXCoord = flatCoordinates[offset];\n    let lastYCoord = flatCoordinates[offset + 1];\n    const nextCoord = this.tmpCoordinate_;\n    let skipped = true;\n\n    let i, lastRel, nextRel;\n    for (i = offset + stride; i < end; i += stride) {\n      nextCoord[0] = flatCoordinates[i];\n      nextCoord[1] = flatCoordinates[i + 1];\n      nextRel = coordinateRelationship(extent, nextCoord);\n      if (nextRel !== lastRel) {\n        if (skipped) {\n          this.coordinates[myEnd++] = lastXCoord;\n          this.coordinates[myEnd++] = lastYCoord;\n        }\n        this.coordinates[myEnd++] = nextCoord[0];\n        this.coordinates[myEnd++] = nextCoord[1];\n        skipped = false;\n      } else if (nextRel === Relationship.INTERSECTING) {\n        this.coordinates[myEnd++] = nextCoord[0];\n        this.coordinates[myEnd++] = nextCoord[1];\n        skipped = false;\n      } else {\n        skipped = true;\n      }\n      lastXCoord = nextCoord[0];\n      lastYCoord = nextCoord[1];\n      lastRel = nextRel;\n    }\n\n    // Last coordinate equals first or only one point to append:\n    if ((closed && skipped) || i === offset + stride) {\n      this.coordinates[myEnd++] = lastXCoord;\n      this.coordinates[myEnd++] = lastYCoord;\n    }\n    return myEnd;\n  }\n\n  /**\n   * @param {Array<number>} flatCoordinates Flat coordinates.\n   * @param {number} offset Offset.\n   * @param {Array<number>} ends Ends.\n   * @param {number} stride Stride.\n   * @param {Array<number>} builderEnds Builder ends.\n   * @return {number} Offset.\n   */\n  drawCustomCoordinates_(flatCoordinates, offset, ends, stride, builderEnds) {\n    for (let i = 0, ii = ends.length; i < ii; ++i) {\n      const end = ends[i];\n      const builderEnd = this.appendFlatCoordinates(flatCoordinates, offset, end, stride, false, false);\n      builderEnds.push(builderEnd);\n      offset = end;\n    }\n    return offset;\n  }\n\n  /**\n   * @inheritDoc.\n   */\n  drawCustom(geometry, feature, renderer) {\n    this.beginGeometry(geometry, feature);\n    const type = geometry.getType();\n    const stride = geometry.getStride();\n    const builderBegin = this.coordinates.length;\n    let flatCoordinates, builderEnd, builderEnds, builderEndss;\n    let offset;\n    if (type == GeometryType.MULTI_POLYGON) {\n      geometry = /** @type {import(\"../../geom/MultiPolygon.js\").default} */ (geometry);\n      flatCoordinates = geometry.getOrientedFlatCoordinates();\n      builderEndss = [];\n      const endss = geometry.getEndss();\n      offset = 0;\n      for (let i = 0, ii = endss.length; i < ii; ++i) {\n        const myEnds = [];\n        offset = this.drawCustomCoordinates_(flatCoordinates, offset, endss[i], stride, myEnds);\n        builderEndss.push(myEnds);\n      }\n      this.instructions.push([CanvasInstruction.CUSTOM,\n        builderBegin, builderEndss, geometry, renderer, inflateMultiCoordinatesArray]);\n    } else if (type == GeometryType.POLYGON || type == GeometryType.MULTI_LINE_STRING) {\n      builderEnds = [];\n      flatCoordinates = (type == GeometryType.POLYGON) ?\n        /** @type {import(\"../../geom/Polygon.js\").default} */ (geometry).getOrientedFlatCoordinates() :\n        geometry.getFlatCoordinates();\n      offset = this.drawCustomCoordinates_(flatCoordinates, 0,\n        /** @type {import(\"../../geom/Polygon.js\").default|import(\"../../geom/MultiLineString.js\").default} */ (geometry).getEnds(),\n        stride, builderEnds);\n      this.instructions.push([CanvasInstruction.CUSTOM,\n        builderBegin, builderEnds, geometry, renderer, inflateCoordinatesArray]);\n    } else if (type == GeometryType.LINE_STRING || type == GeometryType.MULTI_POINT) {\n      flatCoordinates = geometry.getFlatCoordinates();\n      builderEnd = this.appendFlatCoordinates(\n        flatCoordinates, 0, flatCoordinates.length, stride, false, false);\n      this.instructions.push([CanvasInstruction.CUSTOM,\n        builderBegin, builderEnd, geometry, renderer, inflateCoordinates]);\n    } else if (type == GeometryType.POINT) {\n      flatCoordinates = geometry.getFlatCoordinates();\n      this.coordinates.push(flatCoordinates[0], flatCoordinates[1]);\n      builderEnd = this.coordinates.length;\n      this.instructions.push([CanvasInstruction.CUSTOM,\n        builderBegin, builderEnd, geometry, renderer]);\n    }\n    this.endGeometry(feature);\n  }\n\n  /**\n   * @protected\n   * @param {import(\"../../geom/Geometry\").default|import(\"../Feature.js\").default} geometry The geometry.\n   * @param {import(\"../../Feature.js\").FeatureLike} feature Feature.\n   */\n  beginGeometry(geometry, feature) {\n    const extent = geometry.getExtent();\n    this.beginGeometryInstruction1_ = [CanvasInstruction.BEGIN_GEOMETRY, feature, 0, extent];\n    this.instructions.push(this.beginGeometryInstruction1_);\n    this.beginGeometryInstruction2_ = [CanvasInstruction.BEGIN_GEOMETRY, feature, 0, extent];\n    this.hitDetectionInstructions.push(this.beginGeometryInstruction2_);\n  }\n\n  /**\n   * @return {SerializableInstructions} the serializable instructions.\n   */\n  finish() {\n    return {\n      instructions: this.instructions,\n      hitDetectionInstructions: this.hitDetectionInstructions,\n      coordinates: this.coordinates\n    };\n  }\n\n  /**\n   * Reverse the hit detection instructions.\n   */\n  reverseHitDetectionInstructions() {\n    const hitDetectionInstructions = this.hitDetectionInstructions;\n    // step 1 - reverse array\n    hitDetectionInstructions.reverse();\n    // step 2 - reverse instructions within geometry blocks\n    let i;\n    const n = hitDetectionInstructions.length;\n    let instruction;\n    let type;\n    let begin = -1;\n    for (i = 0; i < n; ++i) {\n      instruction = hitDetectionInstructions[i];\n      type = /** @type {CanvasInstruction} */ (instruction[0]);\n      if (type == CanvasInstruction.END_GEOMETRY) {\n        begin = i;\n      } else if (type == CanvasInstruction.BEGIN_GEOMETRY) {\n        instruction[2] = i;\n        reverseSubArray(this.hitDetectionInstructions, begin, i);\n        begin = -1;\n      }\n    }\n  }\n\n  /**\n   * @inheritDoc\n   */\n  setFillStrokeStyle(fillStyle, strokeStyle) {\n    const state = this.state;\n    if (fillStyle) {\n      const fillStyleColor = fillStyle.getColor();\n      state.fillStyle = asColorLike(fillStyleColor ?\n        fillStyleColor : defaultFillStyle);\n    } else {\n      state.fillStyle = undefined;\n    }\n    if (strokeStyle) {\n      const strokeStyleColor = strokeStyle.getColor();\n      state.strokeStyle = asColorLike(strokeStyleColor ?\n        strokeStyleColor : defaultStrokeStyle);\n      const strokeStyleLineCap = strokeStyle.getLineCap();\n      state.lineCap = strokeStyleLineCap !== undefined ?\n        strokeStyleLineCap : defaultLineCap;\n      const strokeStyleLineDash = strokeStyle.getLineDash();\n      state.lineDash = strokeStyleLineDash ?\n        strokeStyleLineDash.slice() : defaultLineDash;\n      const strokeStyleLineDashOffset = strokeStyle.getLineDashOffset();\n      state.lineDashOffset = strokeStyleLineDashOffset ?\n        strokeStyleLineDashOffset : defaultLineDashOffset;\n      const strokeStyleLineJoin = strokeStyle.getLineJoin();\n      state.lineJoin = strokeStyleLineJoin !== undefined ?\n        strokeStyleLineJoin : defaultLineJoin;\n      const strokeStyleWidth = strokeStyle.getWidth();\n      state.lineWidth = strokeStyleWidth !== undefined ?\n        strokeStyleWidth : defaultLineWidth;\n      const strokeStyleMiterLimit = strokeStyle.getMiterLimit();\n      state.miterLimit = strokeStyleMiterLimit !== undefined ?\n        strokeStyleMiterLimit : defaultMiterLimit;\n\n      if (state.lineWidth > this.maxLineWidth) {\n        this.maxLineWidth = state.lineWidth;\n        // invalidate the buffered max extent cache\n        this.bufferedMaxExtent_ = null;\n      }\n    } else {\n      state.strokeStyle = undefined;\n      state.lineCap = undefined;\n      state.lineDash = null;\n      state.lineDashOffset = undefined;\n      state.lineJoin = undefined;\n      state.lineWidth = undefined;\n      state.miterLimit = undefined;\n    }\n  }\n\n  /**\n   * @param {import(\"../canvas.js\").FillStrokeState} state State.\n   * @return {Array<*>} Fill instruction.\n   */\n  createFill(state) {\n    const fillStyle = state.fillStyle;\n    /** @type {Array<*>} */\n    const fillInstruction = [CanvasInstruction.SET_FILL_STYLE, fillStyle];\n    if (typeof fillStyle !== 'string') {\n      // Fill is a pattern or gradient - align it!\n      fillInstruction.push(true);\n    }\n    return fillInstruction;\n  }\n\n  /**\n   * @param {import(\"../canvas.js\").FillStrokeState} state State.\n   */\n  applyStroke(state) {\n    this.instructions.push(this.createStroke(state));\n  }\n\n  /**\n   * @param {import(\"../canvas.js\").FillStrokeState} state State.\n   * @return {Array<*>} Stroke instruction.\n   */\n  createStroke(state) {\n    return [\n      CanvasInstruction.SET_STROKE_STYLE,\n      state.strokeStyle, state.lineWidth * this.pixelRatio, state.lineCap,\n      state.lineJoin, state.miterLimit,\n      this.applyPixelRatio(state.lineDash), state.lineDashOffset * this.pixelRatio\n    ];\n  }\n\n  /**\n   * @param {import(\"../canvas.js\").FillStrokeState} state State.\n   * @param {function(this:CanvasBuilder, import(\"../canvas.js\").FillStrokeState):Array<*>} createFill Create fill.\n   */\n  updateFillStyle(state, createFill) {\n    const fillStyle = state.fillStyle;\n    if (typeof fillStyle !== 'string' || state.currentFillStyle != fillStyle) {\n      if (fillStyle !== undefined) {\n        this.instructions.push(createFill.call(this, state));\n      }\n      state.currentFillStyle = fillStyle;\n    }\n  }\n\n  /**\n   * @param {import(\"../canvas.js\").FillStrokeState} state State.\n   * @param {function(this:CanvasBuilder, import(\"../canvas.js\").FillStrokeState): void} applyStroke Apply stroke.\n   */\n  updateStrokeStyle(state, applyStroke) {\n    const strokeStyle = state.strokeStyle;\n    const lineCap = state.lineCap;\n    const lineDash = state.lineDash;\n    const lineDashOffset = state.lineDashOffset;\n    const lineJoin = state.lineJoin;\n    const lineWidth = state.lineWidth;\n    const miterLimit = state.miterLimit;\n    if (state.currentStrokeStyle != strokeStyle ||\n        state.currentLineCap != lineCap ||\n        (lineDash != state.currentLineDash && !equals(state.currentLineDash, lineDash)) ||\n        state.currentLineDashOffset != lineDashOffset ||\n        state.currentLineJoin != lineJoin ||\n        state.currentLineWidth != lineWidth ||\n        state.currentMiterLimit != miterLimit) {\n      if (strokeStyle !== undefined) {\n        applyStroke.call(this, state);\n      }\n      state.currentStrokeStyle = strokeStyle;\n      state.currentLineCap = lineCap;\n      state.currentLineDash = lineDash;\n      state.currentLineDashOffset = lineDashOffset;\n      state.currentLineJoin = lineJoin;\n      state.currentLineWidth = lineWidth;\n      state.currentMiterLimit = miterLimit;\n    }\n  }\n\n  /**\n   * @param {import(\"../../Feature.js\").FeatureLike} feature Feature.\n   */\n  endGeometry(feature) {\n    this.beginGeometryInstruction1_[2] = this.instructions.length;\n    this.beginGeometryInstruction1_ = null;\n    this.beginGeometryInstruction2_[2] = this.hitDetectionInstructions.length;\n    this.beginGeometryInstruction2_ = null;\n    const endGeometryInstruction = [CanvasInstruction.END_GEOMETRY, feature];\n    this.instructions.push(endGeometryInstruction);\n    this.hitDetectionInstructions.push(endGeometryInstruction);\n  }\n\n  /**\n   * Get the buffered rendering extent.  Rendering will be clipped to the extent\n   * provided to the constructor.  To account for symbolizers that may intersect\n   * this extent, we calculate a buffered extent (e.g. based on stroke width).\n   * @return {import(\"../../extent.js\").Extent} The buffered rendering extent.\n   * @protected\n   */\n  getBufferedMaxExtent() {\n    if (!this.bufferedMaxExtent_) {\n      this.bufferedMaxExtent_ = clone(this.maxExtent);\n      if (this.maxLineWidth > 0) {\n        const width = this.resolution * (this.maxLineWidth + 1) / 2;\n        buffer(this.bufferedMaxExtent_, width, this.bufferedMaxExtent_);\n      }\n    }\n    return this.bufferedMaxExtent_;\n  }\n}\n\n\nexport default CanvasBuilder;\n","/**\n * @module ol/format/MVT\n */\n//FIXME Implement projection handling\n\nimport {assert} from '../asserts.js';\nimport PBF from 'pbf';\nimport FeatureFormat, {transformGeometryWithOptions} from './Feature.js';\nimport FormatType from './FormatType.js';\nimport GeometryLayout from '../geom/GeometryLayout.js';\nimport GeometryType from '../geom/GeometryType.js';\nimport LineString from '../geom/LineString.js';\nimport MultiLineString from '../geom/MultiLineString.js';\nimport MultiPoint from '../geom/MultiPoint.js';\nimport MultiPolygon from '../geom/MultiPolygon.js';\nimport Point from '../geom/Point.js';\nimport Polygon from '../geom/Polygon.js';\nimport {linearRingIsClockwise} from '../geom/flat/orient.js';\nimport Projection from '../proj/Projection.js';\nimport Units from '../proj/Units.js';\nimport RenderFeature from '../render/Feature.js';\nimport {get} from '../proj.js';\n\n\n/**\n * @typedef {Object} Options\n * @property {import(\"../Feature.js\").FeatureClass} [featureClass] Class for features returned by\n * {@link module:ol/format/MVT#readFeatures}. Set to {@link module:ol/Feature~Feature} to get full editing and geometry\n * support at the cost of decreased rendering performance. The default is\n * {@link module:ol/render/Feature~RenderFeature}, which is optimized for rendering and hit detection.\n * @property {string} [geometryName='geometry'] Geometry name to use when creating features.\n * @property {string} [layerName='layer'] Name of the feature attribute that holds the layer name.\n * @property {Array<string>} [layers] Layers to read features from. If not provided, features will be read from all\n * @property {string} [idProperty] Optional property that will be assigned as the feature id and removed from the properties.\n * layers.\n */\n\n\n/**\n * @classdesc\n * Feature format for reading data in the Mapbox MVT format.\n *\n * @param {Options=} opt_options Options.\n * @api\n */\nclass MVT extends FeatureFormat {\n\n  /**\n   * @param {Options=} opt_options Options.\n   */\n  constructor(opt_options) {\n    super();\n\n    const options = opt_options ? opt_options : {};\n\n    /**\n     * @type {Projection}\n     */\n    this.dataProjection = new Projection({\n      code: '',\n      units: Units.TILE_PIXELS\n    });\n\n    /**\n     * @private\n     * @type {import(\"../Feature.js\").FeatureClass}\n     */\n    this.featureClass_ = options.featureClass ? options.featureClass : RenderFeature;\n\n    /**\n     * @private\n     * @type {string|undefined}\n     */\n    this.geometryName_ = options.geometryName;\n\n    /**\n     * @private\n     * @type {string}\n     */\n    this.layerName_ = options.layerName ? options.layerName : 'layer';\n\n    /**\n     * @private\n     * @type {Array<string>}\n     */\n    this.layers_ = options.layers ? options.layers : null;\n\n    /**\n     * @private\n     * @type {string}\n     */\n    this.idProperty_ = options.idProperty;\n\n  }\n\n  /**\n   * Read the raw geometry from the pbf offset stored in a raw feature's geometry\n   * property.\n   * @param {PBF} pbf PBF.\n   * @param {Object} feature Raw feature.\n   * @param {Array<number>} flatCoordinates Array to store flat coordinates in.\n   * @param {Array<number>} ends Array to store ends in.\n   * @private\n   */\n  readRawGeometry_(pbf, feature, flatCoordinates, ends) {\n    pbf.pos = feature.geometry;\n\n    const end = pbf.readVarint() + pbf.pos;\n    let cmd = 1;\n    let length = 0;\n    let x = 0;\n    let y = 0;\n    let coordsLen = 0;\n    let currentEnd = 0;\n\n    while (pbf.pos < end) {\n      if (!length) {\n        const cmdLen = pbf.readVarint();\n        cmd = cmdLen & 0x7;\n        length = cmdLen >> 3;\n      }\n\n      length--;\n\n      if (cmd === 1 || cmd === 2) {\n        x += pbf.readSVarint();\n        y += pbf.readSVarint();\n\n        if (cmd === 1) { // moveTo\n          if (coordsLen > currentEnd) {\n            ends.push(coordsLen);\n            currentEnd = coordsLen;\n          }\n        }\n\n        flatCoordinates.push(x, y);\n        coordsLen += 2;\n\n      } else if (cmd === 7) {\n\n        if (coordsLen > currentEnd) {\n          // close polygon\n          flatCoordinates.push(\n            flatCoordinates[currentEnd], flatCoordinates[currentEnd + 1]);\n          coordsLen += 2;\n        }\n\n      } else {\n        assert(false, 59); // Invalid command found in the PBF\n      }\n    }\n\n    if (coordsLen > currentEnd) {\n      ends.push(coordsLen);\n      currentEnd = coordsLen;\n    }\n\n  }\n\n  /**\n   * @private\n   * @param {PBF} pbf PBF\n   * @param {Object} rawFeature Raw Mapbox feature.\n   * @param {import(\"./Feature.js\").ReadOptions} options Read options.\n   * @return {import(\"../Feature.js\").FeatureLike} Feature.\n   */\n  createFeature_(pbf, rawFeature, options) {\n    const type = rawFeature.type;\n    if (type === 0) {\n      return null;\n    }\n\n    let feature;\n    const values = rawFeature.properties;\n\n    let id;\n    if (!this.idProperty_) {\n      id = rawFeature.id;\n    } else {\n      id = values[this.idProperty_];\n      delete values[this.idProperty_];\n    }\n\n    values[this.layerName_] = rawFeature.layer.name;\n\n    const flatCoordinates = [];\n    const ends = [];\n    this.readRawGeometry_(pbf, rawFeature, flatCoordinates, ends);\n\n    const geometryType = getGeometryType(type, ends.length);\n\n    if (this.featureClass_ === RenderFeature) {\n      feature = new this.featureClass_(geometryType, flatCoordinates, ends, values, id);\n      feature.transform(options.dataProjection, options.featureProjection);\n    } else {\n      let geom;\n      if (geometryType == GeometryType.POLYGON) {\n        const endss = [];\n        let offset = 0;\n        let prevEndIndex = 0;\n        for (let i = 0, ii = ends.length; i < ii; ++i) {\n          const end = ends[i];\n          if (!linearRingIsClockwise(flatCoordinates, offset, end, 2)) {\n            endss.push(ends.slice(prevEndIndex, i));\n            prevEndIndex = i;\n          }\n          offset = end;\n        }\n        if (endss.length > 1) {\n          geom = new MultiPolygon(flatCoordinates, GeometryLayout.XY, endss);\n        } else {\n          geom = new Polygon(flatCoordinates, GeometryLayout.XY, ends);\n        }\n      } else {\n        geom = geometryType === GeometryType.POINT ? new Point(flatCoordinates, GeometryLayout.XY) :\n          geometryType === GeometryType.LINE_STRING ? new LineString(flatCoordinates, GeometryLayout.XY) :\n            geometryType === GeometryType.POLYGON ? new Polygon(flatCoordinates, GeometryLayout.XY, ends) :\n              geometryType === GeometryType.MULTI_POINT ? new MultiPoint(flatCoordinates, GeometryLayout.XY) :\n                geometryType === GeometryType.MULTI_LINE_STRING ? new MultiLineString(flatCoordinates, GeometryLayout.XY, ends) :\n                  null;\n      }\n      const ctor = /** @type {typeof import(\"../Feature.js\").default} */ (this.featureClass_);\n      feature = new ctor();\n      if (this.geometryName_) {\n        feature.setGeometryName(this.geometryName_);\n      }\n      const geometry = transformGeometryWithOptions(geom, false, options);\n      feature.setGeometry(geometry);\n      feature.setId(id);\n      feature.setProperties(values, true);\n    }\n\n    return feature;\n  }\n\n  /**\n   * @inheritDoc\n   */\n  getType() {\n    return FormatType.ARRAY_BUFFER;\n  }\n\n  /**\n   * Read all features.\n   *\n   * @param {ArrayBuffer} source Source.\n   * @param {import(\"./Feature.js\").ReadOptions=} opt_options Read options.\n   * @return {Array<import(\"../Feature.js\").FeatureLike>} Features.\n   * @api\n   */\n  readFeatures(source, opt_options) {\n    const layers = this.layers_;\n    const options = /** @type {import(\"./Feature.js\").ReadOptions} */ (this.adaptOptions(opt_options));\n    const dataProjection = get(options.dataProjection);\n    dataProjection.setWorldExtent(options.extent);\n    options.dataProjection = dataProjection;\n\n    const pbf = new PBF(/** @type {ArrayBuffer} */ (source));\n    const pbfLayers = pbf.readFields(layersPBFReader, {});\n    const features = [];\n    for (const name in pbfLayers) {\n      if (layers && layers.indexOf(name) == -1) {\n        continue;\n      }\n      const pbfLayer = pbfLayers[name];\n\n      const extent = pbfLayer ? [0, 0, pbfLayer.extent, pbfLayer.extent] : null;\n      dataProjection.setExtent(extent);\n\n      for (let i = 0, ii = pbfLayer.length; i < ii; ++i) {\n        const rawFeature = readRawFeature(pbf, pbfLayer, i);\n        features.push(this.createFeature_(pbf, rawFeature, options));\n      }\n    }\n\n    return features;\n  }\n\n  /**\n   * @inheritDoc\n   * @api\n   */\n  readProjection(source) {\n    return this.dataProjection;\n  }\n\n  /**\n   * Sets the layers that features will be read from.\n   * @param {Array<string>} layers Layers.\n   * @api\n   */\n  setLayers(layers) {\n    this.layers_ = layers;\n  }\n\n}\n\n\n/**\n * Reader callback for parsing layers.\n * @param {number} tag The tag.\n * @param {Object} layers The layers object.\n * @param {PBF} pbf The PBF.\n */\nfunction layersPBFReader(tag, layers, pbf) {\n  if (tag === 3) {\n    const layer = {\n      keys: [],\n      values: [],\n      features: []\n    };\n    const end = pbf.readVarint() + pbf.pos;\n    pbf.readFields(layerPBFReader, layer, end);\n    layer.length = layer.features.length;\n    if (layer.length) {\n      layers[layer.name] = layer;\n    }\n  }\n}\n\n/**\n * Reader callback for parsing layer.\n * @param {number} tag The tag.\n * @param {Object} layer The layer object.\n * @param {PBF} pbf The PBF.\n */\nfunction layerPBFReader(tag, layer, pbf) {\n  if (tag === 15) {\n    layer.version = pbf.readVarint();\n  } else if (tag === 1) {\n    layer.name = pbf.readString();\n  } else if (tag === 5) {\n    layer.extent = pbf.readVarint();\n  } else if (tag === 2) {\n    layer.features.push(pbf.pos);\n  } else if (tag === 3) {\n    layer.keys.push(pbf.readString());\n  } else if (tag === 4) {\n    let value = null;\n    const end = pbf.readVarint() + pbf.pos;\n    while (pbf.pos < end) {\n      tag = pbf.readVarint() >> 3;\n      value = tag === 1 ? pbf.readString() :\n        tag === 2 ? pbf.readFloat() :\n          tag === 3 ? pbf.readDouble() :\n            tag === 4 ? pbf.readVarint64() :\n              tag === 5 ? pbf.readVarint() :\n                tag === 6 ? pbf.readSVarint() :\n                  tag === 7 ? pbf.readBoolean() : null;\n    }\n    layer.values.push(value);\n  }\n}\n\n/**\n * Reader callback for parsing feature.\n * @param {number} tag The tag.\n * @param {Object} feature The feature object.\n * @param {PBF} pbf The PBF.\n */\nfunction featurePBFReader(tag, feature, pbf) {\n  if (tag == 1) {\n    feature.id = pbf.readVarint();\n  } else if (tag == 2) {\n    const end = pbf.readVarint() + pbf.pos;\n    while (pbf.pos < end) {\n      const key = feature.layer.keys[pbf.readVarint()];\n      const value = feature.layer.values[pbf.readVarint()];\n      feature.properties[key] = value;\n    }\n  } else if (tag == 3) {\n    feature.type = pbf.readVarint();\n  } else if (tag == 4) {\n    feature.geometry = pbf.pos;\n  }\n}\n\n\n/**\n * Read a raw feature from the pbf offset stored at index `i` in the raw layer.\n * @param {PBF} pbf PBF.\n * @param {Object} layer Raw layer.\n * @param {number} i Index of the feature in the raw layer's `features` array.\n * @return {Object} Raw feature.\n */\nfunction readRawFeature(pbf, layer, i) {\n  pbf.pos = layer.features[i];\n  const end = pbf.readVarint() + pbf.pos;\n\n  const feature = {\n    layer: layer,\n    type: 0,\n    properties: {}\n  };\n  pbf.readFields(featurePBFReader, feature, end);\n  return feature;\n}\n\n\n/**\n * @param {number} type The raw feature's geometry type\n * @param {number} numEnds Number of ends of the flat coordinates of the\n * geometry.\n * @return {GeometryType} The geometry type.\n */\nfunction getGeometryType(type, numEnds) {\n  /** @type {GeometryType} */\n  let geometryType;\n  if (type === 1) {\n    geometryType = numEnds === 1 ?\n      GeometryType.POINT : GeometryType.MULTI_POINT;\n  } else if (type === 2) {\n    geometryType = numEnds === 1 ?\n      GeometryType.LINE_STRING :\n      GeometryType.MULTI_LINE_STRING;\n  } else if (type === 3) {\n    geometryType = GeometryType.POLYGON;\n    // MultiPolygon not relevant for rendering - winding order determines\n    // outer rings of polygons.\n  }\n  return geometryType;\n}\n\nexport default MVT;\n","/**\n * @module ol/MapEventType\n */\n\n/**\n * @enum {string}\n */\nexport default {\n\n  /**\n   * Triggered after a map frame is rendered.\n   * @event module:ol/MapEvent~MapEvent#postrender\n   * @api\n   */\n  POSTRENDER: 'postrender',\n\n  /**\n   * Triggered when the map starts moving.\n   * @event module:ol/MapEvent~MapEvent#movestart\n   * @api\n   */\n  MOVESTART: 'movestart',\n\n  /**\n   * Triggered after the map is moved.\n   * @event module:ol/MapEvent~MapEvent#moveend\n   * @api\n   */\n  MOVEEND: 'moveend'\n\n};\n","/**\n * @module ol/geom/LinearRing\n */\nimport {closestSquaredDistanceXY} from '../extent.js';\nimport GeometryLayout from './GeometryLayout.js';\nimport GeometryType from './GeometryType.js';\nimport SimpleGeometry from './SimpleGeometry.js';\nimport {linearRing as linearRingArea} from './flat/area.js';\nimport {assignClosestPoint, maxSquaredDelta} from './flat/closest.js';\nimport {deflateCoordinates} from './flat/deflate.js';\nimport {inflateCoordinates} from './flat/inflate.js';\nimport {douglasPeucker} from './flat/simplify.js';\n\n/**\n * @classdesc\n * Linear ring geometry. Only used as part of polygon; cannot be rendered\n * on its own.\n *\n * @api\n */\nclass LinearRing extends SimpleGeometry {\n\n  /**\n   * @param {Array<import(\"../coordinate.js\").Coordinate>|Array<number>} coordinates Coordinates.\n   *     For internal use, flat coordinates in combination with `opt_layout` are also accepted.\n   * @param {GeometryLayout=} opt_layout Layout.\n   */\n  constructor(coordinates, opt_layout) {\n\n    super();\n\n    /**\n     * @private\n     * @type {number}\n     */\n    this.maxDelta_ = -1;\n\n    /**\n     * @private\n     * @type {number}\n     */\n    this.maxDeltaRevision_ = -1;\n\n    if (opt_layout !== undefined && !Array.isArray(coordinates[0])) {\n      this.setFlatCoordinates(opt_layout, /** @type {Array<number>} */ (coordinates));\n    } else {\n      this.setCoordinates(/** @type {Array<import(\"../coordinate.js\").Coordinate>} */ (coordinates), opt_layout);\n    }\n\n  }\n\n  /**\n   * Make a complete copy of the geometry.\n   * @return {!LinearRing} Clone.\n   * @override\n   * @api\n   */\n  clone() {\n    return new LinearRing(this.flatCoordinates.slice(), this.layout);\n  }\n\n  /**\n   * @inheritDoc\n   */\n  closestPointXY(x, y, closestPoint, minSquaredDistance) {\n    if (minSquaredDistance < closestSquaredDistanceXY(this.getExtent(), x, y)) {\n      return minSquaredDistance;\n    }\n    if (this.maxDeltaRevision_ != this.getRevision()) {\n      this.maxDelta_ = Math.sqrt(maxSquaredDelta(\n        this.flatCoordinates, 0, this.flatCoordinates.length, this.stride, 0));\n      this.maxDeltaRevision_ = this.getRevision();\n    }\n    return assignClosestPoint(\n      this.flatCoordinates, 0, this.flatCoordinates.length, this.stride,\n      this.maxDelta_, true, x, y, closestPoint, minSquaredDistance);\n  }\n\n  /**\n   * Return the area of the linear ring on projected plane.\n   * @return {number} Area (on projected plane).\n   * @api\n   */\n  getArea() {\n    return linearRingArea(this.flatCoordinates, 0, this.flatCoordinates.length, this.stride);\n  }\n\n  /**\n   * Return the coordinates of the linear ring.\n   * @return {Array<import(\"../coordinate.js\").Coordinate>} Coordinates.\n   * @override\n   * @api\n   */\n  getCoordinates() {\n    return inflateCoordinates(\n      this.flatCoordinates, 0, this.flatCoordinates.length, this.stride);\n  }\n\n  /**\n   * @inheritDoc\n   */\n  getSimplifiedGeometryInternal(squaredTolerance) {\n    const simplifiedFlatCoordinates = [];\n    simplifiedFlatCoordinates.length = douglasPeucker(\n      this.flatCoordinates, 0, this.flatCoordinates.length, this.stride,\n      squaredTolerance, simplifiedFlatCoordinates, 0);\n    return new LinearRing(simplifiedFlatCoordinates, GeometryLayout.XY);\n  }\n\n  /**\n   * @inheritDoc\n   * @api\n   */\n  getType() {\n    return GeometryType.LINEAR_RING;\n  }\n\n  /**\n   * @inheritDoc\n   */\n  intersectsExtent(extent) {\n    return false;\n  }\n\n  /**\n   * Set the coordinates of the linear ring.\n   * @param {!Array<import(\"../coordinate.js\").Coordinate>} coordinates Coordinates.\n   * @param {GeometryLayout=} opt_layout Layout.\n   * @override\n   * @api\n   */\n  setCoordinates(coordinates, opt_layout) {\n    this.setLayout(opt_layout, coordinates, 1);\n    if (!this.flatCoordinates) {\n      this.flatCoordinates = [];\n    }\n    this.flatCoordinates.length = deflateCoordinates(\n      this.flatCoordinates, 0, coordinates, this.stride);\n    this.changed();\n  }\n}\n\n\nexport default LinearRing;\n","/**\n * @module ol/reproj\n */\nimport {createCanvasContext2D} from './dom.js';\nimport {containsCoordinate, createEmpty, extend, getHeight, getTopLeft, getWidth} from './extent.js';\nimport {solveLinearSystem} from './math.js';\nimport {getPointResolution, transform} from './proj.js';\n\n\n/**\n * Calculates ideal resolution to use from the source in order to achieve\n * pixel mapping as close as possible to 1:1 during reprojection.\n * The resolution is calculated regardless of what resolutions\n * are actually available in the dataset (TileGrid, Image, ...).\n *\n * @param {import(\"./proj/Projection.js\").default} sourceProj Source projection.\n * @param {import(\"./proj/Projection.js\").default} targetProj Target projection.\n * @param {import(\"./coordinate.js\").Coordinate} targetCenter Target center.\n * @param {number} targetResolution Target resolution.\n * @return {number} The best resolution to use. Can be +-Infinity, NaN or 0.\n */\nexport function calculateSourceResolution(sourceProj, targetProj,\n  targetCenter, targetResolution) {\n\n  const sourceCenter = transform(targetCenter, targetProj, sourceProj);\n\n  // calculate the ideal resolution of the source data\n  let sourceResolution = getPointResolution(targetProj, targetResolution, targetCenter);\n\n  const targetMetersPerUnit = targetProj.getMetersPerUnit();\n  if (targetMetersPerUnit !== undefined) {\n    sourceResolution *= targetMetersPerUnit;\n  }\n  const sourceMetersPerUnit = sourceProj.getMetersPerUnit();\n  if (sourceMetersPerUnit !== undefined) {\n    sourceResolution /= sourceMetersPerUnit;\n  }\n\n  // Based on the projection properties, the point resolution at the specified\n  // coordinates may be slightly different. We need to reverse-compensate this\n  // in order to achieve optimal results.\n\n  const sourceExtent = sourceProj.getExtent();\n  if (!sourceExtent || containsCoordinate(sourceExtent, sourceCenter)) {\n    const compensationFactor = getPointResolution(sourceProj, sourceResolution, sourceCenter) /\n        sourceResolution;\n    if (isFinite(compensationFactor) && compensationFactor > 0) {\n      sourceResolution /= compensationFactor;\n    }\n  }\n\n  return sourceResolution;\n}\n\n\n/**\n * Enlarge the clipping triangle point by 1 pixel to ensure the edges overlap\n * in order to mask gaps caused by antialiasing.\n *\n * @param {number} centroidX Centroid of the triangle (x coordinate in pixels).\n * @param {number} centroidY Centroid of the triangle (y coordinate in pixels).\n * @param {number} x X coordinate of the point (in pixels).\n * @param {number} y Y coordinate of the point (in pixels).\n * @return {import(\"./coordinate.js\").Coordinate} New point 1 px farther from the centroid.\n */\nfunction enlargeClipPoint(centroidX, centroidY, x, y) {\n  const dX = x - centroidX;\n  const dY = y - centroidY;\n  const distance = Math.sqrt(dX * dX + dY * dY);\n  return [Math.round(x + dX / distance), Math.round(y + dY / distance)];\n}\n\n\n/**\n * Renders the source data into new canvas based on the triangulation.\n *\n * @param {number} width Width of the canvas.\n * @param {number} height Height of the canvas.\n * @param {number} pixelRatio Pixel ratio.\n * @param {number} sourceResolution Source resolution.\n * @param {import(\"./extent.js\").Extent} sourceExtent Extent of the data source.\n * @param {number} targetResolution Target resolution.\n * @param {import(\"./extent.js\").Extent} targetExtent Target extent.\n * @param {import(\"./reproj/Triangulation.js\").default} triangulation\n * Calculated triangulation.\n * @param {Array<{extent: import(\"./extent.js\").Extent,\n *                 image: (HTMLCanvasElement|HTMLImageElement|HTMLVideoElement)}>} sources\n * Array of sources.\n * @param {number} gutter Gutter of the sources.\n * @param {boolean=} opt_renderEdges Render reprojection edges.\n * @return {HTMLCanvasElement} Canvas with reprojected data.\n */\nexport function render(width, height, pixelRatio,\n  sourceResolution, sourceExtent, targetResolution, targetExtent,\n  triangulation, sources, gutter, opt_renderEdges) {\n\n  const context = createCanvasContext2D(Math.round(pixelRatio * width),\n    Math.round(pixelRatio * height));\n\n  if (sources.length === 0) {\n    return context.canvas;\n  }\n\n  context.scale(pixelRatio, pixelRatio);\n\n  const sourceDataExtent = createEmpty();\n  sources.forEach(function(src, i, arr) {\n    extend(sourceDataExtent, src.extent);\n  });\n\n  const canvasWidthInUnits = getWidth(sourceDataExtent);\n  const canvasHeightInUnits = getHeight(sourceDataExtent);\n  const stitchContext = createCanvasContext2D(\n    Math.round(pixelRatio * canvasWidthInUnits / sourceResolution),\n    Math.round(pixelRatio * canvasHeightInUnits / sourceResolution));\n\n  const stitchScale = pixelRatio / sourceResolution;\n\n  sources.forEach(function(src, i, arr) {\n    const xPos = src.extent[0] - sourceDataExtent[0];\n    const yPos = -(src.extent[3] - sourceDataExtent[3]);\n    const srcWidth = getWidth(src.extent);\n    const srcHeight = getHeight(src.extent);\n\n    stitchContext.drawImage(\n      src.image,\n      gutter, gutter,\n      src.image.width - 2 * gutter, src.image.height - 2 * gutter,\n      xPos * stitchScale, yPos * stitchScale,\n      srcWidth * stitchScale, srcHeight * stitchScale);\n  });\n\n  const targetTopLeft = getTopLeft(targetExtent);\n\n  triangulation.getTriangles().forEach(function(triangle, i, arr) {\n    /* Calculate affine transform (src -> dst)\n     * Resulting matrix can be used to transform coordinate\n     * from `sourceProjection` to destination pixels.\n     *\n     * To optimize number of context calls and increase numerical stability,\n     * we also do the following operations:\n     * trans(-topLeftExtentCorner), scale(1 / targetResolution), scale(1, -1)\n     * here before solving the linear system so [ui, vi] are pixel coordinates.\n     *\n     * Src points: xi, yi\n     * Dst points: ui, vi\n     * Affine coefficients: aij\n     *\n     * | x0 y0 1  0  0 0 |   |a00|   |u0|\n     * | x1 y1 1  0  0 0 |   |a01|   |u1|\n     * | x2 y2 1  0  0 0 | x |a02| = |u2|\n     * |  0  0 0 x0 y0 1 |   |a10|   |v0|\n     * |  0  0 0 x1 y1 1 |   |a11|   |v1|\n     * |  0  0 0 x2 y2 1 |   |a12|   |v2|\n     */\n    const source = triangle.source;\n    const target = triangle.target;\n    let x0 = source[0][0], y0 = source[0][1];\n    let x1 = source[1][0], y1 = source[1][1];\n    let x2 = source[2][0], y2 = source[2][1];\n    const u0 = (target[0][0] - targetTopLeft[0]) / targetResolution;\n    const v0 = -(target[0][1] - targetTopLeft[1]) / targetResolution;\n    const u1 = (target[1][0] - targetTopLeft[0]) / targetResolution;\n    const v1 = -(target[1][1] - targetTopLeft[1]) / targetResolution;\n    const u2 = (target[2][0] - targetTopLeft[0]) / targetResolution;\n    const v2 = -(target[2][1] - targetTopLeft[1]) / targetResolution;\n\n    // Shift all the source points to improve numerical stability\n    // of all the subsequent calculations. The [x0, y0] is used here.\n    // This is also used to simplify the linear system.\n    const sourceNumericalShiftX = x0;\n    const sourceNumericalShiftY = y0;\n    x0 = 0;\n    y0 = 0;\n    x1 -= sourceNumericalShiftX;\n    y1 -= sourceNumericalShiftY;\n    x2 -= sourceNumericalShiftX;\n    y2 -= sourceNumericalShiftY;\n\n    const augmentedMatrix = [\n      [x1, y1, 0, 0, u1 - u0],\n      [x2, y2, 0, 0, u2 - u0],\n      [0, 0, x1, y1, v1 - v0],\n      [0, 0, x2, y2, v2 - v0]\n    ];\n    const affineCoefs = solveLinearSystem(augmentedMatrix);\n    if (!affineCoefs) {\n      return;\n    }\n\n    context.save();\n    context.beginPath();\n    const centroidX = (u0 + u1 + u2) / 3;\n    const centroidY = (v0 + v1 + v2) / 3;\n    const p0 = enlargeClipPoint(centroidX, centroidY, u0, v0);\n    const p1 = enlargeClipPoint(centroidX, centroidY, u1, v1);\n    const p2 = enlargeClipPoint(centroidX, centroidY, u2, v2);\n\n    context.moveTo(p1[0], p1[1]);\n    context.lineTo(p0[0], p0[1]);\n    context.lineTo(p2[0], p2[1]);\n    context.clip();\n\n    context.transform(\n      affineCoefs[0], affineCoefs[2], affineCoefs[1], affineCoefs[3], u0, v0);\n\n    context.translate(sourceDataExtent[0] - sourceNumericalShiftX,\n      sourceDataExtent[3] - sourceNumericalShiftY);\n\n    context.scale(sourceResolution / pixelRatio,\n      -sourceResolution / pixelRatio);\n\n    context.drawImage(stitchContext.canvas, 0, 0);\n    context.restore();\n  });\n\n  if (opt_renderEdges) {\n    context.save();\n\n    context.strokeStyle = 'black';\n    context.lineWidth = 1;\n\n    triangulation.getTriangles().forEach(function(triangle, i, arr) {\n      const target = triangle.target;\n      const u0 = (target[0][0] - targetTopLeft[0]) / targetResolution;\n      const v0 = -(target[0][1] - targetTopLeft[1]) / targetResolution;\n      const u1 = (target[1][0] - targetTopLeft[0]) / targetResolution;\n      const v1 = -(target[1][1] - targetTopLeft[1]) / targetResolution;\n      const u2 = (target[2][0] - targetTopLeft[0]) / targetResolution;\n      const v2 = -(target[2][1] - targetTopLeft[1]) / targetResolution;\n\n      context.beginPath();\n      context.moveTo(u1, v1);\n      context.lineTo(u0, v0);\n      context.lineTo(u2, v2);\n      context.closePath();\n      context.stroke();\n    });\n\n    context.restore();\n  }\n  return context.canvas;\n}\n","/**\n * @module ol/rotationconstraint\n */\nimport {toRadians} from './math.js';\n\n\n/**\n * @typedef {function((number|undefined), boolean=): (number|undefined)} Type\n */\n\n\n/**\n * @param {number|undefined} rotation Rotation.\n * @return {number|undefined} Rotation.\n */\nexport function disable(rotation) {\n  if (rotation !== undefined) {\n    return 0;\n  } else {\n    return undefined;\n  }\n}\n\n\n/**\n * @param {number|undefined} rotation Rotation.\n * @return {number|undefined} Rotation.\n */\nexport function none(rotation) {\n  if (rotation !== undefined) {\n    return rotation;\n  } else {\n    return undefined;\n  }\n}\n\n\n/**\n * @param {number} n N.\n * @return {Type} Rotation constraint.\n */\nexport function createSnapToN(n) {\n  const theta = 2 * Math.PI / n;\n  return (\n    /**\n     * @param {number|undefined} rotation Rotation.\n     * @param {boolean=} opt_isMoving True if an interaction or animation is in progress.\n     * @return {number|undefined} Rotation.\n     */\n    function(rotation, opt_isMoving) {\n      if (opt_isMoving) {\n        return rotation;\n      }\n\n      if (rotation !== undefined) {\n        rotation = Math.floor(rotation / theta + 0.5) * theta;\n        return rotation;\n      } else {\n        return undefined;\n      }\n    });\n}\n\n\n/**\n * @param {number=} opt_tolerance Tolerance.\n * @return {Type} Rotation constraint.\n */\nexport function createSnapToZero(opt_tolerance) {\n  const tolerance = opt_tolerance || toRadians(5);\n  return (\n    /**\n     * @param {number|undefined} rotation Rotation.\n     * @param {boolean} opt_isMoving True if an interaction or animation is in progress.\n     * @return {number|undefined} Rotation.\n     */\n    function(rotation, opt_isMoving) {\n      if (opt_isMoving) {\n        return rotation;\n      }\n\n      if (rotation !== undefined) {\n        if (Math.abs(rotation) <= tolerance) {\n          return 0;\n        } else {\n          return rotation;\n        }\n      } else {\n        return undefined;\n      }\n    });\n}\n","/**\n * @module ol/MapBrowserPointerEvent\n */\nimport MapBrowserEvent from './MapBrowserEvent.js';\n\nclass MapBrowserPointerEvent extends MapBrowserEvent {\n\n  /**\n   * @param {string} type Event type.\n   * @param {import(\"./PluggableMap.js\").default} map Map.\n   * @param {PointerEvent} pointerEvent Pointer event.\n   * @param {boolean=} opt_dragging Is the map currently being dragged?\n   * @param {?import(\"./PluggableMap.js\").FrameState=} opt_frameState Frame state.\n   */\n  constructor(type, map, pointerEvent, opt_dragging, opt_frameState) {\n\n    super(type, map, pointerEvent, opt_dragging, opt_frameState);\n\n    /**\n     * @const\n     * @type {PointerEvent}\n     */\n    this.pointerEvent = pointerEvent;\n\n  }\n\n}\n\nexport default MapBrowserPointerEvent;\n","/**\n * @module ol/layer/TileProperty\n */\n\n/**\n * @enum {string}\n */\nexport default {\n  PRELOAD: 'preload',\n  USE_INTERIM_TILES_ON_ERROR: 'useInterimTilesOnError'\n};\n","/**\n * @module ol/renderer/vector\n */\nimport {getUid} from '../util.js';\nimport ImageState from '../ImageState.js';\nimport GeometryType from '../geom/GeometryType.js';\nimport BuilderType from '../render/canvas/BuilderType.js';\nimport {getUserProjection} from '../proj.js';\n\n\n/**\n * Tolerance for geometry simplification in device pixels.\n * @type {number}\n */\nconst SIMPLIFY_TOLERANCE = 0.5;\n\n\n/**\n * @const\n * @type {Object<import(\"../geom/GeometryType.js\").default,\n *                function(import(\"../render/canvas/BuilderGroup.js\").default, import(\"../geom/Geometry.js\").default,\n *                         import(\"../style/Style.js\").default, Object): void>}\n */\nconst GEOMETRY_RENDERERS = {\n  'Point': renderPointGeometry,\n  'LineString': renderLineStringGeometry,\n  'Polygon': renderPolygonGeometry,\n  'MultiPoint': renderMultiPointGeometry,\n  'MultiLineString': renderMultiLineStringGeometry,\n  'MultiPolygon': renderMultiPolygonGeometry,\n  'GeometryCollection': renderGeometryCollectionGeometry,\n  'Circle': renderCircleGeometry\n};\n\n\n/**\n * @param {import(\"../Feature.js\").FeatureLike} feature1 Feature 1.\n * @param {import(\"../Feature.js\").FeatureLike} feature2 Feature 2.\n * @return {number} Order.\n */\nexport function defaultOrder(feature1, feature2) {\n  return parseInt(getUid(feature1), 10) - parseInt(getUid(feature2), 10);\n}\n\n\n/**\n * @param {number} resolution Resolution.\n * @param {number} pixelRatio Pixel ratio.\n * @return {number} Squared pixel tolerance.\n */\nexport function getSquaredTolerance(resolution, pixelRatio) {\n  const tolerance = getTolerance(resolution, pixelRatio);\n  return tolerance * tolerance;\n}\n\n\n/**\n * @param {number} resolution Resolution.\n * @param {number} pixelRatio Pixel ratio.\n * @return {number} Pixel tolerance.\n */\nexport function getTolerance(resolution, pixelRatio) {\n  return SIMPLIFY_TOLERANCE * resolution / pixelRatio;\n}\n\n\n/**\n * @param {import(\"../render/canvas/BuilderGroup.js\").default} builderGroup Builder group.\n * @param {import(\"../geom/Circle.js\").default} geometry Geometry.\n * @param {import(\"../style/Style.js\").default} style Style.\n * @param {import(\"../Feature.js\").default} feature Feature.\n */\nfunction renderCircleGeometry(builderGroup, geometry, style, feature) {\n  const fillStyle = style.getFill();\n  const strokeStyle = style.getStroke();\n  if (fillStyle || strokeStyle) {\n    const circleReplay = builderGroup.getBuilder(style.getZIndex(), BuilderType.CIRCLE);\n    circleReplay.setFillStrokeStyle(fillStyle, strokeStyle);\n    circleReplay.drawCircle(geometry, feature);\n  }\n  const textStyle = style.getText();\n  if (textStyle) {\n    const textReplay = builderGroup.getBuilder(style.getZIndex(), BuilderType.TEXT);\n    textReplay.setTextStyle(textStyle, builderGroup.addDeclutter(false));\n    textReplay.drawText(geometry, feature);\n  }\n}\n\n\n/**\n * @param {import(\"../render/canvas/BuilderGroup.js\").default} replayGroup Replay group.\n * @param {import(\"../Feature.js\").FeatureLike} feature Feature.\n * @param {import(\"../style/Style.js\").default} style Style.\n * @param {number} squaredTolerance Squared tolerance.\n * @param {function(import(\"../events/Event.js\").default): void} listener Listener function.\n * @param {import(\"../proj/Projection.js\").default} [projection] The view projection.\n * @return {boolean} `true` if style is loading.\n * @template T\n */\nexport function renderFeature(replayGroup, feature, style, squaredTolerance, listener, projection) {\n  let loading = false;\n  const imageStyle = style.getImage();\n  if (imageStyle) {\n    let imageState = imageStyle.getImageState();\n    if (imageState == ImageState.LOADED || imageState == ImageState.ERROR) {\n      imageStyle.unlistenImageChange(listener);\n    } else {\n      if (imageState == ImageState.IDLE) {\n        imageStyle.load();\n      }\n      imageState = imageStyle.getImageState();\n      imageStyle.listenImageChange(listener);\n      loading = true;\n    }\n  }\n  renderFeatureInternal(replayGroup, feature, style, squaredTolerance, projection);\n\n  return loading;\n}\n\n\n/**\n * @param {import(\"../render/canvas/BuilderGroup.js\").default} replayGroup Replay group.\n * @param {import(\"../Feature.js\").FeatureLike} feature Feature.\n * @param {import(\"../style/Style.js\").default} style Style.\n * @param {number} squaredTolerance Squared tolerance.\n * @param {import(\"../proj/Projection.js\").default} [projection] The view projection.\n */\nfunction renderFeatureInternal(replayGroup, feature, style, squaredTolerance, projection) {\n  const geometry = style.getGeometryFunction()(feature);\n  if (!geometry) {\n    return;\n  }\n  const simplifiedGeometry = geometry.simplifyTransformed(squaredTolerance, getUserProjection(), projection);\n  const renderer = style.getRenderer();\n  if (renderer) {\n    renderGeometry(replayGroup, simplifiedGeometry, style, feature);\n  } else {\n    const geometryRenderer = GEOMETRY_RENDERERS[simplifiedGeometry.getType()];\n    geometryRenderer(replayGroup, simplifiedGeometry, style, feature);\n  }\n}\n\n\n/**\n * @param {import(\"../render/canvas/BuilderGroup.js\").default} replayGroup Replay group.\n * @param {import(\"../geom/Geometry.js\").default|import(\"../render/Feature.js\").default} geometry Geometry.\n * @param {import(\"../style/Style.js\").default} style Style.\n * @param {import(\"../Feature.js\").FeatureLike} feature Feature.\n */\nfunction renderGeometry(replayGroup, geometry, style, feature) {\n  if (geometry.getType() == GeometryType.GEOMETRY_COLLECTION) {\n    const geometries = /** @type {import(\"../geom/GeometryCollection.js\").default} */ (geometry).getGeometries();\n    for (let i = 0, ii = geometries.length; i < ii; ++i) {\n      renderGeometry(replayGroup, geometries[i], style, feature);\n    }\n    return;\n  }\n  const replay = replayGroup.getBuilder(style.getZIndex(), BuilderType.DEFAULT);\n  replay.drawCustom(/** @type {import(\"../geom/SimpleGeometry.js\").default} */ (geometry), feature, style.getRenderer());\n}\n\n\n/**\n * @param {import(\"../render/canvas/BuilderGroup.js\").default} replayGroup Replay group.\n * @param {import(\"../geom/GeometryCollection.js\").default} geometry Geometry.\n * @param {import(\"../style/Style.js\").default} style Style.\n * @param {import(\"../Feature.js\").default} feature Feature.\n */\nfunction renderGeometryCollectionGeometry(replayGroup, geometry, style, feature) {\n  const geometries = geometry.getGeometriesArray();\n  let i, ii;\n  for (i = 0, ii = geometries.length; i < ii; ++i) {\n    const geometryRenderer =\n        GEOMETRY_RENDERERS[geometries[i].getType()];\n    geometryRenderer(replayGroup, geometries[i], style, feature);\n  }\n}\n\n\n/**\n * @param {import(\"../render/canvas/BuilderGroup.js\").default} builderGroup Replay group.\n * @param {import(\"../geom/LineString.js\").default|import(\"../render/Feature.js\").default} geometry Geometry.\n * @param {import(\"../style/Style.js\").default} style Style.\n * @param {import(\"../Feature.js\").FeatureLike} feature Feature.\n */\nfunction renderLineStringGeometry(builderGroup, geometry, style, feature) {\n  const strokeStyle = style.getStroke();\n  if (strokeStyle) {\n    const lineStringReplay = builderGroup.getBuilder(style.getZIndex(), BuilderType.LINE_STRING);\n    lineStringReplay.setFillStrokeStyle(null, strokeStyle);\n    lineStringReplay.drawLineString(geometry, feature);\n  }\n  const textStyle = style.getText();\n  if (textStyle) {\n    const textReplay = builderGroup.getBuilder(style.getZIndex(), BuilderType.TEXT);\n    textReplay.setTextStyle(textStyle, builderGroup.addDeclutter(false));\n    textReplay.drawText(geometry, feature);\n  }\n}\n\n\n/**\n * @param {import(\"../render/canvas/BuilderGroup.js\").default} builderGroup Replay group.\n * @param {import(\"../geom/MultiLineString.js\").default|import(\"../render/Feature.js\").default} geometry Geometry.\n * @param {import(\"../style/Style.js\").default} style Style.\n * @param {import(\"../Feature.js\").FeatureLike} feature Feature.\n */\nfunction renderMultiLineStringGeometry(builderGroup, geometry, style, feature) {\n  const strokeStyle = style.getStroke();\n  if (strokeStyle) {\n    const lineStringReplay = builderGroup.getBuilder(style.getZIndex(), BuilderType.LINE_STRING);\n    lineStringReplay.setFillStrokeStyle(null, strokeStyle);\n    lineStringReplay.drawMultiLineString(geometry, feature);\n  }\n  const textStyle = style.getText();\n  if (textStyle) {\n    const textReplay = builderGroup.getBuilder(style.getZIndex(), BuilderType.TEXT);\n    textReplay.setTextStyle(textStyle, builderGroup.addDeclutter(false));\n    textReplay.drawText(geometry, feature);\n  }\n}\n\n\n/**\n * @param {import(\"../render/canvas/BuilderGroup.js\").default} builderGroup Replay group.\n * @param {import(\"../geom/MultiPolygon.js\").default} geometry Geometry.\n * @param {import(\"../style/Style.js\").default} style Style.\n * @param {import(\"../Feature.js\").default} feature Feature.\n */\nfunction renderMultiPolygonGeometry(builderGroup, geometry, style, feature) {\n  const fillStyle = style.getFill();\n  const strokeStyle = style.getStroke();\n  if (strokeStyle || fillStyle) {\n    const polygonReplay = builderGroup.getBuilder(style.getZIndex(), BuilderType.POLYGON);\n    polygonReplay.setFillStrokeStyle(fillStyle, strokeStyle);\n    polygonReplay.drawMultiPolygon(geometry, feature);\n  }\n  const textStyle = style.getText();\n  if (textStyle) {\n    const textReplay = builderGroup.getBuilder(style.getZIndex(), BuilderType.TEXT);\n    textReplay.setTextStyle(textStyle, builderGroup.addDeclutter(false));\n    textReplay.drawText(geometry, feature);\n  }\n}\n\n\n/**\n * @param {import(\"../render/canvas/BuilderGroup.js\").default} builderGroup Replay group.\n * @param {import(\"../geom/Point.js\").default|import(\"../render/Feature.js\").default} geometry Geometry.\n * @param {import(\"../style/Style.js\").default} style Style.\n * @param {import(\"../Feature.js\").FeatureLike} feature Feature.\n */\nfunction renderPointGeometry(builderGroup, geometry, style, feature) {\n  const imageStyle = style.getImage();\n  if (imageStyle) {\n    if (imageStyle.getImageState() != ImageState.LOADED) {\n      return;\n    }\n    const imageReplay = builderGroup.getBuilder(style.getZIndex(), BuilderType.IMAGE);\n    imageReplay.setImageStyle(imageStyle, builderGroup.addDeclutter(false));\n    imageReplay.drawPoint(geometry, feature);\n  }\n  const textStyle = style.getText();\n  if (textStyle) {\n    const textReplay = builderGroup.getBuilder(style.getZIndex(), BuilderType.TEXT);\n    textReplay.setTextStyle(textStyle, builderGroup.addDeclutter(!!imageStyle));\n    textReplay.drawText(geometry, feature);\n  }\n}\n\n\n/**\n * @param {import(\"../render/canvas/BuilderGroup.js\").default} builderGroup Replay group.\n * @param {import(\"../geom/MultiPoint.js\").default|import(\"../render/Feature.js\").default} geometry Geometry.\n * @param {import(\"../style/Style.js\").default} style Style.\n * @param {import(\"../Feature.js\").FeatureLike} feature Feature.\n */\nfunction renderMultiPointGeometry(builderGroup, geometry, style, feature) {\n  const imageStyle = style.getImage();\n  if (imageStyle) {\n    if (imageStyle.getImageState() != ImageState.LOADED) {\n      return;\n    }\n    const imageReplay = builderGroup.getBuilder(style.getZIndex(), BuilderType.IMAGE);\n    imageReplay.setImageStyle(imageStyle, builderGroup.addDeclutter(false));\n    imageReplay.drawMultiPoint(geometry, feature);\n  }\n  const textStyle = style.getText();\n  if (textStyle) {\n    const textReplay = builderGroup.getBuilder(style.getZIndex(), BuilderType.TEXT);\n    textReplay.setTextStyle(textStyle, builderGroup.addDeclutter(!!imageStyle));\n    textReplay.drawText(geometry, feature);\n  }\n}\n\n\n/**\n * @param {import(\"../render/canvas/BuilderGroup.js\").default} builderGroup Replay group.\n * @param {import(\"../geom/Polygon.js\").default|import(\"../render/Feature.js\").default} geometry Geometry.\n * @param {import(\"../style/Style.js\").default} style Style.\n * @param {import(\"../Feature.js\").FeatureLike} feature Feature.\n */\nfunction renderPolygonGeometry(builderGroup, geometry, style, feature) {\n  const fillStyle = style.getFill();\n  const strokeStyle = style.getStroke();\n  if (fillStyle || strokeStyle) {\n    const polygonReplay = builderGroup.getBuilder(style.getZIndex(), BuilderType.POLYGON);\n    polygonReplay.setFillStrokeStyle(fillStyle, strokeStyle);\n    polygonReplay.drawPolygon(geometry, feature);\n  }\n  const textStyle = style.getText();\n  if (textStyle) {\n    const textReplay = builderGroup.getBuilder(style.getZIndex(), BuilderType.TEXT);\n    textReplay.setTextStyle(textStyle, builderGroup.addDeclutter(false));\n    textReplay.drawText(geometry, feature);\n  }\n}\n","/**\n * @module ol/source/common\n */\n\n/**\n * Default WMS version.\n * @type {string}\n */\nexport const DEFAULT_WMS_VERSION = '1.3.0';\n","/**\n * @module ol/source/WMSServerType\n */\n\n/**\n * Available server types: `'carmentaserver'`, `'geoserver'`, `'mapserver'`,\n *     `'qgis'`. These are servers that have vendor parameters beyond the WMS\n *     specification that OpenLayers can make use of.\n * @enum {string}\n */\nexport default {\n  /**\n   * HiDPI support for [Carmenta Server](https://www.carmenta.com/en/products/carmenta-server)\n   * @api\n   */\n  CARMENTA_SERVER: 'carmentaserver',\n  /**\n   * HiDPI support for [GeoServer](https://geoserver.org/)\n   * @api\n   */\n  GEOSERVER: 'geoserver',\n  /**\n   * HiDPI support for [MapServer](https://mapserver.org/)\n   * @api\n   */\n  MAPSERVER: 'mapserver',\n  /**\n   * HiDPI support for [QGIS](https://qgis.org/)\n   * @api\n   */\n  QGIS: 'qgis'\n};\n","/**\n * @module ol/source/Source\n */\nimport {abstract} from '../util.js';\nimport BaseObject from '../Object.js';\nimport {get as getProjection} from '../proj.js';\nimport SourceState from './State.js';\n\n\n/**\n * A function that returns a string or an array of strings representing source\n * attributions.\n *\n * @typedef {function(import(\"../PluggableMap.js\").FrameState): (string|Array<string>)} Attribution\n */\n\n\n/**\n * A type that can be used to provide attribution information for data sources.\n *\n * It represents either\n * * a simple string (e.g. `'© Acme Inc.'`)\n * * an array of simple strings (e.g. `['© Acme Inc.', '© Bacme Inc.']`)\n * * a function that returns a string or array of strings ({@link module:ol/source/Source~Attribution})\n *\n * @typedef {string|Array<string>|Attribution} AttributionLike\n */\n\n\n/**\n * @typedef {Object} Options\n * @property {AttributionLike} [attributions]\n * @property {boolean} [attributionsCollapsible=true] Attributions are collapsible.\n * @property {import(\"../proj.js\").ProjectionLike} [projection] Projection. Default is the view projection.\n * @property {SourceState} [state='ready']\n * @property {boolean} [wrapX=false]\n */\n\n\n/**\n * @classdesc\n * Abstract base class; normally only used for creating subclasses and not\n * instantiated in apps.\n * Base class for {@link module:ol/layer/Layer~Layer} sources.\n *\n * A generic `change` event is triggered when the state of the source changes.\n * @abstract\n * @api\n */\nclass Source extends BaseObject {\n  /**\n   * @param {Options} options Source options.\n   */\n  constructor(options) {\n\n    super();\n\n    /**\n     * @private\n     * @type {import(\"../proj/Projection.js\").default}\n     */\n    this.projection_ = getProjection(options.projection);\n\n    /**\n     * @private\n     * @type {?Attribution}\n     */\n    this.attributions_ = adaptAttributions(options.attributions);\n\n    /**\n     * @private\n     * @type {boolean}\n     */\n    this.attributionsCollapsible_ = options.attributionsCollapsible !== undefined ?\n      options.attributionsCollapsible : true;\n\n    /**\n     * This source is currently loading data. Sources that defer loading to the\n     * map's tile queue never set this to `true`.\n     * @type {boolean}\n     */\n    this.loading = false;\n\n    /**\n     * @private\n     * @type {SourceState}\n     */\n    this.state_ = options.state !== undefined ?\n      options.state : SourceState.READY;\n\n    /**\n     * @private\n     * @type {boolean}\n     */\n    this.wrapX_ = options.wrapX !== undefined ? options.wrapX : false;\n\n  }\n\n  /**\n   * Get the attribution function for the source.\n   * @return {?Attribution} Attribution function.\n   */\n  getAttributions() {\n    return this.attributions_;\n  }\n\n  /**\n   * @return {boolean} Attributions are collapsible.\n   */\n  getAttributionsCollapsible() {\n    return this.attributionsCollapsible_;\n  }\n\n  /**\n   * Get the projection of the source.\n   * @return {import(\"../proj/Projection.js\").default} Projection.\n   * @api\n   */\n  getProjection() {\n    return this.projection_;\n  }\n\n  /**\n   * @abstract\n   * @return {Array<number>|undefined} Resolutions.\n   */\n  getResolutions() {\n    return abstract();\n  }\n\n  /**\n   * Get the state of the source, see {@link module:ol/source/State~State} for possible states.\n   * @return {SourceState} State.\n   * @api\n   */\n  getState() {\n    return this.state_;\n  }\n\n  /**\n   * @return {boolean|undefined} Wrap X.\n   */\n  getWrapX() {\n    return this.wrapX_;\n  }\n\n  /**\n   * Refreshes the source. The source will be cleared, and data from the server will be reloaded.\n   * @api\n   */\n  refresh() {\n    this.changed();\n  }\n\n  /**\n   * Set the attributions of the source.\n   * @param {AttributionLike|undefined} attributions Attributions.\n   *     Can be passed as `string`, `Array<string>`, {@link module:ol/source/Source~Attribution},\n   *     or `undefined`.\n   * @api\n   */\n  setAttributions(attributions) {\n    this.attributions_ = adaptAttributions(attributions);\n    this.changed();\n  }\n\n  /**\n   * Set the state of the source.\n   * @param {SourceState} state State.\n   * @protected\n   */\n  setState(state) {\n    this.state_ = state;\n    this.changed();\n  }\n}\n\n\n/**\n * Turns the attributions option into an attributions function.\n * @param {AttributionLike|undefined} attributionLike The attribution option.\n * @return {?Attribution} An attribution function (or null).\n */\nfunction adaptAttributions(attributionLike) {\n  if (!attributionLike) {\n    return null;\n  }\n  if (Array.isArray(attributionLike)) {\n    return function(frameState) {\n      return attributionLike;\n    };\n  }\n\n  if (typeof attributionLike === 'function') {\n    return attributionLike;\n  }\n\n  return function(frameState) {\n    return [attributionLike];\n  };\n}\n\n\nexport default Source;\n","/**\n * @module ol/geom/GeometryCollection\n */\nimport {listen, unlistenByKey} from '../events.js';\nimport EventType from '../events/EventType.js';\nimport {createOrUpdateEmpty, closestSquaredDistanceXY, extend, getCenter} from '../extent.js';\nimport Geometry from './Geometry.js';\nimport GeometryType from './GeometryType.js';\n\n/**\n * @classdesc\n * An array of {@link module:ol/geom/Geometry} objects.\n *\n * @api\n */\nclass GeometryCollection extends Geometry {\n\n  /**\n   * @param {Array<Geometry>=} opt_geometries Geometries.\n   */\n  constructor(opt_geometries) {\n\n    super();\n\n    /**\n     * @private\n     * @type {Array<Geometry>}\n     */\n    this.geometries_ = opt_geometries ? opt_geometries : null;\n\n    /**\n     * @type {Array<import(\"../events.js\").EventsKey>}\n     */\n    this.changeEventsKeys_ = [];\n\n    this.listenGeometriesChange_();\n  }\n\n  /**\n   * @private\n   */\n  unlistenGeometriesChange_() {\n    this.changeEventsKeys_.forEach(unlistenByKey);\n    this.changeEventsKeys_.length = 0;\n  }\n\n  /**\n   * @private\n   */\n  listenGeometriesChange_() {\n    if (!this.geometries_) {\n      return;\n    }\n    for (let i = 0, ii = this.geometries_.length; i < ii; ++i) {\n      this.changeEventsKeys_.push(listen(\n        this.geometries_[i], EventType.CHANGE,\n        this.changed, this));\n    }\n  }\n\n  /**\n   * Make a complete copy of the geometry.\n   * @return {!GeometryCollection} Clone.\n   * @override\n   * @api\n   */\n  clone() {\n    const geometryCollection = new GeometryCollection(null);\n    geometryCollection.setGeometries(this.geometries_);\n    return geometryCollection;\n  }\n\n  /**\n   * @inheritDoc\n   */\n  closestPointXY(x, y, closestPoint, minSquaredDistance) {\n    if (minSquaredDistance < closestSquaredDistanceXY(this.getExtent(), x, y)) {\n      return minSquaredDistance;\n    }\n    const geometries = this.geometries_;\n    for (let i = 0, ii = geometries.length; i < ii; ++i) {\n      minSquaredDistance = geometries[i].closestPointXY(\n        x, y, closestPoint, minSquaredDistance);\n    }\n    return minSquaredDistance;\n  }\n\n  /**\n   * @inheritDoc\n   */\n  containsXY(x, y) {\n    const geometries = this.geometries_;\n    for (let i = 0, ii = geometries.length; i < ii; ++i) {\n      if (geometries[i].containsXY(x, y)) {\n        return true;\n      }\n    }\n    return false;\n  }\n\n  /**\n   * @inheritDoc\n   */\n  computeExtent(extent) {\n    createOrUpdateEmpty(extent);\n    const geometries = this.geometries_;\n    for (let i = 0, ii = geometries.length; i < ii; ++i) {\n      extend(extent, geometries[i].getExtent());\n    }\n    return extent;\n  }\n\n  /**\n   * Return the geometries that make up this geometry collection.\n   * @return {Array<Geometry>} Geometries.\n   * @api\n   */\n  getGeometries() {\n    return cloneGeometries(this.geometries_);\n  }\n\n  /**\n   * @return {Array<Geometry>} Geometries.\n   */\n  getGeometriesArray() {\n    return this.geometries_;\n  }\n\n  /**\n   * @inheritDoc\n   */\n  getSimplifiedGeometry(squaredTolerance) {\n    if (this.simplifiedGeometryRevision !== this.getRevision()) {\n      this.simplifiedGeometryMaxMinSquaredTolerance = 0;\n      this.simplifiedGeometryRevision = this.getRevision();\n    }\n    if (squaredTolerance < 0 ||\n        (this.simplifiedGeometryMaxMinSquaredTolerance !== 0 &&\n         squaredTolerance < this.simplifiedGeometryMaxMinSquaredTolerance)) {\n      return this;\n    }\n\n    const simplifiedGeometries = [];\n    const geometries = this.geometries_;\n    let simplified = false;\n    for (let i = 0, ii = geometries.length; i < ii; ++i) {\n      const geometry = geometries[i];\n      const simplifiedGeometry = geometry.getSimplifiedGeometry(squaredTolerance);\n      simplifiedGeometries.push(simplifiedGeometry);\n      if (simplifiedGeometry !== geometry) {\n        simplified = true;\n      }\n    }\n    if (simplified) {\n      const simplifiedGeometryCollection = new GeometryCollection(null);\n      simplifiedGeometryCollection.setGeometriesArray(simplifiedGeometries);\n      return simplifiedGeometryCollection;\n    } else {\n      this.simplifiedGeometryMaxMinSquaredTolerance = squaredTolerance;\n      return this;\n    }\n  }\n\n  /**\n   * @inheritDoc\n   * @api\n   */\n  getType() {\n    return GeometryType.GEOMETRY_COLLECTION;\n  }\n\n  /**\n   * @inheritDoc\n   * @api\n   */\n  intersectsExtent(extent) {\n    const geometries = this.geometries_;\n    for (let i = 0, ii = geometries.length; i < ii; ++i) {\n      if (geometries[i].intersectsExtent(extent)) {\n        return true;\n      }\n    }\n    return false;\n  }\n\n  /**\n   * @return {boolean} Is empty.\n   */\n  isEmpty() {\n    return this.geometries_.length === 0;\n  }\n\n  /**\n   * @inheritDoc\n   * @api\n   */\n  rotate(angle, anchor) {\n    const geometries = this.geometries_;\n    for (let i = 0, ii = geometries.length; i < ii; ++i) {\n      geometries[i].rotate(angle, anchor);\n    }\n    this.changed();\n  }\n\n  /**\n   * @inheritDoc\n   * @api\n   */\n  scale(sx, opt_sy, opt_anchor) {\n    let anchor = opt_anchor;\n    if (!anchor) {\n      anchor = getCenter(this.getExtent());\n    }\n    const geometries = this.geometries_;\n    for (let i = 0, ii = geometries.length; i < ii; ++i) {\n      geometries[i].scale(sx, opt_sy, anchor);\n    }\n    this.changed();\n  }\n\n  /**\n   * Set the geometries that make up this geometry collection.\n   * @param {Array<Geometry>} geometries Geometries.\n   * @api\n   */\n  setGeometries(geometries) {\n    this.setGeometriesArray(cloneGeometries(geometries));\n  }\n\n  /**\n   * @param {Array<Geometry>} geometries Geometries.\n   */\n  setGeometriesArray(geometries) {\n    this.unlistenGeometriesChange_();\n    this.geometries_ = geometries;\n    this.listenGeometriesChange_();\n    this.changed();\n  }\n\n  /**\n   * @inheritDoc\n   * @api\n   */\n  applyTransform(transformFn) {\n    const geometries = this.geometries_;\n    for (let i = 0, ii = geometries.length; i < ii; ++i) {\n      geometries[i].applyTransform(transformFn);\n    }\n    this.changed();\n  }\n\n  /**\n   * @inheritDoc\n   * @api\n   */\n  translate(deltaX, deltaY) {\n    const geometries = this.geometries_;\n    for (let i = 0, ii = geometries.length; i < ii; ++i) {\n      geometries[i].translate(deltaX, deltaY);\n    }\n    this.changed();\n  }\n\n  /**\n   * @inheritDoc\n   */\n  disposeInternal() {\n    this.unlistenGeometriesChange_();\n    super.disposeInternal();\n  }\n}\n\n\n/**\n * @param {Array<Geometry>} geometries Geometries.\n * @return {Array<Geometry>} Cloned geometries.\n */\nfunction cloneGeometries(geometries) {\n  const clonedGeometries = [];\n  for (let i = 0, ii = geometries.length; i < ii; ++i) {\n    clonedGeometries.push(geometries[i].clone());\n  }\n  return clonedGeometries;\n}\n\n\nexport default GeometryCollection;\n","/**\n * @module ol/geom/flat/interpolate\n */\nimport {binarySearch} from '../../array.js';\nimport {lerp} from '../../math.js';\n\n\n/**\n * @param {Array<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {number} end End.\n * @param {number} stride Stride.\n * @param {number} fraction Fraction.\n * @param {Array<number>=} opt_dest Destination.\n * @return {Array<number>} Destination.\n */\nexport function interpolatePoint(flatCoordinates, offset, end, stride, fraction, opt_dest) {\n  let pointX = NaN;\n  let pointY = NaN;\n  const n = (end - offset) / stride;\n  if (n === 1) {\n    pointX = flatCoordinates[offset];\n    pointY = flatCoordinates[offset + 1];\n  } else if (n == 2) {\n    pointX = (1 - fraction) * flatCoordinates[offset] +\n        fraction * flatCoordinates[offset + stride];\n    pointY = (1 - fraction) * flatCoordinates[offset + 1] +\n        fraction * flatCoordinates[offset + stride + 1];\n  } else if (n !== 0) {\n    let x1 = flatCoordinates[offset];\n    let y1 = flatCoordinates[offset + 1];\n    let length = 0;\n    const cumulativeLengths = [0];\n    for (let i = offset + stride; i < end; i += stride) {\n      const x2 = flatCoordinates[i];\n      const y2 = flatCoordinates[i + 1];\n      length += Math.sqrt((x2 - x1) * (x2 - x1) + (y2 - y1) * (y2 - y1));\n      cumulativeLengths.push(length);\n      x1 = x2;\n      y1 = y2;\n    }\n    const target = fraction * length;\n    const index = binarySearch(cumulativeLengths, target);\n    if (index < 0) {\n      const t = (target - cumulativeLengths[-index - 2]) /\n          (cumulativeLengths[-index - 1] - cumulativeLengths[-index - 2]);\n      const o = offset + (-index - 2) * stride;\n      pointX = lerp(\n        flatCoordinates[o], flatCoordinates[o + stride], t);\n      pointY = lerp(\n        flatCoordinates[o + 1], flatCoordinates[o + stride + 1], t);\n    } else {\n      pointX = flatCoordinates[offset + index * stride];\n      pointY = flatCoordinates[offset + index * stride + 1];\n    }\n  }\n  if (opt_dest) {\n    opt_dest[0] = pointX;\n    opt_dest[1] = pointY;\n    return opt_dest;\n  } else {\n    return [pointX, pointY];\n  }\n}\n\n\n/**\n * @param {Array<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {number} end End.\n * @param {number} stride Stride.\n * @param {number} m M.\n * @param {boolean} extrapolate Extrapolate.\n * @return {import(\"../../coordinate.js\").Coordinate} Coordinate.\n */\nexport function lineStringCoordinateAtM(flatCoordinates, offset, end, stride, m, extrapolate) {\n  if (end == offset) {\n    return null;\n  }\n  let coordinate;\n  if (m < flatCoordinates[offset + stride - 1]) {\n    if (extrapolate) {\n      coordinate = flatCoordinates.slice(offset, offset + stride);\n      coordinate[stride - 1] = m;\n      return coordinate;\n    } else {\n      return null;\n    }\n  } else if (flatCoordinates[end - 1] < m) {\n    if (extrapolate) {\n      coordinate = flatCoordinates.slice(end - stride, end);\n      coordinate[stride - 1] = m;\n      return coordinate;\n    } else {\n      return null;\n    }\n  }\n  // FIXME use O(1) search\n  if (m == flatCoordinates[offset + stride - 1]) {\n    return flatCoordinates.slice(offset, offset + stride);\n  }\n  let lo = offset / stride;\n  let hi = end / stride;\n  while (lo < hi) {\n    const mid = (lo + hi) >> 1;\n    if (m < flatCoordinates[(mid + 1) * stride - 1]) {\n      hi = mid;\n    } else {\n      lo = mid + 1;\n    }\n  }\n  const m0 = flatCoordinates[lo * stride - 1];\n  if (m == m0) {\n    return flatCoordinates.slice((lo - 1) * stride, (lo - 1) * stride + stride);\n  }\n  const m1 = flatCoordinates[(lo + 1) * stride - 1];\n  const t = (m - m0) / (m1 - m0);\n  coordinate = [];\n  for (let i = 0; i < stride - 1; ++i) {\n    coordinate.push(lerp(flatCoordinates[(lo - 1) * stride + i],\n      flatCoordinates[lo * stride + i], t));\n  }\n  coordinate.push(m);\n  return coordinate;\n}\n\n\n/**\n * @param {Array<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {Array<number>} ends Ends.\n * @param {number} stride Stride.\n * @param {number} m M.\n * @param {boolean} extrapolate Extrapolate.\n * @param {boolean} interpolate Interpolate.\n * @return {import(\"../../coordinate.js\").Coordinate} Coordinate.\n */\nexport function lineStringsCoordinateAtM(\n  flatCoordinates, offset, ends, stride, m, extrapolate, interpolate) {\n  if (interpolate) {\n    return lineStringCoordinateAtM(\n      flatCoordinates, offset, ends[ends.length - 1], stride, m, extrapolate);\n  }\n  let coordinate;\n  if (m < flatCoordinates[stride - 1]) {\n    if (extrapolate) {\n      coordinate = flatCoordinates.slice(0, stride);\n      coordinate[stride - 1] = m;\n      return coordinate;\n    } else {\n      return null;\n    }\n  }\n  if (flatCoordinates[flatCoordinates.length - 1] < m) {\n    if (extrapolate) {\n      coordinate = flatCoordinates.slice(flatCoordinates.length - stride);\n      coordinate[stride - 1] = m;\n      return coordinate;\n    } else {\n      return null;\n    }\n  }\n  for (let i = 0, ii = ends.length; i < ii; ++i) {\n    const end = ends[i];\n    if (offset == end) {\n      continue;\n    }\n    if (m < flatCoordinates[offset + stride - 1]) {\n      return null;\n    } else if (m <= flatCoordinates[end - 1]) {\n      return lineStringCoordinateAtM(\n        flatCoordinates, offset, end, stride, m, false);\n    }\n    offset = end;\n  }\n  return null;\n}\n","/**\n * @module ol/format/XLink\n */\n\n\n/**\n * @const\n * @type {string}\n */\nconst NAMESPACE_URI = 'http://www.w3.org/1999/xlink';\n\n\n/**\n * @param {Element} node Node.\n * @return {string|undefined} href.\n */\nexport function readHref(node) {\n  return node.getAttributeNS(NAMESPACE_URI, 'href');\n}\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar WOFF = 'application/font-woff';\nvar JPEG = 'image/jpeg';\nvar mimes = {\n    woff: WOFF,\n    woff2: WOFF,\n    ttf: 'application/font-truetype',\n    eot: 'application/vnd.ms-fontobject',\n    png: 'image/png',\n    jpg: JPEG,\n    jpeg: JPEG,\n    gif: 'image/gif',\n    tiff: 'image/tiff',\n    svg: 'image/svg+xml',\n};\nexports.uuid = (function uuid() {\n    // generate uuid for className of pseudo elements.\n    // We should not use GUIDs, otherwise pseudo elements sometimes cannot be captured.\n    var counter = 0;\n    // ref: http://stackoverflow.com/a/6248722/2519373\n    var randomFourChars = function () {\n        return (\"0000\" + (Math.random() * (Math.pow(36, 4)) << 0).toString(36)).slice(-4);\n    };\n    return function () {\n        counter += 1;\n        return \"u\" + randomFourChars() + counter;\n    };\n}());\nfunction parseExtension(url) {\n    var match = /\\.([^./]*?)$/g.exec(url);\n    if (match)\n        return match[1];\n    return '';\n}\nexports.parseExtension = parseExtension;\nfunction getMimeType(url) {\n    var ext = parseExtension(url).toLowerCase();\n    return mimes[ext] || '';\n}\nexports.getMimeType = getMimeType;\nfunction delay(ms) {\n    return function (args) { return new Promise((function (resolve) {\n        setTimeout(function () {\n            resolve(args);\n        }, ms);\n    })); };\n}\nexports.delay = delay;\nfunction createImage(url) {\n    return new Promise((function (resolve, reject) {\n        var image = new Image();\n        image.onload = function () {\n            resolve(image);\n        };\n        image.onerror = reject;\n        image.crossOrigin = 'anonymous';\n        image.src = url;\n    }));\n}\nexports.createImage = createImage;\nfunction isDataUrl(url) {\n    return url.search(/^(data:)/) !== -1;\n}\nexports.isDataUrl = isDataUrl;\nfunction toDataURL(content, mimeType) {\n    return \"data:\" + mimeType + \";base64,\" + content;\n}\nexports.toDataURL = toDataURL;\nfunction getDataURLContent(dataURL) {\n    return dataURL.split(/,/)[1];\n}\nexports.getDataURLContent = getDataURLContent;\nfunction toBlob(canvas) {\n    return new Promise((function (resolve) {\n        var binaryString = window.atob(canvas.toDataURL().split(',')[1]);\n        var len = binaryString.length;\n        var binaryArray = new Uint8Array(len);\n        for (var i = 0; i < len; i += 1) {\n            binaryArray[i] = binaryString.charCodeAt(i);\n        }\n        resolve(new Blob([binaryArray], {\n            type: 'image/png',\n        }));\n    }));\n}\nfunction canvasToBlob(canvas) {\n    if (canvas.toBlob) {\n        return new Promise((function (resolve) {\n            canvas.toBlob(resolve);\n        }));\n    }\n    return toBlob(canvas);\n}\nexports.canvasToBlob = canvasToBlob;\nfunction toArray(arrayLike) {\n    var arr = [];\n    for (var i = 0, l = arrayLike.length; i < l; i += 1) {\n        arr.push(arrayLike[i]);\n    }\n    return arr;\n}\nexports.toArray = toArray;\nfunction px(node, styleProperty) {\n    var value = window.getComputedStyle(node).getPropertyValue(styleProperty);\n    return parseFloat(value.replace('px', ''));\n}\nfunction getNodeWidth(node) {\n    var leftBorder = px(node, 'border-left-width');\n    var rightBorder = px(node, 'border-right-width');\n    return node.scrollWidth + leftBorder + rightBorder;\n}\nexports.getNodeWidth = getNodeWidth;\nfunction getNodeHeight(node) {\n    var topBorder = px(node, 'border-top-width');\n    var bottomBorder = px(node, 'border-bottom-width');\n    return node.scrollHeight + topBorder + bottomBorder;\n}\nexports.getNodeHeight = getNodeHeight;\nfunction getPixelRatio() {\n    return (window.devicePixelRatio || 1);\n}\nexports.getPixelRatio = getPixelRatio;\nfunction svgToDataURL(svg) {\n    return Promise.resolve()\n        .then(function () { return new XMLSerializer().serializeToString(svg); })\n        .then(encodeURIComponent)\n        .then(function (html) { return \"data:image/svg+xml;charset=utf-8,\" + html; });\n}\nexports.svgToDataURL = svgToDataURL;\nfunction getBlobFromImageURL(url) {\n    return createImage(url).then(function (image) {\n        var width = image.width, height = image.height;\n        var canvas = document.createElement('canvas');\n        var context = canvas.getContext('2d');\n        var ratio = getPixelRatio();\n        canvas.width = width * ratio;\n        canvas.height = height * ratio;\n        canvas.style.width = \"\" + width;\n        canvas.style.height = \"\" + height;\n        context.scale(ratio, ratio);\n        context.drawImage(image, 0, 0);\n        var dataURL = canvas.toDataURL(getMimeType(url));\n        return getDataURLContent(dataURL);\n    });\n}\nexports.getBlobFromImageURL = getBlobFromImageURL;\n","/**\n * @module ol/geom/flat/intersectsextent\n */\nimport {containsExtent, createEmpty, extendFlatCoordinates, intersects, intersectsSegment} from '../../extent.js';\nimport {linearRingContainsXY, linearRingContainsExtent} from './contains.js';\nimport {forEach as forEachSegment} from './segments.js';\n\n\n/**\n * @param {Array<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {number} end End.\n * @param {number} stride Stride.\n * @param {import(\"../../extent.js\").Extent} extent Extent.\n * @return {boolean} True if the geometry and the extent intersect.\n */\nexport function intersectsLineString(flatCoordinates, offset, end, stride, extent) {\n  const coordinatesExtent = extendFlatCoordinates(\n    createEmpty(), flatCoordinates, offset, end, stride);\n  if (!intersects(extent, coordinatesExtent)) {\n    return false;\n  }\n  if (containsExtent(extent, coordinatesExtent)) {\n    return true;\n  }\n  if (coordinatesExtent[0] >= extent[0] &&\n      coordinatesExtent[2] <= extent[2]) {\n    return true;\n  }\n  if (coordinatesExtent[1] >= extent[1] &&\n      coordinatesExtent[3] <= extent[3]) {\n    return true;\n  }\n  return forEachSegment(flatCoordinates, offset, end, stride,\n    /**\n     * @param {import(\"../../coordinate.js\").Coordinate} point1 Start point.\n     * @param {import(\"../../coordinate.js\").Coordinate} point2 End point.\n     * @return {boolean} `true` if the segment and the extent intersect,\n     *     `false` otherwise.\n     */\n    function(point1, point2) {\n      return intersectsSegment(extent, point1, point2);\n    });\n}\n\n\n/**\n * @param {Array<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {Array<number>} ends Ends.\n * @param {number} stride Stride.\n * @param {import(\"../../extent.js\").Extent} extent Extent.\n * @return {boolean} True if the geometry and the extent intersect.\n */\nexport function intersectsLineStringArray(flatCoordinates, offset, ends, stride, extent) {\n  for (let i = 0, ii = ends.length; i < ii; ++i) {\n    if (intersectsLineString(\n      flatCoordinates, offset, ends[i], stride, extent)) {\n      return true;\n    }\n    offset = ends[i];\n  }\n  return false;\n}\n\n\n/**\n * @param {Array<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {number} end End.\n * @param {number} stride Stride.\n * @param {import(\"../../extent.js\").Extent} extent Extent.\n * @return {boolean} True if the geometry and the extent intersect.\n */\nexport function intersectsLinearRing(flatCoordinates, offset, end, stride, extent) {\n  if (intersectsLineString(\n    flatCoordinates, offset, end, stride, extent)) {\n    return true;\n  }\n  if (linearRingContainsXY(flatCoordinates, offset, end, stride, extent[0], extent[1])) {\n    return true;\n  }\n  if (linearRingContainsXY(flatCoordinates, offset, end, stride, extent[0], extent[3])) {\n    return true;\n  }\n  if (linearRingContainsXY(flatCoordinates, offset, end, stride, extent[2], extent[1])) {\n    return true;\n  }\n  if (linearRingContainsXY(flatCoordinates, offset, end, stride, extent[2], extent[3])) {\n    return true;\n  }\n  return false;\n}\n\n\n/**\n * @param {Array<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {Array<number>} ends Ends.\n * @param {number} stride Stride.\n * @param {import(\"../../extent.js\").Extent} extent Extent.\n * @return {boolean} True if the geometry and the extent intersect.\n */\nexport function intersectsLinearRingArray(flatCoordinates, offset, ends, stride, extent) {\n  if (!intersectsLinearRing(\n    flatCoordinates, offset, ends[0], stride, extent)) {\n    return false;\n  }\n  if (ends.length === 1) {\n    return true;\n  }\n  for (let i = 1, ii = ends.length; i < ii; ++i) {\n    if (linearRingContainsExtent(flatCoordinates, ends[i - 1], ends[i], stride, extent)) {\n      if (!intersectsLineString(flatCoordinates, ends[i - 1], ends[i], stride, extent)) {\n        return false;\n      }\n    }\n  }\n  return true;\n}\n\n\n/**\n * @param {Array<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {Array<Array<number>>} endss Endss.\n * @param {number} stride Stride.\n * @param {import(\"../../extent.js\").Extent} extent Extent.\n * @return {boolean} True if the geometry and the extent intersect.\n */\nexport function intersectsLinearRingMultiArray(flatCoordinates, offset, endss, stride, extent) {\n  for (let i = 0, ii = endss.length; i < ii; ++i) {\n    const ends = endss[i];\n    if (intersectsLinearRingArray(\n      flatCoordinates, offset, ends, stride, extent)) {\n      return true;\n    }\n    offset = ends[ends.length - 1];\n  }\n  return false;\n}\n","/**\n * @module ol/tilegrid/WMTS\n */\n\nimport {find} from '../array.js';\nimport {get as getProjection} from '../proj.js';\nimport TileGrid from './TileGrid.js';\n\n\n/**\n * @typedef {Object} Options\n * @property {import(\"../extent.js\").Extent} [extent] Extent for the tile grid. No tiles\n * outside this extent will be requested by {@link module:ol/source/Tile} sources.\n * When no `origin` or `origins` are configured, the `origin` will be set to the\n * top-left corner of the extent.\n * @property {import(\"../coordinate.js\").Coordinate} [origin] The tile grid origin, i.e.\n * where the `x` and `y` axes meet (`[z, 0, 0]`). Tile coordinates increase left\n * to right and upwards. If not specified, `extent` or `origins` must be provided.\n * @property {Array<import(\"../coordinate.js\").Coordinate>} [origins] Tile grid origins,\n * i.e. where the `x` and `y` axes meet (`[z, 0, 0]`), for each zoom level. If\n * given, the array length should match the length of the `resolutions` array, i.e.\n * each resolution can have a different origin. Tile coordinates increase left to\n * right and upwards. If not specified, `extent` or `origin` must be provided.\n * @property {!Array<number>} resolutions Resolutions. The array index of each\n * resolution needs to match the zoom level. This means that even if a `minZoom`\n * is configured, the resolutions array will have a length of `maxZoom + 1`\n * @property {!Array<string>} matrixIds matrix IDs. The length of this array needs\n * to match the length of the `resolutions` array.\n * @property {Array<import(\"../size.js\").Size>} [sizes] Number of tile rows and columns\n * of the grid for each zoom level. The values here are the `TileMatrixWidth` and\n * `TileMatrixHeight` advertised in the GetCapabilities response of the WMTS, and\n * define the grid's extent together with the `origin`.\n * An `extent` can be configured in addition, and will further limit the extent for\n * which tile requests are made by sources. If the bottom-left corner of\n * the `extent` is used as `origin` or `origins`, then the `y` value must be\n * negative because OpenLayers tile coordinates use the top left as the origin.\n * @property {number|import(\"../size.js\").Size} [tileSize] Tile size.\n * @property {Array<import(\"../size.js\").Size>} [tileSizes] Tile sizes. The length of\n * this array needs to match the length of the `resolutions` array.\n * @property {Array<number>} [widths] Number of tile columns that cover the grid's\n * extent for each zoom level. Only required when used with a source that has `wrapX`\n * set to `true`, and only when the grid's origin differs from the one of the\n * projection's extent. The array length has to match the length of the `resolutions`\n * array, i.e. each resolution will have a matching entry here.\n */\n\n\n/**\n * @classdesc\n * Set the grid pattern for sources accessing WMTS tiled-image servers.\n * @api\n */\nclass WMTSTileGrid extends TileGrid {\n  /**\n   * @param {Options} options WMTS options.\n   */\n  constructor(options) {\n    super({\n      extent: options.extent,\n      origin: options.origin,\n      origins: options.origins,\n      resolutions: options.resolutions,\n      tileSize: options.tileSize,\n      tileSizes: options.tileSizes,\n      sizes: options.sizes\n    });\n\n    /**\n     * @private\n     * @type {!Array<string>}\n     */\n    this.matrixIds_ = options.matrixIds;\n  }\n\n  /**\n   * @param {number} z Z.\n   * @return {string} MatrixId..\n   */\n  getMatrixId(z) {\n    return this.matrixIds_[z];\n  }\n\n  /**\n   * Get the list of matrix identifiers.\n   * @return {Array<string>} MatrixIds.\n   * @api\n   */\n  getMatrixIds() {\n    return this.matrixIds_;\n  }\n}\n\n\nexport default WMTSTileGrid;\n\n/**\n * Create a tile grid from a WMTS capabilities matrix set and an\n * optional TileMatrixSetLimits.\n * @param {Object} matrixSet An object representing a matrixSet in the\n *     capabilities document.\n * @param {import(\"../extent.js\").Extent=} opt_extent An optional extent to restrict the tile\n *     ranges the server provides.\n * @param {Array<Object>=} opt_matrixLimits An optional object representing\n *     the available matrices for tileGrid.\n * @return {WMTSTileGrid} WMTS tileGrid instance.\n * @api\n */\nexport function createFromCapabilitiesMatrixSet(matrixSet, opt_extent, opt_matrixLimits) {\n\n  /** @type {!Array<number>} */\n  const resolutions = [];\n  /** @type {!Array<string>} */\n  const matrixIds = [];\n  /** @type {!Array<import(\"../coordinate.js\").Coordinate>} */\n  const origins = [];\n  /** @type {!Array<import(\"../size.js\").Size>} */\n  const tileSizes = [];\n  /** @type {!Array<import(\"../size.js\").Size>} */\n  const sizes = [];\n\n  const matrixLimits = opt_matrixLimits !== undefined ? opt_matrixLimits : [];\n\n  const supportedCRSPropName = 'SupportedCRS';\n  const matrixIdsPropName = 'TileMatrix';\n  const identifierPropName = 'Identifier';\n  const scaleDenominatorPropName = 'ScaleDenominator';\n  const topLeftCornerPropName = 'TopLeftCorner';\n  const tileWidthPropName = 'TileWidth';\n  const tileHeightPropName = 'TileHeight';\n\n  const code = matrixSet[supportedCRSPropName];\n  const projection = getProjection(code.replace(/urn:ogc:def:crs:(\\w+):(.*:)?(\\w+)$/, '$1:$3')) ||\n      getProjection(code);\n  const metersPerUnit = projection.getMetersPerUnit();\n  // swap origin x and y coordinates if axis orientation is lat/long\n  const switchOriginXY = projection.getAxisOrientation().substr(0, 2) == 'ne';\n\n  matrixSet[matrixIdsPropName].sort(function(a, b) {\n    return b[scaleDenominatorPropName] - a[scaleDenominatorPropName];\n  });\n\n  matrixSet[matrixIdsPropName].forEach(function(elt) {\n\n    let matrixAvailable;\n    // use of matrixLimits to filter TileMatrices from GetCapabilities\n    // TileMatrixSet from unavailable matrix levels.\n    if (matrixLimits.length > 0) {\n      matrixAvailable = find(matrixLimits, function(elt_ml) {\n        if (elt[identifierPropName] == elt_ml[matrixIdsPropName]) {\n          return true;\n        }\n        // Fallback for tileMatrix identifiers that don't get prefixed\n        // by their tileMatrixSet identifiers.\n        if (elt[identifierPropName].indexOf(':') === -1) {\n          return matrixSet[identifierPropName] + ':' + elt[identifierPropName] === elt_ml[matrixIdsPropName];\n        }\n        return false;\n      });\n    } else {\n      matrixAvailable = true;\n    }\n\n    if (matrixAvailable) {\n      matrixIds.push(elt[identifierPropName]);\n      const resolution = elt[scaleDenominatorPropName] * 0.28E-3 / metersPerUnit;\n      const tileWidth = elt[tileWidthPropName];\n      const tileHeight = elt[tileHeightPropName];\n      if (switchOriginXY) {\n        origins.push([elt[topLeftCornerPropName][1],\n          elt[topLeftCornerPropName][0]]);\n      } else {\n        origins.push(elt[topLeftCornerPropName]);\n      }\n      resolutions.push(resolution);\n      tileSizes.push(tileWidth == tileHeight ?\n        tileWidth : [tileWidth, tileHeight]);\n      sizes.push([elt['MatrixWidth'], elt['MatrixHeight']]);\n    }\n  });\n\n  return new WMTSTileGrid({\n    extent: opt_extent,\n    origins: origins,\n    resolutions: resolutions,\n    matrixIds: matrixIds,\n    tileSizes: tileSizes,\n    sizes: sizes\n  });\n}\n","/**\n * @module ol/webgl\n */\n\n\n/**\n * Constants taken from goog.webgl\n */\n\n/**\n * Used by {@link module:ol/webgl/Helper~WebGLHelper} for buffers containing vertices data, such as\n * position, color, texture coordinate, etc. These vertices are then referenced by an index buffer\n * to be drawn on screen (see {@link module:ol/webgl.ELEMENT_ARRAY_BUFFER}).\n * @const\n * @type {number}\n * @api\n */\nexport const ARRAY_BUFFER = 0x8892;\n\n\n/**\n * Used by {@link module:ol/webgl/Helper~WebGLHelper} for buffers containing indices data.\n * Index buffers are essentially lists of references to vertices defined in a vertex buffer\n * (see {@link module:ol/webgl.ARRAY_BUFFER}), and define the primitives (triangles) to be drawn.\n * @const\n * @type {number}\n * @api\n */\nexport const ELEMENT_ARRAY_BUFFER = 0x8893;\n\n\n/**\n * Used by {link module:ol/webgl/Buffer~WebGLArrayBuffer}.\n * @const\n * @type {number}\n * @api\n */\nexport const STREAM_DRAW = 0x88E0;\n\n\n/**\n * Used by {link module:ol/webgl/Buffer~WebGLArrayBuffer}.\n * @const\n * @type {number}\n * @api\n */\nexport const STATIC_DRAW = 0x88E4;\n\n\n/**\n * Used by {link module:ol/webgl/Buffer~WebGLArrayBuffer}.\n * @const\n * @type {number}\n * @api\n */\nexport const DYNAMIC_DRAW = 0x88E8;\n\n\n/**\n * @const\n * @type {number}\n */\nexport const UNSIGNED_BYTE = 0x1401;\n\n\n/**\n * @const\n * @type {number}\n */\nexport const UNSIGNED_SHORT = 0x1403;\n\n\n/**\n * @const\n * @type {number}\n */\nexport const UNSIGNED_INT = 0x1405;\n\n\n/**\n * @const\n * @type {number}\n */\nexport const FLOAT = 0x1406;\n\n/** end of goog.webgl constants\n */\n\n\n/**\n * @const\n * @type {Array<string>}\n */\nconst CONTEXT_IDS = [\n  'experimental-webgl',\n  'webgl',\n  'webkit-3d',\n  'moz-webgl'\n];\n\n\n/**\n * @param {HTMLCanvasElement} canvas Canvas.\n * @param {Object=} opt_attributes Attributes.\n * @return {WebGLRenderingContext} WebGL rendering context.\n */\nexport function getContext(canvas, opt_attributes) {\n  const ii = CONTEXT_IDS.length;\n  for (let i = 0; i < ii; ++i) {\n    try {\n      const context = canvas.getContext(CONTEXT_IDS[i], opt_attributes);\n      if (context) {\n        return /** @type {!WebGLRenderingContext} */ (context);\n      }\n    } catch (e) {\n      // pass\n    }\n  }\n  return null;\n}\n\n/**\n * @type {Array<string>}\n */\nlet supportedExtensions;\n\n/**\n * @return {Array<string>} List of supported WebGL extensions.\n */\nexport function getSupportedExtensions() {\n  if (!supportedExtensions) {\n    const canvas = document.createElement('canvas');\n    const gl = getContext(canvas);\n    if (gl) {\n      supportedExtensions = gl.getSupportedExtensions();\n    }\n  }\n  return supportedExtensions;\n}\n","/**\n * @module ol/webgl/Buffer\n */\nimport {STATIC_DRAW, STREAM_DRAW, DYNAMIC_DRAW} from '../webgl.js';\nimport {ARRAY_BUFFER, ELEMENT_ARRAY_BUFFER} from '../webgl.js';\nimport {assert} from '../asserts.js';\n\n/**\n * Used to describe the intended usage for the data: `STATIC_DRAW`, `STREAM_DRAW`\n * or `DYNAMIC_DRAW`.\n * @enum {number}\n */\nexport const BufferUsage = {\n  STATIC_DRAW: STATIC_DRAW,\n  STREAM_DRAW: STREAM_DRAW,\n  DYNAMIC_DRAW: DYNAMIC_DRAW\n};\n\n/**\n * @classdesc\n * Object used to store an array of data as well as usage information for that data.\n * Stores typed arrays internally, either Float32Array or Uint16/32Array depending on\n * the buffer type (ARRAY_BUFFER or ELEMENT_ARRAY_BUFFER) and available extensions.\n *\n * To populate the array, you can either use:\n * * A size using `#ofSize(buffer)`\n * * An `ArrayBuffer` object using `#fromArrayBuffer(buffer)`\n * * A plain array using `#fromArray(array)`\n *\n * Note:\n * See the documentation of [WebGLRenderingContext.bufferData](https://developer.mozilla.org/en-US/docs/Web/API/WebGLRenderingContext/bufferData)\n * for more info on buffer usage.\n * @api\n */\nclass WebGLArrayBuffer {\n\n  /**\n   * @param {number} type Buffer type, either ARRAY_BUFFER or ELEMENT_ARRAY_BUFFER.\n   * @param {number=} opt_usage Intended usage, either `STATIC_DRAW`, `STREAM_DRAW` or `DYNAMIC_DRAW`.\n   * Default is `DYNAMIC_DRAW`.\n   */\n  constructor(type, opt_usage) {\n\n    /**\n     * @private\n     * @type {Float32Array|Uint32Array}\n     */\n    this.array = null;\n\n    /**\n     * @private\n     * @type {number}\n     */\n    this.type = type;\n\n    assert(type === ARRAY_BUFFER || type === ELEMENT_ARRAY_BUFFER, 62);\n\n    /**\n     * @private\n     * @type {number}\n     */\n    this.usage = opt_usage !== undefined ? opt_usage : BufferUsage.STATIC_DRAW;\n  }\n\n  /**\n   * Populates the buffer with an array of the given size (all values will be zeroes).\n   * @param {number} size Array size\n   */\n  ofSize(size) {\n    this.array = new (getArrayClassForType(this.type))(size);\n  }\n\n  /**\n   * Populates the buffer with an array of the given size (all values will be zeroes).\n   * @param {Array<number>} array Numerical array\n   */\n  fromArray(array) {\n    this.array = (getArrayClassForType(this.type)).from(array);\n  }\n\n  /**\n   * Populates the buffer with a raw binary array buffer.\n   * @param {ArrayBuffer} buffer Raw binary buffer to populate the array with. Note that this buffer must have been\n   * initialized for the same typed array class.\n   */\n  fromArrayBuffer(buffer) {\n    this.array = new (getArrayClassForType(this.type))(buffer);\n  }\n\n  /**\n   * @return {number} Buffer type.\n   */\n  getType() {\n    return this.type;\n  }\n\n  /**\n   * Will return null if the buffer was not initialized\n   * @return {Float32Array|Uint32Array} Array.\n   */\n  getArray() {\n    return this.array;\n  }\n\n  /**\n   * @return {number} Usage.\n   */\n  getUsage() {\n    return this.usage;\n  }\n\n  /**\n   * Will return 0 if the buffer is not initialized\n   * @return {number} Array size\n   */\n  getSize() {\n    return this.array ? this.array.length : 0;\n  }\n}\n\n/**\n * Returns a typed array constructor based on the given buffer type\n * @param {number} type Buffer type, either ARRAY_BUFFER or ELEMENT_ARRAY_BUFFER.\n * @returns {Float32ArrayConstructor|Uint32ArrayConstructor} The typed array class to use for this buffer.\n */\nexport function getArrayClassForType(type) {\n  switch (type) {\n    case ARRAY_BUFFER:\n      return Float32Array;\n    case ELEMENT_ARRAY_BUFFER:\n      return Uint32Array;\n    default:\n      return Float32Array;\n  }\n}\n\nexport default WebGLArrayBuffer;\n","/**\n * @module ol/webgl/ContextEventType\n */\n\n/**\n * @enum {string}\n */\nexport default {\n  LOST: 'webglcontextlost',\n  RESTORED: 'webglcontextrestored'\n};\n","/**\n * @module ol/vec/mat4\n */\n\n\n/**\n * @return {Array<number>} \"4x4 matrix representing a 3D identity transform.\"\n */\nexport function create() {\n  return [1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1];\n}\n\n\n/**\n * @param {Array<number>} mat4 Flattened 4x4 matrix receiving the result.\n * @param {import(\"../transform.js\").Transform} transform Transformation matrix.\n * @return {Array<number>} \"2D transformation matrix as flattened 4x4 matrix.\"\n */\nexport function fromTransform(mat4, transform) {\n  mat4[0] = transform[0];\n  mat4[1] = transform[1];\n  mat4[4] = transform[2];\n  mat4[5] = transform[3];\n  mat4[12] = transform[4];\n  mat4[13] = transform[5];\n  return mat4;\n}\n","/**\n * @module ol/webgl/PostProcessingPass\n */\n\nconst DEFAULT_VERTEX_SHADER = `\n  precision mediump float;\n  \n  attribute vec2 a_position;\n  varying vec2 v_texCoord;\n  varying vec2 v_screenCoord;\n  \n  uniform vec2 u_screenSize;\n   \n  void main() {\n    v_texCoord = a_position * 0.5 + 0.5;\n    v_screenCoord = v_texCoord * u_screenSize;\n    gl_Position = vec4(a_position, 0.0, 1.0);\n  }\n`;\n\nconst DEFAULT_FRAGMENT_SHADER = `\n  precision mediump float;\n   \n  uniform sampler2D u_image;\n   \n  varying vec2 v_texCoord;\n  varying vec2 v_screenCoord;\n   \n  void main() {\n    gl_FragColor = texture2D(u_image, v_texCoord);\n  }\n`;\n\n/**\n * @typedef {Object} Options\n * @property {WebGLRenderingContext} webGlContext WebGL context; mandatory.\n * @property {number} [scaleRatio] Scale ratio; if < 1, the post process will render to a texture smaller than\n * the main canvas that will then be sampled up (useful for saving resource on blur steps).\n * @property {string} [vertexShader] Vertex shader source\n * @property {string} [fragmentShader] Fragment shader source\n * @property {Object.<string,import(\"./Helper\").UniformValue>} [uniforms] Uniform definitions for the post process step\n */\n\n/**\n * @typedef {Object} UniformInternalDescription\n * @property {import(\"./Helper\").UniformValue} value Value\n * @property {number} location Location\n * @property {WebGLTexture} [texture] Texture\n * @private\n */\n\n/**\n * @classdesc\n * This class is used to define Post Processing passes with custom shaders and uniforms.\n * This is used internally by {@link module:ol/webgl/Helper~WebGLHelper}.\n *\n * Please note that the final output on the DOM canvas is expected to have premultiplied alpha, which means that\n * a pixel which is 100% red with an opacity of 50% must have a color of (r=0.5, g=0, b=0, a=0.5).\n * Failing to provide pixel colors with premultiplied alpha will result in render anomalies.\n *\n * The default post-processing pass does *not* multiply color values with alpha value, it expects color values to be\n * premultiplied.\n *\n * Default shaders are shown hereafter:\n *\n * * Vertex shader:\n *\n *   ```\n *   precision mediump float;\n *\n *   attribute vec2 a_position;\n *   varying vec2 v_texCoord;\n *   varying vec2 v_screenCoord;\n *\n *   uniform vec2 u_screenSize;\n *\n *   void main() {\n *     v_texCoord = a_position * 0.5 + 0.5;\n *     v_screenCoord = v_texCoord * u_screenSize;\n *     gl_Position = vec4(a_position, 0.0, 1.0);\n *   }\n *   ```\n *\n * * Fragment shader:\n *\n *   ```\n *   precision mediump float;\n *\n *   uniform sampler2D u_image;\n *\n *   varying vec2 v_texCoord;\n *   varying vec2 v_screenCoord;\n *\n *   void main() {\n *     gl_FragColor = texture2D(u_image, v_texCoord);\n *   }\n *   ```\n *\n * @api\n */\nclass WebGLPostProcessingPass {\n\n  /**\n   * @param {Options=} options Options.\n   */\n  constructor(options) {\n    this.gl_ = options.webGlContext;\n    const gl = this.gl_;\n\n    this.scaleRatio_ = options.scaleRatio || 1;\n\n    this.renderTargetTexture_ = gl.createTexture();\n    this.renderTargetTextureSize_ = null;\n\n    this.frameBuffer_ = gl.createFramebuffer();\n\n    // compile the program for the frame buffer\n    // TODO: make compilation errors show up\n    const vertexShader = gl.createShader(gl.VERTEX_SHADER);\n    gl.shaderSource(vertexShader, options.vertexShader || DEFAULT_VERTEX_SHADER);\n    gl.compileShader(vertexShader);\n    const fragmentShader = gl.createShader(gl.FRAGMENT_SHADER);\n    gl.shaderSource(fragmentShader, options.fragmentShader || DEFAULT_FRAGMENT_SHADER);\n    gl.compileShader(fragmentShader);\n    this.renderTargetProgram_ = gl.createProgram();\n    gl.attachShader(this.renderTargetProgram_, vertexShader);\n    gl.attachShader(this.renderTargetProgram_, fragmentShader);\n    gl.linkProgram(this.renderTargetProgram_);\n\n    // bind the vertices buffer for the frame buffer\n    this.renderTargetVerticesBuffer_ = gl.createBuffer();\n    const verticesArray = [\n      -1, -1,\n      1, -1,\n      -1, 1,\n      1, -1,\n      1, 1,\n      -1, 1\n    ];\n    gl.bindBuffer(gl.ARRAY_BUFFER, this.renderTargetVerticesBuffer_);\n    gl.bufferData(gl.ARRAY_BUFFER, new Float32Array(verticesArray), gl.STATIC_DRAW);\n\n    this.renderTargetAttribLocation_ = gl.getAttribLocation(this.renderTargetProgram_, 'a_position');\n    this.renderTargetUniformLocation_ = gl.getUniformLocation(this.renderTargetProgram_, 'u_screenSize');\n    this.renderTargetTextureLocation_ = gl.getUniformLocation(this.renderTargetProgram_, 'u_image');\n\n    /**\n     * Holds info about custom uniforms used in the post processing pass\n     * @type {Array<UniformInternalDescription>}\n     * @private\n     */\n    this.uniforms_ = [];\n    options.uniforms && Object.keys(options.uniforms).forEach(function(name) {\n      this.uniforms_.push({\n        value: options.uniforms[name],\n        location: gl.getUniformLocation(this.renderTargetProgram_, name)\n      });\n    }.bind(this));\n  }\n\n  /**\n   * Get the WebGL rendering context\n   * @return {WebGLRenderingContext} The rendering context.\n   * @api\n   */\n  getGL() {\n    return this.gl_;\n  }\n\n  /**\n   * Initialize the render target texture of the post process, make sure it is at the\n   * right size and bind it as a render target for the next draw calls.\n   * The last step to be initialized will be the one where the primitives are rendered.\n   * @param {import(\"../PluggableMap.js\").FrameState} frameState current frame state\n   * @api\n   */\n  init(frameState) {\n    const gl = this.getGL();\n    const canvas = gl.canvas;\n    const size = frameState.size;\n\n    // rendering goes to my buffer\n    gl.bindFramebuffer(gl.FRAMEBUFFER, this.getFrameBuffer());\n    gl.viewport(0, 0, canvas.width * this.scaleRatio_, canvas.height * this.scaleRatio_);\n\n    // if size has changed: adjust canvas & render target texture\n    if (!this.renderTargetTextureSize_ ||\n      this.renderTargetTextureSize_[0] !== size[0] || this.renderTargetTextureSize_[1] !== size[1]) {\n      this.renderTargetTextureSize_ = size;\n\n      // create a new texture\n      const level = 0;\n      const internalFormat = gl.RGBA;\n      const border = 0;\n      const format = gl.RGBA;\n      const type = gl.UNSIGNED_BYTE;\n      const data = null;\n      gl.bindTexture(gl.TEXTURE_2D, this.renderTargetTexture_);\n      gl.texImage2D(gl.TEXTURE_2D, level, internalFormat,\n        canvas.width * this.scaleRatio_, canvas.height * this.scaleRatio_, border,\n        format, type, data);\n\n      gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, gl.LINEAR);\n      gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_S, gl.CLAMP_TO_EDGE);\n      gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_T, gl.CLAMP_TO_EDGE);\n\n      // bind the texture to the framebuffer\n      gl.framebufferTexture2D(gl.FRAMEBUFFER, gl.COLOR_ATTACHMENT0, gl.TEXTURE_2D, this.renderTargetTexture_, 0);\n    }\n  }\n\n  /**\n   * Render to the next postprocessing pass (or to the canvas if final pass).\n   * @param {import(\"../PluggableMap.js\").FrameState} frameState current frame state\n   * @param {WebGLPostProcessingPass} [nextPass] Next pass, optional\n   * @api\n   */\n  apply(frameState, nextPass) {\n    const gl = this.getGL();\n    const canvas = gl.canvas;\n\n    gl.bindFramebuffer(gl.FRAMEBUFFER, nextPass ? nextPass.getFrameBuffer() : null);\n    gl.activeTexture(gl.TEXTURE0);\n    gl.bindTexture(gl.TEXTURE_2D, this.renderTargetTexture_);\n\n    // render the frame buffer to the canvas\n    gl.clearColor(0.0, 0.0, 0.0, 0.0);\n    gl.clear(gl.COLOR_BUFFER_BIT);\n    gl.enable(gl.BLEND);\n    gl.blendFunc(gl.ONE, gl.ONE_MINUS_SRC_ALPHA);\n    gl.viewport(0, 0, canvas.width, canvas.height);\n\n    gl.bindBuffer(gl.ARRAY_BUFFER, this.renderTargetVerticesBuffer_);\n\n    gl.useProgram(this.renderTargetProgram_);\n    gl.enableVertexAttribArray(this.renderTargetAttribLocation_);\n    gl.vertexAttribPointer(this.renderTargetAttribLocation_, 2, gl.FLOAT, false, 0, 0);\n    gl.uniform2f(this.renderTargetUniformLocation_, canvas.width, canvas.height);\n    gl.uniform1i(this.renderTargetTextureLocation_, 0);\n\n    this.applyUniforms(frameState);\n\n    gl.drawArrays(gl.TRIANGLES, 0, 6);\n  }\n\n  /**\n   * @returns {WebGLFramebuffer} Frame buffer\n   * @api\n   */\n  getFrameBuffer() {\n    return this.frameBuffer_;\n  }\n\n  /**\n   * Sets the custom uniforms based on what was given in the constructor.\n   * @param {import(\"../PluggableMap.js\").FrameState} frameState Frame state.\n   * @private\n   */\n  applyUniforms(frameState) {\n    const gl = this.getGL();\n\n    let value;\n    let textureSlot = 1;\n    this.uniforms_.forEach(function(uniform) {\n      value = typeof uniform.value === 'function' ? uniform.value(frameState) : uniform.value;\n\n      // apply value based on type\n      if (value instanceof HTMLCanvasElement || value instanceof ImageData) {\n        // create a texture & put data\n        if (!uniform.texture) {\n          uniform.texture = gl.createTexture();\n        }\n        gl.activeTexture(gl[`TEXTURE${textureSlot}`]);\n        gl.bindTexture(gl.TEXTURE_2D, uniform.texture);\n        gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, gl.LINEAR);\n        gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_S, gl.CLAMP_TO_EDGE);\n        gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_T, gl.CLAMP_TO_EDGE);\n\n        if (value instanceof ImageData) {\n          gl.texImage2D(gl.TEXTURE_2D, 0, gl.RGBA, gl.RGBA, value.width, value.height, 0,\n            gl.UNSIGNED_BYTE, new Uint8Array(value.data));\n        } else {\n          gl.texImage2D(gl.TEXTURE_2D, 0, gl.RGBA, gl.RGBA, gl.UNSIGNED_BYTE, value);\n        }\n\n        // fill texture slots\n        gl.uniform1i(uniform.location, textureSlot++);\n\n      } else if (Array.isArray(value)) {\n        switch (value.length) {\n          case 2:\n            gl.uniform2f(uniform.location, value[0], value[1]);\n            return;\n          case 3:\n            gl.uniform3f(uniform.location, value[0], value[1], value[2]);\n            return;\n          case 4:\n            gl.uniform4f(uniform.location, value[0], value[1], value[2], value[3]);\n            return;\n          default: return;\n        }\n      } else if (typeof value === 'number') {\n        gl.uniform1f(uniform.location, value);\n      }\n    });\n  }\n}\n\nexport default WebGLPostProcessingPass;\n","/**\n * @module ol/webgl/Helper\n */\nimport {getUid} from '../util.js';\nimport Disposable from '../Disposable.js';\nimport {clear} from '../obj.js';\nimport ContextEventType from '../webgl/ContextEventType.js';\nimport {\n  compose as composeTransform,\n  create as createTransform,\n  reset as resetTransform,\n  rotate as rotateTransform,\n  scale as scaleTransform\n} from '../transform.js';\nimport {create, fromTransform} from '../vec/mat4.js';\nimport WebGLPostProcessingPass from './PostProcessingPass.js';\nimport {FLOAT, getContext, getSupportedExtensions, UNSIGNED_BYTE, UNSIGNED_INT, UNSIGNED_SHORT} from '../webgl.js';\nimport {includes} from '../array.js';\nimport {assert} from '../asserts.js';\n\n\n/**\n * @typedef {Object} BufferCacheEntry\n * @property {import(\"./Buffer.js\").default} buffer\n * @property {WebGLBuffer} webGlBuffer\n */\n\n/**\n * Shader types, either `FRAGMENT_SHADER` or `VERTEX_SHADER`.\n * @enum {number}\n */\nexport const ShaderType = {\n  FRAGMENT_SHADER: 0x8B30,\n  VERTEX_SHADER: 0x8B31\n};\n\n/**\n * Uniform names used in the default shaders: `PROJECTION_MATRIX`, `OFFSET_SCALE_MATRIX`.\n * and `OFFSET_ROTATION_MATRIX`.\n * @enum {string}\n */\nexport const DefaultUniform = {\n  PROJECTION_MATRIX: 'u_projectionMatrix',\n  OFFSET_SCALE_MATRIX: 'u_offsetScaleMatrix',\n  OFFSET_ROTATION_MATRIX: 'u_offsetRotateMatrix'\n};\n\n/**\n * Attribute types, either `UNSIGNED_BYTE`, `UNSIGNED_SHORT`, `UNSIGNED_INT` or `FLOAT`\n * Note: an attribute stored in a `Float32Array` should be of type `FLOAT`.\n * @enum {number}\n */\nexport const AttributeType = {\n  UNSIGNED_BYTE: UNSIGNED_BYTE,\n  UNSIGNED_SHORT: UNSIGNED_SHORT,\n  UNSIGNED_INT: UNSIGNED_INT,\n  FLOAT: FLOAT\n};\n\n/**\n * Description of an attribute in a buffer\n * @typedef {Object} AttributeDescription\n * @property {string} name Attribute name to use in shaders\n * @property {number} size Number of components per attributes\n * @property {AttributeType} [type] Attribute type, i.e. number of bytes used to store the value. This is\n * determined by the class of typed array which the buffer uses (eg. `Float32Array` for a `FLOAT` attribute).\n * Default is `FLOAT`.\n */\n\n/**\n * @typedef {number|Array<number>|HTMLCanvasElement|HTMLImageElement|ImageData|import(\"../transform\").Transform} UniformLiteralValue\n */\n\n/**\n * Uniform value can be a number, array of numbers (2 to 4), canvas element or a callback returning\n * one of the previous types.\n * @typedef {UniformLiteralValue|function(import(\"../PluggableMap.js\").FrameState):UniformLiteralValue} UniformValue\n */\n\n/**\n * @typedef {Object} PostProcessesOptions\n * @property {number} [scaleRatio] Scale ratio; if < 1, the post process will render to a texture smaller than\n * the main canvas which will then be sampled up (useful for saving resource on blur steps).\n * @property {string} [vertexShader] Vertex shader source\n * @property {string} [fragmentShader] Fragment shader source\n * @property {Object.<string,UniformValue>} [uniforms] Uniform definitions for the post process step\n */\n\n/**\n * @typedef {Object} Options\n * @property {Object.<string,UniformValue>} [uniforms] Uniform definitions; property names must match the uniform\n * names in the provided or default shaders.\n * @property {Array<PostProcessesOptions>} [postProcesses] Post-processes definitions\n */\n\n/**\n * @typedef {Object} UniformInternalDescription\n * @property {string} name Name\n * @property {UniformValue=} value Value\n * @property {WebGLTexture} [texture] Texture\n * @private\n */\n\n/**\n * @classdesc\n * This class is intended to provide low-level functions related to WebGL rendering, so that accessing\n * directly the WebGL API should not be required anymore.\n *\n * Several operations are handled by the `WebGLHelper` class:\n *\n * ### Define custom shaders and uniforms\n *\n *   *Shaders* are low-level programs executed on the GPU and written in GLSL. There are two types of shaders:\n *\n *   Vertex shaders are used to manipulate the position and attribute of *vertices* of rendered primitives (ie. corners of a square).\n *   Outputs are:\n *\n *   * `gl_Position`: position of the vertex in screen space\n *\n *   * Varyings usually prefixed with `v_` are passed on to the fragment shader\n *\n *   Fragment shaders are used to control the actual color of the pixels drawn on screen. Their only output is `gl_FragColor`.\n *\n *   Both shaders can take *uniforms* or *attributes* as input. Attributes are explained later. Uniforms are common, read-only values that\n *   can be changed at every frame and can be of type float, arrays of float or images.\n *\n *   Shaders must be compiled and assembled into a program like so:\n *   ```js\n *   // here we simply create two shaders and assemble them in a program which is then used\n *   // for subsequent rendering calls\n *   const vertexShader = new WebGLVertex(VERTEX_SHADER);\n *   const fragmentShader = new WebGLFragment(FRAGMENT_SHADER);\n *   const program = this.context.getProgram(fragmentShader, vertexShader);\n *   helper.useProgram(this.program);\n *   ```\n *\n *   Uniforms are defined using the `uniforms` option and can either be explicit values or callbacks taking the frame state as argument.\n *   You can also change their value along the way like so:\n *   ```js\n *   helper.setUniformFloatValue('u_value', valueAsNumber);\n *   ```\n *\n * ### Defining post processing passes\n *\n *   *Post processing* describes the act of rendering primitives to a texture, and then rendering this texture to the final canvas\n *   while applying special effects in screen space.\n *   Typical uses are: blurring, color manipulation, depth of field, filtering...\n *\n *   The `WebGLHelper` class offers the possibility to define post processes at creation time using the `postProcesses` option.\n *   A post process step accepts the following options:\n *\n *   * `fragmentShader` and `vertexShader`: text literals in GLSL language that will be compiled and used in the post processing step.\n *   * `uniforms`: uniforms can be defined for the post processing steps just like for the main render.\n *   * `scaleRatio`: allows using an intermediate texture smaller or higher than the final canvas in the post processing step.\n *     This is typically used in blur steps to reduce the performance overhead by using an already downsampled texture as input.\n *\n *   The {@link module:ol/webgl/PostProcessingPass~WebGLPostProcessingPass} class is used internally, refer to its documentation for more info.\n *\n * ### Binding WebGL buffers and flushing data into them\n *\n *   Data that must be passed to the GPU has to be transferred using {@link module:ol/webgl/Buffer~WebGLArrayBuffer} objects.\n *   A buffer has to be created only once, but must be bound every time the buffer content will be used for rendering.\n *   This is done using {@link bindBuffer}.\n *   When the buffer's array content has changed, the new data has to be flushed to the GPU memory; this is done using\n *   {@link flushBufferData}. Note: this operation is expensive and should be done as infrequently as possible.\n *\n *   When binding an array buffer, a `target` parameter must be given: it should be either {@link module:ol/webgl.ARRAY_BUFFER}\n *   (if the buffer contains vertices data) or {@link module:ol/webgl.ELEMENT_ARRAY_BUFFER} (if the buffer contains indices data).\n *\n *   Examples below:\n *   ```js\n *   // at initialization phase\n *   const verticesBuffer = new WebGLArrayBuffer([], DYNAMIC_DRAW);\n *   const indicesBuffer = new WebGLArrayBuffer([], DYNAMIC_DRAW);\n *\n *   // when array values have changed\n *   helper.flushBufferData(ARRAY_BUFFER, this.verticesBuffer);\n *   helper.flushBufferData(ELEMENT_ARRAY_BUFFER, this.indicesBuffer);\n *\n *   // at rendering phase\n *   helper.bindBuffer(ARRAY_BUFFER, this.verticesBuffer);\n *   helper.bindBuffer(ELEMENT_ARRAY_BUFFER, this.indicesBuffer);\n *   ```\n *\n * ### Specifying attributes\n *\n *   The GPU only receives the data as arrays of numbers. These numbers must be handled differently depending on what it describes (position, texture coordinate...).\n *   Attributes are used to specify these uses. Use {@link enableAttributeArray_} and either\n *   the default attribute names in {@link module:ol/webgl/Helper.DefaultAttrib} or custom ones.\n *\n *   Please note that you will have to specify the type and offset of the attributes in the data array. You can refer to the documentation of [WebGLRenderingContext.vertexAttribPointer](https://developer.mozilla.org/en-US/docs/Web/API/WebGLRenderingContext/vertexAttribPointer) for more explanation.\n *   ```js\n *   // here we indicate that the data array has the following structure:\n *   // [posX, posY, offsetX, offsetY, texCoordU, texCoordV, posX, posY, ...]\n *   helper.enableAttributes([\n *     {\n *        name: 'a_position',\n *        size: 2\n *     },\n *     {\n *       name: 'a_offset',\n *       size: 2\n *     },\n *     {\n *       name: 'a_texCoord',\n *       size: 2\n *     }\n *   ])\n *   ```\n *\n * ### Rendering primitives\n *\n *   Once all the steps above have been achieved, rendering primitives to the screen is done using {@link prepareDraw}, {@link drawElements} and {@link finalizeDraw}.\n *   ```js\n *   // frame preparation step\n *   helper.prepareDraw(frameState);\n *\n *   // call this for every data array that has to be rendered on screen\n *   helper.drawElements(0, this.indicesBuffer.getArray().length);\n *\n *   // finalize the rendering by applying post processes\n *   helper.finalizeDraw(frameState);\n *   ```\n *\n * For an example usage of this class, refer to {@link module:ol/renderer/webgl/PointsLayer~WebGLPointsLayerRenderer}.\n *\n *\n * @api\n */\nclass WebGLHelper extends Disposable {\n  /**\n   * @param {Options=} opt_options Options.\n   */\n  constructor(opt_options) {\n    super();\n    const options = opt_options || {};\n\n    /** @private */\n    this.boundHandleWebGLContextLost_ = this.handleWebGLContextLost.bind(this);\n\n    /** @private */\n    this.boundHandleWebGLContextRestored_ = this.handleWebGLContextRestored.bind(this);\n\n    /**\n     * @private\n     * @type {HTMLCanvasElement}\n     */\n    this.canvas_ = document.createElement('canvas');\n    this.canvas_.style.position = 'absolute';\n\n\n    /**\n     * @private\n     * @type {WebGLRenderingContext}\n     */\n    this.gl_ = getContext(this.canvas_);\n    const gl = this.getGL();\n\n    /**\n     * @private\n     * @type {!Object<string, BufferCacheEntry>}\n     */\n    this.bufferCache_ = {};\n\n    /**\n     * @private\n     * @type {!Array<WebGLShader>}\n     */\n    this.shaderCache_ = [];\n\n    /**\n     * @private\n     * @type {!Array<WebGLProgram>}\n     */\n    this.programCache_ = [];\n\n    /**\n     * @private\n     * @type {WebGLProgram}\n     */\n    this.currentProgram_ = null;\n\n    assert(includes(getSupportedExtensions(), 'OES_element_index_uint'), 63);\n    gl.getExtension('OES_element_index_uint');\n\n    this.canvas_.addEventListener(ContextEventType.LOST, this.boundHandleWebGLContextLost_);\n    this.canvas_.addEventListener(ContextEventType.RESTORED, this.boundHandleWebGLContextRestored_);\n\n    /**\n     * @private\n     * @type {import(\"../transform.js\").Transform}\n     */\n    this.offsetRotateMatrix_ = createTransform();\n\n    /**\n     * @private\n     * @type {import(\"../transform.js\").Transform}\n     */\n    this.offsetScaleMatrix_ = createTransform();\n\n    /**\n     * @private\n     * @type {Array<number>}\n     */\n    this.tmpMat4_ = create();\n\n    /**\n     * @private\n     * @type {Object.<string, WebGLUniformLocation>}\n     */\n    this.uniformLocations_ = {};\n\n    /**\n     * @private\n     * @type {Object.<string, number>}\n     */\n    this.attribLocations_ = {};\n\n    /**\n     * Holds info about custom uniforms used in the post processing pass.\n     * If the uniform is a texture, the WebGL Texture object will be stored here.\n     * @type {Array<UniformInternalDescription>}\n     * @private\n     */\n    this.uniforms_ = [];\n    if (options.uniforms) {\n      for (const name in options.uniforms) {\n        this.uniforms_.push({\n          name: name,\n          value: options.uniforms[name]\n        });\n      }\n    }\n\n    /**\n     * An array of PostProcessingPass objects is kept in this variable, built from the steps provided in the\n     * options. If no post process was given, a default one is used (so as not to have to make an exception to\n     * the frame buffer logic).\n     * @type {Array<WebGLPostProcessingPass>}\n     * @private\n     */\n    this.postProcessPasses_ = options.postProcesses ? options.postProcesses.map(function(options) {\n      return new WebGLPostProcessingPass({\n        webGlContext: gl,\n        scaleRatio: options.scaleRatio,\n        vertexShader: options.vertexShader,\n        fragmentShader: options.fragmentShader,\n        uniforms: options.uniforms\n      });\n    }) : [new WebGLPostProcessingPass({webGlContext: gl})];\n\n    /**\n     * @type {string|null}\n     * @private\n     */\n    this.shaderCompileErrors_ = null;\n  }\n\n  /**\n   * Just bind the buffer if it's in the cache. Otherwise create\n   * the WebGL buffer, bind it, populate it, and add an entry to\n   * the cache.\n   * @param {import(\"./Buffer\").default} buffer Buffer.\n   * @api\n   */\n  bindBuffer(buffer) {\n    const gl = this.getGL();\n    const bufferKey = getUid(buffer);\n    let bufferCache = this.bufferCache_[bufferKey];\n    if (!bufferCache) {\n      const webGlBuffer = gl.createBuffer();\n      bufferCache = this.bufferCache_[bufferKey] = {\n        buffer: buffer,\n        webGlBuffer: webGlBuffer\n      };\n    }\n    gl.bindBuffer(buffer.getType(), bufferCache.webGlBuffer);\n  }\n\n  /**\n   * Update the data contained in the buffer array; this is required for the\n   * new data to be rendered\n   * @param {import(\"./Buffer\").default} buffer Buffer.\n   * @api\n   */\n  flushBufferData(buffer) {\n    const gl = this.getGL();\n    this.bindBuffer(buffer);\n    gl.bufferData(buffer.getType(), buffer.getArray(), buffer.getUsage());\n  }\n\n  /**\n   * @param {import(\"./Buffer.js\").default} buf Buffer.\n   */\n  deleteBuffer(buf) {\n    const gl = this.getGL();\n    const bufferKey = getUid(buf);\n    const bufferCacheEntry = this.bufferCache_[bufferKey];\n    if (!gl.isContextLost()) {\n      gl.deleteBuffer(bufferCacheEntry.buffer);\n    }\n    delete this.bufferCache_[bufferKey];\n  }\n\n  /**\n   * @inheritDoc\n   */\n  disposeInternal() {\n    this.canvas_.removeEventListener(ContextEventType.LOST, this.boundHandleWebGLContextLost_);\n    this.canvas_.removeEventListener(ContextEventType.RESTORED, this.boundHandleWebGLContextRestored_);\n    const gl = this.getGL();\n    if (!gl.isContextLost()) {\n      for (const key in this.bufferCache_) {\n        gl.deleteBuffer(this.bufferCache_[key].buffer);\n      }\n      for (const key in this.programCache_) {\n        gl.deleteProgram(this.programCache_[key]);\n      }\n      for (const key in this.shaderCache_) {\n        gl.deleteShader(this.shaderCache_[key]);\n      }\n    }\n  }\n\n  /**\n   * Clear the buffer & set the viewport to draw.\n   * Post process passes will be initialized here, the first one being bound as a render target for\n   * subsequent draw calls.\n   * @param {import(\"../PluggableMap.js\").FrameState} frameState current frame state\n   * @api\n   */\n  prepareDraw(frameState) {\n    const gl = this.getGL();\n    const canvas = this.getCanvas();\n    const size = frameState.size;\n    const pixelRatio = frameState.pixelRatio;\n\n    canvas.width = size[0] * pixelRatio;\n    canvas.height = size[1] * pixelRatio;\n    canvas.style.width = size[0] + 'px';\n    canvas.style.height = size[1] + 'px';\n\n    gl.useProgram(this.currentProgram_);\n\n    // loop backwards in post processes list\n    for (let i = this.postProcessPasses_.length - 1; i >= 0; i--) {\n      this.postProcessPasses_[i].init(frameState);\n    }\n\n    gl.bindTexture(gl.TEXTURE_2D, null);\n\n    gl.clearColor(0.0, 0.0, 0.0, 0.0);\n    gl.clear(gl.COLOR_BUFFER_BIT);\n    gl.enable(gl.BLEND);\n    gl.blendFunc(gl.ONE, gl.ONE_MINUS_SRC_ALPHA);\n\n    gl.useProgram(this.currentProgram_);\n    this.applyFrameState(frameState);\n    this.applyUniforms(frameState);\n  }\n\n  /**\n   * Clear the render target & bind it for future draw operations.\n   * This is similar to `prepareDraw`, only post processes will not be applied.\n   * Note: the whole viewport will be drawn to the render target, regardless of its size.\n   * @param {import(\"../PluggableMap.js\").FrameState} frameState current frame state\n   * @param {import(\"./RenderTarget.js\").default} renderTarget Render target to draw to\n   * @param {boolean} [opt_disableAlphaBlend] If true, no alpha blending will happen.\n   */\n  prepareDrawToRenderTarget(frameState, renderTarget, opt_disableAlphaBlend) {\n    const gl = this.getGL();\n\n    gl.bindFramebuffer(gl.FRAMEBUFFER, renderTarget.getFramebuffer());\n    gl.viewport(0, 0, frameState.size[0], frameState.size[1]);\n    gl.bindTexture(gl.TEXTURE_2D, renderTarget.getTexture());\n    gl.clearColor(0.0, 0.0, 0.0, 0.0);\n    gl.clear(gl.COLOR_BUFFER_BIT);\n    gl.enable(gl.BLEND);\n    gl.blendFunc(gl.ONE, opt_disableAlphaBlend ? gl.ZERO : gl.ONE_MINUS_SRC_ALPHA);\n\n    gl.useProgram(this.currentProgram_);\n    this.applyFrameState(frameState);\n    this.applyUniforms(frameState);\n  }\n\n  /**\n   * Execute a draw call based on the currently bound program, texture, buffers, attributes.\n   * @param {number} start Start index.\n   * @param {number} end End index.\n   * @api\n   */\n  drawElements(start, end) {\n    const gl = this.getGL();\n    const elementType = gl.UNSIGNED_INT;\n    const elementSize = 4;\n\n    const numItems = end - start;\n    const offsetInBytes = start * elementSize;\n    gl.drawElements(gl.TRIANGLES, numItems, elementType, offsetInBytes);\n  }\n\n  /**\n   * Apply the successive post process passes which will eventually render to the actual canvas.\n   * @param {import(\"../PluggableMap.js\").FrameState} frameState current frame state\n   * @api\n   */\n  finalizeDraw(frameState) {\n    // apply post processes using the next one as target\n    for (let i = 0; i < this.postProcessPasses_.length; i++) {\n      this.postProcessPasses_[i].apply(frameState, this.postProcessPasses_[i + 1] || null);\n    }\n  }\n\n  /**\n   * @return {HTMLCanvasElement} Canvas.\n   * @api\n   */\n  getCanvas() {\n    return this.canvas_;\n  }\n\n  /**\n   * Get the WebGL rendering context\n   * @return {WebGLRenderingContext} The rendering context.\n   * @api\n   */\n  getGL() {\n    return this.gl_;\n  }\n\n  /**\n   * Sets the default matrix uniforms for a given frame state. This is called internally in `prepareDraw`.\n   * @param {import(\"../PluggableMap.js\").FrameState} frameState Frame state.\n   * @private\n   */\n  applyFrameState(frameState) {\n    const size = frameState.size;\n    const rotation = frameState.viewState.rotation;\n\n    const offsetScaleMatrix = resetTransform(this.offsetScaleMatrix_);\n    scaleTransform(offsetScaleMatrix, 2 / size[0], 2 / size[1]);\n\n    const offsetRotateMatrix = resetTransform(this.offsetRotateMatrix_);\n    if (rotation !== 0) {\n      rotateTransform(offsetRotateMatrix, -rotation);\n    }\n\n    this.setUniformMatrixValue(DefaultUniform.OFFSET_SCALE_MATRIX, fromTransform(this.tmpMat4_, offsetScaleMatrix));\n    this.setUniformMatrixValue(DefaultUniform.OFFSET_ROTATION_MATRIX, fromTransform(this.tmpMat4_, offsetRotateMatrix));\n  }\n\n  /**\n   * Sets the custom uniforms based on what was given in the constructor. This is called internally in `prepareDraw`.\n   * @param {import(\"../PluggableMap.js\").FrameState} frameState Frame state.\n   * @private\n   */\n  applyUniforms(frameState) {\n    const gl = this.getGL();\n\n    let value;\n    let textureSlot = 0;\n    this.uniforms_.forEach(function(uniform) {\n      value = typeof uniform.value === 'function' ? uniform.value(frameState) : uniform.value;\n\n      // apply value based on type\n      if (value instanceof HTMLCanvasElement || value instanceof HTMLImageElement || value instanceof ImageData) {\n        // create a texture & put data\n        if (!uniform.texture) {\n          uniform.texture = gl.createTexture();\n        }\n        gl.activeTexture(gl[`TEXTURE${textureSlot}`]);\n        gl.bindTexture(gl.TEXTURE_2D, uniform.texture);\n        gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, gl.LINEAR);\n        gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_S, gl.CLAMP_TO_EDGE);\n        gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_T, gl.CLAMP_TO_EDGE);\n\n        const imageReady = !(value instanceof HTMLImageElement) || /** @type {HTMLImageElement} */(value).complete;\n        if (imageReady) {\n          gl.texImage2D(gl.TEXTURE_2D, 0, gl.RGBA, gl.RGBA, gl.UNSIGNED_BYTE, value);\n        }\n\n        // fill texture slots by increasing index\n        gl.uniform1i(this.getUniformLocation(uniform.name), textureSlot++);\n\n      } else if (Array.isArray(value) && value.length === 6) {\n        this.setUniformMatrixValue(uniform.name, fromTransform(this.tmpMat4_, value));\n      } else if (Array.isArray(value) && value.length <= 4) {\n        switch (value.length) {\n          case 2:\n            gl.uniform2f(this.getUniformLocation(uniform.name), value[0], value[1]);\n            return;\n          case 3:\n            gl.uniform3f(this.getUniformLocation(uniform.name), value[0], value[1], value[2]);\n            return;\n          case 4:\n            gl.uniform4f(this.getUniformLocation(uniform.name), value[0], value[1], value[2], value[3]);\n            return;\n          default:\n            return;\n        }\n      } else if (typeof value === 'number') {\n        gl.uniform1f(this.getUniformLocation(uniform.name), value);\n      }\n    }.bind(this));\n  }\n\n  /**\n   * Use a program.  If the program is already in use, this will return `false`.\n   * @param {WebGLProgram} program Program.\n   * @return {boolean} Changed.\n   * @api\n   */\n  useProgram(program) {\n    if (program == this.currentProgram_) {\n      return false;\n    } else {\n      const gl = this.getGL();\n      gl.useProgram(program);\n      this.currentProgram_ = program;\n      this.uniformLocations_ = {};\n      this.attribLocations_ = {};\n      return true;\n    }\n  }\n\n  /**\n   * Will attempt to compile a vertex or fragment shader based on source\n   * On error, the shader will be returned but\n   * `gl.getShaderParameter(shader, gl.COMPILE_STATUS)` will return `true`\n   * Use `gl.getShaderInfoLog(shader)` to have details\n   * @param {string} source Shader source\n   * @param {ShaderType} type VERTEX_SHADER or FRAGMENT_SHADER\n   * @return {WebGLShader} Shader object\n   */\n  compileShader(source, type) {\n    const gl = this.getGL();\n    const shader = gl.createShader(type);\n    gl.shaderSource(shader, source);\n    gl.compileShader(shader);\n    this.shaderCache_.push(shader);\n    return shader;\n  }\n\n  /**\n   * Create a program for a vertex and fragment shader. The shaders compilation may have failed:\n   * use `WebGLHelper.getShaderCompileErrors()`to have details if any.\n   * @param {string} fragmentShaderSource Fragment shader source.\n   * @param {string} vertexShaderSource Vertex shader source.\n   * @return {WebGLProgram} Program\n   * @api\n   */\n  getProgram(fragmentShaderSource, vertexShaderSource) {\n    const gl = this.getGL();\n\n    const fragmentShader = this.compileShader(fragmentShaderSource, gl.FRAGMENT_SHADER);\n    const vertexShader = this.compileShader(vertexShaderSource, gl.VERTEX_SHADER);\n    this.shaderCompileErrors_ = null;\n\n    if (gl.getShaderInfoLog(fragmentShader)) {\n      this.shaderCompileErrors_ =\n        `Fragment shader compilation failed:\\n${gl.getShaderInfoLog(fragmentShader)}`;\n    }\n    if (gl.getShaderInfoLog(vertexShader)) {\n      this.shaderCompileErrors_ = (this.shaderCompileErrors_ || '') +\n        `Vertex shader compilation failed:\\n${gl.getShaderInfoLog(vertexShader)}`;\n    }\n\n    const program = gl.createProgram();\n    gl.attachShader(program, fragmentShader);\n    gl.attachShader(program, vertexShader);\n    gl.linkProgram(program);\n    this.programCache_.push(program);\n    return program;\n  }\n\n  /**\n   * Will return the last shader compilation errors. If no error happened, will return null;\n   * @return {string|null} Errors description, or null if last compilation was successful\n   * @api\n   */\n  getShaderCompileErrors() {\n    return this.shaderCompileErrors_;\n  }\n\n  /**\n   * Will get the location from the shader or the cache\n   * @param {string} name Uniform name\n   * @return {WebGLUniformLocation} uniformLocation\n   * @api\n   */\n  getUniformLocation(name) {\n    if (this.uniformLocations_[name] === undefined) {\n      this.uniformLocations_[name] = this.getGL().getUniformLocation(this.currentProgram_, name);\n    }\n    return this.uniformLocations_[name];\n  }\n\n  /**\n   * Will get the location from the shader or the cache\n   * @param {string} name Attribute name\n   * @return {number} attribLocation\n   * @api\n   */\n  getAttributeLocation(name) {\n    if (this.attribLocations_[name] === undefined) {\n      this.attribLocations_[name] = this.getGL().getAttribLocation(this.currentProgram_, name);\n    }\n    return this.attribLocations_[name];\n  }\n\n  /**\n   * Modifies the given transform to apply the rotation/translation/scaling of the given frame state.\n   * The resulting transform can be used to convert world space coordinates to view coordinates.\n   * @param {import(\"../PluggableMap.js\").FrameState} frameState Frame state.\n   * @param {import(\"../transform\").Transform} transform Transform to update.\n   * @return {import(\"../transform\").Transform} The updated transform object.\n   * @api\n   */\n  makeProjectionTransform(frameState, transform) {\n    const size = frameState.size;\n    const rotation = frameState.viewState.rotation;\n    const resolution = frameState.viewState.resolution;\n    const center = frameState.viewState.center;\n\n    resetTransform(transform);\n    composeTransform(transform,\n      0, 0,\n      2 / (resolution * size[0]), 2 / (resolution * size[1]),\n      -rotation,\n      -center[0], -center[1]\n    );\n    return transform;\n  }\n\n  /**\n   * Give a value for a standard float uniform\n   * @param {string} uniform Uniform name\n   * @param {number} value Value\n   * @api\n   */\n  setUniformFloatValue(uniform, value) {\n    this.getGL().uniform1f(this.getUniformLocation(uniform), value);\n  }\n\n  /**\n   * Give a value for a standard matrix4 uniform\n   * @param {string} uniform Uniform name\n   * @param {Array<number>} value Matrix value\n   * @api\n   */\n  setUniformMatrixValue(uniform, value) {\n    this.getGL().uniformMatrix4fv(this.getUniformLocation(uniform), false, value);\n  }\n\n  /**\n   * Will set the currently bound buffer to an attribute of the shader program. Used by `#enableAttributes`\n   * internally.\n   * @param {string} attribName Attribute name\n   * @param {number} size Number of components per attributes\n   * @param {number} type UNSIGNED_INT, UNSIGNED_BYTE, UNSIGNED_SHORT or FLOAT\n   * @param {number} stride Stride in bytes (0 means attribs are packed)\n   * @param {number} offset Offset in bytes\n   * @private\n   */\n  enableAttributeArray_(attribName, size, type, stride, offset) {\n    const location = this.getAttributeLocation(attribName);\n    // the attribute has not been found in the shaders; do not enable it\n    if (location < 0) {\n      return;\n    }\n    this.getGL().enableVertexAttribArray(location);\n    this.getGL().vertexAttribPointer(location, size, type,\n      false, stride, offset);\n  }\n\n  /**\n   * Will enable the following attributes to be read from the currently bound buffer,\n   * i.e. tell the GPU where to read the different attributes in the buffer. An error in the\n   * size/type/order of attributes will most likely break the rendering and throw a WebGL exception.\n   * @param {Array<AttributeDescription>} attributes Ordered list of attributes to read from the buffer\n   * @api\n   */\n  enableAttributes(attributes) {\n    const stride = computeAttributesStride(attributes);\n    let offset = 0;\n    for (let i = 0; i < attributes.length; i++) {\n      const attr = attributes[i];\n      this.enableAttributeArray_(attr.name, attr.size, attr.type || FLOAT, stride, offset);\n      offset += attr.size * getByteSizeFromType(attr.type);\n    }\n  }\n\n  /**\n   * WebGL context was lost\n   * @private\n   */\n  handleWebGLContextLost() {\n    clear(this.bufferCache_);\n    clear(this.shaderCache_);\n    clear(this.programCache_);\n    this.currentProgram_ = null;\n  }\n\n  /**\n   * WebGL context was restored\n   * @private\n   */\n  handleWebGLContextRestored() {\n  }\n\n  // TODO: shutdown program\n\n  /**\n   * Will create or reuse a given webgl texture and apply the given size. If no image data\n   * specified, the texture will be empty, otherwise image data will be used and the `size`\n   * parameter will be ignored.\n   * Note: wrap parameters are set to clamp to edge, min filter is set to linear.\n   * @param {Array<number>} size Expected size of the texture\n   * @param {ImageData|HTMLImageElement|HTMLCanvasElement} [opt_data] Image data/object to bind to the texture\n   * @param {WebGLTexture} [opt_texture] Existing texture to reuse\n   * @return {WebGLTexture} The generated texture\n   * @api\n   */\n  createTexture(size, opt_data, opt_texture) {\n    const gl = this.getGL();\n    const texture = opt_texture || gl.createTexture();\n\n    // set params & size\n    const level = 0;\n    const internalFormat = gl.RGBA;\n    const border = 0;\n    const format = gl.RGBA;\n    const type = gl.UNSIGNED_BYTE;\n    gl.bindTexture(gl.TEXTURE_2D, texture);\n    if (opt_data) {\n      gl.texImage2D(gl.TEXTURE_2D, level, internalFormat, format, type, opt_data);\n    } else {\n      gl.texImage2D(gl.TEXTURE_2D, level, internalFormat, size[0], size[1], border, format, type, null);\n    }\n    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, gl.LINEAR);\n    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_S, gl.CLAMP_TO_EDGE);\n    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_T, gl.CLAMP_TO_EDGE);\n\n    return texture;\n  }\n}\n\n/**\n * Compute a stride in bytes based on a list of attributes\n * @param {Array<AttributeDescription>} attributes Ordered list of attributes\n * @returns {number} Stride, ie amount of values for each vertex in the vertex buffer\n * @api\n */\nexport function computeAttributesStride(attributes) {\n  let stride = 0;\n  for (let i = 0; i < attributes.length; i++) {\n    const attr = attributes[i];\n    stride += attr.size * getByteSizeFromType(attr.type);\n  }\n  return stride;\n}\n\n/**\n * Computes the size in byte of an attribute type.\n * @param {AttributeType} type Attribute type\n * @returns {number} The size in bytes\n */\nfunction getByteSizeFromType(type) {\n  switch (type) {\n    case AttributeType.UNSIGNED_BYTE: return Uint8Array.BYTES_PER_ELEMENT;\n    case AttributeType.UNSIGNED_SHORT: return Uint16Array.BYTES_PER_ELEMENT;\n    case AttributeType.UNSIGNED_INT: return Uint32Array.BYTES_PER_ELEMENT;\n    case AttributeType.FLOAT:\n    default: return Float32Array.BYTES_PER_ELEMENT;\n  }\n}\n\nexport default WebGLHelper;\n","/**\n * @module ol/renderer/webgl/Layer\n */\nimport LayerRenderer from '../Layer.js';\nimport WebGLHelper from '../../webgl/Helper.js';\n\n\n/**\n * @enum {string}\n */\nexport const WebGLWorkerMessageType = {\n  GENERATE_BUFFERS: 'GENERATE_BUFFERS'\n};\n\n/**\n * @typedef {Object} WebGLWorkerGenerateBuffersMessage\n * This message will trigger the generation of a vertex and an index buffer based on the given render instructions.\n * When the buffers are generated, the worked will send a message of the same type to the main thread, with\n * the generated buffers in it.\n * Note that any addition properties present in the message *will* be sent back to the main thread.\n * @property {WebGLWorkerMessageType} type Message type\n * @property {ArrayBuffer} renderInstructions Render instructions raw binary buffer.\n * @property {ArrayBuffer} [vertexBuffer] Vertices array raw binary buffer (sent by the worker).\n * @property {ArrayBuffer} [indexBuffer] Indices array raw binary buffer (sent by the worker).\n * @property {number} [customAttributesCount] Amount of custom attributes count in the render instructions.\n */\n\n/**\n * @typedef {Object} PostProcessesOptions\n * @property {number} [scaleRatio] Scale ratio; if < 1, the post process will render to a texture smaller than\n * the main canvas that will then be sampled up (useful for saving resource on blur steps).\n * @property {string} [vertexShader] Vertex shader source\n * @property {string} [fragmentShader] Fragment shader source\n * @property {Object.<string,import(\"../../webgl/Helper\").UniformValue>} [uniforms] Uniform definitions for the post process step\n */\n\n/**\n * @typedef {Object} Options\n * @property {Object.<string,import(\"../../webgl/Helper\").UniformValue>} [uniforms] Uniform definitions for the post process steps\n * @property {Array<PostProcessesOptions>} [postProcesses] Post-processes definitions\n */\n\n/**\n * @classdesc\n * Base WebGL renderer class.\n * Holds all logic related to data manipulation & some common rendering logic\n * @template {import(\"../../layer/Layer.js\").default} LayerType\n */\nclass WebGLLayerRenderer extends LayerRenderer {\n\n  /**\n   * @param {LayerType} layer Layer.\n   * @param {Options=} [opt_options] Options.\n   */\n  constructor(layer, opt_options) {\n    super(layer);\n\n    const options = opt_options || {};\n\n    /**\n     * @type {WebGLHelper}\n     * @protected\n     */\n    this.helper = new WebGLHelper({\n      postProcesses: options.postProcesses,\n      uniforms: options.uniforms\n    });\n  }\n\n  /**\n   * @inheritDoc\n   */\n  disposeInternal() {\n    this.helper.disposeInternal();\n    super.disposeInternal();\n  }\n\n  /**\n   * Will return the last shader compilation errors. If no error happened, will return null;\n   * @return {string|null} Errors, or null if last compilation was successful\n   * @api\n   */\n  getShaderCompileErrors() {\n    return this.helper.getShaderCompileErrors();\n  }\n\n}\n\nconst tmpArray_ = [];\nconst bufferPositions_ = {vertexPosition: 0, indexPosition: 0};\n\nfunction writePointVertex(buffer, pos, x, y, index) {\n  buffer[pos + 0] = x;\n  buffer[pos + 1] = y;\n  buffer[pos + 2] = index;\n}\n\n/**\n * An object holding positions both in an index and a vertex buffer.\n * @typedef {Object} BufferPositions\n * @property {number} vertexPosition Position in the vertex buffer\n * @property {number} indexPosition Position in the index buffer\n */\n\n/**\n * Pushes a quad (two triangles) based on a point geometry\n * @param {Float32Array} instructions Array of render instructions for points.\n * @param {number} elementIndex Index from which render instructions will be read.\n * @param {Float32Array} vertexBuffer Buffer in the form of a typed array.\n * @param {Uint32Array} indexBuffer Buffer in the form of a typed array.\n * @param {number} customAttributesCount Amount of custom attributes for each element.\n * @param {BufferPositions} [bufferPositions] Buffer write positions; if not specified, positions will be set at 0.\n * @return {BufferPositions} New buffer positions where to write next\n * @property {number} vertexPosition New position in the vertex buffer where future writes should start.\n * @property {number} indexPosition New position in the index buffer where future writes should start.\n * @private\n */\nexport function writePointFeatureToBuffers(instructions, elementIndex, vertexBuffer, indexBuffer, customAttributesCount, bufferPositions) {\n  // This is for x, y and index\n  const baseVertexAttrsCount = 3;\n  const baseInstructionsCount = 2;\n  const stride = baseVertexAttrsCount + customAttributesCount;\n\n  const x = instructions[elementIndex + 0];\n  const y = instructions[elementIndex + 1];\n\n  // read custom numerical attributes on the feature\n  const customAttrs = tmpArray_;\n  customAttrs.length = customAttributesCount;\n  for (let i = 0; i < customAttrs.length; i++) {\n    customAttrs[i] = instructions[elementIndex + baseInstructionsCount + i];\n  }\n\n  let vPos = bufferPositions ? bufferPositions.vertexPosition : 0;\n  let iPos = bufferPositions ? bufferPositions.indexPosition : 0;\n  const baseIndex = vPos / stride;\n\n  // push vertices for each of the four quad corners (first standard then custom attributes)\n  writePointVertex(vertexBuffer, vPos, x, y, 0);\n  customAttrs.length && vertexBuffer.set(customAttrs, vPos + baseVertexAttrsCount);\n  vPos += stride;\n\n  writePointVertex(vertexBuffer, vPos, x, y, 1);\n  customAttrs.length && vertexBuffer.set(customAttrs, vPos + baseVertexAttrsCount);\n  vPos += stride;\n\n  writePointVertex(vertexBuffer, vPos, x, y, 2);\n  customAttrs.length && vertexBuffer.set(customAttrs, vPos + baseVertexAttrsCount);\n  vPos += stride;\n\n  writePointVertex(vertexBuffer, vPos, x, y, 3);\n  customAttrs.length && vertexBuffer.set(customAttrs, vPos + baseVertexAttrsCount);\n  vPos += stride;\n\n  indexBuffer[iPos++] = baseIndex; indexBuffer[iPos++] = baseIndex + 1; indexBuffer[iPos++] = baseIndex + 3;\n  indexBuffer[iPos++] = baseIndex + 1; indexBuffer[iPos++] = baseIndex + 2; indexBuffer[iPos++] = baseIndex + 3;\n\n  bufferPositions_.vertexPosition = vPos;\n  bufferPositions_.indexPosition = iPos;\n\n  return bufferPositions_;\n}\n\n/**\n * Returns a texture of 1x1 pixel, white\n * @private\n * @return {ImageData} Image data.\n */\nexport function getBlankImageData() {\n  const canvas = document.createElement('canvas');\n  const image = canvas.getContext('2d').createImageData(1, 1);\n  image.data[0] = image.data[1] = image.data[2] = image.data[3] = 255;\n  return image;\n}\n\n/**\n * Generates a color array based on a numerical id\n * Note: the range for each component is 0 to 1 with 256 steps\n * @param {number} id Id\n * @param {Array<number>} [opt_array] Reusable array\n * @return {Array<number>} Color array containing the encoded id\n */\nexport function colorEncodeId(id, opt_array) {\n  const array = opt_array || [];\n  const radix = 256;\n  const divide = radix - 1;\n  array[0] = Math.floor(id / radix / radix / radix) / divide;\n  array[1] = (Math.floor(id / radix / radix) % radix) / divide;\n  array[2] = (Math.floor(id / radix) % radix) / divide;\n  array[3] = (id % radix) / divide;\n  return array;\n}\n\n\n/**\n * Reads an id from a color-encoded array\n * Note: the expected range for each component is 0 to 1 with 256 steps.\n * @param {Array<number>} color Color array containing the encoded id\n * @return {number} Decoded id\n */\nexport function colorDecodeId(color) {\n  let id = 0;\n  const radix = 256;\n  const mult = radix - 1;\n  id += Math.round(color[0] * radix * radix * radix * mult);\n  id += Math.round(color[1] * radix * radix * mult);\n  id += Math.round(color[2] * radix * mult);\n  id += Math.round(color[3] * mult);\n  return id;\n}\n\nexport default WebGLLayerRenderer;\n","\n        const source = \"var e=\\\"function\\\"==typeof Object.assign?Object.assign:function(e,n){if(null==e)throw new TypeError(\\\"Cannot convert undefined or null to object\\\");for(var t=Object(e),r=1,o=arguments.length;r<o;++r){var i=arguments[r];if(null!=i)for(var f in i)i.hasOwnProperty(f)&&(t[f]=i[f])}return t};var n=\\\"GENERATE_BUFFERS\\\",t=[],r={vertexPosition:0,indexPosition:0};function o(e,n,t,r,o){e[n+0]=t,e[n+1]=r,e[n+2]=o}function i(e,n,i,f,s,a){var u=3+s,l=e[n+0],v=e[n+1],c=t;c.length=s;for(var g=0;g<c.length;g++)c[g]=e[n+2+g];var b=a?a.vertexPosition:0,h=a?a.indexPosition:0,d=b/u;return o(i,b,l,v,0),c.length&&i.set(c,b+3),o(i,b+=u,l,v,1),c.length&&i.set(c,b+3),o(i,b+=u,l,v,2),c.length&&i.set(c,b+3),o(i,b+=u,l,v,3),c.length&&i.set(c,b+3),b+=u,f[h++]=d,f[h++]=d+1,f[h++]=d+3,f[h++]=d+1,f[h++]=d+2,f[h++]=d+3,r.vertexPosition=b,r.indexPosition=h,r}var f=self;f.onmessage=function(t){var r=t.data;if(r.type===n){for(var o=r.customAttributesCount,s=2+o,a=new Float32Array(r.renderInstructions),u=a.length/s,l=4*u*(o+3),v=new Uint32Array(6*u),c=new Float32Array(l),g=null,b=0;b<a.length;b+=s)g=i(a,b,c,v,o,g);var h=e({vertexBuffer:c.buffer,indexBuffer:v.buffer,renderInstructions:a.buffer},r);f.postMessage(h,[c.buffer,v.buffer,a.buffer])}};\";\n        const blob = new Blob([source], {type: 'application/javascript'});\n        const url = URL.createObjectURL(blob);\n        export function create() {\n          return new Worker(url);\n        }\n      \n","/**\n * A wrapper class to simplify rendering to a texture instead of the final canvas\n * @module ol/webgl/RenderTarget\n */\nimport {equals} from '../array.js';\n\n// for pixel color reading\nconst tmpArray4 = new Uint8Array(4);\n\n/**\n * @classdesc\n * This class is a wrapper around the association of both a `WebGLTexture` and a `WebGLFramebuffer` instances,\n * simplifying initialization and binding for rendering.\n * @api\n */\nclass WebGLRenderTarget {\n\n  /**\n   * @param {import(\"./Helper.js\").default} helper WebGL helper; mandatory.\n   * @param {Array<number>} [opt_size] Expected size of the render target texture; note: this can be changed later on.\n   */\n  constructor(helper, opt_size) {\n    /**\n     * @private\n     * @type {import(\"./Helper.js\").default}\n     */\n    this.helper_ = helper;\n    const gl = helper.getGL();\n\n    /**\n     * @private\n     * @type {WebGLTexture}\n     */\n    this.texture_ = gl.createTexture();\n\n    /**\n     * @private\n     * @type {WebGLFramebuffer}\n     */\n    this.framebuffer_ = gl.createFramebuffer();\n\n    /**\n     * @type {Array<number>}\n     * @private\n     */\n    this.size_ = opt_size || [1, 1];\n\n    /**\n     * @type {Uint8Array}\n     * @private\n     */\n    this.data_ = new Uint8Array(0);\n\n    /**\n     * @type {boolean}\n     * @private\n     */\n    this.dataCacheDirty_ = true;\n\n    this.updateSize_();\n  }\n\n  /**\n   * Changes the size of the render target texture. Note: will do nothing if the size\n   * is already the same.\n   * @param {Array<number>} size Expected size of the render target texture\n   * @api\n   */\n  setSize(size) {\n    if (equals(size, this.size_)) {\n      return;\n    }\n    this.size_[0] = size[0];\n    this.size_[1] = size[1];\n    this.updateSize_();\n  }\n\n  /**\n   * Returns the size of the render target texture\n   * @return {Array<number>} Size of the render target texture\n   * @api\n   */\n  getSize() {\n    return this.size_;\n  }\n\n  /**\n   * This will cause following calls to `#readAll` or `#readPixel` to download the content of the\n   * render target into memory, which is an expensive operation.\n   * This content will be kept in cache but should be cleared after each new render.\n   * @api\n   */\n  clearCachedData() {\n    this.dataCacheDirty_ = true;\n  }\n\n  /**\n   * Returns the full content of the frame buffer as a series of r, g, b, a components\n   * in the 0-255 range (unsigned byte).\n   * @return {Uint8Array} Integer array of color values\n   * @api\n   */\n  readAll() {\n    if (this.dataCacheDirty_) {\n      const size = this.size_;\n      const gl = this.helper_.getGL();\n\n      gl.bindFramebuffer(gl.FRAMEBUFFER, this.framebuffer_);\n      gl.readPixels(0, 0, size[0], size[1], gl.RGBA, gl.UNSIGNED_BYTE, this.data_);\n      this.dataCacheDirty_ = false;\n    }\n    return this.data_;\n  }\n\n  /**\n   * Reads one pixel of the frame buffer as an array of r, g, b, a components\n   * in the 0-255 range (unsigned byte).\n   * @param {number} x Pixel coordinate\n   * @param {number} y Pixel coordinate\n   * @returns {Uint8Array} Integer array with one color value (4 components)\n   * @api\n   */\n  readPixel(x, y) {\n    this.readAll();\n    const index = Math.floor(x) + (this.size_[1] - Math.floor(y) - 1) * this.size_[0];\n    tmpArray4[0] = this.data_[index * 4];\n    tmpArray4[1] = this.data_[index * 4 + 1];\n    tmpArray4[2] = this.data_[index * 4 + 2];\n    tmpArray4[3] = this.data_[index * 4 + 3];\n    return tmpArray4;\n  }\n\n  /**\n   * @return {WebGLTexture} Texture to render to\n   */\n  getTexture() {\n    return this.texture_;\n  }\n\n  /**\n   * @return {WebGLFramebuffer} Frame buffer of the render target\n   */\n  getFramebuffer() {\n    return this.framebuffer_;\n  }\n\n  /**\n   * @private\n   */\n  updateSize_() {\n    const size = this.size_;\n    const gl = this.helper_.getGL();\n\n    this.texture_ = this.helper_.createTexture(size, null, this.texture_);\n\n    gl.bindFramebuffer(gl.FRAMEBUFFER, this.framebuffer_);\n    gl.viewport(0, 0, size[0], size[1]);\n    gl.framebufferTexture2D(gl.FRAMEBUFFER, gl.COLOR_ATTACHMENT0, gl.TEXTURE_2D, this.texture_, 0);\n\n    this.data_ = new Uint8Array(size[0] * size[1] * 4);\n  }\n}\n\nexport default WebGLRenderTarget;\n","/**\n * @module ol/renderer/webgl/PointsLayer\n */\nimport WebGLArrayBuffer from '../../webgl/Buffer.js';\nimport {ARRAY_BUFFER, DYNAMIC_DRAW, ELEMENT_ARRAY_BUFFER} from '../../webgl.js';\nimport {AttributeType, DefaultUniform} from '../../webgl/Helper.js';\nimport GeometryType from '../../geom/GeometryType.js';\nimport WebGLLayerRenderer, {colorDecodeId, colorEncodeId, WebGLWorkerMessageType} from './Layer.js';\nimport ViewHint from '../../ViewHint.js';\nimport {createEmpty, equals} from '../../extent.js';\nimport {\n  apply as applyTransform,\n  create as createTransform,\n  makeInverse as makeInverseTransform,\n  multiply as multiplyTransform\n} from '../../transform.js';\nimport {create as createWebGLWorker} from '../../worker/webgl.js';\nimport {getUid} from '../../util.js';\nimport WebGLRenderTarget from '../../webgl/RenderTarget.js';\nimport {assert} from '../../asserts.js';\n\n/**\n * @typedef {Object} CustomAttribute A description of a custom attribute to be passed on to the GPU, with a value different\n * for each feature.\n * @property {string} name Attribute name.\n * @property {function(import(\"../../Feature\").default):number} callback This callback computes the numerical value of the\n * attribute for a given feature.\n */\n\n/**\n * @typedef {Object} Options\n * @property {Array<CustomAttribute>} [attributes] These attributes will be read from the features in the source and then\n * passed to the GPU. The `name` property of each attribute will serve as its identifier:\n *  * In the vertex shader as an `attribute` by prefixing it with `a_`\n *  * In the fragment shader as a `varying` by prefixing it with `v_`\n * Please note that these can only be numerical values.\n * @property {string} vertexShader Vertex shader source, mandatory.\n * @property {string} fragmentShader Fragment shader source, mandatory.\n * @property {string} [hitVertexShader] Vertex shader source for hit detection rendering.\n * @property {string} [hitFragmentShader] Fragment shader source for hit detection rendering.\n * @property {Object.<string,import(\"../../webgl/Helper\").UniformValue>} [uniforms] Uniform definitions for the post process steps\n * Please note that `u_texture` is reserved for the main texture slot.\n * @property {Array<import(\"./Layer\").PostProcessesOptions>} [postProcesses] Post-processes definitions\n */\n\n/**\n * @classdesc\n * WebGL vector renderer optimized for points.\n * All features will be rendered as quads (two triangles forming a square). New data will be flushed to the GPU\n * every time the vector source changes.\n *\n * You need to provide vertex and fragment shaders for rendering. This can be done using\n * {@link module:ol/webgl/ShaderBuilder} utilities. These shaders shall expect a `a_position` attribute\n * containing the screen-space projected center of the quad, as well as a `a_index` attribute\n * whose value (0, 1, 2 or 3) indicates which quad vertex is currently getting processed (see structure below).\n *\n * To include variable attributes in the shaders, you need to declare them using the `attributes` property of\n * the options object like so:\n * ```js\n * new WebGLPointsLayerRenderer(layer, {\n *   attributes: [\n *     {\n *       name: 'size',\n *       callback: function(feature) {\n *         // compute something with the feature\n *       }\n *     },\n *     {\n *       name: 'weight',\n *       callback: function(feature) {\n *         // compute something with the feature\n *       }\n *     },\n *   ],\n *   vertexShader:\n *     // shader using attribute a_weight and a_size\n *   fragmentShader:\n *     // shader using varying v_weight and v_size\n * ```\n *\n * To enable hit detection, you must as well provide dedicated shaders using the `hitVertexShader`\n * and `hitFragmentShader` properties. These shall expect the `a_hitColor` attribute to contain\n * the final color that will have to be output for hit detection to work.\n *\n * The following uniform is used for the main texture: `u_texture`.\n *\n * Please note that the main shader output should have premultiplied alpha, otherwise visual anomalies may occur.\n *\n * Points are rendered as quads with the following structure:\n *\n * ```\n *   (u0, v1)      (u1, v1)\n *  [3]----------[2]\n *   |`           |\n *   |  `         |\n *   |    `       |\n *   |      `     |\n *   |        `   |\n *   |          ` |\n *  [0]----------[1]\n *   (u0, v0)      (u1, v0)\n *  ```\n *\n * This uses {@link module:ol/webgl/Helper~WebGLHelper} internally.\n *\n * @api\n */\nclass WebGLPointsLayerRenderer extends WebGLLayerRenderer {\n\n  /**\n   * @param {import(\"../../layer/Layer.js\").default} layer Layer.\n   * @param {Options=} options Options.\n   */\n  constructor(layer, options) {\n    const uniforms = options.uniforms || {};\n    const projectionMatrixTransform = createTransform();\n    uniforms[DefaultUniform.PROJECTION_MATRIX] = projectionMatrixTransform;\n\n    super(layer, {\n      uniforms: uniforms,\n      postProcesses: options.postProcesses\n    });\n\n    this.sourceRevision_ = -1;\n\n    this.verticesBuffer_ = new WebGLArrayBuffer(ARRAY_BUFFER, DYNAMIC_DRAW);\n    this.hitVerticesBuffer_ = new WebGLArrayBuffer(ARRAY_BUFFER, DYNAMIC_DRAW);\n    this.indicesBuffer_ = new WebGLArrayBuffer(ELEMENT_ARRAY_BUFFER, DYNAMIC_DRAW);\n\n    this.program_ = this.helper.getProgram(\n      options.fragmentShader,\n      options.vertexShader\n    );\n\n    /**\n     * @type {boolean}\n     * @private\n     */\n    this.hitDetectionEnabled_ = options.hitFragmentShader && options.hitVertexShader ? true : false;\n\n    this.hitProgram_ = this.hitDetectionEnabled_ && this.helper.getProgram(\n      options.hitFragmentShader,\n      options.hitVertexShader\n    );\n\n    const customAttributes = options.attributes ?\n      options.attributes.map(function(attribute) {\n        return {\n          name: 'a_' + attribute.name,\n          size: 1,\n          type: AttributeType.FLOAT\n        };\n      }) : [];\n\n    /**\n     * A list of attributes used by the renderer. By default only the position and\n     * index of the vertex (0 to 3) are required.\n     * @type {Array<import('../../webgl/Helper.js').AttributeDescription>}\n     */\n    this.attributes = [{\n      name: 'a_position',\n      size: 2,\n      type: AttributeType.FLOAT\n    }, {\n      name: 'a_index',\n      size: 1,\n      type: AttributeType.FLOAT\n    }].concat(customAttributes);\n\n    /**\n     * A list of attributes used for hit detection.\n     * @type {Array<import('../../webgl/Helper.js').AttributeDescription>}\n     */\n    this.hitDetectionAttributes = [{\n      name: 'a_position',\n      size: 2,\n      type: AttributeType.FLOAT\n    }, {\n      name: 'a_index',\n      size: 1,\n      type: AttributeType.FLOAT\n    }, {\n      name: 'a_hitColor',\n      size: 4,\n      type: AttributeType.FLOAT\n    }, {\n      name: 'a_featureUid',\n      size: 1,\n      type: AttributeType.FLOAT\n    }].concat(customAttributes);\n\n    this.customAttributes = options.attributes ? options.attributes : [];\n\n    this.previousExtent_ = createEmpty();\n\n    /**\n     * This transform is updated on every frame and is the composition of:\n     * - invert of the world->screen transform that was used when rebuilding buffers (see `this.renderTransform_`)\n     * - current world->screen transform\n     * @type {import(\"../../transform.js\").Transform}\n     * @private\n     */\n    this.currentTransform_ = projectionMatrixTransform;\n\n    /**\n     * This transform is updated when buffers are rebuilt and converts world space coordinates to screen space\n     * @type {import(\"../../transform.js\").Transform}\n     * @private\n     */\n    this.renderTransform_ = createTransform();\n\n    /**\n     * @type {import(\"../../transform.js\").Transform}\n     * @private\n     */\n    this.invertRenderTransform_ = createTransform();\n\n    /**\n     * @type {Float32Array}\n     * @private\n     */\n    this.renderInstructions_ = new Float32Array(0);\n\n    /**\n     * These instructions are used for hit detection\n     * @type {Float32Array}\n     * @private\n     */\n    this.hitRenderInstructions_ = new Float32Array(0);\n\n    /**\n     * @type {WebGLRenderTarget}\n     * @private\n     */\n    this.hitRenderTarget_ = this.hitDetectionEnabled_ && new WebGLRenderTarget(this.helper);\n\n    this.worker_ = createWebGLWorker();\n    this.worker_.addEventListener('message', function(event) {\n      const received = event.data;\n      if (received.type === WebGLWorkerMessageType.GENERATE_BUFFERS) {\n        const projectionTransform = received.projectionTransform;\n        if (received.hitDetection) {\n          this.hitVerticesBuffer_.fromArrayBuffer(received.vertexBuffer);\n          this.helper.flushBufferData(this.hitVerticesBuffer_);\n        } else {\n          this.verticesBuffer_.fromArrayBuffer(received.vertexBuffer);\n          this.helper.flushBufferData(this.verticesBuffer_);\n        }\n        this.indicesBuffer_.fromArrayBuffer(received.indexBuffer);\n        this.helper.flushBufferData(this.indicesBuffer_);\n\n        this.renderTransform_ = projectionTransform;\n        makeInverseTransform(this.invertRenderTransform_, this.renderTransform_);\n        if (received.hitDetection) {\n          this.hitRenderInstructions_ = new Float32Array(event.data.renderInstructions);\n        } else {\n          this.renderInstructions_ = new Float32Array(event.data.renderInstructions);\n        }\n\n        this.getLayer().changed();\n      }\n    }.bind(this));\n  }\n\n  /**\n   * @inheritDoc\n   */\n  renderFrame(frameState) {\n    const renderCount = this.indicesBuffer_.getSize();\n    this.helper.drawElements(0, renderCount);\n    this.helper.finalizeDraw(frameState);\n    const canvas = this.helper.getCanvas();\n\n    const layerState = frameState.layerStatesArray[frameState.layerIndex];\n    const opacity = layerState.opacity;\n    if (opacity !== parseFloat(canvas.style.opacity)) {\n      canvas.style.opacity = opacity;\n    }\n\n    if (this.hitDetectionEnabled_) {\n      this.renderHitDetection(frameState);\n      this.hitRenderTarget_.clearCachedData();\n    }\n\n    return canvas;\n  }\n\n  /**\n   * @inheritDoc\n   */\n  prepareFrame(frameState) {\n    const layer = this.getLayer();\n    const vectorSource = layer.getSource();\n    const viewState = frameState.viewState;\n\n    // the source has changed: clear the feature cache & reload features\n    const sourceChanged = this.sourceRevision_ < vectorSource.getRevision();\n    if (sourceChanged) {\n      this.sourceRevision_ = vectorSource.getRevision();\n\n      const projection = viewState.projection;\n      const resolution = viewState.resolution;\n      vectorSource.loadFeatures([-Infinity, -Infinity, Infinity, Infinity], resolution, projection);\n    }\n\n    const viewNotMoving = !frameState.viewHints[ViewHint.ANIMATING] && !frameState.viewHints[ViewHint.INTERACTING];\n    const extentChanged = !equals(this.previousExtent_, frameState.extent);\n    if ((sourceChanged || extentChanged) && viewNotMoving) {\n      this.rebuildBuffers_(frameState);\n      this.previousExtent_ = frameState.extent.slice();\n    }\n\n    // apply the current projection transform with the invert of the one used to fill buffers\n    this.helper.makeProjectionTransform(frameState, this.currentTransform_);\n    multiplyTransform(this.currentTransform_, this.invertRenderTransform_);\n\n    this.helper.useProgram(this.program_);\n    this.helper.prepareDraw(frameState);\n\n    // write new data\n    this.helper.bindBuffer(this.verticesBuffer_);\n    this.helper.bindBuffer(this.indicesBuffer_);\n\n    this.helper.enableAttributes(this.attributes);\n\n    return true;\n  }\n\n  /**\n   * Rebuild internal webgl buffers based on current view extent; costly, should not be called too much\n   * @param {import(\"../../PluggableMap\").FrameState} frameState Frame state.\n   * @private\n   */\n  rebuildBuffers_(frameState) {\n    const layer = this.getLayer();\n    const vectorSource = layer.getSource();\n\n    // saves the projection transform for the current frame state\n    const projectionTransform = createTransform();\n    this.helper.makeProjectionTransform(frameState, projectionTransform);\n\n    const features = vectorSource.getFeatures();\n\n    // here we anticipate the amount of render instructions that we well generate\n    // this can be done since we know that for normal render we only have x, y as base instructions,\n    // and x, y, r, g, b, a and featureUid for hit render instructions\n    // and we also know the amount of custom attributes to append to these\n    const totalInstructionsCount = (2 + this.customAttributes.length) * features.length;\n    if (!this.renderInstructions_ || this.renderInstructions_.length !== totalInstructionsCount) {\n      this.renderInstructions_ = new Float32Array(totalInstructionsCount);\n    }\n    if (this.hitDetectionEnabled_) {\n      const totalHitInstructionsCount = (7 + this.customAttributes.length) * features.length;\n      if (!this.hitRenderInstructions_ || this.hitRenderInstructions_.length !== totalHitInstructionsCount) {\n        this.hitRenderInstructions_ = new Float32Array(totalHitInstructionsCount);\n      }\n    }\n\n    // loop on features to fill the buffer\n    let feature;\n    const tmpCoords = [];\n    const tmpColor = [];\n    let renderIndex = 0;\n    let hitIndex = 0;\n    let hitColor;\n    for (let i = 0; i < features.length; i++) {\n      feature = features[i];\n      if (!feature.getGeometry() || feature.getGeometry().getType() !== GeometryType.POINT) {\n        continue;\n      }\n\n      tmpCoords[0] = feature.getGeometry().getFlatCoordinates()[0];\n      tmpCoords[1] = feature.getGeometry().getFlatCoordinates()[1];\n      applyTransform(projectionTransform, tmpCoords);\n\n      hitColor = colorEncodeId(hitIndex + 6, tmpColor);\n\n      this.renderInstructions_[renderIndex++] = tmpCoords[0];\n      this.renderInstructions_[renderIndex++] = tmpCoords[1];\n\n      // for hit detection, the feature uid is saved in the opacity value\n      // and the index of the opacity value is encoded in the color values\n      if (this.hitDetectionEnabled_) {\n        this.hitRenderInstructions_[hitIndex++] = tmpCoords[0];\n        this.hitRenderInstructions_[hitIndex++] = tmpCoords[1];\n        this.hitRenderInstructions_[hitIndex++] = hitColor[0];\n        this.hitRenderInstructions_[hitIndex++] = hitColor[1];\n        this.hitRenderInstructions_[hitIndex++] = hitColor[2];\n        this.hitRenderInstructions_[hitIndex++] = hitColor[3];\n        this.hitRenderInstructions_[hitIndex++] = Number(getUid(feature));\n      }\n\n      // pushing custom attributes\n      let value;\n      for (let j = 0; j < this.customAttributes.length; j++) {\n        value = this.customAttributes[j].callback(feature);\n        this.renderInstructions_[renderIndex++] = value;\n        if (this.hitDetectionEnabled_) {\n          this.hitRenderInstructions_[hitIndex++] = value;\n        }\n      }\n    }\n\n    /** @type import('./Layer').WebGLWorkerGenerateBuffersMessage */\n    const message = {\n      type: WebGLWorkerMessageType.GENERATE_BUFFERS,\n      renderInstructions: this.renderInstructions_.buffer,\n      customAttributesCount: this.customAttributes.length\n    };\n    // additional properties will be sent back as-is by the worker\n    message['projectionTransform'] = projectionTransform;\n    this.worker_.postMessage(message, [this.renderInstructions_.buffer]);\n    this.renderInstructions_ = null;\n\n    /** @type import('./Layer').WebGLWorkerGenerateBuffersMessage */\n    if (this.hitDetectionEnabled_) {\n      const hitMessage = {\n        type: WebGLWorkerMessageType.GENERATE_BUFFERS,\n        renderInstructions: this.hitRenderInstructions_.buffer,\n        customAttributesCount: 5 + this.customAttributes.length\n      };\n      hitMessage['projectionTransform'] = projectionTransform;\n      hitMessage['hitDetection'] = true;\n      this.worker_.postMessage(hitMessage, [this.hitRenderInstructions_.buffer]);\n      this.hitRenderInstructions_ = null;\n    }\n  }\n\n  /**\n   * @inheritDoc\n   */\n  forEachFeatureAtCoordinate(coordinate, frameState, hitTolerance, callback, declutteredFeatures) {\n    assert(this.hitDetectionEnabled_, 66);\n    if (!this.hitRenderInstructions_) {\n      return;\n    }\n\n    const pixel = applyTransform(frameState.coordinateToPixelTransform, coordinate.slice());\n\n    const data = this.hitRenderTarget_.readPixel(pixel[0], pixel[1]);\n    const color = [\n      data[0] / 255,\n      data[1] / 255,\n      data[2] / 255,\n      data[3] / 255\n    ];\n    const index = colorDecodeId(color);\n    const opacity = this.hitRenderInstructions_[index];\n    const uid = Math.floor(opacity).toString();\n\n    const source = this.getLayer().getSource();\n    const feature = source.getFeatureByUid(uid);\n    if (feature) {\n      return callback(feature, this.getLayer());\n    }\n  }\n\n  /**\n   * Render the hit detection data to the corresponding render target\n   * @param {import(\"../../PluggableMap.js\").FrameState} frameState current frame state\n   */\n  renderHitDetection(frameState) {\n    // skip render entirely if vertex buffers not ready/generated yet\n    if (!this.hitVerticesBuffer_.getSize()) {\n      return;\n    }\n\n    this.hitRenderTarget_.setSize(frameState.size);\n\n    this.helper.useProgram(this.hitProgram_);\n    this.helper.prepareDrawToRenderTarget(frameState, this.hitRenderTarget_, true);\n\n    this.helper.bindBuffer(this.hitVerticesBuffer_);\n    this.helper.bindBuffer(this.indicesBuffer_);\n\n    this.helper.enableAttributes(this.hitDetectionAttributes);\n\n    const renderCount = this.indicesBuffer_.getSize();\n    this.helper.drawElements(0, renderCount);\n  }\n\n  /**\n   * @inheritDoc\n   */\n  disposeInternal() {\n    this.worker_.terminate();\n    super.disposeInternal();\n  }\n}\n\nexport default WebGLPointsLayerRenderer;\n","/**\n * @module ol/format/OWS\n */\nimport {readHref} from './XLink.js';\nimport XML from './XML.js';\nimport {readString} from './xsd.js';\nimport {makeObjectPropertyPusher, makeObjectPropertySetter, makeStructureNS, pushParseAndPop} from '../xml.js';\n\n\n/**\n * @const\n * @type {Array<null|string>}\n */\nconst NAMESPACE_URIS = [null, 'http://www.opengis.net/ows/1.1'];\n\n\n/**\n * @const\n * @type {Object<string, Object<string, import(\"../xml.js\").Parser>>}\n */\n// @ts-ignore\nconst PARSERS = makeStructureNS(\n  NAMESPACE_URIS, {\n    'ServiceIdentification': makeObjectPropertySetter(readServiceIdentification),\n    'ServiceProvider': makeObjectPropertySetter(readServiceProvider),\n    'OperationsMetadata': makeObjectPropertySetter(readOperationsMetadata)\n  });\n\n\nclass OWS extends XML {\n  constructor() {\n    super();\n  }\n\n  /**\n   * @inheritDoc\n   */\n  readFromDocument(doc) {\n    for (let n = doc.firstChild; n; n = n.nextSibling) {\n      if (n.nodeType == Node.ELEMENT_NODE) {\n        return this.readFromNode(n);\n      }\n    }\n    return null;\n  }\n\n  /**\n   * @inheritDoc\n   */\n  readFromNode(node) {\n    const owsObject = pushParseAndPop({},\n      PARSERS, node, []);\n    return owsObject ? owsObject : null;\n  }\n}\n\n\n/**\n * @const\n * @type {Object<string, Object<string, import(\"../xml.js\").Parser>>}\n */\n// @ts-ignore\nconst ADDRESS_PARSERS = makeStructureNS(\n  NAMESPACE_URIS, {\n    'DeliveryPoint': makeObjectPropertySetter(readString),\n    'City': makeObjectPropertySetter(readString),\n    'AdministrativeArea': makeObjectPropertySetter(readString),\n    'PostalCode': makeObjectPropertySetter(readString),\n    'Country': makeObjectPropertySetter(readString),\n    'ElectronicMailAddress': makeObjectPropertySetter(readString)\n  });\n\n\n/**\n * @const\n * @type {Object<string, Object<string, import(\"../xml.js\").Parser>>}\n */\n// @ts-ignore\nconst ALLOWED_VALUES_PARSERS = makeStructureNS(\n  NAMESPACE_URIS, {\n    'Value': makeObjectPropertyPusher(readValue)\n  });\n\n\n/**\n * @const\n * @type {Object<string, Object<string, import(\"../xml.js\").Parser>>}\n */\n// @ts-ignore\nconst CONSTRAINT_PARSERS = makeStructureNS(\n  NAMESPACE_URIS, {\n    'AllowedValues': makeObjectPropertySetter(readAllowedValues)\n  });\n\n\n/**\n * @const\n * @type {Object<string, Object<string, import(\"../xml.js\").Parser>>}\n */\n// @ts-ignore\nconst CONTACT_INFO_PARSERS = makeStructureNS(\n  NAMESPACE_URIS, {\n    'Phone': makeObjectPropertySetter(readPhone),\n    'Address': makeObjectPropertySetter(readAddress)\n  });\n\n\n/**\n * @const\n * @type {Object<string, Object<string, import(\"../xml.js\").Parser>>}\n */\n// @ts-ignore\nconst DCP_PARSERS = makeStructureNS(\n  NAMESPACE_URIS, {\n    'HTTP': makeObjectPropertySetter(readHttp)\n  });\n\n\n/**\n * @const\n * @type {Object<string, Object<string, import(\"../xml.js\").Parser>>}\n */\n// @ts-ignore\nconst HTTP_PARSERS = makeStructureNS(\n  NAMESPACE_URIS, {\n    'Get': makeObjectPropertyPusher(readGet),\n    'Post': undefined // TODO\n  });\n\n\n/**\n * @const\n * @type {Object<string, Object<string, import(\"../xml.js\").Parser>>}\n */\n// @ts-ignore\nconst OPERATION_PARSERS = makeStructureNS(\n  NAMESPACE_URIS, {\n    'DCP': makeObjectPropertySetter(readDcp)\n  });\n\n\n/**\n * @const\n * @type {Object<string, Object<string, import(\"../xml.js\").Parser>>}\n */\n// @ts-ignore\nconst OPERATIONS_METADATA_PARSERS = makeStructureNS(\n  NAMESPACE_URIS, {\n    'Operation': readOperation\n  });\n\n\n/**\n * @const\n * @type {Object<string, Object<string, import(\"../xml.js\").Parser>>}\n */\n// @ts-ignore\nconst PHONE_PARSERS = makeStructureNS(\n  NAMESPACE_URIS, {\n    'Voice': makeObjectPropertySetter(readString),\n    'Facsimile': makeObjectPropertySetter(readString)\n  });\n\n\n/**\n * @const\n * @type {Object<string, Object<string, import(\"../xml.js\").Parser>>}\n */\n// @ts-ignore\nconst REQUEST_METHOD_PARSERS = makeStructureNS(\n  NAMESPACE_URIS, {\n    'Constraint': makeObjectPropertyPusher(readConstraint)\n  });\n\n\n/**\n * @const\n * @type {Object<string, Object<string, import(\"../xml.js\").Parser>>}\n */\n// @ts-ignore\nconst SERVICE_CONTACT_PARSERS =\n    makeStructureNS(\n      NAMESPACE_URIS, {\n        'IndividualName': makeObjectPropertySetter(readString),\n        'PositionName': makeObjectPropertySetter(readString),\n        'ContactInfo': makeObjectPropertySetter(readContactInfo)\n      });\n\n\n/**\n * @const\n * @type {Object<string, Object<string, import(\"../xml.js\").Parser>>}\n */\n// @ts-ignore\nconst SERVICE_IDENTIFICATION_PARSERS =\n    makeStructureNS(\n      NAMESPACE_URIS, {\n        'Abstract': makeObjectPropertySetter(readString),\n        'AccessConstraints': makeObjectPropertySetter(readString),\n        'Fees': makeObjectPropertySetter(readString),\n        'Title': makeObjectPropertySetter(readString),\n        'ServiceTypeVersion': makeObjectPropertySetter(readString),\n        'ServiceType': makeObjectPropertySetter(readString)\n      });\n\n\n/**\n * @const\n * @type {Object<string, Object<string, import(\"../xml.js\").Parser>>}\n */\n// @ts-ignore\nconst SERVICE_PROVIDER_PARSERS =\n    makeStructureNS(\n      NAMESPACE_URIS, {\n        'ProviderName': makeObjectPropertySetter(readString),\n        'ProviderSite': makeObjectPropertySetter(readHref),\n        'ServiceContact': makeObjectPropertySetter(readServiceContact)\n      });\n\n\n/**\n * @param {Element} node Node.\n * @param {Array<*>} objectStack Object stack.\n * @return {Object|undefined} The address.\n */\nfunction readAddress(node, objectStack) {\n  return pushParseAndPop({},\n    ADDRESS_PARSERS, node, objectStack);\n}\n\n\n/**\n * @param {Element} node Node.\n * @param {Array<*>} objectStack Object stack.\n * @return {Object|undefined} The values.\n */\nfunction readAllowedValues(node, objectStack) {\n  return pushParseAndPop({},\n    ALLOWED_VALUES_PARSERS, node, objectStack);\n}\n\n\n/**\n * @param {Element} node Node.\n * @param {Array<*>} objectStack Object stack.\n * @return {Object|undefined} The constraint.\n */\nfunction readConstraint(node, objectStack) {\n  const name = node.getAttribute('name');\n  if (!name) {\n    return undefined;\n  }\n  return pushParseAndPop({'name': name},\n    CONSTRAINT_PARSERS, node,\n    objectStack);\n}\n\n\n/**\n * @param {Element} node Node.\n * @param {Array<*>} objectStack Object stack.\n * @return {Object|undefined} The contact info.\n */\nfunction readContactInfo(node, objectStack) {\n  return pushParseAndPop({},\n    CONTACT_INFO_PARSERS, node, objectStack);\n}\n\n\n/**\n * @param {Element} node Node.\n * @param {Array<*>} objectStack Object stack.\n * @return {Object|undefined} The DCP.\n */\nfunction readDcp(node, objectStack) {\n  return pushParseAndPop({},\n    DCP_PARSERS, node, objectStack);\n}\n\n\n/**\n * @param {Element} node Node.\n * @param {Array<*>} objectStack Object stack.\n * @return {Object|undefined} The GET object.\n */\nfunction readGet(node, objectStack) {\n  const href = readHref(node);\n  if (!href) {\n    return undefined;\n  }\n  return pushParseAndPop({'href': href},\n    REQUEST_METHOD_PARSERS, node, objectStack);\n}\n\n\n/**\n * @param {Element} node Node.\n * @param {Array<*>} objectStack Object stack.\n * @return {Object|undefined} The HTTP object.\n */\nfunction readHttp(node, objectStack) {\n  return pushParseAndPop({}, HTTP_PARSERS, node, objectStack);\n}\n\n\n/**\n * @param {Element} node Node.\n * @param {Array<*>} objectStack Object stack.\n * @return {Object|undefined} The operation.\n */\nfunction readOperation(node, objectStack) {\n  const name = node.getAttribute('name');\n  const value = pushParseAndPop({},\n    OPERATION_PARSERS, node, objectStack);\n  if (!value) {\n    return undefined;\n  }\n  const object = /** @type {Object} */\n      (objectStack[objectStack.length - 1]);\n  object[name] = value;\n}\n\n\n/**\n * @param {Element} node Node.\n * @param {Array<*>} objectStack Object stack.\n * @return {Object|undefined} The operations metadata.\n */\nfunction readOperationsMetadata(node, objectStack) {\n  return pushParseAndPop({},\n    OPERATIONS_METADATA_PARSERS, node,\n    objectStack);\n}\n\n\n/**\n * @param {Element} node Node.\n * @param {Array<*>} objectStack Object stack.\n * @return {Object|undefined} The phone.\n */\nfunction readPhone(node, objectStack) {\n  return pushParseAndPop({},\n    PHONE_PARSERS, node, objectStack);\n}\n\n\n/**\n * @param {Element} node Node.\n * @param {Array<*>} objectStack Object stack.\n * @return {Object|undefined} The service identification.\n */\nfunction readServiceIdentification(node, objectStack) {\n  return pushParseAndPop(\n    {}, SERVICE_IDENTIFICATION_PARSERS, node,\n    objectStack);\n}\n\n\n/**\n * @param {Element} node Node.\n * @param {Array<*>} objectStack Object stack.\n * @return {Object|undefined} The service contact.\n */\nfunction readServiceContact(node, objectStack) {\n  return pushParseAndPop(\n    {}, SERVICE_CONTACT_PARSERS, node,\n    objectStack);\n}\n\n\n/**\n * @param {Element} node Node.\n * @param {Array<*>} objectStack Object stack.\n * @return {Object|undefined} The service provider.\n */\nfunction readServiceProvider(node, objectStack) {\n  return pushParseAndPop(\n    {}, SERVICE_PROVIDER_PARSERS, node,\n    objectStack);\n}\n\n\n/**\n * @param {Node} node Node.\n * @param {Array<*>} objectStack Object stack.\n * @return {string|undefined} The value.\n */\nfunction readValue(node, objectStack) {\n  return readString(node);\n}\n\n\nexport default OWS;\n","/**\n * @module ol/format/WMTSCapabilities\n */\nimport {boundingExtent} from '../extent.js';\nimport OWS from './OWS.js';\nimport {readHref} from './XLink.js';\nimport XML from './XML.js';\nimport {readString, readNonNegativeInteger, readDecimal} from './xsd.js';\nimport {pushParseAndPop, makeStructureNS,\n  makeObjectPropertySetter, makeObjectPropertyPusher, makeArrayPusher} from '../xml.js';\n\n\n/**\n * @const\n * @type {Array<null|string>}\n */\nconst NAMESPACE_URIS = [\n  null,\n  'http://www.opengis.net/wmts/1.0'\n];\n\n\n/**\n * @const\n * @type {Array<null|string>}\n */\nconst OWS_NAMESPACE_URIS = [\n  null,\n  'http://www.opengis.net/ows/1.1'\n];\n\n\n/**\n * @const\n * @type {Object<string, Object<string, import(\"../xml.js\").Parser>>}\n */\n// @ts-ignore\nconst PARSERS = makeStructureNS(\n  NAMESPACE_URIS, {\n    'Contents': makeObjectPropertySetter(readContents)\n  });\n\n\n/**\n * @classdesc\n * Format for reading WMTS capabilities data.\n *\n * @api\n */\nclass WMTSCapabilities extends XML {\n  constructor() {\n    super();\n\n    /**\n     * @type {OWS}\n     * @private\n     */\n    this.owsParser_ = new OWS();\n  }\n\n  /**\n   * @inheritDoc\n   */\n  readFromDocument(doc) {\n    for (let n = doc.firstChild; n; n = n.nextSibling) {\n      if (n.nodeType == Node.ELEMENT_NODE) {\n        return this.readFromNode(n);\n      }\n    }\n    return null;\n  }\n\n  /**\n   * @inheritDoc\n   */\n  readFromNode(node) {\n    const version = node.getAttribute('version').trim();\n    let WMTSCapabilityObject = this.owsParser_.readFromNode(node);\n    if (!WMTSCapabilityObject) {\n      return null;\n    }\n    WMTSCapabilityObject['version'] = version;\n    WMTSCapabilityObject = pushParseAndPop(WMTSCapabilityObject, PARSERS, node, []);\n    return WMTSCapabilityObject ? WMTSCapabilityObject : null;\n  }\n}\n\n\n/**\n * @const\n * @type {Object<string, Object<string, import(\"../xml.js\").Parser>>}\n */\n// @ts-ignore\nconst CONTENTS_PARSERS = makeStructureNS(\n  NAMESPACE_URIS, {\n    'Layer': makeObjectPropertyPusher(readLayer),\n    'TileMatrixSet': makeObjectPropertyPusher(readTileMatrixSet)\n  });\n\n\n/**\n * @const\n * @type {Object<string, Object<string, import(\"../xml.js\").Parser>>}\n */\n// @ts-ignore\nconst LAYER_PARSERS = makeStructureNS(\n  NAMESPACE_URIS, {\n    'Style': makeObjectPropertyPusher(readStyle),\n    'Format': makeObjectPropertyPusher(readString),\n    'TileMatrixSetLink': makeObjectPropertyPusher(readTileMatrixSetLink),\n    'Dimension': makeObjectPropertyPusher(readDimensions),\n    'ResourceURL': makeObjectPropertyPusher(readResourceUrl)\n  }, makeStructureNS(OWS_NAMESPACE_URIS, {\n    'Title': makeObjectPropertySetter(readString),\n    'Abstract': makeObjectPropertySetter(readString),\n    'WGS84BoundingBox': makeObjectPropertySetter(readWgs84BoundingBox),\n    'Identifier': makeObjectPropertySetter(readString)\n  }));\n\n\n/**\n * @const\n * @type {Object<string, Object<string, import(\"../xml.js\").Parser>>}\n */\n// @ts-ignore\nconst STYLE_PARSERS = makeStructureNS(\n  NAMESPACE_URIS, {\n    'LegendURL': makeObjectPropertyPusher(readLegendUrl)\n  }, makeStructureNS(OWS_NAMESPACE_URIS, {\n    'Title': makeObjectPropertySetter(readString),\n    'Identifier': makeObjectPropertySetter(readString)\n  }));\n\n\n/**\n * @const\n * @type {Object<string, Object<string, import(\"../xml.js\").Parser>>}\n */\n// @ts-ignore\nconst TMS_LINKS_PARSERS = makeStructureNS(\n  NAMESPACE_URIS, {\n    'TileMatrixSet': makeObjectPropertySetter(readString),\n    'TileMatrixSetLimits': makeObjectPropertySetter(readTileMatrixLimitsList)\n  });\n\n/**\n * @const\n * @type {Object<string, Object<string, import(\"../xml.js\").Parser>>}\n */\n// @ts-ignore\nconst TMS_LIMITS_LIST_PARSERS = makeStructureNS(\n  NAMESPACE_URIS, {\n    'TileMatrixLimits': makeArrayPusher(readTileMatrixLimits)\n  });\n\n\n/**\n * @const\n * @type {Object<string, Object<string, import(\"../xml.js\").Parser>>}\n */\n// @ts-ignore\nconst TMS_LIMITS_PARSERS = makeStructureNS(\n  NAMESPACE_URIS, {\n    'TileMatrix': makeObjectPropertySetter(readString),\n    'MinTileRow': makeObjectPropertySetter(readNonNegativeInteger),\n    'MaxTileRow': makeObjectPropertySetter(readNonNegativeInteger),\n    'MinTileCol': makeObjectPropertySetter(readNonNegativeInteger),\n    'MaxTileCol': makeObjectPropertySetter(readNonNegativeInteger)\n  });\n\n\n/**\n * @const\n * @type {Object<string, Object<string, import(\"../xml.js\").Parser>>}\n */\n// @ts-ignore\nconst DIMENSION_PARSERS = makeStructureNS(\n  NAMESPACE_URIS, {\n    'Default': makeObjectPropertySetter(readString),\n    'Value': makeObjectPropertyPusher(readString)\n  }, makeStructureNS(OWS_NAMESPACE_URIS, {\n    'Identifier': makeObjectPropertySetter(readString)\n  }));\n\n\n/**\n * @const\n * @type {Object<string, Object<string, import(\"../xml.js\").Parser>>}\n */\n// @ts-ignore\nconst WGS84_BBOX_READERS = makeStructureNS(\n  OWS_NAMESPACE_URIS, {\n    'LowerCorner': makeArrayPusher(readCoordinates),\n    'UpperCorner': makeArrayPusher(readCoordinates)\n  });\n\n\n/**\n * @const\n * @type {Object<string, Object<string, import(\"../xml.js\").Parser>>}\n */\n// @ts-ignore\nconst TMS_PARSERS = makeStructureNS(\n  NAMESPACE_URIS, {\n    'WellKnownScaleSet': makeObjectPropertySetter(readString),\n    'TileMatrix': makeObjectPropertyPusher(readTileMatrix)\n  }, makeStructureNS(OWS_NAMESPACE_URIS, {\n    'SupportedCRS': makeObjectPropertySetter(readString),\n    'Identifier': makeObjectPropertySetter(readString)\n  }));\n\n\n/**\n * @const\n * @type {Object<string, Object<string, import(\"../xml.js\").Parser>>}\n */\n// @ts-ignore\nconst TM_PARSERS = makeStructureNS(\n  NAMESPACE_URIS, {\n    'TopLeftCorner': makeObjectPropertySetter(readCoordinates),\n    'ScaleDenominator': makeObjectPropertySetter(readDecimal),\n    'TileWidth': makeObjectPropertySetter(readNonNegativeInteger),\n    'TileHeight': makeObjectPropertySetter(readNonNegativeInteger),\n    'MatrixWidth': makeObjectPropertySetter(readNonNegativeInteger),\n    'MatrixHeight': makeObjectPropertySetter(readNonNegativeInteger)\n  }, makeStructureNS(OWS_NAMESPACE_URIS, {\n    'Identifier': makeObjectPropertySetter(readString)\n  }));\n\n\n/**\n * @param {Element} node Node.\n * @param {Array<*>} objectStack Object stack.\n * @return {Object|undefined} Attribution object.\n */\nfunction readContents(node, objectStack) {\n  return pushParseAndPop({}, CONTENTS_PARSERS, node, objectStack);\n}\n\n\n/**\n * @param {Element} node Node.\n * @param {Array<*>} objectStack Object stack.\n * @return {Object|undefined} Layers object.\n */\nfunction readLayer(node, objectStack) {\n  return pushParseAndPop({}, LAYER_PARSERS, node, objectStack);\n}\n\n\n/**\n * @param {Element} node Node.\n * @param {Array<*>} objectStack Object stack.\n * @return {Object|undefined} Tile Matrix Set object.\n */\nfunction readTileMatrixSet(node, objectStack) {\n  return pushParseAndPop({}, TMS_PARSERS, node, objectStack);\n}\n\n\n/**\n * @param {Element} node Node.\n * @param {Array<*>} objectStack Object stack.\n * @return {Object|undefined} Style object.\n */\nfunction readStyle(node, objectStack) {\n  const style = pushParseAndPop({}, STYLE_PARSERS, node, objectStack);\n  if (!style) {\n    return undefined;\n  }\n  const isDefault = node.getAttribute('isDefault') === 'true';\n  style['isDefault'] = isDefault;\n  return style;\n\n}\n\n\n/**\n * @param {Element} node Node.\n * @param {Array<*>} objectStack Object stack.\n * @return {Object|undefined} Tile Matrix Set Link object.\n */\nfunction readTileMatrixSetLink(node, objectStack) {\n  return pushParseAndPop({}, TMS_LINKS_PARSERS, node, objectStack);\n}\n\n\n/**\n * @param {Element} node Node.\n * @param {Array<*>} objectStack Object stack.\n * @return {Object|undefined} Dimension object.\n */\nfunction readDimensions(node, objectStack) {\n  return pushParseAndPop({}, DIMENSION_PARSERS, node, objectStack);\n}\n\n\n/**\n * @param {Element} node Node.\n * @param {Array<*>} objectStack Object stack.\n * @return {Object|undefined} Resource URL object.\n */\nfunction readResourceUrl(node, objectStack) {\n  const format = node.getAttribute('format');\n  const template = node.getAttribute('template');\n  const resourceType = node.getAttribute('resourceType');\n  const resource = {};\n  if (format) {\n    resource['format'] = format;\n  }\n  if (template) {\n    resource['template'] = template;\n  }\n  if (resourceType) {\n    resource['resourceType'] = resourceType;\n  }\n  return resource;\n}\n\n\n/**\n * @param {Element} node Node.\n * @param {Array<*>} objectStack Object stack.\n * @return {Object|undefined} WGS84 BBox object.\n */\nfunction readWgs84BoundingBox(node, objectStack) {\n  const coordinates = pushParseAndPop([], WGS84_BBOX_READERS, node, objectStack);\n  if (coordinates.length != 2) {\n    return undefined;\n  }\n  return boundingExtent(coordinates);\n}\n\n\n/**\n * @param {Element} node Node.\n * @param {Array<*>} objectStack Object stack.\n * @return {Object|undefined} Legend object.\n */\nfunction readLegendUrl(node, objectStack) {\n  const legend = {};\n  legend['format'] = node.getAttribute('format');\n  legend['href'] = readHref(node);\n  return legend;\n}\n\n\n/**\n * @param {Node} node Node.\n * @param {Array<*>} objectStack Object stack.\n * @return {Object|undefined} Coordinates object.\n */\nfunction readCoordinates(node, objectStack) {\n  const coordinates = readString(node).split(/\\s+/);\n  if (!coordinates || coordinates.length != 2) {\n    return undefined;\n  }\n  const x = +coordinates[0];\n  const y = +coordinates[1];\n  if (isNaN(x) || isNaN(y)) {\n    return undefined;\n  }\n  return [x, y];\n}\n\n\n/**\n * @param {Element} node Node.\n * @param {Array<*>} objectStack Object stack.\n * @return {Object|undefined} TileMatrix object.\n */\nfunction readTileMatrix(node, objectStack) {\n  return pushParseAndPop({}, TM_PARSERS, node, objectStack);\n}\n\n\n/**\n * @param {Element} node Node.\n * @param {Array<*>} objectStack Object stack.\n * @return {Object|undefined} TileMatrixSetLimits Object.\n */\nfunction readTileMatrixLimitsList(node, objectStack) {\n  return pushParseAndPop([], TMS_LIMITS_LIST_PARSERS, node, objectStack);\n}\n\n\n/**\n * @param {Element} node Node.\n * @param {Array<*>} objectStack Object stack.\n * @return {Object|undefined} TileMatrixLimits Array.\n */\nfunction readTileMatrixLimits(node, objectStack) {\n  return pushParseAndPop({}, TMS_LIMITS_PARSERS, node, objectStack);\n}\n\n\nexport default WMTSCapabilities;\n","/**\n * @license\n * Latitude/longitude spherical geodesy formulae taken from\n * http://www.movable-type.co.uk/scripts/latlong.html\n * Licensed under CC-BY-3.0.\n */\n\n/**\n * @module ol/sphere\n */\nimport {toRadians, toDegrees} from './math.js';\nimport GeometryType from './geom/GeometryType.js';\n\n\n/**\n * Object literal with options for the {@link getLength} or {@link getArea}\n * functions.\n * @typedef {Object} SphereMetricOptions\n * @property {import(\"./proj.js\").ProjectionLike} [projection='EPSG:3857']\n * Projection of the  geometry.  By default, the geometry is assumed to be in\n * Web Mercator.\n * @property {number} [radius=6371008.8] Sphere radius.  By default, the\n * [mean Earth radius](https://en.wikipedia.org/wiki/Earth_radius#Mean_radius)\n * for the WGS84 ellipsoid is used.\n */\n\n\n/**\n * The mean Earth radius (1/3 * (2a + b)) for the WGS84 ellipsoid.\n * https://en.wikipedia.org/wiki/Earth_radius#Mean_radius\n * @type {number}\n */\nexport const DEFAULT_RADIUS = 6371008.8;\n\n\n/**\n * Get the great circle distance (in meters) between two geographic coordinates.\n * @param {Array} c1 Starting coordinate.\n * @param {Array} c2 Ending coordinate.\n * @param {number=} opt_radius The sphere radius to use.  Defaults to the Earth's\n *     mean radius using the WGS84 ellipsoid.\n * @return {number} The great circle distance between the points (in meters).\n * @api\n */\nexport function getDistance(c1, c2, opt_radius) {\n  const radius = opt_radius || DEFAULT_RADIUS;\n  const lat1 = toRadians(c1[1]);\n  const lat2 = toRadians(c2[1]);\n  const deltaLatBy2 = (lat2 - lat1) / 2;\n  const deltaLonBy2 = toRadians(c2[0] - c1[0]) / 2;\n  const a = Math.sin(deltaLatBy2) * Math.sin(deltaLatBy2) +\n      Math.sin(deltaLonBy2) * Math.sin(deltaLonBy2) *\n      Math.cos(lat1) * Math.cos(lat2);\n  return 2 * radius * Math.atan2(Math.sqrt(a), Math.sqrt(1 - a));\n}\n\n\n/**\n * Get the cumulative great circle length of linestring coordinates (geographic).\n * @param {Array} coordinates Linestring coordinates.\n * @param {number} radius The sphere radius to use.\n * @return {number} The length (in meters).\n */\nfunction getLengthInternal(coordinates, radius) {\n  let length = 0;\n  for (let i = 0, ii = coordinates.length; i < ii - 1; ++i) {\n    length += getDistance(coordinates[i], coordinates[i + 1], radius);\n  }\n  return length;\n}\n\n\n/**\n * Get the spherical length of a geometry.  This length is the sum of the\n * great circle distances between coordinates.  For polygons, the length is\n * the sum of all rings.  For points, the length is zero.  For multi-part\n * geometries, the length is the sum of the length of each part.\n * @param {import(\"./geom/Geometry.js\").default} geometry A geometry.\n * @param {SphereMetricOptions=} opt_options Options for the\n * length calculation.  By default, geometries are assumed to be in 'EPSG:3857'.\n * You can change this by providing a `projection` option.\n * @return {number} The spherical length (in meters).\n * @api\n */\nexport function getLength(geometry, opt_options) {\n  const options = opt_options || {};\n  const radius = options.radius || DEFAULT_RADIUS;\n  const projection = options.projection || 'EPSG:3857';\n  const type = geometry.getType();\n  if (type !== GeometryType.GEOMETRY_COLLECTION) {\n    geometry = geometry.clone().transform(projection, 'EPSG:4326');\n  }\n  let length = 0;\n  let coordinates, coords, i, ii, j, jj;\n  switch (type) {\n    case GeometryType.POINT:\n    case GeometryType.MULTI_POINT: {\n      break;\n    }\n    case GeometryType.LINE_STRING:\n    case GeometryType.LINEAR_RING: {\n      coordinates = /** @type {import(\"./geom/SimpleGeometry.js\").default} */ (geometry).getCoordinates();\n      length = getLengthInternal(coordinates, radius);\n      break;\n    }\n    case GeometryType.MULTI_LINE_STRING:\n    case GeometryType.POLYGON: {\n      coordinates = /** @type {import(\"./geom/SimpleGeometry.js\").default} */ (geometry).getCoordinates();\n      for (i = 0, ii = coordinates.length; i < ii; ++i) {\n        length += getLengthInternal(coordinates[i], radius);\n      }\n      break;\n    }\n    case GeometryType.MULTI_POLYGON: {\n      coordinates = /** @type {import(\"./geom/SimpleGeometry.js\").default} */ (geometry).getCoordinates();\n      for (i = 0, ii = coordinates.length; i < ii; ++i) {\n        coords = coordinates[i];\n        for (j = 0, jj = coords.length; j < jj; ++j) {\n          length += getLengthInternal(coords[j], radius);\n        }\n      }\n      break;\n    }\n    case GeometryType.GEOMETRY_COLLECTION: {\n      const geometries = /** @type {import(\"./geom/GeometryCollection.js\").default} */ (geometry).getGeometries();\n      for (i = 0, ii = geometries.length; i < ii; ++i) {\n        length += getLength(geometries[i], opt_options);\n      }\n      break;\n    }\n    default: {\n      throw new Error('Unsupported geometry type: ' + type);\n    }\n  }\n  return length;\n}\n\n\n/**\n * Returns the spherical area for a list of coordinates.\n *\n * [Reference](https://trs-new.jpl.nasa.gov/handle/2014/40409)\n * Robert. G. Chamberlain and William H. Duquette, \"Some Algorithms for\n * Polygons on a Sphere\", JPL Publication 07-03, Jet Propulsion\n * Laboratory, Pasadena, CA, June 2007\n *\n * @param {Array<import(\"./coordinate.js\").Coordinate>} coordinates List of coordinates of a linear\n * ring. If the ring is oriented clockwise, the area will be positive,\n * otherwise it will be negative.\n * @param {number} radius The sphere radius.\n * @return {number} Area (in square meters).\n */\nfunction getAreaInternal(coordinates, radius) {\n  let area = 0;\n  const len = coordinates.length;\n  let x1 = coordinates[len - 1][0];\n  let y1 = coordinates[len - 1][1];\n  for (let i = 0; i < len; i++) {\n    const x2 = coordinates[i][0];\n    const y2 = coordinates[i][1];\n    area += toRadians(x2 - x1) *\n        (2 + Math.sin(toRadians(y1)) +\n        Math.sin(toRadians(y2)));\n    x1 = x2;\n    y1 = y2;\n  }\n  return area * radius * radius / 2.0;\n}\n\n\n/**\n * Get the spherical area of a geometry.  This is the area (in meters) assuming\n * that polygon edges are segments of great circles on a sphere.\n * @param {import(\"./geom/Geometry.js\").default} geometry A geometry.\n * @param {SphereMetricOptions=} opt_options Options for the area\n *     calculation.  By default, geometries are assumed to be in 'EPSG:3857'.\n *     You can change this by providing a `projection` option.\n * @return {number} The spherical area (in square meters).\n * @api\n */\nexport function getArea(geometry, opt_options) {\n  const options = opt_options || {};\n  const radius = options.radius || DEFAULT_RADIUS;\n  const projection = options.projection || 'EPSG:3857';\n  const type = geometry.getType();\n  if (type !== GeometryType.GEOMETRY_COLLECTION) {\n    geometry = geometry.clone().transform(projection, 'EPSG:4326');\n  }\n  let area = 0;\n  let coordinates, coords, i, ii, j, jj;\n  switch (type) {\n    case GeometryType.POINT:\n    case GeometryType.MULTI_POINT:\n    case GeometryType.LINE_STRING:\n    case GeometryType.MULTI_LINE_STRING:\n    case GeometryType.LINEAR_RING: {\n      break;\n    }\n    case GeometryType.POLYGON: {\n      coordinates = /** @type {import(\"./geom/Polygon.js\").default} */ (geometry).getCoordinates();\n      area = Math.abs(getAreaInternal(coordinates[0], radius));\n      for (i = 1, ii = coordinates.length; i < ii; ++i) {\n        area -= Math.abs(getAreaInternal(coordinates[i], radius));\n      }\n      break;\n    }\n    case GeometryType.MULTI_POLYGON: {\n      coordinates = /** @type {import(\"./geom/SimpleGeometry.js\").default} */ (geometry).getCoordinates();\n      for (i = 0, ii = coordinates.length; i < ii; ++i) {\n        coords = coordinates[i];\n        area += Math.abs(getAreaInternal(coords[0], radius));\n        for (j = 1, jj = coords.length; j < jj; ++j) {\n          area -= Math.abs(getAreaInternal(coords[j], radius));\n        }\n      }\n      break;\n    }\n    case GeometryType.GEOMETRY_COLLECTION: {\n      const geometries = /** @type {import(\"./geom/GeometryCollection.js\").default} */ (geometry).getGeometries();\n      for (i = 0, ii = geometries.length; i < ii; ++i) {\n        area += getArea(geometries[i], opt_options);\n      }\n      break;\n    }\n    default: {\n      throw new Error('Unsupported geometry type: ' + type);\n    }\n  }\n  return area;\n}\n\n\n/**\n * Returns the coordinate at the given distance and bearing from `c1`.\n *\n * @param {import(\"./coordinate.js\").Coordinate} c1 The origin point (`[lon, lat]` in degrees).\n * @param {number} distance The great-circle distance between the origin\n *     point and the target point.\n * @param {number} bearing The bearing (in radians).\n * @param {number=} opt_radius The sphere radius to use.  Defaults to the Earth's\n *     mean radius using the WGS84 ellipsoid.\n * @return {import(\"./coordinate.js\").Coordinate} The target point.\n */\nexport function offset(c1, distance, bearing, opt_radius) {\n  const radius = opt_radius || DEFAULT_RADIUS;\n  const lat1 = toRadians(c1[1]);\n  const lon1 = toRadians(c1[0]);\n  const dByR = distance / radius;\n  const lat = Math.asin(\n    Math.sin(lat1) * Math.cos(dByR) +\n      Math.cos(lat1) * Math.sin(dByR) * Math.cos(bearing));\n  const lon = lon1 + Math.atan2(\n    Math.sin(bearing) * Math.sin(dByR) * Math.cos(lat1),\n    Math.cos(dByR) - Math.sin(lat1) * Math.sin(lat));\n  return [toDegrees(lon), toDegrees(lat)];\n}\n","/**\n * @module ol/interaction/Modify\n */\nimport {getUid} from '../util.js';\nimport Collection from '../Collection.js';\nimport CollectionEventType from '../CollectionEventType.js';\nimport Feature from '../Feature.js';\nimport MapBrowserEventType from '../MapBrowserEventType.js';\nimport {equals} from '../array.js';\nimport {equals as coordinatesEqual, distance as coordinateDistance, squaredDistance as squaredCoordinateDistance, squaredDistanceToSegment, closestOnSegment} from '../coordinate.js';\nimport Event from '../events/Event.js';\nimport EventType from '../events/EventType.js';\nimport {always, primaryAction, altKeyOnly, singleClick} from '../events/condition.js';\nimport {boundingExtent, buffer as bufferExtent, createOrUpdateFromCoordinate as createExtent} from '../extent.js';\nimport GeometryType from '../geom/GeometryType.js';\nimport Point from '../geom/Point.js';\nimport PointerInteraction from './Pointer.js';\nimport VectorLayer from '../layer/Vector.js';\nimport VectorSource from '../source/Vector.js';\nimport VectorEventType from '../source/VectorEventType.js';\nimport RBush from '../structs/RBush.js';\nimport {createEditingStyle} from '../style/Style.js';\nimport {fromUserExtent, toUserExtent, fromUserCoordinate, toUserCoordinate} from '../proj.js';\n\n\n/**\n * The segment index assigned to a circle's center when\n * breaking up a circle into ModifySegmentDataType segments.\n * @type {number}\n */\nconst CIRCLE_CENTER_INDEX = 0;\n\n/**\n * The segment index assigned to a circle's circumference when\n * breaking up a circle into ModifySegmentDataType segments.\n * @type {number}\n */\nconst CIRCLE_CIRCUMFERENCE_INDEX = 1;\n\nconst tempExtent = [0, 0, 0, 0];\nconst tempSegment = [];\n\n/**\n * @enum {string}\n */\nconst ModifyEventType = {\n  /**\n   * Triggered upon feature modification start\n   * @event ModifyEvent#modifystart\n   * @api\n   */\n  MODIFYSTART: 'modifystart',\n  /**\n   * Triggered upon feature modification end\n   * @event ModifyEvent#modifyend\n   * @api\n   */\n  MODIFYEND: 'modifyend'\n};\n\n\n/**\n * @typedef {Object} SegmentData\n * @property {Array<number>} [depth]\n * @property {Feature} feature\n * @property {import(\"../geom/SimpleGeometry.js\").default} geometry\n * @property {number} [index]\n * @property {Array<import(\"../extent.js\").Extent>} segment\n * @property {Array<SegmentData>} [featureSegments]\n */\n\n\n/**\n * @typedef {Object} Options\n * @property {import(\"../events/condition.js\").Condition} [condition] A function that\n * takes an {@link module:ol/MapBrowserEvent~MapBrowserEvent} and returns a\n * boolean to indicate whether that event will be considered to add or move a\n * vertex to the sketch. Default is\n * {@link module:ol/events/condition~primaryAction}.\n * @property {import(\"../events/condition.js\").Condition} [deleteCondition] A function\n * that takes an {@link module:ol/MapBrowserEvent~MapBrowserEvent} and returns a\n * boolean to indicate whether that event should be handled. By default,\n * {@link module:ol/events/condition~singleClick} with\n * {@link module:ol/events/condition~altKeyOnly} results in a vertex deletion.\n * @property {import(\"../events/condition.js\").Condition} [insertVertexCondition] A\n * function that takes an {@link module:ol/MapBrowserEvent~MapBrowserEvent} and\n * returns a boolean to indicate whether a new vertex should be added to the sketch\n * features. Default is {@link module:ol/events/condition~always}.\n * @property {number} [pixelTolerance=10] Pixel tolerance for considering the\n * pointer close enough to a segment or vertex for editing.\n * @property {import(\"../style/Style.js\").StyleLike} [style]\n * Style used for the features being modified. By default the default edit\n * style is used (see {@link module:ol/style}).\n * @property {VectorSource} [source] The vector source with\n * features to modify.  If a vector source is not provided, a feature collection\n * must be provided with the features option.\n * @property {Collection<Feature>} [features]\n * The features the interaction works on.  If a feature collection is not\n * provided, a vector source must be provided with the source option.\n * @property {boolean} [wrapX=false] Wrap the world horizontally on the sketch\n * overlay.\n */\n\n\n/**\n * @classdesc\n * Events emitted by {@link module:ol/interaction/Modify~Modify} instances are\n * instances of this type.\n */\nexport class ModifyEvent extends Event {\n  /**\n   * @param {ModifyEventType} type Type.\n   * @param {Collection<Feature>} features\n   * The features modified.\n   * @param {import(\"../MapBrowserPointerEvent.js\").default} mapBrowserPointerEvent\n   * Associated {@link module:ol/MapBrowserPointerEvent}.\n   */\n  constructor(type, features, mapBrowserPointerEvent) {\n    super(type);\n\n    /**\n     * The features being modified.\n     * @type {Collection<Feature>}\n     * @api\n     */\n    this.features = features;\n\n    /**\n     * Associated {@link module:ol/MapBrowserEvent}.\n     * @type {import(\"../MapBrowserEvent.js\").default}\n     * @api\n     */\n    this.mapBrowserEvent = mapBrowserPointerEvent;\n\n  }\n\n}\n\n\n/**\n * @classdesc\n * Interaction for modifying feature geometries.  To modify features that have\n * been added to an existing source, construct the modify interaction with the\n * `source` option.  If you want to modify features in a collection (for example,\n * the collection used by a select interaction), construct the interaction with\n * the `features` option.  The interaction must be constructed with either a\n * `source` or `features` option.\n *\n * By default, the interaction will allow deletion of vertices when the `alt`\n * key is pressed.  To configure the interaction with a different condition\n * for deletion, use the `deleteCondition` option.\n * @fires ModifyEvent\n * @api\n */\nclass Modify extends PointerInteraction {\n  /**\n   * @param {Options} options Options.\n   */\n  constructor(options) {\n\n    super(/** @type {import(\"./Pointer.js\").Options} */ (options));\n\n    /** @private */\n    this.boundHandleFeatureChange_ = this.handleFeatureChange_.bind(this);\n\n    /**\n     * @private\n     * @type {import(\"../events/condition.js\").Condition}\n     */\n    this.condition_ = options.condition ? options.condition : primaryAction;\n\n    /**\n     * @private\n     * @param {import(\"../MapBrowserEvent.js\").default} mapBrowserEvent Browser event.\n     * @return {boolean} Combined condition result.\n     */\n    this.defaultDeleteCondition_ = function(mapBrowserEvent) {\n      return altKeyOnly(mapBrowserEvent) && singleClick(mapBrowserEvent);\n    };\n\n    /**\n     * @type {import(\"../events/condition.js\").Condition}\n     * @private\n     */\n    this.deleteCondition_ = options.deleteCondition ?\n      options.deleteCondition : this.defaultDeleteCondition_;\n\n    /**\n     * @type {import(\"../events/condition.js\").Condition}\n     * @private\n     */\n    this.insertVertexCondition_ = options.insertVertexCondition ?\n      options.insertVertexCondition : always;\n\n    /**\n     * Editing vertex.\n     * @type {Feature}\n     * @private\n     */\n    this.vertexFeature_ = null;\n\n    /**\n     * Segments intersecting {@link this.vertexFeature_} by segment uid.\n     * @type {Object<string, boolean>}\n     * @private\n     */\n    this.vertexSegments_ = null;\n\n    /**\n     * @type {import(\"../pixel.js\").Pixel}\n     * @private\n     */\n    this.lastPixel_ = [0, 0];\n\n    /**\n     * Tracks if the next `singleclick` event should be ignored to prevent\n     * accidental deletion right after vertex creation.\n     * @type {boolean}\n     * @private\n     */\n    this.ignoreNextSingleClick_ = false;\n\n    /**\n     * @type {boolean}\n     * @private\n     */\n    this.modified_ = false;\n\n    /**\n     * Segment RTree for each layer\n     * @type {RBush<SegmentData>}\n     * @private\n     */\n    this.rBush_ = new RBush();\n\n    /**\n     * @type {number}\n     * @private\n     */\n    this.pixelTolerance_ = options.pixelTolerance !== undefined ?\n      options.pixelTolerance : 10;\n\n    /**\n     * @type {boolean}\n     * @private\n     */\n    this.snappedToVertex_ = false;\n\n    /**\n     * Indicate whether the interaction is currently changing a feature's\n     * coordinates.\n     * @type {boolean}\n     * @private\n     */\n    this.changingFeature_ = false;\n\n    /**\n     * @type {Array}\n     * @private\n     */\n    this.dragSegments_ = [];\n\n    /**\n     * Draw overlay where sketch features are drawn.\n     * @type {VectorLayer}\n     * @private\n     */\n    this.overlay_ = new VectorLayer({\n      source: new VectorSource({\n        useSpatialIndex: false,\n        wrapX: !!options.wrapX\n      }),\n      style: options.style ? options.style : getDefaultStyleFunction(),\n      updateWhileAnimating: true,\n      updateWhileInteracting: true\n    });\n\n    /**\n     * @const\n     * @private\n     * @type {!Object<string, function(Feature, import(\"../geom/Geometry.js\").default): void>}\n     */\n    this.SEGMENT_WRITERS_ = {\n      'Point': this.writePointGeometry_.bind(this),\n      'LineString': this.writeLineStringGeometry_.bind(this),\n      'LinearRing': this.writeLineStringGeometry_.bind(this),\n      'Polygon': this.writePolygonGeometry_.bind(this),\n      'MultiPoint': this.writeMultiPointGeometry_.bind(this),\n      'MultiLineString': this.writeMultiLineStringGeometry_.bind(this),\n      'MultiPolygon': this.writeMultiPolygonGeometry_.bind(this),\n      'Circle': this.writeCircleGeometry_.bind(this),\n      'GeometryCollection': this.writeGeometryCollectionGeometry_.bind(this)\n    };\n\n\n    /**\n     * @type {VectorSource}\n     * @private\n     */\n    this.source_ = null;\n\n    let features;\n    if (options.source) {\n      this.source_ = options.source;\n      features = new Collection(this.source_.getFeatures());\n      this.source_.addEventListener(VectorEventType.ADDFEATURE, this.handleSourceAdd_.bind(this));\n      this.source_.addEventListener(VectorEventType.REMOVEFEATURE, this.handleSourceRemove_.bind(this));\n    } else {\n      features = options.features;\n    }\n    if (!features) {\n      throw new Error('The modify interaction requires features or a source');\n    }\n\n    /**\n     * @type {Collection<Feature>}\n     * @private\n     */\n    this.features_ = features;\n\n    this.features_.forEach(this.addFeature_.bind(this));\n    this.features_.addEventListener(CollectionEventType.ADD, this.handleFeatureAdd_.bind(this));\n    this.features_.addEventListener(CollectionEventType.REMOVE, this.handleFeatureRemove_.bind(this));\n\n    /**\n     * @type {import(\"../MapBrowserPointerEvent.js\").default}\n     * @private\n     */\n    this.lastPointerEvent_ = null;\n\n  }\n\n  /**\n   * @param {Feature} feature Feature.\n   * @private\n   */\n  addFeature_(feature) {\n    const geometry = feature.getGeometry();\n    if (geometry) {\n      const writer = this.SEGMENT_WRITERS_[geometry.getType()];\n      if (writer) {\n        writer(feature, geometry);\n      }\n    }\n    const map = this.getMap();\n    if (map && map.isRendered() && this.getActive()) {\n      this.handlePointerAtPixel_(this.lastPixel_, map);\n    }\n    feature.addEventListener(EventType.CHANGE, this.boundHandleFeatureChange_);\n  }\n\n  /**\n   * @param {import(\"../MapBrowserPointerEvent.js\").default} evt Map browser event\n   * @private\n   */\n  willModifyFeatures_(evt) {\n    if (!this.modified_) {\n      this.modified_ = true;\n      this.dispatchEvent(new ModifyEvent(ModifyEventType.MODIFYSTART, this.features_, evt));\n    }\n  }\n\n  /**\n   * @param {Feature} feature Feature.\n   * @private\n   */\n  removeFeature_(feature) {\n    this.removeFeatureSegmentData_(feature);\n    // Remove the vertex feature if the collection of canditate features is empty.\n    if (this.vertexFeature_ && this.features_.getLength() === 0) {\n      this.overlay_.getSource().removeFeature(this.vertexFeature_);\n      this.vertexFeature_ = null;\n    }\n    feature.removeEventListener(EventType.CHANGE, this.boundHandleFeatureChange_);\n  }\n\n  /**\n   * @param {Feature} feature Feature.\n   * @private\n   */\n  removeFeatureSegmentData_(feature) {\n    const rBush = this.rBush_;\n    /** @type {Array<SegmentData>} */\n    const nodesToRemove = [];\n    rBush.forEach(\n      /**\n       * @param {SegmentData} node RTree node.\n       */\n      function(node) {\n        if (feature === node.feature) {\n          nodesToRemove.push(node);\n        }\n      });\n    for (let i = nodesToRemove.length - 1; i >= 0; --i) {\n      const nodeToRemove = nodesToRemove[i];\n      for (let j = this.dragSegments_.length - 1; j >= 0; --j) {\n        if (this.dragSegments_[j][0] === nodeToRemove) {\n          this.dragSegments_.splice(j, 1);\n        }\n      }\n      rBush.remove(nodeToRemove);\n    }\n  }\n\n  /**\n   * @inheritDoc\n   */\n  setActive(active) {\n    if (this.vertexFeature_ && !active) {\n      this.overlay_.getSource().removeFeature(this.vertexFeature_);\n      this.vertexFeature_ = null;\n    }\n    super.setActive(active);\n  }\n\n  /**\n   * @inheritDoc\n   */\n  setMap(map) {\n    this.overlay_.setMap(map);\n    super.setMap(map);\n  }\n\n  /**\n   * Get the overlay layer that this interaction renders sketch features to.\n   * @return {VectorLayer} Overlay layer.\n   * @api\n   */\n  getOverlay() {\n    return this.overlay_;\n  }\n\n  /**\n   * @param {import(\"../source/Vector.js\").VectorSourceEvent} event Event.\n   * @private\n   */\n  handleSourceAdd_(event) {\n    if (event.feature) {\n      this.features_.push(event.feature);\n    }\n  }\n\n  /**\n   * @param {import(\"../source/Vector.js\").VectorSourceEvent} event Event.\n   * @private\n   */\n  handleSourceRemove_(event) {\n    if (event.feature) {\n      this.features_.remove(event.feature);\n    }\n  }\n\n  /**\n   * @param {import(\"../Collection.js\").CollectionEvent} evt Event.\n   * @private\n   */\n  handleFeatureAdd_(evt) {\n    this.addFeature_(/** @type {Feature} */ (evt.element));\n  }\n\n  /**\n   * @param {import(\"../events/Event.js\").default} evt Event.\n   * @private\n   */\n  handleFeatureChange_(evt) {\n    if (!this.changingFeature_) {\n      const feature = /** @type {Feature} */ (evt.target);\n      this.removeFeature_(feature);\n      this.addFeature_(feature);\n    }\n  }\n\n  /**\n   * @param {import(\"../Collection.js\").CollectionEvent} evt Event.\n   * @private\n   */\n  handleFeatureRemove_(evt) {\n    const feature = /** @type {Feature} */ (evt.element);\n    this.removeFeature_(feature);\n  }\n\n  /**\n   * @param {Feature} feature Feature\n   * @param {Point} geometry Geometry.\n   * @private\n   */\n  writePointGeometry_(feature, geometry) {\n    const coordinates = geometry.getCoordinates();\n\n    /** @type {SegmentData} */\n    const segmentData = {\n      feature: feature,\n      geometry: geometry,\n      segment: [coordinates, coordinates]\n    };\n\n    this.rBush_.insert(geometry.getExtent(), segmentData);\n  }\n\n  /**\n   * @param {Feature} feature Feature\n   * @param {import(\"../geom/MultiPoint.js\").default} geometry Geometry.\n   * @private\n   */\n  writeMultiPointGeometry_(feature, geometry) {\n    const points = geometry.getCoordinates();\n    for (let i = 0, ii = points.length; i < ii; ++i) {\n      const coordinates = points[i];\n\n      /** @type {SegmentData} */\n      const segmentData = {\n        feature: feature,\n        geometry: geometry,\n        depth: [i],\n        index: i,\n        segment: [coordinates, coordinates]\n      };\n\n      this.rBush_.insert(geometry.getExtent(), segmentData);\n    }\n  }\n\n  /**\n   * @param {Feature} feature Feature\n   * @param {import(\"../geom/LineString.js\").default} geometry Geometry.\n   * @private\n   */\n  writeLineStringGeometry_(feature, geometry) {\n    const coordinates = geometry.getCoordinates();\n    for (let i = 0, ii = coordinates.length - 1; i < ii; ++i) {\n      const segment = coordinates.slice(i, i + 2);\n\n      /** @type {SegmentData} */\n      const segmentData = {\n        feature: feature,\n        geometry: geometry,\n        index: i,\n        segment: segment\n      };\n\n      this.rBush_.insert(boundingExtent(segment), segmentData);\n    }\n  }\n\n  /**\n   * @param {Feature} feature Feature\n   * @param {import(\"../geom/MultiLineString.js\").default} geometry Geometry.\n   * @private\n   */\n  writeMultiLineStringGeometry_(feature, geometry) {\n    const lines = geometry.getCoordinates();\n    for (let j = 0, jj = lines.length; j < jj; ++j) {\n      const coordinates = lines[j];\n      for (let i = 0, ii = coordinates.length - 1; i < ii; ++i) {\n        const segment = coordinates.slice(i, i + 2);\n\n        /** @type {SegmentData} */\n        const segmentData = {\n          feature: feature,\n          geometry: geometry,\n          depth: [j],\n          index: i,\n          segment: segment\n        };\n\n        this.rBush_.insert(boundingExtent(segment), segmentData);\n      }\n    }\n  }\n\n  /**\n   * @param {Feature} feature Feature\n   * @param {import(\"../geom/Polygon.js\").default} geometry Geometry.\n   * @private\n   */\n  writePolygonGeometry_(feature, geometry) {\n    const rings = geometry.getCoordinates();\n    for (let j = 0, jj = rings.length; j < jj; ++j) {\n      const coordinates = rings[j];\n      for (let i = 0, ii = coordinates.length - 1; i < ii; ++i) {\n        const segment = coordinates.slice(i, i + 2);\n\n        /** @type {SegmentData} */\n        const segmentData = {\n          feature: feature,\n          geometry: geometry,\n          depth: [j],\n          index: i,\n          segment: segment\n        };\n\n        this.rBush_.insert(boundingExtent(segment), segmentData);\n      }\n    }\n  }\n\n  /**\n   * @param {Feature} feature Feature\n   * @param {import(\"../geom/MultiPolygon.js\").default} geometry Geometry.\n   * @private\n   */\n  writeMultiPolygonGeometry_(feature, geometry) {\n    const polygons = geometry.getCoordinates();\n    for (let k = 0, kk = polygons.length; k < kk; ++k) {\n      const rings = polygons[k];\n      for (let j = 0, jj = rings.length; j < jj; ++j) {\n        const coordinates = rings[j];\n        for (let i = 0, ii = coordinates.length - 1; i < ii; ++i) {\n          const segment = coordinates.slice(i, i + 2);\n\n          /** @type {SegmentData} */\n          const segmentData = {\n            feature: feature,\n            geometry: geometry,\n            depth: [j, k],\n            index: i,\n            segment: segment\n          };\n\n          this.rBush_.insert(boundingExtent(segment), segmentData);\n        }\n      }\n    }\n  }\n\n  /**\n   * We convert a circle into two segments.  The segment at index\n   * {@link CIRCLE_CENTER_INDEX} is the\n   * circle's center (a point).  The segment at index\n   * {@link CIRCLE_CIRCUMFERENCE_INDEX} is\n   * the circumference, and is not a line segment.\n   *\n   * @param {Feature} feature Feature.\n   * @param {import(\"../geom/Circle.js\").default} geometry Geometry.\n   * @private\n   */\n  writeCircleGeometry_(feature, geometry) {\n    const coordinates = geometry.getCenter();\n\n    /** @type {SegmentData} */\n    const centerSegmentData = {\n      feature: feature,\n      geometry: geometry,\n      index: CIRCLE_CENTER_INDEX,\n      segment: [coordinates, coordinates]\n    };\n\n    /** @type {SegmentData} */\n    const circumferenceSegmentData = {\n      feature: feature,\n      geometry: geometry,\n      index: CIRCLE_CIRCUMFERENCE_INDEX,\n      segment: [coordinates, coordinates]\n    };\n\n    const featureSegments = [centerSegmentData, circumferenceSegmentData];\n    centerSegmentData.featureSegments = circumferenceSegmentData.featureSegments = featureSegments;\n    this.rBush_.insert(createExtent(coordinates), centerSegmentData);\n    this.rBush_.insert(geometry.getExtent(), circumferenceSegmentData);\n  }\n\n  /**\n   * @param {Feature} feature Feature\n   * @param {import(\"../geom/GeometryCollection.js\").default} geometry Geometry.\n   * @private\n   */\n  writeGeometryCollectionGeometry_(feature, geometry) {\n    const geometries = geometry.getGeometriesArray();\n    for (let i = 0; i < geometries.length; ++i) {\n      const geometry = geometries[i];\n      const writer = this.SEGMENT_WRITERS_[geometry.getType()];\n      writer(feature, geometry);\n    }\n  }\n\n  /**\n   * @param {import(\"../coordinate.js\").Coordinate} coordinates Coordinates.\n   * @return {Feature} Vertex feature.\n   * @private\n   */\n  createOrUpdateVertexFeature_(coordinates) {\n    let vertexFeature = this.vertexFeature_;\n    if (!vertexFeature) {\n      vertexFeature = new Feature(new Point(coordinates));\n      this.vertexFeature_ = vertexFeature;\n      this.overlay_.getSource().addFeature(vertexFeature);\n    } else {\n      const geometry = vertexFeature.getGeometry();\n      geometry.setCoordinates(coordinates);\n    }\n    return vertexFeature;\n  }\n\n  /**\n   * Handles the {@link module:ol/MapBrowserEvent map browser event} and may modify the geometry.\n   * @override\n   */\n  handleEvent(mapBrowserEvent) {\n    if (!(/** @type {import(\"../MapBrowserPointerEvent.js\").default} */ (mapBrowserEvent).pointerEvent)) {\n      return true;\n    }\n    this.lastPointerEvent_ = mapBrowserEvent;\n\n    let handled;\n    if (!mapBrowserEvent.map.getView().getInteracting() &&\n        mapBrowserEvent.type == MapBrowserEventType.POINTERMOVE &&\n        !this.handlingDownUpSequence) {\n      this.handlePointerMove_(mapBrowserEvent);\n    }\n    if (this.vertexFeature_ && this.deleteCondition_(mapBrowserEvent)) {\n      if (mapBrowserEvent.type != MapBrowserEventType.SINGLECLICK || !this.ignoreNextSingleClick_) {\n        handled = this.removePoint();\n      } else {\n        handled = true;\n      }\n    }\n\n    if (mapBrowserEvent.type == MapBrowserEventType.SINGLECLICK) {\n      this.ignoreNextSingleClick_ = false;\n    }\n\n    return super.handleEvent(mapBrowserEvent) && !handled;\n  }\n\n  /**\n   * @inheritDoc\n   */\n  handleDragEvent(evt) {\n    this.ignoreNextSingleClick_ = false;\n    this.willModifyFeatures_(evt);\n\n    const vertex = evt.coordinate;\n    for (let i = 0, ii = this.dragSegments_.length; i < ii; ++i) {\n      const dragSegment = this.dragSegments_[i];\n      const segmentData = dragSegment[0];\n      const depth = segmentData.depth;\n      const geometry = segmentData.geometry;\n      let coordinates;\n      const segment = segmentData.segment;\n      const index = dragSegment[1];\n\n      while (vertex.length < geometry.getStride()) {\n        vertex.push(segment[index][vertex.length]);\n      }\n\n      switch (geometry.getType()) {\n        case GeometryType.POINT:\n          coordinates = vertex;\n          segment[0] = segment[1] = vertex;\n          break;\n        case GeometryType.MULTI_POINT:\n          coordinates = geometry.getCoordinates();\n          coordinates[segmentData.index] = vertex;\n          segment[0] = segment[1] = vertex;\n          break;\n        case GeometryType.LINE_STRING:\n          coordinates = geometry.getCoordinates();\n          coordinates[segmentData.index + index] = vertex;\n          segment[index] = vertex;\n          break;\n        case GeometryType.MULTI_LINE_STRING:\n          coordinates = geometry.getCoordinates();\n          coordinates[depth[0]][segmentData.index + index] = vertex;\n          segment[index] = vertex;\n          break;\n        case GeometryType.POLYGON:\n          coordinates = geometry.getCoordinates();\n          coordinates[depth[0]][segmentData.index + index] = vertex;\n          segment[index] = vertex;\n          break;\n        case GeometryType.MULTI_POLYGON:\n          coordinates = geometry.getCoordinates();\n          coordinates[depth[1]][depth[0]][segmentData.index + index] = vertex;\n          segment[index] = vertex;\n          break;\n        case GeometryType.CIRCLE:\n          segment[0] = segment[1] = vertex;\n          if (segmentData.index === CIRCLE_CENTER_INDEX) {\n            this.changingFeature_ = true;\n            geometry.setCenter(vertex);\n            this.changingFeature_ = false;\n          } else { // We're dragging the circle's circumference:\n            this.changingFeature_ = true;\n            geometry.setRadius(coordinateDistance(geometry.getCenter(), vertex));\n            this.changingFeature_ = false;\n          }\n          break;\n        default:\n          // pass\n      }\n\n      if (coordinates) {\n        this.setGeometryCoordinates_(geometry, coordinates);\n      }\n    }\n    this.createOrUpdateVertexFeature_(vertex);\n  }\n\n  /**\n   * @inheritDoc\n   */\n  handleDownEvent(evt) {\n    if (!this.condition_(evt)) {\n      return false;\n    }\n    this.handlePointerAtPixel_(evt.pixel, evt.map);\n    const pixelCoordinate = evt.coordinate;\n    this.dragSegments_.length = 0;\n    this.modified_ = false;\n    const vertexFeature = this.vertexFeature_;\n    if (vertexFeature) {\n      const projection = evt.map.getView().getProjection();\n      const insertVertices = [];\n      const vertex = vertexFeature.getGeometry().getCoordinates();\n      const vertexExtent = boundingExtent([vertex]);\n      const segmentDataMatches = this.rBush_.getInExtent(vertexExtent);\n      const componentSegments = {};\n      segmentDataMatches.sort(compareIndexes);\n      for (let i = 0, ii = segmentDataMatches.length; i < ii; ++i) {\n        const segmentDataMatch = segmentDataMatches[i];\n        const segment = segmentDataMatch.segment;\n        let uid = getUid(segmentDataMatch.feature);\n        const depth = segmentDataMatch.depth;\n        if (depth) {\n          uid += '-' + depth.join('-'); // separate feature components\n        }\n        if (!componentSegments[uid]) {\n          componentSegments[uid] = new Array(2);\n        }\n\n        if (segmentDataMatch.geometry.getType() === GeometryType.CIRCLE && segmentDataMatch.index === CIRCLE_CIRCUMFERENCE_INDEX) {\n          const closestVertex = closestOnSegmentData(pixelCoordinate, segmentDataMatch, projection);\n          if (coordinatesEqual(closestVertex, vertex) && !componentSegments[uid][0]) {\n            this.dragSegments_.push([segmentDataMatch, 0]);\n            componentSegments[uid][0] = segmentDataMatch;\n          }\n          continue;\n        }\n\n        if (coordinatesEqual(segment[0], vertex) && !componentSegments[uid][0]) {\n          this.dragSegments_.push([segmentDataMatch, 0]);\n          componentSegments[uid][0] = segmentDataMatch;\n          continue;\n        }\n\n        if (coordinatesEqual(segment[1], vertex) && !componentSegments[uid][1]) {\n          // prevent dragging closed linestrings by the connecting node\n          if ((segmentDataMatch.geometry.getType() ===\n              GeometryType.LINE_STRING ||\n              segmentDataMatch.geometry.getType() ===\n              GeometryType.MULTI_LINE_STRING) &&\n              componentSegments[uid][0] &&\n              componentSegments[uid][0].index === 0) {\n            continue;\n          }\n\n          this.dragSegments_.push([segmentDataMatch, 1]);\n          componentSegments[uid][1] = segmentDataMatch;\n          continue;\n        }\n\n        if (getUid(segment) in this.vertexSegments_ &&\n            (!componentSegments[uid][0] && !componentSegments[uid][1]) &&\n            this.insertVertexCondition_(evt)) {\n          insertVertices.push([segmentDataMatch, vertex]);\n        }\n      }\n\n      if (insertVertices.length) {\n        this.willModifyFeatures_(evt);\n      }\n\n      for (let j = insertVertices.length - 1; j >= 0; --j) {\n        this.insertVertex_.apply(this, insertVertices[j]);\n      }\n    }\n    return !!this.vertexFeature_;\n  }\n\n  /**\n   * @inheritDoc\n   */\n  handleUpEvent(evt) {\n    for (let i = this.dragSegments_.length - 1; i >= 0; --i) {\n      const segmentData = this.dragSegments_[i][0];\n      const geometry = segmentData.geometry;\n      if (geometry.getType() === GeometryType.CIRCLE) {\n        // Update a circle object in the R* bush:\n        const coordinates = geometry.getCenter();\n        const centerSegmentData = segmentData.featureSegments[0];\n        const circumferenceSegmentData = segmentData.featureSegments[1];\n        centerSegmentData.segment[0] = centerSegmentData.segment[1] = coordinates;\n        circumferenceSegmentData.segment[0] = circumferenceSegmentData.segment[1] = coordinates;\n        this.rBush_.update(createExtent(coordinates), centerSegmentData);\n        this.rBush_.update(geometry.getExtent(), circumferenceSegmentData);\n      } else {\n        this.rBush_.update(boundingExtent(segmentData.segment), segmentData);\n      }\n    }\n    if (this.modified_) {\n      this.dispatchEvent(new ModifyEvent(ModifyEventType.MODIFYEND, this.features_, evt));\n      this.modified_ = false;\n    }\n    return false;\n  }\n\n  /**\n   * @param {import(\"../MapBrowserEvent.js\").default} evt Event.\n   * @private\n   */\n  handlePointerMove_(evt) {\n    this.lastPixel_ = evt.pixel;\n    this.handlePointerAtPixel_(evt.pixel, evt.map);\n  }\n\n  /**\n   * @param {import(\"../pixel.js\").Pixel} pixel Pixel\n   * @param {import(\"../PluggableMap.js\").default} map Map.\n   * @private\n   */\n  handlePointerAtPixel_(pixel, map) {\n    const pixelCoordinate = map.getCoordinateFromPixel(pixel);\n    const sortByDistance = function(a, b) {\n      return pointDistanceToSegmentDataSquared(pixelCoordinate, a) -\n          pointDistanceToSegmentDataSquared(pixelCoordinate, b);\n    };\n\n    const projection = map.getView().getProjection();\n    const viewExtent = fromUserExtent(createExtent(pixelCoordinate, tempExtent), projection);\n    const buffer = map.getView().getResolution() * this.pixelTolerance_;\n    const box = toUserExtent(bufferExtent(viewExtent, buffer, tempExtent), projection);\n\n    const rBush = this.rBush_;\n    const nodes = rBush.getInExtent(box);\n    if (nodes.length > 0) {\n      nodes.sort(sortByDistance);\n      const node = nodes[0];\n      const closestSegment = node.segment;\n      let vertex = closestOnSegmentData(pixelCoordinate, node, projection);\n      const vertexPixel = map.getPixelFromCoordinate(vertex);\n      let dist = coordinateDistance(pixel, vertexPixel);\n      if (dist <= this.pixelTolerance_) {\n        /** @type {Object<string, boolean>} */\n        const vertexSegments = {};\n\n        if (node.geometry.getType() === GeometryType.CIRCLE && node.index === CIRCLE_CIRCUMFERENCE_INDEX) {\n          this.snappedToVertex_ = true;\n          this.createOrUpdateVertexFeature_(vertex);\n        } else {\n          const pixel1 = map.getPixelFromCoordinate(closestSegment[0]);\n          const pixel2 = map.getPixelFromCoordinate(closestSegment[1]);\n          const squaredDist1 = squaredCoordinateDistance(vertexPixel, pixel1);\n          const squaredDist2 = squaredCoordinateDistance(vertexPixel, pixel2);\n          dist = Math.sqrt(Math.min(squaredDist1, squaredDist2));\n          this.snappedToVertex_ = dist <= this.pixelTolerance_;\n          if (this.snappedToVertex_) {\n            vertex = squaredDist1 > squaredDist2 ? closestSegment[1] : closestSegment[0];\n          }\n          this.createOrUpdateVertexFeature_(vertex);\n          for (let i = 1, ii = nodes.length; i < ii; ++i) {\n            const segment = nodes[i].segment;\n            if ((coordinatesEqual(closestSegment[0], segment[0]) &&\n                coordinatesEqual(closestSegment[1], segment[1]) ||\n                (coordinatesEqual(closestSegment[0], segment[1]) &&\n                coordinatesEqual(closestSegment[1], segment[0])))) {\n              vertexSegments[getUid(segment)] = true;\n            } else {\n              break;\n            }\n          }\n        }\n\n        vertexSegments[getUid(closestSegment)] = true;\n        this.vertexSegments_ = vertexSegments;\n        return;\n      }\n    }\n    if (this.vertexFeature_) {\n      this.overlay_.getSource().removeFeature(this.vertexFeature_);\n      this.vertexFeature_ = null;\n    }\n  }\n\n  /**\n   * @param {SegmentData} segmentData Segment data.\n   * @param {import(\"../coordinate.js\").Coordinate} vertex Vertex.\n   * @private\n   */\n  insertVertex_(segmentData, vertex) {\n    const segment = segmentData.segment;\n    const feature = segmentData.feature;\n    const geometry = segmentData.geometry;\n    const depth = segmentData.depth;\n    const index = segmentData.index;\n    let coordinates;\n\n    while (vertex.length < geometry.getStride()) {\n      vertex.push(0);\n    }\n\n    switch (geometry.getType()) {\n      case GeometryType.MULTI_LINE_STRING:\n        coordinates = geometry.getCoordinates();\n        coordinates[depth[0]].splice(index + 1, 0, vertex);\n        break;\n      case GeometryType.POLYGON:\n        coordinates = geometry.getCoordinates();\n        coordinates[depth[0]].splice(index + 1, 0, vertex);\n        break;\n      case GeometryType.MULTI_POLYGON:\n        coordinates = geometry.getCoordinates();\n        coordinates[depth[1]][depth[0]].splice(index + 1, 0, vertex);\n        break;\n      case GeometryType.LINE_STRING:\n        coordinates = geometry.getCoordinates();\n        coordinates.splice(index + 1, 0, vertex);\n        break;\n      default:\n        return;\n    }\n\n    this.setGeometryCoordinates_(geometry, coordinates);\n    const rTree = this.rBush_;\n    rTree.remove(segmentData);\n    this.updateSegmentIndices_(geometry, index, depth, 1);\n\n    /** @type {SegmentData} */\n    const newSegmentData = {\n      segment: [segment[0], vertex],\n      feature: feature,\n      geometry: geometry,\n      depth: depth,\n      index: index\n    };\n\n    rTree.insert(boundingExtent(newSegmentData.segment), newSegmentData);\n    this.dragSegments_.push([newSegmentData, 1]);\n\n    /** @type {SegmentData} */\n    const newSegmentData2 = {\n      segment: [vertex, segment[1]],\n      feature: feature,\n      geometry: geometry,\n      depth: depth,\n      index: index + 1\n    };\n\n    rTree.insert(boundingExtent(newSegmentData2.segment), newSegmentData2);\n    this.dragSegments_.push([newSegmentData2, 0]);\n    this.ignoreNextSingleClick_ = true;\n  }\n\n  /**\n   * Removes the vertex currently being pointed.\n   * @return {boolean} True when a vertex was removed.\n   * @api\n   */\n  removePoint() {\n    if (this.lastPointerEvent_ && this.lastPointerEvent_.type != MapBrowserEventType.POINTERDRAG) {\n      const evt = this.lastPointerEvent_;\n      this.willModifyFeatures_(evt);\n      const removed = this.removeVertex_();\n      this.dispatchEvent(new ModifyEvent(ModifyEventType.MODIFYEND, this.features_, evt));\n      this.modified_ = false;\n      return removed;\n    }\n    return false;\n  }\n\n  /**\n   * Removes a vertex from all matching features.\n   * @return {boolean} True when a vertex was removed.\n   * @private\n   */\n  removeVertex_() {\n    const dragSegments = this.dragSegments_;\n    const segmentsByFeature = {};\n    let deleted = false;\n    let component, coordinates, dragSegment, geometry, i, index, left;\n    let newIndex, right, segmentData, uid;\n    for (i = dragSegments.length - 1; i >= 0; --i) {\n      dragSegment = dragSegments[i];\n      segmentData = dragSegment[0];\n      uid = getUid(segmentData.feature);\n      if (segmentData.depth) {\n        // separate feature components\n        uid += '-' + segmentData.depth.join('-');\n      }\n      if (!(uid in segmentsByFeature)) {\n        segmentsByFeature[uid] = {};\n      }\n      if (dragSegment[1] === 0) {\n        segmentsByFeature[uid].right = segmentData;\n        segmentsByFeature[uid].index = segmentData.index;\n      } else if (dragSegment[1] == 1) {\n        segmentsByFeature[uid].left = segmentData;\n        segmentsByFeature[uid].index = segmentData.index + 1;\n      }\n\n    }\n    for (uid in segmentsByFeature) {\n      right = segmentsByFeature[uid].right;\n      left = segmentsByFeature[uid].left;\n      index = segmentsByFeature[uid].index;\n      newIndex = index - 1;\n      if (left !== undefined) {\n        segmentData = left;\n      } else {\n        segmentData = right;\n      }\n      if (newIndex < 0) {\n        newIndex = 0;\n      }\n      geometry = segmentData.geometry;\n      coordinates = geometry.getCoordinates();\n      component = coordinates;\n      deleted = false;\n      switch (geometry.getType()) {\n        case GeometryType.MULTI_LINE_STRING:\n          if (coordinates[segmentData.depth[0]].length > 2) {\n            coordinates[segmentData.depth[0]].splice(index, 1);\n            deleted = true;\n          }\n          break;\n        case GeometryType.LINE_STRING:\n          if (coordinates.length > 2) {\n            coordinates.splice(index, 1);\n            deleted = true;\n          }\n          break;\n        case GeometryType.MULTI_POLYGON:\n          component = component[segmentData.depth[1]];\n          /* falls through */\n        case GeometryType.POLYGON:\n          component = component[segmentData.depth[0]];\n          if (component.length > 4) {\n            if (index == component.length - 1) {\n              index = 0;\n            }\n            component.splice(index, 1);\n            deleted = true;\n            if (index === 0) {\n              // close the ring again\n              component.pop();\n              component.push(component[0]);\n              newIndex = component.length - 1;\n            }\n          }\n          break;\n        default:\n          // pass\n      }\n\n      if (deleted) {\n        this.setGeometryCoordinates_(geometry, coordinates);\n        const segments = [];\n        if (left !== undefined) {\n          this.rBush_.remove(left);\n          segments.push(left.segment[0]);\n        }\n        if (right !== undefined) {\n          this.rBush_.remove(right);\n          segments.push(right.segment[1]);\n        }\n        if (left !== undefined && right !== undefined) {\n\n          /** @type {SegmentData} */\n          const newSegmentData = {\n            depth: segmentData.depth,\n            feature: segmentData.feature,\n            geometry: segmentData.geometry,\n            index: newIndex,\n            segment: segments\n          };\n\n          this.rBush_.insert(boundingExtent(newSegmentData.segment), newSegmentData);\n        }\n        this.updateSegmentIndices_(geometry, index, segmentData.depth, -1);\n        if (this.vertexFeature_) {\n          this.overlay_.getSource().removeFeature(this.vertexFeature_);\n          this.vertexFeature_ = null;\n        }\n        dragSegments.length = 0;\n      }\n\n    }\n    return deleted;\n  }\n\n  /**\n   * @param {import(\"../geom/SimpleGeometry.js\").default} geometry Geometry.\n   * @param {Array} coordinates Coordinates.\n   * @private\n   */\n  setGeometryCoordinates_(geometry, coordinates) {\n    this.changingFeature_ = true;\n    geometry.setCoordinates(coordinates);\n    this.changingFeature_ = false;\n  }\n\n  /**\n   * @param {import(\"../geom/SimpleGeometry.js\").default} geometry Geometry.\n   * @param {number} index Index.\n   * @param {Array<number>|undefined} depth Depth.\n   * @param {number} delta Delta (1 or -1).\n   * @private\n   */\n  updateSegmentIndices_(geometry, index, depth, delta) {\n    this.rBush_.forEachInExtent(geometry.getExtent(), function(segmentDataMatch) {\n      if (segmentDataMatch.geometry === geometry &&\n          (depth === undefined || segmentDataMatch.depth === undefined ||\n          equals(segmentDataMatch.depth, depth)) &&\n          segmentDataMatch.index > index) {\n        segmentDataMatch.index += delta;\n      }\n    });\n  }\n}\n\n\n/**\n * @param {SegmentData} a The first segment data.\n * @param {SegmentData} b The second segment data.\n * @return {number} The difference in indexes.\n */\nfunction compareIndexes(a, b) {\n  return a.index - b.index;\n}\n\n\n/**\n * Returns the distance from a point to a line segment.\n *\n * @param {import(\"../coordinate.js\").Coordinate} pointCoordinates The coordinates of the point from\n *        which to calculate the distance.\n * @param {SegmentData} segmentData The object describing the line\n *        segment we are calculating the distance to.\n * @return {number} The square of the distance between a point and a line segment.\n */\nfunction pointDistanceToSegmentDataSquared(pointCoordinates, segmentData) {\n  const geometry = segmentData.geometry;\n\n  if (geometry.getType() === GeometryType.CIRCLE) {\n    const circleGeometry = /** @type {import(\"../geom/Circle.js\").default} */ (geometry);\n\n    if (segmentData.index === CIRCLE_CIRCUMFERENCE_INDEX) {\n      const distanceToCenterSquared =\n            squaredCoordinateDistance(circleGeometry.getCenter(), pointCoordinates);\n      const distanceToCircumference =\n            Math.sqrt(distanceToCenterSquared) - circleGeometry.getRadius();\n      return distanceToCircumference * distanceToCircumference;\n    }\n  }\n  return squaredDistanceToSegment(pointCoordinates, segmentData.segment);\n}\n\n/**\n * Returns the point closest to a given line segment.\n *\n * @param {import(\"../coordinate.js\").Coordinate} pointCoordinates The point to which a closest point\n *        should be found.\n * @param {SegmentData} segmentData The object describing the line\n *        segment which should contain the closest point.\n * @param {import(\"../proj/Projection.js\").default} projection The view projection.\n * @return {import(\"../coordinate.js\").Coordinate} The point closest to the specified line segment.\n */\nfunction closestOnSegmentData(pointCoordinates, segmentData, projection) {\n  const geometry = segmentData.geometry;\n\n  if (geometry.getType() === GeometryType.CIRCLE && segmentData.index === CIRCLE_CIRCUMFERENCE_INDEX) {\n    return geometry.getClosestPoint(pointCoordinates);\n  }\n  const coordinate = fromUserCoordinate(pointCoordinates, projection);\n  tempSegment[0] = fromUserCoordinate(segmentData.segment[0], projection);\n  tempSegment[1] = fromUserCoordinate(segmentData.segment[1], projection);\n  return toUserCoordinate(closestOnSegment(coordinate, tempSegment), projection);\n}\n\n\n/**\n * @return {import(\"../style/Style.js\").StyleFunction} Styles.\n */\nfunction getDefaultStyleFunction() {\n  const style = createEditingStyle();\n  return function(feature, resolution) {\n    return style[GeometryType.POINT];\n  };\n}\n\n\nexport default Modify;\n","/**\n * @module ol/control/ScaleLine\n */\nimport {getChangeEventType} from '../Object.js';\nimport {assert} from '../asserts.js';\nimport Control from './Control.js';\nimport {CLASS_UNSELECTABLE} from '../css.js';\nimport {getPointResolution, METERS_PER_UNIT} from '../proj.js';\nimport ProjUnits from '../proj/Units.js';\n\n\n/**\n * @type {string}\n */\nconst UNITS_PROP = 'units';\n\n/**\n * Units for the scale line. Supported values are `'degrees'`, `'imperial'`,\n * `'nautical'`, `'metric'`, `'us'`.\n * @enum {string}\n */\nexport const Units = {\n  DEGREES: 'degrees',\n  IMPERIAL: 'imperial',\n  NAUTICAL: 'nautical',\n  METRIC: 'metric',\n  US: 'us'\n};\n\n\n/**\n * @const\n * @type {Array<number>}\n */\nconst LEADING_DIGITS = [1, 2, 5];\n\n\n/**\n * @typedef {Object} Options\n * @property {string} [className='ol-scale-line'] CSS Class name.\n * @property {number} [minWidth=64] Minimum width in pixels.\n * @property {function(import(\"../MapEvent.js\").default)} [render] Function called when the control\n * should be re-rendered. This is called in a `requestAnimationFrame` callback.\n * @property {HTMLElement|string} [target] Specify a target if you want the control\n * to be rendered outside of the map's viewport.\n * @property {Units|string} [units='metric'] Units.\n * @property {boolean} [bar=false] Render scalebars instead of a line.\n * @property {number} [steps=4] Number of steps the scalebar should use. Use even numbers\n * for best results. Only applies when `bar` is `true`.\n * @property {boolean} [text=false] Render the text scale above of the scalebar. Only applies\n * when `bar` is `true`.\n */\n\n\n/**\n * @classdesc\n * A control displaying rough y-axis distances, calculated for the center of the\n * viewport. For conformal projections (e.g. EPSG:3857, the default view\n * projection in OpenLayers), the scale is valid for all directions.\n * No scale line will be shown when the y-axis distance of a pixel at the\n * viewport center cannot be calculated in the view projection.\n * By default the scale line will show in the bottom left portion of the map,\n * but this can be changed by using the css selector `.ol-scale-line`.\n * When specifying `bar` as `true`, a scalebar will be rendered instead\n * of a scaleline.\n *\n * @api\n */\nclass ScaleLine extends Control {\n\n  /**\n   * @param {Options=} opt_options Scale line options.\n   */\n  constructor(opt_options) {\n\n    const options = opt_options ? opt_options : {};\n\n    const className = options.className !== undefined ? options.className :\n      options.bar ? 'ol-scale-bar' : 'ol-scale-line';\n\n    super({\n      element: document.createElement('div'),\n      render: options.render || render,\n      target: options.target\n    });\n\n    /**\n     * @private\n     * @type {HTMLElement}\n     */\n    this.innerElement_ = document.createElement('div');\n    this.innerElement_.className = className + '-inner';\n\n    this.element.className = className + ' ' + CLASS_UNSELECTABLE;\n    this.element.appendChild(this.innerElement_);\n\n    /**\n     * @private\n     * @type {?import(\"../View.js\").State}\n     */\n    this.viewState_ = null;\n\n    /**\n     * @private\n     * @type {number}\n     */\n    this.minWidth_ = options.minWidth !== undefined ? options.minWidth : 64;\n\n    /**\n     * @private\n     * @type {boolean}\n     */\n    this.renderedVisible_ = false;\n\n    /**\n     * @private\n     * @type {number|undefined}\n     */\n    this.renderedWidth_ = undefined;\n\n    /**\n     * @private\n     * @type {string}\n     */\n    this.renderedHTML_ = '';\n\n    this.addEventListener(getChangeEventType(UNITS_PROP), this.handleUnitsChanged_);\n\n    this.setUnits(/** @type {Units} */ (options.units) || Units.METRIC);\n\n    /**\n     * @private\n     * @type {boolean}\n     */\n    this.scaleBar_ = options.bar || false;\n\n    /**\n     * @private\n     * @type {number}\n     */\n    this.scaleBarSteps_ = options.steps || 4;\n\n    /**\n     * @private\n     * @type {boolean}\n     */\n    this.scaleBarText_ = options.text || false;\n\n  }\n\n  /**\n   * Return the units to use in the scale line.\n   * @return {Units} The units\n   * to use in the scale line.\n   * @observable\n   * @api\n   */\n  getUnits() {\n    return this.get(UNITS_PROP);\n  }\n\n  /**\n   * @private\n   */\n  handleUnitsChanged_() {\n    this.updateElement_();\n  }\n\n  /**\n   * Set the units to use in the scale line.\n   * @param {Units} units The units to use in the scale line.\n   * @observable\n   * @api\n   */\n  setUnits(units) {\n    this.set(UNITS_PROP, units);\n  }\n\n  /**\n   * @private\n   */\n  updateElement_() {\n    const viewState = this.viewState_;\n\n    if (!viewState) {\n      if (this.renderedVisible_) {\n        this.element.style.display = 'none';\n        this.renderedVisible_ = false;\n      }\n      return;\n    }\n\n    const center = viewState.center;\n    const projection = viewState.projection;\n    const units = this.getUnits();\n    const pointResolutionUnits = units == Units.DEGREES ?\n      ProjUnits.DEGREES :\n      ProjUnits.METERS;\n    let pointResolution =\n        getPointResolution(projection, viewState.resolution, center, pointResolutionUnits);\n\n    let nominalCount = this.minWidth_ * pointResolution;\n    let suffix = '';\n    if (units == Units.DEGREES) {\n      const metersPerDegree = METERS_PER_UNIT[ProjUnits.DEGREES];\n      nominalCount *= metersPerDegree;\n      if (nominalCount < metersPerDegree / 60) {\n        suffix = '\\u2033'; // seconds\n        pointResolution *= 3600;\n      } else if (nominalCount < metersPerDegree) {\n        suffix = '\\u2032'; // minutes\n        pointResolution *= 60;\n      } else {\n        suffix = '\\u00b0'; // degrees\n      }\n    } else if (units == Units.IMPERIAL) {\n      if (nominalCount < 0.9144) {\n        suffix = 'in';\n        pointResolution /= 0.0254;\n      } else if (nominalCount < 1609.344) {\n        suffix = 'ft';\n        pointResolution /= 0.3048;\n      } else {\n        suffix = 'mi';\n        pointResolution /= 1609.344;\n      }\n    } else if (units == Units.NAUTICAL) {\n      pointResolution /= 1852;\n      suffix = 'nm';\n    } else if (units == Units.METRIC) {\n      if (nominalCount < 0.001) {\n        suffix = 'μm';\n        pointResolution *= 1000000;\n      } else if (nominalCount < 1) {\n        suffix = 'mm';\n        pointResolution *= 1000;\n      } else if (nominalCount < 1000) {\n        suffix = 'm';\n      } else {\n        suffix = 'km';\n        pointResolution /= 1000;\n      }\n    } else if (units == Units.US) {\n      if (nominalCount < 0.9144) {\n        suffix = 'in';\n        pointResolution *= 39.37;\n      } else if (nominalCount < 1609.344) {\n        suffix = 'ft';\n        pointResolution /= 0.30480061;\n      } else {\n        suffix = 'mi';\n        pointResolution /= 1609.3472;\n      }\n    } else {\n      assert(false, 33); // Invalid units\n    }\n\n    let i = 3 * Math.floor(\n      Math.log(this.minWidth_ * pointResolution) / Math.log(10));\n    let count, width, decimalCount;\n    while (true) {\n      decimalCount = Math.floor(i / 3);\n      const decimal = Math.pow(10, decimalCount);\n      count = LEADING_DIGITS[((i % 3) + 3) % 3] * decimal;\n      width = Math.round(count / pointResolution);\n      if (isNaN(width)) {\n        this.element.style.display = 'none';\n        this.renderedVisible_ = false;\n        return;\n      } else if (width >= this.minWidth_) {\n        break;\n      }\n      ++i;\n    }\n    let html;\n    if (this.scaleBar_) {\n      html = this.createScaleBar(width, count, suffix);\n    } else {\n      html = count.toFixed(decimalCount < 0 ? -decimalCount : 0) + ' ' + suffix;\n    }\n\n    if (this.renderedHTML_ != html) {\n      this.innerElement_.innerHTML = html;\n      this.renderedHTML_ = html;\n    }\n\n    if (this.renderedWidth_ != width) {\n      this.innerElement_.style.width = width + 'px';\n      this.renderedWidth_ = width;\n    }\n\n    if (!this.renderedVisible_) {\n      this.element.style.display = '';\n      this.renderedVisible_ = true;\n    }\n\n  }\n\n  /**\n   * @private\n   * @param {number} width The current width of the scalebar.\n   * @param {number} scale The current scale.\n   * @param {string} suffix The suffix to append to the scale text.\n   * @returns {string} The stringified HTML of the scalebar.\n   */\n  createScaleBar(width, scale, suffix) {\n    const mapScale = '1 : ' + Math.round(this.getScaleForResolution()).toLocaleString();\n    const scaleSteps = [];\n    const stepWidth = width / this.scaleBarSteps_;\n    let backgroundColor = '#ffffff';\n    for (let i = 0; i < this.scaleBarSteps_; i++) {\n      if (i === 0) {\n        // create the first marker at position 0\n        scaleSteps.push(this.createMarker('absolute', i));\n      }\n      scaleSteps.push(\n        '<div>' +\n          '<div ' +\n            'class=\"ol-scale-singlebar\" ' +\n            'style=' +\n              '\"width: ' + stepWidth + 'px;' +\n              'background-color: ' + backgroundColor + ';\"' +\n          '>' +\n          '</div>' +\n          this.createMarker('relative', i) +\n          /*render text every second step, except when only 2 steps */\n          (i % 2 === 0 || this.scaleBarSteps_ === 2 ?\n            this.createStepText(i, width, false, scale, suffix) :\n            ''\n          ) +\n        '</div>'\n      );\n      if (i === this.scaleBarSteps_ - 1) {\n        {/*render text at the end */}\n        scaleSteps.push(this.createStepText(i + 1, width, true, scale, suffix));\n      }\n      // switch colors of steps between black and white\n      if (backgroundColor === '#ffffff') {\n        backgroundColor = '#000000';\n      } else {\n        backgroundColor = '#ffffff';\n      }\n    }\n\n    let scaleBarText;\n    if (this.scaleBarText_) {\n      scaleBarText = '<div ' +\n      'class=\"ol-scale-text\" ' +\n      'style=\"width: ' + width + 'px;\">' +\n      mapScale +\n    '</div>';\n    } else {\n      scaleBarText = '';\n    }\n    const container = '<div ' +\n      'style=\"display: flex;\">' +\n      scaleBarText +\n      scaleSteps.join('') +\n    '</div>';\n    return container;\n  }\n\n  /**\n   * Creates a marker at given position\n   * @param {string} position - The position, absolute or relative\n   * @param {number} i - The iterator\n   * @returns {string} The stringified div containing the marker\n   */\n  createMarker(position, i) {\n    const top = position === 'absolute' ? 3 : -10;\n    return '<div ' +\n        'class=\"ol-scale-step-marker\" ' +\n        'style=\"position: ' + position + ';' +\n          'top: ' + top + 'px;\"' +\n      '></div>';\n  }\n\n  /**\n   * Creates the label for a marker marker at given position\n   * @param {number} i - The iterator\n   * @param {number} width - The width the scalebar will currently use\n   * @param {boolean} isLast - Flag indicating if we add the last step text\n   * @param {number} scale - The current scale for the whole scalebar\n   * @param {string} suffix - The suffix for the scale\n   * @returns {string} The stringified div containing the step text\n   */\n  createStepText(i, width, isLast, scale, suffix) {\n    const length = i === 0 ? 0 : Math.round((scale / this.scaleBarSteps_ * i) * 100) / 100;\n    const lengthString = length + (i === 0 ? '' : ' ' + suffix);\n    const margin = i === 0 ? -3 : width / this.scaleBarSteps_ * -1;\n    const minWidth = i === 0 ? 0 : width / this.scaleBarSteps_ * 2;\n    return '<div ' +\n      'class=\"ol-scale-step-text\" ' +\n      'style=\"' +\n        'margin-left: ' + margin + 'px;' +\n        'text-align: ' + (i === 0 ? 'left' : 'center') + '; ' +\n        'min-width: ' + minWidth + 'px;' +\n        'left: ' + (isLast ? width + 'px' : 'unset') + ';\"' +\n      '>' +\n      lengthString +\n    '</div>';\n  }\n\n  /**\n   * Returns the appropriate scale for the given resolution and units.\n   * @return {number} The appropriate scale.\n   */\n  getScaleForResolution() {\n    const resolution = this.getMap().getView().getResolution();\n    const dpi = 25.4 / 0.28;\n    const mpu = this.viewState_.projection.getMetersPerUnit();\n    const inchesPerMeter = 39.37;\n    return parseFloat(resolution.toString()) * mpu * inchesPerMeter * dpi;\n  }\n}\n\n/**\n * Update the scale line element.\n * @param {import(\"../MapEvent.js\").default} mapEvent Map event.\n * @this {ScaleLine}\n * @api\n */\nexport function render(mapEvent) {\n  const frameState = mapEvent.frameState;\n  if (!frameState) {\n    this.viewState_ = null;\n  } else {\n    this.viewState_ = frameState.viewState;\n  }\n  this.updateElement_();\n}\n\n\nexport default ScaleLine;\n","/**\n * @module ol/interaction/Property\n */\n\n/**\n * @enum {string}\n */\nexport default {\n  ACTIVE: 'active'\n};\n","/**\n * @module ol/geom/flat/interiorpoint\n */\nimport {numberSafeCompareFunction} from '../../array.js';\nimport {linearRingsContainsXY} from './contains.js';\n\n\n/**\n * Calculates a point that is likely to lie in the interior of the linear rings.\n * Inspired by JTS's com.vividsolutions.jts.geom.Geometry#getInteriorPoint.\n * @param {Array<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {Array<number>} ends Ends.\n * @param {number} stride Stride.\n * @param {Array<number>} flatCenters Flat centers.\n * @param {number} flatCentersOffset Flat center offset.\n * @param {Array<number>=} opt_dest Destination.\n * @return {Array<number>} Destination point as XYM coordinate, where M is the\n * length of the horizontal intersection that the point belongs to.\n */\nexport function getInteriorPointOfArray(flatCoordinates, offset,\n  ends, stride, flatCenters, flatCentersOffset, opt_dest) {\n  let i, ii, x, x1, x2, y1, y2;\n  const y = flatCenters[flatCentersOffset + 1];\n  /** @type {Array<number>} */\n  const intersections = [];\n  // Calculate intersections with the horizontal line\n  for (let r = 0, rr = ends.length; r < rr; ++r) {\n    const end = ends[r];\n    x1 = flatCoordinates[end - stride];\n    y1 = flatCoordinates[end - stride + 1];\n    for (i = offset; i < end; i += stride) {\n      x2 = flatCoordinates[i];\n      y2 = flatCoordinates[i + 1];\n      if ((y <= y1 && y2 <= y) || (y1 <= y && y <= y2)) {\n        x = (y - y1) / (y2 - y1) * (x2 - x1) + x1;\n        intersections.push(x);\n      }\n      x1 = x2;\n      y1 = y2;\n    }\n  }\n  // Find the longest segment of the horizontal line that has its center point\n  // inside the linear ring.\n  let pointX = NaN;\n  let maxSegmentLength = -Infinity;\n  intersections.sort(numberSafeCompareFunction);\n  x1 = intersections[0];\n  for (i = 1, ii = intersections.length; i < ii; ++i) {\n    x2 = intersections[i];\n    const segmentLength = Math.abs(x2 - x1);\n    if (segmentLength > maxSegmentLength) {\n      x = (x1 + x2) / 2;\n      if (linearRingsContainsXY(flatCoordinates, offset, ends, stride, x, y)) {\n        pointX = x;\n        maxSegmentLength = segmentLength;\n      }\n    }\n    x1 = x2;\n  }\n  if (isNaN(pointX)) {\n    // There is no horizontal line that has its center point inside the linear\n    // ring.  Use the center of the the linear ring's extent.\n    pointX = flatCenters[flatCentersOffset];\n  }\n  if (opt_dest) {\n    opt_dest.push(pointX, y, maxSegmentLength);\n    return opt_dest;\n  } else {\n    return [pointX, y, maxSegmentLength];\n  }\n}\n\n\n/**\n * @param {Array<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {Array<Array<number>>} endss Endss.\n * @param {number} stride Stride.\n * @param {Array<number>} flatCenters Flat centers.\n * @return {Array<number>} Interior points as XYM coordinates, where M is the\n * length of the horizontal intersection that the point belongs to.\n */\nexport function getInteriorPointsOfMultiArray(flatCoordinates, offset, endss, stride, flatCenters) {\n  let interiorPoints = [];\n  for (let i = 0, ii = endss.length; i < ii; ++i) {\n    const ends = endss[i];\n    interiorPoints = getInteriorPointOfArray(flatCoordinates,\n      offset, ends, stride, flatCenters, 2 * i, interiorPoints);\n    offset = ends[ends.length - 1];\n  }\n  return interiorPoints;\n}\n","/**\n * @module ol/source/Tile\n */\nimport {abstract} from '../util.js';\nimport TileCache from '../TileCache.js';\nimport TileState from '../TileState.js';\nimport Event from '../events/Event.js';\nimport {equivalent} from '../proj.js';\nimport {toSize, scale as scaleSize} from '../size.js';\nimport Source from './Source.js';\nimport {getKeyZXY, withinExtentAndZ} from '../tilecoord.js';\nimport {wrapX, getForProjection as getTileGridForProjection} from '../tilegrid.js';\n\n/**\n * @typedef {Object} Options\n * @property {import(\"./Source.js\").AttributionLike} [attributions]\n * @property {boolean} [attributionsCollapsible=true] Attributions are collapsible.\n * @property {number} [cacheSize]\n * @property {boolean} [opaque]\n * @property {number} [tilePixelRatio]\n * @property {import(\"../proj.js\").ProjectionLike} [projection]\n * @property {import(\"./State.js\").default} [state]\n * @property {import(\"../tilegrid/TileGrid.js\").default} [tileGrid]\n * @property {boolean} [wrapX=true]\n * @property {number} [transition]\n * @property {string} [key]\n * @property {number} [zDirection=0]\n */\n\n\n/**\n * @classdesc\n * Abstract base class; normally only used for creating subclasses and not\n * instantiated in apps.\n * Base class for sources providing images divided into a tile grid.\n * @abstract\n * @api\n */\nclass TileSource extends Source {\n  /**\n   * @param {Options} options SourceTile source options.\n   */\n  constructor(options) {\n\n    super({\n      attributions: options.attributions,\n      attributionsCollapsible: options.attributionsCollapsible,\n      projection: options.projection,\n      state: options.state,\n      wrapX: options.wrapX\n    });\n\n    /**\n     * @private\n     * @type {boolean}\n     */\n    this.opaque_ = options.opaque !== undefined ? options.opaque : false;\n\n    /**\n     * @private\n     * @type {number}\n     */\n    this.tilePixelRatio_ = options.tilePixelRatio !== undefined ?\n      options.tilePixelRatio : 1;\n\n    /**\n     * @protected\n     * @type {import(\"../tilegrid/TileGrid.js\").default}\n     */\n    this.tileGrid = options.tileGrid !== undefined ? options.tileGrid : null;\n\n    let cacheSize = options.cacheSize;\n    if (cacheSize === undefined) {\n      const tileSize = [256, 256];\n      const tileGrid = options.tileGrid;\n      if (tileGrid) {\n        toSize(tileGrid.getTileSize(tileGrid.getMinZoom()), tileSize);\n      }\n      const canUseScreen = typeof screen !== 'undefined';\n      const width = canUseScreen ? (screen.availWidth || screen.width) : 1920;\n      const height = canUseScreen ? (screen.availHeight || screen.height) : 1080;\n      cacheSize = 4 * Math.ceil(width / tileSize[0]) * Math.ceil(height / tileSize[1]);\n    }\n\n    /**\n     * @protected\n     * @type {import(\"../TileCache.js\").default}\n     */\n    this.tileCache = new TileCache(cacheSize);\n\n    /**\n     * @protected\n     * @type {import(\"../size.js\").Size}\n     */\n    this.tmpSize = [0, 0];\n\n    /**\n     * @private\n     * @type {string}\n     */\n    this.key_ = options.key || '';\n\n    /**\n     * @protected\n     * @type {import(\"../Tile.js\").Options}\n     */\n    this.tileOptions = {transition: options.transition};\n\n    /**\n     * zDirection hint, read by the renderer. Indicates which resolution should be used\n     * by a renderer if the views resolution does not match any resolution of the tile source.\n     * If 0, the nearest resolution will be used. If 1, the nearest lower resolution\n     * will be used. If -1, the nearest higher resolution will be used.\n     * @type {number}\n     */\n    this.zDirection = options.zDirection ? options.zDirection : 0;\n  }\n\n  /**\n   * @return {boolean} Can expire cache.\n   */\n  canExpireCache() {\n    return this.tileCache.canExpireCache();\n  }\n\n  /**\n   * @param {import(\"../proj/Projection.js\").default} projection Projection.\n   * @param {!Object<string, import(\"../TileRange.js\").default>} usedTiles Used tiles.\n   */\n  expireCache(projection, usedTiles) {\n    const tileCache = this.getTileCacheForProjection(projection);\n    if (tileCache) {\n      tileCache.expireCache(usedTiles);\n    }\n  }\n\n  /**\n   * @param {import(\"../proj/Projection.js\").default} projection Projection.\n   * @param {number} z Zoom level.\n   * @param {import(\"../TileRange.js\").default} tileRange Tile range.\n   * @param {function(import(\"../Tile.js\").default):(boolean|void)} callback Called with each\n   *     loaded tile.  If the callback returns `false`, the tile will not be\n   *     considered loaded.\n   * @return {boolean} The tile range is fully covered with loaded tiles.\n   */\n  forEachLoadedTile(projection, z, tileRange, callback) {\n    const tileCache = this.getTileCacheForProjection(projection);\n    if (!tileCache) {\n      return false;\n    }\n\n    let covered = true;\n    let tile, tileCoordKey, loaded;\n    for (let x = tileRange.minX; x <= tileRange.maxX; ++x) {\n      for (let y = tileRange.minY; y <= tileRange.maxY; ++y) {\n        tileCoordKey = getKeyZXY(z, x, y);\n        loaded = false;\n        if (tileCache.containsKey(tileCoordKey)) {\n          tile = /** @type {!import(\"../Tile.js\").default} */ (tileCache.get(tileCoordKey));\n          loaded = tile.getState() === TileState.LOADED;\n          if (loaded) {\n            loaded = (callback(tile) !== false);\n          }\n        }\n        if (!loaded) {\n          covered = false;\n        }\n      }\n    }\n    return covered;\n  }\n\n  /**\n   * @param {import(\"../proj/Projection.js\").default} projection Projection.\n   * @return {number} Gutter.\n   */\n  getGutterForProjection(projection) {\n    return 0;\n  }\n\n  /**\n   * Return the key to be used for all tiles in the source.\n   * @return {string} The key for all tiles.\n   * @protected\n   */\n  getKey() {\n    return this.key_;\n  }\n\n  /**\n   * Set the value to be used as the key for all tiles in the source.\n   * @param {string} key The key for tiles.\n   * @protected\n   */\n  setKey(key) {\n    if (this.key_ !== key) {\n      this.key_ = key;\n      this.changed();\n    }\n  }\n\n  /**\n   * @param {import(\"../proj/Projection.js\").default} projection Projection.\n   * @return {boolean} Opaque.\n   */\n  getOpaque(projection) {\n    return this.opaque_;\n  }\n\n  /**\n   * @inheritDoc\n   */\n  getResolutions() {\n    return this.tileGrid.getResolutions();\n  }\n\n  /**\n   * @abstract\n   * @param {number} z Tile coordinate z.\n   * @param {number} x Tile coordinate x.\n   * @param {number} y Tile coordinate y.\n   * @param {number} pixelRatio Pixel ratio.\n   * @param {import(\"../proj/Projection.js\").default} projection Projection.\n   * @return {!import(\"../Tile.js\").default} Tile.\n   */\n  getTile(z, x, y, pixelRatio, projection) {\n    return abstract();\n  }\n\n  /**\n   * Return the tile grid of the tile source.\n   * @return {import(\"../tilegrid/TileGrid.js\").default} Tile grid.\n   * @api\n   */\n  getTileGrid() {\n    return this.tileGrid;\n  }\n\n  /**\n   * @param {import(\"../proj/Projection.js\").default} projection Projection.\n   * @return {!import(\"../tilegrid/TileGrid.js\").default} Tile grid.\n   */\n  getTileGridForProjection(projection) {\n    if (!this.tileGrid) {\n      return getTileGridForProjection(projection);\n    } else {\n      return this.tileGrid;\n    }\n  }\n\n  /**\n   * @param {import(\"../proj/Projection.js\").default} projection Projection.\n   * @return {import(\"../TileCache.js\").default} Tile cache.\n   * @protected\n   */\n  getTileCacheForProjection(projection) {\n    const thisProj = this.getProjection();\n    if (thisProj && !equivalent(thisProj, projection)) {\n      return null;\n    } else {\n      return this.tileCache;\n    }\n  }\n\n  /**\n   * Get the tile pixel ratio for this source. Subclasses may override this\n   * method, which is meant to return a supported pixel ratio that matches the\n   * provided `pixelRatio` as close as possible.\n   * @param {number} pixelRatio Pixel ratio.\n   * @return {number} Tile pixel ratio.\n   */\n  getTilePixelRatio(pixelRatio) {\n    return this.tilePixelRatio_;\n  }\n\n  /**\n   * @param {number} z Z.\n   * @param {number} pixelRatio Pixel ratio.\n   * @param {import(\"../proj/Projection.js\").default} projection Projection.\n   * @return {import(\"../size.js\").Size} Tile size.\n   */\n  getTilePixelSize(z, pixelRatio, projection) {\n    const tileGrid = this.getTileGridForProjection(projection);\n    const tilePixelRatio = this.getTilePixelRatio(pixelRatio);\n    const tileSize = toSize(tileGrid.getTileSize(z), this.tmpSize);\n    if (tilePixelRatio == 1) {\n      return tileSize;\n    } else {\n      return scaleSize(tileSize, tilePixelRatio, this.tmpSize);\n    }\n  }\n\n  /**\n   * Returns a tile coordinate wrapped around the x-axis. When the tile coordinate\n   * is outside the resolution and extent range of the tile grid, `null` will be\n   * returned.\n   * @param {import(\"../tilecoord.js\").TileCoord} tileCoord Tile coordinate.\n   * @param {import(\"../proj/Projection.js\").default=} opt_projection Projection.\n   * @return {import(\"../tilecoord.js\").TileCoord} Tile coordinate to be passed to the tileUrlFunction or\n   *     null if no tile URL should be created for the passed `tileCoord`.\n   */\n  getTileCoordForTileUrlFunction(tileCoord, opt_projection) {\n    const projection = opt_projection !== undefined ?\n      opt_projection : this.getProjection();\n    const tileGrid = this.getTileGridForProjection(projection);\n    if (this.getWrapX() && projection.isGlobal()) {\n      tileCoord = wrapX(tileGrid, tileCoord, projection);\n    }\n    return withinExtentAndZ(tileCoord, tileGrid) ? tileCoord : null;\n  }\n\n  /**\n   * Remove all cached tiles from the source. The next render cycle will fetch new tiles.\n   * @api\n   */\n  clear() {\n    this.tileCache.clear();\n  }\n\n  /**\n   * @inheritDoc\n   */\n  refresh() {\n    this.clear();\n    super.refresh();\n  }\n\n  /**\n   * Marks a tile coord as being used, without triggering a load.\n   * @abstract\n   * @param {number} z Tile coordinate z.\n   * @param {number} x Tile coordinate x.\n   * @param {number} y Tile coordinate y.\n   * @param {import(\"../proj/Projection.js\").default} projection Projection.\n   */\n  useTile(z, x, y, projection) {}\n\n}\n\n\n/**\n * @classdesc\n * Events emitted by {@link module:ol/source/Tile~TileSource} instances are instances of this\n * type.\n */\nexport class TileSourceEvent extends Event {\n  /**\n   * @param {string} type Type.\n   * @param {import(\"../Tile.js\").default} tile The tile.\n   */\n  constructor(type, tile) {\n\n    super(type);\n\n    /**\n     * The tile related to the event.\n     * @type {import(\"../Tile.js\").default}\n     * @api\n     */\n    this.tile = tile;\n\n  }\n\n}\n\nexport default TileSource;\n","/**\n * @module ol/net\n */\nimport {getUid} from './util.js';\n\n\n/**\n * Simple JSONP helper. Supports error callbacks and a custom callback param.\n * The error callback will be called when no JSONP is executed after 10 seconds.\n *\n * @param {string} url Request url. A 'callback' query parameter will be\n *     appended.\n * @param {Function} callback Callback on success.\n * @param {function()=} opt_errback Callback on error.\n * @param {string=} opt_callbackParam Custom query parameter for the JSONP\n *     callback. Default is 'callback'.\n */\nexport function jsonp(url, callback, opt_errback, opt_callbackParam) {\n  const script = document.createElement('script');\n  const key = 'olc_' + getUid(callback);\n  function cleanup() {\n    delete window[key];\n    script.parentNode.removeChild(script);\n  }\n  script.async = true;\n  script.src = url + (url.indexOf('?') == -1 ? '?' : '&') +\n      (opt_callbackParam || 'callback') + '=' + key;\n  const timer = setTimeout(function() {\n    cleanup();\n    if (opt_errback) {\n      opt_errback();\n    }\n  }, 10000);\n  window[key] = function(data) {\n    clearTimeout(timer);\n    cleanup();\n    callback(data);\n  };\n  document.getElementsByTagName('head')[0].appendChild(script);\n}\n","/**\n * @module ol/structs/RBush\n */\nimport {getUid} from '../util.js';\nimport RBush_ from 'rbush';\nimport {createOrUpdate, equals} from '../extent.js';\nimport {isEmpty} from '../obj.js';\n\n/**\n * @typedef {Object} Entry\n * @property {number} minX\n * @property {number} minY\n * @property {number} maxX\n * @property {number} maxY\n * @property {Object} [value]\n */\n\n/**\n * @classdesc\n * Wrapper around the RBush by Vladimir Agafonkin.\n * See https://github.com/mourner/rbush.\n *\n * @template T\n */\nclass RBush {\n  /**\n   * @param {number=} opt_maxEntries Max entries.\n   */\n  constructor(opt_maxEntries) {\n\n    /**\n     * @private\n     */\n    this.rbush_ = new RBush_(opt_maxEntries);\n\n    /**\n     * A mapping between the objects added to this rbush wrapper\n     * and the objects that are actually added to the internal rbush.\n     * @private\n     * @type {Object<string, Entry>}\n     */\n    this.items_ = {};\n\n  }\n\n  /**\n   * Insert a value into the RBush.\n   * @param {import(\"../extent.js\").Extent} extent Extent.\n   * @param {T} value Value.\n   */\n  insert(extent, value) {\n    /** @type {Entry} */\n    const item = {\n      minX: extent[0],\n      minY: extent[1],\n      maxX: extent[2],\n      maxY: extent[3],\n      value: value\n    };\n\n    this.rbush_.insert(item);\n    this.items_[getUid(value)] = item;\n  }\n\n\n  /**\n   * Bulk-insert values into the RBush.\n   * @param {Array<import(\"../extent.js\").Extent>} extents Extents.\n   * @param {Array<T>} values Values.\n   */\n  load(extents, values) {\n    const items = new Array(values.length);\n    for (let i = 0, l = values.length; i < l; i++) {\n      const extent = extents[i];\n      const value = values[i];\n\n      /** @type {Entry} */\n      const item = {\n        minX: extent[0],\n        minY: extent[1],\n        maxX: extent[2],\n        maxY: extent[3],\n        value: value\n      };\n      items[i] = item;\n      this.items_[getUid(value)] = item;\n    }\n    this.rbush_.load(items);\n  }\n\n\n  /**\n   * Remove a value from the RBush.\n   * @param {T} value Value.\n   * @return {boolean} Removed.\n   */\n  remove(value) {\n    const uid = getUid(value);\n\n    // get the object in which the value was wrapped when adding to the\n    // internal rbush. then use that object to do the removal.\n    const item = this.items_[uid];\n    delete this.items_[uid];\n    return this.rbush_.remove(item) !== null;\n  }\n\n\n  /**\n   * Update the extent of a value in the RBush.\n   * @param {import(\"../extent.js\").Extent} extent Extent.\n   * @param {T} value Value.\n   */\n  update(extent, value) {\n    const item = this.items_[getUid(value)];\n    const bbox = [item.minX, item.minY, item.maxX, item.maxY];\n    if (!equals(bbox, extent)) {\n      this.remove(value);\n      this.insert(extent, value);\n    }\n  }\n\n\n  /**\n   * Return all values in the RBush.\n   * @return {Array<T>} All.\n   */\n  getAll() {\n    const items = this.rbush_.all();\n    return items.map(function(item) {\n      return item.value;\n    });\n  }\n\n\n  /**\n   * Return all values in the given extent.\n   * @param {import(\"../extent.js\").Extent} extent Extent.\n   * @return {Array<T>} All in extent.\n   */\n  getInExtent(extent) {\n    /** @type {Entry} */\n    const bbox = {\n      minX: extent[0],\n      minY: extent[1],\n      maxX: extent[2],\n      maxY: extent[3]\n    };\n    const items = this.rbush_.search(bbox);\n    return items.map(function(item) {\n      return item.value;\n    });\n  }\n\n\n  /**\n   * Calls a callback function with each value in the tree.\n   * If the callback returns a truthy value, this value is returned without\n   * checking the rest of the tree.\n   * @param {function(T): *} callback Callback.\n   * @return {*} Callback return value.\n   */\n  forEach(callback) {\n    return this.forEach_(this.getAll(), callback);\n  }\n\n\n  /**\n   * Calls a callback function with each value in the provided extent.\n   * @param {import(\"../extent.js\").Extent} extent Extent.\n   * @param {function(T): *} callback Callback.\n   * @return {*} Callback return value.\n   */\n  forEachInExtent(extent, callback) {\n    return this.forEach_(this.getInExtent(extent), callback);\n  }\n\n\n  /**\n   * @param {Array<T>} values Values.\n   * @param {function(T): *} callback Callback.\n   * @private\n   * @return {*} Callback return value.\n   */\n  forEach_(values, callback) {\n    let result;\n    for (let i = 0, l = values.length; i < l; i++) {\n      result = callback(values[i]);\n      if (result) {\n        return result;\n      }\n    }\n    return result;\n  }\n\n\n  /**\n   * @return {boolean} Is empty.\n   */\n  isEmpty() {\n    return isEmpty(this.items_);\n  }\n\n\n  /**\n   * Remove all values from the RBush.\n   */\n  clear() {\n    this.rbush_.clear();\n    this.items_ = {};\n  }\n\n\n  /**\n   * @param {import(\"../extent.js\").Extent=} opt_extent Extent.\n   * @return {import(\"../extent.js\").Extent} Extent.\n   */\n  getExtent(opt_extent) {\n    const data = this.rbush_.toJSON();\n    return createOrUpdate(data.minX, data.minY, data.maxX, data.maxY, opt_extent);\n  }\n\n\n  /**\n   * @param {RBush} rbush R-Tree.\n   */\n  concat(rbush) {\n    this.rbush_.load(rbush.rbush_.all());\n    for (const i in rbush.items_) {\n      this.items_[i] = rbush.items_[i];\n    }\n  }\n\n}\n\n\nexport default RBush;\n","/**\n * @module ol/extent/Corner\n */\n\n/**\n * Extent corner.\n * @enum {string}\n */\nexport default {\n  BOTTOM_LEFT: 'bottom-left',\n  BOTTOM_RIGHT: 'bottom-right',\n  TOP_LEFT: 'top-left',\n  TOP_RIGHT: 'top-right'\n};\n","/**\n * @module ol/TileRange\n */\n\n/**\n * A representation of a contiguous block of tiles.  A tile range is specified\n * by its min/max tile coordinates and is inclusive of coordinates.\n */\nclass TileRange {\n\n  /**\n   * @param {number} minX Minimum X.\n   * @param {number} maxX Maximum X.\n   * @param {number} minY Minimum Y.\n   * @param {number} maxY Maximum Y.\n   */\n  constructor(minX, maxX, minY, maxY) {\n\n    /**\n     * @type {number}\n     */\n    this.minX = minX;\n\n    /**\n     * @type {number}\n     */\n    this.maxX = maxX;\n\n    /**\n     * @type {number}\n     */\n    this.minY = minY;\n\n    /**\n     * @type {number}\n     */\n    this.maxY = maxY;\n\n  }\n\n  /**\n   * @param {import(\"./tilecoord.js\").TileCoord} tileCoord Tile coordinate.\n   * @return {boolean} Contains tile coordinate.\n   */\n  contains(tileCoord) {\n    return this.containsXY(tileCoord[1], tileCoord[2]);\n  }\n\n  /**\n   * @param {TileRange} tileRange Tile range.\n   * @return {boolean} Contains.\n   */\n  containsTileRange(tileRange) {\n    return this.minX <= tileRange.minX && tileRange.maxX <= this.maxX &&\n       this.minY <= tileRange.minY && tileRange.maxY <= this.maxY;\n  }\n\n  /**\n   * @param {number} x Tile coordinate x.\n   * @param {number} y Tile coordinate y.\n   * @return {boolean} Contains coordinate.\n   */\n  containsXY(x, y) {\n    return this.minX <= x && x <= this.maxX && this.minY <= y && y <= this.maxY;\n  }\n\n  /**\n   * @param {TileRange} tileRange Tile range.\n   * @return {boolean} Equals.\n   */\n  equals(tileRange) {\n    return this.minX == tileRange.minX && this.minY == tileRange.minY &&\n       this.maxX == tileRange.maxX && this.maxY == tileRange.maxY;\n  }\n\n  /**\n   * @param {TileRange} tileRange Tile range.\n   */\n  extend(tileRange) {\n    if (tileRange.minX < this.minX) {\n      this.minX = tileRange.minX;\n    }\n    if (tileRange.maxX > this.maxX) {\n      this.maxX = tileRange.maxX;\n    }\n    if (tileRange.minY < this.minY) {\n      this.minY = tileRange.minY;\n    }\n    if (tileRange.maxY > this.maxY) {\n      this.maxY = tileRange.maxY;\n    }\n  }\n\n  /**\n   * @return {number} Height.\n   */\n  getHeight() {\n    return this.maxY - this.minY + 1;\n  }\n\n  /**\n   * @return {import(\"./size.js\").Size} Size.\n   */\n  getSize() {\n    return [this.getWidth(), this.getHeight()];\n  }\n\n  /**\n   * @return {number} Width.\n   */\n  getWidth() {\n    return this.maxX - this.minX + 1;\n  }\n\n  /**\n   * @param {TileRange} tileRange Tile range.\n   * @return {boolean} Intersects.\n   */\n  intersects(tileRange) {\n    return this.minX <= tileRange.maxX &&\n       this.maxX >= tileRange.minX &&\n       this.minY <= tileRange.maxY &&\n       this.maxY >= tileRange.minY;\n  }\n}\n\n\n/**\n * @param {number} minX Minimum X.\n * @param {number} maxX Maximum X.\n * @param {number} minY Minimum Y.\n * @param {number} maxY Maximum Y.\n * @param {TileRange=} tileRange TileRange.\n * @return {TileRange} Tile range.\n */\nexport function createOrUpdate(minX, maxX, minY, maxY, tileRange) {\n  if (tileRange !== undefined) {\n    tileRange.minX = minX;\n    tileRange.maxX = maxX;\n    tileRange.minY = minY;\n    tileRange.maxY = maxY;\n    return tileRange;\n  } else {\n    return new TileRange(minX, maxX, minY, maxY);\n  }\n}\n\n\nexport default TileRange;\n","/**\n * @module ol/source/Raster\n */\nimport ImageCanvas from '../ImageCanvas.js';\nimport TileQueue from '../TileQueue.js';\nimport {createCanvasContext2D} from '../dom.js';\nimport Event from '../events/Event.js';\nimport EventType from '../events/EventType.js';\nimport {Processor} from 'pixelworks/lib/index.js';\nimport {equals, getCenter, getHeight, getWidth} from '../extent.js';\nimport ImageLayer from '../layer/Image.js';\nimport TileLayer from '../layer/Tile.js';\nimport {assign} from '../obj.js';\nimport {create as createTransform} from '../transform.js';\nimport ImageSource from './Image.js';\nimport TileSource from './Tile.js';\nimport SourceState from './State.js';\nimport Source from './Source.js';\n\n\n/**\n * A function that takes an array of input data, performs some operation, and\n * returns an array of output data.\n * For `pixel` type operations, the function will be called with an array of\n * pixels, where each pixel is an array of four numbers (`[r, g, b, a]`) in the\n * range of 0 - 255. It should return a single pixel array.\n * For `'image'` type operations, functions will be called with an array of\n * {@link ImageData https://developer.mozilla.org/en-US/docs/Web/API/ImageData}\n * and should return a single {@link ImageData\n * https://developer.mozilla.org/en-US/docs/Web/API/ImageData}.  The operations\n * are called with a second \"data\" argument, which can be used for storage.  The\n * data object is accessible from raster events, where it can be initialized in\n * \"beforeoperations\" and accessed again in \"afteroperations\".\n *\n * @typedef {function((Array<Array<number>>|Array<ImageData>), Object):\n *     (Array<number>|ImageData)} Operation\n */\n\n\n/**\n * @enum {string}\n */\nconst RasterEventType = {\n  /**\n   * Triggered before operations are run.\n   * @event module:ol/source/Raster.RasterSourceEvent#beforeoperations\n   * @api\n   */\n  BEFOREOPERATIONS: 'beforeoperations',\n\n  /**\n   * Triggered after operations are run.\n   * @event module:ol/source/Raster.RasterSourceEvent#afteroperations\n   * @api\n   */\n  AFTEROPERATIONS: 'afteroperations'\n};\n\n\n/**\n * Raster operation type. Supported values are `'pixel'` and `'image'`.\n * @enum {string}\n */\nconst RasterOperationType = {\n  PIXEL: 'pixel',\n  IMAGE: 'image'\n};\n\n\n/**\n * @classdesc\n * Events emitted by {@link module:ol/source/Raster} instances are instances of this\n * type.\n */\nexport class RasterSourceEvent extends Event {\n  /**\n   * @param {string} type Type.\n   * @param {import(\"../PluggableMap.js\").FrameState} frameState The frame state.\n   * @param {Object} data An object made available to operations.\n   */\n  constructor(type, frameState, data) {\n    super(type);\n\n    /**\n     * The raster extent.\n     * @type {import(\"../extent.js\").Extent}\n     * @api\n     */\n    this.extent = frameState.extent;\n\n    /**\n     * The pixel resolution (map units per pixel).\n     * @type {number}\n     * @api\n     */\n    this.resolution = frameState.viewState.resolution / frameState.pixelRatio;\n\n    /**\n     * An object made available to all operations.  This can be used by operations\n     * as a storage object (e.g. for calculating statistics).\n     * @type {Object}\n     * @api\n     */\n    this.data = data;\n\n  }\n\n}\n\n/**\n * @typedef {Object} Options\n * @property {Array<import(\"./Source.js\").default|import(\"../layer/Layer.js\").default>} sources Input\n * sources or layers.  For vector data, use an VectorImage layer.\n * @property {Operation} [operation] Raster operation.\n * The operation will be called with data from input sources\n * and the output will be assigned to the raster source.\n * @property {Object} [lib] Functions that will be made available to operations run in a worker.\n * @property {number} [threads] By default, operations will be run in a single worker thread.\n * To avoid using workers altogether, set `threads: 0`.  For pixel operations, operations can\n * be run in multiple worker threads.  Note that there is additional overhead in\n * transferring data to multiple workers, and that depending on the user's\n * system, it may not be possible to parallelize the work.\n * @property {RasterOperationType} [operationType='pixel'] Operation type.\n * Supported values are `'pixel'` and `'image'`.  By default,\n * `'pixel'` operations are assumed, and operations will be called with an\n * array of pixels from input sources.  If set to `'image'`, operations will\n * be called with an array of ImageData objects from input sources.\n */\n\n\n/**\n * @classdesc\n * A source that transforms data from any number of input sources using an\n * {@link module:ol/source/Raster~Operation} function to transform input pixel values into\n * output pixel values.\n *\n * @fires module:ol/source/Raster.RasterSourceEvent\n * @api\n */\nclass RasterSource extends ImageSource {\n  /**\n   * @param {Options} options Options.\n   */\n  constructor(options) {\n    super({\n      projection: null\n    });\n\n    /**\n     * @private\n     * @type {*}\n     */\n    this.worker_ = null;\n\n    /**\n     * @private\n     * @type {RasterOperationType}\n     */\n    this.operationType_ = options.operationType !== undefined ?\n      options.operationType : RasterOperationType.PIXEL;\n\n    /**\n     * @private\n     * @type {number}\n     */\n    this.threads_ = options.threads !== undefined ? options.threads : 1;\n\n    /**\n     * @private\n     * @type {Array<import(\"../layer/Layer.js\").default>}\n     */\n    this.layers_ = createLayers(options.sources);\n\n    const changed = this.changed.bind(this);\n    for (let i = 0, ii = this.layers_.length; i < ii; ++i) {\n      this.layers_[i].addEventListener(EventType.CHANGE, changed);\n    }\n\n    /**\n     * @private\n     * @type {import(\"../TileQueue.js\").default}\n     */\n    this.tileQueue_ = new TileQueue(function() {\n      return 1;\n    }, this.changed.bind(this));\n\n    /**\n     * The most recently requested frame state.\n     * @type {import(\"../PluggableMap.js\").FrameState}\n     * @private\n     */\n    this.requestedFrameState_;\n\n    /**\n     * The most recently rendered image canvas.\n     * @type {import(\"../ImageCanvas.js\").default}\n     * @private\n     */\n    this.renderedImageCanvas_ = null;\n\n    /**\n     * The most recently rendered revision.\n     * @type {number}\n     */\n    this.renderedRevision_;\n\n    /**\n     * @private\n     * @type {import(\"../PluggableMap.js\").FrameState}\n     */\n    this.frameState_ = {\n      animate: false,\n      coordinateToPixelTransform: createTransform(),\n      extent: null,\n      index: 0,\n      layerIndex: 0,\n      layerStatesArray: getLayerStatesArray(this.layers_),\n      pixelRatio: 1,\n      pixelToCoordinateTransform: createTransform(),\n      postRenderFunctions: [],\n      size: [0, 0],\n      tileQueue: this.tileQueue_,\n      time: Date.now(),\n      usedTiles: {},\n      viewState: /** @type {import(\"../View.js\").State} */ ({\n        rotation: 0\n      }),\n      viewHints: [],\n      wantedTiles: {},\n      declutterItems: []\n    };\n\n    this.setAttributions(function(frameState) {\n      const attributions = [];\n      for (let index = 0, iMax = options.sources.length; index < iMax; ++index) {\n        const sourceOrLayer = options.sources[index];\n        const source = sourceOrLayer instanceof Source ? sourceOrLayer : sourceOrLayer.getSource();\n        const attributionGetter = source.getAttributions();\n        if (typeof attributionGetter === 'function') {\n          const sourceAttribution = attributionGetter(frameState);\n          attributions.push.apply(attributions, sourceAttribution);\n        }\n      }\n      return attributions.length !== 0 ? attributions : null;\n    });\n\n    if (options.operation !== undefined) {\n      this.setOperation(options.operation, options.lib);\n    }\n\n  }\n\n  /**\n   * Set the operation.\n   * @param {Operation} operation New operation.\n   * @param {Object=} opt_lib Functions that will be available to operations run\n   *     in a worker.\n   * @api\n   */\n  setOperation(operation, opt_lib) {\n    this.worker_ = new Processor({\n      operation: operation,\n      imageOps: this.operationType_ === RasterOperationType.IMAGE,\n      queue: 1,\n      lib: opt_lib,\n      threads: this.threads_\n    });\n    this.changed();\n  }\n\n  /**\n   * Update the stored frame state.\n   * @param {import(\"../extent.js\").Extent} extent The view extent (in map units).\n   * @param {number} resolution The view resolution.\n   * @param {import(\"../proj/Projection.js\").default} projection The view projection.\n   * @return {import(\"../PluggableMap.js\").FrameState} The updated frame state.\n   * @private\n   */\n  updateFrameState_(extent, resolution, projection) {\n\n    const frameState = /** @type {import(\"../PluggableMap.js\").FrameState} */ (assign({}, this.frameState_));\n\n    frameState.viewState = /** @type {import(\"../View.js\").State} */ (assign({}, frameState.viewState));\n\n    const center = getCenter(extent);\n\n    frameState.extent = extent.slice();\n    frameState.size[0] = Math.round(getWidth(extent) / resolution);\n    frameState.size[1] = Math.round(getHeight(extent) / resolution);\n    frameState.time = Infinity;\n\n    const viewState = frameState.viewState;\n    viewState.center = center;\n    viewState.projection = projection;\n    viewState.resolution = resolution;\n    return frameState;\n  }\n\n  /**\n   * Determine if all sources are ready.\n   * @return {boolean} All sources are ready.\n   * @private\n   */\n  allSourcesReady_() {\n    let ready = true;\n    let source;\n    for (let i = 0, ii = this.layers_.length; i < ii; ++i) {\n      source = this.layers_[i].getSource();\n      if (source.getState() !== SourceState.READY) {\n        ready = false;\n        break;\n      }\n    }\n    return ready;\n  }\n\n  /**\n   * @inheritDoc\n   */\n  getImage(extent, resolution, pixelRatio, projection) {\n    if (!this.allSourcesReady_()) {\n      return null;\n    }\n\n    const frameState = this.updateFrameState_(extent, resolution, projection);\n    this.requestedFrameState_ = frameState;\n\n    // check if we can't reuse the existing ol/ImageCanvas\n    if (this.renderedImageCanvas_) {\n      const renderedResolution = this.renderedImageCanvas_.getResolution();\n      const renderedExtent = this.renderedImageCanvas_.getExtent();\n      if (resolution !== renderedResolution || !equals(extent, renderedExtent)) {\n        this.renderedImageCanvas_ = null;\n      }\n    }\n\n    if (!this.renderedImageCanvas_ || this.getRevision() !== this.renderedRevision_) {\n      this.processSources_();\n    }\n\n    frameState.tileQueue.loadMoreTiles(16, 16);\n\n    if (frameState.animate) {\n      requestAnimationFrame(this.changed.bind(this));\n    }\n\n    return this.renderedImageCanvas_;\n  }\n\n  /**\n   * Start processing source data.\n   * @private\n   */\n  processSources_() {\n    const frameState = this.requestedFrameState_;\n    const len = this.layers_.length;\n    const imageDatas = new Array(len);\n    for (let i = 0; i < len; ++i) {\n      frameState.layerIndex = i;\n      const imageData = getImageData(this.layers_[i], frameState);\n      if (imageData) {\n        imageDatas[i] = imageData;\n      } else {\n        return;\n      }\n    }\n\n    const data = {};\n    this.dispatchEvent(new RasterSourceEvent(RasterEventType.BEFOREOPERATIONS, frameState, data));\n    this.worker_.process(imageDatas, data, this.onWorkerComplete_.bind(this, frameState));\n  }\n\n  /**\n   * Called when pixel processing is complete.\n   * @param {import(\"../PluggableMap.js\").FrameState} frameState The frame state.\n   * @param {Error} err Any error during processing.\n   * @param {ImageData} output The output image data.\n   * @param {Object} data The user data.\n   * @private\n   */\n  onWorkerComplete_(frameState, err, output, data) {\n    if (err || !output) {\n      return;\n    }\n\n    // do nothing if extent or resolution changed\n    const extent = frameState.extent;\n    const resolution = frameState.viewState.resolution;\n    if (resolution !== this.requestedFrameState_.viewState.resolution ||\n        !equals(extent, this.requestedFrameState_.extent)) {\n      return;\n    }\n\n    let context;\n    if (this.renderedImageCanvas_) {\n      context = this.renderedImageCanvas_.getImage().getContext('2d');\n    } else {\n      const width = Math.round(getWidth(extent) / resolution);\n      const height = Math.round(getHeight(extent) / resolution);\n      context = createCanvasContext2D(width, height);\n      this.renderedImageCanvas_ = new ImageCanvas(extent, resolution, 1, context.canvas);\n    }\n    context.putImageData(output, 0, 0);\n\n    this.changed();\n    this.renderedRevision_ = this.getRevision();\n\n    this.dispatchEvent(new RasterSourceEvent(RasterEventType.AFTEROPERATIONS, frameState, data));\n  }\n\n  /**\n   * @override\n   */\n  getImageInternal() {\n    return null; // not implemented\n  }\n}\n\n\n/**\n * A reusable canvas context.\n * @type {CanvasRenderingContext2D}\n * @private\n */\nlet sharedContext = null;\n\n\n/**\n * Get image data from a layer.\n * @param {import(\"../layer/Layer.js\").default} layer Layer to render.\n * @param {import(\"../PluggableMap.js\").FrameState} frameState The frame state.\n * @return {ImageData} The image data.\n */\nfunction getImageData(layer, frameState) {\n  const renderer = layer.getRenderer();\n  if (!renderer) {\n    throw new Error('Unsupported layer type: ' + layer);\n  }\n\n  if (!renderer.prepareFrame(frameState)) {\n    return null;\n  }\n  const width = frameState.size[0];\n  const height = frameState.size[1];\n  const container = renderer.renderFrame(frameState, null);\n  let element;\n  if (container) {\n    element = container.firstElementChild;\n  }\n  if (!(element instanceof HTMLCanvasElement)) {\n    throw new Error('Unsupported rendered element: ' + element);\n  }\n  if (element.width === width && element.height === height) {\n    const context = element.getContext('2d');\n    return context.getImageData(0, 0, width, height);\n  }\n\n  if (!sharedContext) {\n    sharedContext = createCanvasContext2D(width, height);\n  } else {\n    const canvas = sharedContext.canvas;\n    if (canvas.width !== width || canvas.height !== height) {\n      sharedContext = createCanvasContext2D(width, height);\n    } else {\n      sharedContext.clearRect(0, 0, width, height);\n    }\n  }\n  sharedContext.drawImage(element, 0, 0, width, height);\n  return sharedContext.getImageData(0, 0, width, height);\n}\n\n\n/**\n * Get a list of layer states from a list of layers.\n * @param {Array<import(\"../layer/Layer.js\").default>} layers Layers.\n * @return {Array<import(\"../layer/Layer.js\").State>} The layer states.\n */\nfunction getLayerStatesArray(layers) {\n  return layers.map(function(layer) {\n    return layer.getLayerState();\n  });\n}\n\n\n/**\n * Create layers for all sources.\n * @param {Array<import(\"./Source.js\").default|import(\"../layer/Layer.js\").default>} sources The sources.\n * @return {Array<import(\"../layer/Layer.js\").default>} Array of layers.\n */\nfunction createLayers(sources) {\n  const len = sources.length;\n  const layers = new Array(len);\n  for (let i = 0; i < len; ++i) {\n    layers[i] = createLayer(sources[i]);\n  }\n  return layers;\n}\n\n\n/**\n * Create a layer for the provided source.\n * @param {import(\"./Source.js\").default|import(\"../layer/Layer.js\").default} layerOrSource The layer or source.\n * @return {import(\"../layer/Layer.js\").default} The layer.\n */\nfunction createLayer(layerOrSource) {\n  // @type {import(\"../layer/Layer.js\").default}\n  let layer;\n  if (layerOrSource instanceof Source) {\n    if (layerOrSource instanceof TileSource) {\n      layer = new TileLayer({source: layerOrSource});\n    } else if (layerOrSource instanceof ImageSource) {\n      layer = new ImageLayer({source: layerOrSource});\n    }\n  } else {\n    layer = layerOrSource;\n  }\n  return layer;\n}\n\n\nexport default RasterSource;\n","/**\n * @module ol/source/Zoomify\n */\nimport {DEFAULT_TILE_SIZE} from '../tilegrid/common.js';\n\nimport ImageTile from '../ImageTile.js';\nimport TileState from '../TileState.js';\nimport {expandUrl, createFromTileUrlFunctions} from '../tileurlfunction.js';\nimport {assert} from '../asserts.js';\nimport {createCanvasContext2D} from '../dom.js';\nimport {getTopLeft} from '../extent.js';\nimport {toSize} from '../size.js';\nimport TileImage from './TileImage.js';\nimport TileGrid from '../tilegrid/TileGrid.js';\n\n\n/**\n * @enum {string}\n */\nconst TierSizeCalculation = {\n  DEFAULT: 'default',\n  TRUNCATED: 'truncated'\n};\n\n\nexport class CustomTile extends ImageTile {\n\n  /**\n   * @param {number} tilePixelRatio Tile pixel ratio to display the tile\n   * @param {import(\"../tilegrid/TileGrid.js\").default} tileGrid TileGrid that the tile belongs to.\n   * @param {import(\"../tilecoord.js\").TileCoord} tileCoord Tile coordinate.\n   * @param {TileState} state State.\n   * @param {string} src Image source URI.\n   * @param {?string} crossOrigin Cross origin.\n   * @param {import(\"../Tile.js\").LoadFunction} tileLoadFunction Tile load function.\n   * @param {import(\"../Tile.js\").Options=} opt_options Tile options.\n   */\n  constructor(tilePixelRatio, tileGrid, tileCoord, state, src, crossOrigin, tileLoadFunction, opt_options) {\n    super(tileCoord, state, src, crossOrigin, tileLoadFunction, opt_options);\n\n    /**\n     * @private\n     * @type {HTMLCanvasElement|HTMLImageElement|HTMLVideoElement}\n     */\n    this.zoomifyImage_ = null;\n\n    /**\n     * @private\n     * @type {import(\"../size.js\").Size}\n     */\n    this.tileSize_ = toSize(tileGrid.getTileSize(tileCoord[0])).map(\n      function(x) {\n        return x * tilePixelRatio;\n      }\n    );\n  }\n\n  /**\n   * @inheritDoc\n   */\n  getImage() {\n    if (this.zoomifyImage_) {\n      return this.zoomifyImage_;\n    }\n    const image = super.getImage();\n    if (this.state == TileState.LOADED) {\n      const tileSize = this.tileSize_;\n      if (image.width == tileSize[0] && image.height == tileSize[1]) {\n        this.zoomifyImage_ = image;\n        return image;\n      } else {\n        const context = createCanvasContext2D(tileSize[0], tileSize[1]);\n        context.drawImage(image, 0, 0);\n        this.zoomifyImage_ = context.canvas;\n        return context.canvas;\n      }\n    } else {\n      return image;\n    }\n  }\n\n}\n\n\n/**\n * @typedef {Object} Options\n * @property {import(\"./Source.js\").AttributionLike} [attributions] Attributions.\n * @property {number} [cacheSize] Tile cache size. The default depends on the screen size. Will increase if too small.\n * @property {null|string} [crossOrigin] The `crossOrigin` attribute for loaded images.  Note that\n * you must provide a `crossOrigin` value  you want to access pixel data with the Canvas renderer.\n * See https://developer.mozilla.org/en-US/docs/Web/HTML/CORS_enabled_image for more detail.\n * @property {import(\"../proj.js\").ProjectionLike} [projection] Projection.\n * @property {number} [tilePixelRatio] The pixel ratio used by the tile service. For example, if the tile service advertizes 256px by 256px tiles but actually sends 512px by 512px images (for retina/hidpi devices) then `tilePixelRatio` should be set to `2`\n * @property {number} [reprojectionErrorThreshold=0.5] Maximum allowed reprojection error (in pixels).\n * Higher values can increase reprojection performance, but decrease precision.\n * @property {string} [url] URL template or base URL of the Zoomify service.\n * A base URL is the fixed part\n * of the URL, excluding the tile group, z, x, and y folder structure, e.g.\n * `http://my.zoomify.info/IMAGE.TIF/`. A URL template must include\n * `{TileGroup}`, `{x}`, `{y}`, and `{z}` placeholders, e.g.\n * `http://my.zoomify.info/IMAGE.TIF/{TileGroup}/{z}-{x}-{y}.jpg`.\n * Internet Imaging Protocol (IIP) with JTL extension can be also used with\n * `{tileIndex}` and `{z}` placeholders, e.g.\n * `http://my.zoomify.info?FIF=IMAGE.TIF&JTL={z},{tileIndex}`.\n * A `{?-?}` template pattern, for example `subdomain{a-f}.domain.com`, may be\n * used instead of defining each one separately in the `urls` option.\n * @property {string} [tierSizeCalculation] Tier size calculation method: `default` or `truncated`.\n * @property {import(\"../size.js\").Size} [size] Size of the image.\n * @property {import(\"../extent.js\").Extent} [extent] Extent for the TileGrid that is created.\n * Default sets the TileGrid in the\n * fourth quadrant, meaning extent is `[0, -height, width, 0]`. To change the\n * extent to the first quadrant (the default for OpenLayers 2) set the extent\n * as `[0, 0, width, height]`.\n * @property {number} [transition] Duration of the opacity transition for rendering.\n * To disable the opacity transition, pass `transition: 0`.\n * @property {number} [tileSize=256] Tile size. Same tile size is used for all zoom levels.\n * @property {number} [zDirection=0] Indicate which resolution should be used\n * by a renderer if the view resolution does not match any resolution of the tile source.\n * If 0, the nearest resolution will be used. If 1, the nearest lower resolution\n * will be used. If -1, the nearest higher resolution will be used.\n */\n\n\n/**\n * @classdesc\n * Layer source for tile data in Zoomify format (both Zoomify and Internet\n * Imaging Protocol are supported).\n * @api\n */\nclass Zoomify extends TileImage {\n\n  /**\n   * @param {Options=} opt_options Options.\n   */\n  constructor(opt_options) {\n\n    const options = opt_options || {};\n\n    const size = options.size;\n    const tierSizeCalculation = options.tierSizeCalculation !== undefined ?\n      options.tierSizeCalculation :\n      TierSizeCalculation.DEFAULT;\n\n    const imageWidth = size[0];\n    const imageHeight = size[1];\n    const extent = options.extent || [0, -size[1], size[0], 0];\n    const tierSizeInTiles = [];\n    const tileSize = options.tileSize || DEFAULT_TILE_SIZE;\n    const tilePixelRatio = options.tilePixelRatio || 1;\n    let tileSizeForTierSizeCalculation = tileSize;\n\n    switch (tierSizeCalculation) {\n      case TierSizeCalculation.DEFAULT:\n        while (imageWidth > tileSizeForTierSizeCalculation || imageHeight > tileSizeForTierSizeCalculation) {\n          tierSizeInTiles.push([\n            Math.ceil(imageWidth / tileSizeForTierSizeCalculation),\n            Math.ceil(imageHeight / tileSizeForTierSizeCalculation)\n          ]);\n          tileSizeForTierSizeCalculation += tileSizeForTierSizeCalculation;\n        }\n        break;\n      case TierSizeCalculation.TRUNCATED:\n        let width = imageWidth;\n        let height = imageHeight;\n        while (width > tileSizeForTierSizeCalculation || height > tileSizeForTierSizeCalculation) {\n          tierSizeInTiles.push([\n            Math.ceil(width / tileSizeForTierSizeCalculation),\n            Math.ceil(height / tileSizeForTierSizeCalculation)\n          ]);\n          width >>= 1;\n          height >>= 1;\n        }\n        break;\n      default:\n        assert(false, 53); // Unknown `tierSizeCalculation` configured\n        break;\n    }\n\n    tierSizeInTiles.push([1, 1]);\n    tierSizeInTiles.reverse();\n\n    const resolutions = [1];\n    const tileCountUpToTier = [0];\n    for (let i = 1, ii = tierSizeInTiles.length; i < ii; i++) {\n      resolutions.push(1 << i);\n      tileCountUpToTier.push(\n        tierSizeInTiles[i - 1][0] * tierSizeInTiles[i - 1][1] +\n          tileCountUpToTier[i - 1]\n      );\n    }\n    resolutions.reverse();\n\n    const tileGrid = new TileGrid({\n      tileSize: tileSize,\n      extent: extent,\n      origin: getTopLeft(extent),\n      resolutions: resolutions\n    });\n\n    let url = options.url;\n    if (url && url.indexOf('{TileGroup}') == -1 && url.indexOf('{tileIndex}') == -1) {\n      url += '{TileGroup}/{z}-{x}-{y}.jpg';\n    }\n    const urls = expandUrl(url);\n\n    /**\n     * @param {string} template Template.\n     * @return {import(\"../Tile.js\").UrlFunction} Tile URL function.\n     */\n    function createFromTemplate(template) {\n\n      return (\n        /**\n         * @param {import(\"../tilecoord.js\").TileCoord} tileCoord Tile Coordinate.\n         * @param {number} pixelRatio Pixel ratio.\n         * @param {import(\"../proj/Projection.js\").default} projection Projection.\n         * @return {string|undefined} Tile URL.\n         */\n        function(tileCoord, pixelRatio, projection) {\n          if (!tileCoord) {\n            return undefined;\n          } else {\n            const tileCoordZ = tileCoord[0];\n            const tileCoordX = tileCoord[1];\n            const tileCoordY = tileCoord[2];\n            const tileIndex =\n                tileCoordX +\n                tileCoordY * tierSizeInTiles[tileCoordZ][0];\n            const tileSize = tileGrid.getTileSize(tileCoordZ);\n            const tileWidth = Array.isArray(tileSize) ? tileSize[0] : tileSize;\n            const tileGroup = ((tileIndex + tileCountUpToTier[tileCoordZ]) / tileWidth) | 0;\n            const localContext = {\n              'z': tileCoordZ,\n              'x': tileCoordX,\n              'y': tileCoordY,\n              'tileIndex': tileIndex,\n              'TileGroup': 'TileGroup' + tileGroup\n            };\n            return template.replace(/\\{(\\w+?)\\}/g, function(m, p) {\n              return localContext[p];\n            });\n          }\n        }\n      );\n    }\n\n    const tileUrlFunction = createFromTileUrlFunctions(urls.map(createFromTemplate));\n\n    const ZoomifyTileClass = CustomTile.bind(null, tilePixelRatio, tileGrid);\n\n    super({\n      attributions: options.attributions,\n      cacheSize: options.cacheSize,\n      crossOrigin: options.crossOrigin,\n      projection: options.projection,\n      tilePixelRatio: tilePixelRatio,\n      reprojectionErrorThreshold: options.reprojectionErrorThreshold,\n      tileClass: ZoomifyTileClass,\n      tileGrid: tileGrid,\n      tileUrlFunction: tileUrlFunction,\n      transition: options.transition\n    });\n\n    /**\n     * @inheritDoc\n     */\n    this.zDirection = options.zDirection;\n\n  }\n\n}\n\nexport default Zoomify;\n","/**\n * @module ol/geom/flat/straightchunk\n */\n\n\n/**\n * @param {number} maxAngle Maximum acceptable angle delta between segments.\n * @param {Array<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {number} end End.\n * @param {number} stride Stride.\n * @return {Array<number>} Start and end of the first suitable chunk of the\n * given `flatCoordinates`.\n */\nexport function matchingChunk(maxAngle, flatCoordinates, offset, end, stride) {\n  let chunkStart = offset;\n  let chunkEnd = offset;\n  let chunkM = 0;\n  let m = 0;\n  let start = offset;\n  let acos, i, m12, m23, x1, y1, x12, y12, x23, y23;\n  for (i = offset; i < end; i += stride) {\n    const x2 = flatCoordinates[i];\n    const y2 = flatCoordinates[i + 1];\n    if (x1 !== undefined) {\n      x23 = x2 - x1;\n      y23 = y2 - y1;\n      m23 = Math.sqrt(x23 * x23 + y23 * y23);\n      if (x12 !== undefined) {\n        m += m12;\n        acos = Math.acos((x12 * x23 + y12 * y23) / (m12 * m23));\n        if (acos > maxAngle) {\n          if (m > chunkM) {\n            chunkM = m;\n            chunkStart = start;\n            chunkEnd = i;\n          }\n          m = 0;\n          start = i - stride;\n        }\n      }\n      m12 = m23;\n      x12 = x23;\n      y12 = y23;\n    }\n    x1 = x2;\n    y1 = y2;\n  }\n  m += m23;\n  return m > chunkM ? [start, i] : [chunkStart, chunkEnd];\n}\n","/**\n * @module ol/render/canvas/TextBuilder\n */\nimport {getUid} from '../../util.js';\nimport {asColorLike} from '../../colorlike.js';\nimport {intersects} from '../../extent.js';\nimport {matchingChunk} from '../../geom/flat/straightchunk.js';\nimport GeometryType from '../../geom/GeometryType.js';\nimport {labelCache, defaultTextAlign, defaultPadding, defaultLineCap, defaultLineDashOffset, defaultLineDash, defaultLineJoin, defaultFillStyle, checkFont, defaultFont, defaultLineWidth, defaultMiterLimit, defaultStrokeStyle, defaultTextBaseline} from '../canvas.js';\nimport CanvasInstruction from './Instruction.js';\nimport CanvasBuilder from './Builder.js';\nimport TextPlacement from '../../style/TextPlacement.js';\n/**\n * @const\n * @enum {number}\n */\nexport const TEXT_ALIGN = {\n  'left': 0,\n  'end': 0,\n  'center': 0.5,\n  'right': 1,\n  'start': 1,\n  'top': 0,\n  'middle': 0.5,\n  'hanging': 0.2,\n  'alphabetic': 0.8,\n  'ideographic': 0.8,\n  'bottom': 1\n};\n\n\nclass CanvasTextBuilder extends CanvasBuilder {\n  /**\n   * @param {number} tolerance Tolerance.\n   * @param {import(\"../../extent.js\").Extent} maxExtent Maximum extent.\n   * @param {number} resolution Resolution.\n   * @param {number} pixelRatio Pixel ratio.\n   */\n  constructor(tolerance, maxExtent, resolution, pixelRatio) {\n    super(tolerance, maxExtent, resolution, pixelRatio);\n\n    /**\n     * @private\n     * @type {import(\"../canvas.js\").DeclutterGroups}\n     */\n    this.declutterGroups_;\n\n    /**\n     * @private\n     * @type {Array<HTMLCanvasElement>}\n     */\n    this.labels_ = null;\n\n    /**\n     * @private\n     * @type {string}\n     */\n    this.text_ = '';\n\n    /**\n     * @private\n     * @type {number}\n     */\n    this.textOffsetX_ = 0;\n\n    /**\n     * @private\n     * @type {number}\n     */\n    this.textOffsetY_ = 0;\n\n    /**\n     * @private\n     * @type {boolean|undefined}\n     */\n    this.textRotateWithView_ = undefined;\n\n    /**\n     * @private\n     * @type {number}\n     */\n    this.textRotation_ = 0;\n\n    /**\n     * @private\n     * @type {?import(\"../canvas.js\").FillState}\n     */\n    this.textFillState_ = null;\n\n    /**\n     * @type {!Object<string, import(\"../canvas.js\").FillState>}\n     */\n    this.fillStates = {};\n\n    /**\n     * @private\n     * @type {?import(\"../canvas.js\").StrokeState}\n     */\n    this.textStrokeState_ = null;\n\n    /**\n     * @type {!Object<string, import(\"../canvas.js\").StrokeState>}\n     */\n    this.strokeStates = {};\n\n    /**\n     * @private\n     * @type {import(\"../canvas.js\").TextState}\n     */\n    this.textState_ = /** @type {import(\"../canvas.js\").TextState} */ ({});\n\n    /**\n     * @type {!Object<string, import(\"../canvas.js\").TextState>}\n     */\n    this.textStates = {};\n\n    /**\n     * @private\n     * @type {string}\n     */\n    this.textKey_ = '';\n\n    /**\n     * @private\n     * @type {string}\n     */\n    this.fillKey_ = '';\n\n    /**\n     * @private\n     * @type {string}\n     */\n    this.strokeKey_ = '';\n\n    labelCache.prune();\n  }\n\n  /**\n   * @inheritDoc\n   */\n  finish() {\n    const instructions = super.finish();\n    instructions.textStates = this.textStates;\n    instructions.fillStates = this.fillStates;\n    instructions.strokeStates = this.strokeStates;\n    return instructions;\n  }\n\n  /**\n   * @inheritDoc\n   */\n  drawText(geometry, feature) {\n    const fillState = this.textFillState_;\n    const strokeState = this.textStrokeState_;\n    const textState = this.textState_;\n    if (this.text_ === '' || !textState || (!fillState && !strokeState)) {\n      return;\n    }\n\n    let begin = this.coordinates.length;\n\n    const geometryType = geometry.getType();\n    let flatCoordinates = null;\n    let end = 2;\n    let stride = 2;\n    let i, ii;\n\n    if (textState.placement === TextPlacement.LINE) {\n      if (!intersects(this.getBufferedMaxExtent(), geometry.getExtent())) {\n        return;\n      }\n      let ends;\n      flatCoordinates = geometry.getFlatCoordinates();\n      stride = geometry.getStride();\n      if (geometryType == GeometryType.LINE_STRING) {\n        ends = [flatCoordinates.length];\n      } else if (geometryType == GeometryType.MULTI_LINE_STRING) {\n        ends = geometry.getEnds();\n      } else if (geometryType == GeometryType.POLYGON) {\n        ends = geometry.getEnds().slice(0, 1);\n      } else if (geometryType == GeometryType.MULTI_POLYGON) {\n        const endss = geometry.getEndss();\n        ends = [];\n        for (i = 0, ii = endss.length; i < ii; ++i) {\n          ends.push(endss[i][0]);\n        }\n      }\n      this.beginGeometry(geometry, feature);\n      const textAlign = textState.textAlign;\n      let flatOffset = 0;\n      let flatEnd;\n      for (let o = 0, oo = ends.length; o < oo; ++o) {\n        if (textAlign == undefined) {\n          const range = matchingChunk(textState.maxAngle, flatCoordinates, flatOffset, ends[o], stride);\n          flatOffset = range[0];\n          flatEnd = range[1];\n        } else {\n          flatEnd = ends[o];\n        }\n        for (i = flatOffset; i < flatEnd; i += stride) {\n          this.coordinates.push(flatCoordinates[i], flatCoordinates[i + 1]);\n        }\n        end = this.coordinates.length;\n        flatOffset = ends[o];\n        const declutterGroup = this.declutterGroups_ ?\n          (o === 0 ? this.declutterGroups_[0] : [].concat(this.declutterGroups_[0])) :\n          null;\n        this.drawChars_(begin, end, declutterGroup);\n        begin = end;\n      }\n      this.endGeometry(feature);\n\n    } else {\n\n      let geometryWidths = null;\n      if (!textState.overflow) {\n        geometryWidths = [];\n      }\n      switch (geometryType) {\n        case GeometryType.POINT:\n        case GeometryType.MULTI_POINT:\n          flatCoordinates = geometry.getFlatCoordinates();\n          end = flatCoordinates.length;\n          break;\n        case GeometryType.LINE_STRING:\n          flatCoordinates = /** @type {import(\"../../geom/LineString.js\").default} */ (geometry).getFlatMidpoint();\n          break;\n        case GeometryType.CIRCLE:\n          flatCoordinates = /** @type {import(\"../../geom/Circle.js\").default} */ (geometry).getCenter();\n          break;\n        case GeometryType.MULTI_LINE_STRING:\n          flatCoordinates = /** @type {import(\"../../geom/MultiLineString.js\").default} */ (geometry).getFlatMidpoints();\n          end = flatCoordinates.length;\n          break;\n        case GeometryType.POLYGON:\n          flatCoordinates = /** @type {import(\"../../geom/Polygon.js\").default} */ (geometry).getFlatInteriorPoint();\n          if (!textState.overflow) {\n            geometryWidths.push(flatCoordinates[2] / this.resolution);\n          }\n          stride = 3;\n          break;\n        case GeometryType.MULTI_POLYGON:\n          const interiorPoints = /** @type {import(\"../../geom/MultiPolygon.js\").default} */ (geometry).getFlatInteriorPoints();\n          flatCoordinates = [];\n          for (i = 0, ii = interiorPoints.length; i < ii; i += 3) {\n            if (!textState.overflow) {\n              geometryWidths.push(interiorPoints[i + 2] / this.resolution);\n            }\n            flatCoordinates.push(interiorPoints[i], interiorPoints[i + 1]);\n          }\n          end = flatCoordinates.length;\n          if (end == 0) {\n            return;\n          }\n          break;\n        default:\n      }\n      end = this.appendFlatCoordinates(flatCoordinates, 0, end, stride, false, false);\n\n      this.saveTextStates_();\n\n      if (textState.backgroundFill || textState.backgroundStroke) {\n        this.setFillStrokeStyle(textState.backgroundFill, textState.backgroundStroke);\n        if (textState.backgroundFill) {\n          this.updateFillStyle(this.state, this.createFill);\n          this.hitDetectionInstructions.push(this.createFill(this.state));\n        }\n        if (textState.backgroundStroke) {\n          this.updateStrokeStyle(this.state, this.applyStroke);\n          this.hitDetectionInstructions.push(this.createStroke(this.state));\n        }\n      }\n\n      this.beginGeometry(geometry, feature);\n\n      // The image is unknown at this stage so we pass null; it will be computed at render time.\n      // For clarity, we pass NaN for offsetX, offsetY, width and height, which will be computed at\n      // render time.\n      const pixelRatio = this.pixelRatio;\n      this.instructions.push([CanvasInstruction.DRAW_IMAGE, begin, end,\n        null, NaN, NaN, this.declutterGroups_, NaN, 1, 0, 0,\n        this.textRotateWithView_, this.textRotation_, 1, NaN,\n        textState.padding == defaultPadding ?\n          defaultPadding : textState.padding.map(function(p) {\n            return p * pixelRatio;\n          }),\n        !!textState.backgroundFill, !!textState.backgroundStroke,\n        this.text_, this.textKey_, this.strokeKey_, this.fillKey_,\n        this.textOffsetX_, this.textOffsetY_, geometryWidths\n      ]);\n      this.hitDetectionInstructions.push([CanvasInstruction.DRAW_IMAGE, begin, end,\n        null, NaN, NaN, this.declutterGroups_, NaN, 1, 0, 0,\n        this.textRotateWithView_, this.textRotation_, 1 / this.pixelRatio, NaN,\n        textState.padding,\n        !!textState.backgroundFill, !!textState.backgroundStroke,\n        this.text_, this.textKey_, this.strokeKey_, this.fillKey_,\n        this.textOffsetX_, this.textOffsetY_, geometryWidths\n      ]);\n\n      this.endGeometry(feature);\n    }\n  }\n\n  /**\n   * @private\n   */\n  saveTextStates_() {\n    const strokeState = this.textStrokeState_;\n    const textState = this.textState_;\n    const fillState = this.textFillState_;\n\n    const strokeKey = this.strokeKey_;\n    if (strokeState) {\n      if (!(strokeKey in this.strokeStates)) {\n        this.strokeStates[strokeKey] = {\n          strokeStyle: strokeState.strokeStyle,\n          lineCap: strokeState.lineCap,\n          lineDashOffset: strokeState.lineDashOffset,\n          lineWidth: strokeState.lineWidth,\n          lineJoin: strokeState.lineJoin,\n          miterLimit: strokeState.miterLimit,\n          lineDash: strokeState.lineDash\n        };\n      }\n    }\n    const textKey = this.textKey_;\n    if (!(textKey in this.textStates)) {\n      this.textStates[textKey] = {\n        font: textState.font,\n        textAlign: textState.textAlign || defaultTextAlign,\n        textBaseline: textState.textBaseline || defaultTextBaseline,\n        scale: textState.scale\n      };\n    }\n    const fillKey = this.fillKey_;\n    if (fillState) {\n      if (!(fillKey in this.fillStates)) {\n        this.fillStates[fillKey] = {\n          fillStyle: fillState.fillStyle\n        };\n      }\n    }\n  }\n\n  /**\n   * @private\n   * @param {number} begin Begin.\n   * @param {number} end End.\n   * @param {import(\"../canvas.js\").DeclutterGroup} declutterGroup Declutter group.\n   */\n  drawChars_(begin, end, declutterGroup) {\n    const strokeState = this.textStrokeState_;\n    const textState = this.textState_;\n\n    const strokeKey = this.strokeKey_;\n    const textKey = this.textKey_;\n    const fillKey = this.fillKey_;\n    this.saveTextStates_();\n\n\n    const pixelRatio = this.pixelRatio;\n    const baseline = TEXT_ALIGN[textState.textBaseline];\n\n    const offsetY = this.textOffsetY_ * pixelRatio;\n    const text = this.text_;\n    const textScale = textState.scale;\n    const strokeWidth = strokeState ? strokeState.lineWidth * textScale / 2 : 0;\n\n    this.instructions.push([CanvasInstruction.DRAW_CHARS,\n      begin, end, baseline, declutterGroup,\n      textState.overflow, fillKey, textState.maxAngle,\n      pixelRatio,\n      offsetY, strokeKey, strokeWidth * pixelRatio, text, textKey, 1\n    ]);\n    this.hitDetectionInstructions.push([CanvasInstruction.DRAW_CHARS,\n      begin, end, baseline, declutterGroup,\n      textState.overflow, fillKey, textState.maxAngle,\n      1,\n      offsetY, strokeKey, strokeWidth, text, textKey, 1 / pixelRatio\n    ]);\n  }\n\n  /**\n   * @inheritDoc\n   */\n  setTextStyle(textStyle, declutterGroups) {\n    let textState, fillState, strokeState;\n    if (!textStyle) {\n      this.text_ = '';\n    } else {\n      this.declutterGroups_ = /** @type {import(\"../canvas.js\").DeclutterGroups} */ (declutterGroups);\n\n      const textFillStyle = textStyle.getFill();\n      if (!textFillStyle) {\n        fillState = this.textFillState_ = null;\n      } else {\n        fillState = this.textFillState_;\n        if (!fillState) {\n          fillState = this.textFillState_ = /** @type {import(\"../canvas.js\").FillState} */ ({});\n        }\n        fillState.fillStyle = asColorLike(\n          textFillStyle.getColor() || defaultFillStyle);\n      }\n\n      const textStrokeStyle = textStyle.getStroke();\n      if (!textStrokeStyle) {\n        strokeState = this.textStrokeState_ = null;\n      } else {\n        strokeState = this.textStrokeState_;\n        if (!strokeState) {\n          strokeState = this.textStrokeState_ = /** @type {import(\"../canvas.js\").StrokeState} */ ({});\n        }\n        const lineDash = textStrokeStyle.getLineDash();\n        const lineDashOffset = textStrokeStyle.getLineDashOffset();\n        const lineWidth = textStrokeStyle.getWidth();\n        const miterLimit = textStrokeStyle.getMiterLimit();\n        strokeState.lineCap = textStrokeStyle.getLineCap() || defaultLineCap;\n        strokeState.lineDash = lineDash ? lineDash.slice() : defaultLineDash;\n        strokeState.lineDashOffset =\n            lineDashOffset === undefined ? defaultLineDashOffset : lineDashOffset;\n        strokeState.lineJoin = textStrokeStyle.getLineJoin() || defaultLineJoin;\n        strokeState.lineWidth =\n            lineWidth === undefined ? defaultLineWidth : lineWidth;\n        strokeState.miterLimit =\n            miterLimit === undefined ? defaultMiterLimit : miterLimit;\n        strokeState.strokeStyle = asColorLike(\n          textStrokeStyle.getColor() || defaultStrokeStyle);\n      }\n\n      textState = this.textState_;\n      const font = textStyle.getFont() || defaultFont;\n      checkFont(font);\n      const textScale = textStyle.getScale();\n      textState.overflow = textStyle.getOverflow();\n      textState.font = font;\n      textState.maxAngle = textStyle.getMaxAngle();\n      textState.placement = textStyle.getPlacement();\n      textState.textAlign = textStyle.getTextAlign();\n      textState.textBaseline = textStyle.getTextBaseline() || defaultTextBaseline;\n      textState.backgroundFill = textStyle.getBackgroundFill();\n      textState.backgroundStroke = textStyle.getBackgroundStroke();\n      textState.padding = textStyle.getPadding() || defaultPadding;\n      textState.scale = textScale === undefined ? 1 : textScale;\n\n      const textOffsetX = textStyle.getOffsetX();\n      const textOffsetY = textStyle.getOffsetY();\n      const textRotateWithView = textStyle.getRotateWithView();\n      const textRotation = textStyle.getRotation();\n      this.text_ = textStyle.getText() || '';\n      this.textOffsetX_ = textOffsetX === undefined ? 0 : textOffsetX;\n      this.textOffsetY_ = textOffsetY === undefined ? 0 : textOffsetY;\n      this.textRotateWithView_ = textRotateWithView === undefined ? false : textRotateWithView;\n      this.textRotation_ = textRotation === undefined ? 0 : textRotation;\n\n      this.strokeKey_ = strokeState ?\n        (typeof strokeState.strokeStyle == 'string' ? strokeState.strokeStyle : getUid(strokeState.strokeStyle)) +\n        strokeState.lineCap + strokeState.lineDashOffset + '|' + strokeState.lineWidth +\n        strokeState.lineJoin + strokeState.miterLimit + '[' + strokeState.lineDash.join() + ']' :\n        '';\n      this.textKey_ = textState.font + textState.scale + (textState.textAlign || '?');\n      this.fillKey_ = fillState ?\n        (typeof fillState.fillStyle == 'string' ? fillState.fillStyle : ('|' + getUid(fillState.fillStyle))) :\n        '';\n    }\n  }\n}\n\n\nexport default CanvasTextBuilder;\n","/**\n * @module ol/control/MousePosition\n */\nimport {listen} from '../events.js';\nimport EventType from '../pointer/EventType.js';\nimport {getChangeEventType} from '../Object.js';\nimport Control from './Control.js';\nimport {getTransformFromProjections, identityTransform, get as getProjection, getUserProjection} from '../proj.js';\nimport '@openlayers/pepjs';\n\n\n/**\n * @type {string}\n */\nconst PROJECTION = 'projection';\n\n/**\n * @type {string}\n */\nconst COORDINATE_FORMAT = 'coordinateFormat';\n\n\n/**\n * @typedef {Object} Options\n * @property {string} [className='ol-mouse-position'] CSS class name.\n * @property {import(\"../coordinate.js\").CoordinateFormat} [coordinateFormat] Coordinate format.\n * @property {import(\"../proj.js\").ProjectionLike} [projection] Projection. Default is the view projection.\n * @property {function(import(\"../MapEvent.js\").default)} [render] Function called when the\n * control should be re-rendered. This is called in a `requestAnimationFrame`\n * callback.\n * @property {HTMLElement|string} [target] Specify a target if you want the\n * control to be rendered outside of the map's viewport.\n * @property {string} [undefinedHTML='&#160;'] Markup to show when coordinates are not\n * available (e.g. when the pointer leaves the map viewport).  By default, the last position\n * will be replaced with `'&#160;'` (`&nbsp;`) when the pointer leaves the viewport.  To\n * retain the last rendered position, set this option to something falsey (like an empty\n * string `''`).\n */\n\n\n/**\n * @classdesc\n * A control to show the 2D coordinates of the mouse cursor. By default, these\n * are in the view projection, but can be in any supported projection.\n * By default the control is shown in the top right corner of the map, but this\n * can be changed by using the css selector `.ol-mouse-position`.\n *\n * On touch devices, which usually do not have a mouse cursor, the coordinates\n * of the currently touched position are shown.\n *\n * @api\n */\nclass MousePosition extends Control {\n\n  /**\n   * @param {Options=} opt_options Mouse position options.\n   */\n  constructor(opt_options) {\n\n    const options = opt_options ? opt_options : {};\n\n    const element = document.createElement('div');\n    element.className = options.className !== undefined ? options.className : 'ol-mouse-position';\n\n    super({\n      element: element,\n      render: options.render || render,\n      target: options.target\n    });\n\n    this.addEventListener(getChangeEventType(PROJECTION), this.handleProjectionChanged_);\n\n    if (options.coordinateFormat) {\n      this.setCoordinateFormat(options.coordinateFormat);\n    }\n    if (options.projection) {\n      this.setProjection(options.projection);\n    }\n\n    /**\n     * @private\n     * @type {string}\n     */\n    this.undefinedHTML_ = options.undefinedHTML !== undefined ? options.undefinedHTML : '&#160;';\n\n    /**\n     * @private\n     * @type {boolean}\n     */\n    this.renderOnMouseOut_ = !!this.undefinedHTML_;\n\n    /**\n     * @private\n     * @type {string}\n     */\n    this.renderedHTML_ = element.innerHTML;\n\n    /**\n     * @private\n     * @type {import(\"../proj/Projection.js\").default}\n     */\n    this.mapProjection_ = null;\n\n    /**\n     * @private\n     * @type {?import(\"../proj.js\").TransformFunction}\n     */\n    this.transform_ = null;\n\n  }\n\n  /**\n   * @private\n   */\n  handleProjectionChanged_() {\n    this.transform_ = null;\n  }\n\n  /**\n   * Return the coordinate format type used to render the current position or\n   * undefined.\n   * @return {import(\"../coordinate.js\").CoordinateFormat|undefined} The format to render the current\n   *     position in.\n   * @observable\n   * @api\n   */\n  getCoordinateFormat() {\n    return (\n      /** @type {import(\"../coordinate.js\").CoordinateFormat|undefined} */ (this.get(COORDINATE_FORMAT))\n    );\n  }\n\n  /**\n   * Return the projection that is used to report the mouse position.\n   * @return {import(\"../proj/Projection.js\").default|undefined} The projection to report mouse\n   *     position in.\n   * @observable\n   * @api\n   */\n  getProjection() {\n    return (\n      /** @type {import(\"../proj/Projection.js\").default|undefined} */ (this.get(PROJECTION))\n    );\n  }\n\n  /**\n   * @param {Event} event Browser event.\n   * @protected\n   */\n  handleMouseMove(event) {\n    const map = this.getMap();\n    this.updateHTML_(map.getEventPixel(event));\n  }\n\n  /**\n   * @param {Event} event Browser event.\n   * @protected\n   */\n  handleMouseOut(event) {\n    this.updateHTML_(null);\n  }\n\n  /**\n   * @inheritDoc\n   * @api\n   */\n  setMap(map) {\n    super.setMap(map);\n    if (map) {\n      const viewport = map.getViewport();\n      this.listenerKeys.push(\n        listen(viewport, EventType.POINTERMOVE, this.handleMouseMove, this)\n      );\n      if (this.renderOnMouseOut_) {\n        this.listenerKeys.push(\n          listen(viewport, EventType.POINTEROUT, this.handleMouseOut, this)\n        );\n      }\n    }\n  }\n\n  /**\n   * Set the coordinate format type used to render the current position.\n   * @param {import(\"../coordinate.js\").CoordinateFormat} format The format to render the current\n   *     position in.\n   * @observable\n   * @api\n   */\n  setCoordinateFormat(format) {\n    this.set(COORDINATE_FORMAT, format);\n  }\n\n  /**\n   * Set the projection that is used to report the mouse position.\n   * @param {import(\"../proj.js\").ProjectionLike} projection The projection to report mouse\n   *     position in.\n   * @observable\n   * @api\n   */\n  setProjection(projection) {\n    this.set(PROJECTION, getProjection(projection));\n  }\n\n  /**\n   * @param {?import(\"../pixel.js\").Pixel} pixel Pixel.\n   * @private\n   */\n  updateHTML_(pixel) {\n    let html = this.undefinedHTML_;\n    if (pixel && this.mapProjection_) {\n      if (!this.transform_) {\n        const projection = this.getProjection();\n        if (projection) {\n          this.transform_ = getTransformFromProjections(\n            this.mapProjection_, projection);\n        } else {\n          this.transform_ = identityTransform;\n        }\n      }\n      const map = this.getMap();\n      const coordinate = map.getCoordinateFromPixelInternal(pixel);\n      if (coordinate) {\n        const userProjection = getUserProjection();\n        if (userProjection) {\n          this.transform_ = getTransformFromProjections(\n            this.mapProjection_, userProjection);\n        }\n        this.transform_(coordinate, coordinate);\n        const coordinateFormat = this.getCoordinateFormat();\n        if (coordinateFormat) {\n          html = coordinateFormat(coordinate);\n        } else {\n          html = coordinate.toString();\n        }\n      }\n    }\n    if (!this.renderedHTML_ || html !== this.renderedHTML_) {\n      this.element.innerHTML = html;\n      this.renderedHTML_ = html;\n    }\n  }\n}\n\n\n/**\n * Update the projection. Rendering of the coordinates is done in\n * `handleMouseMove` and `handleMouseUp`.\n * @param {import(\"../MapEvent.js\").default} mapEvent Map event.\n * @this {MousePosition}\n * @api\n */\nexport function render(mapEvent) {\n  const frameState = mapEvent.frameState;\n  if (!frameState) {\n    this.mapProjection_ = null;\n  } else {\n    if (this.mapProjection_ != frameState.viewState.projection) {\n      this.mapProjection_ = frameState.viewState.projection;\n      this.transform_ = null;\n    }\n  }\n}\n\n\nexport default MousePosition;\n","/**\n * @module ol/geom/flat/area\n */\n\n\n/**\n * @param {Array<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {number} end End.\n * @param {number} stride Stride.\n * @return {number} Area.\n */\nexport function linearRing(flatCoordinates, offset, end, stride) {\n  let twiceArea = 0;\n  let x1 = flatCoordinates[end - stride];\n  let y1 = flatCoordinates[end - stride + 1];\n  for (; offset < end; offset += stride) {\n    const x2 = flatCoordinates[offset];\n    const y2 = flatCoordinates[offset + 1];\n    twiceArea += y1 * x2 - x1 * y2;\n    x1 = x2;\n    y1 = y2;\n  }\n  return twiceArea / 2;\n}\n\n\n/**\n * @param {Array<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {Array<number>} ends Ends.\n * @param {number} stride Stride.\n * @return {number} Area.\n */\nexport function linearRings(flatCoordinates, offset, ends, stride) {\n  let area = 0;\n  for (let i = 0, ii = ends.length; i < ii; ++i) {\n    const end = ends[i];\n    area += linearRing(flatCoordinates, offset, end, stride);\n    offset = end;\n  }\n  return area;\n}\n\n\n/**\n * @param {Array<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {Array<Array<number>>} endss Endss.\n * @param {number} stride Stride.\n * @return {number} Area.\n */\nexport function linearRingss(flatCoordinates, offset, endss, stride) {\n  let area = 0;\n  for (let i = 0, ii = endss.length; i < ii; ++i) {\n    const ends = endss[i];\n    area += linearRings(flatCoordinates, offset, ends, stride);\n    offset = ends[ends.length - 1];\n  }\n  return area;\n}\n","/**\n * @module ol/renderer/canvas/Layer\n */\nimport {getBottomLeft, getBottomRight, getTopLeft, getTopRight} from '../../extent.js';\nimport {createCanvasContext2D} from '../../dom.js';\nimport RenderEvent from '../../render/Event.js';\nimport RenderEventType from '../../render/EventType.js';\nimport {rotateAtOffset} from '../../render/canvas.js';\nimport LayerRenderer from '../Layer.js';\nimport {create as createTransform, apply as applyTransform, compose as composeTransform, toString as transformToString} from '../../transform.js';\n\n/**\n * @abstract\n * @template {import(\"../../layer/Layer.js\").default} LayerType\n */\nclass CanvasLayerRenderer extends LayerRenderer {\n\n  /**\n   * @param {LayerType} layer Layer.\n   */\n  constructor(layer) {\n\n    super(layer);\n\n    /**\n     * @protected\n     * @type {HTMLElement}\n     */\n    this.container = null;\n\n    /**\n     * @protected\n     * @type {number}\n     */\n    this.renderedResolution;\n\n    /**\n     * A temporary transform.  The values in this transform should only be used in a\n     * function that sets the values.\n     * @private\n     * @type {import(\"../../transform.js\").Transform}\n     */\n    this.tempTransform_ = createTransform();\n\n    /**\n     * The transform for rendered pixels to viewport CSS pixels.  This transform must\n     * be set when rendering a frame and may be used by other functions after rendering.\n     * @protected\n     * @type {import(\"../../transform.js\").Transform}\n     */\n    this.pixelTransform = createTransform();\n\n    /**\n     * The transform for viewport CSS pixels to rendered pixels.  This transform must\n     * be set when rendering a frame and may be used by other functions after rendering.\n     * @protected\n     * @type {import(\"../../transform.js\").Transform}\n     */\n    this.inversePixelTransform = createTransform();\n\n    /**\n     * @protected\n     * @type {CanvasRenderingContext2D}\n     */\n    this.context = null;\n\n    /**\n     * @type {boolean}\n     */\n    this.containerReused = false;\n\n  }\n\n  /**\n   * Get a rendering container from an existing target, if compatible.\n   * @param {HTMLElement} target Potential render target.\n   * @param {import(\"../../transform\").Transform} transform Transform.\n   * @param {number} opacity Opacity.\n   */\n  useContainer(target, transform, opacity) {\n    const layerClassName = this.getLayer().getClassName();\n    let container, context;\n    if (target && target.style.opacity === '' && target.className === layerClassName) {\n      const canvas = target.firstElementChild;\n      if (canvas instanceof HTMLCanvasElement) {\n        context = canvas.getContext('2d');\n      }\n    }\n    if (context && context.canvas.style.transform === transformToString(transform)) {\n      // Container of the previous layer renderer can be used.\n      this.container = target;\n      this.context = context;\n      this.containerReused = true;\n    } else if (this.containerReused) {\n      // Previously reused container cannot be used any more.\n      this.container = null;\n      this.context = null;\n      this.containerReused = false;\n    }\n    if (!this.container) {\n      container = document.createElement('div');\n      container.className = layerClassName;\n      let style = container.style;\n      style.position = 'absolute';\n      style.width = '100%';\n      style.height = '100%';\n      context = createCanvasContext2D();\n      const canvas = context.canvas;\n      container.appendChild(canvas);\n      style = canvas.style;\n      style.position = 'absolute';\n      style.transformOrigin = 'top left';\n      this.container = container;\n      this.context = context;\n    }\n  }\n\n  /**\n   * @param {CanvasRenderingContext2D} context Context.\n   * @param {import(\"../../PluggableMap.js\").FrameState} frameState Frame state.\n   * @param {import(\"../../extent.js\").Extent} extent Clip extent.\n   * @protected\n   */\n  clip(context, frameState, extent) {\n    const pixelRatio = frameState.pixelRatio;\n    const halfWidth = (frameState.size[0] * pixelRatio) / 2;\n    const halfHeight = (frameState.size[1] * pixelRatio) / 2;\n    const rotation = frameState.viewState.rotation;\n    const topLeft = getTopLeft(extent);\n    const topRight = getTopRight(extent);\n    const bottomRight = getBottomRight(extent);\n    const bottomLeft = getBottomLeft(extent);\n\n    applyTransform(frameState.coordinateToPixelTransform, topLeft);\n    applyTransform(frameState.coordinateToPixelTransform, topRight);\n    applyTransform(frameState.coordinateToPixelTransform, bottomRight);\n    applyTransform(frameState.coordinateToPixelTransform, bottomLeft);\n\n    context.save();\n    rotateAtOffset(context, -rotation, halfWidth, halfHeight);\n    context.beginPath();\n    context.moveTo(topLeft[0] * pixelRatio, topLeft[1] * pixelRatio);\n    context.lineTo(topRight[0] * pixelRatio, topRight[1] * pixelRatio);\n    context.lineTo(bottomRight[0] * pixelRatio, bottomRight[1] * pixelRatio);\n    context.lineTo(bottomLeft[0] * pixelRatio, bottomLeft[1] * pixelRatio);\n    context.clip();\n    rotateAtOffset(context, rotation, halfWidth, halfHeight);\n  }\n\n  /**\n   * @param {CanvasRenderingContext2D} context Context.\n   * @param {import(\"../../PluggableMap.js\").FrameState} frameState Frame state.\n   * @param {import(\"../../extent.js\").Extent} extent Clip extent.\n   * @protected\n   */\n  clipUnrotated(context, frameState, extent) {\n    const topLeft = getTopLeft(extent);\n    const topRight = getTopRight(extent);\n    const bottomRight = getBottomRight(extent);\n    const bottomLeft = getBottomLeft(extent);\n\n    applyTransform(frameState.coordinateToPixelTransform, topLeft);\n    applyTransform(frameState.coordinateToPixelTransform, topRight);\n    applyTransform(frameState.coordinateToPixelTransform, bottomRight);\n    applyTransform(frameState.coordinateToPixelTransform, bottomLeft);\n\n    const inverted = this.inversePixelTransform;\n    applyTransform(inverted, topLeft);\n    applyTransform(inverted, topRight);\n    applyTransform(inverted, bottomRight);\n    applyTransform(inverted, bottomLeft);\n\n    context.save();\n    context.beginPath();\n    context.moveTo(Math.round(topLeft[0]), Math.round(topLeft[1]));\n    context.lineTo(Math.round(topRight[0]), Math.round(topRight[1]));\n    context.lineTo(Math.round(bottomRight[0]), Math.round(bottomRight[1]));\n    context.lineTo(Math.round(bottomLeft[0]), Math.round(bottomLeft[1]));\n    context.clip();\n  }\n\n  /**\n   * @param {import(\"../../render/EventType.js\").default} type Event type.\n   * @param {CanvasRenderingContext2D} context Context.\n   * @param {import(\"../../PluggableMap.js\").FrameState} frameState Frame state.\n   * @private\n   */\n  dispatchRenderEvent_(type, context, frameState) {\n    const layer = this.getLayer();\n    if (layer.hasListener(type)) {\n      const event = new RenderEvent(type, this.inversePixelTransform, frameState, context);\n      layer.dispatchEvent(event);\n    }\n  }\n\n  /**\n   * @param {CanvasRenderingContext2D} context Context.\n   * @param {import(\"../../PluggableMap.js\").FrameState} frameState Frame state.\n   * @protected\n   */\n  preRender(context, frameState) {\n    this.dispatchRenderEvent_(RenderEventType.PRERENDER, context, frameState);\n  }\n\n  /**\n   * @param {CanvasRenderingContext2D} context Context.\n   * @param {import(\"../../PluggableMap.js\").FrameState} frameState Frame state.\n   * @protected\n   */\n  postRender(context, frameState) {\n    this.dispatchRenderEvent_(RenderEventType.POSTRENDER, context, frameState);\n  }\n\n  /**\n   * Creates a transform for rendering to an element that will be rotated after rendering.\n   * @param {import(\"../../PluggableMap.js\").FrameState} frameState Frame state.\n   * @param {number} width Width of the rendered element (in pixels).\n   * @param {number} height Height of the rendered element (in pixels).\n   * @param {number} offsetX Offset on the x-axis in view coordinates.\n   * @protected\n   * @return {!import(\"../../transform.js\").Transform} Transform.\n   */\n  getRenderTransform(frameState, width, height, offsetX) {\n    const viewState = frameState.viewState;\n    const pixelRatio = frameState.pixelRatio;\n    const dx1 = width / 2;\n    const dy1 = height / 2;\n    const sx = pixelRatio / viewState.resolution;\n    const sy = -sx;\n    const dx2 = -viewState.center[0] + offsetX;\n    const dy2 = -viewState.center[1];\n    return composeTransform(this.tempTransform_, dx1, dy1, sx, sy, -viewState.rotation, dx2, dy2);\n  }\n\n  /**\n   * @param {import(\"../../pixel.js\").Pixel} pixel Pixel.\n   * @param {import(\"../../PluggableMap.js\").FrameState} frameState FrameState.\n   * @param {number} hitTolerance Hit tolerance in pixels.\n   * @return {Uint8ClampedArray|Uint8Array} The result.  If there is no data at the pixel\n   *    location, null will be returned.  If there is data, but pixel values cannot be\n   *    returned, and empty array will be returned.\n   */\n  getDataAtPixel(pixel, frameState, hitTolerance) {\n    const renderPixel = applyTransform(this.inversePixelTransform, pixel.slice());\n    const context = this.context;\n\n    let data;\n    try {\n      data = context.getImageData(Math.round(renderPixel[0]), Math.round(renderPixel[1]), 1, 1).data;\n    } catch (err) {\n      if (err.name === 'SecurityError') {\n        // tainted canvas, we assume there is data at the given pixel (although there might not be)\n        return new Uint8Array();\n      }\n      return data;\n    }\n\n    if (data[3] === 0) {\n      return null;\n    }\n    return data;\n  }\n\n}\n\nexport default CanvasLayerRenderer;\n","/**\n * @module ol/ImageBase\n */\nimport {abstract} from './util.js';\nimport EventTarget from './events/Target.js';\nimport EventType from './events/EventType.js';\n\n/**\n * @abstract\n */\nclass ImageBase extends EventTarget {\n\n  /**\n   * @param {import(\"./extent.js\").Extent} extent Extent.\n   * @param {number|undefined} resolution Resolution.\n   * @param {number} pixelRatio Pixel ratio.\n   * @param {import(\"./ImageState.js\").default} state State.\n   */\n  constructor(extent, resolution, pixelRatio, state) {\n\n    super();\n\n    /**\n     * @protected\n     * @type {import(\"./extent.js\").Extent}\n     */\n    this.extent = extent;\n\n    /**\n     * @private\n     * @type {number}\n     */\n    this.pixelRatio_ = pixelRatio;\n\n    /**\n     * @protected\n     * @type {number|undefined}\n     */\n    this.resolution = resolution;\n\n    /**\n     * @protected\n     * @type {import(\"./ImageState.js\").default}\n     */\n    this.state = state;\n\n  }\n\n  /**\n   * @protected\n   */\n  changed() {\n    this.dispatchEvent(EventType.CHANGE);\n  }\n\n  /**\n   * @return {import(\"./extent.js\").Extent} Extent.\n   */\n  getExtent() {\n    return this.extent;\n  }\n\n  /**\n   * @abstract\n   * @return {HTMLCanvasElement|HTMLImageElement|HTMLVideoElement} Image.\n   */\n  getImage() {\n    return abstract();\n  }\n\n  /**\n   * @return {number} PixelRatio.\n   */\n  getPixelRatio() {\n    return this.pixelRatio_;\n  }\n\n  /**\n   * @return {number} Resolution.\n   */\n  getResolution() {\n    return /** @type {number} */ (this.resolution);\n  }\n\n  /**\n   * @return {import(\"./ImageState.js\").default} State.\n   */\n  getState() {\n    return this.state;\n  }\n\n  /**\n   * Load not yet loaded URI.\n   * @abstract\n   */\n  load() {\n    abstract();\n  }\n}\n\n\nexport default ImageBase;\n","/**\n * @module ol/format/JSONFeature\n */\nimport {abstract} from '../util.js';\nimport FeatureFormat from './Feature.js';\nimport FormatType from './FormatType.js';\n\n/**\n * @classdesc\n * Abstract base class; normally only used for creating subclasses and not\n * instantiated in apps.\n * Base class for JSON feature formats.\n *\n * @abstract\n */\nclass JSONFeature extends FeatureFormat {\n  constructor() {\n    super();\n  }\n\n  /**\n   * @inheritDoc\n   */\n  getType() {\n    return FormatType.JSON;\n  }\n\n  /**\n   * Read a feature.  Only works for a single feature. Use `readFeatures` to\n   * read a feature collection.\n   *\n   * @param {ArrayBuffer|Document|Node|Object|string} source Source.\n   * @param {import(\"./Feature.js\").ReadOptions=} opt_options Read options.\n   * @return {import(\"../Feature.js\").default} Feature.\n   * @api\n   */\n  readFeature(source, opt_options) {\n    return this.readFeatureFromObject(\n      getObject(source), this.getReadOptions(source, opt_options));\n  }\n\n  /**\n   * Read all features.  Works with both a single feature and a feature\n   * collection.\n   *\n   * @param {ArrayBuffer|Document|Node|Object|string} source Source.\n   * @param {import(\"./Feature.js\").ReadOptions=} opt_options Read options.\n   * @return {Array<import(\"../Feature.js\").default>} Features.\n   * @api\n   */\n  readFeatures(source, opt_options) {\n    return this.readFeaturesFromObject(\n      getObject(source), this.getReadOptions(source, opt_options));\n  }\n\n  /**\n   * @abstract\n   * @param {Object} object Object.\n   * @param {import(\"./Feature.js\").ReadOptions=} opt_options Read options.\n   * @protected\n   * @return {import(\"../Feature.js\").default} Feature.\n   */\n  readFeatureFromObject(object, opt_options) {\n    return abstract();\n  }\n\n  /**\n   * @abstract\n   * @param {Object} object Object.\n   * @param {import(\"./Feature.js\").ReadOptions=} opt_options Read options.\n   * @protected\n   * @return {Array<import(\"../Feature.js\").default>} Features.\n   */\n  readFeaturesFromObject(object, opt_options) {\n    return abstract();\n  }\n\n  /**\n   * Read a geometry.\n   *\n   * @param {ArrayBuffer|Document|Node|Object|string} source Source.\n   * @param {import(\"./Feature.js\").ReadOptions=} opt_options Read options.\n   * @return {import(\"../geom/Geometry.js\").default} Geometry.\n   * @api\n   */\n  readGeometry(source, opt_options) {\n    return this.readGeometryFromObject(\n      getObject(source), this.getReadOptions(source, opt_options));\n  }\n\n  /**\n   * @abstract\n   * @param {Object} object Object.\n   * @param {import(\"./Feature.js\").ReadOptions=} opt_options Read options.\n   * @protected\n   * @return {import(\"../geom/Geometry.js\").default} Geometry.\n   */\n  readGeometryFromObject(object, opt_options) {\n    return abstract();\n  }\n\n  /**\n   * Read the projection.\n   *\n   * @param {ArrayBuffer|Document|Node|Object|string} source Source.\n   * @return {import(\"../proj/Projection.js\").default} Projection.\n   * @api\n   */\n  readProjection(source) {\n    return this.readProjectionFromObject(getObject(source));\n  }\n\n  /**\n   * @abstract\n   * @param {Object} object Object.\n   * @protected\n   * @return {import(\"../proj/Projection.js\").default} Projection.\n   */\n  readProjectionFromObject(object) {\n    return abstract();\n  }\n\n  /**\n   * Encode a feature as string.\n   *\n   * @param {import(\"../Feature.js\").default} feature Feature.\n   * @param {import(\"./Feature.js\").WriteOptions=} opt_options Write options.\n   * @return {string} Encoded feature.\n   * @api\n   */\n  writeFeature(feature, opt_options) {\n    return JSON.stringify(this.writeFeatureObject(feature, opt_options));\n  }\n\n  /**\n   * @abstract\n   * @param {import(\"../Feature.js\").default} feature Feature.\n   * @param {import(\"./Feature.js\").WriteOptions=} opt_options Write options.\n   * @return {Object} Object.\n   */\n  writeFeatureObject(feature, opt_options) {\n    return abstract();\n  }\n\n  /**\n   * Encode an array of features as string.\n   *\n   * @param {Array<import(\"../Feature.js\").default>} features Features.\n   * @param {import(\"./Feature.js\").WriteOptions=} opt_options Write options.\n   * @return {string} Encoded features.\n   * @api\n   */\n  writeFeatures(features, opt_options) {\n    return JSON.stringify(this.writeFeaturesObject(features, opt_options));\n  }\n\n  /**\n   * @abstract\n   * @param {Array<import(\"../Feature.js\").default>} features Features.\n   * @param {import(\"./Feature.js\").WriteOptions=} opt_options Write options.\n   * @return {Object} Object.\n   */\n  writeFeaturesObject(features, opt_options) {\n    return abstract();\n  }\n\n  /**\n   * Encode a geometry as string.\n   *\n   * @param {import(\"../geom/Geometry.js\").default} geometry Geometry.\n   * @param {import(\"./Feature.js\").WriteOptions=} opt_options Write options.\n   * @return {string} Encoded geometry.\n   * @api\n   */\n  writeGeometry(geometry, opt_options) {\n    return JSON.stringify(this.writeGeometryObject(geometry, opt_options));\n  }\n\n  /**\n   * @abstract\n   * @param {import(\"../geom/Geometry.js\").default} geometry Geometry.\n   * @param {import(\"./Feature.js\").WriteOptions=} opt_options Write options.\n   * @return {Object} Object.\n   */\n  writeGeometryObject(geometry, opt_options) {\n    return abstract();\n  }\n}\n\n\n/**\n * @param {Document|Node|Object|string} source Source.\n * @return {Object} Object.\n */\nfunction getObject(source) {\n  if (typeof source === 'string') {\n    const object = JSON.parse(source);\n    return object ? /** @type {Object} */ (object) : null;\n  } else if (source !== null) {\n    return source;\n  } else {\n    return null;\n  }\n}\n\n\nexport default JSONFeature;\n","/**\n * @module ol/layer/BaseVector\n */\nimport Layer from './Layer.js';\nimport {assign} from '../obj.js';\nimport {createDefaultStyle, toFunction as toStyleFunction} from '../style/Style.js';\n\n\n/**\n * @typedef {Object} Options\n * @property {string} [className='ol-layer'] A CSS class name to set to the layer element.\n * @property {number} [opacity=1] Opacity (0, 1).\n * @property {boolean} [visible=true] Visibility.\n * @property {import(\"../extent.js\").Extent} [extent] The bounding extent for layer rendering.  The layer will not be\n * rendered outside of this extent.\n * @property {number} [zIndex] The z-index for layer rendering.  At rendering time, the layers\n * will be ordered, first by Z-index and then by position. When `undefined`, a `zIndex` of 0 is assumed\n * for layers that are added to the map's `layers` collection, or `Infinity` when the layer's `setMap()`\n * method was used.\n * @property {number} [minResolution] The minimum resolution (inclusive) at which this layer will be\n * visible.\n * @property {number} [maxResolution] The maximum resolution (exclusive) below which this layer will\n * be visible.\n * @property {import(\"../render.js\").OrderFunction} [renderOrder] Render order. Function to be used when sorting\n * features before rendering. By default features are drawn in the order that they are created. Use\n * `null` to avoid the sort, but get an undefined draw order.\n * @property {number} [renderBuffer=100] The buffer in pixels around the viewport extent used by the\n * renderer when getting features from the vector source for the rendering or hit-detection.\n * Recommended value: the size of the largest symbol, line width or label.\n * @property {import(\"../source/Vector.js\").default} [source] Source.\n * @property {import(\"../PluggableMap.js\").default} [map] Sets the layer as overlay on a map. The map will not manage\n * this layer in its layers collection, and the layer will be rendered on top. This is useful for\n * temporary layers. The standard way to add a layer to a map and have it managed by the map is to\n * use {@link module:ol/Map#addLayer}.\n * @property {boolean} [declutter=false] Declutter images and text. Decluttering is applied to all\n * image and text styles of all Vector and VectorTile layers that have set this to `true`. The priority\n * is defined by the z-index of the layer, the `zIndex` of the style and the render order of features.\n * Higher z-index means higher priority. Within the same z-index, a feature rendered before another has\n * higher priority.\n * @property {import(\"../style/Style.js\").StyleLike} [style] Layer style. See\n * {@link module:ol/style} for default style which will be used if this is not defined.\n * @property {boolean} [updateWhileAnimating=false] When set to `true`, feature batches will\n * be recreated during animations. This means that no vectors will be shown clipped, but the\n * setting will have a performance impact for large amounts of vector data. When set to `false`,\n * batches will be recreated when no animation is active.\n * @property {boolean} [updateWhileInteracting=false] When set to `true`, feature batches will\n * be recreated during interactions. See also `updateWhileAnimating`.\n */\n\n\n/**\n * @enum {string}\n * @private\n */\nconst Property = {\n  RENDER_ORDER: 'renderOrder'\n};\n\n\n/**\n * @classdesc\n * Vector data that is rendered client-side.\n * Note that any property set in the options is set as a {@link module:ol/Object~BaseObject}\n * property on the layer object; for example, setting `title: 'My Title'` in the\n * options means that `title` is observable, and has get/set accessors.\n *\n * @template {import(\"../source/Vector.js\").default|import(\"../source/VectorTile.js\").default} VectorSourceType\n * @extends {Layer<VectorSourceType>}\n * @api\n */\nclass BaseVectorLayer extends Layer {\n  /**\n   * @param {Options=} opt_options Options.\n   */\n  constructor(opt_options) {\n    const options = opt_options ? opt_options : {};\n\n    const baseOptions = assign({}, options);\n\n    delete baseOptions.style;\n    delete baseOptions.renderBuffer;\n    delete baseOptions.updateWhileAnimating;\n    delete baseOptions.updateWhileInteracting;\n    super(baseOptions);\n\n    /**\n     * @private\n     * @type {boolean}\n     */\n    this.declutter_ = options.declutter !== undefined ? options.declutter : false;\n\n    /**\n     * @type {number}\n     * @private\n     */\n    this.renderBuffer_ = options.renderBuffer !== undefined ?\n      options.renderBuffer : 100;\n\n    /**\n     * User provided style.\n     * @type {import(\"../style/Style.js\").StyleLike}\n     * @private\n     */\n    this.style_ = null;\n\n    /**\n     * Style function for use within the library.\n     * @type {import(\"../style/Style.js\").StyleFunction|undefined}\n     * @private\n     */\n    this.styleFunction_ = undefined;\n\n    this.setStyle(options.style);\n\n    /**\n     * @type {boolean}\n     * @private\n     */\n    this.updateWhileAnimating_ = options.updateWhileAnimating !== undefined ?\n      options.updateWhileAnimating : false;\n\n    /**\n     * @type {boolean}\n     * @private\n     */\n    this.updateWhileInteracting_ = options.updateWhileInteracting !== undefined ?\n      options.updateWhileInteracting : false;\n\n  }\n\n  /**\n   * @return {boolean} Declutter.\n   */\n  getDeclutter() {\n    return this.declutter_;\n  }\n\n  /**\n   * @return {number|undefined} Render buffer.\n   */\n  getRenderBuffer() {\n    return this.renderBuffer_;\n  }\n\n  /**\n   * @return {function(import(\"../Feature.js\").default, import(\"../Feature.js\").default): number|null|undefined} Render\n   *     order.\n   */\n  getRenderOrder() {\n    return (\n    /** @type {import(\"../render.js\").OrderFunction|null|undefined} */ (this.get(Property.RENDER_ORDER))\n    );\n  }\n\n  /**\n   * Get the style for features.  This returns whatever was passed to the `style`\n   * option at construction or to the `setStyle` method.\n   * @return {import(\"../style/Style.js\").StyleLike}\n   *     Layer style.\n   * @api\n   */\n  getStyle() {\n    return this.style_;\n  }\n\n  /**\n   * Get the style function.\n   * @return {import(\"../style/Style.js\").StyleFunction|undefined} Layer style function.\n   * @api\n   */\n  getStyleFunction() {\n    return this.styleFunction_;\n  }\n\n  /**\n   * @return {boolean} Whether the rendered layer should be updated while\n   *     animating.\n   */\n  getUpdateWhileAnimating() {\n    return this.updateWhileAnimating_;\n  }\n\n  /**\n   * @return {boolean} Whether the rendered layer should be updated while\n   *     interacting.\n   */\n  getUpdateWhileInteracting() {\n    return this.updateWhileInteracting_;\n  }\n\n  /**\n   * @param {import(\"../render.js\").OrderFunction|null|undefined} renderOrder\n   *     Render order.\n   */\n  setRenderOrder(renderOrder) {\n    this.set(Property.RENDER_ORDER, renderOrder);\n  }\n\n  /**\n   * Set the style for features.  This can be a single style object, an array\n   * of styles, or a function that takes a feature and resolution and returns\n   * an array of styles. If it is `undefined` the default style is used. If\n   * it is `null` the layer has no style (a `null` style), so only features\n   * that have their own styles will be rendered in the layer. See\n   * {@link module:ol/style} for information on the default style.\n   * @param {import(\"../style/Style.js\").default|Array<import(\"../style/Style.js\").default>|import(\"../style/Style.js\").StyleFunction|null|undefined} style Layer style.\n   * @api\n   */\n  setStyle(style) {\n    this.style_ = style !== undefined ? style : createDefaultStyle;\n    this.styleFunction_ = style === null ?\n      undefined : toStyleFunction(this.style_);\n    this.changed();\n  }\n\n}\n\n\nexport default BaseVectorLayer;\n","/**\n * @module ol/format/TextFeature\n */\nimport {abstract} from '../util.js';\nimport FeatureFormat from '../format/Feature.js';\nimport FormatType from '../format/FormatType.js';\n\n/**\n * @classdesc\n * Abstract base class; normally only used for creating subclasses and not\n * instantiated in apps.\n * Base class for text feature formats.\n *\n * @abstract\n */\nclass TextFeature extends FeatureFormat {\n  constructor() {\n    super();\n  }\n\n  /**\n   * @inheritDoc\n   */\n  getType() {\n    return FormatType.TEXT;\n  }\n\n  /**\n   * Read the feature from the source.\n   *\n   * @param {Document|Node|Object|string} source Source.\n   * @param {import(\"./Feature.js\").ReadOptions=} opt_options Read options.\n   * @return {import(\"../Feature.js\").default} Feature.\n   * @api\n   */\n  readFeature(source, opt_options) {\n    return this.readFeatureFromText(getText(source), this.adaptOptions(opt_options));\n  }\n\n  /**\n   * @abstract\n   * @param {string} text Text.\n   * @param {import(\"./Feature.js\").ReadOptions=} opt_options Read options.\n   * @protected\n   * @return {import(\"../Feature.js\").default} Feature.\n   */\n  readFeatureFromText(text, opt_options) {\n    return abstract();\n  }\n\n  /**\n   * Read the features from the source.\n   *\n   * @param {Document|Node|Object|string} source Source.\n   * @param {import(\"./Feature.js\").ReadOptions=} opt_options Read options.\n   * @return {Array<import(\"../Feature.js\").default>} Features.\n   * @api\n   */\n  readFeatures(source, opt_options) {\n    return this.readFeaturesFromText(getText(source), this.adaptOptions(opt_options));\n  }\n\n  /**\n   * @abstract\n   * @param {string} text Text.\n   * @param {import(\"./Feature.js\").ReadOptions=} opt_options Read options.\n   * @protected\n   * @return {Array<import(\"../Feature.js\").default>} Features.\n   */\n  readFeaturesFromText(text, opt_options) {\n    return abstract();\n  }\n\n  /**\n   * Read the geometry from the source.\n   *\n   * @param {Document|Node|Object|string} source Source.\n   * @param {import(\"./Feature.js\").ReadOptions=} opt_options Read options.\n   * @return {import(\"../geom/Geometry.js\").default} Geometry.\n   * @api\n   */\n  readGeometry(source, opt_options) {\n    return this.readGeometryFromText(getText(source), this.adaptOptions(opt_options));\n  }\n\n  /**\n   * @abstract\n   * @param {string} text Text.\n   * @param {import(\"./Feature.js\").ReadOptions=} opt_options Read options.\n   * @protected\n   * @return {import(\"../geom/Geometry.js\").default} Geometry.\n   */\n  readGeometryFromText(text, opt_options) {\n    return abstract();\n  }\n\n  /**\n   * Read the projection from the source.\n   *\n   * @param {Document|Node|Object|string} source Source.\n   * @return {import(\"../proj/Projection.js\").default} Projection.\n   * @api\n   */\n  readProjection(source) {\n    return this.readProjectionFromText(getText(source));\n  }\n\n  /**\n   * @param {string} text Text.\n   * @protected\n   * @return {import(\"../proj/Projection.js\").default} Projection.\n   */\n  readProjectionFromText(text) {\n    return this.dataProjection;\n  }\n\n  /**\n   * Encode a feature as a string.\n   *\n   * @param {import(\"../Feature.js\").default} feature Feature.\n   * @param {import(\"./Feature.js\").WriteOptions=} opt_options Write options.\n   * @return {string} Encoded feature.\n   * @api\n   */\n  writeFeature(feature, opt_options) {\n    return this.writeFeatureText(feature, this.adaptOptions(opt_options));\n  }\n\n  /**\n   * @abstract\n   * @param {import(\"../Feature.js\").default} feature Features.\n   * @param {import(\"./Feature.js\").WriteOptions=} opt_options Write options.\n   * @protected\n   * @return {string} Text.\n   */\n  writeFeatureText(feature, opt_options) {\n    return abstract();\n  }\n\n  /**\n   * Encode an array of features as string.\n   *\n   * @param {Array<import(\"../Feature.js\").default>} features Features.\n   * @param {import(\"./Feature.js\").WriteOptions=} opt_options Write options.\n   * @return {string} Encoded features.\n   * @api\n   */\n  writeFeatures(features, opt_options) {\n    return this.writeFeaturesText(features, this.adaptOptions(opt_options));\n  }\n\n  /**\n   * @abstract\n   * @param {Array<import(\"../Feature.js\").default>} features Features.\n   * @param {import(\"./Feature.js\").WriteOptions=} opt_options Write options.\n   * @protected\n   * @return {string} Text.\n   */\n  writeFeaturesText(features, opt_options) {\n    return abstract();\n  }\n\n  /**\n   * Write a single geometry.\n   *\n   * @param {import(\"../geom/Geometry.js\").default} geometry Geometry.\n   * @param {import(\"./Feature.js\").WriteOptions=} opt_options Write options.\n   * @return {string} Geometry.\n   * @api\n   */\n  writeGeometry(geometry, opt_options) {\n    return this.writeGeometryText(geometry, this.adaptOptions(opt_options));\n  }\n\n  /**\n   * @abstract\n   * @param {import(\"../geom/Geometry.js\").default} geometry Geometry.\n   * @param {import(\"./Feature.js\").WriteOptions=} opt_options Write options.\n   * @protected\n   * @return {string} Text.\n   */\n  writeGeometryText(geometry, opt_options) {\n    return abstract();\n  }\n}\n\n\n/**\n * @param {Document|Node|Object|string} source Source.\n * @return {string} Text.\n */\nfunction getText(source) {\n  if (typeof source === 'string') {\n    return source;\n  } else {\n    return '';\n  }\n}\n\n\nexport default TextFeature;\n","/**\n * @module ol/Geolocation\n */\nimport BaseObject, {getChangeEventType} from './Object.js';\nimport BaseEvent from './events/Event.js';\nimport EventType from './events/EventType.js';\nimport {circular as circularPolygon} from './geom/Polygon.js';\nimport {toRadians} from './math.js';\nimport {get as getProjection, getTransformFromProjections, identityTransform} from './proj.js';\n\n\n/**\n * @enum {string}\n */\nconst Property = {\n  ACCURACY: 'accuracy',\n  ACCURACY_GEOMETRY: 'accuracyGeometry',\n  ALTITUDE: 'altitude',\n  ALTITUDE_ACCURACY: 'altitudeAccuracy',\n  HEADING: 'heading',\n  POSITION: 'position',\n  PROJECTION: 'projection',\n  SPEED: 'speed',\n  TRACKING: 'tracking',\n  TRACKING_OPTIONS: 'trackingOptions'\n};\n\n\n/**\n * @classdesc\n * Events emitted on Geolocation error.\n */\nclass GeolocationError extends BaseEvent {\n  /**\n   * @param {PositionError} error error object.\n   */\n  constructor(error) {\n    super(EventType.ERROR);\n\n    /**\n     * @type {number}\n     */\n    this.code = error.code;\n\n    /**\n     * @type {string}\n     */\n    this.message = error.message;\n  }\n}\n\n\n/**\n * @typedef {Object} Options\n * @property {boolean} [tracking=false] Start Tracking right after\n * instantiation.\n * @property {PositionOptions} [trackingOptions] Tracking options.\n * See http://www.w3.org/TR/geolocation-API/#position_options_interface.\n * @property {import(\"./proj.js\").ProjectionLike} [projection] The projection the position\n * is reported in.\n */\n\n\n/**\n * @classdesc\n * Helper class for providing HTML5 Geolocation capabilities.\n * The [Geolocation API](http://www.w3.org/TR/geolocation-API/)\n * is used to locate a user's position.\n *\n * To get notified of position changes, register a listener for the generic\n * `change` event on your instance of {@link module:ol/Geolocation~Geolocation}.\n *\n * Example:\n *\n *     var geolocation = new Geolocation({\n *       // take the projection to use from the map's view\n *       projection: view.getProjection()\n *     });\n *     // listen to changes in position\n *     geolocation.on('change', function(evt) {\n *       window.console.log(geolocation.getPosition());\n *     });\n *\n * @fires module:ol/events/Event~Event#event:error\n * @api\n */\nclass Geolocation extends BaseObject {\n\n  /**\n   * @param {Options=} opt_options Options.\n   */\n  constructor(opt_options) {\n\n    super();\n\n    const options = opt_options || {};\n\n    /**\n     * The unprojected (EPSG:4326) device position.\n     * @private\n     * @type {import(\"./coordinate.js\").Coordinate}\n     */\n    this.position_ = null;\n\n    /**\n     * @private\n     * @type {import(\"./proj.js\").TransformFunction}\n     */\n    this.transform_ = identityTransform;\n\n    /**\n     * @private\n     * @type {number|undefined}\n     */\n    this.watchId_ = undefined;\n\n    this.addEventListener(getChangeEventType(Property.PROJECTION), this.handleProjectionChanged_);\n    this.addEventListener(getChangeEventType(Property.TRACKING), this.handleTrackingChanged_);\n\n    if (options.projection !== undefined) {\n      this.setProjection(options.projection);\n    }\n    if (options.trackingOptions !== undefined) {\n      this.setTrackingOptions(options.trackingOptions);\n    }\n\n    this.setTracking(options.tracking !== undefined ? options.tracking : false);\n\n  }\n\n  /**\n   * @inheritDoc\n   */\n  disposeInternal() {\n    this.setTracking(false);\n    super.disposeInternal();\n  }\n\n  /**\n   * @private\n   */\n  handleProjectionChanged_() {\n    const projection = this.getProjection();\n    if (projection) {\n      this.transform_ = getTransformFromProjections(\n        getProjection('EPSG:4326'), projection);\n      if (this.position_) {\n        this.set(Property.POSITION, this.transform_(this.position_));\n      }\n    }\n  }\n\n  /**\n   * @private\n   */\n  handleTrackingChanged_() {\n    if ('geolocation' in navigator) {\n      const tracking = this.getTracking();\n      if (tracking && this.watchId_ === undefined) {\n        this.watchId_ = navigator.geolocation.watchPosition(\n          this.positionChange_.bind(this),\n          this.positionError_.bind(this),\n          this.getTrackingOptions());\n      } else if (!tracking && this.watchId_ !== undefined) {\n        navigator.geolocation.clearWatch(this.watchId_);\n        this.watchId_ = undefined;\n      }\n    }\n  }\n\n  /**\n   * @private\n   * @param {Position} position position event.\n   */\n  positionChange_(position) {\n    const coords = position.coords;\n    this.set(Property.ACCURACY, coords.accuracy);\n    this.set(Property.ALTITUDE,\n      coords.altitude === null ? undefined : coords.altitude);\n    this.set(Property.ALTITUDE_ACCURACY,\n      coords.altitudeAccuracy === null ?\n        undefined : coords.altitudeAccuracy);\n    this.set(Property.HEADING, coords.heading === null ?\n      undefined : toRadians(coords.heading));\n    if (!this.position_) {\n      this.position_ = [coords.longitude, coords.latitude];\n    } else {\n      this.position_[0] = coords.longitude;\n      this.position_[1] = coords.latitude;\n    }\n    const projectedPosition = this.transform_(this.position_);\n    this.set(Property.POSITION, projectedPosition);\n    this.set(Property.SPEED,\n      coords.speed === null ? undefined : coords.speed);\n    const geometry = circularPolygon(this.position_, coords.accuracy);\n    geometry.applyTransform(this.transform_);\n    this.set(Property.ACCURACY_GEOMETRY, geometry);\n    this.changed();\n  }\n\n  /**\n   * @private\n   * @param {PositionError} error error object.\n   */\n  positionError_(error) {\n    this.setTracking(false);\n    this.dispatchEvent(new GeolocationError(error));\n  }\n\n  /**\n   * Get the accuracy of the position in meters.\n   * @return {number|undefined} The accuracy of the position measurement in\n   *     meters.\n   * @observable\n   * @api\n   */\n  getAccuracy() {\n    return /** @type {number|undefined} */ (this.get(Property.ACCURACY));\n  }\n\n  /**\n   * Get a geometry of the position accuracy.\n   * @return {?import(\"./geom/Polygon.js\").default} A geometry of the position accuracy.\n   * @observable\n   * @api\n   */\n  getAccuracyGeometry() {\n    return (\n      /** @type {?import(\"./geom/Polygon.js\").default} */ (this.get(Property.ACCURACY_GEOMETRY) || null)\n    );\n  }\n\n  /**\n   * Get the altitude associated with the position.\n   * @return {number|undefined} The altitude of the position in meters above mean\n   *     sea level.\n   * @observable\n   * @api\n   */\n  getAltitude() {\n    return /** @type {number|undefined} */ (this.get(Property.ALTITUDE));\n  }\n\n  /**\n   * Get the altitude accuracy of the position.\n   * @return {number|undefined} The accuracy of the altitude measurement in\n   *     meters.\n   * @observable\n   * @api\n   */\n  getAltitudeAccuracy() {\n    return /** @type {number|undefined} */ (this.get(Property.ALTITUDE_ACCURACY));\n  }\n\n  /**\n   * Get the heading as radians clockwise from North.\n   * Note: depending on the browser, the heading is only defined if the `enableHighAccuracy`\n   * is set to `true` in the tracking options.\n   * @return {number|undefined} The heading of the device in radians from north.\n   * @observable\n   * @api\n   */\n  getHeading() {\n    return /** @type {number|undefined} */ (this.get(Property.HEADING));\n  }\n\n  /**\n   * Get the position of the device.\n   * @return {import(\"./coordinate.js\").Coordinate|undefined} The current position of the device reported\n   *     in the current projection.\n   * @observable\n   * @api\n   */\n  getPosition() {\n    return (\n      /** @type {import(\"./coordinate.js\").Coordinate|undefined} */ (this.get(Property.POSITION))\n    );\n  }\n\n  /**\n   * Get the projection associated with the position.\n   * @return {import(\"./proj/Projection.js\").default|undefined} The projection the position is\n   *     reported in.\n   * @observable\n   * @api\n   */\n  getProjection() {\n    return (\n      /** @type {import(\"./proj/Projection.js\").default|undefined} */ (this.get(Property.PROJECTION))\n    );\n  }\n\n  /**\n   * Get the speed in meters per second.\n   * @return {number|undefined} The instantaneous speed of the device in meters\n   *     per second.\n   * @observable\n   * @api\n   */\n  getSpeed() {\n    return /** @type {number|undefined} */ (this.get(Property.SPEED));\n  }\n\n  /**\n   * Determine if the device location is being tracked.\n   * @return {boolean} The device location is being tracked.\n   * @observable\n   * @api\n   */\n  getTracking() {\n    return /** @type {boolean} */ (this.get(Property.TRACKING));\n  }\n\n  /**\n   * Get the tracking options.\n   * See http://www.w3.org/TR/geolocation-API/#position-options.\n   * @return {PositionOptions|undefined} PositionOptions as defined by\n   *     the [HTML5 Geolocation spec\n   *     ](http://www.w3.org/TR/geolocation-API/#position_options_interface).\n   * @observable\n   * @api\n   */\n  getTrackingOptions() {\n    return /** @type {PositionOptions|undefined} */ (this.get(Property.TRACKING_OPTIONS));\n  }\n\n  /**\n   * Set the projection to use for transforming the coordinates.\n   * @param {import(\"./proj.js\").ProjectionLike} projection The projection the position is\n   *     reported in.\n   * @observable\n   * @api\n   */\n  setProjection(projection) {\n    this.set(Property.PROJECTION, getProjection(projection));\n  }\n\n  /**\n   * Enable or disable tracking.\n   * @param {boolean} tracking Enable tracking.\n   * @observable\n   * @api\n   */\n  setTracking(tracking) {\n    this.set(Property.TRACKING, tracking);\n  }\n\n  /**\n   * Set the tracking options.\n   * See http://www.w3.org/TR/geolocation-API/#position-options.\n   * @param {PositionOptions} options PositionOptions as defined by the\n   *     [HTML5 Geolocation spec\n   *     ](http://www.w3.org/TR/geolocation-API/#position_options_interface).\n   * @observable\n   * @api\n   */\n  setTrackingOptions(options) {\n    this.set(Property.TRACKING_OPTIONS, options);\n  }\n}\n\n\nexport default Geolocation;\n","/**\n * @module ol/format/XML\n */\nimport {isDocument, parse} from '../xml.js';\n\n/**\n * @classdesc\n * Generic format for reading non-feature XML data\n *\n * @abstract\n */\nclass XML {\n  /**\n   * Read the source document.\n   *\n   * @param {Document|Element|string} source The XML source.\n   * @return {Object} An object representing the source.\n   * @api\n   */\n  read(source) {\n    if (!source) {\n      return null;\n    } else if (typeof source === 'string') {\n      const doc = parse(source);\n      return this.readFromDocument(doc);\n    } else if (isDocument(source)) {\n      return this.readFromDocument(/** @type {Document} */ (source));\n    } else {\n      return this.readFromNode(/** @type {Element} */ (source));\n    }\n  }\n\n  /**\n   * @abstract\n   * @param {Document} doc Document.\n   * @return {Object} Object\n   */\n  readFromDocument(doc) {}\n\n  /**\n   * @abstract\n   * @param {Element} node Node.\n   * @return {Object} Object\n   */\n  readFromNode(node) {}\n}\n\nexport default XML;\n","/**\n * @module ol/style/IconImageCache\n */\nimport {asString} from '../color.js';\n\n/**\n * @classdesc\n * Singleton class. Available through {@link module:ol/style/IconImageCache~shared}.\n */\nclass IconImageCache {\n  constructor() {\n\n    /**\n    * @type {!Object<string, import(\"./IconImage.js\").default>}\n    * @private\n    */\n    this.cache_ = {};\n\n    /**\n    * @type {number}\n    * @private\n    */\n    this.cacheSize_ = 0;\n\n    /**\n    * @type {number}\n    * @private\n    */\n    this.maxCacheSize_ = 32;\n  }\n\n  /**\n  * FIXME empty description for jsdoc\n  */\n  clear() {\n    this.cache_ = {};\n    this.cacheSize_ = 0;\n  }\n\n  /**\n   * @return {boolean} Can expire cache.\n   */\n  canExpireCache() {\n    return this.cacheSize_ > this.maxCacheSize_;\n  }\n\n  /**\n  * FIXME empty description for jsdoc\n  */\n  expire() {\n    if (this.canExpireCache()) {\n      let i = 0;\n      for (const key in this.cache_) {\n        const iconImage = this.cache_[key];\n        if ((i++ & 3) === 0 && !iconImage.hasListener()) {\n          delete this.cache_[key];\n          --this.cacheSize_;\n        }\n      }\n    }\n  }\n\n  /**\n  * @param {string} src Src.\n  * @param {?string} crossOrigin Cross origin.\n  * @param {import(\"../color.js\").Color} color Color.\n  * @return {import(\"./IconImage.js\").default} Icon image.\n  */\n  get(src, crossOrigin, color) {\n    const key = getKey(src, crossOrigin, color);\n    return key in this.cache_ ? this.cache_[key] : null;\n  }\n\n  /**\n  * @param {string} src Src.\n  * @param {?string} crossOrigin Cross origin.\n  * @param {import(\"../color.js\").Color} color Color.\n  * @param {import(\"./IconImage.js\").default} iconImage Icon image.\n  */\n  set(src, crossOrigin, color, iconImage) {\n    const key = getKey(src, crossOrigin, color);\n    this.cache_[key] = iconImage;\n    ++this.cacheSize_;\n  }\n\n  /**\n  * Set the cache size of the icon cache. Default is `32`. Change this value when\n  * your map uses more than 32 different icon images and you are not caching icon\n  * styles on the application level.\n  * @param {number} maxCacheSize Cache max size.\n  * @api\n  */\n  setSize(maxCacheSize) {\n    this.maxCacheSize_ = maxCacheSize;\n    this.expire();\n  }\n}\n\n\n/**\n * @param {string} src Src.\n * @param {?string} crossOrigin Cross origin.\n * @param {import(\"../color.js\").Color} color Color.\n * @return {string} Cache key.\n */\nfunction getKey(src, crossOrigin, color) {\n  const colorString = color ? asString(color) : 'null';\n  return crossOrigin + ':' + src + ':' + colorString;\n}\n\n\nexport default IconImageCache;\n\n\n/**\n * The {@link module:ol/style/IconImageCache~IconImageCache} for\n * {@link module:ol/style/Icon~Icon} images.\n * @api\n */\nexport const shared = new IconImageCache();\n","/**\n * @module ol/MapEvent\n */\nimport Event from './events/Event.js';\n\n/**\n * @classdesc\n * Events emitted as map events are instances of this type.\n * See {@link module:ol/PluggableMap~PluggableMap} for which events trigger a map event.\n */\nclass MapEvent extends Event {\n\n  /**\n   * @param {string} type Event type.\n   * @param {import(\"./PluggableMap.js\").default} map Map.\n   * @param {?import(\"./PluggableMap.js\").FrameState=} opt_frameState Frame state.\n   */\n  constructor(type, map, opt_frameState) {\n\n    super(type);\n\n    /**\n     * The map where the event occurred.\n     * @type {import(\"./PluggableMap.js\").default}\n     * @api\n     */\n    this.map = map;\n\n    /**\n     * The frame state at the time of the event.\n     * @type {?import(\"./PluggableMap.js\").FrameState}\n     * @api\n     */\n    this.frameState = opt_frameState !== undefined ? opt_frameState : null;\n\n  }\n\n}\n\nexport default MapEvent;\n","/**\n * @module ol/format/TopoJSON\n */\nimport Feature from '../Feature.js';\nimport {transformGeometryWithOptions} from './Feature.js';\nimport JSONFeature from './JSONFeature.js';\nimport LineString from '../geom/LineString.js';\nimport MultiLineString from '../geom/MultiLineString.js';\nimport MultiPoint from '../geom/MultiPoint.js';\nimport MultiPolygon from '../geom/MultiPolygon.js';\nimport Point from '../geom/Point.js';\nimport Polygon from '../geom/Polygon.js';\nimport {get as getProjection} from '../proj.js';\n\n/**\n * @typedef {import(\"topojson-specification\").Topology} TopoJSONTopology\n * @typedef {import(\"topojson-specification\").GeometryCollection} TopoJSONGeometryCollection\n * @typedef {import(\"topojson-specification\").GeometryObject} TopoJSONGeometry\n * @typedef {import(\"topojson-specification\").Point} TopoJSONPoint\n * @typedef {import(\"topojson-specification\").MultiPoint} TopoJSONMultiPoint\n * @typedef {import(\"topojson-specification\").LineString} TopoJSONLineString\n * @typedef {import(\"topojson-specification\").MultiLineString} TopoJSONMultiLineString\n * @typedef {import(\"topojson-specification\").Polygon} TopoJSONPolygon\n * @typedef {import(\"topojson-specification\").MultiPolygon} TopoJSONMultiPolygon\n */\n\n/**\n * @typedef {Object} Options\n * @property {import(\"../proj.js\").ProjectionLike} [dataProjection='EPSG:4326'] Default data projection.\n * @property {string} [layerName] Set the name of the TopoJSON topology\n * `objects`'s children as feature property with the specified name. This means\n * that when set to `'layer'`, a topology like\n * ```\n * {\n *   \"type\": \"Topology\",\n *   \"objects\": {\n *     \"example\": {\n *       \"type\": \"GeometryCollection\",\n *       \"geometries\": []\n *     }\n *   }\n * }\n * ```\n * will result in features that have a property `'layer'` set to `'example'`.\n * When not set, no property will be added to features.\n * @property {Array<string>} [layers] Names of the TopoJSON topology's\n * `objects`'s children to read features from.  If not provided, features will\n * be read from all children.\n */\n\n\n/**\n * @classdesc\n * Feature format for reading data in the TopoJSON format.\n *\n * @api\n */\nclass TopoJSON extends JSONFeature {\n\n  /**\n   * @param {Options=} opt_options Options.\n   */\n  constructor(opt_options) {\n    super();\n\n    const options = opt_options ? opt_options : {};\n\n    /**\n     * @private\n     * @type {string|undefined}\n     */\n    this.layerName_ = options.layerName;\n\n    /**\n     * @private\n     * @type {Array<string>}\n     */\n    this.layers_ = options.layers ? options.layers : null;\n\n    /**\n     * @inheritDoc\n     */\n    this.dataProjection = getProjection(\n      options.dataProjection ?\n        options.dataProjection : 'EPSG:4326');\n\n  }\n\n  /**\n   * @inheritDoc\n   */\n  readFeaturesFromObject(object, opt_options) {\n    if (object.type == 'Topology') {\n      const topoJSONTopology = /** @type {TopoJSONTopology} */ (object);\n      let transform, scale = null, translate = null;\n      if (topoJSONTopology['transform']) {\n        transform = topoJSONTopology['transform'];\n        scale = transform['scale'];\n        translate = transform['translate'];\n      }\n      const arcs = topoJSONTopology['arcs'];\n      if (transform) {\n        transformArcs(arcs, scale, translate);\n      }\n      /** @type {Array<Feature>} */\n      const features = [];\n      const topoJSONFeatures = topoJSONTopology['objects'];\n      const property = this.layerName_;\n      let feature;\n      for (const objectName in topoJSONFeatures) {\n        if (this.layers_ && this.layers_.indexOf(objectName) == -1) {\n          continue;\n        }\n        if (topoJSONFeatures[objectName].type === 'GeometryCollection') {\n          feature = /** @type {TopoJSONGeometryCollection} */ (topoJSONFeatures[objectName]);\n          features.push.apply(features, readFeaturesFromGeometryCollection(\n            feature, arcs, scale, translate, property, objectName, opt_options));\n        } else {\n          feature = /** @type {TopoJSONGeometry} */ (topoJSONFeatures[objectName]);\n          features.push(readFeatureFromGeometry(\n            feature, arcs, scale, translate, property, objectName, opt_options));\n        }\n      }\n      return features;\n    } else {\n      return [];\n    }\n  }\n\n  /**\n   * @inheritDoc\n   */\n  readProjectionFromObject(object) {\n    return this.dataProjection;\n  }\n\n}\n\n\n/**\n * @const\n * @type {Object<string, function(TopoJSONGeometry, Array, ...Array=): import(\"../geom/Geometry.js\").default>}\n */\nconst GEOMETRY_READERS = {\n  'Point': readPointGeometry,\n  'LineString': readLineStringGeometry,\n  'Polygon': readPolygonGeometry,\n  'MultiPoint': readMultiPointGeometry,\n  'MultiLineString': readMultiLineStringGeometry,\n  'MultiPolygon': readMultiPolygonGeometry\n};\n\n\n/**\n * Concatenate arcs into a coordinate array.\n * @param {Array<number>} indices Indices of arcs to concatenate.  Negative\n *     values indicate arcs need to be reversed.\n * @param {Array<Array<import(\"../coordinate.js\").Coordinate>>} arcs Array of arcs (already\n *     transformed).\n * @return {Array<import(\"../coordinate.js\").Coordinate>} Coordinates array.\n */\nfunction concatenateArcs(indices, arcs) {\n  /** @type {Array<import(\"../coordinate.js\").Coordinate>} */\n  const coordinates = [];\n  let index, arc;\n  for (let i = 0, ii = indices.length; i < ii; ++i) {\n    index = indices[i];\n    if (i > 0) {\n      // splicing together arcs, discard last point\n      coordinates.pop();\n    }\n    if (index >= 0) {\n      // forward arc\n      arc = arcs[index];\n    } else {\n      // reverse arc\n      arc = arcs[~index].slice().reverse();\n    }\n    coordinates.push.apply(coordinates, arc);\n  }\n  // provide fresh copies of coordinate arrays\n  for (let j = 0, jj = coordinates.length; j < jj; ++j) {\n    coordinates[j] = coordinates[j].slice();\n  }\n  return coordinates;\n}\n\n\n/**\n * Create a point from a TopoJSON geometry object.\n *\n * @param {TopoJSONPoint} object TopoJSON object.\n * @param {Array<number>} scale Scale for each dimension.\n * @param {Array<number>} translate Translation for each dimension.\n * @return {Point} Geometry.\n */\nfunction readPointGeometry(object, scale, translate) {\n  const coordinates = object['coordinates'];\n  if (scale && translate) {\n    transformVertex(coordinates, scale, translate);\n  }\n  return new Point(coordinates);\n}\n\n\n/**\n * Create a multi-point from a TopoJSON geometry object.\n *\n * @param {TopoJSONMultiPoint} object TopoJSON object.\n * @param {Array<number>} scale Scale for each dimension.\n * @param {Array<number>} translate Translation for each dimension.\n * @return {MultiPoint} Geometry.\n */\nfunction readMultiPointGeometry(object, scale, translate) {\n  const coordinates = object['coordinates'];\n  if (scale && translate) {\n    for (let i = 0, ii = coordinates.length; i < ii; ++i) {\n      transformVertex(coordinates[i], scale, translate);\n    }\n  }\n  return new MultiPoint(coordinates);\n}\n\n\n/**\n * Create a linestring from a TopoJSON geometry object.\n *\n * @param {TopoJSONLineString} object TopoJSON object.\n * @param {Array<Array<import(\"../coordinate.js\").Coordinate>>} arcs Array of arcs.\n * @return {LineString} Geometry.\n */\nfunction readLineStringGeometry(object, arcs) {\n  const coordinates = concatenateArcs(object['arcs'], arcs);\n  return new LineString(coordinates);\n}\n\n\n/**\n * Create a multi-linestring from a TopoJSON geometry object.\n *\n * @param {TopoJSONMultiLineString} object TopoJSON object.\n * @param {Array<Array<import(\"../coordinate.js\").Coordinate>>} arcs Array of arcs.\n * @return {MultiLineString} Geometry.\n */\nfunction readMultiLineStringGeometry(object, arcs) {\n  const coordinates = [];\n  for (let i = 0, ii = object['arcs'].length; i < ii; ++i) {\n    coordinates[i] = concatenateArcs(object['arcs'][i], arcs);\n  }\n  return new MultiLineString(coordinates);\n}\n\n\n/**\n * Create a polygon from a TopoJSON geometry object.\n *\n * @param {TopoJSONPolygon} object TopoJSON object.\n * @param {Array<Array<import(\"../coordinate.js\").Coordinate>>} arcs Array of arcs.\n * @return {Polygon} Geometry.\n */\nfunction readPolygonGeometry(object, arcs) {\n  const coordinates = [];\n  for (let i = 0, ii = object['arcs'].length; i < ii; ++i) {\n    coordinates[i] = concatenateArcs(object['arcs'][i], arcs);\n  }\n  return new Polygon(coordinates);\n}\n\n\n/**\n * Create a multi-polygon from a TopoJSON geometry object.\n *\n * @param {TopoJSONMultiPolygon} object TopoJSON object.\n * @param {Array<Array<import(\"../coordinate.js\").Coordinate>>} arcs Array of arcs.\n * @return {MultiPolygon} Geometry.\n */\nfunction readMultiPolygonGeometry(object, arcs) {\n  const coordinates = [];\n  for (let i = 0, ii = object['arcs'].length; i < ii; ++i) {\n    // for each polygon\n    const polyArray = object['arcs'][i];\n    const ringCoords = [];\n    for (let j = 0, jj = polyArray.length; j < jj; ++j) {\n      // for each ring\n      ringCoords[j] = concatenateArcs(polyArray[j], arcs);\n    }\n    coordinates[i] = ringCoords;\n  }\n  return new MultiPolygon(coordinates);\n}\n\n\n/**\n * Create features from a TopoJSON GeometryCollection object.\n *\n * @param {TopoJSONGeometryCollection} collection TopoJSON Geometry\n *     object.\n * @param {Array<Array<import(\"../coordinate.js\").Coordinate>>} arcs Array of arcs.\n * @param {Array<number>} scale Scale for each dimension.\n * @param {Array<number>} translate Translation for each dimension.\n * @param {string|undefined} property Property to set the `GeometryCollection`'s parent\n *     object to.\n * @param {string} name Name of the `Topology`'s child object.\n * @param {import(\"./Feature.js\").ReadOptions=} opt_options Read options.\n * @return {Array<Feature>} Array of features.\n */\nfunction readFeaturesFromGeometryCollection(collection, arcs, scale, translate, property, name, opt_options) {\n  const geometries = collection['geometries'];\n  const features = [];\n  for (let i = 0, ii = geometries.length; i < ii; ++i) {\n    features[i] = readFeatureFromGeometry(\n      geometries[i], arcs, scale, translate, property, name, opt_options);\n  }\n  return features;\n}\n\n\n/**\n * Create a feature from a TopoJSON geometry object.\n *\n * @param {TopoJSONGeometry} object TopoJSON geometry object.\n * @param {Array<Array<import(\"../coordinate.js\").Coordinate>>} arcs Array of arcs.\n * @param {Array<number>} scale Scale for each dimension.\n * @param {Array<number>} translate Translation for each dimension.\n * @param {string|undefined} property Property to set the `GeometryCollection`'s parent\n *     object to.\n * @param {string} name Name of the `Topology`'s child object.\n * @param {import(\"./Feature.js\").ReadOptions=} opt_options Read options.\n * @return {Feature} Feature.\n */\nfunction readFeatureFromGeometry(object, arcs, scale, translate, property, name, opt_options) {\n  let geometry;\n  const type = object.type;\n  const geometryReader = GEOMETRY_READERS[type];\n  if ((type === 'Point') || (type === 'MultiPoint')) {\n    geometry = geometryReader(object, scale, translate);\n  } else {\n    geometry = geometryReader(object, arcs);\n  }\n  const feature = new Feature();\n  feature.setGeometry(transformGeometryWithOptions(geometry, false, opt_options));\n  if (object.id !== undefined) {\n    feature.setId(object.id);\n  }\n  let properties = object.properties;\n  if (property) {\n    if (!properties) {\n      properties = {};\n    }\n    properties[property] = name;\n  }\n  if (properties) {\n    feature.setProperties(properties, true);\n  }\n  return feature;\n}\n\n\n/**\n * Apply a linear transform to array of arcs.  The provided array of arcs is\n * modified in place.\n *\n * @param {Array<Array<import(\"../coordinate.js\").Coordinate>>} arcs Array of arcs.\n * @param {Array<number>} scale Scale for each dimension.\n * @param {Array<number>} translate Translation for each dimension.\n */\nfunction transformArcs(arcs, scale, translate) {\n  for (let i = 0, ii = arcs.length; i < ii; ++i) {\n    transformArc(arcs[i], scale, translate);\n  }\n}\n\n\n/**\n * Apply a linear transform to an arc.  The provided arc is modified in place.\n *\n * @param {Array<import(\"../coordinate.js\").Coordinate>} arc Arc.\n * @param {Array<number>} scale Scale for each dimension.\n * @param {Array<number>} translate Translation for each dimension.\n */\nfunction transformArc(arc, scale, translate) {\n  let x = 0;\n  let y = 0;\n  for (let i = 0, ii = arc.length; i < ii; ++i) {\n    const vertex = arc[i];\n    x += vertex[0];\n    y += vertex[1];\n    vertex[0] = x;\n    vertex[1] = y;\n    transformVertex(vertex, scale, translate);\n  }\n}\n\n\n/**\n * Apply a linear transform to a vertex.  The provided vertex is modified in\n * place.\n *\n * @param {import(\"../coordinate.js\").Coordinate} vertex Vertex.\n * @param {Array<number>} scale Scale for each dimension.\n * @param {Array<number>} translate Translation for each dimension.\n */\nfunction transformVertex(vertex, scale, translate) {\n  vertex[0] = vertex[0] * scale[0] + translate[0];\n  vertex[1] = vertex[1] * scale[1] + translate[1];\n}\n\n\nexport default TopoJSON;\n","/**\n * @module ol/geom/flat/textpath\n */\nimport {lerp} from '../../math.js';\n\n\n/**\n * @param {Array<number>} flatCoordinates Path to put text on.\n * @param {number} offset Start offset of the `flatCoordinates`.\n * @param {number} end End offset of the `flatCoordinates`.\n * @param {number} stride Stride.\n * @param {string} text Text to place on the path.\n * @param {number} startM m along the path where the text starts.\n * @param {number} maxAngle Max angle between adjacent chars in radians.\n * @param {number} scale The product of the text scale and the device pixel ratio.\n * @param {function(string, string, Object<string, number>):number} measureAndCacheTextWidth Measure and cache text width.\n * @param {string} font The font.\n * @param {Object<string, number>} cache A cache of measured widths.\n * @return {Array<Array<*>>} The result array (or null if `maxAngle` was\n * exceeded). Entries of the array are x, y, anchorX, angle, chunk.\n */\nexport function drawTextOnPath(\n  flatCoordinates, offset, end, stride, text, startM, maxAngle, scale, measureAndCacheTextWidth, font, cache) {\n  const result = [];\n\n  // Keep text upright\n  const reverse = flatCoordinates[offset] > flatCoordinates[end - stride];\n\n  const numChars = text.length;\n\n  let x1 = flatCoordinates[offset];\n  let y1 = flatCoordinates[offset + 1];\n  offset += stride;\n  let x2 = flatCoordinates[offset];\n  let y2 = flatCoordinates[offset + 1];\n  let segmentM = 0;\n  let segmentLength = Math.sqrt(Math.pow(x2 - x1, 2) + Math.pow(y2 - y1, 2));\n  let angleChanged = false;\n\n  let index, previousAngle;\n  for (let i = 0; i < numChars; ++i) {\n    index = reverse ? numChars - i - 1 : i;\n    const char = text[index];\n    const charLength = scale * measureAndCacheTextWidth(font, char, cache);\n    const charM = startM + charLength / 2;\n    while (offset < end - stride && segmentM + segmentLength < charM) {\n      x1 = x2;\n      y1 = y2;\n      offset += stride;\n      x2 = flatCoordinates[offset];\n      y2 = flatCoordinates[offset + 1];\n      segmentM += segmentLength;\n      segmentLength = Math.sqrt(Math.pow(x2 - x1, 2) + Math.pow(y2 - y1, 2));\n    }\n    const segmentPos = charM - segmentM;\n    let angle = Math.atan2(y2 - y1, x2 - x1);\n    if (reverse) {\n      angle += angle > 0 ? -Math.PI : Math.PI;\n    }\n    if (previousAngle !== undefined) {\n      let delta = angle - previousAngle;\n      angleChanged = angleChanged || delta !== 0;\n      delta += (delta > Math.PI) ? -2 * Math.PI : (delta < -Math.PI) ? 2 * Math.PI : 0;\n      if (Math.abs(delta) > maxAngle) {\n        return null;\n      }\n    }\n    previousAngle = angle;\n    const interpolate = segmentPos / segmentLength;\n    const x = lerp(x1, x2, interpolate);\n    const y = lerp(y1, y2, interpolate);\n    result[index] = [x, y, charLength / 2, angle, char];\n    startM += charLength;\n  }\n  return angleChanged ? result : [[result[0][0], result[0][1], result[0][2], result[0][3], text]];\n}\n","/**\n * @module ol/render/canvas/Executor\n */\nimport {equals} from '../../array.js';\nimport {createEmpty, createOrUpdate,\n  createOrUpdateEmpty, extend, intersects} from '../../extent.js';\nimport {lineStringLength} from '../../geom/flat/length.js';\nimport {drawTextOnPath} from '../../geom/flat/textpath.js';\nimport {transform2D} from '../../geom/flat/transform.js';\nimport {drawImage, defaultPadding, defaultTextBaseline} from '../canvas.js';\nimport CanvasInstruction from './Instruction.js';\nimport {TEXT_ALIGN} from './TextBuilder.js';\nimport {\n  create as createTransform,\n  compose as composeTransform,\n  apply as applyTransform,\n  setFromArray as transformSetFromArray\n} from '../../transform.js';\nimport {createCanvasContext2D} from '../../dom.js';\nimport {labelCache, defaultTextAlign, measureTextHeight, measureAndCacheTextWidth, measureTextWidths} from '../canvas.js';\nimport Disposable from '../../Disposable.js';\nimport RBush from 'rbush';\n\n\n/**\n * @typedef {Object} SerializableInstructions\n * @property {Array<*>} instructions The rendering instructions.\n * @property {Array<*>} hitDetectionInstructions The rendering hit detection instructions.\n * @property {Array<number>} coordinates The array of all coordinates.\n * @property {!Object<string, import(\"../canvas.js\").TextState>} textStates The text states (decluttering).\n * @property {!Object<string, import(\"../canvas.js\").FillState>} fillStates The fill states (decluttering).\n * @property {!Object<string, import(\"../canvas.js\").StrokeState>} strokeStates The stroke states (decluttering).\n */\n\n/**\n * @type {import(\"../../extent.js\").Extent}\n */\nconst tmpExtent = createEmpty();\n\n/**\n * @type {!import(\"../../transform.js\").Transform}\n */\nconst tmpTransform = createTransform();\n\n/** @type {import(\"../../coordinate.js\").Coordinate} */\nconst p1 = [];\n/** @type {import(\"../../coordinate.js\").Coordinate} */\nconst p2 = [];\n/** @type {import(\"../../coordinate.js\").Coordinate} */\nconst p3 = [];\n/** @type {import(\"../../coordinate.js\").Coordinate} */\nconst p4 = [];\n\n\nclass Executor extends Disposable {\n  /**\n   * @param {number} resolution Resolution.\n   * @param {number} pixelRatio Pixel ratio.\n   * @param {boolean} overlaps The replay can have overlapping geometries.\n   * @param {SerializableInstructions} instructions The serializable instructions\n   */\n  constructor(resolution, pixelRatio, overlaps, instructions) {\n    super();\n\n    /**\n     * @protected\n     * @type {boolean}\n     */\n    this.overlaps = overlaps;\n\n    /**\n     * @protected\n     * @type {number}\n     */\n    this.pixelRatio = pixelRatio;\n\n    /**\n     * @protected\n     * @const\n     * @type {number}\n     */\n    this.resolution = resolution;\n\n    /**\n     * @private\n     * @type {boolean}\n     */\n    this.alignFill_;\n\n    /**\n     * @type {Array<*>}\n     */\n    this.declutterItems = [];\n\n    /**\n     * @protected\n     * @type {Array<*>}\n     */\n    this.instructions = instructions.instructions;\n\n    /**\n     * @protected\n     * @type {Array<number>}\n     */\n    this.coordinates = instructions.coordinates;\n\n    /**\n     * @private\n     * @type {!Object<number,import(\"../../coordinate.js\").Coordinate|Array<import(\"../../coordinate.js\").Coordinate>|Array<Array<import(\"../../coordinate.js\").Coordinate>>>}\n     */\n    this.coordinateCache_ = {};\n\n    /**\n     * @private\n     * @type {!import(\"../../transform.js\").Transform}\n     */\n    this.renderedTransform_ = createTransform();\n\n    /**\n     * @protected\n     * @type {Array<*>}\n     */\n    this.hitDetectionInstructions = instructions.hitDetectionInstructions;\n\n    /**\n     * @private\n     * @type {Array<number>}\n     */\n    this.pixelCoordinates_ = null;\n\n    /**\n     * @private\n     * @type {number}\n     */\n    this.viewRotation_ = 0;\n\n    /**\n     * @type {!Object<string, import(\"../canvas.js\").FillState>}\n     */\n    this.fillStates = instructions.fillStates || {};\n\n    /**\n     * @type {!Object<string, import(\"../canvas.js\").StrokeState>}\n     */\n    this.strokeStates = instructions.strokeStates || {};\n\n    /**\n     * @type {!Object<string, import(\"../canvas.js\").TextState>}\n     */\n    this.textStates = instructions.textStates || {};\n\n    /**\n     * @private\n     * @type {Object<string, Object<string, number>>}\n     */\n    this.widths_ = {};\n  }\n\n  /**\n   * @inheritDoc\n   */\n  disposeInternal() {\n    labelCache.release(this);\n    super.disposeInternal();\n  }\n\n\n  /**\n   * @param {string} text Text.\n   * @param {string} textKey Text style key.\n   * @param {string} fillKey Fill style key.\n   * @param {string} strokeKey Stroke style key.\n   * @return {HTMLCanvasElement} Image.\n   */\n  getTextImage(text, textKey, fillKey, strokeKey) {\n    let label;\n    const key = strokeKey + textKey + text + fillKey + this.pixelRatio;\n\n    if (!labelCache.containsKey(key)) {\n      const strokeState = strokeKey ? this.strokeStates[strokeKey] : null;\n      const fillState = fillKey ? this.fillStates[fillKey] : null;\n      const textState = this.textStates[textKey];\n      const pixelRatio = this.pixelRatio;\n      const scale = textState.scale * pixelRatio;\n      const align = TEXT_ALIGN[textState.textAlign || defaultTextAlign];\n      const strokeWidth = strokeKey && strokeState.lineWidth ? strokeState.lineWidth : 0;\n\n      const lines = text.split('\\n');\n      const numLines = lines.length;\n      const widths = [];\n      const width = measureTextWidths(textState.font, lines, widths);\n      const lineHeight = measureTextHeight(textState.font);\n      const height = lineHeight * numLines;\n      const renderWidth = width + strokeWidth;\n      const context = createCanvasContext2D(\n        // make canvas 2 pixels wider to account for italic text width measurement errors\n        Math.ceil((renderWidth + 2) * scale),\n        Math.ceil((height + strokeWidth) * scale));\n      label = context.canvas;\n      labelCache.set(key, label);\n      if (scale != 1) {\n        context.scale(scale, scale);\n      }\n      context.font = textState.font;\n      if (strokeKey) {\n        context.strokeStyle = strokeState.strokeStyle;\n        context.lineWidth = strokeWidth;\n        context.lineCap = strokeState.lineCap;\n        context.lineJoin = strokeState.lineJoin;\n        context.miterLimit = strokeState.miterLimit;\n        if (context.setLineDash && strokeState.lineDash.length) {\n          context.setLineDash(strokeState.lineDash);\n          context.lineDashOffset = strokeState.lineDashOffset;\n        }\n      }\n      if (fillKey) {\n        context.fillStyle = fillState.fillStyle;\n      }\n      context.textBaseline = 'middle';\n      context.textAlign = 'center';\n      const leftRight = (0.5 - align);\n      const x = align * renderWidth + leftRight * strokeWidth;\n      let i;\n      if (strokeKey) {\n        for (i = 0; i < numLines; ++i) {\n          context.strokeText(lines[i], x + leftRight * widths[i], 0.5 * (strokeWidth + lineHeight) + i * lineHeight);\n        }\n      }\n      if (fillKey) {\n        for (i = 0; i < numLines; ++i) {\n          context.fillText(lines[i], x + leftRight * widths[i], 0.5 * (strokeWidth + lineHeight) + i * lineHeight);\n        }\n      }\n    }\n    return labelCache.get(key, this);\n  }\n\n  /**\n   * @param {CanvasRenderingContext2D} context Context.\n   * @param {import(\"../../coordinate.js\").Coordinate} p1 1st point of the background box.\n   * @param {import(\"../../coordinate.js\").Coordinate} p2 2nd point of the background box.\n   * @param {import(\"../../coordinate.js\").Coordinate} p3 3rd point of the background box.\n   * @param {import(\"../../coordinate.js\").Coordinate} p4 4th point of the background box.\n   * @param {Array<*>} fillInstruction Fill instruction.\n   * @param {Array<*>} strokeInstruction Stroke instruction.\n   */\n  replayTextBackground_(context, p1, p2, p3, p4, fillInstruction, strokeInstruction) {\n    context.beginPath();\n    context.moveTo.apply(context, p1);\n    context.lineTo.apply(context, p2);\n    context.lineTo.apply(context, p3);\n    context.lineTo.apply(context, p4);\n    context.lineTo.apply(context, p1);\n    if (fillInstruction) {\n      this.alignFill_ = /** @type {boolean} */ (fillInstruction[2]);\n      this.fill_(context);\n    }\n    if (strokeInstruction) {\n      this.setStrokeStyle_(context, /** @type {Array<*>} */ (strokeInstruction));\n      context.stroke();\n    }\n  }\n\n  /**\n   * @param {CanvasRenderingContext2D} context Context.\n   * @param {number} x X.\n   * @param {number} y Y.\n   * @param {HTMLImageElement|HTMLCanvasElement|HTMLVideoElement} image Image.\n   * @param {number} anchorX Anchor X.\n   * @param {number} anchorY Anchor Y.\n   * @param {import(\"../canvas.js\").DeclutterGroup} declutterGroup Declutter group.\n   * @param {number} height Height.\n   * @param {number} opacity Opacity.\n   * @param {number} originX Origin X.\n   * @param {number} originY Origin Y.\n   * @param {number} rotation Rotation.\n   * @param {number} scale Scale.\n   * @param {boolean} snapToPixel Snap to pixel.\n   * @param {number} width Width.\n   * @param {Array<number>} padding Padding.\n   * @param {Array<*>} fillInstruction Fill instruction.\n   * @param {Array<*>} strokeInstruction Stroke instruction.\n   */\n  replayImage_(\n    context,\n    x,\n    y,\n    image,\n    anchorX,\n    anchorY,\n    declutterGroup,\n    height,\n    opacity,\n    originX,\n    originY,\n    rotation,\n    scale,\n    snapToPixel,\n    width,\n    padding,\n    fillInstruction,\n    strokeInstruction\n  ) {\n    const fillStroke = fillInstruction || strokeInstruction;\n    anchorX *= scale;\n    anchorY *= scale;\n    x -= anchorX;\n    y -= anchorY;\n\n    const w = (width + originX > image.width) ? image.width - originX : width;\n    const h = (height + originY > image.height) ? image.height - originY : height;\n    const boxW = padding[3] + w * scale + padding[1];\n    const boxH = padding[0] + h * scale + padding[2];\n    const boxX = x - padding[3];\n    const boxY = y - padding[0];\n\n    if (fillStroke || rotation !== 0) {\n      p1[0] = p4[0] = boxX;\n      p1[1] = p2[1] = boxY;\n      p2[0] = p3[0] = boxX + boxW;\n      p3[1] = p4[1] = boxY + boxH;\n    }\n\n    let transform = null;\n    if (rotation !== 0) {\n      const centerX = x + anchorX;\n      const centerY = y + anchorY;\n      transform = composeTransform(tmpTransform, centerX, centerY, 1, 1, rotation, -centerX, -centerY);\n\n      applyTransform(tmpTransform, p1);\n      applyTransform(tmpTransform, p2);\n      applyTransform(tmpTransform, p3);\n      applyTransform(tmpTransform, p4);\n      createOrUpdate(\n        Math.min(p1[0], p2[0], p3[0], p4[0]),\n        Math.min(p1[1], p2[1], p3[1], p4[1]),\n        Math.max(p1[0], p2[0], p3[0], p4[0]),\n        Math.max(p1[1], p2[1], p3[1], p4[1]),\n        tmpExtent\n      );\n    } else {\n      createOrUpdate(boxX, boxY, boxX + boxW, boxY + boxH, tmpExtent);\n    }\n    const canvas = context.canvas;\n    const strokePadding = strokeInstruction ? (strokeInstruction[2] * scale / 2) : 0;\n    const intersects =\n        tmpExtent[0] - strokePadding <= canvas.width && tmpExtent[2] + strokePadding >= 0 &&\n        tmpExtent[1] - strokePadding <= canvas.height && tmpExtent[3] + strokePadding >= 0;\n\n    if (snapToPixel) {\n      x = Math.round(x);\n      y = Math.round(y);\n    }\n\n    if (declutterGroup) {\n      if (!intersects && declutterGroup[4] == 1) {\n        return;\n      }\n      extend(declutterGroup, tmpExtent);\n      const declutterArgs = intersects ?\n        [context, transform ? transform.slice(0) : null, opacity, image, originX, originY, w, h, x, y, scale] :\n        null;\n      if (declutterArgs) {\n        if (fillStroke) {\n          declutterArgs.push(fillInstruction, strokeInstruction, p1, p2, p3, p4);\n        }\n        declutterGroup.push(declutterArgs);\n      }\n    } else if (intersects) {\n      if (fillStroke) {\n        this.replayTextBackground_(context, p1, p2, p3, p4,\n          /** @type {Array<*>} */ (fillInstruction),\n          /** @type {Array<*>} */ (strokeInstruction));\n      }\n      drawImage(context, transform, opacity, image, originX, originY, w, h, x, y, scale);\n    }\n  }\n\n  /**\n   * @private\n   * @param {CanvasRenderingContext2D} context Context.\n   */\n  fill_(context) {\n    if (this.alignFill_) {\n      const origin = applyTransform(this.renderedTransform_, [0, 0]);\n      const repeatSize = 512 * this.pixelRatio;\n      context.save();\n      context.translate(origin[0] % repeatSize, origin[1] % repeatSize);\n      context.rotate(this.viewRotation_);\n    }\n    context.fill();\n    if (this.alignFill_) {\n      context.restore();\n    }\n  }\n\n  /**\n   * @private\n   * @param {CanvasRenderingContext2D} context Context.\n   * @param {Array<*>} instruction Instruction.\n   */\n  setStrokeStyle_(context, instruction) {\n    context.strokeStyle = /** @type {import(\"../../colorlike.js\").ColorLike} */ (instruction[1]);\n    context.lineWidth = /** @type {number} */ (instruction[2]);\n    context.lineCap = /** @type {CanvasLineCap} */ (instruction[3]);\n    context.lineJoin = /** @type {CanvasLineJoin} */ (instruction[4]);\n    context.miterLimit = /** @type {number} */ (instruction[5]);\n    if (context.setLineDash) {\n      context.lineDashOffset = /** @type {number} */ (instruction[7]);\n      context.setLineDash(/** @type {Array<number>} */ (instruction[6]));\n    }\n  }\n\n  /**\n   * @param {import(\"../canvas.js\").DeclutterGroup} declutterGroup Declutter group.\n   * @param {import(\"../../Feature.js\").FeatureLike} feature Feature.\n   * @param {number} opacity Layer opacity.\n   * @param {?} declutterTree Declutter tree.\n   * @return {?} Declutter tree.\n   */\n  renderDeclutter(declutterGroup, feature, opacity, declutterTree) {\n    if (declutterGroup && declutterGroup.length > 5) {\n      const groupCount = declutterGroup[4];\n      if (groupCount == 1 || groupCount == declutterGroup.length - 5) {\n        /** @type {import(\"../../structs/RBush.js\").Entry} */\n        const box = {\n          minX: /** @type {number} */ (declutterGroup[0]),\n          minY: /** @type {number} */ (declutterGroup[1]),\n          maxX: /** @type {number} */ (declutterGroup[2]),\n          maxY: /** @type {number} */ (declutterGroup[3]),\n          value: feature\n        };\n        if (!declutterTree) {\n          declutterTree = new RBush(9);\n        }\n        if (!declutterTree.collides(box)) {\n          declutterTree.insert(box);\n          for (let j = 5, jj = declutterGroup.length; j < jj; ++j) {\n            const declutterData = /** @type {Array} */ (declutterGroup[j]);\n            const context = declutterData[0];\n            const currentAlpha = context.globalAlpha;\n            if (currentAlpha !== opacity) {\n              context.globalAlpha = opacity;\n            }\n            if (declutterData.length > 11) {\n              this.replayTextBackground_(declutterData[0],\n                declutterData[13], declutterData[14], declutterData[15], declutterData[16],\n                declutterData[11], declutterData[12]);\n            }\n            drawImage.apply(undefined, declutterData);\n            if (currentAlpha !== opacity) {\n              context.globalAlpha = currentAlpha;\n            }\n          }\n        }\n        declutterGroup.length = 5;\n        createOrUpdateEmpty(declutterGroup);\n      }\n    }\n    return declutterTree;\n  }\n\n  /**\n   * @private\n   * @param {string} text The text to draw.\n   * @param {string} textKey The key of the text state.\n   * @param {string} strokeKey The key for the stroke state.\n   * @param {string} fillKey The key for the fill state.\n   * @return {{label: HTMLCanvasElement, anchorX: number, anchorY: number}} The text image and its anchor.\n   */\n  drawTextImageWithPointPlacement_(text, textKey, strokeKey, fillKey) {\n    const textState = this.textStates[textKey];\n\n    const label = this.getTextImage(text, textKey, fillKey, strokeKey);\n\n    const strokeState = this.strokeStates[strokeKey];\n    const pixelRatio = this.pixelRatio;\n    const align = TEXT_ALIGN[textState.textAlign || defaultTextAlign];\n    const baseline = TEXT_ALIGN[textState.textBaseline || defaultTextBaseline];\n    const strokeWidth = strokeState && strokeState.lineWidth ? strokeState.lineWidth : 0;\n\n    // Remove the 2 pixels we added in getTextImage() for the anchor\n    const width = label.width / pixelRatio - 2 * textState.scale;\n    const anchorX = align * width + 2 * (0.5 - align) * strokeWidth;\n    const anchorY = baseline * label.height / pixelRatio + 2 * (0.5 - baseline) * strokeWidth;\n\n    return {\n      label: label,\n      anchorX: anchorX,\n      anchorY: anchorY\n    };\n  }\n\n  /**\n   * @private\n   * @param {CanvasRenderingContext2D} context Context.\n   * @param {import(\"../../transform.js\").Transform} transform Transform.\n   * @param {Array<*>} instructions Instructions array.\n   * @param {boolean} snapToPixel Snap point symbols and text to integer pixels.\n   * @param {function(import(\"../../Feature.js\").FeatureLike): T|undefined} featureCallback Feature callback.\n   * @param {import(\"../../extent.js\").Extent=} opt_hitExtent Only check features that intersect this\n   *     extent.\n   * @return {T|undefined} Callback result.\n   * @template T\n   */\n  execute_(\n    context,\n    transform,\n    instructions,\n    snapToPixel,\n    featureCallback,\n    opt_hitExtent\n  ) {\n    this.declutterItems.length = 0;\n    /** @type {Array<number>} */\n    let pixelCoordinates;\n    if (this.pixelCoordinates_ && equals(transform, this.renderedTransform_)) {\n      pixelCoordinates = this.pixelCoordinates_;\n    } else {\n      if (!this.pixelCoordinates_) {\n        this.pixelCoordinates_ = [];\n      }\n      pixelCoordinates = transform2D(\n        this.coordinates, 0, this.coordinates.length, 2,\n        transform, this.pixelCoordinates_);\n      transformSetFromArray(this.renderedTransform_, transform);\n    }\n    let i = 0; // instruction index\n    const ii = instructions.length; // end of instructions\n    let d = 0; // data index\n    let dd; // end of per-instruction data\n    let anchorX, anchorY, prevX, prevY, roundX, roundY, declutterGroup, declutterGroups, image, text, textKey;\n    let strokeKey, fillKey;\n    let pendingFill = 0;\n    let pendingStroke = 0;\n    let lastFillInstruction = null;\n    let lastStrokeInstruction = null;\n    const coordinateCache = this.coordinateCache_;\n    const viewRotation = this.viewRotation_;\n\n    const state = /** @type {import(\"../../render.js\").State} */ ({\n      context: context,\n      pixelRatio: this.pixelRatio,\n      resolution: this.resolution,\n      rotation: viewRotation\n    });\n\n    // When the batch size gets too big, performance decreases. 200 is a good\n    // balance between batch size and number of fill/stroke instructions.\n    const batchSize = this.instructions != instructions || this.overlaps ? 0 : 200;\n    let /** @type {import(\"../../Feature.js\").FeatureLike} */ feature;\n    let x, y;\n    while (i < ii) {\n      const instruction = instructions[i];\n      const type = /** @type {CanvasInstruction} */ (instruction[0]);\n      switch (type) {\n        case CanvasInstruction.BEGIN_GEOMETRY:\n          feature = /** @type {import(\"../../Feature.js\").FeatureLike} */ (instruction[1]);\n          if (!feature.getGeometry()) {\n            i = /** @type {number} */ (instruction[2]);\n          } else if (opt_hitExtent !== undefined && !intersects(opt_hitExtent, instruction[3])) {\n            i = /** @type {number} */ (instruction[2]) + 1;\n          } else {\n            ++i;\n          }\n          break;\n        case CanvasInstruction.BEGIN_PATH:\n          if (pendingFill > batchSize) {\n            this.fill_(context);\n            pendingFill = 0;\n          }\n          if (pendingStroke > batchSize) {\n            context.stroke();\n            pendingStroke = 0;\n          }\n          if (!pendingFill && !pendingStroke) {\n            context.beginPath();\n            prevX = prevY = NaN;\n          }\n          ++i;\n          break;\n        case CanvasInstruction.CIRCLE:\n          d = /** @type {number} */ (instruction[1]);\n          const x1 = pixelCoordinates[d];\n          const y1 = pixelCoordinates[d + 1];\n          const x2 = pixelCoordinates[d + 2];\n          const y2 = pixelCoordinates[d + 3];\n          const dx = x2 - x1;\n          const dy = y2 - y1;\n          const r = Math.sqrt(dx * dx + dy * dy);\n          context.moveTo(x1 + r, y1);\n          context.arc(x1, y1, r, 0, 2 * Math.PI, true);\n          ++i;\n          break;\n        case CanvasInstruction.CLOSE_PATH:\n          context.closePath();\n          ++i;\n          break;\n        case CanvasInstruction.CUSTOM:\n          d = /** @type {number} */ (instruction[1]);\n          dd = instruction[2];\n          const geometry = /** @type {import(\"../../geom/SimpleGeometry.js\").default} */ (instruction[3]);\n          const renderer = instruction[4];\n          const fn = instruction.length == 6 ? instruction[5] : undefined;\n          state.geometry = geometry;\n          state.feature = feature;\n          if (!(i in coordinateCache)) {\n            coordinateCache[i] = [];\n          }\n          const coords = coordinateCache[i];\n          if (fn) {\n            fn(pixelCoordinates, d, dd, 2, coords);\n          } else {\n            coords[0] = pixelCoordinates[d];\n            coords[1] = pixelCoordinates[d + 1];\n            coords.length = 2;\n          }\n          renderer(coords, state);\n          ++i;\n          break;\n        case CanvasInstruction.DRAW_IMAGE:\n          d = /** @type {number} */ (instruction[1]);\n          dd = /** @type {number} */ (instruction[2]);\n          image = /** @type {HTMLCanvasElement|HTMLVideoElement|HTMLImageElement} */ (instruction[3]);\n\n          // Remaining arguments in DRAW_IMAGE are in alphabetical order\n          anchorX = /** @type {number} */ (instruction[4]);\n          anchorY = /** @type {number} */ (instruction[5]);\n          declutterGroups = featureCallback ? null : instruction[6];\n          let height = /** @type {number} */ (instruction[7]);\n          const opacity = /** @type {number} */ (instruction[8]);\n          const originX = /** @type {number} */ (instruction[9]);\n          const originY = /** @type {number} */ (instruction[10]);\n          const rotateWithView = /** @type {boolean} */ (instruction[11]);\n          let rotation = /** @type {number} */ (instruction[12]);\n          const scale = /** @type {number} */ (instruction[13]);\n          let width = /** @type {number} */ (instruction[14]);\n\n          if (!image && instruction.length >= 19) {\n            // create label images\n            text = /** @type {string} */ (instruction[18]);\n            textKey = /** @type {string} */ (instruction[19]);\n            strokeKey = /** @type {string} */ (instruction[20]);\n            fillKey = /** @type {string} */ (instruction[21]);\n            const labelWithAnchor = this.drawTextImageWithPointPlacement_(text, textKey, strokeKey, fillKey);\n            image = instruction[3] = labelWithAnchor.label;\n            const textOffsetX = /** @type {number} */ (instruction[22]);\n            anchorX = instruction[4] = (labelWithAnchor.anchorX - textOffsetX) * this.pixelRatio;\n            const textOffsetY = /** @type {number} */ (instruction[23]);\n            anchorY = instruction[5] = (labelWithAnchor.anchorY - textOffsetY) * this.pixelRatio;\n            height = instruction[7] = image.height;\n            width = instruction[14] = image.width;\n          }\n\n          let geometryWidths;\n          if (instruction.length > 24) {\n            geometryWidths = /** @type {number} */ (instruction[24]);\n          }\n\n          let padding, backgroundFill, backgroundStroke;\n          if (instruction.length > 16) {\n            padding = /** @type {Array<number>} */ (instruction[15]);\n            backgroundFill = /** @type {boolean} */ (instruction[16]);\n            backgroundStroke = /** @type {boolean} */ (instruction[17]);\n          } else {\n            padding = defaultPadding;\n            backgroundFill = backgroundStroke = false;\n          }\n\n          if (rotateWithView) {\n            rotation += viewRotation;\n          }\n          let widthIndex = 0;\n          let declutterGroupIndex = 0;\n          for (; d < dd; d += 2) {\n            if (geometryWidths && geometryWidths[widthIndex++] < width / this.pixelRatio) {\n              continue;\n            }\n            if (declutterGroups) {\n              const index = Math.floor(declutterGroupIndex);\n              if (declutterGroups.length < index + 1) {\n                declutterGroup = createEmpty();\n                declutterGroup.push(declutterGroups[0][4]);\n                declutterGroups.push(declutterGroup);\n              }\n              declutterGroup = declutterGroups[index];\n            }\n            this.replayImage_(context,\n              pixelCoordinates[d], pixelCoordinates[d + 1], image, anchorX, anchorY,\n              declutterGroup, height, opacity, originX, originY, rotation, scale,\n              snapToPixel, width, padding,\n              backgroundFill ? /** @type {Array<*>} */ (lastFillInstruction) : null,\n              backgroundStroke ? /** @type {Array<*>} */ (lastStrokeInstruction) : null);\n            if (declutterGroup) {\n              if (declutterGroupIndex === Math.floor(declutterGroupIndex)) {\n                this.declutterItems.push(this, declutterGroup, feature);\n              }\n              declutterGroupIndex += 1 / declutterGroup[4];\n\n            }\n          }\n          ++i;\n          break;\n        case CanvasInstruction.DRAW_CHARS:\n          const begin = /** @type {number} */ (instruction[1]);\n          const end = /** @type {number} */ (instruction[2]);\n          const baseline = /** @type {number} */ (instruction[3]);\n          declutterGroup = featureCallback ? null : instruction[4];\n          const overflow = /** @type {number} */ (instruction[5]);\n          fillKey = /** @type {string} */ (instruction[6]);\n          const maxAngle = /** @type {number} */ (instruction[7]);\n          const measurePixelRatio = /** @type {number} */ (instruction[8]);\n          const offsetY = /** @type {number} */ (instruction[9]);\n          strokeKey = /** @type {string} */ (instruction[10]);\n          const strokeWidth = /** @type {number} */ (instruction[11]);\n          text = /** @type {string} */ (instruction[12]);\n          textKey = /** @type {string} */ (instruction[13]);\n          const pixelRatioScale = /** @type {number} */ (instruction[14]);\n\n          const textState = this.textStates[textKey];\n          const font = textState.font;\n          const textScale = textState.scale * measurePixelRatio;\n\n          let cachedWidths;\n          if (font in this.widths_) {\n            cachedWidths = this.widths_[font];\n          } else {\n            cachedWidths = this.widths_[font] = {};\n          }\n\n          const pathLength = lineStringLength(pixelCoordinates, begin, end, 2);\n          const textLength = textScale * measureAndCacheTextWidth(font, text, cachedWidths);\n          if (overflow || textLength <= pathLength) {\n            const textAlign = this.textStates[textKey].textAlign;\n            const startM = (pathLength - textLength) * TEXT_ALIGN[textAlign];\n            const parts = drawTextOnPath(\n              pixelCoordinates, begin, end, 2, text, startM, maxAngle, textScale, measureAndCacheTextWidth, font, cachedWidths);\n            if (parts) {\n              let c, cc, chars, label, part;\n              if (strokeKey) {\n                for (c = 0, cc = parts.length; c < cc; ++c) {\n                  part = parts[c]; // x, y, anchorX, rotation, chunk\n                  chars = /** @type {string} */ (part[4]);\n                  label = this.getTextImage(chars, textKey, '', strokeKey);\n                  anchorX = /** @type {number} */ (part[2]) + strokeWidth;\n                  anchorY = baseline * label.height + (0.5 - baseline) * 2 * strokeWidth - offsetY;\n                  this.replayImage_(context,\n                    /** @type {number} */ (part[0]), /** @type {number} */ (part[1]), label,\n                    anchorX, anchorY, declutterGroup, label.height, 1, 0, 0,\n                    /** @type {number} */ (part[3]), pixelRatioScale, false, label.width,\n                    defaultPadding, null, null);\n                }\n              }\n              if (fillKey) {\n                for (c = 0, cc = parts.length; c < cc; ++c) {\n                  part = parts[c]; // x, y, anchorX, rotation, chunk\n                  chars = /** @type {string} */ (part[4]);\n                  label = this.getTextImage(chars, textKey, fillKey, '');\n                  anchorX = /** @type {number} */ (part[2]);\n                  anchorY = baseline * label.height - offsetY;\n                  this.replayImage_(context,\n                    /** @type {number} */ (part[0]), /** @type {number} */ (part[1]), label,\n                    anchorX, anchorY, declutterGroup, label.height, 1, 0, 0,\n                    /** @type {number} */ (part[3]), pixelRatioScale, false, label.width,\n                    defaultPadding, null, null);\n                }\n              }\n            }\n          }\n          this.declutterItems.push(this, declutterGroup, feature);\n          ++i;\n          break;\n        case CanvasInstruction.END_GEOMETRY:\n          if (featureCallback !== undefined) {\n            feature = /** @type {import(\"../../Feature.js\").FeatureLike} */ (instruction[1]);\n            const result = featureCallback(feature);\n            if (result) {\n              return result;\n            }\n          }\n          ++i;\n          break;\n        case CanvasInstruction.FILL:\n          if (batchSize) {\n            pendingFill++;\n          } else {\n            this.fill_(context);\n          }\n          ++i;\n          break;\n        case CanvasInstruction.MOVE_TO_LINE_TO:\n          d = /** @type {number} */ (instruction[1]);\n          dd = /** @type {number} */ (instruction[2]);\n          x = pixelCoordinates[d];\n          y = pixelCoordinates[d + 1];\n          roundX = (x + 0.5) | 0;\n          roundY = (y + 0.5) | 0;\n          if (roundX !== prevX || roundY !== prevY) {\n            context.moveTo(x, y);\n            prevX = roundX;\n            prevY = roundY;\n          }\n          for (d += 2; d < dd; d += 2) {\n            x = pixelCoordinates[d];\n            y = pixelCoordinates[d + 1];\n            roundX = (x + 0.5) | 0;\n            roundY = (y + 0.5) | 0;\n            if (d == dd - 2 || roundX !== prevX || roundY !== prevY) {\n              context.lineTo(x, y);\n              prevX = roundX;\n              prevY = roundY;\n            }\n          }\n          ++i;\n          break;\n        case CanvasInstruction.SET_FILL_STYLE:\n          lastFillInstruction = instruction;\n          this.alignFill_ = instruction[2];\n\n          if (pendingFill) {\n            this.fill_(context);\n            pendingFill = 0;\n            if (pendingStroke) {\n              context.stroke();\n              pendingStroke = 0;\n            }\n          }\n\n          context.fillStyle = /** @type {import(\"../../colorlike.js\").ColorLike} */ (instruction[1]);\n          ++i;\n          break;\n        case CanvasInstruction.SET_STROKE_STYLE:\n          lastStrokeInstruction = instruction;\n          if (pendingStroke) {\n            context.stroke();\n            pendingStroke = 0;\n          }\n          this.setStrokeStyle_(context, /** @type {Array<*>} */ (instruction));\n          ++i;\n          break;\n        case CanvasInstruction.STROKE:\n          if (batchSize) {\n            pendingStroke++;\n          } else {\n            context.stroke();\n          }\n          ++i;\n          break;\n        default:\n          ++i; // consume the instruction anyway, to avoid an infinite loop\n          break;\n      }\n    }\n    if (pendingFill) {\n      this.fill_(context);\n    }\n    if (pendingStroke) {\n      context.stroke();\n    }\n    return undefined;\n  }\n\n  /**\n   * @param {CanvasRenderingContext2D} context Context.\n   * @param {import(\"../../transform.js\").Transform} transform Transform.\n   * @param {number} viewRotation View rotation.\n   * @param {boolean} snapToPixel Snap point symbols and text to integer pixels.\n   */\n  execute(context, transform, viewRotation, snapToPixel) {\n    this.viewRotation_ = viewRotation;\n    this.execute_(context, transform, this.instructions, snapToPixel, undefined, undefined);\n  }\n\n  /**\n   * @param {CanvasRenderingContext2D} context Context.\n   * @param {import(\"../../transform.js\").Transform} transform Transform.\n   * @param {number} viewRotation View rotation.\n   * @param {function(import(\"../../Feature.js\").FeatureLike): T=} opt_featureCallback\n   *     Feature callback.\n   * @param {import(\"../../extent.js\").Extent=} opt_hitExtent Only check features that intersect this\n   *     extent.\n   * @return {T|undefined} Callback result.\n   * @template T\n   */\n  executeHitDetection(\n    context,\n    transform,\n    viewRotation,\n    opt_featureCallback,\n    opt_hitExtent\n  ) {\n    this.viewRotation_ = viewRotation;\n    return this.execute_(context, transform,\n      this.hitDetectionInstructions, true, opt_featureCallback, opt_hitExtent);\n  }\n}\n\n\nexport default Executor;\n","/**\n * @module ol/render/canvas/ExecutorGroup\n */\n\nimport {numberSafeCompareFunction} from '../../array.js';\nimport {createCanvasContext2D} from '../../dom.js';\nimport {buffer, createEmpty, extendCoordinate} from '../../extent.js';\nimport {transform2D} from '../../geom/flat/transform.js';\nimport {isEmpty} from '../../obj.js';\nimport BuilderType from './BuilderType.js';\nimport {create as createTransform, compose as composeTransform} from '../../transform.js';\nimport Executor from './Executor.js';\nimport Disposable from '../../Disposable.js';\n\n/**\n * @const\n * @type {Array<BuilderType>}\n */\nconst ORDER = [\n  BuilderType.POLYGON,\n  BuilderType.CIRCLE,\n  BuilderType.LINE_STRING,\n  BuilderType.IMAGE,\n  BuilderType.TEXT,\n  BuilderType.DEFAULT\n];\n\n\nclass ExecutorGroup extends Disposable {\n  /**\n   * @param {import(\"../../extent.js\").Extent} maxExtent Max extent for clipping. When a\n   * `maxExtent` was set on the Buillder for this executor group, the same `maxExtent`\n   * should be set here, unless the target context does not exceet that extent (which\n   * can be the case when rendering to tiles).\n   * @param {number} resolution Resolution.\n   * @param {number} pixelRatio Pixel ratio.\n   * @param {boolean} overlaps The executor group can have overlapping geometries.\n   * @param {!Object<string, !Object<BuilderType, import(\"./Builder.js\").SerializableInstructions>>} allInstructions\n   * The serializable instructions.\n   * @param {number=} opt_renderBuffer Optional rendering buffer.\n   */\n  constructor(maxExtent, resolution, pixelRatio, overlaps, allInstructions, opt_renderBuffer) {\n    super();\n\n    /**\n     * @private\n     * @type {import(\"../../extent.js\").Extent}\n     */\n    this.maxExtent_ = maxExtent;\n\n    /**\n     * @private\n     * @type {boolean}\n     */\n    this.overlaps_ = overlaps;\n\n    /**\n     * @private\n     * @type {number}\n     */\n    this.pixelRatio_ = pixelRatio;\n\n    /**\n     * @private\n     * @type {number}\n     */\n    this.resolution_ = resolution;\n\n    /**\n     * @private\n     * @type {number|undefined}\n     */\n    this.renderBuffer_ = opt_renderBuffer;\n\n    /**\n     * @private\n     * @type {!Object<string, !Object<BuilderType, import(\"./Executor\").default>>}\n     */\n    this.executorsByZIndex_ = {};\n\n    /**\n     * @private\n     * @type {CanvasRenderingContext2D}\n     */\n    this.hitDetectionContext_ = null;\n\n    /**\n     * @private\n     * @type {import(\"../../transform.js\").Transform}\n     */\n    this.hitDetectionTransform_ = createTransform();\n\n    this.createExecutors_(allInstructions);\n  }\n\n  /**\n   * @param {CanvasRenderingContext2D} context Context.\n   * @param {import(\"../../transform.js\").Transform} transform Transform.\n   */\n  clip(context, transform) {\n    const flatClipCoords = this.getClipCoords(transform);\n    context.beginPath();\n    context.moveTo(flatClipCoords[0], flatClipCoords[1]);\n    context.lineTo(flatClipCoords[2], flatClipCoords[3]);\n    context.lineTo(flatClipCoords[4], flatClipCoords[5]);\n    context.lineTo(flatClipCoords[6], flatClipCoords[7]);\n    context.clip();\n  }\n\n  /**\n   * Create executors and populate them using the provided instructions.\n   * @private\n   * @param {!Object<string, !Object<BuilderType, import(\"./Builder.js\").SerializableInstructions>>} allInstructions The serializable instructions\n   */\n  createExecutors_(allInstructions) {\n    for (const zIndex in allInstructions) {\n      let executors = this.executorsByZIndex_[zIndex];\n      if (executors === undefined) {\n        this.executorsByZIndex_[zIndex] = executors = {};\n      }\n      const instructionByZindex = allInstructions[zIndex];\n      for (const builderType in instructionByZindex) {\n        const instructions = instructionByZindex[builderType];\n        executors[builderType] = new Executor(\n          this.resolution_, this.pixelRatio_, this.overlaps_, instructions);\n      }\n    }\n  }\n\n  /**\n   * @inheritDoc\n   */\n  disposeInternal() {\n    for (const z in this.executorsByZIndex_) {\n      const executors = this.executorsByZIndex_[z];\n      for (const key in executors) {\n        executors[key].disposeInternal();\n      }\n    }\n    if (this.hitDetectionContext_) {\n      const canvas = this.hitDetectionContext_.canvas;\n      canvas.width = canvas.height = 0;\n    }\n\n    super.disposeInternal();\n  }\n\n  /**\n   * @param {Array<BuilderType>} executors Executors.\n   * @return {boolean} Has executors of the provided types.\n   */\n  hasExecutors(executors) {\n    for (const zIndex in this.executorsByZIndex_) {\n      const candidates = this.executorsByZIndex_[zIndex];\n      for (let i = 0, ii = executors.length; i < ii; ++i) {\n        if (executors[i] in candidates) {\n          return true;\n        }\n      }\n    }\n    return false;\n  }\n\n\n  /**\n   * @param {import(\"../../coordinate.js\").Coordinate} coordinate Coordinate.\n   * @param {number} resolution Resolution.\n   * @param {number} rotation Rotation.\n   * @param {number} hitTolerance Hit tolerance in pixels.\n   * @param {function(import(\"../../Feature.js\").FeatureLike): T} callback Feature callback.\n   * @param {Array<import(\"../../Feature.js\").FeatureLike>} declutteredFeatures Decluttered features.\n   * @return {T|undefined} Callback result.\n   * @template T\n   */\n  forEachFeatureAtCoordinate(\n    coordinate,\n    resolution,\n    rotation,\n    hitTolerance,\n    callback,\n    declutteredFeatures\n  ) {\n\n    hitTolerance = Math.round(hitTolerance);\n    const contextSize = hitTolerance * 2 + 1;\n    const transform = composeTransform(this.hitDetectionTransform_,\n      hitTolerance + 0.5, hitTolerance + 0.5,\n      1 / resolution, -1 / resolution,\n      -rotation,\n      -coordinate[0], -coordinate[1]);\n\n    if (!this.hitDetectionContext_) {\n      this.hitDetectionContext_ = createCanvasContext2D(contextSize, contextSize);\n    }\n    const context = this.hitDetectionContext_;\n\n    if (context.canvas.width !== contextSize || context.canvas.height !== contextSize) {\n      context.canvas.width = contextSize;\n      context.canvas.height = contextSize;\n    } else {\n      context.clearRect(0, 0, contextSize, contextSize);\n    }\n\n    /**\n     * @type {import(\"../../extent.js\").Extent}\n     */\n    let hitExtent;\n    if (this.renderBuffer_ !== undefined) {\n      hitExtent = createEmpty();\n      extendCoordinate(hitExtent, coordinate);\n      buffer(hitExtent, resolution * (this.renderBuffer_ + hitTolerance), hitExtent);\n    }\n\n    const mask = getCircleArray(hitTolerance);\n\n    let builderType;\n\n    /**\n     * @param {import(\"../../Feature.js\").FeatureLike} feature Feature.\n     * @return {?} Callback result.\n     */\n    function featureCallback(feature) {\n      const imageData = context.getImageData(0, 0, contextSize, contextSize).data;\n      for (let i = 0; i < contextSize; i++) {\n        for (let j = 0; j < contextSize; j++) {\n          if (mask[i][j]) {\n            if (imageData[(j * contextSize + i) * 4 + 3] > 0) {\n              let result;\n              if (!(declutteredFeatures && (builderType == BuilderType.IMAGE || builderType == BuilderType.TEXT)) ||\n                  declutteredFeatures.indexOf(feature) !== -1) {\n                result = callback(feature);\n              }\n              if (result) {\n                return result;\n              } else {\n                context.clearRect(0, 0, contextSize, contextSize);\n                return undefined;\n              }\n            }\n          }\n        }\n      }\n    }\n\n    /** @type {Array<number>} */\n    const zs = Object.keys(this.executorsByZIndex_).map(Number);\n    zs.sort(numberSafeCompareFunction);\n\n    let i, j, executors, executor, result;\n    for (i = zs.length - 1; i >= 0; --i) {\n      const zIndexKey = zs[i].toString();\n      executors = this.executorsByZIndex_[zIndexKey];\n      for (j = ORDER.length - 1; j >= 0; --j) {\n        builderType = ORDER[j];\n        executor = executors[builderType];\n        if (executor !== undefined) {\n          result = executor.executeHitDetection(context, transform, rotation, featureCallback, hitExtent);\n          if (result) {\n            return result;\n          }\n        }\n      }\n    }\n    return undefined;\n  }\n\n  /**\n   * @param {import(\"../../transform.js\").Transform} transform Transform.\n   * @return {Array<number>} Clip coordinates.\n   */\n  getClipCoords(transform) {\n    const maxExtent = this.maxExtent_;\n    if (!maxExtent) {\n      return null;\n    }\n    const minX = maxExtent[0];\n    const minY = maxExtent[1];\n    const maxX = maxExtent[2];\n    const maxY = maxExtent[3];\n    const flatClipCoords = [minX, minY, minX, maxY, maxX, maxY, maxX, minY];\n    transform2D(\n      flatClipCoords, 0, 8, 2, transform, flatClipCoords);\n    return flatClipCoords;\n  }\n\n  /**\n   * @return {boolean} Is empty.\n   */\n  isEmpty() {\n    return isEmpty(this.executorsByZIndex_);\n  }\n\n  /**\n   * @param {CanvasRenderingContext2D} context Context.\n   * @param {import(\"../../transform.js\").Transform} transform Transform.\n   * @param {number} viewRotation View rotation.\n   * @param {boolean} snapToPixel Snap point symbols and test to integer pixel.\n   * @param {Array<BuilderType>=} opt_builderTypes Ordered replay types to replay.\n   *     Default is {@link module:ol/render/replay~ORDER}\n   * @param {Object<string, import(\"../canvas.js\").DeclutterGroup>=} opt_declutterReplays Declutter replays.\n   */\n  execute(context, transform, viewRotation, snapToPixel, opt_builderTypes, opt_declutterReplays) {\n\n    /** @type {Array<number>} */\n    const zs = Object.keys(this.executorsByZIndex_).map(Number);\n    zs.sort(numberSafeCompareFunction);\n\n    // setup clipping so that the parts of over-simplified geometries are not\n    // visible outside the current extent when panning\n    if (this.maxExtent_) {\n      context.save();\n      this.clip(context, transform);\n    }\n\n    const builderTypes = opt_builderTypes ? opt_builderTypes : ORDER;\n    let i, ii, j, jj, replays, replay;\n    for (i = 0, ii = zs.length; i < ii; ++i) {\n      const zIndexKey = zs[i].toString();\n      replays = this.executorsByZIndex_[zIndexKey];\n      for (j = 0, jj = builderTypes.length; j < jj; ++j) {\n        const builderType = builderTypes[j];\n        replay = replays[builderType];\n        if (replay !== undefined) {\n          if (opt_declutterReplays &&\n              (builderType == BuilderType.IMAGE || builderType == BuilderType.TEXT)) {\n            const declutter = opt_declutterReplays[zIndexKey];\n            if (!declutter) {\n              opt_declutterReplays[zIndexKey] = [replay, transform.slice(0)];\n            } else {\n              declutter.push(replay, transform.slice(0));\n            }\n          } else {\n            replay.execute(context, transform, viewRotation, snapToPixel);\n          }\n        }\n      }\n    }\n\n    if (this.maxExtent_) {\n      context.restore();\n    }\n  }\n}\n\n\n/**\n * This cache is used for storing calculated pixel circles for increasing performance.\n * It is a static property to allow each Replaygroup to access it.\n * @type {Object<number, Array<Array<(boolean|undefined)>>>}\n */\nconst circleArrayCache = {\n  0: [[true]]\n};\n\n\n/**\n * This method fills a row in the array from the given coordinate to the\n * middle with `true`.\n * @param {Array<Array<(boolean|undefined)>>} array The array that will be altered.\n * @param {number} x X coordinate.\n * @param {number} y Y coordinate.\n */\nfunction fillCircleArrayRowToMiddle(array, x, y) {\n  let i;\n  const radius = Math.floor(array.length / 2);\n  if (x >= radius) {\n    for (i = radius; i < x; i++) {\n      array[i][y] = true;\n    }\n  } else if (x < radius) {\n    for (i = x + 1; i < radius; i++) {\n      array[i][y] = true;\n    }\n  }\n}\n\n\n/**\n * This methods creates a circle inside a fitting array. Points inside the\n * circle are marked by true, points on the outside are undefined.\n * It uses the midpoint circle algorithm.\n * A cache is used to increase performance.\n * @param {number} radius Radius.\n * @returns {Array<Array<(boolean|undefined)>>} An array with marked circle points.\n */\nexport function getCircleArray(radius) {\n  if (circleArrayCache[radius] !== undefined) {\n    return circleArrayCache[radius];\n  }\n\n  const arraySize = radius * 2 + 1;\n  const arr = new Array(arraySize);\n  for (let i = 0; i < arraySize; i++) {\n    arr[i] = new Array(arraySize);\n  }\n\n  let x = radius;\n  let y = 0;\n  let error = 0;\n\n  while (x >= y) {\n    fillCircleArrayRowToMiddle(arr, radius + x, radius + y);\n    fillCircleArrayRowToMiddle(arr, radius + y, radius + x);\n    fillCircleArrayRowToMiddle(arr, radius - y, radius + x);\n    fillCircleArrayRowToMiddle(arr, radius - x, radius + y);\n    fillCircleArrayRowToMiddle(arr, radius - x, radius - y);\n    fillCircleArrayRowToMiddle(arr, radius - y, radius - x);\n    fillCircleArrayRowToMiddle(arr, radius + y, radius - x);\n    fillCircleArrayRowToMiddle(arr, radius + x, radius - y);\n\n    y++;\n    error += 1 + 2 * y;\n    if (2 * (error - x) + 1 > 0) {\n      x -= 1;\n      error += 1 - 2 * x;\n    }\n  }\n\n  circleArrayCache[radius] = arr;\n  return arr;\n}\n\n\n/**\n * @param {!Object<string, Array<*>>} declutterReplays Declutter replays.\n * @param {CanvasRenderingContext2D} context Context.\n * @param {number} rotation Rotation.\n * @param {number} opacity Opacity.\n * @param {boolean} snapToPixel Snap point symbols and text to integer pixels.\n * @param {Array<import(\"../../PluggableMap.js\").DeclutterItems>} declutterItems Declutter items.\n */\nexport function replayDeclutter(declutterReplays, context, rotation, opacity, snapToPixel, declutterItems) {\n  const zs = Object.keys(declutterReplays).map(Number).sort(numberSafeCompareFunction);\n  for (let z = 0, zz = zs.length; z < zz; ++z) {\n    const executorData = declutterReplays[zs[z].toString()];\n    let currentExecutor;\n    for (let i = 0, ii = executorData.length; i < ii;) {\n      const executor = executorData[i++];\n      if (executor !== currentExecutor) {\n        currentExecutor = executor;\n        declutterItems.push({\n          items: executor.declutterItems,\n          opacity: opacity\n        });\n      }\n      const transform = executorData[i++];\n      executor.execute(context, transform, rotation, snapToPixel);\n    }\n  }\n}\n\n\nexport default ExecutorGroup;\n","/**\n * @module ol/control/Attribution\n */\nimport {equals} from '../array.js';\nimport Control from './Control.js';\nimport {CLASS_CONTROL, CLASS_UNSELECTABLE, CLASS_COLLAPSED} from '../css.js';\nimport {removeChildren, replaceNode} from '../dom.js';\nimport EventType from '../events/EventType.js';\nimport {inView} from '../layer/Layer.js';\n\n\n/**\n * @typedef {Object} Options\n * @property {string} [className='ol-attribution'] CSS class name.\n * @property {HTMLElement|string} [target] Specify a target if you\n * want the control to be rendered outside of the map's\n * viewport.\n * @property {boolean} [collapsible] Specify if attributions can\n * be collapsed. If not specified, sources control this behavior with their\n * `attributionsCollapsible` setting.\n * @property {boolean} [collapsed=true] Specify if attributions should\n * be collapsed at startup.\n * @property {string} [tipLabel='Attributions'] Text label to use for the button tip.\n * @property {string} [label='i'] Text label to use for the\n * collapsed attributions button.\n * Instead of text, also an element (e.g. a `span` element) can be used.\n * @property {string|HTMLElement} [collapseLabel='»'] Text label to use\n * for the expanded attributions button.\n * Instead of text, also an element (e.g. a `span` element) can be used.\n * @property {function(import(\"../MapEvent.js\").default)} [render] Function called when\n * the control should be re-rendered. This is called in a `requestAnimationFrame`\n * callback.\n */\n\n\n/**\n * @classdesc\n * Control to show all the attributions associated with the layer sources\n * in the map. This control is one of the default controls included in maps.\n * By default it will show in the bottom right portion of the map, but this can\n * be changed by using a css selector for `.ol-attribution`.\n *\n * @api\n */\nclass Attribution extends Control {\n\n  /**\n   * @param {Options=} opt_options Attribution options.\n   */\n  constructor(opt_options) {\n\n    const options = opt_options ? opt_options : {};\n\n    super({\n      element: document.createElement('div'),\n      render: options.render || render,\n      target: options.target\n    });\n\n    /**\n     * @private\n     * @type {HTMLElement}\n     */\n    this.ulElement_ = document.createElement('ul');\n\n    /**\n     * @private\n     * @type {boolean}\n     */\n    this.collapsed_ = options.collapsed !== undefined ? options.collapsed : true;\n\n    /**\n     * @private\n     * @type {boolean}\n     */\n    this.overrideCollapsible_ = options.collapsible !== undefined;\n\n    /**\n     * @private\n     * @type {boolean}\n     */\n    this.collapsible_ = options.collapsible !== undefined ?\n      options.collapsible : true;\n\n    if (!this.collapsible_) {\n      this.collapsed_ = false;\n    }\n\n    const className = options.className !== undefined ? options.className : 'ol-attribution';\n\n    const tipLabel = options.tipLabel !== undefined ? options.tipLabel : 'Attributions';\n\n    const collapseLabel = options.collapseLabel !== undefined ? options.collapseLabel : '\\u00BB';\n\n    if (typeof collapseLabel === 'string') {\n      /**\n       * @private\n       * @type {HTMLElement}\n       */\n      this.collapseLabel_ = document.createElement('span');\n      this.collapseLabel_.textContent = collapseLabel;\n    } else {\n      this.collapseLabel_ = collapseLabel;\n    }\n\n    const label = options.label !== undefined ? options.label : 'i';\n\n    if (typeof label === 'string') {\n      /**\n       * @private\n       * @type {HTMLElement}\n       */\n      this.label_ = document.createElement('span');\n      this.label_.textContent = label;\n    } else {\n      this.label_ = label;\n    }\n\n\n    const activeLabel = (this.collapsible_ && !this.collapsed_) ?\n      this.collapseLabel_ : this.label_;\n    const button = document.createElement('button');\n    button.setAttribute('type', 'button');\n    button.title = tipLabel;\n    button.appendChild(activeLabel);\n\n    button.addEventListener(EventType.CLICK, this.handleClick_.bind(this), false);\n\n    const cssClasses = className + ' ' + CLASS_UNSELECTABLE + ' ' + CLASS_CONTROL +\n        (this.collapsed_ && this.collapsible_ ? ' ' + CLASS_COLLAPSED : '') +\n        (this.collapsible_ ? '' : ' ol-uncollapsible');\n    const element = this.element;\n    element.className = cssClasses;\n    element.appendChild(this.ulElement_);\n    element.appendChild(button);\n\n    /**\n     * A list of currently rendered resolutions.\n     * @type {Array<string>}\n     * @private\n     */\n    this.renderedAttributions_ = [];\n\n    /**\n     * @private\n     * @type {boolean}\n     */\n    this.renderedVisible_ = true;\n\n  }\n\n  /**\n   * Collect a list of visible attributions and set the collapsible state.\n   * @param {import(\"../PluggableMap.js\").FrameState} frameState Frame state.\n   * @return {Array<string>} Attributions.\n   * @private\n   */\n  collectSourceAttributions_(frameState) {\n    /**\n     * Used to determine if an attribution already exists.\n     * @type {!Object<string, boolean>}\n     */\n    const lookup = {};\n\n    /**\n     * A list of visible attributions.\n     * @type {Array<string>}\n     */\n    const visibleAttributions = [];\n\n    const layerStatesArray = frameState.layerStatesArray;\n    for (let i = 0, ii = layerStatesArray.length; i < ii; ++i) {\n      const layerState = layerStatesArray[i];\n      if (!inView(layerState, frameState.viewState)) {\n        continue;\n      }\n\n      const source = /** @type {import(\"../layer/Layer.js\").default} */ (layerState.layer).getSource();\n      if (!source) {\n        continue;\n      }\n\n      const attributionGetter = source.getAttributions();\n      if (!attributionGetter) {\n        continue;\n      }\n\n      const attributions = attributionGetter(frameState);\n      if (!attributions) {\n        continue;\n      }\n\n      if (!this.overrideCollapsible_ && source.getAttributionsCollapsible() === false) {\n        this.setCollapsible(false);\n      }\n\n      if (Array.isArray(attributions)) {\n        for (let j = 0, jj = attributions.length; j < jj; ++j) {\n          if (!(attributions[j] in lookup)) {\n            visibleAttributions.push(attributions[j]);\n            lookup[attributions[j]] = true;\n          }\n        }\n      } else {\n        if (!(attributions in lookup)) {\n          visibleAttributions.push(attributions);\n          lookup[attributions] = true;\n        }\n      }\n    }\n    return visibleAttributions;\n  }\n\n  /**\n   * @private\n   * @param {?import(\"../PluggableMap.js\").FrameState} frameState Frame state.\n   */\n  updateElement_(frameState) {\n    if (!frameState) {\n      if (this.renderedVisible_) {\n        this.element.style.display = 'none';\n        this.renderedVisible_ = false;\n      }\n      return;\n    }\n\n    const attributions = this.collectSourceAttributions_(frameState);\n\n    const visible = attributions.length > 0;\n    if (this.renderedVisible_ != visible) {\n      this.element.style.display = visible ? '' : 'none';\n      this.renderedVisible_ = visible;\n    }\n\n    if (equals(attributions, this.renderedAttributions_)) {\n      return;\n    }\n\n    removeChildren(this.ulElement_);\n\n    // append the attributions\n    for (let i = 0, ii = attributions.length; i < ii; ++i) {\n      const element = document.createElement('li');\n      element.innerHTML = attributions[i];\n      this.ulElement_.appendChild(element);\n    }\n\n    this.renderedAttributions_ = attributions;\n  }\n\n  /**\n   * @param {MouseEvent} event The event to handle\n   * @private\n   */\n  handleClick_(event) {\n    event.preventDefault();\n    this.handleToggle_();\n  }\n\n  /**\n   * @private\n   */\n  handleToggle_() {\n    this.element.classList.toggle(CLASS_COLLAPSED);\n    if (this.collapsed_) {\n      replaceNode(this.collapseLabel_, this.label_);\n    } else {\n      replaceNode(this.label_, this.collapseLabel_);\n    }\n    this.collapsed_ = !this.collapsed_;\n  }\n\n  /**\n   * Return `true` if the attribution is collapsible, `false` otherwise.\n   * @return {boolean} True if the widget is collapsible.\n   * @api\n   */\n  getCollapsible() {\n    return this.collapsible_;\n  }\n\n  /**\n   * Set whether the attribution should be collapsible.\n   * @param {boolean} collapsible True if the widget is collapsible.\n   * @api\n   */\n  setCollapsible(collapsible) {\n    if (this.collapsible_ === collapsible) {\n      return;\n    }\n    this.collapsible_ = collapsible;\n    this.element.classList.toggle('ol-uncollapsible');\n    if (!collapsible && this.collapsed_) {\n      this.handleToggle_();\n    }\n  }\n\n  /**\n   * Collapse or expand the attribution according to the passed parameter. Will\n   * not do anything if the attribution isn't collapsible or if the current\n   * collapsed state is already the one requested.\n   * @param {boolean} collapsed True if the widget is collapsed.\n   * @api\n   */\n  setCollapsed(collapsed) {\n    if (!this.collapsible_ || this.collapsed_ === collapsed) {\n      return;\n    }\n    this.handleToggle_();\n  }\n\n  /**\n   * Return `true` when the attribution is currently collapsed or `false`\n   * otherwise.\n   * @return {boolean} True if the widget is collapsed.\n   * @api\n   */\n  getCollapsed() {\n    return this.collapsed_;\n  }\n}\n\n\n/**\n * Update the attribution element.\n * @param {import(\"../MapEvent.js\").default} mapEvent Map event.\n * @this {Attribution}\n * @api\n */\nexport function render(mapEvent) {\n  this.updateElement_(mapEvent.frameState);\n}\n\n\nexport default Attribution;\n","/**\n * @module ol/interaction/PinchZoom\n */\nimport {FALSE} from '../functions.js';\nimport PointerInteraction, {centroid as centroidFromPointers} from './Pointer.js';\n\n\n/**\n * @typedef {Object} Options\n * @property {number} [duration=400] Animation duration in milliseconds.\n */\n\n\n/**\n * @classdesc\n * Allows the user to zoom the map by pinching with two fingers\n * on a touch screen.\n * @api\n */\nclass PinchZoom extends PointerInteraction {\n  /**\n   * @param {Options=} opt_options Options.\n   */\n  constructor(opt_options) {\n\n    const options = opt_options ? opt_options : {};\n\n    const pointerOptions = /** @type {import(\"./Pointer.js\").Options} */ (options);\n\n    if (!pointerOptions.stopDown) {\n      pointerOptions.stopDown = FALSE;\n    }\n\n    super(pointerOptions);\n\n    /**\n     * @private\n     * @type {import(\"../coordinate.js\").Coordinate}\n     */\n    this.anchor_ = null;\n\n    /**\n     * @private\n     * @type {number}\n     */\n    this.duration_ = options.duration !== undefined ? options.duration : 400;\n\n    /**\n     * @private\n     * @type {number|undefined}\n     */\n    this.lastDistance_ = undefined;\n\n    /**\n     * @private\n     * @type {number}\n     */\n    this.lastScaleDelta_ = 1;\n\n  }\n\n  /**\n   * @inheritDoc\n   */\n  handleDragEvent(mapBrowserEvent) {\n    let scaleDelta = 1.0;\n\n    const touch0 = this.targetPointers[0];\n    const touch1 = this.targetPointers[1];\n    const dx = touch0.clientX - touch1.clientX;\n    const dy = touch0.clientY - touch1.clientY;\n\n    // distance between touches\n    const distance = Math.sqrt(dx * dx + dy * dy);\n\n    if (this.lastDistance_ !== undefined) {\n      scaleDelta = this.lastDistance_ / distance;\n    }\n    this.lastDistance_ = distance;\n\n\n    const map = mapBrowserEvent.map;\n    const view = map.getView();\n\n    if (scaleDelta != 1.0) {\n      this.lastScaleDelta_ = scaleDelta;\n    }\n\n    // scale anchor point.\n    const viewportPosition = map.getViewport().getBoundingClientRect();\n    const centroid = centroidFromPointers(this.targetPointers);\n    centroid[0] -= viewportPosition.left;\n    centroid[1] -= viewportPosition.top;\n    this.anchor_ = map.getCoordinateFromPixelInternal(centroid);\n\n    // scale, bypass the resolution constraint\n    map.render();\n    view.adjustResolutionInternal(scaleDelta, this.anchor_);\n  }\n\n  /**\n   * @inheritDoc\n   */\n  handleUpEvent(mapBrowserEvent) {\n    if (this.targetPointers.length < 2) {\n      const map = mapBrowserEvent.map;\n      const view = map.getView();\n      const direction = this.lastScaleDelta_ > 1 ? 1 : -1;\n      view.endInteraction(this.duration_, direction);\n      return false;\n    } else {\n      return true;\n    }\n  }\n\n  /**\n   * @inheritDoc\n   */\n  handleDownEvent(mapBrowserEvent) {\n    if (this.targetPointers.length >= 2) {\n      const map = mapBrowserEvent.map;\n      this.anchor_ = null;\n      this.lastDistance_ = undefined;\n      this.lastScaleDelta_ = 1;\n      if (!this.handlingDownUpSequence) {\n        map.getView().beginInteraction();\n      }\n      return true;\n    } else {\n      return false;\n    }\n  }\n}\n\nexport default PinchZoom;\n","/**\n * @module ol/control/ZoomSlider\n */\nimport Control from './Control.js';\nimport {CLASS_CONTROL, CLASS_UNSELECTABLE} from '../css.js';\nimport {easeOut} from '../easing.js';\nimport {listen, unlistenByKey} from '../events.js';\nimport {stopPropagation} from '../events/Event.js';\nimport EventType from '../events/EventType.js';\nimport {clamp} from '../math.js';\nimport PointerEventType from '../pointer/EventType.js';\nimport '@openlayers/pepjs';\n\n\n/**\n * The enum for available directions.\n *\n * @enum {number}\n */\nconst Direction = {\n  VERTICAL: 0,\n  HORIZONTAL: 1\n};\n\n\n/**\n * @typedef {Object} Options\n * @property {string} [className='ol-zoomslider'] CSS class name.\n * @property {number} [duration=200] Animation duration in milliseconds.\n * @property {function(import(\"../MapEvent.js\").default)} [render] Function called when the control\n * should be re-rendered. This is called in a `requestAnimationFrame` callback.\n */\n\n\n/**\n * @classdesc\n * A slider type of control for zooming.\n *\n * Example:\n *\n *     map.addControl(new ZoomSlider());\n *\n * @api\n */\nclass ZoomSlider extends Control {\n\n  /**\n   * @param {Options=} opt_options Zoom slider options.\n   */\n  constructor(opt_options) {\n\n    const options = opt_options ? opt_options : {};\n\n    super({\n      element: document.createElement('div'),\n      render: options.render || render\n    });\n\n    /**\n      * @type {!Array.<import(\"../events.js\").EventsKey>}\n      * @private\n      */\n    this.dragListenerKeys_ = [];\n\n    /**\n     * Will hold the current resolution of the view.\n     *\n     * @type {number|undefined}\n     * @private\n     */\n    this.currentResolution_ = undefined;\n\n    /**\n     * The direction of the slider. Will be determined from actual display of the\n     * container and defaults to Direction.VERTICAL.\n     *\n     * @type {Direction}\n     * @private\n     */\n    this.direction_ = Direction.VERTICAL;\n\n    /**\n     * @type {boolean}\n     * @private\n     */\n    this.dragging_;\n\n    /**\n     * @type {number}\n     * @private\n     */\n    this.heightLimit_ = 0;\n\n    /**\n     * @type {number}\n     * @private\n     */\n    this.widthLimit_ = 0;\n\n    /**\n     * @type {number|undefined}\n     * @private\n     */\n    this.startX_;\n\n    /**\n     * @type {number|undefined}\n     * @private\n     */\n    this.startY_;\n\n    /**\n     * The calculated thumb size (border box plus margins).  Set when initSlider_\n     * is called.\n     * @type {import(\"../size.js\").Size}\n     * @private\n     */\n    this.thumbSize_ = null;\n\n    /**\n     * Whether the slider is initialized.\n     * @type {boolean}\n     * @private\n     */\n    this.sliderInitialized_ = false;\n\n    /**\n     * @type {number}\n     * @private\n     */\n    this.duration_ = options.duration !== undefined ? options.duration : 200;\n\n    const className = options.className !== undefined ? options.className : 'ol-zoomslider';\n    const thumbElement = document.createElement('button');\n    thumbElement.setAttribute('type', 'button');\n    thumbElement.className = className + '-thumb ' + CLASS_UNSELECTABLE;\n    const containerElement = this.element;\n    containerElement.setAttribute('touch-action', 'none');\n    containerElement.className = className + ' ' + CLASS_UNSELECTABLE + ' ' + CLASS_CONTROL;\n    containerElement.appendChild(thumbElement);\n\n    containerElement.addEventListener(PointerEventType.POINTERDOWN, this.handleDraggerStart_.bind(this), false);\n    containerElement.addEventListener(PointerEventType.POINTERMOVE, this.handleDraggerDrag_.bind(this), false);\n    containerElement.addEventListener(PointerEventType.POINTERUP, this.handleDraggerEnd_.bind(this), false);\n\n    containerElement.addEventListener(EventType.CLICK, this.handleContainerClick_.bind(this), false);\n    thumbElement.addEventListener(EventType.CLICK, stopPropagation, false);\n  }\n\n  /**\n   * @inheritDoc\n   */\n  setMap(map) {\n    super.setMap(map);\n    if (map) {\n      map.render();\n    }\n  }\n\n  /**\n   * Initializes the slider element. This will determine and set this controls\n   * direction_ and also constrain the dragging of the thumb to always be within\n   * the bounds of the container.\n   *\n   * @private\n   */\n  initSlider_() {\n    const container = this.element;\n    const containerSize = {\n      width: container.offsetWidth, height: container.offsetHeight\n    };\n\n    const thumb = /** @type {HTMLElement} */ (container.firstElementChild);\n    const computedStyle = getComputedStyle(thumb);\n    const thumbWidth = thumb.offsetWidth +\n        parseFloat(computedStyle['marginRight']) +\n        parseFloat(computedStyle['marginLeft']);\n    const thumbHeight = thumb.offsetHeight +\n        parseFloat(computedStyle['marginTop']) +\n        parseFloat(computedStyle['marginBottom']);\n    this.thumbSize_ = [thumbWidth, thumbHeight];\n\n    if (containerSize.width > containerSize.height) {\n      this.direction_ = Direction.HORIZONTAL;\n      this.widthLimit_ = containerSize.width - thumbWidth;\n    } else {\n      this.direction_ = Direction.VERTICAL;\n      this.heightLimit_ = containerSize.height - thumbHeight;\n    }\n    this.sliderInitialized_ = true;\n  }\n\n  /**\n   * @param {PointerEvent} event The browser event to handle.\n   * @private\n   */\n  handleContainerClick_(event) {\n    const view = this.getMap().getView();\n\n    const relativePosition = this.getRelativePosition_(\n      event.offsetX - this.thumbSize_[0] / 2,\n      event.offsetY - this.thumbSize_[1] / 2);\n\n    const resolution = this.getResolutionForPosition_(relativePosition);\n    const zoom = view.getConstrainedZoom(view.getZoomForResolution(resolution));\n\n    view.animateInternal({\n      zoom: zoom,\n      duration: this.duration_,\n      easing: easeOut\n    });\n  }\n\n  /**\n   * Handle dragger start events.\n   * @param {PointerEvent} event The drag event.\n   * @private\n   */\n  handleDraggerStart_(event) {\n    if (!this.dragging_ && event.target === this.element.firstElementChild) {\n      const element = /** @type {HTMLElement} */ (this.element.firstElementChild);\n      this.getMap().getView().beginInteraction();\n      this.startX_ = event.clientX - parseFloat(element.style.left);\n      this.startY_ = event.clientY - parseFloat(element.style.top);\n      this.dragging_ = true;\n\n      if (this.dragListenerKeys_.length === 0) {\n        const drag = this.handleDraggerDrag_;\n        const end = this.handleDraggerEnd_;\n        this.dragListenerKeys_.push(\n          listen(document, PointerEventType.POINTERMOVE, drag, this),\n          listen(document, PointerEventType.POINTERUP, end, this)\n        );\n      }\n    }\n  }\n\n  /**\n   * Handle dragger drag events.\n   *\n   * @param {PointerEvent} event The drag event.\n   * @private\n   */\n  handleDraggerDrag_(event) {\n    if (this.dragging_) {\n      const deltaX = event.clientX - this.startX_;\n      const deltaY = event.clientY - this.startY_;\n      const relativePosition = this.getRelativePosition_(deltaX, deltaY);\n      this.currentResolution_ = this.getResolutionForPosition_(relativePosition);\n      this.getMap().getView().setResolution(this.currentResolution_);\n    }\n  }\n\n  /**\n   * Handle dragger end events.\n   * @param {PointerEvent} event The drag event.\n   * @private\n   */\n  handleDraggerEnd_(event) {\n    if (this.dragging_) {\n      const view = this.getMap().getView();\n      view.endInteraction();\n\n      this.dragging_ = false;\n      this.startX_ = undefined;\n      this.startY_ = undefined;\n      this.dragListenerKeys_.forEach(unlistenByKey);\n      this.dragListenerKeys_.length = 0;\n    }\n  }\n\n  /**\n   * Positions the thumb inside its container according to the given resolution.\n   *\n   * @param {number} res The res.\n   * @private\n   */\n  setThumbPosition_(res) {\n    const position = this.getPositionForResolution_(res);\n    const thumb = /** @type {HTMLElement} */ (this.element.firstElementChild);\n\n    if (this.direction_ == Direction.HORIZONTAL) {\n      thumb.style.left = this.widthLimit_ * position + 'px';\n    } else {\n      thumb.style.top = this.heightLimit_ * position + 'px';\n    }\n  }\n\n  /**\n   * Calculates the relative position of the thumb given x and y offsets.  The\n   * relative position scales from 0 to 1.  The x and y offsets are assumed to be\n   * in pixel units within the dragger limits.\n   *\n   * @param {number} x Pixel position relative to the left of the slider.\n   * @param {number} y Pixel position relative to the top of the slider.\n   * @return {number} The relative position of the thumb.\n   * @private\n   */\n  getRelativePosition_(x, y) {\n    let amount;\n    if (this.direction_ === Direction.HORIZONTAL) {\n      amount = x / this.widthLimit_;\n    } else {\n      amount = y / this.heightLimit_;\n    }\n    return clamp(amount, 0, 1);\n  }\n\n  /**\n   * Calculates the corresponding resolution of the thumb given its relative\n   * position (where 0 is the minimum and 1 is the maximum).\n   *\n   * @param {number} position The relative position of the thumb.\n   * @return {number} The corresponding resolution.\n   * @private\n   */\n  getResolutionForPosition_(position) {\n    const fn = this.getMap().getView().getResolutionForValueFunction();\n    return fn(1 - position);\n  }\n\n  /**\n   * Determines the relative position of the slider for the given resolution.  A\n   * relative position of 0 corresponds to the minimum view resolution.  A\n   * relative position of 1 corresponds to the maximum view resolution.\n   *\n   * @param {number} res The resolution.\n   * @return {number} The relative position value (between 0 and 1).\n   * @private\n   */\n  getPositionForResolution_(res) {\n    const fn = this.getMap().getView().getValueForResolutionFunction();\n    return clamp(1 - fn(res), 0, 1);\n  }\n}\n\n\n/**\n * Update the zoomslider element.\n * @param {import(\"../MapEvent.js\").default} mapEvent Map event.\n * @this {ZoomSlider}\n * @api\n */\nexport function render(mapEvent) {\n  if (!mapEvent.frameState) {\n    return;\n  }\n  if (!this.sliderInitialized_) {\n    this.initSlider_();\n  }\n  const res = mapEvent.frameState.viewState.resolution;\n  this.currentResolution_ = res;\n  this.setThumbPosition_(res);\n}\n\n\nexport default ZoomSlider;\n","/**\n * @module ol/render/Box\n */\n\nimport Disposable from '../Disposable.js';\nimport Polygon from '../geom/Polygon.js';\n\nclass RenderBox extends Disposable {\n  /**\n   * @param {string} className CSS class name.\n   */\n  constructor(className) {\n    super();\n\n    /**\n     * @type {import(\"../geom/Polygon.js\").default}\n     * @private\n     */\n    this.geometry_ = null;\n\n    /**\n     * @type {HTMLDivElement}\n     * @private\n     */\n    this.element_ = document.createElement('div');\n    this.element_.style.position = 'absolute';\n    this.element_.className = 'ol-box ' + className;\n\n    /**\n     * @private\n     * @type {import(\"../PluggableMap.js\").default}\n     */\n    this.map_ = null;\n\n    /**\n     * @private\n     * @type {import(\"../pixel.js\").Pixel}\n     */\n    this.startPixel_ = null;\n\n    /**\n     * @private\n     * @type {import(\"../pixel.js\").Pixel}\n     */\n    this.endPixel_ = null;\n\n  }\n\n  /**\n   * @inheritDoc\n   */\n  disposeInternal() {\n    this.setMap(null);\n  }\n\n  /**\n   * @private\n   */\n  render_() {\n    const startPixel = this.startPixel_;\n    const endPixel = this.endPixel_;\n    const px = 'px';\n    const style = this.element_.style;\n    style.left = Math.min(startPixel[0], endPixel[0]) + px;\n    style.top = Math.min(startPixel[1], endPixel[1]) + px;\n    style.width = Math.abs(endPixel[0] - startPixel[0]) + px;\n    style.height = Math.abs(endPixel[1] - startPixel[1]) + px;\n  }\n\n  /**\n   * @param {import(\"../PluggableMap.js\").default} map Map.\n   */\n  setMap(map) {\n    if (this.map_) {\n      this.map_.getOverlayContainer().removeChild(this.element_);\n      const style = this.element_.style;\n      style.left = style.top = style.width = style.height = 'inherit';\n    }\n    this.map_ = map;\n    if (this.map_) {\n      this.map_.getOverlayContainer().appendChild(this.element_);\n    }\n  }\n\n  /**\n   * @param {import(\"../pixel.js\").Pixel} startPixel Start pixel.\n   * @param {import(\"../pixel.js\").Pixel} endPixel End pixel.\n   */\n  setPixels(startPixel, endPixel) {\n    this.startPixel_ = startPixel;\n    this.endPixel_ = endPixel;\n    this.createOrUpdateGeometry();\n    this.render_();\n  }\n\n  /**\n   * Creates or updates the cached geometry.\n   */\n  createOrUpdateGeometry() {\n    const startPixel = this.startPixel_;\n    const endPixel = this.endPixel_;\n    const pixels = [\n      startPixel,\n      [startPixel[0], endPixel[1]],\n      endPixel,\n      [endPixel[0], startPixel[1]]\n    ];\n    const coordinates = pixels.map(this.map_.getCoordinateFromPixelInternal, this.map_);\n    // close the polygon\n    coordinates[4] = coordinates[0].slice();\n    if (!this.geometry_) {\n      this.geometry_ = new Polygon([coordinates]);\n    } else {\n      this.geometry_.setCoordinates([coordinates]);\n    }\n  }\n\n  /**\n   * @return {import(\"../geom/Polygon.js\").default} Geometry.\n   */\n  getGeometry() {\n    return this.geometry_;\n  }\n}\n\n\nexport default RenderBox;\n","/**\n * @module ol/interaction/DragBox\n */\n// FIXME draw drag box\nimport Event from '../events/Event.js';\nimport {always, mouseOnly, mouseActionButton} from '../events/condition.js';\nimport {VOID} from '../functions.js';\nimport PointerInteraction from './Pointer.js';\nimport RenderBox from '../render/Box.js';\n\n\n/**\n * A function that takes a {@link module:ol/MapBrowserEvent} and two\n * {@link module:ol/pixel~Pixel}s and returns a `{boolean}`. If the condition is met,\n * true should be returned.\n * @typedef {function(this: ?, import(\"../MapBrowserEvent.js\").default, import(\"../pixel.js\").Pixel, import(\"../pixel.js\").Pixel):boolean} EndCondition\n */\n\n\n/**\n * @typedef {Object} Options\n * @property {string} [className='ol-dragbox'] CSS class name for styling the box.\n * @property {import(\"../events/condition.js\").Condition} [condition] A function that takes an {@link module:ol/MapBrowserEvent~MapBrowserEvent} and returns a boolean\n * to indicate whether that event should be handled.\n * Default is {@link ol/events/condition~always}.\n * @property {number} [minArea=64] The minimum area of the box in pixel, this value is used by the default\n * `boxEndCondition` function.\n * @property {EndCondition} [boxEndCondition] A function that takes a {@link module:ol/MapBrowserEvent~MapBrowserEvent} and two\n * {@link module:ol/pixel~Pixel}s to indicate whether a `boxend` event should be fired.\n * Default is `true` if the area of the box is bigger than the `minArea` option.\n * @property {function(this:DragBox, import(\"../MapBrowserEvent.js\").default)} [onBoxEnd] Code to execute just\n * before `boxend` is fired.\n */\n\n\n/**\n * @enum {string}\n */\nconst DragBoxEventType = {\n  /**\n   * Triggered upon drag box start.\n   * @event DragBoxEvent#boxstart\n   * @api\n   */\n  BOXSTART: 'boxstart',\n\n  /**\n   * Triggered on drag when box is active.\n   * @event DragBoxEvent#boxdrag\n   * @api\n   */\n  BOXDRAG: 'boxdrag',\n\n  /**\n   * Triggered upon drag box end.\n   * @event DragBoxEvent#boxend\n   * @api\n   */\n  BOXEND: 'boxend'\n};\n\n\n/**\n * @classdesc\n * Events emitted by {@link module:ol/interaction/DragBox~DragBox} instances are instances of\n * this type.\n */\nclass DragBoxEvent extends Event {\n\n  /**\n   * @param {string} type The event type.\n   * @param {import(\"../coordinate.js\").Coordinate} coordinate The event coordinate.\n   * @param {import(\"../MapBrowserEvent.js\").default} mapBrowserEvent Originating event.\n   */\n  constructor(type, coordinate, mapBrowserEvent) {\n    super(type);\n\n    /**\n     * The coordinate of the drag event.\n     * @const\n     * @type {import(\"../coordinate.js\").Coordinate}\n     * @api\n     */\n    this.coordinate = coordinate;\n\n    /**\n     * @const\n     * @type {import(\"../MapBrowserEvent.js\").default}\n     * @api\n     */\n    this.mapBrowserEvent = mapBrowserEvent;\n\n  }\n\n}\n\n\n/**\n * @classdesc\n * Allows the user to draw a vector box by clicking and dragging on the map,\n * normally combined with an {@link module:ol/events/condition} that limits\n * it to when the shift or other key is held down. This is used, for example,\n * for zooming to a specific area of the map\n * (see {@link module:ol/interaction/DragZoom~DragZoom} and\n * {@link module:ol/interaction/DragRotateAndZoom}).\n *\n * This interaction is only supported for mouse devices.\n *\n * @fires DragBoxEvent\n * @api\n */\nclass DragBox extends PointerInteraction {\n  /**\n   * @param {Options=} opt_options Options.\n   */\n  constructor(opt_options) {\n\n    super();\n\n    const options = opt_options ? opt_options : {};\n\n    /**\n     * @type {import(\"../render/Box.js\").default}\n     * @private\n     */\n    this.box_ = new RenderBox(options.className || 'ol-dragbox');\n\n    /**\n     * @type {number}\n     * @private\n     */\n    this.minArea_ = options.minArea !== undefined ? options.minArea : 64;\n\n    /**\n     * Function to execute just before `onboxend` is fired\n     * @type {function(this:DragBox, import(\"../MapBrowserEvent.js\").default): void}\n     * @private\n     */\n    this.onBoxEnd_ = options.onBoxEnd ? options.onBoxEnd : VOID;\n\n    /**\n     * @type {import(\"../pixel.js\").Pixel}\n     * @private\n     */\n    this.startPixel_ = null;\n\n    /**\n     * @private\n     * @type {import(\"../events/condition.js\").Condition}\n     */\n    this.condition_ = options.condition ? options.condition : always;\n\n    /**\n     * @private\n     * @type {EndCondition}\n     */\n    this.boxEndCondition_ = options.boxEndCondition ?\n      options.boxEndCondition : this.defaultBoxEndCondition;\n  }\n\n  /**\n   * The default condition for determining whether the boxend event\n   * should fire.\n   * @param {import(\"../MapBrowserEvent.js\").default} mapBrowserEvent The originating MapBrowserEvent\n   *     leading to the box end.\n   * @param {import(\"../pixel.js\").Pixel} startPixel The starting pixel of the box.\n   * @param {import(\"../pixel.js\").Pixel} endPixel The end pixel of the box.\n   * @return {boolean} Whether or not the boxend condition should be fired.\n   */\n  defaultBoxEndCondition(mapBrowserEvent, startPixel, endPixel) {\n    const width = endPixel[0] - startPixel[0];\n    const height = endPixel[1] - startPixel[1];\n    return width * width + height * height >= this.minArea_;\n  }\n\n  /**\n   * Returns geometry of last drawn box.\n   * @return {import(\"../geom/Polygon.js\").default} Geometry.\n   * @api\n   */\n  getGeometry() {\n    return this.box_.getGeometry();\n  }\n\n  /**\n   * @inheritDoc\n   */\n  handleDragEvent(mapBrowserEvent) {\n    if (!mouseOnly(mapBrowserEvent)) {\n      return;\n    }\n\n    this.box_.setPixels(this.startPixel_, mapBrowserEvent.pixel);\n\n    this.dispatchEvent(new DragBoxEvent(DragBoxEventType.BOXDRAG,\n      mapBrowserEvent.coordinate, mapBrowserEvent));\n  }\n\n  /**\n   * @inheritDoc\n   */\n  handleUpEvent(mapBrowserEvent) {\n    if (!mouseOnly(mapBrowserEvent)) {\n      return true;\n    }\n\n    this.box_.setMap(null);\n\n    if (this.boxEndCondition_(mapBrowserEvent, this.startPixel_, mapBrowserEvent.pixel)) {\n      this.onBoxEnd_(mapBrowserEvent);\n      this.dispatchEvent(new DragBoxEvent(DragBoxEventType.BOXEND,\n        mapBrowserEvent.coordinate, mapBrowserEvent));\n    }\n    return false;\n  }\n\n  /**\n   * @inheritDoc\n   */\n  handleDownEvent(mapBrowserEvent) {\n    if (!mouseOnly(mapBrowserEvent)) {\n      return false;\n    }\n\n    if (mouseActionButton(mapBrowserEvent) &&\n        this.condition_(mapBrowserEvent)) {\n      this.startPixel_ = mapBrowserEvent.pixel;\n      this.box_.setMap(mapBrowserEvent.map);\n      this.box_.setPixels(this.startPixel_, this.startPixel_);\n      this.dispatchEvent(new DragBoxEvent(DragBoxEventType.BOXSTART,\n        mapBrowserEvent.coordinate, mapBrowserEvent));\n      return true;\n    } else {\n      return false;\n    }\n  }\n}\n\n\nexport default DragBox;\n","/**\n * @module ol/structs/PriorityQueue\n */\nimport {assert} from '../asserts.js';\nimport {clear} from '../obj.js';\n\n\n/**\n * @type {number}\n */\nexport const DROP = Infinity;\n\n\n/**\n * @classdesc\n * Priority queue.\n *\n * The implementation is inspired from the Closure Library's Heap class and\n * Python's heapq module.\n *\n * See http://closure-library.googlecode.com/svn/docs/closure_goog_structs_heap.js.source.html\n * and http://hg.python.org/cpython/file/2.7/Lib/heapq.py.\n *\n * @template T\n */\nclass PriorityQueue {\n\n  /**\n   * @param {function(T): number} priorityFunction Priority function.\n   * @param {function(T): string} keyFunction Key function.\n   */\n  constructor(priorityFunction, keyFunction) {\n\n    /**\n     * @type {function(T): number}\n     * @private\n     */\n    this.priorityFunction_ = priorityFunction;\n\n    /**\n     * @type {function(T): string}\n     * @private\n     */\n    this.keyFunction_ = keyFunction;\n\n    /**\n     * @type {Array<T>}\n     * @private\n     */\n    this.elements_ = [];\n\n    /**\n     * @type {Array<number>}\n     * @private\n     */\n    this.priorities_ = [];\n\n    /**\n     * @type {!Object<string, boolean>}\n     * @private\n     */\n    this.queuedElements_ = {};\n\n  }\n\n  /**\n   * FIXME empty description for jsdoc\n   */\n  clear() {\n    this.elements_.length = 0;\n    this.priorities_.length = 0;\n    clear(this.queuedElements_);\n  }\n\n\n  /**\n   * Remove and return the highest-priority element. O(log N).\n   * @return {T} Element.\n   */\n  dequeue() {\n    const elements = this.elements_;\n    const priorities = this.priorities_;\n    const element = elements[0];\n    if (elements.length == 1) {\n      elements.length = 0;\n      priorities.length = 0;\n    } else {\n      elements[0] = elements.pop();\n      priorities[0] = priorities.pop();\n      this.siftUp_(0);\n    }\n    const elementKey = this.keyFunction_(element);\n    delete this.queuedElements_[elementKey];\n    return element;\n  }\n\n\n  /**\n   * Enqueue an element. O(log N).\n   * @param {T} element Element.\n   * @return {boolean} The element was added to the queue.\n   */\n  enqueue(element) {\n    assert(!(this.keyFunction_(element) in this.queuedElements_),\n      31); // Tried to enqueue an `element` that was already added to the queue\n    const priority = this.priorityFunction_(element);\n    if (priority != DROP) {\n      this.elements_.push(element);\n      this.priorities_.push(priority);\n      this.queuedElements_[this.keyFunction_(element)] = true;\n      this.siftDown_(0, this.elements_.length - 1);\n      return true;\n    }\n    return false;\n  }\n\n\n  /**\n   * @return {number} Count.\n   */\n  getCount() {\n    return this.elements_.length;\n  }\n\n\n  /**\n   * Gets the index of the left child of the node at the given index.\n   * @param {number} index The index of the node to get the left child for.\n   * @return {number} The index of the left child.\n   * @private\n   */\n  getLeftChildIndex_(index) {\n    return index * 2 + 1;\n  }\n\n\n  /**\n   * Gets the index of the right child of the node at the given index.\n   * @param {number} index The index of the node to get the right child for.\n   * @return {number} The index of the right child.\n   * @private\n   */\n  getRightChildIndex_(index) {\n    return index * 2 + 2;\n  }\n\n\n  /**\n   * Gets the index of the parent of the node at the given index.\n   * @param {number} index The index of the node to get the parent for.\n   * @return {number} The index of the parent.\n   * @private\n   */\n  getParentIndex_(index) {\n    return (index - 1) >> 1;\n  }\n\n\n  /**\n   * Make this a heap. O(N).\n   * @private\n   */\n  heapify_() {\n    let i;\n    for (i = (this.elements_.length >> 1) - 1; i >= 0; i--) {\n      this.siftUp_(i);\n    }\n  }\n\n\n  /**\n   * @return {boolean} Is empty.\n   */\n  isEmpty() {\n    return this.elements_.length === 0;\n  }\n\n\n  /**\n   * @param {string} key Key.\n   * @return {boolean} Is key queued.\n   */\n  isKeyQueued(key) {\n    return key in this.queuedElements_;\n  }\n\n\n  /**\n   * @param {T} element Element.\n   * @return {boolean} Is queued.\n   */\n  isQueued(element) {\n    return this.isKeyQueued(this.keyFunction_(element));\n  }\n\n\n  /**\n   * @param {number} index The index of the node to move down.\n   * @private\n   */\n  siftUp_(index) {\n    const elements = this.elements_;\n    const priorities = this.priorities_;\n    const count = elements.length;\n    const element = elements[index];\n    const priority = priorities[index];\n    const startIndex = index;\n\n    while (index < (count >> 1)) {\n      const lIndex = this.getLeftChildIndex_(index);\n      const rIndex = this.getRightChildIndex_(index);\n\n      const smallerChildIndex = rIndex < count &&\n          priorities[rIndex] < priorities[lIndex] ?\n        rIndex : lIndex;\n\n      elements[index] = elements[smallerChildIndex];\n      priorities[index] = priorities[smallerChildIndex];\n      index = smallerChildIndex;\n    }\n\n    elements[index] = element;\n    priorities[index] = priority;\n    this.siftDown_(startIndex, index);\n  }\n\n\n  /**\n   * @param {number} startIndex The index of the root.\n   * @param {number} index The index of the node to move up.\n   * @private\n   */\n  siftDown_(startIndex, index) {\n    const elements = this.elements_;\n    const priorities = this.priorities_;\n    const element = elements[index];\n    const priority = priorities[index];\n\n    while (index > startIndex) {\n      const parentIndex = this.getParentIndex_(index);\n      if (priorities[parentIndex] > priority) {\n        elements[index] = elements[parentIndex];\n        priorities[index] = priorities[parentIndex];\n        index = parentIndex;\n      } else {\n        break;\n      }\n    }\n    elements[index] = element;\n    priorities[index] = priority;\n  }\n\n\n  /**\n   * FIXME empty description for jsdoc\n   */\n  reprioritize() {\n    const priorityFunction = this.priorityFunction_;\n    const elements = this.elements_;\n    const priorities = this.priorities_;\n    let index = 0;\n    const n = elements.length;\n    let element, i, priority;\n    for (i = 0; i < n; ++i) {\n      element = elements[i];\n      priority = priorityFunction(element);\n      if (priority == DROP) {\n        delete this.queuedElements_[this.keyFunction_(element)];\n      } else {\n        priorities[index] = priority;\n        elements[index++] = element;\n      }\n    }\n    elements.length = index;\n    priorities.length = index;\n    this.heapify_();\n  }\n\n}\n\n\nexport default PriorityQueue;\n","/**\n * @module ol/featureloader\n */\nimport {VOID} from './functions.js';\nimport FormatType from './format/FormatType.js';\n\n/**\n *\n * @type {boolean}\n * @private\n */\nlet withCredentials = false;\n\n/**\n * {@link module:ol/source/Vector} sources use a function of this type to\n * load features.\n *\n * This function takes an {@link module:ol/extent~Extent} representing the area to be loaded,\n * a `{number}` representing the resolution (map units per pixel) and an\n * {@link module:ol/proj/Projection} for the projection  as\n * arguments. `this` within the function is bound to the\n * {@link module:ol/source/Vector} it's called from.\n *\n * The function is responsible for loading the features and adding them to the\n * source.\n * @typedef {function(this:(import(\"./source/Vector\").default|import(\"./VectorTile.js\").default), import(\"./extent.js\").Extent, number,\n *                    import(\"./proj/Projection.js\").default): void} FeatureLoader\n * @api\n */\n\n\n/**\n * {@link module:ol/source/Vector} sources use a function of this type to\n * get the url to load features from.\n *\n * This function takes an {@link module:ol/extent~Extent} representing the area\n * to be loaded, a `{number}` representing the resolution (map units per pixel)\n * and an {@link module:ol/proj/Projection} for the projection  as\n * arguments and returns a `{string}` representing the URL.\n * @typedef {function(import(\"./extent.js\").Extent, number, import(\"./proj/Projection.js\").default): string} FeatureUrlFunction\n * @api\n */\n\n\n/**\n * @param {string|FeatureUrlFunction} url Feature URL service.\n * @param {import(\"./format/Feature.js\").default} format Feature format.\n * @param {function(this:import(\"./VectorTile.js\").default, Array<import(\"./Feature.js\").default>, import(\"./proj/Projection.js\").default, import(\"./extent.js\").Extent): void|function(this:import(\"./source/Vector\").default, Array<import(\"./Feature.js\").default>): void} success\n *     Function called with the loaded features and optionally with the data\n *     projection. Called with the vector tile or source as `this`.\n * @param {function(this:import(\"./VectorTile.js\").default): void|function(this:import(\"./source/Vector\").default): void} failure\n *     Function called when loading failed. Called with the vector tile or\n *     source as `this`.\n * @return {FeatureLoader} The feature loader.\n */\nexport function loadFeaturesXhr(url, format, success, failure) {\n  return (\n    /**\n     * @param {import(\"./extent.js\").Extent} extent Extent.\n     * @param {number} resolution Resolution.\n     * @param {import(\"./proj/Projection.js\").default} projection Projection.\n     * @this {import(\"./source/Vector\").default|import(\"./VectorTile.js\").default}\n     */\n    function(extent, resolution, projection) {\n      const xhr = new XMLHttpRequest();\n      xhr.open('GET',\n        typeof url === 'function' ? url(extent, resolution, projection) : url,\n        true);\n      if (format.getType() == FormatType.ARRAY_BUFFER) {\n        xhr.responseType = 'arraybuffer';\n      }\n      xhr.withCredentials = withCredentials;\n      /**\n       * @param {Event} event Event.\n       * @private\n       */\n      xhr.onload = function(event) {\n        // status will be 0 for file:// urls\n        if (!xhr.status || xhr.status >= 200 && xhr.status < 300) {\n          const type = format.getType();\n          /** @type {Document|Node|Object|string|undefined} */\n          let source;\n          if (type == FormatType.JSON || type == FormatType.TEXT) {\n            source = xhr.responseText;\n          } else if (type == FormatType.XML) {\n            source = xhr.responseXML;\n            if (!source) {\n              source = new DOMParser().parseFromString(xhr.responseText, 'application/xml');\n            }\n          } else if (type == FormatType.ARRAY_BUFFER) {\n            source = /** @type {ArrayBuffer} */ (xhr.response);\n          }\n          if (source) {\n            success.call(this, format.readFeatures(source, {\n              extent: extent,\n              featureProjection: projection\n            }),\n            format.readProjection(source));\n          } else {\n            failure.call(this);\n          }\n        } else {\n          failure.call(this);\n        }\n      }.bind(this);\n      /**\n       * @private\n       */\n      xhr.onerror = function() {\n        failure.call(this);\n      }.bind(this);\n      xhr.send();\n    }\n  );\n}\n\n\n/**\n * Create an XHR feature loader for a `url` and `format`. The feature loader\n * loads features (with XHR), parses the features, and adds them to the\n * vector source.\n * @param {string|FeatureUrlFunction} url Feature URL service.\n * @param {import(\"./format/Feature.js\").default} format Feature format.\n * @return {FeatureLoader} The feature loader.\n * @api\n */\nexport function xhr(url, format) {\n  return loadFeaturesXhr(url, format,\n    /**\n     * @param {Array<import(\"./Feature.js\").default>} features The loaded features.\n     * @param {import(\"./proj/Projection.js\").default} dataProjection Data\n     * projection.\n     * @this {import(\"./source/Vector\").default|import(\"./VectorTile.js\").default}\n     */\n    function(features, dataProjection) {\n      const sourceOrTile = /** @type {?} */ (this);\n      if (typeof sourceOrTile.addFeatures === 'function') {\n        /** @type {import(\"./source/Vector\").default} */ (sourceOrTile).addFeatures(features);\n      }\n    }, /* FIXME handle error */ VOID);\n}\n\n/**\n * Setter for the withCredentials configuration for the XHR.\n *\n * @param {boolean} xhrWithCredentials The value of withCredentials to set.\n * Compare https://developer.mozilla.org/en-US/docs/Web/API/XMLHttpRequest/\n * @api\n */\nexport function setWithCredentials(xhrWithCredentials) {\n  withCredentials = xhrWithCredentials;\n}\n","/**\n * @module ol/geom/Circle\n */\nimport {createOrUpdate, forEachCorner, intersects} from '../extent.js';\nimport GeometryType from './GeometryType.js';\nimport SimpleGeometry from './SimpleGeometry.js';\nimport {deflateCoordinate} from './flat/deflate.js';\nimport {rotate, translate} from './flat/transform.js';\n\n\n/**\n * @classdesc\n * Circle geometry.\n *\n * @api\n */\nclass Circle extends SimpleGeometry {\n\n  /**\n   * @param {!import(\"../coordinate.js\").Coordinate} center Center.\n   *     For internal use, flat coordinates in combination with `opt_layout` and no\n   *     `opt_radius` are also accepted.\n   * @param {number=} opt_radius Radius.\n   * @param {import(\"./GeometryLayout.js\").default=} opt_layout Layout.\n   */\n  constructor(center, opt_radius, opt_layout) {\n    super();\n    if (opt_layout !== undefined && opt_radius === undefined) {\n      this.setFlatCoordinates(opt_layout, center);\n    } else {\n      const radius = opt_radius ? opt_radius : 0;\n      this.setCenterAndRadius(center, radius, opt_layout);\n    }\n  }\n\n  /**\n   * Make a complete copy of the geometry.\n   * @return {!Circle} Clone.\n   * @override\n   * @api\n   */\n  clone() {\n    return new Circle(this.flatCoordinates.slice(), undefined, this.layout);\n  }\n\n  /**\n   * @inheritDoc\n   */\n  closestPointXY(x, y, closestPoint, minSquaredDistance) {\n    const flatCoordinates = this.flatCoordinates;\n    const dx = x - flatCoordinates[0];\n    const dy = y - flatCoordinates[1];\n    const squaredDistance = dx * dx + dy * dy;\n    if (squaredDistance < minSquaredDistance) {\n      if (squaredDistance === 0) {\n        for (let i = 0; i < this.stride; ++i) {\n          closestPoint[i] = flatCoordinates[i];\n        }\n      } else {\n        const delta = this.getRadius() / Math.sqrt(squaredDistance);\n        closestPoint[0] = flatCoordinates[0] + delta * dx;\n        closestPoint[1] = flatCoordinates[1] + delta * dy;\n        for (let i = 2; i < this.stride; ++i) {\n          closestPoint[i] = flatCoordinates[i];\n        }\n      }\n      closestPoint.length = this.stride;\n      return squaredDistance;\n    } else {\n      return minSquaredDistance;\n    }\n  }\n\n  /**\n   * @inheritDoc\n   */\n  containsXY(x, y) {\n    const flatCoordinates = this.flatCoordinates;\n    const dx = x - flatCoordinates[0];\n    const dy = y - flatCoordinates[1];\n    return dx * dx + dy * dy <= this.getRadiusSquared_();\n  }\n\n  /**\n   * Return the center of the circle as {@link module:ol/coordinate~Coordinate coordinate}.\n   * @return {import(\"../coordinate.js\").Coordinate} Center.\n   * @api\n   */\n  getCenter() {\n    return this.flatCoordinates.slice(0, this.stride);\n  }\n\n  /**\n   * @inheritDoc\n   */\n  computeExtent(extent) {\n    const flatCoordinates = this.flatCoordinates;\n    const radius = flatCoordinates[this.stride] - flatCoordinates[0];\n    return createOrUpdate(\n      flatCoordinates[0] - radius, flatCoordinates[1] - radius,\n      flatCoordinates[0] + radius, flatCoordinates[1] + radius,\n      extent);\n  }\n\n  /**\n   * Return the radius of the circle.\n   * @return {number} Radius.\n   * @api\n   */\n  getRadius() {\n    return Math.sqrt(this.getRadiusSquared_());\n  }\n\n  /**\n   * @private\n   * @return {number} Radius squared.\n   */\n  getRadiusSquared_() {\n    const dx = this.flatCoordinates[this.stride] - this.flatCoordinates[0];\n    const dy = this.flatCoordinates[this.stride + 1] - this.flatCoordinates[1];\n    return dx * dx + dy * dy;\n  }\n\n  /**\n   * @inheritDoc\n   * @api\n   */\n  getType() {\n    return GeometryType.CIRCLE;\n  }\n\n  /**\n   * @inheritDoc\n   * @api\n   */\n  intersectsExtent(extent) {\n    const circleExtent = this.getExtent();\n    if (intersects(extent, circleExtent)) {\n      const center = this.getCenter();\n\n      if (extent[0] <= center[0] && extent[2] >= center[0]) {\n        return true;\n      }\n      if (extent[1] <= center[1] && extent[3] >= center[1]) {\n        return true;\n      }\n\n      return forEachCorner(extent, this.intersectsCoordinate.bind(this));\n    }\n    return false;\n\n  }\n\n  /**\n   * Set the center of the circle as {@link module:ol/coordinate~Coordinate coordinate}.\n   * @param {import(\"../coordinate.js\").Coordinate} center Center.\n   * @api\n   */\n  setCenter(center) {\n    const stride = this.stride;\n    const radius = this.flatCoordinates[stride] - this.flatCoordinates[0];\n    const flatCoordinates = center.slice();\n    flatCoordinates[stride] = flatCoordinates[0] + radius;\n    for (let i = 1; i < stride; ++i) {\n      flatCoordinates[stride + i] = center[i];\n    }\n    this.setFlatCoordinates(this.layout, flatCoordinates);\n    this.changed();\n  }\n\n  /**\n   * Set the center (as {@link module:ol/coordinate~Coordinate coordinate}) and the radius (as\n   * number) of the circle.\n   * @param {!import(\"../coordinate.js\").Coordinate} center Center.\n   * @param {number} radius Radius.\n   * @param {import(\"./GeometryLayout.js\").default=} opt_layout Layout.\n   * @api\n   */\n  setCenterAndRadius(center, radius, opt_layout) {\n    this.setLayout(opt_layout, center, 0);\n    if (!this.flatCoordinates) {\n      this.flatCoordinates = [];\n    }\n    /** @type {Array<number>} */\n    const flatCoordinates = this.flatCoordinates;\n    let offset = deflateCoordinate(\n      flatCoordinates, 0, center, this.stride);\n    flatCoordinates[offset++] = flatCoordinates[0] + radius;\n    for (let i = 1, ii = this.stride; i < ii; ++i) {\n      flatCoordinates[offset++] = flatCoordinates[i];\n    }\n    flatCoordinates.length = offset;\n    this.changed();\n  }\n\n  /**\n   * @inheritDoc\n   */\n  getCoordinates() {\n    return null;\n  }\n\n  /**\n   * @inheritDoc\n   */\n  setCoordinates(coordinates, opt_layout) {}\n\n  /**\n   * Set the radius of the circle. The radius is in the units of the projection.\n   * @param {number} radius Radius.\n   * @api\n   */\n  setRadius(radius) {\n    this.flatCoordinates[this.stride] = this.flatCoordinates[0] + radius;\n    this.changed();\n  }\n\n  /**\n   * @inheritDoc\n   * @api\n   */\n  rotate(angle, anchor) {\n    const center = this.getCenter();\n    const stride = this.getStride();\n    this.setCenter(rotate(center, 0, center.length, stride, angle, anchor, center));\n    this.changed();\n  }\n\n  /**\n   * @inheritDoc\n   * @api\n   */\n  translate(deltaX, deltaY) {\n    const center = this.getCenter();\n    const stride = this.getStride();\n    this.setCenter(translate(center, 0, center.length, stride, deltaX, deltaY, center));\n    this.changed();\n  }\n\n}\n\n\n/**\n * Transform each coordinate of the circle from one coordinate reference system\n * to another. The geometry is modified in place.\n * If you do not want the geometry modified in place, first clone() it and\n * then use this function on the clone.\n *\n * Internally a circle is currently represented by two points: the center of\n * the circle `[cx, cy]`, and the point to the right of the circle\n * `[cx + r, cy]`. This `transform` function just transforms these two points.\n * So the resulting geometry is also a circle, and that circle does not\n * correspond to the shape that would be obtained by transforming every point\n * of the original circle.\n *\n * @param {import(\"../proj.js\").ProjectionLike} source The current projection.  Can be a\n *     string identifier or a {@link module:ol/proj/Projection~Projection} object.\n * @param {import(\"../proj.js\").ProjectionLike} destination The desired projection.  Can be a\n *     string identifier or a {@link module:ol/proj/Projection~Projection} object.\n * @return {Circle} This geometry.  Note that original geometry is\n *     modified in place.\n * @function\n * @api\n */\nCircle.prototype.transform;\nexport default Circle;\n","/**\n * @module ol/interaction/DragRotateAndZoom\n */\nimport {shiftKeyOnly, mouseOnly} from '../events/condition.js';\nimport PointerInteraction from './Pointer.js';\n\n\n/**\n * @typedef {Object} Options\n * @property {import(\"../events/condition.js\").Condition} [condition] A function that\n * takes an {@link module:ol/MapBrowserEvent~MapBrowserEvent} and returns a\n * boolean to indicate whether that event should be handled.\n * Default is {@link module:ol/events/condition~shiftKeyOnly}.\n * @property {number} [duration=400] Animation duration in milliseconds.\n */\n\n\n/**\n * @classdesc\n * Allows the user to zoom and rotate the map by clicking and dragging\n * on the map.  By default, this interaction is limited to when the shift\n * key is held down.\n *\n * This interaction is only supported for mouse devices.\n *\n * And this interaction is not included in the default interactions.\n * @api\n */\nclass DragRotateAndZoom extends PointerInteraction {\n\n  /**\n   * @param {Options=} opt_options Options.\n   */\n  constructor(opt_options) {\n\n    const options = opt_options ? opt_options : {};\n\n    super(/** @type {import(\"./Pointer.js\").Options} */ (options));\n\n    /**\n     * @private\n     * @type {import(\"../events/condition.js\").Condition}\n     */\n    this.condition_ = options.condition ? options.condition : shiftKeyOnly;\n\n    /**\n     * @private\n     * @type {number|undefined}\n     */\n    this.lastAngle_ = undefined;\n\n    /**\n     * @private\n     * @type {number|undefined}\n     */\n    this.lastMagnitude_ = undefined;\n\n    /**\n     * @private\n     * @type {number}\n     */\n    this.lastScaleDelta_ = 0;\n\n    /**\n     * @private\n     * @type {number}\n     */\n    this.duration_ = options.duration !== undefined ? options.duration : 400;\n\n  }\n\n  /**\n   * @inheritDoc\n   */\n  handleDragEvent(mapBrowserEvent) {\n    if (!mouseOnly(mapBrowserEvent)) {\n      return;\n    }\n\n    const map = mapBrowserEvent.map;\n    const size = map.getSize();\n    const offset = mapBrowserEvent.pixel;\n    const deltaX = offset[0] - size[0] / 2;\n    const deltaY = size[1] / 2 - offset[1];\n    const theta = Math.atan2(deltaY, deltaX);\n    const magnitude = Math.sqrt(deltaX * deltaX + deltaY * deltaY);\n    const view = map.getView();\n    if (this.lastAngle_ !== undefined) {\n      const angleDelta = this.lastAngle_ - theta;\n      view.adjustRotationInternal(angleDelta);\n    }\n    this.lastAngle_ = theta;\n    if (this.lastMagnitude_ !== undefined) {\n      view.adjustResolutionInternal(this.lastMagnitude_ / magnitude);\n    }\n    if (this.lastMagnitude_ !== undefined) {\n      this.lastScaleDelta_ = this.lastMagnitude_ / magnitude;\n    }\n    this.lastMagnitude_ = magnitude;\n  }\n\n  /**\n   * @inheritDoc\n   */\n  handleUpEvent(mapBrowserEvent) {\n    if (!mouseOnly(mapBrowserEvent)) {\n      return true;\n    }\n\n    const map = mapBrowserEvent.map;\n    const view = map.getView();\n    const direction = this.lastScaleDelta_ > 1 ? 1 : -1;\n    view.endInteraction(this.duration_, direction);\n    this.lastScaleDelta_ = 0;\n    return false;\n  }\n\n  /**\n   * @inheritDoc\n   */\n  handleDownEvent(mapBrowserEvent) {\n    if (!mouseOnly(mapBrowserEvent)) {\n      return false;\n    }\n\n    if (this.condition_(mapBrowserEvent)) {\n      mapBrowserEvent.map.getView().beginInteraction();\n      this.lastAngle_ = undefined;\n      this.lastMagnitude_ = undefined;\n      return true;\n    } else {\n      return false;\n    }\n  }\n}\n\nexport default DragRotateAndZoom;\n","/**\n * @module ol/interaction/Snap\n */\nimport {getUid} from '../util.js';\nimport CollectionEventType from '../CollectionEventType.js';\nimport {distance as coordinateDistance, squaredDistance as squaredCoordinateDistance, closestOnCircle, closestOnSegment, squaredDistanceToSegment} from '../coordinate.js';\nimport {listen, unlistenByKey} from '../events.js';\nimport EventType from '../events/EventType.js';\nimport {boundingExtent, createEmpty} from '../extent.js';\nimport {TRUE, FALSE} from '../functions.js';\nimport GeometryType from '../geom/GeometryType.js';\nimport {fromCircle} from '../geom/Polygon.js';\nimport PointerInteraction from './Pointer.js';\nimport {getValues} from '../obj.js';\nimport VectorEventType from '../source/VectorEventType.js';\nimport RBush from '../structs/RBush.js';\n\n\n/**\n * @typedef {Object} Result\n * @property {boolean} snapped\n * @property {import(\"../coordinate.js\").Coordinate|null} vertex\n * @property {import(\"../pixel.js\").Pixel|null} vertexPixel\n */\n\n\n/**\n * @typedef {Object} SegmentData\n * @property {import(\"../Feature.js\").default} feature\n * @property {Array<import(\"../coordinate.js\").Coordinate>} segment\n */\n\n\n/**\n * @typedef {Object} Options\n * @property {import(\"../Collection.js\").default<import(\"../Feature.js\").default>} [features] Snap to these features. Either this option or source should be provided.\n * @property {boolean} [edge=true] Snap to edges.\n * @property {boolean} [vertex=true] Snap to vertices.\n * @property {number} [pixelTolerance=10] Pixel tolerance for considering the pointer close enough to a segment or\n * vertex for snapping.\n * @property {import(\"../source/Vector.js\").default} [source] Snap to features from this source. Either this option or features should be provided\n */\n\n\n/**\n * @param  {import(\"../source/Vector.js\").VectorSourceEvent|import(\"../Collection.js\").CollectionEvent} evt Event.\n * @return {import(\"../Feature.js\").default} Feature.\n */\nfunction getFeatureFromEvent(evt) {\n  if (/** @type {import(\"../source/Vector.js\").VectorSourceEvent} */ (evt).feature) {\n    return /** @type {import(\"../source/Vector.js\").VectorSourceEvent} */ (evt).feature;\n  } else if (/** @type {import(\"../Collection.js\").CollectionEvent} */ (evt).element) {\n    return /** @type {import(\"../Feature.js\").default} */ (/** @type {import(\"../Collection.js\").CollectionEvent} */ (evt).element);\n  }\n\n}\n\n/**\n * @classdesc\n * Handles snapping of vector features while modifying or drawing them.  The\n * features can come from a {@link module:ol/source/Vector} or {@link module:ol/Collection~Collection}\n * Any interaction object that allows the user to interact\n * with the features using the mouse can benefit from the snapping, as long\n * as it is added before.\n *\n * The snap interaction modifies map browser event `coordinate` and `pixel`\n * properties to force the snap to occur to any interaction that them.\n *\n * Example:\n *\n *     import Snap from 'ol/interaction/Snap';\n *\n *     var snap = new Snap({\n *       source: source\n *     });\n *\n * @api\n */\nclass Snap extends PointerInteraction {\n  /**\n   * @param {Options=} opt_options Options.\n   */\n  constructor(opt_options) {\n\n    const options = opt_options ? opt_options : {};\n\n    const pointerOptions = /** @type {import(\"./Pointer.js\").Options} */ (options);\n\n    if (!pointerOptions.handleDownEvent) {\n      pointerOptions.handleDownEvent = TRUE;\n    }\n\n    if (!pointerOptions.stopDown) {\n      pointerOptions.stopDown = FALSE;\n    }\n\n    super(pointerOptions);\n\n    /**\n     * @type {import(\"../source/Vector.js\").default}\n     * @private\n     */\n    this.source_ = options.source ? options.source : null;\n\n    /**\n     * @private\n     * @type {boolean}\n     */\n    this.vertex_ = options.vertex !== undefined ? options.vertex : true;\n\n    /**\n     * @private\n     * @type {boolean}\n     */\n    this.edge_ = options.edge !== undefined ? options.edge : true;\n\n    /**\n     * @type {import(\"../Collection.js\").default<import(\"../Feature.js\").default>}\n     * @private\n     */\n    this.features_ = options.features ? options.features : null;\n\n    /**\n     * @type {Array<import(\"../events.js\").EventsKey>}\n     * @private\n     */\n    this.featuresListenerKeys_ = [];\n\n    /**\n     * @type {Object<string, import(\"../events.js\").EventsKey>}\n     * @private\n     */\n    this.featureChangeListenerKeys_ = {};\n\n    /**\n     * Extents are preserved so indexed segment can be quickly removed\n     * when its feature geometry changes\n     * @type {Object<string, import(\"../extent.js\").Extent>}\n     * @private\n     */\n    this.indexedFeaturesExtents_ = {};\n\n    /**\n     * If a feature geometry changes while a pointer drag|move event occurs, the\n     * feature doesn't get updated right away.  It will be at the next 'pointerup'\n     * event fired.\n     * @type {!Object<string, import(\"../Feature.js\").default>}\n     * @private\n     */\n    this.pendingFeatures_ = {};\n\n    /**\n     * Used for distance sorting in sortByDistance_\n     * @type {import(\"../coordinate.js\").Coordinate}\n     * @private\n     */\n    this.pixelCoordinate_ = null;\n\n    /**\n     * @type {number}\n     * @private\n     */\n    this.pixelTolerance_ = options.pixelTolerance !== undefined ?\n      options.pixelTolerance : 10;\n\n    /**\n     * @type {function(SegmentData, SegmentData): number}\n     * @private\n     */\n    this.sortByDistance_ = sortByDistance.bind(this);\n\n\n    /**\n    * Segment RTree for each layer\n    * @type {import(\"../structs/RBush.js\").default<SegmentData>}\n    * @private\n    */\n    this.rBush_ = new RBush();\n\n\n    /**\n    * @const\n    * @private\n    * @type {Object<string, function(import(\"../Feature.js\").default, import(\"../geom/Geometry.js\").default): void>}\n    */\n    this.SEGMENT_WRITERS_ = {\n      'Point': this.writePointGeometry_,\n      'LineString': this.writeLineStringGeometry_,\n      'LinearRing': this.writeLineStringGeometry_,\n      'Polygon': this.writePolygonGeometry_,\n      'MultiPoint': this.writeMultiPointGeometry_,\n      'MultiLineString': this.writeMultiLineStringGeometry_,\n      'MultiPolygon': this.writeMultiPolygonGeometry_,\n      'GeometryCollection': this.writeGeometryCollectionGeometry_,\n      'Circle': this.writeCircleGeometry_\n    };\n  }\n\n  /**\n   * Add a feature to the collection of features that we may snap to.\n   * @param {import(\"../Feature.js\").default} feature Feature.\n   * @param {boolean=} opt_listen Whether to listen to the feature change or not\n   *     Defaults to `true`.\n   * @api\n   */\n  addFeature(feature, opt_listen) {\n    const register = opt_listen !== undefined ? opt_listen : true;\n    const feature_uid = getUid(feature);\n    const geometry = feature.getGeometry();\n    if (geometry) {\n      const segmentWriter = this.SEGMENT_WRITERS_[geometry.getType()];\n      if (segmentWriter) {\n        this.indexedFeaturesExtents_[feature_uid] = geometry.getExtent(createEmpty());\n        segmentWriter.call(this, feature, geometry);\n      }\n    }\n\n    if (register) {\n      this.featureChangeListenerKeys_[feature_uid] = listen(\n        feature,\n        EventType.CHANGE,\n        this.handleFeatureChange_, this);\n    }\n  }\n\n  /**\n   * @param {import(\"../Feature.js\").default} feature Feature.\n   * @private\n   */\n  forEachFeatureAdd_(feature) {\n    this.addFeature(feature);\n  }\n\n  /**\n   * @param {import(\"../Feature.js\").default} feature Feature.\n   * @private\n   */\n  forEachFeatureRemove_(feature) {\n    this.removeFeature(feature);\n  }\n\n  /**\n   * @return {import(\"../Collection.js\").default<import(\"../Feature.js\").default>|Array<import(\"../Feature.js\").default>} Features.\n   * @private\n   */\n  getFeatures_() {\n    let features;\n    if (this.features_) {\n      features = this.features_;\n    } else if (this.source_) {\n      features = this.source_.getFeatures();\n    }\n    return features;\n  }\n\n  /**\n   * @inheritDoc\n   */\n  handleEvent(evt) {\n    const result = this.snapTo(evt.pixel, evt.coordinate, evt.map);\n    if (result.snapped) {\n      evt.coordinate = result.vertex.slice(0, 2);\n      evt.pixel = result.vertexPixel;\n    }\n    return super.handleEvent(evt);\n  }\n\n  /**\n   * @param {import(\"../source/Vector.js\").VectorSourceEvent|import(\"../Collection.js\").CollectionEvent} evt Event.\n   * @private\n   */\n  handleFeatureAdd_(evt) {\n    const feature = getFeatureFromEvent(evt);\n    this.addFeature(feature);\n  }\n\n  /**\n   * @param {import(\"../source/Vector.js\").VectorSourceEvent|import(\"../Collection.js\").CollectionEvent} evt Event.\n   * @private\n   */\n  handleFeatureRemove_(evt) {\n    const feature = getFeatureFromEvent(evt);\n    this.removeFeature(feature);\n  }\n\n  /**\n   * @param {import(\"../events/Event.js\").default} evt Event.\n   * @private\n   */\n  handleFeatureChange_(evt) {\n    const feature = /** @type {import(\"../Feature.js\").default} */ (evt.target);\n    if (this.handlingDownUpSequence) {\n      const uid = getUid(feature);\n      if (!(uid in this.pendingFeatures_)) {\n        this.pendingFeatures_[uid] = feature;\n      }\n    } else {\n      this.updateFeature_(feature);\n    }\n  }\n\n  /**\n   * @inheritDoc\n   */\n  handleUpEvent(evt) {\n    const featuresToUpdate = getValues(this.pendingFeatures_);\n    if (featuresToUpdate.length) {\n      featuresToUpdate.forEach(this.updateFeature_.bind(this));\n      this.pendingFeatures_ = {};\n    }\n    return false;\n  }\n\n  /**\n   * Remove a feature from the collection of features that we may snap to.\n   * @param {import(\"../Feature.js\").default} feature Feature\n   * @param {boolean=} opt_unlisten Whether to unlisten to the feature change\n   *     or not. Defaults to `true`.\n   * @api\n   */\n  removeFeature(feature, opt_unlisten) {\n    const unregister = opt_unlisten !== undefined ? opt_unlisten : true;\n    const feature_uid = getUid(feature);\n    const extent = this.indexedFeaturesExtents_[feature_uid];\n    if (extent) {\n      const rBush = this.rBush_;\n      const nodesToRemove = [];\n      rBush.forEachInExtent(extent, function(node) {\n        if (feature === node.feature) {\n          nodesToRemove.push(node);\n        }\n      });\n      for (let i = nodesToRemove.length - 1; i >= 0; --i) {\n        rBush.remove(nodesToRemove[i]);\n      }\n    }\n\n    if (unregister) {\n      unlistenByKey(this.featureChangeListenerKeys_[feature_uid]);\n      delete this.featureChangeListenerKeys_[feature_uid];\n    }\n  }\n\n  /**\n   * @inheritDoc\n   */\n  setMap(map) {\n    const currentMap = this.getMap();\n    const keys = this.featuresListenerKeys_;\n    const features = /** @type {Array<import(\"../Feature.js\").default>} */ (this.getFeatures_());\n\n    if (currentMap) {\n      keys.forEach(unlistenByKey);\n      keys.length = 0;\n      features.forEach(this.forEachFeatureRemove_.bind(this));\n    }\n    super.setMap(map);\n\n    if (map) {\n      if (this.features_) {\n        keys.push(\n          listen(this.features_, CollectionEventType.ADD,\n            this.handleFeatureAdd_, this),\n          listen(this.features_, CollectionEventType.REMOVE,\n            this.handleFeatureRemove_, this)\n        );\n      } else if (this.source_) {\n        keys.push(\n          listen(this.source_, VectorEventType.ADDFEATURE,\n            this.handleFeatureAdd_, this),\n          listen(this.source_, VectorEventType.REMOVEFEATURE,\n            this.handleFeatureRemove_, this)\n        );\n      }\n      features.forEach(this.forEachFeatureAdd_.bind(this));\n    }\n  }\n\n  /**\n   * @param {import(\"../pixel.js\").Pixel} pixel Pixel\n   * @param {import(\"../coordinate.js\").Coordinate} pixelCoordinate Coordinate\n   * @param {import(\"../PluggableMap.js\").default} map Map.\n   * @return {Result} Snap result\n   */\n  snapTo(pixel, pixelCoordinate, map) {\n\n    const lowerLeft = map.getCoordinateFromPixelInternal(\n      [pixel[0] - this.pixelTolerance_, pixel[1] + this.pixelTolerance_]);\n    const upperRight = map.getCoordinateFromPixelInternal(\n      [pixel[0] + this.pixelTolerance_, pixel[1] - this.pixelTolerance_]);\n    const box = boundingExtent([lowerLeft, upperRight]);\n\n    let segments = this.rBush_.getInExtent(box);\n\n    // If snapping on vertices only, don't consider circles\n    if (this.vertex_ && !this.edge_) {\n      segments = segments.filter(function(segment) {\n        return segment.feature.getGeometry().getType() !==\n            GeometryType.CIRCLE;\n      });\n    }\n\n    let snappedToVertex = false;\n    let snapped = false;\n    let vertex = null;\n    let vertexPixel = null;\n    let dist, pixel1, pixel2, squaredDist1, squaredDist2;\n    if (segments.length > 0) {\n      this.pixelCoordinate_ = pixelCoordinate;\n      segments.sort(this.sortByDistance_);\n      const closestSegment = segments[0].segment;\n      const isCircle = segments[0].feature.getGeometry().getType() ===\n          GeometryType.CIRCLE;\n      if (this.vertex_ && !this.edge_) {\n        pixel1 = map.getPixelFromCoordinateInternal(closestSegment[0]);\n        pixel2 = map.getPixelFromCoordinateInternal(closestSegment[1]);\n        squaredDist1 = squaredCoordinateDistance(pixel, pixel1);\n        squaredDist2 = squaredCoordinateDistance(pixel, pixel2);\n        dist = Math.sqrt(Math.min(squaredDist1, squaredDist2));\n        snappedToVertex = dist <= this.pixelTolerance_;\n        if (snappedToVertex) {\n          snapped = true;\n          vertex = squaredDist1 > squaredDist2 ? closestSegment[1] : closestSegment[0];\n          vertexPixel = map.getPixelFromCoordinateInternal(vertex);\n        }\n      } else if (this.edge_) {\n        if (isCircle) {\n          vertex = closestOnCircle(pixelCoordinate,\n            /** @type {import(\"../geom/Circle.js\").default} */ (segments[0].feature.getGeometry()));\n        } else {\n          vertex = closestOnSegment(pixelCoordinate, closestSegment);\n        }\n        vertexPixel = map.getPixelFromCoordinateInternal(vertex);\n        if (coordinateDistance(pixel, vertexPixel) <= this.pixelTolerance_) {\n          snapped = true;\n          if (this.vertex_ && !isCircle) {\n            pixel1 = map.getPixelFromCoordinateInternal(closestSegment[0]);\n            pixel2 = map.getPixelFromCoordinateInternal(closestSegment[1]);\n            squaredDist1 = squaredCoordinateDistance(vertexPixel, pixel1);\n            squaredDist2 = squaredCoordinateDistance(vertexPixel, pixel2);\n            dist = Math.sqrt(Math.min(squaredDist1, squaredDist2));\n            snappedToVertex = dist <= this.pixelTolerance_;\n            if (snappedToVertex) {\n              vertex = squaredDist1 > squaredDist2 ? closestSegment[1] : closestSegment[0];\n              vertexPixel = map.getPixelFromCoordinateInternal(vertex);\n            }\n          }\n        }\n      }\n      if (snapped) {\n        vertexPixel = [Math.round(vertexPixel[0]), Math.round(vertexPixel[1])];\n      }\n    }\n    return {\n      snapped: snapped,\n      vertex: vertex,\n      vertexPixel: vertexPixel\n    };\n  }\n\n  /**\n   * @param {import(\"../Feature.js\").default} feature Feature\n   * @private\n   */\n  updateFeature_(feature) {\n    this.removeFeature(feature, false);\n    this.addFeature(feature, false);\n  }\n\n  /**\n   * @param {import(\"../Feature.js\").default} feature Feature\n   * @param {import(\"../geom/Circle.js\").default} geometry Geometry.\n   * @private\n   */\n  writeCircleGeometry_(feature, geometry) {\n    const polygon = fromCircle(geometry);\n    const coordinates = polygon.getCoordinates()[0];\n    for (let i = 0, ii = coordinates.length - 1; i < ii; ++i) {\n      const segment = coordinates.slice(i, i + 2);\n      const segmentData = {\n        feature: feature,\n        segment: segment\n      };\n      this.rBush_.insert(boundingExtent(segment), segmentData);\n    }\n  }\n\n  /**\n   * @param {import(\"../Feature.js\").default} feature Feature\n   * @param {import(\"../geom/GeometryCollection.js\").default} geometry Geometry.\n   * @private\n   */\n  writeGeometryCollectionGeometry_(feature, geometry) {\n    const geometries = geometry.getGeometriesArray();\n    for (let i = 0; i < geometries.length; ++i) {\n      const segmentWriter = this.SEGMENT_WRITERS_[geometries[i].getType()];\n      if (segmentWriter) {\n        segmentWriter.call(this, feature, geometries[i]);\n      }\n    }\n  }\n\n  /**\n   * @param {import(\"../Feature.js\").default} feature Feature\n   * @param {import(\"../geom/LineString.js\").default} geometry Geometry.\n   * @private\n   */\n  writeLineStringGeometry_(feature, geometry) {\n    const coordinates = geometry.getCoordinates();\n    for (let i = 0, ii = coordinates.length - 1; i < ii; ++i) {\n      const segment = coordinates.slice(i, i + 2);\n      const segmentData = {\n        feature: feature,\n        segment: segment\n      };\n      this.rBush_.insert(boundingExtent(segment), segmentData);\n    }\n  }\n\n  /**\n   * @param {import(\"../Feature.js\").default} feature Feature\n   * @param {import(\"../geom/MultiLineString.js\").default} geometry Geometry.\n   * @private\n   */\n  writeMultiLineStringGeometry_(feature, geometry) {\n    const lines = geometry.getCoordinates();\n    for (let j = 0, jj = lines.length; j < jj; ++j) {\n      const coordinates = lines[j];\n      for (let i = 0, ii = coordinates.length - 1; i < ii; ++i) {\n        const segment = coordinates.slice(i, i + 2);\n        const segmentData = {\n          feature: feature,\n          segment: segment\n        };\n        this.rBush_.insert(boundingExtent(segment), segmentData);\n      }\n    }\n  }\n\n  /**\n   * @param {import(\"../Feature.js\").default} feature Feature\n   * @param {import(\"../geom/MultiPoint.js\").default} geometry Geometry.\n   * @private\n   */\n  writeMultiPointGeometry_(feature, geometry) {\n    const points = geometry.getCoordinates();\n    for (let i = 0, ii = points.length; i < ii; ++i) {\n      const coordinates = points[i];\n      const segmentData = {\n        feature: feature,\n        segment: [coordinates, coordinates]\n      };\n      this.rBush_.insert(geometry.getExtent(), segmentData);\n    }\n  }\n\n  /**\n   * @param {import(\"../Feature.js\").default} feature Feature\n   * @param {import(\"../geom/MultiPolygon.js\").default} geometry Geometry.\n   * @private\n   */\n  writeMultiPolygonGeometry_(feature, geometry) {\n    const polygons = geometry.getCoordinates();\n    for (let k = 0, kk = polygons.length; k < kk; ++k) {\n      const rings = polygons[k];\n      for (let j = 0, jj = rings.length; j < jj; ++j) {\n        const coordinates = rings[j];\n        for (let i = 0, ii = coordinates.length - 1; i < ii; ++i) {\n          const segment = coordinates.slice(i, i + 2);\n          const segmentData = {\n            feature: feature,\n            segment: segment\n          };\n          this.rBush_.insert(boundingExtent(segment), segmentData);\n        }\n      }\n    }\n  }\n\n  /**\n   * @param {import(\"../Feature.js\").default} feature Feature\n   * @param {import(\"../geom/Point.js\").default} geometry Geometry.\n   * @private\n   */\n  writePointGeometry_(feature, geometry) {\n    const coordinates = geometry.getCoordinates();\n    const segmentData = {\n      feature: feature,\n      segment: [coordinates, coordinates]\n    };\n    this.rBush_.insert(geometry.getExtent(), segmentData);\n  }\n\n  /**\n   * @param {import(\"../Feature.js\").default} feature Feature\n   * @param {import(\"../geom/Polygon.js\").default} geometry Geometry.\n   * @private\n   */\n  writePolygonGeometry_(feature, geometry) {\n    const rings = geometry.getCoordinates();\n    for (let j = 0, jj = rings.length; j < jj; ++j) {\n      const coordinates = rings[j];\n      for (let i = 0, ii = coordinates.length - 1; i < ii; ++i) {\n        const segment = coordinates.slice(i, i + 2);\n        const segmentData = {\n          feature: feature,\n          segment: segment\n        };\n        this.rBush_.insert(boundingExtent(segment), segmentData);\n      }\n    }\n  }\n}\n\n\n/**\n * Sort segments by distance, helper function\n * @param {SegmentData} a The first segment data.\n * @param {SegmentData} b The second segment data.\n * @return {number} The difference in distance.\n * @this {Snap}\n */\nfunction sortByDistance(a, b) {\n  const deltaA = squaredDistanceToSegment(this.pixelCoordinate_, a.segment);\n  const deltaB = squaredDistanceToSegment(this.pixelCoordinate_, b.segment);\n  return deltaA - deltaB;\n}\n\nexport default Snap;\n","/**\n * @module ol/control/FullScreen\n */\nimport Control from './Control.js';\nimport {CLASS_CONTROL, CLASS_UNSELECTABLE, CLASS_UNSUPPORTED} from '../css.js';\nimport {replaceNode} from '../dom.js';\nimport {listen} from '../events.js';\nimport EventType from '../events/EventType.js';\n\nconst events = ['fullscreenchange', 'webkitfullscreenchange', 'MSFullscreenChange'];\n\n/**\n * @typedef {Object} Options\n * @property {string} [className='ol-full-screen'] CSS class name.\n * @property {string|Text} [label='\\u2922'] Text label to use for the button.\n * Instead of text, also an element (e.g. a `span` element) can be used.\n * @property {string|Text} [labelActive='\\u00d7'] Text label to use for the\n * button when full-screen is active.\n * Instead of text, also an element (e.g. a `span` element) can be used.\n * @property {string} [tipLabel='Toggle full-screen'] Text label to use for the button tip.\n * @property {boolean} [keys=false] Full keyboard access.\n * @property {HTMLElement|string} [target] Specify a target if you want the\n * control to be rendered outside of the map's viewport.\n * @property {HTMLElement|string} [source] The element to be displayed\n * fullscreen. When not provided, the element containing the map viewport will\n * be displayed fullscreen.\n */\n\n\n/**\n * @classdesc\n * Provides a button that when clicked fills up the full screen with the map.\n * The full screen source element is by default the element containing the map viewport unless\n * overridden by providing the `source` option. In which case, the dom\n * element introduced using this parameter will be displayed in full screen.\n *\n * When in full screen mode, a close button is shown to exit full screen mode.\n * The [Fullscreen API](http://www.w3.org/TR/fullscreen/) is used to\n * toggle the map in full screen mode.\n *\n * @api\n */\nclass FullScreen extends Control {\n\n  /**\n   * @param {Options=} opt_options Options.\n   */\n  constructor(opt_options) {\n\n    const options = opt_options ? opt_options : {};\n\n    super({\n      element: document.createElement('div'),\n      target: options.target\n    });\n\n    /**\n     * @private\n     * @type {string}\n     */\n    this.cssClassName_ = options.className !== undefined ? options.className :\n      'ol-full-screen';\n\n    const label = options.label !== undefined ? options.label : '\\u2922';\n\n    /**\n     * @private\n     * @type {Text}\n     */\n    this.labelNode_ = typeof label === 'string' ?\n      document.createTextNode(label) : label;\n\n    const labelActive = options.labelActive !== undefined ? options.labelActive : '\\u00d7';\n\n    /**\n     * @private\n     * @type {Text}\n     */\n    this.labelActiveNode_ = typeof labelActive === 'string' ?\n      document.createTextNode(labelActive) : labelActive;\n\n    /**\n     * @private\n     * @type {HTMLElement}\n     */\n    this.button_ = document.createElement('button');\n\n    const tipLabel = options.tipLabel ? options.tipLabel : 'Toggle full-screen';\n    this.setClassName_(this.button_, isFullScreen());\n    this.button_.setAttribute('type', 'button');\n    this.button_.title = tipLabel;\n    this.button_.appendChild(this.labelNode_);\n\n    this.button_.addEventListener(EventType.CLICK, this.handleClick_.bind(this), false);\n\n    const cssClasses = this.cssClassName_ + ' ' + CLASS_UNSELECTABLE +\n        ' ' + CLASS_CONTROL + ' ' +\n        (!isFullScreenSupported() ? CLASS_UNSUPPORTED : '');\n    const element = this.element;\n    element.className = cssClasses;\n    element.appendChild(this.button_);\n\n    /**\n     * @private\n     * @type {boolean}\n     */\n    this.keys_ = options.keys !== undefined ? options.keys : false;\n\n    /**\n     * @private\n     * @type {HTMLElement|string|undefined}\n     */\n    this.source_ = options.source;\n\n  }\n\n  /**\n   * @param {MouseEvent} event The event to handle\n   * @private\n   */\n  handleClick_(event) {\n    event.preventDefault();\n    this.handleFullScreen_();\n  }\n\n  /**\n   * @private\n   */\n  handleFullScreen_() {\n    if (!isFullScreenSupported()) {\n      return;\n    }\n    const map = this.getMap();\n    if (!map) {\n      return;\n    }\n    if (isFullScreen()) {\n      exitFullScreen();\n    } else {\n      let element;\n      if (this.source_) {\n        element = typeof this.source_ === 'string' ?\n          document.getElementById(this.source_) :\n          this.source_;\n      } else {\n        element = map.getTargetElement();\n      }\n      if (this.keys_) {\n        requestFullScreenWithKeys(element);\n\n      } else {\n        requestFullScreen(element);\n      }\n    }\n  }\n\n  /**\n   * @private\n   */\n  handleFullScreenChange_() {\n    const map = this.getMap();\n    if (isFullScreen()) {\n      this.setClassName_(this.button_, true);\n      replaceNode(this.labelActiveNode_, this.labelNode_);\n    } else {\n      this.setClassName_(this.button_, false);\n      replaceNode(this.labelNode_, this.labelActiveNode_);\n    }\n    if (map) {\n      map.updateSize();\n    }\n  }\n\n  /**\n   * @param {HTMLElement} element Target element\n   * @param {boolean} fullscreen True if fullscreen class name should be active\n   * @private\n   */\n  setClassName_(element, fullscreen) {\n    const activeClassName = this.cssClassName_ + '-true';\n    const inactiveClassName = this.cssClassName_ + '-false';\n    const nextClassName = fullscreen ? activeClassName : inactiveClassName;\n    element.classList.remove(activeClassName);\n    element.classList.remove(inactiveClassName);\n    element.classList.add(nextClassName);\n  }\n\n  /**\n   * @inheritDoc\n   * @api\n   */\n  setMap(map) {\n    super.setMap(map);\n    if (map) {\n      for (let i = 0, ii = events.length; i < ii; ++i) {\n        this.listenerKeys.push(\n          listen(document, events[i], this.handleFullScreenChange_, this));\n      }\n    }\n  }\n}\n\n\n/**\n * @return {boolean} Fullscreen is supported by the current platform.\n */\nfunction isFullScreenSupported() {\n  const body = document.body;\n  return !!(\n    body.webkitRequestFullscreen ||\n    (body.msRequestFullscreen && document.msFullscreenEnabled) ||\n    (body.requestFullscreen && document.fullscreenEnabled)\n  );\n}\n\n/**\n * @return {boolean} Element is currently in fullscreen.\n */\nfunction isFullScreen() {\n  return !!(\n    document.webkitIsFullScreen || document.msFullscreenElement || document.fullscreenElement\n  );\n}\n\n/**\n * Request to fullscreen an element.\n * @param {HTMLElement} element Element to request fullscreen\n */\nfunction requestFullScreen(element) {\n  if (element.requestFullscreen) {\n    element.requestFullscreen();\n  } else if (element.msRequestFullscreen) {\n    element.msRequestFullscreen();\n  } else if (element.webkitRequestFullscreen) {\n    element.webkitRequestFullscreen();\n  }\n}\n\n/**\n * Request to fullscreen an element with keyboard input.\n * @param {HTMLElement} element Element to request fullscreen\n */\nfunction requestFullScreenWithKeys(element) {\n  if (element.webkitRequestFullscreen) {\n    element.webkitRequestFullscreen();\n  } else {\n    requestFullScreen(element);\n  }\n}\n\n/**\n * Exit fullscreen.\n */\nfunction exitFullScreen() {\n  if (document.exitFullscreen) {\n    document.exitFullscreen();\n  } else if (document.msExitFullscreen) {\n    document.msExitFullscreen();\n  } else if (document.webkitExitFullscreen) {\n    document.webkitExitFullscreen();\n  }\n}\n\nexport default FullScreen;\n","/**\n * @module ol/format/GML2\n */\nimport {createOrUpdate} from '../extent.js';\nimport {transformExtentWithOptions, transformGeometryWithOptions} from './Feature.js';\nimport GMLBase, {GMLNS} from './GMLBase.js';\nimport {writeStringTextNode} from './xsd.js';\nimport {assign} from '../obj.js';\nimport {get as getProjection} from '../proj.js';\nimport {createElementNS, getAllTextContent, makeArrayPusher, makeChildAppender,\n  makeReplacer, makeSimpleNodeFactory, OBJECT_PROPERTY_NODE_FACTORY, pushParseAndPop, pushSerializeAndPop} from '../xml.js';\n\n\n/**\n * @const\n * @type {string}\n */\nconst schemaLocation = GMLNS + ' http://schemas.opengis.net/gml/2.1.2/feature.xsd';\n\n\n/**\n * @const\n * @type {Object<string, string>}\n */\nconst MULTIGEOMETRY_TO_MEMBER_NODENAME = {\n  'MultiLineString': 'lineStringMember',\n  'MultiCurve': 'curveMember',\n  'MultiPolygon': 'polygonMember',\n  'MultiSurface': 'surfaceMember'\n};\n\n\n/**\n * @classdesc\n * Feature format for reading and writing data in the GML format,\n * version 2.1.2.\n *\n * @api\n */\nclass GML2 extends GMLBase {\n\n  /**\n   * @param {import(\"./GMLBase.js\").Options=} opt_options Optional configuration object.\n   */\n  constructor(opt_options) {\n    const options = /** @type {import(\"./GMLBase.js\").Options} */\n        (opt_options ? opt_options : {});\n\n    super(options);\n\n    this.FEATURE_COLLECTION_PARSERS[GMLNS][\n      'featureMember'] =\n        makeArrayPusher(this.readFeaturesInternal);\n\n    /**\n     * @inheritDoc\n     */\n    this.schemaLocation = options.schemaLocation ?\n      options.schemaLocation : schemaLocation;\n\n  }\n\n  /**\n   * @param {Node} node Node.\n   * @param {Array<*>} objectStack Object stack.\n   * @private\n   * @return {Array<number>|undefined} Flat coordinates.\n   */\n  readFlatCoordinates_(node, objectStack) {\n    const s = getAllTextContent(node, false).replace(/^\\s*|\\s*$/g, '');\n    const context = /** @type {import(\"../xml.js\").NodeStackItem} */ (objectStack[0]);\n    const containerSrs = context['srsName'];\n    let axisOrientation = 'enu';\n    if (containerSrs) {\n      const proj = getProjection(containerSrs);\n      if (proj) {\n        axisOrientation = proj.getAxisOrientation();\n      }\n    }\n    const coordsGroups = s.trim().split(/\\s+/);\n    const flatCoordinates = [];\n    for (let i = 0, ii = coordsGroups.length; i < ii; i++) {\n      const coords = coordsGroups[i].split(/,+/);\n      const x = parseFloat(coords[0]);\n      const y = parseFloat(coords[1]);\n      const z = (coords.length === 3) ? parseFloat(coords[2]) : 0;\n      if (axisOrientation.substr(0, 2) === 'en') {\n        flatCoordinates.push(x, y, z);\n      } else {\n        flatCoordinates.push(y, x, z);\n      }\n    }\n    return flatCoordinates;\n  }\n\n  /**\n   * @param {Element} node Node.\n   * @param {Array<*>} objectStack Object stack.\n   * @private\n   * @return {import(\"../extent.js\").Extent|undefined} Envelope.\n   */\n  readBox_(node, objectStack) {\n    /** @type {Array<number>} */\n    const flatCoordinates = pushParseAndPop([null],\n      this.BOX_PARSERS_, node, objectStack, this);\n    return createOrUpdate(flatCoordinates[1][0],\n      flatCoordinates[1][1], flatCoordinates[1][3],\n      flatCoordinates[1][4]);\n  }\n\n  /**\n   * @param {Element} node Node.\n   * @param {Array<*>} objectStack Object stack.\n   * @private\n   */\n  innerBoundaryIsParser_(node, objectStack) {\n    /** @type {Array<number>|undefined} */\n    const flatLinearRing = pushParseAndPop(undefined,\n      this.RING_PARSERS, node, objectStack, this);\n    if (flatLinearRing) {\n      const flatLinearRings = /** @type {Array<Array<number>>} */\n          (objectStack[objectStack.length - 1]);\n      flatLinearRings.push(flatLinearRing);\n    }\n  }\n\n  /**\n   * @param {Element} node Node.\n   * @param {Array<*>} objectStack Object stack.\n   * @private\n   */\n  outerBoundaryIsParser_(node, objectStack) {\n    /** @type {Array<number>|undefined} */\n    const flatLinearRing = pushParseAndPop(undefined,\n      this.RING_PARSERS, node, objectStack, this);\n    if (flatLinearRing) {\n      const flatLinearRings = /** @type {Array<Array<number>>} */\n          (objectStack[objectStack.length - 1]);\n      flatLinearRings[0] = flatLinearRing;\n    }\n  }\n\n  /**\n   * @const\n   * @param {*} value Value.\n   * @param {Array<*>} objectStack Object stack.\n   * @param {string=} opt_nodeName Node name.\n   * @return {Element|undefined} Node.\n   * @private\n   */\n  GEOMETRY_NODE_FACTORY_(value, objectStack, opt_nodeName) {\n    const context = objectStack[objectStack.length - 1];\n    const multiSurface = context['multiSurface'];\n    const surface = context['surface'];\n    const multiCurve = context['multiCurve'];\n    let nodeName;\n    if (!Array.isArray(value)) {\n      nodeName = /** @type {import(\"../geom/Geometry.js\").default} */ (value).getType();\n      if (nodeName === 'MultiPolygon' && multiSurface === true) {\n        nodeName = 'MultiSurface';\n      } else if (nodeName === 'Polygon' && surface === true) {\n        nodeName = 'Surface';\n      } else if (nodeName === 'MultiLineString' && multiCurve === true) {\n        nodeName = 'MultiCurve';\n      }\n    } else {\n      nodeName = 'Envelope';\n    }\n    return createElementNS('http://www.opengis.net/gml',\n      nodeName);\n  }\n\n  /**\n   * @param {Element} node Node.\n   * @param {import(\"../Feature.js\").default} feature Feature.\n   * @param {Array<*>} objectStack Node stack.\n   */\n  writeFeatureElement(node, feature, objectStack) {\n    const fid = feature.getId();\n    if (fid) {\n      node.setAttribute('fid', /** @type {string} */ (fid));\n    }\n    const context = /** @type {Object} */ (objectStack[objectStack.length - 1]);\n    const featureNS = context['featureNS'];\n    const geometryName = feature.getGeometryName();\n    if (!context.serializers) {\n      context.serializers = {};\n      context.serializers[featureNS] = {};\n    }\n    const properties = feature.getProperties();\n    const keys = [];\n    const values = [];\n    for (const key in properties) {\n      const value = properties[key];\n      if (value !== null) {\n        keys.push(key);\n        values.push(value);\n        if (key == geometryName || typeof /** @type {?} */ (value).getSimplifiedGeometry === 'function') {\n          if (!(key in context.serializers[featureNS])) {\n            context.serializers[featureNS][key] = makeChildAppender(\n              this.writeGeometryElement, this);\n          }\n        } else {\n          if (!(key in context.serializers[featureNS])) {\n            context.serializers[featureNS][key] = makeChildAppender(writeStringTextNode);\n          }\n        }\n      }\n    }\n    const item = assign({}, context);\n    item.node = node;\n    pushSerializeAndPop(/** @type {import(\"../xml.js\").NodeStackItem} */\n      (item), context.serializers,\n      makeSimpleNodeFactory(undefined, featureNS),\n      values,\n      objectStack, keys);\n  }\n\n  /**\n   * @param {Element} node Node.\n   * @param {import(\"../geom/LineString.js\").default} geometry LineString geometry.\n   * @param {Array<*>} objectStack Node stack.\n   * @private\n   */\n  writeCurveOrLineString_(node, geometry, objectStack) {\n    const context = objectStack[objectStack.length - 1];\n    const srsName = context['srsName'];\n    if (node.nodeName !== 'LineStringSegment' && srsName) {\n      node.setAttribute('srsName', srsName);\n    }\n    if (node.nodeName === 'LineString' ||\n        node.nodeName === 'LineStringSegment') {\n      const coordinates = this.createCoordinatesNode_(node.namespaceURI);\n      node.appendChild(coordinates);\n      this.writeCoordinates_(coordinates, geometry, objectStack);\n    } else if (node.nodeName === 'Curve') {\n      const segments = createElementNS(node.namespaceURI, 'segments');\n      node.appendChild(segments);\n      this.writeCurveSegments_(segments,\n        geometry, objectStack);\n    }\n  }\n\n  /**\n   * @param {Element} node Node.\n   * @param {import(\"../geom/LineString.js\").default} line LineString geometry.\n   * @param {Array<*>} objectStack Node stack.\n   * @private\n   */\n  writeLineStringOrCurveMember_(node, line, objectStack) {\n    const child = this.GEOMETRY_NODE_FACTORY_(line, objectStack);\n    if (child) {\n      node.appendChild(child);\n      this.writeCurveOrLineString_(child, line, objectStack);\n    }\n  }\n\n  /**\n   * @param {Element} node Node.\n   * @param {import(\"../geom/MultiLineString.js\").default} geometry MultiLineString geometry.\n   * @param {Array<*>} objectStack Node stack.\n   * @private\n   */\n  writeMultiCurveOrLineString_(node, geometry, objectStack) {\n    const context = objectStack[objectStack.length - 1];\n    const hasZ = context['hasZ'];\n    const srsName = context['srsName'];\n    const curve = context['curve'];\n    if (srsName) {\n      node.setAttribute('srsName', srsName);\n    }\n    const lines = geometry.getLineStrings();\n    pushSerializeAndPop({node: node, hasZ: hasZ, srsName: srsName, curve: curve},\n      this.LINESTRINGORCURVEMEMBER_SERIALIZERS_,\n      this.MULTIGEOMETRY_MEMBER_NODE_FACTORY_, lines,\n      objectStack, undefined, this);\n  }\n\n  /**\n   * @param {Node} node Node.\n   * @param {import(\"../geom/Geometry.js\").default|import(\"../extent.js\").Extent} geometry Geometry.\n   * @param {Array<*>} objectStack Node stack.\n   */\n  writeGeometryElement(node, geometry, objectStack) {\n    const context = /** @type {import(\"./Feature.js\").WriteOptions} */ (objectStack[objectStack.length - 1]);\n    const item = assign({}, context);\n    item['node'] = node;\n    let value;\n    if (Array.isArray(geometry)) {\n      value = transformExtentWithOptions(/** @type {import(\"../extent.js\").Extent} */ (geometry), context);\n    } else {\n      value = transformGeometryWithOptions(/** @type {import(\"../geom/Geometry.js\").default} */ (geometry), true, context);\n    }\n    pushSerializeAndPop(/** @type {import(\"../xml.js\").NodeStackItem} */\n      (item), this.GEOMETRY_SERIALIZERS_,\n      this.GEOMETRY_NODE_FACTORY_, [value],\n      objectStack, undefined, this);\n  }\n\n  /**\n   * @param {string} namespaceURI XML namespace.\n   * @returns {Element} coordinates node.\n   * @private\n   */\n  createCoordinatesNode_(namespaceURI) {\n    const coordinates = createElementNS(namespaceURI, 'coordinates');\n    coordinates.setAttribute('decimal', '.');\n    coordinates.setAttribute('cs', ',');\n    coordinates.setAttribute('ts', ' ');\n\n    return coordinates;\n  }\n\n  /**\n   * @param {Node} node Node.\n   * @param {import(\"../geom/LineString.js\").default|import(\"../geom/LinearRing.js\").default} value Geometry.\n   * @param {Array<*>} objectStack Node stack.\n   * @private\n   */\n  writeCoordinates_(node, value, objectStack) {\n    const context = objectStack[objectStack.length - 1];\n    const hasZ = context['hasZ'];\n    const srsName = context['srsName'];\n    // only 2d for simple features profile\n    const points = value.getCoordinates();\n    const len = points.length;\n    const parts = new Array(len);\n    for (let i = 0; i < len; ++i) {\n      const point = points[i];\n      parts[i] = this.getCoords_(point, srsName, hasZ);\n    }\n    writeStringTextNode(node, parts.join(' '));\n  }\n\n  /**\n   * @param {Node} node Node.\n   * @param {import(\"../geom/LineString.js\").default} line LineString geometry.\n   * @param {Array<*>} objectStack Node stack.\n   * @private\n   */\n  writeCurveSegments_(node, line, objectStack) {\n    const child = createElementNS(node.namespaceURI, 'LineStringSegment');\n    node.appendChild(child);\n    this.writeCurveOrLineString_(child, line, objectStack);\n  }\n\n  /**\n   * @param {Element} node Node.\n   * @param {import(\"../geom/Polygon.js\").default} geometry Polygon geometry.\n   * @param {Array<*>} objectStack Node stack.\n   * @private\n   */\n  writeSurfaceOrPolygon_(node, geometry, objectStack) {\n    const context = objectStack[objectStack.length - 1];\n    const hasZ = context['hasZ'];\n    const srsName = context['srsName'];\n    if (node.nodeName !== 'PolygonPatch' && srsName) {\n      node.setAttribute('srsName', srsName);\n    }\n    if (node.nodeName === 'Polygon' || node.nodeName === 'PolygonPatch') {\n      const rings = geometry.getLinearRings();\n      pushSerializeAndPop(\n        {node: node, hasZ: hasZ, srsName: srsName},\n        this.RING_SERIALIZERS_,\n        this.RING_NODE_FACTORY_,\n        rings, objectStack, undefined, this);\n    } else if (node.nodeName === 'Surface') {\n      const patches = createElementNS(node.namespaceURI, 'patches');\n      node.appendChild(patches);\n      this.writeSurfacePatches_(\n        patches, geometry, objectStack);\n    }\n  }\n\n  /**\n   * @param {*} value Value.\n   * @param {Array<*>} objectStack Object stack.\n   * @param {string=} opt_nodeName Node name.\n   * @return {Node} Node.\n   * @private\n   */\n  RING_NODE_FACTORY_(value, objectStack, opt_nodeName) {\n    const context = objectStack[objectStack.length - 1];\n    const parentNode = context.node;\n    const exteriorWritten = context['exteriorWritten'];\n    if (exteriorWritten === undefined) {\n      context['exteriorWritten'] = true;\n    }\n    return createElementNS(parentNode.namespaceURI,\n      exteriorWritten !== undefined ? 'innerBoundaryIs' : 'outerBoundaryIs');\n  }\n\n  /**\n   * @param {Node} node Node.\n   * @param {import(\"../geom/Polygon.js\").default} polygon Polygon geometry.\n   * @param {Array<*>} objectStack Node stack.\n   * @private\n   */\n  writeSurfacePatches_(node, polygon, objectStack) {\n    const child = createElementNS(node.namespaceURI, 'PolygonPatch');\n    node.appendChild(child);\n    this.writeSurfaceOrPolygon_(child, polygon, objectStack);\n  }\n\n  /**\n   * @param {Node} node Node.\n   * @param {import(\"../geom/LinearRing.js\").default} ring LinearRing geometry.\n   * @param {Array<*>} objectStack Node stack.\n   * @private\n   */\n  writeRing_(node, ring, objectStack) {\n    const linearRing = createElementNS(node.namespaceURI, 'LinearRing');\n    node.appendChild(linearRing);\n    this.writeLinearRing_(linearRing, ring, objectStack);\n  }\n\n  /**\n   * @param {Array<number>} point Point geometry.\n   * @param {string=} opt_srsName Optional srsName\n   * @param {boolean=} opt_hasZ whether the geometry has a Z coordinate (is 3D) or not.\n   * @return {string} The coords string.\n   * @private\n   */\n  getCoords_(point, opt_srsName, opt_hasZ) {\n    let axisOrientation = 'enu';\n    if (opt_srsName) {\n      axisOrientation = getProjection(opt_srsName).getAxisOrientation();\n    }\n    let coords = ((axisOrientation.substr(0, 2) === 'en') ?\n      point[0] + ',' + point[1] :\n      point[1] + ',' + point[0]);\n    if (opt_hasZ) {\n      // For newly created points, Z can be undefined.\n      const z = point[2] || 0;\n      coords += ',' + z;\n    }\n\n    return coords;\n  }\n\n  /**\n   * @param {Element} node Node.\n   * @param {import(\"../geom/Point.js\").default} geometry Point geometry.\n   * @param {Array<*>} objectStack Node stack.\n   * @private\n   */\n  writePoint_(node, geometry, objectStack) {\n    const context = objectStack[objectStack.length - 1];\n    const hasZ = context['hasZ'];\n    const srsName = context['srsName'];\n    if (srsName) {\n      node.setAttribute('srsName', srsName);\n    }\n    const coordinates = this.createCoordinatesNode_(node.namespaceURI);\n    node.appendChild(coordinates);\n    const point = geometry.getCoordinates();\n    const coord = this.getCoords_(point, srsName, hasZ);\n    writeStringTextNode(coordinates, coord);\n  }\n\n  /**\n   * @param {Element} node Node.\n   * @param {import(\"../geom/MultiPoint.js\").default} geometry MultiPoint geometry.\n   * @param {Array<*>} objectStack Node stack.\n   * @private\n   */\n  writeMultiPoint_(node, geometry, objectStack) {\n    const context = objectStack[objectStack.length - 1];\n    const hasZ = context['hasZ'];\n    const srsName = context['srsName'];\n    if (srsName) {\n      node.setAttribute('srsName', srsName);\n    }\n    const points = geometry.getPoints();\n    pushSerializeAndPop({node: node, hasZ: hasZ, srsName: srsName},\n      this.POINTMEMBER_SERIALIZERS_,\n      makeSimpleNodeFactory('pointMember'), points,\n      objectStack, undefined, this);\n  }\n\n  /**\n   * @param {Node} node Node.\n   * @param {import(\"../geom/Point.js\").default} point Point geometry.\n   * @param {Array<*>} objectStack Node stack.\n   * @private\n   */\n  writePointMember_(node, point, objectStack) {\n    const child = createElementNS(node.namespaceURI, 'Point');\n    node.appendChild(child);\n    this.writePoint_(child, point, objectStack);\n  }\n\n  /**\n   * @param {Element} node Node.\n   * @param {import(\"../geom/LinearRing.js\").default} geometry LinearRing geometry.\n   * @param {Array<*>} objectStack Node stack.\n   * @private\n   */\n  writeLinearRing_(node, geometry, objectStack) {\n    const context = objectStack[objectStack.length - 1];\n    const srsName = context['srsName'];\n    if (srsName) {\n      node.setAttribute('srsName', srsName);\n    }\n    const coordinates = this.createCoordinatesNode_(node.namespaceURI);\n    node.appendChild(coordinates);\n    this.writeCoordinates_(coordinates, geometry, objectStack);\n  }\n\n  /**\n   * @param {Element} node Node.\n   * @param {import(\"../geom/MultiPolygon.js\").default} geometry MultiPolygon geometry.\n   * @param {Array<*>} objectStack Node stack.\n   * @private\n   */\n  writeMultiSurfaceOrPolygon_(node, geometry, objectStack) {\n    const context = objectStack[objectStack.length - 1];\n    const hasZ = context['hasZ'];\n    const srsName = context['srsName'];\n    const surface = context['surface'];\n    if (srsName) {\n      node.setAttribute('srsName', srsName);\n    }\n    const polygons = geometry.getPolygons();\n    pushSerializeAndPop({node: node, hasZ: hasZ, srsName: srsName, surface: surface},\n      this.SURFACEORPOLYGONMEMBER_SERIALIZERS_,\n      this.MULTIGEOMETRY_MEMBER_NODE_FACTORY_, polygons,\n      objectStack, undefined, this);\n  }\n\n  /**\n   * @param {Node} node Node.\n   * @param {import(\"../geom/Polygon.js\").default} polygon Polygon geometry.\n   * @param {Array<*>} objectStack Node stack.\n   * @private\n   */\n  writeSurfaceOrPolygonMember_(node, polygon, objectStack) {\n    const child = this.GEOMETRY_NODE_FACTORY_(\n      polygon, objectStack);\n    if (child) {\n      node.appendChild(child);\n      this.writeSurfaceOrPolygon_(child, polygon, objectStack);\n    }\n  }\n\n  /**\n   * @param {Element} node Node.\n   * @param {import(\"../extent.js\").Extent} extent Extent.\n   * @param {Array<*>} objectStack Node stack.\n   * @private\n   */\n  writeEnvelope(node, extent, objectStack) {\n    const context = objectStack[objectStack.length - 1];\n    const srsName = context['srsName'];\n    if (srsName) {\n      node.setAttribute('srsName', srsName);\n    }\n    const keys = ['lowerCorner', 'upperCorner'];\n    const values = [extent[0] + ' ' + extent[1], extent[2] + ' ' + extent[3]];\n    pushSerializeAndPop(/** @type {import(\"../xml.js\").NodeStackItem} */\n      ({node: node}), this.ENVELOPE_SERIALIZERS_,\n      OBJECT_PROPERTY_NODE_FACTORY,\n      values,\n      objectStack, keys, this);\n  }\n\n  /**\n   * @const\n   * @param {*} value Value.\n   * @param {Array<*>} objectStack Object stack.\n   * @param {string=} opt_nodeName Node name.\n   * @return {Node|undefined} Node.\n   * @private\n   */\n  MULTIGEOMETRY_MEMBER_NODE_FACTORY_(value, objectStack, opt_nodeName) {\n    const parentNode = objectStack[objectStack.length - 1].node;\n    return createElementNS('http://www.opengis.net/gml',\n      MULTIGEOMETRY_TO_MEMBER_NODENAME[parentNode.nodeName]);\n  }\n}\n\n/**\n * @const\n * @type {Object<string, Object<string, import(\"../xml.js\").Parser>>}\n * @protected\n */\nGML2.prototype.GEOMETRY_FLAT_COORDINATES_PARSERS = {\n  'http://www.opengis.net/gml': {\n    'coordinates': makeReplacer(GML2.prototype.readFlatCoordinates_)\n  }\n};\n\n/**\n * @const\n * @type {Object<string, Object<string, import(\"../xml.js\").Parser>>}\n * @protected\n */\nGML2.prototype.FLAT_LINEAR_RINGS_PARSERS = {\n  'http://www.opengis.net/gml': {\n    'innerBoundaryIs': GML2.prototype.innerBoundaryIsParser_,\n    'outerBoundaryIs': GML2.prototype.outerBoundaryIsParser_\n  }\n};\n\n/**\n * @const\n * @type {Object<string, Object<string, import(\"../xml.js\").Parser>>}\n * @private\n */\nGML2.prototype.BOX_PARSERS_ = {\n  'http://www.opengis.net/gml': {\n    'coordinates': makeArrayPusher(\n      GML2.prototype.readFlatCoordinates_)\n  }\n};\n\n/**\n * @const\n * @type {Object<string, Object<string, import(\"../xml.js\").Parser>>}\n * @protected\n */\nGML2.prototype.GEOMETRY_PARSERS = {\n  'http://www.opengis.net/gml': {\n    'Point': makeReplacer(GMLBase.prototype.readPoint),\n    'MultiPoint': makeReplacer(\n      GMLBase.prototype.readMultiPoint),\n    'LineString': makeReplacer(\n      GMLBase.prototype.readLineString),\n    'MultiLineString': makeReplacer(\n      GMLBase.prototype.readMultiLineString),\n    'LinearRing': makeReplacer(\n      GMLBase.prototype.readLinearRing),\n    'Polygon': makeReplacer(GMLBase.prototype.readPolygon),\n    'MultiPolygon': makeReplacer(\n      GMLBase.prototype.readMultiPolygon),\n    'Box': makeReplacer(GML2.prototype.readBox_)\n  }\n};\n\n/**\n * @const\n * @type {Object<string, Object<string, import(\"../xml.js\").Serializer>>}\n * @private\n */\nGML2.prototype.GEOMETRY_SERIALIZERS_ = {\n  'http://www.opengis.net/gml': {\n    'Curve': makeChildAppender(\n      GML2.prototype.writeCurveOrLineString_),\n    'MultiCurve': makeChildAppender(\n      GML2.prototype.writeMultiCurveOrLineString_),\n    'Point': makeChildAppender(GML2.prototype.writePoint_),\n    'MultiPoint': makeChildAppender(\n      GML2.prototype.writeMultiPoint_),\n    'LineString': makeChildAppender(\n      GML2.prototype.writeCurveOrLineString_),\n    'MultiLineString': makeChildAppender(\n      GML2.prototype.writeMultiCurveOrLineString_),\n    'LinearRing': makeChildAppender(\n      GML2.prototype.writeLinearRing_),\n    'Polygon': makeChildAppender(\n      GML2.prototype.writeSurfaceOrPolygon_),\n    'MultiPolygon': makeChildAppender(\n      GML2.prototype.writeMultiSurfaceOrPolygon_),\n    'Surface': makeChildAppender(\n      GML2.prototype.writeSurfaceOrPolygon_),\n    'MultiSurface': makeChildAppender(\n      GML2.prototype.writeMultiSurfaceOrPolygon_),\n    'Envelope': makeChildAppender(\n      GML2.prototype.writeEnvelope)\n  }\n};\n\n/**\n * @type {Object<string, Object<string, import(\"../xml.js\").Serializer>>}\n * @private\n */\nGML2.prototype.LINESTRINGORCURVEMEMBER_SERIALIZERS_ = {\n  'http://www.opengis.net/gml': {\n    'lineStringMember': makeChildAppender(\n      GML2.prototype.writeLineStringOrCurveMember_),\n    'curveMember': makeChildAppender(\n      GML2.prototype.writeLineStringOrCurveMember_)\n  }\n};\n\n/**\n * @type {Object<string, Object<string, import(\"../xml.js\").Serializer>>}\n * @private\n */\nGML2.prototype.RING_SERIALIZERS_ = {\n  'http://www.opengis.net/gml': {\n    'outerBoundaryIs': makeChildAppender(GML2.prototype.writeRing_),\n    'innerBoundaryIs': makeChildAppender(GML2.prototype.writeRing_)\n  }\n};\n\n/**\n * @type {Object<string, Object<string, import(\"../xml.js\").Serializer>>}\n * @private\n */\nGML2.prototype.POINTMEMBER_SERIALIZERS_ = {\n  'http://www.opengis.net/gml': {\n    'pointMember': makeChildAppender(\n      GML2.prototype.writePointMember_)\n  }\n};\n\n/**\n * @const\n * @type {Object<string, Object<string, import(\"../xml.js\").Serializer>>}\n * @private\n */\nGML2.prototype.SURFACEORPOLYGONMEMBER_SERIALIZERS_ = {\n  'http://www.opengis.net/gml': {\n    'surfaceMember': makeChildAppender(\n      GML2.prototype.writeSurfaceOrPolygonMember_),\n    'polygonMember': makeChildAppender(\n      GML2.prototype.writeSurfaceOrPolygonMember_)\n  }\n};\n\n/**\n * @type {Object<string, Object<string, import(\"../xml.js\").Serializer>>}\n * @private\n */\nGML2.prototype.ENVELOPE_SERIALIZERS_ = {\n  'http://www.opengis.net/gml': {\n    'lowerCorner': makeChildAppender(writeStringTextNode),\n    'upperCorner': makeChildAppender(writeStringTextNode)\n  }\n};\n\nexport default GML2;\n","/**\n * @module ol/render/Feature\n */\nimport {extend} from '../array.js';\nimport {createOrUpdateFromCoordinate, createOrUpdateFromFlatCoordinates, getCenter, getHeight} from '../extent.js';\nimport GeometryType from '../geom/GeometryType.js';\nimport {linearRingss as linearRingssCenter} from '../geom/flat/center.js';\nimport {getInteriorPointOfArray, getInteriorPointsOfMultiArray} from '../geom/flat/interiorpoint.js';\nimport {interpolatePoint} from '../geom/flat/interpolate.js';\nimport {get as getProjection} from '../proj.js';\nimport {transform2D} from '../geom/flat/transform.js';\nimport {create as createTransform, compose as composeTransform} from '../transform.js';\n\n\n/**\n * @type {import(\"../transform.js\").Transform}\n */\nconst tmpTransform = createTransform();\n\n\n/**\n * Lightweight, read-only, {@link module:ol/Feature~Feature} and {@link module:ol/geom/Geometry~Geometry} like\n * structure, optimized for vector tile rendering and styling. Geometry access\n * through the API is limited to getting the type and extent of the geometry.\n */\nclass RenderFeature {\n  /**\n   * @param {GeometryType} type Geometry type.\n   * @param {Array<number>} flatCoordinates Flat coordinates. These always need\n   *     to be right-handed for polygons.\n   * @param {Array<number>|Array<Array<number>>} ends Ends or Endss.\n   * @param {Object<string, *>} properties Properties.\n   * @param {number|string|undefined} id Feature id.\n   */\n  constructor(type, flatCoordinates, ends, properties, id) {\n    /**\n     * @private\n     * @type {import(\"../extent.js\").Extent|undefined}\n     */\n    this.extent_;\n\n    /**\n     * @private\n     * @type {number|string|undefined}\n     */\n    this.id_ = id;\n\n    /**\n     * @private\n     * @type {GeometryType}\n     */\n    this.type_ = type;\n\n    /**\n     * @private\n     * @type {Array<number>}\n     */\n    this.flatCoordinates_ = flatCoordinates;\n\n    /**\n     * @private\n     * @type {Array<number>}\n     */\n    this.flatInteriorPoints_ = null;\n\n    /**\n     * @private\n     * @type {Array<number>}\n     */\n    this.flatMidpoints_ = null;\n\n    /**\n     * @private\n     * @type {Array<number>|Array<Array<number>>}\n     */\n    this.ends_ = ends;\n\n    /**\n     * @private\n     * @type {Object<string, *>}\n     */\n    this.properties_ = properties;\n\n  }\n\n  /**\n   * Get a feature property by its key.\n   * @param {string} key Key\n   * @return {*} Value for the requested key.\n   * @api\n   */\n  get(key) {\n    return this.properties_[key];\n  }\n\n  /**\n   * Get the extent of this feature's geometry.\n   * @return {import(\"../extent.js\").Extent} Extent.\n   * @api\n   */\n  getExtent() {\n    if (!this.extent_) {\n      this.extent_ = this.type_ === GeometryType.POINT ?\n        createOrUpdateFromCoordinate(this.flatCoordinates_) :\n        createOrUpdateFromFlatCoordinates(\n          this.flatCoordinates_, 0, this.flatCoordinates_.length, 2);\n\n    }\n    return this.extent_;\n  }\n\n  /**\n   * @return {Array<number>} Flat interior points.\n   */\n  getFlatInteriorPoint() {\n    if (!this.flatInteriorPoints_) {\n      const flatCenter = getCenter(this.getExtent());\n      this.flatInteriorPoints_ = getInteriorPointOfArray(\n        this.flatCoordinates_, 0, /** @type {Array<number>} */ (this.ends_), 2, flatCenter, 0);\n    }\n    return this.flatInteriorPoints_;\n  }\n\n  /**\n   * @return {Array<number>} Flat interior points.\n   */\n  getFlatInteriorPoints() {\n    if (!this.flatInteriorPoints_) {\n      const flatCenters = linearRingssCenter(\n        this.flatCoordinates_, 0, /** @type {Array<Array<number>>} */ (this.ends_), 2);\n      this.flatInteriorPoints_ = getInteriorPointsOfMultiArray(\n        this.flatCoordinates_, 0, /** @type {Array<Array<number>>} */ (this.ends_), 2, flatCenters);\n    }\n    return this.flatInteriorPoints_;\n  }\n\n  /**\n   * @return {Array<number>} Flat midpoint.\n   */\n  getFlatMidpoint() {\n    if (!this.flatMidpoints_) {\n      this.flatMidpoints_ = interpolatePoint(\n        this.flatCoordinates_, 0, this.flatCoordinates_.length, 2, 0.5);\n    }\n    return this.flatMidpoints_;\n  }\n\n  /**\n   * @return {Array<number>} Flat midpoints.\n   */\n  getFlatMidpoints() {\n    if (!this.flatMidpoints_) {\n      this.flatMidpoints_ = [];\n      const flatCoordinates = this.flatCoordinates_;\n      let offset = 0;\n      const ends = /** @type {Array<number>} */ (this.ends_);\n      for (let i = 0, ii = ends.length; i < ii; ++i) {\n        const end = ends[i];\n        const midpoint = interpolatePoint(\n          flatCoordinates, offset, end, 2, 0.5);\n        extend(this.flatMidpoints_, midpoint);\n        offset = end;\n      }\n    }\n    return this.flatMidpoints_;\n  }\n\n  /**\n   * Get the feature identifier.  This is a stable identifier for the feature and\n   * is set when reading data from a remote source.\n   * @return {number|string|undefined} Id.\n   * @api\n   */\n  getId() {\n    return this.id_;\n  }\n\n  /**\n   * @return {Array<number>} Flat coordinates.\n   */\n  getOrientedFlatCoordinates() {\n    return this.flatCoordinates_;\n  }\n\n  /**\n   * For API compatibility with {@link module:ol/Feature~Feature}, this method is useful when\n   * determining the geometry type in style function (see {@link #getType}).\n   * @return {RenderFeature} Feature.\n   * @api\n   */\n  getGeometry() {\n    return this;\n  }\n\n  /**\n   * @param {number} squaredTolerance Squared tolerance.\n   * @return {RenderFeature} Simplified geometry.\n   */\n  getSimplifiedGeometry(squaredTolerance) {\n    return this;\n  }\n\n  /**\n   * Get a transformed and simplified version of the geometry.\n   * @abstract\n   * @param {number} squaredTolerance Squared tolerance.\n   * @param {import(\"../proj/Projection.js\").default} sourceProjection The source projection.\n   * @param {import(\"../proj/Projection.js\").default} destProjection The destination projection.\n   * @return {RenderFeature} Simplified geometry.\n   */\n  simplifyTransformed(squaredTolerance, sourceProjection, destProjection) {\n    return this;\n  }\n\n  /**\n   * Get the feature properties.\n   * @return {Object<string, *>} Feature properties.\n   * @api\n   */\n  getProperties() {\n    return this.properties_;\n  }\n\n  /**\n   * @return {number} Stride.\n   */\n  getStride() {\n    return 2;\n  }\n\n  /**\n   * @return {undefined}\n   */\n  getStyleFunction() {\n    return undefined;\n  }\n\n  /**\n   * Get the type of this feature's geometry.\n   * @return {GeometryType} Geometry type.\n   * @api\n   */\n  getType() {\n    return this.type_;\n  }\n\n  /**\n   * Transform geometry coordinates from tile pixel space to projected.\n   * The SRS of the source and destination are expected to be the same.\n   *\n   * @param {import(\"../proj.js\").ProjectionLike} source The current projection\n   * @param {import(\"../proj.js\").ProjectionLike} destination The desired projection.\n   */\n  transform(source, destination) {\n    source = getProjection(source);\n    const pixelExtent = source.getExtent();\n    const projectedExtent = source.getWorldExtent();\n    const scale = getHeight(projectedExtent) / getHeight(pixelExtent);\n    composeTransform(tmpTransform,\n      projectedExtent[0], projectedExtent[3],\n      scale, -scale, 0,\n      0, 0);\n    transform2D(this.flatCoordinates_, 0, this.flatCoordinates_.length, 2,\n      tmpTransform, this.flatCoordinates_);\n  }\n}\n\n\n/**\n * @return {Array<number>|Array<Array<number>>} Ends or endss.\n */\nRenderFeature.prototype.getEnds =\nRenderFeature.prototype.getEndss = function() {\n  return this.ends_;\n};\n\n\n/**\n * @return {Array<number>} Flat coordinates.\n */\nRenderFeature.prototype.getFlatCoordinates =\n    RenderFeature.prototype.getOrientedFlatCoordinates;\n\n\nexport default RenderFeature;\n","/**\n * @module ol/AssertionError\n */\nimport {VERSION} from './util.js';\n\n/**\n * Error object thrown when an assertion failed. This is an ECMA-262 Error,\n * extended with a `code` property.\n * See https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Error.\n */\nclass AssertionError extends Error {\n\n  /**\n   * @param {number} code Error code.\n   */\n  constructor(code) {\n    const path = VERSION === 'latest' ? VERSION : 'v' + VERSION.split('-')[0];\n    const message = 'Assertion failed. See https://openlayers.org/en/' + path +\n    '/doc/errors/#' + code + ' for details.';\n\n    super(message);\n\n    /**\n     * Error code. The meaning of the code can be found on\n     * https://openlayers.org/en/latest/doc/errors/ (replace `latest` with\n     * the version found in the OpenLayers script's header comment if a version\n     * other than the latest is used).\n     * @type {number}\n     * @api\n     */\n    this.code = code;\n\n    /**\n     * @type {string}\n     */\n    this.name = 'AssertionError';\n\n    // Re-assign message, see https://github.com/Rich-Harris/buble/issues/40\n    this.message = message;\n  }\n\n}\n\nexport default AssertionError;\n","/**\n * @module ol/layer/Base\n */\nimport {abstract} from '../util.js';\nimport BaseObject from '../Object.js';\nimport LayerProperty from './Property.js';\nimport {clamp} from '../math.js';\nimport {assign} from '../obj.js';\nimport {assert} from '../asserts.js';\n\n\n/**\n * @typedef {Object} Options\n * @property {string} [className='ol-layer'] A CSS class name to set to the layer element.\n * @property {number} [opacity=1] Opacity (0, 1).\n * @property {boolean} [visible=true] Visibility.\n * @property {import(\"../extent.js\").Extent} [extent] The bounding extent for layer rendering.  The layer will not be\n * rendered outside of this extent.\n * @property {number} [zIndex] The z-index for layer rendering.  At rendering time, the layers\n * will be ordered, first by Z-index and then by position. When `undefined`, a `zIndex` of 0 is assumed\n * for layers that are added to the map's `layers` collection, or `Infinity` when the layer's `setMap()`\n * method was used.\n * @property {number} [minResolution] The minimum resolution (inclusive) at which this layer will be\n * visible.\n * @property {number} [maxResolution] The maximum resolution (exclusive) below which this layer will\n * be visible.\n * @property {number} [minZoom] The minimum view zoom level (exclusive) above which this layer will be\n * visible.\n * @property {number} [maxZoom] The maximum view zoom level (inclusive) at which this layer will\n * be visible.\n */\n\n\n/**\n * @classdesc\n * Abstract base class; normally only used for creating subclasses and not\n * instantiated in apps.\n * Note that with {@link module:ol/layer/Base} and all its subclasses, any property set in\n * the options is set as a {@link module:ol/Object} property on the layer object, so\n * is observable, and has get/set accessors.\n *\n * @api\n */\nclass BaseLayer extends BaseObject {\n  /**\n   * @param {Options} options Layer options.\n   */\n  constructor(options) {\n\n    super();\n\n    /**\n     * @type {Object<string, *>}\n     */\n    const properties = assign({}, options);\n\n    properties[LayerProperty.OPACITY] =\n        options.opacity !== undefined ? options.opacity : 1;\n    assert(typeof properties[LayerProperty.OPACITY] === 'number', 64); // Layer opacity must be a number\n\n    properties[LayerProperty.VISIBLE] =\n       options.visible !== undefined ? options.visible : true;\n    properties[LayerProperty.Z_INDEX] = options.zIndex;\n    properties[LayerProperty.MAX_RESOLUTION] =\n       options.maxResolution !== undefined ? options.maxResolution : Infinity;\n    properties[LayerProperty.MIN_RESOLUTION] =\n       options.minResolution !== undefined ? options.minResolution : 0;\n    properties[LayerProperty.MIN_ZOOM] =\n       options.minZoom !== undefined ? options.minZoom : -Infinity;\n    properties[LayerProperty.MAX_ZOOM] =\n       options.maxZoom !== undefined ? options.maxZoom : Infinity;\n\n    /**\n     * @type {string}\n     * @private\n     */\n    this.className_ = properties.className !== undefined ? options.className : 'ol-layer';\n    delete properties.className;\n\n    this.setProperties(properties);\n\n    /**\n     * @type {import(\"./Layer.js\").State}\n     * @private\n     */\n    this.state_ = null;\n\n  }\n\n  /**\n   * @return {string} CSS class name.\n   */\n  getClassName() {\n    return this.className_;\n  }\n\n  /**\n   * This method is not meant to be called by layers or layer renderers because the state\n   * is incorrect if the layer is included in a layer group.\n   *\n   * @param {boolean=} opt_managed Layer is managed.\n   * @return {import(\"./Layer.js\").State} Layer state.\n   */\n  getLayerState(opt_managed) {\n    /** @type {import(\"./Layer.js\").State} */\n    const state = this.state_ || /** @type {?} */ ({\n      layer: this,\n      managed: opt_managed === undefined ? true : opt_managed,\n      hasOverlay: false\n    });\n    state.opacity = clamp(Math.round(this.getOpacity() * 100) / 100, 0, 1);\n    state.sourceState = this.getSourceState();\n    state.visible = this.getVisible();\n    state.extent = this.getExtent();\n    state.zIndex = this.getZIndex() || (state.managed === false ? Infinity : 0);\n    state.maxResolution = this.getMaxResolution();\n    state.minResolution = Math.max(this.getMinResolution(), 0);\n    state.minZoom = this.getMinZoom();\n    state.maxZoom = this.getMaxZoom();\n    this.state_ = state;\n\n    return state;\n  }\n\n  /**\n   * @abstract\n   * @param {Array<import(\"./Layer.js\").default>=} opt_array Array of layers (to be\n   *     modified in place).\n   * @return {Array<import(\"./Layer.js\").default>} Array of layers.\n   */\n  getLayersArray(opt_array) {\n    return abstract();\n  }\n\n  /**\n   * @abstract\n   * @param {Array<import(\"./Layer.js\").State>=} opt_states Optional list of layer\n   *     states (to be modified in place).\n   * @return {Array<import(\"./Layer.js\").State>} List of layer states.\n   */\n  getLayerStatesArray(opt_states) {\n    return abstract();\n  }\n\n  /**\n   * Return the {@link module:ol/extent~Extent extent} of the layer or `undefined` if it\n   * will be visible regardless of extent.\n   * @return {import(\"../extent.js\").Extent|undefined} The layer extent.\n   * @observable\n   * @api\n   */\n  getExtent() {\n    return (\n      /** @type {import(\"../extent.js\").Extent|undefined} */ (this.get(LayerProperty.EXTENT))\n    );\n  }\n\n  /**\n   * Return the maximum resolution of the layer.\n   * @return {number} The maximum resolution of the layer.\n   * @observable\n   * @api\n   */\n  getMaxResolution() {\n    return /** @type {number} */ (this.get(LayerProperty.MAX_RESOLUTION));\n  }\n\n  /**\n   * Return the minimum resolution of the layer.\n   * @return {number} The minimum resolution of the layer.\n   * @observable\n   * @api\n   */\n  getMinResolution() {\n    return /** @type {number} */ (this.get(LayerProperty.MIN_RESOLUTION));\n  }\n\n  /**\n   * Return the minimum zoom level of the layer.\n   * @return {number} The minimum zoom level of the layer.\n   * @observable\n   * @api\n   */\n  getMinZoom() {\n    return /** @type {number} */ (this.get(LayerProperty.MIN_ZOOM));\n  }\n\n  /**\n   * Return the maximum zoom level of the layer.\n   * @return {number} The maximum zoom level of the layer.\n   * @observable\n   * @api\n   */\n  getMaxZoom() {\n    return /** @type {number} */ (this.get(LayerProperty.MAX_ZOOM));\n  }\n\n  /**\n   * Return the opacity of the layer (between 0 and 1).\n   * @return {number} The opacity of the layer.\n   * @observable\n   * @api\n   */\n  getOpacity() {\n    return /** @type {number} */ (this.get(LayerProperty.OPACITY));\n  }\n\n  /**\n   * @abstract\n   * @return {import(\"../source/State.js\").default} Source state.\n   */\n  getSourceState() {\n    return abstract();\n  }\n\n  /**\n   * Return the visibility of the layer (`true` or `false`).\n   * @return {boolean} The visibility of the layer.\n   * @observable\n   * @api\n   */\n  getVisible() {\n    return /** @type {boolean} */ (this.get(LayerProperty.VISIBLE));\n  }\n\n  /**\n   * Return the Z-index of the layer, which is used to order layers before\n   * rendering. The default Z-index is 0.\n   * @return {number} The Z-index of the layer.\n   * @observable\n   * @api\n   */\n  getZIndex() {\n    return /** @type {number} */ (this.get(LayerProperty.Z_INDEX));\n  }\n\n  /**\n   * Set the extent at which the layer is visible.  If `undefined`, the layer\n   * will be visible at all extents.\n   * @param {import(\"../extent.js\").Extent|undefined} extent The extent of the layer.\n   * @observable\n   * @api\n   */\n  setExtent(extent) {\n    this.set(LayerProperty.EXTENT, extent);\n  }\n\n  /**\n   * Set the maximum resolution at which the layer is visible.\n   * @param {number} maxResolution The maximum resolution of the layer.\n   * @observable\n   * @api\n   */\n  setMaxResolution(maxResolution) {\n    this.set(LayerProperty.MAX_RESOLUTION, maxResolution);\n  }\n\n  /**\n   * Set the minimum resolution at which the layer is visible.\n   * @param {number} minResolution The minimum resolution of the layer.\n   * @observable\n   * @api\n   */\n  setMinResolution(minResolution) {\n    this.set(LayerProperty.MIN_RESOLUTION, minResolution);\n  }\n\n  /**\n   * Set the maximum zoom (exclusive) at which the layer is visible.\n   * Note that the zoom levels for layer visibility are based on the\n   * view zoom level, which may be different from a tile source zoom level.\n   * @param {number} maxZoom The maximum zoom of the layer.\n   * @observable\n   * @api\n   */\n  setMaxZoom(maxZoom) {\n    this.set(LayerProperty.MAX_ZOOM, maxZoom);\n  }\n\n  /**\n   * Set the minimum zoom (inclusive) at which the layer is visible.\n   * Note that the zoom levels for layer visibility are based on the\n   * view zoom level, which may be different from a tile source zoom level.\n   * @param {number} minZoom The minimum zoom of the layer.\n   * @observable\n   * @api\n   */\n  setMinZoom(minZoom) {\n    this.set(LayerProperty.MIN_ZOOM, minZoom);\n  }\n\n  /**\n   * Set the opacity of the layer, allowed values range from 0 to 1.\n   * @param {number} opacity The opacity of the layer.\n   * @observable\n   * @api\n   */\n  setOpacity(opacity) {\n    assert(typeof opacity === 'number', 64); // Layer opacity must be a number\n    this.set(LayerProperty.OPACITY, opacity);\n  }\n\n  /**\n   * Set the visibility of the layer (`true` or `false`).\n   * @param {boolean} visible The visibility of the layer.\n   * @observable\n   * @api\n   */\n  setVisible(visible) {\n    this.set(LayerProperty.VISIBLE, visible);\n  }\n\n  /**\n   * Set Z-index of the layer, which is used to order layers before rendering.\n   * The default Z-index is 0.\n   * @param {number} zindex The z-index of the layer.\n   * @observable\n   * @api\n   */\n  setZIndex(zindex) {\n    this.set(LayerProperty.Z_INDEX, zindex);\n  }\n}\n\n\nexport default BaseLayer;\n","/**\n * @module ol/geom/Geometry\n */\nimport {abstract} from '../util.js';\nimport BaseObject from '../Object.js';\nimport {createEmpty, getHeight, returnOrUpdate} from '../extent.js';\nimport {transform2D} from './flat/transform.js';\nimport {get as getProjection, getTransform, getTransformFromProjections} from '../proj.js';\nimport Units from '../proj/Units.js';\nimport {create as createTransform, compose as composeTransform} from '../transform.js';\nimport {memoizeOne} from '../functions.js';\n\n/**\n * @type {import(\"../transform.js\").Transform}\n */\nconst tmpTransform = createTransform();\n\n\n/**\n * @classdesc\n * Abstract base class; normally only used for creating subclasses and not\n * instantiated in apps.\n * Base class for vector geometries.\n *\n * To get notified of changes to the geometry, register a listener for the\n * generic `change` event on your geometry instance.\n *\n * @abstract\n * @api\n */\nclass Geometry extends BaseObject {\n  constructor() {\n\n    super();\n\n    /**\n     * @private\n     * @type {import(\"../extent.js\").Extent}\n     */\n    this.extent_ = createEmpty();\n\n    /**\n     * @private\n     * @type {number}\n     */\n    this.extentRevision_ = -1;\n\n    /**\n     * @protected\n     * @type {number}\n     */\n    this.simplifiedGeometryMaxMinSquaredTolerance = 0;\n\n    /**\n     * @protected\n     * @type {number}\n     */\n    this.simplifiedGeometryRevision = 0;\n\n    /**\n     * Get a transformed and simplified version of the geometry.\n     * @abstract\n     * @param {number} revision The geometry revision.\n     * @param {number} squaredTolerance Squared tolerance.\n     * @param {import(\"../proj/Projection.js\").default} [sourceProjection] The source projection.\n     * @param {import(\"../proj/Projection.js\").default} [destProjection] The destination projection.\n     * @return {Geometry} Simplified geometry.\n     */\n    this.simplifyTransformedInternal = memoizeOne(function(revision, squaredTolerance, sourceProjection, destProjection) {\n      if (!sourceProjection || !destProjection) {\n        return this.getSimplifiedGeometry(squaredTolerance);\n      }\n      const transform = getTransformFromProjections(sourceProjection, destProjection);\n      const clone = this.clone();\n      clone.applyTransform(transform);\n      return clone.getSimplifiedGeometry(squaredTolerance);\n    });\n\n  }\n\n  /**\n   * Get a transformed and simplified version of the geometry.\n   * @abstract\n   * @param {number} squaredTolerance Squared tolerance.\n   * @param {import(\"../proj/Projection.js\").default} sourceProjection The source projection.\n   * @param {import(\"../proj/Projection.js\").default} destProjection The destination projection.\n   * @return {Geometry} Simplified geometry.\n   */\n  simplifyTransformed(squaredTolerance, sourceProjection, destProjection) {\n    return this.simplifyTransformedInternal(this.getRevision(), squaredTolerance, sourceProjection, destProjection);\n  }\n\n  /**\n   * Make a complete copy of the geometry.\n   * @abstract\n   * @return {!Geometry} Clone.\n   */\n  clone() {\n    return abstract();\n  }\n\n  /**\n   * @abstract\n   * @param {number} x X.\n   * @param {number} y Y.\n   * @param {import(\"../coordinate.js\").Coordinate} closestPoint Closest point.\n   * @param {number} minSquaredDistance Minimum squared distance.\n   * @return {number} Minimum squared distance.\n   */\n  closestPointXY(x, y, closestPoint, minSquaredDistance) {\n    return abstract();\n  }\n\n  /**\n   * @param {number} x X.\n   * @param {number} y Y.\n   * @return {boolean} Contains (x, y).\n   */\n  containsXY(x, y) {\n    const coord = this.getClosestPoint([x, y]);\n    return coord[0] === x && coord[1] === y;\n  }\n\n  /**\n   * Return the closest point of the geometry to the passed point as\n   * {@link module:ol/coordinate~Coordinate coordinate}.\n   * @param {import(\"../coordinate.js\").Coordinate} point Point.\n   * @param {import(\"../coordinate.js\").Coordinate=} opt_closestPoint Closest point.\n   * @return {import(\"../coordinate.js\").Coordinate} Closest point.\n   * @api\n   */\n  getClosestPoint(point, opt_closestPoint) {\n    const closestPoint = opt_closestPoint ? opt_closestPoint : [NaN, NaN];\n    this.closestPointXY(point[0], point[1], closestPoint, Infinity);\n    return closestPoint;\n  }\n\n  /**\n   * Returns true if this geometry includes the specified coordinate. If the\n   * coordinate is on the boundary of the geometry, returns false.\n   * @param {import(\"../coordinate.js\").Coordinate} coordinate Coordinate.\n   * @return {boolean} Contains coordinate.\n   * @api\n   */\n  intersectsCoordinate(coordinate) {\n    return this.containsXY(coordinate[0], coordinate[1]);\n  }\n\n  /**\n   * @abstract\n   * @param {import(\"../extent.js\").Extent} extent Extent.\n   * @protected\n   * @return {import(\"../extent.js\").Extent} extent Extent.\n   */\n  computeExtent(extent) {\n    return abstract();\n  }\n\n  /**\n   * Get the extent of the geometry.\n   * @param {import(\"../extent.js\").Extent=} opt_extent Extent.\n   * @return {import(\"../extent.js\").Extent} extent Extent.\n   * @api\n   */\n  getExtent(opt_extent) {\n    if (this.extentRevision_ != this.getRevision()) {\n      this.extent_ = this.computeExtent(this.extent_);\n      this.extentRevision_ = this.getRevision();\n    }\n    return returnOrUpdate(this.extent_, opt_extent);\n  }\n\n  /**\n   * Rotate the geometry around a given coordinate. This modifies the geometry\n   * coordinates in place.\n   * @abstract\n   * @param {number} angle Rotation angle in radians.\n   * @param {import(\"../coordinate.js\").Coordinate} anchor The rotation center.\n   * @api\n   */\n  rotate(angle, anchor) {\n    abstract();\n  }\n\n  /**\n   * Scale the geometry (with an optional origin).  This modifies the geometry\n   * coordinates in place.\n   * @abstract\n   * @param {number} sx The scaling factor in the x-direction.\n   * @param {number=} opt_sy The scaling factor in the y-direction (defaults to\n   *     sx).\n   * @param {import(\"../coordinate.js\").Coordinate=} opt_anchor The scale origin (defaults to the center\n   *     of the geometry extent).\n   * @api\n   */\n  scale(sx, opt_sy, opt_anchor) {\n    abstract();\n  }\n\n  /**\n   * Create a simplified version of this geometry.  For linestrings, this uses\n   * the [Douglas Peucker](https://en.wikipedia.org/wiki/Ramer-Douglas-Peucker_algorithm)\n   * algorithm.  For polygons, a quantization-based\n   * simplification is used to preserve topology.\n   * @param {number} tolerance The tolerance distance for simplification.\n   * @return {Geometry} A new, simplified version of the original geometry.\n   * @api\n   */\n  simplify(tolerance) {\n    return this.getSimplifiedGeometry(tolerance * tolerance);\n  }\n\n  /**\n   * Create a simplified version of this geometry using the Douglas Peucker\n   * algorithm.\n   * See https://en.wikipedia.org/wiki/Ramer-Douglas-Peucker_algorithm.\n   * @abstract\n   * @param {number} squaredTolerance Squared tolerance.\n   * @return {Geometry} Simplified geometry.\n   */\n  getSimplifiedGeometry(squaredTolerance) {\n    return abstract();\n  }\n\n  /**\n   * Get the type of this geometry.\n   * @abstract\n   * @return {import(\"./GeometryType.js\").default} Geometry type.\n   */\n  getType() {\n    return abstract();\n  }\n\n  /**\n   * Apply a transform function to each coordinate of the geometry.\n   * The geometry is modified in place.\n   * If you do not want the geometry modified in place, first `clone()` it and\n   * then use this function on the clone.\n   * @abstract\n   * @param {import(\"../proj.js\").TransformFunction} transformFn Transform.\n   */\n  applyTransform(transformFn) {\n    abstract();\n  }\n\n  /**\n   * Test if the geometry and the passed extent intersect.\n   * @abstract\n   * @param {import(\"../extent.js\").Extent} extent Extent.\n   * @return {boolean} `true` if the geometry and the extent intersect.\n   */\n  intersectsExtent(extent) {\n    return abstract();\n  }\n\n  /**\n   * Translate the geometry.  This modifies the geometry coordinates in place.  If\n   * instead you want a new geometry, first `clone()` this geometry.\n   * @abstract\n   * @param {number} deltaX Delta X.\n   * @param {number} deltaY Delta Y.\n   * @api\n   */\n  translate(deltaX, deltaY) {\n    abstract();\n  }\n\n  /**\n   * Transform each coordinate of the geometry from one coordinate reference\n   * system to another. The geometry is modified in place.\n   * For example, a line will be transformed to a line and a circle to a circle.\n   * If you do not want the geometry modified in place, first `clone()` it and\n   * then use this function on the clone.\n   *\n   * @param {import(\"../proj.js\").ProjectionLike} source The current projection.  Can be a\n   *     string identifier or a {@link module:ol/proj/Projection~Projection} object.\n   * @param {import(\"../proj.js\").ProjectionLike} destination The desired projection.  Can be a\n   *     string identifier or a {@link module:ol/proj/Projection~Projection} object.\n   * @return {Geometry} This geometry.  Note that original geometry is\n   *     modified in place.\n   * @api\n   */\n  transform(source, destination) {\n    /** @type {import(\"../proj/Projection.js\").default} */\n    const sourceProj = getProjection(source);\n    const transformFn = sourceProj.getUnits() == Units.TILE_PIXELS ?\n      function(inCoordinates, outCoordinates, stride) {\n        const pixelExtent = sourceProj.getExtent();\n        const projectedExtent = sourceProj.getWorldExtent();\n        const scale = getHeight(projectedExtent) / getHeight(pixelExtent);\n        composeTransform(tmpTransform,\n          projectedExtent[0], projectedExtent[3],\n          scale, -scale, 0,\n          0, 0);\n        transform2D(inCoordinates, 0, inCoordinates.length, stride,\n          tmpTransform, outCoordinates);\n        return getTransform(sourceProj, destination)(inCoordinates, outCoordinates, stride);\n      } :\n      getTransform(sourceProj, destination);\n    this.applyTransform(transformFn);\n    return this;\n  }\n\n}\n\n\nexport default Geometry;\n","/**\n * @module ol/geom/flat/segments\n */\n\n\n/**\n * This function calls `callback` for each segment of the flat coordinates\n * array. If the callback returns a truthy value the function returns that\n * value immediately. Otherwise the function returns `false`.\n * @param {Array<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {number} end End.\n * @param {number} stride Stride.\n * @param {function(import(\"../../coordinate.js\").Coordinate, import(\"../../coordinate.js\").Coordinate): T} callback Function\n *     called for each segment.\n * @return {T|boolean} Value.\n * @template T\n */\nexport function forEach(flatCoordinates, offset, end, stride, callback) {\n  const point1 = [flatCoordinates[offset], flatCoordinates[offset + 1]];\n  const point2 = [];\n  let ret;\n  for (; (offset + stride) < end; offset += stride) {\n    point2[0] = flatCoordinates[offset + stride];\n    point2[1] = flatCoordinates[offset + stride + 1];\n    ret = callback(point1, point2);\n    if (ret) {\n      return ret;\n    }\n    point1[0] = point2[0];\n    point1[1] = point2[1];\n  }\n  return false;\n}\n","/**\n * @module ol/structs/LRUCache\n */\n\nimport {assert} from '../asserts.js';\nimport EventTarget from '../events/Target.js';\nimport EventType from '../events/EventType.js';\n\n\n/**\n * @typedef {Object} Entry\n * @property {string} key_\n * @property {Object} newer\n * @property {Object} older\n * @property {*} value_\n */\n\n\n/**\n * @classdesc\n * Implements a Least-Recently-Used cache where the keys do not conflict with\n * Object's properties (e.g. 'hasOwnProperty' is not allowed as a key). Expiring\n * items from the cache is the responsibility of the user.\n *\n * @fires import(\"../events/Event.js\").Event\n * @template T\n */\nclass LRUCache extends EventTarget {\n\n  /**\n   * @param {number=} opt_highWaterMark High water mark.\n   */\n  constructor(opt_highWaterMark) {\n\n    super();\n\n    /**\n     * @type {number}\n     */\n    this.highWaterMark = opt_highWaterMark !== undefined ? opt_highWaterMark : 2048;\n\n    /**\n     * @private\n     * @type {number}\n     */\n    this.count_ = 0;\n\n    /**\n     * @private\n     * @type {!Object<string, Entry>}\n     */\n    this.entries_ = {};\n\n    /**\n     * @private\n     * @type {?Entry}\n     */\n    this.oldest_ = null;\n\n    /**\n     * @private\n     * @type {?Entry}\n     */\n    this.newest_ = null;\n\n  }\n\n\n  /**\n   * @return {boolean} Can expire cache.\n   */\n  canExpireCache() {\n    return this.getCount() > this.highWaterMark;\n  }\n\n\n  /**\n   * FIXME empty description for jsdoc\n   */\n  clear() {\n    this.count_ = 0;\n    this.entries_ = {};\n    this.oldest_ = null;\n    this.newest_ = null;\n    this.dispatchEvent(EventType.CLEAR);\n  }\n\n\n  /**\n   * @param {string} key Key.\n   * @return {boolean} Contains key.\n   */\n  containsKey(key) {\n    return this.entries_.hasOwnProperty(key);\n  }\n\n\n  /**\n   * @param {function(T, string, LRUCache): ?} f The function\n   *     to call for every entry from the oldest to the newer. This function takes\n   *     3 arguments (the entry value, the entry key and the LRUCache object).\n   *     The return value is ignored.\n   */\n  forEach(f) {\n    let entry = this.oldest_;\n    while (entry) {\n      f(entry.value_, entry.key_, this);\n      entry = entry.newer;\n    }\n  }\n\n\n  /**\n   * @param {string} key Key.\n   * @param {*=} opt_options Options (reserverd for subclasses).\n   * @return {T} Value.\n   */\n  get(key, opt_options) {\n    const entry = this.entries_[key];\n    assert(entry !== undefined,\n      15); // Tried to get a value for a key that does not exist in the cache\n    if (entry === this.newest_) {\n      return entry.value_;\n    } else if (entry === this.oldest_) {\n      this.oldest_ = /** @type {Entry} */ (this.oldest_.newer);\n      this.oldest_.older = null;\n    } else {\n      entry.newer.older = entry.older;\n      entry.older.newer = entry.newer;\n    }\n    entry.newer = null;\n    entry.older = this.newest_;\n    this.newest_.newer = entry;\n    this.newest_ = entry;\n    return entry.value_;\n  }\n\n\n  /**\n   * Remove an entry from the cache.\n   * @param {string} key The entry key.\n   * @return {T} The removed entry.\n   */\n  remove(key) {\n    const entry = this.entries_[key];\n    assert(entry !== undefined, 15); // Tried to get a value for a key that does not exist in the cache\n    if (entry === this.newest_) {\n      this.newest_ = /** @type {Entry} */ (entry.older);\n      if (this.newest_) {\n        this.newest_.newer = null;\n      }\n    } else if (entry === this.oldest_) {\n      this.oldest_ = /** @type {Entry} */ (entry.newer);\n      if (this.oldest_) {\n        this.oldest_.older = null;\n      }\n    } else {\n      entry.newer.older = entry.older;\n      entry.older.newer = entry.newer;\n    }\n    delete this.entries_[key];\n    --this.count_;\n    return entry.value_;\n  }\n\n\n  /**\n   * @return {number} Count.\n   */\n  getCount() {\n    return this.count_;\n  }\n\n\n  /**\n   * @return {Array<string>} Keys.\n   */\n  getKeys() {\n    const keys = new Array(this.count_);\n    let i = 0;\n    let entry;\n    for (entry = this.newest_; entry; entry = entry.older) {\n      keys[i++] = entry.key_;\n    }\n    return keys;\n  }\n\n\n  /**\n   * @return {Array<T>} Values.\n   */\n  getValues() {\n    const values = new Array(this.count_);\n    let i = 0;\n    let entry;\n    for (entry = this.newest_; entry; entry = entry.older) {\n      values[i++] = entry.value_;\n    }\n    return values;\n  }\n\n\n  /**\n   * @return {T} Last value.\n   */\n  peekLast() {\n    return this.oldest_.value_;\n  }\n\n\n  /**\n   * @return {string} Last key.\n   */\n  peekLastKey() {\n    return this.oldest_.key_;\n  }\n\n\n  /**\n   * Get the key of the newest item in the cache.  Throws if the cache is empty.\n   * @return {string} The newest key.\n   */\n  peekFirstKey() {\n    return this.newest_.key_;\n  }\n\n\n  /**\n   * @return {T} value Value.\n   */\n  pop() {\n    const entry = this.oldest_;\n    delete this.entries_[entry.key_];\n    if (entry.newer) {\n      entry.newer.older = null;\n    }\n    this.oldest_ = /** @type {Entry} */ (entry.newer);\n    if (!this.oldest_) {\n      this.newest_ = null;\n    }\n    --this.count_;\n    return entry.value_;\n  }\n\n\n  /**\n   * @param {string} key Key.\n   * @param {T} value Value.\n   */\n  replace(key, value) {\n    this.get(key); // update `newest_`\n    this.entries_[key].value_ = value;\n  }\n\n\n  /**\n   * @param {string} key Key.\n   * @param {T} value Value.\n   */\n  set(key, value) {\n    assert(!(key in this.entries_),\n      16); // Tried to set a value for a key that is used already\n    const entry = {\n      key_: key,\n      newer: null,\n      older: this.newest_,\n      value_: value\n    };\n    if (!this.newest_) {\n      this.oldest_ = entry;\n    } else {\n      this.newest_.newer = entry;\n    }\n    this.newest_ = entry;\n    this.entries_[key] = entry;\n    ++this.count_;\n  }\n\n\n  /**\n   * Set a maximum number of entries for the cache.\n   * @param {number} size Cache size.\n   * @api\n   */\n  setSize(size) {\n    this.highWaterMark = size;\n  }\n\n}\n\nexport default LRUCache;\n","/**\n * @module ol/render/Event\n */\n\nimport Event from '../events/Event.js';\n\nclass RenderEvent extends Event {\n\n  /**\n   * @param {import(\"./EventType.js\").default} type Type.\n   * @param {import(\"../transform.js\").Transform=} opt_inversePixelTransform Transform for\n   *     CSS pixels to rendered pixels.\n   * @param {import(\"../PluggableMap.js\").FrameState=} opt_frameState Frame state.\n   * @param {?CanvasRenderingContext2D=} opt_context Context.\n   */\n  constructor(type, opt_inversePixelTransform, opt_frameState, opt_context) {\n\n    super(type);\n\n    /**\n     * Transform from CSS pixels (relative to the top-left corner of the map viewport)\n     * to rendered pixels on this event's `context`.\n     * @type {import(\"../transform.js\").Transform|undefined}\n     * @api\n     */\n    this.inversePixelTransform = opt_inversePixelTransform;\n\n    /**\n     * An object representing the current render frame state.\n     * @type {import(\"../PluggableMap.js\").FrameState|undefined}\n     * @api\n     */\n    this.frameState = opt_frameState;\n\n    /**\n     * Canvas context. Only available when a Canvas renderer is used, null\n     * otherwise.\n     * @type {CanvasRenderingContext2D|null|undefined}\n     * @api\n     */\n    this.context = opt_context;\n\n  }\n\n}\n\nexport default RenderEvent;\n","/**\n * @module ol/render/VectorContext\n */\n\n/**\n * @classdesc\n * Context for drawing geometries.  A vector context is available on render\n * events and does not need to be constructed directly.\n * @api\n */\nclass VectorContext {\n  /**\n   * Render a geometry with a custom renderer.\n   *\n   * @param {import(\"../geom/SimpleGeometry.js\").default} geometry Geometry.\n   * @param {import(\"../Feature.js\").FeatureLike} feature Feature.\n   * @param {Function} renderer Renderer.\n   */\n  drawCustom(geometry, feature, renderer) {}\n\n  /**\n   * Render a geometry.\n   *\n   * @param {import(\"../geom/Geometry.js\").default} geometry The geometry to render.\n   */\n  drawGeometry(geometry) {}\n\n  /**\n   * Set the rendering style.\n   *\n   * @param {import(\"../style/Style.js\").default} style The rendering style.\n   */\n  setStyle(style) {}\n\n  /**\n   * @param {import(\"../geom/Circle.js\").default} circleGeometry Circle geometry.\n   * @param {import(\"../Feature.js\").default} feature Feature.\n   */\n  drawCircle(circleGeometry, feature) {}\n\n  /**\n   * @param {import(\"../Feature.js\").default} feature Feature.\n   * @param {import(\"../style/Style.js\").default} style Style.\n   */\n  drawFeature(feature, style) {}\n\n  /**\n   * @param {import(\"../geom/GeometryCollection.js\").default} geometryCollectionGeometry Geometry collection.\n   * @param {import(\"../Feature.js\").default} feature Feature.\n   */\n  drawGeometryCollection(geometryCollectionGeometry, feature) {}\n\n  /**\n   * @param {import(\"../geom/LineString.js\").default|import(\"./Feature.js\").default} lineStringGeometry Line string geometry.\n   * @param {import(\"../Feature.js\").FeatureLike} feature Feature.\n   */\n  drawLineString(lineStringGeometry, feature) {}\n\n  /**\n   * @param {import(\"../geom/MultiLineString.js\").default|import(\"./Feature.js\").default} multiLineStringGeometry MultiLineString geometry.\n   * @param {import(\"../Feature.js\").FeatureLike} feature Feature.\n   */\n  drawMultiLineString(multiLineStringGeometry, feature) {}\n\n  /**\n   * @param {import(\"../geom/MultiPoint.js\").default|import(\"./Feature.js\").default} multiPointGeometry MultiPoint geometry.\n   * @param {import(\"../Feature.js\").FeatureLike} feature Feature.\n   */\n  drawMultiPoint(multiPointGeometry, feature) {}\n\n  /**\n   * @param {import(\"../geom/MultiPolygon.js\").default} multiPolygonGeometry MultiPolygon geometry.\n   * @param {import(\"../Feature.js\").FeatureLike} feature Feature.\n   */\n  drawMultiPolygon(multiPolygonGeometry, feature) {}\n\n  /**\n   * @param {import(\"../geom/Point.js\").default|import(\"./Feature.js\").default} pointGeometry Point geometry.\n   * @param {import(\"../Feature.js\").FeatureLike} feature Feature.\n   */\n  drawPoint(pointGeometry, feature) {}\n\n  /**\n   * @param {import(\"../geom/Polygon.js\").default|import(\"./Feature.js\").default} polygonGeometry Polygon geometry.\n   * @param {import(\"../Feature.js\").FeatureLike} feature Feature.\n   */\n  drawPolygon(polygonGeometry, feature) {}\n\n  /**\n   * @param {import(\"../geom/Geometry.js\").default|import(\"./Feature.js\").default} geometry Geometry.\n   * @param {import(\"../Feature.js\").FeatureLike} feature Feature.\n   */\n  drawText(geometry, feature) {}\n\n  /**\n   * @param {import(\"../style/Fill.js\").default} fillStyle Fill style.\n   * @param {import(\"../style/Stroke.js\").default} strokeStyle Stroke style.\n   */\n  setFillStrokeStyle(fillStyle, strokeStyle) {}\n\n  /**\n   * @param {import(\"../style/Image.js\").default} imageStyle Image style.\n   * @param {import(\"./canvas.js\").DeclutterGroup=} opt_declutterGroup Declutter.\n   */\n  setImageStyle(imageStyle, opt_declutterGroup) {}\n\n  /**\n   * @param {import(\"../style/Text.js\").default} textStyle Text style.\n   * @param {import(\"./canvas.js\").DeclutterGroups=} opt_declutterGroups Declutter.\n   */\n  setTextStyle(textStyle, opt_declutterGroups) {}\n}\n\nexport default VectorContext;\n","/**\n * @module ol/MapBrowserEvent\n */\nimport MapEvent from './MapEvent.js';\n\n/**\n * @classdesc\n * Events emitted as map browser events are instances of this type.\n * See {@link module:ol/PluggableMap~PluggableMap} for which events trigger a map browser event.\n */\nclass MapBrowserEvent extends MapEvent {\n\n  /**\n   * @param {string} type Event type.\n   * @param {import(\"./PluggableMap.js\").default} map Map.\n   * @param {Event} browserEvent Browser event.\n   * @param {boolean=} opt_dragging Is the map currently being dragged?\n   * @param {?import(\"./PluggableMap.js\").FrameState=} opt_frameState Frame state.\n   */\n  constructor(type, map, browserEvent, opt_dragging, opt_frameState) {\n\n    super(type, map, opt_frameState);\n\n    /**\n     * The original browser event.\n     * @const\n     * @type {Event}\n     * @api\n     */\n    this.originalEvent = browserEvent;\n\n    /**\n     * The map pixel relative to the viewport corresponding to the original browser event.\n     * @type {import(\"./pixel.js\").Pixel}\n     */\n    this.pixel_ = null;\n\n    /**\n     * The coordinate in the user projection corresponding to the original browser event.\n     * @type {import(\"./coordinate.js\").Coordinate}\n     */\n    this.coordinate_ = null;\n\n    /**\n     * Indicates if the map is currently being dragged. Only set for\n     * `POINTERDRAG` and `POINTERMOVE` events. Default is `false`.\n     *\n     * @type {boolean}\n     * @api\n     */\n    this.dragging = opt_dragging !== undefined ? opt_dragging : false;\n\n  }\n\n  /**\n   * The map pixel relative to the viewport corresponding to the original browser event.\n   * @type {import(\"./pixel.js\").Pixel}\n   * @api\n   */\n  get pixel() {\n    if (!this.pixel_) {\n      this.pixel_ = this.map.getEventPixel(this.originalEvent);\n    }\n    return this.pixel_;\n  }\n  set pixel(pixel) {\n    this.pixel_ = pixel;\n  }\n\n  /**\n   * The coordinate corresponding to the original browser event.  This will be in the user\n   * projection if one is set.  Otherwise it will be in the view projection.\n   * @type {import(\"./coordinate.js\").Coordinate}\n   * @api\n   */\n  get coordinate() {\n    if (!this.coordinate_) {\n      this.coordinate_ = this.map.getCoordinateFromPixel(this.pixel);\n    }\n    return this.coordinate_;\n  }\n  set coordinate(coordinate) {\n    this.coordinate_ = coordinate;\n  }\n\n  /**\n   * Prevents the default browser action.\n   * See https://developer.mozilla.org/en-US/docs/Web/API/event.preventDefault.\n   * @override\n   * @api\n   */\n  preventDefault() {\n    super.preventDefault();\n    this.originalEvent.preventDefault();\n  }\n\n  /**\n   * Prevents further propagation of the current event.\n   * See https://developer.mozilla.org/en-US/docs/Web/API/event.stopPropagation.\n   * @override\n   * @api\n   */\n  stopPropagation() {\n    super.stopPropagation();\n    this.originalEvent.stopPropagation();\n  }\n}\n\n\nexport default MapBrowserEvent;\n","/**\n * @module ol/TileQueue\n */\nimport TileState from './TileState.js';\nimport EventType from './events/EventType.js';\nimport PriorityQueue from './structs/PriorityQueue.js';\n\n\n/**\n * @typedef {function(import(\"./Tile.js\").default, string, import(\"./coordinate.js\").Coordinate, number): number} PriorityFunction\n */\n\n\nclass TileQueue extends PriorityQueue {\n\n  /**\n   * @param {PriorityFunction} tilePriorityFunction Tile priority function.\n   * @param {function(): ?} tileChangeCallback Function called on each tile change event.\n   */\n  constructor(tilePriorityFunction, tileChangeCallback) {\n\n    super(\n      /**\n       * @param {Array} element Element.\n       * @return {number} Priority.\n       */\n      function(element) {\n        return tilePriorityFunction.apply(null, element);\n      },\n      /**\n       * @param {Array} element Element.\n       * @return {string} Key.\n       */\n      function(element) {\n        return (/** @type {import(\"./Tile.js\").default} */ (element[0]).getKey());\n      });\n\n    /** @private */\n    this.boundHandleTileChange_ = this.handleTileChange.bind(this);\n\n    /**\n     * @private\n     * @type {function(): ?}\n     */\n    this.tileChangeCallback_ = tileChangeCallback;\n\n    /**\n     * @private\n     * @type {number}\n     */\n    this.tilesLoading_ = 0;\n\n    /**\n     * @private\n     * @type {!Object<string,boolean>}\n     */\n    this.tilesLoadingKeys_ = {};\n\n  }\n\n  /**\n   * @inheritDoc\n   */\n  enqueue(element) {\n    const added = super.enqueue(element);\n    if (added) {\n      const tile = element[0];\n      tile.addEventListener(EventType.CHANGE, this.boundHandleTileChange_);\n    }\n    return added;\n  }\n\n  /**\n   * @return {number} Number of tiles loading.\n   */\n  getTilesLoading() {\n    return this.tilesLoading_;\n  }\n\n  /**\n   * @param {import(\"./events/Event.js\").default} event Event.\n   * @protected\n   */\n  handleTileChange(event) {\n    const tile = /** @type {import(\"./Tile.js\").default} */ (event.target);\n    const state = tile.getState();\n    if (tile.hifi && state === TileState.LOADED || state === TileState.ERROR ||\n        state === TileState.EMPTY || state === TileState.ABORT) {\n      tile.removeEventListener(EventType.CHANGE, this.boundHandleTileChange_);\n      const tileKey = tile.getKey();\n      if (tileKey in this.tilesLoadingKeys_) {\n        delete this.tilesLoadingKeys_[tileKey];\n        --this.tilesLoading_;\n      }\n      this.tileChangeCallback_();\n    }\n  }\n\n  /**\n   * @param {number} maxTotalLoading Maximum number tiles to load simultaneously.\n   * @param {number} maxNewLoads Maximum number of new tiles to load.\n   */\n  loadMoreTiles(maxTotalLoading, maxNewLoads) {\n    let newLoads = 0;\n    let abortedTiles = false;\n    let state, tile, tileKey;\n    while (this.tilesLoading_ < maxTotalLoading && newLoads < maxNewLoads &&\n           this.getCount() > 0) {\n      tile = /** @type {import(\"./Tile.js\").default} */ (this.dequeue()[0]);\n      tileKey = tile.getKey();\n      state = tile.getState();\n      if (state === TileState.ABORT) {\n        abortedTiles = true;\n      } else if (state === TileState.IDLE && !(tileKey in this.tilesLoadingKeys_)) {\n        tile.load();\n        if (tile.getState() === TileState.LOADING) {\n          this.tilesLoadingKeys_[tileKey] = true;\n          ++this.tilesLoading_;\n          ++newLoads;\n        }\n      }\n    }\n    if (newLoads === 0 && abortedTiles) {\n      // Do not stop the render loop when all wanted tiles were aborted due to\n      // a small, saturated tile cache.\n      this.tileChangeCallback_();\n    }\n  }\n}\n\n\nexport default TileQueue;\n","/**\n * @module ol/renderer/canvas/TileLayer\n */\nimport {getUid} from '../../util.js';\nimport {fromUserExtent} from '../../proj.js';\nimport TileRange from '../../TileRange.js';\nimport TileState from '../../TileState.js';\nimport {createEmpty, equals, getIntersection, getTopLeft} from '../../extent.js';\nimport CanvasLayerRenderer from './Layer.js';\nimport {apply as applyTransform, compose as composeTransform, makeInverse, toString as transformToString} from '../../transform.js';\nimport {numberSafeCompareFunction} from '../../array.js';\n\n/**\n * @classdesc\n * Canvas renderer for tile layers.\n * @api\n */\nclass CanvasTileLayerRenderer extends CanvasLayerRenderer {\n\n  /**\n   * @param {import(\"../../layer/Tile.js\").default|import(\"../../layer/VectorTile.js\").default} tileLayer Tile layer.\n   */\n  constructor(tileLayer) {\n    super(tileLayer);\n\n    /**\n     * Rendered extent has changed since the previous `renderFrame()` call\n     * @type {boolean}\n     */\n    this.extentChanged = true;\n\n    /**\n     * @private\n     * @type {import(\"../../extent.js\").Extent}\n     */\n    this.renderedExtent_ = null;\n\n    /**\n     * @protected\n     * @type {number}\n     */\n    this.renderedRevision;\n\n    /**\n     * @protected\n     * @type {!Array<import(\"../../Tile.js\").default>}\n     */\n    this.renderedTiles = [];\n\n    /**\n     * @private\n     * @type {boolean}\n     */\n    this.newTiles_ = false;\n\n    /**\n     * @protected\n     * @type {import(\"../../extent.js\").Extent}\n     */\n    this.tmpExtent = createEmpty();\n\n    /**\n     * @private\n     * @type {import(\"../../TileRange.js\").default}\n     */\n    this.tmpTileRange_ = new TileRange(0, 0, 0, 0);\n  }\n\n  /**\n   * @protected\n   * @param {import(\"../../Tile.js\").default} tile Tile.\n   * @return {boolean} Tile is drawable.\n   */\n  isDrawableTile(tile) {\n    const tileLayer = this.getLayer();\n    const tileState = tile.getState();\n    const useInterimTilesOnError = tileLayer.getUseInterimTilesOnError();\n    return tileState == TileState.LOADED ||\n        tileState == TileState.EMPTY ||\n        tileState == TileState.ERROR && !useInterimTilesOnError;\n  }\n\n  /**\n   * @param {number} z Tile coordinate z.\n   * @param {number} x Tile coordinate x.\n   * @param {number} y Tile coordinate y.\n   * @param {import(\"../../PluggableMap.js\").FrameState} frameState Frame state.\n   * @return {!import(\"../../Tile.js\").default} Tile.\n   */\n  getTile(z, x, y, frameState) {\n    const pixelRatio = frameState.pixelRatio;\n    const projection = frameState.viewState.projection;\n    const tileLayer = this.getLayer();\n    const tileSource = tileLayer.getSource();\n    let tile = tileSource.getTile(z, x, y, pixelRatio, projection);\n    if (tile.getState() == TileState.ERROR) {\n      if (!tileLayer.getUseInterimTilesOnError()) {\n        // When useInterimTilesOnError is false, we consider the error tile as loaded.\n        tile.setState(TileState.LOADED);\n      } else if (tileLayer.getPreload() > 0) {\n        // Preloaded tiles for lower resolutions might have finished loading.\n        this.newTiles_ = true;\n      }\n    }\n    if (!this.isDrawableTile(tile)) {\n      tile = tile.getInterimTile();\n    }\n    return tile;\n  }\n\n  /**\n   * @inheritDoc\n   */\n  loadedTileCallback(tiles, zoom, tile) {\n    if (this.isDrawableTile(tile)) {\n      return super.loadedTileCallback(tiles, zoom, tile);\n    }\n    return false;\n  }\n\n  /**\n   * @inheritDoc\n   */\n  prepareFrame(frameState) {\n    return !!this.getLayer().getSource();\n  }\n\n  /**\n   * TODO: File a TypeScript issue about inheritDoc not being followed\n   * all the way.  Without this explicit return type, the VectorTileLayer\n   * renderFrame function does not pass.\n   *\n   * @inheritDoc\n   * @returns {HTMLElement} The rendered element.\n   */\n  renderFrame(frameState, target) {\n    const layerState = frameState.layerStatesArray[frameState.layerIndex];\n    const viewState = frameState.viewState;\n    const projection = viewState.projection;\n    const viewResolution = viewState.resolution;\n    const viewCenter = viewState.center;\n    const rotation = viewState.rotation;\n    const pixelRatio = frameState.pixelRatio;\n\n    const tileLayer = this.getLayer();\n    const tileSource = tileLayer.getSource();\n    const sourceRevision = tileSource.getRevision();\n    const tileGrid = tileSource.getTileGridForProjection(projection);\n    const z = tileGrid.getZForResolution(viewResolution, tileSource.zDirection);\n    const tileResolution = tileGrid.getResolution(z);\n\n    let extent = frameState.extent;\n    const layerExtent = layerState.extent && fromUserExtent(layerState.extent, projection);\n    if (layerExtent) {\n      extent = getIntersection(extent, fromUserExtent(layerState.extent, projection));\n    }\n\n    const tilePixelRatio = tileSource.getTilePixelRatio(pixelRatio);\n\n    // desired dimensions of the canvas in pixels\n    let width = Math.round(frameState.size[0] * tilePixelRatio);\n    let height = Math.round(frameState.size[1] * tilePixelRatio);\n\n    if (rotation) {\n      const size = Math.round(Math.sqrt(width * width + height * height));\n      width = height = size;\n    }\n\n    const dx = tileResolution * width / 2 / tilePixelRatio;\n    const dy = tileResolution * height / 2 / tilePixelRatio;\n    const canvasExtent = [\n      viewCenter[0] - dx,\n      viewCenter[1] - dy,\n      viewCenter[0] + dx,\n      viewCenter[1] + dy\n    ];\n\n    const tileRange = tileGrid.getTileRangeForExtentAndZ(extent, z);\n\n    /**\n     * @type {Object<number, Object<string, import(\"../../Tile.js\").default>>}\n     */\n    const tilesToDrawByZ = {};\n    tilesToDrawByZ[z] = {};\n\n    const findLoadedTiles = this.createLoadedTileFinder(tileSource, projection, tilesToDrawByZ);\n\n    const tmpExtent = this.tmpExtent;\n    const tmpTileRange = this.tmpTileRange_;\n    this.newTiles_ = false;\n    for (let x = tileRange.minX; x <= tileRange.maxX; ++x) {\n      for (let y = tileRange.minY; y <= tileRange.maxY; ++y) {\n        const tile = this.getTile(z, x, y, frameState);\n        if (this.isDrawableTile(tile)) {\n          const uid = getUid(this);\n          if (tile.getState() == TileState.LOADED) {\n            tilesToDrawByZ[z][tile.tileCoord.toString()] = tile;\n            const inTransition = tile.inTransition(uid);\n            if (!this.newTiles_ && (inTransition || this.renderedTiles.indexOf(tile) === -1)) {\n              this.newTiles_ = true;\n            }\n          }\n          if (tile.getAlpha(uid, frameState.time) === 1) {\n            // don't look for alt tiles if alpha is 1\n            continue;\n          }\n        }\n\n        const childTileRange = tileGrid.getTileCoordChildTileRange(tile.tileCoord, tmpTileRange, tmpExtent);\n\n        let covered = false;\n        if (childTileRange) {\n          covered = findLoadedTiles(z + 1, childTileRange);\n        }\n        if (!covered) {\n          tileGrid.forEachTileCoordParentTileRange(tile.tileCoord, findLoadedTiles, tmpTileRange, tmpExtent);\n        }\n\n      }\n    }\n\n\n    const canvasScale = tileResolution / viewResolution;\n\n    // set forward and inverse pixel transforms\n    composeTransform(this.pixelTransform,\n      frameState.size[0] / 2, frameState.size[1] / 2,\n      1 / tilePixelRatio, 1 / tilePixelRatio,\n      rotation,\n      -width / 2, -height / 2\n    );\n\n    this.useContainer(target, this.pixelTransform, layerState.opacity);\n    const context = this.context;\n    const canvas = context.canvas;\n\n    makeInverse(this.inversePixelTransform, this.pixelTransform);\n\n    // set scale transform for calculating tile positions on the canvas\n    composeTransform(this.tempTransform_,\n      width / 2, height / 2,\n      canvasScale, canvasScale,\n      0,\n      -width / 2, -height / 2\n    );\n\n    if (canvas.width != width || canvas.height != height) {\n      canvas.width = width;\n      canvas.height = height;\n    } else if (!this.containerReused) {\n      context.clearRect(0, 0, width, height);\n    }\n\n    if (layerExtent) {\n      this.clipUnrotated(context, frameState, layerExtent);\n    }\n\n    this.preRender(context, frameState);\n\n    this.renderedTiles.length = 0;\n    /** @type {Array<number>} */\n    let zs = Object.keys(tilesToDrawByZ).map(Number);\n    zs.sort(numberSafeCompareFunction);\n\n    let clips, clipZs, currentClip;\n    if (layerState.opacity === 1 && (!this.containerReused || tileSource.getOpaque(frameState.viewState.projection))) {\n      zs = zs.reverse();\n    } else {\n      clips = [];\n      clipZs = [];\n    }\n    for (let i = zs.length - 1; i >= 0; --i) {\n      const currentZ = zs[i];\n      const currentTilePixelSize = tileSource.getTilePixelSize(currentZ, pixelRatio, projection);\n      const currentResolution = tileGrid.getResolution(currentZ);\n      const currentScale = currentResolution / tileResolution;\n      const dx = currentTilePixelSize[0] * currentScale * canvasScale;\n      const dy = currentTilePixelSize[1] * currentScale * canvasScale;\n      const originTileCoord = tileGrid.getTileCoordForCoordAndZ(getTopLeft(canvasExtent), currentZ);\n      const originTileExtent = tileGrid.getTileCoordExtent(originTileCoord);\n      const origin = applyTransform(this.tempTransform_, [\n        tilePixelRatio * (originTileExtent[0] - canvasExtent[0]) / tileResolution,\n        tilePixelRatio * (canvasExtent[3] - originTileExtent[3]) / tileResolution\n      ]);\n      const tileGutter = tilePixelRatio * tileSource.getGutterForProjection(projection);\n      const tilesToDraw = tilesToDrawByZ[currentZ];\n      for (const tileCoordKey in tilesToDraw) {\n        const tile = /** @type {import(\"../../ImageTile.js\").default} */ (tilesToDraw[tileCoordKey]);\n        const tileCoord = tile.tileCoord;\n\n        // Calculate integer positions and sizes so that tiles align\n        const floatX = (origin[0] - (originTileCoord[1] - tileCoord[1]) * dx);\n        const nextX = Math.round(floatX + dx);\n        const floatY = (origin[1] - (originTileCoord[2] - tileCoord[2]) * dy);\n        const nextY = Math.round(floatY + dy);\n        const x = Math.round(floatX);\n        const y = Math.round(floatY);\n        const w = nextX - x;\n        const h = nextY - y;\n        const transition = z === currentZ;\n\n        const inTransition = transition && tile.getAlpha(getUid(this), frameState.time) !== 1;\n        if (!inTransition) {\n          if (clips) {\n            // Clip mask for regions in this tile that already filled by a higher z tile\n            context.save();\n            currentClip = [x, y, x + w, y, x + w, y + h, x, y + h];\n            for (let i = 0, ii = clips.length; i < ii; ++i) {\n              if (z !== currentZ && currentZ < clipZs[i]) {\n                const clip = clips[i];\n                context.beginPath();\n                // counter-clockwise (outer ring) for current tile\n                context.moveTo(currentClip[0], currentClip[1]);\n                context.lineTo(currentClip[2], currentClip[3]);\n                context.lineTo(currentClip[4], currentClip[5]);\n                context.lineTo(currentClip[6], currentClip[7]);\n                // clockwise (inner ring) for higher z tile\n                context.moveTo(clip[6], clip[7]);\n                context.lineTo(clip[4], clip[5]);\n                context.lineTo(clip[2], clip[3]);\n                context.lineTo(clip[0], clip[1]);\n                context.clip();\n              }\n            }\n            clips.push(currentClip);\n            clipZs.push(currentZ);\n          } else {\n            context.clearRect(x, y, w, h);\n          }\n        }\n        this.drawTileImage(tile, frameState, x, y, w, h, tileGutter, transition, layerState.opacity);\n        if (clips && !inTransition) {\n          context.restore();\n        }\n        this.renderedTiles.push(tile);\n        this.updateUsedTiles(frameState.usedTiles, tileSource, tile);\n      }\n    }\n\n\n    this.renderedRevision = sourceRevision;\n    this.renderedResolution = tileResolution;\n    this.extentChanged = !this.renderedExtent_ || !equals(this.renderedExtent_, canvasExtent);\n    this.renderedExtent_ = canvasExtent;\n\n    this.manageTilePyramid(frameState, tileSource, tileGrid, pixelRatio,\n      projection, extent, z, tileLayer.getPreload());\n    this.updateCacheSize_(frameState, tileSource);\n    this.scheduleExpireCache(frameState, tileSource);\n\n    this.postRender(context, frameState);\n\n    if (layerState.extent) {\n      context.restore();\n    }\n\n    const canvasTransform = transformToString(this.pixelTransform);\n    if (canvasTransform !== canvas.style.transform) {\n      canvas.style.transform = canvasTransform;\n    }\n\n    return this.container;\n  }\n\n  /**\n   * @param {import(\"../../ImageTile.js\").default} tile Tile.\n   * @param {import(\"../../PluggableMap.js\").FrameState} frameState Frame state.\n   * @param {number} x Left of the tile.\n   * @param {number} y Top of the tile.\n   * @param {number} w Width of the tile.\n   * @param {number} h Height of the tile.\n   * @param {number} gutter Tile gutter.\n   * @param {boolean} transition Apply an alpha transition.\n   * @param {number} opacity Opacity.\n   */\n  drawTileImage(tile, frameState, x, y, w, h, gutter, transition, opacity) {\n    const image = this.getTileImage(tile);\n    if (!image) {\n      return;\n    }\n    const uid = getUid(this);\n    const tileAlpha = transition ? tile.getAlpha(uid, frameState.time) : 1;\n    const alpha = opacity * tileAlpha;\n    const alphaChanged = alpha !== this.context.globalAlpha;\n    if (alphaChanged) {\n      this.context.save();\n      this.context.globalAlpha = alpha;\n    }\n    this.context.drawImage(image, gutter, gutter,\n      image.width - 2 * gutter, image.height - 2 * gutter, x, y, w, h);\n\n    if (alphaChanged) {\n      this.context.restore();\n    }\n    if (tileAlpha !== 1) {\n      frameState.animate = true;\n    } else if (transition) {\n      tile.endTransition(uid);\n    }\n  }\n\n  /**\n   * @inheritDoc\n   */\n  getImage() {\n    const context = this.context;\n    return context ? context.canvas : null;\n  }\n\n  /**\n   * Get the image from a tile.\n   * @param {import(\"../../ImageTile.js\").default} tile Tile.\n   * @return {HTMLCanvasElement|HTMLImageElement|HTMLVideoElement} Image.\n   * @protected\n   */\n  getTileImage(tile) {\n    return tile.getImage();\n  }\n\n  /**\n   * @param {import(\"../../PluggableMap.js\").FrameState} frameState Frame state.\n   * @param {import(\"../../source/Tile.js\").default} tileSource Tile source.\n   * @protected\n   */\n  scheduleExpireCache(frameState, tileSource) {\n    if (tileSource.canExpireCache()) {\n      /**\n       * @param {import(\"../../source/Tile.js\").default} tileSource Tile source.\n       * @param {import(\"../../PluggableMap.js\").default} map Map.\n       * @param {import(\"../../PluggableMap.js\").FrameState} frameState Frame state.\n       */\n      const postRenderFunction = function(tileSource, map, frameState) {\n        const tileSourceKey = getUid(tileSource);\n        if (tileSourceKey in frameState.usedTiles) {\n          tileSource.expireCache(frameState.viewState.projection,\n            frameState.usedTiles[tileSourceKey]);\n        }\n      }.bind(null, tileSource);\n\n      frameState.postRenderFunctions.push(\n        /** @type {import(\"../../PluggableMap.js\").PostRenderFunction} */ (postRenderFunction)\n      );\n    }\n  }\n\n  /**\n   * @param {!Object<string, !Object<string, boolean>>} usedTiles Used tiles.\n   * @param {import(\"../../source/Tile.js\").default} tileSource Tile source.\n   * @param {import('../../Tile.js').default} tile Tile.\n   * @protected\n   */\n  updateUsedTiles(usedTiles, tileSource, tile) {\n    // FIXME should we use tilesToDrawByZ instead?\n    const tileSourceKey = getUid(tileSource);\n    if (!(tileSourceKey in usedTiles)) {\n      usedTiles[tileSourceKey] = {};\n    }\n    usedTiles[tileSourceKey][tile.getKey()] = true;\n  }\n\n  /**\n   * Check if the cache is big enough, and increase its size if necessary.\n   * @param {import(\"../../PluggableMap.js\").FrameState} frameState Frame state.\n   * @param {import(\"../../source/Tile.js\").default} tileSource Tile source.\n   * @private\n   */\n  updateCacheSize_(frameState, tileSource) {\n    const tileSourceKey = getUid(tileSource);\n    let size = 0;\n    if (tileSourceKey in frameState.usedTiles) {\n      size += Object.keys(frameState.usedTiles[tileSourceKey]).length;\n    }\n    if (tileSourceKey in frameState.wantedTiles) {\n      size += Object.keys(frameState.wantedTiles[tileSourceKey]).length;\n    }\n    const tileCache = tileSource.tileCache;\n    if (tileCache.highWaterMark < size) {\n      tileCache.highWaterMark = size;\n    }\n  }\n\n  /**\n   * Manage tile pyramid.\n   * This function performs a number of functions related to the tiles at the\n   * current zoom and lower zoom levels:\n   * - registers idle tiles in frameState.wantedTiles so that they are not\n   *   discarded by the tile queue\n   * - enqueues missing tiles\n   * @param {import(\"../../PluggableMap.js\").FrameState} frameState Frame state.\n   * @param {import(\"../../source/Tile.js\").default} tileSource Tile source.\n   * @param {import(\"../../tilegrid/TileGrid.js\").default} tileGrid Tile grid.\n   * @param {number} pixelRatio Pixel ratio.\n   * @param {import(\"../../proj/Projection.js\").default} projection Projection.\n   * @param {import(\"../../extent.js\").Extent} extent Extent.\n   * @param {number} currentZ Current Z.\n   * @param {number} preload Load low resolution tiles up to 'preload' levels.\n   * @param {function(import(\"../../Tile.js\").default)=} opt_tileCallback Tile callback.\n   * @protected\n   */\n  manageTilePyramid(\n    frameState,\n    tileSource,\n    tileGrid,\n    pixelRatio,\n    projection,\n    extent,\n    currentZ,\n    preload,\n    opt_tileCallback\n  ) {\n    const tileSourceKey = getUid(tileSource);\n    if (!(tileSourceKey in frameState.wantedTiles)) {\n      frameState.wantedTiles[tileSourceKey] = {};\n    }\n    const wantedTiles = frameState.wantedTiles[tileSourceKey];\n    const tileQueue = frameState.tileQueue;\n    const minZoom = tileGrid.getMinZoom();\n    let tile, tileRange, tileResolution, x, y, z;\n    for (z = minZoom; z <= currentZ; ++z) {\n      tileRange = tileGrid.getTileRangeForExtentAndZ(extent, z, tileRange);\n      tileResolution = tileGrid.getResolution(z);\n      for (x = tileRange.minX; x <= tileRange.maxX; ++x) {\n        for (y = tileRange.minY; y <= tileRange.maxY; ++y) {\n          if (currentZ - z <= preload) {\n            tile = tileSource.getTile(z, x, y, pixelRatio, projection);\n            if (tile.getState() == TileState.IDLE) {\n              wantedTiles[tile.getKey()] = true;\n              if (!tileQueue.isKeyQueued(tile.getKey())) {\n                tileQueue.enqueue([tile, tileSourceKey,\n                  tileGrid.getTileCoordCenter(tile.tileCoord), tileResolution]);\n              }\n            }\n            if (opt_tileCallback !== undefined) {\n              opt_tileCallback(tile);\n            }\n          } else {\n            tileSource.useTile(z, x, y, projection);\n          }\n        }\n      }\n    }\n  }\n\n}\n\n\n/**\n * @function\n * @return {import(\"../../layer/Tile.js\").default|import(\"../../layer/VectorTile.js\").default}\n */\nCanvasTileLayerRenderer.prototype.getLayer;\n\n\nexport default CanvasTileLayerRenderer;\n","/**\n * @module ol/renderer/Layer\n */\nimport {abstract} from '../util.js';\nimport ImageState from '../ImageState.js';\nimport Observable from '../Observable.js';\nimport EventType from '../events/EventType.js';\nimport SourceState from '../source/State.js';\n\n/**\n * @template {import(\"../layer/Layer.js\").default} LayerType\n */\nclass LayerRenderer extends Observable {\n\n  /**\n   * @param {LayerType} layer Layer.\n   */\n  constructor(layer) {\n\n    super();\n\n    /** @private */\n    this.boundHandleImageChange_ = this.handleImageChange_.bind(this);\n\n    /**\n     * @private\n     * @type {LayerType}\n     */\n    this.layer_ = layer;\n\n  }\n\n  /**\n   * Determine whether render should be called.\n   * @abstract\n   * @param {import(\"../PluggableMap.js\").FrameState} frameState Frame state.\n   * @return {boolean} Layer is ready to be rendered.\n   */\n  prepareFrame(frameState) {\n    return abstract();\n  }\n\n  /**\n   * Render the layer.\n   * @abstract\n   * @param {import(\"../PluggableMap.js\").FrameState} frameState Frame state.\n   * @param {HTMLElement} target Target that may be used to render content to.\n   * @return {HTMLElement} The rendered element.\n   */\n  renderFrame(frameState, target) {\n    return abstract();\n  }\n\n  /**\n   * @param {Object<number, Object<string, import(\"../Tile.js\").default>>} tiles Lookup of loaded tiles by zoom level.\n   * @param {number} zoom Zoom level.\n   * @param {import(\"../Tile.js\").default} tile Tile.\n   */\n  loadedTileCallback(tiles, zoom, tile) {\n    if (!tiles[zoom]) {\n      tiles[zoom] = {};\n    }\n    tiles[zoom][tile.tileCoord.toString()] = tile;\n  }\n\n  /**\n   * Create a function that adds loaded tiles to the tile lookup.\n   * @param {import(\"../source/Tile.js\").default} source Tile source.\n   * @param {import(\"../proj/Projection.js\").default} projection Projection of the tiles.\n   * @param {Object<number, Object<string, import(\"../Tile.js\").default>>} tiles Lookup of loaded tiles by zoom level.\n   * @return {function(number, import(\"../TileRange.js\").default):boolean} A function that can be\n   *     called with a zoom level and a tile range to add loaded tiles to the lookup.\n   * @protected\n   */\n  createLoadedTileFinder(source, projection, tiles) {\n    return (\n      /**\n       * @param {number} zoom Zoom level.\n       * @param {import(\"../TileRange.js\").default} tileRange Tile range.\n       * @return {boolean} The tile range is fully loaded.\n       * @this {LayerRenderer}\n       */\n      function(zoom, tileRange) {\n        const callback = this.loadedTileCallback.bind(this, tiles, zoom);\n        return source.forEachLoadedTile(projection, zoom, tileRange, callback);\n      }\n    ).bind(this);\n  }\n  /**\n   * @abstract\n   * @param {import(\"../coordinate.js\").Coordinate} coordinate Coordinate.\n   * @param {import(\"../PluggableMap.js\").FrameState} frameState Frame state.\n   * @param {number} hitTolerance Hit tolerance in pixels.\n   * @param {function(import(\"../Feature.js\").FeatureLike, import(\"../layer/Layer.js\").default): T} callback Feature callback.\n   * @param {Array<import(\"../Feature.js\").FeatureLike>} declutteredFeatures Decluttered features.\n   * @return {T|void} Callback result.\n   * @template T\n   */\n  forEachFeatureAtCoordinate(coordinate, frameState, hitTolerance, callback, declutteredFeatures) {}\n\n  /**\n   * @abstract\n   * @param {import(\"../pixel.js\").Pixel} pixel Pixel.\n   * @param {import(\"../PluggableMap.js\").FrameState} frameState FrameState.\n   * @param {number} hitTolerance Hit tolerance in pixels.\n   * @return {Uint8ClampedArray|Uint8Array} The result.  If there is no data at the pixel\n   *    location, null will be returned.  If there is data, but pixel values cannot be\n   *    returned, and empty array will be returned.\n   */\n  getDataAtPixel(pixel, frameState, hitTolerance) {\n    return abstract();\n  }\n\n  /**\n   * @return {LayerType} Layer.\n   */\n  getLayer() {\n    return this.layer_;\n  }\n\n  /**\n   * Perform action necessary to get the layer rendered after new fonts have loaded\n   * @abstract\n   */\n  handleFontsChanged() {}\n\n  /**\n   * Handle changes in image state.\n   * @param {import(\"../events/Event.js\").default} event Image change event.\n   * @private\n   */\n  handleImageChange_(event) {\n    const image = /** @type {import(\"../Image.js\").default} */ (event.target);\n    if (image.getState() === ImageState.LOADED) {\n      this.renderIfReadyAndVisible();\n    }\n  }\n\n  /**\n   * Load the image if not already loaded, and register the image change\n   * listener if needed.\n   * @param {import(\"../ImageBase.js\").default} image Image.\n   * @return {boolean} `true` if the image is already loaded, `false` otherwise.\n   * @protected\n   */\n  loadImage(image) {\n    let imageState = image.getState();\n    if (imageState != ImageState.LOADED && imageState != ImageState.ERROR) {\n      image.addEventListener(EventType.CHANGE, this.boundHandleImageChange_);\n    }\n    if (imageState == ImageState.IDLE) {\n      image.load();\n      imageState = image.getState();\n    }\n    return imageState == ImageState.LOADED;\n  }\n\n  /**\n   * @protected\n   */\n  renderIfReadyAndVisible() {\n    const layer = this.getLayer();\n    if (layer.getVisible() && layer.getSourceState() == SourceState.READY) {\n      layer.changed();\n    }\n  }\n\n}\n\nexport default LayerRenderer;\n","/**\n * @module ol/ImageTile\n */\nimport Tile from './Tile.js';\nimport TileState from './TileState.js';\nimport {createCanvasContext2D} from './dom.js';\nimport {listenImage} from './Image.js';\n\n\nclass ImageTile extends Tile {\n\n  /**\n   * @param {import(\"./tilecoord.js\").TileCoord} tileCoord Tile coordinate.\n   * @param {TileState} state State.\n   * @param {string} src Image source URI.\n   * @param {?string} crossOrigin Cross origin.\n   * @param {import(\"./Tile.js\").LoadFunction} tileLoadFunction Tile load function.\n   * @param {import(\"./Tile.js\").Options=} opt_options Tile options.\n   */\n  constructor(tileCoord, state, src, crossOrigin, tileLoadFunction, opt_options) {\n\n    super(tileCoord, state, opt_options);\n\n    /**\n     * @private\n     * @type {?string}\n     */\n    this.crossOrigin_ = crossOrigin;\n\n    /**\n     * Image URI\n     *\n     * @private\n     * @type {string}\n     */\n    this.src_ = src;\n\n    /**\n     * @private\n     * @type {HTMLImageElement|HTMLCanvasElement}\n     */\n    this.image_ = new Image();\n    if (crossOrigin !== null) {\n      this.image_.crossOrigin = crossOrigin;\n    }\n\n    /**\n     * @private\n     * @type {function():void}\n     */\n    this.unlisten_ = null;\n\n    /**\n     * @private\n     * @type {import(\"./Tile.js\").LoadFunction}\n     */\n    this.tileLoadFunction_ = tileLoadFunction;\n\n  }\n\n  /**\n   * @inheritDoc\n   */\n  disposeInternal() {\n    if (this.state == TileState.LOADING) {\n      this.unlistenImage_();\n      this.image_ = getBlankImage();\n    }\n    if (this.interimTile) {\n      this.interimTile.dispose();\n    }\n    this.state = TileState.ABORT;\n    this.changed();\n    super.disposeInternal();\n  }\n\n  /**\n   * Get the HTML image element for this tile (may be a Canvas, Image, or Video).\n   * @return {HTMLCanvasElement|HTMLImageElement|HTMLVideoElement} Image.\n   * @api\n   */\n  getImage() {\n    return this.image_;\n  }\n\n  /**\n   * @inheritDoc\n   */\n  getKey() {\n    return this.src_;\n  }\n\n  /**\n   * Tracks loading or read errors.\n   *\n   * @private\n   */\n  handleImageError_() {\n    this.state = TileState.ERROR;\n    this.unlistenImage_();\n    this.image_ = getBlankImage();\n    this.changed();\n  }\n\n  /**\n   * Tracks successful image load.\n   *\n   * @private\n   */\n  handleImageLoad_() {\n    const image = /** @type {HTMLImageElement} */ (this.image_);\n    if (image.naturalWidth && image.naturalHeight) {\n      this.state = TileState.LOADED;\n    } else {\n      this.state = TileState.EMPTY;\n    }\n    this.unlistenImage_();\n    this.changed();\n  }\n\n  /**\n   * @inheritDoc\n   * @api\n   */\n  load() {\n    if (this.state == TileState.ERROR) {\n      this.state = TileState.IDLE;\n      this.image_ = new Image();\n      if (this.crossOrigin_ !== null) {\n        this.image_.crossOrigin = this.crossOrigin_;\n      }\n    }\n    if (this.state == TileState.IDLE) {\n      this.state = TileState.LOADING;\n      this.changed();\n      this.tileLoadFunction_(this, this.src_);\n      this.unlisten_ = listenImage(\n        this.image_,\n        this.handleImageLoad_.bind(this),\n        this.handleImageError_.bind(this)\n      );\n    }\n  }\n\n  /**\n   * Discards event handlers which listen for load completion or errors.\n   *\n   * @private\n   */\n  unlistenImage_() {\n    if (this.unlisten_) {\n      this.unlisten_();\n      this.unlisten_ = null;\n    }\n  }\n}\n\n\n/**\n * Get a 1-pixel blank image.\n * @return {HTMLCanvasElement} Blank image.\n */\nfunction getBlankImage() {\n  const ctx = createCanvasContext2D(1, 1);\n  ctx.fillStyle = 'rgba(0,0,0,0)';\n  ctx.fillRect(0, 0, 1, 1);\n  return ctx.canvas;\n}\n\nexport default ImageTile;\n","/**\n * @module ol/TileCache\n */\nimport LRUCache from './structs/LRUCache.js';\nimport {fromKey, getKey} from './tilecoord.js';\n\nclass TileCache extends LRUCache {\n\n  /**\n   * @param {number=} opt_highWaterMark High water mark.\n   */\n  constructor(opt_highWaterMark) {\n\n    super(opt_highWaterMark);\n\n  }\n\n  /**\n   * @param {!Object<string, import(\"./TileRange.js\").default>} usedTiles Used tiles.\n   */\n  expireCache(usedTiles) {\n    while (this.canExpireCache()) {\n      const tile = this.peekLast();\n      if (tile.getKey() in usedTiles) {\n        break;\n      } else {\n        this.pop().dispose();\n      }\n    }\n  }\n\n  /**\n   * Prune all tiles from the cache that don't have the same z as the newest tile.\n   */\n  pruneExceptNewestZ() {\n    if (this.getCount() === 0) {\n      return;\n    }\n    const key = this.peekFirstKey();\n    const tileCoord = fromKey(key);\n    const z = tileCoord[0];\n    this.forEach(function(tile) {\n      if (tile.tileCoord[0] !== z) {\n        this.remove(getKey(tile.tileCoord));\n        tile.dispose();\n      }\n    }.bind(this));\n  }\n}\n\n\nexport default TileCache;\n","/**\n * @module ol/reproj/Triangulation\n */\nimport {boundingExtent, createEmpty, extendCoordinate, getBottomLeft, getBottomRight,\n  getTopLeft, getTopRight, getWidth, intersects} from '../extent.js';\nimport {modulo} from '../math.js';\nimport {getTransform} from '../proj.js';\n\n\n/**\n * Single triangle; consists of 3 source points and 3 target points.\n * @typedef {Object} Triangle\n * @property {Array<import(\"../coordinate.js\").Coordinate>} source\n * @property {Array<import(\"../coordinate.js\").Coordinate>} target\n */\n\n\n/**\n * Maximum number of subdivision steps during raster reprojection triangulation.\n * Prevents high memory usage and large number of proj4 calls (for certain\n * transformations and areas). At most `2*(2^this)` triangles are created for\n * each triangulated extent (tile/image).\n * @type {number}\n */\nconst MAX_SUBDIVISION = 10;\n\n\n/**\n * Maximum allowed size of triangle relative to world width. When transforming\n * corners of world extent between certain projections, the resulting\n * triangulation seems to have zero error and no subdivision is performed. If\n * the triangle width is more than this (relative to world width; 0-1),\n * subdivison is forced (up to `MAX_SUBDIVISION`). Default is `0.25`.\n * @type {number}\n */\nconst MAX_TRIANGLE_WIDTH = 0.25;\n\n\n/**\n * @classdesc\n * Class containing triangulation of the given target extent.\n * Used for determining source data and the reprojection itself.\n */\nclass Triangulation {\n\n  /**\n   * @param {import(\"../proj/Projection.js\").default} sourceProj Source projection.\n   * @param {import(\"../proj/Projection.js\").default} targetProj Target projection.\n   * @param {import(\"../extent.js\").Extent} targetExtent Target extent to triangulate.\n   * @param {import(\"../extent.js\").Extent} maxSourceExtent Maximal source extent that can be used.\n   * @param {number} errorThreshold Acceptable error (in source units).\n   */\n  constructor(sourceProj, targetProj, targetExtent, maxSourceExtent, errorThreshold) {\n\n    /**\n     * @type {import(\"../proj/Projection.js\").default}\n     * @private\n     */\n    this.sourceProj_ = sourceProj;\n\n    /**\n     * @type {import(\"../proj/Projection.js\").default}\n     * @private\n     */\n    this.targetProj_ = targetProj;\n\n    /** @type {!Object<string, import(\"../coordinate.js\").Coordinate>} */\n    let transformInvCache = {};\n    const transformInv = getTransform(this.targetProj_, this.sourceProj_);\n\n    /**\n     * @param {import(\"../coordinate.js\").Coordinate} c A coordinate.\n     * @return {import(\"../coordinate.js\").Coordinate} Transformed coordinate.\n     * @private\n     */\n    this.transformInv_ = function(c) {\n      const key = c[0] + '/' + c[1];\n      if (!transformInvCache[key]) {\n        transformInvCache[key] = transformInv(c);\n      }\n      return transformInvCache[key];\n    };\n\n    /**\n     * @type {import(\"../extent.js\").Extent}\n     * @private\n     */\n    this.maxSourceExtent_ = maxSourceExtent;\n\n    /**\n     * @type {number}\n     * @private\n     */\n    this.errorThresholdSquared_ = errorThreshold * errorThreshold;\n\n    /**\n     * @type {Array<Triangle>}\n     * @private\n     */\n    this.triangles_ = [];\n\n    /**\n     * Indicates that the triangulation crosses edge of the source projection.\n     * @type {boolean}\n     * @private\n     */\n    this.wrapsXInSource_ = false;\n\n    /**\n     * @type {boolean}\n     * @private\n     */\n    this.canWrapXInSource_ = this.sourceProj_.canWrapX() &&\n        !!maxSourceExtent &&\n        !!this.sourceProj_.getExtent() &&\n        (getWidth(maxSourceExtent) == getWidth(this.sourceProj_.getExtent()));\n\n    /**\n     * @type {?number}\n     * @private\n     */\n    this.sourceWorldWidth_ = this.sourceProj_.getExtent() ?\n      getWidth(this.sourceProj_.getExtent()) : null;\n\n    /**\n     * @type {?number}\n     * @private\n     */\n    this.targetWorldWidth_ = this.targetProj_.getExtent() ?\n      getWidth(this.targetProj_.getExtent()) : null;\n\n    const destinationTopLeft = getTopLeft(targetExtent);\n    const destinationTopRight = getTopRight(targetExtent);\n    const destinationBottomRight = getBottomRight(targetExtent);\n    const destinationBottomLeft = getBottomLeft(targetExtent);\n    const sourceTopLeft = this.transformInv_(destinationTopLeft);\n    const sourceTopRight = this.transformInv_(destinationTopRight);\n    const sourceBottomRight = this.transformInv_(destinationBottomRight);\n    const sourceBottomLeft = this.transformInv_(destinationBottomLeft);\n\n    this.addQuad_(\n      destinationTopLeft, destinationTopRight,\n      destinationBottomRight, destinationBottomLeft,\n      sourceTopLeft, sourceTopRight, sourceBottomRight, sourceBottomLeft,\n      MAX_SUBDIVISION);\n\n    if (this.wrapsXInSource_) {\n      let leftBound = Infinity;\n      this.triangles_.forEach(function(triangle, i, arr) {\n        leftBound = Math.min(leftBound,\n          triangle.source[0][0], triangle.source[1][0], triangle.source[2][0]);\n      });\n\n      // Shift triangles to be as close to `leftBound` as possible\n      // (if the distance is more than `worldWidth / 2` it can be closer.\n      this.triangles_.forEach(function(triangle) {\n        if (Math.max(triangle.source[0][0], triangle.source[1][0],\n          triangle.source[2][0]) - leftBound > this.sourceWorldWidth_ / 2) {\n          const newTriangle = [[triangle.source[0][0], triangle.source[0][1]],\n            [triangle.source[1][0], triangle.source[1][1]],\n            [triangle.source[2][0], triangle.source[2][1]]];\n          if ((newTriangle[0][0] - leftBound) > this.sourceWorldWidth_ / 2) {\n            newTriangle[0][0] -= this.sourceWorldWidth_;\n          }\n          if ((newTriangle[1][0] - leftBound) > this.sourceWorldWidth_ / 2) {\n            newTriangle[1][0] -= this.sourceWorldWidth_;\n          }\n          if ((newTriangle[2][0] - leftBound) > this.sourceWorldWidth_ / 2) {\n            newTriangle[2][0] -= this.sourceWorldWidth_;\n          }\n\n          // Rarely (if the extent contains both the dateline and prime meridian)\n          // the shift can in turn break some triangles.\n          // Detect this here and don't shift in such cases.\n          const minX = Math.min(\n            newTriangle[0][0], newTriangle[1][0], newTriangle[2][0]);\n          const maxX = Math.max(\n            newTriangle[0][0], newTriangle[1][0], newTriangle[2][0]);\n          if ((maxX - minX) < this.sourceWorldWidth_ / 2) {\n            triangle.source = newTriangle;\n          }\n        }\n      }.bind(this));\n    }\n\n    transformInvCache = {};\n  }\n\n  /**\n   * Adds triangle to the triangulation.\n   * @param {import(\"../coordinate.js\").Coordinate} a The target a coordinate.\n   * @param {import(\"../coordinate.js\").Coordinate} b The target b coordinate.\n   * @param {import(\"../coordinate.js\").Coordinate} c The target c coordinate.\n   * @param {import(\"../coordinate.js\").Coordinate} aSrc The source a coordinate.\n   * @param {import(\"../coordinate.js\").Coordinate} bSrc The source b coordinate.\n   * @param {import(\"../coordinate.js\").Coordinate} cSrc The source c coordinate.\n   * @private\n   */\n  addTriangle_(a, b, c, aSrc, bSrc, cSrc) {\n    this.triangles_.push({\n      source: [aSrc, bSrc, cSrc],\n      target: [a, b, c]\n    });\n  }\n\n  /**\n   * Adds quad (points in clock-wise order) to the triangulation\n   * (and reprojects the vertices) if valid.\n   * Performs quad subdivision if needed to increase precision.\n   *\n   * @param {import(\"../coordinate.js\").Coordinate} a The target a coordinate.\n   * @param {import(\"../coordinate.js\").Coordinate} b The target b coordinate.\n   * @param {import(\"../coordinate.js\").Coordinate} c The target c coordinate.\n   * @param {import(\"../coordinate.js\").Coordinate} d The target d coordinate.\n   * @param {import(\"../coordinate.js\").Coordinate} aSrc The source a coordinate.\n   * @param {import(\"../coordinate.js\").Coordinate} bSrc The source b coordinate.\n   * @param {import(\"../coordinate.js\").Coordinate} cSrc The source c coordinate.\n   * @param {import(\"../coordinate.js\").Coordinate} dSrc The source d coordinate.\n   * @param {number} maxSubdivision Maximal allowed subdivision of the quad.\n   * @private\n   */\n  addQuad_(a, b, c, d, aSrc, bSrc, cSrc, dSrc, maxSubdivision) {\n\n    const sourceQuadExtent = boundingExtent([aSrc, bSrc, cSrc, dSrc]);\n    const sourceCoverageX = this.sourceWorldWidth_ ?\n      getWidth(sourceQuadExtent) / this.sourceWorldWidth_ : null;\n    const sourceWorldWidth = /** @type {number} */ (this.sourceWorldWidth_);\n\n    // when the quad is wrapped in the source projection\n    // it covers most of the projection extent, but not fully\n    const wrapsX = this.sourceProj_.canWrapX() &&\n                 sourceCoverageX > 0.5 && sourceCoverageX < 1;\n\n    let needsSubdivision = false;\n\n    if (maxSubdivision > 0) {\n      if (this.targetProj_.isGlobal() && this.targetWorldWidth_) {\n        const targetQuadExtent = boundingExtent([a, b, c, d]);\n        const targetCoverageX = getWidth(targetQuadExtent) / this.targetWorldWidth_;\n        needsSubdivision = targetCoverageX > MAX_TRIANGLE_WIDTH ||\n          needsSubdivision;\n      }\n      if (!wrapsX && this.sourceProj_.isGlobal() && sourceCoverageX) {\n        needsSubdivision = sourceCoverageX > MAX_TRIANGLE_WIDTH ||\n            needsSubdivision;\n      }\n    }\n\n    if (!needsSubdivision && this.maxSourceExtent_) {\n      if (!intersects(sourceQuadExtent, this.maxSourceExtent_)) {\n        // whole quad outside source projection extent -> ignore\n        return;\n      }\n    }\n\n    if (!needsSubdivision) {\n      if (!isFinite(aSrc[0]) || !isFinite(aSrc[1]) ||\n          !isFinite(bSrc[0]) || !isFinite(bSrc[1]) ||\n          !isFinite(cSrc[0]) || !isFinite(cSrc[1]) ||\n          !isFinite(dSrc[0]) || !isFinite(dSrc[1])) {\n        if (maxSubdivision > 0) {\n          needsSubdivision = true;\n        } else {\n          return;\n        }\n      }\n    }\n\n    if (maxSubdivision > 0) {\n      if (!needsSubdivision) {\n        const center = [(a[0] + c[0]) / 2, (a[1] + c[1]) / 2];\n        const centerSrc = this.transformInv_(center);\n\n        let dx;\n        if (wrapsX) {\n          const centerSrcEstimX =\n              (modulo(aSrc[0], sourceWorldWidth) +\n               modulo(cSrc[0], sourceWorldWidth)) / 2;\n          dx = centerSrcEstimX -\n              modulo(centerSrc[0], sourceWorldWidth);\n        } else {\n          dx = (aSrc[0] + cSrc[0]) / 2 - centerSrc[0];\n        }\n        const dy = (aSrc[1] + cSrc[1]) / 2 - centerSrc[1];\n        const centerSrcErrorSquared = dx * dx + dy * dy;\n        needsSubdivision = centerSrcErrorSquared > this.errorThresholdSquared_;\n      }\n      if (needsSubdivision) {\n        if (Math.abs(a[0] - c[0]) <= Math.abs(a[1] - c[1])) {\n          // split horizontally (top & bottom)\n          const bc = [(b[0] + c[0]) / 2, (b[1] + c[1]) / 2];\n          const bcSrc = this.transformInv_(bc);\n          const da = [(d[0] + a[0]) / 2, (d[1] + a[1]) / 2];\n          const daSrc = this.transformInv_(da);\n\n          this.addQuad_(\n            a, b, bc, da, aSrc, bSrc, bcSrc, daSrc, maxSubdivision - 1);\n          this.addQuad_(\n            da, bc, c, d, daSrc, bcSrc, cSrc, dSrc, maxSubdivision - 1);\n        } else {\n          // split vertically (left & right)\n          const ab = [(a[0] + b[0]) / 2, (a[1] + b[1]) / 2];\n          const abSrc = this.transformInv_(ab);\n          const cd = [(c[0] + d[0]) / 2, (c[1] + d[1]) / 2];\n          const cdSrc = this.transformInv_(cd);\n\n          this.addQuad_(\n            a, ab, cd, d, aSrc, abSrc, cdSrc, dSrc, maxSubdivision - 1);\n          this.addQuad_(\n            ab, b, c, cd, abSrc, bSrc, cSrc, cdSrc, maxSubdivision - 1);\n        }\n        return;\n      }\n    }\n\n    if (wrapsX) {\n      if (!this.canWrapXInSource_) {\n        return;\n      }\n      this.wrapsXInSource_ = true;\n    }\n\n    this.addTriangle_(a, c, d, aSrc, cSrc, dSrc);\n    this.addTriangle_(a, b, c, aSrc, bSrc, cSrc);\n  }\n\n  /**\n   * Calculates extent of the 'source' coordinates from all the triangles.\n   *\n   * @return {import(\"../extent.js\").Extent} Calculated extent.\n   */\n  calculateSourceExtent() {\n    const extent = createEmpty();\n\n    this.triangles_.forEach(function(triangle, i, arr) {\n      const src = triangle.source;\n      extendCoordinate(extent, src[0]);\n      extendCoordinate(extent, src[1]);\n      extendCoordinate(extent, src[2]);\n    });\n\n    return extent;\n  }\n\n  /**\n   * @return {Array<Triangle>} Array of the calculated triangles.\n   */\n  getTriangles() {\n    return this.triangles_;\n  }\n}\n\nexport default Triangulation;\n","/**\n * @module ol/renderer/canvas/ImageLayer\n */\nimport {ENABLE_RASTER_REPROJECTION} from '../../reproj/common.js';\nimport ViewHint from '../../ViewHint.js';\nimport {containsExtent, intersects} from '../../extent.js';\nimport {fromUserExtent} from '../../proj.js';\nimport {getIntersection, isEmpty} from '../../extent.js';\nimport CanvasLayerRenderer from './Layer.js';\nimport {compose as composeTransform, makeInverse, toString as transformToString} from '../../transform.js';\n\n/**\n * @classdesc\n * Canvas renderer for image layers.\n * @api\n */\nclass CanvasImageLayerRenderer extends CanvasLayerRenderer {\n\n  /**\n   * @param {import(\"../../layer/Image.js\").default} imageLayer Image layer.\n   */\n  constructor(imageLayer) {\n    super(imageLayer);\n\n    /**\n     * @protected\n     * @type {?import(\"../../ImageBase.js\").default}\n     */\n    this.image_ = null;\n  }\n\n  /**\n   * @inheritDoc\n   */\n  getImage() {\n    return !this.image_ ? null : this.image_.getImage();\n  }\n\n  /**\n   * @inheritDoc\n   */\n  prepareFrame(frameState) {\n    const layerState = frameState.layerStatesArray[frameState.layerIndex];\n    const pixelRatio = frameState.pixelRatio;\n    const viewState = frameState.viewState;\n    const viewResolution = viewState.resolution;\n\n    const imageSource = this.getLayer().getSource();\n\n    const hints = frameState.viewHints;\n\n    let renderedExtent = frameState.extent;\n    if (layerState.extent !== undefined) {\n      renderedExtent = getIntersection(renderedExtent, fromUserExtent(layerState.extent, viewState.projection));\n    }\n\n    if (!hints[ViewHint.ANIMATING] && !hints[ViewHint.INTERACTING] && !isEmpty(renderedExtent)) {\n      let projection = viewState.projection;\n      if (!ENABLE_RASTER_REPROJECTION) {\n        const sourceProjection = imageSource.getProjection();\n        if (sourceProjection) {\n          projection = sourceProjection;\n        }\n      }\n      const image = imageSource.getImage(renderedExtent, viewResolution, pixelRatio, projection);\n      if (image && this.loadImage(image)) {\n        this.image_ = image;\n      }\n    }\n\n    return !!this.image_;\n  }\n\n  /**\n   * @inheritDoc\n   */\n  renderFrame(frameState, target) {\n    const image = this.image_;\n    const imageExtent = image.getExtent();\n    const imageResolution = image.getResolution();\n    const imagePixelRatio = image.getPixelRatio();\n    const layerState = frameState.layerStatesArray[frameState.layerIndex];\n    const pixelRatio = frameState.pixelRatio;\n    const viewState = frameState.viewState;\n    const viewCenter = viewState.center;\n    const viewResolution = viewState.resolution;\n    const size = frameState.size;\n    const scale = pixelRatio * imageResolution / (viewResolution * imagePixelRatio);\n\n    let width = Math.round(size[0] * pixelRatio);\n    let height = Math.round(size[1] * pixelRatio);\n    const rotation = viewState.rotation;\n    if (rotation) {\n      const size = Math.round(Math.sqrt(width * width + height * height));\n      width = height = size;\n    }\n\n    // set forward and inverse pixel transforms\n    composeTransform(this.pixelTransform,\n      frameState.size[0] / 2, frameState.size[1] / 2,\n      1 / pixelRatio, 1 / pixelRatio,\n      rotation,\n      -width / 2, -height / 2\n    );\n    makeInverse(this.inversePixelTransform, this.pixelTransform);\n\n    this.useContainer(target, this.pixelTransform, layerState.opacity);\n\n    const context = this.context;\n    const canvas = context.canvas;\n\n    if (canvas.width != width || canvas.height != height) {\n      canvas.width = width;\n      canvas.height = height;\n    } else if (!this.containerReused) {\n      context.clearRect(0, 0, width, height);\n    }\n\n    // clipped rendering if layer extent is set\n    let clipped = false;\n    if (layerState.extent) {\n      const layerExtent = fromUserExtent(layerState.extent, viewState.projection);\n      clipped = !containsExtent(layerExtent, frameState.extent) && intersects(layerExtent, frameState.extent);\n      if (clipped) {\n        this.clipUnrotated(context, frameState, layerExtent);\n      }\n    }\n\n    const img = image.getImage();\n\n    const transform = composeTransform(this.tempTransform_,\n      width / 2, height / 2,\n      scale, scale,\n      0,\n      imagePixelRatio * (imageExtent[0] - viewCenter[0]) / imageResolution,\n      imagePixelRatio * (viewCenter[1] - imageExtent[3]) / imageResolution);\n\n    this.renderedResolution = imageResolution * pixelRatio / imagePixelRatio;\n\n    const dx = transform[4];\n    const dy = transform[5];\n    const dw = img.width * transform[0];\n    const dh = img.height * transform[3];\n\n    this.preRender(context, frameState);\n    if (dw >= 0.5 && dh >= 0.5) {\n      const opacity = layerState.opacity;\n      let previousAlpha;\n      if (opacity !== 1) {\n        previousAlpha = this.context.globalAlpha;\n        this.context.globalAlpha = opacity;\n      }\n      this.context.drawImage(img, 0, 0, +img.width, +img.height,\n        Math.round(dx), Math.round(dy), Math.round(dw), Math.round(dh));\n      if (opacity !== 1) {\n        this.context.globalAlpha = previousAlpha;\n      }\n    }\n    this.postRender(context, frameState);\n\n    if (clipped) {\n      context.restore();\n    }\n\n    const canvasTransform = transformToString(this.pixelTransform);\n    if (canvasTransform !== canvas.style.transform) {\n      canvas.style.transform = canvasTransform;\n    }\n\n    return this.container;\n\n  }\n\n}\n\n\nexport default CanvasImageLayerRenderer;\n","!function(t,i){\"object\"==typeof exports&&\"undefined\"!=typeof module?module.exports=i():\"function\"==typeof define&&define.amd?define(i):(t=t||self).RBush=i()}(this,function(){\"use strict\";function t(t,r,e,a,h){!function t(n,r,e,a,h){for(;a>e;){if(a-e>600){var o=a-e+1,s=r-e+1,l=Math.log(o),f=.5*Math.exp(2*l/3),u=.5*Math.sqrt(l*f*(o-f)/o)*(s-o/2<0?-1:1),m=Math.max(e,Math.floor(r-s*f/o+u)),c=Math.min(a,Math.floor(r+(o-s)*f/o+u));t(n,r,m,c,h)}var p=n[r],d=e,x=a;for(i(n,e,r),h(n[a],p)>0&&i(n,e,a);d<x;){for(i(n,d,x),d++,x--;h(n[d],p)<0;)d++;for(;h(n[x],p)>0;)x--}0===h(n[e],p)?i(n,e,x):i(n,++x,a),x<=r&&(e=x+1),r<=x&&(a=x-1)}}(t,r,e||0,a||t.length-1,h||n)}function i(t,i,n){var r=t[i];t[i]=t[n],t[n]=r}function n(t,i){return t<i?-1:t>i?1:0}var r=function(t){void 0===t&&(t=9),this._maxEntries=Math.max(4,t),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),this.clear()};function e(t,i,n){if(!n)return i.indexOf(t);for(var r=0;r<i.length;r++)if(n(t,i[r]))return r;return-1}function a(t,i){h(t,0,t.children.length,i,t)}function h(t,i,n,r,e){e||(e=p(null)),e.minX=1/0,e.minY=1/0,e.maxX=-1/0,e.maxY=-1/0;for(var a=i;a<n;a++){var h=t.children[a];o(e,t.leaf?r(h):h)}return e}function o(t,i){return t.minX=Math.min(t.minX,i.minX),t.minY=Math.min(t.minY,i.minY),t.maxX=Math.max(t.maxX,i.maxX),t.maxY=Math.max(t.maxY,i.maxY),t}function s(t,i){return t.minX-i.minX}function l(t,i){return t.minY-i.minY}function f(t){return(t.maxX-t.minX)*(t.maxY-t.minY)}function u(t){return t.maxX-t.minX+(t.maxY-t.minY)}function m(t,i){return t.minX<=i.minX&&t.minY<=i.minY&&i.maxX<=t.maxX&&i.maxY<=t.maxY}function c(t,i){return i.minX<=t.maxX&&i.minY<=t.maxY&&i.maxX>=t.minX&&i.maxY>=t.minY}function p(t){return{children:t,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function d(i,n,r,e,a){for(var h=[n,r];h.length;)if(!((r=h.pop())-(n=h.pop())<=e)){var o=n+Math.ceil((r-n)/e/2)*e;t(i,o,n,r,a),h.push(n,o,o,r)}}return r.prototype.all=function(){return this._all(this.data,[])},r.prototype.search=function(t){var i=this.data,n=[];if(!c(t,i))return n;for(var r=this.toBBox,e=[];i;){for(var a=0;a<i.children.length;a++){var h=i.children[a],o=i.leaf?r(h):h;c(t,o)&&(i.leaf?n.push(h):m(t,o)?this._all(h,n):e.push(h))}i=e.pop()}return n},r.prototype.collides=function(t){var i=this.data;if(!c(t,i))return!1;for(var n=[];i;){for(var r=0;r<i.children.length;r++){var e=i.children[r],a=i.leaf?this.toBBox(e):e;if(c(t,a)){if(i.leaf||m(t,a))return!0;n.push(e)}}i=n.pop()}return!1},r.prototype.load=function(t){if(!t||!t.length)return this;if(t.length<this._minEntries){for(var i=0;i<t.length;i++)this.insert(t[i]);return this}var n=this._build(t.slice(),0,t.length-1,0);if(this.data.children.length)if(this.data.height===n.height)this._splitRoot(this.data,n);else{if(this.data.height<n.height){var r=this.data;this.data=n,n=r}this._insert(n,this.data.height-n.height-1,!0)}else this.data=n;return this},r.prototype.insert=function(t){return t&&this._insert(t,this.data.height-1),this},r.prototype.clear=function(){return this.data=p([]),this},r.prototype.remove=function(t,i){if(!t)return this;for(var n,r,a,h=this.data,o=this.toBBox(t),s=[],l=[];h||s.length;){if(h||(h=s.pop(),r=s[s.length-1],n=l.pop(),a=!0),h.leaf){var f=e(t,h.children,i);if(-1!==f)return h.children.splice(f,1),s.push(h),this._condense(s),this}a||h.leaf||!m(h,o)?r?(n++,h=r.children[n],a=!1):h=null:(s.push(h),l.push(n),n=0,r=h,h=h.children[0])}return this},r.prototype.toBBox=function(t){return t},r.prototype.compareMinX=function(t,i){return t.minX-i.minX},r.prototype.compareMinY=function(t,i){return t.minY-i.minY},r.prototype.toJSON=function(){return this.data},r.prototype.fromJSON=function(t){return this.data=t,this},r.prototype._all=function(t,i){for(var n=[];t;)t.leaf?i.push.apply(i,t.children):n.push.apply(n,t.children),t=n.pop();return i},r.prototype._build=function(t,i,n,r){var e,h=n-i+1,o=this._maxEntries;if(h<=o)return a(e=p(t.slice(i,n+1)),this.toBBox),e;r||(r=Math.ceil(Math.log(h)/Math.log(o)),o=Math.ceil(h/Math.pow(o,r-1))),(e=p([])).leaf=!1,e.height=r;var s=Math.ceil(h/o),l=s*Math.ceil(Math.sqrt(o));d(t,i,n,l,this.compareMinX);for(var f=i;f<=n;f+=l){var u=Math.min(f+l-1,n);d(t,f,u,s,this.compareMinY);for(var m=f;m<=u;m+=s){var c=Math.min(m+s-1,u);e.children.push(this._build(t,m,c,r-1))}}return a(e,this.toBBox),e},r.prototype._chooseSubtree=function(t,i,n,r){for(;r.push(i),!i.leaf&&r.length-1!==n;){for(var e=1/0,a=1/0,h=void 0,o=0;o<i.children.length;o++){var s=i.children[o],l=f(s),u=(m=t,c=s,(Math.max(c.maxX,m.maxX)-Math.min(c.minX,m.minX))*(Math.max(c.maxY,m.maxY)-Math.min(c.minY,m.minY))-l);u<a?(a=u,e=l<e?l:e,h=s):u===a&&l<e&&(e=l,h=s)}i=h||i.children[0]}var m,c;return i},r.prototype._insert=function(t,i,n){var r=n?t:this.toBBox(t),e=[],a=this._chooseSubtree(r,this.data,i,e);for(a.children.push(t),o(a,r);i>=0&&e[i].children.length>this._maxEntries;)this._split(e,i),i--;this._adjustParentBBoxes(r,e,i)},r.prototype._split=function(t,i){var n=t[i],r=n.children.length,e=this._minEntries;this._chooseSplitAxis(n,e,r);var h=this._chooseSplitIndex(n,e,r),o=p(n.children.splice(h,n.children.length-h));o.height=n.height,o.leaf=n.leaf,a(n,this.toBBox),a(o,this.toBBox),i?t[i-1].children.push(o):this._splitRoot(n,o)},r.prototype._splitRoot=function(t,i){this.data=p([t,i]),this.data.height=t.height+1,this.data.leaf=!1,a(this.data,this.toBBox)},r.prototype._chooseSplitIndex=function(t,i,n){for(var r,e,a,o,s,l,u,m=1/0,c=1/0,p=i;p<=n-i;p++){var d=h(t,0,p,this.toBBox),x=h(t,p,n,this.toBBox),v=(e=d,a=x,o=void 0,s=void 0,l=void 0,u=void 0,o=Math.max(e.minX,a.minX),s=Math.max(e.minY,a.minY),l=Math.min(e.maxX,a.maxX),u=Math.min(e.maxY,a.maxY),Math.max(0,l-o)*Math.max(0,u-s)),M=f(d)+f(x);v<m?(m=v,r=p,c=M<c?M:c):v===m&&M<c&&(c=M,r=p)}return r},r.prototype._chooseSplitAxis=function(t,i,n){var r=t.leaf?this.compareMinX:s,e=t.leaf?this.compareMinY:l;this._allDistMargin(t,i,n,r)<this._allDistMargin(t,i,n,e)&&t.children.sort(r)},r.prototype._allDistMargin=function(t,i,n,r){t.children.sort(r);for(var e=this.toBBox,a=h(t,0,i,e),s=h(t,n-i,n,e),l=u(a)+u(s),f=i;f<n-i;f++){var m=t.children[f];o(a,t.leaf?e(m):m),l+=u(a)}for(var c=n-i-1;c>=i;c--){var p=t.children[c];o(s,t.leaf?e(p):p),l+=u(s)}return l},r.prototype._adjustParentBBoxes=function(t,i,n){for(var r=n;r>=0;r--)o(i[r],t)},r.prototype._condense=function(t){for(var i=t.length-1,n=void 0;i>=0;i--)0===t[i].children.length?i>0?(n=t[i-1].children).splice(n.indexOf(t[i]),1):this.clear():a(t[i],this.toBBox)},r});\n","/**\n * @module ol/geom/flat/length\n */\n\n\n/**\n * @param {Array<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {number} end End.\n * @param {number} stride Stride.\n * @return {number} Length.\n */\nexport function lineStringLength(flatCoordinates, offset, end, stride) {\n  let x1 = flatCoordinates[offset];\n  let y1 = flatCoordinates[offset + 1];\n  let length = 0;\n  for (let i = offset + stride; i < end; i += stride) {\n    const x2 = flatCoordinates[i];\n    const y2 = flatCoordinates[i + 1];\n    length += Math.sqrt((x2 - x1) * (x2 - x1) + (y2 - y1) * (y2 - y1));\n    x1 = x2;\n    y1 = y2;\n  }\n  return length;\n}\n\n\n/**\n * @param {Array<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {number} end End.\n * @param {number} stride Stride.\n * @return {number} Perimeter.\n */\nexport function linearRingLength(flatCoordinates, offset, end, stride) {\n  let perimeter = lineStringLength(flatCoordinates, offset, end, stride);\n  const dx = flatCoordinates[end - stride] - flatCoordinates[offset];\n  const dy = flatCoordinates[end - stride + 1] - flatCoordinates[offset + 1];\n  perimeter += Math.sqrt(dx * dx + dy * dy);\n  return perimeter;\n}\n","/**\n * @module ol/geom/flat/center\n */\nimport {createEmpty, createOrUpdateFromFlatCoordinates} from '../../extent.js';\n\n\n/**\n * @param {Array<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {Array<Array<number>>} endss Endss.\n * @param {number} stride Stride.\n * @return {Array<number>} Flat centers.\n */\nexport function linearRingss(flatCoordinates, offset, endss, stride) {\n  const flatCenters = [];\n  let extent = createEmpty();\n  for (let i = 0, ii = endss.length; i < ii; ++i) {\n    const ends = endss[i];\n    extent = createOrUpdateFromFlatCoordinates(flatCoordinates, offset, ends[0], stride);\n    flatCenters.push((extent[0] + extent[2]) / 2, (extent[1] + extent[3]) / 2);\n    offset = ends[ends.length - 1];\n  }\n  return flatCenters;\n}\n","/**\n * @module ol/renderer/canvas/VectorLayer\n */\nimport {getUid} from '../../util.js';\nimport ViewHint from '../../ViewHint.js';\nimport {buffer, createEmpty, containsExtent, getWidth, intersects as intersectsExtent} from '../../extent.js';\nimport {fromUserExtent, toUserExtent, getUserProjection} from '../../proj.js';\nimport CanvasBuilderGroup from '../../render/canvas/BuilderGroup.js';\nimport ExecutorGroup, {replayDeclutter} from '../../render/canvas/ExecutorGroup.js';\nimport CanvasLayerRenderer from './Layer.js';\nimport {defaultOrder as defaultRenderOrder, getTolerance as getRenderTolerance, getSquaredTolerance as getSquaredRenderTolerance, renderFeature} from '../vector.js';\nimport {toString as transformToString, makeScale, makeInverse} from '../../transform.js';\n\n/**\n * @classdesc\n * Canvas renderer for vector layers.\n * @api\n */\nclass CanvasVectorLayerRenderer extends CanvasLayerRenderer {\n\n  /**\n   * @param {import(\"../../layer/Vector.js\").default} vectorLayer Vector layer.\n   */\n  constructor(vectorLayer) {\n\n    super(vectorLayer);\n\n    /** @private */\n    this.boundHandleStyleImageChange_ = this.handleStyleImageChange_.bind(this);\n\n\n    /**\n     * @private\n     * @type {boolean}\n     */\n    this.dirty_ = false;\n\n    /**\n     * @private\n     * @type {number}\n     */\n    this.renderedRevision_ = -1;\n\n    /**\n     * @private\n     * @type {number}\n     */\n    this.renderedResolution_ = NaN;\n\n    /**\n     * @private\n     * @type {import(\"../../extent.js\").Extent}\n     */\n    this.renderedExtent_ = createEmpty();\n\n    /**\n     * @private\n     * @type {function(import(\"../../Feature.js\").default, import(\"../../Feature.js\").default): number|null}\n     */\n    this.renderedRenderOrder_ = null;\n\n    /**\n     * @private\n     * @type {import(\"../../render/canvas/ExecutorGroup\").default}\n     */\n    this.replayGroup_ = null;\n\n    /**\n     * A new replay group had to be created by `prepareFrame()`\n     * @type {boolean}\n     */\n    this.replayGroupChanged = true;\n  }\n\n  /**\n   * @inheritDoc\n   */\n  useContainer(target, transform, opacity) {\n    if (opacity < 1) {\n      target = null;\n    }\n    super.useContainer(target, transform, opacity);\n  }\n\n  /**\n   * @inheritDoc\n   */\n  renderFrame(frameState, target) {\n\n    const pixelRatio = frameState.pixelRatio;\n    const layerState = frameState.layerStatesArray[frameState.layerIndex];\n\n    // set forward and inverse pixel transforms\n    makeScale(this.pixelTransform, 1 / pixelRatio, 1 / pixelRatio);\n    makeInverse(this.inversePixelTransform, this.pixelTransform);\n\n    this.useContainer(target, this.pixelTransform, layerState.opacity);\n    const context = this.context;\n    const canvas = context.canvas;\n\n    const replayGroup = this.replayGroup_;\n    if (!replayGroup || replayGroup.isEmpty()) {\n      if (!this.containerReused && canvas.width > 0) {\n        canvas.width = 0;\n      }\n      return this.container;\n    }\n\n    // resize and clear\n    const width = Math.round(frameState.size[0] * pixelRatio);\n    const height = Math.round(frameState.size[1] * pixelRatio);\n    if (canvas.width != width || canvas.height != height) {\n      canvas.width = width;\n      canvas.height = height;\n      const canvasTransform = transformToString(this.pixelTransform);\n      if (canvas.style.transform !== canvasTransform) {\n        canvas.style.transform = canvasTransform;\n      }\n    } else if (!this.containerReused) {\n      context.clearRect(0, 0, width, height);\n    }\n\n    this.preRender(context, frameState);\n\n    const extent = frameState.extent;\n    const viewState = frameState.viewState;\n    const projection = viewState.projection;\n    const rotation = viewState.rotation;\n    const projectionExtent = projection.getExtent();\n    const vectorSource = this.getLayer().getSource();\n\n    // clipped rendering if layer extent is set\n    let clipped = false;\n    if (layerState.extent) {\n      const layerExtent = fromUserExtent(layerState.extent, projection);\n      clipped = !containsExtent(layerExtent, frameState.extent) && intersectsExtent(layerExtent, frameState.extent);\n      if (clipped) {\n        this.clip(context, frameState, layerExtent);\n      }\n    }\n\n\n    const viewHints = frameState.viewHints;\n    const snapToPixel = !(viewHints[ViewHint.ANIMATING] || viewHints[ViewHint.INTERACTING]);\n\n    const transform = this.getRenderTransform(frameState, width, height, 0);\n    const declutterReplays = this.getLayer().getDeclutter() ? {} : null;\n    replayGroup.execute(context, transform, rotation, snapToPixel, undefined, declutterReplays);\n\n    if (vectorSource.getWrapX() && projection.canWrapX() && !containsExtent(projectionExtent, extent)) {\n      let startX = extent[0];\n      const worldWidth = getWidth(projectionExtent);\n      let world = 0;\n      let offsetX;\n      while (startX < projectionExtent[0]) {\n        --world;\n        offsetX = worldWidth * world;\n        const transform = this.getRenderTransform(frameState, width, height, offsetX);\n        replayGroup.execute(context, transform, rotation, snapToPixel, undefined, declutterReplays);\n        startX += worldWidth;\n      }\n      world = 0;\n      startX = extent[2];\n      while (startX > projectionExtent[2]) {\n        ++world;\n        offsetX = worldWidth * world;\n        const transform = this.getRenderTransform(frameState, width, height, offsetX);\n        replayGroup.execute(context, transform, rotation, snapToPixel, undefined, declutterReplays);\n        startX -= worldWidth;\n      }\n    }\n    if (declutterReplays) {\n      const viewHints = frameState.viewHints;\n      const hifi = !(viewHints[ViewHint.ANIMATING] || viewHints[ViewHint.INTERACTING]);\n      replayDeclutter(declutterReplays, context, rotation, 1, hifi, frameState.declutterItems);\n    }\n\n    if (clipped) {\n      context.restore();\n    }\n\n    this.postRender(context, frameState);\n\n    const opacity = layerState.opacity;\n    const container = this.container;\n    if (opacity !== parseFloat(container.style.opacity)) {\n      container.style.opacity = opacity === 1 ? '' : opacity;\n    }\n\n    return this.container;\n  }\n\n  /**\n   * @inheritDoc\n   */\n  forEachFeatureAtCoordinate(coordinate, frameState, hitTolerance, callback, declutteredFeatures) {\n    if (!this.replayGroup_) {\n      return undefined;\n    } else {\n      const resolution = frameState.viewState.resolution;\n      const rotation = frameState.viewState.rotation;\n      const layer = this.getLayer();\n      /** @type {!Object<string, boolean>} */\n      const features = {};\n\n      const result = this.replayGroup_.forEachFeatureAtCoordinate(coordinate, resolution, rotation, hitTolerance,\n        /**\n         * @param {import(\"../../Feature.js\").FeatureLike} feature Feature.\n         * @return {?} Callback result.\n         */\n        function(feature) {\n          const key = getUid(feature);\n          if (!(key in features)) {\n            features[key] = true;\n            return callback(feature, layer);\n          }\n        }, layer.getDeclutter() ? declutteredFeatures : null);\n\n      return result;\n    }\n  }\n\n  /**\n   * @inheritDoc\n   */\n  handleFontsChanged() {\n    const layer = this.getLayer();\n    if (layer.getVisible() && this.replayGroup_) {\n      layer.changed();\n    }\n  }\n\n  /**\n   * Handle changes in image style state.\n   * @param {import(\"../../events/Event.js\").default} event Image style change event.\n   * @private\n   */\n  handleStyleImageChange_(event) {\n    this.renderIfReadyAndVisible();\n  }\n\n  /**\n   * @inheritDoc\n   */\n  prepareFrame(frameState) {\n    const vectorLayer = this.getLayer();\n    const vectorSource = vectorLayer.getSource();\n\n    const animating = frameState.viewHints[ViewHint.ANIMATING];\n    const interacting = frameState.viewHints[ViewHint.INTERACTING];\n    const updateWhileAnimating = vectorLayer.getUpdateWhileAnimating();\n    const updateWhileInteracting = vectorLayer.getUpdateWhileInteracting();\n\n    if (!this.dirty_ && (!updateWhileAnimating && animating) ||\n        (!updateWhileInteracting && interacting)) {\n      return true;\n    }\n\n    const frameStateExtent = frameState.extent;\n    const viewState = frameState.viewState;\n    const projection = viewState.projection;\n    const resolution = viewState.resolution;\n    const pixelRatio = frameState.pixelRatio;\n    const vectorLayerRevision = vectorLayer.getRevision();\n    const vectorLayerRenderBuffer = vectorLayer.getRenderBuffer();\n    let vectorLayerRenderOrder = vectorLayer.getRenderOrder();\n\n    if (vectorLayerRenderOrder === undefined) {\n      vectorLayerRenderOrder = defaultRenderOrder;\n    }\n\n    const extent = buffer(frameStateExtent,\n      vectorLayerRenderBuffer * resolution);\n    const projectionExtent = viewState.projection.getExtent();\n\n    if (vectorSource.getWrapX() && viewState.projection.canWrapX() &&\n        !containsExtent(projectionExtent, frameState.extent)) {\n      // For the replay group, we need an extent that intersects the real world\n      // (-180° to +180°). To support geometries in a coordinate range from -540°\n      // to +540°, we add at least 1 world width on each side of the projection\n      // extent. If the viewport is wider than the world, we need to add half of\n      // the viewport width to make sure we cover the whole viewport.\n      const worldWidth = getWidth(projectionExtent);\n      const gutter = Math.max(getWidth(extent) / 2, worldWidth);\n      extent[0] = projectionExtent[0] - gutter;\n      extent[2] = projectionExtent[2] + gutter;\n    }\n\n    if (!this.dirty_ &&\n        this.renderedResolution_ == resolution &&\n        this.renderedRevision_ == vectorLayerRevision &&\n        this.renderedRenderOrder_ == vectorLayerRenderOrder &&\n        containsExtent(this.renderedExtent_, extent)) {\n      this.replayGroupChanged = false;\n      return true;\n    }\n\n    if (this.replayGroup_) {\n      this.replayGroup_.dispose();\n    }\n    this.replayGroup_ = null;\n\n    this.dirty_ = false;\n\n    const replayGroup = new CanvasBuilderGroup(\n      getRenderTolerance(resolution, pixelRatio), extent, resolution,\n      pixelRatio, vectorLayer.getDeclutter());\n\n    const userProjection = getUserProjection();\n    if (userProjection) {\n      vectorSource.loadFeatures(toUserExtent(extent, projection), resolution, userProjection);\n    } else {\n      vectorSource.loadFeatures(extent, resolution, projection);\n    }\n\n    const squaredTolerance = getSquaredRenderTolerance(resolution, pixelRatio);\n\n    /**\n     * @param {import(\"../../Feature.js\").default} feature Feature.\n     * @this {CanvasVectorLayerRenderer}\n     */\n    const render = function(feature) {\n      let styles;\n      const styleFunction = feature.getStyleFunction() || vectorLayer.getStyleFunction();\n      if (styleFunction) {\n        styles = styleFunction(feature, resolution);\n      }\n      if (styles) {\n        const dirty = this.renderFeature(feature, squaredTolerance, styles, replayGroup, projection);\n        this.dirty_ = this.dirty_ || dirty;\n      }\n    }.bind(this);\n\n    const userExtent = toUserExtent(extent, projection);\n    if (vectorLayerRenderOrder) {\n      /** @type {Array<import(\"../../Feature.js\").default>} */\n      const features = [];\n      vectorSource.forEachFeatureInExtent(userExtent,\n        /**\n         * @param {import(\"../../Feature.js\").default} feature Feature.\n         */\n        function(feature) {\n          features.push(feature);\n        });\n      features.sort(vectorLayerRenderOrder);\n      for (let i = 0, ii = features.length; i < ii; ++i) {\n        render(features[i]);\n      }\n    } else {\n      vectorSource.forEachFeatureInExtent(userExtent, render);\n    }\n\n    const replayGroupInstructions = replayGroup.finish();\n    const executorGroup = new ExecutorGroup(extent, resolution,\n      pixelRatio, vectorSource.getOverlaps(),\n      replayGroupInstructions, vectorLayer.getRenderBuffer());\n\n    this.renderedResolution_ = resolution;\n    this.renderedRevision_ = vectorLayerRevision;\n    this.renderedRenderOrder_ = vectorLayerRenderOrder;\n    this.renderedExtent_ = extent;\n    this.replayGroup_ = executorGroup;\n\n    this.replayGroupChanged = true;\n    return true;\n  }\n\n  /**\n   * @param {import(\"../../Feature.js\").default} feature Feature.\n   * @param {number} squaredTolerance Squared render tolerance.\n   * @param {import(\"../../style/Style.js\").default|Array<import(\"../../style/Style.js\").default>} styles The style or array of styles.\n   * @param {import(\"../../render/canvas/BuilderGroup.js\").default} builderGroup Builder group.\n   * @param {import(\"../../proj/Projection.js\").default} projection The view projection.\n   * @return {boolean} `true` if an image is loading.\n   */\n  renderFeature(feature, squaredTolerance, styles, builderGroup, projection) {\n    if (!styles) {\n      return false;\n    }\n    let loading = false;\n    if (Array.isArray(styles)) {\n      for (let i = 0, ii = styles.length; i < ii; ++i) {\n        loading = renderFeature(\n          builderGroup, feature, styles[i], squaredTolerance,\n          this.boundHandleStyleImageChange_, projection) || loading;\n      }\n    } else {\n      loading = renderFeature(\n        builderGroup, feature, styles, squaredTolerance,\n        this.boundHandleStyleImageChange_, projection);\n    }\n    return loading;\n  }\n}\n\n\nexport default CanvasVectorLayerRenderer;\n","/**\n * @module ol/style/TextPlacement\n */\n\n/**\n * Text placement. One of `'point'`, `'line'`. Default is `'point'`. Note that\n * `'line'` requires the underlying geometry to be a {@link module:ol/geom/LineString~LineString},\n * {@link module:ol/geom/Polygon~Polygon}, {@link module:ol/geom/MultiLineString~MultiLineString} or\n * {@link module:ol/geom/MultiPolygon~MultiPolygon}.\n * @enum {string}\n */\nexport default {\n  POINT: 'point',\n  LINE: 'line'\n};\n","/**\n * @module ol/style/Image\n */\nimport {abstract} from '../util.js';\n\n\n/**\n * @typedef {Object} Options\n * @property {number} opacity\n * @property {boolean} rotateWithView\n * @property {number} rotation\n * @property {number} scale\n */\n\n\n/**\n * @classdesc\n * A base class used for creating subclasses and not instantiated in\n * apps. Base class for {@link module:ol/style/Icon~Icon}, {@link module:ol/style/Circle~CircleStyle} and\n * {@link module:ol/style/RegularShape~RegularShape}.\n * @abstract\n * @api\n */\nclass ImageStyle {\n  /**\n   * @param {Options} options Options.\n   */\n  constructor(options) {\n\n    /**\n     * @private\n     * @type {number}\n     */\n    this.opacity_ = options.opacity;\n\n    /**\n     * @private\n     * @type {boolean}\n     */\n    this.rotateWithView_ = options.rotateWithView;\n\n    /**\n     * @private\n     * @type {number}\n     */\n    this.rotation_ = options.rotation;\n\n    /**\n     * @private\n     * @type {number}\n     */\n    this.scale_ = options.scale;\n\n  }\n\n  /**\n   * Clones the style.\n   * @return {ImageStyle} The cloned style.\n   * @api\n   */\n  clone() {\n    return new ImageStyle({\n      opacity: this.getOpacity(),\n      scale: this.getScale(),\n      rotation: this.getRotation(),\n      rotateWithView: this.getRotateWithView()\n    });\n  }\n\n  /**\n   * Get the symbolizer opacity.\n   * @return {number} Opacity.\n   * @api\n   */\n  getOpacity() {\n    return this.opacity_;\n  }\n\n  /**\n   * Determine whether the symbolizer rotates with the map.\n   * @return {boolean} Rotate with map.\n   * @api\n   */\n  getRotateWithView() {\n    return this.rotateWithView_;\n  }\n\n  /**\n   * Get the symoblizer rotation.\n   * @return {number} Rotation.\n   * @api\n   */\n  getRotation() {\n    return this.rotation_;\n  }\n\n  /**\n   * Get the symbolizer scale.\n   * @return {number} Scale.\n   * @api\n   */\n  getScale() {\n    return this.scale_;\n  }\n\n  /**\n   * Get the anchor point in pixels. The anchor determines the center point for the\n   * symbolizer.\n   * @abstract\n   * @return {Array<number>} Anchor.\n   */\n  getAnchor() {\n    return abstract();\n  }\n\n  /**\n   * Get the image element for the symbolizer.\n   * @abstract\n   * @param {number} pixelRatio Pixel ratio.\n   * @return {HTMLCanvasElement|HTMLVideoElement|HTMLImageElement} Image element.\n   */\n  getImage(pixelRatio) {\n    return abstract();\n  }\n\n  /**\n   * @abstract\n   * @param {number} pixelRatio Pixel ratio.\n   * @return {HTMLCanvasElement|HTMLVideoElement|HTMLImageElement} Image element.\n   */\n  getHitDetectionImage(pixelRatio) {\n    return abstract();\n  }\n\n  /**\n   * @abstract\n   * @return {import(\"../ImageState.js\").default} Image state.\n   */\n  getImageState() {\n    return abstract();\n  }\n\n  /**\n   * @abstract\n   * @return {import(\"../size.js\").Size} Image size.\n   */\n  getImageSize() {\n    return abstract();\n  }\n\n  /**\n   * @abstract\n   * @return {import(\"../size.js\").Size} Size of the hit-detection image.\n   */\n  getHitDetectionImageSize() {\n    return abstract();\n  }\n\n  /**\n   * Get the origin of the symbolizer.\n   * @abstract\n   * @return {Array<number>} Origin.\n   */\n  getOrigin() {\n    return abstract();\n  }\n\n  /**\n   * Get the size of the symbolizer (in pixels).\n   * @abstract\n   * @return {import(\"../size.js\").Size} Size.\n   */\n  getSize() {\n    return abstract();\n  }\n\n  /**\n   * Set the opacity.\n   *\n   * @param {number} opacity Opacity.\n   * @api\n   */\n  setOpacity(opacity) {\n    this.opacity_ = opacity;\n  }\n\n  /**\n   * Set whether to rotate the style with the view.\n   *\n   * @param {boolean} rotateWithView Rotate with map.\n   * @api\n   */\n  setRotateWithView(rotateWithView) {\n    this.rotateWithView_ = rotateWithView;\n  }\n\n  /**\n   * Set the rotation.\n   *\n   * @param {number} rotation Rotation.\n   * @api\n   */\n  setRotation(rotation) {\n    this.rotation_ = rotation;\n  }\n  /**\n   * Set the scale.\n   *\n   * @param {number} scale Scale.\n   * @api\n   */\n  setScale(scale) {\n    this.scale_ = scale;\n  }\n\n  /**\n   * @abstract\n   * @param {function(import(\"../events/Event.js\").default): void} listener Listener function.\n   * @template T\n   */\n  listenImageChange(listener) {\n    abstract();\n  }\n\n  /**\n   * Load not yet loaded URI.\n   * @abstract\n   */\n  load() {\n    abstract();\n  }\n\n  /**\n   * @abstract\n   * @param {function(import(\"../events/Event.js\").default): void} listener Listener function.\n   * @template T\n   */\n  unlistenImageChange(listener) {\n    abstract();\n  }\n}\n\nexport default ImageStyle;\n","/**\n * @module ol/ImageCanvas\n */\nimport ImageBase from './ImageBase.js';\nimport ImageState from './ImageState.js';\n\n\n/**\n * A function that is called to trigger asynchronous canvas drawing.  It is\n * called with a \"done\" callback that should be called when drawing is done.\n * If any error occurs during drawing, the \"done\" callback should be called with\n * that error.\n *\n * @typedef {function(function(Error=): void): void} Loader\n */\n\n\nclass ImageCanvas extends ImageBase {\n\n  /**\n   * @param {import(\"./extent.js\").Extent} extent Extent.\n   * @param {number} resolution Resolution.\n   * @param {number} pixelRatio Pixel ratio.\n   * @param {HTMLCanvasElement} canvas Canvas.\n   * @param {Loader=} opt_loader Optional loader function to\n   *     support asynchronous canvas drawing.\n   */\n  constructor(extent, resolution, pixelRatio, canvas, opt_loader) {\n\n    const state = opt_loader !== undefined ? ImageState.IDLE : ImageState.LOADED;\n\n    super(extent, resolution, pixelRatio, state);\n\n    /**\n     * Optional canvas loader function.\n     * @type {?Loader}\n     * @private\n     */\n    this.loader_ = opt_loader !== undefined ? opt_loader : null;\n\n    /**\n     * @private\n     * @type {HTMLCanvasElement}\n     */\n    this.canvas_ = canvas;\n\n    /**\n     * @private\n     * @type {Error}\n     */\n    this.error_ = null;\n\n  }\n\n  /**\n   * Get any error associated with asynchronous rendering.\n   * @return {Error} Any error that occurred during rendering.\n   */\n  getError() {\n    return this.error_;\n  }\n\n  /**\n   * Handle async drawing complete.\n   * @param {Error=} err Any error during drawing.\n   * @private\n   */\n  handleLoad_(err) {\n    if (err) {\n      this.error_ = err;\n      this.state = ImageState.ERROR;\n    } else {\n      this.state = ImageState.LOADED;\n    }\n    this.changed();\n  }\n\n  /**\n   * @inheritDoc\n   */\n  load() {\n    if (this.state == ImageState.IDLE) {\n      this.state = ImageState.LOADING;\n      this.changed();\n      this.loader_(this.handleLoad_.bind(this));\n    }\n  }\n\n  /**\n   * @return {HTMLCanvasElement} Canvas element.\n   */\n  getImage() {\n    return this.canvas_;\n  }\n}\n\n\nexport default ImageCanvas;\n","/**\n * @module ol/interaction/DragAndDrop\n */\n// FIXME should handle all geo-referenced data, not just vector data\n\nimport {TRUE} from '../functions.js';\nimport {listen, unlistenByKey} from '../events.js';\nimport Event from '../events/Event.js';\nimport EventType from '../events/EventType.js';\nimport Interaction from './Interaction.js';\nimport {get as getProjection} from '../proj.js';\n\n\n/**\n * @typedef {Object} Options\n * @property {Array<typeof import(\"../format/Feature.js\").default>} [formatConstructors] Format constructors.\n * @property {import(\"../source/Vector.js\").default} [source] Optional vector source where features will be added.  If a source is provided\n * all existing features will be removed and new features will be added when\n * they are dropped on the target.  If you want to add features to a vector\n * source without removing the existing features (append only), instead of\n * providing the source option listen for the \"addfeatures\" event.\n * @property {import(\"../proj.js\").ProjectionLike} [projection] Target projection. By default, the map's view's projection is used.\n * @property {HTMLElement} [target] The element that is used as the drop target, default is the viewport element.\n */\n\n\n/**\n * @enum {string}\n */\nconst DragAndDropEventType = {\n  /**\n   * Triggered when features are added\n   * @event DragAndDropEvent#addfeatures\n   * @api\n   */\n  ADD_FEATURES: 'addfeatures'\n};\n\n\n/**\n * @classdesc\n * Events emitted by {@link module:ol/interaction/DragAndDrop~DragAndDrop} instances are instances\n * of this type.\n */\nclass DragAndDropEvent extends Event {\n\n  /**\n   * @param {DragAndDropEventType} type Type.\n   * @param {File} file File.\n   * @param {Array<import(\"../Feature.js\").default>=} opt_features Features.\n   * @param {import(\"../proj/Projection.js\").default=} opt_projection Projection.\n   */\n  constructor(type, file, opt_features, opt_projection) {\n\n    super(type);\n\n    /**\n     * The features parsed from dropped data.\n     * @type {Array<import(\"../Feature.js\").FeatureLike>|undefined}\n     * @api\n     */\n    this.features = opt_features;\n\n    /**\n     * The dropped file.\n     * @type {File}\n     * @api\n     */\n    this.file = file;\n\n    /**\n     * The feature projection.\n     * @type {import(\"../proj/Projection.js\").default|undefined}\n     * @api\n     */\n    this.projection = opt_projection;\n\n  }\n\n}\n\n\n/**\n * @classdesc\n * Handles input of vector data by drag and drop.\n * @api\n *\n * @fires DragAndDropEvent\n */\nclass DragAndDrop extends Interaction {\n  /**\n   * @param {Options=} opt_options Options.\n   */\n  constructor(opt_options) {\n\n    const options = opt_options ? opt_options : {};\n\n    super({\n      handleEvent: TRUE\n    });\n\n    /**\n     * @private\n     * @type {Array<typeof import(\"../format/Feature.js\").default>}\n     */\n    this.formatConstructors_ = options.formatConstructors ?\n      options.formatConstructors : [];\n\n    /**\n     * @private\n     * @type {import(\"../proj/Projection.js\").default}\n     */\n    this.projection_ = options.projection ?\n      getProjection(options.projection) : null;\n\n    /**\n     * @private\n     * @type {Array<import(\"../events.js\").EventsKey>}\n     */\n    this.dropListenKeys_ = null;\n\n    /**\n     * @private\n     * @type {import(\"../source/Vector.js\").default}\n     */\n    this.source_ = options.source || null;\n\n    /**\n     * @private\n     * @type {HTMLElement}\n     */\n    this.target = options.target ? options.target : null;\n\n  }\n\n  /**\n   * @param {File} file File.\n   * @param {Event} event Load event.\n   * @private\n   */\n  handleResult_(file, event) {\n    const result = event.target.result;\n    const map = this.getMap();\n    let projection = this.projection_;\n    if (!projection) {\n      const view = map.getView();\n      projection = view.getProjection();\n    }\n\n    const formatConstructors = this.formatConstructors_;\n    let features = [];\n    for (let i = 0, ii = formatConstructors.length; i < ii; ++i) {\n      const format = new formatConstructors[i]();\n      features = this.tryReadFeatures_(format, result, {\n        featureProjection: projection\n      });\n      if (features && features.length > 0) {\n        break;\n      }\n    }\n    if (this.source_) {\n      this.source_.clear();\n      this.source_.addFeatures(features);\n    }\n    this.dispatchEvent(\n      new DragAndDropEvent(\n        DragAndDropEventType.ADD_FEATURES, file,\n        features, projection));\n  }\n\n  /**\n   * @private\n   */\n  registerListeners_() {\n    const map = this.getMap();\n    if (map) {\n      const dropArea = this.target ? this.target : map.getViewport();\n      this.dropListenKeys_ = [\n        listen(dropArea, EventType.DROP, handleDrop, this),\n        listen(dropArea, EventType.DRAGENTER, handleStop, this),\n        listen(dropArea, EventType.DRAGOVER, handleStop, this),\n        listen(dropArea, EventType.DROP, handleStop, this)\n      ];\n    }\n  }\n\n  /**\n   * @inheritDoc\n   */\n  setActive(active) {\n    if (!this.getActive() && active) {\n      this.registerListeners_();\n    }\n    if (this.getActive() && !active) {\n      this.unregisterListeners_();\n    }\n    super.setActive(active);\n  }\n\n  /**\n   * @inheritDoc\n   */\n  setMap(map) {\n    this.unregisterListeners_();\n    super.setMap(map);\n    if (this.getActive()) {\n      this.registerListeners_();\n    }\n  }\n\n  /**\n   * @param {import(\"../format/Feature.js\").default} format Format.\n   * @param {string} text Text.\n   * @param {import(\"../format/Feature.js\").ReadOptions} options Read options.\n   * @private\n   * @return {Array<import(\"../Feature.js\").FeatureLike>} Features.\n   */\n  tryReadFeatures_(format, text, options) {\n    try {\n      return format.readFeatures(text, options);\n    } catch (e) {\n      return null;\n    }\n  }\n\n  /**\n   * @private\n   */\n  unregisterListeners_() {\n    if (this.dropListenKeys_) {\n      this.dropListenKeys_.forEach(unlistenByKey);\n      this.dropListenKeys_ = null;\n    }\n  }\n}\n\n\n/**\n * @param {DragEvent} event Event.\n * @this {DragAndDrop}\n */\nfunction handleDrop(event) {\n  const files = event.dataTransfer.files;\n  for (let i = 0, ii = files.length; i < ii; ++i) {\n    const file = files.item(i);\n    const reader = new FileReader();\n    reader.addEventListener(EventType.LOAD, this.handleResult_.bind(this, file));\n    reader.readAsText(file);\n  }\n}\n\n\n/**\n * @param {DragEvent} event Event.\n */\nfunction handleStop(event) {\n  event.stopPropagation();\n  event.preventDefault();\n  event.dataTransfer.dropEffect = 'copy';\n}\n\n\nexport default DragAndDrop;\n","\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar cloneNode_1 = __importDefault(require(\"./cloneNode\"));\nvar embedWebFonts_1 = __importDefault(require(\"./embedWebFonts\"));\nvar embedImages_1 = __importDefault(require(\"./embedImages\"));\nvar createSvgDataURL_1 = __importDefault(require(\"./createSvgDataURL\"));\nvar applyStyleWithOptions_1 = __importDefault(require(\"./applyStyleWithOptions\"));\nvar utils_1 = require(\"./utils\");\nfunction getImageSize(domNode, options) {\n    if (options === void 0) { options = {}; }\n    var width = options.width || utils_1.getNodeWidth(domNode);\n    var height = options.height || utils_1.getNodeHeight(domNode);\n    return { width: width, height: height };\n}\nfunction toSvgDataURL(domNode, options) {\n    if (options === void 0) { options = {}; }\n    var _a = getImageSize(domNode, options), width = _a.width, height = _a.height;\n    return cloneNode_1.default(domNode, options.filter, true)\n        .then(function (clonedNode) { return embedWebFonts_1.default(clonedNode, options); })\n        .then(function (clonedNode) { return embedImages_1.default(clonedNode, options); })\n        .then(function (clonedNode) { return applyStyleWithOptions_1.default(clonedNode, options); })\n        .then(function (clonedNode) { return createSvgDataURL_1.default(clonedNode, width, height); });\n}\nexports.toSvgDataURL = toSvgDataURL;\nfunction toCanvas(domNode, options) {\n    if (options === void 0) { options = {}; }\n    return toSvgDataURL(domNode, options)\n        .then(utils_1.createImage)\n        .then(utils_1.delay(100))\n        .then(function (image) {\n        var canvas = document.createElement('canvas');\n        var context = canvas.getContext('2d');\n        var ratio = utils_1.getPixelRatio();\n        var _a = getImageSize(domNode, options), width = _a.width, height = _a.height;\n        canvas.width = width * ratio;\n        canvas.height = height * ratio;\n        canvas.style.width = \"\" + width;\n        canvas.style.height = \"\" + height;\n        context.scale(ratio, ratio);\n        if (options.backgroundColor) {\n            context.fillStyle = options.backgroundColor;\n            context.fillRect(0, 0, canvas.width, canvas.height);\n        }\n        context.drawImage(image, 0, 0);\n        return canvas;\n    });\n}\nexports.toCanvas = toCanvas;\nfunction toPixelData(domNode, options) {\n    if (options === void 0) { options = {}; }\n    var _a = getImageSize(domNode, options), width = _a.width, height = _a.height;\n    return toCanvas(domNode, options)\n        .then(function (canvas) { return (canvas.getContext('2d').getImageData(0, 0, width, height).data); });\n}\nexports.toPixelData = toPixelData;\nfunction toPng(domNode, options) {\n    if (options === void 0) { options = {}; }\n    return toCanvas(domNode, options).then(function (canvas) { return (canvas.toDataURL()); });\n}\nexports.toPng = toPng;\nfunction toJpeg(domNode, options) {\n    if (options === void 0) { options = {}; }\n    return toCanvas(domNode, options).then(function (canvas) { return (canvas.toDataURL('image/jpeg', options.quality || 1)); });\n}\nexports.toJpeg = toJpeg;\nfunction toBlob(domNode, options) {\n    if (options === void 0) { options = {}; }\n    return toCanvas(domNode, options).then(utils_1.canvasToBlob);\n}\nexports.toBlob = toBlob;\n","/**\n * @module ol/format/WKT\n */\nimport Feature from '../Feature.js';\nimport {transformGeometryWithOptions} from './Feature.js';\nimport TextFeature from './TextFeature.js';\nimport GeometryCollection from '../geom/GeometryCollection.js';\nimport GeometryType from '../geom/GeometryType.js';\nimport GeometryLayout from '../geom/GeometryLayout.js';\nimport LineString from '../geom/LineString.js';\nimport MultiLineString from '../geom/MultiLineString.js';\nimport MultiPoint from '../geom/MultiPoint.js';\nimport MultiPolygon from '../geom/MultiPolygon.js';\nimport Point from '../geom/Point.js';\nimport Polygon from '../geom/Polygon.js';\n\n\n/**\n * Geometry constructors\n * @enum {function (new:import(\"../geom/Geometry.js\").default, Array, GeometryLayout)}\n */\nconst GeometryConstructor = {\n  'POINT': Point,\n  'LINESTRING': LineString,\n  'POLYGON': Polygon,\n  'MULTIPOINT': MultiPoint,\n  'MULTILINESTRING': MultiLineString,\n  'MULTIPOLYGON': MultiPolygon\n};\n\n\n/**\n * @typedef {Object} Options\n * @property {boolean} [splitCollection=false] Whether to split GeometryCollections into\n * multiple features on reading.\n */\n\n/**\n * @typedef {Object} Token\n * @property {number} type\n * @property {number|string} [value]\n * @property {number} position\n */\n\n/**\n * @const\n * @type {string}\n */\nconst EMPTY = 'EMPTY';\n\n\n/**\n * @const\n * @type {string}\n */\nconst Z = 'Z';\n\n\n/**\n * @const\n * @type {string}\n */\nconst M = 'M';\n\n\n/**\n * @const\n * @type {string}\n */\nconst ZM = 'ZM';\n\n\n/**\n * @const\n * @enum {number}\n */\nconst TokenType = {\n  TEXT: 1,\n  LEFT_PAREN: 2,\n  RIGHT_PAREN: 3,\n  NUMBER: 4,\n  COMMA: 5,\n  EOF: 6\n};\n\n/**\n * @const\n * @type {Object<string, string>}\n */\nconst WKTGeometryType = {};\nfor (const type in GeometryType) {\n  WKTGeometryType[type] = GeometryType[type].toUpperCase();\n}\n\n\n/**\n * Class to tokenize a WKT string.\n */\nclass Lexer {\n\n  /**\n   * @param {string} wkt WKT string.\n   */\n  constructor(wkt) {\n\n    /**\n     * @type {string}\n     */\n    this.wkt = wkt;\n\n    /**\n     * @type {number}\n     * @private\n     */\n    this.index_ = -1;\n  }\n\n  /**\n   * @param {string} c Character.\n   * @return {boolean} Whether the character is alphabetic.\n   * @private\n   */\n  isAlpha_(c) {\n    return c >= 'a' && c <= 'z' || c >= 'A' && c <= 'Z';\n  }\n\n  /**\n   * @param {string} c Character.\n   * @param {boolean=} opt_decimal Whether the string number\n   *     contains a dot, i.e. is a decimal number.\n   * @return {boolean} Whether the character is numeric.\n   * @private\n   */\n  isNumeric_(c, opt_decimal) {\n    const decimal = opt_decimal !== undefined ? opt_decimal : false;\n    return c >= '0' && c <= '9' || c == '.' && !decimal;\n  }\n\n  /**\n   * @param {string} c Character.\n   * @return {boolean} Whether the character is whitespace.\n   * @private\n   */\n  isWhiteSpace_(c) {\n    return c == ' ' || c == '\\t' || c == '\\r' || c == '\\n';\n  }\n\n  /**\n   * @return {string} Next string character.\n   * @private\n   */\n  nextChar_() {\n    return this.wkt.charAt(++this.index_);\n  }\n\n  /**\n   * Fetch and return the next token.\n   * @return {!Token} Next string token.\n   */\n  nextToken() {\n    const c = this.nextChar_();\n    const position = this.index_;\n    /** @type {number|string} */\n    let value = c;\n    let type;\n\n    if (c == '(') {\n      type = TokenType.LEFT_PAREN;\n    } else if (c == ',') {\n      type = TokenType.COMMA;\n    } else if (c == ')') {\n      type = TokenType.RIGHT_PAREN;\n    } else if (this.isNumeric_(c) || c == '-') {\n      type = TokenType.NUMBER;\n      value = this.readNumber_();\n    } else if (this.isAlpha_(c)) {\n      type = TokenType.TEXT;\n      value = this.readText_();\n    } else if (this.isWhiteSpace_(c)) {\n      return this.nextToken();\n    } else if (c === '') {\n      type = TokenType.EOF;\n    } else {\n      throw new Error('Unexpected character: ' + c);\n    }\n\n    return {position: position, value: value, type: type};\n  }\n\n  /**\n   * @return {number} Numeric token value.\n   * @private\n   */\n  readNumber_() {\n    let c;\n    const index = this.index_;\n    let decimal = false;\n    let scientificNotation = false;\n    do {\n      if (c == '.') {\n        decimal = true;\n      } else if (c == 'e' || c == 'E') {\n        scientificNotation = true;\n      }\n      c = this.nextChar_();\n    } while (\n      this.isNumeric_(c, decimal) ||\n        // if we haven't detected a scientific number before, 'e' or 'E'\n        // hint that we should continue to read\n        !scientificNotation && (c == 'e' || c == 'E') ||\n        // once we know that we have a scientific number, both '-' and '+'\n        // are allowed\n        scientificNotation && (c == '-' || c == '+')\n    );\n    return parseFloat(this.wkt.substring(index, this.index_--));\n  }\n\n  /**\n   * @return {string} String token value.\n   * @private\n   */\n  readText_() {\n    let c;\n    const index = this.index_;\n    do {\n      c = this.nextChar_();\n    } while (this.isAlpha_(c));\n    return this.wkt.substring(index, this.index_--).toUpperCase();\n  }\n}\n\n/**\n * Class to parse the tokens from the WKT string.\n */\nclass Parser {\n\n  /**\n   * @param {Lexer} lexer The lexer.\n   */\n  constructor(lexer) {\n\n    /**\n     * @type {Lexer}\n     * @private\n     */\n    this.lexer_ = lexer;\n\n    /**\n     * @type {Token}\n     * @private\n     */\n    this.token_;\n\n    /**\n     * @type {GeometryLayout}\n     * @private\n     */\n    this.layout_ = GeometryLayout.XY;\n  }\n\n  /**\n   * Fetch the next token form the lexer and replace the active token.\n   * @private\n   */\n  consume_() {\n    this.token_ = this.lexer_.nextToken();\n  }\n\n  /**\n   * Tests if the given type matches the type of the current token.\n   * @param {TokenType} type Token type.\n   * @return {boolean} Whether the token matches the given type.\n   */\n  isTokenType(type) {\n    const isMatch = this.token_.type == type;\n    return isMatch;\n  }\n\n  /**\n   * If the given type matches the current token, consume it.\n   * @param {TokenType} type Token type.\n   * @return {boolean} Whether the token matches the given type.\n   */\n  match(type) {\n    const isMatch = this.isTokenType(type);\n    if (isMatch) {\n      this.consume_();\n    }\n    return isMatch;\n  }\n\n  /**\n   * Try to parse the tokens provided by the lexer.\n   * @return {import(\"../geom/Geometry.js\").default} The geometry.\n   */\n  parse() {\n    this.consume_();\n    const geometry = this.parseGeometry_();\n    return geometry;\n  }\n\n  /**\n   * Try to parse the dimensional info.\n   * @return {GeometryLayout} The layout.\n   * @private\n   */\n  parseGeometryLayout_() {\n    let layout = GeometryLayout.XY;\n    const dimToken = this.token_;\n    if (this.isTokenType(TokenType.TEXT)) {\n      const dimInfo = dimToken.value;\n      if (dimInfo === Z) {\n        layout = GeometryLayout.XYZ;\n      } else if (dimInfo === M) {\n        layout = GeometryLayout.XYM;\n      } else if (dimInfo === ZM) {\n        layout = GeometryLayout.XYZM;\n      }\n      if (layout !== GeometryLayout.XY) {\n        this.consume_();\n      }\n    }\n    return layout;\n  }\n\n  /**\n   * @return {!Array<import(\"../geom/Geometry.js\").default>} A collection of geometries.\n   * @private\n   */\n  parseGeometryCollectionText_() {\n    if (this.match(TokenType.LEFT_PAREN)) {\n      const geometries = [];\n      do {\n        geometries.push(this.parseGeometry_());\n      } while (this.match(TokenType.COMMA));\n      if (this.match(TokenType.RIGHT_PAREN)) {\n        return geometries;\n      }\n    } else if (this.isEmptyGeometry_()) {\n      return [];\n    }\n    throw new Error(this.formatErrorMessage_());\n  }\n\n  /**\n   * @return {Array<number>} All values in a point.\n   * @private\n   */\n  parsePointText_() {\n    if (this.match(TokenType.LEFT_PAREN)) {\n      const coordinates = this.parsePoint_();\n      if (this.match(TokenType.RIGHT_PAREN)) {\n        return coordinates;\n      }\n    } else if (this.isEmptyGeometry_()) {\n      return null;\n    }\n    throw new Error(this.formatErrorMessage_());\n  }\n\n  /**\n   * @return {!Array<!Array<number>>} All points in a linestring.\n   * @private\n   */\n  parseLineStringText_() {\n    if (this.match(TokenType.LEFT_PAREN)) {\n      const coordinates = this.parsePointList_();\n      if (this.match(TokenType.RIGHT_PAREN)) {\n        return coordinates;\n      }\n    } else if (this.isEmptyGeometry_()) {\n      return [];\n    }\n    throw new Error(this.formatErrorMessage_());\n  }\n\n  /**\n   * @return {!Array<!Array<!Array<number>>>} All points in a polygon.\n   * @private\n   */\n  parsePolygonText_() {\n    if (this.match(TokenType.LEFT_PAREN)) {\n      const coordinates = this.parseLineStringTextList_();\n      if (this.match(TokenType.RIGHT_PAREN)) {\n        return coordinates;\n      }\n    } else if (this.isEmptyGeometry_()) {\n      return [];\n    }\n    throw new Error(this.formatErrorMessage_());\n  }\n\n  /**\n   * @return {!Array<!Array<number>>} All points in a multipoint.\n   * @private\n   */\n  parseMultiPointText_() {\n    if (this.match(TokenType.LEFT_PAREN)) {\n      let coordinates;\n      if (this.token_.type == TokenType.LEFT_PAREN) {\n        coordinates = this.parsePointTextList_();\n      } else {\n        coordinates = this.parsePointList_();\n      }\n      if (this.match(TokenType.RIGHT_PAREN)) {\n        return coordinates;\n      }\n    } else if (this.isEmptyGeometry_()) {\n      return [];\n    }\n    throw new Error(this.formatErrorMessage_());\n  }\n\n  /**\n   * @return {!Array<!Array<!Array<number>>>} All linestring points\n   *                                          in a multilinestring.\n   * @private\n   */\n  parseMultiLineStringText_() {\n    if (this.match(TokenType.LEFT_PAREN)) {\n      const coordinates = this.parseLineStringTextList_();\n      if (this.match(TokenType.RIGHT_PAREN)) {\n        return coordinates;\n      }\n    } else if (this.isEmptyGeometry_()) {\n      return [];\n    }\n    throw new Error(this.formatErrorMessage_());\n  }\n\n  /**\n   * @return {!Array<!Array<!Array<!Array<number>>>>} All polygon points in a multipolygon.\n   * @private\n   */\n  parseMultiPolygonText_() {\n    if (this.match(TokenType.LEFT_PAREN)) {\n      const coordinates = this.parsePolygonTextList_();\n      if (this.match(TokenType.RIGHT_PAREN)) {\n        return coordinates;\n      }\n    } else if (this.isEmptyGeometry_()) {\n      return [];\n    }\n    throw new Error(this.formatErrorMessage_());\n  }\n\n  /**\n   * @return {!Array<number>} A point.\n   * @private\n   */\n  parsePoint_() {\n    const coordinates = [];\n    const dimensions = this.layout_.length;\n    for (let i = 0; i < dimensions; ++i) {\n      const token = this.token_;\n      if (this.match(TokenType.NUMBER)) {\n        coordinates.push(/** @type {number} */ (token.value));\n      } else {\n        break;\n      }\n    }\n    if (coordinates.length == dimensions) {\n      return coordinates;\n    }\n    throw new Error(this.formatErrorMessage_());\n  }\n\n  /**\n   * @return {!Array<!Array<number>>} An array of points.\n   * @private\n   */\n  parsePointList_() {\n    const coordinates = [this.parsePoint_()];\n    while (this.match(TokenType.COMMA)) {\n      coordinates.push(this.parsePoint_());\n    }\n    return coordinates;\n  }\n\n  /**\n   * @return {!Array<!Array<number>>} An array of points.\n   * @private\n   */\n  parsePointTextList_() {\n    const coordinates = [this.parsePointText_()];\n    while (this.match(TokenType.COMMA)) {\n      coordinates.push(this.parsePointText_());\n    }\n    return coordinates;\n  }\n\n  /**\n   * @return {!Array<!Array<!Array<number>>>} An array of points.\n   * @private\n   */\n  parseLineStringTextList_() {\n    const coordinates = [this.parseLineStringText_()];\n    while (this.match(TokenType.COMMA)) {\n      coordinates.push(this.parseLineStringText_());\n    }\n    return coordinates;\n  }\n\n  /**\n   * @return {!Array<!Array<!Array<!Array<number>>>>} An array of points.\n   * @private\n   */\n  parsePolygonTextList_() {\n    const coordinates = [this.parsePolygonText_()];\n    while (this.match(TokenType.COMMA)) {\n      coordinates.push(this.parsePolygonText_());\n    }\n    return coordinates;\n  }\n\n  /**\n   * @return {boolean} Whether the token implies an empty geometry.\n   * @private\n   */\n  isEmptyGeometry_() {\n    const isEmpty = this.isTokenType(TokenType.TEXT) &&\n        this.token_.value == EMPTY;\n    if (isEmpty) {\n      this.consume_();\n    }\n    return isEmpty;\n  }\n\n  /**\n   * Create an error message for an unexpected token error.\n   * @return {string} Error message.\n   * @private\n   */\n  formatErrorMessage_() {\n    return 'Unexpected `' + this.token_.value + '` at position ' +\n        this.token_.position + ' in `' + this.lexer_.wkt + '`';\n  }\n\n  /**\n   * @return {!import(\"../geom/Geometry.js\").default} The geometry.\n   * @private\n   */\n  parseGeometry_() {\n    const token = this.token_;\n    if (this.match(TokenType.TEXT)) {\n      const geomType = token.value;\n      this.layout_ = this.parseGeometryLayout_();\n      if (geomType == 'GEOMETRYCOLLECTION') {\n        const geometries = this.parseGeometryCollectionText_();\n        return new GeometryCollection(geometries);\n      } else {\n        const ctor = GeometryConstructor[geomType];\n        if (!ctor) {\n          throw new Error('Invalid geometry type: ' + geomType);\n        }\n\n        let coordinates;\n        switch (geomType) {\n          case 'POINT': {\n            coordinates = this.parsePointText_();\n            break;\n          }\n          case 'LINESTRING': {\n            coordinates = this.parseLineStringText_();\n            break;\n          }\n          case 'POLYGON': {\n            coordinates = this.parsePolygonText_();\n            break;\n          }\n          case 'MULTIPOINT': {\n            coordinates = this.parseMultiPointText_();\n            break;\n          }\n          case 'MULTILINESTRING': {\n            coordinates = this.parseMultiLineStringText_();\n            break;\n          }\n          case 'MULTIPOLYGON': {\n            coordinates = this.parseMultiPolygonText_();\n            break;\n          }\n          default: {\n            throw new Error('Invalid geometry type: ' + geomType);\n          }\n        }\n\n        if (!coordinates) {\n          if (ctor === GeometryConstructor['POINT']) {\n            coordinates = [NaN, NaN];\n          } else {\n            coordinates = [];\n          }\n        }\n        return new ctor(coordinates, this.layout_);\n      }\n    }\n    throw new Error(this.formatErrorMessage_());\n  }\n}\n\n\n/**\n * @classdesc\n * Geometry format for reading and writing data in the `WellKnownText` (WKT)\n * format.\n *\n * @api\n */\nclass WKT extends TextFeature {\n\n  /**\n   * @param {Options=} opt_options Options.\n   */\n  constructor(opt_options) {\n    super();\n\n    const options = opt_options ? opt_options : {};\n\n\n    /**\n     * Split GeometryCollection into multiple features.\n     * @type {boolean}\n     * @private\n     */\n    this.splitCollection_ = options.splitCollection !== undefined ?\n      options.splitCollection : false;\n\n  }\n\n  /**\n   * Parse a WKT string.\n   * @param {string} wkt WKT string.\n   * @return {import(\"../geom/Geometry.js\").default|undefined}\n   *     The geometry created.\n   * @private\n   */\n  parse_(wkt) {\n    const lexer = new Lexer(wkt);\n    const parser = new Parser(lexer);\n    return parser.parse();\n  }\n\n  /**\n   * @inheritDoc\n   */\n  readFeatureFromText(text, opt_options) {\n    const geom = this.readGeometryFromText(text, opt_options);\n    if (geom) {\n      const feature = new Feature();\n      feature.setGeometry(geom);\n      return feature;\n    }\n    return null;\n  }\n\n  /**\n   * @inheritDoc\n   */\n  readFeaturesFromText(text, opt_options) {\n    let geometries = [];\n    const geometry = this.readGeometryFromText(text, opt_options);\n    if (this.splitCollection_ &&\n        geometry.getType() == GeometryType.GEOMETRY_COLLECTION) {\n      geometries = (/** @type {GeometryCollection} */ (geometry))\n        .getGeometriesArray();\n    } else {\n      geometries = [geometry];\n    }\n    const features = [];\n    for (let i = 0, ii = geometries.length; i < ii; ++i) {\n      const feature = new Feature();\n      feature.setGeometry(geometries[i]);\n      features.push(feature);\n    }\n    return features;\n  }\n\n  /**\n   * @inheritDoc\n   */\n  readGeometryFromText(text, opt_options) {\n    const geometry = this.parse_(text);\n    if (geometry) {\n      return transformGeometryWithOptions(geometry, false, opt_options);\n    } else {\n      return null;\n    }\n  }\n\n  /**\n   * @inheritDoc\n   */\n  writeFeatureText(feature, opt_options) {\n    const geometry = feature.getGeometry();\n    if (geometry) {\n      return this.writeGeometryText(geometry, opt_options);\n    }\n    return '';\n  }\n\n  /**\n   * @inheritDoc\n   */\n  writeFeaturesText(features, opt_options) {\n    if (features.length == 1) {\n      return this.writeFeatureText(features[0], opt_options);\n    }\n    const geometries = [];\n    for (let i = 0, ii = features.length; i < ii; ++i) {\n      geometries.push(features[i].getGeometry());\n    }\n    const collection = new GeometryCollection(geometries);\n    return this.writeGeometryText(collection, opt_options);\n  }\n\n  /**\n   * @inheritDoc\n   */\n  writeGeometryText(geometry, opt_options) {\n    return encode(transformGeometryWithOptions(geometry, true, opt_options));\n  }\n}\n\n\n/**\n * @param {Point} geom Point geometry.\n * @return {string} Coordinates part of Point as WKT.\n */\nfunction encodePointGeometry(geom) {\n  const coordinates = geom.getCoordinates();\n  if (coordinates.length === 0) {\n    return '';\n  }\n  return coordinates.join(' ');\n}\n\n\n/**\n * @param {MultiPoint} geom MultiPoint geometry.\n * @return {string} Coordinates part of MultiPoint as WKT.\n */\nfunction encodeMultiPointGeometry(geom) {\n  const array = [];\n  const components = geom.getPoints();\n  for (let i = 0, ii = components.length; i < ii; ++i) {\n    array.push('(' + encodePointGeometry(components[i]) + ')');\n  }\n  return array.join(',');\n}\n\n\n/**\n * @param {GeometryCollection} geom GeometryCollection geometry.\n * @return {string} Coordinates part of GeometryCollection as WKT.\n */\nfunction encodeGeometryCollectionGeometry(geom) {\n  const array = [];\n  const geoms = geom.getGeometries();\n  for (let i = 0, ii = geoms.length; i < ii; ++i) {\n    array.push(encode(geoms[i]));\n  }\n  return array.join(',');\n}\n\n\n/**\n * @param {LineString|import(\"../geom/LinearRing.js\").default} geom LineString geometry.\n * @return {string} Coordinates part of LineString as WKT.\n */\nfunction encodeLineStringGeometry(geom) {\n  const coordinates = geom.getCoordinates();\n  const array = [];\n  for (let i = 0, ii = coordinates.length; i < ii; ++i) {\n    array.push(coordinates[i].join(' '));\n  }\n  return array.join(',');\n}\n\n\n/**\n * @param {MultiLineString} geom MultiLineString geometry.\n * @return {string} Coordinates part of MultiLineString as WKT.\n */\nfunction encodeMultiLineStringGeometry(geom) {\n  const array = [];\n  const components = geom.getLineStrings();\n  for (let i = 0, ii = components.length; i < ii; ++i) {\n    array.push('(' + encodeLineStringGeometry(components[i]) + ')');\n  }\n  return array.join(',');\n}\n\n\n/**\n * @param {Polygon} geom Polygon geometry.\n * @return {string} Coordinates part of Polygon as WKT.\n */\nfunction encodePolygonGeometry(geom) {\n  const array = [];\n  const rings = geom.getLinearRings();\n  for (let i = 0, ii = rings.length; i < ii; ++i) {\n    array.push('(' + encodeLineStringGeometry(rings[i]) + ')');\n  }\n  return array.join(',');\n}\n\n\n/**\n * @param {MultiPolygon} geom MultiPolygon geometry.\n * @return {string} Coordinates part of MultiPolygon as WKT.\n */\nfunction encodeMultiPolygonGeometry(geom) {\n  const array = [];\n  const components = geom.getPolygons();\n  for (let i = 0, ii = components.length; i < ii; ++i) {\n    array.push('(' + encodePolygonGeometry(components[i]) + ')');\n  }\n  return array.join(',');\n}\n\n/**\n * @param {import(\"../geom/SimpleGeometry.js\").default} geom SimpleGeometry geometry.\n * @return {string} Potential dimensional information for WKT type.\n */\nfunction encodeGeometryLayout(geom) {\n  const layout = geom.getLayout();\n  let dimInfo = '';\n  if (layout === GeometryLayout.XYZ || layout === GeometryLayout.XYZM) {\n    dimInfo += Z;\n  }\n  if (layout === GeometryLayout.XYM || layout === GeometryLayout.XYZM) {\n    dimInfo += M;\n  }\n  return dimInfo;\n}\n\n\n/**\n * @const\n * @type {Object<string, function(import(\"../geom/Geometry.js\").default): string>}\n */\nconst GeometryEncoder = {\n  'Point': encodePointGeometry,\n  'LineString': encodeLineStringGeometry,\n  'Polygon': encodePolygonGeometry,\n  'MultiPoint': encodeMultiPointGeometry,\n  'MultiLineString': encodeMultiLineStringGeometry,\n  'MultiPolygon': encodeMultiPolygonGeometry,\n  'GeometryCollection': encodeGeometryCollectionGeometry\n};\n\n\n/**\n * Encode a geometry as WKT.\n * @param {!import(\"../geom/Geometry.js\").default} geom The geometry to encode.\n * @return {string} WKT string for the geometry.\n */\nfunction encode(geom) {\n  let type = geom.getType();\n  const geometryEncoder = GeometryEncoder[type];\n  const enc = geometryEncoder(geom);\n  type = type.toUpperCase();\n  if (typeof /** @type {?} */ (geom).getFlatCoordinates === 'function') {\n    const dimInfo = encodeGeometryLayout(/** @type {import(\"../geom/SimpleGeometry.js\").default} */ (geom));\n    if (dimInfo.length > 0) {\n      type += ' ' + dimInfo;\n    }\n  }\n  if (enc.length === 0) {\n    return type + ' ' + EMPTY;\n  }\n  return type + '(' + enc + ')';\n}\n\n\nexport default WKT;\n","/**\n * @module ol/control/OverviewMap\n */\nimport PluggableMap from '../PluggableMap.js';\nimport CompositeMapRenderer from '../renderer/Composite.js';\nimport MapEventType from '../MapEventType.js';\nimport MapProperty from '../MapProperty.js';\nimport {getChangeEventType} from '../Object.js';\nimport ObjectEventType from '../ObjectEventType.js';\nimport Overlay from '../Overlay.js';\nimport OverlayPositioning from '../OverlayPositioning.js';\nimport ViewProperty from '../ViewProperty.js';\nimport Control from './Control.js';\nimport {fromExtent as polygonFromExtent} from '../geom/Polygon.js';\nimport {CLASS_CONTROL, CLASS_UNSELECTABLE, CLASS_COLLAPSED} from '../css.js';\nimport {replaceNode} from '../dom.js';\nimport {listen, listenOnce} from '../events.js';\nimport EventType from '../events/EventType.js';\nimport {containsExtent, equals as equalsExtent, getBottomRight, getTopLeft, scaleFromCenter} from '../extent.js';\n\n\n/**\n * Maximum width and/or height extent ratio that determines when the overview\n * map should be zoomed out.\n * @type {number}\n */\nconst MAX_RATIO = 0.75;\n\n\n/**\n * Minimum width and/or height extent ratio that determines when the overview\n * map should be zoomed in.\n * @type {number}\n */\nconst MIN_RATIO = 0.1;\n\n\nclass ControlledMap extends PluggableMap {\n  createRenderer() {\n    return new CompositeMapRenderer(this);\n  }\n}\n\n\n/**\n * @typedef {Object} Options\n * @property {string} [className='ol-overviewmap'] CSS class name.\n * @property {boolean} [collapsed=true] Whether the control should start collapsed or not (expanded).\n * @property {string|HTMLElement} [collapseLabel='«'] Text label to use for the\n * expanded overviewmap button. Instead of text, also an element (e.g. a `span` element) can be used.\n * @property {boolean} [collapsible=true] Whether the control can be collapsed or not.\n * @property {string|HTMLElement} [label='»'] Text label to use for the collapsed\n * overviewmap button. Instead of text, also an element (e.g. a `span` element) can be used.\n * @property {Array<import(\"../layer/Layer.js\").default>|import(\"../Collection.js\").default<import(\"../layer/Layer.js\").default>} [layers]\n * Layers for the overview map.\n * @property {function(import(\"../MapEvent.js\").default)} [render] Function called when the control\n * should be re-rendered. This is called in a `requestAnimationFrame` callback.\n * @property {boolean} [rotateWithView=false] Whether the control view should rotate with the main map view.\n * @property {HTMLElement|string} [target] Specify a target if you want the control\n * to be rendered outside of the map's viewport.\n * @property {string} [tipLabel='Overview map'] Text label to use for the button tip.\n * @property {import(\"../View.js\").default} [view] Custom view for the overview map. If not provided,\n * a default view with an EPSG:3857 projection will be used.\n */\n\n\n/**\n * Create a new control with a map acting as an overview map for another\n * defined map.\n *\n * @api\n */\nclass OverviewMap extends Control {\n\n  /**\n   * @param {Options=} opt_options OverviewMap options.\n   */\n  constructor(opt_options) {\n\n    const options = opt_options ? opt_options : {};\n\n    super({\n      element: document.createElement('div'),\n      render: options.render || render,\n      target: options.target\n    });\n\n    /**\n     * @private\n     */\n    this.boundHandleRotationChanged_ = this.handleRotationChanged_.bind(this);\n\n    /**\n     * @type {boolean}\n     * @private\n     */\n    this.collapsed_ = options.collapsed !== undefined ? options.collapsed : true;\n\n    /**\n     * @private\n     * @type {boolean}\n     */\n    this.collapsible_ = options.collapsible !== undefined ?\n      options.collapsible : true;\n\n    if (!this.collapsible_) {\n      this.collapsed_ = false;\n    }\n\n    /**\n     * @private\n     * @type {boolean}\n     */\n    this.rotateWithView_ = options.rotateWithView !== undefined ?\n      options.rotateWithView : false;\n\n    /**\n     * @private\n     * @type {import(\"../extent.js\").Extent|undefined}\n     */\n    this.viewExtent_ = undefined;\n\n    const className = options.className !== undefined ? options.className : 'ol-overviewmap';\n\n    const tipLabel = options.tipLabel !== undefined ? options.tipLabel : 'Overview map';\n\n    const collapseLabel = options.collapseLabel !== undefined ? options.collapseLabel : '\\u00AB';\n\n    if (typeof collapseLabel === 'string') {\n      /**\n       * @private\n       * @type {HTMLElement}\n       */\n      this.collapseLabel_ = document.createElement('span');\n      this.collapseLabel_.textContent = collapseLabel;\n    } else {\n      this.collapseLabel_ = collapseLabel;\n    }\n\n    const label = options.label !== undefined ? options.label : '\\u00BB';\n\n\n    if (typeof label === 'string') {\n      /**\n       * @private\n       * @type {HTMLElement}\n       */\n      this.label_ = document.createElement('span');\n      this.label_.textContent = label;\n    } else {\n      this.label_ = label;\n    }\n\n    const activeLabel = (this.collapsible_ && !this.collapsed_) ?\n      this.collapseLabel_ : this.label_;\n    const button = document.createElement('button');\n    button.setAttribute('type', 'button');\n    button.title = tipLabel;\n    button.appendChild(activeLabel);\n\n    button.addEventListener(EventType.CLICK, this.handleClick_.bind(this), false);\n\n    /**\n     * @type {HTMLElement}\n     * @private\n     */\n    this.ovmapDiv_ = document.createElement('div');\n    this.ovmapDiv_.className = 'ol-overviewmap-map';\n\n    /**\n     * @type {ControlledMap}\n     * @private\n     */\n    this.ovmap_ = new ControlledMap({\n      view: options.view\n    });\n    const ovmap = this.ovmap_;\n\n    if (options.layers) {\n      options.layers.forEach(function(layer) {\n        ovmap.addLayer(layer);\n      });\n    }\n\n    const box = document.createElement('div');\n    box.className = 'ol-overviewmap-box';\n    box.style.boxSizing = 'border-box';\n\n    /**\n     * @type {import(\"../Overlay.js\").default}\n     * @private\n     */\n    this.boxOverlay_ = new Overlay({\n      position: [0, 0],\n      positioning: OverlayPositioning.CENTER_CENTER,\n      element: box\n    });\n    this.ovmap_.addOverlay(this.boxOverlay_);\n\n    const cssClasses = className + ' ' + CLASS_UNSELECTABLE + ' ' + CLASS_CONTROL +\n        (this.collapsed_ && this.collapsible_ ? ' ' + CLASS_COLLAPSED : '') +\n        (this.collapsible_ ? '' : ' ol-uncollapsible');\n    const element = this.element;\n    element.className = cssClasses;\n    element.appendChild(this.ovmapDiv_);\n    element.appendChild(button);\n\n    /* Interactive map */\n\n    const scope = this;\n\n    const overlay = this.boxOverlay_;\n    const overlayBox = this.boxOverlay_.getElement();\n\n    /* Functions definition */\n\n    const computeDesiredMousePosition = function(mousePosition) {\n      return {\n        clientX: mousePosition.clientX - (overlayBox.offsetWidth / 2),\n        clientY: mousePosition.clientY + (overlayBox.offsetHeight / 2)\n      };\n    };\n\n    const move = function(event) {\n      const position = /** @type {?} */ (computeDesiredMousePosition(event));\n      const coordinates = ovmap.getEventCoordinateInternal(/** @type {Event} */ (position));\n\n      overlay.setPosition(coordinates);\n    };\n\n    const endMoving = function(event) {\n      const coordinates = ovmap.getEventCoordinateInternal(event);\n\n      scope.getMap().getView().setCenterInternal(coordinates);\n\n      window.removeEventListener('mousemove', move);\n      window.removeEventListener('mouseup', endMoving);\n    };\n\n    /* Binding */\n\n    overlayBox.addEventListener('mousedown', function() {\n      window.addEventListener('mousemove', move);\n      window.addEventListener('mouseup', endMoving);\n    });\n\n  }\n\n  /**\n   * @inheritDoc\n   * @api\n   */\n  setMap(map) {\n    const oldMap = this.getMap();\n    if (map === oldMap) {\n      return;\n    }\n    if (oldMap) {\n      const oldView = oldMap.getView();\n      if (oldView) {\n        this.unbindView_(oldView);\n      }\n      this.ovmap_.setTarget(null);\n    }\n    super.setMap(map);\n\n    if (map) {\n      this.ovmap_.setTarget(this.ovmapDiv_);\n      this.listenerKeys.push(listen(\n        map, ObjectEventType.PROPERTYCHANGE,\n        this.handleMapPropertyChange_, this));\n\n      const view = map.getView();\n      if (view) {\n        this.bindView_(view);\n        if (view.isDef()) {\n          this.ovmap_.updateSize();\n          this.resetExtent_();\n        }\n      }\n    }\n  }\n\n  /**\n   * Handle map property changes.  This only deals with changes to the map's view.\n   * @param {import(\"../Object.js\").ObjectEvent} event The propertychange event.\n   * @private\n   */\n  handleMapPropertyChange_(event) {\n    if (event.key === MapProperty.VIEW) {\n      const oldView = /** @type {import(\"../View.js\").default} */ (event.oldValue);\n      if (oldView) {\n        this.unbindView_(oldView);\n      }\n      const newView = this.getMap().getView();\n      this.bindView_(newView);\n    }\n  }\n\n  /**\n   * Register listeners for view property changes.\n   * @param {import(\"../View.js\").default} view The view.\n   * @private\n   */\n  bindView_(view) {\n    view.addEventListener(getChangeEventType(ViewProperty.ROTATION), this.boundHandleRotationChanged_);\n  }\n\n  /**\n   * Unregister listeners for view property changes.\n   * @param {import(\"../View.js\").default} view The view.\n   * @private\n   */\n  unbindView_(view) {\n    view.removeEventListener(getChangeEventType(ViewProperty.ROTATION), this.boundHandleRotationChanged_);\n  }\n\n  /**\n   * Handle rotation changes to the main map.\n   * @private\n   */\n  handleRotationChanged_() {\n    if (this.rotateWithView_) {\n      this.ovmap_.getView().setRotation(this.getMap().getView().getRotation());\n    }\n  }\n\n  /**\n   * Reset the overview map extent if the box size (width or\n   * height) is less than the size of the overview map size times minRatio\n   * or is greater than the size of the overview size times maxRatio.\n   *\n   * If the map extent was not reset, the box size can fits in the defined\n   * ratio sizes. This method then checks if is contained inside the overview\n   * map current extent. If not, recenter the overview map to the current\n   * main map center location.\n   * @private\n   */\n  validateExtent_() {\n    const map = this.getMap();\n    const ovmap = this.ovmap_;\n\n    if (!map.isRendered() || !ovmap.isRendered()) {\n      return;\n    }\n\n    const mapSize = /** @type {import(\"../size.js\").Size} */ (map.getSize());\n\n    const view = map.getView();\n    const extent = view.calculateExtentInternal(mapSize);\n\n    if (this.viewExtent_ && equalsExtent(extent, this.viewExtent_)) {\n      // repeats of the same extent may indicate constraint conflicts leading to an endless cycle\n      return;\n    }\n    this.viewExtent_ = extent;\n\n    const ovmapSize = /** @type {import(\"../size.js\").Size} */ (ovmap.getSize());\n\n    const ovview = ovmap.getView();\n    const ovextent = ovview.calculateExtentInternal(ovmapSize);\n\n    const topLeftPixel =\n        ovmap.getPixelFromCoordinateInternal(getTopLeft(extent));\n    const bottomRightPixel =\n        ovmap.getPixelFromCoordinateInternal(getBottomRight(extent));\n\n    const boxWidth = Math.abs(topLeftPixel[0] - bottomRightPixel[0]);\n    const boxHeight = Math.abs(topLeftPixel[1] - bottomRightPixel[1]);\n\n    const ovmapWidth = ovmapSize[0];\n    const ovmapHeight = ovmapSize[1];\n\n    if (boxWidth < ovmapWidth * MIN_RATIO ||\n        boxHeight < ovmapHeight * MIN_RATIO ||\n        boxWidth > ovmapWidth * MAX_RATIO ||\n        boxHeight > ovmapHeight * MAX_RATIO) {\n      this.resetExtent_();\n    } else if (!containsExtent(ovextent, extent)) {\n      this.recenter_();\n    }\n  }\n\n  /**\n   * Reset the overview map extent to half calculated min and max ratio times\n   * the extent of the main map.\n   * @private\n   */\n  resetExtent_() {\n    if (MAX_RATIO === 0 || MIN_RATIO === 0) {\n      return;\n    }\n\n    const map = this.getMap();\n    const ovmap = this.ovmap_;\n\n    const mapSize = /** @type {import(\"../size.js\").Size} */ (map.getSize());\n\n    const view = map.getView();\n    const extent = view.calculateExtentInternal(mapSize);\n\n    const ovview = ovmap.getView();\n\n    // get how many times the current map overview could hold different\n    // box sizes using the min and max ratio, pick the step in the middle used\n    // to calculate the extent from the main map to set it to the overview map,\n    const steps = Math.log(\n      MAX_RATIO / MIN_RATIO) / Math.LN2;\n    const ratio = 1 / (Math.pow(2, steps / 2) * MIN_RATIO);\n    scaleFromCenter(extent, ratio);\n    ovview.fitInternal(polygonFromExtent(extent));\n  }\n\n  /**\n   * Set the center of the overview map to the map center without changing its\n   * resolution.\n   * @private\n   */\n  recenter_() {\n    const map = this.getMap();\n    const ovmap = this.ovmap_;\n\n    const view = map.getView();\n\n    const ovview = ovmap.getView();\n\n    ovview.setCenterInternal(view.getCenterInternal());\n  }\n\n  /**\n   * Update the box using the main map extent\n   * @private\n   */\n  updateBox_() {\n    const map = this.getMap();\n    const ovmap = this.ovmap_;\n\n    if (!map.isRendered() || !ovmap.isRendered()) {\n      return;\n    }\n\n    const mapSize = /** @type {import(\"../size.js\").Size} */ (map.getSize());\n\n    const view = map.getView();\n\n    const ovview = ovmap.getView();\n\n    const rotation = this.rotateWithView_ ? 0 : -view.getRotation();\n\n    const overlay = this.boxOverlay_;\n    const box = this.boxOverlay_.getElement();\n    const center = view.getCenterInternal();\n    const resolution = view.getResolution();\n    const ovresolution = ovview.getResolution();\n    const width = mapSize[0] * resolution / ovresolution;\n    const height = mapSize[1] * resolution / ovresolution;\n\n    // set position using center coordinates\n    overlay.setPosition(center);\n\n    // set box size calculated from map extent size and overview map resolution\n    if (box) {\n      box.style.width = width + 'px';\n      box.style.height = height + 'px';\n      const transform = 'rotate(' + rotation + 'rad)';\n      box.style.transform = transform;\n    }\n  }\n\n  /**\n   * @param {MouseEvent} event The event to handle\n   * @private\n   */\n  handleClick_(event) {\n    event.preventDefault();\n    this.handleToggle_();\n  }\n\n  /**\n   * @private\n   */\n  handleToggle_() {\n    this.element.classList.toggle(CLASS_COLLAPSED);\n    if (this.collapsed_) {\n      replaceNode(this.collapseLabel_, this.label_);\n    } else {\n      replaceNode(this.label_, this.collapseLabel_);\n    }\n    this.collapsed_ = !this.collapsed_;\n\n    // manage overview map if it had not been rendered before and control\n    // is expanded\n    const ovmap = this.ovmap_;\n    if (!this.collapsed_) {\n      if (ovmap.isRendered()) {\n        this.viewExtent_ = undefined;\n        ovmap.render();\n        return;\n      }\n      ovmap.updateSize();\n      this.resetExtent_();\n      listenOnce(ovmap, MapEventType.POSTRENDER,\n        function(event) {\n          this.updateBox_();\n        },\n        this);\n    }\n  }\n\n  /**\n   * Return `true` if the overview map is collapsible, `false` otherwise.\n   * @return {boolean} True if the widget is collapsible.\n   * @api\n   */\n  getCollapsible() {\n    return this.collapsible_;\n  }\n\n  /**\n   * Set whether the overview map should be collapsible.\n   * @param {boolean} collapsible True if the widget is collapsible.\n   * @api\n   */\n  setCollapsible(collapsible) {\n    if (this.collapsible_ === collapsible) {\n      return;\n    }\n    this.collapsible_ = collapsible;\n    this.element.classList.toggle('ol-uncollapsible');\n    if (!collapsible && this.collapsed_) {\n      this.handleToggle_();\n    }\n  }\n\n  /**\n   * Collapse or expand the overview map according to the passed parameter. Will\n   * not do anything if the overview map isn't collapsible or if the current\n   * collapsed state is already the one requested.\n   * @param {boolean} collapsed True if the widget is collapsed.\n   * @api\n   */\n  setCollapsed(collapsed) {\n    if (!this.collapsible_ || this.collapsed_ === collapsed) {\n      return;\n    }\n    this.handleToggle_();\n  }\n\n  /**\n   * Determine if the overview map is collapsed.\n   * @return {boolean} The overview map is collapsed.\n   * @api\n   */\n  getCollapsed() {\n    return this.collapsed_;\n  }\n\n  /**\n   * Return `true` if the overview map view can rotate, `false` otherwise.\n   * @return {boolean} True if the control view can rotate.\n   * @api\n   */\n  getRotateWithView() {\n    return this.rotateWithView_;\n  }\n\n  /**\n   * Set whether the overview map view should rotate with the main map view.\n   * @param {boolean} rotateWithView True if the control view should rotate.\n   * @api\n   */\n  setRotateWithView(rotateWithView) {\n    if (this.rotateWithView_ === rotateWithView) {\n      return;\n    }\n    this.rotateWithView_ = rotateWithView;\n    if (this.getMap().getView().getRotation() !== 0) {\n      if (this.rotateWithView_) {\n        this.handleRotationChanged_();\n      } else {\n        this.ovmap_.getView().setRotation(0);\n      }\n      this.viewExtent_ = undefined;\n      this.validateExtent_();\n      this.updateBox_();\n    }\n  }\n\n  /**\n   * Return the overview map.\n   * @return {import(\"../PluggableMap.js\").default} Overview map.\n   * @api\n   */\n  getOverviewMap() {\n    return this.ovmap_;\n  }\n}\n\n\n/**\n * Update the overview map element.\n * @param {import(\"../MapEvent.js\").default} mapEvent Map event.\n * @this {OverviewMap}\n * @api\n */\nexport function render(mapEvent) {\n  this.validateExtent_();\n  this.updateBox_();\n}\n\n\nexport default OverviewMap;\n","/**\n * @module ol/source/ImageStatic\n */\n\nimport ImageWrapper from '../Image.js';\nimport ImageState from '../ImageState.js';\nimport {createCanvasContext2D} from '../dom.js';\nimport EventType from '../events/EventType.js';\nimport {intersects, getHeight, getWidth} from '../extent.js';\nimport {get as getProjection} from '../proj.js';\nimport ImageSource, {defaultImageLoadFunction} from './Image.js';\n\n/**\n * @typedef {Object} Options\n * @property {import(\"./Source.js\").AttributionLike} [attributions] Attributions.\n * @property {null|string} [crossOrigin] The `crossOrigin` attribute for loaded images.  Note that\n * you must provide a `crossOrigin` value if you want to access pixel data with the Canvas renderer.\n * See https://developer.mozilla.org/en-US/docs/Web/HTML/CORS_enabled_image for more detail.\n * @property {import(\"../extent.js\").Extent} [imageExtent] Extent of the image in map coordinates.\n * This is the [left, bottom, right, top] map coordinates of your image.\n * @property {import(\"../Image.js\").LoadFunction} [imageLoadFunction] Optional function to load an image given a URL.\n * @property {import(\"../proj.js\").ProjectionLike} projection Projection.\n * @property {import(\"../size.js\").Size} [imageSize] Size of the image in pixels. Usually the image size is auto-detected, so this\n * only needs to be set if auto-detection fails for some reason.\n * @property {string} url Image URL.\n */\n\n\n/**\n * @classdesc\n * A layer source for displaying a single, static image.\n * @api\n */\nclass Static extends ImageSource {\n  /**\n   * @param {Options} options ImageStatic options.\n   */\n  constructor(options) {\n    const crossOrigin = options.crossOrigin !== undefined ?\n      options.crossOrigin : null;\n\n    const /** @type {import(\"../Image.js\").LoadFunction} */ imageLoadFunction =\n        options.imageLoadFunction !== undefined ?\n          options.imageLoadFunction : defaultImageLoadFunction;\n\n    super({\n      attributions: options.attributions,\n      projection: getProjection(options.projection)\n    });\n\n    /**\n     * @private\n     * @type {string}\n     */\n    this.url_ = options.url;\n\n    /**\n     * @private\n     * @type {import(\"../extent.js\").Extent}\n     */\n    this.imageExtent_ = options.imageExtent;\n\n    /**\n     * @private\n     * @type {import(\"../Image.js\").default}\n     */\n    this.image_ = new ImageWrapper(this.imageExtent_, undefined, 1, this.url_, crossOrigin, imageLoadFunction);\n\n    /**\n     * @private\n     * @type {import(\"../size.js\").Size}\n     */\n    this.imageSize_ = options.imageSize ? options.imageSize : null;\n\n    this.image_.addEventListener(EventType.CHANGE, this.handleImageChange.bind(this));\n\n  }\n\n  /**\n   * Returns the image extent\n   * @return {import(\"../extent.js\").Extent} image extent.\n   * @api\n   */\n  getImageExtent() {\n    return this.imageExtent_;\n  }\n\n  /**\n   * @inheritDoc\n   */\n  getImageInternal(extent, resolution, pixelRatio, projection) {\n    if (intersects(extent, this.image_.getExtent())) {\n      return this.image_;\n    }\n    return null;\n  }\n\n  /**\n   * Return the URL used for this image source.\n   * @return {string} URL.\n   * @api\n   */\n  getUrl() {\n    return this.url_;\n  }\n\n  /**\n   * @inheritDoc\n   */\n  handleImageChange(evt) {\n    if (this.image_.getState() == ImageState.LOADED) {\n      const imageExtent = this.image_.getExtent();\n      const image = this.image_.getImage();\n      let imageWidth, imageHeight;\n      if (this.imageSize_) {\n        imageWidth = this.imageSize_[0];\n        imageHeight = this.imageSize_[1];\n      } else {\n        imageWidth = image.width;\n        imageHeight = image.height;\n      }\n      const resolution = getHeight(imageExtent) / imageHeight;\n      const targetWidth = Math.ceil(getWidth(imageExtent) / resolution);\n      if (targetWidth != imageWidth) {\n        const context = createCanvasContext2D(targetWidth, imageHeight);\n        const canvas = context.canvas;\n        context.drawImage(image, 0, 0, imageWidth, imageHeight,\n          0, 0, canvas.width, canvas.height);\n        this.image_.setImage(canvas);\n      }\n    }\n    super.handleImageChange(evt);\n  }\n}\n\n\nexport default Static;\n","/**\n * @module ol/format/EsriJSON\n */\nimport Feature from '../Feature.js';\nimport {assert} from '../asserts.js';\nimport {containsExtent} from '../extent.js';\nimport {transformGeometryWithOptions} from './Feature.js';\nimport JSONFeature from './JSONFeature.js';\nimport GeometryLayout from '../geom/GeometryLayout.js';\nimport GeometryType from '../geom/GeometryType.js';\nimport LineString from '../geom/LineString.js';\nimport LinearRing from '../geom/LinearRing.js';\nimport MultiLineString from '../geom/MultiLineString.js';\nimport MultiPoint from '../geom/MultiPoint.js';\nimport MultiPolygon from '../geom/MultiPolygon.js';\nimport Point from '../geom/Point.js';\nimport Polygon from '../geom/Polygon.js';\nimport {deflateCoordinates} from '../geom/flat/deflate.js';\nimport {linearRingIsClockwise} from '../geom/flat/orient.js';\nimport {isEmpty} from '../obj.js';\nimport {get as getProjection} from '../proj.js';\n\n/**\n * @typedef {import(\"arcgis-rest-api\").Feature} EsriJSONFeature\n * @typedef {import(\"arcgis-rest-api\").FeatureSet} EsriJSONFeatureSet\n * @typedef {import(\"arcgis-rest-api\").Geometry} EsriJSONGeometry\n * @typedef {import(\"arcgis-rest-api\").Point} EsriJSONPoint\n * @typedef {import(\"arcgis-rest-api\").Polyline} EsriJSONPolyline\n * @typedef {import(\"arcgis-rest-api\").Polygon} EsriJSONPolygon\n * @typedef {import(\"arcgis-rest-api\").Multipoint} EsriJSONMultipoint\n * @typedef {import(\"arcgis-rest-api\").HasZM} EsriJSONHasZM\n * @typedef {import(\"arcgis-rest-api\").Position} EsriJSONPosition\n * @typedef {import(\"arcgis-rest-api\").SpatialReferenceWkid} EsriJSONSpatialReferenceWkid\n */\n\n\n/**\n * @typedef {Object} EsriJSONMultiPolygon\n * @property {Array<Array<Array<Array<number>>>>} rings Rings for the MultiPolygon.\n * @property {boolean} [hasM] If the polygon coordinates have an M value.\n * @property {boolean} [hasZ] If the polygon coordinates have a Z value.\n * @property {EsriJSONSpatialReferenceWkid} [spatialReference] The coordinate reference system.\n */\n\n\n/**\n * @const\n * @type {Object<import(\"../geom/GeometryType.js\").default, function(EsriJSONGeometry): import(\"../geom/Geometry.js\").default>}\n */\nconst GEOMETRY_READERS = {};\nGEOMETRY_READERS[GeometryType.POINT] = readPointGeometry;\nGEOMETRY_READERS[GeometryType.LINE_STRING] = readLineStringGeometry;\nGEOMETRY_READERS[GeometryType.POLYGON] = readPolygonGeometry;\nGEOMETRY_READERS[GeometryType.MULTI_POINT] = readMultiPointGeometry;\nGEOMETRY_READERS[GeometryType.MULTI_LINE_STRING] = readMultiLineStringGeometry;\nGEOMETRY_READERS[GeometryType.MULTI_POLYGON] = readMultiPolygonGeometry;\n\n\n/**\n * @const\n * @type {Object<string, function(import(\"../geom/Geometry.js\").default, import(\"./Feature.js\").WriteOptions=): (EsriJSONGeometry)>}\n */\nconst GEOMETRY_WRITERS = {};\nGEOMETRY_WRITERS[GeometryType.POINT] = writePointGeometry;\nGEOMETRY_WRITERS[GeometryType.LINE_STRING] = writeLineStringGeometry;\nGEOMETRY_WRITERS[GeometryType.POLYGON] = writePolygonGeometry;\nGEOMETRY_WRITERS[GeometryType.MULTI_POINT] = writeMultiPointGeometry;\nGEOMETRY_WRITERS[GeometryType.MULTI_LINE_STRING] = writeMultiLineStringGeometry;\nGEOMETRY_WRITERS[GeometryType.MULTI_POLYGON] = writeMultiPolygonGeometry;\n\n\n/**\n * @typedef {Object} Options\n * @property {string} [geometryName] Geometry name to use when creating features.\n */\n\n\n/**\n * @classdesc\n * Feature format for reading and writing data in the EsriJSON format.\n *\n * @api\n */\nclass EsriJSON extends JSONFeature {\n\n  /**\n   * @param {Options=} opt_options Options.\n   */\n  constructor(opt_options) {\n\n    const options = opt_options ? opt_options : {};\n\n    super();\n\n    /**\n     * Name of the geometry attribute for features.\n     * @type {string|undefined}\n     * @private\n     */\n    this.geometryName_ = options.geometryName;\n\n  }\n\n  /**\n   * @inheritDoc\n   */\n  readFeatureFromObject(object, opt_options) {\n    const esriJSONFeature = /** @type {EsriJSONFeature} */ (object);\n    const geometry = readGeometry(esriJSONFeature.geometry, opt_options);\n    const feature = new Feature();\n    if (this.geometryName_) {\n      feature.setGeometryName(this.geometryName_);\n    }\n    feature.setGeometry(geometry);\n    if (opt_options && opt_options.idField &&\n      esriJSONFeature.attributes[opt_options.idField]) {\n      feature.setId(/** @type {number} */(esriJSONFeature.attributes[opt_options.idField]));\n    }\n    if (esriJSONFeature.attributes) {\n      feature.setProperties(esriJSONFeature.attributes, true);\n    }\n    return feature;\n  }\n\n  /**\n   * @inheritDoc\n   */\n  readFeaturesFromObject(object, opt_options) {\n    const options = opt_options ? opt_options : {};\n    if (object['features']) {\n      const esriJSONFeatureSet = /** @type {EsriJSONFeatureSet} */ (object);\n      /** @type {Array<import(\"../Feature.js\").default>} */\n      const features = [];\n      const esriJSONFeatures = esriJSONFeatureSet.features;\n      options.idField = object.objectIdFieldName;\n      for (let i = 0, ii = esriJSONFeatures.length; i < ii; ++i) {\n        features.push(this.readFeatureFromObject(esriJSONFeatures[i], options));\n      }\n      return features;\n    } else {\n      return [this.readFeatureFromObject(object, options)];\n    }\n  }\n\n  /**\n   * @inheritDoc\n   */\n  readGeometryFromObject(object, opt_options) {\n    return readGeometry(/** @type {EsriJSONGeometry} */(object), opt_options);\n  }\n\n  /**\n   * @inheritDoc\n   */\n  readProjectionFromObject(object) {\n    if (object['spatialReference'] && object['spatialReference']['wkid'] !== undefined) {\n      const spatialReference = /** @type {EsriJSONSpatialReferenceWkid} */ (object['spatialReference']);\n      const crs = spatialReference.wkid;\n      return getProjection('EPSG:' + crs);\n    } else {\n      return null;\n    }\n  }\n\n  /**\n   * Encode a geometry as a EsriJSON object.\n   *\n   * @param {import(\"../geom/Geometry.js\").default} geometry Geometry.\n   * @param {import(\"./Feature.js\").WriteOptions=} opt_options Write options.\n   * @return {EsriJSONGeometry} Object.\n   * @override\n   * @api\n   */\n  writeGeometryObject(geometry, opt_options) {\n    return writeGeometry(geometry, this.adaptOptions(opt_options));\n  }\n\n  /**\n   * Encode a feature as a esriJSON Feature object.\n   *\n   * @param {import(\"../Feature.js\").default} feature Feature.\n   * @param {import(\"./Feature.js\").WriteOptions=} opt_options Write options.\n   * @return {Object} Object.\n   * @override\n   * @api\n   */\n  writeFeatureObject(feature, opt_options) {\n    opt_options = this.adaptOptions(opt_options);\n    const object = {};\n    const geometry = feature.getGeometry();\n    if (geometry) {\n      object['geometry'] = writeGeometry(geometry, opt_options);\n      if (opt_options && opt_options.featureProjection) {\n        object['geometry']['spatialReference'] = /** @type {EsriJSONSpatialReferenceWkid} */({\n          wkid: Number(getProjection(opt_options.featureProjection).getCode().split(':').pop())\n        });\n      }\n    }\n    const properties = feature.getProperties();\n    delete properties[feature.getGeometryName()];\n    if (!isEmpty(properties)) {\n      object['attributes'] = properties;\n    } else {\n      object['attributes'] = {};\n    }\n    return object;\n  }\n\n  /**\n   * Encode an array of features as a EsriJSON object.\n   *\n   * @param {Array<import(\"../Feature.js\").default>} features Features.\n   * @param {import(\"./Feature.js\").WriteOptions=} opt_options Write options.\n   * @return {EsriJSONFeatureSet} EsriJSON Object.\n   * @override\n   * @api\n   */\n  writeFeaturesObject(features, opt_options) {\n    opt_options = this.adaptOptions(opt_options);\n    const objects = [];\n    for (let i = 0, ii = features.length; i < ii; ++i) {\n      objects.push(this.writeFeatureObject(features[i], opt_options));\n    }\n    return {\n      'features': objects\n    };\n  }\n}\n\n\n/**\n * @param {EsriJSONGeometry} object Object.\n * @param {import(\"./Feature.js\").ReadOptions=} opt_options Read options.\n * @return {import(\"../geom/Geometry.js\").default} Geometry.\n */\nfunction readGeometry(object, opt_options) {\n  if (!object) {\n    return null;\n  }\n  /** @type {import(\"../geom/GeometryType.js\").default} */\n  let type;\n  if (typeof object['x'] === 'number' && typeof object['y'] === 'number') {\n    type = GeometryType.POINT;\n  } else if (object['points']) {\n    type = GeometryType.MULTI_POINT;\n  } else if (object['paths']) {\n    const esriJSONPolyline = /** @type {EsriJSONPolyline} */ (object);\n    if (esriJSONPolyline.paths.length === 1) {\n      type = GeometryType.LINE_STRING;\n    } else {\n      type = GeometryType.MULTI_LINE_STRING;\n    }\n  } else if (object['rings']) {\n    const esriJSONPolygon = /** @type {EsriJSONPolygon} */ (object);\n    const layout = getGeometryLayout(esriJSONPolygon);\n    const rings = convertRings(esriJSONPolygon.rings, layout);\n    if (rings.length === 1) {\n      type = GeometryType.POLYGON;\n      object = Object.assign({}, object, {['rings']: rings[0]});\n    } else {\n      type = GeometryType.MULTI_POLYGON;\n      object = Object.assign({}, object, {['rings']: rings});\n    }\n  }\n  const geometryReader = GEOMETRY_READERS[type];\n  return transformGeometryWithOptions(geometryReader(object), false, opt_options);\n}\n\n\n/**\n * Determines inner and outer rings.\n * Checks if any polygons in this array contain any other polygons in this\n * array. It is used for checking for holes.\n * Logic inspired by: https://github.com/Esri/terraformer-arcgis-parser\n * @param {Array<!Array<!Array<number>>>} rings Rings.\n * @param {import(\"../geom/GeometryLayout.js\").default} layout Geometry layout.\n * @return {Array<!Array<!Array<!Array<number>>>>} Transformed rings.\n */\nfunction convertRings(rings, layout) {\n  const flatRing = [];\n  const outerRings = [];\n  const holes = [];\n  let i, ii;\n  for (i = 0, ii = rings.length; i < ii; ++i) {\n    flatRing.length = 0;\n    deflateCoordinates(flatRing, 0, rings[i], layout.length);\n    // is this ring an outer ring? is it clockwise?\n    const clockwise = linearRingIsClockwise(flatRing, 0,\n      flatRing.length, layout.length);\n    if (clockwise) {\n      outerRings.push([rings[i]]);\n    } else {\n      holes.push(rings[i]);\n    }\n  }\n  while (holes.length) {\n    const hole = holes.shift();\n    let matched = false;\n    // loop over all outer rings and see if they contain our hole.\n    for (i = outerRings.length - 1; i >= 0; i--) {\n      const outerRing = outerRings[i][0];\n      const containsHole = containsExtent(\n        new LinearRing(outerRing).getExtent(),\n        new LinearRing(hole).getExtent()\n      );\n      if (containsHole) {\n        // the hole is contained push it into our polygon\n        outerRings[i].push(hole);\n        matched = true;\n        break;\n      }\n    }\n    if (!matched) {\n      // no outer rings contain this hole turn it into and outer\n      // ring (reverse it)\n      outerRings.push([hole.reverse()]);\n    }\n  }\n  return outerRings;\n}\n\n\n/**\n * @param {EsriJSONPoint} object Object.\n * @return {import(\"../geom/Geometry.js\").default} Point.\n */\nfunction readPointGeometry(object) {\n  let point;\n  if (object.m !== undefined && object.z !== undefined) {\n    point = new Point([object.x, object.y, object.z, object.m],\n      GeometryLayout.XYZM);\n  } else if (object.z !== undefined) {\n    point = new Point([object.x, object.y, object.z],\n      GeometryLayout.XYZ);\n  } else if (object.m !== undefined) {\n    point = new Point([object.x, object.y, object.m],\n      GeometryLayout.XYM);\n  } else {\n    point = new Point([object.x, object.y]);\n  }\n  return point;\n}\n\n\n/**\n * @param {EsriJSONPolyline} object Object.\n * @return {import(\"../geom/Geometry.js\").default} LineString.\n */\nfunction readLineStringGeometry(object) {\n  const layout = getGeometryLayout(object);\n  return new LineString(object.paths[0], layout);\n}\n\n\n/**\n * @param {EsriJSONPolyline} object Object.\n * @return {import(\"../geom/Geometry.js\").default} MultiLineString.\n */\nfunction readMultiLineStringGeometry(object) {\n  const layout = getGeometryLayout(object);\n  return new MultiLineString(object.paths, layout);\n}\n\n\n/**\n * @param {EsriJSONHasZM} object Object.\n * @return {import(\"../geom/GeometryLayout.js\").default} The geometry layout to use.\n */\nfunction getGeometryLayout(object) {\n  let layout = GeometryLayout.XY;\n  if (object.hasZ === true && object.hasM === true) {\n    layout = GeometryLayout.XYZM;\n  } else if (object.hasZ === true) {\n    layout = GeometryLayout.XYZ;\n  } else if (object.hasM === true) {\n    layout = GeometryLayout.XYM;\n  }\n  return layout;\n}\n\n\n/**\n * @param {EsriJSONMultipoint} object Object.\n * @return {import(\"../geom/Geometry.js\").default} MultiPoint.\n */\nfunction readMultiPointGeometry(object) {\n  const layout = getGeometryLayout(object);\n  return new MultiPoint(object.points, layout);\n}\n\n\n/**\n * @param {EsriJSONMultiPolygon} object Object.\n * @return {import(\"../geom/Geometry.js\").default} MultiPolygon.\n */\nfunction readMultiPolygonGeometry(object) {\n  const layout = getGeometryLayout(object);\n  return new MultiPolygon(object.rings, layout);\n}\n\n\n/**\n * @param {EsriJSONPolygon} object Object.\n * @return {import(\"../geom/Geometry.js\").default} Polygon.\n */\nfunction readPolygonGeometry(object) {\n  const layout = getGeometryLayout(object);\n  return new Polygon(object.rings, layout);\n}\n\n\n/**\n * @param {import(\"../geom/Point.js\").default} geometry Geometry.\n * @param {import(\"./Feature.js\").WriteOptions=} opt_options Write options.\n * @return {EsriJSONPoint} EsriJSON geometry.\n */\nfunction writePointGeometry(geometry, opt_options) {\n  const coordinates = geometry.getCoordinates();\n  /** @type {EsriJSONPoint} */\n  let esriJSON;\n  const layout = geometry.getLayout();\n  if (layout === GeometryLayout.XYZ) {\n    esriJSON = {\n      x: coordinates[0],\n      y: coordinates[1],\n      z: coordinates[2]\n    };\n  } else if (layout === GeometryLayout.XYM) {\n    esriJSON = {\n      x: coordinates[0],\n      y: coordinates[1],\n      m: coordinates[2]\n    };\n  } else if (layout === GeometryLayout.XYZM) {\n    esriJSON = {\n      x: coordinates[0],\n      y: coordinates[1],\n      z: coordinates[2],\n      m: coordinates[3]\n    };\n  } else if (layout === GeometryLayout.XY) {\n    esriJSON = {\n      x: coordinates[0],\n      y: coordinates[1]\n    };\n  } else {\n    assert(false, 34); // Invalid geometry layout\n  }\n  return esriJSON;\n}\n\n\n/**\n * @param {import(\"../geom/SimpleGeometry.js\").default} geometry Geometry.\n * @return {Object} Object with boolean hasZ and hasM keys.\n */\nfunction getHasZM(geometry) {\n  const layout = geometry.getLayout();\n  return {\n    hasZ: (layout === GeometryLayout.XYZ ||\n      layout === GeometryLayout.XYZM),\n    hasM: (layout === GeometryLayout.XYM ||\n      layout === GeometryLayout.XYZM)\n  };\n}\n\n\n/**\n * @param {import(\"../geom/LineString.js\").default} lineString Geometry.\n * @param {import(\"./Feature.js\").WriteOptions=} opt_options Write options.\n * @return {EsriJSONPolyline} EsriJSON geometry.\n */\nfunction writeLineStringGeometry(lineString, opt_options) {\n  const hasZM = getHasZM(lineString);\n  return {\n    hasZ: hasZM.hasZ,\n    hasM: hasZM.hasM,\n    paths: [\n      /** @type {Array<EsriJSONPosition>} */ (lineString.getCoordinates())\n    ]\n  };\n}\n\n\n/**\n * @param {import(\"../geom/Polygon.js\").default} polygon Geometry.\n * @param {import(\"./Feature.js\").WriteOptions=} opt_options Write options.\n * @return {EsriJSONPolygon} EsriJSON geometry.\n */\nfunction writePolygonGeometry(polygon, opt_options) {\n  // Esri geometries use the left-hand rule\n  const hasZM = getHasZM(polygon);\n  return {\n    hasZ: hasZM.hasZ,\n    hasM: hasZM.hasM,\n    rings: /** @type {Array<Array<EsriJSONPosition>>} */ (polygon.getCoordinates(false))\n  };\n}\n\n\n/**\n * @param {import(\"../geom/MultiLineString.js\").default} multiLineString Geometry.\n * @param {import(\"./Feature.js\").WriteOptions=} opt_options Write options.\n * @return {EsriJSONPolyline} EsriJSON geometry.\n */\nfunction writeMultiLineStringGeometry(multiLineString, opt_options) {\n  const hasZM = getHasZM(multiLineString);\n  return {\n    hasZ: hasZM.hasZ,\n    hasM: hasZM.hasM,\n    paths: /** @type {Array<Array<EsriJSONPosition>>} */ (multiLineString.getCoordinates())\n  };\n}\n\n\n/**\n * @param {import(\"../geom/MultiPoint.js\").default} multiPoint Geometry.\n * @param {import(\"./Feature.js\").WriteOptions=} opt_options Write options.\n * @return {EsriJSONMultipoint} EsriJSON geometry.\n */\nfunction writeMultiPointGeometry(multiPoint, opt_options) {\n  const hasZM = getHasZM(multiPoint);\n  return {\n    hasZ: hasZM.hasZ,\n    hasM: hasZM.hasM,\n    points: /** @type {Array<EsriJSONPosition>} */ (multiPoint.getCoordinates())\n  };\n}\n\n\n/**\n * @param {import(\"../geom/MultiPolygon.js\").default} geometry Geometry.\n * @param {import(\"./Feature.js\").WriteOptions=} opt_options Write options.\n * @return {EsriJSONPolygon} EsriJSON geometry.\n */\nfunction writeMultiPolygonGeometry(geometry, opt_options) {\n  const hasZM = getHasZM(geometry);\n  const coordinates = geometry.getCoordinates(false);\n  const output = [];\n  for (let i = 0; i < coordinates.length; i++) {\n    for (let x = coordinates[i].length - 1; x >= 0; x--) {\n      output.push(coordinates[i][x]);\n    }\n  }\n  return {\n    hasZ: hasZM.hasZ,\n    hasM: hasZM.hasM,\n    rings: /** @type {Array<Array<EsriJSONPosition>>} */ (output)\n  };\n}\n\n\n/**\n * @param {import(\"../geom/Geometry.js\").default} geometry Geometry.\n * @param {import(\"./Feature.js\").WriteOptions=} opt_options Write options.\n * @return {EsriJSONGeometry} EsriJSON geometry.\n */\nfunction writeGeometry(geometry, opt_options) {\n  const geometryWriter = GEOMETRY_WRITERS[geometry.getType()];\n  return geometryWriter(transformGeometryWithOptions(geometry, true, opt_options), opt_options);\n}\n\n\nexport default EsriJSON;\n","/**\n * @module ol/render/canvas/ImageBuilder\n */\nimport CanvasInstruction from './Instruction.js';\nimport CanvasBuilder from './Builder.js';\n\nclass CanvasImageBuilder extends CanvasBuilder {\n  /**\n   * @param {number} tolerance Tolerance.\n   * @param {import(\"../../extent.js\").Extent} maxExtent Maximum extent.\n   * @param {number} resolution Resolution.\n   * @param {number} pixelRatio Pixel ratio.\n   */\n  constructor(tolerance, maxExtent, resolution, pixelRatio) {\n    super(tolerance, maxExtent, resolution, pixelRatio);\n\n    /**\n     * @private\n     * @type {import(\"../canvas.js\").DeclutterGroups}\n     */\n    this.declutterGroups_ = null;\n\n    /**\n     * @private\n     * @type {HTMLCanvasElement|HTMLVideoElement|HTMLImageElement}\n     */\n    this.hitDetectionImage_ = null;\n\n    /**\n     * @private\n     * @type {HTMLCanvasElement|HTMLVideoElement|HTMLImageElement}\n     */\n    this.image_ = null;\n\n    /**\n     * @private\n     * @type {number|undefined}\n     */\n    this.anchorX_ = undefined;\n\n    /**\n     * @private\n     * @type {number|undefined}\n     */\n    this.anchorY_ = undefined;\n\n    /**\n     * @private\n     * @type {number|undefined}\n     */\n    this.height_ = undefined;\n\n    /**\n     * @private\n     * @type {number|undefined}\n     */\n    this.opacity_ = undefined;\n\n    /**\n     * @private\n     * @type {number|undefined}\n     */\n    this.originX_ = undefined;\n\n    /**\n     * @private\n     * @type {number|undefined}\n     */\n    this.originY_ = undefined;\n\n    /**\n     * @private\n     * @type {boolean|undefined}\n     */\n    this.rotateWithView_ = undefined;\n\n    /**\n     * @private\n     * @type {number|undefined}\n     */\n    this.rotation_ = undefined;\n\n    /**\n     * @private\n     * @type {number|undefined}\n     */\n    this.scale_ = undefined;\n\n    /**\n     * @private\n     * @type {number|undefined}\n     */\n    this.width_ = undefined;\n\n  }\n\n  /**\n   * @param {Array<number>} flatCoordinates Flat coordinates.\n   * @param {number} offset Offset.\n   * @param {number} end End.\n   * @param {number} stride Stride.\n   * @private\n   * @return {number} My end.\n   */\n  drawCoordinates_(flatCoordinates, offset, end, stride) {\n    return this.appendFlatCoordinates(flatCoordinates, offset, end, stride, false, false);\n  }\n\n  /**\n   * @inheritDoc\n   */\n  drawPoint(pointGeometry, feature) {\n    if (!this.image_) {\n      return;\n    }\n    this.beginGeometry(pointGeometry, feature);\n    const flatCoordinates = pointGeometry.getFlatCoordinates();\n    const stride = pointGeometry.getStride();\n    const myBegin = this.coordinates.length;\n    const myEnd = this.drawCoordinates_(flatCoordinates, 0, flatCoordinates.length, stride);\n    this.instructions.push([\n      CanvasInstruction.DRAW_IMAGE, myBegin, myEnd, this.image_,\n      // Remaining arguments to DRAW_IMAGE are in alphabetical order\n      this.anchorX_, this.anchorY_, this.declutterGroups_, this.height_, this.opacity_,\n      this.originX_, this.originY_, this.rotateWithView_, this.rotation_,\n      this.scale_ * this.pixelRatio, this.width_\n    ]);\n    this.hitDetectionInstructions.push([\n      CanvasInstruction.DRAW_IMAGE, myBegin, myEnd, this.hitDetectionImage_,\n      // Remaining arguments to DRAW_IMAGE are in alphabetical order\n      this.anchorX_, this.anchorY_, this.declutterGroups_, this.height_, this.opacity_,\n      this.originX_, this.originY_, this.rotateWithView_, this.rotation_,\n      this.scale_, this.width_\n    ]);\n    this.endGeometry(feature);\n  }\n\n  /**\n   * @inheritDoc\n   */\n  drawMultiPoint(multiPointGeometry, feature) {\n    if (!this.image_) {\n      return;\n    }\n    this.beginGeometry(multiPointGeometry, feature);\n    const flatCoordinates = multiPointGeometry.getFlatCoordinates();\n    const stride = multiPointGeometry.getStride();\n    const myBegin = this.coordinates.length;\n    const myEnd = this.drawCoordinates_(\n      flatCoordinates, 0, flatCoordinates.length, stride);\n    this.instructions.push([\n      CanvasInstruction.DRAW_IMAGE, myBegin, myEnd, this.image_,\n      // Remaining arguments to DRAW_IMAGE are in alphabetical order\n      this.anchorX_, this.anchorY_, this.declutterGroups_, this.height_, this.opacity_,\n      this.originX_, this.originY_, this.rotateWithView_, this.rotation_,\n      this.scale_ * this.pixelRatio, this.width_\n    ]);\n    this.hitDetectionInstructions.push([\n      CanvasInstruction.DRAW_IMAGE, myBegin, myEnd, this.hitDetectionImage_,\n      // Remaining arguments to DRAW_IMAGE are in alphabetical order\n      this.anchorX_, this.anchorY_, this.declutterGroups_, this.height_, this.opacity_,\n      this.originX_, this.originY_, this.rotateWithView_, this.rotation_,\n      this.scale_, this.width_\n    ]);\n    this.endGeometry(feature);\n  }\n\n  /**\n   * @inheritDoc\n   */\n  finish() {\n    this.reverseHitDetectionInstructions();\n    // FIXME this doesn't really protect us against further calls to draw*Geometry\n    this.anchorX_ = undefined;\n    this.anchorY_ = undefined;\n    this.hitDetectionImage_ = null;\n    this.image_ = null;\n    this.height_ = undefined;\n    this.scale_ = undefined;\n    this.opacity_ = undefined;\n    this.originX_ = undefined;\n    this.originY_ = undefined;\n    this.rotateWithView_ = undefined;\n    this.rotation_ = undefined;\n    this.width_ = undefined;\n    return super.finish();\n  }\n\n  /**\n   * @inheritDoc\n   */\n  setImageStyle(imageStyle, declutterGroups) {\n    const anchor = imageStyle.getAnchor();\n    const size = imageStyle.getSize();\n    const hitDetectionImage = imageStyle.getHitDetectionImage(1);\n    const image = imageStyle.getImage(1);\n    const origin = imageStyle.getOrigin();\n    this.anchorX_ = anchor[0];\n    this.anchorY_ = anchor[1];\n    this.declutterGroups_ = /** @type {import(\"../canvas.js\").DeclutterGroups} */ (declutterGroups);\n    this.hitDetectionImage_ = hitDetectionImage;\n    this.image_ = image;\n    this.height_ = size[1];\n    this.opacity_ = imageStyle.getOpacity();\n    this.originX_ = origin[0];\n    this.originY_ = origin[1];\n    this.rotateWithView_ = imageStyle.getRotateWithView();\n    this.rotation_ = imageStyle.getRotation();\n    this.scale_ = imageStyle.getScale();\n    this.width_ = size[0];\n  }\n}\n\n\nexport default CanvasImageBuilder;\n","/**\n * @module ol/render/canvas/LineStringBuilder\n */\nimport CanvasInstruction, {strokeInstruction, beginPathInstruction} from './Instruction.js';\nimport CanvasBuilder from './Builder.js';\n\nclass CanvasLineStringBuilder extends CanvasBuilder {\n  /**\n   * @param {number} tolerance Tolerance.\n   * @param {import(\"../../extent.js\").Extent} maxExtent Maximum extent.\n   * @param {number} resolution Resolution.\n   * @param {number} pixelRatio Pixel ratio.\n   */\n  constructor(tolerance, maxExtent, resolution, pixelRatio) {\n    super(tolerance, maxExtent, resolution, pixelRatio);\n  }\n\n  /**\n   * @param {Array<number>} flatCoordinates Flat coordinates.\n   * @param {number} offset Offset.\n   * @param {number} end End.\n   * @param {number} stride Stride.\n   * @private\n   * @return {number} end.\n   */\n  drawFlatCoordinates_(flatCoordinates, offset, end, stride) {\n    const myBegin = this.coordinates.length;\n    const myEnd = this.appendFlatCoordinates(\n      flatCoordinates, offset, end, stride, false, false);\n    const moveToLineToInstruction = [CanvasInstruction.MOVE_TO_LINE_TO, myBegin, myEnd];\n    this.instructions.push(moveToLineToInstruction);\n    this.hitDetectionInstructions.push(moveToLineToInstruction);\n    return end;\n  }\n\n  /**\n   * @inheritDoc\n   */\n  drawLineString(lineStringGeometry, feature) {\n    const state = this.state;\n    const strokeStyle = state.strokeStyle;\n    const lineWidth = state.lineWidth;\n    if (strokeStyle === undefined || lineWidth === undefined) {\n      return;\n    }\n    this.updateStrokeStyle(state, this.applyStroke);\n    this.beginGeometry(lineStringGeometry, feature);\n    this.hitDetectionInstructions.push([\n      CanvasInstruction.SET_STROKE_STYLE,\n      state.strokeStyle, state.lineWidth, state.lineCap, state.lineJoin,\n      state.miterLimit, state.lineDash, state.lineDashOffset\n    ], beginPathInstruction);\n    const flatCoordinates = lineStringGeometry.getFlatCoordinates();\n    const stride = lineStringGeometry.getStride();\n    this.drawFlatCoordinates_(flatCoordinates, 0, flatCoordinates.length, stride);\n    this.hitDetectionInstructions.push(strokeInstruction);\n    this.endGeometry(feature);\n  }\n\n  /**\n   * @inheritDoc\n   */\n  drawMultiLineString(multiLineStringGeometry, feature) {\n    const state = this.state;\n    const strokeStyle = state.strokeStyle;\n    const lineWidth = state.lineWidth;\n    if (strokeStyle === undefined || lineWidth === undefined) {\n      return;\n    }\n    this.updateStrokeStyle(state, this.applyStroke);\n    this.beginGeometry(multiLineStringGeometry, feature);\n    this.hitDetectionInstructions.push([\n      CanvasInstruction.SET_STROKE_STYLE,\n      state.strokeStyle, state.lineWidth, state.lineCap, state.lineJoin,\n      state.miterLimit, state.lineDash, state.lineDashOffset\n    ], beginPathInstruction);\n    const ends = multiLineStringGeometry.getEnds();\n    const flatCoordinates = multiLineStringGeometry.getFlatCoordinates();\n    const stride = multiLineStringGeometry.getStride();\n    let offset = 0;\n    for (let i = 0, ii = ends.length; i < ii; ++i) {\n      offset = this.drawFlatCoordinates_(flatCoordinates, offset, ends[i], stride);\n    }\n    this.hitDetectionInstructions.push(strokeInstruction);\n    this.endGeometry(feature);\n  }\n\n  /**\n   * @inheritDoc\n   */\n  finish() {\n    const state = this.state;\n    if (state.lastStroke != undefined && state.lastStroke != this.coordinates.length) {\n      this.instructions.push(strokeInstruction);\n    }\n    this.reverseHitDetectionInstructions();\n    this.state = null;\n    return super.finish();\n  }\n\n  /**\n   * @inheritDoc.\n   */\n  applyStroke(state) {\n    if (state.lastStroke != undefined && state.lastStroke != this.coordinates.length) {\n      this.instructions.push(strokeInstruction);\n      state.lastStroke = this.coordinates.length;\n    }\n    state.lastStroke = 0;\n    super.applyStroke(state);\n    this.instructions.push(beginPathInstruction);\n  }\n}\n\n\nexport default CanvasLineStringBuilder;\n","/**\n * @module ol/render/canvas/PolygonBuilder\n */\nimport {snap} from '../../geom/flat/simplify.js';\nimport {defaultFillStyle} from '../canvas.js';\nimport CanvasInstruction, {\n  fillInstruction, strokeInstruction, beginPathInstruction, closePathInstruction\n} from './Instruction.js';\nimport CanvasBuilder from './Builder.js';\n\n\nclass CanvasPolygonBuilder extends CanvasBuilder {\n  /**\n   * @param {number} tolerance Tolerance.\n   * @param {import(\"../../extent.js\").Extent} maxExtent Maximum extent.\n   * @param {number} resolution Resolution.\n   * @param {number} pixelRatio Pixel ratio.\n   */\n  constructor(tolerance, maxExtent, resolution, pixelRatio) {\n    super(tolerance, maxExtent, resolution, pixelRatio);\n  }\n\n  /**\n   * @param {Array<number>} flatCoordinates Flat coordinates.\n   * @param {number} offset Offset.\n   * @param {Array<number>} ends Ends.\n   * @param {number} stride Stride.\n   * @private\n   * @return {number} End.\n   */\n  drawFlatCoordinatess_(flatCoordinates, offset, ends, stride) {\n    const state = this.state;\n    const fill = state.fillStyle !== undefined;\n    const stroke = state.strokeStyle !== undefined;\n    const numEnds = ends.length;\n    this.instructions.push(beginPathInstruction);\n    this.hitDetectionInstructions.push(beginPathInstruction);\n    for (let i = 0; i < numEnds; ++i) {\n      const end = ends[i];\n      const myBegin = this.coordinates.length;\n      const myEnd = this.appendFlatCoordinates(flatCoordinates, offset, end, stride, true, !stroke);\n      const moveToLineToInstruction = [CanvasInstruction.MOVE_TO_LINE_TO, myBegin, myEnd];\n      this.instructions.push(moveToLineToInstruction);\n      this.hitDetectionInstructions.push(moveToLineToInstruction);\n      if (stroke) {\n        // Performance optimization: only call closePath() when we have a stroke.\n        // Otherwise the ring is closed already (see appendFlatCoordinates above).\n        this.instructions.push(closePathInstruction);\n        this.hitDetectionInstructions.push(closePathInstruction);\n      }\n      offset = end;\n    }\n    if (fill) {\n      this.instructions.push(fillInstruction);\n      this.hitDetectionInstructions.push(fillInstruction);\n    }\n    if (stroke) {\n      this.instructions.push(strokeInstruction);\n      this.hitDetectionInstructions.push(strokeInstruction);\n    }\n    return offset;\n  }\n\n  /**\n   * @inheritDoc\n   */\n  drawCircle(circleGeometry, feature) {\n    const state = this.state;\n    const fillStyle = state.fillStyle;\n    const strokeStyle = state.strokeStyle;\n    if (fillStyle === undefined && strokeStyle === undefined) {\n      return;\n    }\n    this.setFillStrokeStyles_();\n    this.beginGeometry(circleGeometry, feature);\n    if (state.fillStyle !== undefined) {\n      this.hitDetectionInstructions.push([\n        CanvasInstruction.SET_FILL_STYLE,\n        defaultFillStyle\n      ]);\n    }\n    if (state.strokeStyle !== undefined) {\n      this.hitDetectionInstructions.push([\n        CanvasInstruction.SET_STROKE_STYLE,\n        state.strokeStyle, state.lineWidth, state.lineCap, state.lineJoin,\n        state.miterLimit, state.lineDash, state.lineDashOffset\n      ]);\n    }\n    const flatCoordinates = circleGeometry.getFlatCoordinates();\n    const stride = circleGeometry.getStride();\n    const myBegin = this.coordinates.length;\n    this.appendFlatCoordinates(\n      flatCoordinates, 0, flatCoordinates.length, stride, false, false);\n    const circleInstruction = [CanvasInstruction.CIRCLE, myBegin];\n    this.instructions.push(beginPathInstruction, circleInstruction);\n    this.hitDetectionInstructions.push(beginPathInstruction, circleInstruction);\n    if (state.fillStyle !== undefined) {\n      this.instructions.push(fillInstruction);\n      this.hitDetectionInstructions.push(fillInstruction);\n    }\n    if (state.strokeStyle !== undefined) {\n      this.instructions.push(strokeInstruction);\n      this.hitDetectionInstructions.push(strokeInstruction);\n    }\n    this.endGeometry(feature);\n  }\n\n  /**\n   * @inheritDoc\n   */\n  drawPolygon(polygonGeometry, feature) {\n    const state = this.state;\n    const fillStyle = state.fillStyle;\n    const strokeStyle = state.strokeStyle;\n    if (fillStyle === undefined && strokeStyle === undefined) {\n      return;\n    }\n    this.setFillStrokeStyles_();\n    this.beginGeometry(polygonGeometry, feature);\n    if (state.fillStyle !== undefined) {\n      this.hitDetectionInstructions.push([\n        CanvasInstruction.SET_FILL_STYLE,\n        defaultFillStyle\n      ]);\n    }\n    if (state.strokeStyle !== undefined) {\n      this.hitDetectionInstructions.push([\n        CanvasInstruction.SET_STROKE_STYLE,\n        state.strokeStyle, state.lineWidth, state.lineCap, state.lineJoin,\n        state.miterLimit, state.lineDash, state.lineDashOffset\n      ]);\n    }\n    const ends = polygonGeometry.getEnds();\n    const flatCoordinates = polygonGeometry.getOrientedFlatCoordinates();\n    const stride = polygonGeometry.getStride();\n    this.drawFlatCoordinatess_(flatCoordinates, 0, ends, stride);\n    this.endGeometry(feature);\n  }\n\n  /**\n   * @inheritDoc\n   */\n  drawMultiPolygon(multiPolygonGeometry, feature) {\n    const state = this.state;\n    const fillStyle = state.fillStyle;\n    const strokeStyle = state.strokeStyle;\n    if (fillStyle === undefined && strokeStyle === undefined) {\n      return;\n    }\n    this.setFillStrokeStyles_();\n    this.beginGeometry(multiPolygonGeometry, feature);\n    if (state.fillStyle !== undefined) {\n      this.hitDetectionInstructions.push([\n        CanvasInstruction.SET_FILL_STYLE,\n        defaultFillStyle\n      ]);\n    }\n    if (state.strokeStyle !== undefined) {\n      this.hitDetectionInstructions.push([\n        CanvasInstruction.SET_STROKE_STYLE,\n        state.strokeStyle, state.lineWidth, state.lineCap, state.lineJoin,\n        state.miterLimit, state.lineDash, state.lineDashOffset\n      ]);\n    }\n    const endss = multiPolygonGeometry.getEndss();\n    const flatCoordinates = multiPolygonGeometry.getOrientedFlatCoordinates();\n    const stride = multiPolygonGeometry.getStride();\n    let offset = 0;\n    for (let i = 0, ii = endss.length; i < ii; ++i) {\n      offset = this.drawFlatCoordinatess_(flatCoordinates, offset, endss[i], stride);\n    }\n    this.endGeometry(feature);\n  }\n\n  /**\n   * @inheritDoc\n   */\n  finish() {\n    this.reverseHitDetectionInstructions();\n    this.state = null;\n    // We want to preserve topology when drawing polygons.  Polygons are\n    // simplified using quantization and point elimination. However, we might\n    // have received a mix of quantized and non-quantized geometries, so ensure\n    // that all are quantized by quantizing all coordinates in the batch.\n    const tolerance = this.tolerance;\n    if (tolerance !== 0) {\n      const coordinates = this.coordinates;\n      for (let i = 0, ii = coordinates.length; i < ii; ++i) {\n        coordinates[i] = snap(coordinates[i], tolerance);\n      }\n    }\n    return super.finish();\n  }\n\n  /**\n   * @private\n   */\n  setFillStrokeStyles_() {\n    const state = this.state;\n    const fillStyle = state.fillStyle;\n    if (fillStyle !== undefined) {\n      this.updateFillStyle(state, this.createFill);\n    }\n    if (state.strokeStyle !== undefined) {\n      this.updateStrokeStyle(state, this.applyStroke);\n    }\n  }\n}\n\n\nexport default CanvasPolygonBuilder;\n","/**\n * @module ol/render/canvas/BuilderGroup\n */\n\nimport {createEmpty} from '../../extent.js';\nimport Builder from './Builder.js';\nimport ImageBuilder from './ImageBuilder.js';\nimport LineStringBuilder from './LineStringBuilder.js';\nimport PolygonBuilder from './PolygonBuilder.js';\nimport TextBuilder from './TextBuilder.js';\n\n\n/**\n * @type {Object<import(\"./BuilderType\").default, typeof Builder>}\n */\nconst BATCH_CONSTRUCTORS = {\n  'Circle': PolygonBuilder,\n  'Default': Builder,\n  'Image': ImageBuilder,\n  'LineString': LineStringBuilder,\n  'Polygon': PolygonBuilder,\n  'Text': TextBuilder\n};\n\n\nclass BuilderGroup {\n  /**\n   * @param {number} tolerance Tolerance.\n   * @param {import(\"../../extent.js\").Extent} maxExtent Max extent.\n   * @param {number} resolution Resolution.\n   * @param {number} pixelRatio Pixel ratio.\n   * @param {boolean} declutter Decluttering enabled.\n   */\n  constructor(tolerance, maxExtent, resolution, pixelRatio, declutter) {\n\n    /**\n     * @type {boolean}\n     * @private\n     */\n    this.declutter_ = declutter;\n\n    /**\n     * @type {import(\"../canvas.js\").DeclutterGroups}\n     * @private\n     */\n    this.declutterGroups_ = null;\n\n    /**\n     * @private\n     * @type {number}\n     */\n    this.tolerance_ = tolerance;\n\n    /**\n     * @private\n     * @type {import(\"../../extent.js\").Extent}\n     */\n    this.maxExtent_ = maxExtent;\n\n    /**\n     * @private\n     * @type {number}\n     */\n    this.pixelRatio_ = pixelRatio;\n\n    /**\n     * @private\n     * @type {number}\n     */\n    this.resolution_ = resolution;\n\n    /**\n     * @private\n     * @type {!Object<string, !Object<import(\"./BuilderType\").default, Builder>>}\n     */\n    this.buildersByZIndex_ = {};\n  }\n\n  /**\n   * @param {boolean} group Group with previous builder.\n   * @return {import(\"../canvas\").DeclutterGroups} The resulting instruction groups.\n   */\n  addDeclutter(group) {\n    let declutter = null;\n    if (this.declutter_) {\n      if (group) {\n        declutter = this.declutterGroups_;\n        /** @type {number} */ (declutter[0][4])++;\n      } else {\n        declutter = this.declutterGroups_ = [createEmpty()];\n        declutter[0].push(1);\n      }\n    }\n    return declutter;\n  }\n\n  /**\n   * @return {!Object<string, !Object<import(\"./BuilderType\").default, import(\"./Builder.js\").SerializableInstructions>>} The serializable instructions\n   */\n  finish() {\n    const builderInstructions = {};\n    for (const zKey in this.buildersByZIndex_) {\n      builderInstructions[zKey] = builderInstructions[zKey] || {};\n      const builders = this.buildersByZIndex_[zKey];\n      for (const builderKey in builders) {\n        const builderInstruction = builders[builderKey].finish();\n        builderInstructions[zKey][builderKey] = builderInstruction;\n      }\n    }\n    return builderInstructions;\n  }\n\n  /**\n   * @param {number|undefined} zIndex Z index.\n   * @param {import(\"./BuilderType.js\").default} builderType Replay type.\n   * @return {import(\"../VectorContext.js\").default} Replay.\n   */\n  getBuilder(zIndex, builderType) {\n    const zIndexKey = zIndex !== undefined ? zIndex.toString() : '0';\n    let replays = this.buildersByZIndex_[zIndexKey];\n    if (replays === undefined) {\n      replays = {};\n      this.buildersByZIndex_[zIndexKey] = replays;\n    }\n    let replay = replays[builderType];\n    if (replay === undefined) {\n      const Constructor = BATCH_CONSTRUCTORS[builderType];\n      replay = new Constructor(this.tolerance_, this.maxExtent_,\n        this.resolution_, this.pixelRatio_);\n      replays[builderType] = replay;\n    }\n    return replay;\n  }\n}\n\nexport default BuilderGroup;\n","/**\n * @module ol/geom/flat/geodesic\n */\nimport {squaredSegmentDistance, toRadians, toDegrees} from '../../math.js';\nimport {get as getProjection, getTransform} from '../../proj.js';\n\n\n/**\n * @param {function(number): import(\"../../coordinate.js\").Coordinate} interpolate Interpolate function.\n * @param {import(\"../../proj.js\").TransformFunction} transform Transform from longitude/latitude to\n *     projected coordinates.\n * @param {number} squaredTolerance Squared tolerance.\n * @return {Array<number>} Flat coordinates.\n */\nfunction line(interpolate, transform, squaredTolerance) {\n  // FIXME reduce garbage generation\n  // FIXME optimize stack operations\n\n  /** @type {Array<number>} */\n  const flatCoordinates = [];\n\n  let geoA = interpolate(0);\n  let geoB = interpolate(1);\n\n  let a = transform(geoA);\n  let b = transform(geoB);\n\n  /** @type {Array<import(\"../../coordinate.js\").Coordinate>} */\n  const geoStack = [geoB, geoA];\n  /** @type {Array<import(\"../../coordinate.js\").Coordinate>} */\n  const stack = [b, a];\n  /** @type {Array<number>} */\n  const fractionStack = [1, 0];\n\n  /** @type {!Object<string, boolean>} */\n  const fractions = {};\n\n  let maxIterations = 1e5;\n  let geoM, m, fracA, fracB, fracM, key;\n\n  while (--maxIterations > 0 && fractionStack.length > 0) {\n    // Pop the a coordinate off the stack\n    fracA = fractionStack.pop();\n    geoA = geoStack.pop();\n    a = stack.pop();\n    // Add the a coordinate if it has not been added yet\n    key = fracA.toString();\n    if (!(key in fractions)) {\n      flatCoordinates.push(a[0], a[1]);\n      fractions[key] = true;\n    }\n    // Pop the b coordinate off the stack\n    fracB = fractionStack.pop();\n    geoB = geoStack.pop();\n    b = stack.pop();\n    // Find the m point between the a and b coordinates\n    fracM = (fracA + fracB) / 2;\n    geoM = interpolate(fracM);\n    m = transform(geoM);\n    if (squaredSegmentDistance(m[0], m[1], a[0], a[1],\n      b[0], b[1]) < squaredTolerance) {\n      // If the m point is sufficiently close to the straight line, then we\n      // discard it.  Just use the b coordinate and move on to the next line\n      // segment.\n      flatCoordinates.push(b[0], b[1]);\n      key = fracB.toString();\n      fractions[key] = true;\n    } else {\n      // Otherwise, we need to subdivide the current line segment.  Split it\n      // into two and push the two line segments onto the stack.\n      fractionStack.push(fracB, fracM, fracM, fracA);\n      stack.push(b, m, m, a);\n      geoStack.push(geoB, geoM, geoM, geoA);\n    }\n  }\n\n  return flatCoordinates;\n}\n\n\n/**\n * Generate a great-circle arcs between two lat/lon points.\n * @param {number} lon1 Longitude 1 in degrees.\n * @param {number} lat1 Latitude 1 in degrees.\n * @param {number} lon2 Longitude 2 in degrees.\n * @param {number} lat2 Latitude 2 in degrees.\n * @param {import(\"../../proj/Projection.js\").default} projection Projection.\n * @param {number} squaredTolerance Squared tolerance.\n * @return {Array<number>} Flat coordinates.\n */\nexport function greatCircleArc(lon1, lat1, lon2, lat2, projection, squaredTolerance) {\n  const geoProjection = getProjection('EPSG:4326');\n\n  const cosLat1 = Math.cos(toRadians(lat1));\n  const sinLat1 = Math.sin(toRadians(lat1));\n  const cosLat2 = Math.cos(toRadians(lat2));\n  const sinLat2 = Math.sin(toRadians(lat2));\n  const cosDeltaLon = Math.cos(toRadians(lon2 - lon1));\n  const sinDeltaLon = Math.sin(toRadians(lon2 - lon1));\n  const d = sinLat1 * sinLat2 + cosLat1 * cosLat2 * cosDeltaLon;\n\n  return line(\n    /**\n     * @param {number} frac Fraction.\n     * @return {import(\"../../coordinate.js\").Coordinate} Coordinate.\n     */\n    function(frac) {\n      if (1 <= d) {\n        return [lon2, lat2];\n      }\n      const D = frac * Math.acos(d);\n      const cosD = Math.cos(D);\n      const sinD = Math.sin(D);\n      const y = sinDeltaLon * cosLat2;\n      const x = cosLat1 * sinLat2 - sinLat1 * cosLat2 * cosDeltaLon;\n      const theta = Math.atan2(y, x);\n      const lat = Math.asin(sinLat1 * cosD + cosLat1 * sinD * Math.cos(theta));\n      const lon = toRadians(lon1) +\n            Math.atan2(Math.sin(theta) * sinD * cosLat1,\n              cosD - sinLat1 * Math.sin(lat));\n      return [toDegrees(lon), toDegrees(lat)];\n    }, getTransform(geoProjection, projection), squaredTolerance);\n}\n\n\n/**\n * Generate a meridian (line at constant longitude).\n * @param {number} lon Longitude.\n * @param {number} lat1 Latitude 1.\n * @param {number} lat2 Latitude 2.\n * @param {import(\"../../proj/Projection.js\").default} projection Projection.\n * @param {number} squaredTolerance Squared tolerance.\n * @return {Array<number>} Flat coordinates.\n */\nexport function meridian(lon, lat1, lat2, projection, squaredTolerance) {\n  const epsg4326Projection = getProjection('EPSG:4326');\n  return line(\n    /**\n     * @param {number} frac Fraction.\n     * @return {import(\"../../coordinate.js\").Coordinate} Coordinate.\n     */\n    function(frac) {\n      return [lon, lat1 + ((lat2 - lat1) * frac)];\n    },\n    getTransform(epsg4326Projection, projection), squaredTolerance);\n}\n\n\n/**\n * Generate a parallel (line at constant latitude).\n * @param {number} lat Latitude.\n * @param {number} lon1 Longitude 1.\n * @param {number} lon2 Longitude 2.\n * @param {import(\"../../proj/Projection.js\").default} projection Projection.\n * @param {number} squaredTolerance Squared tolerance.\n * @return {Array<number>} Flat coordinates.\n */\nexport function parallel(lat, lon1, lon2, projection, squaredTolerance) {\n  const epsg4326Projection = getProjection('EPSG:4326');\n  return line(\n    /**\n     * @param {number} frac Fraction.\n     * @return {import(\"../../coordinate.js\").Coordinate} Coordinate.\n     */\n    function(frac) {\n      return [lon1 + ((lon2 - lon1) * frac), lat];\n    },\n    getTransform(epsg4326Projection, projection), squaredTolerance);\n}\n","/**\n * @module ol/layer/Graticule\n */\nimport VectorLayer from './Vector.js';\nimport {assign} from '../obj.js';\nimport {degreesToStringHDMS} from '../coordinate.js';\nimport Text from '../style/Text.js';\nimport Fill from '../style/Fill.js';\nimport Stroke from '../style/Stroke.js';\nimport LineString from '../geom/LineString.js';\nimport VectorSource from '../source/Vector.js';\nimport {\n  equivalent as equivalentProjection,\n  get as getProjection,\n  getTransform,\n  transformExtent\n} from '../proj.js';\nimport {getCenter, intersects, equals, getIntersection, isEmpty} from '../extent.js';\nimport {clamp} from '../math.js';\nimport Style from '../style/Style.js';\nimport Feature from '../Feature.js';\nimport {bbox} from '../loadingstrategy.js';\nimport {meridian, parallel} from '../geom/flat/geodesic.js';\nimport GeometryLayout from '../geom/GeometryLayout.js';\nimport Point from '../geom/Point.js';\nimport Collection from '../Collection.js';\n\n\n/**\n * @type {Stroke}\n * @private\n * @const\n */\nconst DEFAULT_STROKE_STYLE = new Stroke({\n  color: 'rgba(0,0,0,0.2)'\n});\n\n/**\n * @type {Array<number>}\n * @private\n */\nconst INTERVALS = [\n  90, 45, 30, 20, 10, 5, 2, 1, 0.5, 0.2, 0.1, 0.05, 0.01, 0.005, 0.002, 0.001\n];\n\n/**\n * @typedef {Object} GraticuleLabelDataType\n * @property {Point} geom\n * @property {string} text\n */\n\n\n/**\n * @typedef {Object} Options\n * @property {string} [className='ol-layer'] A CSS class name to set to the layer element.\n * @property {number} [opacity=1] Opacity (0, 1).\n * @property {boolean} [visible=true] Visibility.\n * @property {import(\"../extent.js\").Extent} [extent] The bounding extent for layer rendering.  The layer will not be\n * rendered outside of this extent.\n * @property {number} [zIndex] The z-index for layer rendering.  At rendering time, the layers\n * will be ordered, first by Z-index and then by position. When `undefined`, a `zIndex` of 0 is assumed\n * for layers that are added to the map's `layers` collection, or `Infinity` when the layer's `setMap()`\n * method was used.\n * @property {number} [minResolution] The minimum resolution (inclusive) at which this layer will be\n * visible.\n * @property {number} [maxResolution] The maximum resolution (exclusive) below which this layer will\n * be visible.\n * @property {number} [maxLines=100] The maximum number of meridians and\n * parallels from the center of the map. The default value of 100 means that at\n * most 200 meridians and 200 parallels will be displayed. The default value is\n * appropriate for conformal projections like Spherical Mercator. If you\n * increase the value, more lines will be drawn and the drawing performance will\n * decrease.\n * @property {Stroke} [strokeStyle='rgba(0,0,0,0.2)'] The\n * stroke style to use for drawing the graticule. If not provided, a not fully\n * opaque black will be used.\n * @property {number} [targetSize=100] The target size of the graticule cells,\n * in pixels.\n * @property {boolean} [showLabels=false] Render a label with the respective\n * latitude/longitude for each graticule line.\n * @property {function(number):string} [lonLabelFormatter] Label formatter for\n * longitudes. This function is called with the longitude as argument, and\n * should return a formatted string representing the longitude. By default,\n * labels are formatted as degrees, minutes, seconds and hemisphere.\n * @property {function(number):string} [latLabelFormatter] Label formatter for\n * latitudes. This function is called with the latitude as argument, and\n * should return a formatted string representing the latitude. By default,\n * labels are formatted as degrees, minutes, seconds and hemisphere.\n * @property {number} [lonLabelPosition=0] Longitude label position in fractions\n * (0..1) of view extent. 0 means at the bottom of the viewport, 1 means at the\n * top.\n * @property {number} [latLabelPosition=1] Latitude label position in fractions\n * (0..1) of view extent. 0 means at the left of the viewport, 1 means at the\n * right.\n * @property {Text} [lonLabelStyle] Longitude label text\n * style. If not provided, the following style will be used:\n * ```js\n * new Text({\n *   font: '12px Calibri,sans-serif',\n *   textBaseline: 'bottom',\n *   fill: new Fill({\n *     color: 'rgba(0,0,0,1)'\n *   }),\n *   stroke: new Stroke({\n *     color: 'rgba(255,255,255,1)',\n *     width: 3\n *   })\n * });\n * ```\n * Note that the default's `textBaseline` configuration will not work well for\n * `lonLabelPosition` configurations that position labels close to the top of\n * the viewport.\n * @property {Text} [latLabelStyle] Latitude label text style.\n * If not provided, the following style will be used:\n * ```js\n * new Text({\n *   font: '12px Calibri,sans-serif',\n *   textAlign: 'end',\n *   fill: new Fill({\n *     color: 'rgba(0,0,0,1)'\n *   }),\n *   stroke: Stroke({\n *     color: 'rgba(255,255,255,1)',\n *     width: 3\n *   })\n * });\n * ```\n * Note that the default's `textAlign` configuration will not work well for\n * `latLabelPosition` configurations that position labels close to the left of\n * the viewport.\n * @property {Array<number>} [intervals=[90, 45, 30, 20, 10, 5, 2, 1, 0.5, 0.2, 0.1, 0.05, 0.01, 0.005, 0.002, 0.001]]\n * Intervals (in degrees) for the graticule. Example to limit graticules to 30 and 10 degrees intervals:\n * ```js\n * [30, 10]\n * ```\n * @property {boolean} [wrapX=true] Whether to repeat the graticule horizontally.\n */\n\n\n/**\n * @classdesc\n * Layer that renders a grid for a coordinate system.\n *\n * @fires import(\"../render/Event.js\").RenderEvent\n * @api\n */\nclass Graticule extends VectorLayer {\n  /**\n   * @param {Options=} opt_options Options.\n   */\n  constructor(opt_options) {\n    const options = opt_options ? opt_options : {};\n\n    const baseOptions = assign({\n      updateWhileAnimating: true,\n      updateWhileInteracting: true,\n      renderBuffer: 0\n    }, options);\n\n    delete baseOptions.maxLines;\n    delete baseOptions.strokeStyle;\n    delete baseOptions.targetSize;\n    delete baseOptions.showLabels;\n    delete baseOptions.lonLabelFormatter;\n    delete baseOptions.latLabelFormatter;\n    delete baseOptions.lonLabelPosition;\n    delete baseOptions.latLabelPosition;\n    delete baseOptions.lonLabelStyle;\n    delete baseOptions.latLabelStyle;\n    delete baseOptions.intervals;\n    super(baseOptions);\n\n    /**\n     * @type {import(\"../proj/Projection.js\").default}\n     */\n    this.projection_ = null;\n\n    /**\n     * @type {number}\n     * @private\n     */\n    this.maxLat_ = Infinity;\n\n    /**\n     * @type {number}\n     * @private\n     */\n    this.maxLon_ = Infinity;\n\n    /**\n     * @type {number}\n     * @private\n     */\n    this.minLat_ = -Infinity;\n\n    /**\n     * @type {number}\n     * @private\n     */\n    this.minLon_ = -Infinity;\n\n    /**\n     * @type {number}\n     * @private\n     */\n    this.maxLatP_ = Infinity;\n\n    /**\n     * @type {number}\n     * @private\n     */\n    this.maxLonP_ = Infinity;\n\n    /**\n     * @type {number}\n     * @private\n     */\n    this.minLatP_ = -Infinity;\n\n    /**\n     * @type {number}\n     * @private\n     */\n    this.minLonP_ = -Infinity;\n\n    /**\n     * @type {number}\n     * @private\n     */\n    this.targetSize_ = options.targetSize !== undefined ? options.targetSize : 100;\n\n    /**\n     * @type {number}\n     * @private\n     */\n    this.maxLines_ = options.maxLines !== undefined ? options.maxLines : 100;\n\n    /**\n     * @type {Array<LineString>}\n     * @private\n     */\n    this.meridians_ = [];\n\n    /**\n     * @type {Array<LineString>}\n     * @private\n     */\n    this.parallels_ = [];\n\n    /**\n     * @type {Stroke}\n     * @private\n     */\n    this.strokeStyle_ = options.strokeStyle !== undefined ? options.strokeStyle : DEFAULT_STROKE_STYLE;\n\n    /**\n     * @type {import(\"../proj.js\").TransformFunction|undefined}\n     * @private\n     */\n    this.fromLonLatTransform_ = undefined;\n\n    /**\n     * @type {import(\"../proj.js\").TransformFunction|undefined}\n     * @private\n     */\n    this.toLonLatTransform_ = undefined;\n\n    /**\n     * @type {import(\"../coordinate.js\").Coordinate}\n     * @private\n     */\n    this.projectionCenterLonLat_ = null;\n\n    /**\n     * @type {Array<GraticuleLabelDataType>}\n     * @private\n     */\n    this.meridiansLabels_ = null;\n\n    /**\n     * @type {Array<GraticuleLabelDataType>}\n     * @private\n     */\n    this.parallelsLabels_ = null;\n\n    if (options.showLabels) {\n\n      /**\n       * @type {null|function(number):string}\n       * @private\n       */\n      this.lonLabelFormatter_ = options.lonLabelFormatter == undefined ?\n        degreesToStringHDMS.bind(this, 'EW') : options.lonLabelFormatter;\n\n      /**\n       * @type {function(number):string}\n       * @private\n       */\n      this.latLabelFormatter_ = options.latLabelFormatter == undefined ?\n        degreesToStringHDMS.bind(this, 'NS') : options.latLabelFormatter;\n\n      /**\n       * Longitude label position in fractions (0..1) of view extent. 0 means\n       * bottom, 1 means top.\n       * @type {number}\n       * @private\n       */\n      this.lonLabelPosition_ = options.lonLabelPosition == undefined ? 0 :\n        options.lonLabelPosition;\n\n      /**\n       * Latitude Label position in fractions (0..1) of view extent. 0 means left, 1\n       * means right.\n       * @type {number}\n       * @private\n       */\n      this.latLabelPosition_ = options.latLabelPosition == undefined ? 1 :\n        options.latLabelPosition;\n\n      /**\n       * @type {Object.<string,Style>}\n       * @private\n       */\n      this.lonLabelStyleCache_ = {};\n\n      /**\n       * @private\n       * @param {import(\"../Feature\").default} feature Feature\n       * @return {Style} style\n       */\n      this.lonLabelStyle_ = function(feature) {\n        const label = feature.get('graticule_label');\n        if (!this.lonLabelStyleCache_[label]) {\n          this.lonLabelStyleCache_[label] = new Style({\n            text: options.lonLabelStyle !== undefined ? options.lonLabelStyle :\n              new Text({\n                text: label,\n                font: '12px Calibri,sans-serif',\n                textBaseline: 'bottom',\n                fill: new Fill({\n                  color: 'rgba(0,0,0,1)'\n                }),\n                stroke: new Stroke({\n                  color: 'rgba(255,255,255,1)',\n                  width: 3\n                })\n              })\n          });\n        }\n        return this.lonLabelStyleCache_[label];\n      }.bind(this);\n\n      /**\n       * @type {Object.<string,Style>}\n       * @private\n       */\n      this.latLabelStyleCache_ = {};\n\n      /**\n       * @private\n       * @param {import(\"../Feature\").default} feature Feature\n       * @return {Style} style\n       */\n      this.latLabelStyle_ = function(feature) {\n        const label = feature.get('graticule_label');\n        if (!this.latLabelStyleCache_[label]) {\n          this.latLabelStyleCache_[label] = new Style({\n            text: options.latLabelStyle !== undefined ? options.latLabelStyle :\n              new Text({\n                text: label,\n                font: '12px Calibri,sans-serif',\n                textAlign: 'right',\n                fill: new Fill({\n                  color: 'rgba(0,0,0,1)'\n                }),\n                stroke: new Stroke({\n                  color: 'rgba(255,255,255,1)',\n                  width: 3\n                })\n              })\n          });\n        }\n        return this.latLabelStyleCache_[label];\n      }.bind(this);\n\n      this.meridiansLabels_ = [];\n      this.parallelsLabels_ = [];\n    }\n\n    /**\n     * @type {Array<number>}\n     * @private\n     */\n    this.intervals_ = options.intervals !== undefined ? options.intervals : INTERVALS;\n\n    // use a source with a custom loader for lines & text\n    this.setSource(\n      new VectorSource({\n        loader: this.loaderFunction.bind(this),\n        strategy: bbox,\n        features: new Collection(),\n        overlaps: false,\n        useSpatialIndex: false,\n        wrapX: options.wrapX\n      })\n    );\n\n    /**\n     * feature pool to use when updating graticule\n     * @type {Array<Feature>}\n     * @private\n     */\n    this.featurePool_ = [];\n\n    /**\n     * @type {Style}\n     * @private\n     */\n    this.lineStyle_ = new Style({\n      stroke: this.strokeStyle_\n    });\n\n    /**\n     * @type {import(\"../extent.js\").Extent}\n     */\n    this.renderedExtent_ = null;\n\n    this.setRenderOrder(null);\n\n    this.tmpExtent_ = null;\n  }\n\n  /**\n   * Update geometries in the source based on current view\n   * @param {import(\"../extent\").Extent} extent Extent\n   * @param {number} resolution Resolution\n   * @param {import(\"../proj/Projection.js\").default} projection Projection\n   */\n  loaderFunction(extent, resolution, projection) {\n    const source = this.getSource();\n\n    // only consider the intersection between our own extent & the requested one\n    const layerExtent = this.getExtent() || [-Infinity, -Infinity, Infinity, Infinity];\n    const renderExtent = getIntersection(layerExtent, extent, this.tmpExtent_);\n\n    // we should not keep track of loaded extents\n    setTimeout(function() {\n      source.removeLoadedExtent(extent);\n    }, 0);\n\n    if (this.renderedExtent_ && equals(this.renderedExtent_, renderExtent)) {\n      return;\n    }\n    this.renderedExtent_ = renderExtent;\n\n    // bail out if nothing to render\n    if (isEmpty(renderExtent)) {\n      return;\n    }\n\n    // update projection info\n    const center = getCenter(renderExtent);\n    const squaredTolerance = resolution * resolution / 4;\n\n    const updateProjectionInfo = !this.projection_ ||\n      !equivalentProjection(this.projection_, projection);\n\n    if (updateProjectionInfo) {\n      this.updateProjectionInfo_(projection);\n    }\n\n    this.createGraticule_(renderExtent, center, resolution, squaredTolerance);\n\n    // first make sure we have enough features in the pool\n    let featureCount = this.meridians_.length + this.parallels_.length;\n    if (this.meridiansLabels_) {\n      featureCount += this.meridiansLabels_.length;\n    }\n    if (this.parallelsLabels_) {\n      featureCount += this.parallelsLabels_.length;\n    }\n\n    let feature;\n    while (featureCount > this.featurePool_.length) {\n      feature = new Feature();\n      this.featurePool_.push(feature);\n    }\n\n    const featuresColl = source.getFeaturesCollection();\n    featuresColl.clear();\n    let poolIndex = 0;\n\n    // add features for the lines & labels\n    let i, l;\n    for (i = 0, l = this.meridians_.length; i < l; ++i) {\n      feature = this.featurePool_[poolIndex++];\n      feature.setGeometry(this.meridians_[i]);\n      feature.setStyle(this.lineStyle_);\n      featuresColl.push(feature);\n    }\n    for (i = 0, l = this.parallels_.length; i < l; ++i) {\n      feature = this.featurePool_[poolIndex++];\n      feature.setGeometry(this.parallels_[i]);\n      feature.setStyle(this.lineStyle_);\n      featuresColl.push(feature);\n    }\n    let labelData;\n    if (this.meridiansLabels_) {\n      for (i = 0, l = this.meridiansLabels_.length; i < l; ++i) {\n        labelData = this.meridiansLabels_[i];\n        feature = this.featurePool_[poolIndex++];\n        feature.setGeometry(labelData.geom);\n        feature.setStyle(this.lonLabelStyle_);\n        feature.set('graticule_label', labelData.text);\n        featuresColl.push(feature);\n      }\n    }\n    if (this.parallelsLabels_) {\n      for (i = 0, l = this.parallelsLabels_.length; i < l; ++i) {\n        labelData = this.parallelsLabels_[i];\n        feature = this.featurePool_[poolIndex++];\n        feature.setGeometry(labelData.geom);\n        feature.setStyle(this.latLabelStyle_);\n        feature.set('graticule_label', labelData.text);\n        featuresColl.push(feature);\n      }\n    }\n  }\n\n  /**\n   * @param {number} lon Longitude.\n   * @param {number} minLat Minimal latitude.\n   * @param {number} maxLat Maximal latitude.\n   * @param {number} squaredTolerance Squared tolerance.\n   * @param {import(\"../extent.js\").Extent} extent Extent.\n   * @param {number} index Index.\n   * @return {number} Index.\n   * @private\n   */\n  addMeridian_(lon, minLat, maxLat, squaredTolerance, extent, index) {\n    const lineString = this.getMeridian_(lon, minLat, maxLat, squaredTolerance, index);\n    if (intersects(lineString.getExtent(), extent)) {\n      if (this.meridiansLabels_) {\n        const textPoint = this.getMeridianPoint_(lineString, extent, index);\n        this.meridiansLabels_[index] = {\n          geom: textPoint,\n          text: this.lonLabelFormatter_(lon)\n        };\n      }\n      this.meridians_[index++] = lineString;\n    }\n    return index;\n  }\n\n  /**\n   * @param {number} lat Latitude.\n   * @param {number} minLon Minimal longitude.\n   * @param {number} maxLon Maximal longitude.\n   * @param {number} squaredTolerance Squared tolerance.\n   * @param {import(\"../extent.js\").Extent} extent Extent.\n   * @param {number} index Index.\n   * @return {number} Index.\n   * @private\n   */\n  addParallel_(lat, minLon, maxLon, squaredTolerance, extent, index) {\n    const lineString = this.getParallel_(lat, minLon, maxLon, squaredTolerance, index);\n    if (intersects(lineString.getExtent(), extent)) {\n      if (this.parallelsLabels_) {\n        const textPoint = this.getParallelPoint_(lineString, extent, index);\n        this.parallelsLabels_[index] = {\n          geom: textPoint,\n          text: this.latLabelFormatter_(lat)\n        };\n      }\n      this.parallels_[index++] = lineString;\n    }\n    return index;\n  }\n\n  /**\n   * @param {import(\"../extent.js\").Extent} extent Extent.\n   * @param {import(\"../coordinate.js\").Coordinate} center Center.\n   * @param {number} resolution Resolution.\n   * @param {number} squaredTolerance Squared tolerance.\n   * @private\n   */\n  createGraticule_(extent, center, resolution, squaredTolerance) {\n    const interval = this.getInterval_(resolution);\n    if (interval == -1) {\n      this.meridians_.length = this.parallels_.length = 0;\n      if (this.meridiansLabels_) {\n        this.meridiansLabels_.length = 0;\n      }\n      if (this.parallelsLabels_) {\n        this.parallelsLabels_.length = 0;\n      }\n      return;\n    }\n\n    const centerLonLat = this.toLonLatTransform_(center);\n    let centerLon = centerLonLat[0];\n    let centerLat = centerLonLat[1];\n    const maxLines = this.maxLines_;\n    let cnt, idx, lat, lon;\n\n    let validExtent = [\n      Math.max(extent[0], this.minLonP_),\n      Math.max(extent[1], this.minLatP_),\n      Math.min(extent[2], this.maxLonP_),\n      Math.min(extent[3], this.maxLatP_)\n    ];\n\n    validExtent = transformExtent(validExtent, this.projection_, 'EPSG:4326');\n    const maxLat = validExtent[3];\n    const maxLon = validExtent[2];\n    const minLat = validExtent[1];\n    const minLon = validExtent[0];\n\n    // Create meridians\n\n    centerLon = Math.floor(centerLon / interval) * interval;\n    lon = clamp(centerLon, this.minLon_, this.maxLon_);\n\n    idx = this.addMeridian_(lon, minLat, maxLat, squaredTolerance, extent, 0);\n\n    cnt = 0;\n    while (lon != this.minLon_ && cnt++ < maxLines) {\n      lon = Math.max(lon - interval, this.minLon_);\n      idx = this.addMeridian_(lon, minLat, maxLat, squaredTolerance, extent, idx);\n    }\n\n    lon = clamp(centerLon, this.minLon_, this.maxLon_);\n\n    cnt = 0;\n    while (lon != this.maxLon_ && cnt++ < maxLines) {\n      lon = Math.min(lon + interval, this.maxLon_);\n      idx = this.addMeridian_(lon, minLat, maxLat, squaredTolerance, extent, idx);\n    }\n\n    this.meridians_.length = idx;\n    if (this.meridiansLabels_) {\n      this.meridiansLabels_.length = idx;\n    }\n\n    // Create parallels\n\n    centerLat = Math.floor(centerLat / interval) * interval;\n    lat = clamp(centerLat, this.minLat_, this.maxLat_);\n\n    idx = this.addParallel_(lat, minLon, maxLon, squaredTolerance, extent, 0);\n\n    cnt = 0;\n    while (lat != this.minLat_ && cnt++ < maxLines) {\n      lat = Math.max(lat - interval, this.minLat_);\n      idx = this.addParallel_(lat, minLon, maxLon, squaredTolerance, extent, idx);\n    }\n\n    lat = clamp(centerLat, this.minLat_, this.maxLat_);\n\n    cnt = 0;\n    while (lat != this.maxLat_ && cnt++ < maxLines) {\n      lat = Math.min(lat + interval, this.maxLat_);\n      idx = this.addParallel_(lat, minLon, maxLon, squaredTolerance, extent, idx);\n    }\n\n    this.parallels_.length = idx;\n    if (this.parallelsLabels_) {\n      this.parallelsLabels_.length = idx;\n    }\n\n  }\n\n  /**\n   * @param {number} resolution Resolution.\n   * @return {number} The interval in degrees.\n   * @private\n   */\n  getInterval_(resolution) {\n    const centerLon = this.projectionCenterLonLat_[0];\n    const centerLat = this.projectionCenterLonLat_[1];\n    let interval = -1;\n    const target = Math.pow(this.targetSize_ * resolution, 2);\n    /** @type {Array<number>} **/\n    const p1 = [];\n    /** @type {Array<number>} **/\n    const p2 = [];\n    for (let i = 0, ii = this.intervals_.length; i < ii; ++i) {\n      const delta = this.intervals_[i] / 2;\n      p1[0] = centerLon - delta;\n      p1[1] = centerLat - delta;\n      p2[0] = centerLon + delta;\n      p2[1] = centerLat + delta;\n      this.fromLonLatTransform_(p1, p1);\n      this.fromLonLatTransform_(p2, p2);\n      const dist = Math.pow(p2[0] - p1[0], 2) + Math.pow(p2[1] - p1[1], 2);\n      if (dist <= target) {\n        break;\n      }\n      interval = this.intervals_[i];\n    }\n    return interval;\n  }\n\n  /**\n   * @param {number} lon Longitude.\n   * @param {number} minLat Minimal latitude.\n   * @param {number} maxLat Maximal latitude.\n   * @param {number} squaredTolerance Squared tolerance.\n   * @return {LineString} The meridian line string.\n   * @param {number} index Index.\n   * @private\n   */\n  getMeridian_(lon, minLat, maxLat, squaredTolerance, index) {\n    const flatCoordinates = meridian(lon, minLat, maxLat, this.projection_, squaredTolerance);\n    let lineString = this.meridians_[index];\n    if (!lineString) {\n      lineString = this.meridians_[index] = new LineString(flatCoordinates, GeometryLayout.XY);\n    } else {\n      lineString.setFlatCoordinates(GeometryLayout.XY, flatCoordinates);\n      lineString.changed();\n    }\n    return lineString;\n  }\n\n  /**\n   * @param {LineString} lineString Meridian\n   * @param {import(\"../extent.js\").Extent} extent Extent.\n   * @param {number} index Index.\n   * @return {Point} Meridian point.\n   * @private\n   */\n  getMeridianPoint_(lineString, extent, index) {\n    const flatCoordinates = lineString.getFlatCoordinates();\n    const clampedBottom = Math.max(extent[1], flatCoordinates[1]);\n    const clampedTop = Math.min(extent[3], flatCoordinates[flatCoordinates.length - 1]);\n    const lat = clamp(\n      extent[1] + Math.abs(extent[1] - extent[3]) * this.lonLabelPosition_,\n      clampedBottom, clampedTop);\n    const coordinate = [flatCoordinates[0], lat];\n    let point;\n    if (index in this.meridiansLabels_) {\n      point = this.meridiansLabels_[index].geom;\n      point.setCoordinates(coordinate);\n    } else {\n      point = new Point(coordinate);\n    }\n    return point;\n  }\n\n  /**\n   * Get the list of meridians.  Meridians are lines of equal longitude.\n   * @return {Array<LineString>} The meridians.\n   * @api\n   */\n  getMeridians() {\n    return this.meridians_;\n  }\n\n  /**\n   * @param {number} lat Latitude.\n   * @param {number} minLon Minimal longitude.\n   * @param {number} maxLon Maximal longitude.\n   * @param {number} squaredTolerance Squared tolerance.\n   * @return {LineString} The parallel line string.\n   * @param {number} index Index.\n   * @private\n   */\n  getParallel_(lat, minLon, maxLon, squaredTolerance, index) {\n    const flatCoordinates = parallel(lat, minLon, maxLon, this.projection_, squaredTolerance);\n    let lineString = this.parallels_[index];\n    if (!lineString) {\n      lineString = new LineString(flatCoordinates, GeometryLayout.XY);\n    } else {\n      lineString.setFlatCoordinates(GeometryLayout.XY, flatCoordinates);\n      lineString.changed();\n    }\n    return lineString;\n  }\n\n\n  /**\n   * @param {LineString} lineString Parallels.\n   * @param {import(\"../extent.js\").Extent} extent Extent.\n   * @param {number} index Index.\n   * @return {Point} Parallel point.\n   * @private\n   */\n  getParallelPoint_(lineString, extent, index) {\n    const flatCoordinates = lineString.getFlatCoordinates();\n    const clampedLeft = Math.max(extent[0], flatCoordinates[0]);\n    const clampedRight = Math.min(extent[2], flatCoordinates[flatCoordinates.length - 2]);\n    const lon = clamp(\n      extent[0] + Math.abs(extent[0] - extent[2]) * this.latLabelPosition_,\n      clampedLeft, clampedRight);\n    const coordinate = [lon, flatCoordinates[1]];\n    let point;\n    if (index in this.parallelsLabels_) {\n      point = this.parallelsLabels_[index].geom;\n      point.setCoordinates(coordinate);\n    } else {\n      point = new Point(coordinate);\n    }\n    return point;\n  }\n\n  /**\n   * Get the list of parallels.  Parallels are lines of equal latitude.\n   * @return {Array<LineString>} The parallels.\n   * @api\n   */\n  getParallels() {\n    return this.parallels_;\n  }\n\n  /**\n   * @param {import(\"../proj/Projection.js\").default} projection Projection.\n   * @private\n   */\n  updateProjectionInfo_(projection) {\n    const epsg4326Projection = getProjection('EPSG:4326');\n\n    const worldExtent = projection.getWorldExtent();\n    const worldExtentP = transformExtent(worldExtent, epsg4326Projection, projection);\n\n    this.maxLat_ = worldExtent[3];\n    this.maxLon_ = worldExtent[2];\n    this.minLat_ = worldExtent[1];\n    this.minLon_ = worldExtent[0];\n\n    this.maxLatP_ = worldExtentP[3];\n    this.maxLonP_ = worldExtentP[2];\n    this.minLatP_ = worldExtentP[1];\n    this.minLonP_ = worldExtentP[0];\n\n    this.fromLonLatTransform_ = getTransform(epsg4326Projection, projection);\n\n    this.toLonLatTransform_ = getTransform(projection, epsg4326Projection);\n\n    this.projectionCenterLonLat_ = this.toLonLatTransform_(getCenter(projection.getExtent()));\n\n    this.projection_ = projection;\n  }\n}\n\n\nexport default Graticule;\n","/**\n * @module ol/source/TileEventType\n */\n\n/**\n * @enum {string}\n */\nexport default {\n\n  /**\n   * Triggered when a tile starts loading.\n   * @event module:ol/source/Tile.TileSourceEvent#tileloadstart\n   * @api\n   */\n  TILELOADSTART: 'tileloadstart',\n\n  /**\n   * Triggered when a tile finishes loading, either when its data is loaded,\n   * or when loading was aborted because the tile is no longer needed.\n   * @event module:ol/source/Tile.TileSourceEvent#tileloadend\n   * @api\n   */\n  TILELOADEND: 'tileloadend',\n\n  /**\n   * Triggered if tile loading results in an error.\n   * @event module:ol/source/Tile.TileSourceEvent#tileloaderror\n   * @api\n   */\n  TILELOADERROR: 'tileloaderror'\n\n};\n","/**\n * @module ol/source/UrlTile\n */\nimport {getUid} from '../util.js';\nimport TileState from '../TileState.js';\nimport {expandUrl, createFromTemplates, nullTileUrlFunction} from '../tileurlfunction.js';\nimport TileSource, {TileSourceEvent} from './Tile.js';\nimport TileEventType from './TileEventType.js';\nimport {getKeyZXY} from '../tilecoord.js';\n\n/**\n * @typedef {Object} Options\n * @property {import(\"./Source.js\").AttributionLike} [attributions]\n * @property {boolean} [attributionsCollapsible=true] Attributions are collapsible.\n * @property {number} [cacheSize]\n * @property {boolean} [opaque]\n * @property {import(\"../proj.js\").ProjectionLike} [projection]\n * @property {import(\"./State.js\").default} [state]\n * @property {import(\"../tilegrid/TileGrid.js\").default} [tileGrid]\n * @property {import(\"../Tile.js\").LoadFunction} tileLoadFunction\n * @property {number} [tilePixelRatio]\n * @property {import(\"../Tile.js\").UrlFunction} [tileUrlFunction]\n * @property {string} [url]\n * @property {Array<string>} [urls]\n * @property {boolean} [wrapX=true]\n * @property {number} [transition]\n * @property {string} [key]\n * @property {number} [zDirection=0]\n */\n\n\n/**\n * @classdesc\n * Base class for sources providing tiles divided into a tile grid over http.\n *\n * @fires import(\"./Tile.js\").TileSourceEvent\n */\nclass UrlTile extends TileSource {\n  /**\n   * @param {Options} options Image tile options.\n   */\n  constructor(options) {\n\n    super({\n      attributions: options.attributions,\n      cacheSize: options.cacheSize,\n      opaque: options.opaque,\n      projection: options.projection,\n      state: options.state,\n      tileGrid: options.tileGrid,\n      tilePixelRatio: options.tilePixelRatio,\n      wrapX: options.wrapX,\n      transition: options.transition,\n      key: options.key,\n      attributionsCollapsible: options.attributionsCollapsible,\n      zDirection: options.zDirection\n    });\n\n    /**\n     * @private\n     * @type {boolean}\n     */\n    this.generateTileUrlFunction_ = !options.tileUrlFunction;\n\n    /**\n     * @protected\n     * @type {import(\"../Tile.js\").LoadFunction}\n     */\n    this.tileLoadFunction = options.tileLoadFunction;\n\n    /**\n     * @protected\n     * @type {import(\"../Tile.js\").UrlFunction}\n     */\n    this.tileUrlFunction = options.tileUrlFunction ? options.tileUrlFunction.bind(this) : nullTileUrlFunction;\n\n    /**\n     * @protected\n     * @type {!Array<string>|null}\n     */\n    this.urls = null;\n\n    if (options.urls) {\n      this.setUrls(options.urls);\n    } else if (options.url) {\n      this.setUrl(options.url);\n    }\n\n    /**\n     * @private\n     * @type {!Object<string, boolean>}\n     */\n    this.tileLoadingKeys_ = {};\n\n  }\n\n  /**\n   * Return the tile load function of the source.\n   * @return {import(\"../Tile.js\").LoadFunction} TileLoadFunction\n   * @api\n   */\n  getTileLoadFunction() {\n    return this.tileLoadFunction;\n  }\n\n  /**\n   * Return the tile URL function of the source.\n   * @return {import(\"../Tile.js\").UrlFunction} TileUrlFunction\n   * @api\n   */\n  getTileUrlFunction() {\n    return this.tileUrlFunction;\n  }\n\n  /**\n   * Return the URLs used for this source.\n   * When a tileUrlFunction is used instead of url or urls,\n   * null will be returned.\n   * @return {!Array<string>|null} URLs.\n   * @api\n   */\n  getUrls() {\n    return this.urls;\n  }\n\n  /**\n   * Handle tile change events.\n   * @param {import(\"../events/Event.js\").default} event Event.\n   * @protected\n   */\n  handleTileChange(event) {\n    const tile = /** @type {import(\"../Tile.js\").default} */ (event.target);\n    const uid = getUid(tile);\n    const tileState = tile.getState();\n    let type;\n    if (tileState == TileState.LOADING) {\n      this.tileLoadingKeys_[uid] = true;\n      type = TileEventType.TILELOADSTART;\n    } else if (uid in this.tileLoadingKeys_) {\n      delete this.tileLoadingKeys_[uid];\n      type = tileState == TileState.ERROR ? TileEventType.TILELOADERROR :\n        (tileState == TileState.LOADED || tileState == TileState.ABORT) ?\n          TileEventType.TILELOADEND : undefined;\n    }\n    if (type != undefined) {\n      this.dispatchEvent(new TileSourceEvent(type, tile));\n    }\n  }\n\n  /**\n   * Set the tile load function of the source.\n   * @param {import(\"../Tile.js\").LoadFunction} tileLoadFunction Tile load function.\n   * @api\n   */\n  setTileLoadFunction(tileLoadFunction) {\n    this.tileCache.clear();\n    this.tileLoadFunction = tileLoadFunction;\n    this.changed();\n  }\n\n  /**\n   * Set the tile URL function of the source.\n   * @param {import(\"../Tile.js\").UrlFunction} tileUrlFunction Tile URL function.\n   * @param {string=} key Optional new tile key for the source.\n   * @api\n   */\n  setTileUrlFunction(tileUrlFunction, key) {\n    this.tileUrlFunction = tileUrlFunction;\n    this.tileCache.pruneExceptNewestZ();\n    if (typeof key !== 'undefined') {\n      this.setKey(key);\n    } else {\n      this.changed();\n    }\n  }\n\n  /**\n   * Set the URL to use for requests.\n   * @param {string} url URL.\n   * @api\n   */\n  setUrl(url) {\n    const urls = this.urls = expandUrl(url);\n    this.setUrls(urls);\n  }\n\n  /**\n   * Set the URLs to use for requests.\n   * @param {Array<string>} urls URLs.\n   * @api\n   */\n  setUrls(urls) {\n    this.urls = urls;\n    const key = urls.join('\\n');\n    if (this.generateTileUrlFunction_) {\n      this.setTileUrlFunction(createFromTemplates(urls, this.tileGrid), key);\n    } else {\n      this.setKey(key);\n    }\n  }\n\n  /**\n   * @inheritDoc\n   */\n  useTile(z, x, y) {\n    const tileCoordKey = getKeyZXY(z, x, y);\n    if (this.tileCache.containsKey(tileCoordKey)) {\n      this.tileCache.get(tileCoordKey);\n    }\n  }\n}\n\n\nexport default UrlTile;\n","/**\n * @module ol/MapBrowserEventHandler\n */\n\nimport '@openlayers/pepjs';\nimport {DEVICE_PIXEL_RATIO} from './has.js';\nimport MapBrowserEventType from './MapBrowserEventType.js';\nimport MapBrowserPointerEvent from './MapBrowserPointerEvent.js';\nimport {listen, unlistenByKey} from './events.js';\nimport EventTarget from './events/Target.js';\nimport PointerEventType from './pointer/EventType.js';\n\nclass MapBrowserEventHandler extends EventTarget {\n\n  /**\n   * @param {import(\"./PluggableMap.js\").default} map The map with the viewport to listen to events on.\n   * @param {number=} moveTolerance The minimal distance the pointer must travel to trigger a move.\n   */\n  constructor(map, moveTolerance) {\n\n    super(map);\n\n    /**\n     * This is the element that we will listen to the real events on.\n     * @type {import(\"./PluggableMap.js\").default}\n     * @private\n     */\n    this.map_ = map;\n\n    /**\n     * @type {any}\n     * @private\n     */\n    this.clickTimeoutId_;\n\n    /**\n     * @type {boolean}\n     * @private\n     */\n    this.dragging_ = false;\n\n    /**\n     * @type {!Array<import(\"./events.js\").EventsKey>}\n     * @private\n     */\n    this.dragListenerKeys_ = [];\n\n    /**\n     * @type {number}\n     * @private\n     */\n    this.moveTolerance_ = moveTolerance ?\n      moveTolerance * DEVICE_PIXEL_RATIO : DEVICE_PIXEL_RATIO;\n\n    /**\n     * The most recent \"down\" type event (or null if none have occurred).\n     * Set on pointerdown.\n     * @type {PointerEvent}\n     * @private\n     */\n    this.down_ = null;\n\n    const element = this.map_.getViewport();\n    element.setAttribute('touch-action', 'none');\n\n    /**\n     * @type {number}\n     * @private\n     */\n    this.activePointers_ = 0;\n\n    /**\n     * @type {!Object<number, boolean>}\n     * @private\n     */\n    this.trackedTouches_ = {};\n\n    this.element_ = element;\n\n    /**\n     * @type {?import(\"./events.js\").EventsKey}\n     * @private\n     */\n    this.pointerdownListenerKey_ = listen(element,\n      PointerEventType.POINTERDOWN,\n      this.handlePointerDown_, this);\n\n    /**\n     * @type {?import(\"./events.js\").EventsKey}\n     * @private\n     */\n    this.relayedListenerKey_ = listen(element,\n      PointerEventType.POINTERMOVE,\n      this.relayEvent_, this);\n\n  }\n\n  /**\n   * @param {PointerEvent} pointerEvent Pointer\n   * event.\n   * @private\n   */\n  emulateClick_(pointerEvent) {\n    let newEvent = new MapBrowserPointerEvent(\n      MapBrowserEventType.CLICK, this.map_, pointerEvent);\n    this.dispatchEvent(newEvent);\n    if (this.clickTimeoutId_ !== undefined) {\n      // double-click\n      clearTimeout(this.clickTimeoutId_);\n      this.clickTimeoutId_ = undefined;\n      newEvent = new MapBrowserPointerEvent(\n        MapBrowserEventType.DBLCLICK, this.map_, pointerEvent);\n      this.dispatchEvent(newEvent);\n    } else {\n      // click\n      this.clickTimeoutId_ = setTimeout(function() {\n        this.clickTimeoutId_ = undefined;\n        const newEvent = new MapBrowserPointerEvent(\n          MapBrowserEventType.SINGLECLICK, this.map_, pointerEvent);\n        this.dispatchEvent(newEvent);\n      }.bind(this), 250);\n    }\n  }\n\n  /**\n   * Keeps track on how many pointers are currently active.\n   *\n   * @param {PointerEvent} pointerEvent Pointer\n   * event.\n   * @private\n   */\n  updateActivePointers_(pointerEvent) {\n    const event = pointerEvent;\n\n    if (event.type == MapBrowserEventType.POINTERUP ||\n        event.type == MapBrowserEventType.POINTERCANCEL) {\n      delete this.trackedTouches_[event.pointerId];\n    } else if (event.type == MapBrowserEventType.POINTERDOWN) {\n      this.trackedTouches_[event.pointerId] = true;\n    }\n    this.activePointers_ = Object.keys(this.trackedTouches_).length;\n  }\n\n  /**\n   * @param {PointerEvent} pointerEvent Pointer\n   * event.\n   * @private\n   */\n  handlePointerUp_(pointerEvent) {\n    this.updateActivePointers_(pointerEvent);\n    const newEvent = new MapBrowserPointerEvent(\n      MapBrowserEventType.POINTERUP, this.map_, pointerEvent);\n    this.dispatchEvent(newEvent);\n\n    // We emulate click events on left mouse button click, touch contact, and pen\n    // contact. isMouseActionButton returns true in these cases (evt.button is set\n    // to 0).\n    // See http://www.w3.org/TR/pointerevents/#button-states\n    // We only fire click, singleclick, and doubleclick if nobody has called\n    // event.stopPropagation() or event.preventDefault().\n    if (!newEvent.propagationStopped && !this.dragging_ && this.isMouseActionButton_(pointerEvent)) {\n      this.emulateClick_(this.down_);\n    }\n\n    if (this.activePointers_ === 0) {\n      this.dragListenerKeys_.forEach(unlistenByKey);\n      this.dragListenerKeys_.length = 0;\n      this.dragging_ = false;\n      this.down_ = null;\n    }\n  }\n\n  /**\n   * @param {PointerEvent} pointerEvent Pointer\n   * event.\n   * @return {boolean} If the left mouse button was pressed.\n   * @private\n   */\n  isMouseActionButton_(pointerEvent) {\n    return pointerEvent.button === 0;\n  }\n\n  /**\n   * @param {PointerEvent} pointerEvent Pointer\n   * event.\n   * @private\n   */\n  handlePointerDown_(pointerEvent) {\n    this.updateActivePointers_(pointerEvent);\n    const newEvent = new MapBrowserPointerEvent(\n      MapBrowserEventType.POINTERDOWN, this.map_, pointerEvent);\n    this.dispatchEvent(newEvent);\n\n    this.down_ = pointerEvent;\n\n    if (this.dragListenerKeys_.length === 0) {\n      this.dragListenerKeys_.push(\n        listen(document,\n          MapBrowserEventType.POINTERMOVE,\n          this.handlePointerMove_, this),\n        listen(document,\n          MapBrowserEventType.POINTERUP,\n          this.handlePointerUp_, this),\n        /* Note that the listener for `pointercancel is set up on\n         * `pointerEventHandler_` and not `documentPointerEventHandler_` like\n         * the `pointerup` and `pointermove` listeners.\n         *\n         * The reason for this is the following: `TouchSource.vacuumTouches_()`\n         * issues `pointercancel` events, when there was no `touchend` for a\n         * `touchstart`. Now, let's say a first `touchstart` is registered on\n         * `pointerEventHandler_`. The `documentPointerEventHandler_` is set up.\n         * But `documentPointerEventHandler_` doesn't know about the first\n         * `touchstart`. If there is no `touchend` for the `touchstart`, we can\n         * only receive a `touchcancel` from `pointerEventHandler_`, because it is\n         * only registered there.\n         */\n        listen(this.element_,\n          MapBrowserEventType.POINTERCANCEL,\n          this.handlePointerUp_, this)\n      );\n    }\n  }\n\n  /**\n   * @param {PointerEvent} pointerEvent Pointer\n   * event.\n   * @private\n   */\n  handlePointerMove_(pointerEvent) {\n    // Between pointerdown and pointerup, pointermove events are triggered.\n    // To avoid a 'false' touchmove event to be dispatched, we test if the pointer\n    // moved a significant distance.\n    if (this.isMoving_(pointerEvent)) {\n      this.dragging_ = true;\n      const newEvent = new MapBrowserPointerEvent(\n        MapBrowserEventType.POINTERDRAG, this.map_, pointerEvent,\n        this.dragging_);\n      this.dispatchEvent(newEvent);\n    }\n  }\n\n  /**\n   * Wrap and relay a pointer event.  Note that this requires that the type\n   * string for the MapBrowserPointerEvent matches the PointerEvent type.\n   * @param {PointerEvent} pointerEvent Pointer\n   * event.\n   * @private\n   */\n  relayEvent_(pointerEvent) {\n    const dragging = !!(this.down_ && this.isMoving_(pointerEvent));\n    this.dispatchEvent(new MapBrowserPointerEvent(\n      pointerEvent.type, this.map_, pointerEvent, dragging));\n  }\n\n  /**\n   * @param {PointerEvent} pointerEvent Pointer\n   * event.\n   * @return {boolean} Is moving.\n   * @private\n   */\n  isMoving_(pointerEvent) {\n    return this.dragging_ ||\n        Math.abs(pointerEvent.clientX - this.down_.clientX) > this.moveTolerance_ ||\n        Math.abs(pointerEvent.clientY - this.down_.clientY) > this.moveTolerance_;\n  }\n\n  /**\n   * @inheritDoc\n   */\n  disposeInternal() {\n    if (this.relayedListenerKey_) {\n      unlistenByKey(this.relayedListenerKey_);\n      this.relayedListenerKey_ = null;\n    }\n    if (this.pointerdownListenerKey_) {\n      unlistenByKey(this.pointerdownListenerKey_);\n      this.pointerdownListenerKey_ = null;\n    }\n\n    this.dragListenerKeys_.forEach(unlistenByKey);\n    this.dragListenerKeys_.length = 0;\n\n    this.element_ = null;\n    super.disposeInternal();\n  }\n}\n\n\nexport default MapBrowserEventHandler;\n","/**\n * @module ol/PluggableMap\n */\nimport {getUid} from './util.js';\nimport Collection from './Collection.js';\nimport CollectionEventType from './CollectionEventType.js';\nimport MapBrowserEvent from './MapBrowserEvent.js';\nimport MapBrowserEventHandler from './MapBrowserEventHandler.js';\nimport MapBrowserEventType from './MapBrowserEventType.js';\nimport MapEvent from './MapEvent.js';\nimport MapEventType from './MapEventType.js';\nimport MapProperty from './MapProperty.js';\nimport RenderEventType from './render/EventType.js';\nimport BaseObject, {getChangeEventType} from './Object.js';\nimport ObjectEventType from './ObjectEventType.js';\nimport TileQueue from './TileQueue.js';\nimport View from './View.js';\nimport ViewHint from './ViewHint.js';\nimport {assert} from './asserts.js';\nimport {removeNode} from './dom.js';\nimport {listen, unlistenByKey} from './events.js';\nimport EventType from './events/EventType.js';\nimport {clone, createOrUpdateEmpty, equals, getForViewAndSize, isEmpty} from './extent.js';\nimport {TRUE} from './functions.js';\nimport {DEVICE_PIXEL_RATIO, IMAGE_DECODE} from './has.js';\nimport LayerGroup from './layer/Group.js';\nimport {hasArea} from './size.js';\nimport {DROP} from './structs/PriorityQueue.js';\nimport {create as createTransform, apply as applyTransform} from './transform.js';\nimport {toUserCoordinate, fromUserCoordinate} from './proj.js';\n\n\n/**\n * State of the current frame. Only `pixelRatio`, `time` and `viewState` should\n * be used in applications.\n * @typedef {Object} FrameState\n * @property {number} pixelRatio The pixel ratio of the frame.\n * @property {number} time The time when rendering of the frame was requested.\n * @property {import(\"./View.js\").State} viewState The state of the current view.\n * @property {boolean} animate\n * @property {import(\"./transform.js\").Transform} coordinateToPixelTransform\n * @property {null|import(\"./extent.js\").Extent} extent\n * @property {Array<DeclutterItems>} declutterItems\n * @property {number} index\n * @property {Array<import(\"./layer/Layer.js\").State>} layerStatesArray\n * @property {number} layerIndex\n * @property {import(\"./transform.js\").Transform} pixelToCoordinateTransform\n * @property {Array<PostRenderFunction>} postRenderFunctions\n * @property {import(\"./size.js\").Size} size\n * @property {TileQueue} tileQueue\n * @property {!Object<string, Object<string, boolean>>} usedTiles\n * @property {Array<number>} viewHints\n * @property {!Object<string, Object<string, boolean>>} wantedTiles\n */\n\n\n/**\n * @typedef {Object} DeclutterItems\n * @property {Array<*>} items Declutter items of an executor.\n * @property {number} opacity Layer opacity.\n */\n\n\n/**\n * @typedef {function(PluggableMap, ?FrameState): any} PostRenderFunction\n */\n\n\n/**\n * @typedef {Object} AtPixelOptions\n * @property {undefined|function(import(\"./layer/Layer.js\").default): boolean} [layerFilter] Layer filter\n * function. The filter function will receive one argument, the\n * {@link module:ol/layer/Layer layer-candidate} and it should return a boolean value.\n * Only layers which are visible and for which this function returns `true`\n * will be tested for features. By default, all visible layers will be tested.\n * @property {number} [hitTolerance=0] Hit-detection tolerance in pixels. Pixels\n * inside the radius around the given position will be checked for features.\n * @property {boolean} [checkWrapped=true] Check-Wrapped Will check for for wrapped geometries inside the range of\n *   +/- 1 world width. Works only if a projection is used that can be wrapped.\n */\n\n\n/**\n * @typedef {Object} MapOptionsInternal\n * @property {Collection<import(\"./control/Control.js\").default>} [controls]\n * @property {Collection<import(\"./interaction/Interaction.js\").default>} [interactions]\n * @property {HTMLElement|Document} keyboardEventTarget\n * @property {Collection<import(\"./Overlay.js\").default>} overlays\n * @property {Object<string, *>} values\n */\n\n\n/**\n * Object literal with config options for the map.\n * @typedef {Object} MapOptions\n * @property {Collection<import(\"./control/Control.js\").default>|Array<import(\"./control/Control.js\").default>} [controls]\n * Controls initially added to the map. If not specified,\n * {@link module:ol/control~defaults} is used.\n * @property {number} [pixelRatio=window.devicePixelRatio] The ratio between\n * physical pixels and device-independent pixels (dips) on the device.\n * @property {Collection<import(\"./interaction/Interaction.js\").default>|Array<import(\"./interaction/Interaction.js\").default>} [interactions]\n * Interactions that are initially added to the map. If not specified,\n * {@link module:ol/interaction~defaults} is used.\n * @property {HTMLElement|Document|string} [keyboardEventTarget] The element to\n * listen to keyboard events on. This determines when the `KeyboardPan` and\n * `KeyboardZoom` interactions trigger. For example, if this option is set to\n * `document` the keyboard interactions will always trigger. If this option is\n * not specified, the element the library listens to keyboard events on is the\n * map target (i.e. the user-provided div for the map). If this is not\n * `document`, the target element needs to be focused for key events to be\n * emitted, requiring that the target element has a `tabindex` attribute.\n * @property {Array<import(\"./layer/Base.js\").default>|Collection<import(\"./layer/Base.js\").default>|LayerGroup} [layers]\n * Layers. If this is not defined, a map with no layers will be rendered. Note\n * that layers are rendered in the order supplied, so if you want, for example,\n * a vector layer to appear on top of a tile layer, it must come after the tile\n * layer.\n * @property {number} [maxTilesLoading=16] Maximum number tiles to load\n * simultaneously.\n * @property {number} [moveTolerance=1] The minimum distance in pixels the\n * cursor must move to be detected as a map move event instead of a click.\n * Increasing this value can make it easier to click on the map.\n * @property {Collection<import(\"./Overlay.js\").default>|Array<import(\"./Overlay.js\").default>} [overlays]\n * Overlays initially added to the map. By default, no overlays are added.\n * @property {HTMLElement|string} [target] The container for the map, either the\n * element itself or the `id` of the element. If not specified at construction\n * time, {@link module:ol/Map~Map#setTarget} must be called for the map to be\n * rendered.\n * @property {View} [view] The map's view.  No layer sources will be\n * fetched unless this is specified at construction time or through\n * {@link module:ol/Map~Map#setView}.\n */\n\n\n/**\n * @fires import(\"./MapBrowserEvent.js\").MapBrowserEvent\n * @fires import(\"./MapEvent.js\").MapEvent\n * @fires import(\"./render/Event.js\").default#precompose\n * @fires import(\"./render/Event.js\").default#postcompose\n * @fires import(\"./render/Event.js\").default#rendercomplete\n * @api\n */\nclass PluggableMap extends BaseObject {\n\n  /**\n   * @param {MapOptions} options Map options.\n   */\n  constructor(options) {\n\n    super();\n\n    const optionsInternal = createOptionsInternal(options);\n\n    /** @private */\n    this.boundHandleBrowserEvent_ = this.handleBrowserEvent.bind(this);\n\n\n    /**\n     * @type {number}\n     * @private\n     */\n    this.maxTilesLoading_ = options.maxTilesLoading !== undefined ? options.maxTilesLoading : 16;\n\n    /**\n     * @private\n     * @type {number}\n     */\n    this.pixelRatio_ = options.pixelRatio !== undefined ?\n      options.pixelRatio : DEVICE_PIXEL_RATIO;\n\n    /**\n     * @private\n     * @type {*}\n     */\n    this.postRenderTimeoutHandle_;\n\n    /**\n     * @private\n     * @type {number|undefined}\n     */\n    this.animationDelayKey_;\n\n    /**\n     * @private\n     */\n    this.animationDelay_ = function() {\n      this.animationDelayKey_ = undefined;\n      this.renderFrame_(Date.now());\n    }.bind(this);\n\n    /**\n     * @private\n     * @type {import(\"./transform.js\").Transform}\n     */\n    this.coordinateToPixelTransform_ = createTransform();\n\n    /**\n     * @private\n     * @type {import(\"./transform.js\").Transform}\n     */\n    this.pixelToCoordinateTransform_ = createTransform();\n\n    /**\n     * @private\n     * @type {number}\n     */\n    this.frameIndex_ = 0;\n\n    /**\n     * @private\n     * @type {?FrameState}\n     */\n    this.frameState_ = null;\n\n    /**\n     * The extent at the previous 'moveend' event.\n     * @private\n     * @type {import(\"./extent.js\").Extent}\n     */\n    this.previousExtent_ = null;\n\n    /**\n     * @private\n     * @type {?import(\"./events.js\").EventsKey}\n     */\n    this.viewPropertyListenerKey_ = null;\n\n    /**\n     * @private\n     * @type {?import(\"./events.js\").EventsKey}\n     */\n    this.viewChangeListenerKey_ = null;\n\n    /**\n     * @private\n     * @type {Array<import(\"./events.js\").EventsKey>}\n     */\n    this.layerGroupPropertyListenerKeys_ = null;\n\n    /**\n     * @private\n     * @type {!HTMLElement}\n     */\n    this.viewport_ = document.createElement('div');\n    this.viewport_.className = 'ol-viewport' + ('ontouchstart' in window ? ' ol-touch' : '');\n    this.viewport_.style.position = 'relative';\n    this.viewport_.style.overflow = 'hidden';\n    this.viewport_.style.width = '100%';\n    this.viewport_.style.height = '100%';\n    // prevent page zoom on IE >= 10 browsers\n    this.viewport_.style.msTouchAction = 'none';\n    this.viewport_.style.touchAction = 'none';\n\n    /**\n     * @private\n     * @type {!HTMLElement}\n     */\n    this.overlayContainer_ = document.createElement('div');\n    this.overlayContainer_.style.position = 'absolute';\n    this.overlayContainer_.style.zIndex = '0';\n    this.overlayContainer_.style.width = '100%';\n    this.overlayContainer_.style.height = '100%';\n    this.overlayContainer_.className = 'ol-overlaycontainer';\n    this.viewport_.appendChild(this.overlayContainer_);\n\n    /**\n     * @private\n     * @type {!HTMLElement}\n     */\n    this.overlayContainerStopEvent_ = document.createElement('div');\n    this.overlayContainerStopEvent_.style.position = 'absolute';\n    this.overlayContainerStopEvent_.style.zIndex = '0';\n    this.overlayContainerStopEvent_.style.width = '100%';\n    this.overlayContainerStopEvent_.style.height = '100%';\n    this.overlayContainerStopEvent_.className = 'ol-overlaycontainer-stopevent';\n    this.viewport_.appendChild(this.overlayContainerStopEvent_);\n\n    /**\n     * @private\n     * @type {MapBrowserEventHandler}\n     */\n    this.mapBrowserEventHandler_ = new MapBrowserEventHandler(this, options.moveTolerance);\n    const handleMapBrowserEvent = this.handleMapBrowserEvent.bind(this);\n    for (const key in MapBrowserEventType) {\n      this.mapBrowserEventHandler_.addEventListener(MapBrowserEventType[key], handleMapBrowserEvent);\n    }\n\n    /**\n     * @private\n     * @type {HTMLElement|Document}\n     */\n    this.keyboardEventTarget_ = optionsInternal.keyboardEventTarget;\n\n    /**\n     * @private\n     * @type {Array<import(\"./events.js\").EventsKey>}\n     */\n    this.keyHandlerKeys_ = null;\n\n    const handleBrowserEvent = this.handleBrowserEvent.bind(this);\n    this.viewport_.addEventListener(EventType.CONTEXTMENU, handleBrowserEvent, false);\n    this.viewport_.addEventListener(EventType.WHEEL, handleBrowserEvent, false);\n\n    /**\n     * @type {Collection<import(\"./control/Control.js\").default>}\n     * @protected\n     */\n    this.controls = optionsInternal.controls || new Collection();\n\n    /**\n     * @type {Collection<import(\"./interaction/Interaction.js\").default>}\n     * @protected\n     */\n    this.interactions = optionsInternal.interactions || new Collection();\n\n    /**\n     * @type {import(\"./events/Target.js\").default}\n     */\n    this.labelCache_ = null;\n\n    /**\n     * @type {import(\"./events.js\").EventsKey}\n     */\n    this.labelCacheListenerKey_;\n\n    /**\n     * @type {Collection<import(\"./Overlay.js\").default>}\n     * @private\n     */\n    this.overlays_ = optionsInternal.overlays;\n\n    /**\n     * A lookup of overlays by id.\n     * @private\n     * @type {Object<string, import(\"./Overlay.js\").default>}\n     */\n    this.overlayIdIndex_ = {};\n\n    /**\n     * @type {import(\"./renderer/Map.js\").default}\n     * @private\n     */\n    this.renderer_ = null;\n\n    /**\n     * @type {function(Event): void|undefined}\n     * @private\n     */\n    this.handleResize_;\n\n    /**\n     * @private\n     * @type {!Array<PostRenderFunction>}\n     */\n    this.postRenderFunctions_ = [];\n\n    /**\n     * @private\n     * @type {TileQueue}\n     */\n    this.tileQueue_ = new TileQueue(\n      this.getTilePriority.bind(this),\n      this.handleTileChange_.bind(this));\n\n    this.addEventListener(getChangeEventType(MapProperty.LAYERGROUP), this.handleLayerGroupChanged_);\n    this.addEventListener(getChangeEventType(MapProperty.VIEW), this.handleViewChanged_);\n    this.addEventListener(getChangeEventType(MapProperty.SIZE), this.handleSizeChanged_);\n    this.addEventListener(getChangeEventType(MapProperty.TARGET), this.handleTargetChanged_);\n\n    // setProperties will trigger the rendering of the map if the map\n    // is \"defined\" already.\n    this.setProperties(optionsInternal.values);\n\n    this.controls.forEach(\n      /**\n       * @param {import(\"./control/Control.js\").default} control Control.\n       * @this {PluggableMap}\n       */\n      (function(control) {\n        control.setMap(this);\n      }).bind(this));\n\n    this.controls.addEventListener(CollectionEventType.ADD,\n      /**\n       * @param {import(\"./Collection.js\").CollectionEvent} event CollectionEvent.\n       */\n      function(event) {\n        event.element.setMap(this);\n      }.bind(this));\n\n    this.controls.addEventListener(CollectionEventType.REMOVE,\n      /**\n       * @param {import(\"./Collection.js\").CollectionEvent} event CollectionEvent.\n       */\n      function(event) {\n        event.element.setMap(null);\n      }.bind(this));\n\n    this.interactions.forEach(\n      /**\n       * @param {import(\"./interaction/Interaction.js\").default} interaction Interaction.\n       * @this {PluggableMap}\n       */\n      (function(interaction) {\n        interaction.setMap(this);\n      }).bind(this));\n\n    this.interactions.addEventListener(CollectionEventType.ADD,\n      /**\n       * @param {import(\"./Collection.js\").CollectionEvent} event CollectionEvent.\n       */\n      function(event) {\n        event.element.setMap(this);\n      }.bind(this));\n\n    this.interactions.addEventListener(CollectionEventType.REMOVE,\n      /**\n       * @param {import(\"./Collection.js\").CollectionEvent} event CollectionEvent.\n       */\n      function(event) {\n        event.element.setMap(null);\n      }.bind(this));\n\n    this.overlays_.forEach(this.addOverlayInternal_.bind(this));\n\n    this.overlays_.addEventListener(CollectionEventType.ADD,\n      /**\n       * @param {import(\"./Collection.js\").CollectionEvent} event CollectionEvent.\n       */\n      function(event) {\n        this.addOverlayInternal_(/** @type {import(\"./Overlay.js\").default} */ (event.element));\n      }.bind(this));\n\n    this.overlays_.addEventListener(CollectionEventType.REMOVE,\n      /**\n       * @param {import(\"./Collection.js\").CollectionEvent} event CollectionEvent.\n       */\n      function(event) {\n        const overlay = /** @type {import(\"./Overlay.js\").default} */ (event.element);\n        const id = overlay.getId();\n        if (id !== undefined) {\n          delete this.overlayIdIndex_[id.toString()];\n        }\n        event.element.setMap(null);\n      }.bind(this));\n\n  }\n\n  /**\n   * @abstract\n   * @return {import(\"./renderer/Map.js\").default} The map renderer\n   */\n  createRenderer() {\n    throw new Error('Use a map type that has a createRenderer method');\n  }\n\n  /**\n   * Add the given control to the map.\n   * @param {import(\"./control/Control.js\").default} control Control.\n   * @api\n   */\n  addControl(control) {\n    this.getControls().push(control);\n  }\n\n  /**\n   * Add the given interaction to the map. If you want to add an interaction\n   * at another point of the collection use `getInteraction()` and the methods\n   * available on {@link module:ol/Collection~Collection}. This can be used to\n   * stop the event propagation from the handleEvent function. The interactions\n   * get to handle the events in the reverse order of this collection.\n   * @param {import(\"./interaction/Interaction.js\").default} interaction Interaction to add.\n   * @api\n   */\n  addInteraction(interaction) {\n    this.getInteractions().push(interaction);\n  }\n\n  /**\n   * Adds the given layer to the top of this map. If you want to add a layer\n   * elsewhere in the stack, use `getLayers()` and the methods available on\n   * {@link module:ol/Collection~Collection}.\n   * @param {import(\"./layer/Base.js\").default} layer Layer.\n   * @api\n   */\n  addLayer(layer) {\n    const layers = this.getLayerGroup().getLayers();\n    layers.push(layer);\n  }\n\n  /**\n   * Add the given overlay to the map.\n   * @param {import(\"./Overlay.js\").default} overlay Overlay.\n   * @api\n   */\n  addOverlay(overlay) {\n    this.getOverlays().push(overlay);\n  }\n\n  /**\n   * This deals with map's overlay collection changes.\n   * @param {import(\"./Overlay.js\").default} overlay Overlay.\n   * @private\n   */\n  addOverlayInternal_(overlay) {\n    const id = overlay.getId();\n    if (id !== undefined) {\n      this.overlayIdIndex_[id.toString()] = overlay;\n    }\n    overlay.setMap(this);\n  }\n\n  /**\n   *\n   * @inheritDoc\n   */\n  disposeInternal() {\n    this.mapBrowserEventHandler_.dispose();\n    this.viewport_.removeEventListener(EventType.CONTEXTMENU, this.boundHandleBrowserEvent_);\n    this.viewport_.removeEventListener(EventType.WHEEL, this.boundHandleBrowserEvent_);\n    if (this.handleResize_ !== undefined) {\n      removeEventListener(EventType.RESIZE, this.handleResize_, false);\n      this.handleResize_ = undefined;\n    }\n    this.setTarget(null);\n    super.disposeInternal();\n  }\n\n  /**\n   * Detect features that intersect a pixel on the viewport, and execute a\n   * callback with each intersecting feature. Layers included in the detection can\n   * be configured through the `layerFilter` option in `opt_options`.\n   * @param {import(\"./pixel.js\").Pixel} pixel Pixel.\n   * @param {function(this: S, import(\"./Feature.js\").FeatureLike,\n   *     import(\"./layer/Layer.js\").default): T} callback Feature callback. The callback will be\n   *     called with two arguments. The first argument is one\n   *     {@link module:ol/Feature feature} or\n   *     {@link module:ol/render/Feature render feature} at the pixel, the second is\n   *     the {@link module:ol/layer/Layer layer} of the feature and will be null for\n   *     unmanaged layers. To stop detection, callback functions can return a\n   *     truthy value.\n   * @param {AtPixelOptions=} opt_options Optional options.\n   * @return {T|undefined} Callback result, i.e. the return value of last\n   * callback execution, or the first truthy callback return value.\n   * @template S,T\n   * @api\n   */\n  forEachFeatureAtPixel(pixel, callback, opt_options) {\n    if (!this.frameState_) {\n      return;\n    }\n    const coordinate = this.getCoordinateFromPixelInternal(pixel);\n    opt_options = opt_options !== undefined ? opt_options :\n      /** @type {AtPixelOptions} */ ({});\n    const hitTolerance = opt_options.hitTolerance !== undefined ?\n      opt_options.hitTolerance * this.frameState_.pixelRatio : 0;\n    const layerFilter = opt_options.layerFilter !== undefined ?\n      opt_options.layerFilter : TRUE;\n    const checkWrapped = opt_options.checkWrapped !== false;\n    return this.renderer_.forEachFeatureAtCoordinate(\n      coordinate, this.frameState_, hitTolerance, checkWrapped, callback, null,\n      layerFilter, null);\n  }\n\n  /**\n   * Get all features that intersect a pixel on the viewport.\n   * @param {import(\"./pixel.js\").Pixel} pixel Pixel.\n   * @param {AtPixelOptions=} opt_options Optional options.\n   * @return {Array<import(\"./Feature.js\").FeatureLike>} The detected features or\n   * an empty array if none were found.\n   * @api\n   */\n  getFeaturesAtPixel(pixel, opt_options) {\n    const features = [];\n    this.forEachFeatureAtPixel(pixel, function(feature) {\n      features.push(feature);\n    }, opt_options);\n    return features;\n  }\n\n  /**\n   * Detect layers that have a color value at a pixel on the viewport, and\n   * execute a callback with each matching layer. Layers included in the\n   * detection can be configured through `opt_layerFilter`.\n   *\n   * Note: this may give false positives unless the map layers have had different `className`\n   * properties assigned to them.\n   *\n   * @param {import(\"./pixel.js\").Pixel} pixel Pixel.\n   * @param {function(this: S, import(\"./layer/Layer.js\").default, (Uint8ClampedArray|Uint8Array)): T} callback\n   *     Layer callback. This callback will receive two arguments: first is the\n   *     {@link module:ol/layer/Layer layer}, second argument is an array representing\n   *     [R, G, B, A] pixel values (0 - 255) and will be `null` for layer types\n   *     that do not currently support this argument. To stop detection, callback\n   *     functions can return a truthy value.\n   * @param {AtPixelOptions=} opt_options Configuration options.\n   * @return {T|undefined} Callback result, i.e. the return value of last\n   * callback execution, or the first truthy callback return value.\n   * @template S,T\n   * @api\n   */\n  forEachLayerAtPixel(pixel, callback, opt_options) {\n    if (!this.frameState_) {\n      return;\n    }\n    const options = opt_options || /** @type {AtPixelOptions} */ ({});\n    const hitTolerance = options.hitTolerance !== undefined ?\n      opt_options.hitTolerance * this.frameState_.pixelRatio : 0;\n    const layerFilter = options.layerFilter || TRUE;\n    return this.renderer_.forEachLayerAtPixel(pixel, this.frameState_, hitTolerance, callback, layerFilter);\n  }\n\n  /**\n   * Detect if features intersect a pixel on the viewport. Layers included in the\n   * detection can be configured through `opt_layerFilter`.\n   * @param {import(\"./pixel.js\").Pixel} pixel Pixel.\n   * @param {AtPixelOptions=} opt_options Optional options.\n   * @return {boolean} Is there a feature at the given pixel?\n   * @api\n   */\n  hasFeatureAtPixel(pixel, opt_options) {\n    if (!this.frameState_) {\n      return false;\n    }\n    const coordinate = this.getCoordinateFromPixelInternal(pixel);\n    opt_options = opt_options !== undefined ? opt_options :\n      /** @type {AtPixelOptions} */ ({});\n    const layerFilter = opt_options.layerFilter !== undefined ? opt_options.layerFilter : TRUE;\n    const hitTolerance = opt_options.hitTolerance !== undefined ?\n      opt_options.hitTolerance * this.frameState_.pixelRatio : 0;\n    const checkWrapped = opt_options.checkWrapped !== false;\n    return this.renderer_.hasFeatureAtCoordinate(\n      coordinate, this.frameState_, hitTolerance, checkWrapped, layerFilter, null);\n  }\n\n  /**\n   * Returns the coordinate in user projection for a browser event.\n   * @param {Event} event Event.\n   * @return {import(\"./coordinate.js\").Coordinate} Coordinate.\n   * @api\n   */\n  getEventCoordinate(event) {\n    return this.getCoordinateFromPixel(this.getEventPixel(event));\n  }\n\n  /**\n   * Returns the coordinate in view projection for a browser event.\n   * @param {Event} event Event.\n   * @return {import(\"./coordinate.js\").Coordinate} Coordinate.\n   */\n  getEventCoordinateInternal(event) {\n    return this.getCoordinateFromPixelInternal(this.getEventPixel(event));\n  }\n\n  /**\n   * Returns the map pixel position for a browser event relative to the viewport.\n   * @param {Event|TouchEvent} event Event.\n   * @return {import(\"./pixel.js\").Pixel} Pixel.\n   * @api\n   */\n  getEventPixel(event) {\n    const viewportPosition = this.viewport_.getBoundingClientRect();\n    const eventPosition = 'changedTouches' in event ?\n      /** @type {TouchEvent} */ (event).changedTouches[0] :\n      /** @type {MouseEvent} */ (event);\n\n    return [\n      eventPosition.clientX - viewportPosition.left,\n      eventPosition.clientY - viewportPosition.top\n    ];\n  }\n\n  /**\n   * Get the target in which this map is rendered.\n   * Note that this returns what is entered as an option or in setTarget:\n   * if that was an element, it returns an element; if a string, it returns that.\n   * @return {HTMLElement|string|undefined} The Element or id of the Element that the\n   *     map is rendered in.\n   * @observable\n   * @api\n   */\n  getTarget() {\n    return /** @type {HTMLElement|string|undefined} */ (this.get(MapProperty.TARGET));\n  }\n\n  /**\n   * Get the DOM element into which this map is rendered. In contrast to\n   * `getTarget` this method always return an `Element`, or `null` if the\n   * map has no target.\n   * @return {HTMLElement} The element that the map is rendered in.\n   * @api\n   */\n  getTargetElement() {\n    const target = this.getTarget();\n    if (target !== undefined) {\n      return typeof target === 'string' ? document.getElementById(target) : target;\n    } else {\n      return null;\n    }\n  }\n\n  /**\n   * Get the coordinate for a given pixel.  This returns a coordinate in the\n   * user projection.\n   * @param {import(\"./pixel.js\").Pixel} pixel Pixel position in the map viewport.\n   * @return {import(\"./coordinate.js\").Coordinate} The coordinate for the pixel position.\n   * @api\n   */\n  getCoordinateFromPixel(pixel) {\n    return toUserCoordinate(this.getCoordinateFromPixelInternal(pixel), this.getView().getProjection());\n  }\n\n  /**\n   * Get the coordinate for a given pixel.  This returns a coordinate in the\n   * map view projection.\n   * @param {import(\"./pixel.js\").Pixel} pixel Pixel position in the map viewport.\n   * @return {import(\"./coordinate.js\").Coordinate} The coordinate for the pixel position.\n   */\n  getCoordinateFromPixelInternal(pixel) {\n    const frameState = this.frameState_;\n    if (!frameState) {\n      return null;\n    } else {\n      return applyTransform(frameState.pixelToCoordinateTransform, pixel.slice());\n    }\n  }\n\n  /**\n   * Get the map controls. Modifying this collection changes the controls\n   * associated with the map.\n   * @return {Collection<import(\"./control/Control.js\").default>} Controls.\n   * @api\n   */\n  getControls() {\n    return this.controls;\n  }\n\n  /**\n   * Get the map overlays. Modifying this collection changes the overlays\n   * associated with the map.\n   * @return {Collection<import(\"./Overlay.js\").default>} Overlays.\n   * @api\n   */\n  getOverlays() {\n    return this.overlays_;\n  }\n\n  /**\n   * Get an overlay by its identifier (the value returned by overlay.getId()).\n   * Note that the index treats string and numeric identifiers as the same. So\n   * `map.getOverlayById(2)` will return an overlay with id `'2'` or `2`.\n   * @param {string|number} id Overlay identifier.\n   * @return {import(\"./Overlay.js\").default} Overlay.\n   * @api\n   */\n  getOverlayById(id) {\n    const overlay = this.overlayIdIndex_[id.toString()];\n    return overlay !== undefined ? overlay : null;\n  }\n\n  /**\n   * Get the map interactions. Modifying this collection changes the interactions\n   * associated with the map.\n   *\n   * Interactions are used for e.g. pan, zoom and rotate.\n   * @return {Collection<import(\"./interaction/Interaction.js\").default>} Interactions.\n   * @api\n   */\n  getInteractions() {\n    return this.interactions;\n  }\n\n  /**\n   * Get the layergroup associated with this map.\n   * @return {LayerGroup} A layer group containing the layers in this map.\n   * @observable\n   * @api\n   */\n  getLayerGroup() {\n    return (\n      /** @type {LayerGroup} */ (this.get(MapProperty.LAYERGROUP))\n    );\n  }\n\n  /**\n   * Get the collection of layers associated with this map.\n   * @return {!Collection<import(\"./layer/Base.js\").default>} Layers.\n   * @api\n   */\n  getLayers() {\n    const layers = this.getLayerGroup().getLayers();\n    return layers;\n  }\n\n  /**\n   * @return {boolean} Layers have sources that are still loading.\n   */\n  getLoading() {\n    const layerStatesArray = this.getLayerGroup().getLayerStatesArray();\n    for (let i = 0, ii = layerStatesArray.length; i < ii; ++i) {\n      const layer = layerStatesArray[i].layer;\n      const source = /** @type {import(\"./layer/Layer.js\").default} */ (layer).getSource();\n      if (source && source.loading) {\n        return true;\n      }\n    }\n    return false;\n  }\n\n  /**\n   * Get the pixel for a coordinate.  This takes a coordinate in the user\n   * projection and returns the corresponding pixel.\n   * @param {import(\"./coordinate.js\").Coordinate} coordinate A map coordinate.\n   * @return {import(\"./pixel.js\").Pixel} A pixel position in the map viewport.\n   * @api\n   */\n  getPixelFromCoordinate(coordinate) {\n    const viewCoordinate = fromUserCoordinate(coordinate, this.getView().getProjection());\n    return this.getPixelFromCoordinateInternal(viewCoordinate);\n  }\n\n  /**\n   * Get the pixel for a coordinate.  This takes a coordinate in the map view\n   * projection and returns the corresponding pixel.\n   * @param {import(\"./coordinate.js\").Coordinate} coordinate A map coordinate.\n   * @return {import(\"./pixel.js\").Pixel} A pixel position in the map viewport.\n   */\n  getPixelFromCoordinateInternal(coordinate) {\n    const frameState = this.frameState_;\n    if (!frameState) {\n      return null;\n    } else {\n      return applyTransform(frameState.coordinateToPixelTransform, coordinate.slice(0, 2));\n    }\n  }\n\n  /**\n   * Get the map renderer.\n   * @return {import(\"./renderer/Map.js\").default} Renderer\n   */\n  getRenderer() {\n    return this.renderer_;\n  }\n\n  /**\n   * Get the size of this map.\n   * @return {import(\"./size.js\").Size|undefined} The size in pixels of the map in the DOM.\n   * @observable\n   * @api\n   */\n  getSize() {\n    return (\n      /** @type {import(\"./size.js\").Size|undefined} */ (this.get(MapProperty.SIZE))\n    );\n  }\n\n  /**\n   * Get the view associated with this map. A view manages properties such as\n   * center and resolution.\n   * @return {View} The view that controls this map.\n   * @observable\n   * @api\n   */\n  getView() {\n    return (\n      /** @type {View} */ (this.get(MapProperty.VIEW))\n    );\n  }\n\n  /**\n   * Get the element that serves as the map viewport.\n   * @return {HTMLElement} Viewport.\n   * @api\n   */\n  getViewport() {\n    return this.viewport_;\n  }\n\n  /**\n   * Get the element that serves as the container for overlays.  Elements added to\n   * this container will let mousedown and touchstart events through to the map,\n   * so clicks and gestures on an overlay will trigger {@link module:ol/MapBrowserEvent~MapBrowserEvent}\n   * events.\n   * @return {!HTMLElement} The map's overlay container.\n   */\n  getOverlayContainer() {\n    return this.overlayContainer_;\n  }\n\n  /**\n   * Get the element that serves as a container for overlays that don't allow\n   * event propagation. Elements added to this container won't let mousedown and\n   * touchstart events through to the map, so clicks and gestures on an overlay\n   * don't trigger any {@link module:ol/MapBrowserEvent~MapBrowserEvent}.\n   * @return {!HTMLElement} The map's overlay container that stops events.\n   */\n  getOverlayContainerStopEvent() {\n    return this.overlayContainerStopEvent_;\n  }\n\n  /**\n   * @param {import(\"./Tile.js\").default} tile Tile.\n   * @param {string} tileSourceKey Tile source key.\n   * @param {import(\"./coordinate.js\").Coordinate} tileCenter Tile center.\n   * @param {number} tileResolution Tile resolution.\n   * @return {number} Tile priority.\n   */\n  getTilePriority(tile, tileSourceKey, tileCenter, tileResolution) {\n    // Filter out tiles at higher zoom levels than the current zoom level, or that\n    // are outside the visible extent.\n    const frameState = this.frameState_;\n    if (!frameState || !(tileSourceKey in frameState.wantedTiles)) {\n      return DROP;\n    }\n    if (!frameState.wantedTiles[tileSourceKey][tile.getKey()]) {\n      return DROP;\n    }\n    // Prioritize the highest zoom level tiles closest to the focus.\n    // Tiles at higher zoom levels are prioritized using Math.log(tileResolution).\n    // Within a zoom level, tiles are prioritized by the distance in pixels between\n    // the center of the tile and the center of the viewport.  The factor of 65536\n    // means that the prioritization should behave as desired for tiles up to\n    // 65536 * Math.log(2) = 45426 pixels from the focus.\n    const center = frameState.viewState.center;\n    const deltaX = tileCenter[0] - center[0];\n    const deltaY = tileCenter[1] - center[1];\n    return 65536 * Math.log(tileResolution) +\n        Math.sqrt(deltaX * deltaX + deltaY * deltaY) / tileResolution;\n  }\n\n  /**\n   * @param {Event} browserEvent Browser event.\n   * @param {string=} opt_type Type.\n   */\n  handleBrowserEvent(browserEvent, opt_type) {\n    const type = opt_type || browserEvent.type;\n    const mapBrowserEvent = new MapBrowserEvent(type, this, browserEvent);\n    this.handleMapBrowserEvent(mapBrowserEvent);\n  }\n\n  /**\n   * @param {MapBrowserEvent} mapBrowserEvent The event to handle.\n   */\n  handleMapBrowserEvent(mapBrowserEvent) {\n    if (!this.frameState_) {\n      // With no view defined, we cannot translate pixels into geographical\n      // coordinates so interactions cannot be used.\n      return;\n    }\n    let target = mapBrowserEvent.originalEvent.target;\n    while (target instanceof HTMLElement) {\n      if (target.parentElement === this.overlayContainerStopEvent_) {\n        return;\n      }\n      target = target.parentElement;\n    }\n    mapBrowserEvent.frameState = this.frameState_;\n    const interactionsArray = this.getInteractions().getArray();\n    if (this.dispatchEvent(mapBrowserEvent) !== false) {\n      for (let i = interactionsArray.length - 1; i >= 0; i--) {\n        const interaction = interactionsArray[i];\n        if (!interaction.getActive()) {\n          continue;\n        }\n        const cont = interaction.handleEvent(mapBrowserEvent);\n        if (!cont) {\n          break;\n        }\n      }\n    }\n  }\n\n  /**\n   * @protected\n   */\n  handlePostRender() {\n\n    const frameState = this.frameState_;\n\n    // Manage the tile queue\n    // Image loads are expensive and a limited resource, so try to use them\n    // efficiently:\n    // * When the view is static we allow a large number of parallel tile loads\n    //   to complete the frame as quickly as possible.\n    // * When animating or interacting, image loads can cause janks, so we reduce\n    //   the maximum number of loads per frame and limit the number of parallel\n    //   tile loads to remain reactive to view changes and to reduce the chance of\n    //   loading tiles that will quickly disappear from view.\n    const tileQueue = this.tileQueue_;\n    if (!tileQueue.isEmpty()) {\n      let maxTotalLoading = this.maxTilesLoading_;\n      let maxNewLoads = maxTotalLoading;\n      if (frameState) {\n        const hints = frameState.viewHints;\n        if (hints[ViewHint.ANIMATING] || hints[ViewHint.INTERACTING]) {\n          const lowOnFrameBudget = !IMAGE_DECODE && Date.now() - frameState.time > 8;\n          maxTotalLoading = lowOnFrameBudget ? 0 : 8;\n          maxNewLoads = lowOnFrameBudget ? 0 : 2;\n        }\n      }\n      if (tileQueue.getTilesLoading() < maxTotalLoading) {\n        tileQueue.reprioritize(); // FIXME only call if view has changed\n        tileQueue.loadMoreTiles(maxTotalLoading, maxNewLoads);\n      }\n    }\n\n    if (frameState && this.hasListener(RenderEventType.RENDERCOMPLETE) && !frameState.animate &&\n        !this.tileQueue_.getTilesLoading() && !this.getLoading()) {\n      this.renderer_.dispatchRenderEvent(RenderEventType.RENDERCOMPLETE, frameState);\n    }\n\n    const postRenderFunctions = this.postRenderFunctions_;\n    for (let i = 0, ii = postRenderFunctions.length; i < ii; ++i) {\n      postRenderFunctions[i](this, frameState);\n    }\n    postRenderFunctions.length = 0;\n  }\n\n  /**\n   * @private\n   */\n  handleSizeChanged_() {\n    if (this.getView()) {\n      this.getView().resolveConstraints(0);\n    }\n\n    this.render();\n  }\n\n  /**\n   * @private\n   */\n  handleTargetChanged_() {\n    // target may be undefined, null, a string or an Element.\n    // If it's a string we convert it to an Element before proceeding.\n    // If it's not now an Element we remove the viewport from the DOM.\n    // If it's an Element we append the viewport element to it.\n\n    let targetElement;\n    if (this.getTarget()) {\n      targetElement = this.getTargetElement();\n    }\n\n    if (this.keyHandlerKeys_) {\n      for (let i = 0, ii = this.keyHandlerKeys_.length; i < ii; ++i) {\n        unlistenByKey(this.keyHandlerKeys_[i]);\n      }\n      this.keyHandlerKeys_ = null;\n    }\n\n    if (!targetElement) {\n      if (this.renderer_) {\n        clearTimeout(this.postRenderTimeoutHandle_);\n        this.postRenderFunctions_.length = 0;\n        this.renderer_.dispose();\n        this.renderer_ = null;\n      }\n      if (this.animationDelayKey_) {\n        cancelAnimationFrame(this.animationDelayKey_);\n        this.animationDelayKey_ = undefined;\n      }\n      removeNode(this.viewport_);\n      if (this.handleResize_ !== undefined) {\n        removeEventListener(EventType.RESIZE, this.handleResize_, false);\n        this.handleResize_ = undefined;\n      }\n    } else {\n      targetElement.appendChild(this.viewport_);\n      if (!this.renderer_) {\n        this.renderer_ = this.createRenderer();\n      }\n\n      const keyboardEventTarget = !this.keyboardEventTarget_ ?\n        targetElement : this.keyboardEventTarget_;\n      this.keyHandlerKeys_ = [\n        listen(keyboardEventTarget, EventType.KEYDOWN, this.handleBrowserEvent, this),\n        listen(keyboardEventTarget, EventType.KEYPRESS, this.handleBrowserEvent, this)\n      ];\n\n      if (!this.handleResize_) {\n        this.handleResize_ = this.updateSize.bind(this);\n        window.addEventListener(EventType.RESIZE, this.handleResize_, false);\n      }\n    }\n\n    this.updateSize();\n    // updateSize calls setSize, so no need to call this.render\n    // ourselves here.\n  }\n\n  /**\n   * @private\n   */\n  handleTileChange_() {\n    this.render();\n  }\n\n  /**\n   * @private\n   */\n  handleViewPropertyChanged_() {\n    this.render();\n  }\n\n  /**\n   * @private\n   */\n  handleViewChanged_() {\n    if (this.viewPropertyListenerKey_) {\n      unlistenByKey(this.viewPropertyListenerKey_);\n      this.viewPropertyListenerKey_ = null;\n    }\n    if (this.viewChangeListenerKey_) {\n      unlistenByKey(this.viewChangeListenerKey_);\n      this.viewChangeListenerKey_ = null;\n    }\n    const view = this.getView();\n    if (view) {\n      this.viewport_.setAttribute('data-view', getUid(view));\n      this.viewPropertyListenerKey_ = listen(\n        view, ObjectEventType.PROPERTYCHANGE,\n        this.handleViewPropertyChanged_, this);\n      this.viewChangeListenerKey_ = listen(\n        view, EventType.CHANGE,\n        this.handleViewPropertyChanged_, this);\n\n      view.resolveConstraints(0);\n    }\n    this.render();\n  }\n\n  /**\n   * @private\n   */\n  handleLayerGroupChanged_() {\n    if (this.layerGroupPropertyListenerKeys_) {\n      this.layerGroupPropertyListenerKeys_.forEach(unlistenByKey);\n      this.layerGroupPropertyListenerKeys_ = null;\n    }\n    const layerGroup = this.getLayerGroup();\n    if (layerGroup) {\n      this.layerGroupPropertyListenerKeys_ = [\n        listen(\n          layerGroup, ObjectEventType.PROPERTYCHANGE,\n          this.render, this),\n        listen(\n          layerGroup, EventType.CHANGE,\n          this.render, this)\n      ];\n    }\n    this.render();\n  }\n\n  /**\n   * @return {boolean} Is rendered.\n   */\n  isRendered() {\n    return !!this.frameState_;\n  }\n\n  /**\n   * Requests an immediate render in a synchronous manner.\n   * @api\n   */\n  renderSync() {\n    if (this.animationDelayKey_) {\n      cancelAnimationFrame(this.animationDelayKey_);\n    }\n    this.animationDelay_();\n  }\n\n  /**\n   * Redraws all text after new fonts have loaded\n   */\n  redrawText() {\n    const layerStates = this.getLayerGroup().getLayerStatesArray();\n    for (let i = 0, ii = layerStates.length; i < ii; ++i) {\n      const layer = layerStates[i].layer;\n      if (layer.hasRenderer()) {\n        layer.getRenderer().handleFontsChanged();\n      }\n    }\n  }\n\n  /**\n   * Request a map rendering (at the next animation frame).\n   * @api\n   */\n  render() {\n    if (this.renderer_ && this.animationDelayKey_ === undefined) {\n      this.animationDelayKey_ = requestAnimationFrame(this.animationDelay_);\n    }\n  }\n\n  /**\n   * Remove the given control from the map.\n   * @param {import(\"./control/Control.js\").default} control Control.\n   * @return {import(\"./control/Control.js\").default|undefined} The removed control (or undefined\n   *     if the control was not found).\n   * @api\n   */\n  removeControl(control) {\n    return this.getControls().remove(control);\n  }\n\n  /**\n   * Remove the given interaction from the map.\n   * @param {import(\"./interaction/Interaction.js\").default} interaction Interaction to remove.\n   * @return {import(\"./interaction/Interaction.js\").default|undefined} The removed interaction (or\n   *     undefined if the interaction was not found).\n   * @api\n   */\n  removeInteraction(interaction) {\n    return this.getInteractions().remove(interaction);\n  }\n\n  /**\n   * Removes the given layer from the map.\n   * @param {import(\"./layer/Base.js\").default} layer Layer.\n   * @return {import(\"./layer/Base.js\").default|undefined} The removed layer (or undefined if the\n   *     layer was not found).\n   * @api\n   */\n  removeLayer(layer) {\n    const layers = this.getLayerGroup().getLayers();\n    return layers.remove(layer);\n  }\n\n  /**\n   * Remove the given overlay from the map.\n   * @param {import(\"./Overlay.js\").default} overlay Overlay.\n   * @return {import(\"./Overlay.js\").default|undefined} The removed overlay (or undefined\n   *     if the overlay was not found).\n   * @api\n   */\n  removeOverlay(overlay) {\n    return this.getOverlays().remove(overlay);\n  }\n\n  /**\n   * @param {number} time Time.\n   * @private\n   */\n  renderFrame_(time) {\n    const size = this.getSize();\n    const view = this.getView();\n    const previousFrameState = this.frameState_;\n    /** @type {?FrameState} */\n    let frameState = null;\n    if (size !== undefined && hasArea(size) && view && view.isDef()) {\n      const viewHints = view.getHints(this.frameState_ ? this.frameState_.viewHints : undefined);\n      const viewState = view.getState();\n      frameState = {\n        animate: false,\n        coordinateToPixelTransform: this.coordinateToPixelTransform_,\n        declutterItems: previousFrameState ? previousFrameState.declutterItems : [],\n        extent: getForViewAndSize(viewState.center, viewState.resolution, viewState.rotation, size),\n        index: this.frameIndex_++,\n        layerIndex: 0,\n        layerStatesArray: this.getLayerGroup().getLayerStatesArray(),\n        pixelRatio: this.pixelRatio_,\n        pixelToCoordinateTransform: this.pixelToCoordinateTransform_,\n        postRenderFunctions: [],\n        size: size,\n        tileQueue: this.tileQueue_,\n        time: time,\n        usedTiles: {},\n        viewState: viewState,\n        viewHints: viewHints,\n        wantedTiles: {}\n      };\n    }\n\n    this.frameState_ = frameState;\n    this.renderer_.renderFrame(frameState);\n\n    if (frameState) {\n      if (frameState.animate) {\n        this.render();\n      }\n      Array.prototype.push.apply(this.postRenderFunctions_, frameState.postRenderFunctions);\n\n      if (previousFrameState) {\n        const moveStart = !this.previousExtent_ ||\n                    (!isEmpty(this.previousExtent_) &&\n                    !equals(frameState.extent, this.previousExtent_));\n        if (moveStart) {\n          this.dispatchEvent(\n            new MapEvent(MapEventType.MOVESTART, this, previousFrameState));\n          this.previousExtent_ = createOrUpdateEmpty(this.previousExtent_);\n        }\n      }\n\n      const idle = this.previousExtent_ &&\n          !frameState.viewHints[ViewHint.ANIMATING] &&\n          !frameState.viewHints[ViewHint.INTERACTING] &&\n          !equals(frameState.extent, this.previousExtent_);\n\n      if (idle) {\n        this.dispatchEvent(new MapEvent(MapEventType.MOVEEND, this, frameState));\n        clone(frameState.extent, this.previousExtent_);\n      }\n    }\n\n    this.dispatchEvent(new MapEvent(MapEventType.POSTRENDER, this, frameState));\n\n    this.postRenderTimeoutHandle_ = setTimeout(this.handlePostRender.bind(this), 0);\n\n  }\n\n  /**\n   * Sets the layergroup of this map.\n   * @param {LayerGroup} layerGroup A layer group containing the layers in this map.\n   * @observable\n   * @api\n   */\n  setLayerGroup(layerGroup) {\n    this.set(MapProperty.LAYERGROUP, layerGroup);\n  }\n\n  /**\n   * Set the size of this map.\n   * @param {import(\"./size.js\").Size|undefined} size The size in pixels of the map in the DOM.\n   * @observable\n   * @api\n   */\n  setSize(size) {\n    this.set(MapProperty.SIZE, size);\n  }\n\n  /**\n   * Set the target element to render this map into.\n   * @param {HTMLElement|string|undefined} target The Element or id of the Element\n   *     that the map is rendered in.\n   * @observable\n   * @api\n   */\n  setTarget(target) {\n    this.set(MapProperty.TARGET, target);\n  }\n\n  /**\n   * Set the view for this map.\n   * @param {View} view The view that controls this map.\n   * @observable\n   * @api\n   */\n  setView(view) {\n    this.set(MapProperty.VIEW, view);\n  }\n\n  /**\n   * Force a recalculation of the map viewport size.  This should be called when\n   * third-party code changes the size of the map viewport.\n   * @api\n   */\n  updateSize() {\n    const targetElement = this.getTargetElement();\n\n    if (!targetElement) {\n      this.setSize(undefined);\n    } else {\n      const computedStyle = getComputedStyle(targetElement);\n      this.setSize([\n        targetElement.offsetWidth -\n            parseFloat(computedStyle['borderLeftWidth']) -\n            parseFloat(computedStyle['paddingLeft']) -\n            parseFloat(computedStyle['paddingRight']) -\n            parseFloat(computedStyle['borderRightWidth']),\n        targetElement.offsetHeight -\n            parseFloat(computedStyle['borderTopWidth']) -\n            parseFloat(computedStyle['paddingTop']) -\n            parseFloat(computedStyle['paddingBottom']) -\n            parseFloat(computedStyle['borderBottomWidth'])\n      ]);\n    }\n  }\n}\n\n\n/**\n * @param {MapOptions} options Map options.\n * @return {MapOptionsInternal} Internal map options.\n */\nfunction createOptionsInternal(options) {\n\n  /**\n   * @type {HTMLElement|Document}\n   */\n  let keyboardEventTarget = null;\n  if (options.keyboardEventTarget !== undefined) {\n    keyboardEventTarget = typeof options.keyboardEventTarget === 'string' ?\n      document.getElementById(options.keyboardEventTarget) :\n      options.keyboardEventTarget;\n  }\n\n  /**\n   * @type {Object<string, *>}\n   */\n  const values = {};\n\n  const layerGroup = options.layers && typeof /** @type {?} */ (options.layers).getLayers === 'function' ?\n    /** @type {LayerGroup} */ (options.layers) : new LayerGroup({layers: /** @type {Collection} */ (options.layers)});\n  values[MapProperty.LAYERGROUP] = layerGroup;\n\n  values[MapProperty.TARGET] = options.target;\n\n  values[MapProperty.VIEW] = options.view !== undefined ?\n    options.view : new View();\n\n  let controls;\n  if (options.controls !== undefined) {\n    if (Array.isArray(options.controls)) {\n      controls = new Collection(options.controls.slice());\n    } else {\n      assert(typeof /** @type {?} */ (options.controls).getArray === 'function',\n        47); // Expected `controls` to be an array or an `import(\"./Collection.js\").Collection`\n      controls = /** @type {Collection} */ (options.controls);\n    }\n  }\n\n  let interactions;\n  if (options.interactions !== undefined) {\n    if (Array.isArray(options.interactions)) {\n      interactions = new Collection(options.interactions.slice());\n    } else {\n      assert(typeof /** @type {?} */ (options.interactions).getArray === 'function',\n        48); // Expected `interactions` to be an array or an `import(\"./Collection.js\").Collection`\n      interactions = /** @type {Collection} */ (options.interactions);\n    }\n  }\n\n  let overlays;\n  if (options.overlays !== undefined) {\n    if (Array.isArray(options.overlays)) {\n      overlays = new Collection(options.overlays.slice());\n    } else {\n      assert(typeof /** @type {?} */ (options.overlays).getArray === 'function',\n        49); // Expected `overlays` to be an array or an `import(\"./Collection.js\").Collection`\n      overlays = options.overlays;\n    }\n  } else {\n    overlays = new Collection();\n  }\n\n  return {\n    controls: controls,\n    interactions: interactions,\n    keyboardEventTarget: keyboardEventTarget,\n    overlays: overlays,\n    values: values\n  };\n\n}\nexport default PluggableMap;\n","/**\n * @module ol/renderer/Map\n */\nimport {abstract} from '../util.js';\nimport Disposable from '../Disposable.js';\nimport {getWidth} from '../extent.js';\nimport {TRUE} from '../functions.js';\nimport {inView} from '../layer/Layer.js';\nimport {shared as iconImageCache} from '../style/IconImageCache.js';\nimport {compose as composeTransform, makeInverse} from '../transform.js';\nimport {renderDeclutterItems} from '../render.js';\n\n/**\n * @abstract\n */\nclass MapRenderer extends Disposable {\n\n  /**\n   * @param {import(\"../PluggableMap.js\").default} map Map.\n   */\n  constructor(map) {\n    super();\n\n    /**\n     * @private\n     * @type {import(\"../PluggableMap.js\").default}\n     */\n    this.map_ = map;\n\n    /**\n     * @private\n     */\n    this.declutterTree_ = null;\n\n  }\n\n  /**\n   * @abstract\n   * @param {import(\"../render/EventType.js\").default} type Event type.\n   * @param {import(\"../PluggableMap.js\").FrameState} frameState Frame state.\n   */\n  dispatchRenderEvent(type, frameState) {\n    abstract();\n  }\n\n  /**\n   * @param {import(\"../PluggableMap.js\").FrameState} frameState FrameState.\n   * @protected\n   */\n  calculateMatrices2D(frameState) {\n    const viewState = frameState.viewState;\n    const coordinateToPixelTransform = frameState.coordinateToPixelTransform;\n    const pixelToCoordinateTransform = frameState.pixelToCoordinateTransform;\n\n    composeTransform(coordinateToPixelTransform,\n      frameState.size[0] / 2, frameState.size[1] / 2,\n      1 / viewState.resolution, -1 / viewState.resolution,\n      -viewState.rotation,\n      -viewState.center[0], -viewState.center[1]);\n\n    makeInverse(pixelToCoordinateTransform, coordinateToPixelTransform);\n  }\n\n  /**\n   * @param {import(\"../coordinate.js\").Coordinate} coordinate Coordinate.\n   * @param {import(\"../PluggableMap.js\").FrameState} frameState FrameState.\n   * @param {number} hitTolerance Hit tolerance in pixels.\n   * @param {boolean} checkWrapped Check for wrapped geometries.\n   * @param {function(this: S, import(\"../Feature.js\").FeatureLike,\n   *     import(\"../layer/Layer.js\").default): T} callback Feature callback.\n   * @param {S} thisArg Value to use as `this` when executing `callback`.\n   * @param {function(this: U, import(\"../layer/Layer.js\").default): boolean} layerFilter Layer filter\n   *     function, only layers which are visible and for which this function\n   *     returns `true` will be tested for features.  By default, all visible\n   *     layers will be tested.\n   * @param {U} thisArg2 Value to use as `this` when executing `layerFilter`.\n   * @return {T|undefined} Callback result.\n   * @template S,T,U\n   */\n  forEachFeatureAtCoordinate(\n    coordinate,\n    frameState,\n    hitTolerance,\n    checkWrapped,\n    callback,\n    thisArg,\n    layerFilter,\n    thisArg2\n  ) {\n    let result;\n    const viewState = frameState.viewState;\n\n    /**\n     * @param {boolean} managed Managed layer.\n     * @param {import(\"../Feature.js\").FeatureLike} feature Feature.\n     * @param {import(\"../layer/Layer.js\").default} layer Layer.\n     * @return {?} Callback result.\n     */\n    function forEachFeatureAtCoordinate(managed, feature, layer) {\n      return callback.call(thisArg, feature, managed ? layer : null);\n    }\n\n    const projection = viewState.projection;\n\n    let translatedCoordinate = coordinate;\n    const offsets = [[0, 0]];\n    if (projection.canWrapX()) {\n      const projectionExtent = projection.getExtent();\n      const worldWidth = getWidth(projectionExtent);\n      const x = coordinate[0];\n      if (x < projectionExtent[0] || x > projectionExtent[2]) {\n        const worldsAway = Math.ceil((projectionExtent[0] - x) / worldWidth);\n        translatedCoordinate = [x + worldWidth * worldsAway, coordinate[1]];\n      }\n      if (checkWrapped) {\n        offsets.push([-worldWidth, 0], [worldWidth, 0]);\n      }\n    }\n\n    const layerStates = frameState.layerStatesArray;\n    const numLayers = layerStates.length;\n    let declutteredFeatures;\n    if (this.declutterTree_) {\n      declutteredFeatures = this.declutterTree_.all().map(function(entry) {\n        return entry.value;\n      });\n    }\n\n    const tmpCoord = [];\n    for (let i = 0; i < offsets.length; i++) {\n      for (let j = numLayers - 1; j >= 0; --j) {\n        const layerState = layerStates[j];\n        const layer = /** @type {import(\"../layer/Layer.js\").default} */ (layerState.layer);\n        if (layer.hasRenderer() && inView(layerState, viewState) && layerFilter.call(thisArg2, layer)) {\n          const layerRenderer = layer.getRenderer();\n          const source = layer.getSource();\n          const coordinates = source.getWrapX() ? translatedCoordinate : coordinate;\n          if (layerRenderer && source) {\n            const callback = forEachFeatureAtCoordinate.bind(null, layerState.managed);\n            tmpCoord[0] = coordinates[0] + offsets[i][0];\n            tmpCoord[1] = coordinates[1] + offsets[i][1];\n            result = layerRenderer.forEachFeatureAtCoordinate(\n              tmpCoord,\n              frameState, hitTolerance, callback, declutteredFeatures);\n          }\n          if (result) {\n            return result;\n          }\n        }\n      }\n    }\n    return undefined;\n  }\n\n  /**\n   * @abstract\n   * @param {import(\"../pixel.js\").Pixel} pixel Pixel.\n   * @param {import(\"../PluggableMap.js\").FrameState} frameState FrameState.\n   * @param {number} hitTolerance Hit tolerance in pixels.\n   * @param {function(this: S, import(\"../layer/Layer.js\").default, (Uint8ClampedArray|Uint8Array)): T} callback Layer\n   *     callback.\n   * @param {function(this: U, import(\"../layer/Layer.js\").default): boolean} layerFilter Layer filter\n   *     function, only layers which are visible and for which this function\n   *     returns `true` will be tested for features.  By default, all visible\n   *     layers will be tested.\n   * @return {T|undefined} Callback result.\n   * @template S,T,U\n   */\n  forEachLayerAtPixel(pixel, frameState, hitTolerance, callback, layerFilter) {\n    return abstract();\n  }\n\n  /**\n   * @param {import(\"../coordinate.js\").Coordinate} coordinate Coordinate.\n   * @param {import(\"../PluggableMap.js\").FrameState} frameState FrameState.\n   * @param {number} hitTolerance Hit tolerance in pixels.\n   * @param {boolean} checkWrapped Check for wrapped geometries.\n   * @param {function(this: U, import(\"../layer/Layer.js\").default): boolean} layerFilter Layer filter\n   *     function, only layers which are visible and for which this function\n   *     returns `true` will be tested for features.  By default, all visible\n   *     layers will be tested.\n   * @param {U} thisArg Value to use as `this` when executing `layerFilter`.\n   * @return {boolean} Is there a feature at the given coordinate?\n   * @template U\n   */\n  hasFeatureAtCoordinate(coordinate, frameState, hitTolerance, checkWrapped, layerFilter, thisArg) {\n    const hasFeature = this.forEachFeatureAtCoordinate(\n      coordinate, frameState, hitTolerance, checkWrapped, TRUE, this, layerFilter, thisArg);\n\n    return hasFeature !== undefined;\n  }\n\n  /**\n   * @return {import(\"../PluggableMap.js\").default} Map.\n   */\n  getMap() {\n    return this.map_;\n  }\n\n  /**\n   * Render.\n   * @param {?import(\"../PluggableMap.js\").FrameState} frameState Frame state.\n   */\n  renderFrame(frameState) {\n    this.declutterTree_ = renderDeclutterItems(frameState, this.declutterTree_);\n  }\n\n  /**\n   * @param {import(\"../PluggableMap.js\").FrameState} frameState Frame state.\n   * @protected\n   */\n  scheduleExpireIconCache(frameState) {\n    if (iconImageCache.canExpireCache()) {\n      frameState.postRenderFunctions.push(expireIconCache);\n    }\n  }\n}\n\n\n/**\n * @param {import(\"../PluggableMap.js\").default} map Map.\n * @param {import(\"../PluggableMap.js\").FrameState} frameState Frame state.\n */\nfunction expireIconCache(map, frameState) {\n  iconImageCache.expire();\n}\n\nexport default MapRenderer;\n","/**\n * @module ol/renderer/Composite\n */\nimport {CLASS_UNSELECTABLE} from '../css.js';\nimport {inView} from '../layer/Layer.js';\nimport RenderEvent from '../render/Event.js';\nimport RenderEventType from '../render/EventType.js';\nimport MapRenderer from './Map.js';\nimport SourceState from '../source/State.js';\nimport {replaceChildren} from '../dom.js';\nimport {labelCache} from '../render/canvas.js';\nimport EventType from '../events/EventType.js';\nimport {listen, unlistenByKey} from '../events.js';\n\n\n/**\n * @classdesc\n * Canvas map renderer.\n * @api\n */\nclass CompositeMapRenderer extends MapRenderer {\n\n  /**\n   * @param {import(\"../PluggableMap.js\").default} map Map.\n   */\n  constructor(map) {\n    super(map);\n\n    /**\n     * @type {import(\"../events.js\").EventsKey}\n     */\n    this.labelCacheKey_ = listen(labelCache, EventType.CLEAR, map.redrawText.bind(map));\n\n    /**\n     * @private\n     * @type {HTMLDivElement}\n     */\n    this.element_ = document.createElement('div');\n    const style = this.element_.style;\n    style.position = 'absolute';\n    style.width = '100%';\n    style.height = '100%';\n    style.zIndex = '0';\n\n    this.element_.className = CLASS_UNSELECTABLE + ' ol-layers';\n\n    const container = map.getViewport();\n    container.insertBefore(this.element_, container.firstChild || null);\n\n    /**\n     * @private\n     * @type {Array<HTMLElement>}\n     */\n    this.children_ = [];\n\n    /**\n     * @private\n     * @type {boolean}\n     */\n    this.renderedVisible_ = true;\n  }\n\n  /**\n   * @param {import(\"../render/EventType.js\").default} type Event type.\n   * @param {import(\"../PluggableMap.js\").FrameState} frameState Frame state.\n   */\n  dispatchRenderEvent(type, frameState) {\n    const map = this.getMap();\n    if (map.hasListener(type)) {\n      const event = new RenderEvent(type, undefined, frameState);\n      map.dispatchEvent(event);\n    }\n  }\n\n  disposeInternal() {\n    unlistenByKey(this.labelCacheKey_);\n    super.disposeInternal();\n  }\n\n  /**\n   * @inheritDoc\n   */\n  renderFrame(frameState) {\n    if (!frameState) {\n      if (this.renderedVisible_) {\n        this.element_.style.display = 'none';\n        this.renderedVisible_ = false;\n      }\n      return;\n    }\n\n    this.calculateMatrices2D(frameState);\n    this.dispatchRenderEvent(RenderEventType.PRECOMPOSE, frameState);\n\n    const layerStatesArray = frameState.layerStatesArray.sort(function(a, b) {\n      return a.zIndex - b.zIndex;\n    });\n    const viewState = frameState.viewState;\n\n    this.children_.length = 0;\n    let hasOverlay = false;\n    let previousElement = null;\n    for (let i = 0, ii = layerStatesArray.length; i < ii; ++i) {\n      const layerState = layerStatesArray[i];\n      hasOverlay = hasOverlay || layerState.hasOverlay;\n      frameState.layerIndex = i;\n      if (!inView(layerState, viewState) ||\n        (layerState.sourceState != SourceState.READY && layerState.sourceState != SourceState.UNDEFINED)) {\n        continue;\n      }\n\n      const layer = layerState.layer;\n      const element = layer.render(frameState, previousElement);\n      if (!element) {\n        continue;\n      }\n      const childElementCount = element.childElementCount;\n      if ((element !== previousElement || i == ii - 1) && childElementCount === 2 && !hasOverlay) {\n        element.removeChild(element.lastElementChild);\n      }\n      if (element !== previousElement) {\n        this.children_.push(element);\n        hasOverlay = childElementCount === 2;\n        previousElement = element;\n      }\n    }\n    super.renderFrame(frameState);\n\n    replaceChildren(this.element_, this.children_);\n\n    this.dispatchRenderEvent(RenderEventType.POSTCOMPOSE, frameState);\n\n    if (!this.renderedVisible_) {\n      this.element_.style.display = '';\n      this.renderedVisible_ = true;\n    }\n\n    this.scheduleExpireIconCache(frameState);\n  }\n\n  /**\n   * @inheritDoc\n   */\n  forEachLayerAtPixel(pixel, frameState, hitTolerance, callback, layerFilter) {\n    const viewState = frameState.viewState;\n\n    const layerStates = frameState.layerStatesArray;\n    const numLayers = layerStates.length;\n\n    for (let i = numLayers - 1; i >= 0; --i) {\n      const layerState = layerStates[i];\n      const layer = layerState.layer;\n      if (layer.hasRenderer() && inView(layerState, viewState) && layerFilter(layer)) {\n        const layerRenderer = layer.getRenderer();\n        const data = layerRenderer.getDataAtPixel(pixel, frameState, hitTolerance);\n        if (data) {\n          const result = callback(layer, data);\n          if (result) {\n            return result;\n          }\n        }\n      }\n    }\n    return undefined;\n  }\n\n}\n\n\nexport default CompositeMapRenderer;\n","/**\n * @module ol/layer/Group\n */\nimport {getUid} from '../util.js';\nimport Collection from '../Collection.js';\nimport CollectionEventType from '../CollectionEventType.js';\nimport {getChangeEventType} from '../Object.js';\nimport ObjectEventType from '../ObjectEventType.js';\nimport {assert} from '../asserts.js';\nimport {listen, unlistenByKey} from '../events.js';\nimport EventType from '../events/EventType.js';\nimport {getIntersection} from '../extent.js';\nimport BaseLayer from './Base.js';\nimport {assign, clear} from '../obj.js';\nimport SourceState from '../source/State.js';\n\n\n/**\n * @typedef {Object} Options\n * @property {number} [opacity=1] Opacity (0, 1).\n * @property {boolean} [visible=true] Visibility.\n * @property {import(\"../extent.js\").Extent} [extent] The bounding extent for layer rendering.  The layer will not be\n * rendered outside of this extent.\n * @property {number} [zIndex] The z-index for layer rendering.  At rendering time, the layers\n * will be ordered, first by Z-index and then by position. When `undefined`, a `zIndex` of 0 is assumed\n * for layers that are added to the map's `layers` collection, or `Infinity` when the layer's `setMap()`\n * method was used.\n * @property {number} [minResolution] The minimum resolution (inclusive) at which this layer will be\n * visible.\n * @property {number} [maxResolution] The maximum resolution (exclusive) below which this layer will\n * be visible.\n * @property {number} [minZoom] The minimum view zoom level (exclusive) above which this layer will be\n * visible.\n * @property {number} [maxZoom] The maximum view zoom level (inclusive) at which this layer will\n * be visible.\n * @property {Array<import(\"./Base.js\").default>|import(\"../Collection.js\").default<import(\"./Base.js\").default>} [layers] Child layers.\n */\n\n\n/**\n * @enum {string}\n * @private\n */\nconst Property = {\n  LAYERS: 'layers'\n};\n\n\n/**\n * @classdesc\n * A {@link module:ol/Collection~Collection} of layers that are handled together.\n *\n * A generic `change` event is triggered when the group/Collection changes.\n *\n * @api\n */\nclass LayerGroup extends BaseLayer {\n  /**\n   * @param {Options=} opt_options Layer options.\n   */\n  constructor(opt_options) {\n\n    const options = opt_options || {};\n    const baseOptions = /** @type {Options} */ (assign({}, options));\n    delete baseOptions.layers;\n\n    let layers = options.layers;\n\n    super(baseOptions);\n\n    /**\n     * @private\n     * @type {Array<import(\"../events.js\").EventsKey>}\n     */\n    this.layersListenerKeys_ = [];\n\n    /**\n     * @private\n     * @type {Object<string, Array<import(\"../events.js\").EventsKey>>}\n     */\n    this.listenerKeys_ = {};\n\n    this.addEventListener(getChangeEventType(Property.LAYERS), this.handleLayersChanged_);\n\n    if (layers) {\n      if (Array.isArray(layers)) {\n        layers = new Collection(layers.slice(), {unique: true});\n      } else {\n        assert(typeof /** @type {?} */ (layers).getArray === 'function',\n          43); // Expected `layers` to be an array or a `Collection`\n      }\n    } else {\n      layers = new Collection(undefined, {unique: true});\n    }\n\n    this.setLayers(layers);\n\n  }\n\n  /**\n   * @private\n   */\n  handleLayerChange_() {\n    this.changed();\n  }\n\n  /**\n   * @private\n   */\n  handleLayersChanged_() {\n    this.layersListenerKeys_.forEach(unlistenByKey);\n    this.layersListenerKeys_.length = 0;\n\n    const layers = this.getLayers();\n    this.layersListenerKeys_.push(\n      listen(layers, CollectionEventType.ADD, this.handleLayersAdd_, this),\n      listen(layers, CollectionEventType.REMOVE, this.handleLayersRemove_, this)\n    );\n\n    for (const id in this.listenerKeys_) {\n      this.listenerKeys_[id].forEach(unlistenByKey);\n    }\n    clear(this.listenerKeys_);\n\n    const layersArray = layers.getArray();\n    for (let i = 0, ii = layersArray.length; i < ii; i++) {\n      const layer = layersArray[i];\n      this.listenerKeys_[getUid(layer)] = [\n        listen(layer, ObjectEventType.PROPERTYCHANGE, this.handleLayerChange_, this),\n        listen(layer, EventType.CHANGE, this.handleLayerChange_, this)\n      ];\n    }\n\n    this.changed();\n  }\n\n  /**\n   * @param {import(\"../Collection.js\").CollectionEvent} collectionEvent CollectionEvent.\n   * @private\n   */\n  handleLayersAdd_(collectionEvent) {\n    const layer = /** @type {import(\"./Base.js\").default} */ (collectionEvent.element);\n    this.listenerKeys_[getUid(layer)] = [\n      listen(layer, ObjectEventType.PROPERTYCHANGE, this.handleLayerChange_, this),\n      listen(layer, EventType.CHANGE, this.handleLayerChange_, this)\n    ];\n    this.changed();\n  }\n\n  /**\n   * @param {import(\"../Collection.js\").CollectionEvent} collectionEvent CollectionEvent.\n   * @private\n   */\n  handleLayersRemove_(collectionEvent) {\n    const layer = /** @type {import(\"./Base.js\").default} */ (collectionEvent.element);\n    const key = getUid(layer);\n    this.listenerKeys_[key].forEach(unlistenByKey);\n    delete this.listenerKeys_[key];\n    this.changed();\n  }\n\n  /**\n   * Returns the {@link module:ol/Collection collection} of {@link module:ol/layer/Layer~Layer layers}\n   * in this group.\n   * @return {!import(\"../Collection.js\").default<import(\"./Base.js\").default>} Collection of\n   *   {@link module:ol/layer/Base layers} that are part of this group.\n   * @observable\n   * @api\n   */\n  getLayers() {\n    return (\n      /** @type {!import(\"../Collection.js\").default<import(\"./Base.js\").default>} */ (this.get(Property.LAYERS))\n    );\n  }\n\n  /**\n   * Set the {@link module:ol/Collection collection} of {@link module:ol/layer/Layer~Layer layers}\n   * in this group.\n   * @param {!import(\"../Collection.js\").default<import(\"./Base.js\").default>} layers Collection of\n   *   {@link module:ol/layer/Base layers} that are part of this group.\n   * @observable\n   * @api\n   */\n  setLayers(layers) {\n    this.set(Property.LAYERS, layers);\n  }\n\n  /**\n   * @inheritDoc\n   */\n  getLayersArray(opt_array) {\n    const array = opt_array !== undefined ? opt_array : [];\n    this.getLayers().forEach(function(layer) {\n      layer.getLayersArray(array);\n    });\n    return array;\n  }\n\n  /**\n   * @inheritDoc\n   */\n  getLayerStatesArray(opt_states) {\n    const states = opt_states !== undefined ? opt_states : [];\n\n    const pos = states.length;\n\n    this.getLayers().forEach(function(layer) {\n      layer.getLayerStatesArray(states);\n    });\n\n    const ownLayerState = this.getLayerState();\n    for (let i = pos, ii = states.length; i < ii; i++) {\n      const layerState = states[i];\n      layerState.opacity *= ownLayerState.opacity;\n      layerState.visible = layerState.visible && ownLayerState.visible;\n      layerState.maxResolution = Math.min(\n        layerState.maxResolution, ownLayerState.maxResolution);\n      layerState.minResolution = Math.max(\n        layerState.minResolution, ownLayerState.minResolution);\n      layerState.minZoom = Math.max(\n        layerState.minZoom, ownLayerState.minZoom);\n      layerState.maxZoom = Math.min(\n        layerState.maxZoom, ownLayerState.maxZoom);\n      if (ownLayerState.extent !== undefined) {\n        if (layerState.extent !== undefined) {\n          layerState.extent = getIntersection(layerState.extent, ownLayerState.extent);\n        } else {\n          layerState.extent = ownLayerState.extent;\n        }\n      }\n    }\n\n    return states;\n  }\n\n  /**\n   * @inheritDoc\n   */\n  getSourceState() {\n    return SourceState.READY;\n  }\n}\n\n\nexport default LayerGroup;\n","/**\n * @module ol/format/GPX\n */\nimport Feature from '../Feature.js';\nimport {includes} from '../array.js';\nimport {transformGeometryWithOptions} from './Feature.js';\nimport XMLFeature from './XMLFeature.js';\nimport {readString, readDecimal, readNonNegativeInteger, readDateTime, writeStringTextNode, writeNonNegativeIntegerTextNode, writeDecimalTextNode, writeDateTimeTextNode} from './xsd.js';\nimport GeometryLayout from '../geom/GeometryLayout.js';\nimport GeometryType from '../geom/GeometryType.js';\nimport LineString from '../geom/LineString.js';\nimport MultiLineString from '../geom/MultiLineString.js';\nimport Point from '../geom/Point.js';\nimport {get as getProjection} from '../proj.js';\nimport {createElementNS, makeArrayPusher, makeArraySerializer, makeChildAppender,\n  makeObjectPropertySetter, makeSequence, makeSimpleNodeFactory, makeStructureNS,\n  OBJECT_PROPERTY_NODE_FACTORY, parseNode, pushParseAndPop, pushSerializeAndPop,\n  XML_SCHEMA_INSTANCE_URI} from '../xml.js';\n\n\n/**\n * @const\n * @type {Array<null|string>}\n */\nconst NAMESPACE_URIS = [\n  null,\n  'http://www.topografix.com/GPX/1/0',\n  'http://www.topografix.com/GPX/1/1'\n];\n\n\n/**\n * @const\n * @type {string}\n */\nconst SCHEMA_LOCATION = 'http://www.topografix.com/GPX/1/1 ' +\n    'http://www.topografix.com/GPX/1/1/gpx.xsd';\n\n\n/**\n * @const\n * @type {Object<string, function(Node, Array<*>): (Feature|undefined)>}\n */\nconst FEATURE_READER = {\n  'rte': readRte,\n  'trk': readTrk,\n  'wpt': readWpt\n};\n\n\n/**\n * @const\n * @type {Object<string, Object<string, import(\"../xml.js\").Parser>>}\n */\n// @ts-ignore\nconst GPX_PARSERS = makeStructureNS(\n  NAMESPACE_URIS, {\n    'rte': makeArrayPusher(readRte),\n    'trk': makeArrayPusher(readTrk),\n    'wpt': makeArrayPusher(readWpt)\n  });\n\n\n/**\n * @const\n * @type {Object<string, Object<string, import(\"../xml.js\").Parser>>}\n */\n// @ts-ignore\nconst LINK_PARSERS = makeStructureNS(\n  NAMESPACE_URIS, {\n    'text': makeObjectPropertySetter(readString, 'linkText'),\n    'type': makeObjectPropertySetter(readString, 'linkType')\n  });\n\n\n/**\n * @const\n * @type {Object<string, Object<string, import(\"../xml.js\").Serializer>>}\n */\n// @ts-ignore\nconst GPX_SERIALIZERS = makeStructureNS(\n  NAMESPACE_URIS, {\n    'rte': makeChildAppender(writeRte),\n    'trk': makeChildAppender(writeTrk),\n    'wpt': makeChildAppender(writeWpt)\n  });\n\n\n/**\n * @typedef {Object} Options\n * @property {function(Feature, Node)} [readExtensions] Callback function\n * to process `extensions` nodes. To prevent memory leaks, this callback function must\n * not store any references to the node. Note that the `extensions`\n * node is not allowed in GPX 1.0. Moreover, only `extensions`\n * nodes from `wpt`, `rte` and `trk` can be processed, as those are\n * directly mapped to a feature.\n */\n\n/**\n * @typedef {Object} LayoutOptions\n * @property {boolean} [hasZ]\n * @property {boolean} [hasM]\n */\n\n/**\n * @classdesc\n * Feature format for reading and writing data in the GPX format.\n *\n * Note that {@link module:ol/format/GPX~GPX#readFeature} only reads the first\n * feature of the source.\n *\n * When reading, routes (`<rte>`) are converted into LineString geometries, and\n * tracks (`<trk>`) into MultiLineString. Any properties on route and track\n * waypoints are ignored.\n *\n * When writing, LineString geometries are output as routes (`<rte>`), and\n * MultiLineString as tracks (`<trk>`).\n *\n * @api\n */\nclass GPX extends XMLFeature {\n\n  /**\n   * @param {Options=} opt_options Options.\n   */\n  constructor(opt_options) {\n    super();\n\n    const options = opt_options ? opt_options : {};\n\n\n    /**\n     * @inheritDoc\n     */\n    this.dataProjection = getProjection('EPSG:4326');\n\n    /**\n     * @type {function(Feature, Node): void|undefined}\n     * @private\n     */\n    this.readExtensions_ = options.readExtensions;\n  }\n\n  /**\n   * @param {Array<Feature>} features List of features.\n   * @private\n   */\n  handleReadExtensions_(features) {\n    if (!features) {\n      features = [];\n    }\n    for (let i = 0, ii = features.length; i < ii; ++i) {\n      const feature = features[i];\n      if (this.readExtensions_) {\n        const extensionsNode = feature.get('extensionsNode_') || null;\n        this.readExtensions_(feature, extensionsNode);\n      }\n      feature.set('extensionsNode_', undefined);\n    }\n  }\n\n  /**\n   * @inheritDoc\n   */\n  readFeatureFromNode(node, opt_options) {\n    if (!includes(NAMESPACE_URIS, node.namespaceURI)) {\n      return null;\n    }\n    const featureReader = FEATURE_READER[node.localName];\n    if (!featureReader) {\n      return null;\n    }\n    const feature = featureReader(node, [this.getReadOptions(node, opt_options)]);\n    if (!feature) {\n      return null;\n    }\n    this.handleReadExtensions_([feature]);\n    return feature;\n  }\n\n  /**\n   * @inheritDoc\n   */\n  readFeaturesFromNode(node, opt_options) {\n    if (!includes(NAMESPACE_URIS, node.namespaceURI)) {\n      return [];\n    }\n    if (node.localName == 'gpx') {\n      /** @type {Array<Feature>} */\n      const features = pushParseAndPop([], GPX_PARSERS,\n        node, [this.getReadOptions(node, opt_options)]);\n      if (features) {\n        this.handleReadExtensions_(features);\n        return features;\n      } else {\n        return [];\n      }\n    }\n    return [];\n  }\n\n  /**\n   * Encode an array of features in the GPX format as an XML node.\n   * LineString geometries are output as routes (`<rte>`), and MultiLineString\n   * as tracks (`<trk>`).\n   *\n   * @param {Array<Feature>} features Features.\n   * @param {import(\"./Feature.js\").WriteOptions=} opt_options Options.\n   * @return {Node} Node.\n   * @override\n   * @api\n   */\n  writeFeaturesNode(features, opt_options) {\n    opt_options = this.adaptOptions(opt_options);\n    //FIXME Serialize metadata\n    const gpx = createElementNS('http://www.topografix.com/GPX/1/1', 'gpx');\n    const xmlnsUri = 'http://www.w3.org/2000/xmlns/';\n    gpx.setAttributeNS(xmlnsUri, 'xmlns:xsi', XML_SCHEMA_INSTANCE_URI);\n    gpx.setAttributeNS(XML_SCHEMA_INSTANCE_URI, 'xsi:schemaLocation', SCHEMA_LOCATION);\n    gpx.setAttribute('version', '1.1');\n    gpx.setAttribute('creator', 'OpenLayers');\n\n    pushSerializeAndPop(/** @type {import(\"../xml.js\").NodeStackItem} */\n      ({node: gpx}), GPX_SERIALIZERS, GPX_NODE_FACTORY, features, [opt_options]);\n    return gpx;\n  }\n}\n\n\n/**\n * @const\n * @type {Object<string, Object<string, import(\"../xml.js\").Parser>>}\n */\n// @ts-ignore\nconst RTE_PARSERS = makeStructureNS(\n  NAMESPACE_URIS, {\n    'name': makeObjectPropertySetter(readString),\n    'cmt': makeObjectPropertySetter(readString),\n    'desc': makeObjectPropertySetter(readString),\n    'src': makeObjectPropertySetter(readString),\n    'link': parseLink,\n    'number': makeObjectPropertySetter(readNonNegativeInteger),\n    'extensions': parseExtensions,\n    'type': makeObjectPropertySetter(readString),\n    'rtept': parseRtePt\n  });\n\n\n/**\n * @const\n * @type {Object<string, Object<string, import(\"../xml.js\").Parser>>}\n */\n// @ts-ignore\nconst RTEPT_PARSERS = makeStructureNS(\n  NAMESPACE_URIS, {\n    'ele': makeObjectPropertySetter(readDecimal),\n    'time': makeObjectPropertySetter(readDateTime)\n  });\n\n\n/**\n * @const\n * @type {Object<string, Object<string, import(\"../xml.js\").Parser>>}\n */\n// @ts-ignore\nconst TRK_PARSERS = makeStructureNS(\n  NAMESPACE_URIS, {\n    'name': makeObjectPropertySetter(readString),\n    'cmt': makeObjectPropertySetter(readString),\n    'desc': makeObjectPropertySetter(readString),\n    'src': makeObjectPropertySetter(readString),\n    'link': parseLink,\n    'number': makeObjectPropertySetter(readNonNegativeInteger),\n    'type': makeObjectPropertySetter(readString),\n    'extensions': parseExtensions,\n    'trkseg': parseTrkSeg\n  });\n\n\n/**\n * @const\n * @type {Object<string, Object<string, import(\"../xml.js\").Parser>>}\n */\n// @ts-ignore\nconst TRKSEG_PARSERS = makeStructureNS(\n  NAMESPACE_URIS, {\n    'trkpt': parseTrkPt\n  });\n\n\n/**\n * @const\n * @type {Object<string, Object<string, import(\"../xml.js\").Parser>>}\n */\n// @ts-ignore\nconst TRKPT_PARSERS = makeStructureNS(\n  NAMESPACE_URIS, {\n    'ele': makeObjectPropertySetter(readDecimal),\n    'time': makeObjectPropertySetter(readDateTime)\n  });\n\n\n/**\n * @const\n * @type {Object<string, Object<string, import(\"../xml.js\").Parser>>}\n */\n// @ts-ignore\nconst WPT_PARSERS = makeStructureNS(\n  NAMESPACE_URIS, {\n    'ele': makeObjectPropertySetter(readDecimal),\n    'time': makeObjectPropertySetter(readDateTime),\n    'magvar': makeObjectPropertySetter(readDecimal),\n    'geoidheight': makeObjectPropertySetter(readDecimal),\n    'name': makeObjectPropertySetter(readString),\n    'cmt': makeObjectPropertySetter(readString),\n    'desc': makeObjectPropertySetter(readString),\n    'src': makeObjectPropertySetter(readString),\n    'link': parseLink,\n    'sym': makeObjectPropertySetter(readString),\n    'type': makeObjectPropertySetter(readString),\n    'fix': makeObjectPropertySetter(readString),\n    'sat': makeObjectPropertySetter(readNonNegativeInteger),\n    'hdop': makeObjectPropertySetter(readDecimal),\n    'vdop': makeObjectPropertySetter(readDecimal),\n    'pdop': makeObjectPropertySetter(readDecimal),\n    'ageofdgpsdata': makeObjectPropertySetter(readDecimal),\n    'dgpsid': makeObjectPropertySetter(readNonNegativeInteger),\n    'extensions': parseExtensions\n  });\n\n\n/**\n * @const\n * @type {Array<string>}\n */\nconst LINK_SEQUENCE = ['text', 'type'];\n\n\n/**\n * @const\n * @type {Object<string, Object<string, import(\"../xml.js\").Serializer>>}\n */\n// @ts-ignore\nconst LINK_SERIALIZERS = makeStructureNS(\n  NAMESPACE_URIS, {\n    'text': makeChildAppender(writeStringTextNode),\n    'type': makeChildAppender(writeStringTextNode)\n  });\n\n\n/**\n * @const\n * @type {Object<string, Array<string>>}\n */\n// @ts-ignore\nconst RTE_SEQUENCE = makeStructureNS(\n  NAMESPACE_URIS, [\n    'name', 'cmt', 'desc', 'src', 'link', 'number', 'type', 'rtept'\n  ]);\n\n\n/**\n * @const\n * @type {Object<string, Object<string, import(\"../xml.js\").Serializer>>}\n */\n// @ts-ignore\nconst RTE_SERIALIZERS = makeStructureNS(\n  NAMESPACE_URIS, {\n    'name': makeChildAppender(writeStringTextNode),\n    'cmt': makeChildAppender(writeStringTextNode),\n    'desc': makeChildAppender(writeStringTextNode),\n    'src': makeChildAppender(writeStringTextNode),\n    'link': makeChildAppender(writeLink),\n    'number': makeChildAppender(writeNonNegativeIntegerTextNode),\n    'type': makeChildAppender(writeStringTextNode),\n    'rtept': makeArraySerializer(makeChildAppender(writeWptType))\n  });\n\n\n/**\n * @const\n * @type {Object<string, Array<string>>}\n */\n// @ts-ignore\nconst RTEPT_TYPE_SEQUENCE = makeStructureNS(\n  NAMESPACE_URIS, [\n    'ele', 'time'\n  ]);\n\n\n/**\n * @const\n * @type {Object<string, Array<string>>}\n */\n// @ts-ignore\nconst TRK_SEQUENCE = makeStructureNS(\n  NAMESPACE_URIS, [\n    'name', 'cmt', 'desc', 'src', 'link', 'number', 'type', 'trkseg'\n  ]);\n\n\n/**\n * @const\n * @type {Object<string, Object<string, import(\"../xml.js\").Serializer>>}\n */\n// @ts-ignore\nconst TRK_SERIALIZERS = makeStructureNS(\n  NAMESPACE_URIS, {\n    'name': makeChildAppender(writeStringTextNode),\n    'cmt': makeChildAppender(writeStringTextNode),\n    'desc': makeChildAppender(writeStringTextNode),\n    'src': makeChildAppender(writeStringTextNode),\n    'link': makeChildAppender(writeLink),\n    'number': makeChildAppender(writeNonNegativeIntegerTextNode),\n    'type': makeChildAppender(writeStringTextNode),\n    'trkseg': makeArraySerializer(makeChildAppender(writeTrkSeg))\n  });\n\n\n/**\n * @const\n * @type {function(*, Array<*>, string=): (Node|undefined)}\n */\nconst TRKSEG_NODE_FACTORY = makeSimpleNodeFactory('trkpt');\n\n\n/**\n * @const\n * @type {Object<string, Object<string, import(\"../xml.js\").Serializer>>}\n */\n// @ts-ignore\nconst TRKSEG_SERIALIZERS = makeStructureNS(\n  NAMESPACE_URIS, {\n    'trkpt': makeChildAppender(writeWptType)\n  });\n\n\n/**\n * @const\n * @type {Object<string, Array<string>>}\n */\n// @ts-ignore\nconst WPT_TYPE_SEQUENCE = makeStructureNS(\n  NAMESPACE_URIS, [\n    'ele', 'time', 'magvar', 'geoidheight', 'name', 'cmt', 'desc', 'src',\n    'link', 'sym', 'type', 'fix', 'sat', 'hdop', 'vdop', 'pdop',\n    'ageofdgpsdata', 'dgpsid'\n  ]);\n\n\n/**\n * @const\n * @type {Object<string, Object<string, import(\"../xml.js\").Serializer>>}\n */\n// @ts-ignore\nconst WPT_TYPE_SERIALIZERS = makeStructureNS(\n  NAMESPACE_URIS, {\n    'ele': makeChildAppender(writeDecimalTextNode),\n    'time': makeChildAppender(writeDateTimeTextNode),\n    'magvar': makeChildAppender(writeDecimalTextNode),\n    'geoidheight': makeChildAppender(writeDecimalTextNode),\n    'name': makeChildAppender(writeStringTextNode),\n    'cmt': makeChildAppender(writeStringTextNode),\n    'desc': makeChildAppender(writeStringTextNode),\n    'src': makeChildAppender(writeStringTextNode),\n    'link': makeChildAppender(writeLink),\n    'sym': makeChildAppender(writeStringTextNode),\n    'type': makeChildAppender(writeStringTextNode),\n    'fix': makeChildAppender(writeStringTextNode),\n    'sat': makeChildAppender(writeNonNegativeIntegerTextNode),\n    'hdop': makeChildAppender(writeDecimalTextNode),\n    'vdop': makeChildAppender(writeDecimalTextNode),\n    'pdop': makeChildAppender(writeDecimalTextNode),\n    'ageofdgpsdata': makeChildAppender(writeDecimalTextNode),\n    'dgpsid': makeChildAppender(writeNonNegativeIntegerTextNode)\n  });\n\n\n/**\n * @const\n * @type {Object<string, string>}\n */\nconst GEOMETRY_TYPE_TO_NODENAME = {\n  'Point': 'wpt',\n  'LineString': 'rte',\n  'MultiLineString': 'trk'\n};\n\n\n/**\n * @param {*} value Value.\n * @param {Array<*>} objectStack Object stack.\n * @param {string=} opt_nodeName Node name.\n * @return {Node|undefined} Node.\n */\nfunction GPX_NODE_FACTORY(value, objectStack, opt_nodeName) {\n  const geometry = /** @type {Feature} */ (value).getGeometry();\n  if (geometry) {\n    const nodeName = GEOMETRY_TYPE_TO_NODENAME[geometry.getType()];\n    if (nodeName) {\n      const parentNode = objectStack[objectStack.length - 1].node;\n      return createElementNS(parentNode.namespaceURI, nodeName);\n    }\n  }\n}\n\n\n/**\n * @param {Array<number>} flatCoordinates Flat coordinates.\n * @param {LayoutOptions} layoutOptions Layout options.\n * @param {Element} node Node.\n * @param {!Object} values Values.\n * @return {Array<number>} Flat coordinates.\n */\nfunction appendCoordinate(flatCoordinates, layoutOptions, node, values) {\n  flatCoordinates.push(\n    parseFloat(node.getAttribute('lon')),\n    parseFloat(node.getAttribute('lat')));\n  if ('ele' in values) {\n    flatCoordinates.push(/** @type {number} */ (values['ele']));\n    delete values['ele'];\n    layoutOptions.hasZ = true;\n  } else {\n    flatCoordinates.push(0);\n  }\n  if ('time' in values) {\n    flatCoordinates.push(/** @type {number} */ (values['time']));\n    delete values['time'];\n    layoutOptions.hasM = true;\n  } else {\n    flatCoordinates.push(0);\n  }\n  return flatCoordinates;\n}\n\n\n/**\n * Choose GeometryLayout based on flags in layoutOptions and adjust flatCoordinates\n * and ends arrays by shrinking them accordingly (removing unused zero entries).\n *\n * @param {LayoutOptions} layoutOptions Layout options.\n * @param {Array<number>} flatCoordinates Flat coordinates.\n * @param {Array<number>=} ends Ends.\n * @return {GeometryLayout} Layout.\n */\nfunction applyLayoutOptions(layoutOptions, flatCoordinates, ends) {\n  let layout = GeometryLayout.XY;\n  let stride = 2;\n  if (layoutOptions.hasZ && layoutOptions.hasM) {\n    layout = GeometryLayout.XYZM;\n    stride = 4;\n  } else if (layoutOptions.hasZ) {\n    layout = GeometryLayout.XYZ;\n    stride = 3;\n  } else if (layoutOptions.hasM) {\n    layout = GeometryLayout.XYM;\n    stride = 3;\n  }\n  if (stride !== 4) {\n    for (let i = 0, ii = flatCoordinates.length / 4; i < ii; i++) {\n      flatCoordinates[i * stride] = flatCoordinates[i * 4];\n      flatCoordinates[i * stride + 1] = flatCoordinates[i * 4 + 1];\n      if (layoutOptions.hasZ) {\n        flatCoordinates[i * stride + 2] = flatCoordinates[i * 4 + 2];\n      }\n      if (layoutOptions.hasM) {\n        flatCoordinates[i * stride + 2] = flatCoordinates[i * 4 + 3];\n      }\n    }\n    flatCoordinates.length = flatCoordinates.length / 4 * stride;\n    if (ends) {\n      for (let i = 0, ii = ends.length; i < ii; i++) {\n        ends[i] = ends[i] / 4 * stride;\n      }\n    }\n  }\n  return layout;\n}\n\n\n/**\n * @param {Element} node Node.\n * @param {Array<*>} objectStack Object stack.\n */\nfunction parseLink(node, objectStack) {\n  const values = /** @type {Object} */ (objectStack[objectStack.length - 1]);\n  const href = node.getAttribute('href');\n  if (href !== null) {\n    values['link'] = href;\n  }\n  parseNode(LINK_PARSERS, node, objectStack);\n}\n\n\n/**\n * @param {Node} node Node.\n * @param {Array<*>} objectStack Object stack.\n */\nfunction parseExtensions(node, objectStack) {\n  const values = /** @type {Object} */ (objectStack[objectStack.length - 1]);\n  values['extensionsNode_'] = node;\n}\n\n\n/**\n * @param {Element} node Node.\n * @param {Array<*>} objectStack Object stack.\n */\nfunction parseRtePt(node, objectStack) {\n  const values = pushParseAndPop({}, RTEPT_PARSERS, node, objectStack);\n  if (values) {\n    const rteValues = /** @type {!Object} */ (objectStack[objectStack.length - 1]);\n    const flatCoordinates = /** @type {Array<number>} */ (rteValues['flatCoordinates']);\n    const layoutOptions = /** @type {LayoutOptions} */ (rteValues['layoutOptions']);\n    appendCoordinate(flatCoordinates, layoutOptions, node, values);\n  }\n}\n\n\n/**\n * @param {Element} node Node.\n * @param {Array<*>} objectStack Object stack.\n */\nfunction parseTrkPt(node, objectStack) {\n  const values = pushParseAndPop({}, TRKPT_PARSERS, node, objectStack);\n  if (values) {\n    const trkValues = /** @type {!Object} */ (objectStack[objectStack.length - 1]);\n    const flatCoordinates = /** @type {Array<number>} */ (trkValues['flatCoordinates']);\n    const layoutOptions = /** @type {LayoutOptions} */ (trkValues['layoutOptions']);\n    appendCoordinate(flatCoordinates, layoutOptions, node, values);\n  }\n}\n\n\n/**\n * @param {Element} node Node.\n * @param {Array<*>} objectStack Object stack.\n */\nfunction parseTrkSeg(node, objectStack) {\n  const values = /** @type {Object} */ (objectStack[objectStack.length - 1]);\n  parseNode(TRKSEG_PARSERS, node, objectStack);\n  const flatCoordinates = /** @type {Array<number>} */\n      (values['flatCoordinates']);\n  const ends = /** @type {Array<number>} */ (values['ends']);\n  ends.push(flatCoordinates.length);\n}\n\n\n/**\n * @param {Element} node Node.\n * @param {Array<*>} objectStack Object stack.\n * @return {Feature|undefined} Track.\n */\nfunction readRte(node, objectStack) {\n  const options = /** @type {import(\"./Feature.js\").ReadOptions} */ (objectStack[0]);\n  const values = pushParseAndPop({\n    'flatCoordinates': [],\n    'layoutOptions': {}\n  }, RTE_PARSERS, node, objectStack);\n  if (!values) {\n    return undefined;\n  }\n  const flatCoordinates = /** @type {Array<number>} */\n      (values['flatCoordinates']);\n  delete values['flatCoordinates'];\n  const layoutOptions = /** @type {LayoutOptions} */ (values['layoutOptions']);\n  delete values['layoutOptions'];\n  const layout = applyLayoutOptions(layoutOptions, flatCoordinates);\n  const geometry = new LineString(flatCoordinates, layout);\n  transformGeometryWithOptions(geometry, false, options);\n  const feature = new Feature(geometry);\n  feature.setProperties(values, true);\n  return feature;\n}\n\n\n/**\n * @param {Element} node Node.\n * @param {Array<*>} objectStack Object stack.\n * @return {Feature|undefined} Track.\n */\nfunction readTrk(node, objectStack) {\n  const options = /** @type {import(\"./Feature.js\").ReadOptions} */ (objectStack[0]);\n  const values = pushParseAndPop({\n    'flatCoordinates': [],\n    'ends': [],\n    'layoutOptions': {}\n  }, TRK_PARSERS, node, objectStack);\n  if (!values) {\n    return undefined;\n  }\n  const flatCoordinates = /** @type {Array<number>} */\n      (values['flatCoordinates']);\n  delete values['flatCoordinates'];\n  const ends = /** @type {Array<number>} */ (values['ends']);\n  delete values['ends'];\n  const layoutOptions = /** @type {LayoutOptions} */ (values['layoutOptions']);\n  delete values['layoutOptions'];\n  const layout = applyLayoutOptions(layoutOptions, flatCoordinates, ends);\n  const geometry = new MultiLineString(flatCoordinates, layout, ends);\n  transformGeometryWithOptions(geometry, false, options);\n  const feature = new Feature(geometry);\n  feature.setProperties(values, true);\n  return feature;\n}\n\n\n/**\n * @param {Element} node Node.\n * @param {Array<*>} objectStack Object stack.\n * @return {Feature|undefined} Waypoint.\n */\nfunction readWpt(node, objectStack) {\n  const options = /** @type {import(\"./Feature.js\").ReadOptions} */ (objectStack[0]);\n  const values = pushParseAndPop({}, WPT_PARSERS, node, objectStack);\n  if (!values) {\n    return undefined;\n  }\n  const layoutOptions = /** @type {LayoutOptions} */ ({});\n  const coordinates = appendCoordinate([], layoutOptions, node, values);\n  const layout = applyLayoutOptions(layoutOptions, coordinates);\n  const geometry = new Point(coordinates, layout);\n  transformGeometryWithOptions(geometry, false, options);\n  const feature = new Feature(geometry);\n  feature.setProperties(values, true);\n  return feature;\n}\n\n\n/**\n * @param {Element} node Node.\n * @param {string} value Value for the link's `href` attribute.\n * @param {Array<*>} objectStack Node stack.\n */\nfunction writeLink(node, value, objectStack) {\n  node.setAttribute('href', value);\n  const context = objectStack[objectStack.length - 1];\n  const properties = context['properties'];\n  const link = [\n    properties['linkText'],\n    properties['linkType']\n  ];\n  pushSerializeAndPop(/** @type {import(\"../xml.js\").NodeStackItem} */ ({node: node}),\n    LINK_SERIALIZERS, OBJECT_PROPERTY_NODE_FACTORY,\n    link, objectStack, LINK_SEQUENCE);\n}\n\n\n/**\n * @param {Element} node Node.\n * @param {import(\"../coordinate.js\").Coordinate} coordinate Coordinate.\n * @param {Array<*>} objectStack Object stack.\n */\nfunction writeWptType(node, coordinate, objectStack) {\n  const context = objectStack[objectStack.length - 1];\n  const parentNode = context.node;\n  const namespaceURI = parentNode.namespaceURI;\n  const properties = context['properties'];\n  //FIXME Projection handling\n  node.setAttributeNS(null, 'lat', String(coordinate[1]));\n  node.setAttributeNS(null, 'lon', String(coordinate[0]));\n  const geometryLayout = context['geometryLayout'];\n  switch (geometryLayout) {\n    case GeometryLayout.XYZM:\n      if (coordinate[3] !== 0) {\n        properties['time'] = coordinate[3];\n      }\n      // fall through\n    case GeometryLayout.XYZ:\n      if (coordinate[2] !== 0) {\n        properties['ele'] = coordinate[2];\n      }\n      break;\n    case GeometryLayout.XYM:\n      if (coordinate[2] !== 0) {\n        properties['time'] = coordinate[2];\n      }\n      break;\n    default:\n      // pass\n  }\n  const orderedKeys = (node.nodeName == 'rtept') ?\n    RTEPT_TYPE_SEQUENCE[namespaceURI] :\n    WPT_TYPE_SEQUENCE[namespaceURI];\n  const values = makeSequence(properties, orderedKeys);\n  pushSerializeAndPop(/** @type {import(\"../xml.js\").NodeStackItem} */\n    ({node: node, 'properties': properties}),\n    WPT_TYPE_SERIALIZERS, OBJECT_PROPERTY_NODE_FACTORY,\n    values, objectStack, orderedKeys);\n}\n\n\n/**\n * @param {Node} node Node.\n * @param {Feature} feature Feature.\n * @param {Array<*>} objectStack Object stack.\n */\nfunction writeRte(node, feature, objectStack) {\n  const options = /** @type {import(\"./Feature.js\").WriteOptions} */ (objectStack[0]);\n  const properties = feature.getProperties();\n  const context = {node: node};\n  context['properties'] = properties;\n  const geometry = feature.getGeometry();\n  if (geometry.getType() == GeometryType.LINE_STRING) {\n    const lineString = /** @type {LineString} */ (transformGeometryWithOptions(geometry, true, options));\n    context['geometryLayout'] = lineString.getLayout();\n    properties['rtept'] = lineString.getCoordinates();\n  }\n  const parentNode = objectStack[objectStack.length - 1].node;\n  const orderedKeys = RTE_SEQUENCE[parentNode.namespaceURI];\n  const values = makeSequence(properties, orderedKeys);\n  pushSerializeAndPop(context,\n    RTE_SERIALIZERS, OBJECT_PROPERTY_NODE_FACTORY,\n    values, objectStack, orderedKeys);\n}\n\n\n/**\n * @param {Node} node Node.\n * @param {Feature} feature Feature.\n * @param {Array<*>} objectStack Object stack.\n */\nfunction writeTrk(node, feature, objectStack) {\n  const options = /** @type {import(\"./Feature.js\").WriteOptions} */ (objectStack[0]);\n  const properties = feature.getProperties();\n  /** @type {import(\"../xml.js\").NodeStackItem} */\n  const context = {node: node};\n  context['properties'] = properties;\n  const geometry = feature.getGeometry();\n  if (geometry.getType() == GeometryType.MULTI_LINE_STRING) {\n    const multiLineString = /** @type {MultiLineString} */ (transformGeometryWithOptions(geometry, true, options));\n    properties['trkseg'] = multiLineString.getLineStrings();\n  }\n  const parentNode = objectStack[objectStack.length - 1].node;\n  const orderedKeys = TRK_SEQUENCE[parentNode.namespaceURI];\n  const values = makeSequence(properties, orderedKeys);\n  pushSerializeAndPop(context,\n    TRK_SERIALIZERS, OBJECT_PROPERTY_NODE_FACTORY,\n    values, objectStack, orderedKeys);\n}\n\n\n/**\n * @param {Node} node Node.\n * @param {LineString} lineString LineString.\n * @param {Array<*>} objectStack Object stack.\n */\nfunction writeTrkSeg(node, lineString, objectStack) {\n  /** @type {import(\"../xml.js\").NodeStackItem} */\n  const context = {node: node};\n  context['geometryLayout'] = lineString.getLayout();\n  context['properties'] = {};\n  pushSerializeAndPop(context,\n    TRKSEG_SERIALIZERS, TRKSEG_NODE_FACTORY,\n    lineString.getCoordinates(), objectStack);\n}\n\n\n/**\n * @param {Element} node Node.\n * @param {Feature} feature Feature.\n * @param {Array<*>} objectStack Object stack.\n */\nfunction writeWpt(node, feature, objectStack) {\n  const options = /** @type {import(\"./Feature.js\").WriteOptions} */ (objectStack[0]);\n  const context = objectStack[objectStack.length - 1];\n  context['properties'] = feature.getProperties();\n  const geometry = feature.getGeometry();\n  if (geometry.getType() == GeometryType.POINT) {\n    const point = /** @type {Point} */ (transformGeometryWithOptions(geometry, true, options));\n    context['geometryLayout'] = point.getLayout();\n    writeWptType(node, point.getCoordinates(), objectStack);\n  }\n}\n\n\nexport default GPX;\n","/**\n * @module ol/format/IGC\n */\nimport Feature from '../Feature.js';\nimport {transformGeometryWithOptions} from './Feature.js';\nimport TextFeature from './TextFeature.js';\nimport GeometryLayout from '../geom/GeometryLayout.js';\nimport LineString from '../geom/LineString.js';\nimport {get as getProjection} from '../proj.js';\n\n/**\n * IGC altitude/z. One of 'barometric', 'gps', 'none'.\n * @enum {string}\n */\nconst IGCZ = {\n  BAROMETRIC: 'barometric',\n  GPS: 'gps',\n  NONE: 'none'\n};\n\n/**\n * @const\n * @type {RegExp}\n */\nconst B_RECORD_RE =\n    /^B(\\d{2})(\\d{2})(\\d{2})(\\d{2})(\\d{5})([NS])(\\d{3})(\\d{5})([EW])([AV])(\\d{5})(\\d{5})/;\n\n\n/**\n * @const\n * @type {RegExp}\n */\nconst H_RECORD_RE = /^H.([A-Z]{3}).*?:(.*)/;\n\n\n/**\n * @const\n * @type {RegExp}\n */\nconst HFDTE_RECORD_RE = /^HFDTE(\\d{2})(\\d{2})(\\d{2})/;\n\n\n/**\n * A regular expression matching the newline characters `\\r\\n`, `\\r` and `\\n`.\n *\n * @const\n * @type {RegExp}\n */\nconst NEWLINE_RE = /\\r\\n|\\r|\\n/;\n\n\n/**\n * @typedef {Object} Options\n * @property {IGCZ|string} [altitudeMode='none'] Altitude mode. Possible\n * values are `'barometric'`, `'gps'`, and `'none'`.\n */\n\n\n/**\n * @classdesc\n * Feature format for `*.igc` flight recording files.\n *\n * As IGC sources contain a single feature,\n * {@link module:ol/format/IGC~IGC#readFeatures} will return the feature in an\n * array\n *\n * @api\n */\nclass IGC extends TextFeature {\n\n  /**\n   * @param {Options=} opt_options Options.\n   */\n  constructor(opt_options) {\n    super();\n\n    const options = opt_options ? opt_options : {};\n\n    /**\n     * @inheritDoc\n     */\n    this.dataProjection = getProjection('EPSG:4326');\n\n    /**\n     * @private\n     * @type {IGCZ}\n     */\n    this.altitudeMode_ = options.altitudeMode ? options.altitudeMode : IGCZ.NONE;\n  }\n\n  /**\n   * @inheritDoc\n   */\n  readFeatureFromText(text, opt_options) {\n    const altitudeMode = this.altitudeMode_;\n    const lines = text.split(NEWLINE_RE);\n    /** @type {Object<string, string>} */\n    const properties = {};\n    const flatCoordinates = [];\n    let year = 2000;\n    let month = 0;\n    let day = 1;\n    let lastDateTime = -1;\n    let i, ii;\n    for (i = 0, ii = lines.length; i < ii; ++i) {\n      const line = lines[i];\n      let m;\n      if (line.charAt(0) == 'B') {\n        m = B_RECORD_RE.exec(line);\n        if (m) {\n          const hour = parseInt(m[1], 10);\n          const minute = parseInt(m[2], 10);\n          const second = parseInt(m[3], 10);\n          let y = parseInt(m[4], 10) + parseInt(m[5], 10) / 60000;\n          if (m[6] == 'S') {\n            y = -y;\n          }\n          let x = parseInt(m[7], 10) + parseInt(m[8], 10) / 60000;\n          if (m[9] == 'W') {\n            x = -x;\n          }\n          flatCoordinates.push(x, y);\n          if (altitudeMode != IGCZ.NONE) {\n            let z;\n            if (altitudeMode == IGCZ.GPS) {\n              z = parseInt(m[11], 10);\n            } else if (altitudeMode == IGCZ.BAROMETRIC) {\n              z = parseInt(m[12], 10);\n            } else {\n              z = 0;\n            }\n            flatCoordinates.push(z);\n          }\n          let dateTime = Date.UTC(year, month, day, hour, minute, second);\n          // Detect UTC midnight wrap around.\n          if (dateTime < lastDateTime) {\n            dateTime = Date.UTC(year, month, day + 1, hour, minute, second);\n          }\n          flatCoordinates.push(dateTime / 1000);\n          lastDateTime = dateTime;\n        }\n      } else if (line.charAt(0) == 'H') {\n        m = HFDTE_RECORD_RE.exec(line);\n        if (m) {\n          day = parseInt(m[1], 10);\n          month = parseInt(m[2], 10) - 1;\n          year = 2000 + parseInt(m[3], 10);\n        } else {\n          m = H_RECORD_RE.exec(line);\n          if (m) {\n            properties[m[1]] = m[2].trim();\n          }\n        }\n      }\n    }\n    if (flatCoordinates.length === 0) {\n      return null;\n    }\n    const layout = altitudeMode == IGCZ.NONE ? GeometryLayout.XYM : GeometryLayout.XYZM;\n    const lineString = new LineString(flatCoordinates, layout);\n    const feature = new Feature(transformGeometryWithOptions(lineString, false, opt_options));\n    feature.setProperties(properties, true);\n    return feature;\n  }\n\n  /**\n   * @inheritDoc\n   */\n  readFeaturesFromText(text, opt_options) {\n    const feature = this.readFeatureFromText(text, opt_options);\n    if (feature) {\n      return [feature];\n    } else {\n      return [];\n    }\n  }\n\n}\n\nexport default IGC;\n","/*!\n * PEP v0.5.3 | https://github.com/jquery/PEP\n * Copyright jQuery Foundation and other contributors | http://jquery.org/license\n */\n\n(function (global, factory) {\n  typeof exports === 'object' && typeof module !== 'undefined' ? module.exports = factory() :\n  typeof define === 'function' && define.amd ? define(factory) :\n  (global.PointerEventsPolyfill = factory());\n}(this, function () { 'use strict';\n\n  /**\n   * This is the constructor for new PointerEvents.\n   *\n   * New Pointer Events must be given a type, and an optional dictionary of\n   * initialization properties.\n   *\n   * Due to certain platform requirements, events returned from the constructor\n   * identify as MouseEvents.\n   *\n   * @constructor\n   * @param {String} inType The type of the event to create.\n   * @param {Object} [inDict] An optional dictionary of initial event properties.\n   * @return {Event} A new PointerEvent of type `inType`, initialized with properties from `inDict`.\n   */\n  var MOUSE_PROPS = [\n    'bubbles',\n    'cancelable',\n    'view',\n    'screenX',\n    'screenY',\n    'clientX',\n    'clientY',\n    'ctrlKey',\n    'altKey',\n    'shiftKey',\n    'metaKey',\n    'button',\n    'relatedTarget',\n    'pageX',\n    'pageY'\n  ];\n\n  var MOUSE_DEFAULTS = [\n    false,\n    false,\n    null,\n    0,\n    0,\n    0,\n    0,\n    false,\n    false,\n    false,\n    false,\n    0,\n    null,\n    0,\n    0\n  ];\n\n  function PointerEvent(inType, inDict) {\n    inDict = inDict || Object.create(null);\n\n    var e = document.createEvent('Event');\n    e.initEvent(inType, inDict.bubbles || false, inDict.cancelable || false);\n\n    // define inherited MouseEvent properties\n    // skip bubbles and cancelable since they're set above in initEvent()\n    for (var i = 2, p; i < MOUSE_PROPS.length; i++) {\n      p = MOUSE_PROPS[i];\n      e[p] = inDict[p] || MOUSE_DEFAULTS[i];\n    }\n    e.buttons = inDict.buttons || 0;\n\n    // Spec requires that pointers without pressure specified use 0.5 for down\n    // state and 0 for up state.\n    var pressure = 0;\n\n    if (inDict.pressure !== undefined && e.buttons) {\n      pressure = inDict.pressure;\n    } else {\n      pressure = e.buttons ? 0.5 : 0;\n    }\n\n    // add x/y properties aliased to clientX/Y\n    e.x = e.clientX;\n    e.y = e.clientY;\n\n    // define the properties of the PointerEvent interface\n    e.pointerId = inDict.pointerId || 0;\n    e.width = inDict.width || 1;\n    e.height = inDict.height || 1;\n    e.pressure = pressure;\n    e.tiltX = inDict.tiltX || 0;\n    e.tiltY = inDict.tiltY || 0;\n    e.twist = inDict.twist || 0;\n    e.tangentialPressure = inDict.tangentialPressure || 0;\n    e.pointerType = inDict.pointerType || '';\n    e.hwTimestamp = inDict.hwTimestamp || 0;\n    e.isPrimary = inDict.isPrimary || false;\n    e.detail = 0;\n    return e;\n  }\n\n  /**\n   * This module implements a map of pointer states\n   */\n  var USE_MAP = window.Map && window.Map.prototype.forEach;\n  var PointerMap = USE_MAP ? Map : SparseArrayMap;\n\n  function SparseArrayMap() {\n    this.array = [];\n    this.size = 0;\n  }\n\n  SparseArrayMap.prototype = {\n    set: function(k, v) {\n      if (v === undefined) {\n        return this.delete(k);\n      }\n      if (!this.has(k)) {\n        this.size++;\n      }\n      this.array[k] = v;\n    },\n    has: function(k) {\n      return this.array[k] !== undefined;\n    },\n    delete: function(k) {\n      if (this.has(k)) {\n        delete this.array[k];\n        this.size--;\n      }\n    },\n    get: function(k) {\n      return this.array[k];\n    },\n    clear: function() {\n      this.array.length = 0;\n      this.size = 0;\n    },\n\n    // return value, key, map\n    forEach: function(callback, thisArg) {\n      return this.array.forEach(function(v, k) {\n        callback.call(thisArg, v, k, this);\n      }, this);\n    }\n  };\n\n  var CLONE_PROPS = [\n\n    // MouseEvent\n    'bubbles',\n    'cancelable',\n    'view',\n    'detail',\n    'screenX',\n    'screenY',\n    'clientX',\n    'clientY',\n    'ctrlKey',\n    'altKey',\n    'shiftKey',\n    'metaKey',\n    'button',\n    'relatedTarget',\n\n    // DOM Level 3\n    'buttons',\n\n    // PointerEvent\n    'pointerId',\n    'width',\n    'height',\n    'pressure',\n    'tiltX',\n    'tiltY',\n    'pointerType',\n    'hwTimestamp',\n    'isPrimary',\n\n    // event instance\n    'type',\n    'target',\n    'currentTarget',\n    'which',\n    'pageX',\n    'pageY',\n    'timeStamp'\n  ];\n\n  var CLONE_DEFAULTS = [\n\n    // MouseEvent\n    false,\n    false,\n    null,\n    null,\n    0,\n    0,\n    0,\n    0,\n    false,\n    false,\n    false,\n    false,\n    0,\n    null,\n\n    // DOM Level 3\n    0,\n\n    // PointerEvent\n    0,\n    0,\n    0,\n    0,\n    0,\n    0,\n    '',\n    0,\n    false,\n\n    // event instance\n    '',\n    null,\n    null,\n    0,\n    0,\n    0,\n    0\n  ];\n\n  var BOUNDARY_EVENTS = {\n    'pointerover': 1,\n    'pointerout': 1,\n    'pointerenter': 1,\n    'pointerleave': 1\n  };\n\n  var HAS_SVG_INSTANCE = (typeof SVGElementInstance !== 'undefined');\n\n  /**\n   * This module is for normalizing events. Mouse and Touch events will be\n   * collected here, and fire PointerEvents that have the same semantics, no\n   * matter the source.\n   * Events fired:\n   *   - pointerdown: a pointing is added\n   *   - pointerup: a pointer is removed\n   *   - pointermove: a pointer is moved\n   *   - pointerover: a pointer crosses into an element\n   *   - pointerout: a pointer leaves an element\n   *   - pointercancel: a pointer will no longer generate events\n   */\n  var dispatcher = {\n    pointermap: new PointerMap(),\n    eventMap: Object.create(null),\n    captureInfo: Object.create(null),\n\n    // Scope objects for native events.\n    // This exists for ease of testing.\n    eventSources: Object.create(null),\n    eventSourceList: [],\n    /**\n     * Add a new event source that will generate pointer events.\n     *\n     * `inSource` must contain an array of event names named `events`, and\n     * functions with the names specified in the `events` array.\n     * @param {string} name A name for the event source\n     * @param {Object} source A new source of platform events.\n     */\n    registerSource: function(name, source) {\n      var s = source;\n      var newEvents = s.events;\n      if (newEvents) {\n        newEvents.forEach(function(e) {\n          if (s[e]) {\n            this.eventMap[e] = s[e].bind(s);\n          }\n        }, this);\n        this.eventSources[name] = s;\n        this.eventSourceList.push(s);\n      }\n    },\n    register: function(element) {\n      var l = this.eventSourceList.length;\n      for (var i = 0, es; (i < l) && (es = this.eventSourceList[i]); i++) {\n\n        // call eventsource register\n        es.register.call(es, element);\n      }\n    },\n    unregister: function(element) {\n      var l = this.eventSourceList.length;\n      for (var i = 0, es; (i < l) && (es = this.eventSourceList[i]); i++) {\n\n        // call eventsource register\n        es.unregister.call(es, element);\n      }\n    },\n    contains: /*scope.external.contains || */function(container, contained) {\n      try {\n        return container.contains(contained);\n      } catch (ex) {\n\n        // most likely: https://bugzilla.mozilla.org/show_bug.cgi?id=208427\n        return false;\n      }\n    },\n\n    // EVENTS\n    down: function(inEvent) {\n      inEvent.bubbles = true;\n      this.fireEvent('pointerdown', inEvent);\n    },\n    move: function(inEvent) {\n      inEvent.bubbles = true;\n      this.fireEvent('pointermove', inEvent);\n    },\n    up: function(inEvent) {\n      inEvent.bubbles = true;\n      this.fireEvent('pointerup', inEvent);\n    },\n    enter: function(inEvent) {\n      inEvent.bubbles = false;\n      this.fireEvent('pointerenter', inEvent);\n    },\n    leave: function(inEvent) {\n      inEvent.bubbles = false;\n      this.fireEvent('pointerleave', inEvent);\n    },\n    over: function(inEvent) {\n      inEvent.bubbles = true;\n      this.fireEvent('pointerover', inEvent);\n    },\n    out: function(inEvent) {\n      inEvent.bubbles = true;\n      this.fireEvent('pointerout', inEvent);\n    },\n    cancel: function(inEvent) {\n      inEvent.bubbles = true;\n      this.fireEvent('pointercancel', inEvent);\n    },\n    leaveOut: function(event) {\n      this.out(event);\n      this.propagate(event, this.leave, false);\n    },\n    enterOver: function(event) {\n      this.over(event);\n      this.propagate(event, this.enter, true);\n    },\n\n    // LISTENER LOGIC\n    eventHandler: function(inEvent) {\n\n      // This is used to prevent multiple dispatch of pointerevents from\n      // platform events. This can happen when two elements in different scopes\n      // are set up to create pointer events, which is relevant to Shadow DOM.\n      if (inEvent._handledByPE) {\n        return;\n      }\n      var type = inEvent.type;\n      var fn = this.eventMap && this.eventMap[type];\n      if (fn) {\n        fn(inEvent);\n      }\n      inEvent._handledByPE = true;\n    },\n\n    // set up event listeners\n    listen: function(target, events) {\n      events.forEach(function(e) {\n        this.addEvent(target, e);\n      }, this);\n    },\n\n    // remove event listeners\n    unlisten: function(target, events) {\n      events.forEach(function(e) {\n        this.removeEvent(target, e);\n      }, this);\n    },\n    addEvent: /*scope.external.addEvent || */function(target, eventName) {\n      target.addEventListener(eventName, this.boundHandler);\n    },\n    removeEvent: /*scope.external.removeEvent || */function(target, eventName) {\n      target.removeEventListener(eventName, this.boundHandler);\n    },\n\n    // EVENT CREATION AND TRACKING\n    /**\n     * Creates a new Event of type `inType`, based on the information in\n     * `inEvent`.\n     *\n     * @param {string} inType A string representing the type of event to create\n     * @param {Event} inEvent A platform event with a target\n     * @return {Event} A PointerEvent of type `inType`\n     */\n    makeEvent: function(inType, inEvent) {\n\n      // relatedTarget must be null if pointer is captured\n      if (this.captureInfo[inEvent.pointerId]) {\n        inEvent.relatedTarget = null;\n      }\n      var e = new PointerEvent(inType, inEvent);\n      if (inEvent.preventDefault) {\n        e.preventDefault = inEvent.preventDefault;\n      }\n      e._target = e._target || inEvent.target;\n      return e;\n    },\n\n    // make and dispatch an event in one call\n    fireEvent: function(inType, inEvent) {\n      var e = this.makeEvent(inType, inEvent);\n      return this.dispatchEvent(e);\n    },\n    /**\n     * Returns a snapshot of inEvent, with writable properties.\n     *\n     * @param {Event} inEvent An event that contains properties to copy.\n     * @return {Object} An object containing shallow copies of `inEvent`'s\n     *    properties.\n     */\n    cloneEvent: function(inEvent) {\n      var eventCopy = Object.create(null);\n      var p;\n      for (var i = 0; i < CLONE_PROPS.length; i++) {\n        p = CLONE_PROPS[i];\n        eventCopy[p] = inEvent[p] || CLONE_DEFAULTS[i];\n\n        // Work around SVGInstanceElement shadow tree\n        // Return the <use> element that is represented by the instance for Safari, Chrome, IE.\n        // This is the behavior implemented by Firefox.\n        if (HAS_SVG_INSTANCE && (p === 'target' || p === 'relatedTarget')) {\n          if (eventCopy[p] instanceof SVGElementInstance) {\n            eventCopy[p] = eventCopy[p].correspondingUseElement;\n          }\n        }\n      }\n\n      // keep the semantics of preventDefault\n      if (inEvent.preventDefault) {\n        eventCopy.preventDefault = function() {\n          inEvent.preventDefault();\n        };\n      }\n      return eventCopy;\n    },\n    getTarget: function(inEvent) {\n      var capture = this.captureInfo[inEvent.pointerId];\n      if (!capture) {\n        return inEvent._target;\n      }\n      if (inEvent._target === capture || !(inEvent.type in BOUNDARY_EVENTS)) {\n        return capture;\n      }\n    },\n    propagate: function(event, fn, propagateDown) {\n      var target = event.target;\n      var targets = [];\n\n      // Order of conditions due to document.contains() missing in IE.\n      while (target != null && target !== document && !target.contains(event.relatedTarget)) {\n        targets.push(target);\n        target = target.parentNode;\n\n        // Touch: Do not propagate if node is detached.\n        if (!target) {\n          return;\n        }\n      }\n      if (propagateDown) {\n        targets.reverse();\n      }\n      targets.forEach(function(target) {\n        event.target = target;\n        fn.call(this, event);\n      }, this);\n    },\n    setCapture: function(inPointerId, inTarget, skipDispatch) {\n      if (this.captureInfo[inPointerId]) {\n        this.releaseCapture(inPointerId, skipDispatch);\n      }\n\n      this.captureInfo[inPointerId] = inTarget;\n      this.implicitRelease = this.releaseCapture.bind(this, inPointerId, skipDispatch);\n      document.addEventListener('pointerup', this.implicitRelease);\n      document.addEventListener('pointercancel', this.implicitRelease);\n\n      var e = new PointerEvent('gotpointercapture', { bubbles: true });\n      e.pointerId = inPointerId;\n      e._target = inTarget;\n\n      if (!skipDispatch) {\n        this.asyncDispatchEvent(e);\n      }\n    },\n    releaseCapture: function(inPointerId, skipDispatch) {\n      var t = this.captureInfo[inPointerId];\n      if (!t) {\n        return;\n      }\n\n      this.captureInfo[inPointerId] = undefined;\n      document.removeEventListener('pointerup', this.implicitRelease);\n      document.removeEventListener('pointercancel', this.implicitRelease);\n\n      var e = new PointerEvent('lostpointercapture', { bubbles: true });\n      e.pointerId = inPointerId;\n      e._target = t;\n\n      if (!skipDispatch) {\n        this.asyncDispatchEvent(e);\n      }\n    },\n    /**\n     * Dispatches the event to its target.\n     *\n     * @param {Event} inEvent The event to be dispatched.\n     * @return {Boolean} True if an event handler returns true, false otherwise.\n     */\n    dispatchEvent: /*scope.external.dispatchEvent || */function(inEvent) {\n      var t = this.getTarget(inEvent);\n      if (t) {\n        return t.dispatchEvent(inEvent);\n      }\n    },\n    asyncDispatchEvent: function(inEvent) {\n      requestAnimationFrame(this.dispatchEvent.bind(this, inEvent));\n    }\n  };\n  dispatcher.boundHandler = dispatcher.eventHandler.bind(dispatcher);\n\n  var targeting = {\n    shadow: function(inEl) {\n      if (inEl) {\n        return inEl.shadowRoot || inEl.webkitShadowRoot;\n      }\n    },\n    canTarget: function(shadow) {\n      return shadow && Boolean(shadow.elementFromPoint);\n    },\n    targetingShadow: function(inEl) {\n      var s = this.shadow(inEl);\n      if (this.canTarget(s)) {\n        return s;\n      }\n    },\n    olderShadow: function(shadow) {\n      var os = shadow.olderShadowRoot;\n      if (!os) {\n        var se = shadow.querySelector('shadow');\n        if (se) {\n          os = se.olderShadowRoot;\n        }\n      }\n      return os;\n    },\n    allShadows: function(element) {\n      var shadows = [];\n      var s = this.shadow(element);\n      while (s) {\n        shadows.push(s);\n        s = this.olderShadow(s);\n      }\n      return shadows;\n    },\n    searchRoot: function(inRoot, x, y) {\n      if (inRoot) {\n        var t = inRoot.elementFromPoint(x, y);\n        var st, sr;\n\n        // is element a shadow host?\n        sr = this.targetingShadow(t);\n        while (sr) {\n\n          // find the the element inside the shadow root\n          st = sr.elementFromPoint(x, y);\n          if (!st) {\n\n            // check for older shadows\n            sr = this.olderShadow(sr);\n          } else {\n\n            // shadowed element may contain a shadow root\n            var ssr = this.targetingShadow(st);\n            return this.searchRoot(ssr, x, y) || st;\n          }\n        }\n\n        // light dom element is the target\n        return t;\n      }\n    },\n    owner: function(element) {\n      var s = element;\n\n      // walk up until you hit the shadow root or document\n      while (s.parentNode) {\n        s = s.parentNode;\n      }\n\n      // the owner element is expected to be a Document or ShadowRoot\n      if (s.nodeType !== Node.DOCUMENT_NODE && s.nodeType !== Node.DOCUMENT_FRAGMENT_NODE) {\n        s = document;\n      }\n      return s;\n    },\n    findTarget: function(inEvent) {\n      var x = inEvent.clientX;\n      var y = inEvent.clientY;\n\n      // if the listener is in the shadow root, it is much faster to start there\n      var s = this.owner(inEvent.target);\n\n      // if x, y is not in this root, fall back to document search\n      if (!s.elementFromPoint(x, y)) {\n        s = document;\n      }\n      return this.searchRoot(s, x, y);\n    }\n  };\n\n  var forEach = Array.prototype.forEach.call.bind(Array.prototype.forEach);\n  var map = Array.prototype.map.call.bind(Array.prototype.map);\n  var toArray = Array.prototype.slice.call.bind(Array.prototype.slice);\n  var filter = Array.prototype.filter.call.bind(Array.prototype.filter);\n  var MO = window.MutationObserver || window.WebKitMutationObserver;\n  var SELECTOR = '[touch-action]';\n  var OBSERVER_INIT = {\n    subtree: true,\n    childList: true,\n    attributes: true,\n    attributeOldValue: true,\n    attributeFilter: ['touch-action']\n  };\n\n  function Installer(add, remove, changed, binder) {\n    this.addCallback = add.bind(binder);\n    this.removeCallback = remove.bind(binder);\n    this.changedCallback = changed.bind(binder);\n    if (MO) {\n      this.observer = new MO(this.mutationWatcher.bind(this));\n    }\n  }\n\n  Installer.prototype = {\n    watchSubtree: function(target) {\n\n      // Only watch scopes that can target find, as these are top-level.\n      // Otherwise we can see duplicate additions and removals that add noise.\n      //\n      // TODO(dfreedman): For some instances with ShadowDOMPolyfill, we can see\n      // a removal without an insertion when a node is redistributed among\n      // shadows. Since it all ends up correct in the document, watching only\n      // the document will yield the correct mutations to watch.\n      if (this.observer && targeting.canTarget(target)) {\n        this.observer.observe(target, OBSERVER_INIT);\n      }\n    },\n    enableOnSubtree: function(target) {\n      this.watchSubtree(target);\n      if (target === document && document.readyState !== 'complete') {\n        this.installOnLoad();\n      } else {\n        this.installNewSubtree(target);\n      }\n    },\n    installNewSubtree: function(target) {\n      forEach(this.findElements(target), this.addElement, this);\n    },\n    findElements: function(target) {\n      if (target.querySelectorAll) {\n        return target.querySelectorAll(SELECTOR);\n      }\n      return [];\n    },\n    removeElement: function(el) {\n      this.removeCallback(el);\n    },\n    addElement: function(el) {\n      this.addCallback(el);\n    },\n    elementChanged: function(el, oldValue) {\n      this.changedCallback(el, oldValue);\n    },\n    concatLists: function(accum, list) {\n      return accum.concat(toArray(list));\n    },\n\n    // register all touch-action = none nodes on document load\n    installOnLoad: function() {\n      document.addEventListener('readystatechange', function() {\n        if (document.readyState === 'complete') {\n          this.installNewSubtree(document);\n        }\n      }.bind(this));\n    },\n    isElement: function(n) {\n      return n.nodeType === Node.ELEMENT_NODE;\n    },\n    flattenMutationTree: function(inNodes) {\n\n      // find children with touch-action\n      var tree = map(inNodes, this.findElements, this);\n\n      // make sure the added nodes are accounted for\n      tree.push(filter(inNodes, this.isElement));\n\n      // flatten the list\n      return tree.reduce(this.concatLists, []);\n    },\n    mutationWatcher: function(mutations) {\n      mutations.forEach(this.mutationHandler, this);\n    },\n    mutationHandler: function(m) {\n      if (m.type === 'childList') {\n        var added = this.flattenMutationTree(m.addedNodes);\n        added.forEach(this.addElement, this);\n        var removed = this.flattenMutationTree(m.removedNodes);\n        removed.forEach(this.removeElement, this);\n      } else if (m.type === 'attributes') {\n        this.elementChanged(m.target, m.oldValue);\n      }\n    }\n  };\n\n  function shadowSelector(s) {\n    return 'body /shadow-deep/ ' + s;\n  }\n  function rule(v) {\n    return '{ -ms-touch-action: ' + v + '; touch-action: ' + v + '; }';\n  }\n  var attrib2css = [\n    { selector: '[touch-action=\"none\"]', value: 'none' },\n    { selector: '[touch-action=\"auto\"]', value: 'auto' },\n    { selector: '[touch-action~=\"pan-x\"]', value: 'pan-x' },\n    { selector: '[touch-action~=\"pan-y\"]', value: 'pan-y' },\n    { selector: '[touch-action~=\"pan-up\"]', value: 'pan-up' },\n    { selector: '[touch-action~=\"pan-down\"]', value: 'pan-down' },\n    { selector: '[touch-action~=\"pan-left\"]', value: 'pan-left' },\n    { selector: '[touch-action~=\"pan-right\"]', value: 'pan-right' }\n  ];\n  var styles = '';\n\n  // only install stylesheet if the browser has touch action support\n  var hasNativePE = window.PointerEvent || window.MSPointerEvent;\n\n  // only add shadow selectors if shadowdom is supported\n  var hasShadowRoot = !window.ShadowDOMPolyfill && document.head.createShadowRoot;\n\n  function applyAttributeStyles() {\n    if (hasNativePE) {\n      attrib2css.forEach(function(r) {\n        styles += r.selector + rule(r.value) + '\\n';\n        if (hasShadowRoot) {\n          styles += shadowSelector(r.selector) + rule(r.value) + '\\n';\n        }\n      });\n\n      var el = document.createElement('style');\n      el.textContent = styles;\n      document.head.appendChild(el);\n    }\n  }\n\n  var pointermap = dispatcher.pointermap;\n\n  // radius around touchend that swallows mouse events\n  var DEDUP_DIST = 25;\n\n  // left, middle, right, back, forward\n  var BUTTON_TO_BUTTONS = [1, 4, 2, 8, 16];\n\n  var HAS_BUTTONS = false;\n  try {\n    HAS_BUTTONS = new MouseEvent('test', { buttons: 1 }).buttons === 1;\n  } catch (e) {}\n\n  // handler block for native mouse events\n  var mouseEvents = {\n    POINTER_ID: 1,\n    POINTER_TYPE: 'mouse',\n    events: [\n      'mousedown',\n      'webkitmouseforcechanged',\n      'mousemove',\n      'mouseup',\n      'mouseover',\n      'mouseout'\n    ],\n    register: function(target) {\n      dispatcher.listen(target, this.events);\n    },\n    unregister: function(target) {\n      dispatcher.unlisten(target, this.events);\n    },\n    lastTouches: [],\n\n    // collide with the global mouse listener\n    isEventSimulatedFromTouch: function(inEvent) {\n      var lts = this.lastTouches;\n      var x = inEvent.clientX;\n      var y = inEvent.clientY;\n      for (var i = 0, l = lts.length, t; i < l && (t = lts[i]); i++) {\n\n        // simulated mouse events will be swallowed near a primary touchend\n        var dx = Math.abs(x - t.x);\n        var dy = Math.abs(y - t.y);\n        if (dx <= DEDUP_DIST && dy <= DEDUP_DIST) {\n          return true;\n        }\n      }\n    },\n    prepareEvent: function(inEvent) {\n      var e = dispatcher.cloneEvent(inEvent);\n\n      // forward mouse preventDefault\n      var pd = e.preventDefault;\n      e.preventDefault = function() {\n        inEvent.preventDefault();\n        pd();\n      };\n      e.pointerId = this.POINTER_ID;\n      e.isPrimary = true;\n      e.pointerType = this.POINTER_TYPE;\n      if ('webkitForce' in inEvent) {\n        e.pressure = inEvent.webkitForce - MouseEvent.WEBKIT_FORCE_AT_MOUSE_DOWN;\n      }\n      return e;\n    },\n    prepareButtonsForMove: function(e, inEvent) {\n      var p = pointermap.get(this.POINTER_ID);\n\n      // Update buttons state after possible out-of-document mouseup.\n      if (inEvent.which === 0 || !p) {\n        e.buttons = 0;\n      } else {\n        e.buttons = p.buttons;\n      }\n      inEvent.buttons = e.buttons;\n    },\n    mousedown: function(inEvent) {\n      if (!this.isEventSimulatedFromTouch(inEvent)) {\n        var p = pointermap.get(this.POINTER_ID);\n        var e = this.prepareEvent(inEvent);\n        if (!HAS_BUTTONS) {\n          e.buttons = BUTTON_TO_BUTTONS[e.button];\n          if (p) { e.buttons |= p.buttons; }\n          inEvent.buttons = e.buttons;\n        }\n        pointermap.set(this.POINTER_ID, inEvent);\n        if (!p || p.buttons === 0) {\n          dispatcher.down(e);\n        } else {\n          dispatcher.move(e);\n        }\n      }\n    },\n\n    // This is called when the user force presses without moving x/y\n    webkitmouseforcechanged: function(inEvent) {\n      this.mousemove(inEvent);\n    },\n    mousemove: function(inEvent) {\n      if (!this.isEventSimulatedFromTouch(inEvent)) {\n        var e = this.prepareEvent(inEvent);\n        if (!HAS_BUTTONS) { this.prepareButtonsForMove(e, inEvent); }\n        e.button = -1;\n        pointermap.set(this.POINTER_ID, inEvent);\n        dispatcher.move(e);\n      }\n    },\n    mouseup: function(inEvent) {\n      if (!this.isEventSimulatedFromTouch(inEvent)) {\n        var p = pointermap.get(this.POINTER_ID);\n        var e = this.prepareEvent(inEvent);\n        if (!HAS_BUTTONS) {\n          var up = BUTTON_TO_BUTTONS[e.button];\n\n          // Produces wrong state of buttons in Browsers without `buttons` support\n          // when a mouse button that was pressed outside the document is released\n          // inside and other buttons are still pressed down.\n          e.buttons = p ? p.buttons & ~up : 0;\n          inEvent.buttons = e.buttons;\n        }\n        pointermap.set(this.POINTER_ID, inEvent);\n\n        // Support: Firefox <=44 only\n        // FF Ubuntu includes the lifted button in the `buttons` property on\n        // mouseup.\n        // https://bugzilla.mozilla.org/show_bug.cgi?id=1223366\n        e.buttons &= ~BUTTON_TO_BUTTONS[e.button];\n        if (e.buttons === 0) {\n          dispatcher.up(e);\n        } else {\n          dispatcher.move(e);\n        }\n      }\n    },\n    mouseover: function(inEvent) {\n      if (!this.isEventSimulatedFromTouch(inEvent)) {\n        var e = this.prepareEvent(inEvent);\n        if (!HAS_BUTTONS) { this.prepareButtonsForMove(e, inEvent); }\n        e.button = -1;\n        pointermap.set(this.POINTER_ID, inEvent);\n        dispatcher.enterOver(e);\n      }\n    },\n    mouseout: function(inEvent) {\n      if (!this.isEventSimulatedFromTouch(inEvent)) {\n        var e = this.prepareEvent(inEvent);\n        if (!HAS_BUTTONS) { this.prepareButtonsForMove(e, inEvent); }\n        e.button = -1;\n        dispatcher.leaveOut(e);\n      }\n    },\n    cancel: function(inEvent) {\n      var e = this.prepareEvent(inEvent);\n      dispatcher.cancel(e);\n      this.deactivateMouse();\n    },\n    deactivateMouse: function() {\n      pointermap.delete(this.POINTER_ID);\n    }\n  };\n\n  var captureInfo = dispatcher.captureInfo;\n  var findTarget = targeting.findTarget.bind(targeting);\n  var allShadows = targeting.allShadows.bind(targeting);\n  var pointermap$1 = dispatcher.pointermap;\n\n  // this should be long enough to ignore compat mouse events made by touch\n  var DEDUP_TIMEOUT = 2500;\n  var ATTRIB = 'touch-action';\n  var INSTALLER;\n\n  // bitmask for _scrollType\n  var UP = 1;\n  var DOWN = 2;\n  var LEFT = 4;\n  var RIGHT = 8;\n  var AUTO = UP | DOWN | LEFT | RIGHT;\n\n  // handler block for native touch events\n  var touchEvents = {\n    events: [\n      'touchstart',\n      'touchmove',\n      'touchforcechange',\n      'touchend',\n      'touchcancel'\n    ],\n    register: function(target) {\n      INSTALLER.enableOnSubtree(target);\n    },\n    unregister: function() {\n\n      // TODO(dfreedman): is it worth it to disconnect the MO?\n    },\n    elementAdded: function(el) {\n      var a = el.getAttribute(ATTRIB);\n      var st = this.touchActionToScrollType(a);\n      if (typeof st === \"number\") {\n        el._scrollType = st;\n        dispatcher.listen(el, this.events);\n\n        // set touch-action on shadows as well\n        allShadows(el).forEach(function(s) {\n          s._scrollType = st;\n          dispatcher.listen(s, this.events);\n        }, this);\n      }\n    },\n    elementRemoved: function(el) {\n\n      // In some cases, an element is removed before a touchend.\n      // When this is the case, we should wait for the touchend before unlistening,\n      // because we still want pointer events to bubble up after removing from DOM.\n      if (pointermap$1.size > 0) {\n        var evts = this.events;\n        el.addEventListener('touchend', function() {\n          el._scrollType = undefined;\n          dispatcher.unlisten(el, evts);\n        });\n      } else {\n        el._scrollType = undefined;\n        dispatcher.unlisten(el, this.events);\n      }\n\n      // remove touch-action from shadow\n      allShadows(el).forEach(function(s) {\n        s._scrollType = undefined;\n        dispatcher.unlisten(s, this.events);\n      }, this);\n    },\n    elementChanged: function(el, oldValue) {\n      var a = el.getAttribute(ATTRIB);\n      var st = this.touchActionToScrollType(a);\n      var oldSt = this.touchActionToScrollType(oldValue);\n\n      // simply update scrollType if listeners are already established\n      if (typeof st === \"number\" && typeof oldSt === \"number\") {\n        el._scrollType = st;\n        allShadows(el).forEach(function(s) {\n          s._scrollType = st;\n        }, this);\n      } else if (typeof oldSt === \"number\") {\n        this.elementRemoved(el);\n      } else if (typeof st === \"number\") {\n        this.elementAdded(el);\n      }\n    },\n    scrollTypes: {\n      UP: function(s) {\n        return s.includes('pan-y') || s.includes('pan-up') ? UP : 0;\n      },\n      DOWN: function(s) {\n        return s.includes('pan-y') || s.includes('pan-down') ? DOWN : 0;\n      },\n      LEFT: function(s) {\n        return s.includes('pan-x') || s.includes('pan-left') ? LEFT : 0;\n      },\n      RIGHT: function(s) {\n        return s.includes('pan-x') || s.includes('pan-right') ? RIGHT : 0;\n      }\n    },\n    touchActionToScrollType: function(touchAction) {\n      if (!touchAction) {\n        return;\n      }\n\n      if (touchAction === \"auto\") {\n        return AUTO;\n      }\n\n      if (touchAction === \"none\") {\n        return 0;\n      }\n\n      var s = touchAction.split(' ');\n      var st = this.scrollTypes;\n\n      // construct a bitmask of allowed scroll directions\n      return st.UP(s) | st.DOWN(s) | st.LEFT(s) | st.RIGHT(s);\n    },\n    POINTER_TYPE: 'touch',\n    firstTouch: null,\n    isPrimaryTouch: function(inTouch) {\n      return this.firstTouch === inTouch.identifier;\n    },\n    setPrimaryTouch: function(inTouch) {\n\n      // set primary touch if there no pointers, or the only pointer is the mouse\n      if (pointermap$1.size === 0 || (pointermap$1.size === 1 && pointermap$1.has(1))) {\n        this.firstTouch = inTouch.identifier;\n        this.firstXY = { X: inTouch.clientX, Y: inTouch.clientY };\n        this.scrolling = false;\n      }\n    },\n    removePrimaryPointer: function(inPointer) {\n      if (inPointer.isPrimary) {\n        this.firstTouch = null;\n        this.firstXY = null;\n      }\n    },\n    typeToButtons: function(type) {\n      var ret = 0;\n      if (type === 'touchstart' || type === 'touchmove' || type === 'touchforcechange') {\n        ret = 1;\n      }\n      return ret;\n    },\n    touchToPointer: function(inTouch) {\n      var cte = this.currentTouchEvent;\n      var e = dispatcher.cloneEvent(inTouch);\n\n      // We reserve pointerId 1 for Mouse.\n      // Touch identifiers can start at 0.\n      // Add 2 to the touch identifier for compatibility.\n      var id = e.pointerId = inTouch.identifier + 2;\n      e.target = captureInfo[id] || findTarget(e);\n      e.bubbles = true;\n      e.cancelable = true;\n      e.button = 0;\n      e.buttons = this.typeToButtons(cte.type);\n      e.width = (inTouch.radiusX || inTouch.webkitRadiusX || 0) * 2;\n      e.height = (inTouch.radiusY || inTouch.webkitRadiusY || 0) * 2;\n      e.pressure = inTouch.force !== undefined ?\n        inTouch.force :\n        inTouch.webkitForce !== undefined ?\n          inTouch.webkitForce : undefined;\n      e.isPrimary = this.isPrimaryTouch(inTouch);\n      if (inTouch.altitudeAngle) {\n        var tan = Math.tan(inTouch.altitudeAngle);\n        var radToDeg = 180 / Math.PI;\n        e.tiltX = Math.atan(Math.cos(inTouch.azimuthAngle) / tan) * radToDeg;\n        e.tiltY = Math.atan(Math.sin(inTouch.azimuthAngle) / tan) * radToDeg;\n      } else {\n        e.tiltX = 0;\n        e.tiltY = 0;\n      }\n      if (inTouch.touchType === 'stylus') {\n        e.pointerType = 'pen';\n      } else {\n        e.pointerType = this.POINTER_TYPE;\n      }\n\n      // forward modifier keys\n      e.altKey = cte.altKey;\n      e.ctrlKey = cte.ctrlKey;\n      e.metaKey = cte.metaKey;\n      e.shiftKey = cte.shiftKey;\n\n      // forward touch preventDefaults\n      var self = this;\n      e.preventDefault = function() {\n        self.scrolling = false;\n        self.firstXY = null;\n        cte.preventDefault();\n      };\n      return e;\n    },\n    processTouches: function(inEvent, inFunction) {\n      var tl = inEvent.changedTouches;\n      this.currentTouchEvent = inEvent;\n      for (var i = 0, t; i < tl.length; i++) {\n        t = tl[i];\n        inFunction.call(this, this.touchToPointer(t));\n      }\n    },\n\n    // For single axis scrollers, determines whether the element should emit\n    // pointer events or behave as a scroller\n    shouldScroll: function(inEvent) {\n      if (this.firstXY) {\n        var ret;\n        var st = inEvent.currentTarget._scrollType;\n        if (st === 0) {\n\n          // this element is a `touch-action: none`, should never scroll\n          ret = false;\n        } else if (st === AUTO) {\n\n          // this element is a `touch-action: auto`, should always scroll\n          ret = true;\n        } else {\n          var t = inEvent.changedTouches[0];\n\n          var dy = t.clientY - this.firstXY.Y;\n          var dya = Math.abs(dy);\n          var dx = t.clientX - this.firstXY.X;\n          var dxa = Math.abs(dx);\n\n          var up = st & UP;\n          var down = st & DOWN;\n          var left = st & LEFT;\n          var right = st & RIGHT;\n\n          if (left && right) {\n\n            // should scroll on the x axis\n            ret = dxa > dya;\n          } else if (left) {\n\n            // should scroll left\n            ret = dxa > dya && dx > 0;\n          } else if (right) {\n\n            // should scroll right\n            ret = dxa > dya && dx < 0;\n          }\n\n          if (!ret) {\n            if (up && down) {\n\n              // should scroll on the y axis\n              ret = dxa < dya;\n            } else if (up) {\n\n              // should scroll up\n              ret = dxa < dya && dy > 0;\n            } else if (down) {\n\n              // should scroll down\n              ret = dxa < dya && dy < 0;\n            }\n          }\n\n        }\n        this.firstXY = null;\n        return ret;\n      }\n    },\n    findTouch: function(inTL, inId) {\n      for (var i = 0, l = inTL.length, t; i < l && (t = inTL[i]); i++) {\n        if (t.identifier === inId) {\n          return true;\n        }\n      }\n    },\n\n    // In some instances, a touchstart can happen without a touchend. This\n    // leaves the pointermap in a broken state.\n    // Therefore, on every touchstart, we remove the touches that did not fire a\n    // touchend event.\n    // To keep state globally consistent, we fire a\n    // pointercancel for this \"abandoned\" touch\n    vacuumTouches: function(inEvent) {\n      var tl = inEvent.touches;\n\n      // pointermap.size should be < tl.length here, as the touchstart has not\n      // been processed yet.\n      if (pointermap$1.size >= tl.length) {\n        var d = [];\n        pointermap$1.forEach(function(value, key) {\n\n          // Never remove pointerId == 1, which is mouse.\n          // Touch identifiers are 2 smaller than their pointerId, which is the\n          // index in pointermap.\n          if (key !== 1 && !this.findTouch(tl, key - 2)) {\n            var p = value.out;\n            d.push(p);\n          }\n        }, this);\n        d.forEach(this.cancelOut, this);\n      }\n    },\n    touchstart: function(inEvent) {\n      this.vacuumTouches(inEvent);\n      this.setPrimaryTouch(inEvent.changedTouches[0]);\n      this.dedupSynthMouse(inEvent);\n      if (!this.scrolling) {\n        this.processTouches(inEvent, this.overDown);\n      }\n    },\n    overDown: function(inPointer) {\n      pointermap$1.set(inPointer.pointerId, {\n        target: inPointer.target,\n        out: inPointer,\n        outTarget: inPointer.target\n      });\n      dispatcher.enterOver(inPointer);\n      dispatcher.down(inPointer);\n    },\n\n    // Called when pressure or tilt changes without the x/y changing\n    touchforcechange: function(inEvent) {\n      this.touchmove(inEvent);\n    },\n    touchmove: function(inEvent) {\n      if (!this.scrolling) {\n        if (this.shouldScroll(inEvent)) {\n          this.scrolling = true;\n          this.touchcancel(inEvent);\n        } else {\n          if (inEvent.type !== 'touchforcechange') {\n            inEvent.preventDefault();\n          }\n          this.processTouches(inEvent, this.moveOverOut);\n        }\n      }\n    },\n    moveOverOut: function(inPointer) {\n      var event = inPointer;\n      var pointer = pointermap$1.get(event.pointerId);\n\n      // a finger drifted off the screen, ignore it\n      if (!pointer) {\n        return;\n      }\n      var outEvent = pointer.out;\n      var outTarget = pointer.outTarget;\n      dispatcher.move(event);\n      if (outEvent && outTarget !== event.target) {\n        outEvent.relatedTarget = event.target;\n        event.relatedTarget = outTarget;\n\n        // recover from retargeting by shadow\n        outEvent.target = outTarget;\n        if (event.target) {\n          dispatcher.leaveOut(outEvent);\n          dispatcher.enterOver(event);\n        } else {\n\n          // clean up case when finger leaves the screen\n          event.target = outTarget;\n          event.relatedTarget = null;\n          this.cancelOut(event);\n        }\n      }\n      pointer.out = event;\n      pointer.outTarget = event.target;\n    },\n    touchend: function(inEvent) {\n      this.dedupSynthMouse(inEvent);\n      this.processTouches(inEvent, this.upOut);\n    },\n    upOut: function(inPointer) {\n      if (!this.scrolling) {\n        dispatcher.up(inPointer);\n        dispatcher.leaveOut(inPointer);\n      }\n      this.cleanUpPointer(inPointer);\n    },\n    touchcancel: function(inEvent) {\n      this.processTouches(inEvent, this.cancelOut);\n    },\n    cancelOut: function(inPointer) {\n      dispatcher.cancel(inPointer);\n      dispatcher.leaveOut(inPointer);\n      this.cleanUpPointer(inPointer);\n    },\n    cleanUpPointer: function(inPointer) {\n      pointermap$1.delete(inPointer.pointerId);\n      this.removePrimaryPointer(inPointer);\n    },\n\n    // prevent synth mouse events from creating pointer events\n    dedupSynthMouse: function(inEvent) {\n      var lts = mouseEvents.lastTouches;\n      var t = inEvent.changedTouches[0];\n\n      // only the primary finger will synth mouse events\n      if (this.isPrimaryTouch(t)) {\n\n        // remember x/y of last touch\n        var lt = { x: t.clientX, y: t.clientY };\n        lts.push(lt);\n        var fn = (function(lts, lt) {\n          var i = lts.indexOf(lt);\n          if (i > -1) {\n            lts.splice(i, 1);\n          }\n        }).bind(null, lts, lt);\n        setTimeout(fn, DEDUP_TIMEOUT);\n      }\n    }\n  };\n\n  INSTALLER = new Installer(touchEvents.elementAdded, touchEvents.elementRemoved,\n    touchEvents.elementChanged, touchEvents);\n\n  var pointermap$2 = dispatcher.pointermap;\n  var HAS_BITMAP_TYPE = window.MSPointerEvent &&\n    typeof window.MSPointerEvent.MSPOINTER_TYPE_MOUSE === 'number';\n  var msEvents = {\n    events: [\n      'MSPointerDown',\n      'MSPointerMove',\n      'MSPointerUp',\n      'MSPointerOut',\n      'MSPointerOver',\n      'MSPointerCancel',\n      'MSGotPointerCapture',\n      'MSLostPointerCapture'\n    ],\n    register: function(target) {\n      dispatcher.listen(target, this.events);\n    },\n    unregister: function(target) {\n      dispatcher.unlisten(target, this.events);\n    },\n    POINTER_TYPES: [\n      '',\n      'unavailable',\n      'touch',\n      'pen',\n      'mouse'\n    ],\n    prepareEvent: function(inEvent) {\n      var e = inEvent;\n      if (HAS_BITMAP_TYPE) {\n        e = dispatcher.cloneEvent(inEvent);\n        e.pointerType = this.POINTER_TYPES[inEvent.pointerType];\n      }\n      return e;\n    },\n    cleanup: function(id) {\n      pointermap$2.delete(id);\n    },\n    MSPointerDown: function(inEvent) {\n      pointermap$2.set(inEvent.pointerId, inEvent);\n      var e = this.prepareEvent(inEvent);\n      dispatcher.down(e);\n    },\n    MSPointerMove: function(inEvent) {\n      var e = this.prepareEvent(inEvent);\n      dispatcher.move(e);\n    },\n    MSPointerUp: function(inEvent) {\n      var e = this.prepareEvent(inEvent);\n      dispatcher.up(e);\n      this.cleanup(inEvent.pointerId);\n    },\n    MSPointerOut: function(inEvent) {\n      var e = this.prepareEvent(inEvent);\n      dispatcher.leaveOut(e);\n    },\n    MSPointerOver: function(inEvent) {\n      var e = this.prepareEvent(inEvent);\n      dispatcher.enterOver(e);\n    },\n    MSPointerCancel: function(inEvent) {\n      var e = this.prepareEvent(inEvent);\n      dispatcher.cancel(e);\n      this.cleanup(inEvent.pointerId);\n    },\n    MSLostPointerCapture: function(inEvent) {\n      var e = dispatcher.makeEvent('lostpointercapture', inEvent);\n      dispatcher.dispatchEvent(e);\n    },\n    MSGotPointerCapture: function(inEvent) {\n      var e = dispatcher.makeEvent('gotpointercapture', inEvent);\n      dispatcher.dispatchEvent(e);\n    }\n  };\n\n  function applyPolyfill() {\n\n    // only activate if this platform does not have pointer events\n    if (!window.PointerEvent) {\n      window.PointerEvent = PointerEvent;\n\n      if (window.navigator.msPointerEnabled) {\n        var tp = window.navigator.msMaxTouchPoints;\n        Object.defineProperty(window.navigator, 'maxTouchPoints', {\n          value: tp,\n          enumerable: true\n        });\n        dispatcher.registerSource('ms', msEvents);\n      } else {\n        Object.defineProperty(window.navigator, 'maxTouchPoints', {\n          value: 0,\n          enumerable: true\n        });\n        dispatcher.registerSource('mouse', mouseEvents);\n        if (window.ontouchstart !== undefined) {\n          dispatcher.registerSource('touch', touchEvents);\n        }\n      }\n\n      dispatcher.register(document);\n    }\n  }\n\n  var n = window.navigator;\n  var s;\n  var r;\n  var h;\n  function assertActive(id) {\n    if (!dispatcher.pointermap.has(id)) {\n      var error = new Error('NotFoundError');\n      error.name = 'NotFoundError';\n      throw error;\n    }\n  }\n  function assertConnected(elem) {\n    var parent = elem.parentNode;\n    while (parent && parent !== elem.ownerDocument) {\n      parent = parent.parentNode;\n    }\n    if (!parent) {\n      var error = new Error('InvalidStateError');\n      error.name = 'InvalidStateError';\n      throw error;\n    }\n  }\n  function inActiveButtonState(id) {\n    var p = dispatcher.pointermap.get(id);\n    return p.buttons !== 0;\n  }\n  if (n.msPointerEnabled) {\n    s = function(pointerId) {\n      assertActive(pointerId);\n      assertConnected(this);\n      if (inActiveButtonState(pointerId)) {\n        dispatcher.setCapture(pointerId, this, true);\n        this.msSetPointerCapture(pointerId);\n      }\n    };\n    r = function(pointerId) {\n      assertActive(pointerId);\n      dispatcher.releaseCapture(pointerId, true);\n      this.msReleasePointerCapture(pointerId);\n    };\n  } else {\n    s = function setPointerCapture(pointerId) {\n      assertActive(pointerId);\n      assertConnected(this);\n      if (inActiveButtonState(pointerId)) {\n        dispatcher.setCapture(pointerId, this);\n      }\n    };\n    r = function releasePointerCapture(pointerId) {\n      assertActive(pointerId);\n      dispatcher.releaseCapture(pointerId);\n    };\n  }\n  h = function hasPointerCapture(pointerId) {\n    return !!dispatcher.captureInfo[pointerId];\n  };\n\n  function applyPolyfill$1() {\n    if (window.Element && !Element.prototype.setPointerCapture) {\n      Object.defineProperties(Element.prototype, {\n        'setPointerCapture': {\n          value: s\n        },\n        'releasePointerCapture': {\n          value: r\n        },\n        'hasPointerCapture': {\n          value: h\n        }\n      });\n    }\n  }\n\n  applyAttributeStyles();\n  applyPolyfill();\n  applyPolyfill$1();\n\n  var pointerevents = {\n    dispatcher: dispatcher,\n    Installer: Installer,\n    PointerEvent: PointerEvent,\n    PointerMap: PointerMap,\n    targetFinding: targeting\n  };\n\n  return pointerevents;\n\n}));","/**\n * @module ol/renderer/canvas/VectorImageLayer\n */\nimport ImageCanvas from '../../ImageCanvas.js';\nimport ViewHint from '../../ViewHint.js';\nimport {getHeight, getWidth, isEmpty, scaleFromCenter} from '../../extent.js';\nimport {assign} from '../../obj.js';\nimport CanvasImageLayerRenderer from './ImageLayer.js';\nimport CanvasVectorLayerRenderer from './VectorLayer.js';\nimport EventType from '../../events/EventType.js';\nimport ImageState from '../../ImageState.js';\nimport {renderDeclutterItems} from '../../render.js';\n\n/**\n * @classdesc\n * Canvas renderer for image layers.\n * @api\n */\nclass CanvasVectorImageLayerRenderer extends CanvasImageLayerRenderer {\n\n  /**\n   * @param {import(\"../../layer/VectorImage.js\").default} layer Vector image layer.\n   */\n  constructor(layer) {\n    super(layer);\n\n    /**\n     * @private\n     * @type {import(\"./VectorLayer.js\").default}\n     */\n    this.vectorRenderer_ = new CanvasVectorLayerRenderer(layer);\n\n    /**\n     * @private\n     * @type {number}\n     */\n    this.layerImageRatio_ = layer.getImageRatio();\n\n  }\n\n  /**\n   * @inheritDoc\n   */\n  disposeInternal() {\n    this.vectorRenderer_.dispose();\n    super.disposeInternal();\n  }\n\n  /**\n   * @inheritDoc\n   */\n  handleFontsChanged() {\n    this.vectorRenderer_.handleFontsChanged();\n  }\n\n  /**\n   * @inheritDoc\n   */\n  prepareFrame(frameState) {\n    const pixelRatio = frameState.pixelRatio;\n    const viewState = frameState.viewState;\n    const viewResolution = viewState.resolution;\n\n    const hints = frameState.viewHints;\n    const vectorRenderer = this.vectorRenderer_;\n    let renderedExtent = frameState.extent;\n    if (this.layerImageRatio_ !== 1) {\n      renderedExtent = renderedExtent.slice(0);\n      scaleFromCenter(renderedExtent, this.layerImageRatio_);\n    }\n\n    if (!hints[ViewHint.ANIMATING] && !hints[ViewHint.INTERACTING] && !isEmpty(renderedExtent)) {\n      vectorRenderer.useContainer(null, null, 1);\n      const context = vectorRenderer.context;\n      const imageFrameState = /** @type {import(\"../../PluggableMap.js\").FrameState} */ (assign({}, frameState, {\n        declutterItems: [],\n        size: [\n          getWidth(renderedExtent) / viewResolution,\n          getHeight(renderedExtent) / viewResolution\n        ],\n        viewState: /** @type {import(\"../../View.js\").State} */ (assign({}, frameState.viewState, {\n          rotation: 0\n        }))\n      }));\n      const image = new ImageCanvas(renderedExtent, viewResolution, pixelRatio, context.canvas, function(callback) {\n        if (vectorRenderer.prepareFrame(imageFrameState) && vectorRenderer.replayGroupChanged) {\n          vectorRenderer.renderFrame(imageFrameState, null);\n          renderDeclutterItems(imageFrameState, null);\n          callback();\n        }\n      });\n\n      image.addEventListener(EventType.CHANGE, function() {\n        if (image.getState() === ImageState.LOADED) {\n          this.image_ = image;\n        }\n      }.bind(this));\n      image.load();\n    }\n\n    if (this.image_) {\n      const image = this.image_;\n      const imageResolution = image.getResolution();\n      const imagePixelRatio = image.getPixelRatio();\n      this.renderedResolution = imageResolution * pixelRatio / imagePixelRatio;\n    }\n\n    return !!this.image_;\n  }\n\n  /**\n   * @override\n   */\n  preRender() {}\n\n  /**\n   * @override\n   */\n  postRender() {}\n\n  /**\n   * @inheritDoc\n   */\n  forEachFeatureAtCoordinate(coordinate, frameState, hitTolerance, callback, declutteredFeatures) {\n    if (this.vectorRenderer_) {\n      return this.vectorRenderer_.forEachFeatureAtCoordinate(coordinate, frameState, hitTolerance, callback, declutteredFeatures);\n    } else {\n      return super.forEachFeatureAtCoordinate(coordinate, frameState, hitTolerance, callback, declutteredFeatures);\n    }\n  }\n}\n\n\nexport default CanvasVectorImageLayerRenderer;\n","/**\n * @module ol/layer/VectorImage\n */\nimport BaseVectorLayer from './BaseVector.js';\nimport {assign} from '../obj.js';\nimport CanvasVectorImageLayerRenderer from '../renderer/canvas/VectorImageLayer.js';\n\n/**\n * @typedef {Object} Options\n * @property {string} [className='ol-layer'] A CSS class name to set to the layer element.\n * @property {number} [opacity=1] Opacity (0, 1).\n * @property {boolean} [visible=true] Visibility.\n * @property {import(\"../extent.js\").Extent} [extent] The bounding extent for layer rendering.  The layer will not be\n * rendered outside of this extent.\n * @property {number} [zIndex] The z-index for layer rendering.  At rendering time, the layers\n * will be ordered, first by Z-index and then by position. When `undefined`, a `zIndex` of 0 is assumed\n * for layers that are added to the map's `layers` collection, or `Infinity` when the layer's `setMap()`\n * method was used.\n * @property {number} [minResolution] The minimum resolution (inclusive) at which this layer will be\n * visible.\n * @property {number} [maxResolution] The maximum resolution (exclusive) below which this layer will\n * be visible.\n * @property {import(\"../render.js\").OrderFunction} [renderOrder] Render order. Function to be used when sorting\n * features before rendering. By default features are drawn in the order that they are created. Use\n * `null` to avoid the sort, but get an undefined draw order.\n * @property {number} [renderBuffer=100] The buffer in pixels around the viewport extent used by the\n * renderer when getting features from the vector source for the rendering or hit-detection.\n * Recommended value: the size of the largest symbol, line width or label.\n * @property {import(\"../source/Vector.js\").default} [source] Source.\n * @property {import(\"../PluggableMap.js\").default} [map] Sets the layer as overlay on a map. The map will not manage\n * this layer in its layers collection, and the layer will be rendered on top. This is useful for\n * temporary layers. The standard way to add a layer to a map and have it managed by the map is to\n * use {@link module:ol/Map#addLayer}.\n * @property {boolean} [declutter=false] Declutter images and text on this layer. The priority is defined\n * by the `zIndex` of the style and the render order of features. Higher z-index means higher priority.\n * Within the same z-index, a feature rendered before another has higher priority.\n * @property {import(\"../style/Style.js\").StyleLike} [style] Layer style. See\n * {@link module:ol/style} for default style which will be used if this is not defined.\n * @property {boolean} [updateWhileAnimating=false] When set to `true`, feature batches will\n * be recreated during animations. This means that no vectors will be shown clipped, but the\n * setting will have a performance impact for large amounts of vector data. When set to `false`,\n * batches will be recreated when no animation is active.\n * @property {boolean} [updateWhileInteracting=false] When set to `true`, feature batches will\n * be recreated during interactions. See also `updateWhileAnimating`.\n * @property {number} [imageRatio=1] Ratio by which the rendered extent should be larger than the\n * viewport extent. A larger ratio avoids cut images during panning, but will cause a decrease in performance.\n */\n\n\n/**\n * @classdesc\n * Vector data that is rendered client-side.\n * Note that any property set in the options is set as a {@link module:ol/Object~BaseObject}\n * property on the layer object; for example, setting `title: 'My Title'` in the\n * options means that `title` is observable, and has get/set accessors.\n *\n * @api\n */\nclass VectorImageLayer extends BaseVectorLayer {\n  /**\n   * @param {Options=} opt_options Options.\n   */\n  constructor(opt_options) {\n    const options = opt_options ? opt_options : {};\n\n    const baseOptions = assign({}, options);\n    delete baseOptions.imageRatio;\n    super(baseOptions);\n\n    /**\n     * @type {number}\n     * @private\n     */\n    this.imageRatio_ = options.imageRatio !== undefined ? options.imageRatio : 1;\n\n  }\n\n  /**\n   * @return {number} Ratio between rendered extent size and viewport extent size.\n   */\n  getImageRatio() {\n    return this.imageRatio_;\n  }\n\n  /**\n   * Create a renderer for this layer.\n   * @return {import(\"../renderer/Layer.js\").default} A layer renderer.\n   * @protected\n   */\n  createRenderer() {\n    return new CanvasVectorImageLayerRenderer(this);\n  }\n}\n\n\nexport default VectorImageLayer;\n","\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar getBlobFromURL_1 = __importDefault(require(\"./getBlobFromURL\"));\nvar utils_1 = require(\"./utils\");\nvar URL_REGEX = /url\\((['\"]?)([^'\"]+?)\\1\\)/g;\nfunction resolveUrl(url, baseUrl) {\n    // url is absolute already\n    if (url.match(/^[a-z]+:\\/\\//i)) {\n        return url;\n    }\n    // url is absolute already, without protocol\n    if (url.match(/^\\/\\//)) {\n        return window.location.protocol + url;\n    }\n    // dataURI, mailto:, tel:, etc.\n    if (url.match(/^[a-z]+:/i)) {\n        return url;\n    }\n    var doc = document.implementation.createHTMLDocument();\n    var base = doc.createElement('base');\n    var a = doc.createElement('a');\n    doc.head.appendChild(base);\n    doc.body.appendChild(a);\n    if (baseUrl) {\n        base.href = baseUrl;\n    }\n    a.href = url;\n    return a.href;\n}\nfunction escape(url) {\n    return url.replace(/([.*+?^${}()|\\[\\]\\/\\\\])/g, '\\\\$1');\n}\nfunction urlToRegex(url) {\n    return new RegExp(\"(url\\\\(['\\\"]?)(\" + escape(url) + \")(['\\\"]?\\\\))\", 'g');\n}\nfunction parseURLs(str) {\n    var result = [];\n    str.replace(URL_REGEX, function (raw, quotation, url) {\n        result.push(url);\n        return raw;\n    });\n    return result.filter(function (url) { return !utils_1.isDataUrl(url); });\n}\nfunction embed(cssString, resourceURL, baseURL, options) {\n    var resolvedURL = baseURL ? resolveUrl(resourceURL, baseURL) : resourceURL;\n    return Promise.resolve(resolvedURL)\n        .then(function (url) { return getBlobFromURL_1.default(url, options); })\n        .then(function (data) { return utils_1.toDataURL(data, utils_1.getMimeType(resourceURL)); })\n        .then(function (dataURL) { return cssString.replace(urlToRegex(resourceURL), \"$1\" + dataURL + \"$3\"); })\n        .then(function (content) { return content; }, function () { return resolvedURL; });\n}\nfunction shouldEmbed(string) {\n    return string.search(URL_REGEX) !== -1;\n}\nexports.shouldEmbed = shouldEmbed;\nfunction embedResources(cssString, baseUrl, options) {\n    if (!shouldEmbed(cssString)) {\n        return Promise.resolve(cssString);\n    }\n    return Promise.resolve(cssString)\n        .then(parseURLs)\n        .then(function (urls) { return urls.reduce(function (done, url) { return done.then(function (ret) { return embed(ret, url, baseUrl, options); }); }, Promise.resolve(cssString)); });\n}\nexports.default = embedResources;\n","\"use strict\";\n/* tslint:disable:max-line-length */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar utils_1 = require(\"./utils\");\n// KNOWN ISSUE\n// -----------\n// Can not handle redirect-url, such as when access 'http://something.com/avatar.png'\n// will redirect to 'http://something.com/65fc2ffcc8aea7ba65a1d1feda173540'\nvar TIMEOUT = 30000;\nfunction getBlobFromURL(url, options) {\n    // cache bypass so we dont have CORS issues with cached images\n    // ref: https://developer.mozilla.org/en/docs/Web/API/XMLHttpRequest/Using_XMLHttpRequest#Bypassing_the_cache\n    if (options.cacheBust) {\n        url += ((/\\?/).test(url) ? '&' : '?') + (new Date()).getTime(); // tslint:disable-line\n    }\n    var failed = function (reason) {\n        var placeholder = '';\n        if (options.imagePlaceholder) {\n            var split = options.imagePlaceholder.split(/,/);\n            if (split && split[1]) {\n                placeholder = split[1];\n            }\n        }\n        var msg = \"Failed to fetch resource: \" + url;\n        if (reason) {\n            msg = typeof reason === 'string' ? reason : reason.message;\n        }\n        if (msg) {\n            console.error(msg);\n        }\n        return placeholder;\n    };\n    var deferred = window.fetch\n        // fetch\n        ? window.fetch(url)\n            .then(function (response) { return response.blob(); })\n            .then(function (blob) { return new Promise(function (resolve, reject) {\n            var reader = new FileReader();\n            reader.onloadend = function () { return resolve(reader.result); };\n            reader.onerror = reject;\n            reader.readAsDataURL(blob);\n        }); })\n            .then(utils_1.getDataURLContent)\n            .catch(function () { return new Promise(function (resolve, reject) {\n            reject();\n        }); })\n        // xhr\n        : new Promise((function (resolve, reject) {\n            var req = new XMLHttpRequest();\n            var timeout = function () {\n                reject(new Error(\"Timeout of \" + TIMEOUT + \"ms occured while fetching resource: \" + url));\n            };\n            var done = function () {\n                if (req.readyState !== 4) {\n                    return;\n                }\n                if (req.status !== 200) {\n                    reject(new Error(\"Failed to fetch resource: \" + url + \", status: \" + req.status));\n                    return;\n                }\n                var encoder = new FileReader();\n                encoder.onloadend = function () {\n                    resolve(utils_1.getDataURLContent(encoder.result));\n                };\n                encoder.readAsDataURL(req.response);\n            };\n            req.onreadystatechange = done;\n            req.ontimeout = timeout;\n            req.responseType = 'blob';\n            req.timeout = TIMEOUT;\n            req.open('GET', url, true);\n            req.send();\n        }));\n    return deferred.catch(failed);\n}\nexports.default = getBlobFromURL;\n","exports.read = function (buffer, offset, isLE, mLen, nBytes) {\n  var e, m\n  var eLen = (nBytes * 8) - mLen - 1\n  var eMax = (1 << eLen) - 1\n  var eBias = eMax >> 1\n  var nBits = -7\n  var i = isLE ? (nBytes - 1) : 0\n  var d = isLE ? -1 : 1\n  var s = buffer[offset + i]\n\n  i += d\n\n  e = s & ((1 << (-nBits)) - 1)\n  s >>= (-nBits)\n  nBits += eLen\n  for (; nBits > 0; e = (e * 256) + buffer[offset + i], i += d, nBits -= 8) {}\n\n  m = e & ((1 << (-nBits)) - 1)\n  e >>= (-nBits)\n  nBits += mLen\n  for (; nBits > 0; m = (m * 256) + buffer[offset + i], i += d, nBits -= 8) {}\n\n  if (e === 0) {\n    e = 1 - eBias\n  } else if (e === eMax) {\n    return m ? NaN : ((s ? -1 : 1) * Infinity)\n  } else {\n    m = m + Math.pow(2, mLen)\n    e = e - eBias\n  }\n  return (s ? -1 : 1) * m * Math.pow(2, e - mLen)\n}\n\nexports.write = function (buffer, value, offset, isLE, mLen, nBytes) {\n  var e, m, c\n  var eLen = (nBytes * 8) - mLen - 1\n  var eMax = (1 << eLen) - 1\n  var eBias = eMax >> 1\n  var rt = (mLen === 23 ? Math.pow(2, -24) - Math.pow(2, -77) : 0)\n  var i = isLE ? 0 : (nBytes - 1)\n  var d = isLE ? 1 : -1\n  var s = value < 0 || (value === 0 && 1 / value < 0) ? 1 : 0\n\n  value = Math.abs(value)\n\n  if (isNaN(value) || value === Infinity) {\n    m = isNaN(value) ? 1 : 0\n    e = eMax\n  } else {\n    e = Math.floor(Math.log(value) / Math.LN2)\n    if (value * (c = Math.pow(2, -e)) < 1) {\n      e--\n      c *= 2\n    }\n    if (e + eBias >= 1) {\n      value += rt / c\n    } else {\n      value += rt * Math.pow(2, 1 - eBias)\n    }\n    if (value * c >= 2) {\n      e++\n      c /= 2\n    }\n\n    if (e + eBias >= eMax) {\n      m = 0\n      e = eMax\n    } else if (e + eBias >= 1) {\n      m = ((value * c) - 1) * Math.pow(2, mLen)\n      e = e + eBias\n    } else {\n      m = value * Math.pow(2, eBias - 1) * Math.pow(2, mLen)\n      e = 0\n    }\n  }\n\n  for (; mLen >= 8; buffer[offset + i] = m & 0xff, i += d, m /= 256, mLen -= 8) {}\n\n  e = (e << mLen) | m\n  eLen += mLen\n  for (; eLen > 0; buffer[offset + i] = e & 0xff, i += d, e /= 256, eLen -= 8) {}\n\n  buffer[offset + i - d] |= s * 128\n}\n","var Processor = require('./processor');\n\nexports.Processor = Processor;\n","'use strict';\n\nmodule.exports = Pbf;\n\nvar ieee754 = require('ieee754');\n\nfunction Pbf(buf) {\n    this.buf = ArrayBuffer.isView && ArrayBuffer.isView(buf) ? buf : new Uint8Array(buf || 0);\n    this.pos = 0;\n    this.type = 0;\n    this.length = this.buf.length;\n}\n\nPbf.Varint  = 0; // varint: int32, int64, uint32, uint64, sint32, sint64, bool, enum\nPbf.Fixed64 = 1; // 64-bit: double, fixed64, sfixed64\nPbf.Bytes   = 2; // length-delimited: string, bytes, embedded messages, packed repeated fields\nPbf.Fixed32 = 5; // 32-bit: float, fixed32, sfixed32\n\nvar SHIFT_LEFT_32 = (1 << 16) * (1 << 16),\n    SHIFT_RIGHT_32 = 1 / SHIFT_LEFT_32;\n\nPbf.prototype = {\n\n    destroy: function() {\n        this.buf = null;\n    },\n\n    // === READING =================================================================\n\n    readFields: function(readField, result, end) {\n        end = end || this.length;\n\n        while (this.pos < end) {\n            var val = this.readVarint(),\n                tag = val >> 3,\n                startPos = this.pos;\n\n            this.type = val & 0x7;\n            readField(tag, result, this);\n\n            if (this.pos === startPos) this.skip(val);\n        }\n        return result;\n    },\n\n    readMessage: function(readField, result) {\n        return this.readFields(readField, result, this.readVarint() + this.pos);\n    },\n\n    readFixed32: function() {\n        var val = readUInt32(this.buf, this.pos);\n        this.pos += 4;\n        return val;\n    },\n\n    readSFixed32: function() {\n        var val = readInt32(this.buf, this.pos);\n        this.pos += 4;\n        return val;\n    },\n\n    // 64-bit int handling is based on github.com/dpw/node-buffer-more-ints (MIT-licensed)\n\n    readFixed64: function() {\n        var val = readUInt32(this.buf, this.pos) + readUInt32(this.buf, this.pos + 4) * SHIFT_LEFT_32;\n        this.pos += 8;\n        return val;\n    },\n\n    readSFixed64: function() {\n        var val = readUInt32(this.buf, this.pos) + readInt32(this.buf, this.pos + 4) * SHIFT_LEFT_32;\n        this.pos += 8;\n        return val;\n    },\n\n    readFloat: function() {\n        var val = ieee754.read(this.buf, this.pos, true, 23, 4);\n        this.pos += 4;\n        return val;\n    },\n\n    readDouble: function() {\n        var val = ieee754.read(this.buf, this.pos, true, 52, 8);\n        this.pos += 8;\n        return val;\n    },\n\n    readVarint: function(isSigned) {\n        var buf = this.buf,\n            val, b;\n\n        b = buf[this.pos++]; val  =  b & 0x7f;        if (b < 0x80) return val;\n        b = buf[this.pos++]; val |= (b & 0x7f) << 7;  if (b < 0x80) return val;\n        b = buf[this.pos++]; val |= (b & 0x7f) << 14; if (b < 0x80) return val;\n        b = buf[this.pos++]; val |= (b & 0x7f) << 21; if (b < 0x80) return val;\n        b = buf[this.pos];   val |= (b & 0x0f) << 28;\n\n        return readVarintRemainder(val, isSigned, this);\n    },\n\n    readVarint64: function() { // for compatibility with v2.0.1\n        return this.readVarint(true);\n    },\n\n    readSVarint: function() {\n        var num = this.readVarint();\n        return num % 2 === 1 ? (num + 1) / -2 : num / 2; // zigzag encoding\n    },\n\n    readBoolean: function() {\n        return Boolean(this.readVarint());\n    },\n\n    readString: function() {\n        var end = this.readVarint() + this.pos,\n            str = readUtf8(this.buf, this.pos, end);\n        this.pos = end;\n        return str;\n    },\n\n    readBytes: function() {\n        var end = this.readVarint() + this.pos,\n            buffer = this.buf.subarray(this.pos, end);\n        this.pos = end;\n        return buffer;\n    },\n\n    // verbose for performance reasons; doesn't affect gzipped size\n\n    readPackedVarint: function(arr, isSigned) {\n        if (this.type !== Pbf.Bytes) return arr.push(this.readVarint(isSigned));\n        var end = readPackedEnd(this);\n        arr = arr || [];\n        while (this.pos < end) arr.push(this.readVarint(isSigned));\n        return arr;\n    },\n    readPackedSVarint: function(arr) {\n        if (this.type !== Pbf.Bytes) return arr.push(this.readSVarint());\n        var end = readPackedEnd(this);\n        arr = arr || [];\n        while (this.pos < end) arr.push(this.readSVarint());\n        return arr;\n    },\n    readPackedBoolean: function(arr) {\n        if (this.type !== Pbf.Bytes) return arr.push(this.readBoolean());\n        var end = readPackedEnd(this);\n        arr = arr || [];\n        while (this.pos < end) arr.push(this.readBoolean());\n        return arr;\n    },\n    readPackedFloat: function(arr) {\n        if (this.type !== Pbf.Bytes) return arr.push(this.readFloat());\n        var end = readPackedEnd(this);\n        arr = arr || [];\n        while (this.pos < end) arr.push(this.readFloat());\n        return arr;\n    },\n    readPackedDouble: function(arr) {\n        if (this.type !== Pbf.Bytes) return arr.push(this.readDouble());\n        var end = readPackedEnd(this);\n        arr = arr || [];\n        while (this.pos < end) arr.push(this.readDouble());\n        return arr;\n    },\n    readPackedFixed32: function(arr) {\n        if (this.type !== Pbf.Bytes) return arr.push(this.readFixed32());\n        var end = readPackedEnd(this);\n        arr = arr || [];\n        while (this.pos < end) arr.push(this.readFixed32());\n        return arr;\n    },\n    readPackedSFixed32: function(arr) {\n        if (this.type !== Pbf.Bytes) return arr.push(this.readSFixed32());\n        var end = readPackedEnd(this);\n        arr = arr || [];\n        while (this.pos < end) arr.push(this.readSFixed32());\n        return arr;\n    },\n    readPackedFixed64: function(arr) {\n        if (this.type !== Pbf.Bytes) return arr.push(this.readFixed64());\n        var end = readPackedEnd(this);\n        arr = arr || [];\n        while (this.pos < end) arr.push(this.readFixed64());\n        return arr;\n    },\n    readPackedSFixed64: function(arr) {\n        if (this.type !== Pbf.Bytes) return arr.push(this.readSFixed64());\n        var end = readPackedEnd(this);\n        arr = arr || [];\n        while (this.pos < end) arr.push(this.readSFixed64());\n        return arr;\n    },\n\n    skip: function(val) {\n        var type = val & 0x7;\n        if (type === Pbf.Varint) while (this.buf[this.pos++] > 0x7f) {}\n        else if (type === Pbf.Bytes) this.pos = this.readVarint() + this.pos;\n        else if (type === Pbf.Fixed32) this.pos += 4;\n        else if (type === Pbf.Fixed64) this.pos += 8;\n        else throw new Error('Unimplemented type: ' + type);\n    },\n\n    // === WRITING =================================================================\n\n    writeTag: function(tag, type) {\n        this.writeVarint((tag << 3) | type);\n    },\n\n    realloc: function(min) {\n        var length = this.length || 16;\n\n        while (length < this.pos + min) length *= 2;\n\n        if (length !== this.length) {\n            var buf = new Uint8Array(length);\n            buf.set(this.buf);\n            this.buf = buf;\n            this.length = length;\n        }\n    },\n\n    finish: function() {\n        this.length = this.pos;\n        this.pos = 0;\n        return this.buf.subarray(0, this.length);\n    },\n\n    writeFixed32: function(val) {\n        this.realloc(4);\n        writeInt32(this.buf, val, this.pos);\n        this.pos += 4;\n    },\n\n    writeSFixed32: function(val) {\n        this.realloc(4);\n        writeInt32(this.buf, val, this.pos);\n        this.pos += 4;\n    },\n\n    writeFixed64: function(val) {\n        this.realloc(8);\n        writeInt32(this.buf, val & -1, this.pos);\n        writeInt32(this.buf, Math.floor(val * SHIFT_RIGHT_32), this.pos + 4);\n        this.pos += 8;\n    },\n\n    writeSFixed64: function(val) {\n        this.realloc(8);\n        writeInt32(this.buf, val & -1, this.pos);\n        writeInt32(this.buf, Math.floor(val * SHIFT_RIGHT_32), this.pos + 4);\n        this.pos += 8;\n    },\n\n    writeVarint: function(val) {\n        val = +val || 0;\n\n        if (val > 0xfffffff || val < 0) {\n            writeBigVarint(val, this);\n            return;\n        }\n\n        this.realloc(4);\n\n        this.buf[this.pos++] =           val & 0x7f  | (val > 0x7f ? 0x80 : 0); if (val <= 0x7f) return;\n        this.buf[this.pos++] = ((val >>>= 7) & 0x7f) | (val > 0x7f ? 0x80 : 0); if (val <= 0x7f) return;\n        this.buf[this.pos++] = ((val >>>= 7) & 0x7f) | (val > 0x7f ? 0x80 : 0); if (val <= 0x7f) return;\n        this.buf[this.pos++] =   (val >>> 7) & 0x7f;\n    },\n\n    writeSVarint: function(val) {\n        this.writeVarint(val < 0 ? -val * 2 - 1 : val * 2);\n    },\n\n    writeBoolean: function(val) {\n        this.writeVarint(Boolean(val));\n    },\n\n    writeString: function(str) {\n        str = String(str);\n        this.realloc(str.length * 4);\n\n        this.pos++; // reserve 1 byte for short string length\n\n        var startPos = this.pos;\n        // write the string directly to the buffer and see how much was written\n        this.pos = writeUtf8(this.buf, str, this.pos);\n        var len = this.pos - startPos;\n\n        if (len >= 0x80) makeRoomForExtraLength(startPos, len, this);\n\n        // finally, write the message length in the reserved place and restore the position\n        this.pos = startPos - 1;\n        this.writeVarint(len);\n        this.pos += len;\n    },\n\n    writeFloat: function(val) {\n        this.realloc(4);\n        ieee754.write(this.buf, val, this.pos, true, 23, 4);\n        this.pos += 4;\n    },\n\n    writeDouble: function(val) {\n        this.realloc(8);\n        ieee754.write(this.buf, val, this.pos, true, 52, 8);\n        this.pos += 8;\n    },\n\n    writeBytes: function(buffer) {\n        var len = buffer.length;\n        this.writeVarint(len);\n        this.realloc(len);\n        for (var i = 0; i < len; i++) this.buf[this.pos++] = buffer[i];\n    },\n\n    writeRawMessage: function(fn, obj) {\n        this.pos++; // reserve 1 byte for short message length\n\n        // write the message directly to the buffer and see how much was written\n        var startPos = this.pos;\n        fn(obj, this);\n        var len = this.pos - startPos;\n\n        if (len >= 0x80) makeRoomForExtraLength(startPos, len, this);\n\n        // finally, write the message length in the reserved place and restore the position\n        this.pos = startPos - 1;\n        this.writeVarint(len);\n        this.pos += len;\n    },\n\n    writeMessage: function(tag, fn, obj) {\n        this.writeTag(tag, Pbf.Bytes);\n        this.writeRawMessage(fn, obj);\n    },\n\n    writePackedVarint:   function(tag, arr) { if (arr.length) this.writeMessage(tag, writePackedVarint, arr);   },\n    writePackedSVarint:  function(tag, arr) { if (arr.length) this.writeMessage(tag, writePackedSVarint, arr);  },\n    writePackedBoolean:  function(tag, arr) { if (arr.length) this.writeMessage(tag, writePackedBoolean, arr);  },\n    writePackedFloat:    function(tag, arr) { if (arr.length) this.writeMessage(tag, writePackedFloat, arr);    },\n    writePackedDouble:   function(tag, arr) { if (arr.length) this.writeMessage(tag, writePackedDouble, arr);   },\n    writePackedFixed32:  function(tag, arr) { if (arr.length) this.writeMessage(tag, writePackedFixed32, arr);  },\n    writePackedSFixed32: function(tag, arr) { if (arr.length) this.writeMessage(tag, writePackedSFixed32, arr); },\n    writePackedFixed64:  function(tag, arr) { if (arr.length) this.writeMessage(tag, writePackedFixed64, arr);  },\n    writePackedSFixed64: function(tag, arr) { if (arr.length) this.writeMessage(tag, writePackedSFixed64, arr); },\n\n    writeBytesField: function(tag, buffer) {\n        this.writeTag(tag, Pbf.Bytes);\n        this.writeBytes(buffer);\n    },\n    writeFixed32Field: function(tag, val) {\n        this.writeTag(tag, Pbf.Fixed32);\n        this.writeFixed32(val);\n    },\n    writeSFixed32Field: function(tag, val) {\n        this.writeTag(tag, Pbf.Fixed32);\n        this.writeSFixed32(val);\n    },\n    writeFixed64Field: function(tag, val) {\n        this.writeTag(tag, Pbf.Fixed64);\n        this.writeFixed64(val);\n    },\n    writeSFixed64Field: function(tag, val) {\n        this.writeTag(tag, Pbf.Fixed64);\n        this.writeSFixed64(val);\n    },\n    writeVarintField: function(tag, val) {\n        this.writeTag(tag, Pbf.Varint);\n        this.writeVarint(val);\n    },\n    writeSVarintField: function(tag, val) {\n        this.writeTag(tag, Pbf.Varint);\n        this.writeSVarint(val);\n    },\n    writeStringField: function(tag, str) {\n        this.writeTag(tag, Pbf.Bytes);\n        this.writeString(str);\n    },\n    writeFloatField: function(tag, val) {\n        this.writeTag(tag, Pbf.Fixed32);\n        this.writeFloat(val);\n    },\n    writeDoubleField: function(tag, val) {\n        this.writeTag(tag, Pbf.Fixed64);\n        this.writeDouble(val);\n    },\n    writeBooleanField: function(tag, val) {\n        this.writeVarintField(tag, Boolean(val));\n    }\n};\n\nfunction readVarintRemainder(l, s, p) {\n    var buf = p.buf,\n        h, b;\n\n    b = buf[p.pos++]; h  = (b & 0x70) >> 4;  if (b < 0x80) return toNum(l, h, s);\n    b = buf[p.pos++]; h |= (b & 0x7f) << 3;  if (b < 0x80) return toNum(l, h, s);\n    b = buf[p.pos++]; h |= (b & 0x7f) << 10; if (b < 0x80) return toNum(l, h, s);\n    b = buf[p.pos++]; h |= (b & 0x7f) << 17; if (b < 0x80) return toNum(l, h, s);\n    b = buf[p.pos++]; h |= (b & 0x7f) << 24; if (b < 0x80) return toNum(l, h, s);\n    b = buf[p.pos++]; h |= (b & 0x01) << 31; if (b < 0x80) return toNum(l, h, s);\n\n    throw new Error('Expected varint not more than 10 bytes');\n}\n\nfunction readPackedEnd(pbf) {\n    return pbf.type === Pbf.Bytes ?\n        pbf.readVarint() + pbf.pos : pbf.pos + 1;\n}\n\nfunction toNum(low, high, isSigned) {\n    if (isSigned) {\n        return high * 0x100000000 + (low >>> 0);\n    }\n\n    return ((high >>> 0) * 0x100000000) + (low >>> 0);\n}\n\nfunction writeBigVarint(val, pbf) {\n    var low, high;\n\n    if (val >= 0) {\n        low  = (val % 0x100000000) | 0;\n        high = (val / 0x100000000) | 0;\n    } else {\n        low  = ~(-val % 0x100000000);\n        high = ~(-val / 0x100000000);\n\n        if (low ^ 0xffffffff) {\n            low = (low + 1) | 0;\n        } else {\n            low = 0;\n            high = (high + 1) | 0;\n        }\n    }\n\n    if (val >= 0x10000000000000000 || val < -0x10000000000000000) {\n        throw new Error('Given varint doesn\\'t fit into 10 bytes');\n    }\n\n    pbf.realloc(10);\n\n    writeBigVarintLow(low, high, pbf);\n    writeBigVarintHigh(high, pbf);\n}\n\nfunction writeBigVarintLow(low, high, pbf) {\n    pbf.buf[pbf.pos++] = low & 0x7f | 0x80; low >>>= 7;\n    pbf.buf[pbf.pos++] = low & 0x7f | 0x80; low >>>= 7;\n    pbf.buf[pbf.pos++] = low & 0x7f | 0x80; low >>>= 7;\n    pbf.buf[pbf.pos++] = low & 0x7f | 0x80; low >>>= 7;\n    pbf.buf[pbf.pos]   = low & 0x7f;\n}\n\nfunction writeBigVarintHigh(high, pbf) {\n    var lsb = (high & 0x07) << 4;\n\n    pbf.buf[pbf.pos++] |= lsb         | ((high >>>= 3) ? 0x80 : 0); if (!high) return;\n    pbf.buf[pbf.pos++]  = high & 0x7f | ((high >>>= 7) ? 0x80 : 0); if (!high) return;\n    pbf.buf[pbf.pos++]  = high & 0x7f | ((high >>>= 7) ? 0x80 : 0); if (!high) return;\n    pbf.buf[pbf.pos++]  = high & 0x7f | ((high >>>= 7) ? 0x80 : 0); if (!high) return;\n    pbf.buf[pbf.pos++]  = high & 0x7f | ((high >>>= 7) ? 0x80 : 0); if (!high) return;\n    pbf.buf[pbf.pos++]  = high & 0x7f;\n}\n\nfunction makeRoomForExtraLength(startPos, len, pbf) {\n    var extraLen =\n        len <= 0x3fff ? 1 :\n        len <= 0x1fffff ? 2 :\n        len <= 0xfffffff ? 3 : Math.floor(Math.log(len) / (Math.LN2 * 7));\n\n    // if 1 byte isn't enough for encoding message length, shift the data to the right\n    pbf.realloc(extraLen);\n    for (var i = pbf.pos - 1; i >= startPos; i--) pbf.buf[i + extraLen] = pbf.buf[i];\n}\n\nfunction writePackedVarint(arr, pbf)   { for (var i = 0; i < arr.length; i++) pbf.writeVarint(arr[i]);   }\nfunction writePackedSVarint(arr, pbf)  { for (var i = 0; i < arr.length; i++) pbf.writeSVarint(arr[i]);  }\nfunction writePackedFloat(arr, pbf)    { for (var i = 0; i < arr.length; i++) pbf.writeFloat(arr[i]);    }\nfunction writePackedDouble(arr, pbf)   { for (var i = 0; i < arr.length; i++) pbf.writeDouble(arr[i]);   }\nfunction writePackedBoolean(arr, pbf)  { for (var i = 0; i < arr.length; i++) pbf.writeBoolean(arr[i]);  }\nfunction writePackedFixed32(arr, pbf)  { for (var i = 0; i < arr.length; i++) pbf.writeFixed32(arr[i]);  }\nfunction writePackedSFixed32(arr, pbf) { for (var i = 0; i < arr.length; i++) pbf.writeSFixed32(arr[i]); }\nfunction writePackedFixed64(arr, pbf)  { for (var i = 0; i < arr.length; i++) pbf.writeFixed64(arr[i]);  }\nfunction writePackedSFixed64(arr, pbf) { for (var i = 0; i < arr.length; i++) pbf.writeSFixed64(arr[i]); }\n\n// Buffer code below from https://github.com/feross/buffer, MIT-licensed\n\nfunction readUInt32(buf, pos) {\n    return ((buf[pos]) |\n        (buf[pos + 1] << 8) |\n        (buf[pos + 2] << 16)) +\n        (buf[pos + 3] * 0x1000000);\n}\n\nfunction writeInt32(buf, val, pos) {\n    buf[pos] = val;\n    buf[pos + 1] = (val >>> 8);\n    buf[pos + 2] = (val >>> 16);\n    buf[pos + 3] = (val >>> 24);\n}\n\nfunction readInt32(buf, pos) {\n    return ((buf[pos]) |\n        (buf[pos + 1] << 8) |\n        (buf[pos + 2] << 16)) +\n        (buf[pos + 3] << 24);\n}\n\nfunction readUtf8(buf, pos, end) {\n    var str = '';\n    var i = pos;\n\n    while (i < end) {\n        var b0 = buf[i];\n        var c = null; // codepoint\n        var bytesPerSequence =\n            b0 > 0xEF ? 4 :\n            b0 > 0xDF ? 3 :\n            b0 > 0xBF ? 2 : 1;\n\n        if (i + bytesPerSequence > end) break;\n\n        var b1, b2, b3;\n\n        if (bytesPerSequence === 1) {\n            if (b0 < 0x80) {\n                c = b0;\n            }\n        } else if (bytesPerSequence === 2) {\n            b1 = buf[i + 1];\n            if ((b1 & 0xC0) === 0x80) {\n                c = (b0 & 0x1F) << 0x6 | (b1 & 0x3F);\n                if (c <= 0x7F) {\n                    c = null;\n                }\n            }\n        } else if (bytesPerSequence === 3) {\n            b1 = buf[i + 1];\n            b2 = buf[i + 2];\n            if ((b1 & 0xC0) === 0x80 && (b2 & 0xC0) === 0x80) {\n                c = (b0 & 0xF) << 0xC | (b1 & 0x3F) << 0x6 | (b2 & 0x3F);\n                if (c <= 0x7FF || (c >= 0xD800 && c <= 0xDFFF)) {\n                    c = null;\n                }\n            }\n        } else if (bytesPerSequence === 4) {\n            b1 = buf[i + 1];\n            b2 = buf[i + 2];\n            b3 = buf[i + 3];\n            if ((b1 & 0xC0) === 0x80 && (b2 & 0xC0) === 0x80 && (b3 & 0xC0) === 0x80) {\n                c = (b0 & 0xF) << 0x12 | (b1 & 0x3F) << 0xC | (b2 & 0x3F) << 0x6 | (b3 & 0x3F);\n                if (c <= 0xFFFF || c >= 0x110000) {\n                    c = null;\n                }\n            }\n        }\n\n        if (c === null) {\n            c = 0xFFFD;\n            bytesPerSequence = 1;\n\n        } else if (c > 0xFFFF) {\n            c -= 0x10000;\n            str += String.fromCharCode(c >>> 10 & 0x3FF | 0xD800);\n            c = 0xDC00 | c & 0x3FF;\n        }\n\n        str += String.fromCharCode(c);\n        i += bytesPerSequence;\n    }\n\n    return str;\n}\n\nfunction writeUtf8(buf, str, pos) {\n    for (var i = 0, c, lead; i < str.length; i++) {\n        c = str.charCodeAt(i); // code point\n\n        if (c > 0xD7FF && c < 0xE000) {\n            if (lead) {\n                if (c < 0xDC00) {\n                    buf[pos++] = 0xEF;\n                    buf[pos++] = 0xBF;\n                    buf[pos++] = 0xBD;\n                    lead = c;\n                    continue;\n                } else {\n                    c = lead - 0xD800 << 10 | c - 0xDC00 | 0x10000;\n                    lead = null;\n                }\n            } else {\n                if (c > 0xDBFF || (i + 1 === str.length)) {\n                    buf[pos++] = 0xEF;\n                    buf[pos++] = 0xBF;\n                    buf[pos++] = 0xBD;\n                } else {\n                    lead = c;\n                }\n                continue;\n            }\n        } else if (lead) {\n            buf[pos++] = 0xEF;\n            buf[pos++] = 0xBF;\n            buf[pos++] = 0xBD;\n            lead = null;\n        }\n\n        if (c < 0x80) {\n            buf[pos++] = c;\n        } else {\n            if (c < 0x800) {\n                buf[pos++] = c >> 0x6 | 0xC0;\n            } else {\n                if (c < 0x10000) {\n                    buf[pos++] = c >> 0xC | 0xE0;\n                } else {\n                    buf[pos++] = c >> 0x12 | 0xF0;\n                    buf[pos++] = c >> 0xC & 0x3F | 0x80;\n                }\n                buf[pos++] = c >> 0x6 & 0x3F | 0x80;\n            }\n            buf[pos++] = c & 0x3F | 0x80;\n        }\n    }\n    return pos;\n}\n","/**\n * @module ol/source/Cluster\n */\n\nimport {getUid} from '../util.js';\nimport {assert} from '../asserts.js';\nimport Feature from '../Feature.js';\nimport GeometryType from '../geom/GeometryType.js';\nimport {scale as scaleCoordinate, add as addCoordinate} from '../coordinate.js';\nimport EventType from '../events/EventType.js';\nimport {buffer, createEmpty, createOrUpdateFromCoordinate} from '../extent.js';\nimport Point from '../geom/Point.js';\nimport VectorSource from './Vector.js';\n\n/**\n * @typedef {Object} Options\n * @property {import(\"./Source.js\").AttributionLike} [attributions] Attributions.\n * @property {number} [distance=20] Minimum distance in pixels between clusters.\n * @property {function(Feature):Point} [geometryFunction]\n * Function that takes an {@link module:ol/Feature} as argument and returns an\n * {@link module:ol/geom/Point} as cluster calculation point for the feature. When a\n * feature should not be considered for clustering, the function should return\n * `null`. The default, which works when the underyling source contains point\n * features only, is\n * ```js\n * function(feature) {\n *   return feature.getGeometry();\n * }\n * ```\n * See {@link module:ol/geom/Polygon~Polygon#getInteriorPoint} for a way to get a cluster\n * calculation point for polygons.\n * @property {VectorSource} source Source.\n * @property {boolean} [wrapX=true] Whether to wrap the world horizontally.\n */\n\n\n/**\n * @classdesc\n * Layer source to cluster vector data. Works out of the box with point\n * geometries. For other geometry types, or if not all geometries should be\n * considered for clustering, a custom `geometryFunction` can be defined.\n * @api\n */\nclass Cluster extends VectorSource {\n  /**\n   * @param {Options} options Cluster options.\n   */\n  constructor(options) {\n    super({\n      attributions: options.attributions,\n      wrapX: options.wrapX\n    });\n\n    /**\n     * @type {number|undefined}\n     * @protected\n     */\n    this.resolution = undefined;\n\n    /**\n     * @type {number}\n     * @protected\n     */\n    this.distance = options.distance !== undefined ? options.distance : 20;\n\n    /**\n     * @type {Array<Feature>}\n     * @protected\n     */\n    this.features = [];\n\n    /**\n     * @param {Feature} feature Feature.\n     * @return {Point} Cluster calculation point.\n     * @protected\n     */\n    this.geometryFunction = options.geometryFunction || function(feature) {\n      const geometry = feature.getGeometry();\n      assert(geometry.getType() == GeometryType.POINT,\n        10); // The default `geometryFunction` can only handle `Point` geometries\n      return geometry;\n    };\n\n    /**\n     * @type {VectorSource}\n     * @protected\n     */\n    this.source = options.source;\n\n    this.source.addEventListener(EventType.CHANGE, this.refresh.bind(this));\n  }\n\n  /**\n   * Get the distance in pixels between clusters.\n   * @return {number} Distance.\n   * @api\n   */\n  getDistance() {\n    return this.distance;\n  }\n\n  /**\n   * Get a reference to the wrapped source.\n   * @return {VectorSource} Source.\n   * @api\n   */\n  getSource() {\n    return this.source;\n  }\n\n  /**\n   * @inheritDoc\n   */\n  loadFeatures(extent, resolution, projection) {\n    this.source.loadFeatures(extent, resolution, projection);\n    if (resolution !== this.resolution) {\n      this.clear();\n      this.resolution = resolution;\n      this.cluster();\n      this.addFeatures(this.features);\n    }\n  }\n\n  /**\n   * Set the distance in pixels between clusters.\n   * @param {number} distance The distance in pixels.\n   * @api\n   */\n  setDistance(distance) {\n    this.distance = distance;\n    this.refresh();\n  }\n\n  /**\n   * handle the source changing\n   * @override\n   */\n  refresh() {\n    this.clear();\n    this.cluster();\n    this.addFeatures(this.features);\n  }\n\n  /**\n   * @protected\n   */\n  cluster() {\n    if (this.resolution === undefined) {\n      return;\n    }\n    this.features.length = 0;\n    const extent = createEmpty();\n    const mapDistance = this.distance * this.resolution;\n    const features = this.source.getFeatures();\n\n    /**\n     * @type {!Object<string, boolean>}\n     */\n    const clustered = {};\n\n    for (let i = 0, ii = features.length; i < ii; i++) {\n      const feature = features[i];\n      if (!(getUid(feature) in clustered)) {\n        const geometry = this.geometryFunction(feature);\n        if (geometry) {\n          const coordinates = geometry.getCoordinates();\n          createOrUpdateFromCoordinate(coordinates, extent);\n          buffer(extent, mapDistance, extent);\n\n          let neighbors = this.source.getFeaturesInExtent(extent);\n          neighbors = neighbors.filter(function(neighbor) {\n            const uid = getUid(neighbor);\n            if (!(uid in clustered)) {\n              clustered[uid] = true;\n              return true;\n            } else {\n              return false;\n            }\n          });\n          this.features.push(this.createCluster(neighbors));\n        }\n      }\n    }\n  }\n\n  /**\n   * @param {Array<Feature>} features Features\n   * @return {Feature} The cluster feature.\n   * @protected\n   */\n  createCluster(features) {\n    const centroid = [0, 0];\n    for (let i = features.length - 1; i >= 0; --i) {\n      const geometry = this.geometryFunction(features[i]);\n      if (geometry) {\n        addCoordinate(centroid, geometry.getCoordinates());\n      } else {\n        features.splice(i, 1);\n      }\n    }\n    scaleCoordinate(centroid, 1 / features.length);\n\n    const cluster = new Feature(new Point(centroid));\n    cluster.set('features', features);\n    return cluster;\n  }\n}\n\n\nexport default Cluster;\n","var newImageData = require('./util').newImageData;\n\n/**\n * Create a function for running operations.  This function is serialized for\n * use in a worker.\n * @param {function(Array, Object):*} operation The operation.\n * @return {function(Object):ArrayBuffer} A function that takes an object with\n * buffers, meta, imageOps, width, and height properties and returns an array\n * buffer.\n */\nfunction createMinion(operation) {\n  var workerHasImageData = true;\n  try {\n    new ImageData(10, 10);\n  } catch (_) {\n    workerHasImageData = false;\n  }\n\n  function newWorkerImageData(data, width, height) {\n    if (workerHasImageData) {\n      return new ImageData(data, width, height);\n    } else {\n      return {data: data, width: width, height: height};\n    }\n  }\n\n  return function(data) {\n    // bracket notation for minification support\n    var buffers = data['buffers'];\n    var meta = data['meta'];\n    var imageOps = data['imageOps'];\n    var width = data['width'];\n    var height = data['height'];\n\n    var numBuffers = buffers.length;\n    var numBytes = buffers[0].byteLength;\n    var output, b;\n\n    if (imageOps) {\n      var images = new Array(numBuffers);\n      for (b = 0; b < numBuffers; ++b) {\n        images[b] = newWorkerImageData(\n            new Uint8ClampedArray(buffers[b]), width, height);\n      }\n      output = operation(images, meta).data;\n    } else {\n      output = new Uint8ClampedArray(numBytes);\n      var arrays = new Array(numBuffers);\n      var pixels = new Array(numBuffers);\n      for (b = 0; b < numBuffers; ++b) {\n        arrays[b] = new Uint8ClampedArray(buffers[b]);\n        pixels[b] = [0, 0, 0, 0];\n      }\n      for (var i = 0; i < numBytes; i += 4) {\n        for (var j = 0; j < numBuffers; ++j) {\n          var array = arrays[j];\n          pixels[j][0] = array[i];\n          pixels[j][1] = array[i + 1];\n          pixels[j][2] = array[i + 2];\n          pixels[j][3] = array[i + 3];\n        }\n        var pixel = operation(pixels, meta);\n        output[i] = pixel[0];\n        output[i + 1] = pixel[1];\n        output[i + 2] = pixel[2];\n        output[i + 3] = pixel[3];\n      }\n    }\n    return output.buffer;\n  };\n}\n\n/**\n * Create a worker for running operations.\n * @param {Object} config Configuration.\n * @param {function(MessageEvent)} onMessage Called with a message event.\n * @return {Worker} The worker.\n */\nfunction createWorker(config, onMessage) {\n  var lib = Object.keys(config.lib || {}).map(function(name) {\n    return 'var ' + name + ' = ' + config.lib[name].toString() + ';';\n  });\n\n  var lines = lib.concat([\n    'var __minion__ = (' + createMinion.toString() + ')(', config.operation.toString(), ');',\n    'self.addEventListener(\"message\", function(event) {',\n    '  var buffer = __minion__(event.data);',\n    '  self.postMessage({buffer: buffer, meta: event.data.meta}, [buffer]);',\n    '});'\n  ]);\n\n  var blob = new Blob(lines, {type: 'text/javascript'});\n  var source = URL.createObjectURL(blob);\n  var worker = new Worker(source);\n  worker.addEventListener('message', onMessage);\n  return worker;\n}\n\n/**\n * Create a faux worker for running operations.\n * @param {Object} config Configuration.\n * @param {function(MessageEvent)} onMessage Called with a message event.\n * @return {Object} The faux worker.\n */\nfunction createFauxWorker(config, onMessage) {\n  var minion = createMinion(config.operation);\n  return {\n    postMessage: function(data) {\n      setTimeout(function() {\n        onMessage({'data': {'buffer': minion(data), 'meta': data['meta']}});\n      }, 0);\n    }\n  };\n}\n\n/**\n * A processor runs pixel or image operations in workers.\n * @param {Object} config Configuration.\n */\nfunction Processor(config) {\n  this._imageOps = !!config.imageOps;\n  var threads;\n  if (config.threads === 0) {\n    threads = 0;\n  } else if (this._imageOps) {\n    threads = 1;\n  } else {\n    threads = config.threads || 1;\n  }\n  var workers = [];\n  if (threads) {\n    for (var i = 0; i < threads; ++i) {\n      workers[i] = createWorker(config, this._onWorkerMessage.bind(this, i));\n    }\n  } else {\n    workers[0] = createFauxWorker(config, this._onWorkerMessage.bind(this, 0));\n  }\n  this._workers = workers;\n  this._queue = [];\n  this._maxQueueLength = config.queue || Infinity;\n  this._running = 0;\n  this._dataLookup = {};\n  this._job = null;\n}\n\n/**\n * Run operation on input data.\n * @param {Array.<Array|ImageData>} inputs Array of pixels or image data\n *     (depending on the operation type).\n * @param {Object} meta A user data object.  This is passed to all operations\n *     and must be serializable.\n * @param {function(Error, ImageData, Object)} callback Called when work\n *     completes.  The first argument is any error.  The second is the ImageData\n *     generated by operations.  The third is the user data object.\n */\nProcessor.prototype.process = function(inputs, meta, callback) {\n  this._enqueue({\n    inputs: inputs,\n    meta: meta,\n    callback: callback\n  });\n  this._dispatch();\n};\n\n/**\n * Stop responding to any completed work and destroy the processor.\n */\nProcessor.prototype.destroy = function() {\n  for (var key in this) {\n    this[key] = null;\n  }\n  this._destroyed = true;\n};\n\n/**\n * Add a job to the queue.\n * @param {Object} job The job.\n */\nProcessor.prototype._enqueue = function(job) {\n  this._queue.push(job);\n  while (this._queue.length > this._maxQueueLength) {\n    this._queue.shift().callback(null, null);\n  }\n};\n\n/**\n * Dispatch a job.\n */\nProcessor.prototype._dispatch = function() {\n  if (this._running === 0 && this._queue.length > 0) {\n    var job = this._job = this._queue.shift();\n    var width = job.inputs[0].width;\n    var height = job.inputs[0].height;\n    var buffers = job.inputs.map(function(input) {\n      return input.data.buffer;\n    });\n    var threads = this._workers.length;\n    this._running = threads;\n    if (threads === 1) {\n      this._workers[0].postMessage({\n        'buffers': buffers,\n        'meta': job.meta,\n        'imageOps': this._imageOps,\n        'width': width,\n        'height': height\n      }, buffers);\n    } else {\n      var length = job.inputs[0].data.length;\n      var segmentLength = 4 * Math.ceil(length / 4 / threads);\n      for (var i = 0; i < threads; ++i) {\n        var offset = i * segmentLength;\n        var slices = [];\n        for (var j = 0, jj = buffers.length; j < jj; ++j) {\n          slices.push(buffers[i].slice(offset, offset + segmentLength));\n        }\n        this._workers[i].postMessage({\n          'buffers': slices,\n          'meta': job.meta,\n          'imageOps': this._imageOps,\n          'width': width,\n          'height': height\n        }, slices);\n      }\n    }\n  }\n};\n\n/**\n * Handle messages from the worker.\n * @param {number} index The worker index.\n * @param {MessageEvent} event The message event.\n */\nProcessor.prototype._onWorkerMessage = function(index, event) {\n  if (this._destroyed) {\n    return;\n  }\n  this._dataLookup[index] = event.data;\n  --this._running;\n  if (this._running === 0) {\n    this._resolveJob();\n  }\n};\n\n/**\n * Resolve a job.  If there are no more worker threads, the processor callback\n * will be called.\n */\nProcessor.prototype._resolveJob = function() {\n  var job = this._job;\n  var threads = this._workers.length;\n  var data, meta;\n  if (threads === 1) {\n    data = new Uint8ClampedArray(this._dataLookup[0]['buffer']);\n    meta = this._dataLookup[0]['meta'];\n  } else {\n    var length = job.inputs[0].data.length;\n    data = new Uint8ClampedArray(length);\n    meta = new Array(length);\n    var segmentLength = 4 * Math.ceil(length / 4 / threads);\n    for (var i = 0; i < threads; ++i) {\n      var buffer = this._dataLookup[i]['buffer'];\n      var offset = i * segmentLength;\n      data.set(new Uint8ClampedArray(buffer), offset);\n      meta[i] = this._dataLookup[i]['meta'];\n    }\n  }\n  this._job = null;\n  this._dataLookup = {};\n  job.callback(null,\n      newImageData(data, job.inputs[0].width, job.inputs[0].height), meta);\n  this._dispatch();\n};\n\nmodule.exports = Processor;\n","var hasImageData = true;\ntry {\n  new ImageData(10, 10);\n} catch (_) {\n  hasImageData = false;\n}\n\nvar context = document.createElement('canvas').getContext('2d');\n\nfunction newImageData(data, width, height) {\n  if (hasImageData) {\n    return new ImageData(data, width, height);\n  } else {\n    var imageData = context.createImageData(width, height);\n    imageData.data.set(data);\n    return imageData;\n  }\n}\n\nexports.newImageData = newImageData;\n","\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar utils_1 = require(\"./utils\");\nvar clonePseudoElements_1 = __importDefault(require(\"./clonePseudoElements\"));\nfunction cloneSingleNode(nativeNode) {\n    if (nativeNode instanceof HTMLCanvasElement) {\n        return utils_1.createImage(nativeNode.toDataURL());\n    }\n    if (nativeNode.tagName && nativeNode.tagName.toLowerCase() === 'svg') {\n        return Promise.resolve(nativeNode)\n            .then(function (svg) { return utils_1.svgToDataURL(svg); })\n            .then(utils_1.createImage);\n    }\n    return Promise.resolve(nativeNode.cloneNode(false));\n}\nfunction cloneChildren(nativeNode, clonedNode, filter) {\n    var children = utils_1.toArray(nativeNode.childNodes);\n    if (children.length === 0) {\n        return Promise.resolve(clonedNode);\n    }\n    // clone children in order\n    return children.reduce(function (done, child) { return done\n        .then(function () { return cloneNode(child, filter); })\n        .then(function (clonedChild) {\n        if (clonedChild) {\n            clonedNode.appendChild(clonedChild);\n        }\n    }); }, Promise.resolve())\n        .then(function () { return clonedNode; });\n}\nfunction cloneCssStyle(nativeNode, clonedNode) {\n    var source = window.getComputedStyle(nativeNode);\n    var target = clonedNode.style;\n    if (source.cssText) {\n        target.cssText = source.cssText;\n    }\n    else {\n        utils_1.toArray(source).forEach(function (name) {\n            target.setProperty(name, source.getPropertyValue(name), source.getPropertyPriority(name));\n        });\n    }\n}\nfunction cloneInputValue(nativeNode, clonedNode) {\n    if (nativeNode instanceof HTMLTextAreaElement) {\n        clonedNode.innerHTML = nativeNode.value;\n    }\n    if (nativeNode instanceof HTMLInputElement) {\n        clonedNode.setAttribute('value', nativeNode.value);\n    }\n}\nfunction decorate(nativeNode, clonedNode) {\n    if (!(clonedNode instanceof Element)) {\n        return clonedNode;\n    }\n    return Promise.resolve()\n        .then(function () { return cloneCssStyle(nativeNode, clonedNode); })\n        .then(function () { return clonePseudoElements_1.default(nativeNode, clonedNode); })\n        .then(function () { return cloneInputValue(nativeNode, clonedNode); })\n        .then(function () { return clonedNode; });\n}\nfunction cloneNode(domNode, filter, isRoot) {\n    if (!isRoot && filter && !filter(domNode)) {\n        return Promise.resolve(null);\n    }\n    return Promise.resolve(domNode)\n        .then(cloneSingleNode)\n        .then(function (clonedNode) { return cloneChildren(domNode, clonedNode, filter); })\n        .then(function (clonedNode) { return decorate(domNode, clonedNode); });\n}\nexports.default = cloneNode;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar utils_1 = require(\"./utils\");\nfunction formatCssText(style) {\n    var content = style.getPropertyValue('content');\n    return style.cssText + \" content: \" + content + \";\";\n}\nfunction formatCssProperties(style) {\n    return utils_1.toArray(style).map(function (name) {\n        var value = style.getPropertyValue(name);\n        var priority = style.getPropertyPriority(name);\n        return name + \": \" + value + (priority ? ' !important' : '') + \";\";\n    }).join(' ');\n}\nfunction getPseudoElementStyle(className, pseudo, style) {\n    var selector = \".\" + className + \":\" + pseudo;\n    var cssText = style.cssText ? formatCssText(style) : formatCssProperties(style);\n    return document.createTextNode(selector + \"{\" + cssText + \"}\");\n}\nfunction clonePseudoElement(nativeNode, clonedNode, pseudo) {\n    var style = window.getComputedStyle(nativeNode, pseudo);\n    var content = style.getPropertyValue('content');\n    if (content === '' || content === 'none') {\n        return;\n    }\n    var className = utils_1.uuid();\n    var styleElement = document.createElement('style');\n    styleElement.appendChild(getPseudoElementStyle(className, pseudo, style));\n    clonedNode.className = clonedNode.className + \" \" + className;\n    clonedNode.appendChild(styleElement);\n}\nfunction clonePseudoElements(nativeNode, clonedNode) {\n    [\n        ':before',\n        ':after',\n    ].forEach(function (pseudo) { return clonePseudoElement(nativeNode, clonedNode, pseudo); });\n}\nexports.default = clonePseudoElements;\n","\"use strict\";\nvar __importStar = (this && this.__importStar) || function (mod) {\n    if (mod && mod.__esModule) return mod;\n    var result = {};\n    if (mod != null) for (var k in mod) if (Object.hasOwnProperty.call(mod, k)) result[k] = mod[k];\n    result[\"default\"] = mod;\n    return result;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar utils_1 = require(\"./utils\");\nvar embedResources_1 = __importStar(require(\"./embedResources\"));\nfunction getCssRules(styleSheets) {\n    var ret = [];\n    styleSheets.forEach(function (sheet) {\n        if (sheet.hasOwnProperty('cssRules')) {\n            try {\n                utils_1.toArray(sheet.cssRules).forEach(function (item) {\n                    ret.push(item);\n                });\n            }\n            catch (e) {\n                console.log(\"Error while reading CSS rules from \" + sheet.href, e.toString());\n            }\n        }\n    });\n    return ret;\n}\nfunction getWebFontRules(cssRules) {\n    return cssRules\n        .filter(function (rule) { return rule.type === CSSRule.FONT_FACE_RULE; })\n        .filter(function (rule) { return embedResources_1.shouldEmbed(rule.style.getPropertyValue('src')); });\n}\nfunction parseWebFontRules(clonedNode) {\n    return new Promise(function (resolve, reject) {\n        if (!clonedNode.ownerDocument) {\n            reject(new Error('Provided element is not within a Document'));\n        }\n        resolve(utils_1.toArray(clonedNode.ownerDocument.styleSheets));\n    })\n        .then(getCssRules)\n        .then(getWebFontRules);\n}\nexports.parseWebFontRules = parseWebFontRules;\nfunction embedWebFonts(clonedNode, options) {\n    return parseWebFontRules(clonedNode)\n        .then(function (rules) { return Promise.all(rules.map(function (rule) {\n        var baseUrl = rule.parentStyleSheet ? rule.parentStyleSheet.href : null;\n        return embedResources_1.default(rule.cssText, baseUrl, options);\n    })); })\n        .then(function (cssStrings) { return cssStrings.join('\\n'); })\n        .then(function (cssString) {\n        var styleNode = document.createElement('style');\n        var sytleContent = document.createTextNode(cssString);\n        styleNode.appendChild(sytleContent);\n        if (clonedNode.firstChild) {\n            clonedNode.insertBefore(styleNode, clonedNode.firstChild);\n        }\n        else {\n            clonedNode.appendChild(styleNode);\n        }\n        return clonedNode;\n    });\n}\nexports.default = embedWebFonts;\n","\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar utils_1 = require(\"./utils\");\nvar getBlobFromURL_1 = __importDefault(require(\"./getBlobFromURL\"));\nvar embedResources_1 = __importDefault(require(\"./embedResources\"));\nfunction embedBackground(clonedNode, options) {\n    var background = clonedNode.style.getPropertyValue('background');\n    if (!background) {\n        return Promise.resolve(clonedNode);\n    }\n    return Promise.resolve(background)\n        .then(function (cssString) { return embedResources_1.default(cssString, null, options); })\n        .then(function (cssString) {\n        clonedNode.style.setProperty('background', cssString, clonedNode.style.getPropertyPriority('background'));\n        return clonedNode;\n    });\n}\nfunction embedImageNode(clonedNode, options) {\n    if (!(clonedNode instanceof HTMLImageElement) || utils_1.isDataUrl(clonedNode.src)) {\n        return Promise.resolve(clonedNode);\n    }\n    return Promise.resolve(clonedNode.src)\n        .then(function (url) { return getBlobFromURL_1.default(url, options); })\n        .then(function (data) { return utils_1.toDataURL(data, utils_1.getMimeType(clonedNode.src)); })\n        .then(function (dataURL) { return new Promise((function (resolve, reject) {\n        clonedNode.onload = resolve;\n        clonedNode.onerror = reject;\n        clonedNode.src = dataURL;\n    })); })\n        .then(function () { return clonedNode; }, function () { return clonedNode; });\n}\nfunction embedChildren(clonedNode, options) {\n    var children = utils_1.toArray(clonedNode.childNodes);\n    var deferreds = children.map(function (child) { return embedImages(child, options); });\n    return Promise.all(deferreds).then(function () { return clonedNode; });\n}\nfunction embedImages(clonedNode, options) {\n    if (!(clonedNode instanceof Element)) {\n        return Promise.resolve(clonedNode);\n    }\n    return Promise.resolve(clonedNode)\n        .then(function (node) { return embedBackground(node, options); })\n        .then(function (node) { return embedImageNode(node, options); })\n        .then(function (node) { return embedChildren(node, options); });\n}\nexports.default = embedImages;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar utils_1 = require(\"./utils\");\nfunction createSvgDataURL(clonedNode, width, height) {\n    var xmlns = 'http://www.w3.org/2000/svg';\n    var svg = document.createElementNS(xmlns, 'svg');\n    var foreignObject = document.createElementNS(xmlns, 'foreignObject');\n    svg.setAttributeNS('', 'width', \"\" + width);\n    svg.setAttributeNS('', 'height', \"\" + height);\n    foreignObject.setAttributeNS('', 'width', '100%');\n    foreignObject.setAttributeNS('', 'height', '100%');\n    foreignObject.setAttributeNS('', 'x', '0');\n    foreignObject.setAttributeNS('', 'y', '0');\n    foreignObject.setAttributeNS('', 'externalResourcesRequired', 'true');\n    svg.appendChild(foreignObject);\n    foreignObject.appendChild(clonedNode);\n    return utils_1.svgToDataURL(svg);\n}\nexports.default = createSvgDataURL;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nfunction applyStyleWithOptions(clonedNode, options) {\n    var style = clonedNode.style;\n    if (options.backgroundColor) {\n        style.backgroundColor = options.backgroundColor;\n    }\n    if (options.width) {\n        style.width = options.width + \"px\";\n    }\n    if (options.height) {\n        style.height = options.height + \"px\";\n    }\n    if (options.style) {\n        Object.assign(style, options.style);\n    }\n    return clonedNode;\n}\nexports.default = applyStyleWithOptions;\n"],"sourceRoot":""}