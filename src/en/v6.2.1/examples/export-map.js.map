{"version":3,"sources":["webpack:///../node_modules/html-to-image/lib/utils.js","webpack:///../node_modules/html-to-image/lib/embedResources.js","webpack:///../node_modules/html-to-image/lib/getBlobFromURL.js","webpack:///../node_modules/html-to-image/lib/index.js","webpack:///./export-map.js","webpack:///../node_modules/html-to-image/lib/cloneNode.js","webpack:///../node_modules/html-to-image/lib/clonePseudoElements.js","webpack:///../node_modules/html-to-image/lib/embedWebFonts.js","webpack:///../node_modules/html-to-image/lib/embedImages.js","webpack:///../node_modules/html-to-image/lib/createSvgDataURL.js","webpack:///../node_modules/html-to-image/lib/applyStyleWithOptions.js"],"names":["Object","defineProperty","exports","value","counter","WOFF","mimes","woff","woff2","ttf","eot","png","jpg","jpeg","gif","tiff","svg","parseExtension","url","match","exec","getMimeType","ext","toLowerCase","createImage","Promise","resolve","reject","image","Image","onload","onerror","crossOrigin","src","getDataURLContent","dataURL","split","px","node","styleProperty","window","getComputedStyle","getPropertyValue","parseFloat","replace","getPixelRatio","devicePixelRatio","uuid","Math","random","pow","toString","slice","delay","ms","args","setTimeout","isDataUrl","search","toDataURL","content","mimeType","canvasToBlob","canvas","toBlob","binaryString","atob","len","length","binaryArray","Uint8Array","i","charCodeAt","Blob","type","toArray","arrayLike","arr","l","push","getNodeWidth","leftBorder","rightBorder","scrollWidth","getNodeHeight","topBorder","bottomBorder","scrollHeight","svgToDataURL","then","XMLSerializer","serializeToString","encodeURIComponent","html","getBlobFromImageURL","width","height","document","createElement","context","getContext","ratio","style","scale","drawImage","__importDefault","this","mod","__esModule","getBlobFromURL_1","utils_1","URL_REGEX","parseURLs","str","result","raw","quotation","filter","embed","cssString","resourceURL","baseURL","options","resolvedURL","baseUrl","location","protocol","doc","implementation","createHTMLDocument","base","a","head","appendChild","body","href","resolveUrl","default","data","RegExp","escape","shouldEmbed","string","urls","reduce","done","ret","cacheBust","test","Date","getTime","fetch","response","blob","reader","FileReader","onloadend","readAsDataURL","catch","req","XMLHttpRequest","onreadystatechange","readyState","status","encoder","Error","ontimeout","responseType","timeout","open","send","reason","placeholder","imagePlaceholder","msg","message","console","error","cloneNode_1","embedWebFonts_1","embedImages_1","createSvgDataURL_1","applyStyleWithOptions_1","getImageSize","domNode","toSvgDataURL","_a","clonedNode","toCanvas","backgroundColor","fillStyle","fillRect","toPixelData","getImageData","toPng","toJpeg","quality","map","layers","source","format","target","view","center","zoom","addOverlay","position","element","getElementById","const","exportOptions","className","indexOf","addEventListener","once","getTargetElement","link","click","renderSync","clonePseudoElements_1","cloneSingleNode","nativeNode","HTMLCanvasElement","tagName","cloneNode","decorate","Element","cssText","forEach","name","setProperty","getPropertyPriority","cloneCssStyle","HTMLTextAreaElement","innerHTML","HTMLInputElement","setAttribute","cloneInputValue","isRoot","children","childNodes","child","clonedChild","cloneChildren","getPseudoElementStyle","pseudo","selector","formatCssText","join","formatCssProperties","createTextNode","styleElement","clonePseudoElement","__importStar","k","hasOwnProperty","call","embedResources_1","parseCSS","undefined","css","cssCommentsRegex","keyframesRegex","unified","fetchCSS","sheet","res","text","e","log","embedFonts","resolved","fontLoadedPromises","startsWith","URL","all","getCssRules","styleSheets","promises","cssRules","item","CSSRule","IMPORT_RULE","rule","insertRule","inline_1","find","getWebFontRules","FONT_FACE_RULE","parseWebFontRules","ownerDocument","rules","parentStyleSheet","cssStrings","styleNode","sytleContent","firstChild","insertBefore","embedImages","background","embedBackground","HTMLImageElement","embedImageNode","deferreds","embedChildren","xmlns","createElementNS","foreignObject","setAttributeNS","assign"],"mappings":"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","file":"export-map.js","sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar WOFF = 'application/font-woff';\nvar JPEG = 'image/jpeg';\nvar mimes = {\n    woff: WOFF,\n    woff2: WOFF,\n    ttf: 'application/font-truetype',\n    eot: 'application/vnd.ms-fontobject',\n    png: 'image/png',\n    jpg: JPEG,\n    jpeg: JPEG,\n    gif: 'image/gif',\n    tiff: 'image/tiff',\n    svg: 'image/svg+xml',\n};\nexports.uuid = (function uuid() {\n    // generate uuid for className of pseudo elements.\n    // We should not use GUIDs, otherwise pseudo elements sometimes cannot be captured.\n    var counter = 0;\n    // ref: http://stackoverflow.com/a/6248722/2519373\n    var randomFourChars = function () {\n        return (\"0000\" + (Math.random() * (Math.pow(36, 4)) << 0).toString(36)).slice(-4);\n    };\n    return function () {\n        counter += 1;\n        return \"u\" + randomFourChars() + counter;\n    };\n}());\nfunction parseExtension(url) {\n    var match = /\\.([^./]*?)$/g.exec(url);\n    if (match)\n        return match[1];\n    return '';\n}\nexports.parseExtension = parseExtension;\nfunction getMimeType(url) {\n    var ext = parseExtension(url).toLowerCase();\n    return mimes[ext] || '';\n}\nexports.getMimeType = getMimeType;\nfunction delay(ms) {\n    return function (args) { return new Promise((function (resolve) {\n        setTimeout(function () {\n            resolve(args);\n        }, ms);\n    })); };\n}\nexports.delay = delay;\nfunction createImage(url) {\n    return new Promise((function (resolve, reject) {\n        var image = new Image();\n        image.onload = function () {\n            resolve(image);\n        };\n        image.onerror = reject;\n        image.crossOrigin = 'anonymous';\n        image.src = url;\n    }));\n}\nexports.createImage = createImage;\nfunction isDataUrl(url) {\n    return url.search(/^(data:)/) !== -1;\n}\nexports.isDataUrl = isDataUrl;\nfunction toDataURL(content, mimeType) {\n    return \"data:\" + mimeType + \";base64,\" + content;\n}\nexports.toDataURL = toDataURL;\nfunction getDataURLContent(dataURL) {\n    return dataURL.split(/,/)[1];\n}\nexports.getDataURLContent = getDataURLContent;\nfunction toBlob(canvas) {\n    return new Promise((function (resolve) {\n        var binaryString = window.atob(canvas.toDataURL().split(',')[1]);\n        var len = binaryString.length;\n        var binaryArray = new Uint8Array(len);\n        for (var i = 0; i < len; i += 1) {\n            binaryArray[i] = binaryString.charCodeAt(i);\n        }\n        resolve(new Blob([binaryArray], {\n            type: 'image/png',\n        }));\n    }));\n}\nfunction canvasToBlob(canvas) {\n    if (canvas.toBlob) {\n        return new Promise((function (resolve) {\n            canvas.toBlob(resolve);\n        }));\n    }\n    return toBlob(canvas);\n}\nexports.canvasToBlob = canvasToBlob;\nfunction toArray(arrayLike) {\n    var arr = [];\n    for (var i = 0, l = arrayLike.length; i < l; i += 1) {\n        arr.push(arrayLike[i]);\n    }\n    return arr;\n}\nexports.toArray = toArray;\nfunction px(node, styleProperty) {\n    var value = window.getComputedStyle(node).getPropertyValue(styleProperty);\n    return parseFloat(value.replace('px', ''));\n}\nfunction getNodeWidth(node) {\n    var leftBorder = px(node, 'border-left-width');\n    var rightBorder = px(node, 'border-right-width');\n    return node.scrollWidth + leftBorder + rightBorder;\n}\nexports.getNodeWidth = getNodeWidth;\nfunction getNodeHeight(node) {\n    var topBorder = px(node, 'border-top-width');\n    var bottomBorder = px(node, 'border-bottom-width');\n    return node.scrollHeight + topBorder + bottomBorder;\n}\nexports.getNodeHeight = getNodeHeight;\nfunction getPixelRatio() {\n    return (window.devicePixelRatio || 1);\n}\nexports.getPixelRatio = getPixelRatio;\nfunction svgToDataURL(svg) {\n    return Promise.resolve()\n        .then(function () { return new XMLSerializer().serializeToString(svg); })\n        .then(encodeURIComponent)\n        .then(function (html) { return \"data:image/svg+xml;charset=utf-8,\" + html; });\n}\nexports.svgToDataURL = svgToDataURL;\nfunction getBlobFromImageURL(url) {\n    return createImage(url).then(function (image) {\n        var width = image.width, height = image.height;\n        var canvas = document.createElement('canvas');\n        var context = canvas.getContext('2d');\n        var ratio = getPixelRatio();\n        canvas.width = width * ratio;\n        canvas.height = height * ratio;\n        canvas.style.width = \"\" + width;\n        canvas.style.height = \"\" + height;\n        context.scale(ratio, ratio);\n        context.drawImage(image, 0, 0);\n        var dataURL = canvas.toDataURL(getMimeType(url));\n        return getDataURLContent(dataURL);\n    });\n}\nexports.getBlobFromImageURL = getBlobFromImageURL;\n","\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar getBlobFromURL_1 = __importDefault(require(\"./getBlobFromURL\"));\nvar utils_1 = require(\"./utils\");\nvar URL_REGEX = /url\\((['\"]?)([^'\"]+?)\\1\\)/g;\nfunction resolveUrl(url, baseUrl) {\n    // url is absolute already\n    if (url.match(/^[a-z]+:\\/\\//i)) {\n        return url;\n    }\n    // url is absolute already, without protocol\n    if (url.match(/^\\/\\//)) {\n        return window.location.protocol + url;\n    }\n    // dataURI, mailto:, tel:, etc.\n    if (url.match(/^[a-z]+:/i)) {\n        return url;\n    }\n    var doc = document.implementation.createHTMLDocument();\n    var base = doc.createElement('base');\n    var a = doc.createElement('a');\n    doc.head.appendChild(base);\n    doc.body.appendChild(a);\n    if (baseUrl) {\n        base.href = baseUrl;\n    }\n    a.href = url;\n    return a.href;\n}\nfunction escape(url) {\n    return url.replace(/([.*+?^${}()|\\[\\]\\/\\\\])/g, '\\\\$1');\n}\nfunction urlToRegex(url) {\n    return new RegExp(\"(url\\\\(['\\\"]?)(\" + escape(url) + \")(['\\\"]?\\\\))\", 'g');\n}\nfunction parseURLs(str) {\n    var result = [];\n    str.replace(URL_REGEX, function (raw, quotation, url) {\n        result.push(url);\n        return raw;\n    });\n    return result.filter(function (url) { return !utils_1.isDataUrl(url); });\n}\nfunction embed(cssString, resourceURL, baseURL, options) {\n    var resolvedURL = baseURL ? resolveUrl(resourceURL, baseURL) : resourceURL;\n    return Promise.resolve(resolvedURL)\n        .then(function (url) { return getBlobFromURL_1.default(url, options); })\n        .then(function (data) { return utils_1.toDataURL(data, utils_1.getMimeType(resourceURL)); })\n        .then(function (dataURL) { return cssString.replace(urlToRegex(resourceURL), \"$1\" + dataURL + \"$3\"); })\n        .then(function (content) { return content; }, function () { return resolvedURL; });\n}\nfunction shouldEmbed(string) {\n    return string.search(URL_REGEX) !== -1;\n}\nexports.shouldEmbed = shouldEmbed;\nfunction embedResources(cssString, baseUrl, options) {\n    if (!shouldEmbed(cssString)) {\n        return Promise.resolve(cssString);\n    }\n    return Promise.resolve(cssString)\n        .then(parseURLs)\n        .then(function (urls) { return urls.reduce(function (done, url) { return done.then(function (ret) { return embed(ret, url, baseUrl, options); }); }, Promise.resolve(cssString)); });\n}\nexports.default = embedResources;\n","\"use strict\";\n/* tslint:disable:max-line-length */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar utils_1 = require(\"./utils\");\n// KNOWN ISSUE\n// -----------\n// Can not handle redirect-url, such as when access 'http://something.com/avatar.png'\n// will redirect to 'http://something.com/65fc2ffcc8aea7ba65a1d1feda173540'\nvar TIMEOUT = 30000;\nfunction getBlobFromURL(url, options) {\n    // cache bypass so we dont have CORS issues with cached images\n    // ref: https://developer.mozilla.org/en/docs/Web/API/XMLHttpRequest/Using_XMLHttpRequest#Bypassing_the_cache\n    if (options.cacheBust) {\n        url += ((/\\?/).test(url) ? '&' : '?') + (new Date()).getTime(); // tslint:disable-line\n    }\n    var failed = function (reason) {\n        var placeholder = '';\n        if (options.imagePlaceholder) {\n            var split = options.imagePlaceholder.split(/,/);\n            if (split && split[1]) {\n                placeholder = split[1];\n            }\n        }\n        var msg = \"Failed to fetch resource: \" + url;\n        if (reason) {\n            msg = typeof reason === 'string' ? reason : reason.message;\n        }\n        if (msg) {\n            console.error(msg);\n        }\n        return placeholder;\n    };\n    var deferred = window.fetch\n        // fetch\n        ? window.fetch(url)\n            .then(function (response) { return response.blob(); })\n            .then(function (blob) { return new Promise(function (resolve, reject) {\n            var reader = new FileReader();\n            reader.onloadend = function () { return resolve(reader.result); };\n            reader.onerror = reject;\n            reader.readAsDataURL(blob);\n        }); })\n            .then(utils_1.getDataURLContent)\n            .catch(function () { return new Promise(function (resolve, reject) {\n            reject();\n        }); })\n        // xhr\n        : new Promise((function (resolve, reject) {\n            var req = new XMLHttpRequest();\n            var timeout = function () {\n                reject(new Error(\"Timeout of \" + TIMEOUT + \"ms occured while fetching resource: \" + url));\n            };\n            var done = function () {\n                if (req.readyState !== 4) {\n                    return;\n                }\n                if (req.status !== 200) {\n                    reject(new Error(\"Failed to fetch resource: \" + url + \", status: \" + req.status));\n                    return;\n                }\n                var encoder = new FileReader();\n                encoder.onloadend = function () {\n                    resolve(utils_1.getDataURLContent(encoder.result));\n                };\n                encoder.readAsDataURL(req.response);\n            };\n            req.onreadystatechange = done;\n            req.ontimeout = timeout;\n            req.responseType = 'blob';\n            req.timeout = TIMEOUT;\n            req.open('GET', url, true);\n            req.send();\n        }));\n    return deferred.catch(failed);\n}\nexports.default = getBlobFromURL;\n","\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar cloneNode_1 = __importDefault(require(\"./cloneNode\"));\nvar embedWebFonts_1 = __importDefault(require(\"./embedWebFonts\"));\nvar embedImages_1 = __importDefault(require(\"./embedImages\"));\nvar createSvgDataURL_1 = __importDefault(require(\"./createSvgDataURL\"));\nvar applyStyleWithOptions_1 = __importDefault(require(\"./applyStyleWithOptions\"));\nvar utils_1 = require(\"./utils\");\nfunction getImageSize(domNode, options) {\n    if (options === void 0) { options = {}; }\n    var width = options.width || utils_1.getNodeWidth(domNode);\n    var height = options.height || utils_1.getNodeHeight(domNode);\n    return { width: width, height: height };\n}\nfunction toSvgDataURL(domNode, options) {\n    if (options === void 0) { options = {}; }\n    var _a = getImageSize(domNode, options), width = _a.width, height = _a.height;\n    return cloneNode_1.default(domNode, options.filter, true)\n        .then(function (clonedNode) { return embedWebFonts_1.default(clonedNode, options); })\n        .then(function (clonedNode) { return embedImages_1.default(clonedNode, options); })\n        .then(function (clonedNode) { return applyStyleWithOptions_1.default(clonedNode, options); })\n        .then(function (clonedNode) { return createSvgDataURL_1.default(clonedNode, width, height); });\n}\nexports.toSvgDataURL = toSvgDataURL;\nfunction toCanvas(domNode, options) {\n    if (options === void 0) { options = {}; }\n    return toSvgDataURL(domNode, options)\n        .then(utils_1.createImage)\n        .then(utils_1.delay(100))\n        .then(function (image) {\n        var canvas = document.createElement('canvas');\n        var context = canvas.getContext('2d');\n        var ratio = utils_1.getPixelRatio();\n        var _a = getImageSize(domNode, options), width = _a.width, height = _a.height;\n        canvas.width = width * ratio;\n        canvas.height = height * ratio;\n        canvas.style.width = \"\" + width;\n        canvas.style.height = \"\" + height;\n        context.scale(ratio, ratio);\n        if (options.backgroundColor) {\n            context.fillStyle = options.backgroundColor;\n            context.fillRect(0, 0, canvas.width, canvas.height);\n        }\n        context.drawImage(image, 0, 0);\n        return canvas;\n    });\n}\nexports.toCanvas = toCanvas;\nfunction toPixelData(domNode, options) {\n    if (options === void 0) { options = {}; }\n    var _a = getImageSize(domNode, options), width = _a.width, height = _a.height;\n    return toCanvas(domNode, options)\n        .then(function (canvas) { return (canvas.getContext('2d').getImageData(0, 0, width, height).data); });\n}\nexports.toPixelData = toPixelData;\nfunction toPng(domNode, options) {\n    if (options === void 0) { options = {}; }\n    return toCanvas(domNode, options).then(function (canvas) { return (canvas.toDataURL()); });\n}\nexports.toPng = toPng;\nfunction toJpeg(domNode, options) {\n    if (options === void 0) { options = {}; }\n    return toCanvas(domNode, options).then(function (canvas) { return (canvas.toDataURL('image/jpeg', options.quality || 1)); });\n}\nexports.toJpeg = toJpeg;\nfunction toBlob(domNode, options) {\n    if (options === void 0) { options = {}; }\n    return toCanvas(domNode, options).then(utils_1.canvasToBlob);\n}\nexports.toBlob = toBlob;\nexports.default = {\n    toSvgDataURL: toSvgDataURL,\n    toCanvas: toCanvas,\n    toPixelData: toPixelData,\n    toPng: toPng,\n    toJpeg: toJpeg,\n    toBlob: toBlob,\n};\n","import Map from '../src/ol/Map.js';\nimport View from '../src/ol/View.js';\nimport Overlay from '../src/ol/Overlay.js';\nimport GeoJSON from '../src/ol/format/GeoJSON.js';\nimport {Tile as TileLayer, Vector as VectorLayer} from '../src/ol/layer.js';\nimport {OSM, Vector as VectorSource} from '../src/ol/source.js';\n\nimport {toPng} from 'html-to-image';\n\nconst map = new Map({\n  layers: [\n    new TileLayer({\n      source: new OSM()\n    }),\n    new VectorLayer({\n      source: new VectorSource({\n        url: 'data/geojson/countries.geojson',\n        format: new GeoJSON()\n      })\n    })\n  ],\n  target: 'map',\n  view: new View({\n    center: [0, 0],\n    zoom: 2\n  })\n});\n\nmap.addOverlay(new Overlay({\n  position: [0, 0],\n  element: document.getElementById('null')\n}));\n\n\n// export options for html-to-image.\n// See: https://github.com/bubkoo/html-to-image#options\nconst exportOptions = {\n  filter: function(element) {\n    return element.className ? element.className.indexOf('ol-control') === -1 : true;\n  }\n};\n\ndocument.getElementById('export-png').addEventListener('click', function() {\n  map.once('rendercomplete', function() {\n    toPng(map.getTargetElement(), exportOptions)\n      .then(function(dataURL) {\n        const link = document.getElementById('image-download');\n        link.href = dataURL;\n        link.click();\n      });\n  });\n  map.renderSync();\n});\n","\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar utils_1 = require(\"./utils\");\nvar clonePseudoElements_1 = __importDefault(require(\"./clonePseudoElements\"));\nfunction cloneSingleNode(nativeNode) {\n    if (nativeNode instanceof HTMLCanvasElement) {\n        return utils_1.createImage(nativeNode.toDataURL());\n    }\n    if (nativeNode.tagName && nativeNode.tagName.toLowerCase() === 'svg') {\n        return Promise.resolve(nativeNode)\n            .then(function (svg) { return utils_1.svgToDataURL(svg); })\n            .then(utils_1.createImage);\n    }\n    return Promise.resolve(nativeNode.cloneNode(false));\n}\nfunction cloneChildren(nativeNode, clonedNode, filter) {\n    var children = utils_1.toArray(nativeNode.childNodes);\n    if (children.length === 0) {\n        return Promise.resolve(clonedNode);\n    }\n    // clone children in order\n    return children.reduce(function (done, child) { return done\n        .then(function () { return cloneNode(child, filter); })\n        .then(function (clonedChild) {\n        if (clonedChild) {\n            clonedNode.appendChild(clonedChild);\n        }\n    }); }, Promise.resolve())\n        .then(function () { return clonedNode; });\n}\nfunction cloneCssStyle(nativeNode, clonedNode) {\n    var source = window.getComputedStyle(nativeNode);\n    var target = clonedNode.style;\n    if (source.cssText) {\n        target.cssText = source.cssText;\n    }\n    else {\n        utils_1.toArray(source).forEach(function (name) {\n            target.setProperty(name, source.getPropertyValue(name), source.getPropertyPriority(name));\n        });\n    }\n}\nfunction cloneInputValue(nativeNode, clonedNode) {\n    if (nativeNode instanceof HTMLTextAreaElement) {\n        clonedNode.innerHTML = nativeNode.value;\n    }\n    if (nativeNode instanceof HTMLInputElement) {\n        clonedNode.setAttribute('value', nativeNode.value);\n    }\n}\nfunction decorate(nativeNode, clonedNode) {\n    if (!(clonedNode instanceof Element)) {\n        return clonedNode;\n    }\n    return Promise.resolve()\n        .then(function () { return cloneCssStyle(nativeNode, clonedNode); })\n        .then(function () { return clonePseudoElements_1.default(nativeNode, clonedNode); })\n        .then(function () { return cloneInputValue(nativeNode, clonedNode); })\n        .then(function () { return clonedNode; });\n}\nfunction cloneNode(domNode, filter, isRoot) {\n    if (!isRoot && filter && !filter(domNode)) {\n        return Promise.resolve(null);\n    }\n    return Promise.resolve(domNode)\n        .then(cloneSingleNode)\n        .then(function (clonedNode) { return cloneChildren(domNode, clonedNode, filter); })\n        .then(function (clonedNode) { return decorate(domNode, clonedNode); });\n}\nexports.default = cloneNode;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar utils_1 = require(\"./utils\");\nfunction formatCssText(style) {\n    var content = style.getPropertyValue('content');\n    return style.cssText + \" content: \" + content + \";\";\n}\nfunction formatCssProperties(style) {\n    return utils_1.toArray(style).map(function (name) {\n        var value = style.getPropertyValue(name);\n        var priority = style.getPropertyPriority(name);\n        return name + \": \" + value + (priority ? ' !important' : '') + \";\";\n    }).join(' ');\n}\nfunction getPseudoElementStyle(className, pseudo, style) {\n    var selector = \".\" + className + \":\" + pseudo;\n    var cssText = style.cssText ? formatCssText(style) : formatCssProperties(style);\n    return document.createTextNode(selector + \"{\" + cssText + \"}\");\n}\nfunction clonePseudoElement(nativeNode, clonedNode, pseudo) {\n    var style = window.getComputedStyle(nativeNode, pseudo);\n    var content = style.getPropertyValue('content');\n    if (content === '' || content === 'none') {\n        return;\n    }\n    var className = utils_1.uuid();\n    var styleElement = document.createElement('style');\n    styleElement.appendChild(getPseudoElementStyle(className, pseudo, style));\n    clonedNode.className = clonedNode.className + \" \" + className;\n    clonedNode.appendChild(styleElement);\n}\nfunction clonePseudoElements(nativeNode, clonedNode) {\n    [\n        ':before',\n        ':after',\n    ].forEach(function (pseudo) { return clonePseudoElement(nativeNode, clonedNode, pseudo); });\n}\nexports.default = clonePseudoElements;\n","\"use strict\";\nvar __importStar = (this && this.__importStar) || function (mod) {\n    if (mod && mod.__esModule) return mod;\n    var result = {};\n    if (mod != null) for (var k in mod) if (Object.hasOwnProperty.call(mod, k)) result[k] = mod[k];\n    result[\"default\"] = mod;\n    return result;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar utils_1 = require(\"./utils\");\nvar embedResources_1 = __importStar(require(\"./embedResources\"));\nfunction parseCSS(source) {\n    if (source === undefined) {\n        return [];\n    }\n    var cssText = source;\n    var css = [];\n    var cssKeyframeRegex = '((@.*?keyframes [\\\\s\\\\S]*?){([\\\\s\\\\S]*?}\\\\s*?)})';\n    var combinedCSSRegex = '((\\\\s*?(?:\\\\/\\\\*[\\\\s\\\\S]*?\\\\*\\\\/)?\\\\s*?@media[\\\\s\\\\S]'\n        + '*?){([\\\\s\\\\S]*?)}\\\\s*?})|(([\\\\s\\\\S]*?){([\\\\s\\\\S]*?)})'; // to match css & media queries together\n    var cssCommentsRegex = new RegExp('(\\\\/\\\\*[\\\\s\\\\S]*?\\\\*\\\\/)', 'gi');\n    // strip out comments\n    cssText = cssText.replace(cssCommentsRegex, '');\n    var keyframesRegex = new RegExp(cssKeyframeRegex, 'gi');\n    var arr;\n    while (true) {\n        arr = keyframesRegex.exec(cssText);\n        if (arr === null) {\n            break;\n        }\n        css.push(arr[0]);\n    }\n    cssText = cssText.replace(keyframesRegex, '');\n    // unified regex\n    var unified = new RegExp(combinedCSSRegex, 'gi');\n    while (true) {\n        arr = unified.exec(cssText);\n        if (arr === null) {\n            break;\n        }\n        css.push(arr[0]);\n    }\n    return css;\n}\nfunction fetchCSS(url, sheet) {\n    return fetch(url).then(function (res) {\n        return {\n            url: url,\n            cssText: res.text(),\n        };\n    }, function (e) {\n        console.log('ERROR FETCHING CSS: ', e.toString());\n    });\n}\nfunction embedFonts(data) {\n    return data.cssText.then(function (resolved) {\n        var cssText = resolved;\n        var fontLocations = cssText.match(/url\\([^)]+\\)/g) || [];\n        var fontLoadedPromises = fontLocations.map(function (location) {\n            var url = location.replace(/url\\(([^]+)\\)/g, '$1');\n            if (!url.startsWith('https://')) {\n                var source = data.url;\n                url = new URL(url, source).href;\n            }\n            return new Promise(function (resolve, reject) {\n                fetch(url)\n                    .then(function (res) { return res.blob(); })\n                    .then(function (blob) {\n                    var reader = new FileReader();\n                    reader.addEventListener('load', function (res) {\n                        // Side Effect\n                        cssText = cssText.replace(location, \"url(\" + reader.result + \")\");\n                        resolve([location, reader.result]);\n                    });\n                    reader.readAsDataURL(blob);\n                })\n                    .catch(reject);\n            });\n        });\n        return Promise.all(fontLoadedPromises).then(function () { return cssText; });\n    });\n}\nfunction getCssRules(styleSheets) {\n    var ret = [];\n    var promises = [];\n    // First loop inlines imports\n    styleSheets.forEach(function (sheet) {\n        if ('cssRules' in sheet) {\n            try {\n                utils_1.toArray(sheet.cssRules).forEach(function (item) {\n                    if (item.type === CSSRule.IMPORT_RULE) {\n                        promises.push(fetchCSS(item.href, sheet)\n                            .then(embedFonts)\n                            .then(function (cssText) {\n                            var parsed = parseCSS(cssText);\n                            parsed.forEach(function (rule) {\n                                sheet.insertRule(rule, sheet.cssRules.length);\n                            });\n                        })\n                            .catch(function (e) {\n                            console.log('Error loading remote css', e.toString());\n                        }));\n                    }\n                });\n            }\n            catch (e) {\n                var inline_1 = styleSheets.find(function (a) { return a.href === null; }) || document.styleSheets[0];\n                if (sheet.href != null) {\n                    promises.push(fetchCSS(sheet.href, inline_1)\n                        .then(embedFonts)\n                        .then(function (cssText) {\n                        var parsed = parseCSS(cssText);\n                        parsed.forEach(function (rule) {\n                            inline_1.insertRule(rule, sheet.cssRules.length);\n                        });\n                    })\n                        .catch(function (e) {\n                        console.log('Error loading remote stylesheet', e.toString());\n                    }));\n                }\n                console.log('Error inlining remote css file', e.toString());\n            }\n        }\n    });\n    return Promise\n        .all(promises)\n        .then(function () {\n        // Second loop parses rules\n        styleSheets.forEach(function (sheet) {\n            if ('cssRules' in sheet) {\n                try {\n                    utils_1.toArray(sheet.cssRules).forEach(function (item) {\n                        ret.push(item);\n                    });\n                }\n                catch (e) {\n                    console.log(\"Error while reading CSS rules from \" + sheet.href, e.toString());\n                }\n            }\n        });\n        return ret;\n    });\n}\nfunction getWebFontRules(cssRules) {\n    return cssRules\n        .filter(function (rule) { return rule.type === CSSRule.FONT_FACE_RULE; })\n        .filter(function (rule) { return embedResources_1.shouldEmbed(rule.style.getPropertyValue('src')); });\n}\nfunction parseWebFontRules(clonedNode) {\n    return new Promise(function (resolve, reject) {\n        if (!clonedNode.ownerDocument) {\n            reject(new Error('Provided element is not within a Document'));\n        }\n        resolve(utils_1.toArray(clonedNode.ownerDocument.styleSheets));\n    })\n        .then(getCssRules)\n        .then(getWebFontRules);\n}\nexports.parseWebFontRules = parseWebFontRules;\nfunction embedWebFonts(clonedNode, options) {\n    return parseWebFontRules(clonedNode)\n        .then(function (rules) { return Promise.all(rules.map(function (rule) {\n        var baseUrl = rule.parentStyleSheet ? rule.parentStyleSheet.href : null;\n        return embedResources_1.default(rule.cssText, baseUrl, options);\n    })); })\n        .then(function (cssStrings) { return cssStrings.join('\\n'); })\n        .then(function (cssString) {\n        var styleNode = document.createElement('style');\n        var sytleContent = document.createTextNode(cssString);\n        styleNode.appendChild(sytleContent);\n        if (clonedNode.firstChild) {\n            clonedNode.insertBefore(styleNode, clonedNode.firstChild);\n        }\n        else {\n            clonedNode.appendChild(styleNode);\n        }\n        return clonedNode;\n    });\n}\nexports.default = embedWebFonts;\n","\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar utils_1 = require(\"./utils\");\nvar getBlobFromURL_1 = __importDefault(require(\"./getBlobFromURL\"));\nvar embedResources_1 = __importDefault(require(\"./embedResources\"));\nfunction embedBackground(clonedNode, options) {\n    var background = clonedNode.style.getPropertyValue('background');\n    if (!background) {\n        return Promise.resolve(clonedNode);\n    }\n    return Promise.resolve(background)\n        .then(function (cssString) { return embedResources_1.default(cssString, null, options); })\n        .then(function (cssString) {\n        clonedNode.style.setProperty('background', cssString, clonedNode.style.getPropertyPriority('background'));\n        return clonedNode;\n    });\n}\nfunction embedImageNode(clonedNode, options) {\n    if (!(clonedNode instanceof HTMLImageElement) || utils_1.isDataUrl(clonedNode.src)) {\n        return Promise.resolve(clonedNode);\n    }\n    return Promise.resolve(clonedNode.src)\n        .then(function (url) { return getBlobFromURL_1.default(url, options); })\n        .then(function (data) { return utils_1.toDataURL(data, utils_1.getMimeType(clonedNode.src)); })\n        .then(function (dataURL) { return new Promise((function (resolve, reject) {\n        clonedNode.onload = resolve;\n        clonedNode.onerror = reject;\n        clonedNode.src = dataURL;\n    })); })\n        .then(function () { return clonedNode; }, function () { return clonedNode; });\n}\nfunction embedChildren(clonedNode, options) {\n    var children = utils_1.toArray(clonedNode.childNodes);\n    var deferreds = children.map(function (child) { return embedImages(child, options); });\n    return Promise.all(deferreds).then(function () { return clonedNode; });\n}\nfunction embedImages(clonedNode, options) {\n    if (!(clonedNode instanceof Element)) {\n        return Promise.resolve(clonedNode);\n    }\n    return Promise.resolve(clonedNode)\n        .then(function (node) { return embedBackground(node, options); })\n        .then(function (node) { return embedImageNode(node, options); })\n        .then(function (node) { return embedChildren(node, options); });\n}\nexports.default = embedImages;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar utils_1 = require(\"./utils\");\nfunction createSvgDataURL(clonedNode, width, height) {\n    var xmlns = 'http://www.w3.org/2000/svg';\n    var svg = document.createElementNS(xmlns, 'svg');\n    var foreignObject = document.createElementNS(xmlns, 'foreignObject');\n    svg.setAttributeNS('', 'width', \"\" + width);\n    svg.setAttributeNS('', 'height', \"\" + height);\n    foreignObject.setAttributeNS('', 'width', '100%');\n    foreignObject.setAttributeNS('', 'height', '100%');\n    foreignObject.setAttributeNS('', 'x', '0');\n    foreignObject.setAttributeNS('', 'y', '0');\n    foreignObject.setAttributeNS('', 'externalResourcesRequired', 'true');\n    svg.appendChild(foreignObject);\n    foreignObject.appendChild(clonedNode);\n    return utils_1.svgToDataURL(svg);\n}\nexports.default = createSvgDataURL;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nfunction applyStyleWithOptions(clonedNode, options) {\n    var style = clonedNode.style;\n    if (options.backgroundColor) {\n        style.backgroundColor = options.backgroundColor;\n    }\n    if (options.width) {\n        style.width = options.width + \"px\";\n    }\n    if (options.height) {\n        style.height = options.height + \"px\";\n    }\n    if (options.style) {\n        Object.assign(style, options.style);\n    }\n    return clonedNode;\n}\nexports.default = applyStyleWithOptions;\n"],"sourceRoot":""}