(window.webpackJsonp=window.webpackJsonp||[]).push([[134],{400:function(t,e,i){"use strict";i.r(e);var o=i(3),n=i(91),r=i(2),s=i(4),a=i(60),h=i(111),l=i(17),c=i(78),d=i(22),p=i(8),u=i(11),_=i(1),f=i(158),g=i(6),v=i(45),y=i(131),m=i(52),E=i(61),b=function(t){function e(e,i,o,n,r,s){t.call(this,e,i),this.src_=o,this.extent_=n,this.preemptive_=r,this.grid_=null,this.keys_=null,this.data_=null,this.jsonp_=s}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(h.a);b.prototype.getImage=function(){return null},b.prototype.getData=function(t){if(!this.grid_||!this.keys_)return null;var e=(t[0]-this.extent_[0])/(this.extent_[2]-this.extent_[0]),i=(t[1]-this.extent_[1])/(this.extent_[3]-this.extent_[1]),o=this.grid_[Math.floor((1-i)*this.grid_.length)];if("string"!=typeof o)return null;var n=o.charCodeAt(Math.floor(e*o.length));n>=93&&n--,n>=35&&n--;var r=null;if((n-=32)in this.keys_){var s=this.keys_[n];r=this.data_&&s in this.data_?this.data_[s]:s}return r},b.prototype.forDataAtCoordinate=function(t,e,i,o){this.state==l.a.IDLE&&!0===o?(Object(p.b)(this,u.a.CHANGE,function(o){e.call(i,this.getData(t))},this),this.loadInternal_()):!0===o?setTimeout(function(){e.call(i,this.getData(t))}.bind(this),0):e.call(i,this.getData(t))},b.prototype.getKey=function(){return this.src_},b.prototype.handleError_=function(){this.state=l.a.ERROR,this.changed()},b.prototype.handleLoad_=function(t){this.grid_=t.grid,this.keys_=t.keys,this.data_=t.data,this.state=l.a.EMPTY,this.changed()},b.prototype.loadInternal_=function(){if(this.state==l.a.IDLE)if(this.state=l.a.LOADING,this.jsonp_)Object(f.a)(this.src_,this.handleLoad_.bind(this),this.handleError_.bind(this));else{var t=new XMLHttpRequest;t.addEventListener("load",this.onXHRLoad_.bind(this)),t.addEventListener("error",this.onXHRError_.bind(this)),t.open("GET",this.src_),t.send()}},b.prototype.onXHRLoad_=function(t){var e=t.target;if(!e.status||e.status>=200&&e.status<300){var i;try{i=JSON.parse(e.responseText)}catch(t){return void this.handleError_()}this.handleLoad_(i)}else this.handleError_()},b.prototype.onXHRError_=function(t){this.handleError_()},b.prototype.load=function(){this.preemptive_&&this.loadInternal_()};var O=function(t){function e(e){if(t.call(this,{projection:Object(g.g)("EPSG:3857"),state:v.a.LOADING}),this.preemptive_=void 0===e.preemptive||e.preemptive,this.tileUrlFunction_=c.d,this.template_=void 0,this.jsonp_=e.jsonp||!1,e.url)if(this.jsonp_)Object(f.a)(e.url,this.handleTileJSONResponse.bind(this),this.handleTileJSONError.bind(this));else{var i=new XMLHttpRequest;i.addEventListener("load",this.onXHRLoad_.bind(this)),i.addEventListener("error",this.onXHRError_.bind(this)),i.open("GET",e.url),i.send()}else e.tileJSON?this.handleTileJSONResponse(e.tileJSON):Object(d.a)(!1,51)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(y.b);O.prototype.onXHRLoad_=function(t){var e=t.target;if(!e.status||e.status>=200&&e.status<300){var i;try{i=JSON.parse(e.responseText)}catch(t){return void this.handleTileJSONError()}this.handleTileJSONResponse(i)}else this.handleTileJSONError()},O.prototype.onXHRError_=function(t){this.handleTileJSONError()},O.prototype.getTemplate=function(){return this.template_},O.prototype.forDataAtCoordinateAndResolution=function(t,e,i,o){if(this.tileGrid){var n=this.tileGrid.getTileCoordForCoordAndResolution(t,e);this.getTile(n[0],n[1],n[2],1,this.getProjection()).forDataAtCoordinate(t,i,null,o)}else!0===o?setTimeout(function(){i(null)},0):i(null)},O.prototype.handleTileJSONError=function(){this.setState(v.a.ERROR)},O.prototype.handleTileJSONResponse=function(t){var e,i=Object(g.g)("EPSG:4326"),o=this.getProjection();if(void 0!==t.bounds){var n=Object(g.j)(i,o);e=Object(_.a)(t.bounds,n)}var r=t.minzoom||0,s=t.maxzoom||22,a=Object(E.b)({extent:Object(E.c)(o),maxZoom:s,minZoom:r});this.tileGrid=a,this.template_=t.template;var h=t.grids;if(h){if(this.tileUrlFunction_=Object(c.a)(h,a),void 0!==t.attribution){var l=void 0!==e?e:i.getExtent();this.setAttributions(function(e){return Object(_.F)(l,e.extent)?[t.attribution]:null})}this.setState(v.a.READY)}else this.setState(v.a.ERROR)},O.prototype.getTile=function(t,e,i,o,n){var r=Object(m.d)(t,e,i);if(this.tileCache.containsKey(r))return this.tileCache.get(r);var s=[t,e,i],a=this.getTileCoordForTileUrlFunction(s,n),h=this.tileUrlFunction_(a,o,n),c=new b(s,void 0!==h?l.a.IDLE:l.a.EMPTY,void 0!==h?h:"",this.tileGrid.getTileCoordExtent(s),this.preemptive_,this.jsonp_);return this.tileCache.set(r,c),c},O.prototype.useTile=function(t,e,i){var o=Object(m.d)(t,e,i);this.tileCache.containsKey(o)&&this.tileCache.get(o)};var j=O,R="pk.eyJ1IjoiYWhvY2V2YXIiLCJhIjoiY2pzbmg0Nmk5MGF5NzQzbzRnbDNoeHJrbiJ9.7_-_gL8ur7ZtEiNwRfCy7Q",T=new s.a({source:new a.a({url:"https://api.tiles.mapbox.com/v4/mapbox.geography-class.json?secure&access_token="+R})}),L=new j({url:"https://api.tiles.mapbox.com/v4/mapbox.geography-class.json?secure&access_token="+R}),S=new s.a({source:L}),x=new r.a({center:[0,0],zoom:1}),J=document.getElementById("map"),w=new o.a({layers:[T,S],target:J,view:x}),C=document.getElementById("country-info"),I=document.getElementById("country-flag"),N=document.getElementById("country-name"),k=new n.a({element:C,offset:[15,15],stopEvent:!1});w.addOverlay(k);var D=function(t){var e=x.getResolution();L.forDataAtCoordinateAndResolution(t,e,function(e){J.style.cursor=e?"pointer":"",e&&(I.src="data:image/png;base64,"+e.flag_png,N.innerHTML=e.admin),k.setPosition(e?t:void 0)})};w.on("pointermove",function(t){if(!t.dragging){var e=w.getEventCoordinate(t.originalEvent);D(e)}}),w.on("click",function(t){D(t.coordinate)})}},[[400,0]]]);
//# sourceMappingURL=utfgrid.js.map